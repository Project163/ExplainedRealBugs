{"url":"https://api.github.com/repos/catchorg/Catch2/issues/1456","repository_url":"https://api.github.com/repos/catchorg/Catch2","labels_url":"https://api.github.com/repos/catchorg/Catch2/issues/1456/labels{/name}","comments_url":"https://api.github.com/repos/catchorg/Catch2/issues/1456/comments","events_url":"https://api.github.com/repos/catchorg/Catch2/issues/1456/events","html_url":"https://github.com/catchorg/Catch2/issues/1456","id":384039130,"node_id":"MDU6SXNzdWUzODQwMzkxMzA=","number":1456,"title":"INFO() generates -Wextra-semi-stmt with clang++-latest","user":{"login":"AndrewPaxie","id":11957419,"node_id":"MDQ6VXNlcjExOTU3NDE5","avatar_url":"https://avatars.githubusercontent.com/u/11957419?v=4","gravatar_id":"","url":"https://api.github.com/users/AndrewPaxie","html_url":"https://github.com/AndrewPaxie","followers_url":"https://api.github.com/users/AndrewPaxie/followers","following_url":"https://api.github.com/users/AndrewPaxie/following{/other_user}","gists_url":"https://api.github.com/users/AndrewPaxie/gists{/gist_id}","starred_url":"https://api.github.com/users/AndrewPaxie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndrewPaxie/subscriptions","organizations_url":"https://api.github.com/users/AndrewPaxie/orgs","repos_url":"https://api.github.com/users/AndrewPaxie/repos","events_url":"https://api.github.com/users/AndrewPaxie/events{/privacy}","received_events_url":"https://api.github.com/users/AndrewPaxie/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":513091177,"node_id":"MDU6TGFiZWw1MTMwOTExNzc=","url":"https://api.github.com/repos/catchorg/Catch2/labels/Warnings%20issue","name":"Warnings issue","color":"f9d0c4","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/catchorg/Catch2/milestones/3","html_url":"https://github.com/catchorg/Catch2/milestone/3","labels_url":"https://api.github.com/repos/catchorg/Catch2/milestones/3/labels","id":3119156,"node_id":"MDk6TWlsZXN0b25lMzExOTE1Ng==","number":3,"title":"3.0","description":null,"creator":{"login":"philsquared","id":92878,"node_id":"MDQ6VXNlcjkyODc4","avatar_url":"https://avatars.githubusercontent.com/u/92878?v=4","gravatar_id":"","url":"https://api.github.com/users/philsquared","html_url":"https://github.com/philsquared","followers_url":"https://api.github.com/users/philsquared/followers","following_url":"https://api.github.com/users/philsquared/following{/other_user}","gists_url":"https://api.github.com/users/philsquared/gists{/gist_id}","starred_url":"https://api.github.com/users/philsquared/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/philsquared/subscriptions","organizations_url":"https://api.github.com/users/philsquared/orgs","repos_url":"https://api.github.com/users/philsquared/repos","events_url":"https://api.github.com/users/philsquared/events{/privacy}","received_events_url":"https://api.github.com/users/philsquared/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":10,"closed_issues":26,"state":"open","created_at":"2018-02-15T11:27:04Z","updated_at":"2022-07-26T12:39:52Z","due_on":null,"closed_at":null},"comments":0,"created_at":"2018-11-25T01:58:21Z","updated_at":"2020-10-16T15:52:32Z","closed_at":"2020-10-16T15:52:22Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Description\r\n\r\nCompile the unit tests for the [Trompeloeil](https://github.com/rollbear/trompeloeil\r\n) mock object library.\r\n\r\n**Expected result**: The unit tests compile without warnings or errors.\r\n\r\n**Actual result**: The compilation completes with this warning message,\r\n\r\n```text\r\ntest/compiling_tests_11.cpp:245:24:\r\nwarning: empty expression statement has no effect;\r\nremove unnecessary ';' to silence this warning [-Wextra-semi-stmt]\r\n    INFO(\"msg=\" << msg);\r\n                       ^\r\n```\r\n\r\n63 warnings of this kind total.\r\n\r\nOther combinations of C\\+\\+ Standard Library implementation\r\nalso generate the warning.  So too does previous versions of Catch\r\ne.g. version 2.2.3.\r\n\r\n## Steps to reproduce\r\n\r\nMinimal program to reproduce issue:\r\n\r\n```cpp\r\n#include <catch.hpp>\r\n\r\nTEST_CASE(\"Foo\")\r\n{\r\n    INFO(\"Test case start\");\r\n}\r\n```\r\n\r\nCompile with Clang latest (i.e. with at least commit\r\n`0d4609da69d513b7737d2f932e3db6e57f7b11c3`).\r\n\r\nCommand line contains either\r\n\r\n```text\r\n-Weverything \\\r\n-Wno-pragma-system-header-outside-header \\\r\n-Wno-c++98-compat \\\r\n-Wno-c++98-compat-pedantic \\\r\n-Wno-unused-macros\r\n```\r\n\r\nor\r\n\r\n```text\r\n-Wno-pragma-system-header-outside-header \\\r\n-Wextra-semi-stmt\r\n```\r\n\r\nGodbolt: <https://godbolt.org/z/Y9wR08>\r\n\r\n## Extra information\r\n\r\n**Operating system**: Ubuntu 18.10 (Cosmic Cuttlefish)\\\r\n**Compiler**: `clang++-latest` (compiled from trunk)\\\r\n**Standard C\\+\\+ Library**: `libstdc++-v3` (e.g. from G\\+\\+ 8.2.0)\\\r\n**Catch version**: v2.4.2 (other versions also exhibit issue)\r\n\r\nSee also: <https://github.com/rollbear/trompeloeil/issues/107>.\r\n\r\n### Supposed cause\r\n\r\nClang latest began generating this warning with this commit\r\n\r\n```text\r\ncommit 0d4609da69d513b7737d2f932e3db6e57f7b11c3\r\nAuthor: Roman Lebedev <lebedev.ri@gmail.com>\r\nDate:   Tue Nov 20 18:59:05 2018 +0000\r\n\r\n:::\r\n\r\n    Fixes [[ https://bugs.llvm.org/show_bug.cgi?id=39111 | PR39111 ]]\r\n\r\n:::\r\n```\r\n\r\nThe issue is with Catch2: `WARN` and `CAPTURE` macros expect a semicolon\r\nto terminate them (see `INTERNAL_CATCH_MSG`, `INTERNAL_CATCH_CAPTURE`).\r\n`INFO` forwards to `INTERNAL_CATCH_INFO` which has a trailing semicolon.\r\n\r\nThe examples in the Catch documentation are also inconsistent, with semicolon\r\nterminating `INFO` in some examples and no semicolon terminating `INFO` in\r\nother examples.\r\n\r\n### Suggested fix\r\n\r\nRemove the trailing semicolon from `INTERNAL_CATCH_INFO`.\r\n\r\nUpdate the documentation to consistently have a semicolon\r\nat the end of each use of the `INFO` macro.\r\n\r\nAdvise Catch users that their code may no longer compile if they\r\nleave the trailing semicolon off their `INFO` macros.","closed_by":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/1456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/catchorg/Catch2/issues/1456/timeline","performed_via_github_app":null,"state_reason":"completed"}