{"url":"https://api.github.com/repos/catchorg/Catch2/issues/2161","repository_url":"https://api.github.com/repos/catchorg/Catch2","labels_url":"https://api.github.com/repos/catchorg/Catch2/issues/2161/labels{/name}","comments_url":"https://api.github.com/repos/catchorg/Catch2/issues/2161/comments","events_url":"https://api.github.com/repos/catchorg/Catch2/issues/2161/events","html_url":"https://github.com/catchorg/Catch2/issues/2161","id":793661936,"node_id":"MDU6SXNzdWU3OTM2NjE5MzY=","number":2161,"title":"--order=rand should imply --rng-seed='time'","user":{"login":"Minoru","id":118875,"node_id":"MDQ6VXNlcjExODg3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/118875?v=4","gravatar_id":"","url":"https://api.github.com/users/Minoru","html_url":"https://github.com/Minoru","followers_url":"https://api.github.com/users/Minoru/followers","following_url":"https://api.github.com/users/Minoru/following{/other_user}","gists_url":"https://api.github.com/users/Minoru/gists{/gist_id}","starred_url":"https://api.github.com/users/Minoru/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Minoru/subscriptions","organizations_url":"https://api.github.com/users/Minoru/orgs","repos_url":"https://api.github.com/users/Minoru/repos","events_url":"https://api.github.com/users/Minoru/events{/privacy}","received_events_url":"https://api.github.com/users/Minoru/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-01-25T19:26:22Z","updated_at":"2021-10-09T09:27:46Z","closed_at":"2021-10-09T09:27:46Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\r\nWhen I invoke tests with `--order=rand` (and no other CLI arguments), I expect the tests to be executed in random order. When I invoke the executable with the same argument again, I expect the tests to be run in a *different*, but still random, order.\r\n\r\nHowever, both 2.13.4 and 3.0.0-preview.3 don't change the order for each invocation. The order *is* different for v2 and v3, but successive runs of the same test suite runs the tests in the exact same randomized order.\r\n\r\n**Expected behavior**\r\nWhen I pass `--order=rand`, I expect the tests to be executed in an order that's different from any other order they might've been executed previously. When I re-run the tests with the same `--order=rand`, I expect the order to be different from the last time.\r\n\r\nIn other words, I expect `--order=rand` to force Catch2 to initialize its RNG with a random number, even if I didn't explicitly pass `--rng-seed`.\r\n\r\n**Reproduction steps**\r\n```c++\r\n#include \"catch_amalgamated.hpp\"\r\n\r\n#include <iostream>\r\n\r\nTEST_CASE(\"1\") { std::cout << \"1\\n\"; }\r\nTEST_CASE(\"2\") { std::cout << \"2\\n\"; }\r\nTEST_CASE(\"3\") { std::cout << \"3\\n\"; }\r\nTEST_CASE(\"4\") { std::cout << \"4\\n\"; }\r\nTEST_CASE(\"5\") { std::cout << \"5\\n\"; }\r\nTEST_CASE(\"6\") { std::cout << \"6\\n\"; }\r\nTEST_CASE(\"7\") { std::cout << \"7\\n\"; }\r\nTEST_CASE(\"8\") { std::cout << \"8\\n\"; }\r\nTEST_CASE(\"9\") { std::cout << \"9\\n\"; }\r\n```\r\n\r\nOutput of `./a.out --order=rand`:\r\n```\r\n7\r\n6\r\n5\r\n4\r\n3\r\n2\r\n1\r\n9\r\n8\r\n===============================================================================\r\ntest cases: 9 | 9 passed\r\nassertions: - none -\r\n```\r\n\r\nIt doesn't change no matter how many times I re-run the executable.\r\n\r\n\r\n**Platform information:**\r\n<!-- Fill in any extra information that might be important for your issue. -->\r\n - OS: **Debian Bullseye (testing)**\r\n - Compiler+version: **GCC v10.2** and **Clang 11.0**\r\n - Catch version: **v3.0.0-preview.3** (also tested with 2.13.4; the order there is different from v3, but it too remains constant from invocation to invocation).\r\n\r\n\r\n**Additional context**\r\nCatch2 behaved like that ever since `--order` was added in https://github.com/catchorg/Catch2/commit/fa0122bf54062dc29d5d8b34743c2bce6c2c4482, and I'm bit surprised I didn't find any prior issues about this. Is this really the intended behaviour?\r\n\r\nIf it's not, I can work on fixing this.","closed_by":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/2161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/catchorg/Catch2/issues/2161/timeline","performed_via_github_app":null,"state_reason":"completed"}