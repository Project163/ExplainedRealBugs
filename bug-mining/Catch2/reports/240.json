{"url":"https://api.github.com/repos/catchorg/Catch2/issues/2273","repository_url":"https://api.github.com/repos/catchorg/Catch2","labels_url":"https://api.github.com/repos/catchorg/Catch2/issues/2273/labels{/name}","comments_url":"https://api.github.com/repos/catchorg/Catch2/issues/2273/comments","events_url":"https://api.github.com/repos/catchorg/Catch2/issues/2273/events","html_url":"https://github.com/catchorg/Catch2/issues/2273","id":978297016,"node_id":"MDU6SXNzdWU5NzgyOTcwMTY=","number":2273,"title":"Approx::operator() not const-correct","user":{"login":"rupertnash","id":2197999,"node_id":"MDQ6VXNlcjIxOTc5OTk=","avatar_url":"https://avatars.githubusercontent.com/u/2197999?v=4","gravatar_id":"","url":"https://api.github.com/users/rupertnash","html_url":"https://github.com/rupertnash","followers_url":"https://api.github.com/users/rupertnash/followers","following_url":"https://api.github.com/users/rupertnash/following{/other_user}","gists_url":"https://api.github.com/users/rupertnash/gists{/gist_id}","starred_url":"https://api.github.com/users/rupertnash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rupertnash/subscriptions","organizations_url":"https://api.github.com/users/rupertnash/orgs","repos_url":"https://api.github.com/users/rupertnash/repos","events_url":"https://api.github.com/users/rupertnash/events{/privacy}","received_events_url":"https://api.github.com/users/rupertnash/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":524197132,"node_id":"MDU6TGFiZWw1MjQxOTcxMzI=","url":"https://api.github.com/repos/catchorg/Catch2/labels/Revisit","name":"Revisit","color":"006b75","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-08-24T16:50:24Z","updated_at":"2021-08-26T19:27:47Z","closed_at":"2021-08-26T19:27:47Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\r\n\r\nThe `Approx` type has an overload of `template <typename T, ...SFINAE...> Approx operator()(T const&)` which (correct me if I'm wrong) is meant to be a factory function for instances that have the same epsilon, margin, and scale, but that use the passed value. \r\n\r\nAFAICT this should be const on the instance, but it's not.\r\n\r\nMinimum failing example:\r\n```C++\r\n#include <catch2/catch.hpp>\r\n\r\nTEST_CASE(\"Approx factory is const-correct\") {\r\n  // Set up a template Approx with problem-specific margin, etc.\r\n  Approx const apprx = Approx(0.0).margin(1e-6);\r\n  double value = 1.0;\r\n  // Use template in assertions\r\n  REQUIRE(value == apprx(1.0));\r\n}\r\n```\r\n\r\n**Expected behavior**\r\nAbove test compiles, runs and passes.\r\n\r\n**Reproduction steps**\r\nSee above.\r\n\r\n**Platform information:**\r\n - OS: RHEL 8\r\n - Compiler+version: GCC 8.2.0\r\n - Catch version: 2.13.6\r\n\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n","closed_by":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/2273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/catchorg/Catch2/issues/2273/timeline","performed_via_github_app":null,"state_reason":"completed"}