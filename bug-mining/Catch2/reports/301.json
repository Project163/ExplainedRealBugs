{"url":"https://api.github.com/repos/catchorg/Catch2/issues/2722","repository_url":"https://api.github.com/repos/catchorg/Catch2","labels_url":"https://api.github.com/repos/catchorg/Catch2/issues/2722/labels{/name}","comments_url":"https://api.github.com/repos/catchorg/Catch2/issues/2722/comments","events_url":"https://api.github.com/repos/catchorg/Catch2/issues/2722/events","html_url":"https://github.com/catchorg/Catch2/issues/2722","id":1814154113,"node_id":"I_kwDOABA2rM5sIcuB","number":2722,"title":"Build failure when Catch2 is installed in the system","user":{"login":"LukashonakV","id":23121044,"node_id":"MDQ6VXNlcjIzMTIxMDQ0","avatar_url":"https://avatars.githubusercontent.com/u/23121044?v=4","gravatar_id":"","url":"https://api.github.com/users/LukashonakV","html_url":"https://github.com/LukashonakV","followers_url":"https://api.github.com/users/LukashonakV/followers","following_url":"https://api.github.com/users/LukashonakV/following{/other_user}","gists_url":"https://api.github.com/users/LukashonakV/gists{/gist_id}","starred_url":"https://api.github.com/users/LukashonakV/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LukashonakV/subscriptions","organizations_url":"https://api.github.com/users/LukashonakV/orgs","repos_url":"https://api.github.com/users/LukashonakV/repos","events_url":"https://api.github.com/users/LukashonakV/events{/privacy}","received_events_url":"https://api.github.com/users/LukashonakV/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1991723753,"node_id":"MDU6TGFiZWwxOTkxNzIzNzUz","url":"https://api.github.com/repos/catchorg/Catch2/labels/Good%20First%20Issue","name":"Good First Issue","color":"fce180","default":false,"description":"Issues that can be undertaken by someone new to the project"},{"id":2921031942,"node_id":"MDU6TGFiZWwyOTIxMDMxOTQy","url":"https://api.github.com/repos/catchorg/Catch2/labels/Building%20and%20Packaging","name":"Building and Packaging","color":"FBCA00","default":false,"description":"Issues affecting build/packaging scripts and utilities"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-07-20T14:39:49Z","updated_at":"2023-09-13T08:06:15Z","closed_at":"2023-09-13T08:06:15Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\r\nWaybar application uses Catch2 as a subproject and has dependency on it. See [Waybar test main.cpp](https://github.com/Alexays/Waybar/blob/master/test/main.cpp). It includes Catch headers like: `#include <catch2/catch_all.hpp>`\r\nWhen Catch2 is not installed in the system meson downloads and provides necessary dependencies for Catch2 subproject automatically. When Catch2 is installed in the system, meson provides necessary headers are installed in the system.\r\nThen `catch_all.hpp` header includes [#include <catch2/matchers/catch_matchers_all.hpp>](https://github.com/catchorg/Catch2/blob/4acc51828f7f93f3b2058a63f54d112af4034503/src/catch2/catch_all.hpp#L127). Then `catch_matchers_all.hpp` includes [#include <catch2/matchers/catch_matchers_range_equals.hpp>](https://github.com/catchorg/Catch2/blob/4acc51828f7f93f3b2058a63f54d112af4034503/src/catch2/matchers/catch_matchers_all.hpp#L30) . \r\nIf we check [meson.build](https://github.com/catchorg/Catch2/blob/devel/src/catch2/meson.build) we don't see `catch_matchers_range_equals.hpp` header should be installed in the system. For Catch2 itself building and installation process it's not an issue.... but\r\nWhen external Application is trying to use Catch2 as a library and tries to include `#include <catch2/catch_all.hpp>` it will get a compiler error due to by the chain builder will not find catch_matchers_range_equals.hpp due to according meson.build it won't been installed.\r\n\r\nSo for now with installed catch2 version 3.3.2 during Waybar build process we've got an error:\r\n`FAILED: test/waybar_test.p/main.cpp.o \r\nc++ -Itest/waybar_test.p -Itest -I../test -I../include -I/usr/include/gtkmm-3.0 -I/usr/lib64/gtkmm-3.0/include -I/usr/include/giomm-2.4 -I/usr/lib64/giomm-2.4/include -I/usr/include/glib-2.0 -I/usr/lib64/glib-2.0/include -I/usr/lib64/libffi/include -I/usr/include/libmount -I/usr/include/blkid -I/usr/include/glibmm-2.4 -I/usr/lib64/glibmm-2.4/include -I/usr/include/sigc++-2.0 -I/usr/lib64/sigc++-2.0/include -I/usr/include/gtk-3.0 -I/usr/include/pango-1.0 -I/usr/include/harfbuzz -I/usr/include/freetype2 -I/usr/include/fribidi -I/usr/include/cairo -I/usr/include/libpng16 -I/usr/include/pixman-1 -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/gio-unix-2.0 -I/usr/include/atk-1.0 -I/usr/include/at-spi2-atk/2.0 -I/usr/include/at-spi-2.0 -I/usr/include/dbus-1.0 -I/usr/lib64/dbus-1.0/include -I/usr/include/cairomm-1.0 -I/usr/lib64/cairomm-1.0/include -I/usr/include/pangomm-1.4 -I/usr/lib64/pangomm-1.4/include -I/usr/include/atkmm-1.6 -I/usr/lib64/atkmm-1.6/include -I/usr/include/gtk-3.0/unix-print -I/usr/include/gdkmm-3.0 -I/usr/lib64/gdkmm-3.0/include -I/usr/include/jsoncpp -I/usr/include -fdiagnostics-color=always -D_FILE_OFFSET_BITS=64 -Wall -Winvalid-pch -std=c++17 -O3 '-DVERSION=\"0.9.19-29-gdffba784 (branch '\"'\"'master'\"'\"')\"' -DHAVE_LANGINFO_1STDAY '-DSYSCONFDIR=\"//usr/local/etc\"' -DHAVE_CPU_LINUX -DHAVE_MEMORY_LINUX -DHAVE_SWAY -DHAVE_WLR -DHAVE_RIVER -DHAVE_DWL -DHAVE_HYPRLAND -DHAVE_LIBNL -DHAVE_GAMEMODE -DHAVE_UPOWER -DHAVE_LIBPULSE -DHAVE_LIBJACK -DHAVE_LIBWIREPLUMBER -DHAVE_DBUSMENU -DHAVE_LIBUDEV -DHAVE_LIBEVDEV -DHAVE_LIBINPUT -DHAVE_GTK_LAYER_SHELL -DHAVE_GIO_UNIX -DHAVE_LIBDATE -DHAVE_LIBCAVA -DONLY_C_LOCALE=0 -DUSE_OS_TZDB=1 -DSPDLOG_SHARED_LIB -DSPDLOG_COMPILED_LIB -DSPDLOG_FMT_EXTERNAL -pthread -MD -MQ test/waybar_test.p/main.cpp.o -MF test/waybar_test.p/main.cpp.o.d -o test/waybar_test.p/main.cpp.o -c ../test/main.cpp\r\nIn file included from /usr/include/catch2/catch_all.hpp:123,\r\n                 from ../test/main.cpp:7:\r\n/usr/include/catch2/matchers/catch_matchers_all.hpp:30:10: fatal error: catch2/matchers/catch_matchers_range_equals.hpp: No such file or directory\r\n   30 | #include <catch2/matchers/catch_matchers_range_equals.hpp>\r\n      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\ncompilation terminated.`\r\n\r\n**Expected behavior**\r\nExternal application should be built successful with catch2 dependencies\r\n\r\n**Reproduction steps**\r\n\r\n1. Install catch2 into system\r\n2. Git clone [Waybar](https://github.com/Alexays/Waybar) project\r\n3. cd Waybar && make\r\n\r\n**Platform information:**\r\n<!-- Fill in any extra information that might be important for your issue. -->\r\n - OS: **Linux 6.1.38-gentoo-x86_64 # 1 SMP PREEMPT_DYNAMIC Wed Jul 12 15:19:30 +03 2023 x86_64 12th Gen Intel(R) Core(TM) i7-1260P GenuineIntel GNU/Linux**\r\n - Compiler+version: **gcc (Gentoo 12.3.1_p20230526 p2) 12.3.1 20230526**\r\n - Catch version: **v3.3.2**\r\n\r\n\r\n**Additional context**\r\n\r\n1. Doesn't help [Migrating from v2 to v3](https://github.com/catchorg/Catch2/blob/devel/docs/migrate-v2-to-v3.md#top)\r\n2. [ISSUE2272.txt](https://github.com/catchorg/Catch2/files/12111821/ISSUE2272.txt)\r\n\r\n","closed_by":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/2722/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/catchorg/Catch2/issues/2722/timeline","performed_via_github_app":null,"state_reason":"completed"}