[{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/291787212","html_url":"https://github.com/catchorg/Catch2/issues/881#issuecomment-291787212","issue_url":"https://api.github.com/repos/catchorg/Catch2/issues/881","id":291787212,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MTc4NzIxMg==","user":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-05T08:12:42Z","updated_at":"2017-04-05T08:12:42Z","body":"This is interesting, I stepped into the REQUIRE and by the time `SourceLineInfo` is constructed, we already receive line 8 as line info.\r\n\r\nEven more interestingly, if I change `test2.cpp` to this\r\n```cpp\r\n#include \"catch.hpp\"\r\n\r\n#include <iostream>\r\n\r\nTEST_CASE(\"test2\", \"\") {\r\n    std::cout << __LINE__ << '\\n';\r\n    REQUIRE(1 == 2);\r\n}\r\n```\r\nI get this output\r\n```\r\n8\r\n\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nCatchWork.exe is a Catch v1.8.2 host application.\r\nRun with -? for options\r\n\r\n-------------------------------------------------------------------------------\r\ntest2\r\n-------------------------------------------------------------------------------\r\nc:\\users\\xarn\\documents\\github\\catchwork\\catchwork\\test2.cpp(5)\r\n...............................................................................\r\n\r\nc:\\users\\xarn\\documents\\github\\catchwork\\catchwork\\test2.cpp(9): FAILED:\r\n  REQUIRE( 1 == 2 )\r\n```\r\nwhich suggests, that somehow `TEST_CASE` increases the line count generated by compiler.\r\n\r\nHowever, when I add yet another test case to the file, it works as expected, that is, it prints out the proper line numbers:\r\n```cpp\r\n#include \"catch.hpp\"\r\n\r\n#include <iostream>\r\n\r\nTEST_CASE(\"test2\") {\r\n    std::cout << __LINE__ << '\\n';\r\n    REQUIRE(1 == 2);\r\n}\r\n\r\nTEST_CASE(\"test3\") {\r\n    std::cout << __LINE__ << '\\n';\r\n    REQUIRE(1 == 2);\r\n}\r\n```\r\n\r\n```\r\n8\r\n\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nCatchWork.exe is a Catch v1.8.2 host application.\r\nRun with -? for options\r\n\r\n-------------------------------------------------------------------------------\r\ntest2\r\n-------------------------------------------------------------------------------\r\nc:\\users\\xarn\\documents\\github\\catchwork\\catchwork\\test2.cpp(5)\r\n...............................................................................\r\n\r\nc:\\users\\xarn\\documents\\github\\catchwork\\catchwork\\test2.cpp(9): FAILED:\r\n  REQUIRE( 1 == 2 )\r\n\r\n11\r\n-------------------------------------------------------------------------------\r\ntest3\r\n-------------------------------------------------------------------------------\r\nc:\\users\\xarn\\documents\\github\\catchwork\\catchwork\\test2.cpp(10)\r\n...............................................................................\r\n\r\nc:\\users\\xarn\\documents\\github\\catchwork\\catchwork\\test2.cpp(12): FAILED:\r\n  REQUIRE( 1 == 2 )\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/291787212/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1029892404,"node_id":"MDEyOkxhYmVsZWRFdmVudDEwMjk4OTI0MDQ=","url":"https://api.github.com/repos/catchorg/Catch2/issues/events/1029892404","actor":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-04-05T08:12:51Z","label":{"name":"Possible bug","color":"fbca04"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/291891033","html_url":"https://github.com/catchorg/Catch2/issues/881#issuecomment-291891033","issue_url":"https://api.github.com/repos/catchorg/Catch2/issues/881","id":291891033,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MTg5MTAzMw==","user":{"login":"turha654","id":26480520,"node_id":"MDQ6VXNlcjI2NDgwNTIw","avatar_url":"https://avatars.githubusercontent.com/u/26480520?v=4","gravatar_id":"","url":"https://api.github.com/users/turha654","html_url":"https://github.com/turha654","followers_url":"https://api.github.com/users/turha654/followers","following_url":"https://api.github.com/users/turha654/following{/other_user}","gists_url":"https://api.github.com/users/turha654/gists{/gist_id}","starred_url":"https://api.github.com/users/turha654/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/turha654/subscriptions","organizations_url":"https://api.github.com/users/turha654/orgs","repos_url":"https://api.github.com/users/turha654/repos","events_url":"https://api.github.com/users/turha654/events{/privacy}","received_events_url":"https://api.github.com/users/turha654/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-05T15:05:15Z","updated_at":"2017-04-05T15:05:15Z","body":"I tried expanding the macro manually and at some point it starts giving correct results, I didn't expand the INTERNAL_CATCH_TESTCASE2 macro further because the UNIQUE_NAME macro expansion started to give correct line numbers, so I don't know if expanding the TESTCASE2 further would also have started to give proper results. Also possibly worth noting is the fact that all the wrong line numbers are the same (8) in this test. Hopefully this might help find the actual root of the problem.\r\n\r\nMy comments in the file expect that only one TEST_CASE is uncommented at a time. At the bottom is the test case with just single macro expansion done manually and from there every TEST_CASE above is one further expansion. The first one gives correct results.\r\n```\r\n#include \"catch.hpp\"\r\n\r\n// Expanding the TEST_CASE macro manually\r\n\r\n///*\r\n// The below one produces correct results, 7 and 8\r\nINTERNAL_CATCH_TESTCASE2(INTERNAL_CATCH_UNIQUE_NAME_LINE2(____C_A_T_C_H____T_E_S_T____, __COUNTER__), \"test3.4\", \"\") {\r\n\tREQUIRE(1 == 34);\r\n}\r\n//*/\r\n\r\n\r\n\r\n\r\n// All of the below ones produce wrong results (the TEST_CASE line correct, the REQUIRE line wrong)\r\n\r\n\r\n/*\r\n// Produces 20 (correct) and 8 (incorrect)\r\nINTERNAL_CATCH_TESTCASE2(INTERNAL_CATCH_UNIQUE_NAME_LINE(____C_A_T_C_H____T_E_S_T____, __COUNTER__), \"test3.3\", \"\") {\r\nREQUIRE(1 == 33);\r\n}\r\n*/\r\n\r\n\r\n/*\r\n// Produces 28 (correct) and 8 (incorrect)\r\nINTERNAL_CATCH_TESTCASE2(INTERNAL_CATCH_UNIQUE_NAME(____C_A_T_C_H____T_E_S_T____), \"test3.2\", \"\") {\r\n\tREQUIRE(1 == 32);\r\n}\r\n*/\r\n\r\n\r\n/*\r\n// Produces 36 (correct) and 8 (incorrect)\r\nINTERNAL_CATCH_TESTCASE(\"test3.1\", \"\") {\r\n\tREQUIRE(1 == 31);\r\n}\r\n*/\r\n\r\n\r\n/*\r\n// Produces 44 (correct) and 8 (incorrect)\r\nTEST_CASE(\"test3.0\", \"\") {\r\n\tREQUIRE(1 == 30);\r\n}\r\n*/\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/291891033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"turha654","id":26480520,"node_id":"MDQ6VXNlcjI2NDgwNTIw","avatar_url":"https://avatars.githubusercontent.com/u/26480520?v=4","gravatar_id":"","url":"https://api.github.com/users/turha654","html_url":"https://github.com/turha654","followers_url":"https://api.github.com/users/turha654/followers","following_url":"https://api.github.com/users/turha654/following{/other_user}","gists_url":"https://api.github.com/users/turha654/gists{/gist_id}","starred_url":"https://api.github.com/users/turha654/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/turha654/subscriptions","organizations_url":"https://api.github.com/users/turha654/orgs","repos_url":"https://api.github.com/users/turha654/repos","events_url":"https://api.github.com/users/turha654/events{/privacy}","received_events_url":"https://api.github.com/users/turha654/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/291921376","html_url":"https://github.com/catchorg/Catch2/issues/881#issuecomment-291921376","issue_url":"https://api.github.com/repos/catchorg/Catch2/issues/881","id":291921376,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MTkyMTM3Ng==","user":{"login":"turha654","id":26480520,"node_id":"MDQ6VXNlcjI2NDgwNTIw","avatar_url":"https://avatars.githubusercontent.com/u/26480520?v=4","gravatar_id":"","url":"https://api.github.com/users/turha654","html_url":"https://github.com/turha654","followers_url":"https://api.github.com/users/turha654/followers","following_url":"https://api.github.com/users/turha654/following{/other_user}","gists_url":"https://api.github.com/users/turha654/gists{/gist_id}","starred_url":"https://api.github.com/users/turha654/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/turha654/subscriptions","organizations_url":"https://api.github.com/users/turha654/orgs","repos_url":"https://api.github.com/users/turha654/repos","events_url":"https://api.github.com/users/turha654/events{/privacy}","received_events_url":"https://api.github.com/users/turha654/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-05T16:40:38Z","updated_at":"2017-04-05T16:40:38Z","body":"I compiled the project in VS2015 with preprocessor output going to file and compared test2.i (preprocessed .cpp) while compiling having test0.cpp and not having it. So with the issue and without it. The preprocessor output was identical (fc found do differences), at the very bottom there's a line that has:\r\n::Catch::SourceLineInfo(\"...\", static_cast<std::size_t>( 4 ))\r\n\r\nSo it seems to me that the correct line number is provided to Catch. Then I tried debugging it while having the problem (just test1 and test2 .cpp files and main.cpp of course), I break-pointed on ::Catch::SourceLineInfo(...) and got following results:\r\ntest1.cpp 7 - this is the TEST_CASE line\r\ntest2.cpp 3 - this is the TEST_CASE line\r\ncatch.hpp 1843\r\ntest1.cpp 8 - this is the REQUIRE line\r\ncatch.hpp 1843\r\n\r\nNot sure what the catch.hpp ones are, but for some reason it seems the test2.cpp REQUIRE is not added at all. So all the line numbers added are correct, it's just that one of the REQUIRE's is missing?\r\n\r\nNot really sure where to look next, hopefully you will have some ideas.\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/291921376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"turha654","id":26480520,"node_id":"MDQ6VXNlcjI2NDgwNTIw","avatar_url":"https://avatars.githubusercontent.com/u/26480520?v=4","gravatar_id":"","url":"https://api.github.com/users/turha654","html_url":"https://github.com/turha654","followers_url":"https://api.github.com/users/turha654/followers","following_url":"https://api.github.com/users/turha654/following{/other_user}","gists_url":"https://api.github.com/users/turha654/gists{/gist_id}","starred_url":"https://api.github.com/users/turha654/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/turha654/subscriptions","organizations_url":"https://api.github.com/users/turha654/orgs","repos_url":"https://api.github.com/users/turha654/repos","events_url":"https://api.github.com/users/turha654/events{/privacy}","received_events_url":"https://api.github.com/users/turha654/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/302232352","html_url":"https://github.com/catchorg/Catch2/issues/881#issuecomment-302232352","issue_url":"https://api.github.com/repos/catchorg/Catch2/issues/881","id":302232352,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjIzMjM1Mg==","user":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-17T21:09:06Z","updated_at":"2017-05-17T21:09:06Z","body":"So I got back around to this and I found an interesting thing. This bug does not manifest itself when compiling tests in release mode.\r\n\r\nI opened a Microsoft Connect bug (goddamn, that is the worst bug reporting experience I've had, its like they don't want people to report bugs) and will see where it goes from here.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/302232352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/302233060","html_url":"https://github.com/catchorg/Catch2/issues/881#issuecomment-302233060","issue_url":"https://api.github.com/repos/catchorg/Catch2/issues/881","id":302233060,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjIzMzA2MA==","user":{"login":"nabijaczleweli","id":6709544,"node_id":"MDQ6VXNlcjY3MDk1NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/6709544?v=4","gravatar_id":"","url":"https://api.github.com/users/nabijaczleweli","html_url":"https://github.com/nabijaczleweli","followers_url":"https://api.github.com/users/nabijaczleweli/followers","following_url":"https://api.github.com/users/nabijaczleweli/following{/other_user}","gists_url":"https://api.github.com/users/nabijaczleweli/gists{/gist_id}","starred_url":"https://api.github.com/users/nabijaczleweli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nabijaczleweli/subscriptions","organizations_url":"https://api.github.com/users/nabijaczleweli/orgs","repos_url":"https://api.github.com/users/nabijaczleweli/repos","events_url":"https://api.github.com/users/nabijaczleweli/events{/privacy}","received_events_url":"https://api.github.com/users/nabijaczleweli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-17T21:12:14Z","updated_at":"2017-05-17T21:12:14Z","body":"People can't tell your software is dogshit if they can't report *why* it's dogshit.\r\n\r\n![black man pointing at own temple](http://i0.kym-cdn.com/photos/images/facebook/001/217/711/afd.jpg_large)","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/302233060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nabijaczleweli","id":6709544,"node_id":"MDQ6VXNlcjY3MDk1NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/6709544?v=4","gravatar_id":"","url":"https://api.github.com/users/nabijaczleweli","html_url":"https://github.com/nabijaczleweli","followers_url":"https://api.github.com/users/nabijaczleweli/followers","following_url":"https://api.github.com/users/nabijaczleweli/following{/other_user}","gists_url":"https://api.github.com/users/nabijaczleweli/gists{/gist_id}","starred_url":"https://api.github.com/users/nabijaczleweli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nabijaczleweli/subscriptions","organizations_url":"https://api.github.com/users/nabijaczleweli/orgs","repos_url":"https://api.github.com/users/nabijaczleweli/repos","events_url":"https://api.github.com/users/nabijaczleweli/events{/privacy}","received_events_url":"https://api.github.com/users/nabijaczleweli/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/306917858","html_url":"https://github.com/catchorg/Catch2/issues/881#issuecomment-306917858","issue_url":"https://api.github.com/repos/catchorg/Catch2/issues/881","id":306917858,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNjkxNzg1OA==","user":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-07T20:39:37Z","updated_at":"2017-06-07T20:39:37Z","body":"As an update, the issue is \"under investigation\", so... who knows.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/306917858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1341769100,"node_id":"MDExOkNsb3NlZEV2ZW50MTM0MTc2OTEwMA==","url":"https://api.github.com/repos/catchorg/Catch2/issues/events/1341769100","actor":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"97a8640cbf10a8ff3d6f06f0293f5c37b263144a","commit_url":"https://api.github.com/repos/catchorg/Catch2/commits/97a8640cbf10a8ff3d6f06f0293f5c37b263144a","created_at":"2017-11-14T21:06:35Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-07-20T20:51:59Z","updated_at":"2018-07-20T20:51:59Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/1342","repository_url":"https://api.github.com/repos/catchorg/Catch2","labels_url":"https://api.github.com/repos/catchorg/Catch2/issues/1342/labels{/name}","comments_url":"https://api.github.com/repos/catchorg/Catch2/issues/1342/comments","events_url":"https://api.github.com/repos/catchorg/Catch2/issues/1342/events","html_url":"https://github.com/catchorg/Catch2/issues/1342","id":343171286,"node_id":"MDU6SXNzdWUzNDMxNzEyODY=","number":1342,"title":"Wrong source line number in Catch2 ouput.","user":{"login":"xkbeyer","id":10296657,"node_id":"MDQ6VXNlcjEwMjk2NjU3","avatar_url":"https://avatars.githubusercontent.com/u/10296657?v=4","gravatar_id":"","url":"https://api.github.com/users/xkbeyer","html_url":"https://github.com/xkbeyer","followers_url":"https://api.github.com/users/xkbeyer/followers","following_url":"https://api.github.com/users/xkbeyer/following{/other_user}","gists_url":"https://api.github.com/users/xkbeyer/gists{/gist_id}","starred_url":"https://api.github.com/users/xkbeyer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xkbeyer/subscriptions","organizations_url":"https://api.github.com/users/xkbeyer/orgs","repos_url":"https://api.github.com/users/xkbeyer/repos","events_url":"https://api.github.com/users/xkbeyer/events{/privacy}","received_events_url":"https://api.github.com/users/xkbeyer/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":833198946,"node_id":"MDU6TGFiZWw4MzMxOTg5NDY=","url":"https://api.github.com/repos/catchorg/Catch2/labels/3rd%20party%20bug","name":"3rd party bug","color":"006b75","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-07-20T16:29:03Z","updated_at":"2018-08-17T14:03:21Z","closed_at":"2018-08-12T08:03:39Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":1062572,"node_id":"MDEwOlJlcG9zaXRvcnkxMDYyNTcy","name":"Catch2","full_name":"catchorg/Catch2","private":false,"owner":{"login":"catchorg","id":33321405,"node_id":"MDEyOk9yZ2FuaXphdGlvbjMzMzIxNDA1","avatar_url":"https://avatars.githubusercontent.com/u/33321405?v=4","gravatar_id":"","url":"https://api.github.com/users/catchorg","html_url":"https://github.com/catchorg","followers_url":"https://api.github.com/users/catchorg/followers","following_url":"https://api.github.com/users/catchorg/following{/other_user}","gists_url":"https://api.github.com/users/catchorg/gists{/gist_id}","starred_url":"https://api.github.com/users/catchorg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/catchorg/subscriptions","organizations_url":"https://api.github.com/users/catchorg/orgs","repos_url":"https://api.github.com/users/catchorg/repos","events_url":"https://api.github.com/users/catchorg/events{/privacy}","received_events_url":"https://api.github.com/users/catchorg/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/catchorg/Catch2","description":"A modern, C++-native, test framework for unit-tests, TDD and BDD - using C++14, C++17 and later (C++11 support is in v2.x branch, and C++03 on the Catch1.x branch)","fork":false,"url":"https://api.github.com/repos/catchorg/Catch2","forks_url":"https://api.github.com/repos/catchorg/Catch2/forks","keys_url":"https://api.github.com/repos/catchorg/Catch2/keys{/key_id}","collaborators_url":"https://api.github.com/repos/catchorg/Catch2/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/catchorg/Catch2/teams","hooks_url":"https://api.github.com/repos/catchorg/Catch2/hooks","issue_events_url":"https://api.github.com/repos/catchorg/Catch2/issues/events{/number}","events_url":"https://api.github.com/repos/catchorg/Catch2/events","assignees_url":"https://api.github.com/repos/catchorg/Catch2/assignees{/user}","branches_url":"https://api.github.com/repos/catchorg/Catch2/branches{/branch}","tags_url":"https://api.github.com/repos/catchorg/Catch2/tags","blobs_url":"https://api.github.com/repos/catchorg/Catch2/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/catchorg/Catch2/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/catchorg/Catch2/git/refs{/sha}","trees_url":"https://api.github.com/repos/catchorg/Catch2/git/trees{/sha}","statuses_url":"https://api.github.com/repos/catchorg/Catch2/statuses/{sha}","languages_url":"https://api.github.com/repos/catchorg/Catch2/languages","stargazers_url":"https://api.github.com/repos/catchorg/Catch2/stargazers","contributors_url":"https://api.github.com/repos/catchorg/Catch2/contributors","subscribers_url":"https://api.github.com/repos/catchorg/Catch2/subscribers","subscription_url":"https://api.github.com/repos/catchorg/Catch2/subscription","commits_url":"https://api.github.com/repos/catchorg/Catch2/commits{/sha}","git_commits_url":"https://api.github.com/repos/catchorg/Catch2/git/commits{/sha}","comments_url":"https://api.github.com/repos/catchorg/Catch2/comments{/number}","issue_comment_url":"https://api.github.com/repos/catchorg/Catch2/issues/comments{/number}","contents_url":"https://api.github.com/repos/catchorg/Catch2/contents/{+path}","compare_url":"https://api.github.com/repos/catchorg/Catch2/compare/{base}...{head}","merges_url":"https://api.github.com/repos/catchorg/Catch2/merges","archive_url":"https://api.github.com/repos/catchorg/Catch2/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/catchorg/Catch2/downloads","issues_url":"https://api.github.com/repos/catchorg/Catch2/issues{/number}","pulls_url":"https://api.github.com/repos/catchorg/Catch2/pulls{/number}","milestones_url":"https://api.github.com/repos/catchorg/Catch2/milestones{/number}","notifications_url":"https://api.github.com/repos/catchorg/Catch2/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/catchorg/Catch2/labels{/name}","releases_url":"https://api.github.com/repos/catchorg/Catch2/releases{/id}","deployments_url":"https://api.github.com/repos/catchorg/Catch2/deployments","created_at":"2010-11-08T18:22:56Z","updated_at":"2025-11-09T16:52:13Z","pushed_at":"2025-11-09T22:14:04Z","git_url":"git://github.com/catchorg/Catch2.git","ssh_url":"git@github.com:catchorg/Catch2.git","clone_url":"https://github.com/catchorg/Catch2.git","svn_url":"https://github.com/catchorg/Catch2","homepage":"https://discord.gg/4CWS9zD","size":29422,"stargazers_count":19944,"watchers_count":19944,"language":"C++","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":3165,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":415,"license":{"key":"bsl-1.0","name":"Boost Software License 1.0","spdx_id":"BSL-1.0","url":"https://api.github.com/licenses/bsl-1.0","node_id":"MDc6TGljZW5zZTI4"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["bdd","cpp","cpp14","framework","no-dependencies","tdd","test-framework","testing"],"visibility":"public","forks":3165,"open_issues":415,"watchers":19944,"default_branch":"devel","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"## Description\r\n\r\nThe line number of some test checks are wrong. It happens only in debug mode and in certain combinations.\r\nThe failures do appear in all reporter.\r\n\r\n### Steps to reproduce\r\nThe solution has two files:\r\n\r\nFile 1:\r\n```\r\n//============================================================================\r\n// \r\n// \r\n// \r\n// \r\n// \r\n//============================================================================\r\n\r\n#define CATCH_CONFIG_MAIN\r\n#include \"catch.hpp\"\r\n#include <iostream>\r\n\r\nnamespace CatchUnitTest {\r\nTEST_CASE(\"Simple test case\", \"[tag]\")\r\n{\r\n   REQUIRE(9 == 0);\r\n}\r\n\r\n}\r\n```\r\n\r\nFile 2:\r\n```\r\n#include <cstdlib>\r\n#include <cstdio>\r\n#include \"catch.hpp\"\r\n\r\nnamespace CatchUnitTest {\r\n\r\nTEST_CASE(\"Warn\", \"[Logging]\")\r\n{\r\n   CHECK(false); \r\n}\r\n\r\n}\r\n```\r\n\r\nThe solution is build as Debug x64.\r\n\r\nThe output looks like:\r\n```\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<Catch name=\"CatchUnitTest.exe\">\r\n  <Group name=\"CatchUnitTest.exe\">\r\n    <TestCase name=\"Warn\" tags=\"[Logging]\" filename=\"c:\\develop\\src\\tt\\catchunittest\\loggingmacros.cpp\" line=\"7\">\r\n      <Expression success=\"false\" type=\"CHECK\" filename=\"c:\\develop\\src\\tt\\catchunittest\\loggingmacros.cpp\" line=\"9\">\r\n        <Original>\r\n          false\r\n        </Original>\r\n        <Expanded>\r\n          false\r\n        </Expanded>\r\n      </Expression>\r\n      <OverallResult success=\"false\"/>\r\n    </TestCase>\r\n    <TestCase name=\"Simple test case\" tags=\"[tag]\" filename=\"c:\\develop\\src\\tt\\catchunittest\\testrunnertest.cpp\" line=\"14\">\r\n      <Expression success=\"false\" type=\"REQUIRE\" filename=\"c:\\develop\\src\\tt\\catchunittest\\testrunnertest.cpp\" line=\"9\">\r\n        <Original>\r\n          9 == 0\r\n        </Original>\r\n        <Expanded>\r\n          9 == 0\r\n        </Expanded>\r\n      </Expression>\r\n      <OverallResult success=\"false\"/>\r\n    </TestCase>\r\n    <OverallResults successes=\"0\" failures=\"2\" expectedFailures=\"0\"/>\r\n  </Group>\r\n  <OverallResults successes=\"0\" failures=\"2\" expectedFailures=\"0\"/>\r\n</Catch>\r\n```\r\n\r\nThe `REQUIRE()` in `TEST_CASE(\"Simple test case\", \"[tag]\")` is reported as on line 9 but it is on line 16. However the line number of the TEST_CASE itself is correct.\r\n\r\nIf needed I can upload the whole solution, just let me know.  \r\n\r\n\r\n### Extra information\r\n* Catch version: **v2.2.3**\r\n* Operating System: **Win10 64 bit**\r\n* Compiler+version: **VS2017**\r\n","reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/1342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/catchorg/Catch2/issues/1342/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":1745659907,"node_id":"MDEyOkxhYmVsZWRFdmVudDE3NDU2NTk5MDc=","url":"https://api.github.com/repos/catchorg/Catch2/issues/events/1745659907","actor":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-07-20T20:52:22Z","label":{"name":"3rd party bug","color":"006b75"},"performed_via_github_app":null},{"id":1745659910,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50MTc0NTY1OTkxMA==","url":"https://api.github.com/repos/catchorg/Catch2/issues/events/1745659910","actor":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2018-07-20T20:52:22Z","label":{"name":"Possible bug","color":"fbca04"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/546496901","html_url":"https://github.com/catchorg/Catch2/issues/881#issuecomment-546496901","issue_url":"https://api.github.com/repos/catchorg/Catch2/issues/881","id":546496901,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjQ5NjkwMQ==","user":{"login":"briterator","id":13194087,"node_id":"MDQ6VXNlcjEzMTk0MDg3","avatar_url":"https://avatars.githubusercontent.com/u/13194087?v=4","gravatar_id":"","url":"https://api.github.com/users/briterator","html_url":"https://github.com/briterator","followers_url":"https://api.github.com/users/briterator/followers","following_url":"https://api.github.com/users/briterator/following{/other_user}","gists_url":"https://api.github.com/users/briterator/gists{/gist_id}","starred_url":"https://api.github.com/users/briterator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/briterator/subscriptions","organizations_url":"https://api.github.com/users/briterator/orgs","repos_url":"https://api.github.com/users/briterator/repos","events_url":"https://api.github.com/users/briterator/events{/privacy}","received_events_url":"https://api.github.com/users/briterator/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-25T20:14:58Z","updated_at":"2019-10-25T20:15:19Z","body":"Just a note for individuals coming across this in the future: we were experiencing a similar issue, but it was caused by visual studio's /ZI option (edit and continue) which is documented to not work correctly with `__LINE__`","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/546496901/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"briterator","id":13194087,"node_id":"MDQ6VXNlcjEzMTk0MDg3","avatar_url":"https://avatars.githubusercontent.com/u/13194087?v=4","gravatar_id":"","url":"https://api.github.com/users/briterator","html_url":"https://github.com/briterator","followers_url":"https://api.github.com/users/briterator/followers","following_url":"https://api.github.com/users/briterator/following{/other_user}","gists_url":"https://api.github.com/users/briterator/gists{/gist_id}","starred_url":"https://api.github.com/users/briterator/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/briterator/subscriptions","organizations_url":"https://api.github.com/users/briterator/orgs","repos_url":"https://api.github.com/users/briterator/repos","events_url":"https://api.github.com/users/briterator/events{/privacy}","received_events_url":"https://api.github.com/users/briterator/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12686900861,"node_id":"REFE_lADOABA2rM4NEh1azwAAAAL0Mr59","url":"https://api.github.com/repos/catchorg/Catch2/issues/events/12686900861","actor":{"login":"vadz","id":146917,"node_id":"MDQ6VXNlcjE0NjkxNw==","avatar_url":"https://avatars.githubusercontent.com/u/146917?v=4","gravatar_id":"","url":"https://api.github.com/users/vadz","html_url":"https://github.com/vadz","followers_url":"https://api.github.com/users/vadz/followers","following_url":"https://api.github.com/users/vadz/following{/other_user}","gists_url":"https://api.github.com/users/vadz/gists{/gist_id}","starred_url":"https://api.github.com/users/vadz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vadz/subscriptions","organizations_url":"https://api.github.com/users/vadz/orgs","repos_url":"https://api.github.com/users/vadz/repos","events_url":"https://api.github.com/users/vadz/events{/privacy}","received_events_url":"https://api.github.com/users/vadz/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"97a8640cbf10a8ff3d6f06f0293f5c37b263144a","commit_url":"https://api.github.com/repos/vadz/Catch/commits/97a8640cbf10a8ff3d6f06f0293f5c37b263144a","created_at":"2024-05-02T17:32:54Z","performed_via_github_app":null}]