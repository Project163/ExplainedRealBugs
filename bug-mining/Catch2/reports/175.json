{"url":"https://api.github.com/repos/catchorg/Catch2/issues/1693","repository_url":"https://api.github.com/repos/catchorg/Catch2","labels_url":"https://api.github.com/repos/catchorg/Catch2/issues/1693/labels{/name}","comments_url":"https://api.github.com/repos/catchorg/Catch2/issues/1693/comments","events_url":"https://api.github.com/repos/catchorg/Catch2/issues/1693/events","html_url":"https://github.com/catchorg/Catch2/issues/1693","id":469658231,"node_id":"MDU6SXNzdWU0Njk2NTgyMzE=","number":1693,"title":"Support for RTX","user":{"login":"schoetbi","id":764173,"node_id":"MDQ6VXNlcjc2NDE3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/764173?v=4","gravatar_id":"","url":"https://api.github.com/users/schoetbi","html_url":"https://github.com/schoetbi","followers_url":"https://api.github.com/users/schoetbi/followers","following_url":"https://api.github.com/users/schoetbi/following{/other_user}","gists_url":"https://api.github.com/users/schoetbi/gists{/gist_id}","starred_url":"https://api.github.com/users/schoetbi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schoetbi/subscriptions","organizations_url":"https://api.github.com/users/schoetbi/orgs","repos_url":"https://api.github.com/users/schoetbi/repos","events_url":"https://api.github.com/users/schoetbi/events{/privacy}","received_events_url":"https://api.github.com/users/schoetbi/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":524197132,"node_id":"MDU6TGFiZWw1MjQxOTcxMzI=","url":"https://api.github.com/repos/catchorg/Catch2/labels/Revisit","name":"Revisit","color":"006b75","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2019-07-18T09:15:35Z","updated_at":"2019-08-06T08:19:00Z","closed_at":"2019-07-30T09:31:54Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I successfully used Catch v2.1.2 together with the Intervalzero RTX operting system. Now I try to upgrade from Catch v2.1.2 to v2.9.1.\r\n\r\nUnfortunately I get the following linker errors when I enable the benchmark feature with `CATCH_CONFIG_ENABLE_BENCHMARKING`:\r\n```\r\n\r\nSeverity\tCode\tDescription\tProject\tFile\tLine\tSuppression State\r\nError\tLNK2019\tunresolved external symbol \"public: bool __cdecl Concurrency::critical_section::try_lock(void)\" (?try_lock@critical_section@Concurrency@@QEAA_NXZ) referenced in function \"public: virtual bool __cdecl Concurrency::details::stl_critical_section_concrt::try_lock(void)\" (?try_lock@stl_critical_section_concrt@details@Concurrency@@UEAA_NXZ)\tCalcTask.Test\tS:\\sara_rt\\src\\CalcTask.Test\\libcpmtd.lib(mutex.obj)\t1\t\r\nError\tLNK2019\tunresolved external symbol \"public: bool __cdecl Concurrency::critical_section::try_lock_for(unsigned int)\" (?try_lock_for@critical_section@Concurrency@@QEAA_NI@Z) referenced in function \"public: virtual bool __cdecl Concurrency::details::stl_critical_section_concrt::try_lock_for(unsigned int)\" (?try_lock_for@stl_critical_section_concrt@details@Concurrency@@UEAA_NI@Z)\tCalcTask.Test\tS:\\sara_rt\\src\\CalcTask.Test\\libcpmtd.lib(mutex.obj)\t1\t\r\nError\tLNK2019\tunresolved external symbol \"public: bool __cdecl Concurrency::details::_Condition_variable::wait_for(class Concurrency::critical_section &,unsigned int)\" (?wait_for@_Condition_variable@details@Concurrency@@QEAA_NAEAVcritical_section@3@I@Z) referenced in function \"public: virtual bool __cdecl Concurrency::details::stl_condition_variable_concrt::wait_for(class Concurrency::details::stl_critical_section_interface *,unsigned int)\" (?wait_for@stl_condition_variable_concrt@details@Concurrency@@UEAA_NPEAVstl_critical_section_interface@23@I@Z)\tCalcTask.Test\tS:\\sara_rt\\src\\CalcTask.Test\\libcpmtd.lib(cond.obj)\t1\t\r\nError\tLNK2019\tunresolved external symbol \"public: void __cdecl Concurrency::critical_section::lock(void)\" (?lock@critical_section@Concurrency@@QEAAXXZ) referenced in function \"public: virtual void __cdecl Concurrency::details::stl_critical_section_concrt::lock(void)\" (?lock@stl_critical_section_concrt@details@Concurrency@@UEAAXXZ)\tCalcTask.Test\tS:\\sara_rt\\src\\CalcTask.Test\\libcpmtd.lib(mutex.obj)\t1\t\r\nError\tLNK2019\tunresolved external symbol \"public: void __cdecl Concurrency::critical_section::unlock(void)\" (?unlock@critical_section@Concurrency@@QEAAXXZ) referenced in function \"public: virtual void __cdecl Concurrency::details::stl_critical_section_concrt::unlock(void)\" (?unlock@stl_critical_section_concrt@details@Concurrency@@UEAAXXZ)\tCalcTask.Test\tS:\\sara_rt\\src\\CalcTask.Test\\libcpmtd.lib(mutex.obj)\t1\t\r\nError\tLNK2019\tunresolved external symbol \"public: void __cdecl Concurrency::details::_Condition_variable::notify_all(void)\" (?notify_all@_Condition_variable@details@Concurrency@@QEAAXXZ) referenced in function \"public: virtual void __cdecl Concurrency::details::stl_condition_variable_concrt::notify_all(void)\" (?notify_all@stl_condition_variable_concrt@details@Concurrency@@UEAAXXZ)\tCalcTask.Test\tS:\\sara_rt\\src\\CalcTask.Test\\libcpmtd.lib(cond.obj)\t1\t\r\nError\tLNK2019\tunresolved external symbol \"public: void __cdecl Concurrency::details::_Condition_variable::notify_one(void)\" (?notify_one@_Condition_variable@details@Concurrency@@QEAAXXZ) referenced in function \"public: virtual void __cdecl Concurrency::details::stl_condition_variable_concrt::notify_one(void)\" (?notify_one@stl_condition_variable_concrt@details@Concurrency@@UEAAXXZ)\tCalcTask.Test\tS:\\sara_rt\\src\\CalcTask.Test\\libcpmtd.lib(cond.obj)\t1\t\r\nError\tLNK2019\tunresolved external symbol \"public: void __cdecl Concurrency::details::_Condition_variable::wait(class Concurrency::critical_section &)\" (?wait@_Condition_variable@details@Concurrency@@QEAAXAEAVcritical_section@3@@Z) referenced in function \"public: virtual void __cdecl Concurrency::details::stl_condition_variable_concrt::wait(class Concurrency::details::stl_critical_section_interface *)\" (?wait@stl_condition_variable_concrt@details@Concurrency@@UEAAXPEAVstl_critical_section_interface@23@@Z)\tCalcTask.Test\tS:\\sara_rt\\src\\CalcTask.Test\\libcpmtd.lib(cond.obj)\t1\t\r\nError\tLNK2019\tunresolved external symbol \"public: __cdecl Concurrency::critical_section::critical_section(void)\" (??0critical_section@Concurrency@@QEAA@XZ) referenced in function \"public: __cdecl Concurrency::details::stl_critical_section_concrt::stl_critical_section_concrt(void)\" (??0stl_critical_section_concrt@details@Concurrency@@QEAA@XZ)\tCalcTask.Test\tS:\\sara_rt\\src\\CalcTask.Test\\libcpmtd.lib(mutex.obj)\t1\t\r\nError\tLNK2019\tunresolved external symbol \"public: __cdecl Concurrency::critical_section::~critical_section(void)\" (??1critical_section@Concurrency@@QEAA@XZ) referenced in function \"public: void * __cdecl Concurrency::critical_section::`scalar deleting destructor'(unsigned int)\" (??_Gcritical_section@Concurrency@@QEAAPEAXI@Z)\tCalcTask.Test\tS:\\sara_rt\\src\\CalcTask.Test\\libcpmtd.lib(mutex.obj)\t1\t\r\nError\tLNK2019\tunresolved external symbol \"public: __cdecl Concurrency::details::_Condition_variable::_Condition_variable(void)\" (??0_Condition_variable@details@Concurrency@@QEAA@XZ) referenced in function \"public: __cdecl Concurrency::details::stl_condition_variable_concrt::stl_condition_variable_concrt(void)\" (??0stl_condition_variable_concrt@details@Concurrency@@QEAA@XZ)\tCalcTask.Test\tS:\\sara_rt\\src\\CalcTask.Test\\libcpmtd.lib(cond.obj)\t1\t\r\nError\tLNK2019\tunresolved external symbol \"public: __cdecl Concurrency::details::_Condition_variable::~_Condition_variable(void)\" (??1_Condition_variable@details@Concurrency@@QEAA@XZ) referenced in function \"public: void * __cdecl Concurrency::details::_Condition_variable::`scalar deleting destructor'(unsigned int)\" (??_G_Condition_variable@details@Concurrency@@QEAAPEAXI@Z)\tCalcTask.Test\tS:\\sara_rt\\src\\CalcTask.Test\\libcpmtd.lib(cond.obj)\t1\t\r\nError\tLNK2019\tunresolved external symbol __imp_DuplicateHandle referenced in function _Thrd_current\tCalcTask.Test\tS:\\sara_rt\\src\\CalcTask.Test\\libcpmtd.lib(cthread.obj)\t1\t\r\nError\tLNK2019\tunresolved external symbol __imp_GetNativeSystemInfo referenced in function _Thrd_hardware_concurrency\tCalcTask.Test\tS:\\sara_rt\\src\\CalcTask.Test\\libcpmtd.lib(cthread.obj)\t1\t\r\nError\tLNK2019\tunresolved external symbol __imp_QueueUserWorkItem referenced in function \"int __cdecl Concurrency::details::_Schedule_chore(struct Concurrency::details::_Threadpool_chore *)\" (?_Schedule_chore@details@Concurrency@@YAHPEAU_Threadpool_chore@12@@Z)\tCalcTask.Test\tS:\\sara_rt\\src\\CalcTask.Test\\libcpmtd.lib(taskscheduler.obj)\t1\t\r\nError\tLNK2019\tunresolved external symbol __imp_RtlCaptureStackBackTrace referenced in function \"unsigned __int64 __cdecl Concurrency::details::platform::CaptureCallstack(void * *,unsigned __int64,unsigned __int64)\" (?CaptureCallstack@platform@details@Concurrency@@YA_KPEAPEAX_K1@Z)\tCalcTask.Test\tS:\\sara_rt\\src\\CalcTask.Test\\libcpmtd.lib(ppltasks.obj)\t1\t\r\n\r\n```\r\n\r\nWhen disabling async with `CATCH_CONFIG_NO_USE_ASYNC` the build succeeds. But when running the test I get a crash because the class std::random_device is not supported under RTX.\r\n\r\nThis leads me to the question if there is a kind of OSAL (Operating System Abstraction Layer) so that any operating system with console IO and timing measurement could use Catch (with the benchmarking feature).\r\n\r\nIn the past I had to opt use `CATCH_CONFIG_NO_WINDOWS_SEH` and `CATCH_CONFIG_COLOUR_NONE` to be able to use Catch with RTX but I do not see a solution to opt out the `std::random_device`\r\n\r\n**Expected behavior**\r\nNew flag to opt out types from random-header `CATCH_CONFIG_NO_RANDOM` ? \r\n\r\n**Platform information:**\r\n\r\n - OS: **Windows 10**\r\n - Compiler+version: **MSVC v140**\r\n - Catch version: **v2.9.1**\r\n- Intervalzero RTX: **RTX64 3.6**\r\n","closed_by":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/1693/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/catchorg/Catch2/issues/1693/timeline","performed_via_github_app":null,"state_reason":"completed"}