{"url":"https://api.github.com/repos/catchorg/Catch2/issues/281","repository_url":"https://api.github.com/repos/catchorg/Catch2","labels_url":"https://api.github.com/repos/catchorg/Catch2/issues/281/labels{/name}","comments_url":"https://api.github.com/repos/catchorg/Catch2/issues/281/comments","events_url":"https://api.github.com/repos/catchorg/Catch2/issues/281/events","html_url":"https://github.com/catchorg/Catch2/issues/281","id":33373727,"node_id":"MDU6SXNzdWUzMzM3MzcyNw==","number":281,"title":"Compile errors on GCC 4.3, 4.4","user":{"login":"SebDyn","id":2786959,"node_id":"MDQ6VXNlcjI3ODY5NTk=","avatar_url":"https://avatars.githubusercontent.com/u/2786959?v=4","gravatar_id":"","url":"https://api.github.com/users/SebDyn","html_url":"https://github.com/SebDyn","followers_url":"https://api.github.com/users/SebDyn/followers","following_url":"https://api.github.com/users/SebDyn/following{/other_user}","gists_url":"https://api.github.com/users/SebDyn/gists{/gist_id}","starred_url":"https://api.github.com/users/SebDyn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SebDyn/subscriptions","organizations_url":"https://api.github.com/users/SebDyn/orgs","repos_url":"https://api.github.com/users/SebDyn/repos","events_url":"https://api.github.com/users/SebDyn/events{/privacy}","received_events_url":"https://api.github.com/users/SebDyn/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2014-05-13T07:15:48Z","updated_at":"2014-05-23T15:41:44Z","closed_at":"2014-05-16T17:55:28Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi Phil,\n\nusing the most recent CATCH (1.0 build 43) I encounter a compile error with older GCC versions. I fixed the issue using:\n\n``` git\n--- a/catch/catch.hpp\n+++ b/catch/catch.hpp\n@@ -742,12 +742,12 @@ namespace Detail {\n     // Writes the raw memory into a string, considering endianness\n     template<typename T>\n     std::string rawMemoryToString( T value ) {\n-        union {\n+        union rawMemoryToStringUnion {\n             T typedValue;\n             unsigned char bytes[sizeof(T)];\n-        };\n+        } my_union;\n\n-        typedValue = value;\n+        my_union.typedValue = value;\n\n         std::ostringstream oss;\n         oss << \"0x\";\n@@ -758,7 +758,7 @@ namespace Detail {\n             end = inc = -1;\n         }\n         for( ; i != end; i += inc )\n-            oss << std::hex << std::setw(2) << std::setfill('0') << (unsigned int)bytes[i];\n+            oss << std::hex << std::setw(2) << std::setfill('0') << (unsigned int)my_union.bytes[i];\n         return oss.str();\n     }\n```\n\nRegarding your test environment I would like to make some comments (I have seen that you test GCC and Clang on a single platform):\n- Many projects use -Wall -Werror with GCC. Could you, please, add these options to your tests as well?\n- Current Linux enterprise systems still use GCC 4.3 (see e.g. SLES 11). It would be nice if you add more compiler versions. At least GCC 4.4 (which can at least be used on many platforms, even as auxiliary package on older distributions like CentOS 5.4+)\n- I also typically encounter problems with MinGW (using GCC 4.8 and MinGW-w64 runtime 3.1) which usually behaves different from Linux/Mac GCC 4.8\n- I would agree that it is not necessary to test GCC 4.2.1 anymore since it is actually not any longer maintained by Apple since OS X Mavericks (not part of XCode anymore). We tended to install recent GCC versions on Mac now. Further, Clang can be expected to be quite feature-complete in 2015.\n\nBest regards\nSebastian\n","closed_by":{"login":"philsquared","id":92878,"node_id":"MDQ6VXNlcjkyODc4","avatar_url":"https://avatars.githubusercontent.com/u/92878?v=4","gravatar_id":"","url":"https://api.github.com/users/philsquared","html_url":"https://github.com/philsquared","followers_url":"https://api.github.com/users/philsquared/followers","following_url":"https://api.github.com/users/philsquared/following{/other_user}","gists_url":"https://api.github.com/users/philsquared/gists{/gist_id}","starred_url":"https://api.github.com/users/philsquared/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/philsquared/subscriptions","organizations_url":"https://api.github.com/users/philsquared/orgs","repos_url":"https://api.github.com/users/philsquared/repos","events_url":"https://api.github.com/users/philsquared/events{/privacy}","received_events_url":"https://api.github.com/users/philsquared/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/281/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/catchorg/Catch2/issues/281/timeline","performed_via_github_app":null,"state_reason":"completed"}