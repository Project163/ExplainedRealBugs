{"url":"https://api.github.com/repos/catchorg/Catch2/issues/2964","repository_url":"https://api.github.com/repos/catchorg/Catch2","labels_url":"https://api.github.com/repos/catchorg/Catch2/issues/2964/labels{/name}","comments_url":"https://api.github.com/repos/catchorg/Catch2/issues/2964/comments","events_url":"https://api.github.com/repos/catchorg/Catch2/issues/2964/events","html_url":"https://github.com/catchorg/Catch2/issues/2964","id":2924454931,"node_id":"I_kwDOABA2rM6uT6QT","number":2964,"title":"ConsoleReporter's stream is not flushed before test execution","user":{"login":"jtunhag","id":40405138,"node_id":"MDQ6VXNlcjQwNDA1MTM4","avatar_url":"https://avatars.githubusercontent.com/u/40405138?v=4","gravatar_id":"","url":"https://api.github.com/users/jtunhag","html_url":"https://github.com/jtunhag","followers_url":"https://api.github.com/users/jtunhag/followers","following_url":"https://api.github.com/users/jtunhag/following{/other_user}","gists_url":"https://api.github.com/users/jtunhag/gists{/gist_id}","starred_url":"https://api.github.com/users/jtunhag/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtunhag/subscriptions","organizations_url":"https://api.github.com/users/jtunhag/orgs","repos_url":"https://api.github.com/users/jtunhag/repos","events_url":"https://api.github.com/users/jtunhag/events{/privacy}","received_events_url":"https://api.github.com/users/jtunhag/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":513139480,"node_id":"MDU6TGFiZWw1MTMxMzk0ODA=","url":"https://api.github.com/repos/catchorg/Catch2/labels/Tweak%20request","name":"Tweak request","color":"c2e0c6","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2025-03-17T09:59:47Z","updated_at":"2025-07-10T21:52:36Z","closed_at":"2025-07-10T21:52:34Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\n**_Observed problem:_** \nThe time between the \"Filters: \" printout and the \"Randomness seeded to: \" printout for `ConsoleReporter` is long. The \"Randomness seeded to: \" is printed with the actual test output. When one of our test runs timed out, the random seed wasn't even printed at all.\n\n**_Cause:_**\nThis seems to be because `m_stream` isn't flushed at the end of `ConsoleReporter::testRunStarting()`. I can not reproduce the issue when running the catch2 executable directly, but it happens when executing through our task runner [Invoke](https://www.pyinvoke.org/), which essentially wraps the catch2 executable in a `context.run()` statement. \n\nSo yeah, it can be debated where the issue really lies, but I'm not sure Invoke or similar tools can do much to know when to output intermediate stream contents. Catch2 definitely knows when to output it's own metadata before any user code/test case is executed.\n\n**Expected behavior**\nThe filters, the random seed (and any other needed metadata about the test known beforehand) should be printed before the test is started, for reproducibility.\n\n**Reproduction steps**\nI'm not sure ATM how to provide a small, contained example with Invoke wrapping the executable to reproduce this, but will try to assemble something...\n\n**Platform information:**\n - OS: **Ubuntu 22.04.5 LTS**\n - Compiler+version: **Ubuntu clang version 14.0.0-1ubuntu1.1**\n - Catch version: **v3.5.0**\n\n","closed_by":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/2964/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/catchorg/Catch2/issues/2964/timeline","performed_via_github_app":null,"state_reason":"completed"}