[{"id":13830515533,"node_id":"RTE_lADOABA2rM6Sk8yAzwAAAAM4XOtN","url":"https://api.github.com/repos/catchorg/Catch2/issues/events/13830515533","actor":{"login":"irieger","id":142033,"node_id":"MDQ6VXNlcjE0MjAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/142033?v=4","gravatar_id":"","url":"https://api.github.com/users/irieger","html_url":"https://github.com/irieger","followers_url":"https://api.github.com/users/irieger/followers","following_url":"https://api.github.com/users/irieger/following{/other_user}","gists_url":"https://api.github.com/users/irieger/gists{/gist_id}","starred_url":"https://api.github.com/users/irieger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/irieger/subscriptions","organizations_url":"https://api.github.com/users/irieger/orgs","repos_url":"https://api.github.com/users/irieger/repos","events_url":"https://api.github.com/users/irieger/events{/privacy}","received_events_url":"https://api.github.com/users/irieger/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2024-08-11T01:01:40Z","rename":{"from":"Huge performance hit when using the JUnit reporter","to":"Huge performance hit & termination due to high memory usage when using the JUnit reporter"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/2282335531","html_url":"https://github.com/catchorg/Catch2/issues/2897#issuecomment-2282335531","issue_url":"https://api.github.com/repos/catchorg/Catch2/issues/2897","id":2282335531,"node_id":"IC_kwDOABA2rM6ICa0r","user":{"login":"irieger","id":142033,"node_id":"MDQ6VXNlcjE0MjAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/142033?v=4","gravatar_id":"","url":"https://api.github.com/users/irieger","html_url":"https://github.com/irieger","followers_url":"https://api.github.com/users/irieger/followers","following_url":"https://api.github.com/users/irieger/following{/other_user}","gists_url":"https://api.github.com/users/irieger/gists{/gist_id}","starred_url":"https://api.github.com/users/irieger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/irieger/subscriptions","organizations_url":"https://api.github.com/users/irieger/orgs","repos_url":"https://api.github.com/users/irieger/repos","events_url":"https://api.github.com/users/irieger/events{/privacy}","received_events_url":"https://api.github.com/users/irieger/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-11T01:02:13Z","updated_at":"2024-08-11T01:02:13Z","body":"I'm currently editing as continuing to extend my tests just resulted in CI failures due to killed processes.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/2282335531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"irieger","id":142033,"node_id":"MDQ6VXNlcjE0MjAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/142033?v=4","gravatar_id":"","url":"https://api.github.com/users/irieger","html_url":"https://github.com/irieger","followers_url":"https://api.github.com/users/irieger/followers","following_url":"https://api.github.com/users/irieger/following{/other_user}","gists_url":"https://api.github.com/users/irieger/gists{/gist_id}","starred_url":"https://api.github.com/users/irieger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/irieger/subscriptions","organizations_url":"https://api.github.com/users/irieger/orgs","repos_url":"https://api.github.com/users/irieger/repos","events_url":"https://api.github.com/users/irieger/events{/privacy}","received_events_url":"https://api.github.com/users/irieger/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/2285909755","html_url":"https://github.com/catchorg/Catch2/issues/2897#issuecomment-2285909755","issue_url":"https://api.github.com/repos/catchorg/Catch2/issues/2897","id":2285909755,"node_id":"IC_kwDOABA2rM6IQDb7","user":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-13T10:26:34Z","updated_at":"2024-08-13T10:26:34Z","body":"Discounting any other allocations, that would come out to about 4.6kB per assertion, which is large, but not impossibly so, especially since the peak memory usage is going to be when the underlying storage vector is reallocated, at which point the memory usage is up to 3x the quiescent state (1x existing storage, 2x the new storage).\r\n\r\n\r\n\r\nThe issue with JUnit format is that it cannot be written as the results are processed, but has to be written after all the tests are ran... and to do that, it has to store all required metadata. This means storing the metadata of every assertion that happened -> looking at how the CumulativeReporterBase stores the data, [it needs 480B per assertion if no further data are stored there](https://github.com/catchorg/Catch2/blob/8898cc61601af6cdd5b4548dd91ccf70ed67f3c2/src/catch2/reporters/catch_reporter_cumulative_base.hpp#L24-L39).\r\n\r\nThankfully it already skips [expanding the assertion message](https://github.com/catchorg/Catch2/blob/8898cc61601af6cdd5b4548dd91ccf70ed67f3c2/src/catch2/reporters/catch_reporter_cumulative_base.cpp#L113-L117) because [JUnit reporter does not ask for message in passing assertions](https://github.com/catchorg/Catch2/blob/8898cc61601af6cdd5b4548dd91ccf70ed67f3c2/src/catch2/reporters/catch_reporter_junit.cpp#L92). After looking into it further, it might be possible to have JUnit skip storing passing assertion, as it currently does not do anything with them, even when the user specifies `-s`.\r\n\r\nIf someone feels like making that optimization they are free to. But for your personal use case, you should not be having that many assertions to compare two vectors; use matchers.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/2285909755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13866689770,"node_id":"REFE_lADOABA2rM6Sk8yAzwAAAAM6hOTq","url":"https://api.github.com/repos/catchorg/Catch2/issues/events/13866689770","actor":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"c29e198eab0ccdb190495397854b937677385e2e","commit_url":"https://api.github.com/repos/catchorg/Catch2/commits/c29e198eab0ccdb190495397854b937677385e2e","created_at":"2024-08-13T17:12:03Z","performed_via_github_app":null},{"id":13866965414,"node_id":"CE_lADOABA2rM6Sk8yAzwAAAAM6iRmm","url":"https://api.github.com/repos/catchorg/Catch2/issues/events/13866965414","actor":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"fe483c056d9516d3550519c29fbf14a4d84d06d4","commit_url":"https://api.github.com/repos/catchorg/Catch2/commits/fe483c056d9516d3550519c29fbf14a4d84d06d4","created_at":"2024-08-13T17:35:45Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/2286957822","html_url":"https://github.com/catchorg/Catch2/issues/2897#issuecomment-2286957822","issue_url":"https://api.github.com/repos/catchorg/Catch2/issues/2897","id":2286957822,"node_id":"IC_kwDOABA2rM6IUDT-","user":{"login":"irieger","id":142033,"node_id":"MDQ6VXNlcjE0MjAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/142033?v=4","gravatar_id":"","url":"https://api.github.com/users/irieger","html_url":"https://github.com/irieger","followers_url":"https://api.github.com/users/irieger/followers","following_url":"https://api.github.com/users/irieger/following{/other_user}","gists_url":"https://api.github.com/users/irieger/gists{/gist_id}","starred_url":"https://api.github.com/users/irieger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/irieger/subscriptions","organizations_url":"https://api.github.com/users/irieger/orgs","repos_url":"https://api.github.com/users/irieger/repos","events_url":"https://api.github.com/users/irieger/events{/privacy}","received_events_url":"https://api.github.com/users/irieger/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-13T19:14:06Z","updated_at":"2024-08-13T19:14:06Z","body":"Hey, thanks for your reply and the general effort with Catch2. The change you merged fixes the problem.\r\n\r\nDid some more digging and now understood how the matching of vectors works. Hadn't understood that in the first run. So it was faster with the patch but now I corrected the initial mistake too. ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/catchorg/Catch2/issues/comments/2286957822/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"irieger","id":142033,"node_id":"MDQ6VXNlcjE0MjAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/142033?v=4","gravatar_id":"","url":"https://api.github.com/users/irieger","html_url":"https://github.com/irieger","followers_url":"https://api.github.com/users/irieger/followers","following_url":"https://api.github.com/users/irieger/following{/other_user}","gists_url":"https://api.github.com/users/irieger/gists{/gist_id}","starred_url":"https://api.github.com/users/irieger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/irieger/subscriptions","organizations_url":"https://api.github.com/users/irieger/orgs","repos_url":"https://api.github.com/users/irieger/repos","events_url":"https://api.github.com/users/irieger/events{/privacy}","received_events_url":"https://api.github.com/users/irieger/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13868476736,"node_id":"REFE_lADOABA2rM6Sk8yAzwAAAAM6oClA","url":"https://api.github.com/repos/catchorg/Catch2/issues/events/13868476736","actor":{"login":"horenmar","id":9026413,"node_id":"MDQ6VXNlcjkwMjY0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9026413?v=4","gravatar_id":"","url":"https://api.github.com/users/horenmar","html_url":"https://github.com/horenmar","followers_url":"https://api.github.com/users/horenmar/followers","following_url":"https://api.github.com/users/horenmar/following{/other_user}","gists_url":"https://api.github.com/users/horenmar/gists{/gist_id}","starred_url":"https://api.github.com/users/horenmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horenmar/subscriptions","organizations_url":"https://api.github.com/users/horenmar/orgs","repos_url":"https://api.github.com/users/horenmar/repos","events_url":"https://api.github.com/users/horenmar/events{/privacy}","received_events_url":"https://api.github.com/users/horenmar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"fe483c056d9516d3550519c29fbf14a4d84d06d4","commit_url":"https://api.github.com/repos/cy20lin/Catch2/commits/fe483c056d9516d3550519c29fbf14a4d84d06d4","created_at":"2024-08-13T19:55:18Z","performed_via_github_app":null}]