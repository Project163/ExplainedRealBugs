diff --git a/include/internal/catch_output_redirect.cpp b/include/internal/catch_output_redirect.cpp
index fabf9cf1..07d4a33c 100644
--- a/include/internal/catch_output_redirect.cpp
+++ b/include/internal/catch_output_redirect.cpp
@@ -15,7 +15,7 @@
 #include <sstream>
 #include <stdexcept>
 
-#if defined(CATCH_PLATFORM_WINDOWS)
+#if defined(_MSC_VER)
 #include <io.h>      //_dup and _dup2
 #define dup _dup
 #define dup2 _dup2
diff --git a/include/internal/catch_output_redirect.h b/include/internal/catch_output_redirect.h
index 121aed64..f052bd2b 100644
--- a/include/internal/catch_output_redirect.h
+++ b/include/internal/catch_output_redirect.h
@@ -66,7 +66,7 @@ namespace Catch {
 
     private:
         std::FILE* m_file = nullptr;
-    #if defined(CATCH_PLATFORM_WINDOWS)
+    #if defined(_MSC_VER)
         char m_buffer[L_tmpnam] = { 0 };
     #endif
     };
