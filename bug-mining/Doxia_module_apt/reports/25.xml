<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:53:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DOXIA-559] Doxia macro fails with markdown headers past level 4</title>
                <link>https://issues.apache.org/jira/browse/DOXIA-559</link>
                <project id="12317230" key="DOXIA">Maven Doxia (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;attempting to include the TOC using a markdown file. If you have any headers past level 3, the TOC fails&lt;/p&gt;

&lt;p&gt;using maven site plugin version 3.6, which looks like it&apos;s using doxia 1.7.4a&lt;br/&gt;
I c&amp;amp;p&apos;d &lt;a href=&quot;http://svn.apache.org/viewvc/maven/doxia/doxia/trunk/doxia-modules/doxia-module-markdown/src/test/resources/macro-toc.md?view=markup&amp;amp;pathrev=1716285#l2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/maven/doxia/doxia/trunk/doxia-modules/doxia-module-markdown/src/test/resources/macro-toc.md?view=markup&amp;amp;pathrev=1716285#l2&lt;/a&gt;&lt;br/&gt;
however no TOC is outputted on a test.md.vm file.&lt;br/&gt;
If I change the file name to test.md (dropping the vm extension), I get a stack dump. &quot;EmtpyStackException&quot; when rendering this file. Not sure what I&apos;m doing wrong&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.util.EmptyStackException
        at java.util.Stack.peek(Unknown Source)
        at org.apache.maven.doxia.index.IndexingSink.peek(IndexingSink.java:292)
        at org.apache.maven.doxia.index.IndexingSink.text(IndexingSink.java:239)
        at org.apache.maven.doxia.sink.impl.SinkAdapter.text(SinkAdapter.java:874)
        at org.apache.maven.doxia.parser.XhtmlBaseParser.handleText(XhtmlBaseParser.java:783)
        at org.apache.maven.doxia.parser.AbstractXmlParser.parseXml(AbstractXmlParser.java:254)
        at org.apache.maven.doxia.parser.AbstractXmlParser.parse(AbstractXmlParser.java:145)
        at org.apache.maven.doxia.parser.XhtmlBaseParser.parse(XhtmlBaseParser.java:96)
        at org.apache.maven.doxia.module.xhtml.XhtmlParser.parse(XhtmlParser.java:356)
        at org.apache.maven.doxia.macro.toc.TocMacro.execute(TocMacro.java:117)
        at org.apache.maven.doxia.parser.AbstractParser.executeMacro(AbstractParser.java:136)
        at org.apache.maven.doxia.module.xhtml.XhtmlParser.processMacro(XhtmlParser.java:268)
        at org.apache.maven.doxia.module.xhtml.XhtmlParser.handleComment(XhtmlParser.java:233)
        at org.apache.maven.doxia.parser.AbstractXmlParser.parseXml(AbstractXmlParser.java:263)
        at org.apache.maven.doxia.parser.AbstractXmlParser.parse(AbstractXmlParser.java:145)
        at org.apache.maven.doxia.parser.XhtmlBaseParser.parse(XhtmlBaseParser.java:96)
        at org.apache.maven.doxia.module.xhtml.XhtmlParser.parse(XhtmlParser.java:356)
        at org.apache.maven.doxia.module.markdown.MarkdownParser.parse(MarkdownParser.java:112
        at org.apache.maven.doxia.DefaultDoxia.parse(DefaultDoxia.java:65)
        at org.apache.maven.doxia.siterenderer.DefaultSiteRenderer.renderDocument(DefaultSiteRenderer.java:449)
        at org.apache.maven.doxia.siterenderer.DoxiaDocumentRenderer.renderDocument(DoxiaDocumentRenderer.java:53)
        at org.apache.maven.doxia.siterenderer.DefaultSiteRenderer.render(DefaultSiteRenderer.java:337)
        at org.apache.maven.plugins.site.render.SiteMojo.renderDoxiaDocuments(SiteMojo.java:262)
        at org.apache.maven.plugins.site.render.SiteMojo.renderLocale(SiteMojo.java:168)
        at org.apache.maven.plugins.site.render.SiteMojo.execute(SiteMojo.java:132)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:134)
        ... 21 more&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13100632">DOXIA-559</key>
            <summary>Doxia macro fails with markdown headers past level 4</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hboutemy">Herv&#233; Boutemy</assignee>
                                    <reporter username="spyhunter99">Alex O&apos;Ree</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Sep 2017 23:46:42 +0000</created>
                <updated>Tue, 15 Jul 2025 09:58:53 +0000</updated>
                            <resolved>Sat, 9 Sep 2017 19:55:05 +0000</resolved>
                                    <version>1.7</version>
                                    <fixVersion>1.8</fixVersion>
                                    <component>Module - Markdown</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16158005" author="hboutemy" created="Fri, 8 Sep 2017 01:56:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stevel%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;stevel@apache.org&quot;&gt;stevel@apache.org&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spyhunter99&quot; class=&quot;user-hover&quot; rel=&quot;spyhunter99&quot;&gt;spyhunter99&lt;/a&gt; sorry, I could not reproduce any failure: here is a test Markdown source I simply added to a site (in &lt;tt&gt;src/site/markdown&lt;/tt&gt; directory), then &lt;tt&gt;mvn site&lt;/tt&gt; does not fail and output is exactly as expected&lt;/p&gt;

&lt;p&gt;please provide a sample test that show the failure&lt;/p&gt;

&lt;p&gt;(notice that in a &lt;tt&gt;.vm&lt;/tt&gt; file, hash have a Velocity meaning, then you have to escape: this was an issue reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/MSITE-728&quot; title=&quot;Markdown headings (atx-style) not rendered correctly with Velocity Macro&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSITE-728&quot;&gt;&lt;del&gt;MSITE-728&lt;/del&gt;&lt;/a&gt; for which I added &lt;a href=&quot;https://issues.apache.org/jira/browse/DOXIASITETOOLS-133&quot; title=&quot;for Velocity processed Doxia files (*.extension.vm), add an option to dump generated markup (= *.extension)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DOXIASITETOOLS-133&quot;&gt;&lt;del&gt;DOXIASITETOOLS-133&lt;/del&gt;&lt;/a&gt; feature to dump result after Velocity processing but before Doxia rendering exactly to debug issues with Markdown+Velocity)&lt;/p&gt;</comment>
                            <comment id="16158386" author="stevel@apache.org" created="Fri, 8 Sep 2017 09:32:40 +0000"  >&lt;p&gt;yeah, it&apos;s odd. I&apos;ve pulled out all level 4 tags in our docs and it has gone away...but it wasn&apos;t happening on some docs that did have that depth of tag. I think maybe it&apos;s some depth thing like going from ## to #### without an intermediate, but, whatever: it&apos;s gone away now&lt;/p&gt;</comment>
                            <comment id="16158387" author="stevel@apache.org" created="Fri, 8 Sep 2017 09:33:07 +0000"  >&lt;p&gt;Thanks for looking at this BTW, maybe just mark as cannot-reproduce?&lt;/p&gt;</comment>
                            <comment id="16159897" author="spyhunter99" created="Sat, 9 Sep 2017 11:19:10 +0000"  >&lt;p&gt;Sorry I forgot to reply,  the failure for me was jumping from h4 to h2 and vice versa without a h3 in the middle.  I&apos;ve only tested with markdown&lt;/p&gt;</comment>
                            <comment id="16159916" author="hboutemy" created="Sat, 9 Sep 2017 12:02:52 +0000"  >&lt;p&gt;ok, I found a failing case:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;# Section level 1

&amp;lt;!-- MACRO{toc|fromDepth=1|toDepth=3} --&amp;gt;

## level 2

#### direct level 4

## level 2 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ll investigate, since I fear it will happen that people write such valid Markdown code...&lt;/p&gt;</comment>
                            <comment id="16160063" author="hudson" created="Sat, 9 Sep 2017 19:48:07 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build doxia-all #340 (See &lt;a href=&quot;https://builds.apache.org/job/doxia-all/340/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/doxia-all/340/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DOXIA-559&quot; title=&quot;Doxia macro fails with markdown headers past level 4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DOXIA-559&quot;&gt;&lt;del&gt;DOXIA-559&lt;/del&gt;&lt;/a&gt; fixed TOC macro when missing section levels (hboutemy: &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1807920&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1807920&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) ./doxia/doxia-core/src/main/java/org/apache/maven/doxia/index/IndexingSink.java&lt;/li&gt;
	&lt;li&gt;(edit) ./doxia/doxia-core/src/test/java/org/apache/maven/doxia/parser/AbstractParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) ./doxia/doxia-core/src/test/java/org/apache/maven/doxia/parser/XhtmlBaseParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) ./doxia/doxia-modules/doxia-module-apt/src/test/java/org/apache/maven/doxia/module/apt/AptParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) ./doxia/doxia-modules/doxia-module-confluence/src/test/java/org/apache/maven/doxia/module/confluence/ConfluenceParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) ./doxia/doxia-modules/doxia-module-markdown/src/test/java/org/apache/maven/doxia/module/markdown/MarkdownParserTest.java&lt;/li&gt;
	&lt;li&gt;(add) ./doxia/doxia-modules/doxia-module-markdown/src/test/resources/macro-toc-&lt;a href=&quot;https://issues.apache.org/jira/browse/DOXIA-559&quot; title=&quot;Doxia macro fails with markdown headers past level 4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DOXIA-559&quot;&gt;&lt;del&gt;DOXIA-559&lt;/del&gt;&lt;/a&gt;.md&lt;/li&gt;
	&lt;li&gt;(edit) ./doxia/doxia-modules/doxia-module-twiki/src/test/java/org/apache/maven/doxia/module/twiki/parser/TwikiParserTest.java&lt;/li&gt;
	&lt;li&gt;(edit) ./doxia/doxia-modules/doxia-module-xdoc/src/test/java/org/apache/maven/doxia/module/xdoc/XdocParserTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16160066" author="hboutemy" created="Sat, 9 Sep 2017 19:55:05 +0000"  >&lt;p&gt;bug fixed: now you can have missing section levels if you want&lt;/p&gt;</comment>
                            <comment id="18005799" author="sparsick" created="Tue, 15 Jul 2025 09:58:53 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-doxia/issues/631&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-doxia#631&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12923292">DOXIA-533</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12801747">DOXIA-492</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12840427">MSITE-748</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12885975" name="toc-macro-test.md" size="1246" author="hboutemy" created="Fri, 8 Sep 2017 01:47:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jsj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>