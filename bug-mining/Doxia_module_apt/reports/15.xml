<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:53:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DOXIA-373] Macro snippet with file option in a multi-pom project</title>
                <link>https://issues.apache.org/jira/browse/DOXIA-373</link>
                <project id="12317230" key="DOXIA">Maven Doxia (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;The project is a multi pom project. In the main pom project, I declare the other pom like this :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;   &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;modules&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;module&amp;gt;&lt;/span&gt;../moduleA&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/module&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;module&amp;gt;&lt;/span&gt;../moduleB&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/module&amp;gt;&lt;/span&gt;
   ...
   &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/modules&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;To avoid duplicate code,I use the macro snippet in my documentation in modules A, B and Main. For convenient, the following  syntax : &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; %{snippet|id=myid|file=src/main/java/mypackage/File.java} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;.&lt;/p&gt;

&lt;p&gt;When I build the site from each module A or B, all work fine. But when the site was generated from the main module, the snippet seem not work : All  the pages who include a snippet&apos;s macros in A or B are not generated. I obtain the same problem if i do a simple site or a site:stage&lt;/p&gt;

&lt;p&gt;The maven site work fine work include pictures and schemas of local documentation (in A et B). I try to use&lt;br/&gt;
the velocity macro and transform &lt;tt&gt;MyFile.apt&lt;/tt&gt; to &lt;tt&gt;MyFile.apt.vm&lt;/tt&gt; like these :&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;MyFile.apt.vm
%{snippet|id=myid|file=${basedir}/src/main/java/mypackage/File.java}.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It&apos;s fail too.&lt;/p&gt;

&lt;p&gt;I use  maven 2.1.0&lt;/p&gt;

&lt;p&gt;Sorry for my poor english&lt;/p&gt;</description>
                <environment>Window XP</environment>
        <key id="12801752">DOXIA-373</key>
            <summary>Macro snippet with file option in a multi-pom project</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="poulfich">T. Montembault</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Dec 2009 03:53:25 +0000</created>
                <updated>Tue, 15 Jul 2025 09:59:56 +0000</updated>
                            <resolved>Mon, 23 Dec 2019 11:30:56 +0000</resolved>
                                                                    <component>Module - Apt</component>
                        <due></due>
                            <votes>5</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14431871" author="brabenetz" created="Fri, 16 Apr 2010 12:03:58 +0000"  >&lt;p&gt;Hi,&lt;br/&gt;
I found a hint of the Problem in:&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/repos/asf/maven/doxia/doxia/tags/doxia-1.1.1/doxia-core/src/main/java/org/apache/maven/doxia/parser/AbstractParser.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/maven/doxia/doxia/tags/doxia-1.1.1/doxia-core/src/main/java/org/apache/maven/doxia/parser/AbstractParser.java&lt;/a&gt;&lt;br/&gt;
At line 89.&lt;/p&gt;

&lt;p&gt;Based on this hint i found a temporary workaround (maybe someone other want know it).&lt;/p&gt;


&lt;p&gt;1. I create a Class with &quot;public static void main(String[] args)&quot;:&lt;/p&gt;

&lt;p&gt;    public static void main(final String[] args) {&lt;br/&gt;
        if (args.length != 1) &lt;/p&gt;
{
            System.out.println(&quot;[ERROR]: This Class needs exacly one argument: The Projects basedir! &quot; //
                + &quot;The args was: &quot; + Arrays.toString(args));
        }
&lt;p&gt;        // set the SystemProperty&lt;br/&gt;
        System.setProperty(&quot;basedir&quot;, args&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;);&lt;br/&gt;
        System.out.println(&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt;: Set SystemProperty &apos;basedir&apos; successfull to: &quot; + args&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;);&lt;br/&gt;
    }&lt;/p&gt;


&lt;p&gt;2. And added this Class (e.g.: &quot;com.myProject.MyClass&quot;) to the projects pom.xml:&lt;/p&gt;

&lt;p&gt;      &amp;lt;plugin&amp;gt;&lt;br/&gt;
        &amp;lt;!-- Workaround for Maven Site generation Bug: &quot;Macro snippet with file option in a multi-pom project&quot; --&amp;gt;&lt;br/&gt;
        &amp;lt;!-- Bugreport: &lt;a href=&quot;https://issues.apache.org/jira/browse/DOXIA-373&quot; title=&quot;Macro snippet with file option in a multi-pom project&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DOXIA-373&quot;&gt;&lt;del&gt;DOXIA-373&lt;/del&gt;&lt;/a&gt; See: &lt;a href=&quot;http://jira.codehaus.org/browse/DOXIA-373&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jira.codehaus.org/browse/DOXIA-373&lt;/a&gt; --&amp;gt;&lt;br/&gt;
        &amp;lt;groupId&amp;gt;org.codehaus.mojo&amp;lt;/groupId&amp;gt;&lt;br/&gt;
        &amp;lt;artifactId&amp;gt;exec-maven-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
        &amp;lt;version&amp;gt;1.1.1&amp;lt;/version&amp;gt;&lt;br/&gt;
        &amp;lt;executions&amp;gt;&lt;br/&gt;
          &amp;lt;execution&amp;gt;&lt;br/&gt;
            &amp;lt;id&amp;gt;site-plugin-bugfix-workaround&amp;lt;/id&amp;gt;&lt;br/&gt;
            &amp;lt;phase&amp;gt;pre-site&amp;lt;/phase&amp;gt;&lt;br/&gt;
            &amp;lt;goals&amp;gt;&lt;br/&gt;
              &amp;lt;goal&amp;gt;java&amp;lt;/goal&amp;gt;&lt;br/&gt;
            &amp;lt;/goals&amp;gt;&lt;br/&gt;
            &amp;lt;configuration&amp;gt;&lt;br/&gt;
              &amp;lt;mainClass&amp;gt;com.myProject.MyClass&amp;lt;/mainClass&amp;gt;&lt;br/&gt;
              &amp;lt;arguments&amp;gt;&lt;br/&gt;
                &amp;lt;argument&amp;gt;${basedir}&amp;lt;/argument&amp;gt;&lt;br/&gt;
              &amp;lt;/arguments&amp;gt;&lt;br/&gt;
            &amp;lt;/configuration&amp;gt;&lt;br/&gt;
          &amp;lt;/execution&amp;gt;&lt;br/&gt;
        &amp;lt;/executions&amp;gt;&lt;br/&gt;
      &amp;lt;/plugin&amp;gt;&lt;/p&gt;

&lt;p&gt;Now this Project works also in multi-pom projects.&lt;/p&gt;

&lt;p&gt;regards,&lt;br/&gt;
Harald&lt;/p&gt;</comment>
                            <comment id="14431839" author="ltheussl" created="Fri, 21 May 2010 03:31:18 +0000"  >&lt;p&gt;The problem is that current parsers don&apos;t know anything about the origin of the sources they are parsing, see &lt;a href=&quot;https://issues.apache.org/jira/browse/DOXIA-224&quot; title=&quot;Add source name in parser&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DOXIA-224&quot;&gt;&lt;del&gt;DOXIA-224&lt;/del&gt;&lt;/a&gt;. The getBasedir() in AbstractParser returns the directory where the build is started, unless the system property &quot;basedir&quot; is set, so the workaround above is valid.&lt;/p&gt;</comment>
                            <comment id="14431898" author="tischda" created="Tue, 15 Feb 2011 07:40:58 +0000"  >&lt;p&gt;I&apos;m getting the file to parse from the target directory, in my index.apt.vm:&lt;/p&gt;

&lt;p&gt;%{snippet|id=maven-local-repo|file=${project.build.outputDirectory}/settings.xml}&lt;/p&gt;

&lt;p&gt;Now if I add a trailing space after the closing brace of the snippet macro, it fails the first time. The second time, the build succeeds but the index.html is empty. Remove the space, clean build and it works again.&lt;/p&gt;</comment>
                            <comment id="14431956" author="veithen" created="Fri, 9 Mar 2012 05:28:16 +0000"  >&lt;p&gt;A workaround for this issue is to use (assuming that the file is a Velocity template, i.e. has suffix .apt.vm instead of .apt):&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;%{snippet|id=deployment|file=${project.basedir}/src/test/resources/client-config.wsdd}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="18006215" author="sparsick" created="Tue, 15 Jul 2025 09:59:56 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-doxia/issues/373&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-doxia#373&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12801616">DOXIA-224</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12801954">DOXIATOOLS-15</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2a0av:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>