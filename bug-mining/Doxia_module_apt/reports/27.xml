<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:53:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DOXIA-497] APTSink: links and paragraphs inside tables</title>
                <link>https://issues.apache.org/jira/browse/DOXIA-497</link>
                <project id="12317230" key="DOXIA">Maven Doxia (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;When generating table markup with APTSink, link content is written to buffer while structure markup is directly written, so the generated markup is invalid. When writing paragraphs inside table cells, the generated markup is also invalid.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12801726">DOXIA-497</key>
            <summary>APTSink: links and paragraphs inside tables</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slachiewicz">Sylwester Lachiewicz</assignee>
                                    <reporter username="mkurz">Michael Kurz</reporter>
                        <labels>
                    </labels>
                <created>Sun, 29 Sep 2013 11:18:02 +0000</created>
                <updated>Tue, 15 Jul 2025 09:58:45 +0000</updated>
                            <resolved>Wed, 18 Jul 2018 05:01:55 +0000</resolved>
                                    <version>1.4</version>
                    <version>1.5</version>
                                    <fixVersion>1.9</fixVersion>
                                    <component>Module - Apt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14432097" author="hboutemy" created="Sat, 12 Apr 2014 14:34:04 +0000"  >&lt;p&gt;can you add a unit test, to show what this patch fixes, please?&lt;/p&gt;</comment>
                            <comment id="14432049" author="mkurz" created="Sun, 13 Apr 2014 12:34:38 +0000"  >&lt;p&gt;unit test included in patch&lt;/p&gt;</comment>
                            <comment id="15807766" author="michael-o" created="Sat, 7 Jan 2017 16:35:39 +0000"  >&lt;p&gt;I think this should be addressed in 2.0 which Maven upgrade to 3.x.&lt;/p&gt;</comment>
                            <comment id="15941798" author="hboutemy" created="Sat, 25 Mar 2017 17:10:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michael-o&quot; class=&quot;user-hover&quot; rel=&quot;michael-o&quot;&gt;michael-o&lt;/a&gt; what makes you wait for 2.0?&lt;br/&gt;
this does look like a simple bugfix, isn&apos;t it? or did I miss something important?&lt;/p&gt;</comment>
                            <comment id="16544507" author="githubbot" created="Sun, 15 Jul 2018 09:46:52 +0000"  >&lt;p&gt;slachiewicz opened a new pull request #13: &lt;a href=&quot;https://issues.apache.org/jira/browse/DOXIA-497&quot; title=&quot;APTSink: links and paragraphs inside tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DOXIA-497&quot;&gt;&lt;del&gt;DOXIA-497&lt;/del&gt;&lt;/a&gt; Fix rendering links and paragraphs inside tables&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-doxia/pull/13&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-doxia/pull/13&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16545690" author="githubbot" created="Mon, 16 Jul 2018 20:04:44 +0000"  >&lt;p&gt;asfgit closed pull request #13: &lt;a href=&quot;https://issues.apache.org/jira/browse/DOXIA-497&quot; title=&quot;APTSink: links and paragraphs inside tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DOXIA-497&quot;&gt;&lt;del&gt;DOXIA-497&lt;/del&gt;&lt;/a&gt; Fix rendering links and paragraphs inside tables&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/maven-doxia/pull/13&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-doxia/pull/13&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/doxia-modules/doxia-module-apt/src/main/java/org/apache/maven/doxia/module/apt/AptSink.java b/doxia-modules/doxia-module-apt/src/main/java/org/apache/maven/doxia/module/apt/AptSink.java&lt;br/&gt;
index 97467476..3747370f 100644&lt;br/&gt;
&amp;#8212; a/doxia-modules/doxia-module-apt/src/main/java/org/apache/maven/doxia/module/apt/AptSink.java&lt;br/&gt;
+++ b/doxia-modules/doxia-module-apt/src/main/java/org/apache/maven/doxia/module/apt/AptSink.java&lt;br/&gt;
@@ -65,6 +65,9 @@&lt;br/&gt;
     /**  tableCaptionFlag. */&lt;br/&gt;
     private boolean tableCaptionFlag;&lt;/p&gt;

&lt;p&gt;+    /**  tableCellFlag. */&lt;br/&gt;
+    private boolean tableCellFlag;&lt;br/&gt;
+&lt;br/&gt;
     /**  headerFlag. */&lt;br/&gt;
     private boolean headerFlag;&lt;/p&gt;

&lt;p&gt;@@ -164,6 +167,7 @@ protected void init()&lt;br/&gt;
         this.date = null;&lt;br/&gt;
         this.startFlag = true;&lt;br/&gt;
         this.tableCaptionFlag = false;&lt;br/&gt;
+        this.tableCellFlag = false;&lt;br/&gt;
         this.headerFlag = false;&lt;br/&gt;
         this.bufferFlag = false;&lt;br/&gt;
         this.itemFlag = false;&lt;br/&gt;
@@ -518,7 +522,11 @@ public void pageBreak()&lt;br/&gt;
     /** &lt;/p&gt;
{@inheritDoc} */&lt;br/&gt;
     public void paragraph()&lt;br/&gt;
     {&lt;br/&gt;
-        if ( itemFlag )&lt;br/&gt;
+        if ( tableCellFlag )&lt;br/&gt;
+        {
+            // ignore paragraphs in table cells
+        }&lt;br/&gt;
+        else if ( itemFlag )&lt;br/&gt;
         {
             write( EOL + EOL + &quot;  &quot; + listNestingIndent );
         }&lt;br/&gt;
@@ -531,7 +539,14 @@ public void paragraph()&lt;br/&gt;
     /** {@inheritDoc}
&lt;p&gt; */&lt;br/&gt;
     public void paragraph_()&lt;br/&gt;
     {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;write( EOL + EOL );&lt;br/&gt;
+    	if ( tableCellFlag )&lt;br/&gt;
+    	
{
+    		// ignore paragraphs in table cells
+    	}
&lt;p&gt;+    	else&lt;br/&gt;
+    	&lt;/p&gt;
{
+    		write( EOL + EOL );
+    	}
&lt;p&gt;     }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     /** &lt;/p&gt;
{@inheritDoc} */&lt;br/&gt;
@@ -696,6 +711,7 @@ public void tableCell( boolean headerRow )&lt;br/&gt;
         {
             buffer.append( TABLE_CELL_SEPARATOR_MARKUP );
         }&lt;br/&gt;
+        tableCellFlag = true;&lt;br/&gt;
     }&lt;br/&gt;
 &lt;br/&gt;
     /** {@inheritDoc}
&lt;p&gt; */&lt;br/&gt;
@@ -715,6 +731,7 @@ public void tableHeaderCell_()&lt;br/&gt;
      */&lt;br/&gt;
     private void endTableCell()&lt;/p&gt;
     {
+        tableCellFlag = false;
         buffer.append( TABLE_CELL_SEPARATOR_MARKUP );
         cellCount++;
     }
&lt;p&gt;@@ -928,7 +945,14 @@ public void unknown( String name, Object[] requiredParams, SinkEventAttributes a&lt;br/&gt;
     protected void write( String text )&lt;br/&gt;
     {&lt;br/&gt;
         startFlag = false;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;writer.write( unifyEOLs( text ) );&lt;br/&gt;
+        if ( tableCellFlag )&lt;br/&gt;
+        
{
+        	buffer.append( text );
+    	}
&lt;p&gt;+        else&lt;br/&gt;
+        &lt;/p&gt;
{
+        	writer.write( unifyEOLs( text ) );
+    	}
&lt;p&gt;     }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     /**&lt;br/&gt;
diff --git a/doxia-modules/doxia-module-apt/src/test/java/org/apache/maven/doxia/module/apt/AptSinkTest.java b/doxia-modules/doxia-module-apt/src/test/java/org/apache/maven/doxia/module/apt/AptSinkTest.java&lt;br/&gt;
index af310e9a..812f4965 100644&lt;br/&gt;
&amp;#8212; a/doxia-modules/doxia-module-apt/src/test/java/org/apache/maven/doxia/module/apt/AptSinkTest.java&lt;br/&gt;
+++ b/doxia-modules/doxia-module-apt/src/test/java/org/apache/maven/doxia/module/apt/AptSinkTest.java&lt;br/&gt;
@@ -275,4 +275,58 @@ protected String getCommentBlock( String text )&lt;/p&gt;
     {
         return &quot;~~&quot; + text;
     }
&lt;p&gt;+&lt;br/&gt;
+    /**&lt;br/&gt;
+     * test for &lt;a href=&quot;https://issues.apache.org/jira/browse/DOXIA-497&quot; title=&quot;APTSink: links and paragraphs inside tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DOXIA-497&quot;&gt;&lt;del&gt;DOXIA-497&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
+     */&lt;br/&gt;
+    public void testLinksAndParagraphsInTableCells()&lt;br/&gt;
+    &lt;/p&gt;
{
+        final String linkTarget = &quot;target&quot;;
+        final String linkText = &quot;link&quot;;
+        final String paragraphText = &quot;paragraph text&quot;;
+        final Sink sink = getSink();
+        sink.table();
+        sink.tableRow();
+        sink.tableCell();
+        sink.link(linkTarget);
+        sink.text(linkText);
+        sink.link_();
+        sink.tableCell_();
+        sink.tableCell();
+        sink.paragraph();
+        sink.text(paragraphText);
+        sink.paragraph_();
+        sink.tableCell_();
+        sink.tableRow_();
+        sink.table_();
+        sink.flush();
+        sink.close();
+
+        String expected = EOL + AptMarkup.TABLE_ROW_START_MARKUP +
+                AptMarkup.MINUS +
+                AptMarkup.MINUS +
+                AptMarkup.TABLE_ROW_START_MARKUP +
+                AptMarkup.STAR +
+                EOL +
+                AptMarkup.LEFT_CURLY_BRACKET +
+                AptMarkup.LEFT_CURLY_BRACKET +
+                AptMarkup.LEFT_CURLY_BRACKET +
+                linkTarget +
+                AptMarkup.RIGHT_CURLY_BRACKET +
+                linkText +
+                AptMarkup.RIGHT_CURLY_BRACKET +
+                AptMarkup.RIGHT_CURLY_BRACKET +
+                AptMarkup.TABLE_CELL_SEPARATOR_MARKUP +
+                paragraphText +
+                AptMarkup.TABLE_CELL_SEPARATOR_MARKUP +
+                EOL +
+                AptMarkup.TABLE_ROW_START_MARKUP +
+                AptMarkup.MINUS +
+                AptMarkup.MINUS +
+                AptMarkup.TABLE_ROW_START_MARKUP +
+                AptMarkup.STAR +
+                EOL;
+
+        assertEquals(&quot;Wrong link or paragraph markup in table cell&quot;, expected, getSinkContent());
+    }
&lt;p&gt; }&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="18005746" author="sparsick" created="Tue, 15 Jul 2025 09:58:45 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-doxia/issues/591&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-doxia#591&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12715644" name="table-generation.patch" size="4625" author="mkurz" created="Sun, 13 Apr 2014 12:34:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2a007:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12312220" key="com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons">
                        <customfieldname>Testcase included</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="11060"><![CDATA[Yes]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>