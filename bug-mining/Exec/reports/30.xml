<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:54:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[EXEC-69] DefaultExecutor async execute prevents shutdown hooks running</title>
                <link>https://issues.apache.org/jira/browse/EXEC-69</link>
                <project id="12310814" key="EXEC">Commons Exec</project>
                    <description>&lt;p&gt;The DefaultExecutor asynchronous execute methods create a user-level thread to monitor the process it starts. This prevents shutdown hooks - like the one in ShutdownHookProcessDestroyer - from running. This makes these two classes incompatible.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12614683">EXEC-69</key>
            <summary>DefaultExecutor async execute prevents shutdown hooks running</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="richarda">Richard Atkins</reporter>
                        <labels>
                    </labels>
                <created>Sun, 4 Nov 2012 04:54:56 +0000</created>
                <updated>Wed, 23 Jul 2014 23:22:53 +0000</updated>
                            <resolved>Wed, 23 Jul 2014 23:22:53 +0000</resolved>
                                    <version>1.1</version>
                                    <fixVersion>1.3</fixVersion>
                                        <due></due>
                            <votes>3</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13490142" author="richarda" created="Sun, 4 Nov 2012 05:12:10 +0000"  >&lt;p&gt;The simplest fix is to let a ShutdownHookProcessDestroyer do its job is to set the asynchronous executors&apos; thread to be a daemon thread, although I don&apos;t believe that&apos;s a blanket solution for all async exec use cases. Sometimes callers really don&apos;t want to exit unless the child process is already done (and the result handler has finished handling the result).&lt;/p&gt;

&lt;p&gt;The answer lies in pushing that decision back on the caller - they either configure their own thread factory (assuming &lt;a href=&quot;https://issues.apache.org/jira/browse/EXEC-70&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/EXEC-70&lt;/a&gt; is implemented) to choose if the threads should be user level or daemon level, or we do it for them, based on whether there&apos;s a process destroyer registered.&lt;/p&gt;

&lt;p&gt;The recent change on trunk to use a createThread factory method gets us part of the way there for either solution.&lt;/p&gt;</comment>
                            <comment id="13490458" author="richarda" created="Mon, 5 Nov 2012 05:19:40 +0000"  >&lt;p&gt;Attached is a very simple fix for this: it&apos;s a subclass of DefaultExecutor that creates daemon threads in the createThread() factory method. Library users will have to select this class, rather than DefaultExecutor, in order to take advantage of it.&lt;/p&gt;</comment>
                            <comment id="13866544" author="barancev" created="Thu, 9 Jan 2014 11:02:06 +0000"  >&lt;p&gt;Any chance this issue will be fixed soon?&lt;/p&gt;</comment>
                            <comment id="14072472" author="vorburger" created="Wed, 23 Jul 2014 22:35:03 +0000"  >&lt;p&gt;Hello! I&apos;ve just hit this problem as well... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; +1 for fixing this, and releasing a commons-exec 1.3! Background of context I ran into this is in &lt;a href=&quot;https://github.com/vorburger/MariaDB4j/issues/12&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/vorburger/MariaDB4j/issues/12&lt;/a&gt;, in case anyone is interested (part of my &lt;a href=&quot;https://github.com/vorburger/MariaDB4j&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/vorburger/MariaDB4j&lt;/a&gt; mySQL embedder - shameless plug).&lt;/p&gt;

&lt;p&gt;Also note how in &lt;a href=&quot;https://github.com/vorburger/MariaDB4j/blob/c05ec7650afee823f505a530c75945f7e008c54e/src/main/java/ch/vorburger/exec/BetterExecutor.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/vorburger/MariaDB4j/blob/c05ec7650afee823f505a530c75945f7e008c54e/src/main/java/ch/vorburger/exec/BetterExecutor.java&lt;/a&gt; I&apos;ve used Thread t = super.createThread(runnable, name); instead of new Thread(runnable, name); as in attached DaemonExecutor.java (thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=richarda&quot; class=&quot;user-hover&quot; rel=&quot;richarda&quot;&gt;richarda&lt;/a&gt;!) - just in the (unlikely, yes) case that a newer commons-exec does anything else in there (like set a more suitable Thread name, perhaps?).&lt;/p&gt;</comment>
                            <comment id="14072533" author="garydgregory" created="Wed, 23 Jul 2014 23:22:53 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;commit -m &quot;[EXEC-69] DefaultExecutor async execute prevents shutdown hooks running.&quot; C:/vcs/svn/apache/commons/trunks-proper/exec/src/main/java/org/apache/commons/exec/DaemonExecutor.java C:/vcs/svn/apache/commons/trunks-proper/exec/src/changes/changes.xml
    Sending        C:/vcs/svn/apache/commons/trunks-proper/exec/src/changes/changes.xml
    Adding         C:/vcs/svn/apache/commons/trunks-proper/exec/src/main/java/org/apache/commons/exec/DaemonExecutor.java
    Transmitting file data ...
    Committed revision 1612971.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12688212">EXEC-76</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12552062" name="DaemonExecutor.java" size="1544" author="richarda" created="Mon, 5 Nov 2012 05:19:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>255105</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 17 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ep33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>83826</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>