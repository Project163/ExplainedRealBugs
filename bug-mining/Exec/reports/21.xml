<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:54:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[EXEC-36] CommandLine does not work with double quote or single quote correctly</title>
                <link>https://issues.apache.org/jira/browse/EXEC-36</link>
                <project id="12310814" key="EXEC">Commons Exec</project>
                    <description>&lt;p&gt;Please review and run the following junit test, either apache ant or apache exec does not handle the qoute in the arguments correctly.&lt;/p&gt;

&lt;p&gt;   @Test&lt;br/&gt;
    public void shouldHandleTheDoubelQuote() throws Exception &lt;/p&gt;
{
        String commandline = &quot;./script/jrake cruise:publish_installers &quot;
                + &quot;INSTALLER_VERSION=unstable_2_1 &quot;
                + &quot;INSTALLER_PATH=\&quot;/var/lib/ cruise-agent/installers\&quot; &quot;
                + &quot;INSTALLER_DOWNLOAD_SERVER=&apos;something&apos;&quot;
                + &quot;WITHOUT_HELP_DOC=true&quot;;

        CommandLine line = CommandLine.parse(commandline);
        String[] args  = line.getArguments();

        assertThat(args[0], is(&quot;cruise:publish_installers&quot;));
        assertThat(args[1], is(&quot;INSTALLER_VERSION=unstable_2_1&quot;));
        assertThat(args[2], is(&quot;INSTALLER_PATH=\&quot;/var/lib/ cruise-agent/installers\&quot;&quot;));
        assertThat(args[3], is(&quot;INSTALLER_DOWNLOAD_SERVER=&apos;something&apos;&quot;));
        assertThat(args[4], is(&quot;WITHOUT_HELP_DOC=true&quot;));
    }</description>
                <environment>&lt;p&gt;Ubuntu 704, JDK1.6&lt;/p&gt;</environment>
        <key id="12412180">EXEC-36</key>
            <summary>CommandLine does not work with double quote or single quote correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="3" iconUrl="https://issues.apache.org/jira/images/icons/statuses/inprogress.png" description="This issue is being actively worked on at the moment by the assignee.">In Progress</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="sgoeschl">Siegfried Goeschl</assignee>
                                    <reporter username="iamhukai">Kai Hu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Jan 2009 10:12:58 +0000</created>
                <updated>Fri, 12 May 2023 21:35:16 +0000</updated>
                                            <version>1.0</version>
                                                        <due></due>
                            <votes>2</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12662927" author="sgoeschl" created="Mon, 12 Jan 2009 10:28:59 +0000"  >&lt;p&gt;Here is your re-formatted snippet&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 
@Test
public void shouldHandleTheDoubelQuote() throws Exception 
{ 
  String commandline = &quot;./script/jrake cruise:publish_installers &quot; 
    + &quot;INSTALLER_VERSION=unstable_2_1 &quot; 
    + &quot;INSTALLER_PATH=\&quot;/var/lib/ cruise-agent/installers\&quot; &quot; 
    + &quot;INSTALLER_DOWNLOAD_SERVER=&apos;something&apos;&quot; 
    + &quot;WITHOUT_HELP_DOC=true&quot;;
    
  CommandLine line = CommandLine.parse(commandline); 
  String[] args = line.getArguments(); 
  assertThat(args[0], is(&quot;cruise:publish_installers&quot;)); 
  assertThat(args[1], is(&quot;INSTALLER_VERSION=unstable_2_1&quot;)); 
  assertThat(args[2], is(&quot;INSTALLER_PATH=\&quot;/var/lib/ cruise-agent/installers\&quot;&quot;)); 
  assertThat(args[3], is(&quot;INSTALLER_DOWNLOAD_SERVER=&apos;something&apos;&quot;)); 
  assertThat(args[4], is(&quot;WITHOUT_HELP_DOC=true&quot;)); 
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;Some quick notes&lt;/p&gt;

&lt;p&gt;+) args&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; should be &quot;./script/jrake&quot; and not &quot;cruise:publish_installers&quot;&lt;br/&gt;
+) mixing and matching singe and double quotes using CommandLine.parse() is not recommended (&lt;a href=&quot;http://commons.apache.org/exec/faq.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/exec/faq.html&lt;/a&gt;)&lt;br/&gt;
+) I will add a test case to see how to generate a valid command line in your case&lt;/p&gt;</comment>
                            <comment id="12662997" author="iamhukai" created="Mon, 12 Jan 2009 16:51:11 +0000"  >&lt;p&gt;first, sorry for the bad format. thanks for formatting for me&lt;/p&gt;

&lt;p&gt;+) arg&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; should not be &quot;./script/jrake&quot;, I think &quot;./script/jrake&quot; should be returned from commandLine.getExecutable() or something like this.&lt;br/&gt;
+) I fully understand it is not recommented, but if this library is targeting for reduce the pain of dealing with command/process, then I think it is something this api need to provide, since I do not think there is any api can handle it correctly and that is part of the core-value of this api&#65288;Ant is using exactly same way to parse it, so it has the same bug&#65289;if you guys can ship with it, it will be the silver bullet for command/process.&lt;/p&gt;

&lt;p&gt;cheers&lt;/p&gt;</comment>
                            <comment id="12663036" author="sgoeschl" created="Mon, 12 Jan 2009 18:38:13 +0000"  >&lt;p&gt;Hi Kai,&lt;/p&gt;

&lt;p&gt;+) yes you are right regarding the arg&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&lt;br/&gt;
+) I think there is a space missing after &quot;INSTALLER_DOWNLOAD_SERVER=&apos;something&apos;&quot; otherwise there is no args&lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt;&lt;br/&gt;
+) is there really a space in &quot;INSTALLER_PATH=\&quot;/var/lib/ cruise-agent/installers\&quot;&quot;, e.g. thus this define two paths &apos;/var/lib/&apos; and &apos;cruise-agent/installers&apos;? &lt;/p&gt;</comment>
                            <comment id="12663168" author="iamhukai" created="Tue, 13 Jan 2009 01:05:56 +0000"  >&lt;p&gt;&amp;gt;&amp;gt;&amp;gt; I think there is a space missing after &quot;INSTALLER_DOWNLOAD_SERVER=&apos;something&apos;&quot; otherwise there is no args&lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;you are absolutely right&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;&amp;gt; is there really a space in &quot;INSTALLER_PATH=\&quot;/var/lib/ cruise-agent/installers\&quot;&quot;, e.g. thus this define two paths &apos;/var/lib/&apos; and &apos;cruise-agent/installers&apos;?&lt;br/&gt;
I just want to design a case that there is a whitespace in the argument, which makes the quotes to be necessary, do you mind to help me to change the test cases to&lt;br/&gt;
 &quot;INSTALLER_PATH=\&quot;/var/lib/cruise agent/installers\&quot; and also change the assertion accordingly.&lt;/p&gt;

&lt;p&gt;thanks for you quick response. cheers.&lt;/p&gt;</comment>
                            <comment id="12683823" author="iamhukai" created="Fri, 20 Mar 2009 10:02:41 +0000"  >&lt;p&gt;when will this bug be fixed? is anyone looking at this one?&lt;/p&gt;</comment>
                            <comment id="12683867" author="sgoeschl" created="Fri, 20 Mar 2009 12:40:50 +0000"  >&lt;p&gt;I&apos;m looking at the problem but I&apos;m not eager to break the current command line processing otherwise I&apos;m unable to get the release out of the door. Having said that you can still build up your command line bit by  bit using the API.&lt;/p&gt;</comment>
                            <comment id="12702898" author="sebb@apache.org" created="Sun, 26 Apr 2009 15:35:18 +0000"  >&lt;p&gt;I think the first thing to do is to document how the command-line parsing is intended to work.&lt;br/&gt;
Should it use the same quoting as the underlying OS, or a common scheme?&lt;br/&gt;
i.e. when is the parse() method going to be used?&lt;/p&gt;</comment>
                            <comment id="12855165" author="mkolev" created="Thu, 8 Apr 2010 21:27:19 +0000"  >&lt;p&gt;Hello everyone,&lt;br/&gt;
I am using the commons-exec library in Apache Camel (the command arguments must be parsed from a URI), came up to the same problem, and had to implement the parsing myself. I did the custom command line args parsing based on the following 3 simple rules: &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;The args in the line are space-separated tokens&lt;/li&gt;
	&lt;li&gt;If an argument has a space itself, this space can be quoted with &quot; (double-qoute)&lt;/li&gt;
	&lt;li&gt;If an argument should preserve the double-quotes, it is quoted two times with a double-quote&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Here is &lt;a href=&quot;https://svn.apache.org/repos/asf/camel/trunk/components/camel-exec/src/main/java/org/apache/camel/component/exec/impl/ExecParseUtils.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a link to to the parser&lt;/a&gt; and a link to the &lt;a href=&quot;https://svn.apache.org/repos/asf/camel/trunk/components/camel-exec/src/test/java/org/apache/camel/component/exec/impl/ExecParseUtilsTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;unit tests&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;What do you think of this approach? Is it applicable to commons-exec?&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Mitko&lt;/p&gt;</comment>
                            <comment id="12855182" author="sgoeschl" created="Thu, 8 Apr 2010 22:05:24 +0000"  >&lt;p&gt;Hi Mitko,&lt;/p&gt;

&lt;p&gt;let me have a look at it at the end of next week (I have to finish a paper at the end of next week)&lt;/p&gt;

&lt;p&gt;Cheers,&lt;/p&gt;

&lt;p&gt;Siegfried Goeschl&lt;/p&gt;</comment>
                            <comment id="12898639" author="sgoeschl" created="Sat, 14 Aug 2010 20:04:56 +0000"  >&lt;p&gt;Code based on Mitko&apos;s work in Apache Camel&lt;/p&gt;</comment>
                            <comment id="12898640" author="sgoeschl" created="Sat, 14 Aug 2010 20:12:41 +0000"  >&lt;p&gt;When using the API to build the command line incrementally (and not parsing the command line string) it is possible to recreate Kai&apos;s command line as shown in DefaultExecutorTest#testExec36_1() under Unix.&lt;/p&gt;</comment>
                            <comment id="13012363" author="trurl23" created="Tue, 29 Mar 2011 07:17:38 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I&apos;m experiencing the same issue using CommandLine.parse() with commons-exec-1.1. The code works fine with Windows, gracefully handling quotes around file names with spaces but breaks when running in GNU/Linux. So this seems to affect only Linux systems.&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
  Jakob&lt;/p&gt;</comment>
                            <comment id="13012379" author="sgoeschl" created="Tue, 29 Mar 2011 08:13:43 +0000"  >&lt;p&gt;Hi Jakob - can you provide more details &lt;/p&gt;

&lt;p&gt;+) example of command line&lt;br/&gt;
+) what application are you starting (executable versus shell script)&lt;/p&gt;

&lt;p&gt;Sigi&lt;/p&gt;</comment>
                            <comment id="13058512" author="kedar.raybagkar" created="Fri, 1 Jul 2011 12:06:54 +0000"  >&lt;p&gt;StringUtils also needs a change to handle the issue of quote...&lt;br/&gt;
Trip the ending as well as starting double or single quote if they start or end with quotes.&lt;/p&gt;

&lt;p&gt;method static String quoteArgument...&lt;/p&gt;

&lt;p&gt;        while((argument.trim().endsWith(SINGLE_QUOTE) || argument.trim().endsWith(DOUBLE_QUOTE)) &lt;br/&gt;
        		&amp;amp;&amp;amp; cleanedArgument.startsWith(SINGLE_QUOTE) || cleanedArgument.startsWith(DOUBLE_QUOTE)) &lt;/p&gt;
{
            cleanedArgument = cleanedArgument.substring(1);
        }

&lt;p&gt;        while((argument.trim().startsWith(SINGLE_QUOTE) || argument.trim().startsWith(DOUBLE_QUOTE)) &lt;br/&gt;
        		&amp;amp;&amp;amp; cleanedArgument.endsWith(SINGLE_QUOTE) || cleanedArgument.endsWith(DOUBLE_QUOTE)) &lt;/p&gt;
{
            cleanedArgument = cleanedArgument.substring(0, cleanedArgument.length() - 1);
        }

</comment>
                            <comment id="13059374" author="kedar.raybagkar" created="Mon, 4 Jul 2011 09:57:24 +0000"  >&lt;p&gt;Another thing that I noticed was that Argument inner class trims the value data therefore if a command line has &quot;ABC &quot; then the space is removed. The same problem is also found in StringUtils which to trims the data. After commenting the two trim portions, it works for any string that has a space inside a double quote. All tests were executed successfully.&lt;/p&gt;</comment>
                            <comment id="13138242" author="ceefour" created="Fri, 28 Oct 2011 11:58:16 +0000"  >&lt;p&gt;The string&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;web adoh &apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;is quoted into&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;web adoh&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;where it should be&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;web adoh &apos;&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13178742" author="lcorneliussen" created="Tue, 3 Jan 2012 14:06:09 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I&apos;m facing the same problem from StringUtils.quoteArgument() in Apache NPanday (incubator, Maven for .NET)&lt;/p&gt;

&lt;p&gt;_&lt;br/&gt;
Lars&lt;/p&gt;</comment>
                            <comment id="13199656" author="alexriva68" created="Fri, 3 Feb 2012 11:45:14 +0000"  >&lt;p&gt;Proposed fix&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12452109" name="ExecParseUtils.java" size="3787" author="sgoeschl" created="Sat, 14 Aug 2010 20:04:56 +0000"/>
                            <attachment id="12452110" name="ExecParseUtilsTest.java" size="5849" author="sgoeschl" created="Sat, 14 Aug 2010 20:04:56 +0000"/>
                            <attachment id="12513120" name="StringUtils.java" size="9206" author="alexriva68" created="Fri, 3 Feb 2012 11:45:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>69320</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i19xxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>266133</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>