{"url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/4141","repository_url":"https://api.github.com/repos/react-hook-form/react-hook-form","labels_url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/4141/labels{/name}","comments_url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/4141/comments","events_url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/4141/events","html_url":"https://github.com/react-hook-form/react-hook-form/issues/4141","id":804636810,"node_id":"MDU6SXNzdWU4MDQ2MzY4MTA=","number":4141,"title":"\"isValid\" does not work in \"production\" mode correctly for \"useFieldArray\"","user":{"login":"Travellerme","id":3765355,"node_id":"MDQ6VXNlcjM3NjUzNTU=","avatar_url":"https://avatars.githubusercontent.com/u/3765355?v=4","gravatar_id":"","url":"https://api.github.com/users/Travellerme","html_url":"https://github.com/Travellerme","followers_url":"https://api.github.com/users/Travellerme/followers","following_url":"https://api.github.com/users/Travellerme/following{/other_user}","gists_url":"https://api.github.com/users/Travellerme/gists{/gist_id}","starred_url":"https://api.github.com/users/Travellerme/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Travellerme/subscriptions","organizations_url":"https://api.github.com/users/Travellerme/orgs","repos_url":"https://api.github.com/users/Travellerme/repos","events_url":"https://api.github.com/users/Travellerme/events{/privacy}","received_events_url":"https://api.github.com/users/Travellerme/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1260145696,"node_id":"MDU6TGFiZWwxMjYwMTQ1Njk2","url":"https://api.github.com/repos/react-hook-form/react-hook-form/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2021-02-09T15:06:43Z","updated_at":"2022-10-13T06:15:32Z","closed_at":"2021-02-10T22:10:34Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"***\"isValid\" does not work in \"production\" mode correctly for \"useFieldArray\"***\r\n\r\n**Describe the bug**\r\n\r\n`isValid` from `formState` behaves itself differently for `dev` mode and `production` build by using `useFieldArray`\r\n\r\n- `dev` mode is launched by `react-scripts start`\r\n- `production` mode is built by `react-scripts build` and served by any server. In my example, it's `express` server\r\n\r\n \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n- Please clone the git repo with [reproducible scenarios:](https://github.com/Travellerme/react-hook-form-issue)\r\n- Make `npm install`\r\n- Run `npm run dev:make-build-and-serve:run`\r\n\r\n**First test-case**\r\n\r\n1. Go to `localhost:8001` and check that `isValid: false` is shown on the bottom of the page.\r\n2. Enter any `Quantity` and `Product ID` for `Heading` section. `isValid` label will be changed to `true` \r\n3. Delete `Quantity` or `Product ID`. `isValid` label will be changed to `false`\r\n4. Validation will be shown under the fieldname\r\n5. Select `Heading2`. First `Heading` will be closed and inputs should be unmounted from DOM.\r\n6. Enter any `Quantity` and `Product ID` for `Heading2` section. `isValid` label is still equal `false`.\r\n\r\n![Prod First scenario gif](https://github.com/Travellerme/react-hook-form-issue/blob/master/Prod_first_scenario.gif?raw=true \"Prod First scenario\")\r\n\r\n**If you perform the same scenario but for `dev` mode (`npm start`), on the `6` step `isValid` will be changed to `true`**\r\n\r\n![Dev First scenario gif](https://github.com/Travellerme/react-hook-form-issue/blob/master/Dev_first_scenario.gif?raw=true \"Dev First scenario\")\r\n\r\n**Second test-case**\r\n\r\n1. Go to `localhost:8001` and check that `isValid: false` is shown on the bottom of page.\r\n2. Enter `Quantity` OR `Product ID` for `Heading` section. The second field must be empty. \r\n3. Select `Heading2`. First `Heading` will be closed and inputs should be unmounted from DOM.\r\n4. Enter any `Quantity` and `Product ID` for `Heading2` section. `isValid` label is still equal `false`.\r\n\r\n![Prod Second scenario gif](https://github.com/Travellerme/react-hook-form-issue/blob/master/Prod_second_scenario.gif?raw=true \"Prod Second scenario\")\r\n\r\n**If you perform the same scenario but for `dev` mode (`npm start`), on the `4` step `isValid` will be changed to `true`**\r\n\r\n![Dev Second scenario gif](https://github.com/Travellerme/react-hook-form-issue/blob/master/Dev_second_scenario.gif?raw=true \"Dev Second scenario\")\r\n\r\n**Codesandbox link (Required)**\r\n\r\n[Codesandbox:](https://codesandbox.io/s/heuristic-kirch-nnhth)\r\nPlease make sure that you go to the `Deployment` section and made a `production` build and deployed it to `Netlify`\r\n\r\nThen please click the `Visit Site` link\r\n\r\n![Codesandbox](https://github.com/Travellerme/react-hook-form-issue/raw/master/Codesandbox.png?raw=true \"Codesandbox\")\r\n\r\n**Expected behavior**\r\n- `isValid` must behave itself equally for `production` and `dev` builds.\r\n- For `production` build `isValid` must behave itself equally how it works for `dev` build. \r\n\r\n**Screenshots**\r\n![Prod First scenario gif](https://github.com/Travellerme/react-hook-form-issue/blob/master/Prod_first_scenario.gif?raw=true \"Prod First scenario\")\r\n\r\n![Prod Second scenario gif](https://github.com/Travellerme/react-hook-form-issue/blob/master/Prod_second_scenario.gif?raw=true \"Prod Second scenario\")\r\n\r\n**Desktop (please complete the following information):**\r\n\r\n- Windows 10 / Ubuntu / OS:\r\n- Browser Chrome / Firefox / Safari\r\n- Version 88.0.4324.150 / 85.0 / 13.1 (15609.1.20.111.8)\r\n\r\n**Smartphone (please complete the following information):**\r\n\r\n- was not tested\r\n\r\n**Additional context**\r\n\r\nThis issue is reproducible only by using `useFieldArray`\r\n\r\n`isDirty` and other flags are also affected\r\n\r\nWe use your library in our application and it's in `production` already, so we would really appreciate it if it's possible to fix it asap.\r\n\r\nThank you","closed_by":{"login":"bluebill1049","id":10513364,"node_id":"MDQ6VXNlcjEwNTEzMzY0","avatar_url":"https://avatars.githubusercontent.com/u/10513364?v=4","gravatar_id":"","url":"https://api.github.com/users/bluebill1049","html_url":"https://github.com/bluebill1049","followers_url":"https://api.github.com/users/bluebill1049/followers","following_url":"https://api.github.com/users/bluebill1049/following{/other_user}","gists_url":"https://api.github.com/users/bluebill1049/gists{/gist_id}","starred_url":"https://api.github.com/users/bluebill1049/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bluebill1049/subscriptions","organizations_url":"https://api.github.com/users/bluebill1049/orgs","repos_url":"https://api.github.com/users/bluebill1049/repos","events_url":"https://api.github.com/users/bluebill1049/events{/privacy}","received_events_url":"https://api.github.com/users/bluebill1049/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/4141/reactions","total_count":5,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":1,"heart":0,"rocket":0,"eyes":1},"timeline_url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/4141/timeline","performed_via_github_app":null,"state_reason":"completed"}