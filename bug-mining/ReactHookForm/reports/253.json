{"url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/4772","repository_url":"https://api.github.com/repos/react-hook-form/react-hook-form","labels_url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/4772/labels{/name}","comments_url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/4772/comments","events_url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/4772/events","html_url":"https://github.com/react-hook-form/react-hook-form/issues/4772","id":857089994,"node_id":"MDU6SXNzdWU4NTcwODk5OTQ=","number":4772,"title":"Inputs aren't reset without at least one top-level field","user":{"login":"mart-jansink","id":4381258,"node_id":"MDQ6VXNlcjQzODEyNTg=","avatar_url":"https://avatars.githubusercontent.com/u/4381258?v=4","gravatar_id":"","url":"https://api.github.com/users/mart-jansink","html_url":"https://github.com/mart-jansink","followers_url":"https://api.github.com/users/mart-jansink/followers","following_url":"https://api.github.com/users/mart-jansink/following{/other_user}","gists_url":"https://api.github.com/users/mart-jansink/gists{/gist_id}","starred_url":"https://api.github.com/users/mart-jansink/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mart-jansink/subscriptions","organizations_url":"https://api.github.com/users/mart-jansink/orgs","repos_url":"https://api.github.com/users/mart-jansink/repos","events_url":"https://api.github.com/users/mart-jansink/events{/privacy}","received_events_url":"https://api.github.com/users/mart-jansink/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1260145696,"node_id":"MDU6TGFiZWwxMjYwMTQ1Njk2","url":"https://api.github.com/repos/react-hook-form/react-hook-form/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-04-13T15:42:38Z","updated_at":"2022-10-12T18:05:33Z","closed_at":"2021-04-14T08:20:01Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\r\nInputs aren't reset without at least one top-level field. So something like just `{ name: { first: \"bill\", last: \"luo\" } }` doesn't work while `{ name: { first: \"bill\", last: \"luo\" }, email: \"test@test.com\" }` does, at least if there's a corresponding `<input />` element.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n\r\n1. Click the `reset` button and see the inputs being emptied because `reset( {} )` is called.\r\n2. Refresh the sandbox.\r\n3. Remove the `email` field from the form.\r\n4. Click the `reset` button again and see that the inputs retain their value.\r\n\r\n**Codesandbox link (Required)**\r\nhttps://codesandbox.io/s/react-hook-form-defaultvalues-v7-forked-y6myx\r\n\r\n**Expected behavior**\r\nEven without a top-level field the inputs should be emptied when `reset( {} )` is called.\r\n\r\n**Desktop (please complete the following information):**\r\n- OS: macOS (but probably any)\r\n- Browser: Chrome / Safari (but probably any)\r\n- Version: latest\r\n\r\n**Additional context**\r\nhttps://github.com/react-hook-form/react-hook-form/blob/8fd5b84e409689dcdf7a38e4441d6639620bf471/src/useForm.ts#L1056-L1068\r\nTo reset the fields the `reset()` method loops over everything in `fieldsRef.current` to find a reference to an actual `<input />`. From there it finds the closest parent `<form />` and resets that. But without at least one top-level field it won't find any `<input />` and won't reset the inputs.\r\n\r\nThis could be solved by e.g.\r\n- looping recursively through nested fields\r\n- explicitly providing a `ref` that should be set on the `<form />`\r\n- remembering a reference to the (first) closest parent `<form />` when `registerFieldRef()` is called\r\n\r\nThe second option would be my preference because of its explicitness, but requires changes from anybody using this module. The first option is mostly like how it's currently done, but then I'd prefer the third option because it's much more concise. This would however make the assumption that the `<form />` element doesn't change during the lifetime of the component, and I'm not sure if that's a reasonable one.\r\n\r\nIf you have any preference I'd be more than happy to work on a pull request. ","closed_by":{"login":"bluebill1049","id":10513364,"node_id":"MDQ6VXNlcjEwNTEzMzY0","avatar_url":"https://avatars.githubusercontent.com/u/10513364?v=4","gravatar_id":"","url":"https://api.github.com/users/bluebill1049","html_url":"https://github.com/bluebill1049","followers_url":"https://api.github.com/users/bluebill1049/followers","following_url":"https://api.github.com/users/bluebill1049/following{/other_user}","gists_url":"https://api.github.com/users/bluebill1049/gists{/gist_id}","starred_url":"https://api.github.com/users/bluebill1049/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bluebill1049/subscriptions","organizations_url":"https://api.github.com/users/bluebill1049/orgs","repos_url":"https://api.github.com/users/bluebill1049/repos","events_url":"https://api.github.com/users/bluebill1049/events{/privacy}","received_events_url":"https://api.github.com/users/bluebill1049/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/4772/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/4772/timeline","performed_via_github_app":null,"state_reason":"completed"}