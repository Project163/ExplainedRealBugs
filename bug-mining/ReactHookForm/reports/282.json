{"url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/5246","repository_url":"https://api.github.com/repos/react-hook-form/react-hook-form","labels_url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/5246/labels{/name}","comments_url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/5246/comments","events_url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/5246/events","html_url":"https://github.com/react-hook-form/react-hook-form/issues/5246","id":894924103,"node_id":"MDU6SXNzdWU4OTQ5MjQxMDM=","number":5246,"title":"useFieldArray with nested arrays throws error with `append` and `remove` in nested array (data is not iterable)","user":{"login":"mason-smith","id":29241619,"node_id":"MDQ6VXNlcjI5MjQxNjE5","avatar_url":"https://avatars.githubusercontent.com/u/29241619?v=4","gravatar_id":"","url":"https://api.github.com/users/mason-smith","html_url":"https://github.com/mason-smith","followers_url":"https://api.github.com/users/mason-smith/followers","following_url":"https://api.github.com/users/mason-smith/following{/other_user}","gists_url":"https://api.github.com/users/mason-smith/gists{/gist_id}","starred_url":"https://api.github.com/users/mason-smith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mason-smith/subscriptions","organizations_url":"https://api.github.com/users/mason-smith/orgs","repos_url":"https://api.github.com/users/mason-smith/repos","events_url":"https://api.github.com/users/mason-smith/events{/privacy}","received_events_url":"https://api.github.com/users/mason-smith/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1260145696,"node_id":"MDU6TGFiZWwxMjYwMTQ1Njk2","url":"https://api.github.com/repos/react-hook-form/react-hook-form/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2021-05-19T02:17:06Z","updated_at":"2022-10-12T00:03:08Z","closed_at":"2021-05-20T07:08:44Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\r\n\r\nCreating a nested useFieldArray \r\n```\r\nsetValue(\"test\", [\r\n  ...(getValues().test || []),\r\n  {\r\n    name: \"append\",\r\n    nestedArray: [{ field1: \"append\", field2: \"append\" }]\r\n  }\r\n]);\r\n```\r\ndoes not populate the fields for `nestedArray` values `field1` and `field2`\r\n\r\nUsing \r\n```\r\nremove(k)\r\n```\r\nto remove the empty `nestedArray` throws an error. `removeAtIndexes - data is not iterable`\r\n\r\n<hr />\r\n\r\nCreating a nested useFieldArray \r\n```\r\nsetValue(\"test\", [\r\n  ...(getValues().test || []),\r\n  {\r\n    name: \"append\",\r\n    nestedArray: [{ field1: \"append\", field2: \"append\" }]\r\n  }\r\n]);\r\n```\r\nand then using \r\n```\r\nappend({\r\n  field1: \"field1\",\r\n  field2: \"field2\"\r\n})\r\n```\r\nto append a nested array throws an error `append - data is not iterable`\r\n\r\n<hr />\r\n\r\nUsing\r\n```\r\nappend({ name: \"append\" });\r\n```\r\nto create a single level array works. \r\n\r\nUsing\r\n```\r\nappend({\r\n  field1: \"field1\",\r\n  field2: \"field2\"\r\n})\r\n```\r\nto populate the `nestedArray` works\r\n\r\nUsing\r\n```\r\nsetValue(\"test\", [\r\n  ...(getValues().test || []),\r\n  {\r\n    name: \"append\",\r\n    nestedArray: [{ field1: \"append\", field2: \"append\" }]\r\n  }\r\n]);\r\n```\r\nto create a new nested array clears the values of the other `nestedArray`\r\n\r\nThis seems like it could be somewhat related to #5208\r\n\r\n<hr />\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n\r\n1. Go to https://codesandbox.io/s/react-hook-form-usefieldarray-nested-arrays-forked-cg4yj?file=/src/index.js\r\n2. Click on 'Append Nested' button\r\n3. Notice the fields are not populated with default values\r\n4. Click on 'Delete Nested' button\r\n5. Observe thrown error\r\n6. Clear the error and refresh the page\r\n7. Click on 'Append Nested' button\r\n8. Click on the new 'Append Nested' button that appears above the `hr` tag\r\n9. Observe error\r\n10. Clear the error and refresh the page\r\n11. Click the 'Append' button\r\n12. Click on the new 'Append Nested' button that appears above the `hr` tag\r\n13. Click on the original 'Append Nested' button below the `hr` tag\r\n14. Notice the fields are cleared of their default values\r\n\r\n<hr />\r\n\r\n**Codesandbox link (Required)**\r\nhttps://codesandbox.io/s/react-hook-form-usefieldarray-nested-arrays-forked-cg4yj?file=/src/index.js\r\n\r\nUSING v7.6.2\r\n\r\n<hr />\r\n\r\n**Expected behavior**\r\nShould work exactly as the [v7.0.0 example](https://codesandbox.io/s/react-hook-form-usefieldarray-nested-arrays-m8w6j?file=/src/index.js) without errors\r\n\r\n<hr />\r\n\r\n**Desktop (please complete the following information):**\r\n\r\n- OS: Mac OSX\r\n- Browser: chrome, firefox\r\n- Version 7.6.2\r\n","closed_by":{"login":"bluebill1049","id":10513364,"node_id":"MDQ6VXNlcjEwNTEzMzY0","avatar_url":"https://avatars.githubusercontent.com/u/10513364?v=4","gravatar_id":"","url":"https://api.github.com/users/bluebill1049","html_url":"https://github.com/bluebill1049","followers_url":"https://api.github.com/users/bluebill1049/followers","following_url":"https://api.github.com/users/bluebill1049/following{/other_user}","gists_url":"https://api.github.com/users/bluebill1049/gists{/gist_id}","starred_url":"https://api.github.com/users/bluebill1049/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bluebill1049/subscriptions","organizations_url":"https://api.github.com/users/bluebill1049/orgs","repos_url":"https://api.github.com/users/bluebill1049/repos","events_url":"https://api.github.com/users/bluebill1049/events{/privacy}","received_events_url":"https://api.github.com/users/bluebill1049/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/5246/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/5246/timeline","performed_via_github_app":null,"state_reason":"completed"}