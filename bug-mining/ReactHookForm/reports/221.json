{"url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/3795","repository_url":"https://api.github.com/repos/react-hook-form/react-hook-form","labels_url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/3795/labels{/name}","comments_url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/3795/comments","events_url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/3795/events","html_url":"https://github.com/react-hook-form/react-hook-form/issues/3795","id":775671495,"node_id":"MDU6SXNzdWU3NzU2NzE0OTU=","number":3795,"title":"Nested useFieldArray regenerates field ids on every action","user":{"login":"ali-idrizi","id":20397725,"node_id":"MDQ6VXNlcjIwMzk3NzI1","avatar_url":"https://avatars.githubusercontent.com/u/20397725?v=4","gravatar_id":"","url":"https://api.github.com/users/ali-idrizi","html_url":"https://github.com/ali-idrizi","followers_url":"https://api.github.com/users/ali-idrizi/followers","following_url":"https://api.github.com/users/ali-idrizi/following{/other_user}","gists_url":"https://api.github.com/users/ali-idrizi/gists{/gist_id}","starred_url":"https://api.github.com/users/ali-idrizi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ali-idrizi/subscriptions","organizations_url":"https://api.github.com/users/ali-idrizi/orgs","repos_url":"https://api.github.com/users/ali-idrizi/repos","events_url":"https://api.github.com/users/ali-idrizi/events{/privacy}","received_events_url":"https://api.github.com/users/ali-idrizi/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-12-29T03:01:59Z","updated_at":"2022-10-13T06:16:07Z","closed_at":"2020-12-29T06:13:03Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\r\nThis seems to be a regression, as it's working fine on an older version 4.\r\n\r\nIf am trying out nested `useFieldArray`, let's say the first `useFieldArray` is the parent and the nested `useFieldArray` is the child. This issue only happens if there are multiple parents.\r\n\r\nHere is a case with two parents: If we delete the first parent, and then append/remove in the child of the second parent (now first) all the IDs in the `fields` are regenerated. This happens every time we append/remove (The input values seem to be kept, but I am using these IDs as `key` for framer-motion and this is causing the animation to re-run for every item in the fields, every time I append/remove).\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior: (You will have to check the console on codesandbox)\r\n\r\n1. Go to the v6 demo below and append an additional parent\r\n2. In the second parent append two nested fields\r\n3. Delete the first parent\r\n4. Append another nested fields in the only left parent\r\n5. Compare the IDs of the last two logs, they are the same inputs, but have different IDs. Appending again will change the IDs of every single field.\r\n\r\n**Codesandbox**\r\n(Initial codesandbox from [this issue](https://github.com/react-hook-form/react-hook-form/issues/993))\r\n- v4: https://codesandbox.io/s/react-hook-form-usefieldarray-forked-jltj6\r\n- v6: https://codesandbox.io/s/react-hook-form-usefieldarray-forked-ry8fq\r\n\r\n**Expected behavior**\r\nThe IDs should not change while appending/removing, they are the same inputs and should keep the same IDs. This is causing issues while using it with framer-motion to animate appending/removing.\r\n\r\n**Screenshots**\r\nThe expected behavior can be seen on this screenshot of v4.7.2. The IDs of first/second fields match the IDs of the first/second field after appending the third field.\r\n\r\n![v4.7.2](https://user-images.githubusercontent.com/20397725/103255138-7c9d5e00-4988-11eb-88e8-cd9dea9caa9c.png)\r\n\r\nFollowing the same steps on v6.13.1 the first/second fields have different IDs after appending the third field. Appending a fourth field will cause all the IDs to change again.\r\n\r\n![v6.13.1](https://user-images.githubusercontent.com/20397725/103255236-d69e2380-4988-11eb-801a-3caa8851766d.png)\r\n\r\n**Desktop:**\r\n\r\n- OS: macOS\r\n- Browser: Chrome\r\n- Version: 87\r\n","closed_by":{"login":"bluebill1049","id":10513364,"node_id":"MDQ6VXNlcjEwNTEzMzY0","avatar_url":"https://avatars.githubusercontent.com/u/10513364?v=4","gravatar_id":"","url":"https://api.github.com/users/bluebill1049","html_url":"https://github.com/bluebill1049","followers_url":"https://api.github.com/users/bluebill1049/followers","following_url":"https://api.github.com/users/bluebill1049/following{/other_user}","gists_url":"https://api.github.com/users/bluebill1049/gists{/gist_id}","starred_url":"https://api.github.com/users/bluebill1049/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bluebill1049/subscriptions","organizations_url":"https://api.github.com/users/bluebill1049/orgs","repos_url":"https://api.github.com/users/bluebill1049/repos","events_url":"https://api.github.com/users/bluebill1049/events{/privacy}","received_events_url":"https://api.github.com/users/bluebill1049/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/3795/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/3795/timeline","performed_via_github_app":null,"state_reason":"completed"}