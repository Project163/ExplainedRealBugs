{"url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/4637","repository_url":"https://api.github.com/repos/react-hook-form/react-hook-form","labels_url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/4637/labels{/name}","comments_url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/4637/comments","events_url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/4637/events","html_url":"https://github.com/react-hook-form/react-hook-form/issues/4637","id":850945381,"node_id":"MDU6SXNzdWU4NTA5NDUzODE=","number":4637,"title":"Bug - Previously mounted field arrays cannot have value set to empty array","user":{"login":"wdfinch","id":36898266,"node_id":"MDQ6VXNlcjM2ODk4MjY2","avatar_url":"https://avatars.githubusercontent.com/u/36898266?v=4","gravatar_id":"","url":"https://api.github.com/users/wdfinch","html_url":"https://github.com/wdfinch","followers_url":"https://api.github.com/users/wdfinch/followers","following_url":"https://api.github.com/users/wdfinch/following{/other_user}","gists_url":"https://api.github.com/users/wdfinch/gists{/gist_id}","starred_url":"https://api.github.com/users/wdfinch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wdfinch/subscriptions","organizations_url":"https://api.github.com/users/wdfinch/orgs","repos_url":"https://api.github.com/users/wdfinch/repos","events_url":"https://api.github.com/users/wdfinch/events{/privacy}","received_events_url":"https://api.github.com/users/wdfinch/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1260145696,"node_id":"MDU6TGFiZWwxMjYwMTQ1Njk2","url":"https://api.github.com/repos/react-hook-form/react-hook-form/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-04-06T04:39:49Z","updated_at":"2022-10-12T18:06:06Z","closed_at":"2021-04-06T08:14:55Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\r\nIf:\r\n\r\n1. A field array is mounted and then later unmounted\r\n2. We try to set its value to an empty array\r\n\r\nthen:\r\n\r\n1. The field array will be set to the form's default value for the field array instead of an empty array.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n\r\n1. Go to the sandbox\r\n2. Click the toggle hide button to hide the field array component\r\n3. Click the change value button to update the field array's value to an empty array\r\n4. Notice that the field array will instead be set to the default values for the field array\r\n\r\n**Codesandbox link (Required)**\r\nhttps://codesandbox.io/s/sharp-roentgen-inwl4?file=/src/App.js\r\n\r\n**Expected behavior**\r\nThis operation should result in an empty array. It works fine if the field array is mounted or the value being set is not an empty array (array with some element in it). It is likely an issue with shallow merging. However, a shallow merge should not occur here because the key for the field array does exist in `formValues`. Setting an empty array value is not the same as unregistering the input (deleting its key from form values). ","closed_by":{"login":"bluebill1049","id":10513364,"node_id":"MDQ6VXNlcjEwNTEzMzY0","avatar_url":"https://avatars.githubusercontent.com/u/10513364?v=4","gravatar_id":"","url":"https://api.github.com/users/bluebill1049","html_url":"https://github.com/bluebill1049","followers_url":"https://api.github.com/users/bluebill1049/followers","following_url":"https://api.github.com/users/bluebill1049/following{/other_user}","gists_url":"https://api.github.com/users/bluebill1049/gists{/gist_id}","starred_url":"https://api.github.com/users/bluebill1049/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bluebill1049/subscriptions","organizations_url":"https://api.github.com/users/bluebill1049/orgs","repos_url":"https://api.github.com/users/bluebill1049/repos","events_url":"https://api.github.com/users/bluebill1049/events{/privacy}","received_events_url":"https://api.github.com/users/bluebill1049/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/4637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/react-hook-form/react-hook-form/issues/4637/timeline","performed_via_github_app":null,"state_reason":"completed"}