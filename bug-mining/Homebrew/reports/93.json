{"url":"https://api.github.com/repos/Homebrew/brew/issues/17281","repository_url":"https://api.github.com/repos/Homebrew/brew","labels_url":"https://api.github.com/repos/Homebrew/brew/issues/17281/labels{/name}","comments_url":"https://api.github.com/repos/Homebrew/brew/issues/17281/comments","events_url":"https://api.github.com/repos/Homebrew/brew/issues/17281/events","html_url":"https://github.com/Homebrew/brew/issues/17281","id":2291081129,"node_id":"I_kwDOAyxcHc6Ijx-p","number":17281,"title":"SBOMs break bottle reproducibility","user":{"login":"carlocab","id":30379873,"node_id":"MDQ6VXNlcjMwMzc5ODcz","avatar_url":"https://avatars.githubusercontent.com/u/30379873?v=4","gravatar_id":"","url":"https://api.github.com/users/carlocab","html_url":"https://github.com/carlocab","followers_url":"https://api.github.com/users/carlocab/followers","following_url":"https://api.github.com/users/carlocab/following{/other_user}","gists_url":"https://api.github.com/users/carlocab/gists{/gist_id}","starred_url":"https://api.github.com/users/carlocab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlocab/subscriptions","organizations_url":"https://api.github.com/users/carlocab/orgs","repos_url":"https://api.github.com/users/carlocab/repos","events_url":"https://api.github.com/users/carlocab/events{/privacy}","received_events_url":"https://api.github.com/users/carlocab/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":922544989,"node_id":"MDU6TGFiZWw5MjI1NDQ5ODk=","url":"https://api.github.com/repos/Homebrew/brew/labels/outdated","name":"outdated","color":"d93f0b","default":false,"description":"PR was locked due to age"}],"state":"closed","locked":true,"assignee":{"login":"MikeMcQuaid","id":125011,"node_id":"MDQ6VXNlcjEyNTAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/125011?v=4","gravatar_id":"","url":"https://api.github.com/users/MikeMcQuaid","html_url":"https://github.com/MikeMcQuaid","followers_url":"https://api.github.com/users/MikeMcQuaid/followers","following_url":"https://api.github.com/users/MikeMcQuaid/following{/other_user}","gists_url":"https://api.github.com/users/MikeMcQuaid/gists{/gist_id}","starred_url":"https://api.github.com/users/MikeMcQuaid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MikeMcQuaid/subscriptions","organizations_url":"https://api.github.com/users/MikeMcQuaid/orgs","repos_url":"https://api.github.com/users/MikeMcQuaid/repos","events_url":"https://api.github.com/users/MikeMcQuaid/events{/privacy}","received_events_url":"https://api.github.com/users/MikeMcQuaid/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"MikeMcQuaid","id":125011,"node_id":"MDQ6VXNlcjEyNTAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/125011?v=4","gravatar_id":"","url":"https://api.github.com/users/MikeMcQuaid","html_url":"https://github.com/MikeMcQuaid","followers_url":"https://api.github.com/users/MikeMcQuaid/followers","following_url":"https://api.github.com/users/MikeMcQuaid/following{/other_user}","gists_url":"https://api.github.com/users/MikeMcQuaid/gists{/gist_id}","starred_url":"https://api.github.com/users/MikeMcQuaid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MikeMcQuaid/subscriptions","organizations_url":"https://api.github.com/users/MikeMcQuaid/orgs","repos_url":"https://api.github.com/users/MikeMcQuaid/repos","events_url":"https://api.github.com/users/MikeMcQuaid/events{/privacy}","received_events_url":"https://api.github.com/users/MikeMcQuaid/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":18,"created_at":"2024-05-11T22:13:32Z","updated_at":"2024-06-26T01:26:37Z","closed_at":"2024-05-26T15:02:08Z","author_association":"MEMBER","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### `brew doctor` output\r\n\r\n```shell\r\n❯ brew dr\r\nYour system is ready to brew.\r\n```\r\n\r\n\r\n### Verification\r\n\r\n- [X] My \"`brew doctor` output\" above says `Your system is ready to brew.` and am still able to reproduce my issue.\r\n- [X] I ran `brew update` twice and am still able to reproduce my issue.\r\n- [X] This issue's title and/or description do not reference a single formula e.g. `brew install wget`. If they do, open an issue at https://github.com/Homebrew/homebrew-core/issues/new/choose instead.\r\n\r\n### `brew config` output\r\n\r\n```shell\r\n❯ brew config\r\nHOMEBREW_VERSION: 4.2.21-109-g71c4bfa\r\nORIGIN: https://github.com/Homebrew/brew\r\nHEAD: 71c4bfae79852b28d299de51a3007149bfe44073\r\nLast commit: 4 hours ago\r\nCore tap HEAD: 70912b0a1127e1b4fb3f50298b6f843b495a19fb\r\nCore tap last commit: 18 minutes ago\r\nCore tap JSON: 10 May 16:11 UTC\r\nCore cask tap HEAD: 5be9a58d025d2db4fe8dd96089c9bd65600cba24\r\nCore cask tap last commit: 34 minutes ago\r\nCore cask tap JSON: 10 May 16:11 UTC\r\nHOMEBREW_PREFIX: /opt/homebrew\r\nHOMEBREW_BAT: set\r\nHOMEBREW_BOOTSNAP: set\r\nHOMEBREW_CASK_OPTS: []\r\nHOMEBREW_COLOR: set\r\nHOMEBREW_DEVELOPER: set\r\nHOMEBREW_EDITOR: nvim\r\nHOMEBREW_FORCE_BREWED_CURL: set\r\nHOMEBREW_FORCE_BREWED_GIT: set\r\nHOMEBREW_GIT_EMAIL: 30379873+carlocab@users.noreply.github.com\r\nHOMEBREW_GIT_NAME: Carlo Cabrera\r\nHOMEBREW_MAKE_JOBS: 16\r\nHOMEBREW_NO_AUTO_UPDATE: set\r\nHOMEBREW_NO_CLEANUP_FORMULAE: zsh\r\nHOMEBREW_NO_INSTALL_FROM_API: set\r\nHOMEBREW_PRY: set\r\nHOMEBREW_SORBET_RUNTIME: set\r\nHomebrew Ruby: 3.1.4 => /opt/homebrew/Library/Homebrew/vendor/portable-ruby/3.1.4/bin/ruby\r\nCPU: 16-core 64-bit arm_palma\r\nClang: 15.0.0 build 1500\r\nGit: 2.45.0 => /opt/homebrew/opt/git/bin/git\r\nCurl: 8.7.1 => /opt/homebrew/opt/curl/bin/curl\r\nmacOS: 14.4.1-arm64\r\nCLT: 15.3.0.0.1.1708646388\r\nXcode: 15.3\r\nRosetta 2: false\r\n```\r\n\r\n\r\n### What were you trying to do (and why)?\r\n\r\nFigure out why we don't have an `:all` bottle at https://github.com/Homebrew/homebrew-core/commit/0894397822dcdba3facaf90055f450b2dc741647 (because `:all` bottles are nice).\r\n\r\nTo examine the differences between the bottles, I used `diffoscope`.\r\n\r\n### What happened (include all command output)?\r\n\r\n`diffoscope` showed that the bottles have differing `sbom.spdx.json` files.\r\n\r\n<details>\r\n<summary>diffoscope output</summary>\r\n\r\n```diff\r\n--- bottles_ubuntu-22.04/osinfo-db--20240510.x86_64_linux.bottle.tar.gz\r\n+++ bottles_14-arm64-9046359873/osinfo-db--20240510.arm64_sonoma.bottle.tar.gz\r\n│   --- osinfo-db--20240510.x86_64_linux.bottle.tar\r\n├── +++ osinfo-db--20240510.arm64_sonoma.bottle.tar\r\n│ ├── file list\r\n│ │ @@ -1,12 +1,12 @@\r\n│ │  drwxr-xr-x   0        0        0        0 2024-05-10 10:31:02.000000 osinfo-db/20240510/\r\n│ │  drwxr-xr-x   0        0        0        0 2024-05-10 10:31:02.000000 osinfo-db/20240510/.brew/\r\n│ │  -rw-r--r--   0        0        0      667 2024-05-10 10:31:02.000000 osinfo-db/20240510/.brew/osinfo-db.rb\r\n│ │  -rw-r--r--   0        0        0    17987 2024-05-10 10:31:02.000000 osinfo-db/20240510/LICENSE\r\n│ │ --rw-r--r--   0        0        0     2727 2024-05-10 10:31:02.000000 osinfo-db/20240510/sbom.spdx.json\r\n│ │ +-rw-r--r--   0        0        0     2719 2024-05-10 10:31:02.000000 osinfo-db/20240510/sbom.spdx.json\r\n│ │  drwxr-xr-x   0        0        0        0 2024-05-10 10:31:02.000000 osinfo-db/20240510/share/\r\n│ │  drwxr-xr-x   0        0        0        0 2024-05-10 10:31:02.000000 osinfo-db/20240510/share/osinfo/\r\n│ │  -rw-r--r--   0        0        0    17987 2024-05-10 10:31:02.000000 osinfo-db/20240510/share/osinfo/LICENSE\r\n│ │  -rw-r--r--   0        0        0        8 2024-05-10 10:31:02.000000 osinfo-db/20240510/share/osinfo/VERSION\r\n│ │  drwxr-xr-x   0        0        0        0 2024-05-10 10:31:02.000000 osinfo-db/20240510/share/osinfo/datamap/\r\n│ │  drwxr-xr-x   0        0        0        0 2024-05-10 10:31:02.000000 osinfo-db/20240510/share/osinfo/datamap/microsoft.com/\r\n│ │  -rw-r--r--   0        0        0     1691 2024-05-10 10:31:02.000000 osinfo-db/20240510/share/osinfo/datamap/microsoft.com/win-7-l10n-language.xml\r\n│ ├── osinfo-db/20240510/sbom.spdx.json\r\n│ │ ├── Pretty-printed\r\n│ │ │ @@ -1,11 +1,11 @@\r\n│ │ │  {\r\n│ │ │      \"SPDXID\": \"SPDXRef-DOCUMENT\",\r\n│ │ │      \"creationInfo\": {\r\n│ │ │ -        \"created\": \"2024-05-11T20:59:00+00:00\",\r\n│ │ │ +        \"created\": \"2024-05-11T17:00:13-04:00\",\r\n│ │ │          \"creators\": [\r\n│ │ │              \"Tool: https://github.com/homebrew/brew@4.2.21-109-g71c4bfa\"\r\n│ │ │          ]\r\n│ │ │      },\r\n│ │ │      \"dataLicense\": \"CC0-1.0\",\r\n│ │ │      \"documentDescribes\": [\r\n│ │ │          \"SPDXRef-Archive-osinfo-db-src\",\r\n│ │ │ @@ -14,15 +14,15 @@\r\n│ │ │      ],\r\n│ │ │      \"documentNamespace\": \"https://formulae.brew.sh/spdx/osinfo-db-20240510.json\",\r\n│ │ │      \"files\": [],\r\n│ │ │      \"name\": \"SBOM-SPDX-osinfo-db-20240510\",\r\n│ │ │      \"packages\": [\r\n│ │ │          {\r\n│ │ │              \"SPDXID\": \"SPDXRef-Archive-osinfo-db-src\",\r\n│ │ │ -            \"builtDate\": \"2024-05-10 10:31:02 +0000\",\r\n│ │ │ +            \"builtDate\": \"2024-05-10 06:31:02 -0400\",\r\n│ │ │              \"checksums\": [\r\n│ │ │                  {\r\n│ │ │                      \"algorithm\": \"SHA256\",\r\n│ │ │                      \"checksumValue\": \"08a2d521c485687f6be39940d5b3f61bc0f583bb7e3655a131c658385eb7e5ca\"\r\n│ │ │                  }\r\n│ │ │              ],\r\n│ │ │              \"copyrightText\": \"NOASSERTION\",\r\n│ │ │ @@ -39,20 +39,20 @@\r\n│ │ │              \"checksums\": [],\r\n│ │ │              \"copyrightText\": \"NOASSERTION\",\r\n│ │ │              \"downloadLocation\": \"NOASSERTION\",\r\n│ │ │              \"externalRefs\": [],\r\n│ │ │              \"filesAnalyzed\": false,\r\n│ │ │              \"licenseConcluded\": \"NOASSERTION\",\r\n│ │ │              \"licenseDeclared\": \"NOASSERTION\",\r\n│ │ │ -            \"name\": \"gcc-11\",\r\n│ │ │ -            \"versionInfo\": \"NOASSERTION\"\r\n│ │ │ +            \"name\": \"clang\",\r\n│ │ │ +            \"versionInfo\": \"15.3\"\r\n│ │ │          },\r\n│ │ │          {\r\n│ │ │              \"SPDXID\": \"SPDXRef-Bottle-osinfo-db\",\r\n│ │ │ -            \"builtDate\": \"2024-05-10 10:31:02 +0000\",\r\n│ │ │ +            \"builtDate\": \"2024-05-10 06:31:02 -0400\",\r\n│ │ │              \"checksums\": [\r\n│ │ │                  {\r\n│ │ │                      \"algorithm\": \"SHA256\",\r\n│ │ │                      \"checksumValue\": \"a8c86aee5fd157554d85aa0a28d4c12bc5bdf03ccb5e67ac5c8c524d78bd1971\"\r\n│ │ │                  }\r\n│ │ │              ],\r\n│ │ │              \"copyrightText\": \"NOASSERTION\",\r\n```\r\n\r\n</details>\r\n\r\n### What did you expect to happen?\r\n\r\nThese bottles are identical, so they should not have different contents.\r\n\r\n### Step-by-step reproduction instructions (by running `brew` commands)\r\n\r\n```shell\r\ngh run download 9046359873 -p 'bottles*' -R Homebrew/homebrew-core\r\ndiffoscope bottles_ubuntu-22.04/osinfo-db--20240510.x86_64_linux.bottle.tar.gz bottles_14-arm64-9046359873/osinfo-db--20240510.arm64_sonoma.bottle.tar.gz\r\n```\r\n","closed_by":{"login":"MikeMcQuaid","id":125011,"node_id":"MDQ6VXNlcjEyNTAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/125011?v=4","gravatar_id":"","url":"https://api.github.com/users/MikeMcQuaid","html_url":"https://github.com/MikeMcQuaid","followers_url":"https://api.github.com/users/MikeMcQuaid/followers","following_url":"https://api.github.com/users/MikeMcQuaid/following{/other_user}","gists_url":"https://api.github.com/users/MikeMcQuaid/gists{/gist_id}","starred_url":"https://api.github.com/users/MikeMcQuaid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MikeMcQuaid/subscriptions","organizations_url":"https://api.github.com/users/MikeMcQuaid/orgs","repos_url":"https://api.github.com/users/MikeMcQuaid/repos","events_url":"https://api.github.com/users/MikeMcQuaid/events{/privacy}","received_events_url":"https://api.github.com/users/MikeMcQuaid/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/Homebrew/brew/issues/17281/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Homebrew/brew/issues/17281/timeline","performed_via_github_app":null,"state_reason":"completed"}