{"url":"https://api.github.com/repos/Homebrew/brew/issues/15995","repository_url":"https://api.github.com/repos/Homebrew/brew","labels_url":"https://api.github.com/repos/Homebrew/brew/issues/15995/labels{/name}","comments_url":"https://api.github.com/repos/Homebrew/brew/issues/15995/comments","events_url":"https://api.github.com/repos/Homebrew/brew/issues/15995/events","html_url":"https://github.com/Homebrew/brew/issues/15995","id":1891834837,"node_id":"I_kwDOAyxcHc5wwxvV","number":15995,"title":"Issue with brew audit","user":{"login":"TabulateJarl8","id":58576759,"node_id":"MDQ6VXNlcjU4NTc2NzU5","avatar_url":"https://avatars.githubusercontent.com/u/58576759?v=4","gravatar_id":"","url":"https://api.github.com/users/TabulateJarl8","html_url":"https://github.com/TabulateJarl8","followers_url":"https://api.github.com/users/TabulateJarl8/followers","following_url":"https://api.github.com/users/TabulateJarl8/following{/other_user}","gists_url":"https://api.github.com/users/TabulateJarl8/gists{/gist_id}","starred_url":"https://api.github.com/users/TabulateJarl8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TabulateJarl8/subscriptions","organizations_url":"https://api.github.com/users/TabulateJarl8/orgs","repos_url":"https://api.github.com/users/TabulateJarl8/repos","events_url":"https://api.github.com/users/TabulateJarl8/events{/privacy}","received_events_url":"https://api.github.com/users/TabulateJarl8/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":922544989,"node_id":"MDU6TGFiZWw5MjI1NDQ5ODk=","url":"https://api.github.com/repos/Homebrew/brew/labels/outdated","name":"outdated","color":"d93f0b","default":false,"description":"PR was locked due to age"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-09-11T19:05:59Z","updated_at":"2023-10-14T00:06:18Z","closed_at":"2023-09-13T08:48:09Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### `brew gist-logs <formula>` link OR `brew config` AND `brew doctor` output\r\n\r\n```shell\r\n`brew config`:\r\n\r\nHOMEBREW_VERSION: 4.1.10\r\nORIGIN: https://github.com/Homebrew/brew\r\nHEAD: 12c8778af976269344f3c0b914243e178fc4ffbd\r\nLast commit: 5 days ago\r\nCore tap origin: https://github.com/Homebrew/homebrew-core\r\nCore tap HEAD: 358f9b4c5f46fbfaefc1b5e052f397b55943a18f\r\nCore tap last commit: 4 days ago\r\nCore tap branch: master\r\nCore tap JSON: 07 Sep 20:19 UTC\r\nHOMEBREW_PREFIX: /home/linuxbrew/.linuxbrew\r\nHOMEBREW_CASK_OPTS: []\r\nHOMEBREW_DISPLAY: :0.0\r\nHOMEBREW_MAKE_JOBS: 4\r\nHOMEBREW_NO_INSTALL_FROM_API: set\r\nHOMEBREW_SORBET_RUNTIME: set\r\nHomebrew Ruby: 2.6.10 => /home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/vendor/portable-ruby/2.6.10_1/bin/ruby\r\nCPU: quad-core 64-bit zen\r\nClang: 16.0.6\r\nGit: 2.34.1 => /bin/git\r\nCurl: 7.81.0 => /bin/curl\r\nKernel: Linux 5.15.0-83-generic x86_64 GNU/Linux\r\nOS: Ubuntu 22.04.3 LTS (jammy)\r\nHost glibc: 2.35\r\n/usr/bin/gcc: 11.4.0\r\n/usr/bin/ruby: N/A\r\nglibc: N/A\r\ngcc@11: N/A\r\ngcc: N/A\r\nxorg: N/A\r\n\r\n`brew doctor`:\r\nPlease note that these warnings are just used to help the Homebrew maintainers\r\nwith debugging if you file an issue. If everything you use Homebrew for is\r\nworking fine: please don't worry or file an issue; just ignore this. Thanks!\r\n\r\nWarning: You have uncommitted modifications to Homebrew/homebrew-core.\r\nIf this is a surprise to you, then you should stash these modifications.\r\nStashing returns Homebrew to a pristine state but can be undone\r\nshould you later need to do so for some reason.\r\n  cd /home/linuxbrew/.linuxbrew/Homebrew/Library/Taps/homebrew/homebrew-core && git stash -u && git clean -d -f\r\n\r\nUncommitted files:\r\n  ?? Formula/s/squiid.rb\r\n```\r\n\r\n\r\n### Verification\r\n\r\n- [X] My \"`brew doctor` output\" says `Your system is ready to brew.` and am still able to reproduce my issue.\r\n- [X] I ran `brew update` and am still able to reproduce my issue.\r\n- [X] I have resolved all warnings from `brew doctor` and that did not fix my problem.\r\n- [X] I searched for recent similar issues at https://github.com/Homebrew/homebrew-core/issues?q=is%3Aissue and found no duplicates.\r\n\r\n### What were you trying to do (and why)?\r\n\r\nI'm trying to audit my package for submission, but brew audit seems to be giving an error\r\n\r\n### What happened (include all command output)?\r\n\r\nIt doesn't error when `HOMEBREW_NO_INSTALL_FROM_API` isn't set, but when it is, I get the following output on macOS, Linux, and the build CI:\r\n\r\n```console\r\nuser@hostname:~$ HOMEBREW_NO_INSTALL_FROM_API=1 brew audit --new-formula squiid\r\n \r\nError: undefined method `<' for nil:NilClass\r\nPlease report this issue:\r\n  https://docs.brew.sh/Troubleshooting\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/utils/shared_audits.rb:116:in `gitlab'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/formula_auditor.rb:613:in `audit_gitlab_repository'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/formula_auditor.rb:914:in `block in audit'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/formula_auditor.rb:909:in `each'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/formula_auditor.rb:909:in `audit'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/dev-cmd/audit.rb:213:in `tap'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/dev-cmd/audit.rb:213:in `block (4 levels) in audit'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/api.rb:192:in `with_no_api_env'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/vendor/bundle/ruby/2.6.0/gems/sorbet-runtime-0.5.10461/lib/types/private/methods/call_validation.rb:157:in `call'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/vendor/bundle/ruby/2.6.0/gems/sorbet-runtime-0.5.10461/lib/types/private/methods/call_validation.rb:157:in `validate_call'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/vendor/bundle/ruby/2.6.0/gems/sorbet-runtime-0.5.10461/lib/types/private/methods/call_validation.rb:89:in `block in create_validator_slow'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/dev-cmd/audit.rb:218:in `block (3 levels) in audit'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/simulate_system.rb:29:in `with'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/vendor/bundle/ruby/2.6.0/gems/sorbet-runtime-0.5.10461/lib/types/private/methods/call_validation.rb:157:in `call'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/vendor/bundle/ruby/2.6.0/gems/sorbet-runtime-0.5.10461/lib/types/private/methods/call_validation.rb:157:in `validate_call'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/vendor/bundle/ruby/2.6.0/gems/sorbet-runtime-0.5.10461/lib/types/private/methods/_methods.rb:270:in `block in _on_method_added'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/dev-cmd/audit.rb:208:in `block (2 levels) in audit'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/dev-cmd/audit.rb:207:in `each'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/dev-cmd/audit.rb:207:in `flat_map'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/dev-cmd/audit.rb:207:in `block in audit'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/dev-cmd/audit.rb:190:in `each'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/dev-cmd/audit.rb:190:in `each_with_object'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/dev-cmd/audit.rb:190:in `audit'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/vendor/bundle/ruby/2.6.0/gems/sorbet-runtime-0.5.10461/lib/types/private/methods/call_validation.rb:157:in `call'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/vendor/bundle/ruby/2.6.0/gems/sorbet-runtime-0.5.10461/lib/types/private/methods/call_validation.rb:157:in `validate_call'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/vendor/bundle/ruby/2.6.0/gems/sorbet-runtime-0.5.10461/lib/types/private/methods/_methods.rb:270:in `block in _on_method_added'\r\n/home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/brew.rb:94:in `<main>'\r\n```\r\n\r\n### What did you expect to happen?\r\n\r\nbrew audit to pass successfully. PR is Homebrew/homebrew-core#141733\r\n\r\n### Step-by-step reproduction instructions (by running `brew` commands)\r\n\r\n```shell\r\nHOMEBREW_NO_INSTALL_FROM_API=1 brew audit --new-formula squiid\r\n```\r\n","closed_by":{"login":"MikeMcQuaid","id":125011,"node_id":"MDQ6VXNlcjEyNTAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/125011?v=4","gravatar_id":"","url":"https://api.github.com/users/MikeMcQuaid","html_url":"https://github.com/MikeMcQuaid","followers_url":"https://api.github.com/users/MikeMcQuaid/followers","following_url":"https://api.github.com/users/MikeMcQuaid/following{/other_user}","gists_url":"https://api.github.com/users/MikeMcQuaid/gists{/gist_id}","starred_url":"https://api.github.com/users/MikeMcQuaid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MikeMcQuaid/subscriptions","organizations_url":"https://api.github.com/users/MikeMcQuaid/orgs","repos_url":"https://api.github.com/users/MikeMcQuaid/repos","events_url":"https://api.github.com/users/MikeMcQuaid/events{/privacy}","received_events_url":"https://api.github.com/users/MikeMcQuaid/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/Homebrew/brew/issues/15995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Homebrew/brew/issues/15995/timeline","performed_via_github_app":null,"state_reason":"completed"}