[{"id":5096229670,"node_id":"MDEyOkxhYmVsZWRFdmVudDUwOTYyMjk2NzA=","url":"https://api.github.com/repos/Homebrew/brew/issues/events/5096229670","actor":{"login":"sudoforge","id":3893293,"node_id":"MDQ6VXNlcjM4OTMyOTM=","avatar_url":"https://avatars.githubusercontent.com/u/3893293?v=4","gravatar_id":"","url":"https://api.github.com/users/sudoforge","html_url":"https://github.com/sudoforge","followers_url":"https://api.github.com/users/sudoforge/followers","following_url":"https://api.github.com/users/sudoforge/following{/other_user}","gists_url":"https://api.github.com/users/sudoforge/gists{/gist_id}","starred_url":"https://api.github.com/users/sudoforge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudoforge/subscriptions","organizations_url":"https://api.github.com/users/sudoforge/orgs","repos_url":"https://api.github.com/users/sudoforge/repos","events_url":"https://api.github.com/users/sudoforge/events{/privacy}","received_events_url":"https://api.github.com/users/sudoforge/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-08-02T01:30:58Z","label":{"name":"bug","color":"e10d02"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/Homebrew/brew/issues/comments/890651960","html_url":"https://github.com/Homebrew/brew/issues/11802#issuecomment-890651960","issue_url":"https://api.github.com/repos/Homebrew/brew/issues/11802","id":890651960,"node_id":"IC_kwDOAyxcHc41FkU4","user":{"login":"sudoforge","id":3893293,"node_id":"MDQ6VXNlcjM4OTMyOTM=","avatar_url":"https://avatars.githubusercontent.com/u/3893293?v=4","gravatar_id":"","url":"https://api.github.com/users/sudoforge","html_url":"https://github.com/sudoforge","followers_url":"https://api.github.com/users/sudoforge/followers","following_url":"https://api.github.com/users/sudoforge/following{/other_user}","gists_url":"https://api.github.com/users/sudoforge/gists{/gist_id}","starred_url":"https://api.github.com/users/sudoforge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudoforge/subscriptions","organizations_url":"https://api.github.com/users/sudoforge/orgs","repos_url":"https://api.github.com/users/sudoforge/repos","events_url":"https://api.github.com/users/sudoforge/events{/privacy}","received_events_url":"https://api.github.com/users/sudoforge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-02T01:52:33Z","updated_at":"2021-08-02T01:52:33Z","body":"In working on a fix for this, It's actually apparent that the docker image doesn't even build successfully as-is:\r\n\r\n```\r\nStep 8/8 : RUN cd /home/linuxbrew/.linuxbrew   && mkdir -p bin etc include lib opt sbin share var/homebrew/linked Cellar   && ln -s ../Homebrew/bin/brew /home/linuxbrew/.linuxbrew/bin/   && git -C /home/linuxbrew/.linuxbrew/Homebrew remote set-url origin https://github.com/Homebrew/brew   && git -C /home/linuxbrew/.linuxbrew/Homebrew fetch origin   && HOMEBREW_NO_ANALYTICS=1 HOMEBREW_NO_AUTO_UPDATE=1 brew tap homebrew/core   && brew install-bundler-gems   && brew cleanup   && { git -C /home/linuxbrew/.linuxbrew/Homebrew config --unset gc.auto; true; }   && { git -C /home/linuxbrew/.linuxbrew/Homebrew config --unset homebrew.devcmdrun; true; }   && rm -rf ~/.cache   && chown -R linuxbrew: /home/linuxbrew/.linuxbrew   && chmod -R g+w,o-w /home/linuxbrew/.linuxbrew\r\n ---> Running in b8db808dc99f\r\nError: Running Homebrew as root is extremely dangerous and no longer supported.\r\nAs Homebrew does not drop privileges on installation you would be giving all\r\nbuild scripts full access to your system.\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/Homebrew/brew/issues/comments/890651960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sudoforge","id":3893293,"node_id":"MDQ6VXNlcjM4OTMyOTM=","avatar_url":"https://avatars.githubusercontent.com/u/3893293?v=4","gravatar_id":"","url":"https://api.github.com/users/sudoforge","html_url":"https://github.com/sudoforge","followers_url":"https://api.github.com/users/sudoforge/followers","following_url":"https://api.github.com/users/sudoforge/following{/other_user}","gists_url":"https://api.github.com/users/sudoforge/gists{/gist_id}","starred_url":"https://api.github.com/users/sudoforge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudoforge/subscriptions","organizations_url":"https://api.github.com/users/sudoforge/orgs","repos_url":"https://api.github.com/users/sudoforge/repos","events_url":"https://api.github.com/users/sudoforge/events{/privacy}","received_events_url":"https://api.github.com/users/sudoforge/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/Homebrew/brew/issues/comments/891257737","html_url":"https://github.com/Homebrew/brew/issues/11802#issuecomment-891257737","issue_url":"https://api.github.com/repos/Homebrew/brew/issues/11802","id":891257737,"node_id":"IC_kwDOAyxcHc41H4OJ","user":{"login":"iMichka","id":3406519,"node_id":"MDQ6VXNlcjM0MDY1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/3406519?v=4","gravatar_id":"","url":"https://api.github.com/users/iMichka","html_url":"https://github.com/iMichka","followers_url":"https://api.github.com/users/iMichka/followers","following_url":"https://api.github.com/users/iMichka/following{/other_user}","gists_url":"https://api.github.com/users/iMichka/gists{/gist_id}","starred_url":"https://api.github.com/users/iMichka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iMichka/subscriptions","organizations_url":"https://api.github.com/users/iMichka/orgs","repos_url":"https://api.github.com/users/iMichka/repos","events_url":"https://api.github.com/users/iMichka/events{/privacy}","received_events_url":"https://api.github.com/users/iMichka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-02T19:00:01Z","updated_at":"2021-08-02T19:00:01Z","body":"There is a  non root `linuxbrew` user in the image. Can you try `docker run --user linuxbrew` ?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/Homebrew/brew/issues/comments/891257737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"iMichka","id":3406519,"node_id":"MDQ6VXNlcjM0MDY1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/3406519?v=4","gravatar_id":"","url":"https://api.github.com/users/iMichka","html_url":"https://github.com/iMichka","followers_url":"https://api.github.com/users/iMichka/followers","following_url":"https://api.github.com/users/iMichka/following{/other_user}","gists_url":"https://api.github.com/users/iMichka/gists{/gist_id}","starred_url":"https://api.github.com/users/iMichka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iMichka/subscriptions","organizations_url":"https://api.github.com/users/iMichka/orgs","repos_url":"https://api.github.com/users/iMichka/repos","events_url":"https://api.github.com/users/iMichka/events{/privacy}","received_events_url":"https://api.github.com/users/iMichka/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/Homebrew/brew/issues/comments/891258538","html_url":"https://github.com/Homebrew/brew/issues/11802#issuecomment-891258538","issue_url":"https://api.github.com/repos/Homebrew/brew/issues/11802","id":891258538,"node_id":"IC_kwDOAyxcHc41H4aq","user":{"login":"sudoforge","id":3893293,"node_id":"MDQ6VXNlcjM4OTMyOTM=","avatar_url":"https://avatars.githubusercontent.com/u/3893293?v=4","gravatar_id":"","url":"https://api.github.com/users/sudoforge","html_url":"https://github.com/sudoforge","followers_url":"https://api.github.com/users/sudoforge/followers","following_url":"https://api.github.com/users/sudoforge/following{/other_user}","gists_url":"https://api.github.com/users/sudoforge/gists{/gist_id}","starred_url":"https://api.github.com/users/sudoforge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudoforge/subscriptions","organizations_url":"https://api.github.com/users/sudoforge/orgs","repos_url":"https://api.github.com/users/sudoforge/repos","events_url":"https://api.github.com/users/sudoforge/events{/privacy}","received_events_url":"https://api.github.com/users/sudoforge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-02T19:01:16Z","updated_at":"2021-08-02T19:01:36Z","body":"That would work, but I'm actually working on a larger refactoring for the image given that it is currently pretty bloated and has various errors. I'm in the middle of my work day, but should have a PR up later.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/Homebrew/brew/issues/comments/891258538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sudoforge","id":3893293,"node_id":"MDQ6VXNlcjM4OTMyOTM=","avatar_url":"https://avatars.githubusercontent.com/u/3893293?v=4","gravatar_id":"","url":"https://api.github.com/users/sudoforge","html_url":"https://github.com/sudoforge","followers_url":"https://api.github.com/users/sudoforge/followers","following_url":"https://api.github.com/users/sudoforge/following{/other_user}","gists_url":"https://api.github.com/users/sudoforge/gists{/gist_id}","starred_url":"https://api.github.com/users/sudoforge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudoforge/subscriptions","organizations_url":"https://api.github.com/users/sudoforge/orgs","repos_url":"https://api.github.com/users/sudoforge/repos","events_url":"https://api.github.com/users/sudoforge/events{/privacy}","received_events_url":"https://api.github.com/users/sudoforge/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/Homebrew/brew/issues/comments/891261110","html_url":"https://github.com/Homebrew/brew/issues/11802#issuecomment-891261110","issue_url":"https://api.github.com/repos/Homebrew/brew/issues/11802","id":891261110,"node_id":"IC_kwDOAyxcHc41H5C2","user":{"login":"iMichka","id":3406519,"node_id":"MDQ6VXNlcjM0MDY1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/3406519?v=4","gravatar_id":"","url":"https://api.github.com/users/iMichka","html_url":"https://github.com/iMichka","followers_url":"https://api.github.com/users/iMichka/followers","following_url":"https://api.github.com/users/iMichka/following{/other_user}","gists_url":"https://api.github.com/users/iMichka/gists{/gist_id}","starred_url":"https://api.github.com/users/iMichka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iMichka/subscriptions","organizations_url":"https://api.github.com/users/iMichka/orgs","repos_url":"https://api.github.com/users/iMichka/repos","events_url":"https://api.github.com/users/iMichka/events{/privacy}","received_events_url":"https://api.github.com/users/iMichka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-02T19:04:40Z","updated_at":"2021-08-02T19:05:15Z","body":"The latest images are stored on `ghcr.io` (built from https://github.com/Homebrew/brew/blob/master/.github/workflows/docker.yml), did you try the `ghcr.io/homebrew/ubuntu16.04`, `ghcr.io/homebrew/ubuntu18.04` or `ghcr.io/homebrew/ubuntu20.04` images?\r\n\r\nEDIT: we had various places were images were built/uploaded, but the latest ones we use for CI are these.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/Homebrew/brew/issues/comments/891261110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"iMichka","id":3406519,"node_id":"MDQ6VXNlcjM0MDY1MTk=","avatar_url":"https://avatars.githubusercontent.com/u/3406519?v=4","gravatar_id":"","url":"https://api.github.com/users/iMichka","html_url":"https://github.com/iMichka","followers_url":"https://api.github.com/users/iMichka/followers","following_url":"https://api.github.com/users/iMichka/following{/other_user}","gists_url":"https://api.github.com/users/iMichka/gists{/gist_id}","starred_url":"https://api.github.com/users/iMichka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iMichka/subscriptions","organizations_url":"https://api.github.com/users/iMichka/orgs","repos_url":"https://api.github.com/users/iMichka/repos","events_url":"https://api.github.com/users/iMichka/events{/privacy}","received_events_url":"https://api.github.com/users/iMichka/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/Homebrew/brew/issues/comments/891267864","html_url":"https://github.com/Homebrew/brew/issues/11802#issuecomment-891267864","issue_url":"https://api.github.com/repos/Homebrew/brew/issues/11802","id":891267864,"node_id":"IC_kwDOAyxcHc41H6sY","user":{"login":"sudoforge","id":3893293,"node_id":"MDQ6VXNlcjM4OTMyOTM=","avatar_url":"https://avatars.githubusercontent.com/u/3893293?v=4","gravatar_id":"","url":"https://api.github.com/users/sudoforge","html_url":"https://github.com/sudoforge","followers_url":"https://api.github.com/users/sudoforge/followers","following_url":"https://api.github.com/users/sudoforge/following{/other_user}","gists_url":"https://api.github.com/users/sudoforge/gists{/gist_id}","starred_url":"https://api.github.com/users/sudoforge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudoforge/subscriptions","organizations_url":"https://api.github.com/users/sudoforge/orgs","repos_url":"https://api.github.com/users/sudoforge/repos","events_url":"https://api.github.com/users/sudoforge/events{/privacy}","received_events_url":"https://api.github.com/users/sudoforge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-02T19:14:27Z","updated_at":"2021-08-02T19:14:27Z","body":"They all fail with the same error (unless specifying a non-root user). Requiring users to specify a user to run the command as is extremely inconvenient and given that `brew` requires running as a non-root user, I'd say that doing so is an anti-pattern.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/Homebrew/brew/issues/comments/891267864/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sudoforge","id":3893293,"node_id":"MDQ6VXNlcjM4OTMyOTM=","avatar_url":"https://avatars.githubusercontent.com/u/3893293?v=4","gravatar_id":"","url":"https://api.github.com/users/sudoforge","html_url":"https://github.com/sudoforge","followers_url":"https://api.github.com/users/sudoforge/followers","following_url":"https://api.github.com/users/sudoforge/following{/other_user}","gists_url":"https://api.github.com/users/sudoforge/gists{/gist_id}","starred_url":"https://api.github.com/users/sudoforge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudoforge/subscriptions","organizations_url":"https://api.github.com/users/sudoforge/orgs","repos_url":"https://api.github.com/users/sudoforge/repos","events_url":"https://api.github.com/users/sudoforge/events{/privacy}","received_events_url":"https://api.github.com/users/sudoforge/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/Homebrew/brew/issues/comments/891614292","html_url":"https://github.com/Homebrew/brew/issues/11802#issuecomment-891614292","issue_url":"https://api.github.com/repos/Homebrew/brew/issues/11802","id":891614292,"node_id":"IC_kwDOAyxcHc41JPRU","user":{"login":"MikeMcQuaid","id":125011,"node_id":"MDQ6VXNlcjEyNTAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/125011?v=4","gravatar_id":"","url":"https://api.github.com/users/MikeMcQuaid","html_url":"https://github.com/MikeMcQuaid","followers_url":"https://api.github.com/users/MikeMcQuaid/followers","following_url":"https://api.github.com/users/MikeMcQuaid/following{/other_user}","gists_url":"https://api.github.com/users/MikeMcQuaid/gists{/gist_id}","starred_url":"https://api.github.com/users/MikeMcQuaid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MikeMcQuaid/subscriptions","organizations_url":"https://api.github.com/users/MikeMcQuaid/orgs","repos_url":"https://api.github.com/users/MikeMcQuaid/repos","events_url":"https://api.github.com/users/MikeMcQuaid/events{/privacy}","received_events_url":"https://api.github.com/users/MikeMcQuaid/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-03T07:40:58Z","updated_at":"2021-08-03T07:40:58Z","body":"Some good feedback here. Closing this in favour of the imminent PR. Thanks!","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/Homebrew/brew/issues/comments/891614292/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MikeMcQuaid","id":125011,"node_id":"MDQ6VXNlcjEyNTAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/125011?v=4","gravatar_id":"","url":"https://api.github.com/users/MikeMcQuaid","html_url":"https://github.com/MikeMcQuaid","followers_url":"https://api.github.com/users/MikeMcQuaid/followers","following_url":"https://api.github.com/users/MikeMcQuaid/following{/other_user}","gists_url":"https://api.github.com/users/MikeMcQuaid/gists{/gist_id}","starred_url":"https://api.github.com/users/MikeMcQuaid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MikeMcQuaid/subscriptions","organizations_url":"https://api.github.com/users/MikeMcQuaid/orgs","repos_url":"https://api.github.com/users/MikeMcQuaid/repos","events_url":"https://api.github.com/users/MikeMcQuaid/events{/privacy}","received_events_url":"https://api.github.com/users/MikeMcQuaid/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5103078271,"node_id":"MDExOkNsb3NlZEV2ZW50NTEwMzA3ODI3MQ==","url":"https://api.github.com/repos/Homebrew/brew/issues/events/5103078271","actor":{"login":"MikeMcQuaid","id":125011,"node_id":"MDQ6VXNlcjEyNTAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/125011?v=4","gravatar_id":"","url":"https://api.github.com/users/MikeMcQuaid","html_url":"https://github.com/MikeMcQuaid","followers_url":"https://api.github.com/users/MikeMcQuaid/followers","following_url":"https://api.github.com/users/MikeMcQuaid/following{/other_user}","gists_url":"https://api.github.com/users/MikeMcQuaid/gists{/gist_id}","starred_url":"https://api.github.com/users/MikeMcQuaid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MikeMcQuaid/subscriptions","organizations_url":"https://api.github.com/users/MikeMcQuaid/orgs","repos_url":"https://api.github.com/users/MikeMcQuaid/repos","events_url":"https://api.github.com/users/MikeMcQuaid/events{/privacy}","received_events_url":"https://api.github.com/users/MikeMcQuaid/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-08-03T07:40:58Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"MikeMcQuaid","id":125011,"node_id":"MDQ6VXNlcjEyNTAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/125011?v=4","gravatar_id":"","url":"https://api.github.com/users/MikeMcQuaid","html_url":"https://github.com/MikeMcQuaid","followers_url":"https://api.github.com/users/MikeMcQuaid/followers","following_url":"https://api.github.com/users/MikeMcQuaid/following{/other_user}","gists_url":"https://api.github.com/users/MikeMcQuaid/gists{/gist_id}","starred_url":"https://api.github.com/users/MikeMcQuaid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MikeMcQuaid/subscriptions","organizations_url":"https://api.github.com/users/MikeMcQuaid/orgs","repos_url":"https://api.github.com/users/MikeMcQuaid/repos","events_url":"https://api.github.com/users/MikeMcQuaid/events{/privacy}","received_events_url":"https://api.github.com/users/MikeMcQuaid/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-03T18:25:31Z","updated_at":"2021-08-03T18:25:31Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/Homebrew/brew/issues/11815","repository_url":"https://api.github.com/repos/Homebrew/brew","labels_url":"https://api.github.com/repos/Homebrew/brew/issues/11815/labels{/name}","comments_url":"https://api.github.com/repos/Homebrew/brew/issues/11815/comments","events_url":"https://api.github.com/repos/Homebrew/brew/issues/11815/events","html_url":"https://github.com/Homebrew/brew/pull/11815","id":959163348,"node_id":"MDExOlB1bGxSZXF1ZXN0NzAyMzIxMTk5","number":11815,"title":"Dockerfile: run as user: linuxbrew","user":{"login":"sudoforge","id":3893293,"node_id":"MDQ6VXNlcjM4OTMyOTM=","avatar_url":"https://avatars.githubusercontent.com/u/3893293?v=4","gravatar_id":"","url":"https://api.github.com/users/sudoforge","html_url":"https://github.com/sudoforge","followers_url":"https://api.github.com/users/sudoforge/followers","following_url":"https://api.github.com/users/sudoforge/following{/other_user}","gists_url":"https://api.github.com/users/sudoforge/gists{/gist_id}","starred_url":"https://api.github.com/users/sudoforge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudoforge/subscriptions","organizations_url":"https://api.github.com/users/sudoforge/orgs","repos_url":"https://api.github.com/users/sudoforge/repos","events_url":"https://api.github.com/users/sudoforge/events{/privacy}","received_events_url":"https://api.github.com/users/sudoforge/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":922544989,"node_id":"MDU6TGFiZWw5MjI1NDQ5ODk=","url":"https://api.github.com/repos/Homebrew/brew/labels/outdated","name":"outdated","color":"d93f0b","default":false,"description":"PR was locked due to age"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2021-08-03T14:15:30Z","updated_at":"2024-05-03T01:35:19Z","closed_at":"2021-08-10T17:55:57Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","draft":false,"repository":{"id":53238813,"node_id":"MDEwOlJlcG9zaXRvcnk1MzIzODgxMw==","name":"brew","full_name":"Homebrew/brew","private":false,"owner":{"login":"Homebrew","id":1503512,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1MDM1MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1503512?v=4","gravatar_id":"","url":"https://api.github.com/users/Homebrew","html_url":"https://github.com/Homebrew","followers_url":"https://api.github.com/users/Homebrew/followers","following_url":"https://api.github.com/users/Homebrew/following{/other_user}","gists_url":"https://api.github.com/users/Homebrew/gists{/gist_id}","starred_url":"https://api.github.com/users/Homebrew/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Homebrew/subscriptions","organizations_url":"https://api.github.com/users/Homebrew/orgs","repos_url":"https://api.github.com/users/Homebrew/repos","events_url":"https://api.github.com/users/Homebrew/events{/privacy}","received_events_url":"https://api.github.com/users/Homebrew/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/Homebrew/brew","description":"üç∫ The missing package manager for macOS (or Linux)","fork":false,"url":"https://api.github.com/repos/Homebrew/brew","forks_url":"https://api.github.com/repos/Homebrew/brew/forks","keys_url":"https://api.github.com/repos/Homebrew/brew/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Homebrew/brew/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Homebrew/brew/teams","hooks_url":"https://api.github.com/repos/Homebrew/brew/hooks","issue_events_url":"https://api.github.com/repos/Homebrew/brew/issues/events{/number}","events_url":"https://api.github.com/repos/Homebrew/brew/events","assignees_url":"https://api.github.com/repos/Homebrew/brew/assignees{/user}","branches_url":"https://api.github.com/repos/Homebrew/brew/branches{/branch}","tags_url":"https://api.github.com/repos/Homebrew/brew/tags","blobs_url":"https://api.github.com/repos/Homebrew/brew/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Homebrew/brew/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Homebrew/brew/git/refs{/sha}","trees_url":"https://api.github.com/repos/Homebrew/brew/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Homebrew/brew/statuses/{sha}","languages_url":"https://api.github.com/repos/Homebrew/brew/languages","stargazers_url":"https://api.github.com/repos/Homebrew/brew/stargazers","contributors_url":"https://api.github.com/repos/Homebrew/brew/contributors","subscribers_url":"https://api.github.com/repos/Homebrew/brew/subscribers","subscription_url":"https://api.github.com/repos/Homebrew/brew/subscription","commits_url":"https://api.github.com/repos/Homebrew/brew/commits{/sha}","git_commits_url":"https://api.github.com/repos/Homebrew/brew/git/commits{/sha}","comments_url":"https://api.github.com/repos/Homebrew/brew/comments{/number}","issue_comment_url":"https://api.github.com/repos/Homebrew/brew/issues/comments{/number}","contents_url":"https://api.github.com/repos/Homebrew/brew/contents/{+path}","compare_url":"https://api.github.com/repos/Homebrew/brew/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Homebrew/brew/merges","archive_url":"https://api.github.com/repos/Homebrew/brew/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Homebrew/brew/downloads","issues_url":"https://api.github.com/repos/Homebrew/brew/issues{/number}","pulls_url":"https://api.github.com/repos/Homebrew/brew/pulls{/number}","milestones_url":"https://api.github.com/repos/Homebrew/brew/milestones{/number}","notifications_url":"https://api.github.com/repos/Homebrew/brew/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Homebrew/brew/labels{/name}","releases_url":"https://api.github.com/repos/Homebrew/brew/releases{/id}","deployments_url":"https://api.github.com/repos/Homebrew/brew/deployments","created_at":"2016-03-06T05:08:38Z","updated_at":"2025-11-10T05:12:29Z","pushed_at":"2025-11-10T03:40:14Z","git_url":"git://github.com/Homebrew/brew.git","ssh_url":"git@github.com:Homebrew/brew.git","clone_url":"https://github.com/Homebrew/brew.git","svn_url":"https://github.com/Homebrew/brew","homepage":"https://brew.sh","size":105186,"stargazers_count":45363,"watchers_count":45363,"language":"Ruby","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":false,"forks_count":10643,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":18,"license":{"key":"bsd-2-clause","name":"BSD 2-Clause \"Simplified\" License","spdx_id":"BSD-2-Clause","url":"https://api.github.com/licenses/bsd-2-clause","node_id":"MDc6TGljZW5zZTQ="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["brew","homebrew","macos","package-manager","ruby"],"visibility":"public","forks":10643,"open_issues":18,"watchers":45363,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/Homebrew/brew/pulls/11815","html_url":"https://github.com/Homebrew/brew/pull/11815","diff_url":"https://github.com/Homebrew/brew/pull/11815.diff","patch_url":"https://github.com/Homebrew/brew/pull/11815.patch","merged_at":"2021-08-10T17:55:57Z"},"body":"```\r\nDockerfile: run as user: linuxbrew\r\n\r\nThis commit refactors the Dockerfile in order to resolve build errors\r\ncaused by attempting to execute `brew` commands as the root user. We\r\nneed to create the `/home/linuxbrew/.linuxbrew` folder prior to copying\r\nthe local directory into `/home/linuxbrew/.linuxbrew/Homebrew` (and\r\nensure the appropriate user owns it), as failing to do so will create\r\n`/home/linuxbrew/.linuxbrew` with root user and group ownership, causing\r\nthe subsequent `mkdir` command called in the second `RUN` instruction to\r\nfail.\r\n\r\ncloses #11802\r\n```\r\n\r\n- [x] Have you followed the guidelines in our [Contributing](https://github.com/Homebrew/brew/blob/HEAD/CONTRIBUTING.md) document?\r\n- [x] Have you checked to ensure there aren't other open [Pull Requests](https://github.com/Homebrew/brew/pulls) for the same change?\r\n- [x] Have you added an explanation of what your changes do and why you'd like us to include them?\r\n- [x] Have you written new tests for your changes? [Here's an example](https://github.com/Homebrew/brew/blob/HEAD/Library/Homebrew/test/PATH_spec.rb).\r\n- [x] Have you successfully run `brew style` with your changes locally?\r\n- [x] Have you successfully run `brew typecheck` with your changes locally?\r\n- [x] Have you successfully run `brew tests` with your changes locally?\r\n\r\n-----\r\n\r\nThere are additional improvements that the container image could still benefit from, namely:\r\n\r\n* **Avoiding cloning `homebrew/homebrew-core` via `git`**. This causes the build to hang for some time (on the order of several minutes; I haven't timed it precisely). We could instead bring these source files in via an `ADD` instruction, pulling an archive from GitHub directly.\r\n* **Reducing the image size**. The current image exceeds 1GiB in size. This is... huge. Drawbacks to an image as large as this include slower network transport (of the image, to/from registries), higher disk consumption, and higher CPU and memory requirements to run. This can be done by utilizing a smaller base image, and/or multi-stage builds, as well as performing optimization of the final image contents, ensuring that any unecessary artifacts are removed.\r\n* **Improve the user experience**. Currently, users are required to type a command similar to `docker run --rm -v \"$(pwd):/home/linuxbrew/.linuxbrew\" homebrew/brew brew <command>`. This is a bit verbose, and also isn't ideal, as paths in `PWD` that are mounted into the container can overwrite preexisting paths within the container, and as with this repository (when running `brew {style,typecheck,tests}`), can potentially lead to lengthy runtimes due to re-fetching of the dependencies.\r\n\r\nI will plan to submit PRs for the above recommendations over the next few weeks. I'd like to get it done sooner, but time constraints and my unfamiliarity with the internal architecture of `brew` will likely lead to me not being able to iterate on this right away.","reactions":{"url":"https://api.github.com/repos/Homebrew/brew/issues/11815/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Homebrew/brew/issues/11815/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":5250571201,"node_id":"LE_lADOAyxcHc45FLigzwAAAAE49VvB","url":"https://api.github.com/repos/Homebrew/brew/issues/events/5250571201","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-09-03T00:03:28Z","label":{"name":"outdated","color":"d93f0b"},"performed_via_github_app":null},{"id":5250571223,"node_id":"LOE_lADOAyxcHc45FLigzwAAAAE49VvX","url":"https://api.github.com/repos/Homebrew/brew/issues/events/5250571223","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"locked","commit_id":null,"commit_url":null,"created_at":"2021-09-03T00:03:28Z","lock_reason":"resolved","performed_via_github_app":null}]