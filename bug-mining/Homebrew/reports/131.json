{"url":"https://api.github.com/repos/Homebrew/brew/issues/18556","repository_url":"https://api.github.com/repos/Homebrew/brew","labels_url":"https://api.github.com/repos/Homebrew/brew/issues/18556/labels{/name}","comments_url":"https://api.github.com/repos/Homebrew/brew/issues/18556/comments","events_url":"https://api.github.com/repos/Homebrew/brew/issues/18556/events","html_url":"https://github.com/Homebrew/brew/issues/18556","id":2583417441,"node_id":"I_kwDOAyxcHc6Z-9Jh","number":18556,"title":"RUSTFLAGS override .cargo/config.toml and result in manual workarounds","user":{"login":"cho-m","id":20700669,"node_id":"MDQ6VXNlcjIwNzAwNjY5","avatar_url":"https://avatars.githubusercontent.com/u/20700669?v=4","gravatar_id":"","url":"https://api.github.com/users/cho-m","html_url":"https://github.com/cho-m","followers_url":"https://api.github.com/users/cho-m/followers","following_url":"https://api.github.com/users/cho-m/following{/other_user}","gists_url":"https://api.github.com/users/cho-m/gists{/gist_id}","starred_url":"https://api.github.com/users/cho-m/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cho-m/subscriptions","organizations_url":"https://api.github.com/users/cho-m/orgs","repos_url":"https://api.github.com/users/cho-m/repos","events_url":"https://api.github.com/users/cho-m/events{/privacy}","received_events_url":"https://api.github.com/users/cho-m/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":351933356,"node_id":"MDU6TGFiZWwzNTE5MzMzNTY=","url":"https://api.github.com/repos/Homebrew/brew/labels/superenv","name":"superenv","color":"e10c02","default":false,"description":"Homebrew's compiler shims"}],"state":"closed","locked":false,"assignee":{"login":"MikeMcQuaid","id":125011,"node_id":"MDQ6VXNlcjEyNTAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/125011?v=4","gravatar_id":"","url":"https://api.github.com/users/MikeMcQuaid","html_url":"https://github.com/MikeMcQuaid","followers_url":"https://api.github.com/users/MikeMcQuaid/followers","following_url":"https://api.github.com/users/MikeMcQuaid/following{/other_user}","gists_url":"https://api.github.com/users/MikeMcQuaid/gists{/gist_id}","starred_url":"https://api.github.com/users/MikeMcQuaid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MikeMcQuaid/subscriptions","organizations_url":"https://api.github.com/users/MikeMcQuaid/orgs","repos_url":"https://api.github.com/users/MikeMcQuaid/repos","events_url":"https://api.github.com/users/MikeMcQuaid/events{/privacy}","received_events_url":"https://api.github.com/users/MikeMcQuaid/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"MikeMcQuaid","id":125011,"node_id":"MDQ6VXNlcjEyNTAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/125011?v=4","gravatar_id":"","url":"https://api.github.com/users/MikeMcQuaid","html_url":"https://github.com/MikeMcQuaid","followers_url":"https://api.github.com/users/MikeMcQuaid/followers","following_url":"https://api.github.com/users/MikeMcQuaid/following{/other_user}","gists_url":"https://api.github.com/users/MikeMcQuaid/gists{/gist_id}","starred_url":"https://api.github.com/users/MikeMcQuaid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MikeMcQuaid/subscriptions","organizations_url":"https://api.github.com/users/MikeMcQuaid/orgs","repos_url":"https://api.github.com/users/MikeMcQuaid/repos","events_url":"https://api.github.com/users/MikeMcQuaid/events{/privacy}","received_events_url":"https://api.github.com/users/MikeMcQuaid/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":9,"created_at":"2024-10-12T21:05:31Z","updated_at":"2025-08-06T16:39:05Z","closed_at":"2025-08-06T16:39:05Z","author_association":"MEMBER","type":{"id":203324,"node_id":"IT_kwDOABbxGM4AAxo8","name":"Bug","description":"An unexpected problem or behavior","color":"red","created_at":"2024-01-25T09:21:16Z","updated_at":"2024-07-26T10:06:36Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### `brew doctor` output\r\n\r\n```shell\r\nCI run https://github.com/Homebrew/homebrew-core/actions/runs/10208208304/job/28244359400#step:3:264\r\n\r\n==> brew doctor\r\nAll steps passed!\r\n```\r\n\r\n\r\n### Verification\r\n\r\n- [X] My \"`brew doctor` output\" above says `Your system is ready to brew.` and am still able to reproduce my issue.\r\n- [X] I ran `brew update` twice and am still able to reproduce my issue.\r\n- [X] This issue's title and/or description do not reference a single formula e.g. `brew install wget`. If they do, open an issue at https://github.com/Homebrew/homebrew-core/issues/new/choose instead.\r\n\r\n### `brew config` output\r\n\r\n```shell\r\n==> brew config\r\nHOMEBREW_VERSION: 4.3.12-52-g53e3632\r\nORIGIN: https://github.com/Homebrew/brew\r\nHEAD: 53e363258adfced393b6ec99fce66f6ea1ff7687\r\nLast commit: 7 hours ago\r\nCore tap HEAD: e3a6fd41d57b0b82402f33dfb352fd8e2ab23473\r\nCore tap last commit: 3 minutes ago\r\nCore tap JSON: 02 Aug 01:08 UTC\r\nHOMEBREW_PREFIX: /home/linuxbrew/.linuxbrew\r\nHOMEBREW_BOOTSNAP: set\r\nHOMEBREW_CASK_OPTS: []\r\nHOMEBREW_COLOR: set\r\nHOMEBREW_CURL_PATH: /usr/bin/curl\r\nHOMEBREW_DEVELOPER: set\r\nHOMEBREW_FAIL_LOG_LINES: 150\r\nHOMEBREW_GITHUB_API_TOKEN: set\r\nHOMEBREW_GIT_EMAIL: 1589480+BrewTestBot@users.noreply.github.com\r\nHOMEBREW_GIT_NAME: BrewTestBot\r\nHOMEBREW_GIT_PATH: /usr/bin/git\r\nHOMEBREW_LOGS: /__w/homebrew-core/homebrew-core/logs\r\nHOMEBREW_MAKE_JOBS: 4\r\nHOMEBREW_NO_AUTO_UPDATE: set\r\nHOMEBREW_NO_COLOR: set\r\nHOMEBREW_NO_EMOJI: set\r\nHOMEBREW_NO_ENV_HINTS: set\r\nHOMEBREW_NO_INSTALLED_DEPENDENTS_CHECK: set\r\nHOMEBREW_NO_INSTALL_FROM_API: set\r\nHOMEBREW_SORBET_RUNTIME: set\r\nHomebrew Ruby: 3.3.4 => /home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/vendor/portable-ruby/3.3.4/bin/ruby\r\nCPU: quad-core 64-bit zen3\r\nClang: N/A\r\nGit: 2.46.0 => /usr/bin/git\r\nCurl: 7.81.0 => /usr/bin/curl\r\nKernel: Linux 6.5.0-1024-azure x86_64 GNU/Linux\r\nOS: Ubuntu 22.04.4 LTS\r\nHost glibc: 2.35\r\n/usr/bin/gcc: 11.4.0\r\n/usr/bin/ruby: N/A\r\nglibc: N/A\r\ngcc@11: N/A\r\ngcc: N/A\r\nxorg: N/A\r\n```\r\n\r\n\r\n### What were you trying to do (and why)?\r\n\r\nBuilding bottle in CI, e.g. https://github.com/Homebrew/homebrew-core/pull/179360\r\n\r\n\r\n### What happened (include all command output)?\r\n\r\nFailure when building due to overridden [.cargo/config.toml](https://gitlab.com/veilid/veilid/-/blob/v0.3.4/.cargo/config.toml?ref_type=tags#L2):\r\n```\r\n  ==> cargo install --locked --root=/home/linuxbrew/.linuxbrew/Cellar/veilid/0.3.4 --path=veilid-cli\r\n...\r\n  error[E0433]: failed to resolve: could not find `Builder` in `task`\r\n     --> veilid-tools/src/spawn.rs:58:54\r\n      |\r\n  58  |                     MustJoinHandle::new(tokio::task::Builder::new().name(name).spawn(future).unwrap())\r\n      |                                                      ^^^^^^^ could not find `Builder` in `task`\r\n      |\r\n  note: found an item that was configured out\r\n```\r\n\r\n### What did you expect to happen?\r\n\r\nSuccessful build without any extra workarounds.\r\n\r\n### Step-by-step reproduction instructions (by running `brew` commands)\r\n\r\n```shell\r\n1. Remove `ENV[\"RUSTFLAGS\"]` workaround from `veilid`\r\n2. `brew install [--build-from-source | --build-bottle] veilid` on Linux\r\n```\r\n","closed_by":{"login":"MikeMcQuaid","id":125011,"node_id":"MDQ6VXNlcjEyNTAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/125011?v=4","gravatar_id":"","url":"https://api.github.com/users/MikeMcQuaid","html_url":"https://github.com/MikeMcQuaid","followers_url":"https://api.github.com/users/MikeMcQuaid/followers","following_url":"https://api.github.com/users/MikeMcQuaid/following{/other_user}","gists_url":"https://api.github.com/users/MikeMcQuaid/gists{/gist_id}","starred_url":"https://api.github.com/users/MikeMcQuaid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MikeMcQuaid/subscriptions","organizations_url":"https://api.github.com/users/MikeMcQuaid/orgs","repos_url":"https://api.github.com/users/MikeMcQuaid/repos","events_url":"https://api.github.com/users/MikeMcQuaid/events{/privacy}","received_events_url":"https://api.github.com/users/MikeMcQuaid/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/Homebrew/brew/issues/18556/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Homebrew/brew/issues/18556/timeline","performed_via_github_app":null,"state_reason":"completed"}