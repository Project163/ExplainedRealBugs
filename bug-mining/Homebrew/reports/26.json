{"url":"https://api.github.com/repos/Homebrew/brew/issues/13030","repository_url":"https://api.github.com/repos/Homebrew/brew","labels_url":"https://api.github.com/repos/Homebrew/brew/issues/13030/labels{/name}","comments_url":"https://api.github.com/repos/Homebrew/brew/issues/13030/comments","events_url":"https://api.github.com/repos/Homebrew/brew/issues/13030/events","html_url":"https://github.com/Homebrew/brew/issues/13030","id":1177235741,"node_id":"I_kwDOAyxcHc5GKzEd","number":13030,"title":"Brew audit requires repo scope but link in diagnostic doesn't pre-fill form that way","user":{"login":"dabrahams","id":44065,"node_id":"MDQ6VXNlcjQ0MDY1","avatar_url":"https://avatars.githubusercontent.com/u/44065?v=4","gravatar_id":"","url":"https://api.github.com/users/dabrahams","html_url":"https://github.com/dabrahams","followers_url":"https://api.github.com/users/dabrahams/followers","following_url":"https://api.github.com/users/dabrahams/following{/other_user}","gists_url":"https://api.github.com/users/dabrahams/gists{/gist_id}","starred_url":"https://api.github.com/users/dabrahams/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dabrahams/subscriptions","organizations_url":"https://api.github.com/users/dabrahams/orgs","repos_url":"https://api.github.com/users/dabrahams/repos","events_url":"https://api.github.com/users/dabrahams/events{/privacy}","received_events_url":"https://api.github.com/users/dabrahams/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":922544989,"node_id":"MDU6TGFiZWw5MjI1NDQ5ODk=","url":"https://api.github.com/repos/Homebrew/brew/labels/outdated","name":"outdated","color":"d93f0b","default":false,"description":"PR was locked due to age"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-03-22T19:51:44Z","updated_at":"2022-04-24T00:06:50Z","closed_at":"2022-03-24T08:47:41Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### `brew config` output\n\n```shell\nHOMEBREW_VERSION: 3.4.3-32-g07bd1bc\r\nORIGIN: https://github.com/Homebrew/brew\r\nHEAD: 07bd1bc3ff0c7fc876bf7705ffd661ad2f561b4d\r\nLast commit: 44 minutes ago\r\nCore tap ORIGIN: https://github.com/Homebrew/homebrew-core\r\nCore tap HEAD: b578ae78d0e1010e7425df2a7ca2920f071a584e\r\nCore tap last commit: 44 minutes ago\r\nCore tap branch: master\r\nHOMEBREW_PREFIX: /opt/homebrew\r\nHOMEBREW_CASK_OPTS: []\r\nHOMEBREW_CORE_GIT_REMOTE: https://github.com/Homebrew/homebrew-core\r\nHOMEBREW_DISPLAY: /private/tmp/com.apple.launchd.jwpZv5JG6M/org.xquartz:0\r\nHOMEBREW_GITHUB_API_TOKEN: set\r\nHOMEBREW_MAKE_JOBS: 10\r\nHomebrew Ruby: 2.6.8 => /System/Library/Frameworks/Ruby.framework/Versions/2.6/usr/bin/ruby\r\nCPU: 10-core 64-bit arm_firestorm_icestorm\r\nClang: 13.1.6 build 1316\r\nGit: 2.35.1 => /opt/homebrew/bin/git\r\nCurl: 7.79.1 => /usr/bin/curl\r\nmacOS: 12.3-arm64\r\nCLT: 13.3.0.0.1.1645755326\r\nXcode: 13.3\r\nRosetta 2: false\n```\n\n\n### `brew doctor` output\n\n```shell\nPlease note that these warnings are just used to help the Homebrew maintainers\r\nwith debugging if you file an issue. If everything you use Homebrew for is\r\nworking fine: please don't worry or file an issue; just ignore this. Thanks!\r\n\r\nWarning: \"config\" scripts exist outside your system or Homebrew directories.\r\n`./configure` scripts often look for *-config scripts to determine if\r\nsoftware packages are installed, and which additional flags to use when\r\ncompiling and linking.\r\n\r\nHaving additional scripts in your path can confuse software installed via\r\nHomebrew if the config script overrides a system or Homebrew-provided\r\nscript of the same name. We found the following \"config\" scripts:\r\n  /Users/dave/brew/bin/pkg-config\r\n  /Users/dave/brew/bin/MagickCore-config\r\n  /Users/dave/brew/bin/MagickWand-config\r\n  /Users/dave/brew/bin/freetype-config\r\n  /Users/dave/brew/bin/libpng16-config\r\n  /Users/dave/brew/bin/Magick++-config\r\n  /Users/dave/brew/bin/libpng-config\r\n  /Users/dave/brew/bin/python3.9-config\r\n  /Users/dave/brew/bin/python3-config\r\n  /Users/dave/brew/bin/em-config\r\n  /Users/dave/brew/bin/pcre2-config\r\n  /Users/dave/brew/bin/pcre-config\r\n  /Users/dave/brew/bin/nspr-config\r\n  /Users/dave/brew/bin/nss-config\r\n  /Users/dave/brew/bin/guile-config\r\n\r\nWarning: You have uncommitted modifications to Homebrew/homebrew-core.\r\nIf this is a surprise to you, then you should stash these modifications.\r\nStashing returns Homebrew to a pristine state but can be undone\r\nshould you later need to do so for some reason.\r\n  cd /opt/homebrew/Library/Taps/homebrew/homebrew-core && git stash && git clean -d -f\r\n\r\nUncommitted files:\r\n  ?? Formula/libmarpa.rb\r\n\r\nWarning: /usr/bin occurs before /opt/homebrew/bin in your PATH.\r\nThis means that system-provided programs will be used instead of those\r\nprovided by Homebrew. Consider setting your PATH so that\r\n/opt/homebrew/bin occurs before /usr/bin. Here is a one-liner:\r\n  echo 'export PATH=\"/opt/homebrew/bin:$PATH\"' >> ~/.zshrc\r\n\r\nThe following tools exist at both paths:\r\n  cpan\r\n  instmodsh\r\n  db_upgrade\r\n  perlivp\r\n  pp\r\n  pod2usage\r\n  corelist\r\n  db_hotbackup\r\n  git-receive-pack\r\n  libnetcfg\r\n  python3\r\n  encguess\r\n  db_printlog\r\n  db_archive\r\n  pip3\r\n  pod2text\r\n  ptardiff\r\n  db_stat\r\n  json_pp\r\n  perl\r\n  perlbug\r\n  db_load\r\n  piconv\r\n  ptargrep\r\n  h2ph\r\n  prove\r\n  podchecker\r\n  shasum\r\n  git-upload-archive\r\n  ptar\r\n  pl2pm\r\n  db_verify\r\n  perlthanks\r\n  xsubpp\r\n  perldoc\r\n  h2xs\r\n  db_checkpoint\r\n  pod2man\r\n  enc2xs\r\n  git-shell\r\n  db_deadlock\r\n  git-upload-pack\r\n  splain\r\n  pod2html\r\n  db_recover\r\n  db_dump\r\n  git\r\n  zipdetails\r\n\r\nWarning: Homebrew's \"bin\" was not found in your PATH.\r\nConsider setting your PATH for example like so:\r\n  echo 'export PATH=\"/opt/homebrew/bin:$PATH\"' >> ~/.zshrc\r\n\r\nWarning: Homebrew's \"sbin\" was not found in your PATH but you have installed\r\nformulae that put executables in /opt/homebrew/sbin.\r\nConsider setting your PATH for example like so:\r\n  echo 'export PATH=\"/opt/homebrew/sbin:$PATH\"' >> ~/.zshrc\n```\n\n\n### Verification\n\n- [X] I ran `brew update` and am still able to reproduce my issue.\n- [X] I have resolved all warnings from `brew doctor` and that did not fix my problem.\n\n### What were you trying to do (and why)?\n\nJust made a new formula, following directions:\r\n\r\n```\r\n$ brew audit --new-formula libmarpa\r\n```\r\n\n\n### What happened (include all command output)?\n\n```\r\nError: Your HOMEBREW_GITHUB_API_TOKEN credentials do not have sufficient scope!\r\nScopes required: repo\r\nScopes present:  gist, public_repo, readorg, readpublic_key, repostatus, repo_deployment\r\nCreate a GitHub personal access token:\r\n    https://github.com/settings/tokens/new?scopes=gist,public_repo,workflow&description=Homebrew\r\n  echo 'export HOMEBREW_GITHUB_API_TOKEN=your_token_here' >> ~/.zshrc\r\n\r\nlibmarpa:\r\n  * 27: col 41: Prefer `to_s` over string interpolation.\r\nError: 1 problem in 1 formula detected\r\n$ \r\n```\n\n### What did you expect to happen?\n\n1. No complaint about scope\r\n2. If there was a complaint, the supplied link should set me up to have that scope in the new token.\n\n### Step-by-step reproduction instructions (by running `brew` commands)\n\n```shell\n$ brew audit --new-formula libmarpa\n```\n","closed_by":{"login":"MikeMcQuaid","id":125011,"node_id":"MDQ6VXNlcjEyNTAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/125011?v=4","gravatar_id":"","url":"https://api.github.com/users/MikeMcQuaid","html_url":"https://github.com/MikeMcQuaid","followers_url":"https://api.github.com/users/MikeMcQuaid/followers","following_url":"https://api.github.com/users/MikeMcQuaid/following{/other_user}","gists_url":"https://api.github.com/users/MikeMcQuaid/gists{/gist_id}","starred_url":"https://api.github.com/users/MikeMcQuaid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MikeMcQuaid/subscriptions","organizations_url":"https://api.github.com/users/MikeMcQuaid/orgs","repos_url":"https://api.github.com/users/MikeMcQuaid/repos","events_url":"https://api.github.com/users/MikeMcQuaid/events{/privacy}","received_events_url":"https://api.github.com/users/MikeMcQuaid/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/Homebrew/brew/issues/13030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Homebrew/brew/issues/13030/timeline","performed_via_github_app":null,"state_reason":"completed"}