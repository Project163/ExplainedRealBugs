{"url":"https://api.github.com/repos/Homebrew/brew/issues/14274","repository_url":"https://api.github.com/repos/Homebrew/brew","labels_url":"https://api.github.com/repos/Homebrew/brew/issues/14274/labels{/name}","comments_url":"https://api.github.com/repos/Homebrew/brew/issues/14274/comments","events_url":"https://api.github.com/repos/Homebrew/brew/issues/14274/events","html_url":"https://github.com/Homebrew/brew/issues/14274","id":1505413144,"node_id":"I_kwDOAyxcHc5ZusgY","number":14274,"title":"Speed up Python tests by not writing bytecode","user":{"login":"orf","id":1027207,"node_id":"MDQ6VXNlcjEwMjcyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/1027207?v=4","gravatar_id":"","url":"https://api.github.com/users/orf","html_url":"https://github.com/orf","followers_url":"https://api.github.com/users/orf/followers","following_url":"https://api.github.com/users/orf/following{/other_user}","gists_url":"https://api.github.com/users/orf/gists{/gist_id}","starred_url":"https://api.github.com/users/orf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orf/subscriptions","organizations_url":"https://api.github.com/users/orf/orgs","repos_url":"https://api.github.com/users/orf/repos","events_url":"https://api.github.com/users/orf/events{/privacy}","received_events_url":"https://api.github.com/users/orf/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":922544989,"node_id":"MDU6TGFiZWw5MjI1NDQ5ODk=","url":"https://api.github.com/repos/Homebrew/brew/labels/outdated","name":"outdated","color":"d93f0b","default":false,"description":"PR was locked due to age"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2022-12-20T22:53:26Z","updated_at":"2023-02-09T00:06:57Z","closed_at":"2023-01-09T13:57:14Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Verification\n\n- [X] This issue's title and/or description do not reference a single formula e.g. `brew install wget`. If they do, open an issue at https://github.com/Homebrew/homebrew-core/issues/new/choose instead.\n\n### Provide a detailed description of the proposed feature\n\n`PYTHONDONTWRITEBYTECODE` is an environment variable that disables the writing of Python bytecode files when modules are loaded. By setting this environment variable during our CI runs, we can reduce the overall CI time with no loss of functionality.\r\n\r\nWhen this value is set Python will not compile modules to bytecode and cache them at runtime. \r\n\r\nThis should also not byte-compile all modules while installing dependencies ([i.e here](https://github.com/Homebrew/homebrew-core/actions/runs/3736404369/jobs/6340746247#step:6:16567))\r\n\r\n```\r\n   byte-compiling /opt/homebrew/Cellar/jupyterlab/3.5.2/libexec/lib/python3.10/site-packages/urllib3/filepost.py to filepost.cpython-310.pyc\r\n    byte-compiling /opt/homebrew/Cellar/jupyterlab/3.5.2/libexec/lib/python3.10/site-packages/urllib3/fields.py to fields.cpython-310.pyc\r\n    byte-compiling /opt/homebrew/Cellar/jupyterlab/3.5.2/libexec/lib/python3.10/site-packages/urllib3/util/queue.py to queue.cpython-310.pyc\r\n    byte-compiling /opt/homebrew/Cellar/jupyterlab/3.5.2/libexec/lib/python3.10/site-packages/urllib3/util/ssltransport.py to ssltransport.cpython-310.pyc\r\n    byte-compiling /opt/homebrew/Cellar/jupyterlab/3.5.2/libexec/lib/python3.10/site-packages/urllib3/util/proxy.py to proxy.cpython-310.pyc\r\n    byte-compiling /opt/homebrew/Cellar/jupyterlab/3.5.2/libexec/lib/python3.10/site-packages/urllib3/util/wait.py to wait.cpython-310.pyc\r\n    byte-compiling /opt/homebrew/Cellar/jupyterlab/3.5.2/libexec/lib/python3.10/site-packages/urllib3/util/request.py to request.cpython-310.pyc\r\n    byte-compiling /opt/homebrew/Cellar/jupyterlab/3.5.2/libexec/lib/python3.10/site-packages/urllib3/util/timeout.py to timeout.cpython-310.pyc\r\n    byte-compiling /opt/homebrew/Cellar/jupyterlab/3.5.2/libexec/lib/python3.10/site-packages/urllib3/util/__init__.py to __init__.cpython-310.pyc\r\n    byte-compiling /opt/homebrew/Cellar/jupyterlab/3.5.2/libexec/lib/python3.10/site-packages/urllib3/util/response.py to response.cpython-310.pyc\r\n```\n\n### What is the motivation for the feature?\n\nOur CI time is valuable, and changing python versions incurs a lot of CI time.\n\n### How will the feature be relevant to at least 90% of Homebrew users?\n\nQuicker builds in aggregate = faster releases?\n\n### What alternatives to the feature have been considered?\n\nNot doing this, which is fine?","closed_by":{"login":"MikeMcQuaid","id":125011,"node_id":"MDQ6VXNlcjEyNTAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/125011?v=4","gravatar_id":"","url":"https://api.github.com/users/MikeMcQuaid","html_url":"https://github.com/MikeMcQuaid","followers_url":"https://api.github.com/users/MikeMcQuaid/followers","following_url":"https://api.github.com/users/MikeMcQuaid/following{/other_user}","gists_url":"https://api.github.com/users/MikeMcQuaid/gists{/gist_id}","starred_url":"https://api.github.com/users/MikeMcQuaid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MikeMcQuaid/subscriptions","organizations_url":"https://api.github.com/users/MikeMcQuaid/orgs","repos_url":"https://api.github.com/users/MikeMcQuaid/repos","events_url":"https://api.github.com/users/MikeMcQuaid/events{/privacy}","received_events_url":"https://api.github.com/users/MikeMcQuaid/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/Homebrew/brew/issues/14274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Homebrew/brew/issues/14274/timeline","performed_via_github_app":null,"state_reason":"completed"}