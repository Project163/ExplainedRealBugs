{"url":"https://api.github.com/repos/Homebrew/brew/issues/13248","repository_url":"https://api.github.com/repos/Homebrew/brew","labels_url":"https://api.github.com/repos/Homebrew/brew/issues/13248/labels{/name}","comments_url":"https://api.github.com/repos/Homebrew/brew/issues/13248/comments","events_url":"https://api.github.com/repos/Homebrew/brew/issues/13248/events","html_url":"https://github.com/Homebrew/brew/issues/13248","id":1226050897,"node_id":"I_kwDOAyxcHc5JFA1R","number":13248,"title":"Homebrew should not sanitize TERMINFO/TERMINFO_DIRS on macOS","user":{"login":"neersighted","id":1049222,"node_id":"MDQ6VXNlcjEwNDkyMjI=","avatar_url":"https://avatars.githubusercontent.com/u/1049222?v=4","gravatar_id":"","url":"https://api.github.com/users/neersighted","html_url":"https://github.com/neersighted","followers_url":"https://api.github.com/users/neersighted/followers","following_url":"https://api.github.com/users/neersighted/following{/other_user}","gists_url":"https://api.github.com/users/neersighted/gists{/gist_id}","starred_url":"https://api.github.com/users/neersighted/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neersighted/subscriptions","organizations_url":"https://api.github.com/users/neersighted/orgs","repos_url":"https://api.github.com/users/neersighted/repos","events_url":"https://api.github.com/users/neersighted/events{/privacy}","received_events_url":"https://api.github.com/users/neersighted/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":922544989,"node_id":"MDU6TGFiZWw5MjI1NDQ5ODk=","url":"https://api.github.com/repos/Homebrew/brew/labels/outdated","name":"outdated","color":"d93f0b","default":false,"description":"PR was locked due to age"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2022-05-04T23:07:33Z","updated_at":"2022-06-13T00:07:05Z","closed_at":"2022-05-13T09:50:58Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Provide a detailed description of the proposed feature\r\n\r\nHomebrew sanitizes the `$TERMINFO` and `$TERMINFO_DIRS` environmental variables on macOS. This prevents Homebrew from using an alternate/supplemental terminfo database that is not at the default location (`~/.terminfo`).\r\n\r\nSee https://github.com/Homebrew/homebrew-core/pull/94093#issuecomment-1025083168 for some additional background.\r\n\r\n### What is the motivation for the feature?\r\n\r\nA Homebrew developer suggested easing the pain of outdated terminfo entries in macOS system software by supplementing the system database (e.g. `export TERMINFO_DIRS=\":/path/to/supplemental/entries\"`) instead of using `~/.terminfo`. This is an improvement because any new terminfo entries doctored to work with the system ncurses will not override the newer entries used by Homebrew ncurses.\r\n\r\n### How will the feature be relevant to at least 90% of Homebrew users?\r\n\r\n\r\nAs macOS's curses ossifies further, and tools like alacritty/tmux/kitty ship their own terminfo definitions (or rely on a entry in the upstream terminfo database), this is an increasingly relevant sharp edge. Homebrew supporting a better way to mitigate these issues (and being more well-behaved when it comes to well-known system env variables) would help with this effort.\r\n\r\n### What alternatives to the feature have been considered?\r\n\r\nDo nothing and suffer from degraded emoji support and confusing errors when relying on `$TERMINFO_DIRS` to mitigate terminfo mismatch.\r\n\r\n![image](https://user-images.githubusercontent.com/1049222/166839510-6f7517fa-7d9f-4f1b-bb22-e63430d86b8b.png)\r\n","closed_by":{"login":"carlocab","id":30379873,"node_id":"MDQ6VXNlcjMwMzc5ODcz","avatar_url":"https://avatars.githubusercontent.com/u/30379873?v=4","gravatar_id":"","url":"https://api.github.com/users/carlocab","html_url":"https://github.com/carlocab","followers_url":"https://api.github.com/users/carlocab/followers","following_url":"https://api.github.com/users/carlocab/following{/other_user}","gists_url":"https://api.github.com/users/carlocab/gists{/gist_id}","starred_url":"https://api.github.com/users/carlocab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlocab/subscriptions","organizations_url":"https://api.github.com/users/carlocab/orgs","repos_url":"https://api.github.com/users/carlocab/repos","events_url":"https://api.github.com/users/carlocab/events{/privacy}","received_events_url":"https://api.github.com/users/carlocab/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/Homebrew/brew/issues/13248/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Homebrew/brew/issues/13248/timeline","performed_via_github_app":null,"state_reason":"completed"}