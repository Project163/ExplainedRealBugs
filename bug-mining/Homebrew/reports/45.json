{"url":"https://api.github.com/repos/Homebrew/brew/issues/13836","repository_url":"https://api.github.com/repos/Homebrew/brew","labels_url":"https://api.github.com/repos/Homebrew/brew/issues/13836/labels{/name}","comments_url":"https://api.github.com/repos/Homebrew/brew/issues/13836/comments","events_url":"https://api.github.com/repos/Homebrew/brew/issues/13836/events","html_url":"https://github.com/Homebrew/brew/issues/13836","id":1368071677,"node_id":"I_kwDOAyxcHc5Rix39","number":13836,"title":"Linkage can fail spuriously for newly installed formulae","user":{"login":"mikhailkoliada","id":88318005,"node_id":"MDQ6VXNlcjg4MzE4MDA1","avatar_url":"https://avatars.githubusercontent.com/u/88318005?v=4","gravatar_id":"","url":"https://api.github.com/users/mikhailkoliada","html_url":"https://github.com/mikhailkoliada","followers_url":"https://api.github.com/users/mikhailkoliada/followers","following_url":"https://api.github.com/users/mikhailkoliada/following{/other_user}","gists_url":"https://api.github.com/users/mikhailkoliada/gists{/gist_id}","starred_url":"https://api.github.com/users/mikhailkoliada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikhailkoliada/subscriptions","organizations_url":"https://api.github.com/users/mikhailkoliada/orgs","repos_url":"https://api.github.com/users/mikhailkoliada/repos","events_url":"https://api.github.com/users/mikhailkoliada/events{/privacy}","received_events_url":"https://api.github.com/users/mikhailkoliada/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":922544989,"node_id":"MDU6TGFiZWw5MjI1NDQ5ODk=","url":"https://api.github.com/repos/Homebrew/brew/labels/outdated","name":"outdated","color":"d93f0b","default":false,"description":"PR was locked due to age"}],"state":"closed","locked":true,"assignee":{"login":"Bo98","id":1190754,"node_id":"MDQ6VXNlcjExOTA3NTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1190754?v=4","gravatar_id":"","url":"https://api.github.com/users/Bo98","html_url":"https://github.com/Bo98","followers_url":"https://api.github.com/users/Bo98/followers","following_url":"https://api.github.com/users/Bo98/following{/other_user}","gists_url":"https://api.github.com/users/Bo98/gists{/gist_id}","starred_url":"https://api.github.com/users/Bo98/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bo98/subscriptions","organizations_url":"https://api.github.com/users/Bo98/orgs","repos_url":"https://api.github.com/users/Bo98/repos","events_url":"https://api.github.com/users/Bo98/events{/privacy}","received_events_url":"https://api.github.com/users/Bo98/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"Bo98","id":1190754,"node_id":"MDQ6VXNlcjExOTA3NTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1190754?v=4","gravatar_id":"","url":"https://api.github.com/users/Bo98","html_url":"https://github.com/Bo98","followers_url":"https://api.github.com/users/Bo98/followers","following_url":"https://api.github.com/users/Bo98/following{/other_user}","gists_url":"https://api.github.com/users/Bo98/gists{/gist_id}","starred_url":"https://api.github.com/users/Bo98/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bo98/subscriptions","organizations_url":"https://api.github.com/users/Bo98/orgs","repos_url":"https://api.github.com/users/Bo98/repos","events_url":"https://api.github.com/users/Bo98/events{/privacy}","received_events_url":"https://api.github.com/users/Bo98/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":5,"created_at":"2022-09-09T14:35:04Z","updated_at":"2022-10-11T00:11:26Z","closed_at":"2022-09-10T15:37:57Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### `brew gist-logs <formula>` link OR `brew config` AND `brew doctor` output\n\n```shell\n: 3.6.0-24-g5524b30\r\nORIGIN: https://github.com/Homebrew/brew\r\nHEAD: 5524b302d83a54660c49e850b3bc1558371c2fbc\r\nLast commit: 27 hours ago\r\nCore tap ORIGIN: https://github.com/Homebrew/homebrew-core\r\nCore tap HEAD: 6f7e54470b33fe838ac4fbccd47d743a8baee15d\r\nCore tap last commit: 24 hours ago\r\nCore tap branch: master\r\nHOMEBREW_PREFIX: /home/linuxbrew/.linuxbrew\r\nHOMEBREW_CASK_OPTS: []\r\nHOMEBREW_CLEANUP_PERIODIC_FULL_DAYS: 3650\r\nHOMEBREW_MAKE_JOBS: 1\r\nHOMEBREW_NO_AUTO_UPDATE: set\r\nHomebrew Ruby: 2.6.8 => /home/linuxbrew/.linuxbrew/Homebrew/Library/Homebrew/vendor/portable-ruby/2.6.8_1/bin/ruby\r\nCPU: single-core 64-bit haswell\r\nClang: N/A\r\nGit: 2.25.1 => /bin/git\r\nCurl: 7.68.0 => /bin/curl\r\nKernel: Linux 5.15.0-1019-azure x86_64 GNU/Linux\r\nOS: Ubuntu 20.04.5 LTS (focal)\r\nHost glibc: 2.31\r\n/usr/bin/gcc: 9.4.0\r\n/usr/bin/ruby: N/A\r\nglibc: 2.35\r\ngcc@11: 11.3.0\r\nxorg: N/A\r\n\r\n```brew doctor\r\nYour system is ready to brew```\n```\n\n\n### Verification\n\n- [X] I ran `brew update` and am still able to reproduce my issue.\n- [X] I have resolved all warnings from `brew doctor` and that did not fix my problem.\n\n### What were you trying to do (and why)?\n\nactions/runner-images projects [installs](https://github.com/actions/runner-images/blob/main/images/linux/toolsets/toolset-2004.json#L219) zstd from brew on Ubuntu 18.04 and 20.04 (just to make sure it is always present in the system as customers demand it a lot). With homebrew 3.6.0 gcc@11 has become a mandatory dependency for any package, so we decided to add gcc@11 into our list (put it first), and expected zstd's explicit installation to be quietly ignored as it is pulled by gcc itself in anyway (but we still want to keep it listed explicitly, just in case).\n\n### What happened (include all command output)?\n\nAfter test CI runs we have noticed that brew experienced linkge problems for gcc an it tries to rebuild itself from sources, while it should not. See build [runs](https://github.visualstudio.com/runner-images/_build/results?buildId=128717&view=logs&j=011e1ec8-6569-5e69-4f06-baf193d1351e&t=5431112d-2b61-5a5f-7042-ef698f761043)\n\n### What did you expect to happen?\n\nzstd installation ignored and no linkage problems for gcc@11\n\n### Step-by-step reproduction instructions (by running `brew` commands)\n\n```shell\n`brew install gcc@11`\r\n`brew install zstd`\n```\n","closed_by":{"login":"Bo98","id":1190754,"node_id":"MDQ6VXNlcjExOTA3NTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1190754?v=4","gravatar_id":"","url":"https://api.github.com/users/Bo98","html_url":"https://github.com/Bo98","followers_url":"https://api.github.com/users/Bo98/followers","following_url":"https://api.github.com/users/Bo98/following{/other_user}","gists_url":"https://api.github.com/users/Bo98/gists{/gist_id}","starred_url":"https://api.github.com/users/Bo98/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bo98/subscriptions","organizations_url":"https://api.github.com/users/Bo98/orgs","repos_url":"https://api.github.com/users/Bo98/repos","events_url":"https://api.github.com/users/Bo98/events{/privacy}","received_events_url":"https://api.github.com/users/Bo98/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/Homebrew/brew/issues/13836/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Homebrew/brew/issues/13836/timeline","performed_via_github_app":null,"state_reason":"completed"}