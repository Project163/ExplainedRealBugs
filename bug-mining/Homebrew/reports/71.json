{"url":"https://api.github.com/repos/Homebrew/brew/issues/15750","repository_url":"https://api.github.com/repos/Homebrew/brew","labels_url":"https://api.github.com/repos/Homebrew/brew/issues/15750/labels{/name}","comments_url":"https://api.github.com/repos/Homebrew/brew/issues/15750/comments","events_url":"https://api.github.com/repos/Homebrew/brew/issues/15750/events","html_url":"https://github.com/Homebrew/brew/issues/15750","id":1819956254,"node_id":"I_kwDOAyxcHc5selQe","number":15750,"title":"`using: CustomDownloadStrategy` erroring since sorbet was enabled","user":{"login":"gibfahn","id":15943089,"node_id":"MDQ6VXNlcjE1OTQzMDg5","avatar_url":"https://avatars.githubusercontent.com/u/15943089?v=4","gravatar_id":"","url":"https://api.github.com/users/gibfahn","html_url":"https://github.com/gibfahn","followers_url":"https://api.github.com/users/gibfahn/followers","following_url":"https://api.github.com/users/gibfahn/following{/other_user}","gists_url":"https://api.github.com/users/gibfahn/gists{/gist_id}","starred_url":"https://api.github.com/users/gibfahn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gibfahn/subscriptions","organizations_url":"https://api.github.com/users/gibfahn/orgs","repos_url":"https://api.github.com/users/gibfahn/repos","events_url":"https://api.github.com/users/gibfahn/events{/privacy}","received_events_url":"https://api.github.com/users/gibfahn/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":351931983,"node_id":"MDU6TGFiZWwzNTE5MzE5ODM=","url":"https://api.github.com/repos/Homebrew/brew/labels/in%20progress","name":"in progress","color":"ededed","default":false,"description":"Maintainers are working on this"},{"id":922544989,"node_id":"MDU6TGFiZWw5MjI1NDQ5ODk=","url":"https://api.github.com/repos/Homebrew/brew/labels/outdated","name":"outdated","color":"d93f0b","default":false,"description":"PR was locked due to age"}],"state":"closed","locked":true,"assignee":{"login":"MikeMcQuaid","id":125011,"node_id":"MDQ6VXNlcjEyNTAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/125011?v=4","gravatar_id":"","url":"https://api.github.com/users/MikeMcQuaid","html_url":"https://github.com/MikeMcQuaid","followers_url":"https://api.github.com/users/MikeMcQuaid/followers","following_url":"https://api.github.com/users/MikeMcQuaid/following{/other_user}","gists_url":"https://api.github.com/users/MikeMcQuaid/gists{/gist_id}","starred_url":"https://api.github.com/users/MikeMcQuaid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MikeMcQuaid/subscriptions","organizations_url":"https://api.github.com/users/MikeMcQuaid/orgs","repos_url":"https://api.github.com/users/MikeMcQuaid/repos","events_url":"https://api.github.com/users/MikeMcQuaid/events{/privacy}","received_events_url":"https://api.github.com/users/MikeMcQuaid/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"MikeMcQuaid","id":125011,"node_id":"MDQ6VXNlcjEyNTAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/125011?v=4","gravatar_id":"","url":"https://api.github.com/users/MikeMcQuaid","html_url":"https://github.com/MikeMcQuaid","followers_url":"https://api.github.com/users/MikeMcQuaid/followers","following_url":"https://api.github.com/users/MikeMcQuaid/following{/other_user}","gists_url":"https://api.github.com/users/MikeMcQuaid/gists{/gist_id}","starred_url":"https://api.github.com/users/MikeMcQuaid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MikeMcQuaid/subscriptions","organizations_url":"https://api.github.com/users/MikeMcQuaid/orgs","repos_url":"https://api.github.com/users/MikeMcQuaid/repos","events_url":"https://api.github.com/users/MikeMcQuaid/events{/privacy}","received_events_url":"https://api.github.com/users/MikeMcQuaid/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":3,"created_at":"2023-07-25T09:53:57Z","updated_at":"2023-08-26T00:05:34Z","closed_at":"2023-07-25T15:04:51Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### `brew doctor` output\r\n\r\n```shell\r\n❯ brew doctor\r\nPlease note that these warnings are just used to help the Homebrew maintainers\r\nwith debugging if you file an issue. If everything you use Homebrew for is\r\nworking fine: please don't worry or file an issue; just ignore this. Thanks!\r\n\r\nWarning: The filesystem on /System/Volumes/Data appears to be case-sensitive.\r\nThe default macOS filesystem is case-insensitive. Please report any apparent problems.\r\n\r\nWarning: You have unlinked kegs in your Cellar.\r\nLeaving kegs unlinked can lead to build-trouble and cause formulae that depend on\r\nthose kegs to fail to run properly once built. Run `brew link` on these:\r\n  pycparser\r\n  cffi\r\n\r\nWarning: Homebrew's \"sbin\" was not found in your PATH but you have installed\r\nformulae that put executables in /opt/homebrew/sbin.\r\nConsider setting your PATH for example like so:\r\n  echo 'export PATH=\"/opt/homebrew/sbin:$PATH\"' >> ~/.zshrc\r\n```\r\n\r\n\r\n### Verification\r\n\r\n- [X] My \"`brew doctor` output\" above says `Your system is ready to brew.` and am still able to reproduce my issue.\r\n- [X] I ran `brew update` twice and am still able to reproduce my issue.\r\n- [X] This issue's title and/or description do not reference a single formula e.g. `brew install wget`. If they do, open an issue at https://github.com/Homebrew/homebrew-core/issues/new/choose instead.\r\n\r\n### `brew config` output\r\n\r\n```shell\r\n❯ brew config\r\nHOMEBREW_VERSION: 4.1.1-20-db86a40ef8\r\nORIGIN: https://github.com/homebrew/brew\r\nHEAD: db86a40ef8b5808a37a32b057d5aba18a1ce4054\r\nLast commit: 2 hours ago\r\nCore tap origin: https://github.com/homebrew/homebrew-core\r\nCore tap HEAD: f0eded11a20dc323633def3fefbf39a023f298c0\r\nCore tap last commit: 49 minutes ago\r\nCore tap branch: master\r\nHOMEBREW_PREFIX: /opt/homebrew\r\nHOMEBREW_BAT_THEME: TwoDark\r\nHOMEBREW_CASK_OPTS: []\r\nHOMEBREW_EDITOR: nvim\r\nHOMEBREW_MAKE_JOBS: 10\r\nHOMEBREW_NO_ANALYTICS: set\r\nHOMEBREW_NO_GITHUB_API: set\r\nHOMEBREW_NO_INSTALL_FROM_API: set\r\nHomebrew Ruby: 2.6.10 => /opt/homebrew/Library/Homebrew/vendor/portable-ruby/2.6.10_1/bin/ruby\r\nCPU: 10-core 64-bit arm_firestorm_icestorm\r\nClang: 14.0.3 build 1403\r\nGit: 2.41.0 => /opt/homebrew/bin/git\r\nCurl: 8.1.2 => /usr/bin/curl\r\nmacOS: 13.4-arm64\r\nCLT: N/A\r\nXcode: 14.0 => /Applications/Xcode.app/Contents/Developer\r\nRosetta 2: false\r\n```\r\n\r\n\r\n### What were you trying to do (and why)?\r\n\r\nRunning an automatic script to update casks to their latest versions.\r\n\r\n### What happened (include all command output)?\r\n\r\n```\r\n❯ brew bump-cask-pr --write-only --version 10.3,28 --no-audit --no-style my-org/tap/my-cask\r\nError: Cask 'my-cask' definition is invalid: 'url' stanza failed with: Parameter 'using': Expected type T.nilable(Symbol), got type Class with value MyCustomDownloadStrategy\r\nCaller: /opt/homebrew/Library/Homebrew/vendor/bundle/ruby/2.6.0/gems/sorbet-runtime-0.5.10461/lib/types/private/methods/call_validation.rb:113\r\nDefinition: /opt/homebrew/Library/Homebrew/cask/url.rb:171\r\n```\r\n\r\nBisect shows this error started with the enabling of sorbet: https://github.com/Homebrew/brew/pull/15705\r\n\r\n### What did you expect to happen?\r\n\r\nI believe this is still supported as it's mentioned in the docs: https://docs.brew.sh/Formula-Cookbook#specifying-the-download-strategy-explicitly\r\n\r\n### Step-by-step reproduction instructions (by running `brew` commands)\r\n\r\n```shell\r\ncask \"my-cask\" do\r\n  version \"1.2.3\"\r\n  sha256 \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"\r\n\r\n  url \"https://example.com/my-org/my-cask\", using: CustomDownloadStrategy\r\n  name \"MyCask\"\r\n  app \"MyCask.app\"\r\nend\r\n\r\n\r\n- Have example cask ^\r\n- Try to update it with e.g. `brew bump-cask-pr --write-only --version 10.3,28 --no-audit --no-style my-org/tap/my-cask`\r\n```\r\n","closed_by":{"login":"MikeMcQuaid","id":125011,"node_id":"MDQ6VXNlcjEyNTAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/125011?v=4","gravatar_id":"","url":"https://api.github.com/users/MikeMcQuaid","html_url":"https://github.com/MikeMcQuaid","followers_url":"https://api.github.com/users/MikeMcQuaid/followers","following_url":"https://api.github.com/users/MikeMcQuaid/following{/other_user}","gists_url":"https://api.github.com/users/MikeMcQuaid/gists{/gist_id}","starred_url":"https://api.github.com/users/MikeMcQuaid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MikeMcQuaid/subscriptions","organizations_url":"https://api.github.com/users/MikeMcQuaid/orgs","repos_url":"https://api.github.com/users/MikeMcQuaid/repos","events_url":"https://api.github.com/users/MikeMcQuaid/events{/privacy}","received_events_url":"https://api.github.com/users/MikeMcQuaid/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/Homebrew/brew/issues/15750/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Homebrew/brew/issues/15750/timeline","performed_via_github_app":null,"state_reason":"completed"}