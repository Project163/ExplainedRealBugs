{"url":"https://api.github.com/repos/Homebrew/brew/issues/16917","repository_url":"https://api.github.com/repos/Homebrew/brew","labels_url":"https://api.github.com/repos/Homebrew/brew/issues/16917/labels{/name}","comments_url":"https://api.github.com/repos/Homebrew/brew/issues/16917/comments","events_url":"https://api.github.com/repos/Homebrew/brew/issues/16917/events","html_url":"https://github.com/Homebrew/brew/issues/16917","id":2194992178,"node_id":"I_kwDOAyxcHc6C1Owy","number":16917,"title":"bump-formula-pr fails with `Parameter 'version': Expected type T.nilable(String), got type Version with value #<Version:0x0000000107fe472...0.2\"`","user":{"login":"raulcd","id":639755,"node_id":"MDQ6VXNlcjYzOTc1NQ==","avatar_url":"https://avatars.githubusercontent.com/u/639755?v=4","gravatar_id":"","url":"https://api.github.com/users/raulcd","html_url":"https://github.com/raulcd","followers_url":"https://api.github.com/users/raulcd/followers","following_url":"https://api.github.com/users/raulcd/following{/other_user}","gists_url":"https://api.github.com/users/raulcd/gists{/gist_id}","starred_url":"https://api.github.com/users/raulcd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raulcd/subscriptions","organizations_url":"https://api.github.com/users/raulcd/orgs","repos_url":"https://api.github.com/users/raulcd/repos","events_url":"https://api.github.com/users/raulcd/events{/privacy}","received_events_url":"https://api.github.com/users/raulcd/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":922544989,"node_id":"MDU6TGFiZWw5MjI1NDQ5ODk=","url":"https://api.github.com/repos/Homebrew/brew/labels/outdated","name":"outdated","color":"d93f0b","default":false,"description":"PR was locked due to age"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-03-19T13:33:54Z","updated_at":"2024-04-20T01:22:21Z","closed_at":"2024-03-20T03:00:10Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### `brew doctor` output\r\n\r\n```shell\r\n% brew doctor                                        \r\nYour system is ready to brew.\r\n```\r\n\r\n\r\n### Verification\r\n\r\n- [X] My \"`brew doctor` output\" above says `Your system is ready to brew.` and am still able to reproduce my issue.\r\n- [X] I ran `brew update` twice and am still able to reproduce my issue.\r\n- [X] This issue's title and/or description do not reference a single formula e.g. `brew install wget`. If they do, open an issue at https://github.com/Homebrew/homebrew-core/issues/new/choose instead.\r\n\r\n### `brew config` output\r\n\r\n```shell\r\n% brew config\r\nHOMEBREW_VERSION: 4.2.13-38-ge3797d3\r\nORIGIN: https://github.com/Homebrew/brew\r\nHEAD: e3797d39bde3fe4c4b9c5c3b17dfd653dc592dc9\r\nLast commit: 7 hours ago\r\nCore tap HEAD: 28ac0e2cb51cc6dea310adf56d3db33ea8d25940\r\nCore tap last commit: 4 minutes ago\r\nCore tap JSON: 19 Mar 13:26 UTC\r\nCore cask tap JSON: 19 Mar 13:26 UTC\r\nHOMEBREW_PREFIX: /opt/homebrew\r\nHOMEBREW_CASK_OPTS: []\r\nHOMEBREW_MAKE_JOBS: 8\r\nHOMEBREW_SORBET_RUNTIME: set\r\nHomebrew Ruby: 3.1.4 => /opt/homebrew/Library/Homebrew/vendor/portable-ruby/3.1.4/bin/ruby\r\nCPU: octa-core 64-bit arm_blizzard_avalanche\r\nClang: 15.0.0 build 1500\r\nGit: 2.44.0 => /opt/homebrew/bin/git\r\nCurl: 8.4.0 => /usr/bin/curl\r\nmacOS: 14.4-arm64\r\nCLT: 15.3.0.0.1.1708646388\r\nXcode: 15.2\r\nRosetta 2: false\r\n```\r\n\r\n\r\n### What were you trying to do (and why)?\r\n\r\nI was trying to bump the Apache Arrow formula for the new 15.0.2 version.\r\n\r\nhttps://github.com/apache/arrow/blob/ed47ad22c8537b32abf27580e75fcf514be11f7e/dev/release/post-13-homebrew.sh#L50-L57\r\n\r\n### What happened (include all command output)?\r\n\r\n```shell\r\nSwitched to a new branch 'apache-arrow-15.0.2'\r\nUpdating apache-arrow formulae\r\nWarning: bump-formula-pr is a developer command, so Homebrew's\r\ndeveloper mode has been automatically turned on.\r\nTo turn developer mode off, run:\r\n  brew developer off\r\n\r\nError: Parameter 'version': Expected type T.nilable(String), got type Version with value #<Version:0x0000000107fe472...0.2\", @detected_from_url=true>\r\nCaller: /opt/homebrew/Library/Homebrew/vendor/bundle/ruby/3.1.0/gems/sorbet-runtime-0.5.11294/lib/types/private/methods/call_validation.rb:133\r\nDefinition: /opt/homebrew/Library/Homebrew/utils/github.rb:523\r\nPlease report this issue:\r\n  https://docs.brew.sh/Troubleshooting\r\n/opt/homebrew/Library/Homebrew/vendor/bundle/ruby/3.1.0/gems/sorbet-runtime-0.5.11294/lib/types/configuration.rb:296:in `call_validation_error_handler_default'\r\n/opt/homebrew/Library/Homebrew/vendor/bundle/ruby/3.1.0/gems/sorbet-runtime-0.5.11294/lib/types/configuration.rb:303:in `call_validation_error_handler'\r\n/opt/homebrew/Library/Homebrew/vendor/bundle/ruby/3.1.0/gems/sorbet-runtime-0.5.11294/lib/types/private/methods/call_validation.rb:300:in `report_error'\r\n/opt/homebrew/Library/Homebrew/vendor/bundle/ruby/3.1.0/gems/sorbet-runtime-0.5.11294/lib/types/private/methods/call_validation.rb:136:in `block in validate_call_skip_block_type'\r\n/opt/homebrew/Library/Homebrew/vendor/bundle/ruby/3.1.0/gems/sorbet-runtime-0.5.11294/lib/types/private/methods/signature.rb:234:in `block in each_args_value_type'\r\n/opt/homebrew/Library/Homebrew/vendor/bundle/ruby/3.1.0/gems/sorbet-runtime-0.5.11294/lib/types/private/methods/signature.rb:228:in `each'\r\n/opt/homebrew/Library/Homebrew/vendor/bundle/ruby/3.1.0/gems/sorbet-runtime-0.5.11294/lib/types/private/methods/signature.rb:228:in `each_args_value_type'\r\n/opt/homebrew/Library/Homebrew/vendor/bundle/ruby/3.1.0/gems/sorbet-runtime-0.5.11294/lib/types/private/methods/call_validation.rb:133:in `validate_call_skip_block_type'\r\n/opt/homebrew/Library/Homebrew/vendor/bundle/ruby/3.1.0/gems/sorbet-runtime-0.5.11294/lib/types/private/methods/call_validation.rb:109:in `block in create_validator_slow_skip_block_type'\r\n/opt/homebrew/Library/Homebrew/utils/github.rb:628:in `check_for_duplicate_pull_requests'\r\n/opt/homebrew/Library/Homebrew/dev-cmd/bump-formula-pr.rb:474:in `check_closed_pull_requests'\r\n/opt/homebrew/Library/Homebrew/dev-cmd/bump-formula-pr.rb:459:in `check_new_version'\r\n/opt/homebrew/Library/Homebrew/dev-cmd/bump-formula-pr.rb:164:in `bump_formula_pr'\r\n/opt/homebrew/Library/Homebrew/brew.rb:86:in `<main>'\r\n```\r\n### What did you expect to happen?\r\n\r\nThe `bump-formula-pr` succeeds.\r\n\r\n### Step-by-step reproduction instructions (by running `brew` commands)\r\n\r\n```shell\r\nbrew bump-formula-pr \\ \r\n      --commit \\ \r\n      --no-audit \\ \r\n      --sha256=\"abbf97176db6a9e8186fe005e93320dac27c64562755c77de50a882eb6179ac6\" \\ \r\n      --url=\"https://www.apache.org/dyn/closer.lua?path=arrow/arrow-15.0.2/apache-arrow-15.0.2.tar.gz\" \\ \r\n      --verbose \\ \r\n      --write-only \\ \r\n      apache-arrow\r\n```\r\n","closed_by":{"login":"EricFromCanada","id":3324775,"node_id":"MDQ6VXNlcjMzMjQ3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/3324775?v=4","gravatar_id":"","url":"https://api.github.com/users/EricFromCanada","html_url":"https://github.com/EricFromCanada","followers_url":"https://api.github.com/users/EricFromCanada/followers","following_url":"https://api.github.com/users/EricFromCanada/following{/other_user}","gists_url":"https://api.github.com/users/EricFromCanada/gists{/gist_id}","starred_url":"https://api.github.com/users/EricFromCanada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EricFromCanada/subscriptions","organizations_url":"https://api.github.com/users/EricFromCanada/orgs","repos_url":"https://api.github.com/users/EricFromCanada/repos","events_url":"https://api.github.com/users/EricFromCanada/events{/privacy}","received_events_url":"https://api.github.com/users/EricFromCanada/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/Homebrew/brew/issues/16917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Homebrew/brew/issues/16917/timeline","performed_via_github_app":null,"state_reason":"completed"}