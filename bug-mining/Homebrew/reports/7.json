{"url":"https://api.github.com/repos/Homebrew/brew/issues/11294","repository_url":"https://api.github.com/repos/Homebrew/brew","labels_url":"https://api.github.com/repos/Homebrew/brew/issues/11294/labels{/name}","comments_url":"https://api.github.com/repos/Homebrew/brew/issues/11294/comments","events_url":"https://api.github.com/repos/Homebrew/brew/issues/11294/events","html_url":"https://github.com/Homebrew/brew/issues/11294","id":872346370,"node_id":"MDU6SXNzdWU4NzIzNDYzNzA=","number":11294,"title":"[BUG] brew refused to upgrade formula while pinning its build dependency","user":{"login":"icpz","id":11691701,"node_id":"MDQ6VXNlcjExNjkxNzAx","avatar_url":"https://avatars.githubusercontent.com/u/11691701?v=4","gravatar_id":"","url":"https://api.github.com/users/icpz","html_url":"https://github.com/icpz","followers_url":"https://api.github.com/users/icpz/followers","following_url":"https://api.github.com/users/icpz/following{/other_user}","gists_url":"https://api.github.com/users/icpz/gists{/gist_id}","starred_url":"https://api.github.com/users/icpz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icpz/subscriptions","organizations_url":"https://api.github.com/users/icpz/orgs","repos_url":"https://api.github.com/users/icpz/repos","events_url":"https://api.github.com/users/icpz/events{/privacy}","received_events_url":"https://api.github.com/users/icpz/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":922544989,"node_id":"MDU6TGFiZWw5MjI1NDQ5ODk=","url":"https://api.github.com/repos/Homebrew/brew/labels/outdated","name":"outdated","color":"d93f0b","default":false,"description":"PR was locked due to age"}],"state":"closed","locked":true,"assignee":{"login":"MikeMcQuaid","id":125011,"node_id":"MDQ6VXNlcjEyNTAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/125011?v=4","gravatar_id":"","url":"https://api.github.com/users/MikeMcQuaid","html_url":"https://github.com/MikeMcQuaid","followers_url":"https://api.github.com/users/MikeMcQuaid/followers","following_url":"https://api.github.com/users/MikeMcQuaid/following{/other_user}","gists_url":"https://api.github.com/users/MikeMcQuaid/gists{/gist_id}","starred_url":"https://api.github.com/users/MikeMcQuaid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MikeMcQuaid/subscriptions","organizations_url":"https://api.github.com/users/MikeMcQuaid/orgs","repos_url":"https://api.github.com/users/MikeMcQuaid/repos","events_url":"https://api.github.com/users/MikeMcQuaid/events{/privacy}","received_events_url":"https://api.github.com/users/MikeMcQuaid/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"MikeMcQuaid","id":125011,"node_id":"MDQ6VXNlcjEyNTAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/125011?v=4","gravatar_id":"","url":"https://api.github.com/users/MikeMcQuaid","html_url":"https://github.com/MikeMcQuaid","followers_url":"https://api.github.com/users/MikeMcQuaid/followers","following_url":"https://api.github.com/users/MikeMcQuaid/following{/other_user}","gists_url":"https://api.github.com/users/MikeMcQuaid/gists{/gist_id}","starred_url":"https://api.github.com/users/MikeMcQuaid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MikeMcQuaid/subscriptions","organizations_url":"https://api.github.com/users/MikeMcQuaid/orgs","repos_url":"https://api.github.com/users/MikeMcQuaid/repos","events_url":"https://api.github.com/users/MikeMcQuaid/events{/privacy}","received_events_url":"https://api.github.com/users/MikeMcQuaid/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":0,"created_at":"2021-04-30T11:09:00Z","updated_at":"2021-05-31T00:17:57Z","closed_at":"2021-04-30T13:01:40Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### `brew gist-logs <formula>` link OR `brew config` AND `brew doctor` output\n\n```shell\n$ brew config\r\nHOMEBREW_VERSION: 3.1.5-2-g302087a\r\nORIGIN: https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/brew.git\r\nHEAD: 302087aa1e784c4b6eda48fb94022d364824bf51\r\nLast commit: 11 hours ago\r\nCore tap ORIGIN: https://github.com/Homebrew/homebrew-core\r\nCore tap HEAD: 4c638b0758a906c4db20e0a5624ed99f679e1ed5\r\nCore tap last commit: 55 minutes ago\r\nCore tap branch: master\r\nHOMEBREW_PREFIX: /usr/local\r\nHOMEBREW_CASK_OPTS: []\r\nHOMEBREW_DISPLAY: /private/tmp/com.apple.launchd.K4OE6kvJiH/org.xquartz:0\r\nHOMEBREW_EDITOR: vim\r\nHOMEBREW_FORCE_BREWED_CURL: set\r\nHOMEBREW_FORCE_BREWED_GIT: set\r\nHOMEBREW_GITHUB_API_TOKEN: set\r\nHOMEBREW_MAKE_JOBS: 8\r\nHOMEBREW_NO_AUTO_UPDATE: set\r\nHOMEBREW_NO_INSTALL_CLEANUP: set\r\nHomebrew Ruby: 2.6.3 => /System/Library/Frameworks/Ruby.framework/Versions/2.6/usr/bin/ruby\r\nCPU: octa-core 64-bit kabylake\r\nClang: 12.0 build 1205\r\nGit: 2.31.1 => /usr/local/opt/git/bin/git\r\nCurl: 7.76.1 => /usr/local/opt/curl/bin/curl\r\nmacOS: 11.3-x86_64\r\nCLT: 12.5.0.0.1.1617976050\r\nXcode: 12.5\n```\n\n\n### \n\n- [X] I ran `brew update` and am still able to reproduce my issue.\n- [X] I have resolved all warnings from `brew doctor` and that did not fix my problem.\n\n### What were you trying to do (and why)?\n\nI want pin my cmake(3.20.2) formula for some reason. And I'm going to upgrade imagemagick to the latest version.\r\n\n\n### What happened (include all command output)?\n\nbrew refused to upgrade imagemagick even if cmake is its build dependency instead of requirement dependency.\r\n\r\n$ brew upgrade\r\nError: Not upgrading 1 pinned package:\r\ncmake 3.20.2\r\n==> Upgrading 1 outdated package:\r\nimagemagick 7.0.11-9 -> 7.0.11-10\r\n==> Upgrading imagemagick 7.0.11-9 -> 7.0.11-10\r\nError: You must `brew unpin cmake` as installing imagemagick requires the latest version of pinned dependencies\r\n\n\n### What did you expect to happen?\n\nWhen brew install a formula from the prebuilt bottle, it could ignore the pinned build dependencies.\n\n### Step-by-step reproduction instructions (by running `brew` commands)\n\n```shell\nbrew pin cmake # pin cmake to 3.20.2\r\n\r\nbrew update\r\n\r\nbrew upgrade imagemagick\n```\n","closed_by":{"login":"MikeMcQuaid","id":125011,"node_id":"MDQ6VXNlcjEyNTAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/125011?v=4","gravatar_id":"","url":"https://api.github.com/users/MikeMcQuaid","html_url":"https://github.com/MikeMcQuaid","followers_url":"https://api.github.com/users/MikeMcQuaid/followers","following_url":"https://api.github.com/users/MikeMcQuaid/following{/other_user}","gists_url":"https://api.github.com/users/MikeMcQuaid/gists{/gist_id}","starred_url":"https://api.github.com/users/MikeMcQuaid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MikeMcQuaid/subscriptions","organizations_url":"https://api.github.com/users/MikeMcQuaid/orgs","repos_url":"https://api.github.com/users/MikeMcQuaid/repos","events_url":"https://api.github.com/users/MikeMcQuaid/events{/privacy}","received_events_url":"https://api.github.com/users/MikeMcQuaid/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/Homebrew/brew/issues/11294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Homebrew/brew/issues/11294/timeline","performed_via_github_app":null,"state_reason":"completed"}