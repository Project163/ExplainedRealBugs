{"url":"https://api.github.com/repos/Homebrew/brew/issues/20197","repository_url":"https://api.github.com/repos/Homebrew/brew","labels_url":"https://api.github.com/repos/Homebrew/brew/issues/20197/labels{/name}","comments_url":"https://api.github.com/repos/Homebrew/brew/issues/20197/comments","events_url":"https://api.github.com/repos/Homebrew/brew/issues/20197/events","html_url":"https://github.com/Homebrew/brew/issues/20197","id":3188600581,"node_id":"I_kwDOAyxcHc6-Di8F","number":20197,"title":"Reinstalling formulae with dependents errors out","user":{"login":"carlocab","id":30379873,"node_id":"MDQ6VXNlcjMwMzc5ODcz","avatar_url":"https://avatars.githubusercontent.com/u/30379873?v=4","gravatar_id":"","url":"https://api.github.com/users/carlocab","html_url":"https://github.com/carlocab","followers_url":"https://api.github.com/users/carlocab/followers","following_url":"https://api.github.com/users/carlocab/following{/other_user}","gists_url":"https://api.github.com/users/carlocab/gists{/gist_id}","starred_url":"https://api.github.com/users/carlocab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlocab/subscriptions","organizations_url":"https://api.github.com/users/carlocab/orgs","repos_url":"https://api.github.com/users/carlocab/repos","events_url":"https://api.github.com/users/carlocab/events{/privacy}","received_events_url":"https://api.github.com/users/carlocab/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2025-06-30T13:57:47Z","updated_at":"2025-07-03T12:43:58Z","closed_at":"2025-07-03T12:43:58Z","author_association":"MEMBER","type":{"id":203324,"node_id":"IT_kwDOABbxGM4AAxo8","name":"Bug","description":"An unexpected problem or behavior","color":"red","created_at":"2024-01-25T09:21:16Z","updated_at":"2024-07-26T10:06:36Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### `brew doctor` output\n\n```shell\n❯ brew doctor\nYour system is ready to brew.\n```\n\n### Verification\n\n- [x] I ran `brew update` twice and am still able to reproduce my issue.\n- [x] My \"`brew doctor` output\" above says `Your system is ready to brew` or a definitely unrelated `Tier` message.\n- [x] This issue's title and/or description do not reference a single formula e.g. `brew install wget`. If they do, open an issue at https://github.com/Homebrew/homebrew-core/issues/new/choose instead.\n\n### `brew config` output\n\n```shell\n❯ brew config\nWORKBREW_VERSION: 1.3.1\nHOMEBREW_VERSION: 4.5.8-118-g1409a5e\nORIGIN: https://github.com/Homebrew/brew\nHEAD: 1409a5eeb21b24fabe6b9998f8047993b86b018f\nLast commit: 13 hours ago\nBranch: main\nCore tap HEAD: df2e0dc925598749fa5abbb646db6565dc7c797f\nCore tap last commit: 23 minutes ago\nCore tap JSON: 29 Jun 14:55 UTC\nCore cask tap HEAD: c6735cf4f5524d610469c132c0d983508a326b4a\nCore cask tap last commit: 21 minutes ago\nCore cask tap JSON: 29 Jun 14:07 UTC\nHOMEBREW_PREFIX: /opt/homebrew\nHOMEBREW_AUTO_UPDATE_SECS: 43200\nHOMEBREW_BAT: set\nHOMEBREW_BREW_WRAPPER: /opt/workbrew/bin/brew\nHOMEBREW_CASK_OPTS: [\"--colorpickerdir=/Library/ColorPickers\", \"--prefpanedir=/Library/PreferencePanes\", \"--qlplugindir=/Library/QuickLook\", \"--mdimporterdir=/Library/Spotlight\", \"--dictionarydir=/Library/Dictionaries\", \"--fontdir=/Library/Fonts\", \"--servicedir=/Library/Services\", \"--input-methoddir=/Library/Input Methods\", \"--internet-plugindir=/Library/Internet Plug-Ins\", \"--audio-unit-plugindir=/Library/Audio/Plug-Ins/Components\", \"--vst-plugindir=/Library/Audio/Plug-Ins/VST\", \"--vst3-plugindir=/Library/Audio/Plug-Ins/VST3\", \"--screen-saverdir=/Library/Screen Savers\"]\nHOMEBREW_CURLRC: /opt/homebrew/etc/curlrc\nHOMEBREW_DEVELOPER: set\nHOMEBREW_EDITOR: nvim\nHOMEBREW_FORBIDDEN_CASKS: zulu\nHOMEBREW_FORBIDDEN_FORMULAE: sl no-more-secrets\nHOMEBREW_FORBIDDEN_OWNER: Mike\nHOMEBREW_FORBIDDEN_OWNER_CONTACT: Contact us on Slack in #general with questions\nHOMEBREW_FORCE_BREWED_CURL: set\nHOMEBREW_FORCE_BREWED_GIT: set\nHOMEBREW_FORCE_BREW_WRAPPER: /opt/workbrew/bin/brew\nHOMEBREW_GIT_EMAIL: 30379873+carlocab@users.noreply.github.com\nHOMEBREW_GIT_NAME: Carlo Cabrera\nHOMEBREW_INSTALL_BADGE: ☕️\nHOMEBREW_MAKE_JOBS: 16\nHOMEBREW_NO_CLEANUP_FORMULAE: zsh\nHOMEBREW_NO_INSTALL_FROM_API: set\nHOMEBREW_SORBET_RUNTIME: set\nHOMEBREW_SYSTEM_ENV_TAKES_PRIORITY: set\nHOMEBREW_TEMP: /var/folders/by/r3kqb74j2zn0010s9mcbsvv00000gp/T/\nHomebrew Ruby: 3.4.4 => /opt/homebrew/Library/Homebrew/vendor/portable-ruby/3.4.4/bin/ruby\nCPU: 16-core 64-bit arm_palma\nClang: 17.0.0 build 1700\nGit: 2.50.0 => /opt/homebrew/opt/git/bin/git\nCurl: 8.14.1 => /opt/homebrew/opt/curl/bin/curl\nmacOS: 15.5-arm64\nCLT: 16.4.0.0.1.1747106510\nXcode: 16.4\nRosetta 2: false\n```\n\n### What were you trying to do (and why)?\n\nReinstall a formula, and it turned out to be a formula with dependents.\n\n### What happened (include all command output)?\n\nWhen reinstalling `libunistring`:\n```\n❯ brew reinstall libunistring\n==> Downloading https://ghcr.io/v2/homebrew/core/libunistring/manifests/1.3\nAlready downloaded: /opt/workbrew/home/Library/Caches/Homebrew/downloads/a570da63bc1839c7e217f203abd54d4d873ebd6b99f6e88994d0e79e2ebe987c--libunistring-1.3.bottle_manifest.json\n==> Fetching libunistring\n==> Downloading https://ghcr.io/v2/homebrew/core/libunistring/blobs/sha256:3cd26bae2d5fcf61294f14c18e5e7ec773a59ed1bf710fb92055e0db0244e909\n############################################################################################################################################################################### 100.0%\n==> Verifying attestation for libunistring\n==> Reinstalling libunistring\n==> Pouring libunistring--1.3.arm64_sequoia.bottle.tar.gz\n☕️  /opt/homebrew/Cellar/libunistring/1.3: 59 files, 5.4MB\n==> Running `brew cleanup libunistring`...\nDisable this behaviour by setting HOMEBREW_NO_INSTALL_CLEANUP.\nHide these hints with HOMEBREW_NO_ENV_HINTS (see `man brew`).\n==> No outdated dependents to upgrade!\nError: undefined method 'each' for nil\nWarning: Removed Sorbet lines from backtrace!\nRerun with `--verbose` to see the original backtrace\n/opt/homebrew/Library/Homebrew/upgrade.rb:96:in 'Homebrew::Upgrade.upgrade_formulae'\n/opt/homebrew/Library/Homebrew/upgrade.rb:393:in 'Homebrew::Upgrade.upgrade_dependents'\n/opt/homebrew/Library/Homebrew/cmd/reinstall.rb:193:in 'Homebrew::Cmd::Reinstall#run'\n/opt/homebrew/Library/Homebrew/brew.rb:95:in '<main>'\nPlease report this issue:\n  https://docs.brew.sh/Troubleshooting\n```\n\nWhen reinstalling `gettext`:\n```\n❯ brew reinstall gettext\n==> Downloading https://ghcr.io/v2/homebrew/core/gettext/manifests/0.25\nAlready downloaded: /opt/workbrew/home/Library/Caches/Homebrew/downloads/344607fc5b91bb0c1287d07bb445cc40cc465a163a52e12eed3cc5cd60498f78--gettext-0.25.bottle_manifest.json\n==> Fetching gettext\n==> Downloading https://ghcr.io/v2/homebrew/core/gettext/blobs/sha256:8dba9424a9409d3ba085acccfd8c88c196e31e31944c32c1d811cfdd6aae8280\nAlready downloaded: /opt/workbrew/home/Library/Caches/Homebrew/downloads/ea00736179e3e2ec12013e16ca384ccd42a24594e73f8acf552e3024cd5e1993--gettext--0.25.arm64_sequoia.bottle.tar.gz\n==> Reinstalling gettext\n==> Pouring gettext--0.25.arm64_sequoia.bottle.tar.gz\n☕️  /opt/homebrew/Cellar/gettext/0.25: 2,418 files, 27.7MB\n==> Running `brew cleanup gettext`...\nDisable this behaviour by setting HOMEBREW_NO_INSTALL_CLEANUP.\nHide these hints with HOMEBREW_NO_ENV_HINTS (see `man brew`).\n==> No outdated dependents to upgrade!\nError: undefined method 'each' for nil\nWarning: Removed Sorbet lines from backtrace!\nRerun with `--verbose` to see the original backtrace\n/opt/homebrew/Library/Homebrew/upgrade.rb:96:in 'Homebrew::Upgrade.upgrade_formulae'\n/opt/homebrew/Library/Homebrew/upgrade.rb:393:in 'Homebrew::Upgrade.upgrade_dependents'\n/opt/homebrew/Library/Homebrew/cmd/reinstall.rb:193:in 'Homebrew::Cmd::Reinstall#run'\n/opt/homebrew/Library/Homebrew/brew.rb:95:in '<main>'\nPlease report this issue:\n  https://docs.brew.sh/Troubleshooting\n```\n\n### What did you expect to happen?\n\nNo errors.\n\n### Step-by-step reproduction instructions (by running `brew` commands)\n\n`brew reinstall` an installed formula with dependents. On my system, good candidates were `libunistring` and `gettext`.","closed_by":{"login":"carlocab","id":30379873,"node_id":"MDQ6VXNlcjMwMzc5ODcz","avatar_url":"https://avatars.githubusercontent.com/u/30379873?v=4","gravatar_id":"","url":"https://api.github.com/users/carlocab","html_url":"https://github.com/carlocab","followers_url":"https://api.github.com/users/carlocab/followers","following_url":"https://api.github.com/users/carlocab/following{/other_user}","gists_url":"https://api.github.com/users/carlocab/gists{/gist_id}","starred_url":"https://api.github.com/users/carlocab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carlocab/subscriptions","organizations_url":"https://api.github.com/users/carlocab/orgs","repos_url":"https://api.github.com/users/carlocab/repos","events_url":"https://api.github.com/users/carlocab/events{/privacy}","received_events_url":"https://api.github.com/users/carlocab/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/Homebrew/brew/issues/20197/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Homebrew/brew/issues/20197/timeline","performed_via_github_app":null,"state_reason":"completed"}