diff --git a/Library/Homebrew/cmd/upgrade.rb b/Library/Homebrew/cmd/upgrade.rb
index aa23543312..bf33a9416f 100644
--- a/Library/Homebrew/cmd/upgrade.rb
+++ b/Library/Homebrew/cmd/upgrade.rb
@@ -236,6 +236,8 @@ module Homebrew
           verbose:                    args.verbose?,
         )
 
+        return false if formulae_installer.blank?
+
         dependants = Upgrade.dependants(
           formulae_to_install,
           flags:                      args.flags_only,
