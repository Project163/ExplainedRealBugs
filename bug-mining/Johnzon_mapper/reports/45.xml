<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:03:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JOHNZON-112] MapperException is thrown when deserializing a customized Enum type</title>
                <link>https://issues.apache.org/jira/browse/JOHNZON-112</link>
                <project id="12315523" key="JOHNZON">Johnzon</project>
                    <description>&lt;p&gt;Given:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Customized Enum type that has an alternate naming scheme than typical java Enum.name()&lt;/li&gt;
	&lt;li&gt;Custom Adapter between custom Enum type and String to use in serialization/deserialization&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Expectation:&lt;br/&gt;
Mapper configured to use adapter uses adapter for both serialization and deserialization operations.&lt;/p&gt;

&lt;p&gt;Actual:&lt;br/&gt;
Mapper uses configured adapter for serialization, but uses Enum.valueOf for deserialization, throwing Exceptions on its use.&lt;/p&gt;

&lt;p&gt;Root Cause Analysis:&lt;br/&gt;
It seems that in MappingParserImpl.convertTo(final Type aClass, final String text)&lt;br/&gt;
The custom adapter is attained successfully, but is ignored because &quot;valueOf&quot; method exists with public static modifiers.&lt;/p&gt;


&lt;p&gt;Seems like if the adapter exists, it should be used, only using valueOf as a fallback when it does not...&lt;/p&gt;

&lt;p&gt;Attaching minimal maven project that reproduces problem with &quot;mvn test&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13060249">JOHNZON-112</key>
            <summary>MapperException is thrown when deserializing a customized Enum type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="romain.manni-bucau">Romain Manni-Bucau</assignee>
                                    <reporter username="steven.walters">Steven Walters</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Mar 2017 05:31:25 +0000</created>
                <updated>Wed, 3 May 2017 07:46:34 +0000</updated>
                            <resolved>Thu, 30 Mar 2017 07:41:43 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Mapper</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15948577" author="romain.manni-bucau" created="Thu, 30 Mar 2017 07:41:43 +0000"  >&lt;p&gt;Fixed on master. Note it was working for enums in objects but not arrays which were ignoring adapters.&lt;/p&gt;

&lt;p&gt;Test case: &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=johnzon.git;a=blob;f=johnzon-mapper/src/test/java/org/apache/johnzon/mapper/CustomEnumCodecTest.java;h=0125ff420f82851ed9ca6b79441e47247b3b76f0;hb=f8d76d75969d826b0e3d046b4baed0114758e696&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=johnzon.git;a=blob;f=johnzon-mapper/src/test/java/org/apache/johnzon/mapper/CustomEnumCodecTest.java;h=0125ff420f82851ed9ca6b79441e47247b3b76f0;hb=f8d76d75969d826b0e3d046b4baed0114758e696&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15948647" author="struberg" created="Thu, 30 Mar 2017 08:23:35 +0000"  >&lt;p&gt;Steven, in which JSONP/JSONB version do you need this to work?&lt;br/&gt;
Romain fixed this in master which is 1.1.x and will be release soon. It targets JSONP-1.1 (EE8 level) + JSONB-1.0.&lt;/p&gt;

&lt;p&gt;The last released johnzon version was 1.0.0 and targetted JSONP-1.0 spec (EE7 level)&lt;/p&gt;

&lt;p&gt;Is master enough for you?&lt;/p&gt;</comment>
                            <comment id="15948962" author="steven.walters" created="Thu, 30 Mar 2017 12:27:11 +0000"  >&lt;p&gt;I believe Master is sufficient.&lt;/p&gt;

&lt;p&gt;I didn&apos;t think I got to the point of testing the deserialization when contained by an object, as the array tests I made failed first, so stopped there and started making a workaround. Romain&apos;s comment indicates that the logic should already be correct for objects, and that actually will suffice.&lt;/p&gt;</comment>
                            <comment id="15994423" author="struberg" created="Wed, 3 May 2017 07:46:34 +0000"  >&lt;p&gt;shipped in Johnzon-1.1.0&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12861167" name="johnzonCantDeserializeCustomEnum.zip" size="4328" author="steven.walters" created="Thu, 30 Mar 2017 05:32:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 28 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3czdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>