<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:03:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JOHNZON-199] JohnzonIgnore#minVersion logic is negated?</title>
                <link>https://issues.apache.org/jira/browse/JOHNZON-199</link>
                <project id="12315523" key="JOHNZON">Johnzon</project>
                    <description>&lt;p&gt;When a field is annotated with &lt;tt&gt;@JohnzonIgnore(minVersion = X)&lt;/tt&gt; and a json-string is written via &lt;tt&gt;Mapper&lt;/tt&gt;, the field is only included when the mapper is configured with &lt;tt&gt;.setVersion(Y)&lt;/tt&gt;, where Y &amp;lt; X}.&lt;br/&gt;
According to the documentation of &lt;tt&gt;JonzonIgnore#minVersion&lt;/tt&gt;&#160;and &lt;a href=&quot;https://johnzon.apache.org/#aJohnzonIgnore&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://johnzon.apache.org/#aJohnzonIgnore&lt;/a&gt;&#160;it should be included for Y &amp;gt;= X.&lt;/p&gt;

&lt;p&gt;Is the documentation wrong or the implementation?&lt;/p&gt;

&lt;p&gt;Example: &lt;a href=&quot;https://gist.github.com/elexx/ab5dc1f3611913a0d9f409234fbecc84&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gist.github.com/elexx/ab5dc1f3611913a0d9f409234fbecc84&lt;/a&gt;&#160;outputs&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I expected it to be&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{ value=&lt;span class=&quot;code-quote&quot;&gt;&quot;valuevalue&quot;&lt;/span&gt; }&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;To sumarize: with &lt;tt&gt;@JohnzonIgnore(minVersion = 2)&lt;/tt&gt; the outputs are the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
.setVersion(1) ... {&lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;valuevalue&quot;&lt;/span&gt;}
.setVersion(2) ... {}
.setVersion(3) ... {}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13214581">JOHNZON-199</key>
            <summary>JohnzonIgnore#minVersion logic is negated?</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="elexx">Alexander Falb</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Feb 2019 10:59:14 +0000</created>
                <updated>Mon, 11 Feb 2019 06:30:37 +0000</updated>
                            <resolved>Sat, 9 Feb 2019 15:50:58 +0000</resolved>
                                    <version>1.1.10</version>
                    <version>1.1.11</version>
                                    <fixVersion>1.1.12</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16763568" author="romain.manni-bucau" created="Fri, 8 Feb 2019 12:58:49 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elexx&quot; class=&quot;user-hover&quot; rel=&quot;elexx&quot;&gt;elexx&lt;/a&gt; doc is right, is there anything specific different from &lt;a href=&quot;https://github.com/apache/johnzon/blob/17328867451e459bc48436b8a8253aa3f9cbb023/johnzon-mapper/src/test/java/org/apache/johnzon/mapper/MapperVersionTest.java#L28&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/johnzon/blob/17328867451e459bc48436b8a8253aa3f9cbb023/johnzon-mapper/src/test/java/org/apache/johnzon/mapper/MapperVersionTest.java#L28&lt;/a&gt; in your case?&lt;/p&gt;</comment>
                            <comment id="16763687" author="elexx" created="Fri, 8 Feb 2019 15:17:19 +0000"  >&lt;p&gt;No, my sample matches the test. But I think the asserts in the test are wrong. I think the first loop should assert for an empty json-string and the second loop for an json-string with name=&quot;...&quot; in it.&lt;/p&gt;

&lt;p&gt;My understanding of JohnzonIgnore is, it tells the Mapper to ignore the annotated field when marshaling, eg. does not put it into the json-string. The doc for minVersion=3 says &quot;Or to support name for version 3, 4, &#8230; but ignore it for 1 and 2&quot;. So I assumed the json for version 1 and 2 would be an empty object and version 3, 4 have a name=&quot;...&quot; in it?&lt;br/&gt;
This is contrary to the tests you linked. The minVersion in the test is set to 2 and test asserts an empty json-string for version 2, 3 and a name=&quot;...&quot; for version 0, 1, 2.&lt;/p&gt;</comment>
                            <comment id="16763763" author="romain.manni-bucau" created="Fri, 8 Feb 2019 17:10:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elexx&quot; class=&quot;user-hover&quot; rel=&quot;elexx&quot;&gt;elexx&lt;/a&gt; you are right, the test is reversed (it implements a maxVersion logic which is quite useless here). Do you want to send a PR to fix it?&lt;/p&gt;</comment>
                            <comment id="16764130" author="elexx" created="Sat, 9 Feb 2019 12:37:15 +0000"  >&lt;p&gt;Sure. Just sent the PR &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;-&#160;&lt;a href=&quot;https://github.com/apache/johnzon/pull/37&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/johnzon/pull/37&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;First commit is a rework of the unit test. The old test stopped at the first violated assert.&lt;br/&gt;
 The second commit is the actual change.&lt;/p&gt;</comment>
                            <comment id="16764131" author="elexx" created="Sat, 9 Feb 2019 12:44:17 +0000"  >&lt;p&gt;It looks like I broke&#160;the Travis Builds: &lt;a href=&quot;https://travis-ci.com/elexx/johnzon/builds/100327512&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.com/elexx/johnzon/builds/100327512&lt;/a&gt;&#160;&lt;br/&gt;
However I&apos;m not sure how or why they broke?!&lt;/p&gt;</comment>
                            <comment id="16764168" author="romain.manni-bucau" created="Sat, 9 Feb 2019 15:50:48 +0000"  >&lt;p&gt;Don&apos;t worry about travis, since we don&apos;t rely on it we forgot to remove jdk we don&apos;t support anymore, the jdk8 is green so all good, applied! Thanks a lot Alexander. (BTW i like how you rewrite the test with junit parameterized, makes a lot of sense for this one)&lt;/p&gt;</comment>
                            <comment id="16764681" author="elexx" created="Mon, 11 Feb 2019 06:10:10 +0000"  >&lt;p&gt;Hello Romain, I think the Fix Version is wrong, it should be 1.1.12? Also is there a release ETA for 1.1.12?&lt;/p&gt;</comment>
                            <comment id="16764690" author="romain.manni-bucau" created="Mon, 11 Feb 2019 06:30:37 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elexx&quot; class=&quot;user-hover&quot; rel=&quot;elexx&quot;&gt;elexx&lt;/a&gt;, fixed it - the 1.1.11 was not marked as a &quot;release&quot;. 1.1.12 can probably be done next week, send a note on the list but i see no blocker.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi0s94:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>