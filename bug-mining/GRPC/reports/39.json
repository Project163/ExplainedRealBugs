{"url":"https://api.github.com/repos/grpc/grpc/issues/38954","repository_url":"https://api.github.com/repos/grpc/grpc","labels_url":"https://api.github.com/repos/grpc/grpc/issues/38954/labels{/name}","comments_url":"https://api.github.com/repos/grpc/grpc/issues/38954/comments","events_url":"https://api.github.com/repos/grpc/grpc/issues/38954/events","html_url":"https://github.com/grpc/grpc/issues/38954","id":2905199382,"node_id":"I_kwDOAacf2M6tKdMW","number":38954,"title":"[BUG :: Route_Guide C++] JSON Minification Removes Spaces in String Values","user":{"login":"jiangqucheng","id":12996850,"node_id":"MDQ6VXNlcjEyOTk2ODUw","avatar_url":"https://avatars.githubusercontent.com/u/12996850?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangqucheng","html_url":"https://github.com/jiangqucheng","followers_url":"https://api.github.com/users/jiangqucheng/followers","following_url":"https://api.github.com/users/jiangqucheng/following{/other_user}","gists_url":"https://api.github.com/users/jiangqucheng/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangqucheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangqucheng/subscriptions","organizations_url":"https://api.github.com/users/jiangqucheng/orgs","repos_url":"https://api.github.com/users/jiangqucheng/repos","events_url":"https://api.github.com/users/jiangqucheng/events{/privacy}","received_events_url":"https://api.github.com/users/jiangqucheng/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":155504842,"node_id":"MDU6TGFiZWwxNTU1MDQ4NDI=","url":"https://api.github.com/repos/grpc/grpc/labels/kind/bug","name":"kind/bug","color":"93732c","default":false,"description":null},{"id":166332908,"node_id":"MDU6TGFiZWwxNjYzMzI5MDg=","url":"https://api.github.com/repos/grpc/grpc/labels/lang/c++","name":"lang/c++","color":"fad8c7","default":false,"description":null},{"id":360790193,"node_id":"MDU6TGFiZWwzNjA3OTAxOTM=","url":"https://api.github.com/repos/grpc/grpc/labels/priority/P2","name":"priority/P2","color":"dd7172","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"pawbhard","id":13415978,"node_id":"MDQ6VXNlcjEzNDE1OTc4","avatar_url":"https://avatars.githubusercontent.com/u/13415978?v=4","gravatar_id":"","url":"https://api.github.com/users/pawbhard","html_url":"https://github.com/pawbhard","followers_url":"https://api.github.com/users/pawbhard/followers","following_url":"https://api.github.com/users/pawbhard/following{/other_user}","gists_url":"https://api.github.com/users/pawbhard/gists{/gist_id}","starred_url":"https://api.github.com/users/pawbhard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pawbhard/subscriptions","organizations_url":"https://api.github.com/users/pawbhard/orgs","repos_url":"https://api.github.com/users/pawbhard/repos","events_url":"https://api.github.com/users/pawbhard/events{/privacy}","received_events_url":"https://api.github.com/users/pawbhard/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"pawbhard","id":13415978,"node_id":"MDQ6VXNlcjEzNDE1OTc4","avatar_url":"https://avatars.githubusercontent.com/u/13415978?v=4","gravatar_id":"","url":"https://api.github.com/users/pawbhard","html_url":"https://github.com/pawbhard","followers_url":"https://api.github.com/users/pawbhard/followers","following_url":"https://api.github.com/users/pawbhard/following{/other_user}","gists_url":"https://api.github.com/users/pawbhard/gists{/gist_id}","starred_url":"https://api.github.com/users/pawbhard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pawbhard/subscriptions","organizations_url":"https://api.github.com/users/pawbhard/orgs","repos_url":"https://api.github.com/users/pawbhard/repos","events_url":"https://api.github.com/users/pawbhard/events{/privacy}","received_events_url":"https://api.github.com/users/pawbhard/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":0,"created_at":"2025-03-09T04:45:20Z","updated_at":"2025-04-11T01:59:39Z","closed_at":"2025-04-08T04:14:22Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\nPLEASE DO NOT POST A QUESTION HERE.\nThis form is for bug reports and feature requests ONLY!\n\nFor general questions and troubleshooting, please ask/look for answers at StackOverflow, with \"grpc\" tag: https://stackoverflow.com/questions/tagged/grpc\n\nFor questions that specifically need to be answered by gRPC team members, please ask/look for answers at grpc.io mailing list: https://groups.google.com/forum/#!forum/grpc-io\n\nIssues specific to *grpc-java*, *grpc-go*, *grpc-node*, *grpc-dart*, *grpc-web* should be created in the repository they belong to (e.g. https://github.com/grpc/grpc-LANGUAGE/issues/new)\n-->\n\n### What version of gRPC and what language are you using?\ngRPC repo branch v1.71.0; using C++;\n\n### What operating system (Linux, Windows,...) and version?\nLinux\n```log\nlsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu 22.04.5 LTS\nRelease:        22.04\nCodename:       jammy\n```\n\n### What runtime / compiler are you using (e.g. python version or version of gcc)\n```log\n g++ -v\nUsing built-in specs.\nCOLLECT_GCC=g++\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/11/lto-wrapper\nOFFLOAD_TARGET_NAMES=nvptx-none:amdgcn-amdhsa\nOFFLOAD_TARGET_DEFAULT=1\nTarget: x86_64-linux-gnu\nConfigured with: ../src/configure -v --with-pkgversion='Ubuntu 11.4.0-1ubuntu1~22.04' --with-bugurl=file:///usr/share/doc/gcc-11/README.Bugs --enable-languages=c,ada,c++,go,brig,d,fortran,objc,obj-c++,m2 --prefix=/usr --with-gcc-major-version-only --program-suffix=-11 --program-prefix=x86_64-linux-gnu- --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --enable-bootstrap --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-vtable-verify --enable-plugin --enable-default-pie --with-system-zlib --enable-libphobos-checking=release --with-target-system-zlib=auto --enable-objc-gc=auto --enable-multiarch --disable-werror --enable-cet --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-offload-targets=nvptx-none=/build/gcc-11-XeT9lY/gcc-11-11.4.0/debian/tmp-nvptx/usr,amdgcn-amdhsa=/build/gcc-11-XeT9lY/gcc-11-11.4.0/debian/tmp-gcn/usr --without-cuda-driver --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu --with-build-config=bootstrap-lto-lean --enable-link-serialization=2\nThread model: posix\nSupported LTO compression algorithms: zlib zstd\ngcc version 11.4.0 (Ubuntu 11.4.0-1ubuntu1~22.04) \n```\n\n### What did you do?\n\nThe current code is not correct. (Same as `v1.71.0` and current master head)\n\nhttps://github.com/grpc/grpc/blob/5b2a701c84ab179cefc15da0d38d69247a4cb4da/examples/cpp/route_guide/helper.cc#L140-L142\n\nThe JSON minification logic in gRPC removes all whitespace, which unintentionally strips spaces inside string values.  \n#### Steps to Reproduce\n1. Create a JSON file (`test.json`) with valid spaces inside string values:\n   ```json\n   {\n       \"name\": \"John Doe\",\n       \"bio\": \"Loves programming  and AI\"\n   }\n   ```\n2. Load the JSON file and apply the existing minification logic (`std::remove_if(db_.begin(), db_.end(), isspace);`).\n3. Print the processed output.\n\n#### **Minimal Reproduction Code**  \n```cpp\n#include <iostream>\n#include <string>\n#include <algorithm>\n#include <cctype>\n\nint main() {\n    std::string db_ = R\"({\n        \"name\": \"John Doe\",\n        \"bio\": \"Loves programming  and AI\"\n    })\";\n\n    // this line from current grpc/examples/cpp/route_guide/helper.cc\n    db_.erase(std::remove_if(db_.begin(), db_.end(), isspace), db_.end()); \n    \n    std::cout << \"Minified JSON: \" << db_ << std::endl;\n    return 0;\n}\n```\n\n### What did you expect to see? **Expected Output**\n\n```json\n{\"name\":\"John Doe\",\"bio\":\"Loves programming  and AI\"}\n```\n\n### What did you see instead? **Actual Output (Incorrect)**\n\n```json\n{\"name\":\"JohnDoe\",\"bio\":\"LovesprogrammingandAI\"}\n```\nThe spaces inside JSON string values were mistakenly removed.\n\n### Anything else we should know about your project / environment?\n**Already fixed this error with my modification. I have created the pr #38955 .** \n\n\n\n","closed_by":{"login":"copybara-service[bot]","id":56741989,"node_id":"MDM6Qm90NTY3NDE5ODk=","avatar_url":"https://avatars.githubusercontent.com/in/44061?v=4","gravatar_id":"","url":"https://api.github.com/users/copybara-service%5Bbot%5D","html_url":"https://github.com/apps/copybara-service","followers_url":"https://api.github.com/users/copybara-service%5Bbot%5D/followers","following_url":"https://api.github.com/users/copybara-service%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/copybara-service%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/copybara-service%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/copybara-service%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/copybara-service%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/copybara-service%5Bbot%5D/repos","events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/grpc/grpc/issues/38954/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grpc/grpc/issues/38954/timeline","performed_via_github_app":null,"state_reason":"completed"}