{"url":"https://api.github.com/repos/grpc/grpc/issues/35396","repository_url":"https://api.github.com/repos/grpc/grpc","labels_url":"https://api.github.com/repos/grpc/grpc/issues/35396/labels{/name}","comments_url":"https://api.github.com/repos/grpc/grpc/issues/35396/comments","events_url":"https://api.github.com/repos/grpc/grpc/issues/35396/events","html_url":"https://github.com/grpc/grpc/issues/35396","id":2057663301,"node_id":"I_kwDOAacf2M56pXNF","number":35396,"title":"`bundle install` of `grpc-1.60.0-x86_64-linux` reports that it is incompatible with Ruby 3.3.0 during GitHub CI","user":{"login":"jkwuc89","id":1555064,"node_id":"MDQ6VXNlcjE1NTUwNjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1555064?v=4","gravatar_id":"","url":"https://api.github.com/users/jkwuc89","html_url":"https://github.com/jkwuc89","followers_url":"https://api.github.com/users/jkwuc89/followers","following_url":"https://api.github.com/users/jkwuc89/following{/other_user}","gists_url":"https://api.github.com/users/jkwuc89/gists{/gist_id}","starred_url":"https://api.github.com/users/jkwuc89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkwuc89/subscriptions","organizations_url":"https://api.github.com/users/jkwuc89/orgs","repos_url":"https://api.github.com/users/jkwuc89/repos","events_url":"https://api.github.com/users/jkwuc89/events{/privacy}","received_events_url":"https://api.github.com/users/jkwuc89/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":155504842,"node_id":"MDU6TGFiZWwxNTU1MDQ4NDI=","url":"https://api.github.com/repos/grpc/grpc/labels/kind/bug","name":"kind/bug","color":"93732c","default":false,"description":null},{"id":166332946,"node_id":"MDU6TGFiZWwxNjYzMzI5NDY=","url":"https://api.github.com/repos/grpc/grpc/labels/lang/ruby","name":"lang/ruby","color":"fad8c7","default":false,"description":null},{"id":360790193,"node_id":"MDU6TGFiZWwzNjA3OTAxOTM=","url":"https://api.github.com/repos/grpc/grpc/labels/priority/P2","name":"priority/P2","color":"dd7172","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"apolcyn","id":9566254,"node_id":"MDQ6VXNlcjk1NjYyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/9566254?v=4","gravatar_id":"","url":"https://api.github.com/users/apolcyn","html_url":"https://github.com/apolcyn","followers_url":"https://api.github.com/users/apolcyn/followers","following_url":"https://api.github.com/users/apolcyn/following{/other_user}","gists_url":"https://api.github.com/users/apolcyn/gists{/gist_id}","starred_url":"https://api.github.com/users/apolcyn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apolcyn/subscriptions","organizations_url":"https://api.github.com/users/apolcyn/orgs","repos_url":"https://api.github.com/users/apolcyn/repos","events_url":"https://api.github.com/users/apolcyn/events{/privacy}","received_events_url":"https://api.github.com/users/apolcyn/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"apolcyn","id":9566254,"node_id":"MDQ6VXNlcjk1NjYyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/9566254?v=4","gravatar_id":"","url":"https://api.github.com/users/apolcyn","html_url":"https://github.com/apolcyn","followers_url":"https://api.github.com/users/apolcyn/followers","following_url":"https://api.github.com/users/apolcyn/following{/other_user}","gists_url":"https://api.github.com/users/apolcyn/gists{/gist_id}","starred_url":"https://api.github.com/users/apolcyn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apolcyn/subscriptions","organizations_url":"https://api.github.com/users/apolcyn/orgs","repos_url":"https://api.github.com/users/apolcyn/repos","events_url":"https://api.github.com/users/apolcyn/events{/privacy}","received_events_url":"https://api.github.com/users/apolcyn/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":9,"created_at":"2023-12-27T18:25:54Z","updated_at":"2024-01-17T17:37:24Z","closed_at":"2024-01-17T17:37:24Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\nPLEASE DO NOT POST A QUESTION HERE.\r\nThis form is for bug reports and feature requests ONLY!\r\n\r\nFor general questions and troubleshooting, please ask/look for answers at StackOverflow, with \"grpc\" tag: https://stackoverflow.com/questions/tagged/grpc\r\n\r\nFor questions that specifically need to be answered by gRPC team members, please ask/look for answers at grpc.io mailing list: https://groups.google.com/forum/#!forum/grpc-io\r\n\r\nIssues specific to *grpc-java*, *grpc-go*, *grpc-node*, *grpc-dart*, *grpc-web* should be created in the repository they belong to (e.g. https://github.com/grpc/grpc-LANGUAGE/issues/new)\r\n-->\r\n\r\n### What version of gRPC and what language are you using?\r\ngrpc-1.60.0-x86_64-linux, Ruby 3.3.0\r\n\r\n### What operating system (Linux, Windows,...) and version?\r\nubuntu-22.04-x64 running as part of a GitHub CI\r\n\r\n### What runtime / compiler are you using (e.g. python version or version of gcc)\r\nRuby/3.3.0/x64\r\n\r\n### What did you do?\r\nPlease provide either 1) A unit test for reproducing the bug or 2) Specific steps for us to follow to reproduce the bug. If there’s not enough information to debug the problem, gRPC team may close the issue at their discretion. You’re welcome to re-open the issue once you have a reproduction.\r\n\r\nInside Gemfile.lock, I am specifying platform specific versions of grpc as follows:\r\n```\r\n    grpc (1.60.0-arm64-darwin)\r\n      google-protobuf (~> 3.25)\r\n      googleapis-common-protos-types (~> 1.0)\r\n    grpc (1.60.0-x86_64-darwin)\r\n      google-protobuf (~> 3.25)\r\n      googleapis-common-protos-types (~> 1.0)\r\n    grpc (1.60.0-x86_64-linux)\r\n      google-protobuf (~> 3.25)\r\n      googleapis-common-protos-types (~> 1.0)\r\n```\r\nThe GitHub CI is doing the following.\r\n```\r\nModifying PATH\r\n  Entries added to PATH to use selected Ruby:\r\n    /opt/hostedtoolcache/Ruby/3.3.0/x64/bin\r\nDownloading Ruby\r\n  https://github.com/ruby/ruby-builder/releases/download/toolcache/ruby-3.3.0-ubuntu-22.04.tar.gz\r\n  Took   1.16 seconds\r\nExtracting  Ruby\r\n  /usr/bin/tar -xz -C /opt/hostedtoolcache/Ruby/3.3.0 -f /opt/actions-runner/_work/_temp/4ebb1eeb-a07d-4116-940d-65752c05e40a\r\n  Took   0.42 seconds\r\nPrint Ruby version\r\n  /opt/hostedtoolcache/Ruby/3.3.0/x64/bin/ruby --version\r\n  ruby 3.3.0 (2023-12-25 revision 5124f9ac75) [x86_64-linux]\r\n  Took   0.02 seconds\r\nInstalling Bundler\r\n  Using Bundler 2.5.3 from Gemfile.lock BUNDLED WITH 2.5.3\r\n  /opt/hostedtoolcache/Ruby/3.3.0/x64/bin/gem install bundler -v 2.5.3\r\n  Successfully installed bundler-2.5.3\r\n  1 gem installed\r\n  Took   0.50 seconds\r\n> bundle install\r\n/opt/hostedtoolcache/Ruby/3.3.0/x64/bin/bundle config --local path /opt/actions-runner/_work/core/core/server/vendor/bundle\r\n/opt/hostedtoolcache/Ruby/3.3.0/x64/bin/bundle config --local deployment true\r\nCache key: setup-ruby-bundler-cache-v6-ubuntu-22.04-x64-ruby-3.3.0-wd-/opt/actions-runner/_work/core/core/server-with--without--only--Gemfile.lock-3ed467be0a4d28dc9639f90f94df51e94e88650d7ccf9da3ee6db851ce5f73ff\r\nReceived 163577856 of 1033186910 (15.8%), 156.0 MBs/sec\r\nReceived 398458880 of 1033186910 (38.6%), 188.3 MBs/sec\r\nReceived 616562688 of 1033186910 (59.7%), 194.8 MBs/sec\r\nReceived 830472192 of 1033186910 (80.4%), 197.1 MBs/sec\r\nCache Size: ~985 MB (1033186910 B)\r\n/usr/bin/tar -xf /opt/actions-runner/_work/_temp/1d1068ed-8b1f-417c-b241-f533342e3aa1/cache.tzst -P -C /opt/actions-runner/_work/core/core --use-compress-program unzstd\r\nReceived 1033186910 of 1033186910 (100.0%), 196.2 MBs/sec\r\nCache restored successfully\r\nFound cache for key: setup-ruby-bundler-cache-v6-ubuntu-22.04-x64-ruby-3.3.0-wd-/opt/actions-runner/_work/core/core/server-with--without--only--Gemfile.lock-7a2fe5006c2bae6b4c6f2fd44e117ed3fcdf43c393476a6cdcb7fc7bd6795c85\r\n/opt/hostedtoolcache/Ruby/3.3.0/x64/bin/bundle install --jobs 4\r\nFetching gem metadata from https://rubygems.org/.......\r\nFetching gem metadata from [https://enterprise.contribsys.com/..](https://enterprise.contribsys.com/)\r\ngrpc-1.60.0-x86_64-linux requires ruby version < 3.3.dev, >= 2.7, which is\r\nincompatible with the current version, 3.3.0\r\nError: The process '/opt/hostedtoolcache/Ruby/3.3.0/x64/bin/bundle' failed with exit code 5\r\n```\r\n\r\n### What did you expect to see?\r\n`bundle install` should be able to install and use `grpc-1.60.0-x86_64-linux` with the released version of Ruby 3.3.0.\r\n\r\n### What did you see instead?\r\nDuring `bundle install`, the following incompatibility is reported:\r\n```\r\ngrpc-1.60.0-x86_64-linux requires ruby version < 3.3.dev, >= 2.7, which is\r\nincompatible with the current version, 3.3.0\r\n``` \r\n\r\nSee [TROUBLESHOOTING.md](https://github.com/grpc/grpc/blob/master/TROUBLESHOOTING.md) for how to diagnose problems better.\r\n\r\n### Anything else we should know about your project / environment?\r\nThe app in question is running Rails 7.1.2.","closed_by":{"login":"copybara-service[bot]","id":56741989,"node_id":"MDM6Qm90NTY3NDE5ODk=","avatar_url":"https://avatars.githubusercontent.com/in/44061?v=4","gravatar_id":"","url":"https://api.github.com/users/copybara-service%5Bbot%5D","html_url":"https://github.com/apps/copybara-service","followers_url":"https://api.github.com/users/copybara-service%5Bbot%5D/followers","following_url":"https://api.github.com/users/copybara-service%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/copybara-service%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/copybara-service%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/copybara-service%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/copybara-service%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/copybara-service%5Bbot%5D/repos","events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/grpc/grpc/issues/35396/reactions","total_count":6,"+1":6,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grpc/grpc/issues/35396/timeline","performed_via_github_app":null,"state_reason":"completed"}