diff --git a/examples/cpp/route_guide/helper.cc b/examples/cpp/route_guide/helper.cc
index 8b38955e62..943ea09d30 100644
--- a/examples/cpp/route_guide/helper.cc
+++ b/examples/cpp/route_guide/helper.cc
@@ -20,6 +20,7 @@
 #include <cctype>
 #include <fstream>
 #include <iostream>
+#include <regex>
 #include <sstream>
 #include <string>
 #include <vector>
@@ -55,13 +56,11 @@ std::string GetDbFileContent(int argc, char** argv) {
 }
 
 // A simple parser for the json db file. It requires the db file to have the
-// exact form of [{"location": { "latitude": 123, "longitude": 456}, "name":
-// "the name can be empty" }, { ... } ... The spaces will be stripped.
+// exact form of [{"location":{"latitude":123,"longitude":456},"name":
+// "the name can be empty"},{ ... }...
 class Parser {
  public:
   explicit Parser(const std::string& db) : db_(db) {
-    // Remove all spaces.
-    db_.erase(std::remove_if(db_.begin(), db_.end(), isspace), db_.end());
     if (!Match("[")) {
       SetFailedAndReturnFalse();
     }
@@ -134,12 +133,17 @@ class Parser {
   const std::string name_ = "\"name\":";
 };
 
+// Minifies a JSON string by removing all whitespace characters outside of
+// strings.
+std::string MinifyJson(const std::string& json) {
+  std::regex whitespaceOutsideQuotes(R"(\s+(?=(?:(?:[^"]*"){2})*[^"]*$))");
+  // Replace all matches with an empty string
+  return std::regex_replace(json, whitespaceOutsideQuotes, "");
+}
+
 void ParseDb(const std::string& db, std::vector<Feature>* feature_list) {
   feature_list->clear();
-  std::string db_content(db);
-  db_content.erase(
-      std::remove_if(db_content.begin(), db_content.end(), isspace),
-      db_content.end());
+  std::string db_content(MinifyJson(db));
 
   Parser parser(db_content);
   Feature feature;
