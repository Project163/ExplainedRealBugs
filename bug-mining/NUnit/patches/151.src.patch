diff --git a/src/NUnitFramework/framework/Internal/Execution/EventListenerTextWriter.cs b/src/NUnitFramework/framework/Internal/Execution/EventListenerTextWriter.cs
index b4186cf92..cbe155a06 100644
--- a/src/NUnitFramework/framework/Internal/Execution/EventListenerTextWriter.cs
+++ b/src/NUnitFramework/framework/Internal/Execution/EventListenerTextWriter.cs
@@ -68,14 +68,8 @@ namespace NUnit.Framework.Internal.Execution
             if (context == null || context.Listener == null)
                 return false;
 
-            string testName = null;
-            string testId = null;
-            if (context.CurrentTest != null)
-            {
-                testName = context.CurrentTest.FullName;
-                testId = context.CurrentTest.Id;
-            }
-            context.Listener.TestOutput(new TestOutput(text, _streamName, testId, testName));
+            var test = context.CurrentTest ?? null;
+            context.Listener.TestOutput(new TestOutput(text, _streamName, test?.Id, test?.FullName));
             return true;
         }
 
diff --git a/src/NUnitFramework/nunitlite.tests/TextUITests.cs b/src/NUnitFramework/nunitlite.tests/TextUITests.cs
index 8edf74551..2544153d6 100644
--- a/src/NUnitFramework/nunitlite.tests/TextUITests.cs
+++ b/src/NUnitFramework/nunitlite.tests/TextUITests.cs
@@ -538,29 +538,6 @@ namespace NUnitLite.Tests
 
             Assert.That(Report, Is.EqualTo(expected));
         }
-
-        [TestCase("text", "stream", "testId", "testName")]
-        [TestCase("text", "stream", null, "testName")]
-        [TestCase("text", "stream", "testId", null)]
-        public void TestOutputToXml_IncludeAttributesInProperFormatting(string text, string stream, string testId, string testName)
-        {
-            var testOutput = new TestOutput(text, stream, testId, testName);
-            var expected = new StringBuilder();
-            expected.AppendFormat("<test-output stream=\"{0}\"", stream);
-
-            if (testId != null)
-            {
-                expected.AppendFormat(" testid=\"{0}\"", testId);
-            }
-
-            if (testName != null)
-            {
-                expected.AppendFormat(" testname=\"{0}\"", testName);
-            }
-
-            expected.AppendFormat("><![CDATA[{0}]]></test-output>", text);
-            Assert.That(testOutput.ToXml(), Is.EqualTo(expected.ToString()));
-        }
         #region Private Properties and Methods
 
         private void MyFakeMethod() { }
diff --git a/src/NUnitFramework/tests/Interfaces/TestOutpuTests.cs b/src/NUnitFramework/tests/Interfaces/TestOutpuTests.cs
new file mode 100644
index 000000000..781dde85a
--- /dev/null
+++ b/src/NUnitFramework/tests/Interfaces/TestOutpuTests.cs
@@ -0,0 +1,55 @@
+ï»¿// ***********************************************************************
+// Copyright (c) 2017 Charlie Poole, Rob Prouse
+//
+// Permission is hereby granted, free of charge, to any person obtaining
+// a copy of this software and associated documentation files (the
+// "Software"), to deal in the Software without restriction, including
+// without limitation the rights to use, copy, modify, merge, publish,
+// distribute, sublicense, and/or sell copies of the Software, and to
+// permit persons to whom the Software is furnished to do so, subject to
+// the following conditions:
+//
+// The above copyright notice and this permission notice shall be
+// included in all copies or substantial portions of the Software.
+//
+// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
+// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
+// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
+// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
+// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+// ***********************************************************************
+
+using NUnit.Framework.Interfaces;
+using System.Text;
+
+namespace NUnit.Framework.Tests.Interfaces
+{
+    [TestFixture]
+    class TestOutpuTests
+    {
+        [TestCase("text", "stream", "testId", "testName")]
+        [TestCase("text", "stream", null, "testName")]
+        [TestCase("text", "stream", "testId", null)]
+        public void ToXml_IncludeAttributesInProperFormatting(string text, string stream, string testId, string testName)
+        {
+            var testOutput = new TestOutput(text, stream, testId, testName);
+            var expected = new StringBuilder();
+            expected.AppendFormat("<test-output stream=\"{0}\"", stream);
+
+            if (testId != null)
+            {
+                expected.AppendFormat(" testid=\"{0}\"", testId);
+            }
+
+            if (testName != null)
+            {
+                expected.AppendFormat(" testname=\"{0}\"", testName);
+            }
+
+            expected.AppendFormat("><![CDATA[{0}]]></test-output>", text);
+            Assert.That(testOutput.ToXml(), Is.EqualTo(expected.ToString()));
+        }
+    }
+}
diff --git a/src/NUnitFramework/tests/nunit.framework.tests-4.5.csproj b/src/NUnitFramework/tests/nunit.framework.tests-4.5.csproj
index e5d5a071a..a254d36e5 100644
--- a/src/NUnitFramework/tests/nunit.framework.tests-4.5.csproj
+++ b/src/NUnitFramework/tests/nunit.framework.tests-4.5.csproj
@@ -207,6 +207,7 @@
     <Compile Include="Constraints\ToStringTests.cs" />
     <Compile Include="Constraints\UniqueItemsConstraintTests.cs" />
     <Compile Include="Constraints\XmlSerializableTest.cs" />
+    <Compile Include="Interfaces\TestOutpuTests.cs" />
     <Compile Include="Internal\AssemblyHelperTests.cs" />
     <Compile Include="Internal\AsyncSetupTeardownTests.cs" />
     <Compile Include="Internal\AsyncTestMethodTests.cs" />
