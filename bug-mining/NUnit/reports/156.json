{"url":"https://api.github.com/repos/nunit/nunit/issues/1382","repository_url":"https://api.github.com/repos/nunit/nunit","labels_url":"https://api.github.com/repos/nunit/nunit/issues/1382/labels{/name}","comments_url":"https://api.github.com/repos/nunit/nunit/issues/1382/comments","events_url":"https://api.github.com/repos/nunit/nunit/issues/1382/events","html_url":"https://github.com/nunit/nunit/issues/1382","id":144145167,"node_id":"MDU6SXNzdWUxNDQxNDUxNjc=","number":1382,"title":"Use array argument contents in name of parameterized tests rather than just array type.","user":{"login":"yaakov-h","id":426009,"node_id":"MDQ6VXNlcjQyNjAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/426009?v=4","gravatar_id":"","url":"https://api.github.com/users/yaakov-h","html_url":"https://github.com/yaakov-h","followers_url":"https://api.github.com/users/yaakov-h/followers","following_url":"https://api.github.com/users/yaakov-h/following{/other_user}","gists_url":"https://api.github.com/users/yaakov-h/gists{/gist_id}","starred_url":"https://api.github.com/users/yaakov-h/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaakov-h/subscriptions","organizations_url":"https://api.github.com/users/yaakov-h/orgs","repos_url":"https://api.github.com/users/yaakov-h/repos","events_url":"https://api.github.com/users/yaakov-h/events{/privacy}","received_events_url":"https://api.github.com/users/yaakov-h/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":61608516,"node_id":"MDU6TGFiZWw2MTYwODUxNg==","url":"https://api.github.com/repos/nunit/nunit/labels/is:enhancement","name":"is:enhancement","color":"84b6eb","default":false,"description":null},{"id":80842138,"node_id":"MDU6TGFiZWw4MDg0MjEzOA==","url":"https://api.github.com/repos/nunit/nunit/labels/pri:low","name":"pri:low","color":"fef2c0","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/nunit/nunit/milestones/34","html_url":"https://github.com/nunit/nunit/milestone/34","labels_url":"https://api.github.com/repos/nunit/nunit/milestones/34/labels","id":2905229,"node_id":"MDk6TWlsZXN0b25lMjkwNTIyOQ==","number":34,"title":"3.10","description":"Next release of the NUnit framework","creator":{"login":"rprouse","id":493828,"node_id":"MDQ6VXNlcjQ5MzgyOA==","avatar_url":"https://avatars.githubusercontent.com/u/493828?v=4","gravatar_id":"","url":"https://api.github.com/users/rprouse","html_url":"https://github.com/rprouse","followers_url":"https://api.github.com/users/rprouse/followers","following_url":"https://api.github.com/users/rprouse/following{/other_user}","gists_url":"https://api.github.com/users/rprouse/gists{/gist_id}","starred_url":"https://api.github.com/users/rprouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rprouse/subscriptions","organizations_url":"https://api.github.com/users/rprouse/orgs","repos_url":"https://api.github.com/users/rprouse/repos","events_url":"https://api.github.com/users/rprouse/events{/privacy}","received_events_url":"https://api.github.com/users/rprouse/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":1,"closed_issues":57,"state":"closed","created_at":"2017-11-11T12:54:25Z","updated_at":"2018-03-13T14:45:24Z","due_on":"2018-02-28T08:00:00Z","closed_at":"2018-03-13T00:36:21Z"},"comments":33,"created_at":"2016-03-29T03:25:02Z","updated_at":"2018-02-20T12:41:36Z","closed_at":"2018-02-20T12:41:15Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"TestCase and TestCaseSource make it too easy to create tests with duplicate names.\n\nCase 1: Arrays\n\nArrays are not formatted further, only their type name becomes part of the test name by default. For example, given the following test fixture:\n\n```\nusing NUnit.Framework;\n\nnamespace NUnitDuplicateTests\n{\n    public class DuplicateTestFixture\n    {\n        [TestCase((object)new[] { \"John\", \"Smith\" })]\n        [TestCase((object)new[] { \"Emperor\", \"Palpatine\" })]\n        [TestCase((object)new[] { \"Groot\" })]\n        public void EverybodyHasAtLeastTwoNames(string[] nameParts)\n        {\n            Assert.That(nameParts, Has.Length.GreaterThanOrEqualTo(2));\n        }\n    }\n}\n```\n\nOnly one test is discovered: `NUnitDuplicateTests.DuplicateTestFixture.EverybodyHasAtLeastTwoNames(System.String[])`.\n\nOnly one test shows up in the Visual Studio test explorer.\n\nOnly one unique test shows up with `nunit3-console --explore`, but is printed 3 times.\n\nThis creates issues for applications that use the Explore API, if they wish to track each test individually for various purposes.\n\nI would expect the test name to be something along the lines of `NUnitDuplicateTests.DuplicateTestFixture.EverybodyHasAtLeastTwoNames([\"Emperor\", \"Palpatine\"])`.\n\nCase 2: Test Names\n\nI would logically expect a test name from TestCaseAttribute or TestCaseData to be local to the method that declares the test. It is often convenient to use the same test data for multiple test methods, e.g.\n\n```\nusing System.Collections;\nusing NUnit.Framework;\n\nnamespace NUnitDuplicateTests\n{\n    public class DuplicateTestFixture\n    {\n        [TestCaseSource(nameof(Names))]\n        public void EverybodyHasAtLeastTwoNames(string[] nameParts)\n        {\n            Assert.That(nameParts, Has.Length.GreaterThanOrEqualTo(2));\n        }\n\n        [TestCaseSource(nameof(Names))]\n        public void EverybodyIsOnTheImperialPayroll(string[] nameParts)\n        {\n            // TODO: Talk to the Payroll division on Coruscant.\n        }\n\n        public static IEnumerable Names\n        {\n            get\n            {\n                yield return new TestCaseData(new[] { \"Emperor\", \"Palpatine\" }).SetName(\"Our grand Emperor\");\n                yield return new TestCaseData(new[] { \"Darth\", \"Vader\" }).SetName(\"Luke's Dad\");\n            }\n        }\n    }\n}\n```\n\nAlthough this fixture declares four tests, there are only two unique test names - `NUnitDuplicateTests.DuplicateTestFixture.Our grand Emperor` and `NUnitDuplicateTests.DuplicateTestFixture.Luke's Dad`.\n\nI would expect there to be four, somewhat resembling the following:\n1. `NUnitDuplicateTests.DuplicateTestFixture.EverybodyHasAtLeastTwoNames.\"Our grand Emperor\"`\n2. `NUnitDuplicateTests.DuplicateTestFixture.EverybodyHasAtLeastTwoNames.\"Luke's Dad\"`\n3. `NUnitDuplicateTests.DuplicateTestFixture.EverybodyIsOnTheImperialPayroll.\"Our grand Emperor\"`\n4. `NUnitDuplicateTests.DuplicateTestFixture.EverybodyIsOnTheImperialPayroll.\"Luke's Dad\"`\n\nCase 3: String truncation\n\nString parameters are truncated to 40 characters, which makes it difficult to use long strings (such as URLs) in test cases. e.g.:\n\n```\nusing NUnit.Framework;\n\nnamespace NUnitDuplicateTests\n{\n    public class DuplicateTestFixture\n    {\n        [TestCase(\"The Imperial Death Star is a collossal waste of money. The Empire could better use those funds on supplies and soldiers.\")]\n        [TestCase(\"The Imperial Death Star is a collossal monument to the power of the Empire.\")]\n        public void AllOpinionsAreValid(string opinion)\n        {\n            Assert.That(opinion, Is.Not.Null, \"Not having an opinion is not in itself an opinion.\");\n        }\n    }\n}\n```\n\nThis fixture only has one unique test name, `NUnitDuplicateTests.DuplicateTestFixture.AllOpinionsAreValid(\"The Imperial Death Star is a collossa...\")`.\n\nFrom this, I see three resolutions:\n1. Can test names be made smarter by introspecting arrays?\n2. Can explicit test names be made local to their method, not local to their fixture?\n3. Can strings be not truncated, or the truncation limit be increased well beyond 40 characters?\n","closed_by":{"login":"mikkelbu","id":1007631,"node_id":"MDQ6VXNlcjEwMDc2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/1007631?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkelbu","html_url":"https://github.com/mikkelbu","followers_url":"https://api.github.com/users/mikkelbu/followers","following_url":"https://api.github.com/users/mikkelbu/following{/other_user}","gists_url":"https://api.github.com/users/mikkelbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkelbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkelbu/subscriptions","organizations_url":"https://api.github.com/users/mikkelbu/orgs","repos_url":"https://api.github.com/users/mikkelbu/repos","events_url":"https://api.github.com/users/mikkelbu/events{/privacy}","received_events_url":"https://api.github.com/users/mikkelbu/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/nunit/nunit/issues/1382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/nunit/nunit/issues/1382/timeline","performed_via_github_app":null,"state_reason":"completed"}