[{"url":"https://api.github.com/repos/nunit/nunit/issues/comments/150040225","html_url":"https://github.com/nunit/nunit/issues/916#issuecomment-150040225","issue_url":"https://api.github.com/repos/nunit/nunit/issues/916","id":150040225,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MDA0MDIyNQ==","user":{"login":"CharliePoole","id":2678661,"node_id":"MDQ6VXNlcjI2Nzg2NjE=","avatar_url":"https://avatars.githubusercontent.com/u/2678661?v=4","gravatar_id":"","url":"https://api.github.com/users/CharliePoole","html_url":"https://github.com/CharliePoole","followers_url":"https://api.github.com/users/CharliePoole/followers","following_url":"https://api.github.com/users/CharliePoole/following{/other_user}","gists_url":"https://api.github.com/users/CharliePoole/gists{/gist_id}","starred_url":"https://api.github.com/users/CharliePoole/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CharliePoole/subscriptions","organizations_url":"https://api.github.com/users/CharliePoole/orgs","repos_url":"https://api.github.com/users/CharliePoole/repos","events_url":"https://api.github.com/users/CharliePoole/events{/privacy}","received_events_url":"https://api.github.com/users/CharliePoole/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-10-21T22:16:04Z","updated_at":"2015-10-21T22:16:04Z","body":"Good point. It mattered less when we only ran one agent at a time. With parallel agents, we should simply report the error and continue.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/nunit/nunit/issues/comments/150040225/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"CharliePoole","id":2678661,"node_id":"MDQ6VXNlcjI2Nzg2NjE=","avatar_url":"https://avatars.githubusercontent.com/u/2678661?v=4","gravatar_id":"","url":"https://api.github.com/users/CharliePoole","html_url":"https://github.com/CharliePoole","followers_url":"https://api.github.com/users/CharliePoole/followers","following_url":"https://api.github.com/users/CharliePoole/following{/other_user}","gists_url":"https://api.github.com/users/CharliePoole/gists{/gist_id}","starred_url":"https://api.github.com/users/CharliePoole/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CharliePoole/subscriptions","organizations_url":"https://api.github.com/users/CharliePoole/orgs","repos_url":"https://api.github.com/users/CharliePoole/repos","events_url":"https://api.github.com/users/CharliePoole/events{/privacy}","received_events_url":"https://api.github.com/users/CharliePoole/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":442056711,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ0MjA1NjcxMQ==","url":"https://api.github.com/repos/nunit/nunit/issues/events/442056711","actor":{"login":"CharliePoole","id":2678661,"node_id":"MDQ6VXNlcjI2Nzg2NjE=","avatar_url":"https://avatars.githubusercontent.com/u/2678661?v=4","gravatar_id":"","url":"https://api.github.com/users/CharliePoole","html_url":"https://github.com/CharliePoole","followers_url":"https://api.github.com/users/CharliePoole/followers","following_url":"https://api.github.com/users/CharliePoole/following{/other_user}","gists_url":"https://api.github.com/users/CharliePoole/gists{/gist_id}","starred_url":"https://api.github.com/users/CharliePoole/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CharliePoole/subscriptions","organizations_url":"https://api.github.com/users/CharliePoole/orgs","repos_url":"https://api.github.com/users/CharliePoole/repos","events_url":"https://api.github.com/users/CharliePoole/events{/privacy}","received_events_url":"https://api.github.com/users/CharliePoole/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2015-10-21T22:16:16Z","label":{"name":"is:bug","color":"fc2929"},"performed_via_github_app":null},{"id":442056967,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ0MjA1Njk2Nw==","url":"https://api.github.com/repos/nunit/nunit/issues/events/442056967","actor":{"login":"CharliePoole","id":2678661,"node_id":"MDQ6VXNlcjI2Nzg2NjE=","avatar_url":"https://avatars.githubusercontent.com/u/2678661?v=4","gravatar_id":"","url":"https://api.github.com/users/CharliePoole","html_url":"https://github.com/CharliePoole","followers_url":"https://api.github.com/users/CharliePoole/followers","following_url":"https://api.github.com/users/CharliePoole/following{/other_user}","gists_url":"https://api.github.com/users/CharliePoole/gists{/gist_id}","starred_url":"https://api.github.com/users/CharliePoole/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CharliePoole/subscriptions","organizations_url":"https://api.github.com/users/CharliePoole/orgs","repos_url":"https://api.github.com/users/CharliePoole/repos","events_url":"https://api.github.com/users/CharliePoole/events{/privacy}","received_events_url":"https://api.github.com/users/CharliePoole/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2015-10-21T22:16:32Z","label":{"name":"pri:normal","color":"0052cc"},"performed_via_github_app":null},{"id":442057035,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDQ0MjA1NzAzNQ==","url":"https://api.github.com/repos/nunit/nunit/issues/events/442057035","actor":{"login":"CharliePoole","id":2678661,"node_id":"MDQ6VXNlcjI2Nzg2NjE=","avatar_url":"https://avatars.githubusercontent.com/u/2678661?v=4","gravatar_id":"","url":"https://api.github.com/users/CharliePoole","html_url":"https://github.com/CharliePoole","followers_url":"https://api.github.com/users/CharliePoole/followers","following_url":"https://api.github.com/users/CharliePoole/following{/other_user}","gists_url":"https://api.github.com/users/CharliePoole/gists{/gist_id}","starred_url":"https://api.github.com/users/CharliePoole/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CharliePoole/subscriptions","organizations_url":"https://api.github.com/users/CharliePoole/orgs","repos_url":"https://api.github.com/users/CharliePoole/repos","events_url":"https://api.github.com/users/CharliePoole/events{/privacy}","received_events_url":"https://api.github.com/users/CharliePoole/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2015-10-21T22:16:38Z","milestone":{"title":"3.0RC"},"performed_via_github_app":null},{"actor":{"login":"MaceWindu","id":1099238,"node_id":"MDQ6VXNlcjEwOTkyMzg=","avatar_url":"https://avatars.githubusercontent.com/u/1099238?v=4","gravatar_id":"","url":"https://api.github.com/users/MaceWindu","html_url":"https://github.com/MaceWindu","followers_url":"https://api.github.com/users/MaceWindu/followers","following_url":"https://api.github.com/users/MaceWindu/following{/other_user}","gists_url":"https://api.github.com/users/MaceWindu/gists{/gist_id}","starred_url":"https://api.github.com/users/MaceWindu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaceWindu/subscriptions","organizations_url":"https://api.github.com/users/MaceWindu/orgs","repos_url":"https://api.github.com/users/MaceWindu/repos","events_url":"https://api.github.com/users/MaceWindu/events{/privacy}","received_events_url":"https://api.github.com/users/MaceWindu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-10-21T22:18:59Z","updated_at":"2015-10-21T22:18:59Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/nunit/nunit/issues/917","repository_url":"https://api.github.com/repos/nunit/nunit","labels_url":"https://api.github.com/repos/nunit/nunit/issues/917/labels{/name}","comments_url":"https://api.github.com/repos/nunit/nunit/issues/917/comments","events_url":"https://api.github.com/repos/nunit/nunit/issues/917/events","html_url":"https://github.com/nunit/nunit/issues/917","id":112690915,"node_id":"MDU6SXNzdWUxMTI2OTA5MTU=","number":917,"title":"Assert.IsNotNull(null) in TestCaseSource kills agent in --process=Multiple mode with at least two test assemblies","user":{"login":"MaceWindu","id":1099238,"node_id":"MDQ6VXNlcjEwOTkyMzg=","avatar_url":"https://avatars.githubusercontent.com/u/1099238?v=4","gravatar_id":"","url":"https://api.github.com/users/MaceWindu","html_url":"https://github.com/MaceWindu","followers_url":"https://api.github.com/users/MaceWindu/followers","following_url":"https://api.github.com/users/MaceWindu/following{/other_user}","gists_url":"https://api.github.com/users/MaceWindu/gists{/gist_id}","starred_url":"https://api.github.com/users/MaceWindu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaceWindu/subscriptions","organizations_url":"https://api.github.com/users/MaceWindu/orgs","repos_url":"https://api.github.com/users/MaceWindu/repos","events_url":"https://api.github.com/users/MaceWindu/events{/privacy}","received_events_url":"https://api.github.com/users/MaceWindu/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":61608517,"node_id":"MDU6TGFiZWw2MTYwODUxNw==","url":"https://api.github.com/repos/nunit/nunit/labels/closed:notabug","name":"closed:notabug","color":"cccccc","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/nunit/nunit/milestones/28","html_url":"https://github.com/nunit/nunit/milestone/28","labels_url":"https://api.github.com/repos/nunit/nunit/milestones/28/labels","id":2241621,"node_id":"MDk6TWlsZXN0b25lMjI0MTYyMQ==","number":28,"title":"Closed Without Action","description":"This milestone contains closed issues where no action was taken. This includes questions, issues that could not be reproduced, rejected ideas, invalid issues, etc.","creator":{"login":"rprouse","id":493828,"node_id":"MDQ6VXNlcjQ5MzgyOA==","avatar_url":"https://avatars.githubusercontent.com/u/493828?v=4","gravatar_id":"","url":"https://api.github.com/users/rprouse","html_url":"https://github.com/rprouse","followers_url":"https://api.github.com/users/rprouse/followers","following_url":"https://api.github.com/users/rprouse/following{/other_user}","gists_url":"https://api.github.com/users/rprouse/gists{/gist_id}","starred_url":"https://api.github.com/users/rprouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rprouse/subscriptions","organizations_url":"https://api.github.com/users/rprouse/orgs","repos_url":"https://api.github.com/users/rprouse/repos","events_url":"https://api.github.com/users/rprouse/events{/privacy}","received_events_url":"https://api.github.com/users/rprouse/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":1,"closed_issues":1379,"state":"open","created_at":"2017-01-10T18:37:58Z","updated_at":"2025-10-16T11:09:52Z","due_on":"2099-01-01T08:00:00Z","closed_at":null},"comments":6,"created_at":"2015-10-21T22:18:59Z","updated_at":"2017-01-10T18:55:36Z","closed_at":"2015-10-27T20:03:01Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":13692183,"node_id":"MDEwOlJlcG9zaXRvcnkxMzY5MjE4Mw==","name":"nunit","full_name":"nunit/nunit","private":false,"owner":{"login":"nunit","id":2678858,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI2Nzg4NTg=","avatar_url":"https://avatars.githubusercontent.com/u/2678858?v=4","gravatar_id":"","url":"https://api.github.com/users/nunit","html_url":"https://github.com/nunit","followers_url":"https://api.github.com/users/nunit/followers","following_url":"https://api.github.com/users/nunit/following{/other_user}","gists_url":"https://api.github.com/users/nunit/gists{/gist_id}","starred_url":"https://api.github.com/users/nunit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nunit/subscriptions","organizations_url":"https://api.github.com/users/nunit/orgs","repos_url":"https://api.github.com/users/nunit/repos","events_url":"https://api.github.com/users/nunit/events{/privacy}","received_events_url":"https://api.github.com/users/nunit/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/nunit/nunit","description":"NUnit Framework","fork":false,"url":"https://api.github.com/repos/nunit/nunit","forks_url":"https://api.github.com/repos/nunit/nunit/forks","keys_url":"https://api.github.com/repos/nunit/nunit/keys{/key_id}","collaborators_url":"https://api.github.com/repos/nunit/nunit/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/nunit/nunit/teams","hooks_url":"https://api.github.com/repos/nunit/nunit/hooks","issue_events_url":"https://api.github.com/repos/nunit/nunit/issues/events{/number}","events_url":"https://api.github.com/repos/nunit/nunit/events","assignees_url":"https://api.github.com/repos/nunit/nunit/assignees{/user}","branches_url":"https://api.github.com/repos/nunit/nunit/branches{/branch}","tags_url":"https://api.github.com/repos/nunit/nunit/tags","blobs_url":"https://api.github.com/repos/nunit/nunit/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/nunit/nunit/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/nunit/nunit/git/refs{/sha}","trees_url":"https://api.github.com/repos/nunit/nunit/git/trees{/sha}","statuses_url":"https://api.github.com/repos/nunit/nunit/statuses/{sha}","languages_url":"https://api.github.com/repos/nunit/nunit/languages","stargazers_url":"https://api.github.com/repos/nunit/nunit/stargazers","contributors_url":"https://api.github.com/repos/nunit/nunit/contributors","subscribers_url":"https://api.github.com/repos/nunit/nunit/subscribers","subscription_url":"https://api.github.com/repos/nunit/nunit/subscription","commits_url":"https://api.github.com/repos/nunit/nunit/commits{/sha}","git_commits_url":"https://api.github.com/repos/nunit/nunit/git/commits{/sha}","comments_url":"https://api.github.com/repos/nunit/nunit/comments{/number}","issue_comment_url":"https://api.github.com/repos/nunit/nunit/issues/comments{/number}","contents_url":"https://api.github.com/repos/nunit/nunit/contents/{+path}","compare_url":"https://api.github.com/repos/nunit/nunit/compare/{base}...{head}","merges_url":"https://api.github.com/repos/nunit/nunit/merges","archive_url":"https://api.github.com/repos/nunit/nunit/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/nunit/nunit/downloads","issues_url":"https://api.github.com/repos/nunit/nunit/issues{/number}","pulls_url":"https://api.github.com/repos/nunit/nunit/pulls{/number}","milestones_url":"https://api.github.com/repos/nunit/nunit/milestones{/number}","notifications_url":"https://api.github.com/repos/nunit/nunit/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/nunit/nunit/labels{/name}","releases_url":"https://api.github.com/repos/nunit/nunit/releases{/id}","deployments_url":"https://api.github.com/repos/nunit/nunit/deployments","created_at":"2013-10-18T23:43:29Z","updated_at":"2025-11-07T08:47:47Z","pushed_at":"2025-10-16T10:43:19Z","git_url":"git://github.com/nunit/nunit.git","ssh_url":"git@github.com:nunit/nunit.git","clone_url":"https://github.com/nunit/nunit.git","svn_url":"https://github.com/nunit/nunit","homepage":"https://nunit.org/","size":40220,"stargazers_count":2592,"watchers_count":2592,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":757,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":290,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c-sharp","dotnet","hacktoberfest","nunit","nunit-framework","tdd","test-driven-development","test-framework","testing"],"visibility":"public","forks":757,"open_issues":290,"watchers":2592,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Preconditions:\n- console runner called for 2+ assemblies with --process=Multiple switch (process=Separate or only one assembly works perfectly)\n- one of assemblies generate failure using Assert.IsNotNull (maybe some other asserts, but at least not Assert.Fail). E.g. using this code:\n\n```\nusing NUnit.Framework;\n\npublic class Test\n{\n    private static object[] _fail = new object[]\n    {\n        FailSource\n    };\n\n    public static byte[] FailSource\n    {\n        get\n        {\n            Assert.IsNotNull(null);\n            return null;\n        }\n    }\n\n    [Test, TestCaseSource(\"_fail\")]\n    public void TestMethod(byte[] bytes)\n    {\n    }\n}\n```\n\nResults:\nafter all tests executed, agent for assembly with code above crashes causing runner to crash (see #916)\n\nCode above is just a very simplified version of real code that loads resorce from test assembly and assert loaded blob to be not empty. I plan to create another issue for that, when I will have more data, because resource load works when tests started in different configuration.\n","reactions":{"url":"https://api.github.com/repos/nunit/nunit/issues/917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/nunit/nunit/issues/917/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":446753931,"node_id":"MDEzOkFzc2lnbmVkRXZlbnQ0NDY3NTM5MzE=","url":"https://api.github.com/repos/nunit/nunit/issues/events/446753931","actor":{"login":"rprouse","id":493828,"node_id":"MDQ6VXNlcjQ5MzgyOA==","avatar_url":"https://avatars.githubusercontent.com/u/493828?v=4","gravatar_id":"","url":"https://api.github.com/users/rprouse","html_url":"https://github.com/rprouse","followers_url":"https://api.github.com/users/rprouse/followers","following_url":"https://api.github.com/users/rprouse/following{/other_user}","gists_url":"https://api.github.com/users/rprouse/gists{/gist_id}","starred_url":"https://api.github.com/users/rprouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rprouse/subscriptions","organizations_url":"https://api.github.com/users/rprouse/orgs","repos_url":"https://api.github.com/users/rprouse/repos","events_url":"https://api.github.com/users/rprouse/events{/privacy}","received_events_url":"https://api.github.com/users/rprouse/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2015-10-27T13:19:08Z","assignee":{"login":"rprouse","id":493828,"node_id":"MDQ6VXNlcjQ5MzgyOA==","avatar_url":"https://avatars.githubusercontent.com/u/493828?v=4","gravatar_id":"","url":"https://api.github.com/users/rprouse","html_url":"https://github.com/rprouse","followers_url":"https://api.github.com/users/rprouse/followers","following_url":"https://api.github.com/users/rprouse/following{/other_user}","gists_url":"https://api.github.com/users/rprouse/gists{/gist_id}","starred_url":"https://api.github.com/users/rprouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rprouse/subscriptions","organizations_url":"https://api.github.com/users/rprouse/orgs","repos_url":"https://api.github.com/users/rprouse/repos","events_url":"https://api.github.com/users/rprouse/events{/privacy}","received_events_url":"https://api.github.com/users/rprouse/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":446754028,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ0Njc1NDAyOA==","url":"https://api.github.com/repos/nunit/nunit/issues/events/446754028","actor":{"login":"rprouse","id":493828,"node_id":"MDQ6VXNlcjQ5MzgyOA==","avatar_url":"https://avatars.githubusercontent.com/u/493828?v=4","gravatar_id":"","url":"https://api.github.com/users/rprouse","html_url":"https://github.com/rprouse","followers_url":"https://api.github.com/users/rprouse/followers","following_url":"https://api.github.com/users/rprouse/following{/other_user}","gists_url":"https://api.github.com/users/rprouse/gists{/gist_id}","starred_url":"https://api.github.com/users/rprouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rprouse/subscriptions","organizations_url":"https://api.github.com/users/rprouse/orgs","repos_url":"https://api.github.com/users/rprouse/repos","events_url":"https://api.github.com/users/rprouse/events{/privacy}","received_events_url":"https://api.github.com/users/rprouse/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2015-10-27T13:19:15Z","label":{"name":"status:started","color":"009800"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/nunit/nunit/issues/comments/151505252","html_url":"https://github.com/nunit/nunit/issues/916#issuecomment-151505252","issue_url":"https://api.github.com/repos/nunit/nunit/issues/916","id":151505252,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MTUwNTI1Mg==","user":{"login":"rprouse","id":493828,"node_id":"MDQ6VXNlcjQ5MzgyOA==","avatar_url":"https://avatars.githubusercontent.com/u/493828?v=4","gravatar_id":"","url":"https://api.github.com/users/rprouse","html_url":"https://github.com/rprouse","followers_url":"https://api.github.com/users/rprouse/followers","following_url":"https://api.github.com/users/rprouse/following{/other_user}","gists_url":"https://api.github.com/users/rprouse/gists{/gist_id}","starred_url":"https://api.github.com/users/rprouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rprouse/subscriptions","organizations_url":"https://api.github.com/users/rprouse/orgs","repos_url":"https://api.github.com/users/rprouse/repos","events_url":"https://api.github.com/users/rprouse/events{/privacy}","received_events_url":"https://api.github.com/users/rprouse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-10-27T14:02:39Z","updated_at":"2015-10-27T14:02:39Z","body":"@MaceWindu, what version of NUnit are you using? I created a test project using the example code you provided in #917 and I get the proper TypeInitializationException for the test and both assemblies run with the current 3.0 codebase. I am thinking it might be fixed.\n\nI am running with this command line, CrashingNunitTest.dll contains your code from #917. Do you see anything I am doing differently reproducing?\n\n```\n.\\bin\\Debug\\nunit-console.exe --process=Multiple .\\bin\\Debug\\net-4.5\\nunit.framework.tests.dll C:\\src\\spikes\\CrashingNunitTest\\bin\\Debug\\CrashingNunitTest.dll\n```\n\nAll of the tests run and I get one error,\n\n```\n1) SetUp Error : Test\nSystem.TypeInitializationException : The type initializer for 'Test' threw an exception.\n  ----> NUnit.Framework.AssertionException :   Expected: not null\n  But was:  null\n   at Test..ctor()\n--AssertionException\n   at NUnit.Framework.Assert.That[TActual](TActual actual, IResolveConstraint expression, String message, Object[] args) in C:\\src\\github\\nunit\\src\\NUnitFramework\\framework\\Assert.That.cs:line 186\n   at NUnit.Framework.Assert.IsNotNull(Object anObject) in C:\\src\\github\\nunit\\src\\NUnitFramework\\framework\\Assert.Conditions.cs:line 262\n   at Test.get_FailSource() in c:\\src\\spikes\\CrashingNunitTest\\CrashingNunitTest\\Test.cs:line 11\n   at Test..cctor() in c:\\src\\spikes\\CrashingNunitTest\\CrashingNunitTest\\Test.cs:line 5\n```\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/nunit/nunit/issues/comments/151505252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rprouse","id":493828,"node_id":"MDQ6VXNlcjQ5MzgyOA==","avatar_url":"https://avatars.githubusercontent.com/u/493828?v=4","gravatar_id":"","url":"https://api.github.com/users/rprouse","html_url":"https://github.com/rprouse","followers_url":"https://api.github.com/users/rprouse/followers","following_url":"https://api.github.com/users/rprouse/following{/other_user}","gists_url":"https://api.github.com/users/rprouse/gists{/gist_id}","starred_url":"https://api.github.com/users/rprouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rprouse/subscriptions","organizations_url":"https://api.github.com/users/rprouse/orgs","repos_url":"https://api.github.com/users/rprouse/repos","events_url":"https://api.github.com/users/rprouse/events{/privacy}","received_events_url":"https://api.github.com/users/rprouse/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":446802025,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDQ2ODAyMDI1","url":"https://api.github.com/repos/nunit/nunit/issues/events/446802025","actor":{"login":"MaceWindu","id":1099238,"node_id":"MDQ6VXNlcjEwOTkyMzg=","avatar_url":"https://avatars.githubusercontent.com/u/1099238?v=4","gravatar_id":"","url":"https://api.github.com/users/MaceWindu","html_url":"https://github.com/MaceWindu","followers_url":"https://api.github.com/users/MaceWindu/followers","following_url":"https://api.github.com/users/MaceWindu/following{/other_user}","gists_url":"https://api.github.com/users/MaceWindu/gists{/gist_id}","starred_url":"https://api.github.com/users/MaceWindu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaceWindu/subscriptions","organizations_url":"https://api.github.com/users/MaceWindu/orgs","repos_url":"https://api.github.com/users/MaceWindu/repos","events_url":"https://api.github.com/users/MaceWindu/events{/privacy}","received_events_url":"https://api.github.com/users/MaceWindu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2015-10-27T14:02:39Z","performed_via_github_app":null},{"id":446802026,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ0NjgwMjAyNg==","url":"https://api.github.com/repos/nunit/nunit/issues/events/446802026","actor":{"login":"MaceWindu","id":1099238,"node_id":"MDQ6VXNlcjEwOTkyMzg=","avatar_url":"https://avatars.githubusercontent.com/u/1099238?v=4","gravatar_id":"","url":"https://api.github.com/users/MaceWindu","html_url":"https://github.com/MaceWindu","followers_url":"https://api.github.com/users/MaceWindu/followers","following_url":"https://api.github.com/users/MaceWindu/following{/other_user}","gists_url":"https://api.github.com/users/MaceWindu/gists{/gist_id}","starred_url":"https://api.github.com/users/MaceWindu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaceWindu/subscriptions","organizations_url":"https://api.github.com/users/MaceWindu/orgs","repos_url":"https://api.github.com/users/MaceWindu/repos","events_url":"https://api.github.com/users/MaceWindu/events{/privacy}","received_events_url":"https://api.github.com/users/MaceWindu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2015-10-27T14:02:39Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/nunit/nunit/issues/comments/151505950","html_url":"https://github.com/nunit/nunit/issues/916#issuecomment-151505950","issue_url":"https://api.github.com/repos/nunit/nunit/issues/916","id":151505950,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MTUwNTk1MA==","user":{"login":"rprouse","id":493828,"node_id":"MDQ6VXNlcjQ5MzgyOA==","avatar_url":"https://avatars.githubusercontent.com/u/493828?v=4","gravatar_id":"","url":"https://api.github.com/users/rprouse","html_url":"https://github.com/rprouse","followers_url":"https://api.github.com/users/rprouse/followers","following_url":"https://api.github.com/users/rprouse/following{/other_user}","gists_url":"https://api.github.com/users/rprouse/gists{/gist_id}","starred_url":"https://api.github.com/users/rprouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rprouse/subscriptions","organizations_url":"https://api.github.com/users/rprouse/orgs","repos_url":"https://api.github.com/users/rprouse/repos","events_url":"https://api.github.com/users/rprouse/events{/privacy}","received_events_url":"https://api.github.com/users/rprouse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-10-27T14:04:56Z","updated_at":"2015-10-27T14:04:56Z","body":"Specifically, I think #917 may be fixed, I will just need to find another way to cause the agent to crash :smile: \n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/nunit/nunit/issues/comments/151505950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rprouse","id":493828,"node_id":"MDQ6VXNlcjQ5MzgyOA==","avatar_url":"https://avatars.githubusercontent.com/u/493828?v=4","gravatar_id":"","url":"https://api.github.com/users/rprouse","html_url":"https://github.com/rprouse","followers_url":"https://api.github.com/users/rprouse/followers","following_url":"https://api.github.com/users/rprouse/following{/other_user}","gists_url":"https://api.github.com/users/rprouse/gists{/gist_id}","starred_url":"https://api.github.com/users/rprouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rprouse/subscriptions","organizations_url":"https://api.github.com/users/rprouse/orgs","repos_url":"https://api.github.com/users/rprouse/repos","events_url":"https://api.github.com/users/rprouse/events{/privacy}","received_events_url":"https://api.github.com/users/rprouse/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":447231931,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ0NzIzMTkzMQ==","url":"https://api.github.com/repos/nunit/nunit/issues/events/447231931","actor":{"login":"rprouse","id":493828,"node_id":"MDQ6VXNlcjQ5MzgyOA==","avatar_url":"https://avatars.githubusercontent.com/u/493828?v=4","gravatar_id":"","url":"https://api.github.com/users/rprouse","html_url":"https://github.com/rprouse","followers_url":"https://api.github.com/users/rprouse/followers","following_url":"https://api.github.com/users/rprouse/following{/other_user}","gists_url":"https://api.github.com/users/rprouse/gists{/gist_id}","starred_url":"https://api.github.com/users/rprouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rprouse/subscriptions","organizations_url":"https://api.github.com/users/rprouse/orgs","repos_url":"https://api.github.com/users/rprouse/repos","events_url":"https://api.github.com/users/rprouse/events{/privacy}","received_events_url":"https://api.github.com/users/rprouse/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"c9687441000c6b5aabe71e0aa6d73f19c8570854","commit_url":"https://api.github.com/repos/nunit/nunit/commits/c9687441000c6b5aabe71e0aa6d73f19c8570854","created_at":"2015-10-27T19:50:14Z","performed_via_github_app":null},{"id":447466772,"node_id":"MDExOkNsb3NlZEV2ZW50NDQ3NDY2Nzcy","url":"https://api.github.com/repos/nunit/nunit/issues/events/447466772","actor":{"login":"rprouse","id":493828,"node_id":"MDQ6VXNlcjQ5MzgyOA==","avatar_url":"https://avatars.githubusercontent.com/u/493828?v=4","gravatar_id":"","url":"https://api.github.com/users/rprouse","html_url":"https://github.com/rprouse","followers_url":"https://api.github.com/users/rprouse/followers","following_url":"https://api.github.com/users/rprouse/following{/other_user}","gists_url":"https://api.github.com/users/rprouse/gists{/gist_id}","starred_url":"https://api.github.com/users/rprouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rprouse/subscriptions","organizations_url":"https://api.github.com/users/rprouse/orgs","repos_url":"https://api.github.com/users/rprouse/repos","events_url":"https://api.github.com/users/rprouse/events{/privacy}","received_events_url":"https://api.github.com/users/rprouse/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"c9687441000c6b5aabe71e0aa6d73f19c8570854","commit_url":"https://api.github.com/repos/nunit/nunit/commits/c9687441000c6b5aabe71e0aa6d73f19c8570854","created_at":"2015-10-28T00:19:52Z","state_reason":null,"performed_via_github_app":null},{"id":447466775,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ0NzQ2Njc3NQ==","url":"https://api.github.com/repos/nunit/nunit/issues/events/447466775","actor":{"login":"CharliePoole","id":2678661,"node_id":"MDQ6VXNlcjI2Nzg2NjE=","avatar_url":"https://avatars.githubusercontent.com/u/2678661?v=4","gravatar_id":"","url":"https://api.github.com/users/CharliePoole","html_url":"https://github.com/CharliePoole","followers_url":"https://api.github.com/users/CharliePoole/followers","following_url":"https://api.github.com/users/CharliePoole/following{/other_user}","gists_url":"https://api.github.com/users/CharliePoole/gists{/gist_id}","starred_url":"https://api.github.com/users/CharliePoole/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CharliePoole/subscriptions","organizations_url":"https://api.github.com/users/CharliePoole/orgs","repos_url":"https://api.github.com/users/CharliePoole/repos","events_url":"https://api.github.com/users/CharliePoole/events{/privacy}","received_events_url":"https://api.github.com/users/CharliePoole/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"affd2ea0f87bc14ea67006c27889eb61b2015ce1","commit_url":"https://api.github.com/repos/nunit/nunit/commits/affd2ea0f87bc14ea67006c27889eb61b2015ce1","created_at":"2015-10-28T00:19:52Z","performed_via_github_app":null},{"id":447467066,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ0NzQ2NzA2Ng==","url":"https://api.github.com/repos/nunit/nunit/issues/events/447467066","actor":{"login":"CharliePoole","id":2678661,"node_id":"MDQ6VXNlcjI2Nzg2NjE=","avatar_url":"https://avatars.githubusercontent.com/u/2678661?v=4","gravatar_id":"","url":"https://api.github.com/users/CharliePoole","html_url":"https://github.com/CharliePoole","followers_url":"https://api.github.com/users/CharliePoole/followers","following_url":"https://api.github.com/users/CharliePoole/following{/other_user}","gists_url":"https://api.github.com/users/CharliePoole/gists{/gist_id}","starred_url":"https://api.github.com/users/CharliePoole/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CharliePoole/subscriptions","organizations_url":"https://api.github.com/users/CharliePoole/orgs","repos_url":"https://api.github.com/users/CharliePoole/repos","events_url":"https://api.github.com/users/CharliePoole/events{/privacy}","received_events_url":"https://api.github.com/users/CharliePoole/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2015-10-28T00:20:24Z","label":{"name":"closed:done","color":"009800"},"performed_via_github_app":null},{"id":447467067,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50NDQ3NDY3MDY3","url":"https://api.github.com/repos/nunit/nunit/issues/events/447467067","actor":{"login":"CharliePoole","id":2678661,"node_id":"MDQ6VXNlcjI2Nzg2NjE=","avatar_url":"https://avatars.githubusercontent.com/u/2678661?v=4","gravatar_id":"","url":"https://api.github.com/users/CharliePoole","html_url":"https://github.com/CharliePoole","followers_url":"https://api.github.com/users/CharliePoole/followers","following_url":"https://api.github.com/users/CharliePoole/following{/other_user}","gists_url":"https://api.github.com/users/CharliePoole/gists{/gist_id}","starred_url":"https://api.github.com/users/CharliePoole/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CharliePoole/subscriptions","organizations_url":"https://api.github.com/users/CharliePoole/orgs","repos_url":"https://api.github.com/users/CharliePoole/repos","events_url":"https://api.github.com/users/CharliePoole/events{/privacy}","received_events_url":"https://api.github.com/users/CharliePoole/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2015-10-28T00:20:24Z","label":{"name":"status:started","color":"009800"},"performed_via_github_app":null},{"id":751083149,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDc1MTA4MzE0OQ==","url":"https://api.github.com/repos/nunit/nunit/issues/events/751083149","actor":{"login":"ChrisMaddock","id":4837132,"node_id":"MDQ6VXNlcjQ4MzcxMzI=","avatar_url":"https://avatars.githubusercontent.com/u/4837132?v=4","gravatar_id":"","url":"https://api.github.com/users/ChrisMaddock","html_url":"https://github.com/ChrisMaddock","followers_url":"https://api.github.com/users/ChrisMaddock/followers","following_url":"https://api.github.com/users/ChrisMaddock/following{/other_user}","gists_url":"https://api.github.com/users/ChrisMaddock/gists{/gist_id}","starred_url":"https://api.github.com/users/ChrisMaddock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChrisMaddock/subscriptions","organizations_url":"https://api.github.com/users/ChrisMaddock/orgs","repos_url":"https://api.github.com/users/ChrisMaddock/repos","events_url":"https://api.github.com/users/ChrisMaddock/events{/privacy}","received_events_url":"https://api.github.com/users/ChrisMaddock/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"cc66334f68e5e6b010cbf08b5a93d121df26be5f","commit_url":"https://api.github.com/repos/ChrisMaddock/nunit/commits/cc66334f68e5e6b010cbf08b5a93d121df26be5f","created_at":"2016-08-10T09:51:21Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/nunit/nunit/issues/comments/304741440","html_url":"https://github.com/nunit/nunit/issues/916#issuecomment-304741440","issue_url":"https://api.github.com/repos/nunit/nunit/issues/916","id":304741440,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDc0MTQ0MA==","user":{"login":"jnm2","id":8040367,"node_id":"MDQ6VXNlcjgwNDAzNjc=","avatar_url":"https://avatars.githubusercontent.com/u/8040367?v=4","gravatar_id":"","url":"https://api.github.com/users/jnm2","html_url":"https://github.com/jnm2","followers_url":"https://api.github.com/users/jnm2/followers","following_url":"https://api.github.com/users/jnm2/following{/other_user}","gists_url":"https://api.github.com/users/jnm2/gists{/gist_id}","starred_url":"https://api.github.com/users/jnm2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnm2/subscriptions","organizations_url":"https://api.github.com/users/jnm2/orgs","repos_url":"https://api.github.com/users/jnm2/repos","events_url":"https://api.github.com/users/jnm2/events{/privacy}","received_events_url":"https://api.github.com/users/jnm2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-29T22:55:24Z","updated_at":"2017-05-29T22:55:24Z","body":"We believe this was fixed by https://github.com/nunit/nunit-console/pull/223 which will be released as part of NUnit.Console 3.7. If you'd like to confirm sooner that the issue is fixed, please try `3.7.0-dev-03641` from the `https://ci.appveyor.com/nuget/nunit-console` NuGet feed.\r\n\r\nIf it turns out that this does not fix your issue, please open a new issue at https://github.com/nunit/nunit-console/issues.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/nunit/nunit/issues/comments/304741440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jnm2","id":8040367,"node_id":"MDQ6VXNlcjgwNDAzNjc=","avatar_url":"https://avatars.githubusercontent.com/u/8040367?v=4","gravatar_id":"","url":"https://api.github.com/users/jnm2","html_url":"https://github.com/jnm2","followers_url":"https://api.github.com/users/jnm2/followers","following_url":"https://api.github.com/users/jnm2/following{/other_user}","gists_url":"https://api.github.com/users/jnm2/gists{/gist_id}","starred_url":"https://api.github.com/users/jnm2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnm2/subscriptions","organizations_url":"https://api.github.com/users/jnm2/orgs","repos_url":"https://api.github.com/users/jnm2/repos","events_url":"https://api.github.com/users/jnm2/events{/privacy}","received_events_url":"https://api.github.com/users/jnm2/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1101483249,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDExMDE0ODMyNDk=","url":"https://api.github.com/repos/nunit/nunit/issues/events/1101483249","actor":{"login":"jnm2","id":8040367,"node_id":"MDQ6VXNlcjgwNDAzNjc=","avatar_url":"https://avatars.githubusercontent.com/u/8040367?v=4","gravatar_id":"","url":"https://api.github.com/users/jnm2","html_url":"https://github.com/jnm2","followers_url":"https://api.github.com/users/jnm2/followers","following_url":"https://api.github.com/users/jnm2/following{/other_user}","gists_url":"https://api.github.com/users/jnm2/gists{/gist_id}","starred_url":"https://api.github.com/users/jnm2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnm2/subscriptions","organizations_url":"https://api.github.com/users/jnm2/orgs","repos_url":"https://api.github.com/users/jnm2/repos","events_url":"https://api.github.com/users/jnm2/events{/privacy}","received_events_url":"https://api.github.com/users/jnm2/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2017-05-29T22:55:46Z","milestone":{"title":"Closed Without Action"},"performed_via_github_app":null},{"id":1101483250,"node_id":"MDE3OkRlbWlsZXN0b25lZEV2ZW50MTEwMTQ4MzI1MA==","url":"https://api.github.com/repos/nunit/nunit/issues/events/1101483250","actor":{"login":"jnm2","id":8040367,"node_id":"MDQ6VXNlcjgwNDAzNjc=","avatar_url":"https://avatars.githubusercontent.com/u/8040367?v=4","gravatar_id":"","url":"https://api.github.com/users/jnm2","html_url":"https://github.com/jnm2","followers_url":"https://api.github.com/users/jnm2/followers","following_url":"https://api.github.com/users/jnm2/following{/other_user}","gists_url":"https://api.github.com/users/jnm2/gists{/gist_id}","starred_url":"https://api.github.com/users/jnm2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnm2/subscriptions","organizations_url":"https://api.github.com/users/jnm2/orgs","repos_url":"https://api.github.com/users/jnm2/repos","events_url":"https://api.github.com/users/jnm2/events{/privacy}","received_events_url":"https://api.github.com/users/jnm2/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2017-05-29T22:55:46Z","milestone":{"title":"3.0RC"},"performed_via_github_app":null},{"id":1101483293,"node_id":"MDEyOkxhYmVsZWRFdmVudDExMDE0ODMyOTM=","url":"https://api.github.com/repos/nunit/nunit/issues/events/1101483293","actor":{"login":"jnm2","id":8040367,"node_id":"MDQ6VXNlcjgwNDAzNjc=","avatar_url":"https://avatars.githubusercontent.com/u/8040367?v=4","gravatar_id":"","url":"https://api.github.com/users/jnm2","html_url":"https://github.com/jnm2","followers_url":"https://api.github.com/users/jnm2/followers","following_url":"https://api.github.com/users/jnm2/following{/other_user}","gists_url":"https://api.github.com/users/jnm2/gists{/gist_id}","starred_url":"https://api.github.com/users/jnm2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnm2/subscriptions","organizations_url":"https://api.github.com/users/jnm2/orgs","repos_url":"https://api.github.com/users/jnm2/repos","events_url":"https://api.github.com/users/jnm2/events{/privacy}","received_events_url":"https://api.github.com/users/jnm2/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-05-29T22:55:53Z","label":{"name":"closed:duplicate","color":"cccccc"},"performed_via_github_app":null},{"id":1101483294,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50MTEwMTQ4MzI5NA==","url":"https://api.github.com/repos/nunit/nunit/issues/events/1101483294","actor":{"login":"jnm2","id":8040367,"node_id":"MDQ6VXNlcjgwNDAzNjc=","avatar_url":"https://avatars.githubusercontent.com/u/8040367?v=4","gravatar_id":"","url":"https://api.github.com/users/jnm2","html_url":"https://github.com/jnm2","followers_url":"https://api.github.com/users/jnm2/followers","following_url":"https://api.github.com/users/jnm2/following{/other_user}","gists_url":"https://api.github.com/users/jnm2/gists{/gist_id}","starred_url":"https://api.github.com/users/jnm2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnm2/subscriptions","organizations_url":"https://api.github.com/users/jnm2/orgs","repos_url":"https://api.github.com/users/jnm2/repos","events_url":"https://api.github.com/users/jnm2/events{/privacy}","received_events_url":"https://api.github.com/users/jnm2/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2017-05-29T22:55:53Z","label":{"name":"closed:done","color":"009800"},"performed_via_github_app":null},{"id":1101483295,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50MTEwMTQ4MzI5NQ==","url":"https://api.github.com/repos/nunit/nunit/issues/events/1101483295","actor":{"login":"jnm2","id":8040367,"node_id":"MDQ6VXNlcjgwNDAzNjc=","avatar_url":"https://avatars.githubusercontent.com/u/8040367?v=4","gravatar_id":"","url":"https://api.github.com/users/jnm2","html_url":"https://github.com/jnm2","followers_url":"https://api.github.com/users/jnm2/followers","following_url":"https://api.github.com/users/jnm2/following{/other_user}","gists_url":"https://api.github.com/users/jnm2/gists{/gist_id}","starred_url":"https://api.github.com/users/jnm2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnm2/subscriptions","organizations_url":"https://api.github.com/users/jnm2/orgs","repos_url":"https://api.github.com/users/jnm2/repos","events_url":"https://api.github.com/users/jnm2/events{/privacy}","received_events_url":"https://api.github.com/users/jnm2/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2017-05-29T22:55:53Z","label":{"name":"is:bug","color":"fc2929"},"performed_via_github_app":null},{"id":1101483296,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50MTEwMTQ4MzI5Ng==","url":"https://api.github.com/repos/nunit/nunit/issues/events/1101483296","actor":{"login":"jnm2","id":8040367,"node_id":"MDQ6VXNlcjgwNDAzNjc=","avatar_url":"https://avatars.githubusercontent.com/u/8040367?v=4","gravatar_id":"","url":"https://api.github.com/users/jnm2","html_url":"https://github.com/jnm2","followers_url":"https://api.github.com/users/jnm2/followers","following_url":"https://api.github.com/users/jnm2/following{/other_user}","gists_url":"https://api.github.com/users/jnm2/gists{/gist_id}","starred_url":"https://api.github.com/users/jnm2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnm2/subscriptions","organizations_url":"https://api.github.com/users/jnm2/orgs","repos_url":"https://api.github.com/users/jnm2/repos","events_url":"https://api.github.com/users/jnm2/events{/privacy}","received_events_url":"https://api.github.com/users/jnm2/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2017-05-29T22:55:53Z","label":{"name":"pri:normal","color":"fbca04"},"performed_via_github_app":null},{"actor":{"login":"jnm2","id":8040367,"node_id":"MDQ6VXNlcjgwNDAzNjc=","avatar_url":"https://avatars.githubusercontent.com/u/8040367?v=4","gravatar_id":"","url":"https://api.github.com/users/jnm2","html_url":"https://github.com/jnm2","followers_url":"https://api.github.com/users/jnm2/followers","following_url":"https://api.github.com/users/jnm2/following{/other_user}","gists_url":"https://api.github.com/users/jnm2/gists{/gist_id}","starred_url":"https://api.github.com/users/jnm2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnm2/subscriptions","organizations_url":"https://api.github.com/users/jnm2/orgs","repos_url":"https://api.github.com/users/jnm2/repos","events_url":"https://api.github.com/users/jnm2/events{/privacy}","received_events_url":"https://api.github.com/users/jnm2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-29T23:24:51Z","updated_at":"2017-05-29T23:24:51Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/nunit/nunit-console/issues/223","repository_url":"https://api.github.com/repos/nunit/nunit-console","labels_url":"https://api.github.com/repos/nunit/nunit-console/issues/223/labels{/name}","comments_url":"https://api.github.com/repos/nunit/nunit-console/issues/223/comments","events_url":"https://api.github.com/repos/nunit/nunit-console/issues/223/events","html_url":"https://github.com/nunit/nunit-console/pull/223","id":227801660,"node_id":"MDExOlB1bGxSZXF1ZXN0MTE5OTcxOTgx","number":223,"title":"Fixing SocketException caused by --explore","user":{"login":"jnm2","id":8040367,"node_id":"MDQ6VXNlcjgwNDAzNjc=","avatar_url":"https://avatars.githubusercontent.com/u/8040367?v=4","gravatar_id":"","url":"https://api.github.com/users/jnm2","html_url":"https://github.com/jnm2","followers_url":"https://api.github.com/users/jnm2/followers","following_url":"https://api.github.com/users/jnm2/following{/other_user}","gists_url":"https://api.github.com/users/jnm2/gists{/gist_id}","starred_url":"https://api.github.com/users/jnm2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jnm2/subscriptions","organizations_url":"https://api.github.com/users/jnm2/orgs","repos_url":"https://api.github.com/users/jnm2/repos","events_url":"https://api.github.com/users/jnm2/events{/privacy}","received_events_url":"https://api.github.com/users/jnm2/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":20,"created_at":"2017-05-10T20:31:47Z","updated_at":"2017-06-13T00:31:27Z","closed_at":"2017-05-25T23:23:13Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":65734036,"node_id":"MDEwOlJlcG9zaXRvcnk2NTczNDAzNg==","name":"nunit-console","full_name":"nunit/nunit-console","private":false,"owner":{"login":"nunit","id":2678858,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI2Nzg4NTg=","avatar_url":"https://avatars.githubusercontent.com/u/2678858?v=4","gravatar_id":"","url":"https://api.github.com/users/nunit","html_url":"https://github.com/nunit","followers_url":"https://api.github.com/users/nunit/followers","following_url":"https://api.github.com/users/nunit/following{/other_user}","gists_url":"https://api.github.com/users/nunit/gists{/gist_id}","starred_url":"https://api.github.com/users/nunit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nunit/subscriptions","organizations_url":"https://api.github.com/users/nunit/orgs","repos_url":"https://api.github.com/users/nunit/repos","events_url":"https://api.github.com/users/nunit/events{/privacy}","received_events_url":"https://api.github.com/users/nunit/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/nunit/nunit-console","description":"NUnit Console runner and test engine","fork":false,"url":"https://api.github.com/repos/nunit/nunit-console","forks_url":"https://api.github.com/repos/nunit/nunit-console/forks","keys_url":"https://api.github.com/repos/nunit/nunit-console/keys{/key_id}","collaborators_url":"https://api.github.com/repos/nunit/nunit-console/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/nunit/nunit-console/teams","hooks_url":"https://api.github.com/repos/nunit/nunit-console/hooks","issue_events_url":"https://api.github.com/repos/nunit/nunit-console/issues/events{/number}","events_url":"https://api.github.com/repos/nunit/nunit-console/events","assignees_url":"https://api.github.com/repos/nunit/nunit-console/assignees{/user}","branches_url":"https://api.github.com/repos/nunit/nunit-console/branches{/branch}","tags_url":"https://api.github.com/repos/nunit/nunit-console/tags","blobs_url":"https://api.github.com/repos/nunit/nunit-console/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/nunit/nunit-console/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/nunit/nunit-console/git/refs{/sha}","trees_url":"https://api.github.com/repos/nunit/nunit-console/git/trees{/sha}","statuses_url":"https://api.github.com/repos/nunit/nunit-console/statuses/{sha}","languages_url":"https://api.github.com/repos/nunit/nunit-console/languages","stargazers_url":"https://api.github.com/repos/nunit/nunit-console/stargazers","contributors_url":"https://api.github.com/repos/nunit/nunit-console/contributors","subscribers_url":"https://api.github.com/repos/nunit/nunit-console/subscribers","subscription_url":"https://api.github.com/repos/nunit/nunit-console/subscription","commits_url":"https://api.github.com/repos/nunit/nunit-console/commits{/sha}","git_commits_url":"https://api.github.com/repos/nunit/nunit-console/git/commits{/sha}","comments_url":"https://api.github.com/repos/nunit/nunit-console/comments{/number}","issue_comment_url":"https://api.github.com/repos/nunit/nunit-console/issues/comments{/number}","contents_url":"https://api.github.com/repos/nunit/nunit-console/contents/{+path}","compare_url":"https://api.github.com/repos/nunit/nunit-console/compare/{base}...{head}","merges_url":"https://api.github.com/repos/nunit/nunit-console/merges","archive_url":"https://api.github.com/repos/nunit/nunit-console/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/nunit/nunit-console/downloads","issues_url":"https://api.github.com/repos/nunit/nunit-console/issues{/number}","pulls_url":"https://api.github.com/repos/nunit/nunit-console/pulls{/number}","milestones_url":"https://api.github.com/repos/nunit/nunit-console/milestones{/number}","notifications_url":"https://api.github.com/repos/nunit/nunit-console/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/nunit/nunit-console/labels{/name}","releases_url":"https://api.github.com/repos/nunit/nunit-console/releases{/id}","deployments_url":"https://api.github.com/repos/nunit/nunit-console/deployments","created_at":"2016-08-15T13:24:01Z","updated_at":"2025-11-09T04:18:27Z","pushed_at":"2025-11-09T04:40:56Z","git_url":"git://github.com/nunit/nunit-console.git","ssh_url":"git@github.com:nunit/nunit-console.git","clone_url":"https://github.com/nunit/nunit-console.git","svn_url":"https://github.com/nunit/nunit-console","homepage":"","size":21125,"stargazers_count":227,"watchers_count":227,"language":"C#","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":159,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":67,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c-sharp","dotnet","hacktoberfest","nunit","nunit-console","tdd","test-runner","testing","testing-tools"],"visibility":"public","forks":159,"open_issues":67,"watchers":227,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/nunit/nunit-console/pulls/223","html_url":"https://github.com/nunit/nunit-console/pull/223","diff_url":"https://github.com/nunit/nunit-console/pull/223.diff","patch_url":"https://github.com/nunit/nunit-console/pull/223.patch","merged_at":"2017-05-25T23:23:13Z"},"body":"Fixes #225, and probably #171 and #219 and nunit/nunit#2027 and #175 and #31 as well so we should check them.\r\n\r\nRemote caller == console runner\r\nCallee == agent\r\n\r\n### Cause of the bug\r\n\r\nEvery remoting call has three necessary stages:\r\n 1. Transfer the information necessary to make the call from the caller to the callee over the communication channel. (For example, instance ID and marshaled parameters.)\r\n 2. Perform the requested code execution in the callee.\r\n 3. Transfer the result of the code execution from the callee to the caller over the communication channel. (For instance, return value and successful completion or exception.)\r\n\r\nThe agent's main thread starts the remoting TcpChannel listener. Then it blocks, waiting for a stop signal from another thread.\r\n\r\nThe agent's TcpChannel receives calls from the console runner and handles the three stages of each call on a threadpool thread.\r\n\r\nThe last call is the console runner telling the agent to shut down. The agent's code implementing the stop command is executed during stage 2. The agent can't shut down before stage 3 is complete without causing a SocketException in the remote caller which expects all three stages to complete normally for every call. So what the agent does is set the stop signal to unblock the agent's main thread and let the main thread handle the shutdown.\r\n\r\nAs soon as the agent's main thread is unblocked, the very next thing on its agenda is shutting itself down. Sometimes it shuts itself down so fast that the third stage of the stop call on the background thread is not complete. The main thread closes the socket while the background thread is still in the process of responding to the remote caller. This is the race condition [@lsem was talking about](https://github.com/nunit/nunit-console/issues/219#issuecomment-300953995).\r\n\r\nSo the stop signal really isn't useful on its own.\r\n\r\n### The repeatable repro (the test commit)\r\n\r\nFor some reason, none of us could reliably reproduce this race condition unless we:\r\n * Run the console runner and agent from a folder which does not contain nunit.framework.dll\r\n * Use the --explore option\r\n * Have tests with dynamic test cases requiring execution of the user code at discovery time, when that code involves accessing TestContext.Current.\r\n\r\nAs far as I can tell, these are not related logically to the actual bug. They only shift timings.\r\nIf it doesn't repro the first time, it almost certainly will the second time. My test runs it up to three times.\r\nI did see it pass all tests in AppVeyor once which it shouldn't have. On @tom-dudley's and my machines it repros every time in every runner we tried. (I tried build.cake, VS runner, and ReSharper.)\r\n\r\n\r\n### The fix commit\r\n\r\nSwallowing SocketExceptions is the least palatable option because it foists responsibility for the agent's internal problem onto the remote caller. Also you don't want to miss a legit and identical SocketException if do you lose your network connection. I will continue to assume this option is not on the table.\r\n\r\nSo what we need is to be sure that the three stages of the stop call have finished before shutting the TcpChannel down.\r\n\r\n`Thread.Delay(1000)` is no guarantee. Due to thread scheduling or network delays, the stop call response may take an arbitrarily long time.\r\n\r\nAfter researching and stepping through .NET Framework code in the debugger, it is evident we must shut down no sooner than this line completing:\r\nhttp://referencesource.microsoft.com/#System.Runtime.Remoting/channels/tcp/tcpserverchannel.cs,613\r\n\r\nSince we want to shut down as soon as possible after that line completes, we need a hook or event of some sort to let us know. As far as I can tell this leaves us with only one possible option: implement an `IServerChannelSink` which spies on all remoting calls and decorates the `TcpServerTransportSink`.\r\n\r\nThat is what the newly added `ObservableServerChannelSinkProvider` does. Every time you create a `TcpChannel` now you have an option to pass a `CurrentMessageCounter` which it will then use to keep track of how many calls are in flight at any given moment. Before the `TcpServerTransportSink` sees each message, the counter is incremented, and the counter is not decremented until the `TcpServerTransportSink` is completely finished all three stages of the call.\r\n\r\nThe `CurrentMessageCounter` also provides a method allowing you to wait until the number of in-flight messages is down to zero. So after the main thread receives the shutdown signal from the background thread, the main thread now waits for all concurrent messages (not just the stop message) to finish before shutting down.\r\n\r\nThis solution seems to be working well. There is now an absolute guarantee that every existing remote call has finished using the socket before we close the socket.\r\n\r\n#### Edge cases\r\n\r\n * If the remote caller tries to send a remoting call after the stop call has finished, the remote caller will (and should) still get a SocketException.\r\n\r\n * If the remote caller sends more remoting calls overlapping with the stop call in such a way that the number of concurrent messages being handled does not get back to zero, the agent will not shut down until there are no more remote calls in flight. This would be bizarre behavior from the remote caller, but if it happened, this would likely be a useful feature rather than a bug.","reactions":{"url":"https://api.github.com/repos/nunit/nunit-console/issues/223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/nunit/nunit-console/issues/223/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]