{"url":"https://api.github.com/repos/nunit/nunit/issues/2823","repository_url":"https://api.github.com/repos/nunit/nunit","labels_url":"https://api.github.com/repos/nunit/nunit/issues/2823/labels{/name}","comments_url":"https://api.github.com/repos/nunit/nunit/issues/2823/comments","events_url":"https://api.github.com/repos/nunit/nunit/issues/2823/events","html_url":"https://github.com/nunit/nunit/issues/2823","id":317662497,"node_id":"MDU6SXNzdWUzMTc2NjI0OTc=","number":2823,"title":"SetUp failed for test fixture - Array was not a one-dimensional array.  Issue seems related to byte[,] method parameters","user":{"login":"Kritner","id":8814983,"node_id":"MDQ6VXNlcjg4MTQ5ODM=","avatar_url":"https://avatars.githubusercontent.com/u/8814983?v=4","gravatar_id":"","url":"https://api.github.com/users/Kritner","html_url":"https://github.com/Kritner","followers_url":"https://api.github.com/users/Kritner/followers","following_url":"https://api.github.com/users/Kritner/following{/other_user}","gists_url":"https://api.github.com/users/Kritner/gists{/gist_id}","starred_url":"https://api.github.com/users/Kritner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kritner/subscriptions","organizations_url":"https://api.github.com/users/Kritner/orgs","repos_url":"https://api.github.com/users/Kritner/repos","events_url":"https://api.github.com/users/Kritner/events{/privacy}","received_events_url":"https://api.github.com/users/Kritner/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":61616795,"node_id":"MDU6TGFiZWw2MTYxNjc5NQ==","url":"https://api.github.com/repos/nunit/nunit/labels/closed:done","name":"closed:done","color":"0e8a16","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/nunit/nunit/milestones/35","html_url":"https://github.com/nunit/nunit/milestone/35","labels_url":"https://api.github.com/repos/nunit/nunit/milestones/35/labels","id":3176302,"node_id":"MDk6TWlsZXN0b25lMzE3NjMwMg==","number":35,"title":"3.11","description":"","creator":{"login":"rprouse","id":493828,"node_id":"MDQ6VXNlcjQ5MzgyOA==","avatar_url":"https://avatars.githubusercontent.com/u/493828?v=4","gravatar_id":"","url":"https://api.github.com/users/rprouse","html_url":"https://github.com/rprouse","followers_url":"https://api.github.com/users/rprouse/followers","following_url":"https://api.github.com/users/rprouse/following{/other_user}","gists_url":"https://api.github.com/users/rprouse/gists{/gist_id}","starred_url":"https://api.github.com/users/rprouse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rprouse/subscriptions","organizations_url":"https://api.github.com/users/rprouse/orgs","repos_url":"https://api.github.com/users/rprouse/repos","events_url":"https://api.github.com/users/rprouse/events{/privacy}","received_events_url":"https://api.github.com/users/rprouse/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":57,"state":"closed","created_at":"2018-03-10T20:54:10Z","updated_at":"2018-11-23T01:22:07Z","due_on":"2018-09-28T07:00:00Z","closed_at":"2018-10-07T01:26:57Z"},"comments":4,"created_at":"2018-04-25T14:48:45Z","updated_at":"2018-04-28T20:10:19Z","closed_at":"2018-04-28T20:09:37Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I'm in the process of updating from `3.8.1` to `3.10.1` and I'm having an issue where testfixtures that pass in 3.8.1, fail to \"SetUp\" in 3.10.1.\r\n\r\nR# test runner refuses to even display the fixture sometimes, and when it does, test results are always \"inconclusive, test not run\".\r\n\r\nI only discovered this issue for this particular fixture because i received the stacktrace (below) when running `dotnet test` from the command line.\r\n\r\nHere's the stacktrace:\r\n\r\n```\r\nSetUp failed for test fixture MyFixture\r\nAn exception was thrown while loading the test.\r\nSystem.ArgumentException: Array was not a one-dimensional array.\r\n   at System.ThrowHelper.ThrowArgumentException(ExceptionResource resource)\r\n   at System.Array.GetValue(Int32 index)\r\n   at NUnit.Framework.Internal.TestNameGenerator.NameFragment.GetDisplayString(Object arg, Int32 stringMax) in C:\\src\\nunit\\nunit\\src\\NUnitFramework\\framework\\Internal\\TestNameGenerator.cs:line 241\r\n   at NUnit.Framework.Internal.TestNameGenerator.ArgListFragment.GetText(MethodInfo method, Object[] arglist) in C:\\src\\nunit\\nunit\\src\\NUnitFramework\\framework\\Internal\\TestNameGenerator.cs:line 558\r\n   at NUnit.Framework.Internal.TestNameGenerator.GetDisplayName(TestMethod testMethod, Object[] args) in C:\\src\\nunit\\nunit\\src\\NUnitFramework\\framework\\Internal\\TestNameGenerator.cs:line 93\r\n   at NUnit.Framework.Internal.Builders.NUnitTestCaseBuilder.BuildTestMethod(IMethodInfo method, Test parentSuite, TestCaseParameters parms) in C:\\src\\nunit\\nunit\\src\\NUnitFramework\\framework\\Internal\\Builders\\NUnitTestCaseBuilder.cs:line 89\r\n   at NUnit.Framework.TestCaseSourceAttribute.<BuildFrom>d__22.MoveNext() in C:\\src\\nunit\\nunit\\src\\NUnitFramework\\framework\\Attributes\\TestCaseSourceAttribute.cs:line 142\r\n   at NUnit.Framework.Internal.Builders.DefaultTestCaseBuilder.BuildFrom(IMethodInfo method, Test parentSuite) in C:\\src\\nunit\\nunit\\src\\NUnitFramework\\framework\\Internal\\Builders\\DefaultTestCaseBuilder.cs:line 144\r\n   at NUnit.Framework.Internal.Builders.NUnitTestFixtureBuilder.AddTestCasesToFixture(TestFixture fixture) in C:\\src\\nunit\\nunit\\src\\NUnitFramework\\framework\\Internal\\Builders\\NUnitTestFixtureBuilder.cs:line 183\r\n   at NUnit.Framework.Internal.Builders.NUnitTestFixtureBuilder.BuildFrom(ITypeInfo typeInfo, ITestFixtureData testFixtureData) in C:\\src\\nunit\\nunit\\src\\NUnitFramework\\framework\\Internal\\Builders\\NUnitTestFixtureBuilder.cs:line 158\r\n   at NUnit.Framework.TestFixtureAttribute.<BuildFrom>d__48.MoveNext() in C:\\src\\nunit\\nunit\\src\\NUnitFramework\\framework\\Attributes\\TestFixtureAttribute.cs:line 227\r\n   at NUnit.Framework.Internal.Builders.DefaultSuiteBuilder.BuildFrom(ITypeInfo typeInfo) in C:\\src\\nunit\\nunit\\src\\NUnitFramework\\framework\\Internal\\Builders\\DefaultSuiteBuilder.cs:line 80\r\n```\r\n\r\nI'm not sure if this modified example will actually have the issue or not, but my fixture looks similar to this:\r\n\r\nEdit (simplifying example)\r\n```\r\npublic class FastUnitTest : BaseCategoryAttribute { }\r\n\r\n[TestFixture, FastUnitTest]\r\npublic class MyFixture\r\n{\r\n\r\n    // note my test has no `[SetUp]`, but seems to be referenced in the stacktrace above\r\n\r\n        private static object[] testDataByteArray = new object[]\r\n        {\r\n            new object[]\r\n            {\r\n                \"test\",\r\n                \"another deal\",\r\n                new byte[] {1, 2, 3, 4}\r\n            }\r\n        };\r\n\r\n        // this test passes with both 3.8.1 and 3.10.1\r\n        [Test]\r\n        [TestCaseSource(nameof(testDataByteArray))]\r\n        public void TestThing(string thing, string anotherString, byte[] multiByte)\r\n        {\r\n            Assert.Pass();\r\n        }\r\n\r\n        private static object[] testDataMultiDimensionalByteArray = new object[]\r\n        {\r\n            new object[]\r\n            {\r\n                \"test\",\r\n                \"another deal\",\r\n                new byte[,] { { 1, 2 }, { 2, 3 } }\r\n            }\r\n        };\r\n\r\n        // this test passes only on 3.8.1, it fails (to even set up the fixture) with the stacktrace above of 3.10.1\r\n        [Test]\r\n        [TestCaseSource(nameof(testDataMultiDimensionalByteArray))]\r\n        public void TestThingMultiDimension(string thing, string anotherString, byte[,] multiByte)\r\n        {\r\n            Assert.Pass();\r\n        }\r\n}\r\n```\r\n\r\nAny thoughts?  ","closed_by":{"login":"mikkelbu","id":1007631,"node_id":"MDQ6VXNlcjEwMDc2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/1007631?v=4","gravatar_id":"","url":"https://api.github.com/users/mikkelbu","html_url":"https://github.com/mikkelbu","followers_url":"https://api.github.com/users/mikkelbu/followers","following_url":"https://api.github.com/users/mikkelbu/following{/other_user}","gists_url":"https://api.github.com/users/mikkelbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mikkelbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikkelbu/subscriptions","organizations_url":"https://api.github.com/users/mikkelbu/orgs","repos_url":"https://api.github.com/users/mikkelbu/repos","events_url":"https://api.github.com/users/mikkelbu/events{/privacy}","received_events_url":"https://api.github.com/users/mikkelbu/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/nunit/nunit/issues/2823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/nunit/nunit/issues/2823/timeline","performed_via_github_app":null,"state_reason":"completed"}