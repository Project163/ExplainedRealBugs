diff --git a/activerecord/lib/active_record/connection_adapters/postgresql/oid/cidr.rb b/activerecord/lib/active_record/connection_adapters/postgresql/oid/cidr.rb
index a7f61e2375..4f3f9b5b88 100644
--- a/activerecord/lib/active_record/connection_adapters/postgresql/oid/cidr.rb
+++ b/activerecord/lib/active_record/connection_adapters/postgresql/oid/cidr.rb
@@ -28,6 +28,12 @@ def serialize(value)
             end
           end
 
+          # TODO: Remove when IPAddr#== compares IPAddr#prefix. See
+          # https://github.com/ruby/ipaddr/issues/21
+          def changed?(old_value, new_value, _new_value_before_type_cast)
+            super || old_value.prefix != new_value.prefix
+          end
+
           def cast_value(value)
             if value.nil?
               nil
diff --git a/activerecord/test/cases/adapters/postgresql/network_test.rb b/activerecord/test/cases/adapters/postgresql/network_test.rb
index e6cdf46165..937ade1ab7 100644
--- a/activerecord/test/cases/adapters/postgresql/network_test.rb
+++ b/activerecord/test/cases/adapters/postgresql/network_test.rb
@@ -94,6 +94,18 @@ def test_schema_dump_with_shorthand
     assert_match %r{t\.macaddr\s+"mac_address",\s+default: "ff:ff:ff:ff:ff:ff"}, output
   end
 
+  def test_cidr_change_prefix
+    model = PostgresqlNetworkAddress.create(cidr_address: "192.168.1.0/24")
+    model.cidr_address = "192.168.1.0/24"
+    assert_not_predicate model, :changed?
+
+    model.cidr_address = "192.168.2.0/24"
+    assert_predicate model, :changed?
+
+    model.cidr_address = "192.168.1.0/25"
+    assert_predicate model, :changed?
+  end
+
   def test_mac_address_change_case_does_not_mark_dirty
     model = PostgresqlNetworkAddress.create(mac_address: "Ab:Cd:Ef:01:02:03")
     model.mac_address = model.mac_address.swapcase
