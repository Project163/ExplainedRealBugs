diff --git a/activerecord/lib/active_record/relation/query_methods.rb b/activerecord/lib/active_record/relation/query_methods.rb
index 56306768b6..57eb2e2f76 100644
--- a/activerecord/lib/active_record/relation/query_methods.rb
+++ b/activerecord/lib/active_record/relation/query_methods.rb
@@ -2131,7 +2131,7 @@ def column_references(order_args)
               arg.expr.relation.name
             end
           end
-        end.compact
+        end.filter_map { |ref| Arel.sql(ref, retryable: true) if ref }
       end
 
       def extract_table_name_from(string)
diff --git a/activerecord/test/cases/relation/order_test.rb b/activerecord/test/cases/relation/order_test.rb
index 87bdc00dd5..f6989b8396 100644
--- a/activerecord/test/cases/relation/order_test.rb
+++ b/activerecord/test/cases/relation/order_test.rb
@@ -7,8 +7,11 @@
 class OrderTest < ActiveRecord::TestCase
   fixtures :authors, :author_addresses
 
+  def setup
+    Book.delete_all
+  end
+
   def test_order_asc
-    Book.destroy_all
     z = Book.create!(name: "Zulu", author: authors(:david))
     y = Book.create!(name: "Yankee", author: authors(:mary))
     x = Book.create!(name: "X-Ray", author: authors(:david))
@@ -26,7 +29,6 @@ def test_order_asc
   end
 
   def test_order_desc
-    Book.destroy_all
     z = Book.create!(name: "Zulu", author: authors(:david))
     y = Book.create!(name: "Yankee", author: authors(:mary))
     x = Book.create!(name: "X-Ray", author: authors(:david))
@@ -44,7 +46,6 @@ def test_order_desc
   end
 
   def test_order_with_association
-    Book.destroy_all
     z = Book.create!(name: "Zulu", author: authors(:david))
     y = Book.create!(name: "Yankee", author: authors(:mary))
     x = Book.create!(name: "X-Ray", author: authors(:david))
@@ -64,4 +65,26 @@ def test_order_with_association
     assert_equal(author_desc_then_book_name, Book.includes(:author).order(Author.arel_table[:name].desc, books: { name: :asc }))
     assert_equal(author_desc_then_book_name, Book.includes(:author).order({ authors: { name: :desc } }, :name))
   end
+
+  def test_order_with_association_alias
+    z = Book.create!(name: "Zulu", author: authors(:david))
+    y = Book.create!(name: "Yankee", author: authors(:mary))
+    x = Book.create!(name: "X-Ray", author: authors(:david))
+
+    author_name = Author.arel_table.alias("author")[:name]
+
+    author_then_book_name = [x, z, y]
+
+    assert_equal(author_then_book_name, Book.includes(:author).order(author: { name: :asc }, books: { name: :asc }))
+    assert_equal(author_then_book_name, Book.includes(:author).order("author.name", books: { name: :asc }))
+    assert_equal(author_then_book_name, Book.includes(:author).order({ author: { name: :asc } }, :name))
+    assert_equal(author_then_book_name, Book.includes(:author).order(author_name, :name))
+
+    author_desc_then_book_name = [y, x, z]
+
+    assert_equal(author_desc_then_book_name, Book.includes(:author).order(author: { name: :desc }, books: { name: :asc }))
+    assert_equal(author_desc_then_book_name, Book.includes(:author).order("author.name desc", books: { name: :asc }))
+    assert_equal(author_desc_then_book_name, Book.includes(:author).order({ author: { name: :desc } }, :name))
+    assert_equal(author_desc_then_book_name, Book.includes(:author).order(author_name.desc, :name))
+  end
 end
