diff --git a/actioncable/lib/rails/generators/channel/channel_generator.rb b/actioncable/lib/rails/generators/channel/channel_generator.rb
index 586f563d8e..72a6a3821e 100644
--- a/actioncable/lib/rails/generators/channel/channel_generator.rb
+++ b/actioncable/lib/rails/generators/channel/channel_generator.rb
@@ -59,17 +59,17 @@ def create_shared_channel_javascript_files
         def create_channel_javascript_file
           channel_js_path = File.join("app/javascript/channels", class_path, "#{file_name}_channel")
           js_template "javascript/channel", channel_js_path
-          gsub_file "#{channel_js_path}.js", /\.\/consumer/, "channels/consumer" unless using_js_runtime?
+          gsub_file "#{channel_js_path}.js", /\.\/consumer/, "channels/consumer" if using_importmap?
         end
 
         def import_channels_in_javascript_entrypoint
           append_to_file "app/javascript/application.js",
-            using_js_runtime? ? %(import "./channels"\n) : %(import "channels"\n)
+            using_importmap? ? %(import "channels"\n) : %(import "./channels"\n)
         end
 
         def import_channel_in_javascript_entrypoint
           append_to_file "app/javascript/channels/index.js",
-            using_js_runtime? ? %(import "./#{file_name}_channel"\n) : %(import "channels/#{file_name}_channel"\n)
+            using_importmap? ? %(import "channels/#{file_name}_channel"\n) : %(import "./#{file_name}_channel"\n)
         end
 
         def install_javascript_dependencies
diff --git a/railties/test/generators/channel_generator_test.rb b/railties/test/generators/channel_generator_test.rb
index 2a3091057e..ca04aa219d 100644
--- a/railties/test/generators/channel_generator_test.rb
+++ b/railties/test/generators/channel_generator_test.rb
@@ -78,6 +78,16 @@ class ChannelGeneratorTest < Rails::Generators::TestCase
     end
   end
 
+  test "import channels in javascript entrypoint when using a css processor" do
+    FileUtils.touch("#{destination_root}/package.json")
+
+    run_generator ["books"]
+
+    assert_file "app/javascript/application.js" do |entrypoint|
+      assert_match %r|import "channels"|, entrypoint
+    end
+  end
+
   test "import channels in javascript entrypoint under node" do
     use_under_node
     generator(["chat"]).stub(:install_javascript_dependencies, true) do
