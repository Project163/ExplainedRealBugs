[{"id":11140947891,"node_id":"LE_lADNIULOeI87WM8AAAACmA1fsw","url":"https://api.github.com/repos/rails/rails/issues/events/11140947891","actor":{"login":"nvasilevski","id":5512772,"node_id":"MDQ6VXNlcjU1MTI3NzI=","avatar_url":"https://avatars.githubusercontent.com/u/5512772?v=4","gravatar_id":"","url":"https://api.github.com/users/nvasilevski","html_url":"https://github.com/nvasilevski","followers_url":"https://api.github.com/users/nvasilevski/followers","following_url":"https://api.github.com/users/nvasilevski/following{/other_user}","gists_url":"https://api.github.com/users/nvasilevski/gists{/gist_id}","starred_url":"https://api.github.com/users/nvasilevski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nvasilevski/subscriptions","organizations_url":"https://api.github.com/users/nvasilevski/orgs","repos_url":"https://api.github.com/users/nvasilevski/repos","events_url":"https://api.github.com/users/nvasilevski/events{/privacy}","received_events_url":"https://api.github.com/users/nvasilevski/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-12-04T15:41:54Z","label":{"name":"activerecord","color":"0b02e1"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1838914058","html_url":"https://github.com/rails/rails/issues/50256#issuecomment-1838914058","issue_url":"https://api.github.com/repos/rails/rails/issues/50256","id":1838914058,"node_id":"IC_kwDNIULObZuaCg","user":{"login":"nvasilevski","id":5512772,"node_id":"MDQ6VXNlcjU1MTI3NzI=","avatar_url":"https://avatars.githubusercontent.com/u/5512772?v=4","gravatar_id":"","url":"https://api.github.com/users/nvasilevski","html_url":"https://github.com/nvasilevski","followers_url":"https://api.github.com/users/nvasilevski/followers","following_url":"https://api.github.com/users/nvasilevski/following{/other_user}","gists_url":"https://api.github.com/users/nvasilevski/gists{/gist_id}","starred_url":"https://api.github.com/users/nvasilevski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nvasilevski/subscriptions","organizations_url":"https://api.github.com/users/nvasilevski/orgs","repos_url":"https://api.github.com/users/nvasilevski/repos","events_url":"https://api.github.com/users/nvasilevski/events{/privacy}","received_events_url":"https://api.github.com/users/nvasilevski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-04T15:42:34Z","updated_at":"2023-12-04T15:42:34Z","body":"hey, thanks for the report! It does look like a bug so I'll have a look\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1838914058/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nvasilevski","id":5512772,"node_id":"MDQ6VXNlcjU1MTI3NzI=","avatar_url":"https://avatars.githubusercontent.com/u/5512772?v=4","gravatar_id":"","url":"https://api.github.com/users/nvasilevski","html_url":"https://github.com/nvasilevski","followers_url":"https://api.github.com/users/nvasilevski/followers","following_url":"https://api.github.com/users/nvasilevski/following{/other_user}","gists_url":"https://api.github.com/users/nvasilevski/gists{/gist_id}","starred_url":"https://api.github.com/users/nvasilevski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nvasilevski/subscriptions","organizations_url":"https://api.github.com/users/nvasilevski/orgs","repos_url":"https://api.github.com/users/nvasilevski/repos","events_url":"https://api.github.com/users/nvasilevski/events{/privacy}","received_events_url":"https://api.github.com/users/nvasilevski/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1839360530","html_url":"https://github.com/rails/rails/issues/50256#issuecomment-1839360530","issue_url":"https://api.github.com/repos/rails/rails/issues/50256","id":1839360530,"node_id":"IC_kwDNIULObaJqEg","user":{"login":"iamradioactive","id":13816206,"node_id":"MDQ6VXNlcjEzODE2MjA2","avatar_url":"https://avatars.githubusercontent.com/u/13816206?v=4","gravatar_id":"","url":"https://api.github.com/users/iamradioactive","html_url":"https://github.com/iamradioactive","followers_url":"https://api.github.com/users/iamradioactive/followers","following_url":"https://api.github.com/users/iamradioactive/following{/other_user}","gists_url":"https://api.github.com/users/iamradioactive/gists{/gist_id}","starred_url":"https://api.github.com/users/iamradioactive/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamradioactive/subscriptions","organizations_url":"https://api.github.com/users/iamradioactive/orgs","repos_url":"https://api.github.com/users/iamradioactive/repos","events_url":"https://api.github.com/users/iamradioactive/events{/privacy}","received_events_url":"https://api.github.com/users/iamradioactive/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-04T19:44:32Z","updated_at":"2023-12-04T19:44:32Z","body":"I have identified the root cause for this issue. This [method](https://github.com/rails/rails/blob/main/activerecord/lib/active_record/associations/belongs_to_association.rb#L150) is used to trigger a reload if the foreign key changes. Current logic is unable to handle the case of Composite foreign keys. I can open a PR for the changes.\r\n\r\nIt's output doesn't seem to be getting used for anything other than comparison with it's previous output. If that's the case, we can just simply return the array of composite foreign keys, maybe joined as a string.\r\n\r\nAfter this update, a reload will be triggered if any of the composite foreign key changes. Ideally it should, I haven't really thought about it much, but I can't think of a situation where it should not.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1839360530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"iamradioactive","id":13816206,"node_id":"MDQ6VXNlcjEzODE2MjA2","avatar_url":"https://avatars.githubusercontent.com/u/13816206?v=4","gravatar_id":"","url":"https://api.github.com/users/iamradioactive","html_url":"https://github.com/iamradioactive","followers_url":"https://api.github.com/users/iamradioactive/followers","following_url":"https://api.github.com/users/iamradioactive/following{/other_user}","gists_url":"https://api.github.com/users/iamradioactive/gists{/gist_id}","starred_url":"https://api.github.com/users/iamradioactive/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamradioactive/subscriptions","organizations_url":"https://api.github.com/users/iamradioactive/orgs","repos_url":"https://api.github.com/users/iamradioactive/repos","events_url":"https://api.github.com/users/iamradioactive/events{/privacy}","received_events_url":"https://api.github.com/users/iamradioactive/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11185360487,"node_id":"REFE_lADNIULOeI87WM8AAAACmrMOZw","url":"https://api.github.com/repos/rails/rails/issues/events/11185360487","actor":{"login":"iamradioactive","id":13816206,"node_id":"MDQ6VXNlcjEzODE2MjA2","avatar_url":"https://avatars.githubusercontent.com/u/13816206?v=4","gravatar_id":"","url":"https://api.github.com/users/iamradioactive","html_url":"https://github.com/iamradioactive","followers_url":"https://api.github.com/users/iamradioactive/followers","following_url":"https://api.github.com/users/iamradioactive/following{/other_user}","gists_url":"https://api.github.com/users/iamradioactive/gists{/gist_id}","starred_url":"https://api.github.com/users/iamradioactive/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamradioactive/subscriptions","organizations_url":"https://api.github.com/users/iamradioactive/orgs","repos_url":"https://api.github.com/users/iamradioactive/repos","events_url":"https://api.github.com/users/iamradioactive/events{/privacy}","received_events_url":"https://api.github.com/users/iamradioactive/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"473c8a13506b319ef362a8c35deefc69120ff689","commit_url":"https://api.github.com/repos/iamradioactive/rails/commits/473c8a13506b319ef362a8c35deefc69120ff689","created_at":"2023-12-07T18:12:55Z","performed_via_github_app":null},{"id":11185395594,"node_id":"REFE_lADNIULOeI87WM8AAAACmrOXig","url":"https://api.github.com/repos/rails/rails/issues/events/11185395594","actor":{"login":"iamradioactive","id":13816206,"node_id":"MDQ6VXNlcjEzODE2MjA2","avatar_url":"https://avatars.githubusercontent.com/u/13816206?v=4","gravatar_id":"","url":"https://api.github.com/users/iamradioactive","html_url":"https://github.com/iamradioactive","followers_url":"https://api.github.com/users/iamradioactive/followers","following_url":"https://api.github.com/users/iamradioactive/following{/other_user}","gists_url":"https://api.github.com/users/iamradioactive/gists{/gist_id}","starred_url":"https://api.github.com/users/iamradioactive/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamradioactive/subscriptions","organizations_url":"https://api.github.com/users/iamradioactive/orgs","repos_url":"https://api.github.com/users/iamradioactive/repos","events_url":"https://api.github.com/users/iamradioactive/events{/privacy}","received_events_url":"https://api.github.com/users/iamradioactive/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f19dab1e6e89adeb28bc082536e64afb6e2cea0b","commit_url":"https://api.github.com/repos/iamradioactive/rails/commits/f19dab1e6e89adeb28bc082536e64afb6e2cea0b","created_at":"2023-12-07T18:16:36Z","performed_via_github_app":null},{"actor":{"login":"iamradioactive","id":13816206,"node_id":"MDQ6VXNlcjEzODE2MjA2","avatar_url":"https://avatars.githubusercontent.com/u/13816206?v=4","gravatar_id":"","url":"https://api.github.com/users/iamradioactive","html_url":"https://github.com/iamradioactive","followers_url":"https://api.github.com/users/iamradioactive/followers","following_url":"https://api.github.com/users/iamradioactive/following{/other_user}","gists_url":"https://api.github.com/users/iamradioactive/gists{/gist_id}","starred_url":"https://api.github.com/users/iamradioactive/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamradioactive/subscriptions","organizations_url":"https://api.github.com/users/iamradioactive/orgs","repos_url":"https://api.github.com/users/iamradioactive/repos","events_url":"https://api.github.com/users/iamradioactive/events{/privacy}","received_events_url":"https://api.github.com/users/iamradioactive/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-07T18:36:18Z","updated_at":"2023-12-07T18:36:18Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rails/rails/issues/50297","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/50297/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/50297/comments","events_url":"https://api.github.com/repos/rails/rails/issues/50297/events","html_url":"https://github.com/rails/rails/pull/50297","id":2031320805,"node_id":"PR_kwDNIULOYXQCmg","number":50297,"title":"Fix stale state for composite foreign keys in belongs_to association","user":{"login":"iamradioactive","id":13816206,"node_id":"MDQ6VXNlcjEzODE2MjA2","avatar_url":"https://avatars.githubusercontent.com/u/13816206?v=4","gravatar_id":"","url":"https://api.github.com/users/iamradioactive","html_url":"https://github.com/iamradioactive","followers_url":"https://api.github.com/users/iamradioactive/followers","following_url":"https://api.github.com/users/iamradioactive/following{/other_user}","gists_url":"https://api.github.com/users/iamradioactive/gists{/gist_id}","starred_url":"https://api.github.com/users/iamradioactive/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamradioactive/subscriptions","organizations_url":"https://api.github.com/users/iamradioactive/orgs","repos_url":"https://api.github.com/users/iamradioactive/repos","events_url":"https://api.github.com/users/iamradioactive/events{/privacy}","received_events_url":"https://api.github.com/users/iamradioactive/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":107191,"node_id":"MDU6TGFiZWwxMDcxOTE=","url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2023-12-07T18:36:17Z","updated_at":"2025-04-22T20:19:19Z","closed_at":"2025-04-22T20:10:44Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":8514,"node_id":"MDEwOlJlcG9zaXRvcnk4NTE0","name":"rails","full_name":"rails/rails","private":false,"owner":{"login":"rails","id":4223,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjM=","avatar_url":"https://avatars.githubusercontent.com/u/4223?v=4","gravatar_id":"","url":"https://api.github.com/users/rails","html_url":"https://github.com/rails","followers_url":"https://api.github.com/users/rails/followers","following_url":"https://api.github.com/users/rails/following{/other_user}","gists_url":"https://api.github.com/users/rails/gists{/gist_id}","starred_url":"https://api.github.com/users/rails/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails/subscriptions","organizations_url":"https://api.github.com/users/rails/orgs","repos_url":"https://api.github.com/users/rails/repos","events_url":"https://api.github.com/users/rails/events{/privacy}","received_events_url":"https://api.github.com/users/rails/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rails/rails","description":"Ruby on Rails","fork":false,"url":"https://api.github.com/repos/rails/rails","forks_url":"https://api.github.com/repos/rails/rails/forks","keys_url":"https://api.github.com/repos/rails/rails/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rails/rails/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rails/rails/teams","hooks_url":"https://api.github.com/repos/rails/rails/hooks","issue_events_url":"https://api.github.com/repos/rails/rails/issues/events{/number}","events_url":"https://api.github.com/repos/rails/rails/events","assignees_url":"https://api.github.com/repos/rails/rails/assignees{/user}","branches_url":"https://api.github.com/repos/rails/rails/branches{/branch}","tags_url":"https://api.github.com/repos/rails/rails/tags","blobs_url":"https://api.github.com/repos/rails/rails/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rails/rails/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rails/rails/git/refs{/sha}","trees_url":"https://api.github.com/repos/rails/rails/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rails/rails/statuses/{sha}","languages_url":"https://api.github.com/repos/rails/rails/languages","stargazers_url":"https://api.github.com/repos/rails/rails/stargazers","contributors_url":"https://api.github.com/repos/rails/rails/contributors","subscribers_url":"https://api.github.com/repos/rails/rails/subscribers","subscription_url":"https://api.github.com/repos/rails/rails/subscription","commits_url":"https://api.github.com/repos/rails/rails/commits{/sha}","git_commits_url":"https://api.github.com/repos/rails/rails/git/commits{/sha}","comments_url":"https://api.github.com/repos/rails/rails/comments{/number}","issue_comment_url":"https://api.github.com/repos/rails/rails/issues/comments{/number}","contents_url":"https://api.github.com/repos/rails/rails/contents/{+path}","compare_url":"https://api.github.com/repos/rails/rails/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rails/rails/merges","archive_url":"https://api.github.com/repos/rails/rails/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rails/rails/downloads","issues_url":"https://api.github.com/repos/rails/rails/issues{/number}","pulls_url":"https://api.github.com/repos/rails/rails/pulls{/number}","milestones_url":"https://api.github.com/repos/rails/rails/milestones{/number}","notifications_url":"https://api.github.com/repos/rails/rails/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rails/rails/labels{/name}","releases_url":"https://api.github.com/repos/rails/rails/releases{/id}","deployments_url":"https://api.github.com/repos/rails/rails/deployments","created_at":"2008-04-11T02:19:47Z","updated_at":"2025-11-10T02:03:47Z","pushed_at":"2025-11-10T00:33:52Z","git_url":"git://github.com/rails/rails.git","ssh_url":"git@github.com:rails/rails.git","clone_url":"https://github.com/rails/rails.git","svn_url":"https://github.com/rails/rails","homepage":"https://rubyonrails.org","size":271619,"stargazers_count":57840,"watchers_count":57840,"language":"Ruby","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":22025,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1341,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["activejob","activerecord","framework","html","mvc","rails","ruby"],"visibility":"public","forks":22025,"open_issues":1341,"watchers":57840,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/50297","html_url":"https://github.com/rails/rails/pull/50297","diff_url":"https://github.com/rails/rails/pull/50297.diff","patch_url":"https://github.com/rails/rails/pull/50297.patch","merged_at":"2025-04-22T20:10:44Z"},"body":"<!--\r\nThanks for contributing to Rails!\r\n\r\nPlease do not make *Draft* pull requests, as they still send\r\nnotifications to everyone watching the Rails repo.\r\n\r\nCreate a pull request when it is ready for review and feedback\r\nfrom the Rails team :).\r\n\r\nIf your pull request affects documentation or any non-code\r\nchanges, guidelines for those changes are [available\r\nhere](https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#contributing-to-the-rails-documentation)\r\n\r\nAbout this template\r\n\r\nThe following template aims to help contributors write a good description for their pull requests.\r\nWe'd like you to provide a description of the changes in your pull request (i.e. bugs fixed or features added), motivation behind the changes, and complete the checklist below before opening a pull request.\r\n\r\nFeel free to discard it if you need to (e.g. when you just fix a typo). -->\r\n\r\n### Motivation / Background\r\n\r\n<!--\r\nDescribe why this Pull Request needs to be merged. What bug have you fixed? What feature have you added? Why is it important?\r\nIf you are fixing a specific issue, include \"Fixes #ISSUE\" (replace with the issue number, remove the quotes) and the issue will be linked to this PR.\r\n-->\r\n\r\nFixes #50256 \r\nFixes #51231\r\n\r\n**Context :** \r\n- A Model having query constraints and a belongs_to association.\r\n- Associated record is loaded once.\r\n\r\n**Action :** \r\n- Update Foreign key for the belongs_to association.\r\n- Call `model.association` to refer to the associated object.\r\n\r\n**Current Behaviour:**\r\n- State is not changed and no reload is triggered.\r\n- Association still points to the old record.\r\n\r\n**Updated Behaviour:**\r\n- State is updated and reload is triggered.\r\n- Association points to the updated record.\r\n\r\n### Detail\r\n\r\nThis Pull Request updates `stale_state` method in `belongs_to association` to handle composite foreign keys\r\n\r\n### Additional information\r\n\r\n<!-- Provide additional information such as benchmarks, reference to other repositories or alternative solutions. -->\r\n\r\nFor Additional context Please refer to #50256 \r\n\r\n### ~Dependency~\r\n- ~This PR has a dependency on #50347 and is to be merged after those changes are approved and merged.~\r\n- ~It is an independent bug, however when the stale state is updated correctly it results in loss of information because of the bug to be fixed in the mentioned PR.~\r\n- ~Please refer to this [comment](https://github.com/rails/rails/pull/50297#issuecomment-1852817664) for additional description.~\r\n\r\n### Checklist\r\n\r\nBefore submitting the PR make sure the following are checked:\r\n\r\n* [x] This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.\r\n* [x] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: `[Fix #issue-number]`\r\n* [x] Tests are added or updated if you fix a bug or add a feature.\r\n* [ ] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.\r\n","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/50297/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":2,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/rails/issues/50297/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1848420727","html_url":"https://github.com/rails/rails/issues/50256#issuecomment-1848420727","issue_url":"https://api.github.com/repos/rails/rails/issues/50256","id":1848420727,"node_id":"IC_kwDNIULObiypdw","user":{"login":"yosiat","id":306253,"node_id":"MDQ6VXNlcjMwNjI1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/306253?v=4","gravatar_id":"","url":"https://api.github.com/users/yosiat","html_url":"https://github.com/yosiat","followers_url":"https://api.github.com/users/yosiat/followers","following_url":"https://api.github.com/users/yosiat/following{/other_user}","gists_url":"https://api.github.com/users/yosiat/gists{/gist_id}","starred_url":"https://api.github.com/users/yosiat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yosiat/subscriptions","organizations_url":"https://api.github.com/users/yosiat/orgs","repos_url":"https://api.github.com/users/yosiat/repos","events_url":"https://api.github.com/users/yosiat/events{/privacy}","received_events_url":"https://api.github.com/users/yosiat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-09T14:07:28Z","updated_at":"2023-12-09T14:07:28Z","body":"Hi @iamradioactive \r\n\r\nI tested your specific PR on my project and looks like it fixes some tests, thanks for it!\r\nI opened another bug regarding `query_constraints` https://github.com/rails/rails/issues/50310 - I tried to test with your branch but it didn't fixes it.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1848420727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yosiat","id":306253,"node_id":"MDQ6VXNlcjMwNjI1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/306253?v=4","gravatar_id":"","url":"https://api.github.com/users/yosiat","html_url":"https://github.com/yosiat","followers_url":"https://api.github.com/users/yosiat/followers","following_url":"https://api.github.com/users/yosiat/following{/other_user}","gists_url":"https://api.github.com/users/yosiat/gists{/gist_id}","starred_url":"https://api.github.com/users/yosiat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yosiat/subscriptions","organizations_url":"https://api.github.com/users/yosiat/orgs","repos_url":"https://api.github.com/users/yosiat/repos","events_url":"https://api.github.com/users/yosiat/events{/privacy}","received_events_url":"https://api.github.com/users/yosiat/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11200655923,"node_id":"MEE_lADNIULOeI87WM8AAAACm5xyMw","url":"https://api.github.com/repos/rails/rails/issues/events/11200655923","actor":{"login":"iamradioactive","id":13816206,"node_id":"MDQ6VXNlcjEzODE2MjA2","avatar_url":"https://avatars.githubusercontent.com/u/13816206?v=4","gravatar_id":"","url":"https://api.github.com/users/iamradioactive","html_url":"https://github.com/iamradioactive","followers_url":"https://api.github.com/users/iamradioactive/followers","following_url":"https://api.github.com/users/iamradioactive/following{/other_user}","gists_url":"https://api.github.com/users/iamradioactive/gists{/gist_id}","starred_url":"https://api.github.com/users/iamradioactive/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamradioactive/subscriptions","organizations_url":"https://api.github.com/users/iamradioactive/orgs","repos_url":"https://api.github.com/users/iamradioactive/repos","events_url":"https://api.github.com/users/iamradioactive/events{/privacy}","received_events_url":"https://api.github.com/users/iamradioactive/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-12-09T14:07:29Z","performed_via_github_app":null},{"id":11200655928,"node_id":"SE_lADNIULOeI87WM8AAAACm5xyOA","url":"https://api.github.com/repos/rails/rails/issues/events/11200655928","actor":{"login":"iamradioactive","id":13816206,"node_id":"MDQ6VXNlcjEzODE2MjA2","avatar_url":"https://avatars.githubusercontent.com/u/13816206?v=4","gravatar_id":"","url":"https://api.github.com/users/iamradioactive","html_url":"https://github.com/iamradioactive","followers_url":"https://api.github.com/users/iamradioactive/followers","following_url":"https://api.github.com/users/iamradioactive/following{/other_user}","gists_url":"https://api.github.com/users/iamradioactive/gists{/gist_id}","starred_url":"https://api.github.com/users/iamradioactive/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamradioactive/subscriptions","organizations_url":"https://api.github.com/users/iamradioactive/orgs","repos_url":"https://api.github.com/users/iamradioactive/repos","events_url":"https://api.github.com/users/iamradioactive/events{/privacy}","received_events_url":"https://api.github.com/users/iamradioactive/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-12-09T14:07:29Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1848618006","html_url":"https://github.com/rails/rails/issues/50256#issuecomment-1848618006","issue_url":"https://api.github.com/repos/rails/rails/issues/50256","id":1848618006,"node_id":"IC_kwDNIULObi-sFg","user":{"login":"iamradioactive","id":13816206,"node_id":"MDQ6VXNlcjEzODE2MjA2","avatar_url":"https://avatars.githubusercontent.com/u/13816206?v=4","gravatar_id":"","url":"https://api.github.com/users/iamradioactive","html_url":"https://github.com/iamradioactive","followers_url":"https://api.github.com/users/iamradioactive/followers","following_url":"https://api.github.com/users/iamradioactive/following{/other_user}","gists_url":"https://api.github.com/users/iamradioactive/gists{/gist_id}","starred_url":"https://api.github.com/users/iamradioactive/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamradioactive/subscriptions","organizations_url":"https://api.github.com/users/iamradioactive/orgs","repos_url":"https://api.github.com/users/iamradioactive/repos","events_url":"https://api.github.com/users/iamradioactive/events{/privacy}","received_events_url":"https://api.github.com/users/iamradioactive/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-09T19:10:59Z","updated_at":"2023-12-09T19:10:59Z","body":"@yosiat , Thanks. I found another issue with Query constraints while working on a fix for this one and was already working on it. I have created an issue now so that others are aware of it, hoping it will help us find any other issues if they exist.\r\n\r\nReferenced issue: #50315","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1848618006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"iamradioactive","id":13816206,"node_id":"MDQ6VXNlcjEzODE2MjA2","avatar_url":"https://avatars.githubusercontent.com/u/13816206?v=4","gravatar_id":"","url":"https://api.github.com/users/iamradioactive","html_url":"https://github.com/iamradioactive","followers_url":"https://api.github.com/users/iamradioactive/followers","following_url":"https://api.github.com/users/iamradioactive/following{/other_user}","gists_url":"https://api.github.com/users/iamradioactive/gists{/gist_id}","starred_url":"https://api.github.com/users/iamradioactive/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamradioactive/subscriptions","organizations_url":"https://api.github.com/users/iamradioactive/orgs","repos_url":"https://api.github.com/users/iamradioactive/repos","events_url":"https://api.github.com/users/iamradioactive/events{/privacy}","received_events_url":"https://api.github.com/users/iamradioactive/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11201280026,"node_id":"MEE_lADNIULOeI87WM8AAAACm6X4Gg","url":"https://api.github.com/repos/rails/rails/issues/events/11201280026","actor":{"login":"yosiat","id":306253,"node_id":"MDQ6VXNlcjMwNjI1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/306253?v=4","gravatar_id":"","url":"https://api.github.com/users/yosiat","html_url":"https://github.com/yosiat","followers_url":"https://api.github.com/users/yosiat/followers","following_url":"https://api.github.com/users/yosiat/following{/other_user}","gists_url":"https://api.github.com/users/yosiat/gists{/gist_id}","starred_url":"https://api.github.com/users/yosiat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yosiat/subscriptions","organizations_url":"https://api.github.com/users/yosiat/orgs","repos_url":"https://api.github.com/users/yosiat/repos","events_url":"https://api.github.com/users/yosiat/events{/privacy}","received_events_url":"https://api.github.com/users/yosiat/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-12-09T19:10:59Z","performed_via_github_app":null},{"id":11201280030,"node_id":"SE_lADNIULOeI87WM8AAAACm6X4Hg","url":"https://api.github.com/repos/rails/rails/issues/events/11201280030","actor":{"login":"yosiat","id":306253,"node_id":"MDQ6VXNlcjMwNjI1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/306253?v=4","gravatar_id":"","url":"https://api.github.com/users/yosiat","html_url":"https://github.com/yosiat","followers_url":"https://api.github.com/users/yosiat/followers","following_url":"https://api.github.com/users/yosiat/following{/other_user}","gists_url":"https://api.github.com/users/yosiat/gists{/gist_id}","starred_url":"https://api.github.com/users/yosiat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yosiat/subscriptions","organizations_url":"https://api.github.com/users/yosiat/orgs","repos_url":"https://api.github.com/users/yosiat/repos","events_url":"https://api.github.com/users/yosiat/events{/privacy}","received_events_url":"https://api.github.com/users/yosiat/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-12-09T19:10:59Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1851087930","html_url":"https://github.com/rails/rails/issues/50256#issuecomment-1851087930","issue_url":"https://api.github.com/repos/rails/rails/issues/50256","id":1851087930,"node_id":"IC_kwDNIULOblVcOg","user":{"login":"nvasilevski","id":5512772,"node_id":"MDQ6VXNlcjU1MTI3NzI=","avatar_url":"https://avatars.githubusercontent.com/u/5512772?v=4","gravatar_id":"","url":"https://api.github.com/users/nvasilevski","html_url":"https://github.com/nvasilevski","followers_url":"https://api.github.com/users/nvasilevski/followers","following_url":"https://api.github.com/users/nvasilevski/following{/other_user}","gists_url":"https://api.github.com/users/nvasilevski/gists{/gist_id}","starred_url":"https://api.github.com/users/nvasilevski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nvasilevski/subscriptions","organizations_url":"https://api.github.com/users/nvasilevski/orgs","repos_url":"https://api.github.com/users/nvasilevski/repos","events_url":"https://api.github.com/users/nvasilevski/events{/privacy}","received_events_url":"https://api.github.com/users/nvasilevski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-12T00:01:16Z","updated_at":"2023-12-12T00:01:16Z","body":"While I believe that `stale_state` is problematic there is something I noticed about this setup and wanted to point it out.\r\n\r\nIf we remove `query_constraints` from the reproduction script (just to get back to a working setup) accessing `comment.author` inside `on_comment_added` issues a query to get the author. This is surprising because we already have an author instance in-memory and it should have been properly set through the `inverse_of`\r\n\r\nBut it looks like that `inverse_of` config is not being automatically derived, even though Rails should be capable of doing so. Perhaps I'm missing something but anyway after adding explicit `inverse_of: :author` and `inverse_of: :comments` we can avoid unnecessary query when accessing `comment.author`.\r\nHowever if we bring `query_constraints` back along with explicit `inverse_of` this will reveal another bug with automatic association PK calculation:\r\n```ruby\r\n(ruby) Author.new.association(:comments).reflection.join_primary_key\r\n[\"tenant_id\", [\"tenant_id\", \"author_id\"]]\r\n```\r\n\r\nI'll craft a separate reproduction script a bit later.\r\n\r\n@yosiat But after fixing all related issues you should strongly consider making sure that `inverse_of:` is properly set (or automatically derived by Rails, if this is one more bug) to avoid unnecessary query being made inside `on_comment_added`\r\nOr, atlernative, perhaps it would be more correct to get author as `self`, for example:\r\n\r\n```ruby\r\n  def on_comment_added(comment)\r\n    puts \"added comment, the author is: #{comment.author}\"\r\n  end\r\n\r\n  ### should be the same as\r\n\r\n  def on_comment_added(comment)\r\n    puts \"added comment, the author is: #{self}\"\r\n  end\r\n```\r\nWhich should avoid query as well.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1851087930/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nvasilevski","id":5512772,"node_id":"MDQ6VXNlcjU1MTI3NzI=","avatar_url":"https://avatars.githubusercontent.com/u/5512772?v=4","gravatar_id":"","url":"https://api.github.com/users/nvasilevski","html_url":"https://github.com/nvasilevski","followers_url":"https://api.github.com/users/nvasilevski/followers","following_url":"https://api.github.com/users/nvasilevski/following{/other_user}","gists_url":"https://api.github.com/users/nvasilevski/gists{/gist_id}","starred_url":"https://api.github.com/users/nvasilevski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nvasilevski/subscriptions","organizations_url":"https://api.github.com/users/nvasilevski/orgs","repos_url":"https://api.github.com/users/nvasilevski/repos","events_url":"https://api.github.com/users/nvasilevski/events{/privacy}","received_events_url":"https://api.github.com/users/nvasilevski/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11217122301,"node_id":"MEE_lADNIULOeI87WM8AAAACnJez_Q","url":"https://api.github.com/repos/rails/rails/issues/events/11217122301","actor":{"login":"yosiat","id":306253,"node_id":"MDQ6VXNlcjMwNjI1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/306253?v=4","gravatar_id":"","url":"https://api.github.com/users/yosiat","html_url":"https://github.com/yosiat","followers_url":"https://api.github.com/users/yosiat/followers","following_url":"https://api.github.com/users/yosiat/following{/other_user}","gists_url":"https://api.github.com/users/yosiat/gists{/gist_id}","starred_url":"https://api.github.com/users/yosiat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yosiat/subscriptions","organizations_url":"https://api.github.com/users/yosiat/orgs","repos_url":"https://api.github.com/users/yosiat/repos","events_url":"https://api.github.com/users/yosiat/events{/privacy}","received_events_url":"https://api.github.com/users/yosiat/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-12-12T00:01:17Z","performed_via_github_app":null},{"id":11217122308,"node_id":"SE_lADNIULOeI87WM8AAAACnJe0BA","url":"https://api.github.com/repos/rails/rails/issues/events/11217122308","actor":{"login":"yosiat","id":306253,"node_id":"MDQ6VXNlcjMwNjI1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/306253?v=4","gravatar_id":"","url":"https://api.github.com/users/yosiat","html_url":"https://github.com/yosiat","followers_url":"https://api.github.com/users/yosiat/followers","following_url":"https://api.github.com/users/yosiat/following{/other_user}","gists_url":"https://api.github.com/users/yosiat/gists{/gist_id}","starred_url":"https://api.github.com/users/yosiat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yosiat/subscriptions","organizations_url":"https://api.github.com/users/yosiat/orgs","repos_url":"https://api.github.com/users/yosiat/repos","events_url":"https://api.github.com/users/yosiat/events{/privacy}","received_events_url":"https://api.github.com/users/yosiat/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-12-12T00:01:17Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1851109919","html_url":"https://github.com/rails/rails/issues/50256#issuecomment-1851109919","issue_url":"https://api.github.com/repos/rails/rails/issues/50256","id":1851109919,"node_id":"IC_kwDNIULOblWyHw","user":{"login":"skipkayhil","id":6014046,"node_id":"MDQ6VXNlcjYwMTQwNDY=","avatar_url":"https://avatars.githubusercontent.com/u/6014046?v=4","gravatar_id":"","url":"https://api.github.com/users/skipkayhil","html_url":"https://github.com/skipkayhil","followers_url":"https://api.github.com/users/skipkayhil/followers","following_url":"https://api.github.com/users/skipkayhil/following{/other_user}","gists_url":"https://api.github.com/users/skipkayhil/gists{/gist_id}","starred_url":"https://api.github.com/users/skipkayhil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skipkayhil/subscriptions","organizations_url":"https://api.github.com/users/skipkayhil/orgs","repos_url":"https://api.github.com/users/skipkayhil/repos","events_url":"https://api.github.com/users/skipkayhil/events{/privacy}","received_events_url":"https://api.github.com/users/skipkayhil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-12T00:25:44Z","updated_at":"2023-12-12T00:25:44Z","body":"> But it looks like that `inverse_of` config is not being automatically derived, even though Rails should be capable of doing so.\r\n\r\nI think it may be an unfortunate effect of the bug report template (which does not use latest `load_default`). If you enable `has_many_inversing` does it work how you expect?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1851109919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"skipkayhil","id":6014046,"node_id":"MDQ6VXNlcjYwMTQwNDY=","avatar_url":"https://avatars.githubusercontent.com/u/6014046?v=4","gravatar_id":"","url":"https://api.github.com/users/skipkayhil","html_url":"https://github.com/skipkayhil","followers_url":"https://api.github.com/users/skipkayhil/followers","following_url":"https://api.github.com/users/skipkayhil/following{/other_user}","gists_url":"https://api.github.com/users/skipkayhil/gists{/gist_id}","starred_url":"https://api.github.com/users/skipkayhil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skipkayhil/subscriptions","organizations_url":"https://api.github.com/users/skipkayhil/orgs","repos_url":"https://api.github.com/users/skipkayhil/repos","events_url":"https://api.github.com/users/skipkayhil/events{/privacy}","received_events_url":"https://api.github.com/users/skipkayhil/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1851148662","html_url":"https://github.com/rails/rails/issues/50256#issuecomment-1851148662","issue_url":"https://api.github.com/repos/rails/rails/issues/50256","id":1851148662,"node_id":"IC_kwDNIULOblZJdg","user":{"login":"nvasilevski","id":5512772,"node_id":"MDQ6VXNlcjU1MTI3NzI=","avatar_url":"https://avatars.githubusercontent.com/u/5512772?v=4","gravatar_id":"","url":"https://api.github.com/users/nvasilevski","html_url":"https://github.com/nvasilevski","followers_url":"https://api.github.com/users/nvasilevski/followers","following_url":"https://api.github.com/users/nvasilevski/following{/other_user}","gists_url":"https://api.github.com/users/nvasilevski/gists{/gist_id}","starred_url":"https://api.github.com/users/nvasilevski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nvasilevski/subscriptions","organizations_url":"https://api.github.com/users/nvasilevski/orgs","repos_url":"https://api.github.com/users/nvasilevski/repos","events_url":"https://api.github.com/users/nvasilevski/events{/privacy}","received_events_url":"https://api.github.com/users/nvasilevski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-12T01:14:44Z","updated_at":"2023-12-12T01:14:44Z","body":">If you enable has_many_inversing does it work how you expect?\r\n\r\nIt does! That's a great catch, thank you!\r\n\r\nNevermind my comment about `inverse_of:` then. I'll investigate what was wrong in my reproduction that caused `join_primary_key` to be messed up but if I won't be able to have a reproduction using some meaningful flow I'll consider this to be just my mistake","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1851148662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nvasilevski","id":5512772,"node_id":"MDQ6VXNlcjU1MTI3NzI=","avatar_url":"https://avatars.githubusercontent.com/u/5512772?v=4","gravatar_id":"","url":"https://api.github.com/users/nvasilevski","html_url":"https://github.com/nvasilevski","followers_url":"https://api.github.com/users/nvasilevski/followers","following_url":"https://api.github.com/users/nvasilevski/following{/other_user}","gists_url":"https://api.github.com/users/nvasilevski/gists{/gist_id}","starred_url":"https://api.github.com/users/nvasilevski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nvasilevski/subscriptions","organizations_url":"https://api.github.com/users/nvasilevski/orgs","repos_url":"https://api.github.com/users/nvasilevski/repos","events_url":"https://api.github.com/users/nvasilevski/events{/privacy}","received_events_url":"https://api.github.com/users/nvasilevski/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1858607595","html_url":"https://github.com/rails/rails/issues/50256#issuecomment-1858607595","issue_url":"https://api.github.com/repos/rails/rails/issues/50256","id":1858607595,"node_id":"IC_kwDNIULObsgZ6w","user":{"login":"rubyrider","id":417169,"node_id":"MDQ6VXNlcjQxNzE2OQ==","avatar_url":"https://avatars.githubusercontent.com/u/417169?v=4","gravatar_id":"","url":"https://api.github.com/users/rubyrider","html_url":"https://github.com/rubyrider","followers_url":"https://api.github.com/users/rubyrider/followers","following_url":"https://api.github.com/users/rubyrider/following{/other_user}","gists_url":"https://api.github.com/users/rubyrider/gists{/gist_id}","starred_url":"https://api.github.com/users/rubyrider/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rubyrider/subscriptions","organizations_url":"https://api.github.com/users/rubyrider/orgs","repos_url":"https://api.github.com/users/rubyrider/repos","events_url":"https://api.github.com/users/rubyrider/events{/privacy}","received_events_url":"https://api.github.com/users/rubyrider/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-15T23:32:34Z","updated_at":"2023-12-16T17:02:52Z","body":"This is rather a bug of #foreign_key which I suggest https://github.com/rubyrider/rails/pull/2/files to @iamradioactive as his pull request was trying to fix it in the query constraints. \r\n\r\nThe foreign key supposed to handle the query constraints method which return as an array. Let me know if you see my point. \r\n\r\n<img width=\"1129\" alt=\"Screenshot 2023-12-16 at 12 02 32 AM\" src=\"https://github.com/rails/rails/assets/417169/32fe7c5a-8d2b-4613-aa2b-7f5eb6fbb373\">\r\n\r\nMy pull request: https://github.com/rails/rails/pull/50372\r\n\r\nI expect this will fix this issue as well.\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1858607595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rubyrider","id":417169,"node_id":"MDQ6VXNlcjQxNzE2OQ==","avatar_url":"https://avatars.githubusercontent.com/u/417169?v=4","gravatar_id":"","url":"https://api.github.com/users/rubyrider","html_url":"https://github.com/rubyrider","followers_url":"https://api.github.com/users/rubyrider/followers","following_url":"https://api.github.com/users/rubyrider/following{/other_user}","gists_url":"https://api.github.com/users/rubyrider/gists{/gist_id}","starred_url":"https://api.github.com/users/rubyrider/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rubyrider/subscriptions","organizations_url":"https://api.github.com/users/rubyrider/orgs","repos_url":"https://api.github.com/users/rubyrider/repos","events_url":"https://api.github.com/users/rubyrider/events{/privacy}","received_events_url":"https://api.github.com/users/rubyrider/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11264378501,"node_id":"MEE_lADNIULOeI87WM8AAAACn2jGhQ","url":"https://api.github.com/repos/rails/rails/issues/events/11264378501","actor":{"login":"iamradioactive","id":13816206,"node_id":"MDQ6VXNlcjEzODE2MjA2","avatar_url":"https://avatars.githubusercontent.com/u/13816206?v=4","gravatar_id":"","url":"https://api.github.com/users/iamradioactive","html_url":"https://github.com/iamradioactive","followers_url":"https://api.github.com/users/iamradioactive/followers","following_url":"https://api.github.com/users/iamradioactive/following{/other_user}","gists_url":"https://api.github.com/users/iamradioactive/gists{/gist_id}","starred_url":"https://api.github.com/users/iamradioactive/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamradioactive/subscriptions","organizations_url":"https://api.github.com/users/iamradioactive/orgs","repos_url":"https://api.github.com/users/iamradioactive/repos","events_url":"https://api.github.com/users/iamradioactive/events{/privacy}","received_events_url":"https://api.github.com/users/iamradioactive/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-12-15T23:32:34Z","performed_via_github_app":null},{"id":11264378510,"node_id":"SE_lADNIULOeI87WM8AAAACn2jGjg","url":"https://api.github.com/repos/rails/rails/issues/events/11264378510","actor":{"login":"iamradioactive","id":13816206,"node_id":"MDQ6VXNlcjEzODE2MjA2","avatar_url":"https://avatars.githubusercontent.com/u/13816206?v=4","gravatar_id":"","url":"https://api.github.com/users/iamradioactive","html_url":"https://github.com/iamradioactive","followers_url":"https://api.github.com/users/iamradioactive/followers","following_url":"https://api.github.com/users/iamradioactive/following{/other_user}","gists_url":"https://api.github.com/users/iamradioactive/gists{/gist_id}","starred_url":"https://api.github.com/users/iamradioactive/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamradioactive/subscriptions","organizations_url":"https://api.github.com/users/iamradioactive/orgs","repos_url":"https://api.github.com/users/iamradioactive/repos","events_url":"https://api.github.com/users/iamradioactive/events{/privacy}","received_events_url":"https://api.github.com/users/iamradioactive/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-12-15T23:32:34Z","performed_via_github_app":null},{"actor":{"login":"rubyrider","id":417169,"node_id":"MDQ6VXNlcjQxNzE2OQ==","avatar_url":"https://avatars.githubusercontent.com/u/417169?v=4","gravatar_id":"","url":"https://api.github.com/users/rubyrider","html_url":"https://github.com/rubyrider","followers_url":"https://api.github.com/users/rubyrider/followers","following_url":"https://api.github.com/users/rubyrider/following{/other_user}","gists_url":"https://api.github.com/users/rubyrider/gists{/gist_id}","starred_url":"https://api.github.com/users/rubyrider/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rubyrider/subscriptions","organizations_url":"https://api.github.com/users/rubyrider/orgs","repos_url":"https://api.github.com/users/rubyrider/repos","events_url":"https://api.github.com/users/rubyrider/events{/privacy}","received_events_url":"https://api.github.com/users/rubyrider/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-16T17:03:13Z","updated_at":"2023-12-16T17:03:13Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rails/rails/issues/50372","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/50372/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/50372/comments","events_url":"https://api.github.com/repos/rails/rails/issues/50372/events","html_url":"https://github.com/rails/rails/pull/50372","id":2044858265,"node_id":"PR_kwDNIULOYiuV7g","number":50372,"title":" Fix bug #50315: Foreign key don't handle derive_fk_query_constraints properly.","user":{"login":"rubyrider","id":417169,"node_id":"MDQ6VXNlcjQxNzE2OQ==","avatar_url":"https://avatars.githubusercontent.com/u/417169?v=4","gravatar_id":"","url":"https://api.github.com/users/rubyrider","html_url":"https://github.com/rubyrider","followers_url":"https://api.github.com/users/rubyrider/followers","following_url":"https://api.github.com/users/rubyrider/following{/other_user}","gists_url":"https://api.github.com/users/rubyrider/gists{/gist_id}","starred_url":"https://api.github.com/users/rubyrider/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rubyrider/subscriptions","organizations_url":"https://api.github.com/users/rubyrider/orgs","repos_url":"https://api.github.com/users/rubyrider/repos","events_url":"https://api.github.com/users/rubyrider/events{/privacy}","received_events_url":"https://api.github.com/users/rubyrider/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":107191,"node_id":"MDU6TGFiZWwxMDcxOTE=","url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-12-16T16:56:57Z","updated_at":"2023-12-19T19:47:47Z","closed_at":"2023-12-19T19:47:40Z","author_association":"NONE","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":8514,"node_id":"MDEwOlJlcG9zaXRvcnk4NTE0","name":"rails","full_name":"rails/rails","private":false,"owner":{"login":"rails","id":4223,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjM=","avatar_url":"https://avatars.githubusercontent.com/u/4223?v=4","gravatar_id":"","url":"https://api.github.com/users/rails","html_url":"https://github.com/rails","followers_url":"https://api.github.com/users/rails/followers","following_url":"https://api.github.com/users/rails/following{/other_user}","gists_url":"https://api.github.com/users/rails/gists{/gist_id}","starred_url":"https://api.github.com/users/rails/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails/subscriptions","organizations_url":"https://api.github.com/users/rails/orgs","repos_url":"https://api.github.com/users/rails/repos","events_url":"https://api.github.com/users/rails/events{/privacy}","received_events_url":"https://api.github.com/users/rails/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rails/rails","description":"Ruby on Rails","fork":false,"url":"https://api.github.com/repos/rails/rails","forks_url":"https://api.github.com/repos/rails/rails/forks","keys_url":"https://api.github.com/repos/rails/rails/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rails/rails/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rails/rails/teams","hooks_url":"https://api.github.com/repos/rails/rails/hooks","issue_events_url":"https://api.github.com/repos/rails/rails/issues/events{/number}","events_url":"https://api.github.com/repos/rails/rails/events","assignees_url":"https://api.github.com/repos/rails/rails/assignees{/user}","branches_url":"https://api.github.com/repos/rails/rails/branches{/branch}","tags_url":"https://api.github.com/repos/rails/rails/tags","blobs_url":"https://api.github.com/repos/rails/rails/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rails/rails/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rails/rails/git/refs{/sha}","trees_url":"https://api.github.com/repos/rails/rails/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rails/rails/statuses/{sha}","languages_url":"https://api.github.com/repos/rails/rails/languages","stargazers_url":"https://api.github.com/repos/rails/rails/stargazers","contributors_url":"https://api.github.com/repos/rails/rails/contributors","subscribers_url":"https://api.github.com/repos/rails/rails/subscribers","subscription_url":"https://api.github.com/repos/rails/rails/subscription","commits_url":"https://api.github.com/repos/rails/rails/commits{/sha}","git_commits_url":"https://api.github.com/repos/rails/rails/git/commits{/sha}","comments_url":"https://api.github.com/repos/rails/rails/comments{/number}","issue_comment_url":"https://api.github.com/repos/rails/rails/issues/comments{/number}","contents_url":"https://api.github.com/repos/rails/rails/contents/{+path}","compare_url":"https://api.github.com/repos/rails/rails/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rails/rails/merges","archive_url":"https://api.github.com/repos/rails/rails/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rails/rails/downloads","issues_url":"https://api.github.com/repos/rails/rails/issues{/number}","pulls_url":"https://api.github.com/repos/rails/rails/pulls{/number}","milestones_url":"https://api.github.com/repos/rails/rails/milestones{/number}","notifications_url":"https://api.github.com/repos/rails/rails/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rails/rails/labels{/name}","releases_url":"https://api.github.com/repos/rails/rails/releases{/id}","deployments_url":"https://api.github.com/repos/rails/rails/deployments","created_at":"2008-04-11T02:19:47Z","updated_at":"2025-11-10T02:03:47Z","pushed_at":"2025-11-10T00:33:52Z","git_url":"git://github.com/rails/rails.git","ssh_url":"git@github.com:rails/rails.git","clone_url":"https://github.com/rails/rails.git","svn_url":"https://github.com/rails/rails","homepage":"https://rubyonrails.org","size":271619,"stargazers_count":57840,"watchers_count":57840,"language":"Ruby","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":22025,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1341,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["activejob","activerecord","framework","html","mvc","rails","ruby"],"visibility":"public","forks":22025,"open_issues":1341,"watchers":57840,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/50372","html_url":"https://github.com/rails/rails/pull/50372","diff_url":"https://github.com/rails/rails/pull/50372.diff","patch_url":"https://github.com/rails/rails/pull/50372.patch","merged_at":null},"body":"This Pull Request fix the bug https://github.com/rails/rails/issues/50315\r\n\r\npossibly could fix this issue https://github.com/rails/rails/issues/50256 as well.\r\n\r\n### Detail\r\n\r\nForeign key don't handle derive_fk_query_constraints properly. \r\n\r\n### Additional information\r\n\r\nHere `#derive_fk_query_constraints` returns an array of two keys. But foreign key should only return the derived foreign key which is the last element of the #derive_fk_query_constraints.\r\n\r\n```ruby\r\n     def foreign_key(infer_from_inverse_of: true)\r\n        @foreign_key ||= if options[:query_constraints]\r\n          options[:query_constraints].map { |fk| fk.to_s.freeze }.freeze\r\n        elsif options[:foreign_key]\r\n          options[:foreign_key].to_s\r\n        else\r\n          derived_fk = derive_foreign_key(infer_from_inverse_of: infer_from_inverse_of)\r\n\r\n          if active_record.has_query_constraints?\r\n            derived_fk = derive_fk_query_constraints(derived_fk).last\r\n          end\r\n\r\n          derived_fk\r\n        end\r\n      end\r\n```\r\n\r\nA test coverage has been provided: https://github.com/rails/rails/pull/50372/files#diff-62fd84c8da9a63fa077a6fdea8acaac0df9e275b580aa1359a5c9416077fcd60R502\r\n\r\n### Checklist\r\n\r\nBefore submitting the PR make sure the following are checked:\r\n\r\n* [ ] This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.\r\n* [ ] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: `[Fix #issue-number]`\r\n* [x] Tests are added or updated if you fix a bug or add a feature.\r\n* [ ] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.\r\n","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/50372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/rails/issues/50372/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":11401223677,"node_id":"REFE_lADNIULOeI87WM8AAAACp5Dd_Q","url":"https://api.github.com/repos/rails/rails/issues/events/11401223677","actor":{"login":"yosiat","id":306253,"node_id":"MDQ6VXNlcjMwNjI1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/306253?v=4","gravatar_id":"","url":"https://api.github.com/users/yosiat","html_url":"https://github.com/yosiat","followers_url":"https://api.github.com/users/yosiat/followers","following_url":"https://api.github.com/users/yosiat/following{/other_user}","gists_url":"https://api.github.com/users/yosiat/gists{/gist_id}","starred_url":"https://api.github.com/users/yosiat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yosiat/subscriptions","organizations_url":"https://api.github.com/users/yosiat/orgs","repos_url":"https://api.github.com/users/yosiat/repos","events_url":"https://api.github.com/users/yosiat/events{/privacy}","received_events_url":"https://api.github.com/users/yosiat/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"76cc1308e0b48f1994d3e3dc3ab738a8fe76ab41","commit_url":"https://api.github.com/repos/yosiat/rails/commits/76cc1308e0b48f1994d3e3dc3ab738a8fe76ab41","created_at":"2024-01-05T13:29:33Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1931971133","html_url":"https://github.com/rails/rails/issues/50256#issuecomment-1931971133","issue_url":"https://api.github.com/repos/rails/rails/issues/50256","id":1931971133,"node_id":"IC_kwDNIULOcyeKPQ","user":{"login":"iamradioactive","id":13816206,"node_id":"MDQ6VXNlcjEzODE2MjA2","avatar_url":"https://avatars.githubusercontent.com/u/13816206?v=4","gravatar_id":"","url":"https://api.github.com/users/iamradioactive","html_url":"https://github.com/iamradioactive","followers_url":"https://api.github.com/users/iamradioactive/followers","following_url":"https://api.github.com/users/iamradioactive/following{/other_user}","gists_url":"https://api.github.com/users/iamradioactive/gists{/gist_id}","starred_url":"https://api.github.com/users/iamradioactive/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamradioactive/subscriptions","organizations_url":"https://api.github.com/users/iamradioactive/orgs","repos_url":"https://api.github.com/users/iamradioactive/repos","events_url":"https://api.github.com/users/iamradioactive/events{/privacy}","received_events_url":"https://api.github.com/users/iamradioactive/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-07T12:43:44Z","updated_at":"2024-02-07T12:43:44Z","body":"> This is rather a bug of #foreign_key which I suggest https://github.com/rubyrider/rails/pull/2/files to @iamradioactive as his pull request was trying to fix it in the query constraints.\r\n> \r\n> The foreign key supposed to handle the query constraints method which return as an array. Let me know if you see my point.\r\n> \r\n>\r\n> My pull request: #50372\r\n> \r\n> I expect this will fix this issue as well.\r\n\r\n**Update:** \r\n- It is an independent bug in itself.\r\n- This conversation was already resolved on another PR . Dropping a comment here in order to avoid the confusion.\r\n- Reference : #50347","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1931971133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"iamradioactive","id":13816206,"node_id":"MDQ6VXNlcjEzODE2MjA2","avatar_url":"https://avatars.githubusercontent.com/u/13816206?v=4","gravatar_id":"","url":"https://api.github.com/users/iamradioactive","html_url":"https://github.com/iamradioactive","followers_url":"https://api.github.com/users/iamradioactive/followers","following_url":"https://api.github.com/users/iamradioactive/following{/other_user}","gists_url":"https://api.github.com/users/iamradioactive/gists{/gist_id}","starred_url":"https://api.github.com/users/iamradioactive/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamradioactive/subscriptions","organizations_url":"https://api.github.com/users/iamradioactive/orgs","repos_url":"https://api.github.com/users/iamradioactive/repos","events_url":"https://api.github.com/users/iamradioactive/events{/privacy}","received_events_url":"https://api.github.com/users/iamradioactive/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11731897872,"node_id":"MEE_lADNIULOeI87WM8AAAACu0aOEA","url":"https://api.github.com/repos/rails/rails/issues/events/11731897872","actor":{"login":"iamradioactive","id":13816206,"node_id":"MDQ6VXNlcjEzODE2MjA2","avatar_url":"https://avatars.githubusercontent.com/u/13816206?v=4","gravatar_id":"","url":"https://api.github.com/users/iamradioactive","html_url":"https://github.com/iamradioactive","followers_url":"https://api.github.com/users/iamradioactive/followers","following_url":"https://api.github.com/users/iamradioactive/following{/other_user}","gists_url":"https://api.github.com/users/iamradioactive/gists{/gist_id}","starred_url":"https://api.github.com/users/iamradioactive/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamradioactive/subscriptions","organizations_url":"https://api.github.com/users/iamradioactive/orgs","repos_url":"https://api.github.com/users/iamradioactive/repos","events_url":"https://api.github.com/users/iamradioactive/events{/privacy}","received_events_url":"https://api.github.com/users/iamradioactive/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-02-07T12:43:45Z","performed_via_github_app":null},{"id":11731897883,"node_id":"SE_lADNIULOeI87WM8AAAACu0aOGw","url":"https://api.github.com/repos/rails/rails/issues/events/11731897883","actor":{"login":"iamradioactive","id":13816206,"node_id":"MDQ6VXNlcjEzODE2MjA2","avatar_url":"https://avatars.githubusercontent.com/u/13816206?v=4","gravatar_id":"","url":"https://api.github.com/users/iamradioactive","html_url":"https://github.com/iamradioactive","followers_url":"https://api.github.com/users/iamradioactive/followers","following_url":"https://api.github.com/users/iamradioactive/following{/other_user}","gists_url":"https://api.github.com/users/iamradioactive/gists{/gist_id}","starred_url":"https://api.github.com/users/iamradioactive/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamradioactive/subscriptions","organizations_url":"https://api.github.com/users/iamradioactive/orgs","repos_url":"https://api.github.com/users/iamradioactive/repos","events_url":"https://api.github.com/users/iamradioactive/events{/privacy}","received_events_url":"https://api.github.com/users/iamradioactive/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-02-07T12:43:45Z","performed_via_github_app":null},{"id":11767250939,"node_id":"UE_lADNIULOeI87WM8AAAACvWH_-w","url":"https://api.github.com/repos/rails/rails/issues/events/11767250939","actor":{"login":"dmcge","id":85393840,"node_id":"MDQ6VXNlcjg1MzkzODQw","avatar_url":"https://avatars.githubusercontent.com/u/85393840?v=4","gravatar_id":"","url":"https://api.github.com/users/dmcge","html_url":"https://github.com/dmcge","followers_url":"https://api.github.com/users/dmcge/followers","following_url":"https://api.github.com/users/dmcge/following{/other_user}","gists_url":"https://api.github.com/users/dmcge/gists{/gist_id}","starred_url":"https://api.github.com/users/dmcge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmcge/subscriptions","organizations_url":"https://api.github.com/users/dmcge/orgs","repos_url":"https://api.github.com/users/dmcge/repos","events_url":"https://api.github.com/users/dmcge/events{/privacy}","received_events_url":"https://api.github.com/users/dmcge/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unsubscribed","commit_id":null,"commit_url":null,"created_at":"2024-02-11T14:58:45Z","performed_via_github_app":null},{"id":12040602952,"node_id":"REFE_lADNIULOeI87WM8AAAACza0FSA","url":"https://api.github.com/repos/rails/rails/issues/events/12040602952","actor":{"login":"iamradioactive","id":13816206,"node_id":"MDQ6VXNlcjEzODE2MjA2","avatar_url":"https://avatars.githubusercontent.com/u/13816206?v=4","gravatar_id":"","url":"https://api.github.com/users/iamradioactive","html_url":"https://github.com/iamradioactive","followers_url":"https://api.github.com/users/iamradioactive/followers","following_url":"https://api.github.com/users/iamradioactive/following{/other_user}","gists_url":"https://api.github.com/users/iamradioactive/gists{/gist_id}","starred_url":"https://api.github.com/users/iamradioactive/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamradioactive/subscriptions","organizations_url":"https://api.github.com/users/iamradioactive/orgs","repos_url":"https://api.github.com/users/iamradioactive/repos","events_url":"https://api.github.com/users/iamradioactive/events{/privacy}","received_events_url":"https://api.github.com/users/iamradioactive/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"091a3bdb96e999fc3845d6e5bc801d08fb01c826","commit_url":"https://api.github.com/repos/iamradioactive/rails/commits/091a3bdb96e999fc3845d6e5bc801d08fb01c826","created_at":"2024-03-07T11:08:58Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2098343705","html_url":"https://github.com/rails/rails/issues/50256#issuecomment-2098343705","issue_url":"https://api.github.com/repos/rails/rails/issues/50256","id":2098343705,"node_id":"IC_kwDNIULOfRIvGQ","user":{"login":"rails-bot[bot]","id":28418009,"node_id":"MDM6Qm90Mjg0MTgwMDk=","avatar_url":"https://avatars.githubusercontent.com/in/2272?v=4","gravatar_id":"","url":"https://api.github.com/users/rails-bot%5Bbot%5D","html_url":"https://github.com/apps/rails-bot","followers_url":"https://api.github.com/users/rails-bot%5Bbot%5D/followers","following_url":"https://api.github.com/users/rails-bot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/rails-bot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/rails-bot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails-bot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/rails-bot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/rails-bot%5Bbot%5D/repos","events_url":"https://api.github.com/users/rails-bot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/rails-bot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2024-05-07T12:55:57Z","updated_at":"2024-05-07T12:55:57Z","body":"This issue has been automatically marked as stale because it has not been commented on for at least three months.\nThe resources of the Rails team are limited, and so we are asking for your help.\nIf you can still reproduce this error on the `7-1-stable` branch or on `main`, please reply with all of the information you have about it in order to keep the issue open.\nThank you for all your contributions.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2098343705/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":{"id":2272,"client_id":"Iv1.4067de14c013b49d","slug":"rails-bot","node_id":"MDM6QXBwMjI3Mg==","owner":{"login":"rails","id":4223,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjM=","avatar_url":"https://avatars.githubusercontent.com/u/4223?v=4","gravatar_id":"","url":"https://api.github.com/users/rails","html_url":"https://github.com/rails","followers_url":"https://api.github.com/users/rails/followers","following_url":"https://api.github.com/users/rails/following{/other_user}","gists_url":"https://api.github.com/users/rails/gists{/gist_id}","starred_url":"https://api.github.com/users/rails/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails/subscriptions","organizations_url":"https://api.github.com/users/rails/orgs","repos_url":"https://api.github.com/users/rails/repos","events_url":"https://api.github.com/users/rails/events{/privacy}","received_events_url":"https://api.github.com/users/rails/received_events","type":"Organization","user_view_type":"public","site_admin":false},"name":"rails-bot","description":"Ruby on Rails bot","external_url":"http://rubyonrails.org","html_url":"https://github.com/apps/rails-bot","created_at":"2017-05-05T00:03:58Z","updated_at":"2017-05-15T22:48:54Z","permissions":{"contents":"read","issues":"write","metadata":"read","pull_requests":"write"},"events":["issues","issue_comment","pull_request","pull_request_review","pull_request_review_comment"]},"event":"commented","actor":{"login":"rails-bot[bot]","id":28418009,"node_id":"MDM6Qm90Mjg0MTgwMDk=","avatar_url":"https://avatars.githubusercontent.com/in/2272?v=4","gravatar_id":"","url":"https://api.github.com/users/rails-bot%5Bbot%5D","html_url":"https://github.com/apps/rails-bot","followers_url":"https://api.github.com/users/rails-bot%5Bbot%5D/followers","following_url":"https://api.github.com/users/rails-bot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/rails-bot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/rails-bot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails-bot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/rails-bot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/rails-bot%5Bbot%5D/repos","events_url":"https://api.github.com/users/rails-bot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/rails-bot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false}},{"id":12729174833,"node_id":"LE_lADNIULOeI87WM8AAAAC9rfLMQ","url":"https://api.github.com/repos/rails/rails/issues/events/12729174833","actor":{"login":"rails-bot[bot]","id":28418009,"node_id":"MDM6Qm90Mjg0MTgwMDk=","avatar_url":"https://avatars.githubusercontent.com/in/2272?v=4","gravatar_id":"","url":"https://api.github.com/users/rails-bot%5Bbot%5D","html_url":"https://github.com/apps/rails-bot","followers_url":"https://api.github.com/users/rails-bot%5Bbot%5D/followers","following_url":"https://api.github.com/users/rails-bot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/rails-bot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/rails-bot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails-bot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/rails-bot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/rails-bot%5Bbot%5D/repos","events_url":"https://api.github.com/users/rails-bot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/rails-bot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-05-07T12:55:58Z","label":{"name":"stale","color":"444444"},"performed_via_github_app":null},{"id":12731421566,"node_id":"UNLE_lADNIULOeI87WM8AAAAC9toTfg","url":"https://api.github.com/repos/rails/rails/issues/events/12731421566","actor":{"login":"skipkayhil","id":6014046,"node_id":"MDQ6VXNlcjYwMTQwNDY=","avatar_url":"https://avatars.githubusercontent.com/u/6014046?v=4","gravatar_id":"","url":"https://api.github.com/users/skipkayhil","html_url":"https://github.com/skipkayhil","followers_url":"https://api.github.com/users/skipkayhil/followers","following_url":"https://api.github.com/users/skipkayhil/following{/other_user}","gists_url":"https://api.github.com/users/skipkayhil/gists{/gist_id}","starred_url":"https://api.github.com/users/skipkayhil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skipkayhil/subscriptions","organizations_url":"https://api.github.com/users/skipkayhil/orgs","repos_url":"https://api.github.com/users/skipkayhil/repos","events_url":"https://api.github.com/users/skipkayhil/events{/privacy}","received_events_url":"https://api.github.com/users/skipkayhil/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2024-05-07T15:26:03Z","label":{"name":"stale","color":"444444"},"performed_via_github_app":null}]