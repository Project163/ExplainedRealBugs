[{"url":"https://api.github.com/repos/rails/rails/issues/comments/2603006713","html_url":"https://github.com/rails/rails/issues/54297#issuecomment-2603006713","issue_url":"https://api.github.com/repos/rails/rails/issues/54297","id":2603006713,"node_id":"IC_kwDNIULOmya6-Q","user":{"login":"Edouard-chin","id":8122246,"node_id":"MDQ6VXNlcjgxMjIyNDY=","avatar_url":"https://avatars.githubusercontent.com/u/8122246?v=4","gravatar_id":"","url":"https://api.github.com/users/Edouard-chin","html_url":"https://github.com/Edouard-chin","followers_url":"https://api.github.com/users/Edouard-chin/followers","following_url":"https://api.github.com/users/Edouard-chin/following{/other_user}","gists_url":"https://api.github.com/users/Edouard-chin/gists{/gist_id}","starred_url":"https://api.github.com/users/Edouard-chin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edouard-chin/subscriptions","organizations_url":"https://api.github.com/users/Edouard-chin/orgs","repos_url":"https://api.github.com/users/Edouard-chin/repos","events_url":"https://api.github.com/users/Edouard-chin/events{/privacy}","received_events_url":"https://api.github.com/users/Edouard-chin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-20T18:03:17Z","updated_at":"2025-01-20T18:03:17Z","body":"Does the routing error only happens with the route you mentioned or any routes? Your issue seems similar to https://github.com/rails/rails/issues/53205","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2603006713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Edouard-chin","id":8122246,"node_id":"MDQ6VXNlcjgxMjIyNDY=","avatar_url":"https://avatars.githubusercontent.com/u/8122246?v=4","gravatar_id":"","url":"https://api.github.com/users/Edouard-chin","html_url":"https://github.com/Edouard-chin","followers_url":"https://api.github.com/users/Edouard-chin/followers","following_url":"https://api.github.com/users/Edouard-chin/following{/other_user}","gists_url":"https://api.github.com/users/Edouard-chin/gists{/gist_id}","starred_url":"https://api.github.com/users/Edouard-chin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edouard-chin/subscriptions","organizations_url":"https://api.github.com/users/Edouard-chin/orgs","repos_url":"https://api.github.com/users/Edouard-chin/repos","events_url":"https://api.github.com/users/Edouard-chin/events{/privacy}","received_events_url":"https://api.github.com/users/Edouard-chin/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2603198994","html_url":"https://github.com/rails/rails/issues/54297#issuecomment-2603198994","issue_url":"https://api.github.com/repos/rails/rails/issues/54297","id":2603198994,"node_id":"IC_kwDNIULOmymqEg","user":{"login":"Souravgoswami","id":37468605,"node_id":"MDQ6VXNlcjM3NDY4NjA1","avatar_url":"https://avatars.githubusercontent.com/u/37468605?v=4","gravatar_id":"","url":"https://api.github.com/users/Souravgoswami","html_url":"https://github.com/Souravgoswami","followers_url":"https://api.github.com/users/Souravgoswami/followers","following_url":"https://api.github.com/users/Souravgoswami/following{/other_user}","gists_url":"https://api.github.com/users/Souravgoswami/gists{/gist_id}","starred_url":"https://api.github.com/users/Souravgoswami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Souravgoswami/subscriptions","organizations_url":"https://api.github.com/users/Souravgoswami/orgs","repos_url":"https://api.github.com/users/Souravgoswami/repos","events_url":"https://api.github.com/users/Souravgoswami/events{/privacy}","received_events_url":"https://api.github.com/users/Souravgoswami/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-20T20:38:38Z","updated_at":"2025-01-20T20:43:44Z","body":"Yes, it does seem similar or possibly the same issue. I searched for recent GitHub issues but didn't come across this one, so I ended up creating a new report, my bad.\n\nThe routing errors I noticed, happened on random paths, including three different paths so far - one of which was related to active_storage!\n\nThe error occurred once after starting the server, and then again (with same or different path) after another restart. It's intermittent but has happened multiple times.\n\nP.S. The app I'm testing this on is API only.\n\nP.S. 2: The [proposed solution](https://github.com/rails/rails/issues/53205#issuecomment-2468001826) doesn't work for me as I neither have js-routes nor have such line.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2603198994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Souravgoswami","id":37468605,"node_id":"MDQ6VXNlcjM3NDY4NjA1","avatar_url":"https://avatars.githubusercontent.com/u/37468605?v=4","gravatar_id":"","url":"https://api.github.com/users/Souravgoswami","html_url":"https://github.com/Souravgoswami","followers_url":"https://api.github.com/users/Souravgoswami/followers","following_url":"https://api.github.com/users/Souravgoswami/following{/other_user}","gists_url":"https://api.github.com/users/Souravgoswami/gists{/gist_id}","starred_url":"https://api.github.com/users/Souravgoswami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Souravgoswami/subscriptions","organizations_url":"https://api.github.com/users/Souravgoswami/orgs","repos_url":"https://api.github.com/users/Souravgoswami/repos","events_url":"https://api.github.com/users/Souravgoswami/events{/privacy}","received_events_url":"https://api.github.com/users/Souravgoswami/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":16008016781,"node_id":"REFE_lADNIULOps8MBc8AAAADuibzjQ","url":"https://api.github.com/repos/rails/rails/issues/events/16008016781","actor":{"login":"Edouard-chin","id":8122246,"node_id":"MDQ6VXNlcjgxMjIyNDY=","avatar_url":"https://avatars.githubusercontent.com/u/8122246?v=4","gravatar_id":"","url":"https://api.github.com/users/Edouard-chin","html_url":"https://github.com/Edouard-chin","followers_url":"https://api.github.com/users/Edouard-chin/followers","following_url":"https://api.github.com/users/Edouard-chin/following{/other_user}","gists_url":"https://api.github.com/users/Edouard-chin/gists{/gist_id}","starred_url":"https://api.github.com/users/Edouard-chin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edouard-chin/subscriptions","organizations_url":"https://api.github.com/users/Edouard-chin/orgs","repos_url":"https://api.github.com/users/Edouard-chin/repos","events_url":"https://api.github.com/users/Edouard-chin/events{/privacy}","received_events_url":"https://api.github.com/users/Edouard-chin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"e0110273e585edfcc9eec483fbbeb3fc271fdffe","commit_url":"https://api.github.com/repos/Edouard-chin/rails/commits/e0110273e585edfcc9eec483fbbeb3fc271fdffe","created_at":"2025-01-21T04:51:22Z","performed_via_github_app":null},{"id":16008068955,"node_id":"REFE_lADNIULOps8MBc8AAAADuie_Ww","url":"https://api.github.com/repos/rails/rails/issues/events/16008068955","actor":{"login":"Edouard-chin","id":8122246,"node_id":"MDQ6VXNlcjgxMjIyNDY=","avatar_url":"https://avatars.githubusercontent.com/u/8122246?v=4","gravatar_id":"","url":"https://api.github.com/users/Edouard-chin","html_url":"https://github.com/Edouard-chin","followers_url":"https://api.github.com/users/Edouard-chin/followers","following_url":"https://api.github.com/users/Edouard-chin/following{/other_user}","gists_url":"https://api.github.com/users/Edouard-chin/gists{/gist_id}","starred_url":"https://api.github.com/users/Edouard-chin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edouard-chin/subscriptions","organizations_url":"https://api.github.com/users/Edouard-chin/orgs","repos_url":"https://api.github.com/users/Edouard-chin/repos","events_url":"https://api.github.com/users/Edouard-chin/events{/privacy}","received_events_url":"https://api.github.com/users/Edouard-chin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"bc6452761bad9f9815c15ab909e44bef07dfebbe","commit_url":"https://api.github.com/repos/Edouard-chin/rails/commits/bc6452761bad9f9815c15ab909e44bef07dfebbe","created_at":"2025-01-21T05:00:25Z","performed_via_github_app":null},{"actor":{"login":"Edouard-chin","id":8122246,"node_id":"MDQ6VXNlcjgxMjIyNDY=","avatar_url":"https://avatars.githubusercontent.com/u/8122246?v=4","gravatar_id":"","url":"https://api.github.com/users/Edouard-chin","html_url":"https://github.com/Edouard-chin","followers_url":"https://api.github.com/users/Edouard-chin/followers","following_url":"https://api.github.com/users/Edouard-chin/following{/other_user}","gists_url":"https://api.github.com/users/Edouard-chin/gists{/gist_id}","starred_url":"https://api.github.com/users/Edouard-chin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edouard-chin/subscriptions","organizations_url":"https://api.github.com/users/Edouard-chin/orgs","repos_url":"https://api.github.com/users/Edouard-chin/repos","events_url":"https://api.github.com/users/Edouard-chin/events{/privacy}","received_events_url":"https://api.github.com/users/Edouard-chin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-21T05:00:51Z","updated_at":"2025-01-21T05:00:51Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rails/rails/issues/54306","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/54306/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/54306/comments","events_url":"https://api.github.com/repos/rails/rails/issues/54306/events","html_url":"https://github.com/rails/rails/pull/54306","id":2800706547,"node_id":"PR_kwDNIULOiG68XA","number":54306,"title":"Fix routes being cleared when using `reload_routes!`:","user":{"login":"Edouard-chin","id":8122246,"node_id":"MDQ6VXNlcjgxMjIyNDY=","avatar_url":"https://avatars.githubusercontent.com/u/8122246?v=4","gravatar_id":"","url":"https://api.github.com/users/Edouard-chin","html_url":"https://github.com/Edouard-chin","followers_url":"https://api.github.com/users/Edouard-chin/followers","following_url":"https://api.github.com/users/Edouard-chin/following{/other_user}","gists_url":"https://api.github.com/users/Edouard-chin/gists{/gist_id}","starred_url":"https://api.github.com/users/Edouard-chin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edouard-chin/subscriptions","organizations_url":"https://api.github.com/users/Edouard-chin/orgs","repos_url":"https://api.github.com/users/Edouard-chin/repos","events_url":"https://api.github.com/users/Edouard-chin/events{/privacy}","received_events_url":"https://api.github.com/users/Edouard-chin/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":107189,"node_id":"MDU6TGFiZWwxMDcxODk=","url":"https://api.github.com/repos/rails/rails/labels/actionpack","name":"actionpack","color":"FFF700","default":false,"description":null},{"id":107195,"node_id":"MDU6TGFiZWwxMDcxOTU=","url":"https://api.github.com/repos/rails/rails/labels/railties","name":"railties","color":"8BE06E","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2025-01-21T05:00:50Z","updated_at":"2025-03-03T13:38:41Z","closed_at":"2025-01-27T20:15:44Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":8514,"node_id":"MDEwOlJlcG9zaXRvcnk4NTE0","name":"rails","full_name":"rails/rails","private":false,"owner":{"login":"rails","id":4223,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjM=","avatar_url":"https://avatars.githubusercontent.com/u/4223?v=4","gravatar_id":"","url":"https://api.github.com/users/rails","html_url":"https://github.com/rails","followers_url":"https://api.github.com/users/rails/followers","following_url":"https://api.github.com/users/rails/following{/other_user}","gists_url":"https://api.github.com/users/rails/gists{/gist_id}","starred_url":"https://api.github.com/users/rails/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails/subscriptions","organizations_url":"https://api.github.com/users/rails/orgs","repos_url":"https://api.github.com/users/rails/repos","events_url":"https://api.github.com/users/rails/events{/privacy}","received_events_url":"https://api.github.com/users/rails/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rails/rails","description":"Ruby on Rails","fork":false,"url":"https://api.github.com/repos/rails/rails","forks_url":"https://api.github.com/repos/rails/rails/forks","keys_url":"https://api.github.com/repos/rails/rails/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rails/rails/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rails/rails/teams","hooks_url":"https://api.github.com/repos/rails/rails/hooks","issue_events_url":"https://api.github.com/repos/rails/rails/issues/events{/number}","events_url":"https://api.github.com/repos/rails/rails/events","assignees_url":"https://api.github.com/repos/rails/rails/assignees{/user}","branches_url":"https://api.github.com/repos/rails/rails/branches{/branch}","tags_url":"https://api.github.com/repos/rails/rails/tags","blobs_url":"https://api.github.com/repos/rails/rails/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rails/rails/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rails/rails/git/refs{/sha}","trees_url":"https://api.github.com/repos/rails/rails/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rails/rails/statuses/{sha}","languages_url":"https://api.github.com/repos/rails/rails/languages","stargazers_url":"https://api.github.com/repos/rails/rails/stargazers","contributors_url":"https://api.github.com/repos/rails/rails/contributors","subscribers_url":"https://api.github.com/repos/rails/rails/subscribers","subscription_url":"https://api.github.com/repos/rails/rails/subscription","commits_url":"https://api.github.com/repos/rails/rails/commits{/sha}","git_commits_url":"https://api.github.com/repos/rails/rails/git/commits{/sha}","comments_url":"https://api.github.com/repos/rails/rails/comments{/number}","issue_comment_url":"https://api.github.com/repos/rails/rails/issues/comments{/number}","contents_url":"https://api.github.com/repos/rails/rails/contents/{+path}","compare_url":"https://api.github.com/repos/rails/rails/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rails/rails/merges","archive_url":"https://api.github.com/repos/rails/rails/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rails/rails/downloads","issues_url":"https://api.github.com/repos/rails/rails/issues{/number}","pulls_url":"https://api.github.com/repos/rails/rails/pulls{/number}","milestones_url":"https://api.github.com/repos/rails/rails/milestones{/number}","notifications_url":"https://api.github.com/repos/rails/rails/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rails/rails/labels{/name}","releases_url":"https://api.github.com/repos/rails/rails/releases{/id}","deployments_url":"https://api.github.com/repos/rails/rails/deployments","created_at":"2008-04-11T02:19:47Z","updated_at":"2025-11-10T02:03:47Z","pushed_at":"2025-11-10T00:33:52Z","git_url":"git://github.com/rails/rails.git","ssh_url":"git@github.com:rails/rails.git","clone_url":"https://github.com/rails/rails.git","svn_url":"https://github.com/rails/rails","homepage":"https://rubyonrails.org","size":271619,"stargazers_count":57840,"watchers_count":57840,"language":"Ruby","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":22025,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1341,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["activejob","activerecord","framework","html","mvc","rails","ruby"],"visibility":"public","forks":22025,"open_issues":1341,"watchers":57840,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/54306","html_url":"https://github.com/rails/rails/pull/54306","diff_url":"https://github.com/rails/rails/pull/54306.diff","patch_url":"https://github.com/rails/rails/pull/54306.patch","merged_at":"2025-01-27T20:15:44Z"},"body":"## Fix routes being cleared when using `reload_routes!`:\r\n\r\n### Motivation / Background\r\n\r\nPretty sure it fixes #54297 and #53205, but both issues didn't provide enough information.\r\nThough it fixes a legitimate issue on a public API method.\r\n\r\n### Detail\r\n\r\nWhen using `Rails.application.reload_routes!` (which is public API), in certain conditions, it is possible that this will clear almost all routes in the routeset.\r\n\r\nThe line of code making this happen is this one. https://github.com/rails/rails/blob/38e9a72db45842d1d2f05fb2272df3a10225f981/actionpack/lib/action_dispatch/routing/route_set.rb#L460\r\n\r\nThat flag is supposed to be `true` for the entire duration of evaluating multiple route files. This was the case before https://github.com/rails/rails/pull/53522, which introduced the issue. It indirectly resets that flag to false because of a recursion. This is a summary of the code order execution when calling `Rails.application.reload_routes`:\r\n\r\n1) The RouteSet sets the `disable_clear_and_finalize` flag to false, so that no routes gets cleared in between multiple call to `Rails.application.routes.draw`. [here](https://github.com/rails/rails/blob/38e9a72db45842d1d2f05fb2272df3a10225f981/railties/lib/rails/application/routes_reloader.rb#L57)\r\n2) All route files get evaluated, and any call to `Rails.application.routes.draw` gets picked up.\r\n3) We enter a recursion because the RouteSet in development is a LazyRouteSet which when calling `draw` reloads the route. [here](https://github.com/rails/rails/blob/38e9a72db45842d1d2f05fb2272df3a10225f981/railties/lib/rails/engine/lazy_route_set.rb#L72) and [here](https://github.com/rails/rails/blob/38e9a72db45842d1d2f05fb2272df3a10225f981/railties/lib/rails/application.rb#L163)\r\n4) All route files get evaluated again, the `disable_clear_and_finalize` is reset to false, we exit the recursion and continue where we were.\r\n5) The `disable_clear_and_finalize` is now false, any call to `Rails.application.draw` now resets all routes before it gets evaluated. Which basically means the very last one would have effect.\r\n\r\n------------------------\r\n\r\nI can only think of two way where `reload_routes` may cause a issue:\r\n\r\n- Inside a Rake task\r\n- Inside a middleware\r\n\r\nThis is because the application needs to be initialized and the routeset never evaluated in order to trigger the bug. https://github.com/railsware/js-routes/pull/320 and https://github.com/amatsuda/traceroute/issues/49 confirms it.\r\n\r\n## Solution\r\n\r\nWhen calling `reload_routes!`, if the routes were never loaded, load them and set the `loaded` flag. Otherwise, also load them but with the difference that with the `loaded` flag set, we won't reset all routes.\r\n\r\n### Checklist\r\n\r\nBefore submitting the PR make sure the following are checked:\r\n\r\n* [x] This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.\r\n* [x] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: `[Fix #issue-number]`\r\n* [x] Tests are added or updated if you fix a bug or add a feature.\r\n* [x] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.\r\n","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/54306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/rails/issues/54306/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":16008945953,"node_id":"REFE_lADNIULOps8MBc8AAAADujUhIQ","url":"https://api.github.com/repos/rails/rails/issues/events/16008945953","actor":{"login":"Edouard-chin","id":8122246,"node_id":"MDQ6VXNlcjgxMjIyNDY=","avatar_url":"https://avatars.githubusercontent.com/u/8122246?v=4","gravatar_id":"","url":"https://api.github.com/users/Edouard-chin","html_url":"https://github.com/Edouard-chin","followers_url":"https://api.github.com/users/Edouard-chin/followers","following_url":"https://api.github.com/users/Edouard-chin/following{/other_user}","gists_url":"https://api.github.com/users/Edouard-chin/gists{/gist_id}","starred_url":"https://api.github.com/users/Edouard-chin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edouard-chin/subscriptions","organizations_url":"https://api.github.com/users/Edouard-chin/orgs","repos_url":"https://api.github.com/users/Edouard-chin/repos","events_url":"https://api.github.com/users/Edouard-chin/events{/privacy}","received_events_url":"https://api.github.com/users/Edouard-chin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"0359d78d82d6eafbaa2ca9b0c175b37fe1b09911","commit_url":"https://api.github.com/repos/Edouard-chin/rails/commits/0359d78d82d6eafbaa2ca9b0c175b37fe1b09911","created_at":"2025-01-21T07:02:11Z","performed_via_github_app":null},{"id":16009094425,"node_id":"REFE_lADNIULOps8MBc8AAAADujdlGQ","url":"https://api.github.com/repos/rails/rails/issues/events/16009094425","actor":{"login":"Edouard-chin","id":8122246,"node_id":"MDQ6VXNlcjgxMjIyNDY=","avatar_url":"https://avatars.githubusercontent.com/u/8122246?v=4","gravatar_id":"","url":"https://api.github.com/users/Edouard-chin","html_url":"https://github.com/Edouard-chin","followers_url":"https://api.github.com/users/Edouard-chin/followers","following_url":"https://api.github.com/users/Edouard-chin/following{/other_user}","gists_url":"https://api.github.com/users/Edouard-chin/gists{/gist_id}","starred_url":"https://api.github.com/users/Edouard-chin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edouard-chin/subscriptions","organizations_url":"https://api.github.com/users/Edouard-chin/orgs","repos_url":"https://api.github.com/users/Edouard-chin/repos","events_url":"https://api.github.com/users/Edouard-chin/events{/privacy}","received_events_url":"https://api.github.com/users/Edouard-chin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b40d92eca1f3a07f72a3068b3eebdd41bbd670a1","commit_url":"https://api.github.com/repos/Edouard-chin/rails/commits/b40d92eca1f3a07f72a3068b3eebdd41bbd670a1","created_at":"2025-01-21T07:18:42Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2603855021","html_url":"https://github.com/rails/rails/issues/54297#issuecomment-2603855021","issue_url":"https://api.github.com/repos/rails/rails/issues/54297","id":2603855021,"node_id":"IC_kwDNIULOmzOsrQ","user":{"login":"Edouard-chin","id":8122246,"node_id":"MDQ6VXNlcjgxMjIyNDY=","avatar_url":"https://avatars.githubusercontent.com/u/8122246?v=4","gravatar_id":"","url":"https://api.github.com/users/Edouard-chin","html_url":"https://github.com/Edouard-chin","followers_url":"https://api.github.com/users/Edouard-chin/followers","following_url":"https://api.github.com/users/Edouard-chin/following{/other_user}","gists_url":"https://api.github.com/users/Edouard-chin/gists{/gist_id}","starred_url":"https://api.github.com/users/Edouard-chin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edouard-chin/subscriptions","organizations_url":"https://api.github.com/users/Edouard-chin/orgs","repos_url":"https://api.github.com/users/Edouard-chin/repos","events_url":"https://api.github.com/users/Edouard-chin/events{/privacy}","received_events_url":"https://api.github.com/users/Edouard-chin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-21T07:32:20Z","updated_at":"2025-01-21T07:32:33Z","body":"It's hard to help debug without a way to reproduce or other info, but I'm pretty sure this is related to #54306. If you want to try if that helps in your app (in development), feel free to target the commit in your Gemfile `gem \"rails\", git: \"https://github.com/rails/rails\", ref: \"b40d92eca1f3a07f72a3068b3eebdd41bbd670a1\"`. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2603855021/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null,"event":"commented","actor":{"login":"Edouard-chin","id":8122246,"node_id":"MDQ6VXNlcjgxMjIyNDY=","avatar_url":"https://avatars.githubusercontent.com/u/8122246?v=4","gravatar_id":"","url":"https://api.github.com/users/Edouard-chin","html_url":"https://github.com/Edouard-chin","followers_url":"https://api.github.com/users/Edouard-chin/followers","following_url":"https://api.github.com/users/Edouard-chin/following{/other_user}","gists_url":"https://api.github.com/users/Edouard-chin/gists{/gist_id}","starred_url":"https://api.github.com/users/Edouard-chin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edouard-chin/subscriptions","organizations_url":"https://api.github.com/users/Edouard-chin/orgs","repos_url":"https://api.github.com/users/Edouard-chin/repos","events_url":"https://api.github.com/users/Edouard-chin/events{/privacy}","received_events_url":"https://api.github.com/users/Edouard-chin/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":16081951138,"node_id":"REFE_lADNIULOps8MBc8AAAADvo8Zog","url":"https://api.github.com/repos/rails/rails/issues/events/16081951138","actor":{"login":"Edouard-chin","id":8122246,"node_id":"MDQ6VXNlcjgxMjIyNDY=","avatar_url":"https://avatars.githubusercontent.com/u/8122246?v=4","gravatar_id":"","url":"https://api.github.com/users/Edouard-chin","html_url":"https://github.com/Edouard-chin","followers_url":"https://api.github.com/users/Edouard-chin/followers","following_url":"https://api.github.com/users/Edouard-chin/following{/other_user}","gists_url":"https://api.github.com/users/Edouard-chin/gists{/gist_id}","starred_url":"https://api.github.com/users/Edouard-chin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edouard-chin/subscriptions","organizations_url":"https://api.github.com/users/Edouard-chin/orgs","repos_url":"https://api.github.com/users/Edouard-chin/repos","events_url":"https://api.github.com/users/Edouard-chin/events{/privacy}","received_events_url":"https://api.github.com/users/Edouard-chin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"0ad9f8c28b9b13cb2947de46dadf76c5008efed4","commit_url":"https://api.github.com/repos/Edouard-chin/rails/commits/0ad9f8c28b9b13cb2947de46dadf76c5008efed4","created_at":"2025-01-27T17:50:44Z","performed_via_github_app":null},{"id":16083629178,"node_id":"CE_lADNIULOps8MBc8AAAADvqi0eg","url":"https://api.github.com/repos/rails/rails/issues/events/16083629178","actor":{"login":"gmcgibbon","id":5162312,"node_id":"MDQ6VXNlcjUxNjIzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5162312?v=4","gravatar_id":"","url":"https://api.github.com/users/gmcgibbon","html_url":"https://github.com/gmcgibbon","followers_url":"https://api.github.com/users/gmcgibbon/followers","following_url":"https://api.github.com/users/gmcgibbon/following{/other_user}","gists_url":"https://api.github.com/users/gmcgibbon/gists{/gist_id}","starred_url":"https://api.github.com/users/gmcgibbon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gmcgibbon/subscriptions","organizations_url":"https://api.github.com/users/gmcgibbon/orgs","repos_url":"https://api.github.com/users/gmcgibbon/repos","events_url":"https://api.github.com/users/gmcgibbon/events{/privacy}","received_events_url":"https://api.github.com/users/gmcgibbon/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2025-01-27T20:15:46Z","state_reason":null,"performed_via_github_app":null},{"id":16083629196,"node_id":"CE_lADNIULOps8MBc8AAAADvqi0jA","url":"https://api.github.com/repos/rails/rails/issues/events/16083629196","actor":{"login":"gmcgibbon","id":5162312,"node_id":"MDQ6VXNlcjUxNjIzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5162312?v=4","gravatar_id":"","url":"https://api.github.com/users/gmcgibbon","html_url":"https://github.com/gmcgibbon","followers_url":"https://api.github.com/users/gmcgibbon/followers","following_url":"https://api.github.com/users/gmcgibbon/following{/other_user}","gists_url":"https://api.github.com/users/gmcgibbon/gists{/gist_id}","starred_url":"https://api.github.com/users/gmcgibbon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gmcgibbon/subscriptions","organizations_url":"https://api.github.com/users/gmcgibbon/orgs","repos_url":"https://api.github.com/users/gmcgibbon/repos","events_url":"https://api.github.com/users/gmcgibbon/events{/privacy}","received_events_url":"https://api.github.com/users/gmcgibbon/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"b40d92eca1f3a07f72a3068b3eebdd41bbd670a1","commit_url":"https://api.github.com/repos/rails/rails/commits/b40d92eca1f3a07f72a3068b3eebdd41bbd670a1","created_at":"2025-01-27T20:15:46Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2694220067","html_url":"https://github.com/rails/rails/issues/54297#issuecomment-2694220067","issue_url":"https://api.github.com/repos/rails/rails/issues/54297","id":2694220067,"node_id":"IC_kwDNIULOoJaJIw","user":{"login":"brent-cybrid","id":85653187,"node_id":"MDQ6VXNlcjg1NjUzMTg3","avatar_url":"https://avatars.githubusercontent.com/u/85653187?v=4","gravatar_id":"","url":"https://api.github.com/users/brent-cybrid","html_url":"https://github.com/brent-cybrid","followers_url":"https://api.github.com/users/brent-cybrid/followers","following_url":"https://api.github.com/users/brent-cybrid/following{/other_user}","gists_url":"https://api.github.com/users/brent-cybrid/gists{/gist_id}","starred_url":"https://api.github.com/users/brent-cybrid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brent-cybrid/subscriptions","organizations_url":"https://api.github.com/users/brent-cybrid/orgs","repos_url":"https://api.github.com/users/brent-cybrid/repos","events_url":"https://api.github.com/users/brent-cybrid/events{/privacy}","received_events_url":"https://api.github.com/users/brent-cybrid/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-03T12:33:05Z","updated_at":"2025-03-03T12:33:05Z","body":"@Edouard-chin when will this fix be released?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2694220067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"brent-cybrid","id":85653187,"node_id":"MDQ6VXNlcjg1NjUzMTg3","avatar_url":"https://avatars.githubusercontent.com/u/85653187?v=4","gravatar_id":"","url":"https://api.github.com/users/brent-cybrid","html_url":"https://github.com/brent-cybrid","followers_url":"https://api.github.com/users/brent-cybrid/followers","following_url":"https://api.github.com/users/brent-cybrid/following{/other_user}","gists_url":"https://api.github.com/users/brent-cybrid/gists{/gist_id}","starred_url":"https://api.github.com/users/brent-cybrid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brent-cybrid/subscriptions","organizations_url":"https://api.github.com/users/brent-cybrid/orgs","repos_url":"https://api.github.com/users/brent-cybrid/repos","events_url":"https://api.github.com/users/brent-cybrid/events{/privacy}","received_events_url":"https://api.github.com/users/brent-cybrid/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":16533757495,"node_id":"MEE_lADNIULOps8MBc8AAAAD2X0eNw","url":"https://api.github.com/repos/rails/rails/issues/events/16533757495","actor":{"login":"Edouard-chin","id":8122246,"node_id":"MDQ6VXNlcjgxMjIyNDY=","avatar_url":"https://avatars.githubusercontent.com/u/8122246?v=4","gravatar_id":"","url":"https://api.github.com/users/Edouard-chin","html_url":"https://github.com/Edouard-chin","followers_url":"https://api.github.com/users/Edouard-chin/followers","following_url":"https://api.github.com/users/Edouard-chin/following{/other_user}","gists_url":"https://api.github.com/users/Edouard-chin/gists{/gist_id}","starred_url":"https://api.github.com/users/Edouard-chin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edouard-chin/subscriptions","organizations_url":"https://api.github.com/users/Edouard-chin/orgs","repos_url":"https://api.github.com/users/Edouard-chin/repos","events_url":"https://api.github.com/users/Edouard-chin/events{/privacy}","received_events_url":"https://api.github.com/users/Edouard-chin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-03-03T12:33:06Z","performed_via_github_app":null},{"id":16533757509,"node_id":"SE_lADNIULOps8MBc8AAAAD2X0eRQ","url":"https://api.github.com/repos/rails/rails/issues/events/16533757509","actor":{"login":"Edouard-chin","id":8122246,"node_id":"MDQ6VXNlcjgxMjIyNDY=","avatar_url":"https://avatars.githubusercontent.com/u/8122246?v=4","gravatar_id":"","url":"https://api.github.com/users/Edouard-chin","html_url":"https://github.com/Edouard-chin","followers_url":"https://api.github.com/users/Edouard-chin/followers","following_url":"https://api.github.com/users/Edouard-chin/following{/other_user}","gists_url":"https://api.github.com/users/Edouard-chin/gists{/gist_id}","starred_url":"https://api.github.com/users/Edouard-chin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Edouard-chin/subscriptions","organizations_url":"https://api.github.com/users/Edouard-chin/orgs","repos_url":"https://api.github.com/users/Edouard-chin/repos","events_url":"https://api.github.com/users/Edouard-chin/events{/privacy}","received_events_url":"https://api.github.com/users/Edouard-chin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-03-03T12:33:07Z","performed_via_github_app":null},{"id":17006710570,"node_id":"SE_lADNIULOps8MBc8AAAAD9a3PKg","url":"https://api.github.com/repos/rails/rails/issues/events/17006710570","actor":{"login":"jasoncodes","id":83466,"node_id":"MDQ6VXNlcjgzNDY2","avatar_url":"https://avatars.githubusercontent.com/u/83466?v=4","gravatar_id":"","url":"https://api.github.com/users/jasoncodes","html_url":"https://github.com/jasoncodes","followers_url":"https://api.github.com/users/jasoncodes/followers","following_url":"https://api.github.com/users/jasoncodes/following{/other_user}","gists_url":"https://api.github.com/users/jasoncodes/gists{/gist_id}","starred_url":"https://api.github.com/users/jasoncodes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasoncodes/subscriptions","organizations_url":"https://api.github.com/users/jasoncodes/orgs","repos_url":"https://api.github.com/users/jasoncodes/repos","events_url":"https://api.github.com/users/jasoncodes/events{/privacy}","received_events_url":"https://api.github.com/users/jasoncodes/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-03-27T07:15:56Z","performed_via_github_app":null},{"actor":{"login":"tsoto111","id":30239930,"node_id":"MDQ6VXNlcjMwMjM5OTMw","avatar_url":"https://avatars.githubusercontent.com/u/30239930?v=4","gravatar_id":"","url":"https://api.github.com/users/tsoto111","html_url":"https://github.com/tsoto111","followers_url":"https://api.github.com/users/tsoto111/followers","following_url":"https://api.github.com/users/tsoto111/following{/other_user}","gists_url":"https://api.github.com/users/tsoto111/gists{/gist_id}","starred_url":"https://api.github.com/users/tsoto111/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tsoto111/subscriptions","organizations_url":"https://api.github.com/users/tsoto111/orgs","repos_url":"https://api.github.com/users/tsoto111/repos","events_url":"https://api.github.com/users/tsoto111/events{/privacy}","received_events_url":"https://api.github.com/users/tsoto111/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-04-17T00:28:55Z","updated_at":"2025-04-17T00:28:55Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rails/rails/issues/54933","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/54933/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/54933/comments","events_url":"https://api.github.com/repos/rails/rails/issues/54933/events","html_url":"https://github.com/rails/rails/issues/54933","id":3001066726,"node_id":"I_kwDNIULOsuCk5g","number":54933,"title":"Rails 8.0.X Intermittent 404 Routing Error in Request Specs","user":{"login":"tsoto111","id":30239930,"node_id":"MDQ6VXNlcjMwMjM5OTMw","avatar_url":"https://avatars.githubusercontent.com/u/30239930?v=4","gravatar_id":"","url":"https://api.github.com/users/tsoto111","html_url":"https://github.com/tsoto111","followers_url":"https://api.github.com/users/tsoto111/followers","following_url":"https://api.github.com/users/tsoto111/following{/other_user}","gists_url":"https://api.github.com/users/tsoto111/gists{/gist_id}","starred_url":"https://api.github.com/users/tsoto111/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tsoto111/subscriptions","organizations_url":"https://api.github.com/users/tsoto111/orgs","repos_url":"https://api.github.com/users/tsoto111/repos","events_url":"https://api.github.com/users/tsoto111/events{/privacy}","received_events_url":"https://api.github.com/users/tsoto111/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2025-04-17T00:28:54Z","updated_at":"2025-04-17T15:27:47Z","closed_at":"2025-04-17T15:27:46Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":8514,"node_id":"MDEwOlJlcG9zaXRvcnk4NTE0","name":"rails","full_name":"rails/rails","private":false,"owner":{"login":"rails","id":4223,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjM=","avatar_url":"https://avatars.githubusercontent.com/u/4223?v=4","gravatar_id":"","url":"https://api.github.com/users/rails","html_url":"https://github.com/rails","followers_url":"https://api.github.com/users/rails/followers","following_url":"https://api.github.com/users/rails/following{/other_user}","gists_url":"https://api.github.com/users/rails/gists{/gist_id}","starred_url":"https://api.github.com/users/rails/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails/subscriptions","organizations_url":"https://api.github.com/users/rails/orgs","repos_url":"https://api.github.com/users/rails/repos","events_url":"https://api.github.com/users/rails/events{/privacy}","received_events_url":"https://api.github.com/users/rails/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rails/rails","description":"Ruby on Rails","fork":false,"url":"https://api.github.com/repos/rails/rails","forks_url":"https://api.github.com/repos/rails/rails/forks","keys_url":"https://api.github.com/repos/rails/rails/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rails/rails/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rails/rails/teams","hooks_url":"https://api.github.com/repos/rails/rails/hooks","issue_events_url":"https://api.github.com/repos/rails/rails/issues/events{/number}","events_url":"https://api.github.com/repos/rails/rails/events","assignees_url":"https://api.github.com/repos/rails/rails/assignees{/user}","branches_url":"https://api.github.com/repos/rails/rails/branches{/branch}","tags_url":"https://api.github.com/repos/rails/rails/tags","blobs_url":"https://api.github.com/repos/rails/rails/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rails/rails/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rails/rails/git/refs{/sha}","trees_url":"https://api.github.com/repos/rails/rails/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rails/rails/statuses/{sha}","languages_url":"https://api.github.com/repos/rails/rails/languages","stargazers_url":"https://api.github.com/repos/rails/rails/stargazers","contributors_url":"https://api.github.com/repos/rails/rails/contributors","subscribers_url":"https://api.github.com/repos/rails/rails/subscribers","subscription_url":"https://api.github.com/repos/rails/rails/subscription","commits_url":"https://api.github.com/repos/rails/rails/commits{/sha}","git_commits_url":"https://api.github.com/repos/rails/rails/git/commits{/sha}","comments_url":"https://api.github.com/repos/rails/rails/comments{/number}","issue_comment_url":"https://api.github.com/repos/rails/rails/issues/comments{/number}","contents_url":"https://api.github.com/repos/rails/rails/contents/{+path}","compare_url":"https://api.github.com/repos/rails/rails/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rails/rails/merges","archive_url":"https://api.github.com/repos/rails/rails/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rails/rails/downloads","issues_url":"https://api.github.com/repos/rails/rails/issues{/number}","pulls_url":"https://api.github.com/repos/rails/rails/pulls{/number}","milestones_url":"https://api.github.com/repos/rails/rails/milestones{/number}","notifications_url":"https://api.github.com/repos/rails/rails/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rails/rails/labels{/name}","releases_url":"https://api.github.com/repos/rails/rails/releases{/id}","deployments_url":"https://api.github.com/repos/rails/rails/deployments","created_at":"2008-04-11T02:19:47Z","updated_at":"2025-11-10T02:03:47Z","pushed_at":"2025-11-10T00:33:52Z","git_url":"git://github.com/rails/rails.git","ssh_url":"git@github.com:rails/rails.git","clone_url":"https://github.com/rails/rails.git","svn_url":"https://github.com/rails/rails","homepage":"https://rubyonrails.org","size":271619,"stargazers_count":57840,"watchers_count":57840,"language":"Ruby","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":22025,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1341,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["activejob","activerecord","framework","html","mvc","rails","ruby"],"visibility":"public","forks":22025,"open_issues":1341,"watchers":57840,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Problem\n\nI recently created a new blank Rails 8.0.2 API application using the following script:\n\n```\nrails new my_app_name --api --skip-active-record\n```\n\nWith this blank application I added Rspec as my unit test suite and ripped out the default Minitest suite. As a result, I am only running a `spec_helper.rb` configuration. The only other additional weird thing I did was add the following lines to my `spec_helper.rb` to cut Rspec's dependency on ActiveRecord. This ensures that I do not need a database configured to run my unit tests. This code is related to this issue https://github.com/rspec/rspec-rails/issues/2172:\n\n```\n# Remove the ActiveRecord constant, because it is auto-loaded by\n# ActiveStorage and not needed for our application. The presence\n# of the ActiveRecord constant causes rspec-rails to include\n# extra fixture support, which results in:\n#\n#   ActiveRecord::ConnectionNotEstablished:\n#     No connection pool with 'primary' found.\n#\nObject.send(:remove_const, :ActiveRecord)\n```\n\nNext, I created a basic index route and wrote some Rspec request specs testing the endpoint making sure it returns a 200. But, when I run my rspec test suite the request specs will return a 404 intermittently which doesn't make a lot of sense. I am 100% sure my route is defined correctly. To replicate this you might not even have to define a new route to recreate this issue. Just try writing a request spec for the default healthcheck `/up` endpoint. This issue sounds a lot like the following: https://github.com/rails/rails/issues/54297\n\nThat issue was closed with the following PR: https://github.com/rails/rails/pull/54306\n\nNow, I raise this issue again because I did point my rails gem to the mentioned fix but my Rspec intermittence 404 issue persisted.\n\n```\ngem \"rails\", git: \"https://github.com/rails/rails\", ref: \"b40d92eca1f3a07f72a3068b3eebdd41bbd670a1\"\n```\n\nI noticed that there are a lot of issues surrounding a refactor of the router in Rails 8, I just wonder if this is another one of those things.\n\n\n### Expected behavior\n\nI expect my Rspec request specs to always find what is defined in my `config/routes.rb` file. \n\n### Actual behavior\n\nMy Rspec request specs will find the route correctly sometimes, other times it will hit the route and find a 404 error response.\n\n### System configuration\n\n**Rails version**:  8.0.2\n\n**Ruby version**: 3.4.2\n\n**Rspec**: 3.13.0\n\n**Note:** My Rails application is configured as an API so `ApplicationController` inherits from `ActionController::API` \n","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/54933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/rails/issues/54933/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]