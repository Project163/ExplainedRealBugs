[{"url":"https://api.github.com/repos/rails/rails/issues/comments/2111133670","html_url":"https://github.com/rails/rails/issues/51829#issuecomment-2111133670","issue_url":"https://api.github.com/repos/rails/rails/issues/51829","id":2111133670,"node_id":"IC_kwDNIULOfdVX5g","user":{"login":"rafaelfranca","id":47848,"node_id":"MDQ6VXNlcjQ3ODQ4","avatar_url":"https://avatars.githubusercontent.com/u/47848?v=4","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-14T21:00:02Z","updated_at":"2024-05-14T21:00:02Z","body":"@dhh could this be the [`env.erb`](https://github.com/rails/rails/blob/main/railties/lib/rails/generators/rails/app/templates/env.erb.tt) file being loaded by foreman and using an non-existent `RAILS_MASTER_KEY`?\r\n\r\n@rubys can you see if by deleting that file before starting the server it works?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2111133670/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rafaelfranca","id":47848,"node_id":"MDQ6VXNlcjQ3ODQ4","avatar_url":"https://avatars.githubusercontent.com/u/47848?v=4","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12808229482,"node_id":"MEE_lADNIULOiN__3M8AAAAC-24Sag","url":"https://api.github.com/repos/rails/rails/issues/events/12808229482","actor":{"login":"dhh","id":2741,"node_id":"MDQ6VXNlcjI3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/2741?v=4","gravatar_id":"","url":"https://api.github.com/users/dhh","html_url":"https://github.com/dhh","followers_url":"https://api.github.com/users/dhh/followers","following_url":"https://api.github.com/users/dhh/following{/other_user}","gists_url":"https://api.github.com/users/dhh/gists{/gist_id}","starred_url":"https://api.github.com/users/dhh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhh/subscriptions","organizations_url":"https://api.github.com/users/dhh/orgs","repos_url":"https://api.github.com/users/dhh/repos","events_url":"https://api.github.com/users/dhh/events{/privacy}","received_events_url":"https://api.github.com/users/dhh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-05-14T21:00:03Z","performed_via_github_app":null},{"id":12808229489,"node_id":"SE_lADNIULOiN__3M8AAAAC-24ScQ","url":"https://api.github.com/repos/rails/rails/issues/events/12808229489","actor":{"login":"dhh","id":2741,"node_id":"MDQ6VXNlcjI3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/2741?v=4","gravatar_id":"","url":"https://api.github.com/users/dhh","html_url":"https://github.com/dhh","followers_url":"https://api.github.com/users/dhh/followers","following_url":"https://api.github.com/users/dhh/following{/other_user}","gists_url":"https://api.github.com/users/dhh/gists{/gist_id}","starred_url":"https://api.github.com/users/dhh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhh/subscriptions","organizations_url":"https://api.github.com/users/dhh/orgs","repos_url":"https://api.github.com/users/dhh/repos","events_url":"https://api.github.com/users/dhh/events{/privacy}","received_events_url":"https://api.github.com/users/dhh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-05-14T21:00:03Z","performed_via_github_app":null},{"id":12808229496,"node_id":"MEE_lADNIULOiN__3M8AAAAC-24SeA","url":"https://api.github.com/repos/rails/rails/issues/events/12808229496","actor":{"login":"rubys","id":4815,"node_id":"MDQ6VXNlcjQ4MTU=","avatar_url":"https://avatars.githubusercontent.com/u/4815?v=4","gravatar_id":"","url":"https://api.github.com/users/rubys","html_url":"https://github.com/rubys","followers_url":"https://api.github.com/users/rubys/followers","following_url":"https://api.github.com/users/rubys/following{/other_user}","gists_url":"https://api.github.com/users/rubys/gists{/gist_id}","starred_url":"https://api.github.com/users/rubys/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rubys/subscriptions","organizations_url":"https://api.github.com/users/rubys/orgs","repos_url":"https://api.github.com/users/rubys/repos","events_url":"https://api.github.com/users/rubys/events{/privacy}","received_events_url":"https://api.github.com/users/rubys/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-05-14T21:00:04Z","performed_via_github_app":null},{"id":12808229501,"node_id":"SE_lADNIULOiN__3M8AAAAC-24SfQ","url":"https://api.github.com/repos/rails/rails/issues/events/12808229501","actor":{"login":"rubys","id":4815,"node_id":"MDQ6VXNlcjQ4MTU=","avatar_url":"https://avatars.githubusercontent.com/u/4815?v=4","gravatar_id":"","url":"https://api.github.com/users/rubys","html_url":"https://github.com/rubys","followers_url":"https://api.github.com/users/rubys/followers","following_url":"https://api.github.com/users/rubys/following{/other_user}","gists_url":"https://api.github.com/users/rubys/gists{/gist_id}","starred_url":"https://api.github.com/users/rubys/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rubys/subscriptions","organizations_url":"https://api.github.com/users/rubys/orgs","repos_url":"https://api.github.com/users/rubys/repos","events_url":"https://api.github.com/users/rubys/events{/privacy}","received_events_url":"https://api.github.com/users/rubys/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-05-14T21:00:04Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2111157332","html_url":"https://github.com/rails/rails/issues/51829#issuecomment-2111157332","issue_url":"https://api.github.com/repos/rails/rails/issues/51829","id":2111157332,"node_id":"IC_kwDNIULOfdW0VA","user":{"login":"rubys","id":4815,"node_id":"MDQ6VXNlcjQ4MTU=","avatar_url":"https://avatars.githubusercontent.com/u/4815?v=4","gravatar_id":"","url":"https://api.github.com/users/rubys","html_url":"https://github.com/rubys","followers_url":"https://api.github.com/users/rubys/followers","following_url":"https://api.github.com/users/rubys/following{/other_user}","gists_url":"https://api.github.com/users/rubys/gists{/gist_id}","starred_url":"https://api.github.com/users/rubys/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rubys/subscriptions","organizations_url":"https://api.github.com/users/rubys/orgs","repos_url":"https://api.github.com/users/rubys/repos","events_url":"https://api.github.com/users/rubys/events{/privacy}","received_events_url":"https://api.github.com/users/rubys/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-14T21:17:36Z","updated_at":"2024-05-14T21:17:36Z","body":"Neither deleting `.env.erb` or `config/master.key` solves this problem.  I also wasn't seeing this problem on `--main` on Friday.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2111157332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rubys","id":4815,"node_id":"MDQ6VXNlcjQ4MTU=","avatar_url":"https://avatars.githubusercontent.com/u/4815?v=4","gravatar_id":"","url":"https://api.github.com/users/rubys","html_url":"https://github.com/rubys","followers_url":"https://api.github.com/users/rubys/followers","following_url":"https://api.github.com/users/rubys/following{/other_user}","gists_url":"https://api.github.com/users/rubys/gists{/gist_id}","starred_url":"https://api.github.com/users/rubys/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rubys/subscriptions","organizations_url":"https://api.github.com/users/rubys/orgs","repos_url":"https://api.github.com/users/rubys/repos","events_url":"https://api.github.com/users/rubys/events{/privacy}","received_events_url":"https://api.github.com/users/rubys/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2111160267","html_url":"https://github.com/rails/rails/issues/51829#issuecomment-2111160267","issue_url":"https://api.github.com/repos/rails/rails/issues/51829","id":2111160267,"node_id":"IC_kwDNIULOfdW_yw","user":{"login":"skipkayhil","id":6014046,"node_id":"MDQ6VXNlcjYwMTQwNDY=","avatar_url":"https://avatars.githubusercontent.com/u/6014046?v=4","gravatar_id":"","url":"https://api.github.com/users/skipkayhil","html_url":"https://github.com/skipkayhil","followers_url":"https://api.github.com/users/skipkayhil/followers","following_url":"https://api.github.com/users/skipkayhil/following{/other_user}","gists_url":"https://api.github.com/users/skipkayhil/gists{/gist_id}","starred_url":"https://api.github.com/users/skipkayhil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skipkayhil/subscriptions","organizations_url":"https://api.github.com/users/skipkayhil/orgs","repos_url":"https://api.github.com/users/skipkayhil/repos","events_url":"https://api.github.com/users/skipkayhil/events{/privacy}","received_events_url":"https://api.github.com/users/skipkayhil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-14T21:20:00Z","updated_at":"2024-05-14T21:20:00Z","body":"Looks like the `.env.erb` gets rendered to `.env`, after removing that file `foreman` works again for me","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2111160267/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"skipkayhil","id":6014046,"node_id":"MDQ6VXNlcjYwMTQwNDY=","avatar_url":"https://avatars.githubusercontent.com/u/6014046?v=4","gravatar_id":"","url":"https://api.github.com/users/skipkayhil","html_url":"https://github.com/skipkayhil","followers_url":"https://api.github.com/users/skipkayhil/followers","following_url":"https://api.github.com/users/skipkayhil/following{/other_user}","gists_url":"https://api.github.com/users/skipkayhil/gists{/gist_id}","starred_url":"https://api.github.com/users/skipkayhil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skipkayhil/subscriptions","organizations_url":"https://api.github.com/users/skipkayhil/orgs","repos_url":"https://api.github.com/users/skipkayhil/repos","events_url":"https://api.github.com/users/skipkayhil/events{/privacy}","received_events_url":"https://api.github.com/users/skipkayhil/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2111190581","html_url":"https://github.com/rails/rails/issues/51829#issuecomment-2111190581","issue_url":"https://api.github.com/repos/rails/rails/issues/51829","id":2111190581,"node_id":"IC_kwDNIULOfdY2NQ","user":{"login":"rubys","id":4815,"node_id":"MDQ6VXNlcjQ4MTU=","avatar_url":"https://avatars.githubusercontent.com/u/4815?v=4","gravatar_id":"","url":"https://api.github.com/users/rubys","html_url":"https://github.com/rubys","followers_url":"https://api.github.com/users/rubys/followers","following_url":"https://api.github.com/users/rubys/following{/other_user}","gists_url":"https://api.github.com/users/rubys/gists{/gist_id}","starred_url":"https://api.github.com/users/rubys/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rubys/subscriptions","organizations_url":"https://api.github.com/users/rubys/orgs","repos_url":"https://api.github.com/users/rubys/repos","events_url":"https://api.github.com/users/rubys/events{/privacy}","received_events_url":"https://api.github.com/users/rubys/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-14T21:45:40Z","updated_at":"2024-05-14T21:45:40Z","body":"Confirming that the following fixes the problem for me:\r\n\r\n```\r\nerb .env.erb > .env\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2111190581/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rubys","id":4815,"node_id":"MDQ6VXNlcjQ4MTU=","avatar_url":"https://avatars.githubusercontent.com/u/4815?v=4","gravatar_id":"","url":"https://api.github.com/users/rubys","html_url":"https://github.com/rubys","followers_url":"https://api.github.com/users/rubys/followers","following_url":"https://api.github.com/users/rubys/following{/other_user}","gists_url":"https://api.github.com/users/rubys/gists{/gist_id}","starred_url":"https://api.github.com/users/rubys/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rubys/subscriptions","organizations_url":"https://api.github.com/users/rubys/orgs","repos_url":"https://api.github.com/users/rubys/repos","events_url":"https://api.github.com/users/rubys/events{/privacy}","received_events_url":"https://api.github.com/users/rubys/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2111195398","html_url":"https://github.com/rails/rails/issues/51829#issuecomment-2111195398","issue_url":"https://api.github.com/repos/rails/rails/issues/51829","id":2111195398,"node_id":"IC_kwDNIULOfdZJBg","user":{"login":"andrewn617","id":39735028,"node_id":"MDQ6VXNlcjM5NzM1MDI4","avatar_url":"https://avatars.githubusercontent.com/u/39735028?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewn617","html_url":"https://github.com/andrewn617","followers_url":"https://api.github.com/users/andrewn617/followers","following_url":"https://api.github.com/users/andrewn617/following{/other_user}","gists_url":"https://api.github.com/users/andrewn617/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewn617/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewn617/subscriptions","organizations_url":"https://api.github.com/users/andrewn617/orgs","repos_url":"https://api.github.com/users/andrewn617/repos","events_url":"https://api.github.com/users/andrewn617/events{/privacy}","received_events_url":"https://api.github.com/users/andrewn617/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-14T21:49:51Z","updated_at":"2024-05-14T21:50:24Z","body":"Yeah, it seems `kamal init` is [being called before](https://github.com/rails/rails/blob/main/railties/lib/rails/generators/app_base.rb#L732-L734) we create the `.env.erb` template. So the `.env` has dummy values. But even if I swap the order of those calls, it seems `kamal init` is [not template aware](https://github.com/basecamp/kamal/blob/12cad5458a4fdc14ffb182ae99673a0136852ab3/lib/kamal/cli/main.rb#L151).","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2111195398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"andrewn617","id":39735028,"node_id":"MDQ6VXNlcjM5NzM1MDI4","avatar_url":"https://avatars.githubusercontent.com/u/39735028?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewn617","html_url":"https://github.com/andrewn617","followers_url":"https://api.github.com/users/andrewn617/followers","following_url":"https://api.github.com/users/andrewn617/following{/other_user}","gists_url":"https://api.github.com/users/andrewn617/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewn617/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewn617/subscriptions","organizations_url":"https://api.github.com/users/andrewn617/orgs","repos_url":"https://api.github.com/users/andrewn617/repos","events_url":"https://api.github.com/users/andrewn617/events{/privacy}","received_events_url":"https://api.github.com/users/andrewn617/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2111249847","html_url":"https://github.com/rails/rails/issues/51829#issuecomment-2111249847","issue_url":"https://api.github.com/repos/rails/rails/issues/51829","id":2111249847,"node_id":"IC_kwDNIULOfdcdtw","user":{"login":"dhh","id":2741,"node_id":"MDQ6VXNlcjI3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/2741?v=4","gravatar_id":"","url":"https://api.github.com/users/dhh","html_url":"https://github.com/dhh","followers_url":"https://api.github.com/users/dhh/followers","following_url":"https://api.github.com/users/dhh/following{/other_user}","gists_url":"https://api.github.com/users/dhh/gists{/gist_id}","starred_url":"https://api.github.com/users/dhh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhh/subscriptions","organizations_url":"https://api.github.com/users/dhh/orgs","repos_url":"https://api.github.com/users/dhh/repos","events_url":"https://api.github.com/users/dhh/events{/privacy}","received_events_url":"https://api.github.com/users/dhh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-14T22:32:12Z","updated_at":"2024-05-14T22:32:12Z","body":"Ah yeah, will add a call to evaluate .env.erb on first run. Then it'll yank the key from master.key into .env.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2111249847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dhh","id":2741,"node_id":"MDQ6VXNlcjI3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/2741?v=4","gravatar_id":"","url":"https://api.github.com/users/dhh","html_url":"https://github.com/dhh","followers_url":"https://api.github.com/users/dhh/followers","following_url":"https://api.github.com/users/dhh/following{/other_user}","gists_url":"https://api.github.com/users/dhh/gists{/gist_id}","starred_url":"https://api.github.com/users/dhh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhh/subscriptions","organizations_url":"https://api.github.com/users/dhh/orgs","repos_url":"https://api.github.com/users/dhh/repos","events_url":"https://api.github.com/users/dhh/events{/privacy}","received_events_url":"https://api.github.com/users/dhh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12808931602,"node_id":"CE_lADNIULOiN__3M8AAAAC-3jJEg","url":"https://api.github.com/repos/rails/rails/issues/events/12808931602","actor":{"login":"dhh","id":2741,"node_id":"MDQ6VXNlcjI3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/2741?v=4","gravatar_id":"","url":"https://api.github.com/users/dhh","html_url":"https://github.com/dhh","followers_url":"https://api.github.com/users/dhh/followers","following_url":"https://api.github.com/users/dhh/following{/other_user}","gists_url":"https://api.github.com/users/dhh/gists{/gist_id}","starred_url":"https://api.github.com/users/dhh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhh/subscriptions","organizations_url":"https://api.github.com/users/dhh/orgs","repos_url":"https://api.github.com/users/dhh/repos","events_url":"https://api.github.com/users/dhh/events{/privacy}","received_events_url":"https://api.github.com/users/dhh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"33592402f9765050679f8311f7d115ca0641723b","commit_url":"https://api.github.com/repos/rails/rails/commits/33592402f9765050679f8311f7d115ca0641723b","created_at":"2024-05-14T22:36:46Z","state_reason":null,"performed_via_github_app":null},{"id":12809064720,"node_id":"REFE_lADNIULOiN__3M8AAAAC-3rREA","url":"https://api.github.com/repos/rails/rails/issues/events/12809064720","actor":{"login":"rafaelfranca","id":47848,"node_id":"MDQ6VXNlcjQ3ODQ4","avatar_url":"https://avatars.githubusercontent.com/u/47848?v=4","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"33592402f9765050679f8311f7d115ca0641723b","commit_url":"https://api.github.com/repos/grcooper/rails/commits/33592402f9765050679f8311f7d115ca0641723b","created_at":"2024-05-14T22:57:08Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2111798319","html_url":"https://github.com/rails/rails/issues/51829#issuecomment-2111798319","issue_url":"https://api.github.com/repos/rails/rails/issues/51829","id":2111798319,"node_id":"IC_kwDNIULOfd98Lw","user":{"login":"morgoth","id":10766,"node_id":"MDQ6VXNlcjEwNzY2","avatar_url":"https://avatars.githubusercontent.com/u/10766?v=4","gravatar_id":"","url":"https://api.github.com/users/morgoth","html_url":"https://github.com/morgoth","followers_url":"https://api.github.com/users/morgoth/followers","following_url":"https://api.github.com/users/morgoth/following{/other_user}","gists_url":"https://api.github.com/users/morgoth/gists{/gist_id}","starred_url":"https://api.github.com/users/morgoth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morgoth/subscriptions","organizations_url":"https://api.github.com/users/morgoth/orgs","repos_url":"https://api.github.com/users/morgoth/repos","events_url":"https://api.github.com/users/morgoth/events{/privacy}","received_events_url":"https://api.github.com/users/morgoth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-15T07:39:38Z","updated_at":"2024-05-15T07:39:38Z","body":"@dhh I think the .env file picked up both by default by kamal and foreman might be a big source of confusion and bugs, vide https://github.com/basecamp/kamal/issues/233 and https://github.com/basecamp/kamal/discussions/420\r\n\r\nCan we maybe differentiate somehow those 2 env files so they do not interfere with each other?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2111798319/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"morgoth","id":10766,"node_id":"MDQ6VXNlcjEwNzY2","avatar_url":"https://avatars.githubusercontent.com/u/10766?v=4","gravatar_id":"","url":"https://api.github.com/users/morgoth","html_url":"https://github.com/morgoth","followers_url":"https://api.github.com/users/morgoth/followers","following_url":"https://api.github.com/users/morgoth/following{/other_user}","gists_url":"https://api.github.com/users/morgoth/gists{/gist_id}","starred_url":"https://api.github.com/users/morgoth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morgoth/subscriptions","organizations_url":"https://api.github.com/users/morgoth/orgs","repos_url":"https://api.github.com/users/morgoth/repos","events_url":"https://api.github.com/users/morgoth/events{/privacy}","received_events_url":"https://api.github.com/users/morgoth/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12812693145,"node_id":"MEE_lADNIULOiN__3M8AAAAC-7IumQ","url":"https://api.github.com/repos/rails/rails/issues/events/12812693145","actor":{"login":"dhh","id":2741,"node_id":"MDQ6VXNlcjI3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/2741?v=4","gravatar_id":"","url":"https://api.github.com/users/dhh","html_url":"https://github.com/dhh","followers_url":"https://api.github.com/users/dhh/followers","following_url":"https://api.github.com/users/dhh/following{/other_user}","gists_url":"https://api.github.com/users/dhh/gists{/gist_id}","starred_url":"https://api.github.com/users/dhh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhh/subscriptions","organizations_url":"https://api.github.com/users/dhh/orgs","repos_url":"https://api.github.com/users/dhh/repos","events_url":"https://api.github.com/users/dhh/events{/privacy}","received_events_url":"https://api.github.com/users/dhh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-05-15T07:39:39Z","performed_via_github_app":null},{"id":12812693166,"node_id":"SE_lADNIULOiN__3M8AAAAC-7Iurg","url":"https://api.github.com/repos/rails/rails/issues/events/12812693166","actor":{"login":"dhh","id":2741,"node_id":"MDQ6VXNlcjI3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/2741?v=4","gravatar_id":"","url":"https://api.github.com/users/dhh","html_url":"https://github.com/dhh","followers_url":"https://api.github.com/users/dhh/followers","following_url":"https://api.github.com/users/dhh/following{/other_user}","gists_url":"https://api.github.com/users/dhh/gists{/gist_id}","starred_url":"https://api.github.com/users/dhh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhh/subscriptions","organizations_url":"https://api.github.com/users/dhh/orgs","repos_url":"https://api.github.com/users/dhh/repos","events_url":"https://api.github.com/users/dhh/events{/privacy}","received_events_url":"https://api.github.com/users/dhh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-05-15T07:39:39Z","performed_via_github_app":null},{"actor":{"login":"jjb","id":6097,"node_id":"MDQ6VXNlcjYwOTc=","avatar_url":"https://avatars.githubusercontent.com/u/6097?v=4","gravatar_id":"","url":"https://api.github.com/users/jjb","html_url":"https://github.com/jjb","followers_url":"https://api.github.com/users/jjb/followers","following_url":"https://api.github.com/users/jjb/following{/other_user}","gists_url":"https://api.github.com/users/jjb/gists{/gist_id}","starred_url":"https://api.github.com/users/jjb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjb/subscriptions","organizations_url":"https://api.github.com/users/jjb/orgs","repos_url":"https://api.github.com/users/jjb/repos","events_url":"https://api.github.com/users/jjb/events{/privacy}","received_events_url":"https://api.github.com/users/jjb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-23T18:59:13Z","updated_at":"2024-05-23T18:59:13Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/jjb/rails/issues/2","repository_url":"https://api.github.com/repos/jjb/rails","labels_url":"https://api.github.com/repos/jjb/rails/issues/2/labels{/name}","comments_url":"https://api.github.com/repos/jjb/rails/issues/2/comments","events_url":"https://api.github.com/repos/jjb/rails/issues/2/events","html_url":"https://github.com/jjb/rails/pull/2","id":2313630561,"node_id":"PR_kwDOAMx5aM5wXqMs","number":2,"title":"debug test connection pool starts reaper in fork","user":{"login":"jjb","id":6097,"node_id":"MDQ6VXNlcjYwOTc=","avatar_url":"https://avatars.githubusercontent.com/u/6097?v=4","gravatar_id":"","url":"https://api.github.com/users/jjb","html_url":"https://github.com/jjb","followers_url":"https://api.github.com/users/jjb/followers","following_url":"https://api.github.com/users/jjb/following{/other_user}","gists_url":"https://api.github.com/users/jjb/gists{/gist_id}","starred_url":"https://api.github.com/users/jjb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjb/subscriptions","organizations_url":"https://api.github.com/users/jjb/orgs","repos_url":"https://api.github.com/users/jjb/repos","events_url":"https://api.github.com/users/jjb/events{/privacy}","received_events_url":"https://api.github.com/users/jjb/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-23T18:59:13Z","updated_at":"2024-05-23T18:59:44Z","closed_at":"2024-05-23T18:59:44Z","author_association":"OWNER","active_lock_reason":null,"draft":false,"repository":{"id":13400424,"node_id":"MDEwOlJlcG9zaXRvcnkxMzQwMDQyNA==","name":"rails","full_name":"jjb/rails","private":false,"owner":{"login":"jjb","id":6097,"node_id":"MDQ6VXNlcjYwOTc=","avatar_url":"https://avatars.githubusercontent.com/u/6097?v=4","gravatar_id":"","url":"https://api.github.com/users/jjb","html_url":"https://github.com/jjb","followers_url":"https://api.github.com/users/jjb/followers","following_url":"https://api.github.com/users/jjb/following{/other_user}","gists_url":"https://api.github.com/users/jjb/gists{/gist_id}","starred_url":"https://api.github.com/users/jjb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjb/subscriptions","organizations_url":"https://api.github.com/users/jjb/orgs","repos_url":"https://api.github.com/users/jjb/repos","events_url":"https://api.github.com/users/jjb/events{/privacy}","received_events_url":"https://api.github.com/users/jjb/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/jjb/rails","description":"Ruby on Rails","fork":true,"url":"https://api.github.com/repos/jjb/rails","forks_url":"https://api.github.com/repos/jjb/rails/forks","keys_url":"https://api.github.com/repos/jjb/rails/keys{/key_id}","collaborators_url":"https://api.github.com/repos/jjb/rails/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/jjb/rails/teams","hooks_url":"https://api.github.com/repos/jjb/rails/hooks","issue_events_url":"https://api.github.com/repos/jjb/rails/issues/events{/number}","events_url":"https://api.github.com/repos/jjb/rails/events","assignees_url":"https://api.github.com/repos/jjb/rails/assignees{/user}","branches_url":"https://api.github.com/repos/jjb/rails/branches{/branch}","tags_url":"https://api.github.com/repos/jjb/rails/tags","blobs_url":"https://api.github.com/repos/jjb/rails/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/jjb/rails/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/jjb/rails/git/refs{/sha}","trees_url":"https://api.github.com/repos/jjb/rails/git/trees{/sha}","statuses_url":"https://api.github.com/repos/jjb/rails/statuses/{sha}","languages_url":"https://api.github.com/repos/jjb/rails/languages","stargazers_url":"https://api.github.com/repos/jjb/rails/stargazers","contributors_url":"https://api.github.com/repos/jjb/rails/contributors","subscribers_url":"https://api.github.com/repos/jjb/rails/subscribers","subscription_url":"https://api.github.com/repos/jjb/rails/subscription","commits_url":"https://api.github.com/repos/jjb/rails/commits{/sha}","git_commits_url":"https://api.github.com/repos/jjb/rails/git/commits{/sha}","comments_url":"https://api.github.com/repos/jjb/rails/comments{/number}","issue_comment_url":"https://api.github.com/repos/jjb/rails/issues/comments{/number}","contents_url":"https://api.github.com/repos/jjb/rails/contents/{+path}","compare_url":"https://api.github.com/repos/jjb/rails/compare/{base}...{head}","merges_url":"https://api.github.com/repos/jjb/rails/merges","archive_url":"https://api.github.com/repos/jjb/rails/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/jjb/rails/downloads","issues_url":"https://api.github.com/repos/jjb/rails/issues{/number}","pulls_url":"https://api.github.com/repos/jjb/rails/pulls{/number}","milestones_url":"https://api.github.com/repos/jjb/rails/milestones{/number}","notifications_url":"https://api.github.com/repos/jjb/rails/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/jjb/rails/labels{/name}","releases_url":"https://api.github.com/repos/jjb/rails/releases{/id}","deployments_url":"https://api.github.com/repos/jjb/rails/deployments","created_at":"2013-10-08T01:26:21Z","updated_at":"2025-10-27T04:26:56Z","pushed_at":"2024-12-05T22:29:34Z","git_url":"git://github.com/jjb/rails.git","ssh_url":"git@github.com:jjb/rails.git","clone_url":"https://github.com/jjb/rails.git","svn_url":"https://github.com/jjb/rails","homepage":"http://rubyonrails.org","size":226414,"stargazers_count":1,"watchers_count":1,"language":"Ruby","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":0,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":0,"open_issues":1,"watchers":1,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/jjb/rails/pulls/2","html_url":"https://github.com/jjb/rails/pull/2","diff_url":"https://github.com/jjb/rails/pull/2.diff","patch_url":"https://github.com/jjb/rails/pull/2.patch","merged_at":null},"body":"- Improve STI documentation\n- Replace `:disabled` with `nil`\n- Preserve `--asset-pipeline` when running `app:update`\n- Add more examples to `#in_order_of` [ci-skip]\n- Document autosave validation behavior\n- [ci skip] fixed rubocop spacing issue\n- simplify `in_order_of` documentation\n- Add a basic railtie integration test for Active Storage\n- Enable Hash#compact_blank inside ActiveSupport::LogSubscriber\n- Ensure image_processing is installed with Trix\n- Fix `destroy_async` job for owners with composite primary keys\n- Bump mysql2 to fix build error with mysql-client 8.3\n- Emit deprecation warning about inverse_of inference only for valid reflections\n- Remove node_modules from the final image\n- Fix an error for `apply_rubocop_autocorrect_after_generate!` with `--pretend`\n- Don't preload Selenium browser when remote\n- Fix \"no anonymous block parameter\" in ruby 3.1\n- Restore to: option with an implicit controller\n- Wrap YJIT guard clause in parentheses\n- Remove rubocop and lint workflows\n- Add node and yarn to devcontainer when creating a project with Javascript\n- test: fix flaky schema dump test to prefer YAML to Marshal\n- ruby-head: handle unused block warnings\n- TestCase#create_fixtures no longer takes a block\n- Change devcontainer.json to forward used ports for the project\n- Pin sqlite3 version in bug_report_templates\n- Correct typo for ActiveJob::Enqueuing::ClassMethods doc\n- Allow sqlite3 to float to version 2\n- Fix unused block warnings for template methods\n- Remove outdated `mathn` related test\n- Action View Caching code sample syntax [ci skip]\n- Add print styles to Rails guides (#51458)\n- test: update karma npm from 3.1.4 to 6.4.2\n- Add `save_and_open_page` helper to IntegrationTest\n- Don't silently execute statements on migrations when they can't be reversed\n- Remove unused variable assignment in test\n- Action View Tests: Use `#with_routing` helper\n- Revert \"Don't silently execute statements on migrations when they can't be reversed\"\n- Strict loading using `:n_plus_one_only` does not eagerly load child associations.\n- Fix some more ignored block warnings\n- Arel: only wrap SELECT statements in UNION if they involve ORDER BY, LIMIT or OFFSET\n- Fix indentation on `save_and_open_page` tests\n- Fix typo in page_dump_helper.rb\n- [Fix #51095] Missing template error page showing incorrect view path example for nested controller path\n- Refactor code to make it more clear\n- Copy edit documentation\n- docs: Fix ActiveSupport::TimeWithZone#change example [skip ci]\n- Filter internal frames in deprecation warnings for Ruby 3.4\n- Encourage `#lease_connection` over `#connection` on AR model `#inspect` without connection\n- Fix ActiveSupport configurations deprecations\n- SerializedAttributeTest: use decorate_attribute\n- Update comments for helper method generation\n- Update builder doc links to point to the rails repo [ci skip]\n- Remove reference to BlankSlate\n- Fix `Mime::Type.parse` for HTTP Accept with parameters\n- Improve migration.rb documentation consistency\n- Deprecate `ActiveSupport::ProxyObject`\n- Let Action Cable's autoloader ignore the version file\n- Use `Module#include` rather than `prepend` since we don't need `prepend` semantics here and `include` leads to faster method lookups.\n- Fix ActionView backtrace filtering on Ruby 3.4+\n- Ensure pre-7.1 migrations use legacy index names when using `rename_table`\n- Support hexBinary format in XML\n- Rename method to keep it consistent with others _parse_* versions\n- Join association built from string join should not retry\n- Update guides: Replace filter with action callback\n- Fix PostgreSQL Cidr#change? when changed address prefix. Fix #51582\n- Document the use of nopush for asset tags\n- Use Ruby's official documentation\n- Upgrade devcontainer to use 3.3.1\n- Fix building guides outside ./guides directory\n- Create preview tarball from directory\n- Remove outdated comment\n- Fix Ruby 3.4 internal frame cleaner test\n- Fix count queries on `includes+references` for models with composite primary keys\n- Add more gem docs in Rails Application Templates guide\n- add navbar highlighting to guides\n- Skip `selenium-webdriver` version 4.20.0\n- Fix Rake :preview_docs tarball\n- Resolve deprecation warning in latest `selenium-webdriver`\n- Allow assertionless tests to be reported\n- Unsilence BacktraceCleaner with BACKTRACE without removing silencers\n- Upgrade the docker-login and checkout action versions\n- Update production.rb template to provide example to exclude healthcheck from force_ssl redirect\n- Fix ActiveSupport::TestCase being loaded too early\n- No need to recommend spring any more as a common option\n- Rails 8 will target Ruby 3.3+ only for new apps\n- Usage not common enough to warrant top-line recommendation\n- Raise when a block is passed to `ActiveRecord::Relation#with`\n- Remove unnecessary to_a conversion for readonly_attributes method call\n- Add period to end of comment sentences in env templates for consistency (#51677)\n- Add a Date decoder to the pg adapter to type cast dates at the connection level\n- Fix minor typo in `ActiveSupport::ProxyObject` deprecation logs (#51688)\n- Add `require: \"debug/prelude\"` after `debug`'s Gemfile entry\n- Deduplicate watched filenames in `FileUpdateChecker`\n- Update Doc for ActiveRecord::RecordNotSaved to be consistent\n- Replace — with : in instrumentation subheadings\n- Revert \"Rails 8 will target Ruby 3.3+ only for new apps\"\n- Remove configuration to control what we do with tests without assertions\n- Document buildkite/docs-preview pipeline\n- Ignore tarball from rake preview_docs\n- Fix tests without assertions in the framework\n- Add rake guides:lint task to raise error on broken anchor links\n- Avoid seed data execution in CI by replacing `db:setup` with `db:test:prepare`\n- docs: Update FormHelper comments to use `form_with` instead of `form_for`\n- Remove deprecated `config.active_storage.replace_on_assign_to_many`\n- Remove deprecated `config.active_storage.silence_invalid_content_types_warning`\n- Remove deprecated support for the pre-Ruby 2.4 behavior of `to_time`\n- Remove deprecated `:pool_size` and `:pool_timeout` options for the cache storage\n- Remove deprecated support for `config.active_support.cache_format_version = 6.1`\n- Remove deprecated constants `ActiveSupport::LogSubscriber::CLEAR` and `ActiveSupport::LogSubscriber::BOLD`\n- Remove deprecated support to bolding log text with positional boolean in `ActiveSupport::LogSubscriber#color`\n- Remove deprecated `config.active_support.disable_to_s_conversion`\n- Remove deprecated `config.active_support.remove_deprecated_time_with_zone_name`\n- Remove deprecated `config.active_support.use_rfc4122_namespaced_uuids`\n- Remove deprecated support to passing `Dalli::Client` instances to `MemCacheStore`\n- Remove deprecated `#to_default_s` from `Array`, `Date`, `DateTime` and `Time`\n- Update deprecator horizon for 7.3\n- Remove deprecated `SafeBuffer#clone_empty`\n- Remove deprecated `ActiveSupport::Deprecation` delegation to instance\n- Remove deprecated support to call the following methods without passing a deprecator\n- Remove deprecated `ActiveSupport::Notifications::Event#children` and  `ActiveSupport::Notifications::Event#parent_of?`\n- Remove unnecessary deprecation silencing in cache_store_compression_behavior.rb\n- Upgrade prism\n- Remove deprecation on calling `assert_equal` with `nil`\n- Remove deprecated `Rails.application.secrets`\n- Remove deprecated `Rails.config.enable_dependency_loading`\n- Remove deprecated `find_cmd_and_exec` console helper\n- Remove deprecated `Rails::Generators::Testing::Behaviour`\n- Pass validate(_check)_constraint through change_table\n- Register Rails console commands/helpers with its latest extension APIs\n- Document .devcontainer to the file/folder structure of new application\n- Add support for recursive CTE in Active Record\n- Fix typo from Changelog [ci skip]\n- WithChain does not exist in the codebase\n- Don't cast `stale_state` to String\n- Update guides/source/getting_started.md\n- Turn app:update Rake tasks into a Command\n- Inline AppUpdater into App::UpdateCommand\n- Pass App::UpdateCommand options to AppGenerator\n- Add runtime options from Thor::Actions to app:update\n- Don't mess with Minitest unless RAILS_ENV is set\n- Remove extra line generation from devecontainer compose.yaml\n- Fix: guides styling issue on light mode\n- Eliminate missed `lease_connection` calls\n- Use symbols as keys for `_reflections`\n- Update Getting Start With Rails guide to account for Dev Containers\n- Fix documentation\n- Fix typo in configuring guide\n- Support `duration` in `ActiveSupport::XmlMini`\n- [FIX] Remove warning: literal string will be frozen in the future from render_test\n- Fix console_test to work with both IRB's RelineInputMethod and StdioInputMethod\n- Fix config.read_encrypted_secrets deprecation warning quoting\n- Avoid allocating a column_type Hash when unnecessary\n- [FIX] Sqlite3 Should create db for missing parent directories as well\n- Devcontainer: Use SQLite3 feature.\n- Improve db_system_change_generator_test.rb\n- Avoid setting fixed app name in console prompt\n- Add ENV[\"SKIP_TEST_DATABASE_TRUNCATE\"] flag to speed up multi-process test runs (#51686)\n- Explain that the default Dockerfile is intended for production\n- Simplify `ActiveRecord::Result#hash_rows`\n- Revise the autoloading guide for middleware and friends\n- Reduce allocations in BelongsToAssociation#replace_keys\n- Remove extraneous array wrapping\n- Continue including Rails::ConsoleMethods to IRB's internal\n- Warn about changing `query_constraints:` behavior\n- Replace allocations count by GC time in request logs\n- Defer route drawing to the first request, or when url_helpers called.\n- Active Job: Correctly use the desired test adapter in tests\n- Add index_errors: :nested_attributes_order mode\n- Fix test\n- Fix `.with_connection` to not set current scope\n- Example requires delimiter\n- Remove debug require from guides generator\n- Fix test runner --fail-fast test flake\n- Fix `ActiveRecord::Relation#touch_all` with custom attribute aliased as attribute for update\n- Add support for `:if_not_exists` and `:force` options to `create_schema`\n- This isnt needed as a default (#51782)\n- Fix RuboCop autocorrect for Windows\n- Remove package litter after each install to shrink layer sizes (#51792)\n- Show how to use the Dockerfile directly\n- Correct typo in activerecord changelog [ci skip]\n- Support `touch_all` in batches\n- Refactor `ActiveRecord::SignedId` to not rely on relation delegation\n- Do not trigger devcontainer tests on pull requests\n- Refactor `ActiveRecord::TokenFor` to not rely on relation delegation\n- Fix: batch test assertion order\n- Enable Lint/Debugger\n- Move `ActiveRecord::Base.delete` in `Relation`\n- Move `ActiveRecord::Base.destroy` in `Relation`\n- Move `ActiveRecord::Base.insert` in `Relation`\n- Suppress RuboCop output when there are no offenses in code generation\n- Use `foreign_key` option for destroy_async test models\n- Development of Rails 8.0 starts now\n- Reapply \"Rails 8 will target Ruby 3.3+ only for new apps\"\n- Clean CHANGELOG for 8.0\n- Add name to DevContainer compose file\n- Fix rubocop\n- Remove support for oracle, sqlserver and JRuby specific database adapters from the new and db:system:change commands. The supported options are sqlite3, mysql, postgresql and trilogy.\n- Refactoring Database generators\n- Point user to devcontainer for containerized dev environment\n- This will be released in 7.2\n- Merge pull request #51766 from Shopify/revert-actionable-errors-retry\n- Add Highlights section in the Rails 7.1 release notes\n- Remove jruby and oracle related gems from Gemfile\n- Change `BatchEnumerator#destroy_all` to return the total number of affected rows\n- Fix PostgreSQL Cidr#change?: NoMethodError: undefined method `prefix` for nil\n- Add Kamal by default to Rails 8 (#51798)\n- Only serialize associations that were loaded\n- Eliminate `lease_connection` call in `cached_find_by`\n- Appease the linter\n- Remove deprecated problem from local dev guide\n- Memoize `queue_adapter_for_test`\n- Fix outdated Gemfile.lock\n- Add regression test for memoized queue adapter\n- This will be released in 7.2, not 8\n- Install kamal as a development gem\n- Remove support for SQLServerAdapter, OracleAdapter and JBDC adapters in tests\n- Remove Oracle, SQLServer and Jbdc templates\n- Don't require Kamal\n- Refactor change generator database implementation\n- Remove default .env from Kamal and just rely on .env.erb (Closes #51829)\n- Pass options to write_entry in handle_expired_entry method\n- Missing CR for style\n- Fix console tests\n- Remove 7.2 release changes from Rails 8.0 release note\n- Point 7-2-stable branch CHANGELOGS in rails 7-2 release note\n- Update link to `i18n` gem repository [ci-skip]\n- Add `active_record.postgresql_adapter_decode_dates` to toggle automatic decoding of dates column with the PostgresqlAdapter.\n- By definition, new apps wont have any deprecations to worry about. So dont expose those controls for new apps by default (#51831)\n- Revert \"Pin minitest version to 5.21\"\n- Allow test command invocations to exit failure\n- Clarify contributing doc to not ping maintainers\n- Upgrade Trix to 2.1.1 to fix [CVE-2024-34341][1]\n- Don’t create storage/ directory if not needed\n- Address `Layout/IndentationWidth` cop offenses\n- Restore unused block warnings condition for Ruby 3.4\n- Add rubocop and GitHub Actions to plugin generator\n- Improve Rails console helper methods' descriptions\n- Don’t configure Kamal storage volume if not needed\n- Fix exception raised from template should not show compiled code\n- ActiveRecord -> Active Record\n- Temporarily fix multi-paragraph definition lists\n- Make public method for `schema_cache_ignored_tables?`\n- Add test and fix changelog for `schema_cache_ignored_table?`\n- Fix typo\n- Document the transaction.active_record event\n- Revert \"Merge pull request #50489 from maniSHarma7575/50481-fix-activesupport-json-encode\"\n- Upgrade rdoc to get https://github.com/ruby/rdoc/pull/1096\n- fix #50189 docs section reverting previous migrations mismatch code example\n- Use rails fork for rdoc gem\n- [Fix #51720] Infer association klass as top level if model has same demodularized name\n- chore(deps-dev): update eslint from 4.3.0 to 8.40.0\n- Revert \"Merge pull request #51184 from ConfusedVorlon/document_after_commit_deduplication\"\n- Revert RuboCop workaround\n- chore: update Brewfile per renaming postgresql Formula\n- update sqlite3 adapter tests to accept error messages from v3.46.0\n- Enable Rails minitest plugin in our rake tasks\n- Point to the right executable when warning about --profile\n- chore: remove webpack from yarn dependencies in Rails dev\n- Look up route from requirements (#51850)\n- timeouts for debugging\n\n<!--\nThanks for contributing to Rails!\n\nPlease do not make *Draft* pull requests, as they still send\nnotifications to everyone watching the Rails repo.\n\nCreate a pull request when it is ready for review and feedback\nfrom the Rails team :).\n\nIf your pull request affects documentation or any non-code\nchanges, guidelines for those changes are [available\nhere](https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#contributing-to-the-rails-documentation)\n\nAbout this template\n\nThe following template aims to help contributors write a good description for their pull requests.\nWe'd like you to provide a description of the changes in your pull request (i.e. bugs fixed or features added), the motivation behind the changes, and complete the checklist below before opening a pull request.\n\nFeel free to discard it if you need to (e.g. when you just fix a typo). -->\n\n### Motivation / Background\n\n<!--\nDescribe why this Pull Request needs to be merged. What bug have you fixed? What feature have you added? Why is it important?\nIf you are fixing a specific issue, include \"Fixes #ISSUE\" (replace with the issue number, remove the quotes) and the issue will be linked to this PR.\n-->\n\nThis Pull Request has been created because [REPLACE ME]\n\n### Detail\n\nThis Pull Request changes [REPLACE ME]\n\n### Additional information\n\n<!-- Provide additional information such as benchmarks, references to other repositories, or alternative solutions. -->\n\n### Checklist\n\nBefore submitting the PR make sure the following are checked:\n\n* [ ] This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.\n* [ ] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: `[Fix #issue-number]`\n* [ ] Tests are added or updated if you fix a bug or add a feature.\n* [ ] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.\n","reactions":{"url":"https://api.github.com/repos/jjb/rails/issues/2/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/jjb/rails/issues/2/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2143440630","html_url":"https://github.com/rails/rails/issues/51829#issuecomment-2143440630","issue_url":"https://api.github.com/repos/rails/rails/issues/51829","id":2143440630,"node_id":"IC_kwDNIULOf8JO9g","user":{"login":"Flixt","id":1724355,"node_id":"MDQ6VXNlcjE3MjQzNTU=","avatar_url":"https://avatars.githubusercontent.com/u/1724355?v=4","gravatar_id":"","url":"https://api.github.com/users/Flixt","html_url":"https://github.com/Flixt","followers_url":"https://api.github.com/users/Flixt/followers","following_url":"https://api.github.com/users/Flixt/following{/other_user}","gists_url":"https://api.github.com/users/Flixt/gists{/gist_id}","starred_url":"https://api.github.com/users/Flixt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Flixt/subscriptions","organizations_url":"https://api.github.com/users/Flixt/orgs","repos_url":"https://api.github.com/users/Flixt/repos","events_url":"https://api.github.com/users/Flixt/events{/privacy}","received_events_url":"https://api.github.com/users/Flixt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-01T12:59:08Z","updated_at":"2024-06-01T12:59:08Z","body":"I stumbled over the same problem when having credentials per environment. Forman always picked up the master key from `.env` (needed for kamal deployment) although running locally in development environment and `config/credentials/development.key` was present. I just forced foreman to not load any env file by adding `--env /dev/null` to the foreman command in `bin/dev` like this:\r\n\r\n```ruby\r\nexec foreman start -f Procfile.dev --env /dev/null \"$@\"\r\n```\r\n\r\nThis approach is mentioned here https://github.com/ddollar/foreman/issues/702","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2143440630/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Flixt","id":1724355,"node_id":"MDQ6VXNlcjE3MjQzNTU=","avatar_url":"https://avatars.githubusercontent.com/u/1724355?v=4","gravatar_id":"","url":"https://api.github.com/users/Flixt","html_url":"https://github.com/Flixt","followers_url":"https://api.github.com/users/Flixt/followers","following_url":"https://api.github.com/users/Flixt/following{/other_user}","gists_url":"https://api.github.com/users/Flixt/gists{/gist_id}","starred_url":"https://api.github.com/users/Flixt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Flixt/subscriptions","organizations_url":"https://api.github.com/users/Flixt/orgs","repos_url":"https://api.github.com/users/Flixt/repos","events_url":"https://api.github.com/users/Flixt/events{/privacy}","received_events_url":"https://api.github.com/users/Flixt/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2144009579","html_url":"https://github.com/rails/rails/issues/51829#issuecomment-2144009579","issue_url":"https://api.github.com/repos/rails/rails/issues/51829","id":2144009579,"node_id":"IC_kwDNIULOf8r9aw","user":{"login":"dhh","id":2741,"node_id":"MDQ6VXNlcjI3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/2741?v=4","gravatar_id":"","url":"https://api.github.com/users/dhh","html_url":"https://github.com/dhh","followers_url":"https://api.github.com/users/dhh/followers","following_url":"https://api.github.com/users/dhh/following{/other_user}","gists_url":"https://api.github.com/users/dhh/gists{/gist_id}","starred_url":"https://api.github.com/users/dhh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhh/subscriptions","organizations_url":"https://api.github.com/users/dhh/orgs","repos_url":"https://api.github.com/users/dhh/repos","events_url":"https://api.github.com/users/dhh/events{/privacy}","received_events_url":"https://api.github.com/users/dhh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-02T20:22:01Z","updated_at":"2024-06-02T20:22:01Z","body":"That seems like a fine fix for the default /bin/dev, which is where we use foreman out of the box through the bundlers. If you'd like to open some PRs to get that sorted, that would be great. Thanks!","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2144009579/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dhh","id":2741,"node_id":"MDQ6VXNlcjI3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/2741?v=4","gravatar_id":"","url":"https://api.github.com/users/dhh","html_url":"https://github.com/dhh","followers_url":"https://api.github.com/users/dhh/followers","following_url":"https://api.github.com/users/dhh/following{/other_user}","gists_url":"https://api.github.com/users/dhh/gists{/gist_id}","starred_url":"https://api.github.com/users/dhh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhh/subscriptions","organizations_url":"https://api.github.com/users/dhh/orgs","repos_url":"https://api.github.com/users/dhh/repos","events_url":"https://api.github.com/users/dhh/events{/privacy}","received_events_url":"https://api.github.com/users/dhh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"Flixt","id":1724355,"node_id":"MDQ6VXNlcjE3MjQzNTU=","avatar_url":"https://avatars.githubusercontent.com/u/1724355?v=4","gravatar_id":"","url":"https://api.github.com/users/Flixt","html_url":"https://github.com/Flixt","followers_url":"https://api.github.com/users/Flixt/followers","following_url":"https://api.github.com/users/Flixt/following{/other_user}","gists_url":"https://api.github.com/users/Flixt/gists{/gist_id}","starred_url":"https://api.github.com/users/Flixt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Flixt/subscriptions","organizations_url":"https://api.github.com/users/Flixt/orgs","repos_url":"https://api.github.com/users/Flixt/repos","events_url":"https://api.github.com/users/Flixt/events{/privacy}","received_events_url":"https://api.github.com/users/Flixt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-02T21:41:56Z","updated_at":"2024-06-02T21:41:56Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rails/cssbundling-rails/issues/155","repository_url":"https://api.github.com/repos/rails/cssbundling-rails","labels_url":"https://api.github.com/repos/rails/cssbundling-rails/issues/155/labels{/name}","comments_url":"https://api.github.com/repos/rails/cssbundling-rails/issues/155/comments","events_url":"https://api.github.com/repos/rails/cssbundling-rails/issues/155/events","html_url":"https://github.com/rails/cssbundling-rails/pull/155","id":2329876302,"node_id":"PR_kwDOGBTa_85xO3Xj","number":155,"title":"Disable loading .env file when running foreman for development","user":{"login":"Flixt","id":1724355,"node_id":"MDQ6VXNlcjE3MjQzNTU=","avatar_url":"https://avatars.githubusercontent.com/u/1724355?v=4","gravatar_id":"","url":"https://api.github.com/users/Flixt","html_url":"https://github.com/Flixt","followers_url":"https://api.github.com/users/Flixt/followers","following_url":"https://api.github.com/users/Flixt/following{/other_user}","gists_url":"https://api.github.com/users/Flixt/gists{/gist_id}","starred_url":"https://api.github.com/users/Flixt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Flixt/subscriptions","organizations_url":"https://api.github.com/users/Flixt/orgs","repos_url":"https://api.github.com/users/Flixt/repos","events_url":"https://api.github.com/users/Flixt/events{/privacy}","received_events_url":"https://api.github.com/users/Flixt/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-06-02T21:41:56Z","updated_at":"2024-07-29T18:55:35Z","closed_at":"2024-07-29T18:55:35Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":404019967,"node_id":"MDEwOlJlcG9zaXRvcnk0MDQwMTk5Njc=","name":"cssbundling-rails","full_name":"rails/cssbundling-rails","private":false,"owner":{"login":"rails","id":4223,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjM=","avatar_url":"https://avatars.githubusercontent.com/u/4223?v=4","gravatar_id":"","url":"https://api.github.com/users/rails","html_url":"https://github.com/rails","followers_url":"https://api.github.com/users/rails/followers","following_url":"https://api.github.com/users/rails/following{/other_user}","gists_url":"https://api.github.com/users/rails/gists{/gist_id}","starred_url":"https://api.github.com/users/rails/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails/subscriptions","organizations_url":"https://api.github.com/users/rails/orgs","repos_url":"https://api.github.com/users/rails/repos","events_url":"https://api.github.com/users/rails/events{/privacy}","received_events_url":"https://api.github.com/users/rails/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rails/cssbundling-rails","description":"Bundle and process CSS in Rails with Tailwind, PostCSS, and Sass via Node.js.","fork":false,"url":"https://api.github.com/repos/rails/cssbundling-rails","forks_url":"https://api.github.com/repos/rails/cssbundling-rails/forks","keys_url":"https://api.github.com/repos/rails/cssbundling-rails/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rails/cssbundling-rails/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rails/cssbundling-rails/teams","hooks_url":"https://api.github.com/repos/rails/cssbundling-rails/hooks","issue_events_url":"https://api.github.com/repos/rails/cssbundling-rails/issues/events{/number}","events_url":"https://api.github.com/repos/rails/cssbundling-rails/events","assignees_url":"https://api.github.com/repos/rails/cssbundling-rails/assignees{/user}","branches_url":"https://api.github.com/repos/rails/cssbundling-rails/branches{/branch}","tags_url":"https://api.github.com/repos/rails/cssbundling-rails/tags","blobs_url":"https://api.github.com/repos/rails/cssbundling-rails/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rails/cssbundling-rails/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rails/cssbundling-rails/git/refs{/sha}","trees_url":"https://api.github.com/repos/rails/cssbundling-rails/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rails/cssbundling-rails/statuses/{sha}","languages_url":"https://api.github.com/repos/rails/cssbundling-rails/languages","stargazers_url":"https://api.github.com/repos/rails/cssbundling-rails/stargazers","contributors_url":"https://api.github.com/repos/rails/cssbundling-rails/contributors","subscribers_url":"https://api.github.com/repos/rails/cssbundling-rails/subscribers","subscription_url":"https://api.github.com/repos/rails/cssbundling-rails/subscription","commits_url":"https://api.github.com/repos/rails/cssbundling-rails/commits{/sha}","git_commits_url":"https://api.github.com/repos/rails/cssbundling-rails/git/commits{/sha}","comments_url":"https://api.github.com/repos/rails/cssbundling-rails/comments{/number}","issue_comment_url":"https://api.github.com/repos/rails/cssbundling-rails/issues/comments{/number}","contents_url":"https://api.github.com/repos/rails/cssbundling-rails/contents/{+path}","compare_url":"https://api.github.com/repos/rails/cssbundling-rails/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rails/cssbundling-rails/merges","archive_url":"https://api.github.com/repos/rails/cssbundling-rails/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rails/cssbundling-rails/downloads","issues_url":"https://api.github.com/repos/rails/cssbundling-rails/issues{/number}","pulls_url":"https://api.github.com/repos/rails/cssbundling-rails/pulls{/number}","milestones_url":"https://api.github.com/repos/rails/cssbundling-rails/milestones{/number}","notifications_url":"https://api.github.com/repos/rails/cssbundling-rails/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rails/cssbundling-rails/labels{/name}","releases_url":"https://api.github.com/repos/rails/cssbundling-rails/releases{/id}","deployments_url":"https://api.github.com/repos/rails/cssbundling-rails/deployments","created_at":"2021-09-07T14:58:35Z","updated_at":"2025-10-25T11:58:15Z","pushed_at":"2025-10-23T21:43:01Z","git_url":"git://github.com/rails/cssbundling-rails.git","ssh_url":"git@github.com:rails/cssbundling-rails.git","clone_url":"https://github.com/rails/cssbundling-rails.git","svn_url":"https://github.com/rails/cssbundling-rails","homepage":"","size":139,"stargazers_count":623,"watchers_count":623,"language":"Ruby","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":99,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":14,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":99,"open_issues":14,"watchers":623,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rails/cssbundling-rails/pulls/155","html_url":"https://github.com/rails/cssbundling-rails/pull/155","diff_url":"https://github.com/rails/cssbundling-rails/pull/155.diff","patch_url":"https://github.com/rails/cssbundling-rails/pull/155.patch","merged_at":"2024-07-29T18:55:35Z"},"body":"TL;DR;\r\n\r\nThis PR fixes the problem that when a `RAILS_MASTER_KEY` is defined with the key for production in `.env` (which is the case when using Kamal for deployment), the script in `bin/dev` will start foreman which will then pick up the variables from `.env` leading to a `ActiveSupport::MessageEncryptor::InvalidMessage` error when running `bin/dev`\r\n\r\nKamal is added by default for new Rails apps >= v8 (see https://github.com/rails/rails/pull/51798). Although, it seems that is not fully initialized and the `.env` file generated by `kamal init` is removed when a new Rails app is generated.\r\n\r\n-- \r\n\r\nThere are several other problems with the `.env` approach of Kamal, so I'm not entirely sure if this PR is the \"correct\" fix, but is seems reasonable as `bin/dev` is only run locally to start bundling + rails.\r\n\r\nSee other:\r\n- https://github.com/rails/rails/issues/51829 (Original issue/PR leading to this PR)\r\n- https://github.com/ddollar/foreman/issues/702 (Foreman issue describing the `--env /dev/null` solution)\r\n- https://github.com/basecamp/kamal/discussions/617 (Discussion explaining why `.env` in Kamal is dangerous)\r\n- https://github.com/basecamp/kamal/issues/233 (Issue about supporting multiple environments in Kamal)\r\n- https://github.com/basecamp/kamal/discussions/420 (Another discussion about Foreman & Kamal/MRSK incompatibility)","reactions":{"url":"https://api.github.com/repos/rails/cssbundling-rails/issues/155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/cssbundling-rails/issues/155/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2144032542","html_url":"https://github.com/rails/rails/issues/51829#issuecomment-2144032542","issue_url":"https://api.github.com/repos/rails/rails/issues/51829","id":2144032542,"node_id":"IC_kwDNIULOf8tXHg","user":{"login":"Flixt","id":1724355,"node_id":"MDQ6VXNlcjE3MjQzNTU=","avatar_url":"https://avatars.githubusercontent.com/u/1724355?v=4","gravatar_id":"","url":"https://api.github.com/users/Flixt","html_url":"https://github.com/Flixt","followers_url":"https://api.github.com/users/Flixt/followers","following_url":"https://api.github.com/users/Flixt/following{/other_user}","gists_url":"https://api.github.com/users/Flixt/gists{/gist_id}","starred_url":"https://api.github.com/users/Flixt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Flixt/subscriptions","organizations_url":"https://api.github.com/users/Flixt/orgs","repos_url":"https://api.github.com/users/Flixt/repos","events_url":"https://api.github.com/users/Flixt/events{/privacy}","received_events_url":"https://api.github.com/users/Flixt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-02T21:50:56Z","updated_at":"2024-06-02T21:50:56Z","body":"I was bitten by the definition of `bin/dev` from `rails/cssbundling-rails` here:\r\n\r\nhttps://github.com/rails/cssbundling-rails/blob/02caad4e0613404d535f804ebffe70ee3fc496da/lib/install/dev#L11\r\n\r\nI opened up https://github.com/rails/cssbundling-rails/pull/155.\r\n\r\nIf it is decided to merge this PR I'd be happy to also one PRs for https://github.com/rails/tailwindcss-rails, https://github.com/rails/jsbundling-rails, https://github.com/rails/dartsass-rails.\r\n\r\nAs mentioned in the PR I'm not entirely sure if this is the correct approach. It works and also seems to be fine to run foreman without loading `.env` for the purpose of local bundling. On the other hand there are people really having a hard time with the new defaults introduced by Kamal `.env`.\r\n\r\nI'm referencing the same issues/discussion as in the PR here to get better cross references.\r\n\r\nSee other:\r\n- https://github.com/rails/rails/issues/51829 (Original issue leading to this PR)\r\n- https://github.com/ddollar/foreman/issues/702 (Foreman issue describing the `--env /dev/null` solution)\r\n- https://github.com/basecamp/kamal/discussions/617 (Discussion explaining why `.env` in Kamal is dangerous)\r\n- https://github.com/basecamp/kamal/issues/233 (Issue about supporting multiple environments in Kamal)\r\n- https://github.com/basecamp/kamal/discussions/420 (Another discussion about Foreman & Kamal/MRSK incompatibility)","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2144032542/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Flixt","id":1724355,"node_id":"MDQ6VXNlcjE3MjQzNTU=","avatar_url":"https://avatars.githubusercontent.com/u/1724355?v=4","gravatar_id":"","url":"https://api.github.com/users/Flixt","html_url":"https://github.com/Flixt","followers_url":"https://api.github.com/users/Flixt/followers","following_url":"https://api.github.com/users/Flixt/following{/other_user}","gists_url":"https://api.github.com/users/Flixt/gists{/gist_id}","starred_url":"https://api.github.com/users/Flixt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Flixt/subscriptions","organizations_url":"https://api.github.com/users/Flixt/orgs","repos_url":"https://api.github.com/users/Flixt/repos","events_url":"https://api.github.com/users/Flixt/events{/privacy}","received_events_url":"https://api.github.com/users/Flixt/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2145945100","html_url":"https://github.com/rails/rails/issues/51829#issuecomment-2145945100","issue_url":"https://api.github.com/repos/rails/rails/issues/51829","id":2145945100,"node_id":"IC_kwDNIULOf-iGDA","user":{"login":"Flixt","id":1724355,"node_id":"MDQ6VXNlcjE3MjQzNTU=","avatar_url":"https://avatars.githubusercontent.com/u/1724355?v=4","gravatar_id":"","url":"https://api.github.com/users/Flixt","html_url":"https://github.com/Flixt","followers_url":"https://api.github.com/users/Flixt/followers","following_url":"https://api.github.com/users/Flixt/following{/other_user}","gists_url":"https://api.github.com/users/Flixt/gists{/gist_id}","starred_url":"https://api.github.com/users/Flixt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Flixt/subscriptions","organizations_url":"https://api.github.com/users/Flixt/orgs","repos_url":"https://api.github.com/users/Flixt/repos","events_url":"https://api.github.com/users/Flixt/events{/privacy}","received_events_url":"https://api.github.com/users/Flixt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-03T19:18:42Z","updated_at":"2024-06-03T19:22:57Z","body":"Now, after sleeping a night, I think it is not a good thing at all that Kamal relies on a .env file for secrets. Configure foreman not to load the .env file may be a fix of some symptoms and probably brings some sanity but over all, I think, having production clear text secrets in a file on the root level is just bad.\r\n\r\nInterestingly the dotenv gem used by Kamal already supports Command Substitution. So one can just have an .env file like this:\r\n\r\n```\r\nKAMAL_REGISTRY_PASSWORD=$(op read \"op://MyVault/MyEntry/KAMAL_REGISTRY_PASSWORD\")\r\nRAILS_MASTER_KEY=$(op read \"op://MyVault/MyEntry/RAILS_MASTER_KEY\")\r\n```\r\n\r\nand dotenv will resolve the environment variables correctly.\r\nSo there is not really a need for the ERB templating thing (for me).\r\n\r\nI think we probably should make it possible to have the whole path for the files read as env being configurable in deploy.yml instead of just the ENV_VAR names. I'd be very happy to help out and open PRs.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2145945100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Flixt","id":1724355,"node_id":"MDQ6VXNlcjE3MjQzNTU=","avatar_url":"https://avatars.githubusercontent.com/u/1724355?v=4","gravatar_id":"","url":"https://api.github.com/users/Flixt","html_url":"https://github.com/Flixt","followers_url":"https://api.github.com/users/Flixt/followers","following_url":"https://api.github.com/users/Flixt/following{/other_user}","gists_url":"https://api.github.com/users/Flixt/gists{/gist_id}","starred_url":"https://api.github.com/users/Flixt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Flixt/subscriptions","organizations_url":"https://api.github.com/users/Flixt/orgs","repos_url":"https://api.github.com/users/Flixt/repos","events_url":"https://api.github.com/users/Flixt/events{/privacy}","received_events_url":"https://api.github.com/users/Flixt/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2146911747","html_url":"https://github.com/rails/rails/issues/51829#issuecomment-2146911747","issue_url":"https://api.github.com/repos/rails/rails/issues/51829","id":2146911747,"node_id":"IC_kwDNIULOf_dGAw","user":{"login":"jdelStrother","id":2377,"node_id":"MDQ6VXNlcjIzNzc=","avatar_url":"https://avatars.githubusercontent.com/u/2377?v=4","gravatar_id":"","url":"https://api.github.com/users/jdelStrother","html_url":"https://github.com/jdelStrother","followers_url":"https://api.github.com/users/jdelStrother/followers","following_url":"https://api.github.com/users/jdelStrother/following{/other_user}","gists_url":"https://api.github.com/users/jdelStrother/gists{/gist_id}","starred_url":"https://api.github.com/users/jdelStrother/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdelStrother/subscriptions","organizations_url":"https://api.github.com/users/jdelStrother/orgs","repos_url":"https://api.github.com/users/jdelStrother/repos","events_url":"https://api.github.com/users/jdelStrother/events{/privacy}","received_events_url":"https://api.github.com/users/jdelStrother/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-04T08:24:08Z","updated_at":"2024-06-04T08:24:08Z","body":"Other tools will also read .env by default - eg I have some [Storybook](https://storybook.js.org/docs/configure/environment-variables#using-env-files) config in there. Kamal's .env is only really expected to be used for Kamal, right? Perhaps Kamal's default path should change, rather than having to change every other tool to avoid potentially dangerous production secrets?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2146911747/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jdelStrother","id":2377,"node_id":"MDQ6VXNlcjIzNzc=","avatar_url":"https://avatars.githubusercontent.com/u/2377?v=4","gravatar_id":"","url":"https://api.github.com/users/jdelStrother","html_url":"https://github.com/jdelStrother","followers_url":"https://api.github.com/users/jdelStrother/followers","following_url":"https://api.github.com/users/jdelStrother/following{/other_user}","gists_url":"https://api.github.com/users/jdelStrother/gists{/gist_id}","starred_url":"https://api.github.com/users/jdelStrother/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdelStrother/subscriptions","organizations_url":"https://api.github.com/users/jdelStrother/orgs","repos_url":"https://api.github.com/users/jdelStrother/repos","events_url":"https://api.github.com/users/jdelStrother/events{/privacy}","received_events_url":"https://api.github.com/users/jdelStrother/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13091796269,"node_id":"REFE_lADNIULOiN__3M8AAAADDFT1LQ","url":"https://api.github.com/repos/rails/rails/issues/events/13091796269","actor":{"login":"xjunior","id":8156,"node_id":"MDQ6VXNlcjgxNTY=","avatar_url":"https://avatars.githubusercontent.com/u/8156?v=4","gravatar_id":"","url":"https://api.github.com/users/xjunior","html_url":"https://github.com/xjunior","followers_url":"https://api.github.com/users/xjunior/followers","following_url":"https://api.github.com/users/xjunior/following{/other_user}","gists_url":"https://api.github.com/users/xjunior/gists{/gist_id}","starred_url":"https://api.github.com/users/xjunior/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xjunior/subscriptions","organizations_url":"https://api.github.com/users/xjunior/orgs","repos_url":"https://api.github.com/users/xjunior/repos","events_url":"https://api.github.com/users/xjunior/events{/privacy}","received_events_url":"https://api.github.com/users/xjunior/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ad56527e9f3618dd4096715a57c601857cfe7530","commit_url":"https://api.github.com/repos/xjunior/rails/commits/ad56527e9f3618dd4096715a57c601857cfe7530","created_at":"2024-06-09T15:41:56Z","performed_via_github_app":null},{"id":13417923259,"node_id":"REFE_lADNIULOiN__3M8AAAADH8VCuw","url":"https://api.github.com/repos/rails/rails/issues/events/13417923259","actor":{"login":"Set2005","id":209831,"node_id":"MDQ6VXNlcjIwOTgzMQ==","avatar_url":"https://avatars.githubusercontent.com/u/209831?v=4","gravatar_id":"","url":"https://api.github.com/users/Set2005","html_url":"https://github.com/Set2005","followers_url":"https://api.github.com/users/Set2005/followers","following_url":"https://api.github.com/users/Set2005/following{/other_user}","gists_url":"https://api.github.com/users/Set2005/gists{/gist_id}","starred_url":"https://api.github.com/users/Set2005/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Set2005/subscriptions","organizations_url":"https://api.github.com/users/Set2005/orgs","repos_url":"https://api.github.com/users/Set2005/repos","events_url":"https://api.github.com/users/Set2005/events{/privacy}","received_events_url":"https://api.github.com/users/Set2005/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"e2bca2716e474c58027a3595f5f74e3c8e3e2f13","commit_url":"https://api.github.com/repos/Set2005/fix-association-initialize-order/commits/e2bca2716e474c58027a3595f5f74e3c8e3e2f13","created_at":"2024-07-08T05:31:25Z","performed_via_github_app":null},{"actor":{"login":"djmb","id":1734607,"node_id":"MDQ6VXNlcjE3MzQ2MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1734607?v=4","gravatar_id":"","url":"https://api.github.com/users/djmb","html_url":"https://github.com/djmb","followers_url":"https://api.github.com/users/djmb/followers","following_url":"https://api.github.com/users/djmb/following{/other_user}","gists_url":"https://api.github.com/users/djmb/gists{/gist_id}","starred_url":"https://api.github.com/users/djmb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djmb/subscriptions","organizations_url":"https://api.github.com/users/djmb/orgs","repos_url":"https://api.github.com/users/djmb/repos","events_url":"https://api.github.com/users/djmb/events{/privacy}","received_events_url":"https://api.github.com/users/djmb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-31T09:21:12Z","updated_at":"2024-07-31T09:21:12Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/basecamp/kamal/issues/900","repository_url":"https://api.github.com/repos/basecamp/kamal","labels_url":"https://api.github.com/repos/basecamp/kamal/issues/900/labels{/name}","comments_url":"https://api.github.com/repos/basecamp/kamal/issues/900/comments","events_url":"https://api.github.com/repos/basecamp/kamal/issues/900/events","html_url":"https://github.com/basecamp/kamal/pull/900","id":2439560837,"node_id":"PR_kwDOIvG1J8529_7s","number":900,"title":"Replace .env* with .kamal/env*","user":{"login":"djmb","id":1734607,"node_id":"MDQ6VXNlcjE3MzQ2MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1734607?v=4","gravatar_id":"","url":"https://api.github.com/users/djmb","html_url":"https://github.com/djmb","followers_url":"https://api.github.com/users/djmb/followers","following_url":"https://api.github.com/users/djmb/following{/other_user}","gists_url":"https://api.github.com/users/djmb/gists{/gist_id}","starred_url":"https://api.github.com/users/djmb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djmb/subscriptions","organizations_url":"https://api.github.com/users/djmb/orgs","repos_url":"https://api.github.com/users/djmb/repos","events_url":"https://api.github.com/users/djmb/events{/privacy}","received_events_url":"https://api.github.com/users/djmb/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-07-31T09:21:12Z","updated_at":"2024-09-09T14:00:12Z","closed_at":"2024-09-09T14:00:11Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":586265895,"node_id":"R_kgDOIvG1Jw","name":"kamal","full_name":"basecamp/kamal","private":false,"owner":{"login":"basecamp","id":13131,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEzMTMx","avatar_url":"https://avatars.githubusercontent.com/u/13131?v=4","gravatar_id":"","url":"https://api.github.com/users/basecamp","html_url":"https://github.com/basecamp","followers_url":"https://api.github.com/users/basecamp/followers","following_url":"https://api.github.com/users/basecamp/following{/other_user}","gists_url":"https://api.github.com/users/basecamp/gists{/gist_id}","starred_url":"https://api.github.com/users/basecamp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/basecamp/subscriptions","organizations_url":"https://api.github.com/users/basecamp/orgs","repos_url":"https://api.github.com/users/basecamp/repos","events_url":"https://api.github.com/users/basecamp/events{/privacy}","received_events_url":"https://api.github.com/users/basecamp/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/basecamp/kamal","description":"Deploy web apps anywhere.","fork":false,"url":"https://api.github.com/repos/basecamp/kamal","forks_url":"https://api.github.com/repos/basecamp/kamal/forks","keys_url":"https://api.github.com/repos/basecamp/kamal/keys{/key_id}","collaborators_url":"https://api.github.com/repos/basecamp/kamal/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/basecamp/kamal/teams","hooks_url":"https://api.github.com/repos/basecamp/kamal/hooks","issue_events_url":"https://api.github.com/repos/basecamp/kamal/issues/events{/number}","events_url":"https://api.github.com/repos/basecamp/kamal/events","assignees_url":"https://api.github.com/repos/basecamp/kamal/assignees{/user}","branches_url":"https://api.github.com/repos/basecamp/kamal/branches{/branch}","tags_url":"https://api.github.com/repos/basecamp/kamal/tags","blobs_url":"https://api.github.com/repos/basecamp/kamal/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/basecamp/kamal/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/basecamp/kamal/git/refs{/sha}","trees_url":"https://api.github.com/repos/basecamp/kamal/git/trees{/sha}","statuses_url":"https://api.github.com/repos/basecamp/kamal/statuses/{sha}","languages_url":"https://api.github.com/repos/basecamp/kamal/languages","stargazers_url":"https://api.github.com/repos/basecamp/kamal/stargazers","contributors_url":"https://api.github.com/repos/basecamp/kamal/contributors","subscribers_url":"https://api.github.com/repos/basecamp/kamal/subscribers","subscription_url":"https://api.github.com/repos/basecamp/kamal/subscription","commits_url":"https://api.github.com/repos/basecamp/kamal/commits{/sha}","git_commits_url":"https://api.github.com/repos/basecamp/kamal/git/commits{/sha}","comments_url":"https://api.github.com/repos/basecamp/kamal/comments{/number}","issue_comment_url":"https://api.github.com/repos/basecamp/kamal/issues/comments{/number}","contents_url":"https://api.github.com/repos/basecamp/kamal/contents/{+path}","compare_url":"https://api.github.com/repos/basecamp/kamal/compare/{base}...{head}","merges_url":"https://api.github.com/repos/basecamp/kamal/merges","archive_url":"https://api.github.com/repos/basecamp/kamal/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/basecamp/kamal/downloads","issues_url":"https://api.github.com/repos/basecamp/kamal/issues{/number}","pulls_url":"https://api.github.com/repos/basecamp/kamal/pulls{/number}","milestones_url":"https://api.github.com/repos/basecamp/kamal/milestones{/number}","notifications_url":"https://api.github.com/repos/basecamp/kamal/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/basecamp/kamal/labels{/name}","releases_url":"https://api.github.com/repos/basecamp/kamal/releases{/id}","deployments_url":"https://api.github.com/repos/basecamp/kamal/deployments","created_at":"2023-01-07T14:32:08Z","updated_at":"2025-11-10T03:24:02Z","pushed_at":"2025-11-07T15:20:30Z","git_url":"git://github.com/basecamp/kamal.git","ssh_url":"git@github.com:basecamp/kamal.git","clone_url":"https://github.com/basecamp/kamal.git","svn_url":"https://github.com/basecamp/kamal","homepage":"https://kamal-deploy.org","size":2701,"stargazers_count":13494,"watchers_count":13494,"language":"Ruby","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":637,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":113,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":637,"open_issues":113,"watchers":13494,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/basecamp/kamal/pulls/900","html_url":"https://github.com/basecamp/kamal/pull/900","diff_url":"https://github.com/basecamp/kamal/pull/900.diff","patch_url":"https://github.com/basecamp/kamal/pull/900.patch","merged_at":null},"body":"By default look for the env file in .kamal/env to avoid clashes with other tools using .env.\r\n\r\nFor now we'll still load .env and issue a deprecation warning, but in future we'll stop reading those.\r\n\r\nSee https://github.com/rails/rails/issues/51829","reactions":{"url":"https://api.github.com/repos/basecamp/kamal/issues/900/reactions","total_count":19,"+1":13,"-1":0,"laugh":0,"hooray":6,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/basecamp/kamal/issues/900/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2260085351","html_url":"https://github.com/rails/rails/issues/51829#issuecomment-2260085351","issue_url":"https://api.github.com/repos/rails/rails/issues/51829","id":2260085351,"node_id":"IC_kwDNIULOhrYqZw","user":{"login":"djmb","id":1734607,"node_id":"MDQ6VXNlcjE3MzQ2MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1734607?v=4","gravatar_id":"","url":"https://api.github.com/users/djmb","html_url":"https://github.com/djmb","followers_url":"https://api.github.com/users/djmb/followers","following_url":"https://api.github.com/users/djmb/following{/other_user}","gists_url":"https://api.github.com/users/djmb/gists{/gist_id}","starred_url":"https://api.github.com/users/djmb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djmb/subscriptions","organizations_url":"https://api.github.com/users/djmb/orgs","repos_url":"https://api.github.com/users/djmb/repos","events_url":"https://api.github.com/users/djmb/events{/privacy}","received_events_url":"https://api.github.com/users/djmb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-31T09:33:32Z","updated_at":"2024-07-31T09:33:32Z","body":"We'll change Kamal to read the env in from `.kamal/env` - see https://github.com/basecamp/kamal/pull/900","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2260085351/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"djmb","id":1734607,"node_id":"MDQ6VXNlcjE3MzQ2MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1734607?v=4","gravatar_id":"","url":"https://api.github.com/users/djmb","html_url":"https://github.com/djmb","followers_url":"https://api.github.com/users/djmb/followers","following_url":"https://api.github.com/users/djmb/following{/other_user}","gists_url":"https://api.github.com/users/djmb/gists{/gist_id}","starred_url":"https://api.github.com/users/djmb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djmb/subscriptions","organizations_url":"https://api.github.com/users/djmb/orgs","repos_url":"https://api.github.com/users/djmb/repos","events_url":"https://api.github.com/users/djmb/events{/privacy}","received_events_url":"https://api.github.com/users/djmb/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2260108221","html_url":"https://github.com/rails/rails/issues/51829#issuecomment-2260108221","issue_url":"https://api.github.com/repos/rails/rails/issues/51829","id":2260108221,"node_id":"IC_kwDNIULOhraDvQ","user":{"login":"jdelStrother","id":2377,"node_id":"MDQ6VXNlcjIzNzc=","avatar_url":"https://avatars.githubusercontent.com/u/2377?v=4","gravatar_id":"","url":"https://api.github.com/users/jdelStrother","html_url":"https://github.com/jdelStrother","followers_url":"https://api.github.com/users/jdelStrother/followers","following_url":"https://api.github.com/users/jdelStrother/following{/other_user}","gists_url":"https://api.github.com/users/jdelStrother/gists{/gist_id}","starred_url":"https://api.github.com/users/jdelStrother/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdelStrother/subscriptions","organizations_url":"https://api.github.com/users/jdelStrother/orgs","repos_url":"https://api.github.com/users/jdelStrother/repos","events_url":"https://api.github.com/users/jdelStrother/events{/privacy}","received_events_url":"https://api.github.com/users/jdelStrother/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-31T09:45:32Z","updated_at":"2024-07-31T09:45:32Z","body":"@djmb awesome, thank you!","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2260108221/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jdelStrother","id":2377,"node_id":"MDQ6VXNlcjIzNzc=","avatar_url":"https://avatars.githubusercontent.com/u/2377?v=4","gravatar_id":"","url":"https://api.github.com/users/jdelStrother","html_url":"https://github.com/jdelStrother","followers_url":"https://api.github.com/users/jdelStrother/followers","following_url":"https://api.github.com/users/jdelStrother/following{/other_user}","gists_url":"https://api.github.com/users/jdelStrother/gists{/gist_id}","starred_url":"https://api.github.com/users/jdelStrother/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdelStrother/subscriptions","organizations_url":"https://api.github.com/users/jdelStrother/orgs","repos_url":"https://api.github.com/users/jdelStrother/repos","events_url":"https://api.github.com/users/jdelStrother/events{/privacy}","received_events_url":"https://api.github.com/users/jdelStrother/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13707261794,"node_id":"MEE_lADNIULOiN__3M8AAAADMQQ3Yg","url":"https://api.github.com/repos/rails/rails/issues/events/13707261794","actor":{"login":"djmb","id":1734607,"node_id":"MDQ6VXNlcjE3MzQ2MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1734607?v=4","gravatar_id":"","url":"https://api.github.com/users/djmb","html_url":"https://github.com/djmb","followers_url":"https://api.github.com/users/djmb/followers","following_url":"https://api.github.com/users/djmb/following{/other_user}","gists_url":"https://api.github.com/users/djmb/gists{/gist_id}","starred_url":"https://api.github.com/users/djmb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djmb/subscriptions","organizations_url":"https://api.github.com/users/djmb/orgs","repos_url":"https://api.github.com/users/djmb/repos","events_url":"https://api.github.com/users/djmb/events{/privacy}","received_events_url":"https://api.github.com/users/djmb/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-07-31T09:45:33Z","performed_via_github_app":null},{"id":13707261808,"node_id":"SE_lADNIULOiN__3M8AAAADMQQ3cA","url":"https://api.github.com/repos/rails/rails/issues/events/13707261808","actor":{"login":"djmb","id":1734607,"node_id":"MDQ6VXNlcjE3MzQ2MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1734607?v=4","gravatar_id":"","url":"https://api.github.com/users/djmb","html_url":"https://github.com/djmb","followers_url":"https://api.github.com/users/djmb/followers","following_url":"https://api.github.com/users/djmb/following{/other_user}","gists_url":"https://api.github.com/users/djmb/gists{/gist_id}","starred_url":"https://api.github.com/users/djmb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/djmb/subscriptions","organizations_url":"https://api.github.com/users/djmb/orgs","repos_url":"https://api.github.com/users/djmb/repos","events_url":"https://api.github.com/users/djmb/events{/privacy}","received_events_url":"https://api.github.com/users/djmb/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-07-31T09:45:33Z","performed_via_github_app":null},{"actor":{"login":"jeromedalbert","id":236461,"node_id":"MDQ6VXNlcjIzNjQ2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/236461?v=4","gravatar_id":"","url":"https://api.github.com/users/jeromedalbert","html_url":"https://github.com/jeromedalbert","followers_url":"https://api.github.com/users/jeromedalbert/followers","following_url":"https://api.github.com/users/jeromedalbert/following{/other_user}","gists_url":"https://api.github.com/users/jeromedalbert/gists{/gist_id}","starred_url":"https://api.github.com/users/jeromedalbert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeromedalbert/subscriptions","organizations_url":"https://api.github.com/users/jeromedalbert/orgs","repos_url":"https://api.github.com/users/jeromedalbert/repos","events_url":"https://api.github.com/users/jeromedalbert/events{/privacy}","received_events_url":"https://api.github.com/users/jeromedalbert/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-07T04:06:26Z","updated_at":"2024-09-07T04:06:26Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rails/rails/issues/52818","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/52818/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/52818/comments","events_url":"https://api.github.com/repos/rails/rails/issues/52818/events","html_url":"https://github.com/rails/rails/issues/52818","id":2510347627,"node_id":"I_kwDNIULOlaDdaw","number":52818,"title":"Issue with new rails app -> .env.erb file","user":{"login":"johannesschobel","id":9431350,"node_id":"MDQ6VXNlcjk0MzEzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/9431350?v=4","gravatar_id":"","url":"https://api.github.com/users/johannesschobel","html_url":"https://github.com/johannesschobel","followers_url":"https://api.github.com/users/johannesschobel/followers","following_url":"https://api.github.com/users/johannesschobel/following{/other_user}","gists_url":"https://api.github.com/users/johannesschobel/gists{/gist_id}","starred_url":"https://api.github.com/users/johannesschobel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/johannesschobel/subscriptions","organizations_url":"https://api.github.com/users/johannesschobel/orgs","repos_url":"https://api.github.com/users/johannesschobel/repos","events_url":"https://api.github.com/users/johannesschobel/events{/privacy}","received_events_url":"https://api.github.com/users/johannesschobel/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2024-09-06T12:42:04Z","updated_at":"2024-09-07T22:27:48Z","closed_at":"2024-09-07T22:27:48Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":8514,"node_id":"MDEwOlJlcG9zaXRvcnk4NTE0","name":"rails","full_name":"rails/rails","private":false,"owner":{"login":"rails","id":4223,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjM=","avatar_url":"https://avatars.githubusercontent.com/u/4223?v=4","gravatar_id":"","url":"https://api.github.com/users/rails","html_url":"https://github.com/rails","followers_url":"https://api.github.com/users/rails/followers","following_url":"https://api.github.com/users/rails/following{/other_user}","gists_url":"https://api.github.com/users/rails/gists{/gist_id}","starred_url":"https://api.github.com/users/rails/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails/subscriptions","organizations_url":"https://api.github.com/users/rails/orgs","repos_url":"https://api.github.com/users/rails/repos","events_url":"https://api.github.com/users/rails/events{/privacy}","received_events_url":"https://api.github.com/users/rails/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rails/rails","description":"Ruby on Rails","fork":false,"url":"https://api.github.com/repos/rails/rails","forks_url":"https://api.github.com/repos/rails/rails/forks","keys_url":"https://api.github.com/repos/rails/rails/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rails/rails/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rails/rails/teams","hooks_url":"https://api.github.com/repos/rails/rails/hooks","issue_events_url":"https://api.github.com/repos/rails/rails/issues/events{/number}","events_url":"https://api.github.com/repos/rails/rails/events","assignees_url":"https://api.github.com/repos/rails/rails/assignees{/user}","branches_url":"https://api.github.com/repos/rails/rails/branches{/branch}","tags_url":"https://api.github.com/repos/rails/rails/tags","blobs_url":"https://api.github.com/repos/rails/rails/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rails/rails/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rails/rails/git/refs{/sha}","trees_url":"https://api.github.com/repos/rails/rails/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rails/rails/statuses/{sha}","languages_url":"https://api.github.com/repos/rails/rails/languages","stargazers_url":"https://api.github.com/repos/rails/rails/stargazers","contributors_url":"https://api.github.com/repos/rails/rails/contributors","subscribers_url":"https://api.github.com/repos/rails/rails/subscribers","subscription_url":"https://api.github.com/repos/rails/rails/subscription","commits_url":"https://api.github.com/repos/rails/rails/commits{/sha}","git_commits_url":"https://api.github.com/repos/rails/rails/git/commits{/sha}","comments_url":"https://api.github.com/repos/rails/rails/comments{/number}","issue_comment_url":"https://api.github.com/repos/rails/rails/issues/comments{/number}","contents_url":"https://api.github.com/repos/rails/rails/contents/{+path}","compare_url":"https://api.github.com/repos/rails/rails/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rails/rails/merges","archive_url":"https://api.github.com/repos/rails/rails/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rails/rails/downloads","issues_url":"https://api.github.com/repos/rails/rails/issues{/number}","pulls_url":"https://api.github.com/repos/rails/rails/pulls{/number}","milestones_url":"https://api.github.com/repos/rails/rails/milestones{/number}","notifications_url":"https://api.github.com/repos/rails/rails/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rails/rails/labels{/name}","releases_url":"https://api.github.com/repos/rails/rails/releases{/id}","deployments_url":"https://api.github.com/repos/rails/rails/deployments","created_at":"2008-04-11T02:19:47Z","updated_at":"2025-11-10T02:03:47Z","pushed_at":"2025-11-10T00:33:52Z","git_url":"git://github.com/rails/rails.git","ssh_url":"git@github.com:rails/rails.git","clone_url":"https://github.com/rails/rails.git","svn_url":"https://github.com/rails/rails","homepage":"https://rubyonrails.org","size":271619,"stargazers_count":57840,"watchers_count":57840,"language":"Ruby","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":22025,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1341,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["activejob","activerecord","framework","html","mvc","rails","ruby"],"visibility":"public","forks":22025,"open_issues":1341,"watchers":57840,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Steps to reproduce\r\n<!-- (Guidelines for creating a bug report are [available\r\nhere](https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#creating-a-bug-report)) -->\r\n\r\nrun `rails new testapplication --main --devcontainer -j esbuild -c tailwind`\r\n\r\nThis generates a `.env.erb` file with the following content in the root directory\r\n\r\n```rb\r\n<%# This env template should lookup values from a password store or from ENV -%>\r\n# Generated by kamal envify from .env.erb\r\nKAMAL_REGISTRY_PASSWORD=<%= ENV[\"KAMAL_REGISTRY_PASSWORD\"] %>\r\nRAILS_MASTER_KEY=<%= File.read(\"config/master.key\") %>\r\n# GITHUB_TOKEN=<%#= `gh config get -h github.com oauth_token`.strip %>\r\n```\r\n\r\n### Expected behavior\r\n\r\nIt should generate an `.erb` file instead - and not the template\r\n\r\n### Actual behavior\r\nIt actually generates the template file (see above)\r\n\r\n### System configuration\r\n**Rails version**: 8.0.0.alpha\r\n\r\n**Ruby version**: 3.2.1\r\n","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/52818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/rails/issues/52818/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]