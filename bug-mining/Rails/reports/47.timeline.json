[{"url":"https://api.github.com/repos/rails/rails/issues/comments/1612296318","html_url":"https://github.com/rails/rails/issues/48605#issuecomment-1612296318","issue_url":"https://api.github.com/repos/rails/rails/issues/48605","id":1612296318,"node_id":"IC_kwDNIULOYBmwfg","user":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-29T01:12:59Z","updated_at":"2023-06-29T01:16:29Z","body":"It is too long to put this output. So Added the actual behavior as follows.\r\n\r\n```ruby\r\n$ ARCONN=mysql2 bin/test \"test/cases/active_record_schema_test.rb\" \"test/cases/adapter_prevent_writes_test.rb\" \"test/cases/adapter_test.rb\" \"test/cases/aggregations_test.rb\" \"test/cases/annotate_test.rb\" \"test/cases/arel/attributes/attribute_test.rb\" \"test/cases/arel/attributes/math_test.rb\" \"test/cases/arel/attributes_test.rb\" \"test/cases/arel/collectors/bind_test.rb\" \"test/cases/arel/collectors/composite_test.rb\" \"test/cases/arel/collectors/sql_string_test.rb\" \"test/cases/arel/collectors/substitute_bind_collector_test.rb\" \"test/cases/arel/crud_test.rb\" \"test/cases/arel/delete_manager_test.rb\" \"test/cases/arel/factory_methods_test.rb\" \"test/cases/arel/insert_manager_test.rb\" \"test/cases/arel/nodes/and_test.rb\" \"test/cases/arel/nodes/as_test.rb\" \"test/cases/arel/nodes/ascending_test.rb\" \"test/cases/arel/nodes/bin_test.rb\" \"test/cases/arel/nodes/binary_test.rb\" \"test/cases/arel/nodes/bind_param_test.rb\" \"test/cases/arel/nodes/bound_sql_literal_test.rb\" \"test/cases/arel/nodes/case_test.rb\" \"test/cases/arel/nodes/casted_test.rb\" \"test/cases/arel/nodes/comment_test.rb\" \"test/cases/arel/nodes/count_test.rb\" \"test/cases/arel/nodes/cte_test.rb\" \"test/cases/arel/nodes/delete_statement_test.rb\" \"test/cases/arel/nodes/descending_test.rb\" \"test/cases/arel/nodes/distinct_test.rb\" \"test/cases/arel/nodes/equality_test.rb\" \"test/cases/arel/nodes/extract_test.rb\" \"test/cases/arel/nodes/false_test.rb\" \"test/cases/arel/nodes/filter_test.rb\" \"test/cases/arel/nodes/fragments_test.rb\" \"test/cases/arel/nodes/grouping_test.rb\" \"test/cases/arel/nodes/homogeneous_in_test.rb\" \"test/cases/arel/nodes/infix_operation_test.rb\" \"test/cases/arel/nodes/insert_statement_test.rb\" \"test/cases/arel/nodes/named_function_test.rb\" \"test/cases/arel/nodes/node_test.rb\" \"test/cases/arel/nodes/not_test.rb\" \"test/cases/arel/nodes/or_test.rb\" \"test/cases/arel/nodes/over_test.rb\" \"test/cases/arel/nodes/select_core_test.rb\" \"test/cases/arel/nodes/select_statement_test.rb\" \"test/cases/arel/nodes/sql_literal_test.rb\" \"test/cases/arel/nodes/sum_test.rb\" \"test/cases/arel/nodes/table_alias_test.rb\" \"test/cases/arel/nodes/true_test.rb\" \"test/cases/arel/nodes/unary_operation_test.rb\" \"test/cases/arel/nodes/update_statement_test.rb\" \"test/cases/arel/nodes/window_test.rb\" \"test/cases/arel/nodes_test.rb\" \"test/cases/arel/select_manager_test.rb\" \"test/cases/arel/table_test.rb\" \"test/cases/arel/update_manager_test.rb\" \"test/cases/arel/visitors/dispatch_contamination_test.rb\" \"test/cases/arel/visitors/dot_test.rb\" \"test/cases/arel/visitors/mysql_test.rb\" \"test/cases/arel/visitors/postgres_test.rb\" \"test/cases/arel/visitors/sqlite_test.rb\" \"test/cases/arel/visitors/to_sql_test.rb\" \"test/cases/associations/belongs_to_associations_test.rb\" \"test/cases/associations/bidirectional_destroy_dependencies_test.rb\" \"test/cases/associations/callbacks_test.rb\" \"test/cases/associations/cascaded_eager_loading_test.rb\" \"test/cases/associations/eager_load_includes_full_sti_class_test.rb\" \"test/cases/associations/eager_load_nested_include_test.rb\" \"test/cases/associations/eager_singularization_test.rb\" \"test/cases/associations/eager_test.rb\" \"test/cases/associations/extension_test.rb\" \"test/cases/associations/has_and_belongs_to_many_associations_test.rb\" \"test/cases/associations/has_many_associations_test.rb\" \"test/cases/associations/has_many_through_associations_test.rb\" \"test/cases/associations/has_many_through_disable_joins_associations_test.rb\" \"test/cases/associations/has_one_associations_test.rb\" \"test/cases/associations/has_one_through_associations_test.rb\" \"test/cases/associations/has_one_through_disable_joins_associations_test.rb\" \"test/cases/associations/inner_join_association_test.rb\" \"test/cases/associations/inverse_associations_test.rb\" \"test/cases/associations/join_model_test.rb\" \"test/cases/associations/left_outer_join_association_test.rb\" \"test/cases/associations/nested_through_associations_test.rb\" \"test/cases/associations/required_test.rb\" \"test/cases/associations_test.rb\" \"test/cases/asynchronous_queries_test.rb\" \"test/cases/attribute_methods/read_test.rb\" \"test/cases/attribute_methods_test.rb\" \"test/cases/attributes_test.rb\" \"test/cases/autosave_association_test.rb\" \"test/cases/base_prevent_writes_test.rb\" \"test/cases/base_test.rb\" \"test/cases/batches_test.rb\" \"test/cases/binary_test.rb\" \"test/cases/bind_parameter_test.rb\" \"test/cases/boolean_test.rb\" \"test/cases/cache_key_test.rb\" \"test/cases/calculations_test.rb\" \"test/cases/callbacks_test.rb\" \"test/cases/clone_test.rb\" \"test/cases/coders/json_test.rb\" \"test/cases/coders/yaml_column_test.rb\" \"test/cases/collection_cache_key_test.rb\" \"test/cases/column_alias_test.rb\" \"test/cases/column_definition_test.rb\" \"test/cases/comment_test.rb\" \"test/cases/connection_adapters/adapter_leasing_test.rb\" \"test/cases/connection_adapters/connection_handler_test.rb\" \"test/cases/connection_adapters/connection_handlers_multi_db_test.rb\" \"test/cases/connection_adapters/connection_handlers_multi_pool_config_test.rb\" \"test/cases/connection_adapters/connection_handlers_sharding_db_test.rb\" \"test/cases/connection_adapters/connection_swapping_nested_test.rb\" \"test/cases/connection_adapters/merge_and_resolve_default_url_config_test.rb\" \"test/cases/connection_adapters/mysql_type_lookup_test.rb\" \"test/cases/connection_adapters/schema_cache_test.rb\" \"test/cases/connection_adapters/standalone_connection_test.rb\" \"test/cases/connection_adapters/type_lookup_test.rb\" \"test/cases/connection_management_test.rb\" \"test/cases/connection_pool_test.rb\" \"test/cases/core_test.rb\" \"test/cases/counter_cache_test.rb\" \"test/cases/custom_locking_test.rb\" \"test/cases/database_configurations/hash_config_test.rb\" \"test/cases/database_configurations/resolver_test.rb\" \"test/cases/database_configurations_test.rb\" \"test/cases/database_selector_test.rb\" \"test/cases/database_statements_test.rb\" \"test/cases/date_test.rb\" \"test/cases/date_time_precision_test.rb\" \"test/cases/date_time_test.rb\" \"test/cases/defaults_test.rb\" \"test/cases/delegated_type_test.rb\" \"test/cases/dirty_test.rb\" \"test/cases/disconnected_test.rb\" \"test/cases/dup_test.rb\" \"test/cases/encryption/cipher/aes256_gcm_test.rb\" \"test/cases/encryption/cipher_test.rb\" \"test/cases/encryption/concurrency_test.rb\" \"test/cases/encryption/config_test.rb\" \"test/cases/encryption/configurable_test.rb\" \"test/cases/encryption/contexts_test.rb\" \"test/cases/encryption/derived_secret_key_provider_test.rb\" \"test/cases/encryption/deterministic_key_provider_test.rb\" \"test/cases/encryption/encryptable_record_api_test.rb\" \"test/cases/encryption/encryptable_record_test.rb\" \"test/cases/encryption/encrypted_fixtures_test.rb\" \"test/cases/encryption/encrypting_only_encryptor_test.rb\" \"test/cases/encryption/encryption_schemes_test.rb\" \"test/cases/encryption/encryptor_test.rb\" \"test/cases/encryption/envelope_encryption_key_provider_test.rb\" \"test/cases/encryption/extended_deterministic_queries_test.rb\" \"test/cases/encryption/key_generator_test.rb\" \"test/cases/encryption/key_provider_test.rb\" \"test/cases/encryption/key_test.rb\" \"test/cases/encryption/message_serializer_test.rb\" \"test/cases/encryption/message_test.rb\" \"test/cases/encryption/null_encryptor_test.rb\" \"test/cases/encryption/properties_test.rb\" \"test/cases/encryption/read_only_null_encryptor_test.rb\" \"test/cases/encryption/scheme_test.rb\" \"test/cases/encryption/unencrypted_attributes_test.rb\" \"test/cases/encryption/uniqueness_validations_test.rb\" \"test/cases/enum_test.rb\" \"test/cases/errors_test.rb\" \"test/cases/excluding_test.rb\" \"test/cases/explain_subscriber_test.rb\" \"test/cases/explain_test.rb\" \"test/cases/filter_attributes_test.rb\" \"test/cases/finder_respond_to_test.rb\" \"test/cases/finder_test.rb\" \"test/cases/fixture_set/file_test.rb\" \"test/cases/fixtures_test.rb\" \"test/cases/forbidden_attributes_protection_test.rb\" \"test/cases/habtm_destroy_order_test.rb\" \"test/cases/hot_compatibility_test.rb\" \"test/cases/i18n_test.rb\" \"test/cases/inheritance_test.rb\" \"test/cases/insert_all_test.rb\" \"test/cases/instrumentation_test.rb\" \"test/cases/integration_test.rb\" \"test/cases/invalid_connection_test.rb\" \"test/cases/invertible_migration_test.rb\" \"test/cases/json_attribute_test.rb\" \"test/cases/json_serialization_test.rb\" \"test/cases/locking_test.rb\" \"test/cases/log_subscriber_test.rb\" \"test/cases/marshal_serialization_test.rb\" \"test/cases/message_pack_test.rb\" \"test/cases/migration/change_schema_test.rb\" \"test/cases/migration/change_table_test.rb\" \"test/cases/migration/check_constraint_test.rb\" \"test/cases/migration/column_attributes_test.rb\" \"test/cases/migration/column_positioning_test.rb\" \"test/cases/migration/columns_test.rb\" \"test/cases/migration/command_recorder_test.rb\" \"test/cases/migration/compatibility_test.rb\" \"test/cases/migration/create_join_table_test.rb\" \"test/cases/migration/exclusion_constraint_test.rb\" \"test/cases/migration/foreign_key_test.rb\" \"test/cases/migration/index_test.rb\" \"test/cases/migration/invalid_options_test.rb\" \"test/cases/migration/logger_test.rb\" \"test/cases/migration/pending_migrations_test.rb\" \"test/cases/migration/references_foreign_key_test.rb\" \"test/cases/migration/references_index_test.rb\" \"test/cases/migration/references_statements_test.rb\" \"test/cases/migration/rename_table_test.rb\" \"test/cases/migration/schema_definitions_test.rb\" \"test/cases/migration/unique_key_test.rb\" \"test/cases/migration_test.rb\" \"test/cases/migrator_test.rb\" \"test/cases/mixin_test.rb\" \"test/cases/modules_test.rb\" \"test/cases/multi_db_migrator_test.rb\" \"test/cases/multiparameter_attributes_test.rb\" \"test/cases/multiple_db_test.rb\" \"test/cases/nested_attributes_test.rb\" \"test/cases/nested_attributes_with_callbacks_test.rb\" \"test/cases/normalized_attribute_test.rb\" \"test/cases/null_relation_test.rb\" \"test/cases/numeric_data_test.rb\" \"test/cases/persistence_test.rb\" \"test/cases/pooled_connections_test.rb\" \"test/cases/prepared_statement_status_test.rb\" \"test/cases/primary_class_test.rb\" \"test/cases/primary_keys_test.rb\" \"test/cases/query_cache_test.rb\" \"test/cases/query_logs_test.rb\" \"test/cases/quoting_test.rb\" \"test/cases/readonly_test.rb\" \"test/cases/reaper_test.rb\" \"test/cases/reflection_test.rb\" \"test/cases/relation/and_test.rb\" \"test/cases/relation/delegation_test.rb\" \"test/cases/relation/delete_all_test.rb\" \"test/cases/relation/field_ordered_values_test.rb\" \"test/cases/relation/load_async_test.rb\" \"test/cases/relation/merging_test.rb\" \"test/cases/relation/mutation_test.rb\" \"test/cases/relation/or_test.rb\" \"test/cases/relation/predicate_builder_test.rb\" \"test/cases/relation/record_fetch_warning_test.rb\" \"test/cases/relation/select_test.rb\" \"test/cases/relation/structural_compatibility_test.rb\" \"test/cases/relation/update_all_test.rb\" \"test/cases/relation/where_chain_test.rb\" \"test/cases/relation/where_clause_test.rb\" \"test/cases/relation/where_test.rb\" \"test/cases/relation/with_test.rb\" \"test/cases/relation_test.rb\" \"test/cases/relations_test.rb\" \"test/cases/reload_models_test.rb\" \"test/cases/reserved_word_test.rb\" \"test/cases/result_test.rb\" \"test/cases/sanitize_test.rb\" \"test/cases/schema_dumper_test.rb\" \"test/cases/schema_loading_test.rb\" \"test/cases/scoping/default_scoping_test.rb\" \"test/cases/scoping/named_scoping_test.rb\" \"test/cases/scoping/relation_scoping_test.rb\" \"test/cases/secure_password_test.rb\" \"test/cases/secure_token_test.rb\" \"test/cases/serialization_test.rb\" \"test/cases/serialized_attribute_test.rb\" \"test/cases/shard_selector_test.rb\" \"test/cases/signed_id_test.rb\" \"test/cases/statement_cache_test.rb\" \"test/cases/statement_invalid_test.rb\" \"test/cases/store_test.rb\" \"test/cases/strict_loading_test.rb\" \"test/cases/suppressor_test.rb\" \"test/cases/tasks/database_tasks_test.rb\" \"test/cases/test_databases_test.rb\" \"test/cases/test_fixtures_test.rb\" \"test/cases/time_precision_test.rb\" \"test/cases/timestamp_test.rb\" \"test/cases/token_for_test.rb\" \"test/cases/touch_later_test.rb\" \"test/cases/transaction_callbacks_test.rb\" \"test/cases/transaction_isolation_test.rb\" \"test/cases/transactions_test.rb\" \"test/cases/type/adapter_specific_registry_test.rb\" \"test/cases/type/date_time_test.rb\" \"test/cases/type/integer_test.rb\" \"test/cases/type/string_test.rb\" \"test/cases/type/time_test.rb\" \"test/cases/type/type_map_test.rb\" \"test/cases/type/unsigned_integer_test.rb\" \"test/cases/type_test.rb\" \"test/cases/types_test.rb\" \"test/cases/unconnected_test.rb\" \"test/cases/unsafe_raw_sql_test.rb\" \"test/cases/validations/absence_validation_test.rb\" \"test/cases/validations/association_validation_test.rb\" \"test/cases/validations/i18n_generate_message_validation_test.rb\" \"test/cases/validations/i18n_validation_test.rb\" \"test/cases/validations/length_validation_test.rb\" \"test/cases/validations/numericality_validation_test.rb\" \"test/cases/validations/presence_validation_test.rb\" \"test/cases/validations/uniqueness_validation_test.rb\" \"test/cases/validations_test.rb\" \"test/cases/view_test.rb\" \"test/cases/yaml_serialization_test.rb\" \"test/cases/adapters/mysql2/dbconsole_test.rb\" \"test/cases/adapters/mysql2/mysql2_adapter_test.rb\" \"test/cases/adapters/mysql2/mysql2_rake_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/active_schema_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/adapter_prevent_writes_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/auto_increment_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/bind_parameter_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/case_sensitivity_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/charset_collation_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/connection_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/count_deleted_rows_with_lock_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/datetime_precision_quoting_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/json_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/mysql_boolean_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/mysql_enum_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/mysql_explain_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/nested_deadlock_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/optimizer_hints_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/quoting_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/schema_migrations_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/schema_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/set_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/sp_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/sql_types_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/table_options_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/transaction_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/unsigned_type_test.rb\" \"test/cases/adapters/abstract_mysql_adapter/virtual_column_test.rb\" --seed 28123 -n \"/^(?:ActiveRecord::Encryption::EncryptionSchemesTest#(?:test_use_global_previous_schemes_to_decrypt_data_encrypted_with_previous_schemes_with_unencrypted_data)|ActiveRecord::Encryption::EncryptableFixtureTest#(?:test_fixtures_get_encrypted_automatically|test_preserved_columns_due_to_ignore_case:_true_gets_encrypted_automatically)|ActiveRecord::Encryption::EncryptableRecordApiTest#(?:test_ciphertext_for_returns_the_ciphertext_for_a_given_attribute|test_ciphertext_for_returns_the_ciphertext_of_a_decrypted_value|test_ciphertext_for_returns_the_ciphertext_of_a_new_value|test_ciphertext_for_returns_the_ciphertext_of_a_value_when_the_record_is_new|test_encrypt_will_preserve_case_when_:ignore_case_option_is_used|test_encrypt_won\\\\'t_force_encoding_for_deterministic_attributes_when_option_is_nil|test_encrypted_attribute\\\\?_returns_true_for_encrypted_attributes_which_content_is_encrypted|test_re-encrypting_will_preserve_case_when_:ignore_case_option_is_used)|ActiveRecord::Encryption::EncryptableRecordTest#(?:test_by_default,_it\\\\'s_case_sensitive|test_can_only_save_unencrypted_attributes_when_frozen_encryption_is_true|test_deterministic_attributes_can_be_created_by_passing_deterministic:_true|test_deterministic_attributes_can_be_searched_with_Active_Record_queries|test_forced_encoding_for_deterministic_attributes_can_be_disabled|test_forced_encoding_for_deterministic_attributes_will_replace_invalid_characters|test_forces_UTF-8_encoding_for_deterministic_attributes_by_default|test_forces_encoding_for_deterministic_attributes_based_on_the_configured_option|test_ignores_empty_values|test_support_encrypted_attributes_defined_on_columns_with_default_values|test_when_ignore_case:_true,_it_ignores_case_in_queries_but_keep_it_when_reading_the_attribute|test_when_ignore_case:_true,_it_keeps_both_the_attribute_and_the__original_counterpart_encrypted|test_when_ignore_case:_true,_it_lets_you_update_attributes_normally))$/\"\r\nUsing mysql2\r\nRun options: --seed 28123 -n \"/^(?:ActiveRecord::Encryption::EncryptionSchemesTest#(?:test_use_global_previous_schemes_to_decrypt_data_encrypted_with_previous_schemes_with_unencrypted_data)|ActiveRecord::Encryption::EncryptableFixtureTest#(?:test_fixtures_get_encrypted_automatically|test_preserved_columns_due_to_ignore_case:_true_gets_encrypted_automatically)|ActiveRecord::Encryption::EncryptableRecordApiTest#(?:test_ciphertext_for_returns_the_ciphertext_for_a_given_attribute|test_ciphertext_for_returns_the_ciphertext_of_a_decrypted_value|test_ciphertext_for_returns_the_ciphertext_of_a_new_value|test_ciphertext_for_returns_the_ciphertext_of_a_value_when_the_record_is_new|test_encrypt_will_preserve_case_when_:ignore_case_option_is_used|test_encrypt_won\\\\'t_force_encoding_for_deterministic_attributes_when_option_is_nil|test_encrypted_attribute\\\\?_returns_true_for_encrypted_attributes_which_content_is_encrypted|test_re-encrypting_will_preserve_case_when_:ignore_case_option_is_used)|ActiveRecord::Encryption::EncryptableRecordTest#(?:test_by_default,_it\\\\'s_case_sensitive|test_can_only_save_unencrypted_attributes_when_frozen_encryption_is_true|test_deterministic_attributes_can_be_created_by_passing_deterministic:_true|test_deterministic_attributes_can_be_searched_with_Active_Record_queries|test_forced_encoding_for_deterministic_attributes_can_be_disabled|test_forced_encoding_for_deterministic_attributes_will_replace_invalid_characters|test_forces_UTF-8_encoding_for_deterministic_attributes_by_default|test_forces_encoding_for_deterministic_attributes_based_on_the_configured_option|test_ignores_empty_values|test_support_encrypted_attributes_defined_on_columns_with_default_values|test_when_ignore_case:_true,_it_ignores_case_in_queries_but_keep_it_when_reading_the_attribute|test_when_ignore_case:_true,_it_keeps_both_the_attribute_and_the__original_counterpart_encrypted|test_when_ignore_case:_true,_it_lets_you_update_attributes_normally))$/\"\r\n\r\n# Running:\r\n\r\n.E\r\n\r\nError:\r\nActiveRecord::Encryption::EncryptableFixtureTest#test_preserved_columns_due_to_ignore_case:_true_gets_encrypted_automatically:\r\nActiveRecord::Encryption::Errors::Decryption: Couldn't find a match for ruby for rails ({\"1\"=>\"2\"})\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryption_schemes_test.rb:144:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:82:in `block in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/contexts.rb:40:in `with_encryption_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/scheme.rb:62:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:15:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:77:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:96:in `block in try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `each'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `with_index'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:90:in `rescue in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:76:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set/builder.rb:52:in `block in fetch_value'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set/builder.rb:46:in `fetch'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set/builder.rb:46:in `fetch_value'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/attribute_methods/read.rb:45:in `_read_attribute'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_methods.rb:271:in `name'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encryptable_record.rb:108:in `block (2 levels) in override_accessors_to_preserve_original'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encrypted_fixtures_test.rb:17:in `block in <class:EncryptableFixtureTest>'\r\n\r\n\r\nbin/test test/cases/encryption/encrypted_fixtures_test.rb:15\r\n\r\nF\r\n\r\nFailure:\r\nActiveRecord::Encryption::EncryptableFixtureTest#test_fixtures_get_encrypted_automatically [/home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encrypted_fixtures_test.rb:12]:\r\nExpected false to be truthy.\r\n\r\n\r\nbin/test test/cases/encryption/encrypted_fixtures_test.rb:11\r\n\r\nE\r\n\r\nError:\r\nActiveRecord::Encryption::EncryptableRecordTest#test_ignores_empty_values:\r\nActiveRecord::Encryption::Errors::Decryption: Couldn't find a match for  ({\"1\"=>\"2\"})\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryption_schemes_test.rb:144:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:82:in `block in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/contexts.rb:40:in `with_encryption_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/scheme.rb:62:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:15:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:77:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:96:in `block in try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `each'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `with_index'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:90:in `rescue in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:76:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:48:in `changed_in_place?'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:56:in `value_for_database'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:75:in `forgetting_assignment'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set.rb:98:in `transform_values'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set.rb:98:in `map'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/dirty.rb:269:in `forget_attribute_assignments'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/dirty.rb:155:in `changes_applied'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/attribute_methods/dirty.rb:206:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `block in _create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_create_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:114:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:1212:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `block in create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_save_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:125:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:745:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/validations.rb:55:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `block in save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:365:in `block in with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:491:in `block in within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `block in synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:488:in `within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:342:in `transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:361:in `with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/suppressor.rb:56:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:55:in `create!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_test.rb:41:in `block in <class:EncryptableRecordTest>'\r\n\r\n\r\nbin/test test/cases/encryption/encryptable_record_test.rb:40\r\n\r\nE\r\n\r\nError:\r\nActiveRecord::Encryption::EncryptableRecordTest#test_deterministic_attributes_can_be_searched_with_Active_Record_queries:\r\nActiveRecord::Encryption::Errors::Decryption: Couldn't find a match for Dune ({\"1\"=>\"2\"})\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryption_schemes_test.rb:144:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:82:in `block in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/contexts.rb:40:in `with_encryption_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/scheme.rb:62:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:15:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:77:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:96:in `block in try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `each'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `with_index'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:90:in `rescue in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:76:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:48:in `changed_in_place?'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:56:in `value_for_database'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:75:in `forgetting_assignment'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set.rb:98:in `transform_values'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set.rb:98:in `map'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/dirty.rb:269:in `forget_attribute_assignments'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/dirty.rb:155:in `changes_applied'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/attribute_methods/dirty.rb:206:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `block in _create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_create_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:114:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:1212:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `block in create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_save_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:125:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:745:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/validations.rb:55:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `block in save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:365:in `block in with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:491:in `block in within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `block in synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:488:in `within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:342:in `transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:361:in `with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/suppressor.rb:56:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:55:in `create!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_test.rb:93:in `block in <class:EncryptableRecordTest>'\r\n\r\n\r\nbin/test test/cases/encryption/encryptable_record_test.rb:92\r\n\r\nE\r\n\r\nError:\r\nActiveRecord::Encryption::EncryptableRecordTest#test_by_default,_it's_case_sensitive:\r\nActiveRecord::Encryption::Errors::Decryption: Couldn't find a match for Dune ({\"1\"=>\"2\"})\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryption_schemes_test.rb:144:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:82:in `block in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/contexts.rb:40:in `with_encryption_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/scheme.rb:62:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:15:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:77:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:96:in `block in try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `each'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `with_index'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:90:in `rescue in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:76:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:48:in `changed_in_place?'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:56:in `value_for_database'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:75:in `forgetting_assignment'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set.rb:98:in `transform_values'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set.rb:98:in `map'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/dirty.rb:269:in `forget_attribute_assignments'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/dirty.rb:155:in `changes_applied'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/attribute_methods/dirty.rb:206:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `block in _create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_create_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:114:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:1212:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `block in create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_save_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:125:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:745:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/validations.rb:55:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `block in save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:365:in `block in with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:491:in `block in within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `block in synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:488:in `within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:342:in `transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:361:in `with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/suppressor.rb:56:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:55:in `create!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_test.rb:169:in `block in <class:EncryptableRecordTest>'\r\n\r\n\r\nbin/test test/cases/encryption/encryptable_record_test.rb:168\r\n\r\nE\r\n\r\nError:\r\nActiveRecord::Encryption::EncryptableRecordTest#test_when_ignore_case:_true,_it_lets_you_update_attributes_normally:\r\nActiveRecord::Encryption::Errors::Decryption: Couldn't find a match for dune ({\"1\"=>\"2\"})\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryption_schemes_test.rb:144:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:82:in `block in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/contexts.rb:40:in `with_encryption_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/scheme.rb:62:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:15:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:77:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:96:in `block in try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `each'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `with_index'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:90:in `rescue in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:76:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:48:in `changed_in_place?'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:56:in `value_for_database'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:75:in `forgetting_assignment'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set.rb:98:in `transform_values'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set.rb:98:in `map'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/dirty.rb:269:in `forget_attribute_assignments'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/dirty.rb:155:in `changes_applied'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/attribute_methods/dirty.rb:206:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `block in _create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_create_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:114:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:1212:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `block in create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_save_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:125:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:745:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/validations.rb:55:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `block in save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:365:in `block in with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:491:in `block in within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `block in synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:488:in `within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:342:in `transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:361:in `with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/suppressor.rb:56:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:55:in `create!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_test.rb:200:in `block in <class:EncryptableRecordTest>'\r\n\r\n\r\nbin/test test/cases/encryption/encryptable_record_test.rb:199\r\n\r\nE\r\n\r\nError:\r\nActiveRecord::Encryption::EncryptableRecordTest#test_forces_UTF-8_encoding_for_deterministic_attributes_by_default:\r\nActiveRecord::Encryption::Errors::Decryption: Couldn't find a match for Dune ({\"1\"=>\"2\"})\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryption_schemes_test.rb:144:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:82:in `block in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/contexts.rb:40:in `with_encryption_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/scheme.rb:62:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:15:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:77:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:96:in `block in try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `each'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `with_index'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:90:in `rescue in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:76:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:48:in `changed_in_place?'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:56:in `value_for_database'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:75:in `forgetting_assignment'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set.rb:98:in `transform_values'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set.rb:98:in `map'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/dirty.rb:269:in `forget_attribute_assignments'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/dirty.rb:155:in `changes_applied'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/attribute_methods/dirty.rb:206:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `block in _create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_create_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:114:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:1212:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `block in create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_save_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:125:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:745:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/validations.rb:55:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `block in save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:365:in `block in with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:491:in `block in within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `block in synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:488:in `within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:342:in `transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:361:in `with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/suppressor.rb:56:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:55:in `create!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_test.rb:272:in `block in <class:EncryptableRecordTest>'\r\n\r\n\r\nbin/test test/cases/encryption/encryptable_record_test.rb:271\r\n\r\nE\r\n\r\nError:\r\nActiveRecord::Encryption::EncryptableRecordTest#test_when_ignore_case:_true,_it_keeps_both_the_attribute_and_the__original_counterpart_encrypted:\r\nActiveRecord::Encryption::Errors::Decryption: Couldn't find a match for dune ({\"1\"=>\"2\"})\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryption_schemes_test.rb:144:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:82:in `block in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/contexts.rb:40:in `with_encryption_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/scheme.rb:62:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:15:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:77:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:96:in `block in try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `each'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `with_index'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:90:in `rescue in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:76:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:48:in `changed_in_place?'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:56:in `value_for_database'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:75:in `forgetting_assignment'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set.rb:98:in `transform_values'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set.rb:98:in `map'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/dirty.rb:269:in `forget_attribute_assignments'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/dirty.rb:155:in `changes_applied'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/attribute_methods/dirty.rb:206:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `block in _create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_create_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:114:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:1212:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `block in create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_save_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:125:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:745:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/validations.rb:55:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `block in save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:365:in `block in with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:491:in `block in within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `block in synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:488:in `within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:342:in `transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:361:in `with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/suppressor.rb:56:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:55:in `create!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_test.rb:194:in `block in <class:EncryptableRecordTest>'\r\n\r\n\r\nbin/test test/cases/encryption/encryptable_record_test.rb:193\r\n\r\nE\r\n\r\nError:\r\nActiveRecord::Encryption::EncryptableRecordTest#test_forced_encoding_for_deterministic_attributes_will_replace_invalid_characters:\r\nActiveRecord::StatementInvalid: Mysql2::Error: Incorrect string value: '\\x93\\xFA' for column 'name' at row 1\r\n    /home/yahonda/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `_query'\r\n    /home/yahonda/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/mysql2-0.5.5/lib/mysql2/client.rb:151:in `block in query'\r\n    /home/yahonda/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `handle_interrupt'\r\n    /home/yahonda/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/mysql2-0.5.5/lib/mysql2/client.rb:150:in `query'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/mysql2/database_statements.rb:100:in `block (2 levels) in raw_execute'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:1031:in `block in with_raw_connection'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `block in synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:1003:in `with_raw_connection'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/mysql2/database_statements.rb:98:in `block in raw_execute'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/notifications/instrumenter.rb:58:in `instrument'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:1141:in `log'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/mysql2/database_statements.rb:97:in `raw_execute'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:233:in `execute_and_free'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/mysql2/database_statements.rb:23:in `internal_exec_query'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:153:in `exec_insert'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:191:in `insert'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:25:in `insert'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:583:in `_insert_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:1243:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/counter_cache.rb:187:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/locking/optimistic.rb:84:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encryptable_record.rb:174:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/attribute_methods/dirty.rb:205:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `block in _create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_create_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:114:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:1212:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `block in create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_save_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:125:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:745:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/validations.rb:55:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `block in save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:365:in `block in with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:491:in `block in within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `block in synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:488:in `within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:342:in `transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:361:in `with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/suppressor.rb:56:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:55:in `create!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_test.rb:284:in `block in <class:EncryptableRecordTest>'\r\n\r\n\r\nbin/test test/cases/encryption/encryptable_record_test.rb:283\r\n\r\nE\r\n\r\nError:\r\nActiveRecord::Encryption::EncryptableRecordTest#test_forced_encoding_for_deterministic_attributes_can_be_disabled:\r\nActiveRecord::Encryption::Errors::Decryption: Couldn't find a match for Dune ({\"1\"=>\"2\"})\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryption_schemes_test.rb:144:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:82:in `block in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/contexts.rb:40:in `with_encryption_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/scheme.rb:62:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:15:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:77:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:96:in `block in try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `each'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `with_index'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:90:in `rescue in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:76:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:48:in `changed_in_place?'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:56:in `value_for_database'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:75:in `forgetting_assignment'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set.rb:98:in `transform_values'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set.rb:98:in `map'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/dirty.rb:269:in `forget_attribute_assignments'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/dirty.rb:155:in `changes_applied'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/attribute_methods/dirty.rb:206:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `block in _create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_create_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:114:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:1212:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `block in create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_save_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:125:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:745:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/validations.rb:55:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `block in save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:365:in `block in with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:491:in `block in within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `block in synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:488:in `within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:342:in `transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:361:in `with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/suppressor.rb:56:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:55:in `create!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_test.rb:291:in `block in <class:EncryptableRecordTest>'\r\n\r\n\r\nbin/test test/cases/encryption/encryptable_record_test.rb:288\r\n\r\nE\r\n\r\nError:\r\nActiveRecord::Encryption::EncryptableRecordTest#test_when_ignore_case:_true,_it_ignores_case_in_queries_but_keep_it_when_reading_the_attribute:\r\nActiveRecord::Encryption::Errors::Decryption: Couldn't find a match for dune ({\"1\"=>\"2\"})\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryption_schemes_test.rb:144:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:82:in `block in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/contexts.rb:40:in `with_encryption_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/scheme.rb:62:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:15:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:77:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:96:in `block in try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `each'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `with_index'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:90:in `rescue in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:76:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:48:in `changed_in_place?'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:56:in `value_for_database'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:75:in `forgetting_assignment'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set.rb:98:in `transform_values'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set.rb:98:in `map'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/dirty.rb:269:in `forget_attribute_assignments'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/dirty.rb:155:in `changes_applied'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/attribute_methods/dirty.rb:206:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `block in _create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_create_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:114:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:1212:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `block in create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_save_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:125:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:745:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/validations.rb:55:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `block in save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:365:in `block in with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:491:in `block in within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `block in synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:488:in `within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:342:in `transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:361:in `with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/suppressor.rb:56:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:55:in `create!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_test.rb:187:in `block in <class:EncryptableRecordTest>'\r\n\r\n\r\nbin/test test/cases/encryption/encryptable_record_test.rb:186\r\n\r\nE\r\n\r\nError:\r\nActiveRecord::Encryption::EncryptableRecordTest#test_can_only_save_unencrypted_attributes_when_frozen_encryption_is_true:\r\nActiveRecord::Encryption::Errors::Decryption: Couldn't find a match for Agile Web Development with Rails ({\"1\"=>\"2\"})\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryption_schemes_test.rb:144:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:82:in `block in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/contexts.rb:40:in `with_encryption_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/scheme.rb:62:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:15:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:77:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:96:in `block in try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `each'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `with_index'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:90:in `rescue in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:76:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:175:in `type_cast'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:43:in `value'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set/builder.rb:43:in `fetch_value'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/attribute_methods/read.rb:45:in `_read_attribute'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_methods.rb:271:in `name'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/validator.rb:152:in `block in validate'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/validator.rb:151:in `each'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/validator.rb:151:in `validate'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:426:in `block in make_lambda'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:202:in `block (2 levels) in halting'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:707:in `block (2 levels) in default_terminator'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:706:in `catch'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:706:in `block in default_terminator'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:203:in `block in halting'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:598:in `block in invoke_before'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:598:in `each'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:598:in `invoke_before'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:109:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_validate_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/validations.rb:441:in `run_validations!'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/validations/callbacks.rb:115:in `block in run_validations!'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:110:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_validation_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/validations/callbacks.rb:115:in `run_validations!'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/validations.rb:366:in `valid?'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/validations.rb:72:in `valid?'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/validations.rb:88:in `perform_validations'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/validations.rb:55:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `block in save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:365:in `block in with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:340:in `transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:361:in `with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/suppressor.rb:56:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:898:in `block in update!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:365:in `block in with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:491:in `block in within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `block in synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:488:in `within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:342:in `transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:361:in `with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:896:in `update!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_test.rb:151:in `block (2 levels) in <class:EncryptableRecordTest>'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/contexts.rb:40:in `with_encryption_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_test.rb:150:in `block in <class:EncryptableRecordTest>'\r\n\r\n\r\nbin/test test/cases/encryption/encryptable_record_test.rb:147\r\n\r\nE\r\n\r\nError:\r\nActiveRecord::Encryption::EncryptableRecordTest#test_deterministic_attributes_can_be_created_by_passing_deterministic:_true:\r\nActiveRecord::Encryption::Errors::Decryption: Couldn't find a match for Dune ({\"1\"=>\"2\"})\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryption_schemes_test.rb:144:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:82:in `block in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/contexts.rb:40:in `with_encryption_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/scheme.rb:62:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:15:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:77:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:96:in `block in try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `each'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `with_index'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:90:in `rescue in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:76:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:48:in `changed_in_place?'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:56:in `value_for_database'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:75:in `forgetting_assignment'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set.rb:98:in `transform_values'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set.rb:98:in `map'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/dirty.rb:269:in `forget_attribute_assignments'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/dirty.rb:155:in `changes_applied'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/attribute_methods/dirty.rb:206:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `block in _create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_create_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:114:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:1212:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `block in create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_save_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:125:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:745:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/validations.rb:55:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `block in save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:365:in `block in with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:491:in `block in within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `block in synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:488:in `within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:342:in `transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:361:in `with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/suppressor.rb:56:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:55:in `create!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_test.rb:102:in `block in <class:EncryptableRecordTest>'\r\n\r\n\r\nbin/test test/cases/encryption/encryptable_record_test.rb:101\r\n\r\nF\r\n\r\nFailure:\r\nActiveRecord::Encryption::EncryptableRecordTest#test_support_encrypted_attributes_defined_on_columns_with_default_values [/home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_test.rb:297]:\r\nExpected \"<untitled>\" to not be equal to \"<untitled>\".\r\n\r\n\r\nbin/test test/cases/encryption/encryptable_record_test.rb:295\r\n\r\nE\r\n\r\nError:\r\nActiveRecord::Encryption::EncryptableRecordTest#test_forces_encoding_for_deterministic_attributes_based_on_the_configured_option:\r\nActiveRecord::Encryption::Errors::Decryption: Couldn't find a match for Dune ({\"1\"=>\"2\"})\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryption_schemes_test.rb:144:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:82:in `block in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/contexts.rb:40:in `with_encryption_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/scheme.rb:62:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:15:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:77:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:96:in `block in try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `each'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `with_index'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:90:in `rescue in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:76:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:48:in `changed_in_place?'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:56:in `value_for_database'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute.rb:75:in `forgetting_assignment'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set.rb:98:in `transform_values'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set.rb:98:in `map'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/dirty.rb:269:in `forget_attribute_assignments'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/dirty.rb:155:in `changes_applied'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/attribute_methods/dirty.rb:206:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `block in _create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_create_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:445:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:114:in `_create_record'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:1212:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `block in create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:101:in `run_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/callbacks.rb:949:in `_run_save_callbacks'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/callbacks.rb:441:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/timestamp.rb:125:in `create_or_update'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:745:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/validations.rb:55:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `block in save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:365:in `block in with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:491:in `block in within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:23:in `block in synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `handle_interrupt'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/concurrency/load_interlock_aware_monitor.rb:19:in `synchronize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:488:in `within_new_transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:342:in `transaction'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:361:in `with_transaction_returning_status'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/transactions.rb:313:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/suppressor.rb:56:in `save!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/persistence.rb:55:in `create!'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_test.rb:279:in `block in <class:EncryptableRecordTest>'\r\n\r\n\r\nbin/test test/cases/encryption/encryptable_record_test.rb:276\r\n\r\nF\r\n\r\nFailure:\r\nActiveRecord::Encryption::EncryptableRecordApiTest#test_encrypt_won't_force_encoding_for_deterministic_attributes_when_option_is_nil [/home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_api_test.rb:133]:\r\nExpected: #<Encoding:US-ASCII>\r\n  Actual: #<Encoding:UTF-8>\r\n\r\n\r\nbin/test test/cases/encryption/encryptable_record_api_test.rb:128\r\n\r\nF\r\n\r\nFailure:\r\nActiveRecord::Encryption::EncryptableRecordApiTest#test_ciphertext_for_returns_the_ciphertext_of_a_decrypted_value [/home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_api_test.rb:103]:\r\nExpected \"Dune\" to not be equal to \"Dune\".\r\n\r\n\r\nbin/test test/cases/encryption/encryptable_record_api_test.rb:99\r\n\r\nF\r\n\r\nFailure:\r\nActiveRecord::Encryption::EncryptableRecordApiTest#test_encrypt_will_preserve_case_when_:ignore_case_option_is_used [/home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_api_test.rb:146]:\r\nExpected: \"Dune\"\r\n  Actual: \"dune\"\r\n\r\n\r\nbin/test test/cases/encryption/encryptable_record_api_test.rb:136\r\n\r\nF\r\n\r\nFailure:\r\nActiveRecord::Encryption::EncryptableRecordApiTest#test_ciphertext_for_returns_the_ciphertext_of_a_new_value [/home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_api_test.rb:96]:\r\nExpected \"Arrakis\" to not be equal to \"Arrakis\".\r\n\r\n\r\nbin/test test/cases/encryption/encryptable_record_api_test.rb:92\r\n\r\nF\r\n\r\nFailure:\r\nActiveRecord::Encryption::EncryptableRecordApiTest#test_ciphertext_for_returns_the_ciphertext_of_a_value_when_the_record_is_new [/home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_api_test.rb:109]:\r\nExpected \"Dune\" to not be equal to \"Dune\".\r\n\r\n\r\nbin/test test/cases/encryption/encryptable_record_api_test.rb:106\r\n\r\nF\r\n\r\nFailure:\r\nActiveRecord::Encryption::EncryptableRecordApiTest#test_re-encrypting_will_preserve_case_when_:ignore_case_option_is_used [/home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_api_test.rb:159]:\r\nExpected: \"Dune\"\r\n  Actual: \"dune\"\r\n\r\n\r\nbin/test test/cases/encryption/encryptable_record_api_test.rb:149\r\n\r\nF\r\n\r\nFailure:\r\nActiveRecord::Encryption::EncryptableRecordApiTest#test_encrypted_attribute?_returns_true_for_encrypted_attributes_which_content_is_encrypted [/home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_api_test.rb:71]:\r\nExpected false to be truthy.\r\n\r\n\r\nbin/test test/cases/encryption/encryptable_record_api_test.rb:69\r\n\r\nF\r\n\r\nFailure:\r\nActiveRecord::Encryption::EncryptableRecordApiTest#test_ciphertext_for_returns_the_ciphertext_for_a_given_attribute [/home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryptable_record_api_test.rb:82]:\r\nExpected \"Dune\" to not be equal to \"Dune\".\r\n\r\n\r\nbin/test test/cases/encryption/encryptable_record_api_test.rb:79\r\n\r\n\r\n\r\nFinished in 0.596094s, 40.2621 runs/s, 28.5190 assertions/s.\r\n24 runs, 17 assertions, 10 failures, 13 errors, 0 skips\r\n$\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1612296318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1612306915","html_url":"https://github.com/rails/rails/issues/48605#issuecomment-1612306915","issue_url":"https://api.github.com/repos/rails/rails/issues/48605","id":1612306915,"node_id":"IC_kwDNIULOYBnZ4w","user":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-29T01:33:13Z","updated_at":"2023-06-29T01:33:13Z","body":"\r\nIt is triggered by \"use global previous schemes to decrypt data encrypted with previous schemes with unencrypted data\"\r\nhttps://github.com/rails/rails/blob/f936b93d076a9f63d2defbcc72e2130b8e8a1d6b/activerecord/test/cases/encryption/encryption_schemes_test.rb#L60-L76\r\n\r\n```\r\n$ git diff\r\ndiff --git a/activerecord/test/cases/encryption/encryption_schemes_test.rb b/activerecord/test/cases/encryption/encryption_schemes_test.rb\r\nindex 60bc5ea713..25b3d1fec4 100644\r\n--- a/activerecord/test/cases/encryption/encryption_schemes_test.rb\r\n+++ b/activerecord/test/cases/encryption/encryption_schemes_test.rb\r\n@@ -58,6 +58,7 @@ class ActiveRecord::Encryption::EncryptionSchemesTest < ActiveRecord::Encryption\r\n   end\r\n\r\n   test \"use global previous schemes to decrypt data encrypted with previous schemes with unencrypted data\" do\r\n+    skip\r\n     ActiveRecord::Encryption.config.support_unencrypted_data = true\r\n     encrypted_author_class = declare_class_with_global_previous_encryption_schemes({ encryptor: TestEncryptor.new(\"0\" => \"1\") }, { encryptor: TestEncryptor.new(\"1\" => \"2\") })\r\n\r\n$\r\n```\r\n\r\nSkipping this test is working fine.\r\n```\r\nS.......................\r\n\r\nFinished in 0.468374s, 51.2412 runs/s, 149.4534 assertions/s.\r\n24 runs, 70 assertions, 0 failures, 0 errors, 1 skips\r\n\r\nYou have skipped tests. Run with --verbose for details.\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1612306915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9671574192,"node_id":"LE_lADNIULOahgXLs8AAAACQHiCsA","url":"https://api.github.com/repos/rails/rails/issues/events/9671574192","actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-06-29T01:33:53Z","label":{"name":"activerecord","color":"0b02e1"},"performed_via_github_app":null},{"id":9671574195,"node_id":"LE_lADNIULOahgXLs8AAAACQHiCsw","url":"https://api.github.com/repos/rails/rails/issues/events/9671574195","actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-06-29T01:33:53Z","label":{"name":"ci issues","color":"aaafff"},"performed_via_github_app":null},{"actor":{"login":"grjones","id":67890,"node_id":"MDQ6VXNlcjY3ODkw","avatar_url":"https://avatars.githubusercontent.com/u/67890?v=4","gravatar_id":"","url":"https://api.github.com/users/grjones","html_url":"https://github.com/grjones","followers_url":"https://api.github.com/users/grjones/followers","following_url":"https://api.github.com/users/grjones/following{/other_user}","gists_url":"https://api.github.com/users/grjones/gists{/gist_id}","starred_url":"https://api.github.com/users/grjones/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grjones/subscriptions","organizations_url":"https://api.github.com/users/grjones/orgs","repos_url":"https://api.github.com/users/grjones/repos","events_url":"https://api.github.com/users/grjones/events{/privacy}","received_events_url":"https://api.github.com/users/grjones/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-29T06:19:40Z","updated_at":"2023-06-29T06:19:40Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rails/rails/issues/48608","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/48608/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/48608/comments","events_url":"https://api.github.com/repos/rails/rails/issues/48608/events","html_url":"https://github.com/rails/rails/pull/48608","id":1780069788,"node_id":"PR_kwDNIULOVDO03g","number":48608,"title":"Support NULLS NOT DISTINCT in Postgres 15+","user":{"login":"grjones","id":67890,"node_id":"MDQ6VXNlcjY3ODkw","avatar_url":"https://avatars.githubusercontent.com/u/67890?v=4","gravatar_id":"","url":"https://api.github.com/users/grjones","html_url":"https://github.com/grjones","followers_url":"https://api.github.com/users/grjones/followers","following_url":"https://api.github.com/users/grjones/following{/other_user}","gists_url":"https://api.github.com/users/grjones/gists{/gist_id}","starred_url":"https://api.github.com/users/grjones/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grjones/subscriptions","organizations_url":"https://api.github.com/users/grjones/orgs","repos_url":"https://api.github.com/users/grjones/repos","events_url":"https://api.github.com/users/grjones/events{/privacy}","received_events_url":"https://api.github.com/users/grjones/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":107191,"node_id":"MDU6TGFiZWwxMDcxOTE=","url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-06-29T03:38:44Z","updated_at":"2023-08-03T19:29:58Z","closed_at":"2023-08-03T19:29:58Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":8514,"node_id":"MDEwOlJlcG9zaXRvcnk4NTE0","name":"rails","full_name":"rails/rails","private":false,"owner":{"login":"rails","id":4223,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjM=","avatar_url":"https://avatars.githubusercontent.com/u/4223?v=4","gravatar_id":"","url":"https://api.github.com/users/rails","html_url":"https://github.com/rails","followers_url":"https://api.github.com/users/rails/followers","following_url":"https://api.github.com/users/rails/following{/other_user}","gists_url":"https://api.github.com/users/rails/gists{/gist_id}","starred_url":"https://api.github.com/users/rails/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails/subscriptions","organizations_url":"https://api.github.com/users/rails/orgs","repos_url":"https://api.github.com/users/rails/repos","events_url":"https://api.github.com/users/rails/events{/privacy}","received_events_url":"https://api.github.com/users/rails/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rails/rails","description":"Ruby on Rails","fork":false,"url":"https://api.github.com/repos/rails/rails","forks_url":"https://api.github.com/repos/rails/rails/forks","keys_url":"https://api.github.com/repos/rails/rails/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rails/rails/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rails/rails/teams","hooks_url":"https://api.github.com/repos/rails/rails/hooks","issue_events_url":"https://api.github.com/repos/rails/rails/issues/events{/number}","events_url":"https://api.github.com/repos/rails/rails/events","assignees_url":"https://api.github.com/repos/rails/rails/assignees{/user}","branches_url":"https://api.github.com/repos/rails/rails/branches{/branch}","tags_url":"https://api.github.com/repos/rails/rails/tags","blobs_url":"https://api.github.com/repos/rails/rails/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rails/rails/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rails/rails/git/refs{/sha}","trees_url":"https://api.github.com/repos/rails/rails/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rails/rails/statuses/{sha}","languages_url":"https://api.github.com/repos/rails/rails/languages","stargazers_url":"https://api.github.com/repos/rails/rails/stargazers","contributors_url":"https://api.github.com/repos/rails/rails/contributors","subscribers_url":"https://api.github.com/repos/rails/rails/subscribers","subscription_url":"https://api.github.com/repos/rails/rails/subscription","commits_url":"https://api.github.com/repos/rails/rails/commits{/sha}","git_commits_url":"https://api.github.com/repos/rails/rails/git/commits{/sha}","comments_url":"https://api.github.com/repos/rails/rails/comments{/number}","issue_comment_url":"https://api.github.com/repos/rails/rails/issues/comments{/number}","contents_url":"https://api.github.com/repos/rails/rails/contents/{+path}","compare_url":"https://api.github.com/repos/rails/rails/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rails/rails/merges","archive_url":"https://api.github.com/repos/rails/rails/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rails/rails/downloads","issues_url":"https://api.github.com/repos/rails/rails/issues{/number}","pulls_url":"https://api.github.com/repos/rails/rails/pulls{/number}","milestones_url":"https://api.github.com/repos/rails/rails/milestones{/number}","notifications_url":"https://api.github.com/repos/rails/rails/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rails/rails/labels{/name}","releases_url":"https://api.github.com/repos/rails/rails/releases{/id}","deployments_url":"https://api.github.com/repos/rails/rails/deployments","created_at":"2008-04-11T02:19:47Z","updated_at":"2025-11-10T02:03:47Z","pushed_at":"2025-11-10T00:33:52Z","git_url":"git://github.com/rails/rails.git","ssh_url":"git@github.com:rails/rails.git","clone_url":"https://github.com/rails/rails.git","svn_url":"https://github.com/rails/rails","homepage":"https://rubyonrails.org","size":271619,"stargazers_count":57840,"watchers_count":57840,"language":"Ruby","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":22025,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1341,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["activejob","activerecord","framework","html","mvc","rails","ruby"],"visibility":"public","forks":22025,"open_issues":1341,"watchers":57840,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/48608","html_url":"https://github.com/rails/rails/pull/48608","diff_url":"https://github.com/rails/rails/pull/48608.diff","patch_url":"https://github.com/rails/rails/pull/48608.patch","merged_at":"2023-08-03T19:29:57Z"},"body":"### Motivation / Background\r\n\r\nPostgreSQL 15 introduced `NULLS NOT DISTINCT` in order to support unique indexes where you want to treat NULLs as equal. Otherwise, and by default, unique indexes allow any rows with null column values.\r\n\r\nThis Pull Request has been created because creating unique indexes where rows can have only one null value is helpful, and it is a good idea to keep up with new PostgreSQL features.\r\n\r\n### Detail\r\n\r\nThis Pull Request changes the PostgreSQL connection adapter, schema detection, and schema generation. Prior work was done in https://github.com/rails/rails/pull/46659 but was incomplete--a DB created from schema.rb would not have `NULLS NOT DISTINCT` set. Additionally, https://github.com/rails/rails/pull/44803 added `INCLUDE` to the index schema regex, but this must come **before** `NULLS [NOT] DISTINCT` per the [Postgres](https://www.postgresql.org/docs/15/sql-createindex.html) docs.\r\n\r\n### Additional information\r\n\r\nCheck out the PostreSQL docs [here](https://www.postgresql.org/docs/15/sql-createindex.html), in particular to confirm the correct ordering of SQL parts. My intent was to put it immediately after `INCLUDE` in regex detection and ruby argument order.\r\n\r\n### Checklist\r\n\r\nBefore submitting the PR make sure the following are checked:\r\n\r\n* [x] This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.\r\n* [x] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: `[Fix #issue-number]`\r\n* [x] Tests are added or updated if you fix a bug or add a feature.\r\n* [x] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.\r\n","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/48608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/rails/issues/48608/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1612523528","html_url":"https://github.com/rails/rails/issues/48605#issuecomment-1612523528","issue_url":"https://api.github.com/repos/rails/rails/issues/48605","id":1612523528,"node_id":"IC_kwDNIULOYB0oCA","user":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-29T07:01:24Z","updated_at":"2023-06-29T07:01:24Z","body":"Here is the smaller one.\r\n\r\n```\r\nARCONN=mysql2 bin/test test/cases/encryption/encryption_schemes_test.rb test/cases/encryption/encrypted_fixtures_test.rb -n \"/^(?:ActiveRecord::Encryption::EncryptionSchemesTest#(?:test_returns_ciphertext_all_the_previous_schemes_fail_to_decrypt_and_support_for_unencrypted_data_is_on)|ActiveRecord::Encryption::EncryptableFixtureTest#(?:test_preserved_columns_due_to_ignore_case:_true_gets_encrypted_automatically))$/\" --seed 39616\r\n```\r\n\r\n```ruby\r\n$ ARCONN=mysql2 bin/test test/cases/encryption/encryption_schemes_test.rb test/cases/encryption/encrypted_fixtures_test.rb -n \"/^(?:ActiveRecord::Encryption::EncryptionSchemesTest#(?:test_returns_ciphertext_all_the_previous_schemes_fail_to_decrypt_and_support_for_unencrypted_data_is_on)|ActiveRecord::Encryption::EncryptableFixtureTest#(?:test_preserved_columns_due_to_ignore_case:_true_gets_encrypted_automatically))$/\" --seed 39616\r\nUsing mysql2\r\nRun options: -n \"/^(?:ActiveRecord::Encryption::EncryptionSchemesTest#(?:test_returns_ciphertext_all_the_previous_schemes_fail_to_decrypt_and_support_for_unencrypted_data_is_on)|ActiveRecord::Encryption::EncryptableFixtureTest#(?:test_preserved_columns_due_to_ignore_case:_true_gets_encrypted_automatically))$/\" --seed 39616\r\n\r\n# Running:\r\n\r\n.E\r\n\r\nError:\r\nActiveRecord::Encryption::EncryptableFixtureTest#test_preserved_columns_due_to_ignore_case:_true_gets_encrypted_automatically:\r\nActiveRecord::Encryption::Errors::Decryption: Couldn't find a match for ruby for rails ({\"1\"=>\"2\"})\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encryption_schemes_test.rb:144:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:82:in `block in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/contexts.rb:40:in `with_encryption_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/scheme.rb:62:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:15:in `with_context'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:77:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:96:in `block in try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `each'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `with_index'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:95:in `try_to_deserialize_with_previous_encrypted_types'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:90:in `rescue in decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:76:in `decrypt'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encrypted_attribute_type.rb:36:in `deserialize'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set/builder.rb:52:in `block in fetch_value'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set/builder.rb:46:in `fetch'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_set/builder.rb:46:in `fetch_value'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/attribute_methods/read.rb:45:in `_read_attribute'\r\n    /home/yahonda/src/github.com/rails/rails/activemodel/lib/active_model/attribute_methods.rb:271:in `name'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/lib/active_record/encryption/encryptable_record.rb:108:in `block (2 levels) in override_accessors_to_preserve_original'\r\n    /home/yahonda/src/github.com/rails/rails/activerecord/test/cases/encryption/encrypted_fixtures_test.rb:17:in `block in <class:EncryptableFixtureTest>'\r\n\r\n\r\nbin/test test/cases/encryption/encrypted_fixtures_test.rb:15\r\n\r\n\r\n\r\nFinished in 0.209933s, 9.5269 runs/s, 4.7634 assertions/s.\r\n2 runs, 1 assertions, 0 failures, 1 errors, 0 skips\r\n$\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1612523528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"skipkayhil","id":6014046,"node_id":"MDQ6VXNlcjYwMTQwNDY=","avatar_url":"https://avatars.githubusercontent.com/u/6014046?v=4","gravatar_id":"","url":"https://api.github.com/users/skipkayhil","html_url":"https://github.com/skipkayhil","followers_url":"https://api.github.com/users/skipkayhil/followers","following_url":"https://api.github.com/users/skipkayhil/following{/other_user}","gists_url":"https://api.github.com/users/skipkayhil/gists{/gist_id}","starred_url":"https://api.github.com/users/skipkayhil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skipkayhil/subscriptions","organizations_url":"https://api.github.com/users/skipkayhil/orgs","repos_url":"https://api.github.com/users/skipkayhil/repos","events_url":"https://api.github.com/users/skipkayhil/events{/privacy}","received_events_url":"https://api.github.com/users/skipkayhil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T19:52:19Z","updated_at":"2023-07-03T19:52:19Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rails/rails/issues/48641","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/48641/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/48641/comments","events_url":"https://api.github.com/repos/rails/rails/issues/48641/events","html_url":"https://github.com/rails/rails/pull/48641","id":1786729031,"node_id":"PR_kwDNIULOVI4ikQ","number":48641,"title":"Fix flaky encryption tests","user":{"login":"p8","id":28561,"node_id":"MDQ6VXNlcjI4NTYx","avatar_url":"https://avatars.githubusercontent.com/u/28561?v=4","gravatar_id":"","url":"https://api.github.com/users/p8","html_url":"https://github.com/p8","followers_url":"https://api.github.com/users/p8/followers","following_url":"https://api.github.com/users/p8/following{/other_user}","gists_url":"https://api.github.com/users/p8/gists{/gist_id}","starred_url":"https://api.github.com/users/p8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/p8/subscriptions","organizations_url":"https://api.github.com/users/p8/orgs","repos_url":"https://api.github.com/users/p8/repos","events_url":"https://api.github.com/users/p8/events{/privacy}","received_events_url":"https://api.github.com/users/p8/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":107191,"node_id":"MDU6TGFiZWwxMDcxOTE=","url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2023-07-03T19:47:05Z","updated_at":"2023-07-05T09:16:09Z","closed_at":"2023-07-05T09:15:46Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":8514,"node_id":"MDEwOlJlcG9zaXRvcnk4NTE0","name":"rails","full_name":"rails/rails","private":false,"owner":{"login":"rails","id":4223,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjM=","avatar_url":"https://avatars.githubusercontent.com/u/4223?v=4","gravatar_id":"","url":"https://api.github.com/users/rails","html_url":"https://github.com/rails","followers_url":"https://api.github.com/users/rails/followers","following_url":"https://api.github.com/users/rails/following{/other_user}","gists_url":"https://api.github.com/users/rails/gists{/gist_id}","starred_url":"https://api.github.com/users/rails/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails/subscriptions","organizations_url":"https://api.github.com/users/rails/orgs","repos_url":"https://api.github.com/users/rails/repos","events_url":"https://api.github.com/users/rails/events{/privacy}","received_events_url":"https://api.github.com/users/rails/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rails/rails","description":"Ruby on Rails","fork":false,"url":"https://api.github.com/repos/rails/rails","forks_url":"https://api.github.com/repos/rails/rails/forks","keys_url":"https://api.github.com/repos/rails/rails/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rails/rails/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rails/rails/teams","hooks_url":"https://api.github.com/repos/rails/rails/hooks","issue_events_url":"https://api.github.com/repos/rails/rails/issues/events{/number}","events_url":"https://api.github.com/repos/rails/rails/events","assignees_url":"https://api.github.com/repos/rails/rails/assignees{/user}","branches_url":"https://api.github.com/repos/rails/rails/branches{/branch}","tags_url":"https://api.github.com/repos/rails/rails/tags","blobs_url":"https://api.github.com/repos/rails/rails/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rails/rails/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rails/rails/git/refs{/sha}","trees_url":"https://api.github.com/repos/rails/rails/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rails/rails/statuses/{sha}","languages_url":"https://api.github.com/repos/rails/rails/languages","stargazers_url":"https://api.github.com/repos/rails/rails/stargazers","contributors_url":"https://api.github.com/repos/rails/rails/contributors","subscribers_url":"https://api.github.com/repos/rails/rails/subscribers","subscription_url":"https://api.github.com/repos/rails/rails/subscription","commits_url":"https://api.github.com/repos/rails/rails/commits{/sha}","git_commits_url":"https://api.github.com/repos/rails/rails/git/commits{/sha}","comments_url":"https://api.github.com/repos/rails/rails/comments{/number}","issue_comment_url":"https://api.github.com/repos/rails/rails/issues/comments{/number}","contents_url":"https://api.github.com/repos/rails/rails/contents/{+path}","compare_url":"https://api.github.com/repos/rails/rails/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rails/rails/merges","archive_url":"https://api.github.com/repos/rails/rails/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rails/rails/downloads","issues_url":"https://api.github.com/repos/rails/rails/issues{/number}","pulls_url":"https://api.github.com/repos/rails/rails/pulls{/number}","milestones_url":"https://api.github.com/repos/rails/rails/milestones{/number}","notifications_url":"https://api.github.com/repos/rails/rails/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rails/rails/labels{/name}","releases_url":"https://api.github.com/repos/rails/rails/releases{/id}","deployments_url":"https://api.github.com/repos/rails/rails/deployments","created_at":"2008-04-11T02:19:47Z","updated_at":"2025-11-10T02:03:47Z","pushed_at":"2025-11-10T00:33:52Z","git_url":"git://github.com/rails/rails.git","ssh_url":"git@github.com:rails/rails.git","clone_url":"https://github.com/rails/rails.git","svn_url":"https://github.com/rails/rails","homepage":"https://rubyonrails.org","size":271619,"stargazers_count":57840,"watchers_count":57840,"language":"Ruby","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":22025,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1341,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["activejob","activerecord","framework","html","mvc","rails","ruby"],"visibility":"public","forks":22025,"open_issues":1341,"watchers":57840,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/48641","html_url":"https://github.com/rails/rails/pull/48641","diff_url":"https://github.com/rails/rails/pull/48641.diff","patch_url":"https://github.com/rails/rails/pull/48641.patch","merged_at":null},"body":"`4f365720d1b87b7a8fe7d8d77c157b63d853e334` introduced lazy loading\r\nencryption schemes. Schemes for attributes are loaded when the attribute\r\ntype is used.\r\n\r\nThis change introduced some flakiness to the tests:\r\n\r\n```bash\r\nARCONN=mysql2 bin/test test/cases/encryption/encryption_schemes_test.rb test/cases/encryption/encrypted_fixtures_test.rb -n \"/^(?:ActiveRecord::Encryption::EncryptionSchemesTest#(?:test_returns_ciphertext_all_the_previous_schemes_fail_to_decrypt_and_support_for_unencrypted_data_is_on)|ActiveRecord::Encryption::EncryptableFixtureTest#(?:test_preserved_columns_due_to_ignore_case:_true_gets_encrypted_automatically))$/\" --seed 39616\r\n\r\n...\r\n\r\n.E\r\n\r\n Error:\r\n    ActiveRecord::Encryption::EncryptableFixtureTest#test_preserved_columns_due_to_ignore_case:_true_gets_encrypted_automatically:\r\n    ActiveRecord::Encryption::Errors::Decryption: Couldn't find a match for ruby for rails ({\"1\"=>\"2\"})\r\n        /Users/petrik/Projects/All/_forks/rails/activerecord/test/cases/encryption/encryption_schemes_test.rb:144:in `decrypt'\r\n```\r\n\r\n\r\nBy calling the attribute type in the test models the schemes are eager\r\nloaded and the flakiness is hopefully fixed. (The original commit added\r\na similar call for the type).\r\n\r\ncc: @jorgemanrubia \r\n\r\n### Checklist\r\n\r\nBefore submitting the PR make sure the following are checked:\r\n\r\n* [x] This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.\r\n* [x] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: `[Fix #issue-number]`\r\n* [x] Tests are added or updated if you fix a bug or add a feature.\r\n* [x] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.\r\n","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/48641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/rails/issues/48641/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":9728785068,"node_id":"REFE_lADNIULOahgXLs8AAAACQ-F6rA","url":"https://api.github.com/repos/rails/rails/issues/events/9728785068","actor":{"login":"jorgemanrubia","id":129938,"node_id":"MDQ6VXNlcjEyOTkzOA==","avatar_url":"https://avatars.githubusercontent.com/u/129938?v=4","gravatar_id":"","url":"https://api.github.com/users/jorgemanrubia","html_url":"https://github.com/jorgemanrubia","followers_url":"https://api.github.com/users/jorgemanrubia/followers","following_url":"https://api.github.com/users/jorgemanrubia/following{/other_user}","gists_url":"https://api.github.com/users/jorgemanrubia/gists{/gist_id}","starred_url":"https://api.github.com/users/jorgemanrubia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jorgemanrubia/subscriptions","organizations_url":"https://api.github.com/users/jorgemanrubia/orgs","repos_url":"https://api.github.com/users/jorgemanrubia/repos","events_url":"https://api.github.com/users/jorgemanrubia/events{/privacy}","received_events_url":"https://api.github.com/users/jorgemanrubia/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"75959f74c75bb35ced8142a8ad92a99ebe50af22","commit_url":"https://api.github.com/repos/basecamp/rails/commits/75959f74c75bb35ced8142a8ad92a99ebe50af22","created_at":"2023-07-05T08:51:56Z","performed_via_github_app":null},{"actor":{"login":"jorgemanrubia","id":129938,"node_id":"MDQ6VXNlcjEyOTkzOA==","avatar_url":"https://avatars.githubusercontent.com/u/129938?v=4","gravatar_id":"","url":"https://api.github.com/users/jorgemanrubia","html_url":"https://github.com/jorgemanrubia","followers_url":"https://api.github.com/users/jorgemanrubia/followers","following_url":"https://api.github.com/users/jorgemanrubia/following{/other_user}","gists_url":"https://api.github.com/users/jorgemanrubia/gists{/gist_id}","starred_url":"https://api.github.com/users/jorgemanrubia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jorgemanrubia/subscriptions","organizations_url":"https://api.github.com/users/jorgemanrubia/orgs","repos_url":"https://api.github.com/users/jorgemanrubia/repos","events_url":"https://api.github.com/users/jorgemanrubia/events{/privacy}","received_events_url":"https://api.github.com/users/jorgemanrubia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-05T08:53:36Z","updated_at":"2023-07-05T08:53:36Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rails/rails/issues/48659","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/48659/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/48659/comments","events_url":"https://api.github.com/repos/rails/rails/issues/48659/events","html_url":"https://github.com/rails/rails/pull/48659","id":1789091273,"node_id":"PR_kwDNIULOVK33iA","number":48659,"title":"Fix test flakiness introduced in encryption tests","user":{"login":"jorgemanrubia","id":129938,"node_id":"MDQ6VXNlcjEyOTkzOA==","avatar_url":"https://avatars.githubusercontent.com/u/129938?v=4","gravatar_id":"","url":"https://api.github.com/users/jorgemanrubia","html_url":"https://github.com/jorgemanrubia","followers_url":"https://api.github.com/users/jorgemanrubia/followers","following_url":"https://api.github.com/users/jorgemanrubia/following{/other_user}","gists_url":"https://api.github.com/users/jorgemanrubia/gists{/gist_id}","starred_url":"https://api.github.com/users/jorgemanrubia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jorgemanrubia/subscriptions","organizations_url":"https://api.github.com/users/jorgemanrubia/orgs","repos_url":"https://api.github.com/users/jorgemanrubia/repos","events_url":"https://api.github.com/users/jorgemanrubia/events{/privacy}","received_events_url":"https://api.github.com/users/jorgemanrubia/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":107191,"node_id":"MDU6TGFiZWwxMDcxOTE=","url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-07-05T08:53:35Z","updated_at":"2023-07-05T09:48:07Z","closed_at":"2023-07-05T09:48:06Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":8514,"node_id":"MDEwOlJlcG9zaXRvcnk4NTE0","name":"rails","full_name":"rails/rails","private":false,"owner":{"login":"rails","id":4223,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjM=","avatar_url":"https://avatars.githubusercontent.com/u/4223?v=4","gravatar_id":"","url":"https://api.github.com/users/rails","html_url":"https://github.com/rails","followers_url":"https://api.github.com/users/rails/followers","following_url":"https://api.github.com/users/rails/following{/other_user}","gists_url":"https://api.github.com/users/rails/gists{/gist_id}","starred_url":"https://api.github.com/users/rails/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails/subscriptions","organizations_url":"https://api.github.com/users/rails/orgs","repos_url":"https://api.github.com/users/rails/repos","events_url":"https://api.github.com/users/rails/events{/privacy}","received_events_url":"https://api.github.com/users/rails/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rails/rails","description":"Ruby on Rails","fork":false,"url":"https://api.github.com/repos/rails/rails","forks_url":"https://api.github.com/repos/rails/rails/forks","keys_url":"https://api.github.com/repos/rails/rails/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rails/rails/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rails/rails/teams","hooks_url":"https://api.github.com/repos/rails/rails/hooks","issue_events_url":"https://api.github.com/repos/rails/rails/issues/events{/number}","events_url":"https://api.github.com/repos/rails/rails/events","assignees_url":"https://api.github.com/repos/rails/rails/assignees{/user}","branches_url":"https://api.github.com/repos/rails/rails/branches{/branch}","tags_url":"https://api.github.com/repos/rails/rails/tags","blobs_url":"https://api.github.com/repos/rails/rails/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rails/rails/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rails/rails/git/refs{/sha}","trees_url":"https://api.github.com/repos/rails/rails/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rails/rails/statuses/{sha}","languages_url":"https://api.github.com/repos/rails/rails/languages","stargazers_url":"https://api.github.com/repos/rails/rails/stargazers","contributors_url":"https://api.github.com/repos/rails/rails/contributors","subscribers_url":"https://api.github.com/repos/rails/rails/subscribers","subscription_url":"https://api.github.com/repos/rails/rails/subscription","commits_url":"https://api.github.com/repos/rails/rails/commits{/sha}","git_commits_url":"https://api.github.com/repos/rails/rails/git/commits{/sha}","comments_url":"https://api.github.com/repos/rails/rails/comments{/number}","issue_comment_url":"https://api.github.com/repos/rails/rails/issues/comments{/number}","contents_url":"https://api.github.com/repos/rails/rails/contents/{+path}","compare_url":"https://api.github.com/repos/rails/rails/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rails/rails/merges","archive_url":"https://api.github.com/repos/rails/rails/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rails/rails/downloads","issues_url":"https://api.github.com/repos/rails/rails/issues{/number}","pulls_url":"https://api.github.com/repos/rails/rails/pulls{/number}","milestones_url":"https://api.github.com/repos/rails/rails/milestones{/number}","notifications_url":"https://api.github.com/repos/rails/rails/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rails/rails/labels{/name}","releases_url":"https://api.github.com/repos/rails/rails/releases{/id}","deployments_url":"https://api.github.com/repos/rails/rails/deployments","created_at":"2008-04-11T02:19:47Z","updated_at":"2025-11-10T02:03:47Z","pushed_at":"2025-11-10T00:33:52Z","git_url":"git://github.com/rails/rails.git","ssh_url":"git@github.com:rails/rails.git","clone_url":"https://github.com/rails/rails.git","svn_url":"https://github.com/rails/rails","homepage":"https://rubyonrails.org","size":271619,"stargazers_count":57840,"watchers_count":57840,"language":"Ruby","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":22025,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1341,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["activejob","activerecord","framework","html","mvc","rails","ruby"],"visibility":"public","forks":22025,"open_issues":1341,"watchers":57840,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/48659","html_url":"https://github.com/rails/rails/pull/48659","diff_url":"https://github.com/rails/rails/pull/48659.diff","patch_url":"https://github.com/rails/rails/pull/48659.patch","merged_at":"2023-07-05T09:48:06Z"},"body":"This fixes some flakiness I introduced with 4f365720d1b87b7a8fe7d8d77c157b63d853e334.\r\n\r\nWe'll make sure we eager load all the encrypted attribute types declared before tests start, to prevent local encryption settings changes in tests from interfering with other tests.\r\n\r\nKudos to @p8 for tracking this one down and seeing how to fix it. This PR is just a generalization of his solution from #48641.\r\n\r\nI'm sorry I missed this one with that commit .\r\n\r\nFixes #48605\r\nCloses #48641\r\n\r\n### Checklist\r\n\r\nBefore submitting the PR make sure the following are checked:\r\n\r\n* [x] This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.\r\n* [x] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: `[Fix #issue-number]`\r\n* [x] Tests are added or updated if you fix a bug or add a feature.\r\n","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/48659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/rails/issues/48659/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":9728808258,"node_id":"REFE_lADNIULOahgXLs8AAAACQ-HVQg","url":"https://api.github.com/repos/rails/rails/issues/events/9728808258","actor":{"login":"jorgemanrubia","id":129938,"node_id":"MDQ6VXNlcjEyOTkzOA==","avatar_url":"https://avatars.githubusercontent.com/u/129938?v=4","gravatar_id":"","url":"https://api.github.com/users/jorgemanrubia","html_url":"https://github.com/jorgemanrubia","followers_url":"https://api.github.com/users/jorgemanrubia/followers","following_url":"https://api.github.com/users/jorgemanrubia/following{/other_user}","gists_url":"https://api.github.com/users/jorgemanrubia/gists{/gist_id}","starred_url":"https://api.github.com/users/jorgemanrubia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jorgemanrubia/subscriptions","organizations_url":"https://api.github.com/users/jorgemanrubia/orgs","repos_url":"https://api.github.com/users/jorgemanrubia/repos","events_url":"https://api.github.com/users/jorgemanrubia/events{/privacy}","received_events_url":"https://api.github.com/users/jorgemanrubia/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d31723545c24a3959dba1c410a0463588541aa1c","commit_url":"https://api.github.com/repos/basecamp/rails/commits/d31723545c24a3959dba1c410a0463588541aa1c","created_at":"2023-07-05T08:54:16Z","performed_via_github_app":null},{"id":9728843869,"node_id":"REFE_lADNIULOahgXLs8AAAACQ-JgXQ","url":"https://api.github.com/repos/rails/rails/issues/events/9728843869","actor":{"login":"jorgemanrubia","id":129938,"node_id":"MDQ6VXNlcjEyOTkzOA==","avatar_url":"https://avatars.githubusercontent.com/u/129938?v=4","gravatar_id":"","url":"https://api.github.com/users/jorgemanrubia","html_url":"https://github.com/jorgemanrubia","followers_url":"https://api.github.com/users/jorgemanrubia/followers","following_url":"https://api.github.com/users/jorgemanrubia/following{/other_user}","gists_url":"https://api.github.com/users/jorgemanrubia/gists{/gist_id}","starred_url":"https://api.github.com/users/jorgemanrubia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jorgemanrubia/subscriptions","organizations_url":"https://api.github.com/users/jorgemanrubia/orgs","repos_url":"https://api.github.com/users/jorgemanrubia/repos","events_url":"https://api.github.com/users/jorgemanrubia/events{/privacy}","received_events_url":"https://api.github.com/users/jorgemanrubia/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"5618442379ed9bc3cd27da5cfaf685ef5240cc21","commit_url":"https://api.github.com/repos/basecamp/rails/commits/5618442379ed9bc3cd27da5cfaf685ef5240cc21","created_at":"2023-07-05T08:57:13Z","performed_via_github_app":null},{"id":9729127545,"node_id":"REFE_lADNIULOahgXLs8AAAACQ-a0eQ","url":"https://api.github.com/repos/rails/rails/issues/events/9729127545","actor":{"login":"jorgemanrubia","id":129938,"node_id":"MDQ6VXNlcjEyOTkzOA==","avatar_url":"https://avatars.githubusercontent.com/u/129938?v=4","gravatar_id":"","url":"https://api.github.com/users/jorgemanrubia","html_url":"https://github.com/jorgemanrubia","followers_url":"https://api.github.com/users/jorgemanrubia/followers","following_url":"https://api.github.com/users/jorgemanrubia/following{/other_user}","gists_url":"https://api.github.com/users/jorgemanrubia/gists{/gist_id}","starred_url":"https://api.github.com/users/jorgemanrubia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jorgemanrubia/subscriptions","organizations_url":"https://api.github.com/users/jorgemanrubia/orgs","repos_url":"https://api.github.com/users/jorgemanrubia/repos","events_url":"https://api.github.com/users/jorgemanrubia/events{/privacy}","received_events_url":"https://api.github.com/users/jorgemanrubia/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"78e38d8b6d3f4a3352e525529fc2e51e5f5cbe03","commit_url":"https://api.github.com/repos/basecamp/rails/commits/78e38d8b6d3f4a3352e525529fc2e51e5f5cbe03","created_at":"2023-07-05T09:22:22Z","performed_via_github_app":null},{"id":9729419074,"node_id":"CE_lADNIULOahgXLs8AAAACQ-snQg","url":"https://api.github.com/repos/rails/rails/issues/events/9729419074","actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2023-07-05T09:48:08Z","state_reason":null,"performed_via_github_app":null}]