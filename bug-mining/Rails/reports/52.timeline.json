[{"id":9186595928,"node_id":"REFE_lADNIULOZU1qUM8AAAACI5BUWA","url":"https://api.github.com/repos/rails/rails/issues/events/9186595928","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"cf38d05b561a754b369fbbb8b2b479653c8b4663","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/cf38d05b561a754b369fbbb8b2b479653c8b4663","created_at":"2023-05-08T05:57:00Z","performed_via_github_app":null},{"id":9186624776,"node_id":"REFE_lADNIULOZU1qUM8AAAACI5DFCA","url":"https://api.github.com/repos/rails/rails/issues/events/9186624776","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"688ead98fcd5d7f4547c1f08b85383575f135ded","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/688ead98fcd5d7f4547c1f08b85383575f135ded","created_at":"2023-05-08T06:01:04Z","performed_via_github_app":null},{"id":9186658801,"node_id":"REFE_lADNIULOZU1qUM8AAAACI5FJ8Q","url":"https://api.github.com/repos/rails/rails/issues/events/9186658801","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"3b7fcb68fb03fa8f11dec1c01d44effd1ca9827f","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/3b7fcb68fb03fa8f11dec1c01d44effd1ca9827f","created_at":"2023-05-08T06:05:23Z","performed_via_github_app":null},{"id":9186663794,"node_id":"REFE_lADNIULOZU1qUM8AAAACI5Fdcg","url":"https://api.github.com/repos/rails/rails/issues/events/9186663794","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"5b1d9ad310cf7e962d1cc6f46a16d54d63280a26","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/5b1d9ad310cf7e962d1cc6f46a16d54d63280a26","created_at":"2023-05-08T06:06:00Z","performed_via_github_app":null},{"id":9186673173,"node_id":"REFE_lADNIULOZU1qUM8AAAACI5GCFQ","url":"https://api.github.com/repos/rails/rails/issues/events/9186673173","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"6088f5e6121c2aa3a019dbefa73d7bf2db8cf57e","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/6088f5e6121c2aa3a019dbefa73d7bf2db8cf57e","created_at":"2023-05-08T06:07:12Z","performed_via_github_app":null},{"id":9186720315,"node_id":"REFE_lADNIULOZU1qUM8AAAACI5I6Ow","url":"https://api.github.com/repos/rails/rails/issues/events/9186720315","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"853e03be7107b5e16196908728901b9a16400d42","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/853e03be7107b5e16196908728901b9a16400d42","created_at":"2023-05-08T06:13:37Z","performed_via_github_app":null},{"actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-08T06:14:15Z","updated_at":"2023-05-08T06:14:15Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rails/rails/issues/48165","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/48165/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/48165/comments","events_url":"https://api.github.com/repos/rails/rails/issues/48165/events","html_url":"https://github.com/rails/rails/pull/48165","id":1699601770,"node_id":"PR_kwDNIULOT_cwCQ","number":48165,"title":"Discard connection when in an unknown transaction state.","user":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":107191,"node_id":"MDU6TGFiZWwxMDcxOTE=","url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-05-08T06:14:14Z","updated_at":"2023-05-12T07:16:07Z","closed_at":"2023-05-12T07:16:06Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":8514,"node_id":"MDEwOlJlcG9zaXRvcnk4NTE0","name":"rails","full_name":"rails/rails","private":false,"owner":{"login":"rails","id":4223,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjM=","avatar_url":"https://avatars.githubusercontent.com/u/4223?v=4","gravatar_id":"","url":"https://api.github.com/users/rails","html_url":"https://github.com/rails","followers_url":"https://api.github.com/users/rails/followers","following_url":"https://api.github.com/users/rails/following{/other_user}","gists_url":"https://api.github.com/users/rails/gists{/gist_id}","starred_url":"https://api.github.com/users/rails/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails/subscriptions","organizations_url":"https://api.github.com/users/rails/orgs","repos_url":"https://api.github.com/users/rails/repos","events_url":"https://api.github.com/users/rails/events{/privacy}","received_events_url":"https://api.github.com/users/rails/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rails/rails","description":"Ruby on Rails","fork":false,"url":"https://api.github.com/repos/rails/rails","forks_url":"https://api.github.com/repos/rails/rails/forks","keys_url":"https://api.github.com/repos/rails/rails/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rails/rails/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rails/rails/teams","hooks_url":"https://api.github.com/repos/rails/rails/hooks","issue_events_url":"https://api.github.com/repos/rails/rails/issues/events{/number}","events_url":"https://api.github.com/repos/rails/rails/events","assignees_url":"https://api.github.com/repos/rails/rails/assignees{/user}","branches_url":"https://api.github.com/repos/rails/rails/branches{/branch}","tags_url":"https://api.github.com/repos/rails/rails/tags","blobs_url":"https://api.github.com/repos/rails/rails/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rails/rails/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rails/rails/git/refs{/sha}","trees_url":"https://api.github.com/repos/rails/rails/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rails/rails/statuses/{sha}","languages_url":"https://api.github.com/repos/rails/rails/languages","stargazers_url":"https://api.github.com/repos/rails/rails/stargazers","contributors_url":"https://api.github.com/repos/rails/rails/contributors","subscribers_url":"https://api.github.com/repos/rails/rails/subscribers","subscription_url":"https://api.github.com/repos/rails/rails/subscription","commits_url":"https://api.github.com/repos/rails/rails/commits{/sha}","git_commits_url":"https://api.github.com/repos/rails/rails/git/commits{/sha}","comments_url":"https://api.github.com/repos/rails/rails/comments{/number}","issue_comment_url":"https://api.github.com/repos/rails/rails/issues/comments{/number}","contents_url":"https://api.github.com/repos/rails/rails/contents/{+path}","compare_url":"https://api.github.com/repos/rails/rails/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rails/rails/merges","archive_url":"https://api.github.com/repos/rails/rails/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rails/rails/downloads","issues_url":"https://api.github.com/repos/rails/rails/issues{/number}","pulls_url":"https://api.github.com/repos/rails/rails/pulls{/number}","milestones_url":"https://api.github.com/repos/rails/rails/milestones{/number}","notifications_url":"https://api.github.com/repos/rails/rails/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rails/rails/labels{/name}","releases_url":"https://api.github.com/repos/rails/rails/releases{/id}","deployments_url":"https://api.github.com/repos/rails/rails/deployments","created_at":"2008-04-11T02:19:47Z","updated_at":"2025-11-10T02:03:47Z","pushed_at":"2025-11-10T00:33:52Z","git_url":"git://github.com/rails/rails.git","ssh_url":"git@github.com:rails/rails.git","clone_url":"https://github.com/rails/rails.git","svn_url":"https://github.com/rails/rails","homepage":"https://rubyonrails.org","size":271619,"stargazers_count":57840,"watchers_count":57840,"language":"Ruby","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":22025,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1341,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["activejob","activerecord","framework","html","mvc","rails","ruby"],"visibility":"public","forks":22025,"open_issues":1341,"watchers":57840,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/48165","html_url":"https://github.com/rails/rails/pull/48165","diff_url":"https://github.com/rails/rails/pull/48165.diff","patch_url":"https://github.com/rails/rails/pull/48165.patch","merged_at":null},"body":"### Motivation / Background\r\n\r\nFixes #48164\r\n\r\n### Detail\r\n\r\nIntroduces the concept of a transaction lock. This is used to detect cases where `within_new_transaction` raises, potentially leaving the connection in an untracked, open transaction.\r\n\r\nThe idea is to store and acquire a new lock before attempting to materialize a transaction, and to only discard the lock once the transaction state is definitely known. If `within_new_transaction` raises, without the lock being discarded, subsequent attempts to create a transaction will detect this case and discard the connection.\r\n\r\n### Additional information\r\n\r\n- The `within_new_transaction` diff is mostly whitespace. Please consider reviewing with whitespace hidden: https://github.com/rails/rails/pull/48165/files?diff=unified&w=1\r\n- I have split `begin_transaction` into `create_transaction` and `materialize_transaction_if_required` because creating a transaction cannot leave the connection in a bad state. If it raises, there is no need to discard the connection.\r\n- I have introduced a new method to the TransactionManager API: `check_transaction_state_known!`. If this change turns out to be acceptable, this method should be invoked before allowing access to the raw connection. For demonstration purposes, I have added a call to this method in `execute` and `transaction`.\r\n\r\n### Checklist\r\n\r\nBefore submitting the PR make sure the following are checked:\r\n\r\n* [x] This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.\r\n* [x] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: `[Fix #issue-number]`\r\n* [x] Tests are added or updated if you fix a bug or add a feature.\r\n* [x] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.\r\n","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/48165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/rails/issues/48165/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":9186838481,"node_id":"REFE_lADNIULOZU1qUM8AAAACI5QH0Q","url":"https://api.github.com/repos/rails/rails/issues/events/9186838481","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a382b689dd7af89083b97fccaf00c258e4a3e3a7","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/a382b689dd7af89083b97fccaf00c258e4a3e3a7","created_at":"2023-05-08T06:31:16Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1543536259","html_url":"https://github.com/rails/rails/issues/48164#issuecomment-1543536259","issue_url":"https://api.github.com/repos/rails/rails/issues/48164","id":1543536259,"node_id":"IC_kwDNIULOXAB-gw","user":{"login":"matthewd","id":1034,"node_id":"MDQ6VXNlcjEwMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1034?v=4","gravatar_id":"","url":"https://api.github.com/users/matthewd","html_url":"https://github.com/matthewd","followers_url":"https://api.github.com/users/matthewd/followers","following_url":"https://api.github.com/users/matthewd/following{/other_user}","gists_url":"https://api.github.com/users/matthewd/gists{/gist_id}","starred_url":"https://api.github.com/users/matthewd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matthewd/subscriptions","organizations_url":"https://api.github.com/users/matthewd/orgs","repos_url":"https://api.github.com/users/matthewd/repos","events_url":"https://api.github.com/users/matthewd/events{/privacy}","received_events_url":"https://api.github.com/users/matthewd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T08:09:08Z","updated_at":"2023-05-11T08:09:08Z","body":"At a quick look, the proposed solution sounds rather complicated. \n\nHow close would we get by adding a couple of extra \"rescue -> throw away\" fallbacks to the existing error handling?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1543536259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"matthewd","id":1034,"node_id":"MDQ6VXNlcjEwMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1034?v=4","gravatar_id":"","url":"https://api.github.com/users/matthewd","html_url":"https://github.com/matthewd","followers_url":"https://api.github.com/users/matthewd/followers","following_url":"https://api.github.com/users/matthewd/following{/other_user}","gists_url":"https://api.github.com/users/matthewd/gists{/gist_id}","starred_url":"https://api.github.com/users/matthewd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matthewd/subscriptions","organizations_url":"https://api.github.com/users/matthewd/orgs","repos_url":"https://api.github.com/users/matthewd/repos","events_url":"https://api.github.com/users/matthewd/events{/privacy}","received_events_url":"https://api.github.com/users/matthewd/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1544018445","html_url":"https://github.com/rails/rails/issues/48164#issuecomment-1544018445","issue_url":"https://api.github.com/repos/rails/rails/issues/48164","id":1544018445,"node_id":"IC_kwDNIULOXAfaDQ","user":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T13:32:06Z","updated_at":"2023-05-12T09:45:51Z","body":"> At a quick look, the proposed solution sounds rather complicated.\r\n> \r\n> How close would we get by adding a couple of extra \"rescue -> throw away\" fallbacks to the existing error handling?\r\n\r\nHi Matthew,\r\n\r\nThank you for taking the time to review.\r\n\r\nThe first way we could remove some complexity is by not splitting `begin_transaction` into creation and materialization steps. I did this to avoid discarding connections if beginning a transaction was never attempted, for instance when `SavepointTransaction` raises due to `isolation_level` being set.\r\n\r\nRegarding the rest of the change, I suggest breaking it into two parts. I have closed #48165 and opened #48200 for the first part where we simply rescue all errors. If we were to just go with this change, it would provide an opportunity to recover from the three cases mentioned in the description of this issue. It would not provide a guarantee though, since we may fail to discard the connection.\r\n\r\nA proposed followup which introduces the locking idea can be found [here](https://github.com/nicholasdower/rails/compare/nickd/within-transaction...nicholasdower:rails:nickd/lock-stack?w=1).\r\n\r\nIf we were to also include this change, we would have a way to detect when the previous attempt at recovery failed.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1544018445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9227461055,"node_id":"LE_lADNIULOZU1qUM8AAAACJf_hvw","url":"https://api.github.com/repos/rails/rails/issues/events/9227461055","actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-05-11T22:43:01Z","label":{"name":"activerecord","color":"0b02e1"},"performed_via_github_app":null},{"id":9229311243,"node_id":"REFE_lADNIULOZU1qUM8AAAACJhwdCw","url":"https://api.github.com/repos/rails/rails/issues/events/9229311243","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"65acd0ee95b7792f3158924a93b570364c359471","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/65acd0ee95b7792f3158924a93b570364c359471","created_at":"2023-05-12T06:08:49Z","performed_via_github_app":null},{"id":9229339639,"node_id":"REFE_lADNIULOZU1qUM8AAAACJhyL9w","url":"https://api.github.com/repos/rails/rails/issues/events/9229339639","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d9b074de87b8646c9d483b1a38069d7760981856","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/d9b074de87b8646c9d483b1a38069d7760981856","created_at":"2023-05-12T06:12:10Z","performed_via_github_app":null},{"id":9229614683,"node_id":"REFE_lADNIULOZU1qUM8AAAACJiC-Ww","url":"https://api.github.com/repos/rails/rails/issues/events/9229614683","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"08aa78114ee4bfdbe1fd1fce9fb185c4c6fd3f5e","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/08aa78114ee4bfdbe1fd1fce9fb185c4c6fd3f5e","created_at":"2023-05-12T06:49:42Z","performed_via_github_app":null},{"id":9229669107,"node_id":"REFE_lADNIULOZU1qUM8AAAACJiGS8w","url":"https://api.github.com/repos/rails/rails/issues/events/9229669107","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"323cc67b059f49c559cfdca14907aafa9fc5b7c7","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/323cc67b059f49c559cfdca14907aafa9fc5b7c7","created_at":"2023-05-12T06:57:36Z","performed_via_github_app":null},{"id":9229682992,"node_id":"REFE_lADNIULOZU1qUM8AAAACJiHJMA","url":"https://api.github.com/repos/rails/rails/issues/events/9229682992","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f9cd0705d10ca6afa87b16ccf3ac2421233c3c63","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/f9cd0705d10ca6afa87b16ccf3ac2421233c3c63","created_at":"2023-05-12T06:59:27Z","performed_via_github_app":null},{"id":9229757147,"node_id":"REFE_lADNIULOZU1qUM8AAAACJiLq2w","url":"https://api.github.com/repos/rails/rails/issues/events/9229757147","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"cee9e0cf25baff3106592777210c5d717e9b4431","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/cee9e0cf25baff3106592777210c5d717e9b4431","created_at":"2023-05-12T07:08:09Z","performed_via_github_app":null},{"id":9229789648,"node_id":"REFE_lADNIULOZU1qUM8AAAACJiNp0A","url":"https://api.github.com/repos/rails/rails/issues/events/9229789648","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"900ba93b49f5e453d8e489e630c537a0a2caa368","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/900ba93b49f5e453d8e489e630c537a0a2caa368","created_at":"2023-05-12T07:12:03Z","performed_via_github_app":null},{"actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T07:14:25Z","updated_at":"2023-05-12T07:14:25Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rails/rails/issues/48200","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/48200/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/48200/comments","events_url":"https://api.github.com/repos/rails/rails/issues/48200/events","html_url":"https://github.com/rails/rails/pull/48200","id":1707080058,"node_id":"PR_kwDNIULOUFvoNg","number":48200,"title":"Discard connections which may be left in a transaction","user":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":107191,"node_id":"MDU6TGFiZWwxMDcxOTE=","url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-05-12T07:14:25Z","updated_at":"2023-05-14T02:48:32Z","closed_at":"2023-05-14T02:48:32Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":8514,"node_id":"MDEwOlJlcG9zaXRvcnk4NTE0","name":"rails","full_name":"rails/rails","private":false,"owner":{"login":"rails","id":4223,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjM=","avatar_url":"https://avatars.githubusercontent.com/u/4223?v=4","gravatar_id":"","url":"https://api.github.com/users/rails","html_url":"https://github.com/rails","followers_url":"https://api.github.com/users/rails/followers","following_url":"https://api.github.com/users/rails/following{/other_user}","gists_url":"https://api.github.com/users/rails/gists{/gist_id}","starred_url":"https://api.github.com/users/rails/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails/subscriptions","organizations_url":"https://api.github.com/users/rails/orgs","repos_url":"https://api.github.com/users/rails/repos","events_url":"https://api.github.com/users/rails/events{/privacy}","received_events_url":"https://api.github.com/users/rails/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rails/rails","description":"Ruby on Rails","fork":false,"url":"https://api.github.com/repos/rails/rails","forks_url":"https://api.github.com/repos/rails/rails/forks","keys_url":"https://api.github.com/repos/rails/rails/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rails/rails/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rails/rails/teams","hooks_url":"https://api.github.com/repos/rails/rails/hooks","issue_events_url":"https://api.github.com/repos/rails/rails/issues/events{/number}","events_url":"https://api.github.com/repos/rails/rails/events","assignees_url":"https://api.github.com/repos/rails/rails/assignees{/user}","branches_url":"https://api.github.com/repos/rails/rails/branches{/branch}","tags_url":"https://api.github.com/repos/rails/rails/tags","blobs_url":"https://api.github.com/repos/rails/rails/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rails/rails/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rails/rails/git/refs{/sha}","trees_url":"https://api.github.com/repos/rails/rails/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rails/rails/statuses/{sha}","languages_url":"https://api.github.com/repos/rails/rails/languages","stargazers_url":"https://api.github.com/repos/rails/rails/stargazers","contributors_url":"https://api.github.com/repos/rails/rails/contributors","subscribers_url":"https://api.github.com/repos/rails/rails/subscribers","subscription_url":"https://api.github.com/repos/rails/rails/subscription","commits_url":"https://api.github.com/repos/rails/rails/commits{/sha}","git_commits_url":"https://api.github.com/repos/rails/rails/git/commits{/sha}","comments_url":"https://api.github.com/repos/rails/rails/comments{/number}","issue_comment_url":"https://api.github.com/repos/rails/rails/issues/comments{/number}","contents_url":"https://api.github.com/repos/rails/rails/contents/{+path}","compare_url":"https://api.github.com/repos/rails/rails/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rails/rails/merges","archive_url":"https://api.github.com/repos/rails/rails/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rails/rails/downloads","issues_url":"https://api.github.com/repos/rails/rails/issues{/number}","pulls_url":"https://api.github.com/repos/rails/rails/pulls{/number}","milestones_url":"https://api.github.com/repos/rails/rails/milestones{/number}","notifications_url":"https://api.github.com/repos/rails/rails/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rails/rails/labels{/name}","releases_url":"https://api.github.com/repos/rails/rails/releases{/id}","deployments_url":"https://api.github.com/repos/rails/rails/deployments","created_at":"2008-04-11T02:19:47Z","updated_at":"2025-11-10T02:03:47Z","pushed_at":"2025-11-10T00:33:52Z","git_url":"git://github.com/rails/rails.git","ssh_url":"git@github.com:rails/rails.git","clone_url":"https://github.com/rails/rails.git","svn_url":"https://github.com/rails/rails","homepage":"https://rubyonrails.org","size":271619,"stargazers_count":57840,"watchers_count":57840,"language":"Ruby","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":22025,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1341,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["activejob","activerecord","framework","html","mvc","rails","ruby"],"visibility":"public","forks":22025,"open_issues":1341,"watchers":57840,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/48200","html_url":"https://github.com/rails/rails/pull/48200","diff_url":"https://github.com/rails/rails/pull/48200.diff","patch_url":"https://github.com/rails/rails/pull/48200.patch","merged_at":"2023-05-14T02:48:32Z"},"body":"### Motivation / Background\r\n\r\nPartially Fixes #48164\r\n\r\n### Detail\r\n\r\nToday, connections are discarded in `within_transaction` if rolling back fails after the call to `yield` raises. This is done to prevent a connection from being left in a transaction if the rollback actually failed.\r\n\r\nThis change causes connections to be discarded in the following additional cases where the connection may be left in a transaction:\r\n- If beginning the transaction fails.\r\n- If rolling back the transaction fails.\r\n- If committing the transaction fails, then rolling back fails.\r\n\r\nThis is accomplished by rescuing all exceptions raised in `within_transaction` and discarding the connection if the transaction has not been been both initialized and completed.\r\n\r\n### Checklist\r\n\r\n* [x] This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.\r\n* [x] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: `[Fix #issue-number]`\r\n* [x] Tests are added or updated if you fix a bug or add a feature.\r\n* [x] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.\r\n","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/48200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/rails/issues/48200/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":9229828815,"node_id":"MEE_lADNIULOZU1qUM8AAAACJiQCzw","url":"https://api.github.com/repos/rails/rails/issues/events/9229828815","actor":{"login":"matthewd","id":1034,"node_id":"MDQ6VXNlcjEwMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1034?v=4","gravatar_id":"","url":"https://api.github.com/users/matthewd","html_url":"https://github.com/matthewd","followers_url":"https://api.github.com/users/matthewd/followers","following_url":"https://api.github.com/users/matthewd/following{/other_user}","gists_url":"https://api.github.com/users/matthewd/gists{/gist_id}","starred_url":"https://api.github.com/users/matthewd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matthewd/subscriptions","organizations_url":"https://api.github.com/users/matthewd/orgs","repos_url":"https://api.github.com/users/matthewd/repos","events_url":"https://api.github.com/users/matthewd/events{/privacy}","received_events_url":"https://api.github.com/users/matthewd/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-05-12T07:16:41Z","performed_via_github_app":null},{"id":9229828834,"node_id":"SE_lADNIULOZU1qUM8AAAACJiQC4g","url":"https://api.github.com/repos/rails/rails/issues/events/9229828834","actor":{"login":"matthewd","id":1034,"node_id":"MDQ6VXNlcjEwMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1034?v=4","gravatar_id":"","url":"https://api.github.com/users/matthewd","html_url":"https://github.com/matthewd","followers_url":"https://api.github.com/users/matthewd/followers","following_url":"https://api.github.com/users/matthewd/following{/other_user}","gists_url":"https://api.github.com/users/matthewd/gists{/gist_id}","starred_url":"https://api.github.com/users/matthewd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matthewd/subscriptions","organizations_url":"https://api.github.com/users/matthewd/orgs","repos_url":"https://api.github.com/users/matthewd/repos","events_url":"https://api.github.com/users/matthewd/events{/privacy}","received_events_url":"https://api.github.com/users/matthewd/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-05-12T07:16:42Z","performed_via_github_app":null},{"id":9229995110,"node_id":"REFE_lADNIULOZU1qUM8AAAACJiaMZg","url":"https://api.github.com/repos/rails/rails/issues/events/9229995110","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"02b456d060b6cf2b8ec47c62830c8d149951f749","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/02b456d060b6cf2b8ec47c62830c8d149951f749","created_at":"2023-05-12T07:33:19Z","performed_via_github_app":null},{"id":9230366362,"node_id":"REFE_lADNIULOZU1qUM8AAAACJiw2mg","url":"https://api.github.com/repos/rails/rails/issues/events/9230366362","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"cd4472c4e05c3d4763b5d1e753620fbcccdf876c","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/cd4472c4e05c3d4763b5d1e753620fbcccdf876c","created_at":"2023-05-12T08:15:38Z","performed_via_github_app":null},{"id":9231132362,"node_id":"REFE_lADNIULOZU1qUM8AAAACJjfmyg","url":"https://api.github.com/repos/rails/rails/issues/events/9231132362","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8bb846d6c3381631ed0d413ff12f16004bd4ccba","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/8bb846d6c3381631ed0d413ff12f16004bd4ccba","created_at":"2023-05-12T09:38:39Z","performed_via_github_app":null},{"id":9231146171,"node_id":"REFE_lADNIULOZU1qUM8AAAACJjgcuw","url":"https://api.github.com/repos/rails/rails/issues/events/9231146171","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"7f11c5dcf2c0d1f531a8d17e286ad7db696a900f","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/7f11c5dcf2c0d1f531a8d17e286ad7db696a900f","created_at":"2023-05-12T09:40:14Z","performed_via_github_app":null},{"id":9231213562,"node_id":"REFE_lADNIULOZU1qUM8AAAACJjkj-g","url":"https://api.github.com/repos/rails/rails/issues/events/9231213562","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f8077e71d45668cb631480fea3855b67a3e4abbb","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/f8077e71d45668cb631480fea3855b67a3e4abbb","created_at":"2023-05-12T09:47:50Z","performed_via_github_app":null},{"id":9231357397,"node_id":"REFE_lADNIULOZU1qUM8AAAACJjtV1Q","url":"https://api.github.com/repos/rails/rails/issues/events/9231357397","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d223ca9459ad1cecac56df511db42d77c04bc275","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/d223ca9459ad1cecac56df511db42d77c04bc275","created_at":"2023-05-12T10:03:35Z","performed_via_github_app":null},{"id":9231367100,"node_id":"REFE_lADNIULOZU1qUM8AAAACJjt7vA","url":"https://api.github.com/repos/rails/rails/issues/events/9231367100","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"0561773d9feddee3a5fe1267d9f6f526ec08eb56","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/0561773d9feddee3a5fe1267d9f6f526ec08eb56","created_at":"2023-05-12T10:04:38Z","performed_via_github_app":null},{"id":9231369606,"node_id":"REFE_lADNIULOZU1qUM8AAAACJjuFhg","url":"https://api.github.com/repos/rails/rails/issues/events/9231369606","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"0b858db910a994ef1bf51197c8c3c16abebde979","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/0b858db910a994ef1bf51197c8c3c16abebde979","created_at":"2023-05-12T10:04:55Z","performed_via_github_app":null},{"id":9238180670,"node_id":"REFE_lADNIULOZU1qUM8AAAACJqNzPg","url":"https://api.github.com/repos/rails/rails/issues/events/9238180670","actor":{"login":"nicholasdower","id":9117775,"node_id":"MDQ6VXNlcjkxMTc3NzU=","avatar_url":"https://avatars.githubusercontent.com/u/9117775?v=4","gravatar_id":"","url":"https://api.github.com/users/nicholasdower","html_url":"https://github.com/nicholasdower","followers_url":"https://api.github.com/users/nicholasdower/followers","following_url":"https://api.github.com/users/nicholasdower/following{/other_user}","gists_url":"https://api.github.com/users/nicholasdower/gists{/gist_id}","starred_url":"https://api.github.com/users/nicholasdower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicholasdower/subscriptions","organizations_url":"https://api.github.com/users/nicholasdower/orgs","repos_url":"https://api.github.com/users/nicholasdower/repos","events_url":"https://api.github.com/users/nicholasdower/events{/privacy}","received_events_url":"https://api.github.com/users/nicholasdower/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"6aa612e31c83b6b3fcbd225bd67cfd8d4dcfe9a7","commit_url":"https://api.github.com/repos/nicholasdower/rails/commits/6aa612e31c83b6b3fcbd225bd67cfd8d4dcfe9a7","created_at":"2023-05-13T08:34:32Z","performed_via_github_app":null}]