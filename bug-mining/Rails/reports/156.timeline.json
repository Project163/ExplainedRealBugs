[{"id":14691424286,"node_id":"RTE_lADNIULOmpOf188AAAADa61YHg","url":"https://api.github.com/repos/rails/rails/issues/events/14691424286","actor":{"login":"MaxLap","id":894561,"node_id":"MDQ6VXNlcjg5NDU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/894561?v=4","gravatar_id":"","url":"https://api.github.com/users/MaxLap","html_url":"https://github.com/MaxLap","followers_url":"https://api.github.com/users/MaxLap/followers","following_url":"https://api.github.com/users/MaxLap/following{/other_user}","gists_url":"https://api.github.com/users/MaxLap/gists{/gist_id}","starred_url":"https://api.github.com/users/MaxLap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaxLap/subscriptions","organizations_url":"https://api.github.com/users/MaxLap/orgs","repos_url":"https://api.github.com/users/MaxLap/repos","events_url":"https://api.github.com/users/MaxLap/events{/privacy}","received_events_url":"https://api.github.com/users/MaxLap/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2024-10-17T01:19:09Z","rename":{"from":"Rails 8: db:prepare re-run seeds when added is added SolidCache","to":"Rails 8: db:prepare re-run seeds when SolidCache is added"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2418878580","html_url":"https://github.com/rails/rails/issues/53348#issuecomment-2418878580","issue_url":"https://api.github.com/repos/rails/rails/issues/53348","id":2418878580,"node_id":"IC_kwDNIULOkC0odA","user":{"login":"morgoth","id":10766,"node_id":"MDQ6VXNlcjEwNzY2","avatar_url":"https://avatars.githubusercontent.com/u/10766?v=4","gravatar_id":"","url":"https://api.github.com/users/morgoth","html_url":"https://github.com/morgoth","followers_url":"https://api.github.com/users/morgoth/followers","following_url":"https://api.github.com/users/morgoth/following{/other_user}","gists_url":"https://api.github.com/users/morgoth/gists{/gist_id}","starred_url":"https://api.github.com/users/morgoth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morgoth/subscriptions","organizations_url":"https://api.github.com/users/morgoth/orgs","repos_url":"https://api.github.com/users/morgoth/repos","events_url":"https://api.github.com/users/morgoth/events{/privacy}","received_events_url":"https://api.github.com/users/morgoth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T08:19:43Z","updated_at":"2024-10-17T08:19:43Z","body":"Yes, I had the same issue. When added a new database configuration and running `bin/rails db:prepare` the database was created and the seeds were run.\r\nI made my seed file idempotent to make it work as desired.\r\n\r\nSince it's a bit surprising maybe it is worth to change the behavior to run seeds only when all databases are initialized. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2418878580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"morgoth","id":10766,"node_id":"MDQ6VXNlcjEwNzY2","avatar_url":"https://avatars.githubusercontent.com/u/10766?v=4","gravatar_id":"","url":"https://api.github.com/users/morgoth","html_url":"https://github.com/morgoth","followers_url":"https://api.github.com/users/morgoth/followers","following_url":"https://api.github.com/users/morgoth/following{/other_user}","gists_url":"https://api.github.com/users/morgoth/gists{/gist_id}","starred_url":"https://api.github.com/users/morgoth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morgoth/subscriptions","organizations_url":"https://api.github.com/users/morgoth/orgs","repos_url":"https://api.github.com/users/morgoth/repos","events_url":"https://api.github.com/users/morgoth/events{/privacy}","received_events_url":"https://api.github.com/users/morgoth/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2419249088","html_url":"https://github.com/rails/rails/issues/53348#issuecomment-2419249088","issue_url":"https://api.github.com/repos/rails/rails/issues/53348","id":2419249088,"node_id":"IC_kwDNIULOkDLPwA","user":{"login":"MaxLap","id":894561,"node_id":"MDQ6VXNlcjg5NDU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/894561?v=4","gravatar_id":"","url":"https://api.github.com/users/MaxLap","html_url":"https://github.com/MaxLap","followers_url":"https://api.github.com/users/MaxLap/followers","following_url":"https://api.github.com/users/MaxLap/following{/other_user}","gists_url":"https://api.github.com/users/MaxLap/gists{/gist_id}","starred_url":"https://api.github.com/users/MaxLap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaxLap/subscriptions","organizations_url":"https://api.github.com/users/MaxLap/orgs","repos_url":"https://api.github.com/users/MaxLap/repos","events_url":"https://api.github.com/users/MaxLap/events{/privacy}","received_events_url":"https://api.github.com/users/MaxLap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T11:18:29Z","updated_at":"2024-10-17T11:18:29Z","body":"I would say that the primary database is all that matters. If it already exists, then don't run the seeds.\r\n\r\nIf someone decides to have a real second database for some custom table, I doubt even this person would expect the seed to run again. And if someone want's code to run at that first partial deploy, they probably expect to have to run it themselves via a rake task or a migration.\r\n\r\n\r\n\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2419249088/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MaxLap","id":894561,"node_id":"MDQ6VXNlcjg5NDU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/894561?v=4","gravatar_id":"","url":"https://api.github.com/users/MaxLap","html_url":"https://github.com/MaxLap","followers_url":"https://api.github.com/users/MaxLap/followers","following_url":"https://api.github.com/users/MaxLap/following{/other_user}","gists_url":"https://api.github.com/users/MaxLap/gists{/gist_id}","starred_url":"https://api.github.com/users/MaxLap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaxLap/subscriptions","organizations_url":"https://api.github.com/users/MaxLap/orgs","repos_url":"https://api.github.com/users/MaxLap/repos","events_url":"https://api.github.com/users/MaxLap/events{/privacy}","received_events_url":"https://api.github.com/users/MaxLap/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2419829623","html_url":"https://github.com/rails/rails/issues/53348#issuecomment-2419829623","issue_url":"https://api.github.com/repos/rails/rails/issues/53348","id":2419829623,"node_id":"IC_kwDNIULOkDurdw","user":{"login":"MaxLap","id":894561,"node_id":"MDQ6VXNlcjg5NDU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/894561?v=4","gravatar_id":"","url":"https://api.github.com/users/MaxLap","html_url":"https://github.com/MaxLap","followers_url":"https://api.github.com/users/MaxLap/followers","following_url":"https://api.github.com/users/MaxLap/following{/other_user}","gists_url":"https://api.github.com/users/MaxLap/gists{/gist_id}","starred_url":"https://api.github.com/users/MaxLap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaxLap/subscriptions","organizations_url":"https://api.github.com/users/MaxLap/orgs","repos_url":"https://api.github.com/users/MaxLap/repos","events_url":"https://api.github.com/users/MaxLap/events{/privacy}","received_events_url":"https://api.github.com/users/MaxLap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T15:14:08Z","updated_at":"2024-10-17T15:15:03Z","body":"I just realized this problem would also happen anytime you move one of the SolidCache, SolidQueue, SolidCable databases to a new database / server (unless to restore a backup, which I doubt you would for these).","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2419829623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MaxLap","id":894561,"node_id":"MDQ6VXNlcjg5NDU2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/894561?v=4","gravatar_id":"","url":"https://api.github.com/users/MaxLap","html_url":"https://github.com/MaxLap","followers_url":"https://api.github.com/users/MaxLap/followers","following_url":"https://api.github.com/users/MaxLap/following{/other_user}","gists_url":"https://api.github.com/users/MaxLap/gists{/gist_id}","starred_url":"https://api.github.com/users/MaxLap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaxLap/subscriptions","organizations_url":"https://api.github.com/users/MaxLap/orgs","repos_url":"https://api.github.com/users/MaxLap/repos","events_url":"https://api.github.com/users/MaxLap/events{/privacy}","received_events_url":"https://api.github.com/users/MaxLap/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2420054394","html_url":"https://github.com/rails/rails/issues/53348#issuecomment-2420054394","issue_url":"https://api.github.com/repos/rails/rails/issues/53348","id":2420054394,"node_id":"IC_kwDNIULOkD8Zeg","user":{"login":"flavorjones","id":8207,"node_id":"MDQ6VXNlcjgyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8207?v=4","gravatar_id":"","url":"https://api.github.com/users/flavorjones","html_url":"https://github.com/flavorjones","followers_url":"https://api.github.com/users/flavorjones/followers","following_url":"https://api.github.com/users/flavorjones/following{/other_user}","gists_url":"https://api.github.com/users/flavorjones/gists{/gist_id}","starred_url":"https://api.github.com/users/flavorjones/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flavorjones/subscriptions","organizations_url":"https://api.github.com/users/flavorjones/orgs","repos_url":"https://api.github.com/users/flavorjones/repos","events_url":"https://api.github.com/users/flavorjones/events{/privacy}","received_events_url":"https://api.github.com/users/flavorjones/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T17:00:07Z","updated_at":"2024-10-17T17:02:24Z","body":"I can imagine more formally differentiating between application databases and framework databases. Something like adding a method to `AR::DatabaseConfigurations::DatabaseConfig` and subclases (like `HashConfig`):\r\n\r\n```ruby\r\ndef seeded?\r\n  configuration_hash.fetch(:seeded, true)\r\nend\r\n```\r\n\r\nand then the \"framework\" tables for solid {cache,queue,cable} could have a database config like:\r\n\r\n```yaml\r\n  cache:\r\n    <<: *default\r\n    database: storage/production_cache.sqlite3\r\n    migrations_paths: db/cache_migrate\r\n    seeded: false\r\n```\r\n\r\nso the database task changes would be:\r\n\r\n```patch\r\ndiff --git a/activerecord/lib/active_record/tasks/database_tasks.rb b/activerecord/lib/active_record/tasks/database_tasks.rb\r\nindex 816547b3..c2c983c9 100644\r\n--- a/activerecord/lib/active_record/tasks/database_tasks.rb\r\n+++ b/activerecord/lib/active_record/tasks/database_tasks.rb\r\n@@ -180,7 +180,7 @@ def prepare_all\r\n         each_current_configuration(env) do |db_config|\r\n           database_initialized = initialize_database(db_config)\r\n \r\n-          seed = true if database_initialized\r\n+          seed = true if database_initialized && db_config.seeded?\r\n         end\r\n \r\n         each_current_environment(env) do |environment|\r\n```\r\n\r\nI'm curious if anyone from the core team has thought about differentiating like this between app database and framework databases already.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2420054394/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"flavorjones","id":8207,"node_id":"MDQ6VXNlcjgyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8207?v=4","gravatar_id":"","url":"https://api.github.com/users/flavorjones","html_url":"https://github.com/flavorjones","followers_url":"https://api.github.com/users/flavorjones/followers","following_url":"https://api.github.com/users/flavorjones/following{/other_user}","gists_url":"https://api.github.com/users/flavorjones/gists{/gist_id}","starred_url":"https://api.github.com/users/flavorjones/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flavorjones/subscriptions","organizations_url":"https://api.github.com/users/flavorjones/orgs","repos_url":"https://api.github.com/users/flavorjones/repos","events_url":"https://api.github.com/users/flavorjones/events{/privacy}","received_events_url":"https://api.github.com/users/flavorjones/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":14702879622,"node_id":"REFE_lADNIULOmpOf188AAAADbFwjhg","url":"https://api.github.com/repos/rails/rails/issues/events/14702879622","actor":{"login":"flavorjones","id":8207,"node_id":"MDQ6VXNlcjgyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8207?v=4","gravatar_id":"","url":"https://api.github.com/users/flavorjones","html_url":"https://github.com/flavorjones","followers_url":"https://api.github.com/users/flavorjones/followers","following_url":"https://api.github.com/users/flavorjones/following{/other_user}","gists_url":"https://api.github.com/users/flavorjones/gists{/gist_id}","starred_url":"https://api.github.com/users/flavorjones/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flavorjones/subscriptions","organizations_url":"https://api.github.com/users/flavorjones/orgs","repos_url":"https://api.github.com/users/flavorjones/repos","events_url":"https://api.github.com/users/flavorjones/events{/privacy}","received_events_url":"https://api.github.com/users/flavorjones/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"88b739b3a7706319345def12ee3f65e9fd2dc4a6","commit_url":"https://api.github.com/repos/flavorjones/rails/commits/88b739b3a7706319345def12ee3f65e9fd2dc4a6","created_at":"2024-10-17T17:20:32Z","performed_via_github_app":null},{"actor":{"login":"flavorjones","id":8207,"node_id":"MDQ6VXNlcjgyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8207?v=4","gravatar_id":"","url":"https://api.github.com/users/flavorjones","html_url":"https://github.com/flavorjones","followers_url":"https://api.github.com/users/flavorjones/followers","following_url":"https://api.github.com/users/flavorjones/following{/other_user}","gists_url":"https://api.github.com/users/flavorjones/gists{/gist_id}","starred_url":"https://api.github.com/users/flavorjones/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flavorjones/subscriptions","organizations_url":"https://api.github.com/users/flavorjones/orgs","repos_url":"https://api.github.com/users/flavorjones/repos","events_url":"https://api.github.com/users/flavorjones/events{/privacy}","received_events_url":"https://api.github.com/users/flavorjones/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T17:28:26Z","updated_at":"2024-10-17T17:28:26Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rails/rails/issues/53354","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/53354/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/53354/comments","events_url":"https://api.github.com/repos/rails/rails/issues/53354/events","html_url":"https://github.com/rails/rails/pull/53354","id":2595323475,"node_id":"PR_kwDNIULOfv-wgg","number":53354,"title":"Skip loading seeds for databases that are managed by Rails","user":{"login":"flavorjones","id":8207,"node_id":"MDQ6VXNlcjgyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8207?v=4","gravatar_id":"","url":"https://api.github.com/users/flavorjones","html_url":"https://github.com/flavorjones","followers_url":"https://api.github.com/users/flavorjones/followers","following_url":"https://api.github.com/users/flavorjones/following{/other_user}","gists_url":"https://api.github.com/users/flavorjones/gists{/gist_id}","starred_url":"https://api.github.com/users/flavorjones/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flavorjones/subscriptions","organizations_url":"https://api.github.com/users/flavorjones/orgs","repos_url":"https://api.github.com/users/flavorjones/repos","events_url":"https://api.github.com/users/flavorjones/events{/privacy}","received_events_url":"https://api.github.com/users/flavorjones/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":107191,"node_id":"MDU6TGFiZWwxMDcxOTE=","url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1","default":false,"description":null},{"id":107195,"node_id":"MDU6TGFiZWwxMDcxOTU=","url":"https://api.github.com/repos/rails/rails/labels/railties","name":"railties","color":"8BE06E","default":false,"description":null},{"id":128692,"node_id":"MDU6TGFiZWwxMjg2OTI=","url":"https://api.github.com/repos/rails/rails/labels/needs%20feedback","name":"needs feedback","color":"ededed","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2024-10-17T17:28:25Z","updated_at":"2024-11-29T15:33:20Z","closed_at":"2024-10-19T13:12:59Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":8514,"node_id":"MDEwOlJlcG9zaXRvcnk4NTE0","name":"rails","full_name":"rails/rails","private":false,"owner":{"login":"rails","id":4223,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjM=","avatar_url":"https://avatars.githubusercontent.com/u/4223?v=4","gravatar_id":"","url":"https://api.github.com/users/rails","html_url":"https://github.com/rails","followers_url":"https://api.github.com/users/rails/followers","following_url":"https://api.github.com/users/rails/following{/other_user}","gists_url":"https://api.github.com/users/rails/gists{/gist_id}","starred_url":"https://api.github.com/users/rails/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails/subscriptions","organizations_url":"https://api.github.com/users/rails/orgs","repos_url":"https://api.github.com/users/rails/repos","events_url":"https://api.github.com/users/rails/events{/privacy}","received_events_url":"https://api.github.com/users/rails/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rails/rails","description":"Ruby on Rails","fork":false,"url":"https://api.github.com/repos/rails/rails","forks_url":"https://api.github.com/repos/rails/rails/forks","keys_url":"https://api.github.com/repos/rails/rails/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rails/rails/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rails/rails/teams","hooks_url":"https://api.github.com/repos/rails/rails/hooks","issue_events_url":"https://api.github.com/repos/rails/rails/issues/events{/number}","events_url":"https://api.github.com/repos/rails/rails/events","assignees_url":"https://api.github.com/repos/rails/rails/assignees{/user}","branches_url":"https://api.github.com/repos/rails/rails/branches{/branch}","tags_url":"https://api.github.com/repos/rails/rails/tags","blobs_url":"https://api.github.com/repos/rails/rails/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rails/rails/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rails/rails/git/refs{/sha}","trees_url":"https://api.github.com/repos/rails/rails/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rails/rails/statuses/{sha}","languages_url":"https://api.github.com/repos/rails/rails/languages","stargazers_url":"https://api.github.com/repos/rails/rails/stargazers","contributors_url":"https://api.github.com/repos/rails/rails/contributors","subscribers_url":"https://api.github.com/repos/rails/rails/subscribers","subscription_url":"https://api.github.com/repos/rails/rails/subscription","commits_url":"https://api.github.com/repos/rails/rails/commits{/sha}","git_commits_url":"https://api.github.com/repos/rails/rails/git/commits{/sha}","comments_url":"https://api.github.com/repos/rails/rails/comments{/number}","issue_comment_url":"https://api.github.com/repos/rails/rails/issues/comments{/number}","contents_url":"https://api.github.com/repos/rails/rails/contents/{+path}","compare_url":"https://api.github.com/repos/rails/rails/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rails/rails/merges","archive_url":"https://api.github.com/repos/rails/rails/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rails/rails/downloads","issues_url":"https://api.github.com/repos/rails/rails/issues{/number}","pulls_url":"https://api.github.com/repos/rails/rails/pulls{/number}","milestones_url":"https://api.github.com/repos/rails/rails/milestones{/number}","notifications_url":"https://api.github.com/repos/rails/rails/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rails/rails/labels{/name}","releases_url":"https://api.github.com/repos/rails/rails/releases{/id}","deployments_url":"https://api.github.com/repos/rails/rails/deployments","created_at":"2008-04-11T02:19:47Z","updated_at":"2025-11-10T02:03:47Z","pushed_at":"2025-11-10T00:33:52Z","git_url":"git://github.com/rails/rails.git","ssh_url":"git@github.com:rails/rails.git","clone_url":"https://github.com/rails/rails.git","svn_url":"https://github.com/rails/rails","homepage":"https://rubyonrails.org","size":271619,"stargazers_count":57840,"watchers_count":57840,"language":"Ruby","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":22025,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1341,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["activejob","activerecord","framework","html","mvc","rails","ruby"],"visibility":"public","forks":22025,"open_issues":1341,"watchers":57840,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/53354","html_url":"https://github.com/rails/rails/pull/53354","diff_url":"https://github.com/rails/rails/pull/53354.diff","patch_url":"https://github.com/rails/rails/pull/53354.patch","merged_at":null},"body":"### Motivation / Background\r\n\r\nIssue #53348 describes an issue where, after adding Solid Cache to an application, running `db:prepare` in production re-loaded the seeds, potentially leading to data loss.\r\n\r\nThis PR proposes that any databases that are managed by Rails should behave differently in this case, and seeds should not be run when a Solid {Cache,Queue,Cable} database is added to the config and initialized.\r\n\r\n### Detail\r\n\r\nSpecifically, this PR adds a new method `DatabaseConfig#framework?` which defaults to `false`, but is set to `true` for the Solid-* databases in Rails's default production database config.\r\n\r\n\r\n### Additional information\r\n\r\nIf this proposal is merged, the docs for the Solid-* gems should be updated to inform users to add the `framework: true` value to their database config.\r\n\r\n### Checklist\r\n\r\nBefore submitting the PR make sure the following are checked:\r\n\r\n* [x] This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.\r\n* [x] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: `[Fix #issue-number]`\r\n* [x] Tests are added or updated if you fix a bug or add a feature.\r\n* [?] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.\r\n","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/53354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/rails/issues/53354/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2420107663","html_url":"https://github.com/rails/rails/issues/53348#issuecomment-2420107663","issue_url":"https://api.github.com/repos/rails/rails/issues/53348","id":2420107663,"node_id":"IC_kwDNIULOkD_pjw","user":{"login":"flavorjones","id":8207,"node_id":"MDQ6VXNlcjgyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8207?v=4","gravatar_id":"","url":"https://api.github.com/users/flavorjones","html_url":"https://github.com/flavorjones","followers_url":"https://api.github.com/users/flavorjones/followers","following_url":"https://api.github.com/users/flavorjones/following{/other_user}","gists_url":"https://api.github.com/users/flavorjones/gists{/gist_id}","starred_url":"https://api.github.com/users/flavorjones/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flavorjones/subscriptions","organizations_url":"https://api.github.com/users/flavorjones/orgs","repos_url":"https://api.github.com/users/flavorjones/repos","events_url":"https://api.github.com/users/flavorjones/events{/privacy}","received_events_url":"https://api.github.com/users/flavorjones/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T17:28:57Z","updated_at":"2024-10-20T15:03:04Z","body":"See proposal at https://github.com/rails/rails/pull/53354\r\n\r\nEdit: see second proposal at https://github.com/rails/rails/pull/53379","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2420107663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"flavorjones","id":8207,"node_id":"MDQ6VXNlcjgyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8207?v=4","gravatar_id":"","url":"https://api.github.com/users/flavorjones","html_url":"https://github.com/flavorjones","followers_url":"https://api.github.com/users/flavorjones/followers","following_url":"https://api.github.com/users/flavorjones/following{/other_user}","gists_url":"https://api.github.com/users/flavorjones/gists{/gist_id}","starred_url":"https://api.github.com/users/flavorjones/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flavorjones/subscriptions","organizations_url":"https://api.github.com/users/flavorjones/orgs","repos_url":"https://api.github.com/users/flavorjones/repos","events_url":"https://api.github.com/users/flavorjones/events{/privacy}","received_events_url":"https://api.github.com/users/flavorjones/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":14734554869,"node_id":"REFE_lADNIULOmpOf188AAAADbj929Q","url":"https://api.github.com/repos/rails/rails/issues/events/14734554869","actor":{"login":"flavorjones","id":8207,"node_id":"MDQ6VXNlcjgyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8207?v=4","gravatar_id":"","url":"https://api.github.com/users/flavorjones","html_url":"https://github.com/flavorjones","followers_url":"https://api.github.com/users/flavorjones/followers","following_url":"https://api.github.com/users/flavorjones/following{/other_user}","gists_url":"https://api.github.com/users/flavorjones/gists{/gist_id}","starred_url":"https://api.github.com/users/flavorjones/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flavorjones/subscriptions","organizations_url":"https://api.github.com/users/flavorjones/orgs","repos_url":"https://api.github.com/users/flavorjones/repos","events_url":"https://api.github.com/users/flavorjones/events{/privacy}","received_events_url":"https://api.github.com/users/flavorjones/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"7f4437354d3a29630513f39001463301f0718acb","commit_url":"https://api.github.com/repos/flavorjones/rails/commits/7f4437354d3a29630513f39001463301f0718acb","created_at":"2024-10-19T14:06:50Z","performed_via_github_app":null},{"actor":{"login":"flavorjones","id":8207,"node_id":"MDQ6VXNlcjgyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8207?v=4","gravatar_id":"","url":"https://api.github.com/users/flavorjones","html_url":"https://github.com/flavorjones","followers_url":"https://api.github.com/users/flavorjones/followers","following_url":"https://api.github.com/users/flavorjones/following{/other_user}","gists_url":"https://api.github.com/users/flavorjones/gists{/gist_id}","starred_url":"https://api.github.com/users/flavorjones/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flavorjones/subscriptions","organizations_url":"https://api.github.com/users/flavorjones/orgs","repos_url":"https://api.github.com/users/flavorjones/repos","events_url":"https://api.github.com/users/flavorjones/events{/privacy}","received_events_url":"https://api.github.com/users/flavorjones/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-19T14:09:02Z","updated_at":"2024-10-19T14:09:02Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rails/rails/issues/53379","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/53379/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/53379/comments","events_url":"https://api.github.com/repos/rails/rails/issues/53379/events","html_url":"https://github.com/rails/rails/pull/53379","id":2599224229,"node_id":"PR_kwDNIULOfy2Y_A","number":53379,"title":"`db:prepare` no longer loads seed when non-primary db is created","user":{"login":"flavorjones","id":8207,"node_id":"MDQ6VXNlcjgyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8207?v=4","gravatar_id":"","url":"https://api.github.com/users/flavorjones","html_url":"https://github.com/flavorjones","followers_url":"https://api.github.com/users/flavorjones/followers","following_url":"https://api.github.com/users/flavorjones/following{/other_user}","gists_url":"https://api.github.com/users/flavorjones/gists{/gist_id}","starred_url":"https://api.github.com/users/flavorjones/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flavorjones/subscriptions","organizations_url":"https://api.github.com/users/flavorjones/orgs","repos_url":"https://api.github.com/users/flavorjones/repos","events_url":"https://api.github.com/users/flavorjones/events{/privacy}","received_events_url":"https://api.github.com/users/flavorjones/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":107191,"node_id":"MDU6TGFiZWwxMDcxOTE=","url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1","default":false,"description":null},{"id":150377,"node_id":"MDU6TGFiZWwxNTAzNzc=","url":"https://api.github.com/repos/rails/rails/labels/docs","name":"docs","color":"02d7e1","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rails/rails/milestones/87","html_url":"https://github.com/rails/rails/milestone/87","labels_url":"https://api.github.com/repos/rails/rails/milestones/87/labels","id":10350173,"node_id":"MI_kwDNIULOAJ3uXQ","number":87,"title":"8.0.0","description":null,"creator":{"login":"dhh","id":2741,"node_id":"MDQ6VXNlcjI3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/2741?v=4","gravatar_id":"","url":"https://api.github.com/users/dhh","html_url":"https://github.com/dhh","followers_url":"https://api.github.com/users/dhh/followers","following_url":"https://api.github.com/users/dhh/following{/other_user}","gists_url":"https://api.github.com/users/dhh/gists{/gist_id}","starred_url":"https://api.github.com/users/dhh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhh/subscriptions","organizations_url":"https://api.github.com/users/dhh/orgs","repos_url":"https://api.github.com/users/dhh/repos","events_url":"https://api.github.com/users/dhh/events{/privacy}","received_events_url":"https://api.github.com/users/dhh/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":40,"state":"closed","created_at":"2023-12-26T22:00:17Z","updated_at":"2024-11-11T20:53:00Z","due_on":null,"closed_at":"2024-11-11T20:53:00Z"},"comments":7,"created_at":"2024-10-19T14:09:01Z","updated_at":"2024-10-27T17:17:32Z","closed_at":"2024-10-25T19:16:09Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":8514,"node_id":"MDEwOlJlcG9zaXRvcnk4NTE0","name":"rails","full_name":"rails/rails","private":false,"owner":{"login":"rails","id":4223,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjM=","avatar_url":"https://avatars.githubusercontent.com/u/4223?v=4","gravatar_id":"","url":"https://api.github.com/users/rails","html_url":"https://github.com/rails","followers_url":"https://api.github.com/users/rails/followers","following_url":"https://api.github.com/users/rails/following{/other_user}","gists_url":"https://api.github.com/users/rails/gists{/gist_id}","starred_url":"https://api.github.com/users/rails/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails/subscriptions","organizations_url":"https://api.github.com/users/rails/orgs","repos_url":"https://api.github.com/users/rails/repos","events_url":"https://api.github.com/users/rails/events{/privacy}","received_events_url":"https://api.github.com/users/rails/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rails/rails","description":"Ruby on Rails","fork":false,"url":"https://api.github.com/repos/rails/rails","forks_url":"https://api.github.com/repos/rails/rails/forks","keys_url":"https://api.github.com/repos/rails/rails/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rails/rails/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rails/rails/teams","hooks_url":"https://api.github.com/repos/rails/rails/hooks","issue_events_url":"https://api.github.com/repos/rails/rails/issues/events{/number}","events_url":"https://api.github.com/repos/rails/rails/events","assignees_url":"https://api.github.com/repos/rails/rails/assignees{/user}","branches_url":"https://api.github.com/repos/rails/rails/branches{/branch}","tags_url":"https://api.github.com/repos/rails/rails/tags","blobs_url":"https://api.github.com/repos/rails/rails/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rails/rails/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rails/rails/git/refs{/sha}","trees_url":"https://api.github.com/repos/rails/rails/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rails/rails/statuses/{sha}","languages_url":"https://api.github.com/repos/rails/rails/languages","stargazers_url":"https://api.github.com/repos/rails/rails/stargazers","contributors_url":"https://api.github.com/repos/rails/rails/contributors","subscribers_url":"https://api.github.com/repos/rails/rails/subscribers","subscription_url":"https://api.github.com/repos/rails/rails/subscription","commits_url":"https://api.github.com/repos/rails/rails/commits{/sha}","git_commits_url":"https://api.github.com/repos/rails/rails/git/commits{/sha}","comments_url":"https://api.github.com/repos/rails/rails/comments{/number}","issue_comment_url":"https://api.github.com/repos/rails/rails/issues/comments{/number}","contents_url":"https://api.github.com/repos/rails/rails/contents/{+path}","compare_url":"https://api.github.com/repos/rails/rails/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rails/rails/merges","archive_url":"https://api.github.com/repos/rails/rails/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rails/rails/downloads","issues_url":"https://api.github.com/repos/rails/rails/issues{/number}","pulls_url":"https://api.github.com/repos/rails/rails/pulls{/number}","milestones_url":"https://api.github.com/repos/rails/rails/milestones{/number}","notifications_url":"https://api.github.com/repos/rails/rails/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rails/rails/labels{/name}","releases_url":"https://api.github.com/repos/rails/rails/releases{/id}","deployments_url":"https://api.github.com/repos/rails/rails/deployments","created_at":"2008-04-11T02:19:47Z","updated_at":"2025-11-10T02:03:47Z","pushed_at":"2025-11-10T00:33:52Z","git_url":"git://github.com/rails/rails.git","ssh_url":"git@github.com:rails/rails.git","clone_url":"https://github.com/rails/rails.git","svn_url":"https://github.com/rails/rails","homepage":"https://rubyonrails.org","size":271619,"stargazers_count":57840,"watchers_count":57840,"language":"Ruby","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":22025,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1341,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["activejob","activerecord","framework","html","mvc","rails","ruby"],"visibility":"public","forks":22025,"open_issues":1341,"watchers":57840,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/53379","html_url":"https://github.com/rails/rails/pull/53379","diff_url":"https://github.com/rails/rails/pull/53379.diff","patch_url":"https://github.com/rails/rails/pull/53379.patch","merged_at":"2024-10-25T19:16:09Z"},"body":"### Motivation / Background\r\n\r\nIssue #53348 describes an issue where, after adding Solid Cache to an application, running db:prepare in production re-loaded the seeds, potentially leading to data loss.\r\n\r\nCloses #53348\r\n\r\n### Detail\r\n\r\nThis PR introduces a new database config property `seeds` to control whether seeds are loaded during `db:prepare` which defaults to `true` for primary database configs and `false` otherwise.\r\n\r\nPreviously, the `db:prepare` task would load seeds whenever a new database is created, leading to potential loss of data if a database is added to an existing environment.\r\n\r\nAlso, update the Active Record Migrations guide to more accurately describe what the `db:prepare` task does, correcting some misinformation introduced in #49480 along the way.\r\n\r\n\r\n### Additional information\r\n\r\nSee previous rejected proposal at #53354\r\n\r\n\r\n### Checklist\r\n\r\nBefore submitting the PR make sure the following are checked:\r\n\r\n* [x] This Pull Request is related to one change. Unrelated changes should be opened in separate PRs.\r\n* [x] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: `[Fix #issue-number]`\r\n* [x] Tests are added or updated if you fix a bug or add a feature.\r\n* [x] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.\r\n","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/53379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/rails/issues/53379/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":14734571039,"node_id":"REFE_lADNIULOmpOf188AAAADbj-2Hw","url":"https://api.github.com/repos/rails/rails/issues/events/14734571039","actor":{"login":"flavorjones","id":8207,"node_id":"MDQ6VXNlcjgyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8207?v=4","gravatar_id":"","url":"https://api.github.com/users/flavorjones","html_url":"https://github.com/flavorjones","followers_url":"https://api.github.com/users/flavorjones/followers","following_url":"https://api.github.com/users/flavorjones/following{/other_user}","gists_url":"https://api.github.com/users/flavorjones/gists{/gist_id}","starred_url":"https://api.github.com/users/flavorjones/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flavorjones/subscriptions","organizations_url":"https://api.github.com/users/flavorjones/orgs","repos_url":"https://api.github.com/users/flavorjones/repos","events_url":"https://api.github.com/users/flavorjones/events{/privacy}","received_events_url":"https://api.github.com/users/flavorjones/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"5b9e7420953feed1d8a9ed9dd8e5ea2f025c9162","commit_url":"https://api.github.com/repos/flavorjones/rails/commits/5b9e7420953feed1d8a9ed9dd8e5ea2f025c9162","created_at":"2024-10-19T14:12:06Z","performed_via_github_app":null},{"id":14734573039,"node_id":"REFE_lADNIULOmpOf188AAAADbj-97w","url":"https://api.github.com/repos/rails/rails/issues/events/14734573039","actor":{"login":"flavorjones","id":8207,"node_id":"MDQ6VXNlcjgyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8207?v=4","gravatar_id":"","url":"https://api.github.com/users/flavorjones","html_url":"https://github.com/flavorjones","followers_url":"https://api.github.com/users/flavorjones/followers","following_url":"https://api.github.com/users/flavorjones/following{/other_user}","gists_url":"https://api.github.com/users/flavorjones/gists{/gist_id}","starred_url":"https://api.github.com/users/flavorjones/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flavorjones/subscriptions","organizations_url":"https://api.github.com/users/flavorjones/orgs","repos_url":"https://api.github.com/users/flavorjones/repos","events_url":"https://api.github.com/users/flavorjones/events{/privacy}","received_events_url":"https://api.github.com/users/flavorjones/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8f08520a120aebb004be8fc1e1e7cd9a82f488d5","commit_url":"https://api.github.com/repos/flavorjones/rails/commits/8f08520a120aebb004be8fc1e1e7cd9a82f488d5","created_at":"2024-10-19T14:13:01Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2425032898","html_url":"https://github.com/rails/rails/issues/53348#issuecomment-2425032898","issue_url":"https://api.github.com/repos/rails/rails/issues/53348","id":2425032898,"node_id":"IC_kwDNIULOkIsQwg","user":{"login":"flavorjones","id":8207,"node_id":"MDQ6VXNlcjgyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8207?v=4","gravatar_id":"","url":"https://api.github.com/users/flavorjones","html_url":"https://github.com/flavorjones","followers_url":"https://api.github.com/users/flavorjones/followers","following_url":"https://api.github.com/users/flavorjones/following{/other_user}","gists_url":"https://api.github.com/users/flavorjones/gists{/gist_id}","starred_url":"https://api.github.com/users/flavorjones/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flavorjones/subscriptions","organizations_url":"https://api.github.com/users/flavorjones/orgs","repos_url":"https://api.github.com/users/flavorjones/repos","events_url":"https://api.github.com/users/flavorjones/events{/privacy}","received_events_url":"https://api.github.com/users/flavorjones/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-20T15:03:23Z","updated_at":"2024-10-20T15:03:23Z","body":"@zzak pointed out that https://github.com/rails/rails/issues/53059 has a similar root cause, which I'll try framing as \"Rails thinks this database is managed by the app, but it's not.\"\r\n\r\nI'm going to retry a variation on #53354 that addresses both issues.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2425032898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"flavorjones","id":8207,"node_id":"MDQ6VXNlcjgyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8207?v=4","gravatar_id":"","url":"https://api.github.com/users/flavorjones","html_url":"https://github.com/flavorjones","followers_url":"https://api.github.com/users/flavorjones/followers","following_url":"https://api.github.com/users/flavorjones/following{/other_user}","gists_url":"https://api.github.com/users/flavorjones/gists{/gist_id}","starred_url":"https://api.github.com/users/flavorjones/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flavorjones/subscriptions","organizations_url":"https://api.github.com/users/flavorjones/orgs","repos_url":"https://api.github.com/users/flavorjones/repos","events_url":"https://api.github.com/users/flavorjones/events{/privacy}","received_events_url":"https://api.github.com/users/flavorjones/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":14752033749,"node_id":"MEE_lADNIULOmpOf188AAAADb0or1Q","url":"https://api.github.com/repos/rails/rails/issues/events/14752033749","actor":{"login":"zzak","id":277819,"node_id":"MDQ6VXNlcjI3NzgxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/277819?v=4","gravatar_id":"","url":"https://api.github.com/users/zzak","html_url":"https://github.com/zzak","followers_url":"https://api.github.com/users/zzak/followers","following_url":"https://api.github.com/users/zzak/following{/other_user}","gists_url":"https://api.github.com/users/zzak/gists{/gist_id}","starred_url":"https://api.github.com/users/zzak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zzak/subscriptions","organizations_url":"https://api.github.com/users/zzak/orgs","repos_url":"https://api.github.com/users/zzak/repos","events_url":"https://api.github.com/users/zzak/events{/privacy}","received_events_url":"https://api.github.com/users/zzak/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-10-20T15:03:24Z","performed_via_github_app":null},{"id":14752033762,"node_id":"SE_lADNIULOmpOf188AAAADb0or4g","url":"https://api.github.com/repos/rails/rails/issues/events/14752033762","actor":{"login":"zzak","id":277819,"node_id":"MDQ6VXNlcjI3NzgxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/277819?v=4","gravatar_id":"","url":"https://api.github.com/users/zzak","html_url":"https://github.com/zzak","followers_url":"https://api.github.com/users/zzak/followers","following_url":"https://api.github.com/users/zzak/following{/other_user}","gists_url":"https://api.github.com/users/zzak/gists{/gist_id}","starred_url":"https://api.github.com/users/zzak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zzak/subscriptions","organizations_url":"https://api.github.com/users/zzak/orgs","repos_url":"https://api.github.com/users/zzak/repos","events_url":"https://api.github.com/users/zzak/events{/privacy}","received_events_url":"https://api.github.com/users/zzak/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-10-20T15:03:24Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2425041147","html_url":"https://github.com/rails/rails/issues/53348#issuecomment-2425041147","issue_url":"https://api.github.com/repos/rails/rails/issues/53348","id":2425041147,"node_id":"IC_kwDNIULOkIsw-w","user":{"login":"flavorjones","id":8207,"node_id":"MDQ6VXNlcjgyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8207?v=4","gravatar_id":"","url":"https://api.github.com/users/flavorjones","html_url":"https://github.com/flavorjones","followers_url":"https://api.github.com/users/flavorjones/followers","following_url":"https://api.github.com/users/flavorjones/following{/other_user}","gists_url":"https://api.github.com/users/flavorjones/gists{/gist_id}","starred_url":"https://api.github.com/users/flavorjones/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flavorjones/subscriptions","organizations_url":"https://api.github.com/users/flavorjones/orgs","repos_url":"https://api.github.com/users/flavorjones/repos","events_url":"https://api.github.com/users/flavorjones/events{/privacy}","received_events_url":"https://api.github.com/users/flavorjones/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-20T15:19:34Z","updated_at":"2024-10-20T15:19:34Z","body":"Actually, I think #53509 is similar but not the same, and has to do with management of the schema as opposed to management of data content. In this issue, Solid Cache still uses Rails to manage the schema (just doesn't use/need seeds). In #53509 management of both is external to Rails.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2425041147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"flavorjones","id":8207,"node_id":"MDQ6VXNlcjgyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8207?v=4","gravatar_id":"","url":"https://api.github.com/users/flavorjones","html_url":"https://github.com/flavorjones","followers_url":"https://api.github.com/users/flavorjones/followers","following_url":"https://api.github.com/users/flavorjones/following{/other_user}","gists_url":"https://api.github.com/users/flavorjones/gists{/gist_id}","starred_url":"https://api.github.com/users/flavorjones/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flavorjones/subscriptions","organizations_url":"https://api.github.com/users/flavorjones/orgs","repos_url":"https://api.github.com/users/flavorjones/repos","events_url":"https://api.github.com/users/flavorjones/events{/privacy}","received_events_url":"https://api.github.com/users/flavorjones/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":14851808073,"node_id":"REFE_lADNIULOmpOf188AAAADdTybSQ","url":"https://api.github.com/repos/rails/rails/issues/events/14851808073","actor":{"login":"flavorjones","id":8207,"node_id":"MDQ6VXNlcjgyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8207?v=4","gravatar_id":"","url":"https://api.github.com/users/flavorjones","html_url":"https://github.com/flavorjones","followers_url":"https://api.github.com/users/flavorjones/followers","following_url":"https://api.github.com/users/flavorjones/following{/other_user}","gists_url":"https://api.github.com/users/flavorjones/gists{/gist_id}","starred_url":"https://api.github.com/users/flavorjones/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flavorjones/subscriptions","organizations_url":"https://api.github.com/users/flavorjones/orgs","repos_url":"https://api.github.com/users/flavorjones/repos","events_url":"https://api.github.com/users/flavorjones/events{/privacy}","received_events_url":"https://api.github.com/users/flavorjones/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d6451ef0b799d379c8513aa25b91929737901748","commit_url":"https://api.github.com/repos/flavorjones/rails/commits/d6451ef0b799d379c8513aa25b91929737901748","created_at":"2024-10-24T13:39:03Z","performed_via_github_app":null},{"id":14881791079,"node_id":"REFE_lADNIULOmpOf188AAAADdwYcZw","url":"https://api.github.com/repos/rails/rails/issues/events/14881791079","actor":{"login":"rafaelfranca","id":47848,"node_id":"MDQ6VXNlcjQ3ODQ4","avatar_url":"https://avatars.githubusercontent.com/u/47848?v=4","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"01cc8056e439f82039e330fb4f31d682abfda41c","commit_url":"https://api.github.com/repos/flavorjones/rails/commits/01cc8056e439f82039e330fb4f31d682abfda41c","created_at":"2024-10-25T19:03:00Z","performed_via_github_app":null},{"id":14881912407,"node_id":"CE_lADNIULOmpOf188AAAADdwf2Vw","url":"https://api.github.com/repos/rails/rails/issues/events/14881912407","actor":{"login":"rafaelfranca","id":47848,"node_id":"MDQ6VXNlcjQ3ODQ4","avatar_url":"https://avatars.githubusercontent.com/u/47848?v=4","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2024-10-25T19:16:10Z","state_reason":null,"performed_via_github_app":null},{"id":14881912421,"node_id":"CE_lADNIULOmpOf188AAAADdwf2ZQ","url":"https://api.github.com/repos/rails/rails/issues/events/14881912421","actor":{"login":"rafaelfranca","id":47848,"node_id":"MDQ6VXNlcjQ3ODQ4","avatar_url":"https://avatars.githubusercontent.com/u/47848?v=4","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"01cc8056e439f82039e330fb4f31d682abfda41c","commit_url":"https://api.github.com/repos/rails/rails/commits/01cc8056e439f82039e330fb4f31d682abfda41c","created_at":"2024-10-25T19:16:10Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"davidrossdegroot","id":817050,"node_id":"MDQ6VXNlcjgxNzA1MA==","avatar_url":"https://avatars.githubusercontent.com/u/817050?v=4","gravatar_id":"","url":"https://api.github.com/users/davidrossdegroot","html_url":"https://github.com/davidrossdegroot","followers_url":"https://api.github.com/users/davidrossdegroot/followers","following_url":"https://api.github.com/users/davidrossdegroot/following{/other_user}","gists_url":"https://api.github.com/users/davidrossdegroot/gists{/gist_id}","starred_url":"https://api.github.com/users/davidrossdegroot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidrossdegroot/subscriptions","organizations_url":"https://api.github.com/users/davidrossdegroot/orgs","repos_url":"https://api.github.com/users/davidrossdegroot/repos","events_url":"https://api.github.com/users/davidrossdegroot/events{/privacy}","received_events_url":"https://api.github.com/users/davidrossdegroot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-16T13:49:40Z","updated_at":"2025-01-16T13:49:40Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rails/solid_cache/issues/248","repository_url":"https://api.github.com/repos/rails/solid_cache","labels_url":"https://api.github.com/repos/rails/solid_cache/issues/248/labels{/name}","comments_url":"https://api.github.com/repos/rails/solid_cache/issues/248/comments","events_url":"https://api.github.com/repos/rails/solid_cache/issues/248/events","html_url":"https://github.com/rails/solid_cache/issues/248","id":2787712427,"node_id":"I_kwDOIc-H7M6mKR2r","number":248,"title":"Confusion regarding auto-generated cache_schema.rb","user":{"login":"davidrossdegroot","id":817050,"node_id":"MDQ6VXNlcjgxNzA1MA==","avatar_url":"https://avatars.githubusercontent.com/u/817050?v=4","gravatar_id":"","url":"https://api.github.com/users/davidrossdegroot","html_url":"https://github.com/davidrossdegroot","followers_url":"https://api.github.com/users/davidrossdegroot/followers","following_url":"https://api.github.com/users/davidrossdegroot/following{/other_user}","gists_url":"https://api.github.com/users/davidrossdegroot/gists{/gist_id}","starred_url":"https://api.github.com/users/davidrossdegroot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidrossdegroot/subscriptions","organizations_url":"https://api.github.com/users/davidrossdegroot/orgs","repos_url":"https://api.github.com/users/davidrossdegroot/repos","events_url":"https://api.github.com/users/davidrossdegroot/events{/privacy}","received_events_url":"https://api.github.com/users/davidrossdegroot/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2025-01-14T16:38:15Z","updated_at":"2025-11-06T13:49:43Z","closed_at":"2025-11-06T13:49:43Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":567248876,"node_id":"R_kgDOIc-H7A","name":"solid_cache","full_name":"rails/solid_cache","private":false,"owner":{"login":"rails","id":4223,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjM=","avatar_url":"https://avatars.githubusercontent.com/u/4223?v=4","gravatar_id":"","url":"https://api.github.com/users/rails","html_url":"https://github.com/rails","followers_url":"https://api.github.com/users/rails/followers","following_url":"https://api.github.com/users/rails/following{/other_user}","gists_url":"https://api.github.com/users/rails/gists{/gist_id}","starred_url":"https://api.github.com/users/rails/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails/subscriptions","organizations_url":"https://api.github.com/users/rails/orgs","repos_url":"https://api.github.com/users/rails/repos","events_url":"https://api.github.com/users/rails/events{/privacy}","received_events_url":"https://api.github.com/users/rails/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rails/solid_cache","description":"A database-backed ActiveSupport::Cache::Store","fork":false,"url":"https://api.github.com/repos/rails/solid_cache","forks_url":"https://api.github.com/repos/rails/solid_cache/forks","keys_url":"https://api.github.com/repos/rails/solid_cache/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rails/solid_cache/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rails/solid_cache/teams","hooks_url":"https://api.github.com/repos/rails/solid_cache/hooks","issue_events_url":"https://api.github.com/repos/rails/solid_cache/issues/events{/number}","events_url":"https://api.github.com/repos/rails/solid_cache/events","assignees_url":"https://api.github.com/repos/rails/solid_cache/assignees{/user}","branches_url":"https://api.github.com/repos/rails/solid_cache/branches{/branch}","tags_url":"https://api.github.com/repos/rails/solid_cache/tags","blobs_url":"https://api.github.com/repos/rails/solid_cache/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rails/solid_cache/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rails/solid_cache/git/refs{/sha}","trees_url":"https://api.github.com/repos/rails/solid_cache/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rails/solid_cache/statuses/{sha}","languages_url":"https://api.github.com/repos/rails/solid_cache/languages","stargazers_url":"https://api.github.com/repos/rails/solid_cache/stargazers","contributors_url":"https://api.github.com/repos/rails/solid_cache/contributors","subscribers_url":"https://api.github.com/repos/rails/solid_cache/subscribers","subscription_url":"https://api.github.com/repos/rails/solid_cache/subscription","commits_url":"https://api.github.com/repos/rails/solid_cache/commits{/sha}","git_commits_url":"https://api.github.com/repos/rails/solid_cache/git/commits{/sha}","comments_url":"https://api.github.com/repos/rails/solid_cache/comments{/number}","issue_comment_url":"https://api.github.com/repos/rails/solid_cache/issues/comments{/number}","contents_url":"https://api.github.com/repos/rails/solid_cache/contents/{+path}","compare_url":"https://api.github.com/repos/rails/solid_cache/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rails/solid_cache/merges","archive_url":"https://api.github.com/repos/rails/solid_cache/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rails/solid_cache/downloads","issues_url":"https://api.github.com/repos/rails/solid_cache/issues{/number}","pulls_url":"https://api.github.com/repos/rails/solid_cache/pulls{/number}","milestones_url":"https://api.github.com/repos/rails/solid_cache/milestones{/number}","notifications_url":"https://api.github.com/repos/rails/solid_cache/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rails/solid_cache/labels{/name}","releases_url":"https://api.github.com/repos/rails/solid_cache/releases{/id}","deployments_url":"https://api.github.com/repos/rails/solid_cache/deployments","created_at":"2022-11-17T11:49:24Z","updated_at":"2025-11-08T19:56:11Z","pushed_at":"2025-11-08T19:56:08Z","git_url":"git://github.com/rails/solid_cache.git","ssh_url":"git@github.com:rails/solid_cache.git","clone_url":"https://github.com/rails/solid_cache.git","svn_url":"https://github.com/rails/solid_cache","homepage":"","size":583,"stargazers_count":979,"watchers_count":979,"language":"Ruby","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":76,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":5,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":76,"open_issues":5,"watchers":979,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"If your application is adding solid_cache and you have `config.active_record.schema_format = :sql` set, should the cache_schema.rb file be generated?\n\nI was under the impression that you would not since:\n1) the application's database does not have a corresonding schema.rb\n2) the database.yml files specify a `migrations_path` which is where you would add the migration to create the `solid_cache_entries` table, not via the cache_schema.rb file.\n\n### `db:seed` Gets run twice\n\nThe reason I bring this up is that if for some reason a developer follows these steps, the `db:seed` task will be run a 2nd time on the application's database. Here are the steps to reproduce:\n\n1) `rails new solid-cache-app --database=postgresql`\n2) `rails g model Dog`. Add a `name` attribute to the dog and add this to the seeds.rb file `Dog.create(name: \"Fido\")`\n3) Set `config.active_record.schema_format = :sql` in application.rb\n4) Run `rails db:prepare`\n### add cache database steps\n5) Update the database.yml file to include the cache database\n```yaml\ndevelopment:\n  primary: &primary_development\n    <<: *default\n    database: multiple_db_app_development\n  cache:\n    <<: *primary_development\n    database: multiple_db_app_development_cache\n    migrations_paths: db/cache_migrate\n```\n6) Create a migration for the solid_cache_entries. \n```ruby\nclass AddCacheDatabaseEntries < ActiveRecord::Migration[8.0]\n  def change\n    create_table \"solid_cache_entries\" do |t|\n      t.binary \"key\", limit: 1024, null: false\n      t.binary \"value\", limit: 536_870_912, null: false\n      t.datetime \"created_at\", null: false\n      t.integer \"key_hash\", limit: 8, null: false\n      t.integer \"byte_size\", limit: 4, null: false\n      t.index [\"byte_size\"], name: \"index_solid_cache_entries_on_byte_size\"\n      t.index %w[key_hash byte_size], name: \"index_solid_cache_entries_on_key_hash_and_byte_size\"\n      t.index [\"key_hash\"], name: \"index_solid_cache_entries_on_key_hash\", unique: true\n    end\n  end\nend\n```\n7) Remove the `cache_schema.rb` file because of the reasons mentioned above.\n8) Run `rails db:prepare`.\n\nExpect the seed file to not have run on the primary database\n\nActual results: Seed file was run on primary database and you now have two dogs named Fido.\n\n\n### Environment\nRails version: 8.0.1\nsolid_cache version: 1.0.6\nRuby version: 3.4.1","reactions":{"url":"https://api.github.com/repos/rails/solid_cache/issues/248/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/solid_cache/issues/248/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]