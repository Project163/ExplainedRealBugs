[{"url":"https://api.github.com/repos/rails/rails/issues/comments/1592896634","html_url":"https://github.com/rails/rails/issues/48483#issuecomment-1592896634","issue_url":"https://api.github.com/repos/rails/rails/issues/48483","id":1592896634,"node_id":"IC_kwDNIULOXvGseg","user":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-15T11:51:44Z","updated_at":"2023-06-15T11:51:44Z","body":"I'm wondering if it is related to OpenSSL 3 support:\r\n\r\n- Rails CI uses `ruby:3.0`, `ruby:3.1`, `ruby:3.2` and `rubylang/ruby:master-nightly-focal`. The released versions of Ruby docker images are managed at https://hub.docker.com/_/ruby and Ruby 3.3.0dev Docker image is managed at https://hub.docker.com/r/rubylang/ruby\r\n\r\n- Recently, https://github.com/docker-library/ruby/pull/415 updated so that `ruby:3.1`, `ruby:3.2` are based on Debian \"bookworm\". Still `ruby:3.0` is based on Debian \"buster\".\r\n\r\n- Here are the openssl version bundled with Debian 12 \"bookworm\" and Debian 10 \"buster\".\r\n\r\nhttps://packages.debian.org/source/bookworm/openssl\r\n> Source Package: openssl (3.0.9-1)\r\n \r\n- https://packages.debian.org/source/bullseye/openssl\r\n> Source Package: openssl (1.1.1n-0+deb10u5) [security]\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1592896634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9539501601,"node_id":"LE_lADNIULOaNK5wc8AAAACOJk-IQ","url":"https://api.github.com/repos/rails/rails/issues/events/9539501601","actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-06-15T11:57:59Z","label":{"name":"activesupport","color":"FC9300"},"performed_via_github_app":null},{"id":9539502510,"node_id":"LE_lADNIULOaNK5wc8AAAACOJlBrg","url":"https://api.github.com/repos/rails/rails/issues/events/9539502510","actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-06-15T11:58:05Z","label":{"name":"ci issues","color":"aaafff"},"performed_via_github_app":null},{"id":9539684067,"node_id":"REFE_lADNIULOaNK5wc8AAAACOJwG4w","url":"https://api.github.com/repos/rails/rails/issues/events/9539684067","actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"be78b6ed6dc144f66ade40f9a48a16bf52f1b22d","commit_url":"https://api.github.com/repos/yahonda/buildkite-config/commits/be78b6ed6dc144f66ade40f9a48a16bf52f1b22d","created_at":"2023-06-15T12:14:51Z","performed_via_github_app":null},{"actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-15T12:15:15Z","updated_at":"2023-06-15T12:15:15Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rails/buildkite-config/issues/47","repository_url":"https://api.github.com/repos/rails/buildkite-config","labels_url":"https://api.github.com/repos/rails/buildkite-config/issues/47/labels{/name}","comments_url":"https://api.github.com/repos/rails/buildkite-config/issues/47/comments","events_url":"https://api.github.com/repos/rails/buildkite-config/issues/47/events","html_url":"https://github.com/rails/buildkite-config/pull/47","id":1758699645,"node_id":"PR_kwDOChZjns5TFwCP","number":47,"title":"Use Debian 11 \"bullseye\" based Ruby Docker image","user":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-06-15T12:15:15Z","updated_at":"2023-06-15T15:36:07Z","closed_at":"2023-06-15T12:52:44Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":169239454,"node_id":"MDEwOlJlcG9zaXRvcnkxNjkyMzk0NTQ=","name":"buildkite-config","full_name":"rails/buildkite-config","private":false,"owner":{"login":"rails","id":4223,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjM=","avatar_url":"https://avatars.githubusercontent.com/u/4223?v=4","gravatar_id":"","url":"https://api.github.com/users/rails","html_url":"https://github.com/rails","followers_url":"https://api.github.com/users/rails/followers","following_url":"https://api.github.com/users/rails/following{/other_user}","gists_url":"https://api.github.com/users/rails/gists{/gist_id}","starred_url":"https://api.github.com/users/rails/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails/subscriptions","organizations_url":"https://api.github.com/users/rails/orgs","repos_url":"https://api.github.com/users/rails/repos","events_url":"https://api.github.com/users/rails/events{/privacy}","received_events_url":"https://api.github.com/users/rails/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rails/buildkite-config","description":"Fallback configuration for branches that lack a .buildkite/ directory","fork":false,"url":"https://api.github.com/repos/rails/buildkite-config","forks_url":"https://api.github.com/repos/rails/buildkite-config/forks","keys_url":"https://api.github.com/repos/rails/buildkite-config/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rails/buildkite-config/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rails/buildkite-config/teams","hooks_url":"https://api.github.com/repos/rails/buildkite-config/hooks","issue_events_url":"https://api.github.com/repos/rails/buildkite-config/issues/events{/number}","events_url":"https://api.github.com/repos/rails/buildkite-config/events","assignees_url":"https://api.github.com/repos/rails/buildkite-config/assignees{/user}","branches_url":"https://api.github.com/repos/rails/buildkite-config/branches{/branch}","tags_url":"https://api.github.com/repos/rails/buildkite-config/tags","blobs_url":"https://api.github.com/repos/rails/buildkite-config/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rails/buildkite-config/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rails/buildkite-config/git/refs{/sha}","trees_url":"https://api.github.com/repos/rails/buildkite-config/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rails/buildkite-config/statuses/{sha}","languages_url":"https://api.github.com/repos/rails/buildkite-config/languages","stargazers_url":"https://api.github.com/repos/rails/buildkite-config/stargazers","contributors_url":"https://api.github.com/repos/rails/buildkite-config/contributors","subscribers_url":"https://api.github.com/repos/rails/buildkite-config/subscribers","subscription_url":"https://api.github.com/repos/rails/buildkite-config/subscription","commits_url":"https://api.github.com/repos/rails/buildkite-config/commits{/sha}","git_commits_url":"https://api.github.com/repos/rails/buildkite-config/git/commits{/sha}","comments_url":"https://api.github.com/repos/rails/buildkite-config/comments{/number}","issue_comment_url":"https://api.github.com/repos/rails/buildkite-config/issues/comments{/number}","contents_url":"https://api.github.com/repos/rails/buildkite-config/contents/{+path}","compare_url":"https://api.github.com/repos/rails/buildkite-config/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rails/buildkite-config/merges","archive_url":"https://api.github.com/repos/rails/buildkite-config/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rails/buildkite-config/downloads","issues_url":"https://api.github.com/repos/rails/buildkite-config/issues{/number}","pulls_url":"https://api.github.com/repos/rails/buildkite-config/pulls{/number}","milestones_url":"https://api.github.com/repos/rails/buildkite-config/milestones{/number}","notifications_url":"https://api.github.com/repos/rails/buildkite-config/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rails/buildkite-config/labels{/name}","releases_url":"https://api.github.com/repos/rails/buildkite-config/releases{/id}","deployments_url":"https://api.github.com/repos/rails/buildkite-config/deployments","created_at":"2019-02-05T12:43:55Z","updated_at":"2025-10-28T17:48:39Z","pushed_at":"2025-10-28T17:48:35Z","git_url":"git://github.com/rails/buildkite-config.git","ssh_url":"git@github.com:rails/buildkite-config.git","clone_url":"https://github.com/rails/buildkite-config.git","svn_url":"https://github.com/rails/buildkite-config","homepage":null,"size":537,"stargazers_count":22,"watchers_count":22,"language":"Ruby","has_issues":false,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":28,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":10,"license":null,"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":28,"open_issues":10,"watchers":22,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rails/buildkite-config/pulls/47","html_url":"https://github.com/rails/buildkite-config/pull/47","diff_url":"https://github.com/rails/buildkite-config/pull/47.diff","patch_url":"https://github.com/rails/buildkite-config/pull/47.patch","merged_at":"2023-06-15T12:52:44Z"},"body":"This pull request changes Ruby Docker images for 3.1 and 3.2 from Debian 12 \"bookworm\" based to Debian 11 \"bullseye\". Until we address the root cause of https://github.com/rails/rails/issues/48483\r\n\r\nRefer to https://github.com/docker-library/ruby/pull/415","reactions":{"url":"https://api.github.com/repos/rails/buildkite-config/issues/47/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/buildkite-config/issues/47/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1592932363","html_url":"https://github.com/rails/rails/issues/48483#issuecomment-1592932363","issue_url":"https://api.github.com/repos/rails/rails/issues/48483","id":1592932363,"node_id":"IC_kwDNIULOXvI4Cw","user":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-15T12:16:00Z","updated_at":"2023-06-15T12:16:00Z","body":"Opened https://github.com/rails/buildkite-config/pull/47 to use Debian 11 \"bullseye\" based Ruby 3.1 and 3.2 images until we find the root cause of it.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1592932363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1593050704","html_url":"https://github.com/rails/rails/issues/48483#issuecomment-1593050704","issue_url":"https://api.github.com/repos/rails/rails/issues/48483","id":1593050704,"node_id":"IC_kwDNIULOXvQGUA","user":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-15T13:23:12Z","updated_at":"2023-06-15T13:23:12Z","body":"It also reproduces locally that runs Ubuntu 23.04 whose openssl version is 3.0.8\r\n\r\n- Ubuntu 23.04\r\n\r\n```shell\r\n$ cat /etc/lsb-release\r\nDISTRIB_ID=Ubuntu\r\nDISTRIB_RELEASE=23.04\r\nDISTRIB_CODENAME=lunar\r\nDISTRIB_DESCRIPTION=\"Ubuntu 23.04\"\r\n```\r\n\r\n- openssl 3.0.8\r\n```shell\r\n$ apt list |grep ^openssl\r\n\r\nWARNING: apt does not have a stable CLI interface. Use with caution in scripts.\r\n\r\nopenssl/lunar-updates,lunar-security,now 3.0.8-1ubuntu1.2 amd64 [installed,automatic]\r\nopenssl/lunar-updates,lunar-security 3.0.8-1ubuntu1.2 i386\r\n```\r\n\r\n- Steps to reproduce\r\n```ruby\r\ngit clone https://github.com/rails/rails\r\ncd rails\r\nrm Gemfile.lock\r\nbundle install\r\ncd activesupport\r\nbin/test test/message_encryptors_test.rb -n /transitional/\r\n```\r\n\r\n- Actual behavior\r\n```ruby\r\n$ ruby -v\r\nruby 3.2.2 (2023-03-30 revision e51014f9c0) [x86_64-linux]\r\n$ bin/test test/message_encryptors_test.rb -n /transitional/\r\nRunning 24 tests in a single process (parallelization threshold is 50)\r\nRun options: -n /transitional/ --seed 40189\r\n\r\n# Running:\r\n\r\nE\r\n\r\nError:\r\nMessageEncryptorsTest#test_#transitional_treats_a_nil_first_rotation_as_a_new_rotation:\r\nOpenSSL::Digest::DigestError: Digest initialization failed: initialization error\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_verifier.rb:336:in `initialize'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_verifier.rb:336:in `new'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_verifier.rb:336:in `digest_length_in_hex'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_verifier.rb:344:in `separator_index_for'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_verifier.rb:315:in `extract_encoded'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_verifier.rb:301:in `read_message'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:25:in `read_message'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_encryptor.rb:270:in `verify'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_encryptor.rb:261:in `read_message'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:25:in `read_message'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:33:in `block (2 levels) in read_message'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:51:in `block (2 levels) in catch_rotation_error'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:50:in `catch'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:50:in `block in catch_rotation_error'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:49:in `catch'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:49:in `catch_rotation_error'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:32:in `block in read_message'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:31:in `each'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:31:in `read_message'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_encryptor.rb:245:in `block (3 levels) in decrypt_and_verify'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/codec.rb:47:in `block in catch_and_ignore'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/codec.rb:46:in `catch'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/codec.rb:46:in `catch_and_ignore'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_encryptor.rb:244:in `block (2 levels) in decrypt_and_verify'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/codec.rb:54:in `block in catch_and_raise'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/codec.rb:53:in `catch'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/codec.rb:53:in `catch_and_raise'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_encryptor.rb:243:in `block in decrypt_and_verify'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/codec.rb:54:in `block in catch_and_raise'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/codec.rb:53:in `catch'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/codec.rb:53:in `catch_and_raise'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_encryptor.rb:242:in `decrypt_and_verify'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/test/message_encryptors_test.rb:50:in `roundtrip'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/test/rotation_coordinator_tests.rb:146:in `block (2 levels) in <module:RotationCoordinatorTests>'\r\n\r\n\r\nbin/test test/rotation_coordinator_tests.rb:128\r\n\r\n.E\r\n\r\nError:\r\nMessageEncryptorsTest#test_#transitional_swaps_the_first_two_rotations_when_enabled:\r\nOpenSSL::HMACError: EVP_DigestSignInit: unsupported\r\n    /home/yahonda/.rbenv/versions/3.2.2/lib/ruby/3.2.0/openssl/hmac.rb:55:in `initialize'\r\n    /home/yahonda/.rbenv/versions/3.2.2/lib/ruby/3.2.0/openssl/hmac.rb:55:in `new'\r\n    /home/yahonda/.rbenv/versions/3.2.2/lib/ruby/3.2.0/openssl/hmac.rb:55:in `hexdigest'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_verifier.rb:328:in `generate_digest'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_verifier.rb:306:in `sign_encoded'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_verifier.rb:297:in `create_message'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_encryptor.rb:266:in `sign'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_encryptor.rb:257:in `create_message'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_encryptor.rb:221:in `encrypt_and_sign'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/test/message_encryptors_test.rb:50:in `roundtrip'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/test/rotation_coordinator_tests.rb:113:in `block (2 levels) in <module:RotationCoordinatorTests>'\r\n\r\n\r\nbin/test test/rotation_coordinator_tests.rb:97\r\n\r\n.\r\n\r\nFinished in 0.077141s, 51.8533 runs/s, 181.4864 assertions/s.\r\n4 runs, 14 assertions, 0 failures, 2 errors, 0 skips\r\n$\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1593050704/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1594034537","html_url":"https://github.com/rails/rails/issues/48483#issuecomment-1594034537","issue_url":"https://api.github.com/repos/rails/rails/issues/48483","id":1594034537,"node_id":"IC_kwDNIULOXwMJaQ","user":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-16T03:25:55Z","updated_at":"2023-06-16T03:25:55Z","body":"Here are minimum steps:\r\n\r\n```\r\n$ bin/test test/message_encryptors_test.rb -n \"/^(?:MessageEncryptorsTest#(?:test_#transitional_swaps_the_first_two_rotations_when_enabled|test_#transitional_treats_a_nil_first_rotation_as_a_new_rotation))$/\"\r\nRunning 24 tests in a single process (parallelization threshold is 50)\r\nRun options: -n \"/^(?:MessageEncryptorsTest#(?:test_#transitional_swaps_the_first_two_rotations_when_enabled|test_#transitional_treats_a_nil_first_rotation_as_a_new_rotation))$/\" --seed 34990\r\n\r\n# Running:\r\n\r\nE\r\n\r\nError:\r\nMessageEncryptorsTest#test_#transitional_swaps_the_first_two_rotations_when_enabled:\r\nOpenSSL::HMACError: EVP_DigestSignInit: unsupported\r\n    /home/yahonda/.rbenv/versions/3.2.2/lib/ruby/3.2.0/openssl/hmac.rb:55:in `initialize'\r\n    /home/yahonda/.rbenv/versions/3.2.2/lib/ruby/3.2.0/openssl/hmac.rb:55:in `new'\r\n    /home/yahonda/.rbenv/versions/3.2.2/lib/ruby/3.2.0/openssl/hmac.rb:55:in `hexdigest'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_verifier.rb:328:in `generate_digest'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_verifier.rb:306:in `sign_encoded'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_verifier.rb:297:in `create_message'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_encryptor.rb:266:in `sign'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_encryptor.rb:257:in `create_message'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_encryptor.rb:221:in `encrypt_and_sign'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/test/message_encryptors_test.rb:50:in `roundtrip'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/test/rotation_coordinator_tests.rb:113:in `block (2 levels) in <module:RotationCoordinatorTests>'\r\n\r\n\r\nbin/test test/rotation_coordinator_tests.rb:97\r\n\r\nE\r\n\r\nError:\r\nMessageEncryptorsTest#test_#transitional_treats_a_nil_first_rotation_as_a_new_rotation:\r\nOpenSSL::Digest::DigestError: Digest initialization failed: initialization error\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_verifier.rb:336:in `initialize'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_verifier.rb:336:in `new'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_verifier.rb:336:in `digest_length_in_hex'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_verifier.rb:344:in `separator_index_for'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_verifier.rb:315:in `extract_encoded'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_verifier.rb:301:in `read_message'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:25:in `read_message'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_encryptor.rb:270:in `verify'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_encryptor.rb:261:in `read_message'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:25:in `read_message'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:33:in `block (2 levels) in read_message'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:51:in `block (2 levels) in catch_rotation_error'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:50:in `catch'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:50:in `block in catch_rotation_error'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:49:in `catch'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:49:in `catch_rotation_error'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:32:in `block in read_message'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:31:in `each'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/rotator.rb:31:in `read_message'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_encryptor.rb:245:in `block (3 levels) in decrypt_and_verify'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/codec.rb:47:in `block in catch_and_ignore'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/codec.rb:46:in `catch'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/codec.rb:46:in `catch_and_ignore'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_encryptor.rb:244:in `block (2 levels) in decrypt_and_verify'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/codec.rb:54:in `block in catch_and_raise'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/codec.rb:53:in `catch'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/codec.rb:53:in `catch_and_raise'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_encryptor.rb:243:in `block in decrypt_and_verify'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/codec.rb:54:in `block in catch_and_raise'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/codec.rb:53:in `catch'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/messages/codec.rb:53:in `catch_and_raise'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/lib/active_support/message_encryptor.rb:242:in `decrypt_and_verify'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/test/message_encryptors_test.rb:50:in `roundtrip'\r\n    /home/yahonda/src/github.com/rails/rails/activesupport/test/rotation_coordinator_tests.rb:146:in `block (2 levels) in <module:RotationCoordinatorTests>'\r\n\r\n\r\nbin/test test/rotation_coordinator_tests.rb:128\r\n\r\n\r\n\r\nFinished in 0.078272s, 25.5520 runs/s, 89.4320 assertions/s.\r\n2 runs, 7 assertions, 0 failures, 2 errors, 0 skips\r\n$\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1594034537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-16T03:36:57Z","updated_at":"2023-06-16T03:36:57Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/ruby/openssl/issues/642","repository_url":"https://api.github.com/repos/ruby/openssl","labels_url":"https://api.github.com/repos/ruby/openssl/issues/642/labels{/name}","comments_url":"https://api.github.com/repos/ruby/openssl/issues/642/comments","events_url":"https://api.github.com/repos/ruby/openssl/issues/642/events","html_url":"https://github.com/ruby/openssl/issues/642","id":1759865151,"node_id":"I_kwDOAYmrJs5o5Wk_","number":642,"title":"`EVP_DigestSignInit: unsupported (OpenSSL::HMACError)` and `Digest initialization failed: initialization error (OpenSSL::Digest::DigestError)`","user":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-06-16T03:36:57Z","updated_at":"2023-06-16T04:45:10Z","closed_at":"2023-06-16T04:07:06Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":25799462,"node_id":"MDEwOlJlcG9zaXRvcnkyNTc5OTQ2Mg==","name":"openssl","full_name":"ruby/openssl","private":false,"owner":{"login":"ruby","id":210414,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIxMDQxNA==","avatar_url":"https://avatars.githubusercontent.com/u/210414?v=4","gravatar_id":"","url":"https://api.github.com/users/ruby","html_url":"https://github.com/ruby","followers_url":"https://api.github.com/users/ruby/followers","following_url":"https://api.github.com/users/ruby/following{/other_user}","gists_url":"https://api.github.com/users/ruby/gists{/gist_id}","starred_url":"https://api.github.com/users/ruby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruby/subscriptions","organizations_url":"https://api.github.com/users/ruby/orgs","repos_url":"https://api.github.com/users/ruby/repos","events_url":"https://api.github.com/users/ruby/events{/privacy}","received_events_url":"https://api.github.com/users/ruby/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/ruby/openssl","description":"Provides SSL, TLS and general purpose cryptography.","fork":false,"url":"https://api.github.com/repos/ruby/openssl","forks_url":"https://api.github.com/repos/ruby/openssl/forks","keys_url":"https://api.github.com/repos/ruby/openssl/keys{/key_id}","collaborators_url":"https://api.github.com/repos/ruby/openssl/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/ruby/openssl/teams","hooks_url":"https://api.github.com/repos/ruby/openssl/hooks","issue_events_url":"https://api.github.com/repos/ruby/openssl/issues/events{/number}","events_url":"https://api.github.com/repos/ruby/openssl/events","assignees_url":"https://api.github.com/repos/ruby/openssl/assignees{/user}","branches_url":"https://api.github.com/repos/ruby/openssl/branches{/branch}","tags_url":"https://api.github.com/repos/ruby/openssl/tags","blobs_url":"https://api.github.com/repos/ruby/openssl/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/ruby/openssl/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/ruby/openssl/git/refs{/sha}","trees_url":"https://api.github.com/repos/ruby/openssl/git/trees{/sha}","statuses_url":"https://api.github.com/repos/ruby/openssl/statuses/{sha}","languages_url":"https://api.github.com/repos/ruby/openssl/languages","stargazers_url":"https://api.github.com/repos/ruby/openssl/stargazers","contributors_url":"https://api.github.com/repos/ruby/openssl/contributors","subscribers_url":"https://api.github.com/repos/ruby/openssl/subscribers","subscription_url":"https://api.github.com/repos/ruby/openssl/subscription","commits_url":"https://api.github.com/repos/ruby/openssl/commits{/sha}","git_commits_url":"https://api.github.com/repos/ruby/openssl/git/commits{/sha}","comments_url":"https://api.github.com/repos/ruby/openssl/comments{/number}","issue_comment_url":"https://api.github.com/repos/ruby/openssl/issues/comments{/number}","contents_url":"https://api.github.com/repos/ruby/openssl/contents/{+path}","compare_url":"https://api.github.com/repos/ruby/openssl/compare/{base}...{head}","merges_url":"https://api.github.com/repos/ruby/openssl/merges","archive_url":"https://api.github.com/repos/ruby/openssl/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/ruby/openssl/downloads","issues_url":"https://api.github.com/repos/ruby/openssl/issues{/number}","pulls_url":"https://api.github.com/repos/ruby/openssl/pulls{/number}","milestones_url":"https://api.github.com/repos/ruby/openssl/milestones{/number}","notifications_url":"https://api.github.com/repos/ruby/openssl/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/ruby/openssl/labels{/name}","releases_url":"https://api.github.com/repos/ruby/openssl/releases{/id}","deployments_url":"https://api.github.com/repos/ruby/openssl/deployments","created_at":"2014-10-27T02:12:48Z","updated_at":"2025-11-06T13:40:29Z","pushed_at":"2025-11-06T13:40:26Z","git_url":"git://github.com/ruby/openssl.git","ssh_url":"git@github.com:ruby/openssl.git","clone_url":"https://github.com/ruby/openssl.git","svn_url":"https://github.com/ruby/openssl","homepage":"","size":5548,"stargazers_count":252,"watchers_count":252,"language":"C","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":false,"forks_count":182,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":83,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","hacktoberfest","openssl","ruby","tls"],"visibility":"public","forks":182,"open_issues":83,"watchers":252,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"This issue is reported initially at https://github.com/rails/rails/issues/48483 and here is Ruby script to reproduce this error. \r\n\r\nThe original issue has two exceptions. `EVP_DigestSignInit: unsupported (OpenSSL::HMACError)` and `Digest initialization failed: initialization error (OpenSSL::Digest::DigestError)`\r\n\r\n## `EVP_DigestSignInit: unsupported (OpenSSL::HMACError)`\r\n### Steps to reproduce\r\n- Run these scripts\r\n```ruby\r\nrequire \"openssl\"\r\nOpenSSL::VERSION\r\n\r\ndigest = \"MD4\"\r\nsecret = \"saltsaltsaltsaltsaltsaltsaltsalt\"\r\ndata = \"cDcvTnJ3TDRqbmFpQWN4OWVJWjRKU1E4YnNsWWpuZ1NUbFF5OTZRQW90QT0tLTNGZkVOYVJhY3l5dkZOa3RjMklCeFE9PQ==\"\r\nOpenSSL::HMAC.hexdigest(digest, secret, data)\r\n```\r\n### Expected behavior\r\nIt should run as Ruby 3.0.5 does.\r\n\r\n```ruby\r\n$ ruby -v\r\nruby 3.0.5p211 (2022-11-24 revision ba5cf0f7c5) [x86_64-linux]\r\n$ irb\r\nirb(main):001:0>\r\nirb(main):002:0> require \"openssl\"\r\n=> true\r\nirb(main):003:0> OpenSSL::VERSION\r\n=> \"2.2.2\"\r\nirb(main):004:0>\r\nirb(main):005:0> digest = \"MD4\"\r\n=> \"MD4\"\r\nirb(main):006:0> secret = \"saltsaltsaltsaltsaltsaltsaltsalt\"\r\n=> \"saltsaltsaltsaltsaltsaltsaltsalt\"\r\nirb(main):007:0> data = \"cDcvTnJ3TDRqbmFpQWN4OWVJWjRKU1E4YnNsWWpuZ1NUbFF5OTZRQW90QT0tLTNGZkVOYVJhY3l5dkZOa3RjMklCeFE9PQ==\"\r\nirb(main):008:0> OpenSSL::HMAC.hexdigest(digest, secret, data)\r\n=> \"464c3e47de854fe82cc7514f1fc16a8f\"\r\nirb(main):009:0>\r\n```\r\n\r\n### Actual behavior\r\nIt gets \"EVP_DigestSignInit: unsupported (OpenSSL::HMACError)\" with Ruby 3.2.2.\r\n\r\n```ruby\r\n$ ruby -v\r\nruby 3.2.2 (2023-03-30 revision e51014f9c0) [x86_64-linux]\r\n$ irb\r\nirb(main):001:0> require \"openssl\"\r\n=> true\r\nirb(main):002:0> digest = \"MD4\"\r\n=> \"MD4\"\r\nirb(main):003:0> secret = \"saltsaltsaltsaltsaltsaltsaltsalt\"\r\n=> \"saltsaltsaltsaltsaltsaltsaltsalt\"\r\nirb(main):004:0> data = \"cDcvTnJ3TDRqbmFpQWN4OWVJWjRKU1E4YnNsWWpuZ1NUbFF5OTZRQW90QT0tLTNGZkVOYVJhY3l5dkZOa3RjMklCeFE9PQ==\"\r\nirb(main):005:0> OpenSSL::HMAC.hexdigest(digest, secret, data)\r\n/home/yahonda/.rbenv/versions/3.2.2/lib/ruby/3.2.0/openssl/hmac.rb:55:in `initialize': EVP_DigestSignInit: unsupported (OpenSSL::HMACError)\r\n\tfrom /home/yahonda/.rbenv/versions/3.2.2/lib/ruby/3.2.0/openssl/hmac.rb:55:in `new'\r\n\tfrom /home/yahonda/.rbenv/versions/3.2.2/lib/ruby/3.2.0/openssl/hmac.rb:55:in `hexdigest'\r\n\tfrom (irb):5:in `<main>'\r\n\tfrom /home/yahonda/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/irb-1.7.0/exe/irb:9:in `<top (required)>'\r\n\tfrom /home/yahonda/.rbenv/versions/3.2.2/bin/irb:25:in `load'\r\n\tfrom /home/yahonda/.rbenv/versions/3.2.2/bin/irb:25:in `<main>'\r\nirb(main):006:0>\r\n```\r\n\r\n## `Digest initialization failed: initialization error (OpenSSL::Digest::DigestError)`\r\n\r\n### Steps to reproduce\r\n- Run these scripts\r\n\r\n```ruby\r\nrequire \"openssl\"\r\nOpenSSL::VERSION\r\ndigest = \"MD4\"\r\nOpenSSL::Digest.new(digest)\r\n```\r\n\r\n### Expected behavior\r\nIt should run as Ruby 3.0.5 does.\r\n\r\n```ruby\r\n$ ruby -v\r\nruby 3.0.5p211 (2022-11-24 revision ba5cf0f7c5) [x86_64-linux]\r\n$ irb\r\nirb(main):001:0> require \"openssl\"\r\n=> true\r\nirb(main):002:0> OpenSSL::VERSION\r\n=> \"2.2.2\"\r\nirb(main):003:0> digest = \"MD4\"\r\nirb(main):004:0> OpenSSL::Digest.new(digest)\r\n=> #<OpenSSL::Digest: 31d6cfe0d16ae931b73c59d7e0c089c0>\r\nirb(main):005:0>\r\n```\r\n\r\n### Actual behavior\r\n\r\n```ruby\r\n$ ruby -v\r\nruby 3.2.2 (2023-03-30 revision e51014f9c0) [x86_64-linux]\r\n$ irb\r\nirb(main):001:0> require \"openssl\"\r\n=> true\r\nirb(main):002:0> digest = \"MD4\"\r\nirb(main):003:0> OpenSSL::Digest.new(digest)\r\n(irb):3:in `initialize': Digest initialization failed: initialization error (OpenSSL::Digest::DigestError)\r\n\tfrom (irb):3:in `new'\r\n\tfrom (irb):3:in `<main>'\r\n\tfrom /home/yahonda/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems/irb-1.7.0/exe/irb:9:in `<top (required)>'\r\n\tfrom /home/yahonda/.rbenv/versions/3.2.2/bin/irb:25:in `load'\r\n\tfrom /home/yahonda/.rbenv/versions/3.2.2/bin/irb:25:in `<main>'\r\nirb(main):004:0>\r\n```","reactions":{"url":"https://api.github.com/repos/ruby/openssl/issues/642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/ruby/openssl/issues/642/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1594040025","html_url":"https://github.com/rails/rails/issues/48483#issuecomment-1594040025","issue_url":"https://api.github.com/repos/rails/rails/issues/48483","id":1594040025,"node_id":"IC_kwDNIULOXwMe2Q","user":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-16T03:37:43Z","updated_at":"2023-06-16T03:37:43Z","body":"Reported to https://github.com/ruby/openssl/issues/642","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1594040025/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9547146586,"node_id":"REFE_lADNIULOaNK5wc8AAAACOQ3lWg","url":"https://api.github.com/repos/rails/rails/issues/events/9547146586","actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"dd12bf32101c10e560bc95528030e1857e8ece24","commit_url":"https://api.github.com/repos/yahonda/rails/commits/dd12bf32101c10e560bc95528030e1857e8ece24","created_at":"2023-06-16T04:41:30Z","performed_via_github_app":null},{"actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-16T04:43:52Z","updated_at":"2023-06-16T04:43:52Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rails/rails/issues/48493","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/48493/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/48493/comments","events_url":"https://api.github.com/repos/rails/rails/issues/48493/events","html_url":"https://github.com/rails/rails/pull/48493","id":1759911105,"node_id":"PR_kwDNIULOUycbRg","number":48493,"title":"Use `SHA256` digest instead of `MD4` that is legacy in OpenSSL 3","user":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":107194,"node_id":"MDU6TGFiZWwxMDcxOTQ=","url":"https://api.github.com/repos/rails/rails/labels/activesupport","name":"activesupport","color":"FC9300","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-06-16T04:43:52Z","updated_at":"2023-06-16T14:40:28Z","closed_at":"2023-06-16T04:57:52Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":8514,"node_id":"MDEwOlJlcG9zaXRvcnk4NTE0","name":"rails","full_name":"rails/rails","private":false,"owner":{"login":"rails","id":4223,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjM=","avatar_url":"https://avatars.githubusercontent.com/u/4223?v=4","gravatar_id":"","url":"https://api.github.com/users/rails","html_url":"https://github.com/rails","followers_url":"https://api.github.com/users/rails/followers","following_url":"https://api.github.com/users/rails/following{/other_user}","gists_url":"https://api.github.com/users/rails/gists{/gist_id}","starred_url":"https://api.github.com/users/rails/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails/subscriptions","organizations_url":"https://api.github.com/users/rails/orgs","repos_url":"https://api.github.com/users/rails/repos","events_url":"https://api.github.com/users/rails/events{/privacy}","received_events_url":"https://api.github.com/users/rails/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rails/rails","description":"Ruby on Rails","fork":false,"url":"https://api.github.com/repos/rails/rails","forks_url":"https://api.github.com/repos/rails/rails/forks","keys_url":"https://api.github.com/repos/rails/rails/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rails/rails/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rails/rails/teams","hooks_url":"https://api.github.com/repos/rails/rails/hooks","issue_events_url":"https://api.github.com/repos/rails/rails/issues/events{/number}","events_url":"https://api.github.com/repos/rails/rails/events","assignees_url":"https://api.github.com/repos/rails/rails/assignees{/user}","branches_url":"https://api.github.com/repos/rails/rails/branches{/branch}","tags_url":"https://api.github.com/repos/rails/rails/tags","blobs_url":"https://api.github.com/repos/rails/rails/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rails/rails/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rails/rails/git/refs{/sha}","trees_url":"https://api.github.com/repos/rails/rails/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rails/rails/statuses/{sha}","languages_url":"https://api.github.com/repos/rails/rails/languages","stargazers_url":"https://api.github.com/repos/rails/rails/stargazers","contributors_url":"https://api.github.com/repos/rails/rails/contributors","subscribers_url":"https://api.github.com/repos/rails/rails/subscribers","subscription_url":"https://api.github.com/repos/rails/rails/subscription","commits_url":"https://api.github.com/repos/rails/rails/commits{/sha}","git_commits_url":"https://api.github.com/repos/rails/rails/git/commits{/sha}","comments_url":"https://api.github.com/repos/rails/rails/comments{/number}","issue_comment_url":"https://api.github.com/repos/rails/rails/issues/comments{/number}","contents_url":"https://api.github.com/repos/rails/rails/contents/{+path}","compare_url":"https://api.github.com/repos/rails/rails/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rails/rails/merges","archive_url":"https://api.github.com/repos/rails/rails/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rails/rails/downloads","issues_url":"https://api.github.com/repos/rails/rails/issues{/number}","pulls_url":"https://api.github.com/repos/rails/rails/pulls{/number}","milestones_url":"https://api.github.com/repos/rails/rails/milestones{/number}","notifications_url":"https://api.github.com/repos/rails/rails/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rails/rails/labels{/name}","releases_url":"https://api.github.com/repos/rails/rails/releases{/id}","deployments_url":"https://api.github.com/repos/rails/rails/deployments","created_at":"2008-04-11T02:19:47Z","updated_at":"2025-11-10T02:03:47Z","pushed_at":"2025-11-10T00:33:52Z","git_url":"git://github.com/rails/rails.git","ssh_url":"git@github.com:rails/rails.git","clone_url":"https://github.com/rails/rails.git","svn_url":"https://github.com/rails/rails","homepage":"https://rubyonrails.org","size":271619,"stargazers_count":57840,"watchers_count":57840,"language":"Ruby","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":22025,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1341,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["activejob","activerecord","framework","html","mvc","rails","ruby"],"visibility":"public","forks":22025,"open_issues":1341,"watchers":57840,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/48493","html_url":"https://github.com/rails/rails/pull/48493","diff_url":"https://github.com/rails/rails/pull/48493.diff","patch_url":"https://github.com/rails/rails/pull/48493.patch","merged_at":"2023-06-16T04:57:52Z"},"body":"### Motivation / Background\r\n\r\nFix #48483\r\n\r\n### Detail\r\n\r\nThis pull request updates the MD4 digest used in `MessageEncryptorsTest` because OpenSSL 3 moves `MD4` digests as legacy provider.\r\n\r\n[Major changes between OpenSSL 3.0.0 and OpenSSL 3.0.1 [14 Dec 2021]\r\n](https://www.openssl.org/news/openssl-3.0-notes.html\r\n)\r\n> Moved the EVP digests MD2, MD4, MDC2, WHIRLPOOL and RIPEMD-160 to the legacy provider.\r\n\r\nSince Rails CI migrates from Debian 11 \"bullseye\" based Ruby 3.1 and 3.2 images to Debian 12 \"bookworm\" based ones, that supports OpenSSL 3, `MessageEncryptorsTest` raises `EVP_DigestSignInit: unsupported (OpenSSL::HMACError)` and `Digest initialization failed: initialization error (OpenSSL::Digest::DigestError)`\r\n\r\nhttps://packages.debian.org/bookworm/openssl\r\n> Package: openssl (3.0.9-1)\r\n\r\n### Additional information\r\n\r\n`SHA256` is listed as `Provided:` via `openssl list -digest-algorithms` output, so it is safe to use `SHA256` digest in the `MessageEncryptorsTest`.\r\n\r\n```\r\n  { 2.16.840.1.101.3.4.2.1, SHA-256, SHA2-256, SHA256 } @ default\r\n```\r\n\r\n```\r\n$ openssl version\r\nOpenSSL 3.0.8 7 Feb 2023 (Library: OpenSSL 3.0.8 7 Feb 2023)\r\n$ openssl list -digest-algorithms\r\nLegacy:\r\n  RSA-MD4 => MD4\r\n  RSA-MD5 => MD5\r\n  RSA-RIPEMD160 => RIPEMD160\r\n  RSA-SHA1 => SHA1\r\n  RSA-SHA1-2 => RSA-SHA1\r\n  RSA-SHA224 => SHA224\r\n  RSA-SHA256 => SHA256\r\n  RSA-SHA3-224 => SHA3-224\r\n  RSA-SHA3-256 => SHA3-256\r\n  RSA-SHA3-384 => SHA3-384\r\n  RSA-SHA3-512 => SHA3-512\r\n  RSA-SHA384 => SHA384\r\n  RSA-SHA512 => SHA512\r\n  RSA-SHA512/224 => SHA512-224\r\n  RSA-SHA512/256 => SHA512-256\r\n  RSA-SM3 => SM3\r\n  BLAKE2b512\r\n  BLAKE2s256\r\n  id-rsassa-pkcs1-v1_5-with-sha3-224 => SHA3-224\r\n  id-rsassa-pkcs1-v1_5-with-sha3-256 => SHA3-256\r\n  id-rsassa-pkcs1-v1_5-with-sha3-384 => SHA3-384\r\n  id-rsassa-pkcs1-v1_5-with-sha3-512 => SHA3-512\r\n  MD4\r\n  md4WithRSAEncryption => MD4\r\n  MD5\r\n  MD5-SHA1\r\n  md5WithRSAEncryption => MD5\r\n  ripemd => RIPEMD160\r\n  RIPEMD160\r\n  ripemd160WithRSA => RIPEMD160\r\n  rmd160 => RIPEMD160\r\n  SHA1\r\n  sha1WithRSAEncryption => SHA1\r\n  SHA224\r\n  sha224WithRSAEncryption => SHA224\r\n  SHA256\r\n  sha256WithRSAEncryption => SHA256\r\n  SHA3-224\r\n  SHA3-256\r\n  SHA3-384\r\n  SHA3-512\r\n  SHA384\r\n  sha384WithRSAEncryption => SHA384\r\n  SHA512\r\n  SHA512-224\r\n  sha512-224WithRSAEncryption => SHA512-224\r\n  SHA512-256\r\n  sha512-256WithRSAEncryption => SHA512-256\r\n  sha512WithRSAEncryption => SHA512\r\n  SHAKE128\r\n  SHAKE256\r\n  SM3\r\n  sm3WithRSAEncryption => SM3\r\n  ssl3-md5 => MD5\r\n  ssl3-sha1 => SHA1\r\n  whirlpool\r\nProvided:\r\n  { 2.16.840.1.101.3.4.2.10, SHA3-512 } @ default\r\n  { 1.3.6.1.4.1.1722.12.2.2.8, BLAKE2S-256, BLAKE2s256 } @ default\r\n  { 1.2.156.10197.1.401, SM3 } @ default\r\n  { 2.16.840.1.101.3.4.2.8, SHA3-256 } @ default\r\n  { 2.16.840.1.101.3.4.2.7, SHA3-224 } @ default\r\n  { 2.16.840.1.101.3.4.2.2, SHA-384, SHA2-384, SHA384 } @ default\r\n  { 2.16.840.1.101.3.4.2.3, SHA-512, SHA2-512, SHA512 } @ default\r\n  { 2.16.840.1.101.3.4.2.5, SHA-512/224, SHA2-512/224, SHA512-224 } @ default\r\n  { 2.16.840.1.101.3.4.2.12, SHAKE-256, SHAKE256 } @ default\r\n  { 2.16.840.1.101.3.4.2.1, SHA-256, SHA2-256, SHA256 } @ default\r\n  { 1.3.14.3.2.26, SHA-1, SHA1, SSL3-SHA1 } @ default\r\n  { 2.16.840.1.101.3.4.2.9, SHA3-384 } @ default\r\n  { 2.16.840.1.101.3.4.2.11, SHAKE-128, SHAKE128 } @ default\r\n  MD5-SHA1 @ default\r\n  { 1.3.36.3.2.1, RIPEMD, RIPEMD-160, RIPEMD160, RMD160 } @ default\r\n  { 1.2.840.113549.2.5, MD5, SSL3-MD5 } @ default\r\n  { 2.16.840.1.101.3.4.2.4, SHA-224, SHA2-224, SHA224 } @ default\r\n  { 1.3.6.1.4.1.1722.12.2.1.16, BLAKE2B-512, BLAKE2b512 } @ default\r\n  { 2.16.840.1.101.3.4.2.6, SHA-512/256, SHA2-512/256, SHA512-256 } @ default\r\n  { KECCAK-KMAC-128, KECCAK-KMAC128 } @ default\r\n  { KECCAK-KMAC-256, KECCAK-KMAC256 } @ default\r\n  NULL @ default\r\n$\r\n```\r\n\r\n\r\n### Checklist\r\n\r\nBefore submitting the PR make sure the following are checked:\r\n\r\n* [x] This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.\r\n* [x] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: `[Fix #issue-number]`\r\n* [x] Tests are added or updated if you fix a bug or add a feature.\r\n* [ ] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.\r\n","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/48493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/rails/issues/48493/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":9547210994,"node_id":"CE_lADNIULOaNK5wc8AAAACOQ7g8g","url":"https://api.github.com/repos/rails/rails/issues/events/9547210994","actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2023-06-16T04:57:53Z","state_reason":null,"performed_via_github_app":null},{"id":9568405417,"node_id":"REFE_lADNIULOaNK5wc8AAAACOlJHqQ","url":"https://api.github.com/repos/rails/rails/issues/events/9568405417","actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d8e2aebe58b3bcb6d96292886ac01ce4c9f63786","commit_url":"https://api.github.com/repos/yahonda/buildkite-config/commits/d8e2aebe58b3bcb6d96292886ac01ce4c9f63786","created_at":"2023-06-19T13:22:31Z","performed_via_github_app":null},{"actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-19T13:24:25Z","updated_at":"2023-06-19T13:24:25Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rails/buildkite-config/issues/49","repository_url":"https://api.github.com/repos/rails/buildkite-config","labels_url":"https://api.github.com/repos/rails/buildkite-config/issues/49/labels{/name}","comments_url":"https://api.github.com/repos/rails/buildkite-config/issues/49/comments","events_url":"https://api.github.com/repos/rails/buildkite-config/issues/49/events","html_url":"https://github.com/rails/buildkite-config/pull/49","id":1763544109,"node_id":"PR_kwDOChZjns5TV3ME","number":49,"title":"rubylang/ruby docker image uses Ubuntu jammy by default ","user":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-06-19T13:24:25Z","updated_at":"2023-06-23T06:20:52Z","closed_at":"2023-06-23T06:20:51Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":169239454,"node_id":"MDEwOlJlcG9zaXRvcnkxNjkyMzk0NTQ=","name":"buildkite-config","full_name":"rails/buildkite-config","private":false,"owner":{"login":"rails","id":4223,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjM=","avatar_url":"https://avatars.githubusercontent.com/u/4223?v=4","gravatar_id":"","url":"https://api.github.com/users/rails","html_url":"https://github.com/rails","followers_url":"https://api.github.com/users/rails/followers","following_url":"https://api.github.com/users/rails/following{/other_user}","gists_url":"https://api.github.com/users/rails/gists{/gist_id}","starred_url":"https://api.github.com/users/rails/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails/subscriptions","organizations_url":"https://api.github.com/users/rails/orgs","repos_url":"https://api.github.com/users/rails/repos","events_url":"https://api.github.com/users/rails/events{/privacy}","received_events_url":"https://api.github.com/users/rails/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rails/buildkite-config","description":"Fallback configuration for branches that lack a .buildkite/ directory","fork":false,"url":"https://api.github.com/repos/rails/buildkite-config","forks_url":"https://api.github.com/repos/rails/buildkite-config/forks","keys_url":"https://api.github.com/repos/rails/buildkite-config/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rails/buildkite-config/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rails/buildkite-config/teams","hooks_url":"https://api.github.com/repos/rails/buildkite-config/hooks","issue_events_url":"https://api.github.com/repos/rails/buildkite-config/issues/events{/number}","events_url":"https://api.github.com/repos/rails/buildkite-config/events","assignees_url":"https://api.github.com/repos/rails/buildkite-config/assignees{/user}","branches_url":"https://api.github.com/repos/rails/buildkite-config/branches{/branch}","tags_url":"https://api.github.com/repos/rails/buildkite-config/tags","blobs_url":"https://api.github.com/repos/rails/buildkite-config/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rails/buildkite-config/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rails/buildkite-config/git/refs{/sha}","trees_url":"https://api.github.com/repos/rails/buildkite-config/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rails/buildkite-config/statuses/{sha}","languages_url":"https://api.github.com/repos/rails/buildkite-config/languages","stargazers_url":"https://api.github.com/repos/rails/buildkite-config/stargazers","contributors_url":"https://api.github.com/repos/rails/buildkite-config/contributors","subscribers_url":"https://api.github.com/repos/rails/buildkite-config/subscribers","subscription_url":"https://api.github.com/repos/rails/buildkite-config/subscription","commits_url":"https://api.github.com/repos/rails/buildkite-config/commits{/sha}","git_commits_url":"https://api.github.com/repos/rails/buildkite-config/git/commits{/sha}","comments_url":"https://api.github.com/repos/rails/buildkite-config/comments{/number}","issue_comment_url":"https://api.github.com/repos/rails/buildkite-config/issues/comments{/number}","contents_url":"https://api.github.com/repos/rails/buildkite-config/contents/{+path}","compare_url":"https://api.github.com/repos/rails/buildkite-config/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rails/buildkite-config/merges","archive_url":"https://api.github.com/repos/rails/buildkite-config/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rails/buildkite-config/downloads","issues_url":"https://api.github.com/repos/rails/buildkite-config/issues{/number}","pulls_url":"https://api.github.com/repos/rails/buildkite-config/pulls{/number}","milestones_url":"https://api.github.com/repos/rails/buildkite-config/milestones{/number}","notifications_url":"https://api.github.com/repos/rails/buildkite-config/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rails/buildkite-config/labels{/name}","releases_url":"https://api.github.com/repos/rails/buildkite-config/releases{/id}","deployments_url":"https://api.github.com/repos/rails/buildkite-config/deployments","created_at":"2019-02-05T12:43:55Z","updated_at":"2025-10-28T17:48:39Z","pushed_at":"2025-10-28T17:48:35Z","git_url":"git://github.com/rails/buildkite-config.git","ssh_url":"git@github.com:rails/buildkite-config.git","clone_url":"https://github.com/rails/buildkite-config.git","svn_url":"https://github.com/rails/buildkite-config","homepage":null,"size":537,"stargazers_count":22,"watchers_count":22,"language":"Ruby","has_issues":false,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":28,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":10,"license":null,"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":28,"open_issues":10,"watchers":22,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rails/buildkite-config/pulls/49","html_url":"https://github.com/rails/buildkite-config/pull/49","diff_url":"https://github.com/rails/buildkite-config/pull/49.diff","patch_url":"https://github.com/rails/buildkite-config/pull/49.patch","merged_at":"2023-06-23T06:20:51Z"},"body":"This pull request updates to use Ubuntu jammy based rubylang/ruby docker image because it is by default https://github.com/ruby/ruby-docker-images/pull/43\r\n\r\nConfirmed it works without failures or errors.\r\n\r\n```ruby\r\n$ git clone https://github.com/rails/rails.git\r\n$ cd rails\r\n$ git clone https://github.com/rails/buildkite-config .buildkite/\r\n$ RUBY_IMAGE=rubylang/ruby:master-nightly-jammy docker-compose -f .buildkite/docker-compose.yml build base \\\r\n&& CI=1 docker-compose -f .buildkite/docker-compose.yml run default runner actionpack 'rake test'\r\n\r\nFinished in 3.572241s, 1006.9311 runs/s, 4739.3225 assertions/s.\r\n3597 runs, 16930 assertions, 0 failures, 0 errors, 0 skips\r\n```\r\n\r\nI recall this when I was investigating https://github.com/rails/rails/issues/48483 and https://github.com/rails/rails/pull/48493 and this issue does not reproduce against \"rubylang/ruby:master-nightly-focal\" image because this image is based on Ubuntu Focal that installs openssl 1.1 https://packages.ubuntu.com/focal/openssl . Ubuntu Jammy installs openssl 3.0 https://packages.ubuntu.com/jammy/openssl .","reactions":{"url":"https://api.github.com/repos/rails/buildkite-config/issues/49/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/buildkite-config/issues/49/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":9587811182,"node_id":"REFE_lADNIULOaNK5wc8AAAACO3pjbg","url":"https://api.github.com/repos/rails/rails/issues/events/9587811182","actor":{"login":"yahonda","id":73684,"node_id":"MDQ6VXNlcjczNjg0","avatar_url":"https://avatars.githubusercontent.com/u/73684?v=4","gravatar_id":"","url":"https://api.github.com/users/yahonda","html_url":"https://github.com/yahonda","followers_url":"https://api.github.com/users/yahonda/followers","following_url":"https://api.github.com/users/yahonda/following{/other_user}","gists_url":"https://api.github.com/users/yahonda/gists{/gist_id}","starred_url":"https://api.github.com/users/yahonda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahonda/subscriptions","organizations_url":"https://api.github.com/users/yahonda/orgs","repos_url":"https://api.github.com/users/yahonda/repos","events_url":"https://api.github.com/users/yahonda/events{/privacy}","received_events_url":"https://api.github.com/users/yahonda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"0c32405019634c598e19747e4b927f2085c6fbb3","commit_url":"https://api.github.com/repos/yahonda/buildkite-config/commits/0c32405019634c598e19747e4b927f2085c6fbb3","created_at":"2023-06-21T05:25:46Z","performed_via_github_app":null}]