{"url":"https://api.github.com/repos/rails/rails/issues/54297","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/54297/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/54297/comments","events_url":"https://api.github.com/repos/rails/rails/issues/54297/events","html_url":"https://github.com/rails/rails/issues/54297","id":2798586885,"node_id":"I_kwDNIULOps8MBQ","number":54297,"title":"Intermittent 404 Routing Error After Upgrading to Rails 8.0.1","user":{"login":"Souravgoswami","id":37468605,"node_id":"MDQ6VXNlcjM3NDY4NjA1","avatar_url":"https://avatars.githubusercontent.com/u/37468605?v=4","gravatar_id":"","url":"https://api.github.com/users/Souravgoswami","html_url":"https://github.com/Souravgoswami","followers_url":"https://api.github.com/users/Souravgoswami/followers","following_url":"https://api.github.com/users/Souravgoswami/following{/other_user}","gists_url":"https://api.github.com/users/Souravgoswami/gists{/gist_id}","starred_url":"https://api.github.com/users/Souravgoswami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Souravgoswami/subscriptions","organizations_url":"https://api.github.com/users/Souravgoswami/orgs","repos_url":"https://api.github.com/users/Souravgoswami/repos","events_url":"https://api.github.com/users/Souravgoswami/events{/privacy}","received_events_url":"https://api.github.com/users/Souravgoswami/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2025-01-20T08:41:54Z","updated_at":"2025-03-03T12:33:06Z","closed_at":"2025-01-27T20:15:46Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I'm reporting an issue encountered after updating to Rails 8.0.1, where one of my applications intermittently throws a 404 routing error, even though the route exists:\n\n```\nActionController::RoutingError (No route matches [GET] \"/somepath\"):\n```\n\nThis problem didn't occur in Rails 7.2.1.\n\nThe issue is intermittent, occurring only once or twice and is difficult to reproduce. It seems as though the router occasionally ignores the routes file entirely.\n\nHere's the code snippet we have at the bottom of our application:\n\n```\nmatch '*path', via: :all, to: 'status#invalid_request', constraints: lambda { |req|\n  return false if req.path.start_with?('/rails/active_storage/')\n\n  Rails.logger.error \"[#{Time.current}] RoutingError: No route matches [#{req.method}] \"\\\n        \"\\\"#{req.path}\\\" (from IP #{req.ip} | \"\\\n        \"User Agent: \\\"#{req.user_agent&.clamp_str(512, '...')}\\\")\"\n  true\n}\n```\n\nEven with this code, the error isn't captured in the same way as it used to in Rails 7.2.1. This behavior suggests there might be a bug in the router itself.\n\nRuby Version: 3.2.5, 3.3.5\nRails version: 8.0.1","closed_by":{"login":"gmcgibbon","id":5162312,"node_id":"MDQ6VXNlcjUxNjIzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5162312?v=4","gravatar_id":"","url":"https://api.github.com/users/gmcgibbon","html_url":"https://github.com/gmcgibbon","followers_url":"https://api.github.com/users/gmcgibbon/followers","following_url":"https://api.github.com/users/gmcgibbon/following{/other_user}","gists_url":"https://api.github.com/users/gmcgibbon/gists{/gist_id}","starred_url":"https://api.github.com/users/gmcgibbon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gmcgibbon/subscriptions","organizations_url":"https://api.github.com/users/gmcgibbon/orgs","repos_url":"https://api.github.com/users/gmcgibbon/repos","events_url":"https://api.github.com/users/gmcgibbon/events{/privacy}","received_events_url":"https://api.github.com/users/gmcgibbon/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rails/rails/issues/54297/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/rails/issues/54297/timeline","performed_via_github_app":null,"state_reason":"completed"}