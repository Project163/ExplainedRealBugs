[{"id":7891575590,"node_id":"RTE_lADNIULOV0dlO88AAAAB1l_jJg","url":"https://api.github.com/repos/rails/rails/issues/events/7891575590","actor":{"login":"monarchwadia","id":4856944,"node_id":"MDQ6VXNlcjQ4NTY5NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/4856944?v=4","gravatar_id":"","url":"https://api.github.com/users/monarchwadia","html_url":"https://github.com/monarchwadia","followers_url":"https://api.github.com/users/monarchwadia/followers","following_url":"https://api.github.com/users/monarchwadia/following{/other_user}","gists_url":"https://api.github.com/users/monarchwadia/gists{/gist_id}","starred_url":"https://api.github.com/users/monarchwadia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monarchwadia/subscriptions","organizations_url":"https://api.github.com/users/monarchwadia/orgs","repos_url":"https://api.github.com/users/monarchwadia/repos","events_url":"https://api.github.com/users/monarchwadia/events{/privacy}","received_events_url":"https://api.github.com/users/monarchwadia/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2022-11-25T10:05:34Z","rename":{"from":"Is `default` config being picked as an environment by rake db:create?","to":"Is `default` config being picked as an environment by `rake db:create`?"},"performed_via_github_app":null},{"id":7891583689,"node_id":"RTE_lADNIULOV0dlO88AAAAB1mACyQ","url":"https://api.github.com/repos/rails/rails/issues/events/7891583689","actor":{"login":"monarchwadia","id":4856944,"node_id":"MDQ6VXNlcjQ4NTY5NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/4856944?v=4","gravatar_id":"","url":"https://api.github.com/users/monarchwadia","html_url":"https://github.com/monarchwadia","followers_url":"https://api.github.com/users/monarchwadia/followers","following_url":"https://api.github.com/users/monarchwadia/following{/other_user}","gists_url":"https://api.github.com/users/monarchwadia/gists{/gist_id}","starred_url":"https://api.github.com/users/monarchwadia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monarchwadia/subscriptions","organizations_url":"https://api.github.com/users/monarchwadia/orgs","repos_url":"https://api.github.com/users/monarchwadia/repos","events_url":"https://api.github.com/users/monarchwadia/events{/privacy}","received_events_url":"https://api.github.com/users/monarchwadia/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2022-11-25T10:06:09Z","rename":{"from":"Is `default` config being picked as an environment by `rake db:create`?","to":"Is `rake db:create` accidentally treating the `default` config as an environment on par with `development`/`test`/`production`? "},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1327419085","html_url":"https://github.com/rails/rails/issues/46577#issuecomment-1327419085","issue_url":"https://api.github.com/repos/rails/rails/issues/46577","id":1327419085,"node_id":"IC_kwDNIULOTx7OzQ","user":{"login":"maxcal","id":765647,"node_id":"MDQ6VXNlcjc2NTY0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/765647?v=4","gravatar_id":"","url":"https://api.github.com/users/maxcal","html_url":"https://github.com/maxcal","followers_url":"https://api.github.com/users/maxcal/followers","following_url":"https://api.github.com/users/maxcal/following{/other_user}","gists_url":"https://api.github.com/users/maxcal/gists{/gist_id}","starred_url":"https://api.github.com/users/maxcal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maxcal/subscriptions","organizations_url":"https://api.github.com/users/maxcal/orgs","repos_url":"https://api.github.com/users/maxcal/repos","events_url":"https://api.github.com/users/maxcal/events{/privacy}","received_events_url":"https://api.github.com/users/maxcal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T12:32:29Z","updated_at":"2022-11-25T12:36:05Z","body":"Cannot be reproduced.  You're most likely mistakenly attributing an error with connecting your Postgres server to Rails - say for example that the server isn't actually running or can't be connected to with the default connection settings. \r\n\r\n````\r\nmaxcal@MSI ~/projects> rails _7.0.4_ new testapp --api --database=postgresql\r\n      create\r\n      create  README.md\r\n      create  Rakefile\r\n      create  .ruby-version\r\n      create  config.ru\r\n      create  .gitignore\r\n      create  .gitattributes\r\n      create  Gemfile\r\n         run  git init from \".\"\r\nInitialized empty Git repository in /home/maxcal/projects/testapp/.git/\r\n      create  app\r\n      create  app/assets/config/manifest.js\r\n      create  app/assets/stylesheets/application.css\r\n      create  app/channels/application_cable/channel.rb\r\n      create  app/channels/application_cable/connection.rb\r\n      create  app/controllers/application_controller.rb\r\n      create  app/helpers/application_helper.rb\r\n      create  app/jobs/application_job.rb\r\n      create  app/mailers/application_mailer.rb\r\n      create  app/models/application_record.rb\r\n      create  app/views/layouts/application.html.erb\r\n      create  app/views/layouts/mailer.html.erb\r\n      create  app/views/layouts/mailer.text.erb\r\n      create  app/assets/images\r\n      create  app/assets/images/.keep\r\n      create  app/controllers/concerns/.keep\r\n      create  app/models/concerns/.keep\r\n      create  bin\r\n      create  bin/rails\r\n      create  bin/rake\r\n      create  bin/setup\r\n      create  config\r\n      create  config/routes.rb\r\n      create  config/application.rb\r\n      create  config/environment.rb\r\n      create  config/cable.yml\r\n      create  config/puma.rb\r\n      create  config/storage.yml\r\n      create  config/environments\r\n      create  config/environments/development.rb\r\n      create  config/environments/production.rb\r\n      create  config/environments/test.rb\r\n      create  config/initializers\r\n      create  config/initializers/assets.rb\r\n      create  config/initializers/content_security_policy.rb\r\n      create  config/initializers/cors.rb\r\n      create  config/initializers/filter_parameter_logging.rb\r\n      create  config/initializers/inflections.rb\r\n      create  config/initializers/new_framework_defaults_7_0.rb\r\n      create  config/initializers/permissions_policy.rb\r\n      create  config/locales\r\n      create  config/locales/en.yml\r\n      create  config/master.key\r\n      append  .gitignore\r\n      create  config/boot.rb\r\n      create  config/database.yml\r\n      create  db\r\n      create  db/seeds.rb\r\n      create  lib\r\n      create  lib/tasks\r\n      create  lib/tasks/.keep\r\n      create  lib/assets\r\n      create  lib/assets/.keep\r\n      create  log\r\n      create  log/.keep\r\n      create  public\r\n      create  public/404.html\r\n      create  public/422.html\r\n      create  public/500.html\r\n      create  public/apple-touch-icon-precomposed.png\r\n      create  public/apple-touch-icon.png\r\n      create  public/favicon.ico\r\n      create  public/robots.txt\r\n      create  tmp\r\n      create  tmp/.keep\r\n      create  tmp/pids\r\n      create  tmp/pids/.keep\r\n      create  tmp/cache\r\n      create  tmp/cache/assets\r\n      create  vendor\r\n      create  vendor/.keep\r\n      create  test/fixtures/files\r\n      create  test/fixtures/files/.keep\r\n      create  test/controllers\r\n      create  test/controllers/.keep\r\n      create  test/mailers\r\n      create  test/mailers/.keep\r\n      create  test/models\r\n      create  test/models/.keep\r\n      create  test/helpers\r\n      create  test/helpers/.keep\r\n      create  test/integration\r\n      create  test/integration/.keep\r\n      create  test/channels/application_cable/connection_test.rb\r\n      create  test/test_helper.rb\r\n      create  storage\r\n      create  storage/.keep\r\n      create  tmp/storage\r\n      create  tmp/storage/.keep\r\n      remove  app/assets\r\n      remove  lib/assets\r\n      remove  tmp/cache/assets\r\n      remove  app/helpers\r\n      remove  test/helpers\r\n      remove  app/views/layouts/application.html.erb\r\n      remove  public/404.html\r\n      remove  public/422.html\r\n      remove  public/500.html\r\n      remove  public/apple-touch-icon-precomposed.png\r\n      remove  public/apple-touch-icon.png\r\n      remove  public/favicon.ico\r\n      remove  config/initializers/assets.rb\r\n      remove  app/assets/config/manifest.js\r\n      remove  app/assets/config\r\n      remove  app/assets/stylesheets/application.css\r\n      remove  config/initializers/content_security_policy.rb\r\n      remove  config/initializers/permissions_policy.rb\r\n      remove  config/initializers/new_framework_defaults_7_0.rb\r\n         run  bundle install\r\nFetching gem metadata from https://rubygems.org/...........\r\nResolving dependencies...\r\nUsing rake 13.0.6\r\nUsing concurrent-ruby 1.1.10\r\nUsing websocket-extensions 0.1.5\r\nUsing marcel 1.0.2\r\nUsing mini_mime 1.1.2\r\nUsing timeout 0.3.0\r\nUsing msgpack 1.6.0\r\nUsing bundler 2.2.25\r\nUsing rack 2.2.4\r\nUsing method_source 1.0.0\r\nUsing pg 1.4.5\r\nUsing thor 1.2.1\r\nUsing zeitwerk 2.6.6\r\nUsing i18n 1.12.0\r\nUsing tzinfo 2.0.5\r\nUsing websocket-driver 0.7.5\r\nUsing mail 2.7.1\r\nUsing net-protocol 0.1.3\r\nUsing bootsnap 1.14.0\r\nUsing rack-test 2.0.2\r\nUsing net-imap 0.3.1\r\nUsing net-pop 0.1.2\r\nUsing net-smtp 0.3.3\r\nUsing minitest 5.16.3\r\nUsing builder 3.2.4\r\nUsing activesupport 7.0.4\r\nUsing racc 1.6.0\r\nUsing globalid 1.0.0\r\nUsing io-console 0.5.11\r\nUsing nio4r 2.5.8\r\nUsing reline 0.3.1\r\nUsing puma 5.6.5\r\nUsing irb 1.5.0\r\nUsing nokogiri 1.13.9 (x86_64-linux)\r\nUsing debug 1.6.3\r\nUsing rails-dom-testing 2.0.3\r\nUsing activemodel 7.0.4\r\nUsing crass 1.0.6\r\nUsing activerecord 7.0.4\r\nUsing activejob 7.0.4\r\nUsing loofah 2.19.0\r\nUsing erubi 1.11.0\r\nUsing rails-html-sanitizer 1.4.3\r\nUsing actionview 7.0.4\r\nUsing actionpack 7.0.4\r\nUsing actioncable 7.0.4\r\nUsing activestorage 7.0.4\r\nUsing actionmailer 7.0.4\r\nUsing actionmailbox 7.0.4\r\nUsing actiontext 7.0.4\r\nUsing railties 7.0.4\r\nUsing rails 7.0.4\r\nBundle complete! 6 Gemfile dependencies, 52 gems now installed.\r\nUse `bundle info [gemname]` to see where a bundled gem is installed.\r\n         run  bundle binstubs bundler\r\nmaxcal@MSI ~/projects> cd testapp/\r\nmaxcal@MSI ~/p/testapp (main)> rails db:create; rails db:migrate\r\nCreated database 'testapp_development'\r\nCreated database 'testapp_test'\r\nmaxcal@MSI ~/p/testapp (main)> rails db\r\npsql (12.8 (Ubuntu 12.8-0ubuntu0.20.04.1))\r\nType \"help\" for help.\r\n\r\ntestapp_development=>\r\n````\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1327419085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"maxcal","id":765647,"node_id":"MDQ6VXNlcjc2NTY0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/765647?v=4","gravatar_id":"","url":"https://api.github.com/users/maxcal","html_url":"https://github.com/maxcal","followers_url":"https://api.github.com/users/maxcal/followers","following_url":"https://api.github.com/users/maxcal/following{/other_user}","gists_url":"https://api.github.com/users/maxcal/gists{/gist_id}","starred_url":"https://api.github.com/users/maxcal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maxcal/subscriptions","organizations_url":"https://api.github.com/users/maxcal/orgs","repos_url":"https://api.github.com/users/maxcal/repos","events_url":"https://api.github.com/users/maxcal/events{/privacy}","received_events_url":"https://api.github.com/users/maxcal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1327427846","html_url":"https://github.com/rails/rails/issues/46577#issuecomment-1327427846","issue_url":"https://api.github.com/repos/rails/rails/issues/46577","id":1327427846,"node_id":"IC_kwDNIULOTx7xBg","user":{"login":"monarchwadia","id":4856944,"node_id":"MDQ6VXNlcjQ4NTY5NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/4856944?v=4","gravatar_id":"","url":"https://api.github.com/users/monarchwadia","html_url":"https://github.com/monarchwadia","followers_url":"https://api.github.com/users/monarchwadia/followers","following_url":"https://api.github.com/users/monarchwadia/following{/other_user}","gists_url":"https://api.github.com/users/monarchwadia/gists{/gist_id}","starred_url":"https://api.github.com/users/monarchwadia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monarchwadia/subscriptions","organizations_url":"https://api.github.com/users/monarchwadia/orgs","repos_url":"https://api.github.com/users/monarchwadia/repos","events_url":"https://api.github.com/users/monarchwadia/events{/privacy}","received_events_url":"https://api.github.com/users/monarchwadia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T12:41:11Z","updated_at":"2022-11-25T12:41:11Z","body":"Thanks for checking & going through this with me. This can probably be closed.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1327427846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"monarchwadia","id":4856944,"node_id":"MDQ6VXNlcjQ4NTY5NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/4856944?v=4","gravatar_id":"","url":"https://api.github.com/users/monarchwadia","html_url":"https://github.com/monarchwadia","followers_url":"https://api.github.com/users/monarchwadia/followers","following_url":"https://api.github.com/users/monarchwadia/following{/other_user}","gists_url":"https://api.github.com/users/monarchwadia/gists{/gist_id}","starred_url":"https://api.github.com/users/monarchwadia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monarchwadia/subscriptions","organizations_url":"https://api.github.com/users/monarchwadia/orgs","repos_url":"https://api.github.com/users/monarchwadia/repos","events_url":"https://api.github.com/users/monarchwadia/events{/privacy}","received_events_url":"https://api.github.com/users/monarchwadia/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7892898951,"node_id":"CE_lADNIULOV0dlO88AAAAB1nQUhw","url":"https://api.github.com/repos/rails/rails/issues/events/7892898951","actor":{"login":"monarchwadia","id":4856944,"node_id":"MDQ6VXNlcjQ4NTY5NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/4856944?v=4","gravatar_id":"","url":"https://api.github.com/users/monarchwadia","html_url":"https://github.com/monarchwadia","followers_url":"https://api.github.com/users/monarchwadia/followers","following_url":"https://api.github.com/users/monarchwadia/following{/other_user}","gists_url":"https://api.github.com/users/monarchwadia/gists{/gist_id}","starred_url":"https://api.github.com/users/monarchwadia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monarchwadia/subscriptions","organizations_url":"https://api.github.com/users/monarchwadia/orgs","repos_url":"https://api.github.com/users/monarchwadia/repos","events_url":"https://api.github.com/users/monarchwadia/events{/privacy}","received_events_url":"https://api.github.com/users/monarchwadia/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-11-25T12:41:17Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1348884004","html_url":"https://github.com/rails/rails/issues/46577#issuecomment-1348884004","issue_url":"https://api.github.com/repos/rails/rails/issues/46577","id":1348884004,"node_id":"IC_kwDNIULOUGZWJA","user":{"login":"bensheldon","id":47554,"node_id":"MDQ6VXNlcjQ3NTU0","avatar_url":"https://avatars.githubusercontent.com/u/47554?v=4","gravatar_id":"","url":"https://api.github.com/users/bensheldon","html_url":"https://github.com/bensheldon","followers_url":"https://api.github.com/users/bensheldon/followers","following_url":"https://api.github.com/users/bensheldon/following{/other_user}","gists_url":"https://api.github.com/users/bensheldon/gists{/gist_id}","starred_url":"https://api.github.com/users/bensheldon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bensheldon/subscriptions","organizations_url":"https://api.github.com/users/bensheldon/orgs","repos_url":"https://api.github.com/users/bensheldon/repos","events_url":"https://api.github.com/users/bensheldon/events{/privacy}","received_events_url":"https://api.github.com/users/bensheldon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T16:00:07Z","updated_at":"2022-12-13T16:00:07Z","body":"I wanted to offer that this could be possible due to a misconfiguration and/or state leaking in from the environment. It's unlikely, but possible!\r\n\r\nIf you open up `rails c` you can inspect all of your database configurations with `ActiveRecord::Base.configurations.configs_for`. Here's an example from an application I work on:\r\n\r\n```ruby\r\n[5] pry(main)> ActiveRecord::Base.configurations.configs_for\r\n=> [#<ActiveRecord::DatabaseConfigurations::HashConfig:0x0000000147b99298\r\n  @configuration_hash=\r\n   {:adapter=>\"postgresql\", :encoding=>\"unicode\", :host=>\"localhost\", :pool=>10},\r\n  @env_name=\"default\",\r\n  @name=\"primary\">,\r\n #<ActiveRecord::DatabaseConfigurations::HashConfig:0x0000000147b98f78\r\n  @configuration_hash=\r\n   {:adapter=>\"postgresql\",\r\n    :encoding=>\"unicode\",\r\n    :host=>\"localhost\",\r\n    :pool=>10,\r\n    :database=>\"good_job_development\"},\r\n  @env_name=\"development\",\r\n  @name=\"primary\">,\r\n #<ActiveRecord::DatabaseConfigurations::HashConfig:0x0000000147b98d70\r\n  @configuration_hash=\r\n   {:adapter=>\"postgresql\",\r\n    :encoding=>\"unicode\",\r\n    :host=>\"localhost\",\r\n    :pool=>10,\r\n    :database=>\"good_job_test\",\r\n    :reaping_frequency=>0},\r\n  @env_name=\"test\",\r\n  @name=\"primary\">,\r\n #<ActiveRecord::DatabaseConfigurations::HashConfig:0x0000000147b98b18\r\n  @configuration_hash=\r\n   {:adapter=>\"postgresql\",\r\n    :encoding=>\"unicode\",\r\n    :host=>\"localhost\",\r\n    :pool=>10,\r\n    :database=>\"good_job_development\"},\r\n  @env_name=\"production\",\r\n  @name=\"primary\">,\r\n #<ActiveRecord::DatabaseConfigurations::UrlConfig:0x0000000147b988c0\r\n  @configuration_hash=\r\n   {:adapter=>\"postgresql\",\r\n    :encoding=>\"unicode\",\r\n    :host=>\"localhost\",\r\n    :pool=>10,\r\n    :database=>\"good_job_demo\",\r\n    :url=>nil},\r\n  @env_name=\"demo\",\r\n  @name=\"primary\",\r\n  @url=nil>]\r\n```\r\n\r\nYou'll notice that the `default` key _is_ present, which is how YAML anchors work (they aren't excluded from the deserealized output).  Digging into the Rails source, Rails will filter these items to exclude configurations environments that do not define a database value:\r\n\r\nhttps://github.com/rails/rails/blob/19b08e2924373fb59d4f446521917affc459ce07/activerecord/lib/active_record/tasks/database_tasks.rb#L574-L576\r\n\r\nWhile _my_ `default` environment configuration block doesn't define a `database` value, it's possible that somehow something (or several things) are leaking in from the environment. Could you share the output when you run:\r\n\r\n```ruby\r\nbin/rails runner \"pp ActiveRecord::Base.configurations.configs_for\"\r\n```\r\n\r\n...if you don't see a `database` value defined in the configuration block for `default` then I agree with @maxcal that this is likely a misattribution. But if you do, then I think it warrants further debugging.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1348884004/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bensheldon","id":47554,"node_id":"MDQ6VXNlcjQ3NTU0","avatar_url":"https://avatars.githubusercontent.com/u/47554?v=4","gravatar_id":"","url":"https://api.github.com/users/bensheldon","html_url":"https://github.com/bensheldon","followers_url":"https://api.github.com/users/bensheldon/followers","following_url":"https://api.github.com/users/bensheldon/following{/other_user}","gists_url":"https://api.github.com/users/bensheldon/gists{/gist_id}","starred_url":"https://api.github.com/users/bensheldon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bensheldon/subscriptions","organizations_url":"https://api.github.com/users/bensheldon/orgs","repos_url":"https://api.github.com/users/bensheldon/repos","events_url":"https://api.github.com/users/bensheldon/events{/privacy}","received_events_url":"https://api.github.com/users/bensheldon/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8027290897,"node_id":"MEE_lADNIULOV0dlO88AAAAB3na9EQ","url":"https://api.github.com/repos/rails/rails/issues/events/8027290897","actor":{"login":"maxcal","id":765647,"node_id":"MDQ6VXNlcjc2NTY0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/765647?v=4","gravatar_id":"","url":"https://api.github.com/users/maxcal","html_url":"https://github.com/maxcal","followers_url":"https://api.github.com/users/maxcal/followers","following_url":"https://api.github.com/users/maxcal/following{/other_user}","gists_url":"https://api.github.com/users/maxcal/gists{/gist_id}","starred_url":"https://api.github.com/users/maxcal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maxcal/subscriptions","organizations_url":"https://api.github.com/users/maxcal/orgs","repos_url":"https://api.github.com/users/maxcal/repos","events_url":"https://api.github.com/users/maxcal/events{/privacy}","received_events_url":"https://api.github.com/users/maxcal/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-12-13T16:00:08Z","performed_via_github_app":null},{"id":8027290904,"node_id":"SE_lADNIULOV0dlO88AAAAB3na9GA","url":"https://api.github.com/repos/rails/rails/issues/events/8027290904","actor":{"login":"maxcal","id":765647,"node_id":"MDQ6VXNlcjc2NTY0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/765647?v=4","gravatar_id":"","url":"https://api.github.com/users/maxcal","html_url":"https://github.com/maxcal","followers_url":"https://api.github.com/users/maxcal/followers","following_url":"https://api.github.com/users/maxcal/following{/other_user}","gists_url":"https://api.github.com/users/maxcal/gists{/gist_id}","starred_url":"https://api.github.com/users/maxcal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maxcal/subscriptions","organizations_url":"https://api.github.com/users/maxcal/orgs","repos_url":"https://api.github.com/users/maxcal/repos","events_url":"https://api.github.com/users/maxcal/events{/privacy}","received_events_url":"https://api.github.com/users/maxcal/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-12-13T16:00:08Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1351792366","html_url":"https://github.com/rails/rails/issues/46577#issuecomment-1351792366","issue_url":"https://api.github.com/repos/rails/rails/issues/46577","id":1351792366,"node_id":"IC_kwDNIULOUJK27g","user":{"login":"monarchwadia","id":4856944,"node_id":"MDQ6VXNlcjQ4NTY5NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/4856944?v=4","gravatar_id":"","url":"https://api.github.com/users/monarchwadia","html_url":"https://github.com/monarchwadia","followers_url":"https://api.github.com/users/monarchwadia/followers","following_url":"https://api.github.com/users/monarchwadia/following{/other_user}","gists_url":"https://api.github.com/users/monarchwadia/gists{/gist_id}","starred_url":"https://api.github.com/users/monarchwadia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monarchwadia/subscriptions","organizations_url":"https://api.github.com/users/monarchwadia/orgs","repos_url":"https://api.github.com/users/monarchwadia/repos","events_url":"https://api.github.com/users/monarchwadia/events{/privacy}","received_events_url":"https://api.github.com/users/monarchwadia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-14T17:13:00Z","updated_at":"2022-12-14T17:13:00Z","body":"Thanks @bensheldon , I just followed my repro steps from the first post and created a new Rails app using the commands...\r\n\r\n```shell\r\nrails new testapp --api --database=postgresql\r\ncd testapp\r\nrake db:create\r\n```\r\n\r\nWhich resulted in the same issue:\r\n\r\n```shell\r\n# after rake db:create\r\nWe could not find your database: postgres. Which can be found in the database configuration file located at config/database.yml.\r\n```\r\n\r\nMy output for `bin/rails runner \"pp ActiveRecord::Base.configurations.configs_for\"` is as follows\r\n\r\n```ruby\r\n# output for bin/rails runner \"pp ActiveRecord::Base.configurations.configs_for\"\r\n[#<ActiveRecord::DatabaseConfigurations::HashConfig:0x00007efe5e11cd68\r\n  @configuration_hash={:adapter=>\"postgresql\", :encoding=>\"unicode\", :pool=>5},\r\n  @env_name=\"default\",          \r\n  @name=\"primary\">,             \r\n #<ActiveRecord::DatabaseConfigurations::HashConfig:0x00007efe5e11cc50\r\n  @configuration_hash={:adapter=>\"postgresql\", :encoding=>\"unicode\", :pool=>5, :database=>\"testapp_development\"},\r\n  @env_name=\"development\",      \r\n  @name=\"primary\">,             \r\n #<ActiveRecord::DatabaseConfigurations::HashConfig:0x00007efe5e11cb88\r\n  @configuration_hash={:adapter=>\"postgresql\", :encoding=>\"unicode\", :pool=>5, :database=>\"testapp_test\"},\r\n  @env_name=\"test\",             \r\n  @name=\"primary\">,             \r\n #<ActiveRecord::DatabaseConfigurations::HashConfig:0x00007efe5e11cac0\r\n  @configuration_hash=\r\n   {:adapter=>\"postgresql\",\r\n    :encoding=>\"unicode\",\r\n    :pool=>5,\r\n    :database=>\"testapp_production\",\r\n    :username=>\"testapp\",\r\n    :password=>nil},\r\n  @env_name=\"production\",\r\n  @name=\"primary\">]\r\n\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1351792366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"monarchwadia","id":4856944,"node_id":"MDQ6VXNlcjQ4NTY5NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/4856944?v=4","gravatar_id":"","url":"https://api.github.com/users/monarchwadia","html_url":"https://github.com/monarchwadia","followers_url":"https://api.github.com/users/monarchwadia/followers","following_url":"https://api.github.com/users/monarchwadia/following{/other_user}","gists_url":"https://api.github.com/users/monarchwadia/gists{/gist_id}","starred_url":"https://api.github.com/users/monarchwadia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monarchwadia/subscriptions","organizations_url":"https://api.github.com/users/monarchwadia/orgs","repos_url":"https://api.github.com/users/monarchwadia/repos","events_url":"https://api.github.com/users/monarchwadia/events{/privacy}","received_events_url":"https://api.github.com/users/monarchwadia/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8039504886,"node_id":"MEE_lADNIULOV0dlO88AAAAB3zEb9g","url":"https://api.github.com/repos/rails/rails/issues/events/8039504886","actor":{"login":"bensheldon","id":47554,"node_id":"MDQ6VXNlcjQ3NTU0","avatar_url":"https://avatars.githubusercontent.com/u/47554?v=4","gravatar_id":"","url":"https://api.github.com/users/bensheldon","html_url":"https://github.com/bensheldon","followers_url":"https://api.github.com/users/bensheldon/followers","following_url":"https://api.github.com/users/bensheldon/following{/other_user}","gists_url":"https://api.github.com/users/bensheldon/gists{/gist_id}","starred_url":"https://api.github.com/users/bensheldon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bensheldon/subscriptions","organizations_url":"https://api.github.com/users/bensheldon/orgs","repos_url":"https://api.github.com/users/bensheldon/repos","events_url":"https://api.github.com/users/bensheldon/events{/privacy}","received_events_url":"https://api.github.com/users/bensheldon/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-12-14T17:13:00Z","performed_via_github_app":null},{"id":8039504900,"node_id":"SE_lADNIULOV0dlO88AAAAB3zEcBA","url":"https://api.github.com/repos/rails/rails/issues/events/8039504900","actor":{"login":"bensheldon","id":47554,"node_id":"MDQ6VXNlcjQ3NTU0","avatar_url":"https://avatars.githubusercontent.com/u/47554?v=4","gravatar_id":"","url":"https://api.github.com/users/bensheldon","html_url":"https://github.com/bensheldon","followers_url":"https://api.github.com/users/bensheldon/followers","following_url":"https://api.github.com/users/bensheldon/following{/other_user}","gists_url":"https://api.github.com/users/bensheldon/gists{/gist_id}","starred_url":"https://api.github.com/users/bensheldon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bensheldon/subscriptions","organizations_url":"https://api.github.com/users/bensheldon/orgs","repos_url":"https://api.github.com/users/bensheldon/repos","events_url":"https://api.github.com/users/bensheldon/events{/privacy}","received_events_url":"https://api.github.com/users/bensheldon/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-12-14T17:13:01Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1353379752","html_url":"https://github.com/rails/rails/issues/46577#issuecomment-1353379752","issue_url":"https://api.github.com/repos/rails/rails/issues/46577","id":1353379752,"node_id":"IC_kwDNIULOUKrvqA","user":{"login":"bensheldon","id":47554,"node_id":"MDQ6VXNlcjQ3NTU0","avatar_url":"https://avatars.githubusercontent.com/u/47554?v=4","gravatar_id":"","url":"https://api.github.com/users/bensheldon","html_url":"https://github.com/bensheldon","followers_url":"https://api.github.com/users/bensheldon/followers","following_url":"https://api.github.com/users/bensheldon/following{/other_user}","gists_url":"https://api.github.com/users/bensheldon/gists{/gist_id}","starred_url":"https://api.github.com/users/bensheldon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bensheldon/subscriptions","organizations_url":"https://api.github.com/users/bensheldon/orgs","repos_url":"https://api.github.com/users/bensheldon/repos","events_url":"https://api.github.com/users/bensheldon/events{/privacy}","received_events_url":"https://api.github.com/users/bensheldon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-15T16:44:29Z","updated_at":"2022-12-15T16:44:29Z","body":"I can reproduce this issue locally if I drop the default `postgres` database: `DROP DATABASE postgres;`.\r\n\r\nRails hardcodes/expects the presence of the `postgres` database, which is created by default by Postgres. If you're in a situation (Docker?) in which the database is in an unexpected configuration then the command will fail. \r\n\r\nhttps://github.com/rails/rails/blob/a289f4c127913fd36868e3e799999a5e32305248/activerecord/lib/active_record/tasks/postgresql_database_tasks.rb#L102-L104\r\n\r\nBackground: In order to create a database on Postgres, the connection must already be connected to an existing database. Here's a good explanation: https://dba.stackexchange.com/a/144289\r\n\r\nIf you're using the [Docker image](https://hub.docker.com/_/postgres), it's possible that the `postgres` database isn't created: the image creates a database named `POSTGRES_USER` if `POSTGRES_DB` is empty.\r\n\r\nI ultimately think the problem is on the application for misconfiguring Postgres and/or Rail's database configuration (all of my Rails-on-Docker experience is to have the Postgres docker image create the database rather than `rails db:create`).\r\n\r\nAnd I think the error message from Rails could be more accurate/helpful because the database _is not_ defined in `config/database.yml`\r\n\r\n ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1353379752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bensheldon","id":47554,"node_id":"MDQ6VXNlcjQ3NTU0","avatar_url":"https://avatars.githubusercontent.com/u/47554?v=4","gravatar_id":"","url":"https://api.github.com/users/bensheldon","html_url":"https://github.com/bensheldon","followers_url":"https://api.github.com/users/bensheldon/followers","following_url":"https://api.github.com/users/bensheldon/following{/other_user}","gists_url":"https://api.github.com/users/bensheldon/gists{/gist_id}","starred_url":"https://api.github.com/users/bensheldon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bensheldon/subscriptions","organizations_url":"https://api.github.com/users/bensheldon/orgs","repos_url":"https://api.github.com/users/bensheldon/repos","events_url":"https://api.github.com/users/bensheldon/events{/privacy}","received_events_url":"https://api.github.com/users/bensheldon/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1365375402","html_url":"https://github.com/rails/rails/issues/46577#issuecomment-1365375402","issue_url":"https://api.github.com/repos/rails/rails/issues/46577","id":1365375402,"node_id":"IC_kwDNIULOUWH5qg","user":{"login":"spryffee","id":33636673,"node_id":"MDQ6VXNlcjMzNjM2Njcz","avatar_url":"https://avatars.githubusercontent.com/u/33636673?v=4","gravatar_id":"","url":"https://api.github.com/users/spryffee","html_url":"https://github.com/spryffee","followers_url":"https://api.github.com/users/spryffee/followers","following_url":"https://api.github.com/users/spryffee/following{/other_user}","gists_url":"https://api.github.com/users/spryffee/gists{/gist_id}","starred_url":"https://api.github.com/users/spryffee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spryffee/subscriptions","organizations_url":"https://api.github.com/users/spryffee/orgs","repos_url":"https://api.github.com/users/spryffee/repos","events_url":"https://api.github.com/users/spryffee/events{/privacy}","received_events_url":"https://api.github.com/users/spryffee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-26T19:14:06Z","updated_at":"2022-12-26T19:14:06Z","body":"I'm also having this issue with Rails 7 on Ubuntu 22.04 with WSL2. Spent a lot of time to debug with no luck. The postgres database is in place by default. I was assuming that WSL connect to postgresql on Windows via Unix socket. However, I don't have any postgres installed on the Windows. I have more environments with same or similar setup but this is only magicly reproducible with Rails 7, nothing helps","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1365375402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"spryffee","id":33636673,"node_id":"MDQ6VXNlcjMzNjM2Njcz","avatar_url":"https://avatars.githubusercontent.com/u/33636673?v=4","gravatar_id":"","url":"https://api.github.com/users/spryffee","html_url":"https://github.com/spryffee","followers_url":"https://api.github.com/users/spryffee/followers","following_url":"https://api.github.com/users/spryffee/following{/other_user}","gists_url":"https://api.github.com/users/spryffee/gists{/gist_id}","starred_url":"https://api.github.com/users/spryffee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spryffee/subscriptions","organizations_url":"https://api.github.com/users/spryffee/orgs","repos_url":"https://api.github.com/users/spryffee/repos","events_url":"https://api.github.com/users/spryffee/events{/privacy}","received_events_url":"https://api.github.com/users/spryffee/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1384735677","html_url":"https://github.com/rails/rails/issues/46577#issuecomment-1384735677","issue_url":"https://api.github.com/repos/rails/rails/issues/46577","id":1384735677,"node_id":"IC_kwDNIULOUoljvQ","user":{"login":"Shedrack-Sunday","id":50990925,"node_id":"MDQ6VXNlcjUwOTkwOTI1","avatar_url":"https://avatars.githubusercontent.com/u/50990925?v=4","gravatar_id":"","url":"https://api.github.com/users/Shedrack-Sunday","html_url":"https://github.com/Shedrack-Sunday","followers_url":"https://api.github.com/users/Shedrack-Sunday/followers","following_url":"https://api.github.com/users/Shedrack-Sunday/following{/other_user}","gists_url":"https://api.github.com/users/Shedrack-Sunday/gists{/gist_id}","starred_url":"https://api.github.com/users/Shedrack-Sunday/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Shedrack-Sunday/subscriptions","organizations_url":"https://api.github.com/users/Shedrack-Sunday/orgs","repos_url":"https://api.github.com/users/Shedrack-Sunday/repos","events_url":"https://api.github.com/users/Shedrack-Sunday/events{/privacy}","received_events_url":"https://api.github.com/users/Shedrack-Sunday/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T01:46:15Z","updated_at":"2023-01-17T01:46:15Z","body":"Same issues with @spryffee. Also running on WSL, and can't seem to figure it out. Did you find a solution @spryffee ?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1384735677/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Shedrack-Sunday","id":50990925,"node_id":"MDQ6VXNlcjUwOTkwOTI1","avatar_url":"https://avatars.githubusercontent.com/u/50990925?v=4","gravatar_id":"","url":"https://api.github.com/users/Shedrack-Sunday","html_url":"https://github.com/Shedrack-Sunday","followers_url":"https://api.github.com/users/Shedrack-Sunday/followers","following_url":"https://api.github.com/users/Shedrack-Sunday/following{/other_user}","gists_url":"https://api.github.com/users/Shedrack-Sunday/gists{/gist_id}","starred_url":"https://api.github.com/users/Shedrack-Sunday/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Shedrack-Sunday/subscriptions","organizations_url":"https://api.github.com/users/Shedrack-Sunday/orgs","repos_url":"https://api.github.com/users/Shedrack-Sunday/repos","events_url":"https://api.github.com/users/Shedrack-Sunday/events{/privacy}","received_events_url":"https://api.github.com/users/Shedrack-Sunday/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8241032674,"node_id":"MEE_lADNIULOV0dlO88AAAAB6zQt4g","url":"https://api.github.com/repos/rails/rails/issues/events/8241032674","actor":{"login":"spryffee","id":33636673,"node_id":"MDQ6VXNlcjMzNjM2Njcz","avatar_url":"https://avatars.githubusercontent.com/u/33636673?v=4","gravatar_id":"","url":"https://api.github.com/users/spryffee","html_url":"https://github.com/spryffee","followers_url":"https://api.github.com/users/spryffee/followers","following_url":"https://api.github.com/users/spryffee/following{/other_user}","gists_url":"https://api.github.com/users/spryffee/gists{/gist_id}","starred_url":"https://api.github.com/users/spryffee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spryffee/subscriptions","organizations_url":"https://api.github.com/users/spryffee/orgs","repos_url":"https://api.github.com/users/spryffee/repos","events_url":"https://api.github.com/users/spryffee/events{/privacy}","received_events_url":"https://api.github.com/users/spryffee/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-01-17T01:46:15Z","performed_via_github_app":null},{"id":8241032678,"node_id":"SE_lADNIULOV0dlO88AAAAB6zQt5g","url":"https://api.github.com/repos/rails/rails/issues/events/8241032678","actor":{"login":"spryffee","id":33636673,"node_id":"MDQ6VXNlcjMzNjM2Njcz","avatar_url":"https://avatars.githubusercontent.com/u/33636673?v=4","gravatar_id":"","url":"https://api.github.com/users/spryffee","html_url":"https://github.com/spryffee","followers_url":"https://api.github.com/users/spryffee/followers","following_url":"https://api.github.com/users/spryffee/following{/other_user}","gists_url":"https://api.github.com/users/spryffee/gists{/gist_id}","starred_url":"https://api.github.com/users/spryffee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spryffee/subscriptions","organizations_url":"https://api.github.com/users/spryffee/orgs","repos_url":"https://api.github.com/users/spryffee/repos","events_url":"https://api.github.com/users/spryffee/events{/privacy}","received_events_url":"https://api.github.com/users/spryffee/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-01-17T01:46:15Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1384765510","html_url":"https://github.com/rails/rails/issues/46577#issuecomment-1384765510","issue_url":"https://api.github.com/repos/rails/rails/issues/46577","id":1384765510,"node_id":"IC_kwDNIULOUonYRg","user":{"login":"bensheldon","id":47554,"node_id":"MDQ6VXNlcjQ3NTU0","avatar_url":"https://avatars.githubusercontent.com/u/47554?v=4","gravatar_id":"","url":"https://api.github.com/users/bensheldon","html_url":"https://github.com/bensheldon","followers_url":"https://api.github.com/users/bensheldon/followers","following_url":"https://api.github.com/users/bensheldon/following{/other_user}","gists_url":"https://api.github.com/users/bensheldon/gists{/gist_id}","starred_url":"https://api.github.com/users/bensheldon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bensheldon/subscriptions","organizations_url":"https://api.github.com/users/bensheldon/orgs","repos_url":"https://api.github.com/users/bensheldon/repos","events_url":"https://api.github.com/users/bensheldon/events{/privacy}","received_events_url":"https://api.github.com/users/bensheldon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T02:41:57Z","updated_at":"2023-01-17T02:41:57Z","body":"Here is my complete error output. Do you see the part at the very bottom that says \"Caused by:\" where it outputs the initial exception (`PG::ConnectionBad: connection to server at \"::1\", port 5432 failed: FATAL:  database \"postgres\" does not exist`). Can you share what the exception message is that you're seeing? \r\n\r\n```ruby\r\n‚ùØ bin/rails db:create\r\n\r\nWe could not find your database: postgres. Which can be found in the database configuration file located at config/database.yml.\r\n\r\nTo resolve this issue:\r\n\r\n- Did you create the database for this app, or delete it? You may need to create your database.\r\n- Has the database name changed? Check your database.yml config has the correct database name.\r\n\r\nTo create your database, run:\r\n\r\n        bin/rails db:create\r\nCouldn't create 'good_job_development' database. Please check your configuration.\r\nrails aborted!\r\nActiveRecord::NoDatabaseError: We could not find your database: postgres. Which can be found in the database configuration file located at config/database.yml.\r\n\r\nTo resolve this issue:\r\n\r\n- Did you create the database for this app, or delete it? You may need to create your database.\r\n- Has the database name changed? Check your database.yml config has the correct database name.\r\n\r\nTo create your database, run:\r\n\r\n        bin/rails db:create\r\n\r\n\r\nCaused by:\r\nPG::ConnectionBad: connection to server at \"::1\", port 5432 failed: FATAL:  database \"postgres\" does not exist\r\n\r\nTasks: TOP => db:create\r\n(See full trace by running task with --trace)\r\n```\r\n\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1384765510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bensheldon","id":47554,"node_id":"MDQ6VXNlcjQ3NTU0","avatar_url":"https://avatars.githubusercontent.com/u/47554?v=4","gravatar_id":"","url":"https://api.github.com/users/bensheldon","html_url":"https://github.com/bensheldon","followers_url":"https://api.github.com/users/bensheldon/followers","following_url":"https://api.github.com/users/bensheldon/following{/other_user}","gists_url":"https://api.github.com/users/bensheldon/gists{/gist_id}","starred_url":"https://api.github.com/users/bensheldon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bensheldon/subscriptions","organizations_url":"https://api.github.com/users/bensheldon/orgs","repos_url":"https://api.github.com/users/bensheldon/repos","events_url":"https://api.github.com/users/bensheldon/events{/privacy}","received_events_url":"https://api.github.com/users/bensheldon/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1384767813","html_url":"https://github.com/rails/rails/issues/46577#issuecomment-1384767813","issue_url":"https://api.github.com/repos/rails/rails/issues/46577","id":1384767813,"node_id":"IC_kwDNIULOUonhRQ","user":{"login":"Shedrack-Sunday","id":50990925,"node_id":"MDQ6VXNlcjUwOTkwOTI1","avatar_url":"https://avatars.githubusercontent.com/u/50990925?v=4","gravatar_id":"","url":"https://api.github.com/users/Shedrack-Sunday","html_url":"https://github.com/Shedrack-Sunday","followers_url":"https://api.github.com/users/Shedrack-Sunday/followers","following_url":"https://api.github.com/users/Shedrack-Sunday/following{/other_user}","gists_url":"https://api.github.com/users/Shedrack-Sunday/gists{/gist_id}","starred_url":"https://api.github.com/users/Shedrack-Sunday/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Shedrack-Sunday/subscriptions","organizations_url":"https://api.github.com/users/Shedrack-Sunday/orgs","repos_url":"https://api.github.com/users/Shedrack-Sunday/repos","events_url":"https://api.github.com/users/Shedrack-Sunday/events{/privacy}","received_events_url":"https://api.github.com/users/Shedrack-Sunday/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T02:46:56Z","updated_at":"2023-01-17T02:46:56Z","body":"> Here is my complete error output. Do you see the part at the very bottom that says \"Caused by:\" where it outputs the initial exception (`PG::ConnectionBad: connection to server at \"::1\", port 5432 failed: FATAL: database \"postgres\" does not exist`). Can you share what the exception message is that you're seeing?\r\n> \r\n> ```ruby\r\n> ‚ùØ bin/rails db:create\r\n> \r\n> We could not find your database: postgres. Which can be found in the database configuration file located at config/database.yml.\r\n> \r\n> To resolve this issue:\r\n> \r\n> - Did you create the database for this app, or delete it? You may need to create your database.\r\n> - Has the database name changed? Check your database.yml config has the correct database name.\r\n> \r\n> To create your database, run:\r\n> \r\n>         bin/rails db:create\r\n> Couldn't create 'good_job_development' database. Please check your configuration.\r\n> rails aborted!\r\n> ActiveRecord::NoDatabaseError: We could not find your database: postgres. Which can be found in the database configuration file located at config/database.yml.\r\n> \r\n> To resolve this issue:\r\n> \r\n> - Did you create the database for this app, or delete it? You may need to create your database.\r\n> - Has the database name changed? Check your database.yml config has the correct database name.\r\n> \r\n> To create your database, run:\r\n> \r\n>         bin/rails db:create\r\n> \r\n> \r\n> Caused by:\r\n> PG::ConnectionBad: connection to server at \"::1\", port 5432 failed: FATAL:  database \"postgres\" does not exist\r\n> \r\n> Tasks: TOP => db:create\r\n> (See full trace by running task with --trace)\r\n> ```\r\n\r\nhere's mine:\r\n![image](https://user-images.githubusercontent.com/50990925/212798652-2ad6fca8-f68a-4437-a40f-09e5103a5529.png)\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1384767813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Shedrack-Sunday","id":50990925,"node_id":"MDQ6VXNlcjUwOTkwOTI1","avatar_url":"https://avatars.githubusercontent.com/u/50990925?v=4","gravatar_id":"","url":"https://api.github.com/users/Shedrack-Sunday","html_url":"https://github.com/Shedrack-Sunday","followers_url":"https://api.github.com/users/Shedrack-Sunday/followers","following_url":"https://api.github.com/users/Shedrack-Sunday/following{/other_user}","gists_url":"https://api.github.com/users/Shedrack-Sunday/gists{/gist_id}","starred_url":"https://api.github.com/users/Shedrack-Sunday/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Shedrack-Sunday/subscriptions","organizations_url":"https://api.github.com/users/Shedrack-Sunday/orgs","repos_url":"https://api.github.com/users/Shedrack-Sunday/repos","events_url":"https://api.github.com/users/Shedrack-Sunday/events{/privacy}","received_events_url":"https://api.github.com/users/Shedrack-Sunday/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/1384781779","html_url":"https://github.com/rails/rails/issues/46577#issuecomment-1384781779","issue_url":"https://api.github.com/repos/rails/rails/issues/46577","id":1384781779,"node_id":"IC_kwDNIULOUooX0w","user":{"login":"bensheldon","id":47554,"node_id":"MDQ6VXNlcjQ3NTU0","avatar_url":"https://avatars.githubusercontent.com/u/47554?v=4","gravatar_id":"","url":"https://api.github.com/users/bensheldon","html_url":"https://github.com/bensheldon","followers_url":"https://api.github.com/users/bensheldon/followers","following_url":"https://api.github.com/users/bensheldon/following{/other_user}","gists_url":"https://api.github.com/users/bensheldon/gists{/gist_id}","starred_url":"https://api.github.com/users/bensheldon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bensheldon/subscriptions","organizations_url":"https://api.github.com/users/bensheldon/orgs","repos_url":"https://api.github.com/users/bensheldon/repos","events_url":"https://api.github.com/users/bensheldon/events{/privacy}","received_events_url":"https://api.github.com/users/bensheldon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T03:14:55Z","updated_at":"2023-01-17T03:14:55Z","body":"@Shedrack-Sunday Thank you! That's really helpful, and also a different error than we identified earlier.\r\n\r\nJust to summarize, I think there is a Rails bug here, which is specifically that Rails is providing an inaccurate error message and masking (or distracting from) the underlying error message.\r\n\r\n...and then there are the two (so far!) system configuration problems, that are outside the scope of the Rails issue and the workaround is to ignore everything above the \"Caused By\" part of the output and instead try to address:\r\n\r\n- Not having a `postgres` database\r\n- Not being able to connect to Postgresql from WSL\r\n\r\n---\r\n\r\nJust to focus on the inaccurate error message, I think this is because the logic is keying off of the presence of the `conn_params[:dbname]` which is `postgres` when trying to `db:create` and thus always outputting the first branch of this logic because the message will very frequently contain the fragment `postgres` regardless of the specifics of the message:\r\n\r\nhttps://github.com/rails/rails/blob/03a1da9c34f6a86d2117fe87f1e60b0259d32337/activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb#L68-L78\r\n\r\n\r\n\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/1384781779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bensheldon","id":47554,"node_id":"MDQ6VXNlcjQ3NTU0","avatar_url":"https://avatars.githubusercontent.com/u/47554?v=4","gravatar_id":"","url":"https://api.github.com/users/bensheldon","html_url":"https://github.com/bensheldon","followers_url":"https://api.github.com/users/bensheldon/followers","following_url":"https://api.github.com/users/bensheldon/following{/other_user}","gists_url":"https://api.github.com/users/bensheldon/gists{/gist_id}","starred_url":"https://api.github.com/users/bensheldon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bensheldon/subscriptions","organizations_url":"https://api.github.com/users/bensheldon/orgs","repos_url":"https://api.github.com/users/bensheldon/repos","events_url":"https://api.github.com/users/bensheldon/events{/privacy}","received_events_url":"https://api.github.com/users/bensheldon/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8241331235,"node_id":"MEE_lADNIULOV0dlO88AAAAB6zi8Iw","url":"https://api.github.com/repos/rails/rails/issues/events/8241331235","actor":{"login":"Shedrack-Sunday","id":50990925,"node_id":"MDQ6VXNlcjUwOTkwOTI1","avatar_url":"https://avatars.githubusercontent.com/u/50990925?v=4","gravatar_id":"","url":"https://api.github.com/users/Shedrack-Sunday","html_url":"https://github.com/Shedrack-Sunday","followers_url":"https://api.github.com/users/Shedrack-Sunday/followers","following_url":"https://api.github.com/users/Shedrack-Sunday/following{/other_user}","gists_url":"https://api.github.com/users/Shedrack-Sunday/gists{/gist_id}","starred_url":"https://api.github.com/users/Shedrack-Sunday/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Shedrack-Sunday/subscriptions","organizations_url":"https://api.github.com/users/Shedrack-Sunday/orgs","repos_url":"https://api.github.com/users/Shedrack-Sunday/repos","events_url":"https://api.github.com/users/Shedrack-Sunday/events{/privacy}","received_events_url":"https://api.github.com/users/Shedrack-Sunday/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-01-17T03:14:55Z","performed_via_github_app":null},{"id":8241331237,"node_id":"SE_lADNIULOV0dlO88AAAAB6zi8JQ","url":"https://api.github.com/repos/rails/rails/issues/events/8241331237","actor":{"login":"Shedrack-Sunday","id":50990925,"node_id":"MDQ6VXNlcjUwOTkwOTI1","avatar_url":"https://avatars.githubusercontent.com/u/50990925?v=4","gravatar_id":"","url":"https://api.github.com/users/Shedrack-Sunday","html_url":"https://github.com/Shedrack-Sunday","followers_url":"https://api.github.com/users/Shedrack-Sunday/followers","following_url":"https://api.github.com/users/Shedrack-Sunday/following{/other_user}","gists_url":"https://api.github.com/users/Shedrack-Sunday/gists{/gist_id}","starred_url":"https://api.github.com/users/Shedrack-Sunday/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Shedrack-Sunday/subscriptions","organizations_url":"https://api.github.com/users/Shedrack-Sunday/orgs","repos_url":"https://api.github.com/users/Shedrack-Sunday/repos","events_url":"https://api.github.com/users/Shedrack-Sunday/events{/privacy}","received_events_url":"https://api.github.com/users/Shedrack-Sunday/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-01-17T03:14:55Z","performed_via_github_app":null},{"actor":{"login":"bensheldon","id":47554,"node_id":"MDQ6VXNlcjQ3NTU0","avatar_url":"https://avatars.githubusercontent.com/u/47554?v=4","gravatar_id":"","url":"https://api.github.com/users/bensheldon","html_url":"https://github.com/bensheldon","followers_url":"https://api.github.com/users/bensheldon/followers","following_url":"https://api.github.com/users/bensheldon/following{/other_user}","gists_url":"https://api.github.com/users/bensheldon/gists{/gist_id}","starred_url":"https://api.github.com/users/bensheldon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bensheldon/subscriptions","organizations_url":"https://api.github.com/users/bensheldon/orgs","repos_url":"https://api.github.com/users/bensheldon/repos","events_url":"https://api.github.com/users/bensheldon/events{/privacy}","received_events_url":"https://api.github.com/users/bensheldon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T03:51:18Z","updated_at":"2023-01-17T03:51:18Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rails/rails/issues/47028","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/47028/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/47028/comments","events_url":"https://api.github.com/repos/rails/rails/issues/47028/events","html_url":"https://github.com/rails/rails/pull/47028","id":1535736714,"node_id":"PR_kwDNIULOR4ItWg","number":47028,"title":"Fix inaccurate error message when connecting to `postgres` database","user":{"login":"bensheldon","id":47554,"node_id":"MDQ6VXNlcjQ3NTU0","avatar_url":"https://avatars.githubusercontent.com/u/47554?v=4","gravatar_id":"","url":"https://api.github.com/users/bensheldon","html_url":"https://github.com/bensheldon","followers_url":"https://api.github.com/users/bensheldon/followers","following_url":"https://api.github.com/users/bensheldon/following{/other_user}","gists_url":"https://api.github.com/users/bensheldon/gists{/gist_id}","starred_url":"https://api.github.com/users/bensheldon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bensheldon/subscriptions","organizations_url":"https://api.github.com/users/bensheldon/orgs","repos_url":"https://api.github.com/users/bensheldon/repos","events_url":"https://api.github.com/users/bensheldon/events{/privacy}","received_events_url":"https://api.github.com/users/bensheldon/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":107191,"node_id":"MDU6TGFiZWwxMDcxOTE=","url":"https://api.github.com/repos/rails/rails/labels/activerecord","name":"activerecord","color":"0b02e1","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-01-17T03:51:18Z","updated_at":"2023-01-27T23:09:47Z","closed_at":"2023-01-20T22:25:33Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":8514,"node_id":"MDEwOlJlcG9zaXRvcnk4NTE0","name":"rails","full_name":"rails/rails","private":false,"owner":{"login":"rails","id":4223,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQyMjM=","avatar_url":"https://avatars.githubusercontent.com/u/4223?v=4","gravatar_id":"","url":"https://api.github.com/users/rails","html_url":"https://github.com/rails","followers_url":"https://api.github.com/users/rails/followers","following_url":"https://api.github.com/users/rails/following{/other_user}","gists_url":"https://api.github.com/users/rails/gists{/gist_id}","starred_url":"https://api.github.com/users/rails/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rails/subscriptions","organizations_url":"https://api.github.com/users/rails/orgs","repos_url":"https://api.github.com/users/rails/repos","events_url":"https://api.github.com/users/rails/events{/privacy}","received_events_url":"https://api.github.com/users/rails/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rails/rails","description":"Ruby on Rails","fork":false,"url":"https://api.github.com/repos/rails/rails","forks_url":"https://api.github.com/repos/rails/rails/forks","keys_url":"https://api.github.com/repos/rails/rails/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rails/rails/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rails/rails/teams","hooks_url":"https://api.github.com/repos/rails/rails/hooks","issue_events_url":"https://api.github.com/repos/rails/rails/issues/events{/number}","events_url":"https://api.github.com/repos/rails/rails/events","assignees_url":"https://api.github.com/repos/rails/rails/assignees{/user}","branches_url":"https://api.github.com/repos/rails/rails/branches{/branch}","tags_url":"https://api.github.com/repos/rails/rails/tags","blobs_url":"https://api.github.com/repos/rails/rails/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rails/rails/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rails/rails/git/refs{/sha}","trees_url":"https://api.github.com/repos/rails/rails/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rails/rails/statuses/{sha}","languages_url":"https://api.github.com/repos/rails/rails/languages","stargazers_url":"https://api.github.com/repos/rails/rails/stargazers","contributors_url":"https://api.github.com/repos/rails/rails/contributors","subscribers_url":"https://api.github.com/repos/rails/rails/subscribers","subscription_url":"https://api.github.com/repos/rails/rails/subscription","commits_url":"https://api.github.com/repos/rails/rails/commits{/sha}","git_commits_url":"https://api.github.com/repos/rails/rails/git/commits{/sha}","comments_url":"https://api.github.com/repos/rails/rails/comments{/number}","issue_comment_url":"https://api.github.com/repos/rails/rails/issues/comments{/number}","contents_url":"https://api.github.com/repos/rails/rails/contents/{+path}","compare_url":"https://api.github.com/repos/rails/rails/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rails/rails/merges","archive_url":"https://api.github.com/repos/rails/rails/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rails/rails/downloads","issues_url":"https://api.github.com/repos/rails/rails/issues{/number}","pulls_url":"https://api.github.com/repos/rails/rails/pulls{/number}","milestones_url":"https://api.github.com/repos/rails/rails/milestones{/number}","notifications_url":"https://api.github.com/repos/rails/rails/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rails/rails/labels{/name}","releases_url":"https://api.github.com/repos/rails/rails/releases{/id}","deployments_url":"https://api.github.com/repos/rails/rails/deployments","created_at":"2008-04-11T02:19:47Z","updated_at":"2025-11-10T02:03:47Z","pushed_at":"2025-11-10T00:33:52Z","git_url":"git://github.com/rails/rails.git","ssh_url":"git@github.com:rails/rails.git","clone_url":"https://github.com/rails/rails.git","svn_url":"https://github.com/rails/rails","homepage":"https://rubyonrails.org","size":271619,"stargazers_count":57840,"watchers_count":57840,"language":"Ruby","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":22025,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1341,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["activejob","activerecord","framework","html","mvc","rails","ruby"],"visibility":"public","forks":22025,"open_issues":1341,"watchers":57840,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rails/rails/pulls/47028","html_url":"https://github.com/rails/rails/pull/47028","diff_url":"https://github.com/rails/rails/pull/47028.diff","patch_url":"https://github.com/rails/rails/pull/47028.patch","merged_at":"2023-01-20T22:25:32Z"},"body":"<!--\r\nThanks for contributing to Rails!\r\n\r\nPlease do not make *Draft* pull requests, as they still send\r\nnotifications to everyone watching the Rails repo.\r\n\r\nCreate a pull request when it is ready for review and feedback\r\nfrom the Rails team :).\r\n\r\nIf your pull request affects documentation or any non-code\r\nchanges, guidelines for those changes are [available\r\nhere](https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#contributing-to-the-rails-documentation)\r\n\r\nAbout this template\r\n\r\nThe following template aims to help contributors write a good description for their pull requests.\r\nWe'd like you to provide a description of the changes in your pull request (i.e. bugs fixed or features added), motivation behind the changes, and complete the checklist below before opening a pull request.\r\n\r\nFeel free to discard it if you need to (e.g. when you just fix a typo). -->\r\n\r\n### Motivation / Background\r\n\r\n<!--\r\nDescribe why this Pull Request needs to be merged. What bug have you fixed? What feature have you added? Why is it important?\r\nIf you are fixing a specific issue, include \"Fixes #ISSUE\" (replace with the issue number, remove the quotes) and the issue will be linked to this PR.\r\n-->\r\n\r\nFixes #46577\r\n\r\n### Detail\r\n\r\nThis Pull Request directly surfaces a Postgres connection error message when the database being connected to is named `postgres`. Prior to this, the connection error handling logic would almost always choose the same path and provide this inaccurate message:\r\n\r\n> We could not find your database: postgres. Which can be found in the database configuration file located at config/database.yml.\r\n\r\nThis situation occurs when running `bin/rails db:create`. Rails must connect to an existing database in order to create the new database. Rails chooses the (generally present/default) `postgres` database:\r\n\r\nhttps://github.com/rails/rails/blob/a289f4c127913fd36868e3e799999a5e32305248/activerecord/lib/active_record/tasks/postgresql_database_tasks.rb#L102-L104\r\n\r\n\r\n\r\n### Additional information\r\n\r\n<!-- Provide additional information such as benchmarks, reference to other repositories or alternative solutions. -->\r\n\r\n### Checklist\r\n\r\nBefore submitting the PR make sure the following are checked:\r\n\r\n* [x] This Pull Request is related to one change. Changes that are unrelated should be opened in separate PRs.\r\n* [x] Commit message has a detailed description of what changed and why. If this PR fixes a related issue include it in the commit message. Ex: `[Fix #issue-number]`\r\n* [x] Tests are added or updated if you fix a bug or add a feature.\r\n* [x] CHANGELOG files are updated for the changed libraries if there is a behavior change or additional feature. Minor bug fixes and documentation changes should not be included.\r\n","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/47028/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/rails/issues/47028/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":8241448080,"node_id":"REFE_lADNIULOV0dlO88AAAAB6zqEkA","url":"https://api.github.com/repos/rails/rails/issues/events/8241448080","actor":{"login":"bensheldon","id":47554,"node_id":"MDQ6VXNlcjQ3NTU0","avatar_url":"https://avatars.githubusercontent.com/u/47554?v=4","gravatar_id":"","url":"https://api.github.com/users/bensheldon","html_url":"https://github.com/bensheldon","followers_url":"https://api.github.com/users/bensheldon/followers","following_url":"https://api.github.com/users/bensheldon/following{/other_user}","gists_url":"https://api.github.com/users/bensheldon/gists{/gist_id}","starred_url":"https://api.github.com/users/bensheldon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bensheldon/subscriptions","organizations_url":"https://api.github.com/users/bensheldon/orgs","repos_url":"https://api.github.com/users/bensheldon/repos","events_url":"https://api.github.com/users/bensheldon/events{/privacy}","received_events_url":"https://api.github.com/users/bensheldon/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"68359806638811a36ea94a8983ea50150919c6fb","commit_url":"https://api.github.com/repos/bensheldon/rails/commits/68359806638811a36ea94a8983ea50150919c6fb","created_at":"2023-01-17T03:53:02Z","performed_via_github_app":null}]