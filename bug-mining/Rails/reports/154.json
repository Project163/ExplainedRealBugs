{"url":"https://api.github.com/repos/rails/rails/issues/53407","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/53407/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/53407/comments","events_url":"https://api.github.com/repos/rails/rails/issues/53407/events","html_url":"https://github.com/rails/rails/issues/53407","id":2604087775,"node_id":"I_kwDNIULOmzc53w","number":53407,"title":"Defining `enum` with value is a keyword argument doesn't work with Rails 8.0.0.rc1  ","user":{"login":"y-yagi","id":987638,"node_id":"MDQ6VXNlcjk4NzYzOA==","avatar_url":"https://avatars.githubusercontent.com/u/987638?v=4","gravatar_id":"","url":"https://api.github.com/users/y-yagi","html_url":"https://github.com/y-yagi","followers_url":"https://api.github.com/users/y-yagi/followers","following_url":"https://api.github.com/users/y-yagi/following{/other_user}","gists_url":"https://api.github.com/users/y-yagi/gists{/gist_id}","starred_url":"https://api.github.com/users/y-yagi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/y-yagi/subscriptions","organizations_url":"https://api.github.com/users/y-yagi/orgs","repos_url":"https://api.github.com/users/y-yagi/repos","events_url":"https://api.github.com/users/y-yagi/events{/privacy}","received_events_url":"https://api.github.com/users/y-yagi/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-10-22T02:55:20Z","updated_at":"2024-10-22T05:05:41Z","closed_at":"2024-10-22T05:05:41Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Steps to reproduce\r\n\r\nUntil Rails 7.2, we can define `enum` with value is a keyword argument like the following script. \r\n\r\n```ruby\r\n# frozen_string_literal: true\r\n\r\nrequire \"bundler/inline\"\r\n\r\ngemfile(true) do\r\n  source \"https://rubygems.org\"\r\n\r\n  gem \"rails\", \"7.2.1\"\r\n  # gem \"rails\", \"8.0.0.rc1\"\r\n  gem \"sqlite3\"\r\nend\r\n\r\nrequire \"active_record\"\r\nrequire \"minitest/autorun\"\r\nrequire \"logger\"\r\n\r\nActiveRecord::Base.establish_connection(adapter: \"sqlite3\", database: \":memory:\")\r\nActiveRecord::Base.logger = Logger.new(STDOUT)\r\n\r\nActiveRecord::Schema.define do\r\n  create_table :posts, force: true do |t|\r\n    t.integer :status\r\n  end\r\nend\r\n\r\nclass Post < ActiveRecord::Base\r\n  enum :status, active: 0, archived: 1\r\nend\r\n\r\nclass BugTest < ActiveSupport::TestCase\r\n  def test_association_stuff\r\n    assert_nothing_raised do\r\n      Post.create!\r\n    end\r\n  end\r\nend\r\n```\r\n\r\nThis is documented behavior. \r\nhttps://github.com/rails/rails/blob/546ca81125749e43e30de20684913a8385deafb9/activerecord/lib/active_record/enum.rb#L63-L72 \r\n\r\nI know defining enums with keywords args was deprecated in Rails 7.2, but that deprecation didn't cover that case. \r\nSo in the above example, the deprecation warning isn't shown.\r\n\r\nRelated with #50987, b9226a68bb18283f9f80e73c4bfa77f2a5309740\r\n\r\n### Expected behavior\r\nIt works or shows a deprecated message.\r\n\r\n### Actual behavior\r\n\r\n`ArgumentError`( `enum': wrong number of arguments (given 1, expected 2) \r\n\r\n\r\n### System configuration\r\n\r\n**Rails version**:\r\n\r\n8.0.0.rc1\r\n\r\n**Ruby version**:\r\n\r\n3.3.5\r\n","closed_by":{"login":"kamipo","id":12642,"node_id":"MDQ6VXNlcjEyNjQy","avatar_url":"https://avatars.githubusercontent.com/u/12642?v=4","gravatar_id":"","url":"https://api.github.com/users/kamipo","html_url":"https://github.com/kamipo","followers_url":"https://api.github.com/users/kamipo/followers","following_url":"https://api.github.com/users/kamipo/following{/other_user}","gists_url":"https://api.github.com/users/kamipo/gists{/gist_id}","starred_url":"https://api.github.com/users/kamipo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kamipo/subscriptions","organizations_url":"https://api.github.com/users/kamipo/orgs","repos_url":"https://api.github.com/users/kamipo/repos","events_url":"https://api.github.com/users/kamipo/events{/privacy}","received_events_url":"https://api.github.com/users/kamipo/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rails/rails/issues/53407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/rails/issues/53407/timeline","performed_via_github_app":null,"state_reason":"completed"}