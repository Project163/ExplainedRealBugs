{"url":"https://api.github.com/repos/rails/rails/issues/51829","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/51829/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/51829/comments","events_url":"https://api.github.com/repos/rails/rails/issues/51829/events","html_url":"https://github.com/rails/rails/issues/51829","id":2296381404,"node_id":"I_kwDNIULOiN__3A","number":51829,"title":"procfile causes failure on Rails 8.0","user":{"login":"rubys","id":4815,"node_id":"MDQ6VXNlcjQ4MTU=","avatar_url":"https://avatars.githubusercontent.com/u/4815?v=4","gravatar_id":"","url":"https://api.github.com/users/rubys","html_url":"https://github.com/rubys","followers_url":"https://api.github.com/users/rubys/followers","following_url":"https://api.github.com/users/rubys/following{/other_user}","gists_url":"https://api.github.com/users/rubys/gists{/gist_id}","starred_url":"https://api.github.com/users/rubys/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rubys/subscriptions","organizations_url":"https://api.github.com/users/rubys/orgs","repos_url":"https://api.github.com/users/rubys/repos","events_url":"https://api.github.com/users/rubys/events{/privacy}","received_events_url":"https://api.github.com/users/rubys/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":14,"created_at":"2024-05-14T20:41:23Z","updated_at":"2024-08-03T01:51:00Z","closed_at":"2024-05-14T22:36:46Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Steps to reproduce\r\n\r\nThis works (note edge):\r\n\r\n```\r\nrails new demo --edge --css tailwind\r\ncd demo\r\nbin/dev\r\ncurl http://localhost:3000/\r\n```\r\n\r\nThis also works (note bin/rails server):\r\n```\r\nrails new demo --main --css tailwind\r\ncd demo\r\nbin/rails server\r\ncurl http://localhost:3000/\r\n```\r\n\r\nThis fails (main with bin/dev):\r\n\r\n```\r\nrails new demo --main --css tailwind\r\ncd demo\r\nbin/dev\r\ncurl http://localhost:3000/\r\n```\r\n\r\n### Expected behavior\r\n\r\n![image](https://github.com/rails/rails/assets/4815/1d67d311-29e1-41b3-87b1-5a8dd747d25b)\r\n\r\n### Actual behavior\r\n\r\n```\r\nPuma caught this error: key must be 16 bytes (ArgumentError)\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/message_encryptor.rb:307:in `key='\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/message_encryptor.rb:307:in `decrypt'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/message_encryptor.rb:261:in `read_message'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/messages/rotator.rb:25:in `read_message'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/message_encryptor.rb:245:in `block (3 levels) in decrypt_and_verify'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/messages/codec.rb:47:in `block in catch_and_ignore'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/messages/codec.rb:46:in `catch'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/messages/codec.rb:46:in `catch_and_ignore'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/message_encryptor.rb:244:in `block (2 levels) in decrypt_and_verify'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/messages/codec.rb:54:in `block in catch_and_raise'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/messages/codec.rb:53:in `catch'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/messages/codec.rb:53:in `catch_and_raise'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/message_encryptor.rb:243:in `block in decrypt_and_verify'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/messages/codec.rb:54:in `block in catch_and_raise'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/messages/codec.rb:53:in `catch'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/messages/codec.rb:53:in `catch_and_raise'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/message_encryptor.rb:242:in `decrypt_and_verify'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/encrypted_file.rb:109:in `decrypt'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/encrypted_file.rb:72:in `read'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/encrypted_configuration.rb:57:in `read'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/encrypted_configuration.rb:76:in `config'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/encrypted_configuration.rb:95:in `options'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/delegation.rb:166:in `method_missing'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activerecord/lib/active_record/railtie.rb:351:in `block (2 levels) in <class:Railtie>'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/lazy_load_hooks.rb:97:in `class_eval'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/lazy_load_hooks.rb:97:in `block in execute_hook'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/lazy_load_hooks.rb:87:in `with_execution_control'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/lazy_load_hooks.rb:92:in `execute_hook'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/lazy_load_hooks.rb:78:in `block in run_load_hooks'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/lazy_load_hooks.rb:77:in `each'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/lazy_load_hooks.rb:77:in `run_load_hooks'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activerecord/lib/active_record/base.rb:337:in `<module:ActiveRecord>'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activerecord/lib/active_record/base.rb:15:in `<main>'\r\n/opt/homebrew/Cellar/ruby/3.3.1/lib/ruby/3.3.0/bundled_gems.rb:74:in `require'\r\n/opt/homebrew/Cellar/ruby/3.3.1/lib/ruby/3.3.0/bundled_gems.rb:74:in `block (2 levels) in replace_require'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/gems/bootsnap-1.18.3/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/gems/zeitwerk-2.6.14/lib/zeitwerk/kernel.rb:34:in `require'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activerecord/lib/active_record/query_cache.rb:38:in `run'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/execution_wrapper.rb:28:in `before'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/callbacks.rb:385:in `block in make_lambda'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/callbacks.rb:179:in `block in call'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/callbacks.rb:668:in `block (2 levels) in default_terminator'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/callbacks.rb:667:in `catch'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/callbacks.rb:667:in `block in default_terminator'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/callbacks.rb:180:in `call'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/callbacks.rb:559:in `block in invoke_before'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/callbacks.rb:559:in `each'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/callbacks.rb:559:in `invoke_before'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/callbacks.rb:109:in `run_callbacks'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/execution_wrapper.rb:128:in `run'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/execution_wrapper.rb:124:in `run!'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/execution_wrapper.rb:77:in `block in run!'\r\n<internal:kernel>:90:in `tap'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/activesupport/lib/active_support/execution_wrapper.rb:74:in `run!'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/actionpack/lib/action_dispatch/middleware/executor.rb:14:in `call'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/actionpack/lib/action_dispatch/middleware/static.rb:27:in `call'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/gems/rack-3.0.11/lib/rack/sendfile.rb:114:in `call'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/actionpack/lib/action_dispatch/middleware/host_authorization.rb:143:in `call'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/bundler/gems/rails-4b4171b80e37/railties/lib/rails/engine.rb:536:in `call'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/gems/puma-6.4.2/lib/puma/configuration.rb:272:in `call'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/gems/puma-6.4.2/lib/puma/request.rb:100:in `block in handle_request'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/gems/puma-6.4.2/lib/puma/thread_pool.rb:378:in `with_force_shutdown'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/gems/puma-6.4.2/lib/puma/request.rb:99:in `handle_request'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/gems/puma-6.4.2/lib/puma/server.rb:464:in `process_client'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/gems/puma-6.4.2/lib/puma/server.rb:245:in `block in run'\r\n/opt/homebrew/lib/ruby/gems/3.3.0/gems/puma-6.4.2/lib/puma/thread_pool.rb:155:in `block in spawn_thread'\r\n```\r\n\r\n### System configuration\r\n**Rails version**:  --edge and --main\r\n\r\n**Ruby version**: `ruby 3.3.1 (2024-04-23 revision c56cd86388) [arm64-darwin23]`\r\n","closed_by":{"login":"dhh","id":2741,"node_id":"MDQ6VXNlcjI3NDE=","avatar_url":"https://avatars.githubusercontent.com/u/2741?v=4","gravatar_id":"","url":"https://api.github.com/users/dhh","html_url":"https://github.com/dhh","followers_url":"https://api.github.com/users/dhh/followers","following_url":"https://api.github.com/users/dhh/following{/other_user}","gists_url":"https://api.github.com/users/dhh/gists{/gist_id}","starred_url":"https://api.github.com/users/dhh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhh/subscriptions","organizations_url":"https://api.github.com/users/dhh/orgs","repos_url":"https://api.github.com/users/dhh/repos","events_url":"https://api.github.com/users/dhh/events{/privacy}","received_events_url":"https://api.github.com/users/dhh/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rails/rails/issues/51829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/rails/issues/51829/timeline","performed_via_github_app":null,"state_reason":"completed"}