{"url":"https://api.github.com/repos/rails/rails/issues/53912","repository_url":"https://api.github.com/repos/rails/rails","labels_url":"https://api.github.com/repos/rails/rails/issues/53912/labels{/name}","comments_url":"https://api.github.com/repos/rails/rails/issues/53912/comments","events_url":"https://api.github.com/repos/rails/rails/issues/53912/events","html_url":"https://github.com/rails/rails/issues/53912","id":2732918896,"node_id":"I_kwDNIULOouUIcA","number":53912,"title":"Clarification Needed: Behavior of i18n.load_path and Nested Dictionaries","user":{"login":"shrkw","id":275147,"node_id":"MDQ6VXNlcjI3NTE0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/275147?v=4","gravatar_id":"","url":"https://api.github.com/users/shrkw","html_url":"https://github.com/shrkw","followers_url":"https://api.github.com/users/shrkw/followers","following_url":"https://api.github.com/users/shrkw/following{/other_user}","gists_url":"https://api.github.com/users/shrkw/gists{/gist_id}","starred_url":"https://api.github.com/users/shrkw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shrkw/subscriptions","organizations_url":"https://api.github.com/users/shrkw/orgs","repos_url":"https://api.github.com/users/shrkw/repos","events_url":"https://api.github.com/users/shrkw/events{/privacy}","received_events_url":"https://api.github.com/users/shrkw/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":150377,"node_id":"MDU6TGFiZWwxNTAzNzc=","url":"https://api.github.com/repos/rails/rails/labels/docs","name":"docs","color":"02d7e1","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-12-11T13:00:16Z","updated_at":"2024-12-15T19:13:50Z","closed_at":"2024-12-15T19:13:50Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"This is not a bug report but rather a request for clarification about the specification.\r\nI would like to confirm the behavior of `i18n.load_path`.\r\n\r\nAccording to the Rails Guide, it is described as follows, but the actual behavior was different. Even with the default locale loading mechanism, files inside nested directories were loaded.\r\n\r\n```\r\nNOTE: The default locale loading mechanism in Rails does not load locale files in nested dictionaries, like we have here. So, for this to work, we must explicitly tell Rails to look further:\r\n\r\n# config/application.rb\r\nconfig.i18n.load_path += Dir[Rails.root.join(\"config\", \"locales\", \"**\", \"*.{rb,yml}\")]\r\n```\r\nhttps://github.com/rails/rails/blob/main/guides/source/i18n.md?plain=1#L592\r\n\r\nIs this simply because the documentation has not been updated, or is the behavior described in the documentation the intended one?\r\n\r\n### Steps to reproduce\r\n<!-- (Guidelines for creating a bug report are [available\r\nhere](https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#creating-a-bug-report)) -->\r\n\r\nI created a new Rails application without any config changes and placed files with the following structure:\r\n\r\n```\r\n$ tree config/locales/\r\nconfig/locales/\r\n├── en.yml\r\n└── foo\r\n    └── bar\r\n        └── baz\r\n            └── ja.yml\r\n\r\n3 directories, 2 files\r\n```\r\n\r\nThe result was as follows, and the files inside the nested directories were successfully loaded.\r\n\r\n```\r\n$ bin/rails console\r\nLoading development environment (Rails 7.1.5)\r\nirb(main):001> Rails.application.config.i18n.load_path\r\n=> \r\n[\"/workspaces/sandbox-ruby/sample-7/config/locales/en.yml\",\r\n \"/workspaces/sandbox-ruby/sample-7/config/locales/foo/bar/baz/en.yml\",\r\n \"/usr/local/lib/ruby/gems/3.1.0/gems/web-console-4.2.1/lib/web_console/locales/en.yml\"]\r\nirb(main):002> I18n.t(\"foo.bar.hello\")\r\n=> \"hello2\"\r\n```\r\n\r\n\r\n<!-- Paste your executable test case created from one of the scripts found [here](https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#create-an-executable-test-case) below: -->\r\n\r\n\r\n### Expected behavior\r\n<!-- Tell us what should happen -->\r\n\r\n### Actual behavior\r\n<!-- Tell us what happens instead -->\r\n\r\n\r\n\r\n\r\n### System configuration\r\n**Rails version**: 7.1.5\r\n\r\n**Ruby version**: ruby 3.1.4p223 (2023-03-30 revision 957bb7cb81) [aarch64-linux]","closed_by":{"login":"byroot","id":44640,"node_id":"MDQ6VXNlcjQ0NjQw","avatar_url":"https://avatars.githubusercontent.com/u/44640?v=4","gravatar_id":"","url":"https://api.github.com/users/byroot","html_url":"https://github.com/byroot","followers_url":"https://api.github.com/users/byroot/followers","following_url":"https://api.github.com/users/byroot/following{/other_user}","gists_url":"https://api.github.com/users/byroot/gists{/gist_id}","starred_url":"https://api.github.com/users/byroot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/byroot/subscriptions","organizations_url":"https://api.github.com/users/byroot/orgs","repos_url":"https://api.github.com/users/byroot/repos","events_url":"https://api.github.com/users/byroot/events{/privacy}","received_events_url":"https://api.github.com/users/byroot/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rails/rails/issues/53912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rails/rails/issues/53912/timeline","performed_via_github_app":null,"state_reason":"completed"}