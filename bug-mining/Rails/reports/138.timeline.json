[{"url":"https://api.github.com/repos/rails/rails/issues/comments/2347126555","html_url":"https://github.com/rails/rails/issues/52901#issuecomment-2347126555","issue_url":"https://api.github.com/repos/rails/rails/issues/52901","id":2347126555,"node_id":"IC_kwDNIULOi-ZPGw","user":{"login":"rafaelfranca","id":47848,"node_id":"MDQ6VXNlcjQ3ODQ4","avatar_url":"https://avatars.githubusercontent.com/u/47848?v=4","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-12T19:57:50Z","updated_at":"2024-09-12T19:57:50Z","body":"I don't believe this behavior was defined, that is why it wasn't considered in the changelogs. I can fix this easily, but I want to understand the use case before sticking to this behavior. Can you explain why you need to check if a key exists?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2347126555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rafaelfranca","id":47848,"node_id":"MDQ6VXNlcjQ3ODQ4","avatar_url":"https://avatars.githubusercontent.com/u/47848?v=4","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2349280777","html_url":"https://github.com/rails/rails/issues/52901#issuecomment-2349280777","issue_url":"https://api.github.com/repos/rails/rails/issues/52901","id":2349280777,"node_id":"IC_kwDNIULOjAcuCQ","user":{"login":"schovi","id":11453,"node_id":"MDQ6VXNlcjExNDUz","avatar_url":"https://avatars.githubusercontent.com/u/11453?v=4","gravatar_id":"","url":"https://api.github.com/users/schovi","html_url":"https://github.com/schovi","followers_url":"https://api.github.com/users/schovi/followers","following_url":"https://api.github.com/users/schovi/following{/other_user}","gists_url":"https://api.github.com/users/schovi/gists{/gist_id}","starred_url":"https://api.github.com/users/schovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schovi/subscriptions","organizations_url":"https://api.github.com/users/schovi/orgs","repos_url":"https://api.github.com/users/schovi/repos","events_url":"https://api.github.com/users/schovi/events{/privacy}","received_events_url":"https://api.github.com/users/schovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-13T15:57:40Z","updated_at":"2024-09-13T15:57:40Z","body":"@rafaelfranca The `key?` or `[:something].nil?` is detail which just making the migration harder. But what could cause issue is passing the `.attributes` somewhere else. For example Sidekiq has a middleware that accepts the Current object, calls attributes and serialise it to JSON and attach to job payload. For example we have an Current object holding event, tracing etc metadata. We are speaking about 20+ keys. Most of them is not set usually. With this change the job payload size can grow less or more and consume more Redis memory which can in certain spikes ends with OOM. \r\n\r\nThe middleware: https://github.com/sidekiq/sidekiq/blob/2451d70080db95cb5f69effcbd74381cf3b3f727/lib/sidekiq/middleware/current_attributes.rb#L30-L40","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2349280777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"schovi","id":11453,"node_id":"MDQ6VXNlcjExNDUz","avatar_url":"https://avatars.githubusercontent.com/u/11453?v=4","gravatar_id":"","url":"https://api.github.com/users/schovi","html_url":"https://github.com/schovi","followers_url":"https://api.github.com/users/schovi/followers","following_url":"https://api.github.com/users/schovi/following{/other_user}","gists_url":"https://api.github.com/users/schovi/gists{/gist_id}","starred_url":"https://api.github.com/users/schovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/schovi/subscriptions","organizations_url":"https://api.github.com/users/schovi/orgs","repos_url":"https://api.github.com/users/schovi/repos","events_url":"https://api.github.com/users/schovi/events{/privacy}","received_events_url":"https://api.github.com/users/schovi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":14251026075,"node_id":"MEE_lADNIULOll-p0M8AAAADUW1mmw","url":"https://api.github.com/repos/rails/rails/issues/events/14251026075","actor":{"login":"rafaelfranca","id":47848,"node_id":"MDQ6VXNlcjQ3ODQ4","avatar_url":"https://avatars.githubusercontent.com/u/47848?v=4","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-09-13T15:57:42Z","performed_via_github_app":null},{"id":14251026096,"node_id":"SE_lADNIULOll-p0M8AAAADUW1msA","url":"https://api.github.com/repos/rails/rails/issues/events/14251026096","actor":{"login":"rafaelfranca","id":47848,"node_id":"MDQ6VXNlcjQ3ODQ4","avatar_url":"https://avatars.githubusercontent.com/u/47848?v=4","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-09-13T15:57:42Z","performed_via_github_app":null},{"id":14252930224,"node_id":"CE_lADNIULOll-p0M8AAAADUYp0sA","url":"https://api.github.com/repos/rails/rails/issues/events/14252930224","actor":{"login":"rafaelfranca","id":47848,"node_id":"MDQ6VXNlcjQ3ODQ4","avatar_url":"https://avatars.githubusercontent.com/u/47848?v=4","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"49b8e70760b6440ba743c75c7b3103e2b5b7af33","commit_url":"https://api.github.com/repos/rails/rails/commits/49b8e70760b6440ba743c75c7b3103e2b5b7af33","created_at":"2024-09-13T18:46:30Z","state_reason":null,"performed_via_github_app":null},{"id":14252932052,"node_id":"REFE_lADNIULOll-p0M8AAAADUYp71A","url":"https://api.github.com/repos/rails/rails/issues/events/14252932052","actor":{"login":"rafaelfranca","id":47848,"node_id":"MDQ6VXNlcjQ3ODQ4","avatar_url":"https://avatars.githubusercontent.com/u/47848?v=4","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ed265be9cb76765b0cea7716b70d9553176d3e89","commit_url":"https://api.github.com/repos/rails/rails/commits/ed265be9cb76765b0cea7716b70d9553176d3e89","created_at":"2024-09-13T18:46:41Z","performed_via_github_app":null},{"id":14253153039,"node_id":"REFE_lADNIULOll-p0M8AAAADUY3bDw","url":"https://api.github.com/repos/rails/rails/issues/events/14253153039","actor":{"login":"Ali-Razmjoo","id":7676267,"node_id":"MDQ6VXNlcjc2NzYyNjc=","avatar_url":"https://avatars.githubusercontent.com/u/7676267?v=4","gravatar_id":"","url":"https://api.github.com/users/Ali-Razmjoo","html_url":"https://github.com/Ali-Razmjoo","followers_url":"https://api.github.com/users/Ali-Razmjoo/followers","following_url":"https://api.github.com/users/Ali-Razmjoo/following{/other_user}","gists_url":"https://api.github.com/users/Ali-Razmjoo/gists{/gist_id}","starred_url":"https://api.github.com/users/Ali-Razmjoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ali-Razmjoo/subscriptions","organizations_url":"https://api.github.com/users/Ali-Razmjoo/orgs","repos_url":"https://api.github.com/users/Ali-Razmjoo/repos","events_url":"https://api.github.com/users/Ali-Razmjoo/events{/privacy}","received_events_url":"https://api.github.com/users/Ali-Razmjoo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"49b8e70760b6440ba743c75c7b3103e2b5b7af33","commit_url":"https://api.github.com/repos/fork-the-planet/rails/commits/49b8e70760b6440ba743c75c7b3103e2b5b7af33","created_at":"2024-09-13T19:05:40Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rails/rails/issues/comments/2354130557","html_url":"https://github.com/rails/rails/issues/52901#issuecomment-2354130557","issue_url":"https://api.github.com/repos/rails/rails/issues/52901","id":2354130557,"node_id":"IC_kwDNIULOjFEufQ","user":{"login":"rafaelfranca","id":47848,"node_id":"MDQ6VXNlcjQ3ODQ4","avatar_url":"https://avatars.githubusercontent.com/u/47848?v=4","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-16T22:20:51Z","updated_at":"2024-09-16T22:20:51Z","body":"Thanks! It makes sense. It should be fixed now.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rails/rails/issues/comments/2354130557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rafaelfranca","id":47848,"node_id":"MDQ6VXNlcjQ3ODQ4","avatar_url":"https://avatars.githubusercontent.com/u/47848?v=4","gravatar_id":"","url":"https://api.github.com/users/rafaelfranca","html_url":"https://github.com/rafaelfranca","followers_url":"https://api.github.com/users/rafaelfranca/followers","following_url":"https://api.github.com/users/rafaelfranca/following{/other_user}","gists_url":"https://api.github.com/users/rafaelfranca/gists{/gist_id}","starred_url":"https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rafaelfranca/subscriptions","organizations_url":"https://api.github.com/users/rafaelfranca/orgs","repos_url":"https://api.github.com/users/rafaelfranca/repos","events_url":"https://api.github.com/users/rafaelfranca/events{/privacy}","received_events_url":"https://api.github.com/users/rafaelfranca/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":14510793123,"node_id":"REFE_lADNIULOll-p0M8AAAADYOkhow","url":"https://api.github.com/repos/rails/rails/issues/events/14510793123","actor":{"login":"DanielaVelasquez","id":15008564,"node_id":"MDQ6VXNlcjE1MDA4NTY0","avatar_url":"https://avatars.githubusercontent.com/u/15008564?v=4","gravatar_id":"","url":"https://api.github.com/users/DanielaVelasquez","html_url":"https://github.com/DanielaVelasquez","followers_url":"https://api.github.com/users/DanielaVelasquez/followers","following_url":"https://api.github.com/users/DanielaVelasquez/following{/other_user}","gists_url":"https://api.github.com/users/DanielaVelasquez/gists{/gist_id}","starred_url":"https://api.github.com/users/DanielaVelasquez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanielaVelasquez/subscriptions","organizations_url":"https://api.github.com/users/DanielaVelasquez/orgs","repos_url":"https://api.github.com/users/DanielaVelasquez/repos","events_url":"https://api.github.com/users/DanielaVelasquez/events{/privacy}","received_events_url":"https://api.github.com/users/DanielaVelasquez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"540c16ece0286cba013f8e1c6699710040cfd5f7","commit_url":"https://api.github.com/repos/DanielaVelasquez/rails/commits/540c16ece0286cba013f8e1c6699710040cfd5f7","created_at":"2024-10-03T21:59:00Z","performed_via_github_app":null}]