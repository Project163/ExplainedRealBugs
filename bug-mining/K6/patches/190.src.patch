diff --git a/chromium/browser_type.go b/chromium/browser_type.go
index 54b9d6d25..a7a5d85a9 100644
--- a/chromium/browser_type.go
+++ b/chromium/browser_type.go
@@ -26,6 +26,7 @@ import (
 	"fmt"
 	"os"
 	"regexp"
+	"runtime"
 
 	"github.com/dop251/goja"
 	"github.com/grafana/xk6-browser/api"
@@ -85,47 +86,7 @@ func (b *BrowserType) Launch(opts goja.Value) api.Browser {
 		envs = append(envs, fmt.Sprintf("%s=%s", k, v))
 	}
 
-	flags := map[string]interface{}{
-		//chromedp.ProxyServer(""),
-		//chromedp.UserAgent(""),
-		//chromedp.UserDataDir(""),
-		//chromedp.DisableGPU,
-
-		"no-first-run":                true,
-		"no-default-browser-check":    true,
-		"no-sandbox":                  true,
-		"headless":                    launchOpts.Headless,
-		"auto-open-devtools-for-tabs": launchOpts.Devtools,
-		"window-size":                 fmt.Sprintf("%d,%d", 800, 600),
-
-		// After Puppeteer's and Playwright's default behavior.
-		"disable-background-networking":                      true,
-		"enable-features":                                    "NetworkService,NetworkServiceInProcess",
-		"disable-background-timer-throttling":                true,
-		"disable-backgrounding-occluded-windows":             true,
-		"disable-breakpad":                                   true,
-		"disable-client-side-phishing-detection":             true,
-		"disable-component-extensions-with-background-pages": true,
-		"disable-default-apps":                               true,
-		"disable-dev-shm-usage":                              true,
-		"disable-extensions":                                 true,
-		"disable-features":                                   "TranslateUI,BlinkGenPropertyTrees,ImprovedCookieControls,SameSiteByDefaultCookies,LazyFrameLoading",
-		"disable-hang-monitor":                               true,
-		"disable-ipc-flooding-protection":                    true,
-		"disable-popup-blocking":                             true,
-		"disable-prompt-on-repost":                           true,
-		"disable-renderer-backgrounding":                     true,
-		"disable-sync":                                       true,
-		"force-color-profile":                                "srgb",
-		"metrics-recording-only":                             true,
-		"safebrowsing-disable-auto-update":                   true,
-		"enable-automation":                                  true,
-		"password-store":                                     "basic",
-		"use-mock-keychain":                                  true,
-		"no-startup-window":                                  true,
-	}
-
-	allocator := NewAllocator(flags, envs)
+	allocator := NewAllocator(b.flags(launchOpts), envs)
 	browserProc, err := allocator.Allocate(b.Ctx, launchOpts)
 	if browserProc == nil {
 		k6common.Throw(rt, fmt.Errorf("cannot allocate browser: %w", err))
@@ -158,6 +119,53 @@ func (b *BrowserType) Name() string {
 	return "chromium"
 }
 
+func (b *BrowserType) flags(lopts *common.LaunchOptions) map[string]interface{} {
+	// After Puppeteer's and Playwright's default behavior.
+	f := map[string]interface{}{
+		"disable-background-networking":                      true,
+		"enable-features":                                    "NetworkService,NetworkServiceInProcess",
+		"disable-background-timer-throttling":                true,
+		"disable-backgrounding-occluded-windows":             true,
+		"disable-breakpad":                                   true,
+		"disable-client-side-phishing-detection":             true,
+		"disable-component-extensions-with-background-pages": true,
+		"disable-default-apps":                               true,
+		"disable-dev-shm-usage":                              true,
+		"disable-extensions":                                 true,
+		"disable-features":                                   "ImprovedCookieControls,LazyFrameLoading,GlobalMediaControls,DestroyProfileOnBrowserClose,MediaRouter,AcceptCHFrame",
+		"disable-hang-monitor":                               true,
+		"disable-ipc-flooding-protection":                    true,
+		"disable-popup-blocking":                             true,
+		"disable-prompt-on-repost":                           true,
+		"disable-renderer-backgrounding":                     true,
+		"disable-sync":                                       true,
+		"force-color-profile":                                "srgb",
+		"metrics-recording-only":                             true,
+		"no-first-run":                                       true,
+		"safebrowsing-disable-auto-update":                   true,
+		"enable-automation":                                  true,
+		"password-store":                                     "basic",
+		"use-mock-keychain":                                  true,
+		"no-service-autorun":                                 true,
+
+		"no-startup-window":           true,
+		"no-default-browser-check":    true,
+		"no-sandbox":                  true,
+		"headless":                    lopts.Headless,
+		"auto-open-devtools-for-tabs": lopts.Devtools,
+		"window-size":                 fmt.Sprintf("%d,%d", 800, 600),
+	}
+	if runtime.GOOS == "darwin" {
+		f["enable-use-zoom-for-dsf"] = false
+	}
+	if lopts.Headless {
+		f["hide-scrollbars"] = true
+		f["mute-audio"] = true
+		f["blink-settings"] = "primaryHoverType=2,availableHoverTypes=2,primaryPointerType=4,availablePointerTypes=4"
+	}
+	return f
+}
+
 // makes an extension wide logger
 func makeLogger(ctx context.Context, launchOpts *common.LaunchOptions) (*common.Logger, error) {
 	var (
diff --git a/chromium/browser_type_test.go b/chromium/browser_type_test.go
new file mode 100644
index 000000000..aec713a90
--- /dev/null
+++ b/chromium/browser_type_test.go
@@ -0,0 +1,98 @@
+/*
+ *
+ * xk6-browser - a browser automation extension for k6
+ * Copyright (C) 2021 Load Impact
+ *
+ * This program is free software: you can redistribute it and/or modify
+ * it under the terms of the GNU Affero General Public License as
+ * published by the Free Software Foundation, either version 3 of the
+ * License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU Affero General Public License for more details.
+ *
+ * You should have received a copy of the GNU Affero General Public License
+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.
+ *
+ */
+
+package chromium
+
+import (
+	"runtime"
+	"testing"
+
+	"github.com/grafana/xk6-browser/common"
+)
+
+func TestBrowserTypeFlags(t *testing.T) {
+	t.Parallel()
+
+	t.Run("devtools", func(t *testing.T) {
+		t.Parallel()
+
+		const devToolsFlag = "auto-open-devtools-for-tabs"
+
+		var bt BrowserType
+
+		flags := bt.flags(&common.LaunchOptions{
+			Devtools: false,
+		})
+		flagi, ok := flags[devToolsFlag]
+
+		if !ok {
+			t.Fatalf("%q is missing", devToolsFlag)
+		}
+		flag, ok := flagi.(bool)
+		if !ok {
+			t.Fatalf("%q should be a bool", devToolsFlag)
+		}
+		if flag {
+			t.Fatalf("%q should be false when launch options Devtools is false, got %t", devToolsFlag, flag)
+		}
+
+		flags = bt.flags(&common.LaunchOptions{
+			Devtools: true,
+		})
+		flag = flags[devToolsFlag].(bool)
+		if !flag {
+			t.Fatalf("%q should be true when launch options Devtools is true, got %t", devToolsFlag, flag)
+		}
+	})
+
+	t.Run("headless", func(t *testing.T) {
+		t.Parallel()
+
+		var (
+			before, after int
+			bt            BrowserType
+			lopts         = &common.LaunchOptions{}
+		)
+
+		lopts.Headless = false
+		before = len(bt.flags(lopts))
+
+		lopts.Headless = true
+		after = len(bt.flags(lopts))
+
+		if before == after {
+			t.Errorf("enabling headless mode did not add flags")
+		}
+	})
+
+	t.Run("darwin", func(t *testing.T) {
+		t.Parallel()
+		if runtime.GOOS != "darwin" {
+			t.Skip()
+		}
+
+		var bt BrowserType
+		f := bt.flags(&common.LaunchOptions{})
+
+		if _, ok := f["enable-use-zoom-for-dsf"]; !ok {
+			t.Errorf("darwin should enable 'enable-use-zoom-for-dsf'")
+		}
+	})
+}
