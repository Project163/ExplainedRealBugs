diff --git a/cmd/outputs.go b/cmd/outputs.go
index 25950fc6b..13e51656a 100644
--- a/cmd/outputs.go
+++ b/cmd/outputs.go
@@ -38,8 +38,9 @@ import (
 	"github.com/loadimpact/k6/stats/csv"
 	"github.com/loadimpact/k6/stats/datadog"
 	"github.com/loadimpact/k6/stats/influxdb"
-	"github.com/loadimpact/k6/stats/kafka"
 	"github.com/loadimpact/k6/stats/statsd"
+
+	"github.com/k6io/xk6-output-kafka/pkg/kafka"
 )
 
 // TODO: move this to an output sub-module after we get rid of the old collectors?
@@ -63,15 +64,10 @@ func getAllOutputConstructors() (map[string]func(output.Params) (output.Output,
 			return newCollectorAdapter(params, influxc), nil
 		},
 		"kafka": func(params output.Params) (output.Output, error) {
-			conf, err := kafka.GetConsolidatedConfig(params.JSONConfig, params.Environment, params.ConfigArgument)
-			if err != nil {
-				return nil, err
-			}
-			kafkac, err := kafka.New(params.Logger, conf)
-			if err != nil {
-				return nil, err
-			}
-			return newCollectorAdapter(params, kafkac), nil
+			params.Logger.Warn("The kafka output is deprecated, and will be removed in a future k6 version. " +
+				"Please use the new xk6 kafka output extension instead. " +
+				"It can be found at https://github.com/k6io/xk6-output-kafka.")
+			return kafka.New(params)
 		},
 		"statsd": func(params output.Params) (output.Output, error) {
 			conf, err := statsd.GetConsolidatedConfig(params.JSONConfig, params.Environment)
diff --git a/go.mod b/go.mod
index f3cee537e..fe3e6ec1b 100644
--- a/go.mod
+++ b/go.mod
@@ -7,39 +7,20 @@ require (
 	github.com/DataDog/datadog-go v0.0.0-20180330214955-e67964b4021a
 	github.com/GeertJohan/go.rice v0.0.0-20170420135705-c02ca9a983da
 	github.com/PuerkitoBio/goquery v1.6.1
-	github.com/Shopify/sarama v1.16.0
-	github.com/Shopify/toxiproxy v2.1.4+incompatible // indirect
 	github.com/Soontao/goHttpDigestClient v0.0.0-20170320082612-6d28bb1415c5
 	github.com/andybalholm/brotli v1.0.1
-	github.com/daaku/go.zipexe v0.0.0-20150329023125-a5fe2436ffcb // indirect
-	github.com/dlclark/regexp2 v1.4.1-0.20201116162257-a2a8dda75c91 // indirect
 	github.com/dop251/goja v0.0.0-20210317175251-bb14c2267b76
 	github.com/dustin/go-humanize v0.0.0-20171111073723-bb3d318650d4
-	github.com/eapache/go-resiliency v1.1.0 // indirect
-	github.com/eapache/go-xerial-snappy v0.0.0-20160609142408-bb955e01b934 // indirect
-	github.com/eapache/queue v1.1.0 // indirect
 	github.com/fatih/color v1.5.0
-	github.com/gedex/inflector v0.0.0-20170307190818-16278e9db813 // indirect
-	github.com/ghodss/yaml v1.0.0 // indirect
-	github.com/gin-contrib/sse v0.0.0-20170109093832-22d885f9ecc7 // indirect
-	github.com/gin-gonic/gin v1.1.5-0.20170702092826-d459835d2b07 // indirect
-	github.com/go-sourcemap/sourcemap v2.1.3+incompatible // indirect
 	github.com/golang/protobuf v1.4.2
-	github.com/golang/snappy v0.0.0-20170215233205-553a64147049 // indirect
-	github.com/google/go-cmp v0.5.1 // indirect
-	github.com/gorilla/context v0.0.0-20160226214623-1ea25387ff6f // indirect
-	github.com/gorilla/mux v1.6.1 // indirect
 	github.com/gorilla/websocket v1.4.2
-	github.com/inconshreveable/mousetrap v1.0.0 // indirect
 	github.com/influxdata/influxdb1-client v0.0.0-20190402204710-8ff2fc3824fc
 	github.com/jhump/protoreflect v1.8.2
 	github.com/julienschmidt/httprouter v1.1.1-0.20180222160526-d18983907793
-	github.com/kardianos/osext v0.0.0-20170510131534-ae77be60afb1 // indirect
+	github.com/k6io/xk6-output-kafka v0.1.0
 	github.com/kelseyhightower/envconfig v1.4.0
 	github.com/klauspost/compress v1.11.13
 	github.com/kubernetes/helm v2.9.0+incompatible
-	github.com/labstack/echo v3.2.6+incompatible // indirect
-	github.com/labstack/gommon v0.2.2-0.20170925052817-57409ada9da0 // indirect
 	github.com/mailru/easyjson v0.7.7
 	github.com/manyminds/api2go v0.0.0-20180125085803-95be7bd0455e
 	github.com/mattn/go-colorable v0.0.9
@@ -47,13 +28,9 @@ require (
 	github.com/mccutchen/go-httpbin v1.1.2-0.20190116014521-c5cb2f4802fa
 	github.com/mitchellh/mapstructure v0.0.0-20180220230111-00c29f56e238
 	github.com/nu7hatch/gouuid v0.0.0-20131221200532-179d4d0c4d8d
-	github.com/onsi/ginkgo v1.14.0 // indirect
 	github.com/oxtoacart/bpool v0.0.0-20190530202638-03653db5a59c
-	github.com/pierrec/lz4 v1.0.2-0.20171218195038-2fcda4cb7018 // indirect
-	github.com/pierrec/xxHash v0.1.1 // indirect
 	github.com/pkg/errors v0.8.0
 	github.com/pmezard/go-difflib v1.0.0
-	github.com/rcrowley/go-metrics v0.0.0-20180503174638-e2704e165165 // indirect
 	github.com/serenize/snaker v0.0.0-20201027110005-a7ad2135616e
 	github.com/sirupsen/logrus v1.8.1
 	github.com/spf13/afero v1.1.1
@@ -62,22 +39,14 @@ require (
 	github.com/stretchr/testify v1.7.0
 	github.com/tidwall/gjson v1.7.4
 	github.com/tidwall/pretty v1.1.0
-	github.com/ugorji/go v1.1.7 // indirect
-	github.com/valyala/bytebufferpool v1.0.0 // indirect
-	github.com/valyala/fasttemplate v0.0.0-20170224212429-dcecefd839c4 // indirect
 	github.com/zyedidia/highlight v0.0.0-20170330143449-201131ce5cf5
 	golang.org/x/crypto v0.0.0-20201016220609-9e8e0b390897
 	golang.org/x/net v0.0.0-20201209123823-ac852fbbde11
 	golang.org/x/sys v0.0.0-20201204225414-ed752295db88 // indirect
 	golang.org/x/text v0.3.4
 	golang.org/x/time v0.0.0-20210220033141-f8bda1e9f3ba
-	golang.org/x/xerrors v0.0.0-20200804184101-5ec99f83aff1 // indirect
-	google.golang.org/genproto v0.0.0-20200903010400-9bfcb5116336 // indirect
 	google.golang.org/grpc v1.36.1
 	google.golang.org/protobuf v1.25.1-0.20200805231151-a709e31e5d12
-	gopkg.in/go-playground/assert.v1 v1.2.1 // indirect
-	gopkg.in/go-playground/validator.v8 v8.18.2 // indirect
-	gopkg.in/guregu/null.v2 v2.1.2 // indirect
 	gopkg.in/guregu/null.v3 v3.3.0
 	gopkg.in/yaml.v2 v2.3.0
 )
diff --git a/go.sum b/go.sum
index c42b0be56..7266e18d4 100644
--- a/go.sum
+++ b/go.sum
@@ -1,4 +1,5 @@
 cloud.google.com/go v0.26.0/go.mod h1:aQUYkXzVsufM+DwF1aE+0xfcU+56JwCaLick0ClmMTw=
+github.com/Azure/go-ntlmssp v0.0.0-20180810175552-4a21cbd618b4/go.mod h1:chxPXzSsl7ZWRAuOIE23GDNzjWuZquvFlgA8xmpunjU=
 github.com/Azure/go-ntlmssp v0.0.0-20200615164410-66371956d46c h1:/IBSNwUN8+eKzUzbJPqhK839ygXJ82sde8x3ogr6R28=
 github.com/Azure/go-ntlmssp v0.0.0-20200615164410-66371956d46c/go.mod h1:chxPXzSsl7ZWRAuOIE23GDNzjWuZquvFlgA8xmpunjU=
 github.com/BurntSushi/toml v0.3.1/go.mod h1:xHWCNGjB5oqiDr8zfno3MHue2Ht5sIBksp03qcyfWMU=
@@ -6,6 +7,7 @@ github.com/DataDog/datadog-go v0.0.0-20180330214955-e67964b4021a h1:zpQSzEApXM0q
 github.com/DataDog/datadog-go v0.0.0-20180330214955-e67964b4021a/go.mod h1:LButxg5PwREeZtORoXG3tL4fMGNddJ+vMq1mwgfaqoQ=
 github.com/GeertJohan/go.rice v0.0.0-20170420135705-c02ca9a983da h1:UVU3a9pRUyLdnBtn60WjRl0s4SEyJc2ChCY56OAR6wI=
 github.com/GeertJohan/go.rice v0.0.0-20170420135705-c02ca9a983da/go.mod h1:DgrzXonpdQbfN3uYaGz1EG4Sbhyum/MMIn6Cphlh2bw=
+github.com/PuerkitoBio/goquery v1.3.0/go.mod h1:T9ezsOHcCrDCgA8aF1Cqr3sSYbO/xgdy8/R/XiIMAhA=
 github.com/PuerkitoBio/goquery v1.6.1 h1:FgjbQZKl5HTmcn4sKBgvx8vv63nhyhIpv7lJpFGCWpk=
 github.com/PuerkitoBio/goquery v1.6.1/go.mod h1:GsLWisAFVj4WgDibEWF4pvYnkVQBpKBKeU+7zCJoLcc=
 github.com/Shopify/sarama v1.16.0 h1:9pI5+ZN06jB3bu5kHXqzzaErMC5rimcIZBQL9IOiEQ0=
@@ -14,12 +16,15 @@ github.com/Shopify/toxiproxy v2.1.4+incompatible h1:TKdv8HiTLgE5wdJuEML90aBgNWso
 github.com/Shopify/toxiproxy v2.1.4+incompatible/go.mod h1:OXgGpZ6Cli1/URJOF1DMxUHB2q5Ap20/P/eIdh4G0pI=
 github.com/Soontao/goHttpDigestClient v0.0.0-20170320082612-6d28bb1415c5 h1:k+1+doEm31k0rRjCjLnGG3YRkuO9ljaEyS2ajZd6GK8=
 github.com/Soontao/goHttpDigestClient v0.0.0-20170320082612-6d28bb1415c5/go.mod h1:5Q4+CyR7+Q3VMG8f78ou+QSX/BNUNUx5W48eFRat8DQ=
+github.com/andybalholm/brotli v0.0.0-20190704151324-71eb68cc467c/go.mod h1:+lx6/Aqd1kLJ1GQfkvOnaZ1WGmLpMpbprPuIOOZX30U=
 github.com/andybalholm/brotli v1.0.1 h1:KqhlKozYbRtJvsPrrEeXcO+N2l6NYT5A2QAFmSULpEc=
 github.com/andybalholm/brotli v1.0.1/go.mod h1:loMXtMfwqflxFJPmdbJO0a3KNoPuLBgiu3qAvBg8x/Y=
+github.com/andybalholm/cascadia v1.0.0/go.mod h1:GsXiBklL0woXo1j/WYWtSYYC4ouU9PqHO0sqidkEA4Y=
 github.com/andybalholm/cascadia v1.1.0 h1:BuuO6sSfQNFRu1LppgbD25Hr2vLYW25JvxHs5zzsLTo=
 github.com/andybalholm/cascadia v1.1.0/go.mod h1:GsXiBklL0woXo1j/WYWtSYYC4ouU9PqHO0sqidkEA4Y=
 github.com/census-instrumentation/opencensus-proto v0.2.1/go.mod h1:f6KPmirojxKA12rnyqOA5BBL4O983OfeGPqjHWSTneU=
 github.com/client9/misspell v0.3.4/go.mod h1:qj6jICC3Q7zFZvVWo7KLAzC3yx5G7kyvSDkc90ppPyw=
+github.com/cncf/udpa/go v0.0.0-20191209042840-269d4d468f6f/go.mod h1:M8M6+tZqaGXZJjfX53e64911xZQV5JYwmTeXPW+k8Sc=
 github.com/cncf/udpa/go v0.0.0-20201120205902-5459f2c99403/go.mod h1:WmhPx2Nbnhtbo57+VJT5O0JRkEi1Wbu0z5j0R8u5Hbk=
 github.com/daaku/go.zipexe v0.0.0-20150329023125-a5fe2436ffcb h1:tUf55Po0vzOendQ7NWytcdK0VuzQmfAgvGBUOQvN0WA=
 github.com/daaku/go.zipexe v0.0.0-20150329023125-a5fe2436ffcb/go.mod h1:U0vRfAucUOohvdCxt5MWLF+TePIL0xbCkbKIiV8TQCE=
@@ -28,6 +33,7 @@ github.com/davecgh/go-spew v1.1.1 h1:vj9j/u1bqnvCEfJOwUhtlOARqs3+rkHYY13jYWTU97c
 github.com/davecgh/go-spew v1.1.1/go.mod h1:J7Y8YcW2NihsgmVo/mv3lAwl/skON4iLHjSsI+c5H38=
 github.com/dlclark/regexp2 v1.4.1-0.20201116162257-a2a8dda75c91 h1:Izz0+t1Z5nI16/II7vuEo/nHjodOg0p7+OiDpjX5t1E=
 github.com/dlclark/regexp2 v1.4.1-0.20201116162257-a2a8dda75c91/go.mod h1:2pZnwuY/m+8K6iRw6wQdMtk+rH5tNGR1i55kozfMjCc=
+github.com/dop251/goja v0.0.0-20210216182323-60bc6ebb9fc1/go.mod h1:Mw6PkjjMXWbTj+nnj4s3QPXq1jaT0s5pC0iFD4+BOAA=
 github.com/dop251/goja v0.0.0-20210317175251-bb14c2267b76 h1:da/WKkWtBnwAC/DPGZQ7W2pKVEHGEyFU1u40L73DJN8=
 github.com/dop251/goja v0.0.0-20210317175251-bb14c2267b76/go.mod h1:Mw6PkjjMXWbTj+nnj4s3QPXq1jaT0s5pC0iFD4+BOAA=
 github.com/dustin/go-humanize v0.0.0-20171111073723-bb3d318650d4 h1:qk/FSDDxo05wdJH28W+p5yivv7LuLYLRXPPD8KQCtZs=
@@ -40,6 +46,7 @@ github.com/eapache/queue v1.1.0 h1:YOEu7KNc61ntiQlcEeUIoDTJ2o8mQznoNvUhiigpIqc=
 github.com/eapache/queue v1.1.0/go.mod h1:6eCeP0CKFpHLu8blIFXhExK/dRa7WDZfr6jVFPTqq+I=
 github.com/envoyproxy/go-control-plane v0.9.0/go.mod h1:YTl/9mNaCwkRvm6d1a2C3ymFceY/DCBVvsKhRF0iEA4=
 github.com/envoyproxy/go-control-plane v0.9.1-0.20191026205805-5f8ba28d4473/go.mod h1:YTl/9mNaCwkRvm6d1a2C3ymFceY/DCBVvsKhRF0iEA4=
+github.com/envoyproxy/go-control-plane v0.9.4/go.mod h1:6rpuAdCZL397s3pYoYcLgu1mIlRU8Am5FuJP05cCM98=
 github.com/envoyproxy/go-control-plane v0.9.9-0.20201210154907-fd9021fe5dad/go.mod h1:cXg6YxExXjJnVBQHBLXeUAgxn2UodCpnH306RInaBQk=
 github.com/envoyproxy/protoc-gen-validate v0.1.0/go.mod h1:iSmxcyjqTsJpI2R4NaDN7+kN2VEUnK/pcBlmesArF7c=
 github.com/fatih/color v1.5.0 h1:vBh+kQp8lg9XPr56u1CPrWjFXtdphMoGWVHr9/1c+A0=
@@ -57,10 +64,13 @@ github.com/gin-gonic/gin v1.1.5-0.20170702092826-d459835d2b07 h1:Gm6bjW5SQ/sIib9
 github.com/gin-gonic/gin v1.1.5-0.20170702092826-d459835d2b07/go.mod h1:7cKuhb5qV2ggCFctp2fJQ+ErvciLZrIeoOSOm6mUr7Y=
 github.com/go-sourcemap/sourcemap v2.1.3+incompatible h1:W1iEw64niKVGogNgBN3ePyLFfuisuzeidWPMPWmECqU=
 github.com/go-sourcemap/sourcemap v2.1.3+incompatible/go.mod h1:F8jJfvm2KbVjc5NqelyYJmf/v5J0dwNLS2mL4sNA1Jg=
+github.com/golang/gddo v0.0.0-20190419222130-af0f2af80721/go.mod h1:xEhNfoBDX1hzLm2Nf80qUvZ2sVwoMZ8d6IE2SrsQfh4=
 github.com/golang/glog v0.0.0-20160126235308-23def4e6c14b/go.mod h1:SBH7ygxi8pfUlaOkMMuAQtPIUF8ecWP5IEl/CR7VP2Q=
 github.com/golang/mock v1.1.1/go.mod h1:oTYuIxOrZwtPieC+H1uAHpcLFnEyAGVDL/k47Jfbm0A=
 github.com/golang/protobuf v1.2.0/go.mod h1:6lQm79b+lXiMfvg/cZm0SGofjICqVBUtrP5yJMmIC1U=
+github.com/golang/protobuf v1.3.1/go.mod h1:6lQm79b+lXiMfvg/cZm0SGofjICqVBUtrP5yJMmIC1U=
 github.com/golang/protobuf v1.3.2/go.mod h1:6lQm79b+lXiMfvg/cZm0SGofjICqVBUtrP5yJMmIC1U=
+github.com/golang/protobuf v1.3.3/go.mod h1:vzj43D7+SQXF/4pzW/hwtAqwc6iTitCiVSaWz5lYuqw=
 github.com/golang/protobuf v1.4.0-rc.1/go.mod h1:ceaxUfeHdC40wWswd/P6IGgMaK3YpKi5j83Wpe3EHw8=
 github.com/golang/protobuf v1.4.0-rc.1.0.20200221234624-67d41d38c208/go.mod h1:xKAWHe0F5eneWXFV3EuXVDTCmh+JuBKY0li0aMyXATA=
 github.com/golang/protobuf v1.4.0-rc.2/go.mod h1:LlEzMj4AhA7rCAGe4KMBDvJI+AwstrUpVNzEA03Pprs=
@@ -92,19 +102,25 @@ github.com/inconshreveable/mousetrap v1.0.0 h1:Z8tu5sraLXCXIcARxBp/8cbvlwVa7Z1NH
 github.com/inconshreveable/mousetrap v1.0.0/go.mod h1:PxqpIevigyE2G7u3NXJIT2ANytuPF1OarO4DADm73n8=
 github.com/influxdata/influxdb1-client v0.0.0-20190402204710-8ff2fc3824fc h1:KpMgaYJRieDkHZJWY3LMafvtqS/U8xX6+lUN+OKpl/Y=
 github.com/influxdata/influxdb1-client v0.0.0-20190402204710-8ff2fc3824fc/go.mod h1:qj24IKcXYK6Iy9ceXlo3Tc+vtHo9lIhSX5JddghvEPo=
+github.com/jhump/protoreflect v1.7.0/go.mod h1:RZkzh7Hi9J7qT/sPlWnJ/UwZqCJvciFxKDA0UCeltSM=
 github.com/jhump/protoreflect v1.8.2 h1:k2xE7wcUomeqwY0LDCYA16y4WWfyTcMx5mKhk0d4ua0=
 github.com/jhump/protoreflect v1.8.2/go.mod h1:7GcYQDdMU/O/BBrl/cX6PNHpXh6cenjd8pneu5yW7Tg=
 github.com/josharian/intern v1.0.0 h1:vlS4z54oSdjm0bgjRigI+G1HpF+tI+9rE5LLzOg8HmY=
 github.com/josharian/intern v1.0.0/go.mod h1:5DoeVV0s6jJacbCEi61lwdGj/aVlrQvzHFFd8Hwg//Y=
 github.com/julienschmidt/httprouter v1.1.1-0.20180222160526-d18983907793 h1:C70cJzQWvJh+6Rw8q2Qngi8J8uc1BC6FqJneu0f2pr8=
 github.com/julienschmidt/httprouter v1.1.1-0.20180222160526-d18983907793/go.mod h1:SYymIcj16QtmaHHD7aYtjjsJG7VTCxuUUipMqKk8s4w=
+github.com/k6io/xk6-output-kafka v0.1.0 h1:GML9B5II0SMUN1+6g0WBUbXpLwKKSg9+yQ6kjDu/Cso=
+github.com/k6io/xk6-output-kafka v0.1.0/go.mod h1:FEnBddwavknsQ3/tGFW0CP9ABAVMyimlJdLgyT1BDPE=
 github.com/kardianos/osext v0.0.0-20170510131534-ae77be60afb1 h1:PJPDf8OUfOK1bb/NeTKd4f1QXZItOX389VN3B6qC8ro=
 github.com/kardianos/osext v0.0.0-20170510131534-ae77be60afb1/go.mod h1:1NbS8ALrpOvjt0rHPNLyCIeMtbizbir8U//inJ+zuB8=
 github.com/kelseyhightower/envconfig v1.4.0 h1:Im6hONhd3pLkfDFsbRgu68RDNkGF1r3dvMUtDTo2cv8=
 github.com/kelseyhightower/envconfig v1.4.0/go.mod h1:cccZRl6mQpaq41TPp5QxidR+Sa3axMbJDNb//FQX6Gg=
 github.com/kisielk/gotool v1.0.0/go.mod h1:XhKaO+MFFWcvkIS/tQcRk01m1F5IRFswLeQ+oQHNcck=
+github.com/klauspost/compress v1.7.2/go.mod h1:RyIbtBH6LamlWaDj8nUwkbUhJ87Yi3uG0guNDohfE1A=
 github.com/klauspost/compress v1.11.13 h1:eSvu8Tmq6j2psUJqJrLcWH6K3w5Dwc+qipbaA6eVEN4=
 github.com/klauspost/compress v1.11.13/go.mod h1:aoV0uJVorq1K+umq18yTdKaF57EivdYsUV+/s2qKfXs=
+github.com/klauspost/cpuid v1.3.1/go.mod h1:bYW4mA6ZgKPob1/Dlai2LviZJO7KGI3uoWLd42rAQw4=
+github.com/konsorten/go-windows-terminal-sequences v1.0.3/go.mod h1:T0+1ngSBFLxvqU3pZ+m/2kptfBszLMUkC4ZK/EgS/cQ=
 github.com/kr/pretty v0.1.0 h1:L/CwN0zerZDmRFUapSPitk6f+Q3+0za1rQkzVuMiMFI=
 github.com/kr/pretty v0.1.0/go.mod h1:dAy3ld7l9f0ibDNOQOHHMYYIIbhfbHSm3C4ZsoJORNo=
 github.com/kr/pty v1.1.1/go.mod h1:pFQYn66WHrOpPYNljwOMqo10TkYh1fy3cYio2l3bCsQ=
@@ -116,6 +132,8 @@ github.com/labstack/echo v3.2.6+incompatible h1:28U/uXFFKBIP+VQIqq641LuYhMS7Br9Z
 github.com/labstack/echo v3.2.6+incompatible/go.mod h1:0INS7j/VjnFxD4E2wkz67b8cVwCLbBmJyDaka6Cmk1s=
 github.com/labstack/gommon v0.2.2-0.20170925052817-57409ada9da0 h1:7AIW1qc9sYYTZLamTsRKSmVvJDXkZZrIWXHDK4Gq4X0=
 github.com/labstack/gommon v0.2.2-0.20170925052817-57409ada9da0/go.mod h1:/tj9csK2iPSBvn+3NLM9e52usepMtrd5ilFYA+wQNJ4=
+github.com/loadimpact/k6 v0.31.1/go.mod h1:wROIullWNNJKvNvRV/angbz+9lXn3OcCSVHmZVTO3Mc=
+github.com/mailru/easyjson v0.7.4-0.20200812114229-8ab5ff9cd8e4/go.mod h1:xzfreul335JAWq5oZzymOObrkdz5UnU4kGfJJLY9Nlc=
 github.com/mailru/easyjson v0.7.7 h1:UGYAvKxe3sBsEDzO8ZeWOSlIQfWFlxbzLZe7hwFURr0=
 github.com/mailru/easyjson v0.7.7/go.mod h1:xzfreul335JAWq5oZzymOObrkdz5UnU4kGfJJLY9Nlc=
 github.com/manyminds/api2go v0.0.0-20180125085803-95be7bd0455e h1:Jg9dDZCJYqtv9GHQ34yDBFgEJLl4Hi4VEkKUyzHXCV8=
@@ -140,6 +158,7 @@ github.com/onsi/ginkgo v1.14.0/go.mod h1:iSB4RoI2tjJc9BBv4NKIKWKya62Rps+oPG/Lv9k
 github.com/onsi/gomega v1.7.1/go.mod h1:XdKZgCCFLUoM/7CFJVPcG8C1xQ1AJ0vpAezJrB7JYyY=
 github.com/onsi/gomega v1.10.1 h1:o0+MgICZLuZ7xjH7Vx6zS/zcu93/BEp1VwkIW1mEXCE=
 github.com/onsi/gomega v1.10.1/go.mod h1:iN09h71vgCQne3DLsj+A5owkum+a2tYe+TOCB1ybHNo=
+github.com/oxtoacart/bpool v0.0.0-20150712133111-4e1c5567d7c2/go.mod h1:L3UMQOThbttwfYRNFOWLLVXMhk5Lkio4GGOtw5UrxS0=
 github.com/oxtoacart/bpool v0.0.0-20190530202638-03653db5a59c h1:rp5dCmg/yLR3mgFuSOe4oEnDDmGLROTvMragMUXpTQw=
 github.com/oxtoacart/bpool v0.0.0-20190530202638-03653db5a59c/go.mod h1:X07ZCGwUbLaax7L0S3Tw4hpejzu63ZrrQiUe6W0hcy0=
 github.com/pierrec/lz4 v1.0.2-0.20171218195038-2fcda4cb7018 h1:z+gewaCBdXQRy5LXNOOKQU0gU93ro44uK92zqkB9KCc=
@@ -154,8 +173,10 @@ github.com/prometheus/client_model v0.0.0-20190812154241-14fe0d1b01d4/go.mod h1:
 github.com/rcrowley/go-metrics v0.0.0-20180503174638-e2704e165165 h1:nkcn14uNmFEuGCb2mBZbBb24RdNRL08b/wb+xBOYpuk=
 github.com/rcrowley/go-metrics v0.0.0-20180503174638-e2704e165165/go.mod h1:bCqnVzQkZxMG4s8nGwiZ5l3QUCyqpo9Y+/ZMZ9VjZe4=
 github.com/rogpeppe/go-internal v1.3.0/go.mod h1:M8bDsm7K2OlrFYOpmOWEs/qY81heoFRclV5y23lUDJ4=
+github.com/serenize/snaker v0.0.0-20171204205717-a683aaf2d516/go.mod h1:Yow6lPLSAXx2ifx470yD/nUe22Dv5vBvxK/UK9UUTVs=
 github.com/serenize/snaker v0.0.0-20201027110005-a7ad2135616e h1:zWKUYT07mGmVBH+9UgnHXd/ekCK99C8EbDSAt5qsjXE=
 github.com/serenize/snaker v0.0.0-20201027110005-a7ad2135616e/go.mod h1:Yow6lPLSAXx2ifx470yD/nUe22Dv5vBvxK/UK9UUTVs=
+github.com/sirupsen/logrus v1.6.0/go.mod h1:7uNnSEd1DgxDLC74fIahvMZmmYsHGZGEOFrfsX/uA88=
 github.com/sirupsen/logrus v1.8.1 h1:dJKuHgqk1NNQlqoA6BTlM1Wf9DOH3NBjQyu0h9+AZZE=
 github.com/sirupsen/logrus v1.8.1/go.mod h1:yWOB1SBYBC5VeMP7gHvWumXLIWorT60ONWic61uBYv0=
 github.com/spf13/afero v1.1.1 h1:Lt3ihYMlE+lreX1GS4Qw4ZsNpYQLxIXKBTEOXm3nt6I=
@@ -170,16 +191,20 @@ github.com/stretchr/testify v1.3.0/go.mod h1:M5WIy9Dh21IEIfnGCwXGc5bZfKNJtfHm1UV
 github.com/stretchr/testify v1.5.1/go.mod h1:5W2xD1RspED5o8YsWQXVCued0rvSQ+mT+I5cxcmMvtA=
 github.com/stretchr/testify v1.7.0 h1:nwc3DEeHmmLAfoZucVR881uASk0Mfjw8xYJ99tb5CcY=
 github.com/stretchr/testify v1.7.0/go.mod h1:6Fq8oRcR53rry900zMqJjRRixrwX3KX962/h/Wwjteg=
+github.com/tidwall/gjson v1.6.1/go.mod h1:BaHyNc5bjzYkPqgLq7mdVzeiRtULKULXLgZFKsxEHI0=
 github.com/tidwall/gjson v1.7.4 h1:19cchw8FOxkG5mdLRkGf9jqIqEyqdZhPqW60XfyFxk8=
 github.com/tidwall/gjson v1.7.4/go.mod h1:5/xDoumyyDNerp2U36lyolv46b3uF/9Bu6OfyQ9GImk=
+github.com/tidwall/match v1.0.1/go.mod h1:LujAq0jyVjBy028G1WhWfIzbpQfMO8bBZ6Tyb0+pL9E=
 github.com/tidwall/match v1.0.3 h1:FQUVvBImDutD8wJLN6c5eMzWtjgONK9MwIBCOrUJKeE=
 github.com/tidwall/match v1.0.3/go.mod h1:eRSPERbgtNPcGhD8UCthc6PmLEQXEWd3PRB5JTxsfmM=
+github.com/tidwall/pretty v1.0.2/go.mod h1:XNkn88O1ChpSDQmQeStsy+sBenx6DDtFZJxhVysOjyk=
 github.com/tidwall/pretty v1.1.0 h1:K3hMW5epkdAVwibsQEfR/7Zj0Qgt4DxtNumTq/VloO8=
 github.com/tidwall/pretty v1.1.0/go.mod h1:XNkn88O1ChpSDQmQeStsy+sBenx6DDtFZJxhVysOjyk=
 github.com/ugorji/go v1.1.7 h1:/68gy2h+1mWMrwZFeD1kQialdSzAb432dtpeJ42ovdo=
 github.com/ugorji/go v1.1.7/go.mod h1:kZn38zHttfInRq0xu/PH0az30d+z6vm202qpg1oXVMw=
 github.com/ugorji/go/codec v1.1.7 h1:2SvQaVZ1ouYrrKKwoSk2pzd4A9evlKJb9oTL+OaLUSs=
 github.com/ugorji/go/codec v1.1.7/go.mod h1:Ax+UKWsSmolVDwsd+7N3ZtXu+yMGCf907BLYF3GoBXY=
+github.com/urfave/negroni v0.3.1-0.20180130044549-22c5532ea862/go.mod h1:Meg73S6kFm/4PpbYdq35yYWoCZ9mS/YSx+lKnmiohz4=
 github.com/valyala/bytebufferpool v1.0.0 h1:GqA5TC/0021Y/b9FG4Oi9Mr3q7XYx6KllzawFIhcdPw=
 github.com/valyala/bytebufferpool v1.0.0/go.mod h1:6bBcMArwyJ5K/AmCkWv1jt77kVWyCJ6HpOuEn7z0Csc=
 github.com/valyala/fasttemplate v0.0.0-20170224212429-dcecefd839c4 h1:gKMu1Bf6QINDnvyZuTaACm9ofY+PRh+5vFz4oxBZeF8=
@@ -213,6 +238,7 @@ golang.org/x/net v0.0.0-20200202094626-16171245cfb2/go.mod h1:z5CRVTTTmAJ677TzLL
 golang.org/x/net v0.0.0-20200226121028-0de0cce0169b/go.mod h1:z5CRVTTTmAJ677TzLLGU+0bjPO0LkuOLi4/5GtJWs/s=
 golang.org/x/net v0.0.0-20200520004742-59133d7f0dd7/go.mod h1:qpuaurCH72eLCgpAm/N6yyVIVM9cpaDIP3A8BGJEC5A=
 golang.org/x/net v0.0.0-20200625001655-4c5254603344/go.mod h1:/O7V0waA8r7cgGh81Ro3o1hOxt32SMVPicZroKQ2sZA=
+golang.org/x/net v0.0.0-20201008223702-a5fa9d4b7c91/go.mod h1:/O7V0waA8r7cgGh81Ro3o1hOxt32SMVPicZroKQ2sZA=
 golang.org/x/net v0.0.0-20201209123823-ac852fbbde11 h1:lwlPPsmjDKK0J6eG6xDWd5XPehI0R024zxjDnw3esPA=
 golang.org/x/net v0.0.0-20201209123823-ac852fbbde11/go.mod h1:m0MpNAwzfU5UDzcl9v0D8zg8gWTRqZa9RBIspLL5mdg=
 golang.org/x/oauth2 v0.0.0-20180821212333-d2e6202438be/go.mod h1:N/0e6XlmueqKjAGxoOufVs8QHGRruUQn6yWY3a++T0U=
@@ -225,12 +251,14 @@ golang.org/x/sys v0.0.0-20180830151530-49385e6e1522/go.mod h1:STP8DvDyc/dI5b8T5h
 golang.org/x/sys v0.0.0-20180909124046-d0be0721c37e/go.mod h1:STP8DvDyc/dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=
 golang.org/x/sys v0.0.0-20190215142949-d0b11bdaac8a/go.mod h1:STP8DvDyc/dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=
 golang.org/x/sys v0.0.0-20190412213103-97732733099d/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
+golang.org/x/sys v0.0.0-20190422165155-953cdadca894/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
 golang.org/x/sys v0.0.0-20190904154756-749cb33beabd/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
 golang.org/x/sys v0.0.0-20191005200804-aed5e4c7ecf9/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
 golang.org/x/sys v0.0.0-20191026070338-33540a1f6037/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
 golang.org/x/sys v0.0.0-20191120155948-bd437916bb0e/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
 golang.org/x/sys v0.0.0-20200323222414-85ca7c5b95cd/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
 golang.org/x/sys v0.0.0-20200519105757-fe76b779f299/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
+golang.org/x/sys v0.0.0-20200930185726-fdedc70b468f/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
 golang.org/x/sys v0.0.0-20201119102817-f84b799fce68/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
 golang.org/x/sys v0.0.0-20201204225414-ed752295db88 h1:KmZPnMocC93w341XZp26yTJg8Za7lhb2KhkYmixoeso=
 golang.org/x/sys v0.0.0-20201204225414-ed752295db88/go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
@@ -240,6 +268,7 @@ golang.org/x/text v0.3.2/go.mod h1:bEr9sfX3Q8Zfm5fL9x+3itogRgK3+ptLWKqgva+5dAk=
 golang.org/x/text v0.3.3/go.mod h1:5Zoc/QRtKVWzQhOtBMvqHzDpF6irO9z98xDceosuGiQ=
 golang.org/x/text v0.3.4 h1:0YWbFKbhXG/wIiuHDSKpS0Iy7FSA+u45VtBMfQcFTTc=
 golang.org/x/text v0.3.4/go.mod h1:5Zoc/QRtKVWzQhOtBMvqHzDpF6irO9z98xDceosuGiQ=
+golang.org/x/time v0.0.0-20170927054726-6dc17368e09b/go.mod h1:tRJNPiyCQ0inRvYxbN9jk5I+vvW/OXSQhTDSoE431IQ=
 golang.org/x/time v0.0.0-20210220033141-f8bda1e9f3ba h1:O8mE0/t419eoIwhTFpKVkHiTs/Igowgfkj25AcZrtiE=
 golang.org/x/time v0.0.0-20210220033141-f8bda1e9f3ba/go.mod h1:tRJNPiyCQ0inRvYxbN9jk5I+vvW/OXSQhTDSoE431IQ=
 golang.org/x/tools v0.0.0-20180917221912-90fa682c2a6e/go.mod h1:n7NCudcB/nEzxVGmLbDWY5pfWTLqBcC2KZ6jyYvM4mQ=
@@ -258,15 +287,18 @@ golang.org/x/xerrors v0.0.0-20200804184101-5ec99f83aff1 h1:go1bK/D/BFZV2I8cIQd1N
 golang.org/x/xerrors v0.0.0-20200804184101-5ec99f83aff1/go.mod h1:I/5z698sn9Ka8TeJc9MKroUUfqBBauWjQqLJ2OPfmY0=
 google.golang.org/appengine v1.1.0/go.mod h1:EbEs0AVv82hx2wNQdGPgUI5lhzA/G0D9YwlJXL52JkM=
 google.golang.org/appengine v1.4.0/go.mod h1:xpcJRLb0r/rnEns0DIKYYv+WjYCduHsrkT7/EB5XEv4=
+google.golang.org/genproto v0.0.0-20170818010345-ee236bd376b0/go.mod h1:JiN7NxoALGmiZfu7CAH4rXhgtRTLTxftemlI0sWmxmc=
 google.golang.org/genproto v0.0.0-20180817151627-c66870c02cf8/go.mod h1:JiN7NxoALGmiZfu7CAH4rXhgtRTLTxftemlI0sWmxmc=
 google.golang.org/genproto v0.0.0-20190819201941-24fa4b261c55/go.mod h1:DMBHOl98Agz4BDEuKkezgsaosCRResVns1a3J2ZsMNc=
 google.golang.org/genproto v0.0.0-20200526211855-cb27e3aa2013/go.mod h1:NbSheEEYHJ7i3ixzK3sjbqSGDJWnxyFXZblF3eUsNvo=
 google.golang.org/genproto v0.0.0-20200903010400-9bfcb5116336 h1:ZcAny/XH59BbzUOKydQpvIlklwibW3T9SvDE5cGhdzc=
 google.golang.org/genproto v0.0.0-20200903010400-9bfcb5116336/go.mod h1:FWY/as6DDZQgahTzZj3fqbO1CbirC29ZNUFHwi0/+no=
+google.golang.org/grpc v1.8.0/go.mod h1:yo6s7OP7yaDglbqo1J04qKzAhqBH6lvTonzMVmEdcZw=
 google.golang.org/grpc v1.19.0/go.mod h1:mqu4LbDTu4XGKhr4mRzUsmM4RtVoemTSY81AxZiDr8c=
 google.golang.org/grpc v1.23.0/go.mod h1:Y5yQAOtifL1yxbo5wqy6BxZv8vAUGQwXBOALyacEbxg=
 google.golang.org/grpc v1.25.1/go.mod h1:c3i+UQWmh7LiEpx4sFZnkU36qjEYZ0imhYfXVyQciAY=
 google.golang.org/grpc v1.27.0/go.mod h1:qbnxyOmOxrQa7FizSgH+ReBfzJrCY1pSN7KXBS8abTk=
+google.golang.org/grpc v1.31.1/go.mod h1:N36X2cJ7JwdamYAgDz+s+rVMFjt3numwzf/HckM8pak=
 google.golang.org/grpc v1.36.1 h1:cmUfbeGKnz9+2DD/UYsMQXeqbHZqZDs4eQwW0sFOpBY=
 google.golang.org/grpc v1.36.1/go.mod h1:qjiiYl8FncCW8feJPdyg3v6XW24KsRHe+dy9BAGRRjU=
 google.golang.org/protobuf v0.0.0-20200109180630-ec00e32a8dfd/go.mod h1:DFci5gLYBciE7Vtevhsrf46CRTquxDuWsQurQQe4oz8=
diff --git a/stats/kafka/collector_test.go b/stats/kafka/collector_test.go
deleted file mode 100644
index a1e538ece..000000000
--- a/stats/kafka/collector_test.go
+++ /dev/null
@@ -1,87 +0,0 @@
-/*
- *
- * k6 - a next-generation load testing tool
- * Copyright (C) 2016 Load Impact
- *
- * This program is free software: you can redistribute it and/or modify
- * it under the terms of the GNU Affero General Public License as
- * published by the Free Software Foundation, either version 3 of the
- * License, or (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU Affero General Public License for more details.
- *
- * You should have received a copy of the GNU Affero General Public License
- * along with this program.  If not, see <http://www.gnu.org/licenses/>.
- *
- */
-
-package kafka
-
-import (
-	"context"
-	"sync"
-	"testing"
-
-	"github.com/Shopify/sarama"
-	"github.com/stretchr/testify/assert"
-	"gopkg.in/guregu/null.v3"
-
-	"github.com/loadimpact/k6/lib/testutils"
-	"github.com/loadimpact/k6/stats"
-)
-
-func TestRun(t *testing.T) {
-	broker := sarama.NewMockBroker(t, 1)
-	coordinator := sarama.NewMockBroker(t, 2)
-	seedMeta := new(sarama.MetadataResponse)
-	seedMeta.AddBroker(coordinator.Addr(), coordinator.BrokerID())
-	seedMeta.AddTopicPartition("my_topic", 0, 1, []int32{}, []int32{}, sarama.ErrNoError)
-	broker.Returns(seedMeta)
-
-	cfg := Config{
-		Brokers: []string{broker.Addr()},
-		Topic:   null.NewString("my_topic", false),
-	}
-	config := NewConfig().Apply(cfg)
-	c, err := New(testutils.NewLogger(t), config)
-
-	assert.Nil(t, err)
-
-	ctx, cancel := context.WithCancel(context.Background())
-	var wg sync.WaitGroup
-	wg.Add(1)
-	go func() {
-		defer wg.Done()
-		c.Run(ctx)
-	}()
-	cancel()
-	wg.Wait()
-}
-
-func TestFormatSamples(t *testing.T) {
-	c := Collector{}
-	c.Config.InfluxDBConfig.ConcurrentWrites = null.IntFrom(10)
-	metric := stats.New("my_metric", stats.Gauge)
-	samples := stats.Samples{
-		{Metric: metric, Value: 1.25, Tags: stats.IntoSampleTags(&map[string]string{"a": "1"})},
-		{Metric: metric, Value: 2, Tags: stats.IntoSampleTags(&map[string]string{"b": "2"})},
-	}
-
-	c.Config.Format = null.NewString("influxdb", false)
-	fmtdSamples, err := c.formatSamples(samples)
-
-	assert.Nil(t, err)
-	assert.Equal(t, []string{"my_metric,a=1 value=1.25", "my_metric,b=2 value=2"}, fmtdSamples)
-
-	c.Config.Format = null.NewString("json", false)
-	fmtdSamples, err = c.formatSamples(samples)
-
-	expJSON1 := "{\"type\":\"Point\",\"data\":{\"time\":\"0001-01-01T00:00:00Z\",\"value\":1.25,\"tags\":{\"a\":\"1\"}},\"metric\":\"my_metric\"}"
-	expJSON2 := "{\"type\":\"Point\",\"data\":{\"time\":\"0001-01-01T00:00:00Z\",\"value\":2,\"tags\":{\"b\":\"2\"}},\"metric\":\"my_metric\"}"
-
-	assert.Nil(t, err)
-	assert.Equal(t, []string{expJSON1, expJSON2}, fmtdSamples)
-}
diff --git a/stats/kafka/config_test.go b/stats/kafka/config_test.go
deleted file mode 100644
index 8a59deac6..000000000
--- a/stats/kafka/config_test.go
+++ /dev/null
@@ -1,123 +0,0 @@
-/*
- *
- * k6 - a next-generation load testing tool
- * Copyright (C) 2016 Load Impact
- *
- * This program is free software: you can redistribute it and/or modify
- * it under the terms of the GNU Affero General Public License as
- * published by the Free Software Foundation, either version 3 of the
- * License, or (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU Affero General Public License for more details.
- *
- * You should have received a copy of the GNU Affero General Public License
- * along with this program.  If not, see <http://www.gnu.org/licenses/>.
- *
- */
-
-package kafka
-
-import (
-	"encoding/json"
-	"os"
-	"testing"
-	"time"
-
-	"github.com/stretchr/testify/assert"
-	"github.com/stretchr/testify/require"
-	"gopkg.in/guregu/null.v3"
-
-	"github.com/loadimpact/k6/lib/types"
-	"github.com/loadimpact/k6/stats/influxdb"
-)
-
-func TestConfigParseArg(t *testing.T) {
-	c, err := ParseArg("brokers=broker1,topic=someTopic,format=influxdb")
-	expInfluxConfig := influxdb.Config{}
-	assert.Nil(t, err)
-	assert.Equal(t, []string{"broker1"}, c.Brokers)
-	assert.Equal(t, null.StringFrom("someTopic"), c.Topic)
-	assert.Equal(t, null.StringFrom("influxdb"), c.Format)
-	assert.Equal(t, expInfluxConfig, c.InfluxDBConfig)
-
-	c, err = ParseArg("brokers={broker2,broker3:9092},topic=someTopic2,format=json")
-	assert.Nil(t, err)
-	assert.Equal(t, []string{"broker2", "broker3:9092"}, c.Brokers)
-	assert.Equal(t, null.StringFrom("someTopic2"), c.Topic)
-	assert.Equal(t, null.StringFrom("json"), c.Format)
-
-	c, err = ParseArg("brokers={broker2,broker3:9092},topic=someTopic,format=influxdb,influxdb.tagsAsFields=fake")
-	expInfluxConfig = influxdb.Config{
-		TagsAsFields: []string{"fake"},
-	}
-	assert.Nil(t, err)
-	assert.Equal(t, []string{"broker2", "broker3:9092"}, c.Brokers)
-	assert.Equal(t, null.StringFrom("someTopic"), c.Topic)
-	assert.Equal(t, null.StringFrom("influxdb"), c.Format)
-	assert.Equal(t, expInfluxConfig, c.InfluxDBConfig)
-
-	c, err = ParseArg("brokers={broker2,broker3:9092},topic=someTopic,format=influxdb,influxdb.tagsAsFields={fake,anotherFake}")
-	expInfluxConfig = influxdb.Config{
-		TagsAsFields: []string{"fake", "anotherFake"},
-	}
-	assert.Nil(t, err)
-	assert.Equal(t, []string{"broker2", "broker3:9092"}, c.Brokers)
-	assert.Equal(t, null.StringFrom("someTopic"), c.Topic)
-	assert.Equal(t, null.StringFrom("influxdb"), c.Format)
-	assert.Equal(t, expInfluxConfig, c.InfluxDBConfig)
-}
-
-func TestConsolidatedConfig(t *testing.T) {
-	t.Parallel()
-	// TODO: add more cases
-	testCases := map[string]struct {
-		jsonRaw json.RawMessage
-		env     map[string]string
-		arg     string
-		config  Config
-		err     string
-	}{
-		"default": {
-			config: Config{
-				Format:         null.StringFrom("json"),
-				PushInterval:   types.NullDurationFrom(1 * time.Second),
-				InfluxDBConfig: influxdb.NewConfig(),
-			},
-		},
-		"bad influxdb concurrent writes": {
-			env: map[string]string{"K6_INFLUXDB_CONCURRENT_WRITES": "-2"},
-			config: Config{
-				Format:       null.StringFrom("json"),
-				PushInterval: types.NullDurationFrom(1 * time.Second),
-				InfluxDBConfig: influxdb.NewConfig().Apply(
-					influxdb.Config{
-						ConcurrentWrites: null.IntFrom(-2),
-					}),
-			},
-		},
-	}
-
-	for name, testCase := range testCases {
-		testCase := testCase
-		t.Run(name, func(t *testing.T) {
-			// hacks around env not actually being taken into account
-			os.Clearenv()
-			defer os.Clearenv()
-			for k, v := range testCase.env {
-				require.NoError(t, os.Setenv(k, v))
-			}
-
-			config, err := GetConsolidatedConfig(testCase.jsonRaw, testCase.env, testCase.arg)
-			if testCase.err != "" {
-				require.Error(t, err)
-				require.Contains(t, err.Error(), testCase.err)
-				return
-			}
-			require.NoError(t, err)
-			require.Equal(t, testCase.config, config)
-		})
-	}
-}
diff --git a/stats/kafka/collector.go b/vendor/github.com/k6io/xk6-output-kafka/pkg/kafka/collector.go
similarity index 70%
rename from stats/kafka/collector.go
rename to vendor/github.com/k6io/xk6-output-kafka/pkg/kafka/collector.go
index 18ac9c47f..c990cdb3e 100644
--- a/stats/kafka/collector.go
+++ b/vendor/github.com/k6io/xk6-output-kafka/pkg/kafka/collector.go
@@ -21,7 +21,6 @@
 package kafka
 
 import (
-	"context"
 	"encoding/json"
 	"sync"
 	"time"
@@ -29,9 +28,8 @@ import (
 	"github.com/Shopify/sarama"
 	"github.com/sirupsen/logrus"
 
-	jsono "github.com/loadimpact/k6/output/json"
+	"github.com/loadimpact/k6/output"
 	"github.com/loadimpact/k6/stats"
-	"github.com/loadimpact/k6/stats/influxdb"
 )
 
 // Collector implements the lib.Collector interface and should be used only for testing
@@ -40,12 +38,19 @@ type Collector struct {
 	Config   Config
 
 	Samples []stats.Sample
+	done    chan struct{}
 	logger  logrus.FieldLogger
 	lock    sync.Mutex
 }
 
+var _ output.Output = new(Collector)
+
 // New creates an instance of the collector
-func New(logger logrus.FieldLogger, conf Config) (*Collector, error) {
+func New(p output.Params) (*Collector, error) {
+	conf, err := GetConsolidatedConfig(p.JSONConfig, p.Environment, p.ConfigArgument)
+	if err != nil {
+		return nil, err
+	}
 	producer, err := sarama.NewSyncProducer(conf.Brokers, nil)
 	if err != nil {
 		return nil, err
@@ -54,40 +59,51 @@ func New(logger logrus.FieldLogger, conf Config) (*Collector, error) {
 	return &Collector{
 		Producer: producer,
 		Config:   conf,
-		logger:   logger,
+		logger:   p.Logger,
+		done:     make(chan struct{}),
 	}, nil
 }
 
-// Init does nothing, it's only included to satisfy the lib.Collector interface
-func (c *Collector) Init() error { return nil }
-
-// Run just blocks until the context is done
-func (c *Collector) Run(ctx context.Context) {
-	c.logger.Debug("Kafka: Running!")
-	ticker := time.NewTicker(time.Duration(c.Config.PushInterval.Duration))
-	for {
-		select {
-		case <-ticker.C:
-			c.pushMetrics()
-		case <-ctx.Done():
-			c.pushMetrics()
-
-			err := c.Producer.Close()
-			if err != nil {
-				c.logger.WithError(err).Error("Kafka: Failed to close producer.")
+func (c *Collector) Description() string {
+	return "kafka: TODO"
+}
+
+func (c *Collector) Stop() error {
+	c.done <- struct{}{}
+	<-c.done
+	return nil
+}
+
+func (c *Collector) Start() error {
+	c.logger.Debug("Kafka: starting!")
+	go func() {
+		ticker := time.NewTicker(time.Duration(c.Config.PushInterval.Duration))
+		for {
+			select {
+			case <-ticker.C:
+				c.pushMetrics()
+			case <-c.done:
+				c.pushMetrics()
+
+				err := c.Producer.Close()
+				if err != nil {
+					c.logger.WithError(err).Error("Kafka: Failed to close producer.")
+				}
+				close(c.done)
+				return
 			}
-			return
 		}
-	}
+	}()
+	return nil
 }
 
-// Collect just appends all of the samples passed to it to the internal sample slice.
+// AddMetricSamples just appends all of the samples passed to it to the internal sample slice.
 // According to the the lib.Collector interface, it should never be called concurrently,
 // so there's no locking on purpose - that way Go's race condition detector can actually
 // detect incorrect usage.
 // Also, theoretically the collector doesn't have to actually Run() before samples start
 // being collected, it only has to be initialized.
-func (c *Collector) Collect(scs []stats.SampleContainer) {
+func (c *Collector) AddMetricSamples(scs []stats.SampleContainer) {
 	c.lock.Lock()
 	for _, sc := range scs {
 		c.Samples = append(c.Samples, sc.GetSamples()...)
@@ -95,29 +111,23 @@ func (c *Collector) Collect(scs []stats.SampleContainer) {
 	c.lock.Unlock()
 }
 
-// Link returns a dummy string, it's only included to satisfy the lib.Collector interface
-func (c *Collector) Link() string {
-	return ""
-}
-
 func (c *Collector) formatSamples(samples stats.Samples) ([]string, error) {
 	var metrics []string
 
 	switch c.Config.Format.String {
 	case "influxdb":
-		i, err := influxdb.New(c.logger, c.Config.InfluxDBConfig)
+		var err error
+		fieldKinds, err := makeInfluxdbFieldKinds(c.Config.InfluxDBConfig.TagsAsFields)
 		if err != nil {
 			return nil, err
 		}
-
-		metrics, err = i.Format(samples)
+		metrics, err = formatAsInfluxdbV1(c.logger, samples, newExtractTagsFields(fieldKinds))
 		if err != nil {
 			return nil, err
 		}
 	default:
 		for _, sample := range samples {
-			env := jsono.WrapSample(sample)
-			metric, err := json.Marshal(env)
+			metric, err := json.Marshal(wrapSample(sample))
 			if err != nil {
 				return nil, err
 			}
diff --git a/stats/kafka/config.go b/vendor/github.com/k6io/xk6-output-kafka/pkg/kafka/config.go
similarity index 94%
rename from stats/kafka/config.go
rename to vendor/github.com/k6io/xk6-output-kafka/pkg/kafka/config.go
index 3e481bb4b..11729b304 100644
--- a/stats/kafka/config.go
+++ b/vendor/github.com/k6io/xk6-output-kafka/pkg/kafka/config.go
@@ -30,7 +30,6 @@ import (
 	"gopkg.in/guregu/null.v3"
 
 	"github.com/loadimpact/k6/lib/types"
-	"github.com/loadimpact/k6/stats/influxdb"
 )
 
 // Config is the config for the kafka collector
@@ -43,7 +42,7 @@ type Config struct {
 	Format       null.String        `json:"format" envconfig:"K6_KAFKA_FORMAT"`
 	PushInterval types.NullDuration `json:"push_interval" envconfig:"K6_KAFKA_PUSH_INTERVAL"`
 
-	InfluxDBConfig influxdb.Config `json:"influxdb"`
+	InfluxDBConfig influxdbConfig `json:"influxdb"`
 }
 
 // config is a duplicate of ConfigFields as we can not mapstructure.Decode into
@@ -54,7 +53,7 @@ type config struct {
 	Format       string   `json:"format" mapstructure:"format" envconfig:"K6_KAFKA_FORMAT"`
 	PushInterval string   `json:"push_interval" mapstructure:"push_interval" envconfig:"K6_KAFKA_PUSH_INTERVAL"`
 
-	InfluxDBConfig influxdb.Config `json:"influxdb" mapstructure:"influxdb"`
+	InfluxDBConfig influxdbConfig `json:"influxdb" mapstructure:"influxdb"`
 }
 
 // NewConfig creates a new Config instance with default values for some fields.
@@ -62,7 +61,7 @@ func NewConfig() Config {
 	return Config{
 		Format:         null.StringFrom("json"),
 		PushInterval:   types.NullDurationFrom(1 * time.Second),
-		InfluxDBConfig: influxdb.NewConfig(),
+		InfluxDBConfig: newInfluxdbConfig(),
 	}
 }
 
@@ -96,7 +95,7 @@ func ParseArg(arg string) (Config, error) {
 	}
 
 	if v, ok := params["influxdb"].(map[string]interface{}); ok {
-		influxConfig, err := influxdb.ParseMap(v)
+		influxConfig, err := influxdbParseMap(v)
 		if err != nil {
 			return c, err
 		}
diff --git a/vendor/github.com/k6io/xk6-output-kafka/pkg/kafka/format_influxdb.go b/vendor/github.com/k6io/xk6-output-kafka/pkg/kafka/format_influxdb.go
new file mode 100644
index 000000000..a1dfd60c2
--- /dev/null
+++ b/vendor/github.com/k6io/xk6-output-kafka/pkg/kafka/format_influxdb.go
@@ -0,0 +1,198 @@
+/*
+ *
+ * k6 - a next-generation load testing tool
+ * Copyright (C) 2021 Load Impact
+ *
+ * This program is free software: you can redistribute it and/or modify
+ * it under the terms of the GNU Affero General Public License as
+ * published by the Free Software Foundation, either version 3 of the
+ * License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU Affero General Public License for more details.
+ *
+ * You should have received a copy of the GNU Affero General Public License
+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.
+ *
+ */
+
+package kafka
+
+import (
+	"fmt"
+	"strconv"
+	"strings"
+
+	client "github.com/influxdata/influxdb1-client/v2"
+	"github.com/loadimpact/k6/lib/types"
+	"github.com/loadimpact/k6/stats"
+	"github.com/mitchellh/mapstructure"
+	"github.com/sirupsen/logrus"
+)
+
+type extractTagsToValuesFunc func(map[string]string, map[string]interface{}) map[string]interface{}
+
+// format returns a string array of metrics in influx line-protocol
+func formatAsInfluxdbV1(
+	logger logrus.FieldLogger, samples []stats.Sample, extractTagsToValues extractTagsToValuesFunc,
+) ([]string, error) {
+	var metrics []string
+	type cacheItem struct {
+		tags   map[string]string
+		values map[string]interface{}
+	}
+	cache := map[*stats.SampleTags]cacheItem{}
+	for _, sample := range samples {
+		var tags map[string]string
+		values := make(map[string]interface{})
+		if cached, ok := cache[sample.Tags]; ok {
+			tags = cached.tags
+			for k, v := range cached.values {
+				values[k] = v
+			}
+		} else {
+			tags = sample.Tags.CloneTags()
+			extractTagsToValues(tags, values)
+			cache[sample.Tags] = cacheItem{tags, values}
+		}
+		values["value"] = sample.Value
+		p, err := client.NewPoint(
+			sample.Metric.Name,
+			tags,
+			values,
+			sample.Time,
+		)
+		if err != nil {
+			logger.WithError(err).Error("InfluxDB: Couldn't make point from sample!")
+			return nil, err
+		}
+		metrics = append(metrics, p.String())
+	}
+
+	return metrics, nil
+}
+
+// FieldKind defines Enum for tag-to-field type conversion
+type FieldKind int
+
+const (
+	// String field (default)
+	String FieldKind = iota
+	// Int field
+	Int
+	// Float field
+	Float
+	// Bool field
+	Bool
+)
+
+func newExtractTagsFields(fieldKinds map[string]FieldKind) extractTagsToValuesFunc {
+	return func(tags map[string]string, values map[string]interface{}) map[string]interface{} {
+		for tag, kind := range fieldKinds {
+			if val, ok := tags[tag]; ok {
+				var v interface{}
+				var err error
+
+				switch kind {
+				case String:
+					v = val
+				case Bool:
+					v, err = strconv.ParseBool(val)
+				case Float:
+					v, err = strconv.ParseFloat(val, 64)
+				case Int:
+					v, err = strconv.ParseInt(val, 10, 64)
+				}
+				if err == nil {
+					values[tag] = v
+				} else {
+					values[tag] = val
+				}
+
+				delete(tags, tag)
+			}
+		}
+		return values
+	}
+}
+
+// makeFieldKinds reads the Config and returns a lookup map of tag names to
+// the field type their values should be converted to.
+func makeInfluxdbFieldKinds(tagsAsFields []string) (map[string]FieldKind, error) {
+	fieldKinds := make(map[string]FieldKind)
+	for _, tag := range tagsAsFields {
+		var fieldName, fieldType string
+		s := strings.SplitN(tag, ":", 2)
+		if len(s) == 1 {
+			fieldName, fieldType = s[0], "string"
+		} else {
+			fieldName, fieldType = s[0], s[1]
+		}
+
+		err := checkDuplicatedTypeDefinitions(fieldKinds, fieldName)
+		if err != nil {
+			return nil, err
+		}
+
+		switch fieldType {
+		case "string":
+			fieldKinds[fieldName] = String
+		case "bool":
+			fieldKinds[fieldName] = Bool
+		case "float":
+			fieldKinds[fieldName] = Float
+		case "int":
+			fieldKinds[fieldName] = Int
+		default:
+			return nil, fmt.Errorf("An invalid type (%s) is specified for an InfluxDB field (%s).",
+				fieldType, fieldName)
+		}
+	}
+
+	return fieldKinds, nil
+}
+
+func checkDuplicatedTypeDefinitions(fieldKinds map[string]FieldKind, tag string) error {
+	if _, found := fieldKinds[tag]; found {
+		return fmt.Errorf("A tag name (%s) shows up more than once in InfluxDB field type configurations.", tag)
+	}
+	return nil
+}
+
+func (c influxdbConfig) Apply(cfg influxdbConfig) influxdbConfig {
+	if len(cfg.TagsAsFields) > 0 {
+		c.TagsAsFields = cfg.TagsAsFields
+	}
+	return c
+}
+
+// ParseMap parses a map[string]interface{} into a Config
+func influxdbParseMap(m map[string]interface{}) (influxdbConfig, error) {
+	c := influxdbConfig{}
+	if v, ok := m["tagsAsFields"].(string); ok {
+		m["tagsAsFields"] = []string{v}
+	}
+	dec, err := mapstructure.NewDecoder(&mapstructure.DecoderConfig{
+		DecodeHook: types.NullDecoder,
+		Result:     &c,
+	})
+	if err != nil {
+		return c, err
+	}
+
+	err = dec.Decode(m)
+	return c, err
+}
+
+type influxdbConfig struct {
+	TagsAsFields []string `json:"tagsAsFields,omitempty" envconfig:"K6_INFLUXDB_TAGS_AS_FIELDS"`
+}
+
+func newInfluxdbConfig() influxdbConfig {
+	c := influxdbConfig{
+		TagsAsFields: []string{"vu", "iter", "url"},
+	}
+	return c
+}
diff --git a/vendor/github.com/k6io/xk6-output-kafka/pkg/kafka/format_json.go b/vendor/github.com/k6io/xk6-output-kafka/pkg/kafka/format_json.go
new file mode 100644
index 000000000..ba2427d40
--- /dev/null
+++ b/vendor/github.com/k6io/xk6-output-kafka/pkg/kafka/format_json.go
@@ -0,0 +1,60 @@
+/*
+ *
+ * k6 - a next-generation load testing tool
+ * Copyright (C) 2021 Load Impact
+ *
+ * This program is free software: you can redistribute it and/or modify
+ * it under the terms of the GNU Affero General Public License as
+ * published by the Free Software Foundation, either version 3 of the
+ * License, or (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU Affero General Public License for more details.
+ *
+ * You should have received a copy of the GNU Affero General Public License
+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.
+ *
+ */
+
+package kafka
+
+import (
+	"time"
+
+	"github.com/loadimpact/k6/stats"
+)
+
+// wrapSample is used to package a metric sample in a way that's nice to export
+// to JSON.
+func wrapSample(sample stats.Sample) envolope {
+	return envolope{
+		Type:   "Point",
+		Metric: sample.Metric.Name,
+		Data:   newJSONSample(sample),
+	}
+}
+
+// envolope is the data format we use to export both metrics and metric samples
+// to the JSON file.
+type envolope struct {
+	Type   string      `json:"type"`
+	Data   interface{} `json:"data"`
+	Metric string      `json:"metric,omitempty"`
+}
+
+// jsonSample is the data format for metric sample data in the JSON file.
+type jsonSample struct {
+	Time  time.Time         `json:"time"`
+	Value float64           `json:"value"`
+	Tags  *stats.SampleTags `json:"tags"`
+}
+
+func newJSONSample(sample stats.Sample) jsonSample {
+	return jsonSample{
+		Time:  sample.Time,
+		Value: sample.Value,
+		Tags:  sample.Tags,
+	}
+}
diff --git a/vendor/modules.txt b/vendor/modules.txt
index 75fff0686..9884ac728 100644
--- a/vendor/modules.txt
+++ b/vendor/modules.txt
@@ -12,10 +12,7 @@ github.com/GeertJohan/go.rice/embedded
 ## explicit
 github.com/PuerkitoBio/goquery
 # github.com/Shopify/sarama v1.16.0
-## explicit
 github.com/Shopify/sarama
-# github.com/Shopify/toxiproxy v2.1.4+incompatible
-## explicit
 # github.com/Soontao/goHttpDigestClient v0.0.0-20170320082612-6d28bb1415c5
 ## explicit
 github.com/Soontao/goHttpDigestClient
@@ -25,12 +22,10 @@ github.com/andybalholm/brotli
 # github.com/andybalholm/cascadia v1.1.0
 github.com/andybalholm/cascadia
 # github.com/daaku/go.zipexe v0.0.0-20150329023125-a5fe2436ffcb
-## explicit
 github.com/daaku/go.zipexe
 # github.com/davecgh/go-spew v1.1.1
 github.com/davecgh/go-spew/spew
 # github.com/dlclark/regexp2 v1.4.1-0.20201116162257-a2a8dda75c91
-## explicit
 github.com/dlclark/regexp2
 github.com/dlclark/regexp2/syntax
 # github.com/dop251/goja v0.0.0-20210317175251-bb14c2267b76
@@ -47,33 +42,25 @@ github.com/dop251/goja/unistring
 ## explicit
 github.com/dustin/go-humanize
 # github.com/eapache/go-resiliency v1.1.0
-## explicit
 github.com/eapache/go-resiliency/breaker
 # github.com/eapache/go-xerial-snappy v0.0.0-20160609142408-bb955e01b934
-## explicit
 github.com/eapache/go-xerial-snappy
 # github.com/eapache/queue v1.1.0
-## explicit
 github.com/eapache/queue
 # github.com/fatih/color v1.5.0
 ## explicit
 github.com/fatih/color
 # github.com/gedex/inflector v0.0.0-20170307190818-16278e9db813
-## explicit
 github.com/gedex/inflector
 # github.com/ghodss/yaml v1.0.0
-## explicit
 github.com/ghodss/yaml
 # github.com/gin-contrib/sse v0.0.0-20170109093832-22d885f9ecc7
-## explicit
 github.com/gin-contrib/sse
 # github.com/gin-gonic/gin v1.1.5-0.20170702092826-d459835d2b07
-## explicit
 github.com/gin-gonic/gin
 github.com/gin-gonic/gin/binding
 github.com/gin-gonic/gin/render
 # github.com/go-sourcemap/sourcemap v2.1.3+incompatible
-## explicit
 github.com/go-sourcemap/sourcemap
 github.com/go-sourcemap/sourcemap/internal/base64vlq
 # github.com/golang/protobuf v1.4.2
@@ -90,21 +77,15 @@ github.com/golang/protobuf/ptypes/struct
 github.com/golang/protobuf/ptypes/timestamp
 github.com/golang/protobuf/ptypes/wrappers
 # github.com/golang/snappy v0.0.0-20170215233205-553a64147049
-## explicit
 github.com/golang/snappy
-# github.com/google/go-cmp v0.5.1
-## explicit
 # github.com/gorilla/context v0.0.0-20160226214623-1ea25387ff6f
-## explicit
 github.com/gorilla/context
 # github.com/gorilla/mux v1.6.1
-## explicit
 github.com/gorilla/mux
 # github.com/gorilla/websocket v1.4.2
 ## explicit
 github.com/gorilla/websocket
 # github.com/inconshreveable/mousetrap v1.0.0
-## explicit
 github.com/inconshreveable/mousetrap
 # github.com/influxdata/influxdb1-client v0.0.0-20190402204710-8ff2fc3824fc
 ## explicit
@@ -126,8 +107,10 @@ github.com/josharian/intern
 # github.com/julienschmidt/httprouter v1.1.1-0.20180222160526-d18983907793
 ## explicit
 github.com/julienschmidt/httprouter
-# github.com/kardianos/osext v0.0.0-20170510131534-ae77be60afb1
+# github.com/k6io/xk6-output-kafka v0.1.0
 ## explicit
+github.com/k6io/xk6-output-kafka/pkg/kafka
+# github.com/kardianos/osext v0.0.0-20170510131534-ae77be60afb1
 github.com/kardianos/osext
 # github.com/kelseyhightower/envconfig v1.4.0
 ## explicit
@@ -143,10 +126,8 @@ github.com/klauspost/compress/zstd/internal/xxhash
 ## explicit
 github.com/kubernetes/helm/pkg/strvals
 # github.com/labstack/echo v3.2.6+incompatible
-## explicit
 github.com/labstack/echo
 # github.com/labstack/gommon v0.2.2-0.20170925052817-57409ada9da0
-## explicit
 github.com/labstack/gommon/color
 github.com/labstack/gommon/log
 # github.com/mailru/easyjson v0.7.7
@@ -177,16 +158,12 @@ github.com/mitchellh/mapstructure
 # github.com/nu7hatch/gouuid v0.0.0-20131221200532-179d4d0c4d8d
 ## explicit
 github.com/nu7hatch/gouuid
-# github.com/onsi/ginkgo v1.14.0
-## explicit
 # github.com/oxtoacart/bpool v0.0.0-20190530202638-03653db5a59c
 ## explicit
 github.com/oxtoacart/bpool
 # github.com/pierrec/lz4 v1.0.2-0.20171218195038-2fcda4cb7018
-## explicit
 github.com/pierrec/lz4
 # github.com/pierrec/xxHash v0.1.1
-## explicit
 github.com/pierrec/xxHash/xxHash32
 # github.com/pkg/errors v0.8.0
 ## explicit
@@ -195,7 +172,6 @@ github.com/pkg/errors
 ## explicit
 github.com/pmezard/go-difflib/difflib
 # github.com/rcrowley/go-metrics v0.0.0-20180503174638-e2704e165165
-## explicit
 github.com/rcrowley/go-metrics
 # github.com/serenize/snaker v0.0.0-20201027110005-a7ad2135616e
 ## explicit
@@ -226,15 +202,11 @@ github.com/tidwall/match
 # github.com/tidwall/pretty v1.1.0
 ## explicit
 github.com/tidwall/pretty
-# github.com/ugorji/go v1.1.7
-## explicit
 # github.com/ugorji/go/codec v1.1.7
 github.com/ugorji/go/codec
 # github.com/valyala/bytebufferpool v1.0.0
-## explicit
 github.com/valyala/bytebufferpool
 # github.com/valyala/fasttemplate v0.0.0-20170224212429-dcecefd839c4
-## explicit
 github.com/valyala/fasttemplate
 # github.com/zyedidia/highlight v0.0.0-20170330143449-201131ce5cf5
 ## explicit
@@ -279,10 +251,7 @@ golang.org/x/text/unicode/norm
 # golang.org/x/time v0.0.0-20210220033141-f8bda1e9f3ba
 ## explicit
 golang.org/x/time/rate
-# golang.org/x/xerrors v0.0.0-20200804184101-5ec99f83aff1
-## explicit
 # google.golang.org/genproto v0.0.0-20200903010400-9bfcb5116336
-## explicit
 google.golang.org/genproto/googleapis/rpc/status
 google.golang.org/genproto/protobuf/api
 google.golang.org/genproto/protobuf/field_mask
@@ -378,13 +347,8 @@ google.golang.org/protobuf/types/known/timestamppb
 google.golang.org/protobuf/types/known/typepb
 google.golang.org/protobuf/types/known/wrapperspb
 google.golang.org/protobuf/types/pluginpb
-# gopkg.in/go-playground/assert.v1 v1.2.1
-## explicit
 # gopkg.in/go-playground/validator.v8 v8.18.2
-## explicit
 gopkg.in/go-playground/validator.v8
-# gopkg.in/guregu/null.v2 v2.1.2
-## explicit
 # gopkg.in/guregu/null.v3 v3.3.0
 ## explicit
 gopkg.in/guregu/null.v3
