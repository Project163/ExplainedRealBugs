diff --git a/stats/cloud/collector.go b/stats/cloud/collector.go
index f970a20b8..adc0be8e3 100644
--- a/stats/cloud/collector.go
+++ b/stats/cloud/collector.go
@@ -110,7 +110,7 @@ func New(conf Config, src *loader.SourceData, opts lib.Options, version string)
 	}
 
 	if !conf.Name.Valid || conf.Name.String == "" {
-		conf.Name = null.StringFrom(filepath.Base(src.URL.Path))
+		conf.Name = null.StringFrom(filepath.Base(src.URL.String()))
 	}
 	if conf.Name.String == "-" {
 		conf.Name = null.StringFrom(TestName)
diff --git a/stats/cloud/collector_test.go b/stats/cloud/collector_test.go
index 191aa7ef0..2b44f47fc 100644
--- a/stats/cloud/collector_test.go
+++ b/stats/cloud/collector_test.go
@@ -682,3 +682,51 @@ func TestCloudCollectorRecvIterLIAllIterations(t *testing.T) {
 	wg.Wait()
 	require.True(t, gotIterations)
 }
+
+func TestNewName(t *testing.T) {
+	t.Parallel()
+	mustParse := func(u string) *url.URL {
+		result, err := url.Parse(u)
+		require.NoError(t, err)
+		return result
+	}
+
+	cases := []struct {
+		url      *url.URL
+		expected string
+	}{
+		{
+			url: &url.URL{
+				Opaque: "github.com/loadimpact/k6/samples/http_get.js",
+			},
+			expected: "http_get.js",
+		},
+		{
+			url:      mustParse("http://github.com/loadimpact/k6/samples/http_get.js"),
+			expected: "http_get.js",
+		},
+		{
+			url:      mustParse("file://home/user/k6/samples/http_get.js"),
+			expected: "http_get.js",
+		},
+		{
+			url:      mustParse("file://C:/home/user/k6/samples/http_get.js"),
+			expected: "http_get.js",
+		},
+	}
+
+	for _, testCase := range cases {
+		testCase := testCase
+
+		t.Run(testCase.url.String(), func(t *testing.T) {
+			script := &loader.SourceData{
+				URL: testCase.url,
+			}
+			collector, err := New(NewConfig(), script, lib.Options{
+				Duration: types.NullDurationFrom(1 * time.Second),
+			}, "1.0")
+			require.NoError(t, err)
+			require.Equal(t, collector.config.Name.String, testCase.expected)
+		})
+	}
+}
