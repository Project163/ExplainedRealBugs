diff --git a/js/bundle.go b/js/bundle.go
index 5c4a2c7ae..fe6172e14 100644
--- a/js/bundle.go
+++ b/js/bundle.go
@@ -85,9 +85,14 @@ func newBundle(
 		CompatibilityMode: compatMode,
 		callableExports:   make(map[string]struct{}),
 		filesystems:       filesystems,
-		pwd:               loader.Dir(src.URL),
+		pwd:               src.PWD,
 		preInitState:      piState,
 	}
+
+	if bundle.pwd == nil {
+		bundle.pwd = loader.Dir(src.URL)
+	}
+
 	c := bundle.newCompiler(piState.Logger)
 	bundle.ModuleResolver = modules.NewModuleResolver(getJSModules(), generateFileLoad(bundle), c)
 
diff --git a/loader/loader.go b/loader/loader.go
index 244135129..7e2c862fa 100644
--- a/loader/loader.go
+++ b/loader/loader.go
@@ -23,6 +23,7 @@ import (
 type SourceData struct {
 	Data []byte
 	URL  *url.URL
+	PWD  *url.URL
 }
 
 type loaderFunc func(logger logrus.FieldLogger, path string, parts []string) (string, error)
diff --git a/loader/readsource.go b/loader/readsource.go
index e28a8b3d7..1f9d88699 100644
--- a/loader/readsource.go
+++ b/loader/readsource.go
@@ -16,6 +16,7 @@ import (
 func ReadSource(
 	logger logrus.FieldLogger, src, pwd string, filesystems map[string]fsext.Fs, stdin io.Reader,
 ) (*SourceData, error) {
+	pwdURL := &url.URL{Scheme: "file", Path: filepath.ToSlash(filepath.Clean(pwd)) + "/"}
 	if src == "-" {
 		data, err := io.ReadAll(stdin)
 		if err != nil {
@@ -27,7 +28,7 @@ func ReadSource(
 		if err != nil {
 			return nil, fmt.Errorf("caching data read from -: %w", err)
 		}
-		return &SourceData{URL: &url.URL{Path: "/-", Scheme: "file"}, Data: data}, err
+		return &SourceData{URL: &url.URL{Path: "/-", Scheme: "file"}, Data: data, PWD: pwdURL}, err
 	}
 	var srcLocalPath string
 	if filepath.IsAbs(src) {
@@ -43,7 +44,6 @@ func ReadSource(
 		return Load(logger, filesystems, &url.URL{Scheme: "file", Path: filepath.ToSlash(srcLocalPath)}, src)
 	}
 
-	pwdURL := &url.URL{Scheme: "file", Path: filepath.ToSlash(filepath.Clean(pwd)) + "/"}
 	srcURL, err := Resolve(pwdURL, filepath.ToSlash(src))
 	if err != nil {
 		var unresolvedError unresolvableURLError
diff --git a/loader/readsource_test.go b/loader/readsource_test.go
index 3451c992c..8382cda1a 100644
--- a/loader/readsource_test.go
+++ b/loader/readsource_test.go
@@ -44,6 +44,7 @@ func TestReadSourceSTDINCache(t *testing.T) {
 	require.Equal(t, &SourceData{
 		URL:  &url.URL{Scheme: "file", Path: "/-"},
 		Data: data,
+		PWD:  &url.URL{Scheme: "file", Path: "/path/to/pwd/"},
 	}, sourceData)
 	fileData, err := fsext.ReadFile(fs, "/-")
 	require.NoError(t, err)
