[{"id":1126379954,"node_id":"MDEyOkxhYmVsZWRFdmVudDExMjYzNzk5NTQ=","url":"https://api.github.com/repos/grafana/k6/issues/events/1126379954","actor":{"login":"caalle","id":186815,"node_id":"MDQ6VXNlcjE4NjgxNQ==","avatar_url":"https://avatars.githubusercontent.com/u/186815?v=4","gravatar_id":"","url":"https://api.github.com/users/caalle","html_url":"https://github.com/caalle","followers_url":"https://api.github.com/users/caalle/followers","following_url":"https://api.github.com/users/caalle/following{/other_user}","gists_url":"https://api.github.com/users/caalle/gists{/gist_id}","starred_url":"https://api.github.com/users/caalle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caalle/subscriptions","organizations_url":"https://api.github.com/users/caalle/orgs","repos_url":"https://api.github.com/users/caalle/repos","events_url":"https://api.github.com/users/caalle/events{/privacy}","received_events_url":"https://api.github.com/users/caalle/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-06-16T07:43:05Z","label":{"name":"question","color":"cc317c"},"performed_via_github_app":null},{"id":1126379955,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTEyNjM3OTk1NQ==","url":"https://api.github.com/repos/grafana/k6/issues/events/1126379955","actor":{"login":"gbts","id":1908663,"node_id":"MDQ6VXNlcjE5MDg2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1908663?v=4","gravatar_id":"","url":"https://api.github.com/users/gbts","html_url":"https://github.com/gbts","followers_url":"https://api.github.com/users/gbts/followers","following_url":"https://api.github.com/users/gbts/following{/other_user}","gists_url":"https://api.github.com/users/gbts/gists{/gist_id}","starred_url":"https://api.github.com/users/gbts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gbts/subscriptions","organizations_url":"https://api.github.com/users/gbts/orgs","repos_url":"https://api.github.com/users/gbts/repos","events_url":"https://api.github.com/users/gbts/events{/privacy}","received_events_url":"https://api.github.com/users/gbts/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-06-16T07:43:05Z","performed_via_github_app":null},{"id":1126379956,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDExMjYzNzk5NTY=","url":"https://api.github.com/repos/grafana/k6/issues/events/1126379956","actor":{"login":"gbts","id":1908663,"node_id":"MDQ6VXNlcjE5MDg2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1908663?v=4","gravatar_id":"","url":"https://api.github.com/users/gbts","html_url":"https://github.com/gbts","followers_url":"https://api.github.com/users/gbts/followers","following_url":"https://api.github.com/users/gbts/following{/other_user}","gists_url":"https://api.github.com/users/gbts/gists{/gist_id}","starred_url":"https://api.github.com/users/gbts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gbts/subscriptions","organizations_url":"https://api.github.com/users/gbts/orgs","repos_url":"https://api.github.com/users/gbts/repos","events_url":"https://api.github.com/users/gbts/events{/privacy}","received_events_url":"https://api.github.com/users/gbts/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-06-16T07:43:05Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/308976331","html_url":"https://github.com/grafana/k6/issues/254#issuecomment-308976331","issue_url":"https://api.github.com/repos/grafana/k6/issues/254","id":308976331,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODk3NjMzMQ==","user":{"login":"gbts","id":1908663,"node_id":"MDQ6VXNlcjE5MDg2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1908663?v=4","gravatar_id":"","url":"https://api.github.com/users/gbts","html_url":"https://github.com/gbts","followers_url":"https://api.github.com/users/gbts/followers","following_url":"https://api.github.com/users/gbts/following{/other_user}","gists_url":"https://api.github.com/users/gbts/gists{/gist_id}","starred_url":"https://api.github.com/users/gbts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gbts/subscriptions","organizations_url":"https://api.github.com/users/gbts/orgs","repos_url":"https://api.github.com/users/gbts/repos","events_url":"https://api.github.com/users/gbts/events{/privacy}","received_events_url":"https://api.github.com/users/gbts/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T09:15:27Z","updated_at":"2017-06-16T10:39:22Z","body":"Hi @caalle , the websocket module supports the vanilla websocket protocol. So our version of `socket.send` is similar to node.js's `ws` `send`, i.e. it sends raw data frames to the server. Socket.io  is an additional abstraction over that protocol and one of the things it does is to add a type to each message.\r\n\r\nLooking up their client's source code, what socket.io's `emit` seems to do is to pack the message type & data in a JSON array and then send it, which I assume you could emulate with something like this:\r\n\r\n    socket.send(JSON.stringify(['authenticate', {token}]))\r\n\r\nand conversely, to receive custom messages you could parse the array and check the event type:\r\n\r\n    socket.on('message', function(raw) {\r\n        var args = JSON.parse(raw);\r\n        if (args[0] == 'my-custom-message-type') {\r\n            var data = args[1];\r\n            ...\r\n        }\r\n    });\r\n\r\nNow the reason that our `send` worked for you without encoding the data is that socket.io probably defaults to the 'message' event when it receives unpacked data. Take the code above with a grain of salt as I'm not very familiar with socket.io, so maybe I'm missing some additional step here.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/308976331/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"gbts","id":1908663,"node_id":"MDQ6VXNlcjE5MDg2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1908663?v=4","gravatar_id":"","url":"https://api.github.com/users/gbts","html_url":"https://github.com/gbts","followers_url":"https://api.github.com/users/gbts/followers","following_url":"https://api.github.com/users/gbts/following{/other_user}","gists_url":"https://api.github.com/users/gbts/gists{/gist_id}","starred_url":"https://api.github.com/users/gbts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gbts/subscriptions","organizations_url":"https://api.github.com/users/gbts/orgs","repos_url":"https://api.github.com/users/gbts/repos","events_url":"https://api.github.com/users/gbts/events{/privacy}","received_events_url":"https://api.github.com/users/gbts/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1126501483,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTEyNjUwMTQ4Mw==","url":"https://api.github.com/repos/grafana/k6/issues/events/1126501483","actor":{"login":"caalle","id":186815,"node_id":"MDQ6VXNlcjE4NjgxNQ==","avatar_url":"https://avatars.githubusercontent.com/u/186815?v=4","gravatar_id":"","url":"https://api.github.com/users/caalle","html_url":"https://github.com/caalle","followers_url":"https://api.github.com/users/caalle/followers","following_url":"https://api.github.com/users/caalle/following{/other_user}","gists_url":"https://api.github.com/users/caalle/gists{/gist_id}","starred_url":"https://api.github.com/users/caalle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caalle/subscriptions","organizations_url":"https://api.github.com/users/caalle/orgs","repos_url":"https://api.github.com/users/caalle/repos","events_url":"https://api.github.com/users/caalle/events{/privacy}","received_events_url":"https://api.github.com/users/caalle/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-06-16T09:15:27Z","performed_via_github_app":null},{"id":1126501484,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDExMjY1MDE0ODQ=","url":"https://api.github.com/repos/grafana/k6/issues/events/1126501484","actor":{"login":"caalle","id":186815,"node_id":"MDQ6VXNlcjE4NjgxNQ==","avatar_url":"https://avatars.githubusercontent.com/u/186815?v=4","gravatar_id":"","url":"https://api.github.com/users/caalle","html_url":"https://github.com/caalle","followers_url":"https://api.github.com/users/caalle/followers","following_url":"https://api.github.com/users/caalle/following{/other_user}","gists_url":"https://api.github.com/users/caalle/gists{/gist_id}","starred_url":"https://api.github.com/users/caalle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caalle/subscriptions","organizations_url":"https://api.github.com/users/caalle/orgs","repos_url":"https://api.github.com/users/caalle/repos","events_url":"https://api.github.com/users/caalle/events{/privacy}","received_events_url":"https://api.github.com/users/caalle/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-06-16T09:15:27Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/347489992","html_url":"https://github.com/grafana/k6/issues/254#issuecomment-347489992","issue_url":"https://api.github.com/repos/grafana/k6/issues/254","id":347489992,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzQ4OTk5Mg==","user":{"login":"ppcano","id":825430,"node_id":"MDQ6VXNlcjgyNTQzMA==","avatar_url":"https://avatars.githubusercontent.com/u/825430?v=4","gravatar_id":"","url":"https://api.github.com/users/ppcano","html_url":"https://github.com/ppcano","followers_url":"https://api.github.com/users/ppcano/followers","following_url":"https://api.github.com/users/ppcano/following{/other_user}","gists_url":"https://api.github.com/users/ppcano/gists{/gist_id}","starred_url":"https://api.github.com/users/ppcano/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppcano/subscriptions","organizations_url":"https://api.github.com/users/ppcano/orgs","repos_url":"https://api.github.com/users/ppcano/repos","events_url":"https://api.github.com/users/ppcano/events{/privacy}","received_events_url":"https://api.github.com/users/ppcano/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T11:07:25Z","updated_at":"2017-11-28T11:07:25Z","body":"The `ws` docs has been recently updated [here](https://docs.k6.io/docs/k6-websocket-api)\r\n\r\nClosing this issue.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/347489992/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ppcano","id":825430,"node_id":"MDQ6VXNlcjgyNTQzMA==","avatar_url":"https://avatars.githubusercontent.com/u/825430?v=4","gravatar_id":"","url":"https://api.github.com/users/ppcano","html_url":"https://github.com/ppcano","followers_url":"https://api.github.com/users/ppcano/followers","following_url":"https://api.github.com/users/ppcano/following{/other_user}","gists_url":"https://api.github.com/users/ppcano/gists{/gist_id}","starred_url":"https://api.github.com/users/ppcano/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppcano/subscriptions","organizations_url":"https://api.github.com/users/ppcano/orgs","repos_url":"https://api.github.com/users/ppcano/repos","events_url":"https://api.github.com/users/ppcano/events{/privacy}","received_events_url":"https://api.github.com/users/ppcano/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1361124264,"node_id":"MDExOkNsb3NlZEV2ZW50MTM2MTEyNDI2NA==","url":"https://api.github.com/repos/grafana/k6/issues/events/1361124264","actor":{"login":"ppcano","id":825430,"node_id":"MDQ6VXNlcjgyNTQzMA==","avatar_url":"https://avatars.githubusercontent.com/u/825430?v=4","gravatar_id":"","url":"https://api.github.com/users/ppcano","html_url":"https://github.com/ppcano","followers_url":"https://api.github.com/users/ppcano/followers","following_url":"https://api.github.com/users/ppcano/following{/other_user}","gists_url":"https://api.github.com/users/ppcano/gists{/gist_id}","starred_url":"https://api.github.com/users/ppcano/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppcano/subscriptions","organizations_url":"https://api.github.com/users/ppcano/orgs","repos_url":"https://api.github.com/users/ppcano/repos","events_url":"https://api.github.com/users/ppcano/events{/privacy}","received_events_url":"https://api.github.com/users/ppcano/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2017-11-28T11:07:25Z","state_reason":null,"performed_via_github_app":null},{"id":3586674611,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM1ODY2NzQ2MTE=","url":"https://api.github.com/repos/grafana/k6/issues/events/3586674611","actor":{"login":"SulejmaniRodrigo","id":55079714,"node_id":"MDQ6VXNlcjU1MDc5NzE0","avatar_url":"https://avatars.githubusercontent.com/u/55079714?v=4","gravatar_id":"","url":"https://api.github.com/users/SulejmaniRodrigo","html_url":"https://github.com/SulejmaniRodrigo","followers_url":"https://api.github.com/users/SulejmaniRodrigo/followers","following_url":"https://api.github.com/users/SulejmaniRodrigo/following{/other_user}","gists_url":"https://api.github.com/users/SulejmaniRodrigo/gists{/gist_id}","starred_url":"https://api.github.com/users/SulejmaniRodrigo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SulejmaniRodrigo/subscriptions","organizations_url":"https://api.github.com/users/SulejmaniRodrigo/orgs","repos_url":"https://api.github.com/users/SulejmaniRodrigo/repos","events_url":"https://api.github.com/users/SulejmaniRodrigo/events{/privacy}","received_events_url":"https://api.github.com/users/SulejmaniRodrigo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-07-26T00:38:47Z","performed_via_github_app":null}]