{"url":"https://api.github.com/repos/grafana/k6/issues/387","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/387/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/387/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/387/events","html_url":"https://github.com/grafana/k6/issues/387","id":278067789,"node_id":"MDU6SXNzdWUyNzgwNjc3ODk=","number":387,"title":"Include non-transpiled JS files in k6 archives","user":{"login":"robingustafsson","id":1792533,"node_id":"MDQ6VXNlcjE3OTI1MzM=","avatar_url":"https://avatars.githubusercontent.com/u/1792533?v=4","gravatar_id":"","url":"https://api.github.com/users/robingustafsson","html_url":"https://github.com/robingustafsson","followers_url":"https://api.github.com/users/robingustafsson/followers","following_url":"https://api.github.com/users/robingustafsson/following{/other_user}","gists_url":"https://api.github.com/users/robingustafsson/gists{/gist_id}","starred_url":"https://api.github.com/users/robingustafsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robingustafsson/subscriptions","organizations_url":"https://api.github.com/users/robingustafsson/orgs","repos_url":"https://api.github.com/users/robingustafsson/repos","events_url":"https://api.github.com/users/robingustafsson/events{/privacy}","received_events_url":"https://api.github.com/users/robingustafsson/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-11-30T10:23:30Z","updated_at":"2017-12-03T18:06:25Z","closed_at":"2017-12-03T18:06:25Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"There are two reasons why this would be a good idea:\r\n\r\n1. In our cloud service (loadimpact.com) we would like to be able to access the non-transpiled ES6 JS. The current ES5 transpiled JS file(s) included in k6 archives would not be as recognizable to the user, and we'd want to be able to show the script for user reference when analyzing results (and down the line for displaying scripting errors etc.). It could also be that the JS code is not written by the user directly but rather converted from some other format (HAR/Postman/etc) in which case we'd like to be able to show the code in various ways to guide/educate the user on scripting.\r\n\r\n2. The k6 archive could be used to share a test with others. Not just for execution as would be the primary use case now given what's included in the archive, but for sharing the actual scripts and data files themselves. Sometimes it would be quicker to just `k6 archive script.js` and share over Slack or whatever than to share the code through Github or the like.\r\n\r\nFor reference this simple ES6 JS code:\r\n\r\n```js\r\nimport http from \"k6/http\";\r\nimport { sleep } from \"k6\";\r\n\r\nexport default function() {\r\n  http.get(\"http://test.loadimpact.com\");\r\n  sleep(1);\r\n};\r\n```\r\n\r\ngets transpiled into this ES5 code when included in the archive:\r\n\r\n```js\r\n\"use strict\";Object.defineProperty(exports, \"__esModule\", { value: true });exports.default =\r\n\r\nfunction () {\r\n  _http2.default.get(\"http://test.loadimpact.com\");\r\n  (0, _k.sleep)(1);\r\n};var _http = require(\"k6/http\");var _http2 = _interopRequireDefault(_http);var _k = require(\"k6\");function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };};\r\n```","closed_by":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/387/timeline","performed_via_github_app":null,"state_reason":"completed"}