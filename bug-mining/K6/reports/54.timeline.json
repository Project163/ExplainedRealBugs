[{"id":1191840179,"node_id":"MDExOkNsb3NlZEV2ZW50MTE5MTg0MDE3OQ==","url":"https://api.github.com/repos/grafana/k6/issues/events/1191840179","actor":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"e4906c3f2bdd5fb7038e5b78c90db590e21d778e","commit_url":"https://api.github.com/repos/grafana/k6/commits/e4906c3f2bdd5fb7038e5b78c90db590e21d778e","created_at":"2017-08-03T17:31:39Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"inancgumus","id":621232,"node_id":"MDQ6VXNlcjYyMTIzMg==","avatar_url":"https://avatars.githubusercontent.com/u/621232?v=4","gravatar_id":"","url":"https://api.github.com/users/inancgumus","html_url":"https://github.com/inancgumus","followers_url":"https://api.github.com/users/inancgumus/followers","following_url":"https://api.github.com/users/inancgumus/following{/other_user}","gists_url":"https://api.github.com/users/inancgumus/gists{/gist_id}","starred_url":"https://api.github.com/users/inancgumus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/inancgumus/subscriptions","organizations_url":"https://api.github.com/users/inancgumus/orgs","repos_url":"https://api.github.com/users/inancgumus/repos","events_url":"https://api.github.com/users/inancgumus/events{/privacy}","received_events_url":"https://api.github.com/users/inancgumus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-30T22:04:53Z","updated_at":"2025-01-30T22:04:53Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/4490","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/4490/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/4490/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/4490/events","html_url":"https://github.com/grafana/k6/issues/4490","id":2821910124,"node_id":"I_kwDOAz4Wr86oMu5s","number":4490,"title":"Locator API","user":{"login":"robingustafsson","id":1792533,"node_id":"MDQ6VXNlcjE3OTI1MzM=","avatar_url":"https://avatars.githubusercontent.com/u/1792533?v=4","gravatar_id":"","url":"https://api.github.com/users/robingustafsson","html_url":"https://github.com/robingustafsson","followers_url":"https://api.github.com/users/robingustafsson/followers","following_url":"https://api.github.com/users/robingustafsson/following{/other_user}","gists_url":"https://api.github.com/users/robingustafsson/gists{/gist_id}","starred_url":"https://api.github.com/users/robingustafsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robingustafsson/subscriptions","organizations_url":"https://api.github.com/users/robingustafsson/orgs","repos_url":"https://api.github.com/users/robingustafsson/repos","events_url":"https://api.github.com/users/robingustafsson/events{/privacy}","received_events_url":"https://api.github.com/users/robingustafsson/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":869282130,"node_id":"MDU6TGFiZWw4NjkyODIxMzA=","url":"https://api.github.com/repos/grafana/k6/labels/feature","name":"feature","color":"5319E7","default":false,"description":""},{"id":5881916984,"node_id":"LA_kwDOAz4Wr88AAAABXpbuOA","url":"https://api.github.com/repos/grafana/k6/labels/triage","name":"triage","color":"2ee8ff","default":false,"description":""},{"id":6004839752,"node_id":"LA_kwDOAz4Wr88AAAABZeqVSA","url":"https://api.github.com/repos/grafana/k6/labels/area:%20browser","name":"area: browser","color":"FFCD46","default":false,"description":""},{"id":8078893305,"node_id":"LA_kwDOAz4Wr88AAAAB4Yog-Q","url":"https://api.github.com/repos/grafana/k6/labels/browser:%20playwright","name":"browser: playwright","color":"FFCD46","default":false,"description":"related to Playwright compatibility"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-11-12T08:25:21Z","updated_at":"2025-10-13T07:55:31Z","closed_at":null,"author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"We started the development of the first version on May 16th.\n\n### Strict forwarders (milestone: [v0.7.0](https://github.com/grafana/xk6-browser/milestone/6))\n\n- [x] grafana/xk6-browser#660\n\n### Strict forwarders (milestone: [v0.4.0](https://github.com/grafana/xk6-browser/milestone/3))\n\nThe locator methods that forward calls to the `Frame` methods with the strict mode on (meaning: only select a single element).\n\n- [x] grafana/xk6-browser#308\n- [x] grafana/xk6-browser#334\n- [x] grafana/xk6-browser#311\n- [x] grafana/xk6-browser#331\n- [x] grafana/xk6-browser#359\n- [x] grafana/xk6-browser#346\n- [x] grafana/xk6-browser#348\n- [x] grafana/xk6-browser#349\n- [x] grafana/xk6-browser#347\n- [x] grafana/xk6-browser#351\n- [x] grafana/xk6-browser#350\n- [x] grafana/xk6-browser#338\n- [x] grafana/xk6-browser#339\n- [x] grafana/xk6-browser#341\n- [x] grafana/xk6-browser#343\n- [x] grafana/xk6-browser#344\n- [x] grafana/xk6-browser#357\n- [x] grafana/xk6-browser#345\n- [x] grafana/xk6-browser#353\n- [x] grafana/xk6-browser#352\n- [x] grafana/xk6-browser#358\n- [x] grafana/xk6-browser#356\n- [x] grafana/xk6-browser#342\n- [x] grafana/xk6-browser#335\n- [x] grafana/xk6-browser#360\n\n### Just-in-time element finder methods\n\nThe locator methods wrap around existing `ElementHandle` methods. For example:\n\n```typescript\n// locator method\nasync evaluate<R, Arg>(pageFunction: structs.PageFunctionOn, arg?: Arg, options?: TimeoutOptions): Promise<R> {\n  return this._withElement(h => h.evaluate(pageFunction, arg), options?.timeout);\n}\n\n// wrapped method (jsHandle.ts)\nasync evaluate<R, Arg>(pageFunction: structs.PageFunctionOn, arg?: Arg): Promise < R > { ... }\n```\n\n`_withElement` queries the element using `waitForSelector` in the current frame and returns a disposed element handle:\n\n```typescript\n  private async _withElement<R>(task: (handle: ElementHandle<SVGElement | HTMLElement>, timeout?: number) => Promise<R>, timeout?: number): Promise<R> {\n    timeout = this._frame.page()._timeoutSettings.timeout({ timeout });\n    const deadline = timeout ? monotonicTime() + timeout : 0;\n\n    return this._frame._wrapApiCall<R>(async () => {\n      const result = await this._frame._channel.waitForSelector({ selector: this._selector, strict: true, state: 'attached', timeout });\n      const handle = ElementHandle.fromNullable(result.element) as ElementHandle<SVGElement | HTMLElement> | null;\n      if (!handle)\n        throw new Error(`Could not resolve ${this._selector} to DOM Element`);\n      try {\n        return await task(handle, deadline ? deadline - monotonicTime() : 0);\n      } finally {\n        await handle.dispose();\n      }\n    });\n  }\n```\n\n- [x] [locator.boundingBox([options])](https://playwright.dev/docs/api/class-locator#locator-bounding-box)\n- [ ] [locator.evaluate(pageFunction[, arg, options])](https://playwright.dev/docs/api/class-locator#locator-evaluate)\n- [ ] [locator.evaluateHandle(pageFunction[, arg, options])](https://playwright.dev/docs/api/class-locator#locator-evaluate-handle)\n- [ ] [locator.screenshot([options])](https://playwright.dev/docs/api/class-locator#locator-screenshot)\n- [ ] [locator.scrollIntoViewIfNeeded([options])](https://playwright.dev/docs/api/class-locator#locator-scroll-into-view-if-needed)\n- [ ] [locator.selectText([options])](https://playwright.dev/docs/api/class-locator#locator-select-text) \n\n### Locator-specific methods\n\nAllows users to move between the selected element.\n\n- [x] grafana/k6#4251\n- [ ] [locator.page()](https://playwright.dev/docs/api/class-locator#locator-page)\n- [ ] [page.frameLocator(selector)](https://playwright.dev/docs/api/class-page#page-frame-locator) â€” creates a new locator for a frame (usually for iframes)\n- [x] [locator.first()](https://playwright.dev/docs/api/class-locator#locator-first)\n- [x] [locator.last()](https://playwright.dev/docs/api/class-locator#locator-last)\n- [x] [locator.nth(index)](https://playwright.dev/docs/api/class-locator#locator-nth)\n- [x] https://github.com/grafana/k6/pull/4797\n- [ ] [locator.allInnerTexts()](https://playwright.dev/docs/api/class-locator#locator-all-inner-texts) \n- [ ] [locator.allTextContents()](https://playwright.dev/docs/api/class-locator#locator-all-text-contents)\n- [ ] [locator.elementHandles()](https://playwright.dev/docs/api/class-locator#locator-element-handles)\n- [ ] [locator.evaluateAll(pageFunction[, arg])](https://playwright.dev/docs/api/class-locator#locator-evaluate-all)\n- [x] grafana/k6#4452\n- [ ] grafana/k6#4453\n\n## Blocked (milestone: unknown)\n\n- [ ] grafana/k6#4451 â€” Blocked ðŸš¨\n- [ ] grafana/k6#4346 â€” Blocked ðŸš¨\n- [ ] grafana/k6#4450 â€” Blocked ðŸš¨\n- [ ] grafana/xk6-browser#354 â€” Blocked ðŸš¨\n\n---\n\n# Explanation\n\nAdd support for `Locator`, a way to capture a pointer to DOM element(s) without attaching to an actual DOM node as `ElementHandle` does. Sort of a just-in-time version of querying the DOM and getting an `ElementHandle` back to do actions on.\n\n**Relevant links**:\n- Playwright docs: https://playwright.dev/docs/api/class-locator and https://playwright.dev/docs/api/class-page#page-locator\n\n----\n\nBelow are the May 11th, 2022, findings for this feature.\n\n## Summary\n\nThe whole idea of locators is that you can carry on selectors with youâ€”without dealing with actual elements. Locators enable the [Page Object Model](https://www.selenium.dev/documentation/test_practices/encouraged/page_object_models/) for reducing code duplication and improving test maintenance.\n\nA locator is created with a selector for a specific frame. When you invoke one of the Locator methods, they query the frame and run the action. Since they query the frame, each call can resolve to a different DOM element.\n\nBenefits:\n* Allows enabling working with dynamic web pages and [SPA](https://en.wikipedia.org/wiki/Single-page_application)s like Swelte, React, Vue, etc.\n* Allows creating a Page Object Model (POM).\n* POM reduces code duplication.\n* POM improves test maintenance.\n\nGood explanation of the strict mode and locators API:\n* https://www.youtube.com/watch?v=LczBDR0gOhk&t=180s\n* https://github.com/microsoft/playwright/blob/main/docs/src/selectors.md\n* https://github.com/microsoft/playwright/blob/main/docs/src/locators.md\n\n## Key knowledge\n\n* Each locator belongs to a single frame.\n* Every time locator is used for some action, an up-to-date DOM element is located on the page.\n* Locator is resolved to the element immediately before acting, so a series of actions on the same locator can be performed on different DOM elements. What would happen if the DOM structure between those actions changed.\n* PW recommends using [ElementHandle](https://playwright.dev/docs/api/class-elementhandle) in rare cases when you need to perform extensive DOM traversal on a static page. For all user actions and assertions, PW recommends using a locator instead.\n* [The difference](https://playwright.dev/docs/locators#locator-vs-elementhandle) between the [Locator](https://playwright.dev/docs/api/class-locator) and [ElementHandle](https://playwright.dev/docs/api/class-elementhandle) is that the latter points to a particular element, while Locator captures the logic of how to retrieve that element.\n* [Locators are strict](https://playwright.dev/docs/locators#strictness). All operations on locators that imply some target DOM element will throw an exception if more than one element matches the given selector.\n* In lazy-loaded pages, it can be useful to wait until an element is visible with [locator.waitFor([options])](https://playwright.dev/docs/api/class-locator#locator-wait-for).\n","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/4490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/4490/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]