{"url":"https://api.github.com/repos/grafana/k6/issues/1579","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/1579/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/1579/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/1579/events","html_url":"https://github.com/grafana/k6/issues/1579","id":668934884,"node_id":"MDU6SXNzdWU2Njg5MzQ4ODQ=","number":1579,"title":"K6 crashes with \"panic: runtime error: integer divide by zero\" when run in CodeFresh","user":{"login":"bbartizek","id":5341675,"node_id":"MDQ6VXNlcjUzNDE2NzU=","avatar_url":"https://avatars.githubusercontent.com/u/5341675?v=4","gravatar_id":"","url":"https://api.github.com/users/bbartizek","html_url":"https://github.com/bbartizek","followers_url":"https://api.github.com/users/bbartizek/followers","following_url":"https://api.github.com/users/bbartizek/following{/other_user}","gists_url":"https://api.github.com/users/bbartizek/gists{/gist_id}","starred_url":"https://api.github.com/users/bbartizek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bbartizek/subscriptions","organizations_url":"https://api.github.com/users/bbartizek/orgs","repos_url":"https://api.github.com/users/bbartizek/repos","events_url":"https://api.github.com/users/bbartizek/events{/privacy}","received_events_url":"https://api.github.com/users/bbartizek/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":345191758,"node_id":"MDU6TGFiZWwzNDUxOTE3NTg=","url":"https://api.github.com/repos/grafana/k6/labels/bug","name":"bug","color":"b60205","default":true,"description":""},{"id":874927263,"node_id":"MDU6TGFiZWw4NzQ5MjcyNjM=","url":"https://api.github.com/repos/grafana/k6/labels/high%20prio","name":"high prio","color":"D93F0B","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2020-07-30T16:24:59Z","updated_at":"2020-08-10T14:14:31Z","closed_at":"2020-08-10T14:14:31Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Environment\r\n<!--- Provide as much information about your environment as possible: output from `k6 version`,\r\n      OCI runtime and image information if using containers, cloud execution environment, etc. -->\r\n- k6 version: 0.27.0 / 0.27.1\r\n- OS and version: CodeFresh\r\n- Docker version and image, if applicable: loadimpact/k6:0.27.0 and loadimpact/k6:0.27.1\r\n\r\n\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\nk6 should successfully run load tests in a container\r\n\r\n## Actual Behavior\r\n<!--- Tell us what happens instead of the expected behavior -->\r\nk6 crashes with the following stack trace:\r\n```\r\nexecution: local                                                                                                                                                                                                               \r\n     script: /scripts/debug.bundle.js                                                                                                                                                                                            \r\n     output: json=test_results.json                                                                                                                                                                                              \r\n                                                                                                                                                                                                                                 \r\n  scenarios: (100.00%) 1 executors, 10 max VUs, 1m30s max duration (incl. graceful stop):                                                                                                                                        \r\n           * default: Up to 10 looping VUs for 1m0s over 3 stages (gracefulRampDown: 30s, gracefulStop: 30s)                                                                                                                     \r\n                                                                                                                                                                                                                                 \r\npanic: runtime error: integer divide by zero--] Init VUs                                                                                                                                                                         \r\n                                                                                                                                                                                                                                 \r\ngoroutine 6 [running]:                                                                                                                                                                                                           \r\ngithub.com/loadimpact/k6/cmd.renderMultipleBars(0xc007600101, 0x7, 0x0, 0x0, 0xc002678000, 0x2, 0x2, 0x5327a4, 0xd1fce0, 0x0)                                                                                                    \r\n        github.com/loadimpact/k6/cmd/ui.go:218 +0xda9                                                                                                                                                                            \r\ngithub.com/loadimpact/k6/cmd.showProgress.func2(0xc003713101)                                                                                                                                                                    \r\n        github.com/loadimpact/k6/cmd/ui.go:283 +0x8c                                                                                                                                                                             \r\ngithub.com/loadimpact/k6/cmd.showProgress(0x10d8a40, 0xc000d94100, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0xc00159cd80, ...)                                                                                                         \r\n        github.com/loadimpact/k6/cmd/ui.go:352 +0x52a                                                                                                                                                                            \r\ngithub.com/loadimpact/k6/cmd.glob..func11.1(0x10d8a40, 0xc000d94100, 0xc0005d6300, 0xc0009a2500, 0xc0001b2000, 0xc000ec4bd0)                                                                                                     \r\n        github.com/loadimpact/k6/cmd/run.go:190 +0xb9                                                                                                                                                                            \r\ncreated by github.com/loadimpact/k6/cmd.glob..func11                                                                                                                                                                             \r\n        github.com/loadimpact/k6/cmd/run.go:189 [+0xd34]\r\n```\r\n\r\n## Steps to Reproduce the Problem\r\nThis seems similar to https://github.com/loadimpact/k6/issues/1559 as it is unable to get the terminal width correctly, but 0.27.1 did not fix the issue in CodeFresh, and still crashes in the same way.  Reverting to 0.26.2 works as expected.\r\n\r\nAttempting to run any script on a k6 0.27.0 or 0.27.1 container in CodeFresh should see this behavior.","closed_by":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/1579/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/1579/timeline","performed_via_github_app":null,"state_reason":"completed"}