[{"id":8599861937,"node_id":"LE_lADOAz4Wr85fQ3mozwAAAAIAl3qx","url":"https://api.github.com/repos/grafana/k6/issues/events/8599861937","actor":{"login":"Lukemufc91","id":18332553,"node_id":"MDQ6VXNlcjE4MzMyNTUz","avatar_url":"https://avatars.githubusercontent.com/u/18332553?v=4","gravatar_id":"","url":"https://api.github.com/users/Lukemufc91","html_url":"https://github.com/Lukemufc91","followers_url":"https://api.github.com/users/Lukemufc91/followers","following_url":"https://api.github.com/users/Lukemufc91/following{/other_user}","gists_url":"https://api.github.com/users/Lukemufc91/gists{/gist_id}","starred_url":"https://api.github.com/users/Lukemufc91/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Lukemufc91/subscriptions","organizations_url":"https://api.github.com/users/Lukemufc91/orgs","repos_url":"https://api.github.com/users/Lukemufc91/repos","events_url":"https://api.github.com/users/Lukemufc91/events{/privacy}","received_events_url":"https://api.github.com/users/Lukemufc91/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-02-24T09:31:19Z","label":{"name":"bug","color":"b60205"},"performed_via_github_app":null},{"id":8600103664,"node_id":"LE_lADOAz4Wr85fQ3mozwAAAAIAmyrw","url":"https://api.github.com/repos/grafana/k6/issues/events/8600103664","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-02-24T09:57:49Z","label":{"name":"js-compat","color":"ea8394"},"performed_via_github_app":null},{"id":8600103673,"node_id":"LE_lADOAz4Wr85fQ3mozwAAAAIAmyr5","url":"https://api.github.com/repos/grafana/k6/issues/events/8600103673","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-02-24T09:57:49Z","label":{"name":"evaluation needed","color":"eda27d"},"performed_via_github_app":null},{"id":8600104147,"node_id":"MIE_lADOAz4Wr85fQ3mozwAAAAIAmyzT","url":"https://api.github.com/repos/grafana/k6/issues/events/8600104147","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2023-02-24T09:57:52Z","milestone":{"title":"v0.44.0"},"performed_via_github_app":null},{"id":8600104891,"node_id":"AE_lADOAz4Wr85fQ3mozwAAAAIAmy-7","url":"https://api.github.com/repos/grafana/k6/issues/events/8600104891","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2023-02-24T09:57:56Z","assignee":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/1443385637","html_url":"https://github.com/grafana/k6/issues/2935#issuecomment-1443385637","issue_url":"https://api.github.com/repos/grafana/k6/issues/2935","id":1443385637,"node_id":"IC_kwDOAz4Wr85WCFEl","user":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-24T09:58:48Z","updated_at":"2023-02-24T09:58:48Z","body":"Hi, thanks for opening this issue.\r\n\r\nUnfortunately, async `setup()` is not supported yet. So this is not really a bug, but a feature request.\r\n\r\nI can see how it would be useful, though in the meantime, you can resolve Promises with `.then()`, so you don't have to define `setup()` as async.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/1443385637/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/1443403286","html_url":"https://github.com/grafana/k6/issues/2935#issuecomment-1443403286","issue_url":"https://api.github.com/repos/grafana/k6/issues/2935","id":1443403286,"node_id":"IC_kwDOAz4Wr85WCJYW","user":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-24T10:11:34Z","updated_at":"2023-02-24T10:11:58Z","body":"It kind of is a bug though, since we kind of support `async` in both `setup()` and the default / scenario `exec` function - we don't throw an error and we wait for the event loop to clear :thinking: Try this:\r\n```js\r\nimport { setTimeout } from 'k6/experimental/timers'\r\n\r\nexport async function setup() {\r\n    console.log('setup()')\r\n    return new Promise(resolve => setTimeout(resolve, 2000, { data: 'Arbitrary value here' }))\r\n}\r\n\r\nexport default async function (data) {\r\n    console.log(data)\r\n    return new Promise(resolve => setTimeout(resolve, 2000, null))\r\n}\r\n```\r\n\r\nWe just don't \"unpack\" the result if we get it in a promise, but adding this to [`js/runner.go`](https://github.com/grafana/k6/blob/06ccc077a222f4dd4001a40f9fe41bd3924539ef/js/runner.go#L303) seems to do the trick:\r\n```diff\r\ndiff --git a/js/runner.go b/js/runner.go\r\nindex 056bba774..4507c4ccd 100644\r\n--- a/js/runner.go\r\n+++ b/js/runner.go\r\n@@ -301,7 +301,12 @@ func (r *Runner) Setup(ctx context.Context, out chan<- metrics.SampleContainer)\r\n \t\treturn nil\r\n \t}\r\n \r\n-\tr.setupData, err = json.Marshal(v.Export())\r\n+\tval := v.Export()\r\n+\tif p, ok := val.(*goja.Promise); ok {\r\n+\t\tval = p.Result().Export()\r\n+\t}\r\n+\r\n+\tr.setupData, err = json.Marshal(val)\r\n \tif err != nil {\r\n \t\treturn fmt.Errorf(\"error marshaling setup() data to JSON: %w\", err)\r\n \t}\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/1443403286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/1443462207","html_url":"https://github.com/grafana/k6/issues/2935#issuecomment-1443462207","issue_url":"https://api.github.com/repos/grafana/k6/issues/2935","id":1443462207,"node_id":"IC_kwDOAz4Wr85WCXw_","user":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-24T10:40:41Z","updated_at":"2023-02-24T10:40:41Z","body":"It also is a very old bug as this has been the case from when we have promises and event loop so almost a year since [v0.37.0](https://github.com/grafana/k6/releases/tag/v0.37.0). \r\n\r\nAfter all `async` means:\r\n1. this will return a promise\r\n2. you can use `await` inside the body\r\n\r\nHere only number `1` is true and have been possible since we have Promises. The event loop just added ways for there to be stuff working on the result *off* the event loop. And now the `async`/`await` keywords support give us more ergonimic way to do this. \r\n\r\nTo expand on @imiric workaround - I expect that you care about the result and it comes from an asynchronous call - let's say `http.asyncRequest`. In that case you will need to return an object and set a property of it in the `.then` so something like.\r\n```javascript \r\nimport http from \"k6/http\"\r\n\r\nexport function setup() {\r\n  let result = {}\r\n  innerSetup(result).then((res) => result.data=res)\r\n  return result \r\n}\r\n\r\nasync function innerSetup() {\r\n  let res = await http.asyncRequest(\"GET\", \"https://httpbin.test.k6.io/links/2/2\")\r\n  return res.body\r\n}\r\n\r\nexport default function (data) {\r\n  console.log(data.data)\r\n}\r\n```\r\n\r\n\r\nAs you can see you can even use `async` function within ;) ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/1443462207/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8600483621,"node_id":"MEE_lADOAz4Wr85fQ3mozwAAAAIAoPcl","url":"https://api.github.com/repos/grafana/k6/issues/events/8600483621","actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-02-24T10:40:42Z","performed_via_github_app":null},{"id":8600483637,"node_id":"SE_lADOAz4Wr85fQ3mozwAAAAIAoPc1","url":"https://api.github.com/repos/grafana/k6/issues/events/8600483637","actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-02-24T10:40:42Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/1444120134","html_url":"https://github.com/grafana/k6/issues/2935#issuecomment-1444120134","issue_url":"https://api.github.com/repos/grafana/k6/issues/2935","id":1444120134,"node_id":"IC_kwDOAz4Wr85WE4ZG","user":{"login":"Lukemufc91","id":18332553,"node_id":"MDQ6VXNlcjE4MzMyNTUz","avatar_url":"https://avatars.githubusercontent.com/u/18332553?v=4","gravatar_id":"","url":"https://api.github.com/users/Lukemufc91","html_url":"https://github.com/Lukemufc91","followers_url":"https://api.github.com/users/Lukemufc91/followers","following_url":"https://api.github.com/users/Lukemufc91/following{/other_user}","gists_url":"https://api.github.com/users/Lukemufc91/gists{/gist_id}","starred_url":"https://api.github.com/users/Lukemufc91/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Lukemufc91/subscriptions","organizations_url":"https://api.github.com/users/Lukemufc91/orgs","repos_url":"https://api.github.com/users/Lukemufc91/repos","events_url":"https://api.github.com/users/Lukemufc91/events{/privacy}","received_events_url":"https://api.github.com/users/Lukemufc91/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-24T17:45:00Z","updated_at":"2023-02-24T17:45:00Z","body":"Thanks @mstoykov interestingly I had tried using the .then() with a non async setup already and received no result as I was passing back the resulting data string directly, encapsulating it in an object as you suggested worked perfectly.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/1444120134/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Lukemufc91","id":18332553,"node_id":"MDQ6VXNlcjE4MzMyNTUz","avatar_url":"https://avatars.githubusercontent.com/u/18332553?v=4","gravatar_id":"","url":"https://api.github.com/users/Lukemufc91","html_url":"https://github.com/Lukemufc91","followers_url":"https://api.github.com/users/Lukemufc91/followers","following_url":"https://api.github.com/users/Lukemufc91/following{/other_user}","gists_url":"https://api.github.com/users/Lukemufc91/gists{/gist_id}","starred_url":"https://api.github.com/users/Lukemufc91/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Lukemufc91/subscriptions","organizations_url":"https://api.github.com/users/Lukemufc91/orgs","repos_url":"https://api.github.com/users/Lukemufc91/repos","events_url":"https://api.github.com/users/Lukemufc91/events{/privacy}","received_events_url":"https://api.github.com/users/Lukemufc91/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8604314116,"node_id":"MEE_lADOAz4Wr85fQ3mozwAAAAIA22oE","url":"https://api.github.com/repos/grafana/k6/issues/events/8604314116","actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-02-24T17:45:00Z","performed_via_github_app":null},{"id":8604314131,"node_id":"SE_lADOAz4Wr85fQ3mozwAAAAIA22oT","url":"https://api.github.com/repos/grafana/k6/issues/events/8604314131","actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-02-24T17:45:00Z","performed_via_github_app":null},{"actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-03-07T09:45:53Z","updated_at":"2023-03-07T09:45:53Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/2959","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/2959/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/2959/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/2959/events","html_url":"https://github.com/grafana/k6/issues/2959","id":1613006885,"node_id":"I_kwDOAz4Wr85gJIgl","number":2959,"title":"handleSummary() accept promise return OR synchronous redisClient","user":{"login":"michael-sw-id","id":106061018,"node_id":"U_kgDOBlJc2g","avatar_url":"https://avatars.githubusercontent.com/u/106061018?v=4","gravatar_id":"","url":"https://api.github.com/users/michael-sw-id","html_url":"https://github.com/michael-sw-id","followers_url":"https://api.github.com/users/michael-sw-id/followers","following_url":"https://api.github.com/users/michael-sw-id/following{/other_user}","gists_url":"https://api.github.com/users/michael-sw-id/gists{/gist_id}","starred_url":"https://api.github.com/users/michael-sw-id/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michael-sw-id/subscriptions","organizations_url":"https://api.github.com/users/michael-sw-id/orgs","repos_url":"https://api.github.com/users/michael-sw-id/repos","events_url":"https://api.github.com/users/michael-sw-id/events{/privacy}","received_events_url":"https://api.github.com/users/michael-sw-id/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":869282130,"node_id":"MDU6TGFiZWw4NjkyODIxMzA=","url":"https://api.github.com/repos/grafana/k6/labels/feature","name":"feature","color":"5319E7","default":false,"description":""},{"id":949381702,"node_id":"MDU6TGFiZWw5NDkzODE3MDI=","url":"https://api.github.com/repos/grafana/k6/labels/js-compat","name":"js-compat","color":"ea8394","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/grafana/k6/milestones/32","html_url":"https://github.com/grafana/k6/milestone/32","labels_url":"https://api.github.com/repos/grafana/k6/milestones/32/labels","id":8980326,"node_id":"MI_kwDOAz4Wr84AiQdm","number":32,"title":"v0.44.0","description":"","creator":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":56,"state":"closed","created_at":"2023-01-30T08:18:12Z","updated_at":"2023-04-26T12:52:39Z","due_on":"2023-04-24T07:00:00Z","closed_at":"2023-04-26T12:52:39Z"},"comments":6,"created_at":"2023-03-07T09:01:59Z","updated_at":"2023-03-23T10:51:37Z","closed_at":"2023-03-23T10:51:36Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Feature Description\r\n\r\nProvide blocking/sync RedisClient or change handleSummary() to accept promise.\r\n\r\n### Suggested Solution (optional)\r\n\r\n_No response_\r\n\r\n### Already existing or connected issues / PRs (optional)\r\n\r\nWe would like to use redis and handleSummary to export created customers to json during \"test customer creation\" run so that we can feed customers to actual load test runs.\r\n\r\nUnfortunately:\r\n- RedisClient is non-blocking and requires promises\r\n- HandleSummary() cannot return a promise so we can't use async:await\r\n\r\n\r\nExample using async:await for handleSummary (because redisclient uses promise api)\r\n```\r\nexport const  handleSummary = async (data) => {\r\n  let parsedCustomers = [];\r\n\r\n  sleep(1) // for some reason need to wait for redis \r\n  let redisCustomers = await redisClient.smembers('created_customers')\r\n\r\n  console.log(redisCustomers.length + \" customers found in redis..\")\r\n  redisCustomers.forEach(c => {\r\n    parsedCustomers.push(JSON.parse(c))\r\n  });\r\n\r\n  redisClient.del(\"created_customers\")\r\n  return {\r\n    \"created-customers.json\": JSON.stringify(parsedCustomers),\r\n    \"customer-creation-summary.html\": htmlReport(data),\r\n    // 'stdout': textSummary(data, { indent: ' ', enableColors: true }),\r\n  };\r\n}\r\n```\r\n\r\nThe above fails with\r\n```\r\nERRO[0002] failed to handle the end-of-test summary      error=\"handleSummary() should return a map with string keys\"\r\n```\r\n\r\nUsing promises it's not possible to pass result to return:\r\n\r\n```\r\nexport function handleSummary(data) {\r\n  let created_customers = [];\r\n\r\n  sleep(1) // for some reason need to wait for redis \r\n  redisClient.smembers('created_customers')\r\n    .then((customers) => {\r\n      console.log(customers.length + \" customers found in redis..\")\r\n      customers.forEach(c => {\r\n        created_customers.push(JSON.parse(c))\r\n      });\r\n    })\r\n    .then((_) => {\r\n      redisClient.del(\"created_customers\")\r\n    })\r\n    return {\r\n      'stdout' : textSummary(data, { indent: ' ', enableColors: true }),\r\n      'customer-creation-summary.html': htmlReport(data),\r\n      'created-customers.json': JSON.stringify(created_customers)\r\n    };\r\n}\r\n```\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/2959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/2959/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":8683686797,"node_id":"UNLE_lADOAz4Wr85fQ3mozwAAAAIFlouN","url":"https://api.github.com/repos/grafana/k6/issues/events/8683686797","actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2023-03-07T09:46:26Z","label":{"name":"evaluation needed","color":"eda27d"},"performed_via_github_app":null},{"id":8824641696,"node_id":"REFE_lADOAz4Wr85fQ3mozwAAAAIN_Vig","url":"https://api.github.com/repos/grafana/k6/issues/events/8824641696","actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"0025ab3b5673b2a290a0becfb0660072dd8c5d3f","commit_url":"https://api.github.com/repos/grafana/k6/commits/0025ab3b5673b2a290a0becfb0660072dd8c5d3f","created_at":"2023-03-23T08:34:56Z","performed_via_github_app":null},{"actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-03-23T08:35:03Z","updated_at":"2023-03-23T08:35:03Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/2985","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/2985/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/2985/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/2985/events","html_url":"https://github.com/grafana/k6/pull/2985","id":1637075877,"node_id":"PR_kwDOAz4Wr85Mth1f","number":2985,"title":"Support async functions for setup and handleSummary","user":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/grafana/k6/milestones/32","html_url":"https://github.com/grafana/k6/milestone/32","labels_url":"https://api.github.com/repos/grafana/k6/milestones/32/labels","id":8980326,"node_id":"MI_kwDOAz4Wr84AiQdm","number":32,"title":"v0.44.0","description":"","creator":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":56,"state":"closed","created_at":"2023-01-30T08:18:12Z","updated_at":"2023-04-26T12:52:39Z","due_on":"2023-04-24T07:00:00Z","closed_at":"2023-04-26T12:52:39Z"},"comments":1,"created_at":"2023-03-23T08:35:03Z","updated_at":"2023-03-23T10:51:36Z","closed_at":"2023-03-23T10:51:34Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/grafana/k6/pulls/2985","html_url":"https://github.com/grafana/k6/pull/2985","diff_url":"https://github.com/grafana/k6/pull/2985.diff","patch_url":"https://github.com/grafana/k6/pull/2985.patch","merged_at":"2023-03-23T10:51:34Z"},"body":"This in practice just checks that a promise was not return and get's it result.\r\n\r\nAsync functions happen to just always return promises.\r\n\r\nFixes #2935 and #2959\r\n","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/2985/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/2985/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":8825975162,"node_id":"CE_lADOAz4Wr85fQ3mozwAAAAIOEbF6","url":"https://api.github.com/repos/grafana/k6/issues/events/8825975162","actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2023-03-23T10:51:36Z","state_reason":null,"performed_via_github_app":null},{"id":8825975469,"node_id":"REFE_lADOAz4Wr85fQ3mozwAAAAIOEbKt","url":"https://api.github.com/repos/grafana/k6/issues/events/8825975469","actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"33693f60c305933eec7155df8f1709278fb44fe1","commit_url":"https://api.github.com/repos/grafana/k6/commits/33693f60c305933eec7155df8f1709278fb44fe1","created_at":"2023-03-23T10:51:38Z","performed_via_github_app":null}]