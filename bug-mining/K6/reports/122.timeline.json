[{"id":2410178551,"node_id":"MDEyOkxhYmVsZWRFdmVudDI0MTAxNzg1NTE=","url":"https://api.github.com/repos/grafana/k6/issues/events/2410178551","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-06-13T10:52:33Z","label":{"name":"enhancement","color":"84b6eb"},"performed_via_github_app":null},{"id":2410178555,"node_id":"MDEyOkxhYmVsZWRFdmVudDI0MTAxNzg1NTU=","url":"https://api.github.com/repos/grafana/k6/issues/events/2410178555","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-06-13T10:52:33Z","label":{"name":"docs","color":"072799"},"performed_via_github_app":null},{"id":2410178557,"node_id":"MDEyOkxhYmVsZWRFdmVudDI0MTAxNzg1NTc=","url":"https://api.github.com/repos/grafana/k6/issues/events/2410178557","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-06-13T10:52:33Z","label":{"name":"performance","color":"b3ed84"},"performed_via_github_app":null},{"id":2410178558,"node_id":"MDEyOkxhYmVsZWRFdmVudDI0MTAxNzg1NTg=","url":"https://api.github.com/repos/grafana/k6/issues/events/2410178558","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-06-13T10:52:34Z","label":{"name":"js-compat","color":"ea8394"},"performed_via_github_app":null},{"id":2410178563,"node_id":"MDEyOkxhYmVsZWRFdmVudDI0MTAxNzg1NjM=","url":"https://api.github.com/repos/grafana/k6/issues/events/2410178563","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-06-13T10:52:34Z","label":{"name":"evaluation needed","color":"eda27d"},"performed_via_github_app":null},{"id":2587248370,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDI1ODcyNDgzNzA=","url":"https://api.github.com/repos/grafana/k6/issues/events/2587248370","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2019-08-27T14:14:00Z","milestone":{"title":"v0.26.0"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/533025605","html_url":"https://github.com/grafana/k6/issues/1049#issuecomment-533025605","issue_url":"https://api.github.com/repos/grafana/k6/issues/1049","id":533025605,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzAyNTYwNQ==","user":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-19T08:27:34Z","updated_at":"2019-09-19T08:27:34Z","body":"After some discussion regarding this, @sniku proposed that instead of a combined `--no-js-magic` or individual `--no-babel` and `--no-corejs` `bool` flags, we should instead have a single `string` flag that would be used to specify the execution/compatibility mode k6 should use. I like this approach very much, since it's much more flexible and extensible than individual options, and in the future it could allow us to add even more customization options... It could even be used to support JS-adjacent scripts like TypeScript (https://github.com/loadimpact/k6/issues/422), whereas the current `--type` flag would probably be used for completely different things like Go (https://github.com/loadimpact/k6/issues/751) or lua.\r\n\r\nNot sure what the best name for something like that is, but for lack of a better option, I'll go with `--compatibility-mode` over `--execution-mode` for now, so that it isn't confused with the completely different execution options from https://github.com/loadimpact/k6/issues/1007, but better name suggestions are very much welcome! For now, we can start with just 2 possible options:\r\n- The default one should be the current state - [use babel when needed](https://github.com/loadimpact/k6/blob/ab970ca13042c17d25b99616e7cf524a9366ac63/js/compiler/compiler.go#L133-L143) (i.e. first try to run each script/import without babel, and if that fails, transpile it) and always include `core-js` in each VU. The lazy use of babel is useful both for preserving backwards compatibility and for not wasting time on already ES5.1 compatible imports (usually browserified libraries). Not sure what the actual option name for this should be though, since I can't encapsulate the current complicated logic in a few characters... `sometimes-babel-always-corejs`? :smile: Or maybe we should just call it `default`?\r\n- `es5.1` would be a compatibility mode that doesn't use babel or core-js, it would use only goja. This would be useful to save a lot of memory (https://github.com/loadimpact/k6/issues/1036#issue-450791743), and as a target for webpack/rollup/browserify/whatever-js-tool pipelines that advanced JS users would like to have for their code.\r\n- If my concerns about the unpredictability of the current nondeterministic babel transformation are valid, we can add a mode that always executes babel, though we should probably wait to see if there's actually need for that... ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/533025605/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2646088930,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjY0NjA4ODkzMA==","url":"https://api.github.com/repos/grafana/k6/issues/events/2646088930","actor":{"login":"sniku","id":442646,"node_id":"MDQ6VXNlcjQ0MjY0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/442646?v=4","gravatar_id":"","url":"https://api.github.com/users/sniku","html_url":"https://github.com/sniku","followers_url":"https://api.github.com/users/sniku/followers","following_url":"https://api.github.com/users/sniku/following{/other_user}","gists_url":"https://api.github.com/users/sniku/gists{/gist_id}","starred_url":"https://api.github.com/users/sniku/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sniku/subscriptions","organizations_url":"https://api.github.com/users/sniku/orgs","repos_url":"https://api.github.com/users/sniku/repos","events_url":"https://api.github.com/users/sniku/events{/privacy}","received_events_url":"https://api.github.com/users/sniku/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-09-19T08:27:35Z","performed_via_github_app":null},{"id":2646088933,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI2NDYwODg5MzM=","url":"https://api.github.com/repos/grafana/k6/issues/events/2646088933","actor":{"login":"sniku","id":442646,"node_id":"MDQ6VXNlcjQ0MjY0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/442646?v=4","gravatar_id":"","url":"https://api.github.com/users/sniku","html_url":"https://github.com/sniku","followers_url":"https://api.github.com/users/sniku/followers","following_url":"https://api.github.com/users/sniku/following{/other_user}","gists_url":"https://api.github.com/users/sniku/gists{/gist_id}","starred_url":"https://api.github.com/users/sniku/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sniku/subscriptions","organizations_url":"https://api.github.com/users/sniku/orgs","repos_url":"https://api.github.com/users/sniku/repos","events_url":"https://api.github.com/users/sniku/events{/privacy}","received_events_url":"https://api.github.com/users/sniku/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-09-19T08:27:35Z","performed_via_github_app":null},{"id":2646089763,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50MjY0NjA4OTc2Mw==","url":"https://api.github.com/repos/grafana/k6/issues/events/2646089763","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2019-09-19T08:27:51Z","label":{"name":"evaluation needed","color":"eda27d"},"performed_via_github_app":null},{"id":2646089765,"node_id":"MDEyOkxhYmVsZWRFdmVudDI2NDYwODk3NjU=","url":"https://api.github.com/repos/grafana/k6/issues/events/2646089765","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-09-19T08:27:51Z","label":{"name":"high prio","color":"e99695"},"performed_via_github_app":null},{"id":2646089766,"node_id":"MDEyOkxhYmVsZWRFdmVudDI2NDYwODk3NjY=","url":"https://api.github.com/repos/grafana/k6/issues/events/2646089766","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-09-19T08:27:51Z","label":{"name":"refactor","color":"fbca04"},"performed_via_github_app":null},{"actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T09:00:31Z","updated_at":"2019-09-20T09:00:31Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/1167","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/1167/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/1167/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/1167/events","html_url":"https://github.com/grafana/k6/issues/1167","id":496233447,"node_id":"MDU6SXNzdWU0OTYyMzM0NDc=","number":1167,"title":"Track and improve k6 memory usage and performance","user":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":869293923,"node_id":"MDU6TGFiZWw4NjkyOTM5MjM=","url":"https://api.github.com/repos/grafana/k6/labels/performance","name":"performance","color":"b3ed84","default":false,"description":""},{"id":874927263,"node_id":"MDU6TGFiZWw4NzQ5MjcyNjM=","url":"https://api.github.com/repos/grafana/k6/labels/high%20prio","name":"high prio","color":"D93F0B","default":false,"description":""},{"id":1056840879,"node_id":"MDU6TGFiZWwxMDU2ODQwODc5","url":"https://api.github.com/repos/grafana/k6/labels/ci","name":"ci","color":"8a8ad8","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":19,"created_at":"2019-09-20T09:00:30Z","updated_at":"2023-09-27T14:10:10Z","closed_at":null,"author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"We currently don't have a good idea how changes in k6 affects its performance. In particular, we knew that core-js used a lot of memory (https://github.com/loadimpact/k6/issues/1036#issue-450791743), but we never systematically tracked that, so we lack any baseline to compare against if we ever want to update our currently bundled version. I did some very unscientific measurements with `/usr/bin/time` on my laptop, and I've shared the formatted results below. I used a lot of current and previous k6 versions to run a script with 200 VUs executing a million iterations of a `default` function that just makes a simple `http.get()` operation against a localhost Go server. Here are the results:\r\n\r\n| k6 version | Used Memory | RPS [1] | Times | Inputs and pagefaults |\r\n|------------|-------------|-----|-------|-----------------------|\r\n| 0.16.0   | 271700k | 21739 | 0:47.80elapsed - 91.32user 21.64system (236%CPU) | 0major+70139minor, 0inputs+0outputs\r\n| 0.17.0   | 274496k | 18185 | 0:57.17elapsed - 90.21user 23.45system (198%CPU) | 0major+72619minor, 0inputs+0outputs\r\n| 0.17.1   | 272884k | 17857 | 0:58.07elapsed - 88.25user 24.53system (194%CPU) | 0major+72161minor, 0inputs+0outputs\r\n| 0.17.2   | 914512k [2] | 17241 | 1:04.02elapsed - 104.05user 26.49system (203%CPU) | 0major+314970minor, 0inputs+0outputs\r\n| 0.18.0   | 905072k | 15765 | 1:08.58elapsed - 109.52user 31.23system (205%CPU) | 0major+305646minor, 0inputs+0outputs\r\n| 0.18.2  | 904848k | 15745 | 1:08.75elapsed - 110.31user 31.64system (206%CPU) | 0major+307379minor, 0inputs+0outputs\r\n| 0.19.0   | 987608k | 14812 | 1:12.95elapsed - 118.03user 35.35system (210%CPU) | 0major+339240minor, 0inputs+0outputs\r\n| 0.20.0   | 1011588k | 14419 | 1:15.08elapsed - 122.31user 33.90system (208%CPU) | 103major+339912minor, 40232inputs+0outputs\r\n| 0.21.0   | 1006776k | 14170 | 1:16.20elapsed - 123.62user 33.52system (206%CPU) | 121major+335868minor, 42240inputs+0outputs\r\n| 0.21.1   | 988204k | 14026 | 1:17.11elapsed - 124.65user 33.28system (204%CPU) | 115major+334937minor, 41656inputs+0outputs\r\n| 0.22.0   | 1915272k [3] | 14910 | 1:17.75elapsed - 128.98user 33.49system (208%CPU) | 0major+616641minor, 0inputs+0outputs\r\n| 0.22.1   | 1928812k | 14949 | 1:18.53elapsed - 129.59user 33.54system (207%CPU) | 114major+622426minor, 29792inputs+0outputs\r\n| 0.23.0   | 1940520k | 14427 | 1:20.25elapsed - 131.79user 33.97system (206%CPU) | 115major+627730minor, 29968inputs+0outputs\r\n| 0.23.1   | 1950936k | 15220 | 1:17.29elapsed - 128.74user 33.22system (209%CPU) | 131major+615768minor, 34048inputs+0outputs\r\n| 0.24.0   | 1904352k | 14202 | 1:21.48elapsed - 133.21user 33.30system (204%CPU) | 139major+570873minor, 35696inputs+0outputs\r\n| 0.25.0   | 1096308k [4] | 14050 | 1:16.88elapsed - 131.29user 32.66system (213%CPU) | 145major+341927minor, 37144inputs+0outputs\r\n| 0.25.1   | 1129756k | 14882 | 1:12.81elapsed - 127.30user 31.59system (218%CPU) | 10major+354609minor, 1832inputs+0outputs\r\n| latest master    | 1115896k | 14760 | 1:13.01elapsed - 122.58user 31.42system (210%CPU) | 0major+343543minor, 0inputs+0outputs\r\n| [new executors](https://github.com/loadimpact/k6/pull/1007)    | 1168584k | 14809 | 1:12.07elapsed - 132.81user 34.58system (232%CPU) | 0major+349069minor, 0inputs+0outputs\r\n| [new executors](https://github.com/loadimpact/k6/pull/1007), **no core-js** [5]   | 346344k | 16683 | 1:01.75elapsed - 101.36user 29.45system (211%CPU) | 0major+63926minor, 0inputs+0outputs\r\n| [new executors](https://github.com/loadimpact/k6/pull/1007), **no core-js, no babel** [5]   | 337876k | 17737 | 0:58.24elapsed - 101.83user 29.48system (225%CPU) | 0major+62637minor, 0inputs+0outputs\r\n| [new executors](https://github.com/loadimpact/k6/pull/1007), **core-js updated from 2.5.1 to 3.2.1**  | 1295056k | 15331 | 1:10.01elapsed - 129.55user 35.52system (235%CPU) | 0major+385981minor, 0inputs+0outputs\r\n\r\n[1] Not actually very representative, because these tests were run against a localhost server on my laptop, but still useful as a measure to track the overhead that the rest of k6 introduces. As a comparison, I created [this simple script](https://gist.github.com/na--/1d91aaa512594718fe3b085b8478cc9b) that just hammers a URL, and I got out ~42000 requests per second on my machine out of it.\r\n\r\nI'm currently willing to chalk up most of the difference between this simple script and k6 to the overhead of JS execution, since when I also replaced the JS VUs with a [`lib.MiniRunnerVU`](https://github.com/loadimpact/k6/blob/ab970ca13042c17d25b99616e7cf524a9366ac63/lib/runner.go#L82-L163) so that each iteration didn't have any JS execution and just made a single request to the localhost server, I also got out ~40000 RPS out of k6.\r\n\r\nAnd to repeat, none of that is representative or matters much in the real world, since when I tested a server on the local network, both k6 and the simple Go script achieved the same result of ~7000 RPS, likely because then the test was IO and not CPU bound. Probably the only use for tracking that metric is to monitor if it suddenly drops, since that would likely mean we introduced something that worsened the performance significantly.   \r\n\r\n[2] This memory increase was caused by the [addition of core-js in every VU](https://github.com/loadimpact/k6/compare/v0.17.1...v0.17.2#diff-46cbc2690f760ed10e27cdb22cd67c10R219). \r\n\r\n[3] Again, this was caused by a [core-js](https://github.com/loadimpact/k6/compare/v0.21.1...v0.22.0#diff-cab22ea86de9982b7a7bba06e22f9a53) and [babel](https://github.com/loadimpact/k6/compare/v0.21.1...v0.22.0#diff-0d570e1776bf9f7a389eb88786c0dc5e) update\r\n\r\n[4] The huge drop was caused by https://github.com/loadimpact/k6/pull/1038 :tada: but again, core-js was responsible\r\n\r\n[5] just commented out [these lines](https://github.com/loadimpact/k6/blob/ab970ca13042c17d25b99616e7cf524a9366ac63/js/bundle.go#L238-L240), but useful to know, because we plan to allow the possibility of users choosing not to use core-js: https://github.com/loadimpact/k6/issues/1049#issuecomment-533025605 \r\n\r\n\r\nSo yeah, in summary, we should have some sort of a CI task that monitors the memory consumption and performance of k6, so that we can spot sudden changes in either. Whether that's on every PR or once daily or something else needs more discussion and investigation. And we probably should avoid CircleCI and do this either in Azure Pipelines or GitHub Actions, whichever turns out to be better (https://github.com/loadimpact/k6/issues/959). For the performance part, if we track it through the iterations per second metric, we'd need https://github.com/loadimpact/k6/issues/355, which is currently in progress.\r\n","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/1167/reactions","total_count":15,"+1":6,"-1":0,"laugh":0,"hooray":2,"confused":0,"heart":4,"rocket":3,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/1167/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":2658490621,"node_id":"MDEzOkFzc2lnbmVkRXZlbnQyNjU4NDkwNjIx","url":"https://api.github.com/repos/grafana/k6/issues/events/2658490621","actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2019-09-24T15:19:22Z","assignee":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":2663436418,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI2NjM0MzY0MTg=","url":"https://api.github.com/repos/grafana/k6/issues/events/2663436418","actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"5e437b1bd1db36baaf9b28d0707879b931f8f93e","commit_url":"https://api.github.com/repos/imiric/k6/commits/5e437b1bd1db36baaf9b28d0707879b931f8f93e","created_at":"2019-09-25T23:26:02Z","performed_via_github_app":null},{"id":2663436420,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI2NjM0MzY0MjA=","url":"https://api.github.com/repos/grafana/k6/issues/events/2663436420","actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"dc9396dcd0ddb1a6340dfbbbc7153632858d60fe","commit_url":"https://api.github.com/repos/imiric/k6/commits/dc9396dcd0ddb1a6340dfbbbc7153632858d60fe","created_at":"2019-09-25T23:26:02Z","performed_via_github_app":null},{"id":2663436423,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI2NjM0MzY0MjM=","url":"https://api.github.com/repos/grafana/k6/issues/events/2663436423","actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"aa8ef936c5bae99976ff26cb3896ec3e56e4445d","commit_url":"https://api.github.com/repos/imiric/k6/commits/aa8ef936c5bae99976ff26cb3896ec3e56e4445d","created_at":"2019-09-25T23:26:02Z","performed_via_github_app":null},{"actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-26T14:19:38Z","updated_at":"2019-09-26T14:19:38Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/883","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/883/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/883/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/883/events","html_url":"https://github.com/grafana/k6/issues/883","id":392535138,"node_id":"MDU6SXNzdWUzOTI1MzUxMzg=","number":883,"title":"Configuration issues","user":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":874564661,"node_id":"MDU6TGFiZWw4NzQ1NjQ2NjE=","url":"https://api.github.com/repos/grafana/k6/labels/refactor","name":"refactor","color":"fbca04","default":false,"description":""},{"id":874927263,"node_id":"MDU6TGFiZWw4NzQ5MjcyNjM=","url":"https://api.github.com/repos/grafana/k6/labels/high%20prio","name":"high prio","color":"D93F0B","default":false,"description":""},{"id":1079102926,"node_id":"MDU6TGFiZWwxMDc5MTAyOTI2","url":"https://api.github.com/repos/grafana/k6/labels/evaluation%20needed","name":"evaluation needed","color":"006B75","default":false,"description":"proposal needs to be validated or tested before fully implementing it in k6"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":20,"created_at":"2018-12-19T10:29:19Z","updated_at":"2025-01-31T19:00:40Z","closed_at":null,"author_association":"CONTRIBUTOR","type":{"id":24364121,"node_id":"IT_kwDOAG3Mbc4Bc8RZ","name":"Epic","description":"Large project type issues that give you an overview of the progress of a larger effort ","color":"purple","created_at":"2024-11-19T11:26:17Z","updated_at":"2024-11-19T11:26:17Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"This is meant to be a tracking (\"epic\") issue that gathers all of the deficiencies and pain points in the current k6 configuration. Individual issues, whenever possible, should likely be tackled in their own separate issues and pull requests, unless at some point we decide it'd just be easier to overhaul everything remaining at once...\r\n\r\nI'll start with a description of how the configuration works today AFAIK, and its shortcomings. Since things are quite complicated, I'll likely miss some aspects of it, so we should update the description or add comments in the issue when we notice something else amiss. We also have to decide how we want the configuration to behave in the future, and make the changes so we get from here to there... Maybe not immediately, but the current situation is untenable in the long run.\r\n\r\nI'll start with the current state. Generally, users can configure k6 with a mix of 4 different option sources - CLI flags, environment variables, exported script options and global JSON config. They are hierarchical, so as described [here](https://github.com/loadimpact/k6/#script-options-and-execution-control) , CLI flags can override environment variables, which can override script options, which can override JSON config options, which can override default values .\r\n\r\nThere are various issues and complications with the actual implementation though:\r\n- Adding a new option often necessitates changes in at least 4 different places in the k6 code ([here](https://github.com/loadimpact/k6/blob/d219b19a0353ddc73063ff3c45bc17444f0771c3/lib/options.go#L185-L275), [here](https://github.com/loadimpact/k6/blob/master/lib/options.go#L283-L389), [here](https://github.com/loadimpact/k6/blob/d219b19a0353ddc73063ff3c45bc17444f0771c3/cmd/options.go#L44-L72), [here](https://github.com/loadimpact/k6/blob/d219b19a0353ddc73063ff3c45bc17444f0771c3/cmd/options.go#L75-L98), and where we actually use it...)\r\n- Setting default values for options is very illogical, it mostly happens the CLI flags, like [this](https://github.com/loadimpact/k6/blob/d219b19a0353ddc73063ff3c45bc17444f0771c3/cmd/options.go#L47-L54)... unless it doesn't, like [here](https://github.com/loadimpact/k6/blob/d219b19a0353ddc73063ff3c45bc17444f0771c3/cmd/options.go#L93-L95) or [here](https://github.com/loadimpact/k6/blob/d219b19a0353ddc73063ff3c45bc17444f0771c3/stats/cloud/config.go#L149-L166)...\r\n- Incompatibilities in the libraries we use ([envconfig](https://github.com/kelseyhightower/envconfig) especially, due to [this](https://github.com/loadimpact/k6/issues/671) and [this](https://github.com/kelseyhightower/envconfig/issues/113) issues)\r\n- Null-able type incompatibilities, especially with serialization and deserialization - we use a mix of [this null](https://github.com/guregu/null) library and [our own types](https://github.com/loadimpact/k6/blob/f7ff8007c50c83cd583605fd2035ad27c2a7c055/lib/types/types.go), but occasional incompatibility issues pop up and the whole thing isn't very well tested\r\n- Different value formats in different config sources (for example, stages are configured quite differently with the JS options and the CLI flags)\r\n- Some options have no CLI flag ([example](https://github.com/loadimpact/k6/blob/d219b19a0353ddc73063ff3c45bc17444f0771c3/cmd/options.go#L92-L95) + all collector/output options) or have only CLI and env vars options (i.e. no JS ones, even when it makes sense, like [these](https://github.com/loadimpact/k6/blob/master/cmd/run.go#L446-L447))or can only be enabled with a flag (all outputs), etc.\r\n- Different k6 subcommands have different option sets ([example](https://github.com/loadimpact/k6/blob/d219b19a0353ddc73063ff3c45bc17444f0771c3/cmd/run.go#L446-L447))\r\n- Serialization and deserialization issues in general, especially when we need the result to be human-readable (eg. in the HAR converter we want to emit some consolidated options in a human-readable format, so without all of the null values)\r\n- We can actually use environment variables (tier 2) to configure in-script options (which are on the lower tier 3!) - that's cool and very often useful, but with the current architecture it's also a bit complicated\r\n- Validation of different options is very piecemeal and quite insufficient ([case in point](https://github.com/loadimpact/k6/issues/875))\r\n- Various other individual issues like [this](https://github.com/loadimpact/k6/issues/768)\r\n- etc., etc... (I'm sure that I'm missing a lot of corner cases)\r\n\r\nAlso, a lot of the issues with the current config implementation are only catch-able during runtime. That's party a result of Go's relatively weak type system, but I'm sure it could be improved upon. And on top of the weak compile-time assurances, the behavior (default value setting, overriding, serialization, de-serialization, etc.) of different config entity types is difficult to test individually, since they're part of huge structs that also contain part of the behavior (esp. overriding and default value management). That makes the current implementation quite error prone, and unfortunately, the k6 users are usually the first ones to notice that something doesn't work correctly :unamused: \r\n\r\nBack on the topic of specific configuration issues, by far the biggest problem are the options for collectors (i.e. outputs), and by far the biggest problem from them is actually the Load Impact cloud options... They break the aforementioned nice \"4 config tiers\" picture in so many ways it's actually difficult to know if I can list them all or consider them corner cases...\r\n\r\nFirst, the general output issues are mostly described in this github issue: https://github.com/loadimpact/k6/issues/587. \r\nIn short:\r\n- Outputs can be defined only via the CLI flags (i.e. `k6 run -o cloud`) and can be 0, 1, or more than 1 output, even from the same type\r\n- Some of them can be configured via CLI flags (eg. `k6 run -o json=results.json -o influxdb=http://localhost:8086/test script.js`), while others, like the `cloud` one, cannot...\r\n- All of them can also be configured (but not initialized!) via environment variables or the global JSON config (_though as mentioned in the issue above, not when there are multiple outputs of the same type_)\r\n- All outputs except the cloud one cannot be configured from the exported script options. The [collectors configuration is outside of the `lib.Options` struct](https://github.com/loadimpact/k6/blob/d219b19a0353ddc73063ff3c45bc17444f0771c3/cmd/config.go#L64-L78) we use to store all of the JS-exported options, so it's only applicable for the JSON config, not the exported script options...\r\n\r\nAll of the above issues apply to the cloud options as well, but as mentioned, they're \"special\" for at least two other reasons...\r\n\r\nThe first reason is that we actually reuse the [same configuration](https://github.com/loadimpact/k6/blob/d219b19a0353ddc73063ff3c45bc17444f0771c3/stats/cloud/config.go#L31-L147) for both cloud execution ( `k6 cloud script.js` ) and for outputting stuff to the cloud ingest ( `k6 run -o cloud script.js` ). That makes some sense, since both operations have common options (`token`, `projectID` and `name` at the very least), but at the same time it makes everything super tightly-coupled, complicated and corner-case prone. \r\n\r\nThe second issue is that we actually can configure the cloud collector from the exported script options. Only, we don't do it in some sane uniform way, instead we have that special snowflake `ext.loadimpact`, where we can put stuff that affects both the cloud collector and the cloud ingest output... And since need to bundle the script options in the tar archive's `metadata.json` when we run `k6 cloud`, and that `metadata.json` file [contains only the `lib.Options`](https://github.com/loadimpact/k6/blob/d219b19a0353ddc73063ff3c45bc17444f0771c3/lib/archive.go#L72) instead of the full config map, k6 actually needs to populate stuff in that special ext.loadimpact snowflake as well as read stuff from it. So on top of everything, it's also kind of outside of the hierarchy of all of the other config sources. And on top of that, `ext.loadimpact` also contains stuff that k6 doesn't know about (like distribution) :sweat_smile:\r\n\r\nAdd to the whole mess that the commands `k6 run script.js`, `k6 run archive.tar`, `k6 archive script.js`, `k6 cloud script.js`, and `k6 cloud archive.tar` build their configuration and behave in subtly different ways, and we have a great recipe for endless corner cases and annoying bugs...\r\n\r\nSo yeah, the k6 configuration is huge, multi-faceted pile of... technical debt :slightly_smiling_face: Any ideas and suggestions are quite welcome at this point, or even reports of other configuration issues that weren't mentioned above :smile: ","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/883/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/537101081","html_url":"https://github.com/grafana/k6/issues/1049#issuecomment-537101081","issue_url":"https://api.github.com/repos/grafana/k6/issues/1049","id":537101081,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNzEwMTA4MQ==","user":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-01T15:49:58Z","updated_at":"2019-10-01T15:49:58Z","body":"As discussed last week, I tried to implement the `--compatibility-mode` option without the config refactor, but find it problematic.\r\n\r\nIn summary, the `--compatibility-mode` or `$K6_COMPATIBILITY_MODE` value needs to be passed down to three places:\r\n- `newRunner() -> js.New() -> NewBundle() -> compiler.New() -> new()`: specifically  https://github.com/loadimpact/k6/blob/1d6fb7f668aa089b374ee8ca35de2a34d77d29ce/js/compiler/compiler.go#L76\r\n  in order to disable the loading of babel.min.js.\r\n- `newRunner() -> js.New() -> NewBundle() -> compiler.Compile() -> compile()`: specifically https://github.com/loadimpact/k6/blob/1d6fb7f668aa089b374ee8ca35de2a34d77d29ce/js/compiler/compiler.go#L135\r\n  to avoid calling Babel's `transform()`.\r\n- `newRunner() -> js.New() -> NewBundle() -> ... -> Bundle.Instantiate() -> instantiate()`: specifically https://github.com/loadimpact/k6/blob/1d6fb7f668aa089b374ee8ca35de2a34d77d29ce/js/bundle.go#L238\r\n  to avoid loading core-js.\r\n  \r\nThe main problem is that all configuration `newRunner()` and thus everything below it receives is `lib.RuntimeOptions` (Which IMHO is a confusing name for an `os.Environ()` wrapper. I understand it's using Goja semantics, but it's still part of configuration, so I removed it in my config API refactor.).\r\nSo the JS compiler only has environment variables and the script itself as configuration source, which is a problem if using a `--compatibility-mode` CLI flag. ;) I could hack around this, force the CLI flag into `lib.RuntimeOptions` or pass an additional `compatibilityMode` argument everywhere, modifying all signatures in the process, but I think both approaches are inferior to slightly fixing the config API by ensuring configuration is parsed and aggregated once in `cmd` and passed as `config.Config` to all sub-packages.\r\n\r\n@na-- @MStoykov @cuonglm Let me know if you have a better idea of handling this so that we can avoid or postpone the [config refactor](https://github.com/loadimpact/k6/issues/883#issuecomment-535525307).","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/537101081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2677583298,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjY3NzU4MzI5OA==","url":"https://api.github.com/repos/grafana/k6/issues/events/2677583298","actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-10-01T15:50:04Z","performed_via_github_app":null},{"id":2677583299,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI2Nzc1ODMyOTk=","url":"https://api.github.com/repos/grafana/k6/issues/events/2677583299","actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-10-01T15:50:04Z","performed_via_github_app":null},{"id":2677583303,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjY3NzU4MzMwMw==","url":"https://api.github.com/repos/grafana/k6/issues/events/2677583303","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-10-01T15:50:05Z","performed_via_github_app":null},{"id":2677583308,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI2Nzc1ODMzMDg=","url":"https://api.github.com/repos/grafana/k6/issues/events/2677583308","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-10-01T15:50:05Z","performed_via_github_app":null},{"id":2677583313,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjY3NzU4MzMxMw==","url":"https://api.github.com/repos/grafana/k6/issues/events/2677583313","actor":{"login":"cuonglm","id":4304764,"node_id":"MDQ6VXNlcjQzMDQ3NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/4304764?v=4","gravatar_id":"","url":"https://api.github.com/users/cuonglm","html_url":"https://github.com/cuonglm","followers_url":"https://api.github.com/users/cuonglm/followers","following_url":"https://api.github.com/users/cuonglm/following{/other_user}","gists_url":"https://api.github.com/users/cuonglm/gists{/gist_id}","starred_url":"https://api.github.com/users/cuonglm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cuonglm/subscriptions","organizations_url":"https://api.github.com/users/cuonglm/orgs","repos_url":"https://api.github.com/users/cuonglm/repos","events_url":"https://api.github.com/users/cuonglm/events{/privacy}","received_events_url":"https://api.github.com/users/cuonglm/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-10-01T15:50:05Z","performed_via_github_app":null},{"id":2677583316,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI2Nzc1ODMzMTY=","url":"https://api.github.com/repos/grafana/k6/issues/events/2677583316","actor":{"login":"cuonglm","id":4304764,"node_id":"MDQ6VXNlcjQzMDQ3NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/4304764?v=4","gravatar_id":"","url":"https://api.github.com/users/cuonglm","html_url":"https://github.com/cuonglm","followers_url":"https://api.github.com/users/cuonglm/followers","following_url":"https://api.github.com/users/cuonglm/following{/other_user}","gists_url":"https://api.github.com/users/cuonglm/gists{/gist_id}","starred_url":"https://api.github.com/users/cuonglm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cuonglm/subscriptions","organizations_url":"https://api.github.com/users/cuonglm/orgs","repos_url":"https://api.github.com/users/cuonglm/repos","events_url":"https://api.github.com/users/cuonglm/events{/privacy}","received_events_url":"https://api.github.com/users/cuonglm/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-10-01T15:50:05Z","performed_via_github_app":null},{"id":2721727754,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI3MjE3Mjc3NTQ=","url":"https://api.github.com/repos/grafana/k6/issues/events/2721727754","actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"80be3a72a898db953a54136a0e8a9ee11f27004f","commit_url":"https://api.github.com/repos/grafana/k6/commits/80be3a72a898db953a54136a0e8a9ee11f27004f","created_at":"2019-10-17T15:19:54Z","performed_via_github_app":null},{"id":2721727759,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI3MjE3Mjc3NTk=","url":"https://api.github.com/repos/grafana/k6/issues/events/2721727759","actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"9a34e249828a86bd46586de3a2e8bfb552e26033","commit_url":"https://api.github.com/repos/grafana/k6/commits/9a34e249828a86bd46586de3a2e8bfb552e26033","created_at":"2019-10-17T15:19:54Z","performed_via_github_app":null},{"actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-17T15:41:44Z","updated_at":"2019-10-17T15:41:44Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/1206","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/1206/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/1206/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/1206/events","html_url":"https://github.com/grafana/k6/pull/1206","id":508563667,"node_id":"MDExOlB1bGxSZXF1ZXN0MzI5MzMyODQy","number":1206,"title":"Add JS compatibility mode option","user":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/grafana/k6/milestones/7","html_url":"https://github.com/grafana/k6/milestone/7","labels_url":"https://api.github.com/repos/grafana/k6/milestones/7/labels","id":4536026,"node_id":"MDk6TWlsZXN0b25lNDUzNjAyNg==","number":7,"title":"v0.26.0","description":"","creator":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":109,"state":"closed","created_at":"2019-07-31T08:43:47Z","updated_at":"2022-10-03T09:45:50Z","due_on":null,"closed_at":"2020-04-22T12:31:51Z"},"comments":6,"created_at":"2019-10-17T15:41:44Z","updated_at":"2019-11-13T08:44:21Z","closed_at":"2019-11-13T08:44:17Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/grafana/k6/pulls/1206","html_url":"https://github.com/grafana/k6/pull/1206","diff_url":"https://github.com/grafana/k6/pull/1206.diff","patch_url":"https://github.com/grafana/k6/pull/1206.patch","merged_at":"2019-11-13T08:44:16Z"},"body":"Closes: #1049 \r\n\r\nThis adds a new CLI `run --compatibility-mode` flag and `K6_COMPATIBILITY_MODE` environment variable whose values can be:\r\n\r\n- \"extended\": this is the default and current compatibility mode, which uses Babel and core.js to achieve ES6+ compatibility.\r\n- \"base\": an optional mode that disables loading of Babel and core.js, running scripts with only Goja's native ES5.1+ compatibility. If the test scripts don't require ES6 compatibility (e.g. they were previously transformed by Babel), this option can be used to reduce RAM usage during test runs.\r\n\r\nI used the following test script to test ES 5.1 runs:\r\n\r\n```js\r\nvar http = require(\"k6/http\");\r\nvar metrics = require(\"k6/metrics\");\r\n\r\nvar myTrend = new metrics.Trend(\"my_trend\");\r\n\r\nfunction measure(fn) {\r\n    var start = Date.now();\r\n    var res = fn();\r\n    var end = Date.now();\r\n    console.log(\"Duration: \", end-start);\r\n    myTrend.add(end - start);\r\n    return res;\r\n}\r\n\r\nfunction run() {\r\n    measure(function() {\r\n        http.get(\"https://testuser1:testpwd1@httpbingo.org/basic-auth/testuser1/testpwd1\")\r\n    });\r\n    measure(function() {\r\n        http.get(\"https://testuser2:testpwd2@httpbingo.org/digest-auth/auth/testuser2/testpwd2\", { auth: \"digest\" })\r\n    })\r\n}\r\n\r\nmodule.exports.default = run;\r\n```\r\n\r\nI didn't do any performance comparisons, but those are summed up nicely in #1167.","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/1206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/1206/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":2744214857,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI3NDQyMTQ4NTc=","url":"https://api.github.com/repos/grafana/k6/issues/events/2744214857","actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"c463026c91a8b8e6476f637947dc65b3f7923100","commit_url":"https://api.github.com/repos/grafana/k6/commits/c463026c91a8b8e6476f637947dc65b3f7923100","created_at":"2019-10-25T13:31:50Z","performed_via_github_app":null},{"id":2744214863,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI3NDQyMTQ4NjM=","url":"https://api.github.com/repos/grafana/k6/issues/events/2744214863","actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"1e1112cc3f72dc1cb9c50926ffa0c60027b61266","commit_url":"https://api.github.com/repos/grafana/k6/commits/1e1112cc3f72dc1cb9c50926ffa0c60027b61266","created_at":"2019-10-25T13:31:50Z","performed_via_github_app":null}]