{"url":"https://api.github.com/repos/grafana/k6/issues/74","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/74/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/74/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/74/events","html_url":"https://github.com/grafana/k6/issues/74","id":200328151,"node_id":"MDU6SXNzdWUyMDAzMjgxNTE=","number":74,"title":"Loading files locally","user":{"login":"micsjo","id":9320411,"node_id":"MDQ6VXNlcjkzMjA0MTE=","avatar_url":"https://avatars.githubusercontent.com/u/9320411?v=4","gravatar_id":"","url":"https://api.github.com/users/micsjo","html_url":"https://github.com/micsjo","followers_url":"https://api.github.com/users/micsjo/followers","following_url":"https://api.github.com/users/micsjo/following{/other_user}","gists_url":"https://api.github.com/users/micsjo/gists{/gist_id}","starred_url":"https://api.github.com/users/micsjo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/micsjo/subscriptions","organizations_url":"https://api.github.com/users/micsjo/orgs","repos_url":"https://api.github.com/users/micsjo/repos","events_url":"https://api.github.com/users/micsjo/events{/privacy}","received_events_url":"https://api.github.com/users/micsjo/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2017-01-12T10:18:53Z","updated_at":"2017-02-02T14:22:10Z","closed_at":"2017-02-02T14:22:10Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"There are several use cases for loading a file from inside a k6 script.\r\n\r\n- include (reuse) code library\r\n- use client certificate to authenticate/authorize\r\n- load binary data (i.e. image) for upload\r\n- use file as data source for data driven tests (this one has a special use case as well in terms of data distribution, requirements for uniqueness and so on, it might require a special use case)\r\n\r\nCurrently it is (should be at least) possible to load local files but related to [Remove directory traversal prevention](https://github.com/loadimpact/k6/issues/58) it might be possible to include a structure of files.\r\n\r\nThere needs to be a common configuration for the local execution and the cloud execution models.\r\n\r\nLocally we can ignore if the resources (files) exist, it will simply fail and it is not our problem to solve.\r\n\r\nIn the cloud we _need_ to know and make sure the component files are distributed to the load generators for execution.\r\n\r\nThe suggestion is to implement a requirement that files to be loaded must be specified in the json/yaml external config file or else we will not allow loading them. That way we can be sure the execution context for both cloud and local execution will be the same. Forcing the user to carefully consider what should go in there also drives to healthy test design patterns.\r\n\r\nIf we don't enforce this (regardless of how the solution is implemented) we will have to resort to parsing script and deducing what should be in the load generator package which is error prone.\r\n\r\n\r\n","closed_by":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/74/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/74/timeline","performed_via_github_app":null,"state_reason":"completed"}