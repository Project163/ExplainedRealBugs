{"url":"https://api.github.com/repos/grafana/k6/issues/289","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/289/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/289/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/289/events","html_url":"https://github.com/grafana/k6/issues/289","id":246957332,"node_id":"MDU6SXNzdWUyNDY5NTczMzI=","number":289,"title":"Cookies don't appear to be working reliably","user":{"login":"lambertjosh","id":25085430,"node_id":"MDQ6VXNlcjI1MDg1NDMw","avatar_url":"https://avatars.githubusercontent.com/u/25085430?v=4","gravatar_id":"","url":"https://api.github.com/users/lambertjosh","html_url":"https://github.com/lambertjosh","followers_url":"https://api.github.com/users/lambertjosh/followers","following_url":"https://api.github.com/users/lambertjosh/following{/other_user}","gists_url":"https://api.github.com/users/lambertjosh/gists{/gist_id}","starred_url":"https://api.github.com/users/lambertjosh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lambertjosh/subscriptions","organizations_url":"https://api.github.com/users/lambertjosh/orgs","repos_url":"https://api.github.com/users/lambertjosh/repos","events_url":"https://api.github.com/users/lambertjosh/events{/privacy}","received_events_url":"https://api.github.com/users/lambertjosh/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-08-01T05:16:17Z","updated_at":"2017-08-03T20:34:36Z","closed_at":"2017-08-01T18:12:03Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I am having a hard time getting Cookies to work in both .16 and .17. I believe this is healthy code, so not quite sure why this isn't working. I apologize if I am using an issue for support, but after spending a few hours on this it seems like a bug.\r\n\r\n```\r\n  let res = http.get(baseURL + \"/users/sign_in\");\r\n\r\n  let formdata = {\r\n    \"utf8\": \"âœ“\",\r\n    ...\r\n  };\r\n\r\n  res = http.post(baseURL + \"/users/sign_in\", formdata);\r\n```\r\n\r\nThe response  headers from the first request are:\r\n```\r\nHTTP/1.1 200 OK\r\nServer: nginx\r\nDate: Tue, 01 Aug 2017 04:25:38 GMT\r\nContent-Type: text/html; charset=utf-8\r\nTransfer-Encoding: chunked\r\nConnection: keep-alive\r\nCache-Control: max-age=0, private, must-revalidate\r\nEtag: W/\"d39c7d133c76b51c3f5ddbd33597fbd9\"\r\nSet-Cookie: _server_session=173e4634b9f5ec4f5e0db9e677af7c7a; path=/; HttpOnly\r\nX-Content-Type-Options: nosniff\r\nX-Frame-Options: DENY\r\nX-Request-Id: 1d6a0bfc-58a0-4c47-bde5-8bf7f2def0c2\r\nX-Runtime: 0.019530\r\nX-Ua-Compatible: IE=edge\r\nX-Xss-Protection: 1; mode=block\r\nStrict-Transport-Security: max-age=31536000\r\nContent-Encoding: gzip\r\n```\r\n\r\nThe second request headers are below. Note, no Cookies. \r\n```\r\nPOST /users/sign_in HTTP/1.1\r\nHost: xxx\r\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.78 Safari/537.36\r\nContent-Length: 214\r\nContent-Type: application/x-www-form-urlencoded\r\nAccept-Encoding: gzip\r\n```","closed_by":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/289/timeline","performed_via_github_app":null,"state_reason":"completed"}