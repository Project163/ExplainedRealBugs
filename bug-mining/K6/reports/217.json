{"url":"https://api.github.com/repos/grafana/k6/issues/358","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/358/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/358/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/358/events","html_url":"https://github.com/grafana/k6/issues/358","id":270679030,"node_id":"MDU6SXNzdWUyNzA2NzkwMzA=","number":358,"title":"JSON.parse SyntaxError when running a duration test","user":{"login":"gewfy","id":474066,"node_id":"MDQ6VXNlcjQ3NDA2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/474066?v=4","gravatar_id":"","url":"https://api.github.com/users/gewfy","html_url":"https://github.com/gewfy","followers_url":"https://api.github.com/users/gewfy/followers","following_url":"https://api.github.com/users/gewfy/following{/other_user}","gists_url":"https://api.github.com/users/gewfy/gists{/gist_id}","starred_url":"https://api.github.com/users/gewfy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gewfy/subscriptions","organizations_url":"https://api.github.com/users/gewfy/orgs","repos_url":"https://api.github.com/users/gewfy/repos","events_url":"https://api.github.com/users/gewfy/events{/privacy}","received_events_url":"https://api.github.com/users/gewfy/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2017-11-02T14:43:16Z","updated_at":"2023-01-30T07:28:49Z","closed_at":"2017-11-15T18:14:31Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"This issue is related to #339 and #340\r\nBut I've reproduced this without using `stages` or `rambda`. The error happens if you set any form of duration e.g. `k6 run --duration 5s test.js`\r\n\r\nThis tiny test:\r\n```javascript\r\nimport { check } from 'k6';\r\nimport http from 'k6/http';\r\n\r\nexport default function () {\r\n  const res = http.get('https://api.dev.peachworks.com/v1/products');\r\n\r\n  check(res, {\r\n    'status is 200': res => res.status === 200\r\n  });\r\n\r\n  const products = JSON.parse(res.body).results;\r\n\r\n  check(products, {\r\n    'products is not empty': products => products.length > 0\r\n  });\r\n}\r\n```\r\n\r\nThe above test produces the `SyntaxError` problem but no check errors:\r\n![image](https://user-images.githubusercontent.com/474066/32331862-4b017fe2-bfe4-11e7-96fe-a0c77c27fe83.png)","closed_by":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/358/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/358/timeline","performed_via_github_app":null,"state_reason":"completed"}