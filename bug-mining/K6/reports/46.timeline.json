[{"url":"https://api.github.com/repos/grafana/k6/issues/comments/272527486","html_url":"https://github.com/grafana/k6/issues/66#issuecomment-272527486","issue_url":"https://api.github.com/repos/grafana/k6/issues/66","id":272527486,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjUyNzQ4Ng==","user":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-13T19:35:59Z","updated_at":"2017-01-13T19:35:59Z","body":"I feel like throwing an exception is better because it means any dependent work isn't run unless you catch the error explicitly. Imagine if you were writing a test for a web shop; if you can't load the shopping cart, you can't grab a CSRF to submit it, and the failure cascades.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/272527486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/272805962","html_url":"https://github.com/grafana/k6/issues/66#issuecomment-272805962","issue_url":"https://api.github.com/repos/grafana/k6/issues/66","id":272805962,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjgwNTk2Mg==","user":{"login":"ragnarlonn","id":6524809,"node_id":"MDQ6VXNlcjY1MjQ4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/6524809?v=4","gravatar_id":"","url":"https://api.github.com/users/ragnarlonn","html_url":"https://github.com/ragnarlonn","followers_url":"https://api.github.com/users/ragnarlonn/followers","following_url":"https://api.github.com/users/ragnarlonn/following{/other_user}","gists_url":"https://api.github.com/users/ragnarlonn/gists{/gist_id}","starred_url":"https://api.github.com/users/ragnarlonn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ragnarlonn/subscriptions","organizations_url":"https://api.github.com/users/ragnarlonn/orgs","repos_url":"https://api.github.com/users/ragnarlonn/repos","events_url":"https://api.github.com/users/ragnarlonn/events{/privacy}","received_events_url":"https://api.github.com/users/ragnarlonn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-16T09:00:00Z","updated_at":"2017-01-16T09:02:35Z","body":"To me, that sounds like a 500-response should also result in an exception?  I think one operation should only have one way of generating errors. It will be messy to have to check for two completely different types of errors in your code. You would both have to check that the response code is OK and you get something useful back from your HTTP request, and also have code to catch any exceptions generated as a result of a failure to create a TCP connection e.g.\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/272805962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ragnarlonn","id":6524809,"node_id":"MDQ6VXNlcjY1MjQ4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/6524809?v=4","gravatar_id":"","url":"https://api.github.com/users/ragnarlonn","html_url":"https://github.com/ragnarlonn","followers_url":"https://api.github.com/users/ragnarlonn/followers","following_url":"https://api.github.com/users/ragnarlonn/following{/other_user}","gists_url":"https://api.github.com/users/ragnarlonn/gists{/gist_id}","starred_url":"https://api.github.com/users/ragnarlonn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ragnarlonn/subscriptions","organizations_url":"https://api.github.com/users/ragnarlonn/orgs","repos_url":"https://api.github.com/users/ragnarlonn/repos","events_url":"https://api.github.com/users/ragnarlonn/events{/privacy}","received_events_url":"https://api.github.com/users/ragnarlonn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/272838206","html_url":"https://github.com/grafana/k6/issues/66#issuecomment-272838206","issue_url":"https://api.github.com/repos/grafana/k6/issues/66","id":272838206,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjgzODIwNg==","user":{"login":"micsjo","id":9320411,"node_id":"MDQ6VXNlcjkzMjA0MTE=","avatar_url":"https://avatars.githubusercontent.com/u/9320411?v=4","gravatar_id":"","url":"https://api.github.com/users/micsjo","html_url":"https://github.com/micsjo","followers_url":"https://api.github.com/users/micsjo/followers","following_url":"https://api.github.com/users/micsjo/following{/other_user}","gists_url":"https://api.github.com/users/micsjo/gists{/gist_id}","starred_url":"https://api.github.com/users/micsjo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/micsjo/subscriptions","organizations_url":"https://api.github.com/users/micsjo/orgs","repos_url":"https://api.github.com/users/micsjo/repos","events_url":"https://api.github.com/users/micsjo/events{/privacy}","received_events_url":"https://api.github.com/users/micsjo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-16T11:33:43Z","updated_at":"2017-01-16T11:33:43Z","body":"To me any response whatsoever from requests should not throw an exception at all. From an execution point of view they are all valid responses. What we do with them is another thing.\r\n\r\nThe question is if we can generate response codes (like cUrl does) for events lower in the stack (such as timeout, cannot connect, ssl negotiation failure and so on) so they in turn do not generate exceptions?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/272838206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"micsjo","id":9320411,"node_id":"MDQ6VXNlcjkzMjA0MTE=","avatar_url":"https://avatars.githubusercontent.com/u/9320411?v=4","gravatar_id":"","url":"https://api.github.com/users/micsjo","html_url":"https://github.com/micsjo","followers_url":"https://api.github.com/users/micsjo/followers","following_url":"https://api.github.com/users/micsjo/following{/other_user}","gists_url":"https://api.github.com/users/micsjo/gists{/gist_id}","starred_url":"https://api.github.com/users/micsjo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/micsjo/subscriptions","organizations_url":"https://api.github.com/users/micsjo/orgs","repos_url":"https://api.github.com/users/micsjo/repos","events_url":"https://api.github.com/users/micsjo/events{/privacy}","received_events_url":"https://api.github.com/users/micsjo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/272844869","html_url":"https://github.com/grafana/k6/issues/66#issuecomment-272844869","issue_url":"https://api.github.com/repos/grafana/k6/issues/66","id":272844869,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Mjg0NDg2OQ==","user":{"login":"ragnarlonn","id":6524809,"node_id":"MDQ6VXNlcjY1MjQ4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/6524809?v=4","gravatar_id":"","url":"https://api.github.com/users/ragnarlonn","html_url":"https://github.com/ragnarlonn","followers_url":"https://api.github.com/users/ragnarlonn/followers","following_url":"https://api.github.com/users/ragnarlonn/following{/other_user}","gists_url":"https://api.github.com/users/ragnarlonn/gists{/gist_id}","starred_url":"https://api.github.com/users/ragnarlonn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ragnarlonn/subscriptions","organizations_url":"https://api.github.com/users/ragnarlonn/orgs","repos_url":"https://api.github.com/users/ragnarlonn/repos","events_url":"https://api.github.com/users/ragnarlonn/events{/privacy}","received_events_url":"https://api.github.com/users/ragnarlonn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-16T12:01:03Z","updated_at":"2017-01-16T12:01:03Z","body":"@micsjo Read the thread again :)  The initial question was what you wrote above: @robingustafsson asked if we can do what libcurl and rload does and generate unique response codes for lower-level errors. @uppfinnarn thought exceptions were better for lower-level errors. I countered that it will be painful to have to deal with two different types of errors (i.e. non-200 response codes, and exceptions) when you issue HTTP requests. You have to both wrap your http.get() call in a try/catch statement, in order to handle e.g. connection timeouts, and also check HTTP response codes to figure out if your HTTP transaction did what it was supposed to do. @uppfinnarn is right that it is two separate types of errors (on different levels) but as long as we don't let the user do TCP connection handling themselves I think we should go with error codes rather than exceptions.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/272844869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ragnarlonn","id":6524809,"node_id":"MDQ6VXNlcjY1MjQ4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/6524809?v=4","gravatar_id":"","url":"https://api.github.com/users/ragnarlonn","html_url":"https://github.com/ragnarlonn","followers_url":"https://api.github.com/users/ragnarlonn/followers","following_url":"https://api.github.com/users/ragnarlonn/following{/other_user}","gists_url":"https://api.github.com/users/ragnarlonn/gists{/gist_id}","starred_url":"https://api.github.com/users/ragnarlonn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ragnarlonn/subscriptions","organizations_url":"https://api.github.com/users/ragnarlonn/orgs","repos_url":"https://api.github.com/users/ragnarlonn/repos","events_url":"https://api.github.com/users/ragnarlonn/events{/privacy}","received_events_url":"https://api.github.com/users/ragnarlonn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":924212945,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTI0MjEyOTQ1","url":"https://api.github.com/repos/grafana/k6/issues/events/924212945","actor":{"login":"micsjo","id":9320411,"node_id":"MDQ6VXNlcjkzMjA0MTE=","avatar_url":"https://avatars.githubusercontent.com/u/9320411?v=4","gravatar_id":"","url":"https://api.github.com/users/micsjo","html_url":"https://github.com/micsjo","followers_url":"https://api.github.com/users/micsjo/followers","following_url":"https://api.github.com/users/micsjo/following{/other_user}","gists_url":"https://api.github.com/users/micsjo/gists{/gist_id}","starred_url":"https://api.github.com/users/micsjo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/micsjo/subscriptions","organizations_url":"https://api.github.com/users/micsjo/orgs","repos_url":"https://api.github.com/users/micsjo/repos","events_url":"https://api.github.com/users/micsjo/events{/privacy}","received_events_url":"https://api.github.com/users/micsjo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-01-16T12:01:03Z","performed_via_github_app":null},{"id":924212946,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkyNDIxMjk0Ng==","url":"https://api.github.com/repos/grafana/k6/issues/events/924212946","actor":{"login":"micsjo","id":9320411,"node_id":"MDQ6VXNlcjkzMjA0MTE=","avatar_url":"https://avatars.githubusercontent.com/u/9320411?v=4","gravatar_id":"","url":"https://api.github.com/users/micsjo","html_url":"https://github.com/micsjo","followers_url":"https://api.github.com/users/micsjo/followers","following_url":"https://api.github.com/users/micsjo/following{/other_user}","gists_url":"https://api.github.com/users/micsjo/gists{/gist_id}","starred_url":"https://api.github.com/users/micsjo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/micsjo/subscriptions","organizations_url":"https://api.github.com/users/micsjo/orgs","repos_url":"https://api.github.com/users/micsjo/repos","events_url":"https://api.github.com/users/micsjo/events{/privacy}","received_events_url":"https://api.github.com/users/micsjo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-01-16T12:01:03Z","performed_via_github_app":null},{"id":924212947,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTI0MjEyOTQ3","url":"https://api.github.com/repos/grafana/k6/issues/events/924212947","actor":{"login":"robingustafsson","id":1792533,"node_id":"MDQ6VXNlcjE3OTI1MzM=","avatar_url":"https://avatars.githubusercontent.com/u/1792533?v=4","gravatar_id":"","url":"https://api.github.com/users/robingustafsson","html_url":"https://github.com/robingustafsson","followers_url":"https://api.github.com/users/robingustafsson/followers","following_url":"https://api.github.com/users/robingustafsson/following{/other_user}","gists_url":"https://api.github.com/users/robingustafsson/gists{/gist_id}","starred_url":"https://api.github.com/users/robingustafsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robingustafsson/subscriptions","organizations_url":"https://api.github.com/users/robingustafsson/orgs","repos_url":"https://api.github.com/users/robingustafsson/repos","events_url":"https://api.github.com/users/robingustafsson/events{/privacy}","received_events_url":"https://api.github.com/users/robingustafsson/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-01-16T12:01:03Z","performed_via_github_app":null},{"id":924212948,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkyNDIxMjk0OA==","url":"https://api.github.com/repos/grafana/k6/issues/events/924212948","actor":{"login":"robingustafsson","id":1792533,"node_id":"MDQ6VXNlcjE3OTI1MzM=","avatar_url":"https://avatars.githubusercontent.com/u/1792533?v=4","gravatar_id":"","url":"https://api.github.com/users/robingustafsson","html_url":"https://github.com/robingustafsson","followers_url":"https://api.github.com/users/robingustafsson/followers","following_url":"https://api.github.com/users/robingustafsson/following{/other_user}","gists_url":"https://api.github.com/users/robingustafsson/gists{/gist_id}","starred_url":"https://api.github.com/users/robingustafsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robingustafsson/subscriptions","organizations_url":"https://api.github.com/users/robingustafsson/orgs","repos_url":"https://api.github.com/users/robingustafsson/repos","events_url":"https://api.github.com/users/robingustafsson/events{/privacy}","received_events_url":"https://api.github.com/users/robingustafsson/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-01-16T12:01:03Z","performed_via_github_app":null},{"id":924212949,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTI0MjEyOTQ5","url":"https://api.github.com/repos/grafana/k6/issues/events/924212949","actor":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-01-16T12:01:03Z","performed_via_github_app":null},{"id":924212950,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkyNDIxMjk1MA==","url":"https://api.github.com/repos/grafana/k6/issues/events/924212950","actor":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-01-16T12:01:03Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/272938994","html_url":"https://github.com/grafana/k6/issues/66#issuecomment-272938994","issue_url":"https://api.github.com/repos/grafana/k6/issues/66","id":272938994,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjkzODk5NA==","user":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-16T18:58:47Z","updated_at":"2017-01-16T18:58:47Z","body":"I don't really like that approach. What are you going to do with that error code?\r\n\r\nBy making hard failures to perform an action (eg. connection failures) errors, VU code can assume all actions succeed. If it asks for an HTTP response, it will have an HTTP response. If not, an error is thrown and logged, and the VU is restarted.\r\n\r\nIt completely frees the user from the burden of error handling and lets them focus on describing their target system's desired behavior, not ours. If they want to handle errors themselves (eg. for cleanup or whatever), they can use try/catch, but this way it's not a default expectation for the user to do that.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/272938994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/272956023","html_url":"https://github.com/grafana/k6/issues/66#issuecomment-272956023","issue_url":"https://api.github.com/repos/grafana/k6/issues/66","id":272956023,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Mjk1NjAyMw==","user":{"login":"ragnarlonn","id":6524809,"node_id":"MDQ6VXNlcjY1MjQ4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/6524809?v=4","gravatar_id":"","url":"https://api.github.com/users/ragnarlonn","html_url":"https://github.com/ragnarlonn","followers_url":"https://api.github.com/users/ragnarlonn/followers","following_url":"https://api.github.com/users/ragnarlonn/following{/other_user}","gists_url":"https://api.github.com/users/ragnarlonn/gists{/gist_id}","starred_url":"https://api.github.com/users/ragnarlonn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ragnarlonn/subscriptions","organizations_url":"https://api.github.com/users/ragnarlonn/orgs","repos_url":"https://api.github.com/users/ragnarlonn/repos","events_url":"https://api.github.com/users/ragnarlonn/events{/privacy}","received_events_url":"https://api.github.com/users/ragnarlonn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-16T20:33:00Z","updated_at":"2017-01-16T20:33:00Z","body":"I'm not sure about this one. Trying to explain how I am thinking here. Sorry for writing a novel. Would be interesting to hear what @micsjo thinks about all this.\r\n\r\nI think this may in one sense be a disconnect between us who are thinking mainly about load testing and @uppfinnarn thinking mainly about functional testing. In a load test I often expect failed TCP connections, and it is convenient for me not to have to add a lot of try/catch statements to handle that. I don't see failed connections as hard errors as much as data points to be plotted in a graph.\r\n\r\nFor functional testing I agree that a failed connection is more of a \"hard error\" that should perhaps stop code execution. But if you have e.g. a complex user scenario that spans many minutes and hundreds, or thousands of HTTP requests, is halted execution really what you want when/if a TCP connection fails?\r\n\r\nMaybe it's no big deal? If we assume TCP connections fail randomly throughout script execution, it may not matter [for a load test] if script execution is occasionally stopped and restarted in the midst of things. People will still see all their script code exercised, although code at the end of a script will be less executed than code in the beginning of course, which may or may not be an issue. Anyway, we want to optimize for the common use case. Let's say the common use case is people who don't bother with try/catch clauses but just issue an HTTP request and check the status code. How likely are they to get weird test executions (and results) because of failed connections that are not handled properly?\r\n\r\nPerhaps a bigger issue is code complexity. How will our script examples look, for instance?  If the \"right\" way to do things involves substantially more lines of code, with try/catch clauses, should we promote that in our examples, at the expense of less readability and more clutter, or should we promote the \"simple\" way of doing things (without try/catch), at the expense of setting people up for potential trouble?   (perhaps the risk of trouble is slim enough?)\r\n\r\n\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/272956023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ragnarlonn","id":6524809,"node_id":"MDQ6VXNlcjY1MjQ4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/6524809?v=4","gravatar_id":"","url":"https://api.github.com/users/ragnarlonn","html_url":"https://github.com/ragnarlonn","followers_url":"https://api.github.com/users/ragnarlonn/followers","following_url":"https://api.github.com/users/ragnarlonn/following{/other_user}","gists_url":"https://api.github.com/users/ragnarlonn/gists{/gist_id}","starred_url":"https://api.github.com/users/ragnarlonn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ragnarlonn/subscriptions","organizations_url":"https://api.github.com/users/ragnarlonn/orgs","repos_url":"https://api.github.com/users/ragnarlonn/repos","events_url":"https://api.github.com/users/ragnarlonn/events{/privacy}","received_events_url":"https://api.github.com/users/ragnarlonn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":924843764,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTI0ODQzNzY0","url":"https://api.github.com/repos/grafana/k6/issues/events/924843764","actor":{"login":"micsjo","id":9320411,"node_id":"MDQ6VXNlcjkzMjA0MTE=","avatar_url":"https://avatars.githubusercontent.com/u/9320411?v=4","gravatar_id":"","url":"https://api.github.com/users/micsjo","html_url":"https://github.com/micsjo","followers_url":"https://api.github.com/users/micsjo/followers","following_url":"https://api.github.com/users/micsjo/following{/other_user}","gists_url":"https://api.github.com/users/micsjo/gists{/gist_id}","starred_url":"https://api.github.com/users/micsjo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/micsjo/subscriptions","organizations_url":"https://api.github.com/users/micsjo/orgs","repos_url":"https://api.github.com/users/micsjo/repos","events_url":"https://api.github.com/users/micsjo/events{/privacy}","received_events_url":"https://api.github.com/users/micsjo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-01-16T20:33:00Z","performed_via_github_app":null},{"id":924843765,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkyNDg0Mzc2NQ==","url":"https://api.github.com/repos/grafana/k6/issues/events/924843765","actor":{"login":"micsjo","id":9320411,"node_id":"MDQ6VXNlcjkzMjA0MTE=","avatar_url":"https://avatars.githubusercontent.com/u/9320411?v=4","gravatar_id":"","url":"https://api.github.com/users/micsjo","html_url":"https://github.com/micsjo","followers_url":"https://api.github.com/users/micsjo/followers","following_url":"https://api.github.com/users/micsjo/following{/other_user}","gists_url":"https://api.github.com/users/micsjo/gists{/gist_id}","starred_url":"https://api.github.com/users/micsjo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/micsjo/subscriptions","organizations_url":"https://api.github.com/users/micsjo/orgs","repos_url":"https://api.github.com/users/micsjo/repos","events_url":"https://api.github.com/users/micsjo/events{/privacy}","received_events_url":"https://api.github.com/users/micsjo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-01-16T20:33:00Z","performed_via_github_app":null},{"id":924843766,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTI0ODQzNzY2","url":"https://api.github.com/repos/grafana/k6/issues/events/924843766","actor":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-01-16T20:33:00Z","performed_via_github_app":null},{"id":924843767,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkyNDg0Mzc2Nw==","url":"https://api.github.com/repos/grafana/k6/issues/events/924843767","actor":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-01-16T20:33:00Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/275106323","html_url":"https://github.com/grafana/k6/issues/66#issuecomment-275106323","issue_url":"https://api.github.com/repos/grafana/k6/issues/66","id":275106323,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTEwNjMyMw==","user":{"login":"martinfijal","id":221871,"node_id":"MDQ6VXNlcjIyMTg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/221871?v=4","gravatar_id":"","url":"https://api.github.com/users/martinfijal","html_url":"https://github.com/martinfijal","followers_url":"https://api.github.com/users/martinfijal/followers","following_url":"https://api.github.com/users/martinfijal/following{/other_user}","gists_url":"https://api.github.com/users/martinfijal/gists{/gist_id}","starred_url":"https://api.github.com/users/martinfijal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martinfijal/subscriptions","organizations_url":"https://api.github.com/users/martinfijal/orgs","repos_url":"https://api.github.com/users/martinfijal/repos","events_url":"https://api.github.com/users/martinfijal/events{/privacy}","received_events_url":"https://api.github.com/users/martinfijal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-25T13:22:47Z","updated_at":"2017-01-25T13:22:47Z","body":"Agree with Ragnar that this is very much about a load testing vs functional testing point of view. No matter which type of test we primarily optimize against, my view is that our defaults should help to avoid situations that can cause damage due to knowledge gaps.\r\n\r\nRunning the following script in a large test on my own failing servers will results in a DOS attack on the first URL in the script with our current implementation. That is **not** what I except when I run this.\r\n\r\n```javascript\r\nexport default function() {\r\n\tgroup(\"group\", function() {\r\n                http.get(\"http://latest.cool.3rd.party.widget/\");\r\n\t\thttp.get(\"http://my-own-broken-server/\");\r\n\r\n                 sleep(1);\r\n\t});\r\n```\r\nNote: removing the sleep will have the same effect and is another behavior of our current load generator I don't like. 99.9% of people omitting the sleep aren't after testing how many requests the load generator can squeeze out, but rather just not understanding how tests are run.\r\n\r\n----\r\n\r\nOn the topic of how to present the errors: instead of introducing magical HTTP status codes, what about setting an error object on the response? I can then do something like `resp.has_error()` and then take whatever action I'd like. We could also provide an API (be part of checks?!) that will abort a test if any error is set on the response for a more functional testing style.\r\n\r\nDisclaimer: I still know very little about our current API design.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/275106323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"martinfijal","id":221871,"node_id":"MDQ6VXNlcjIyMTg3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/221871?v=4","gravatar_id":"","url":"https://api.github.com/users/martinfijal","html_url":"https://github.com/martinfijal","followers_url":"https://api.github.com/users/martinfijal/followers","following_url":"https://api.github.com/users/martinfijal/following{/other_user}","gists_url":"https://api.github.com/users/martinfijal/gists{/gist_id}","starred_url":"https://api.github.com/users/martinfijal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martinfijal/subscriptions","organizations_url":"https://api.github.com/users/martinfijal/orgs","repos_url":"https://api.github.com/users/martinfijal/repos","events_url":"https://api.github.com/users/martinfijal/events{/privacy}","received_events_url":"https://api.github.com/users/martinfijal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/276193563","html_url":"https://github.com/grafana/k6/issues/66#issuecomment-276193563","issue_url":"https://api.github.com/repos/grafana/k6/issues/66","id":276193563,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjE5MzU2Mw==","user":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-30T21:18:16Z","updated_at":"2017-01-30T21:18:16Z","body":"Okay, so, I think this test pretty well illustrates this entire problem:\r\n\r\n```js\r\nimport { group } from \"k6\";\r\nimport http from \"k6/http\";\r\n\r\nexport default function() {\r\n    check(http.get(\"\"), {\r\n        \"status is 200\": (res) => res.status == 200,\r\n    });\r\n\r\n    group(\"login\", function() {\r\n        let res = http.post(\"http://example.com/login\", ...);\r\n        check(res, {\r\n            \"status is 200\": (res) => res.status == 200,\r\n            \"contains a token\": (res) => res.json().token,\r\n        });\r\n\r\n        let token = res.json().token;\r\n\r\n        group(\"logout\", function() {\r\n            check(http.post(\"http://example.com/logout\", { \"token\": token }), {\r\n                \"status is 200\": (res) => res.status == 200,\r\n            });\r\n        })\r\n    })\r\n\r\n    group(\"articles\", function() {\r\n        // other, unrelated stuff\r\n    })\r\n}\r\n```\r\n\r\nRight now, if there's no need for error handling boilerplate to check if eg. the login endpoint has a connection error before running the dependent logout group, because it will throw an exception and terminate the script.\r\n\r\nBut this also means that the completely unrelated \"articles\" group is never run, or anything else further down. In effect, the further towards the top something is, the more statistically likely it is to actually be run, thus load is put disproportionately onto earlier endpoints.\r\n\r\nOne way we could handle this without introducing more boilerplate for the user would be to make each `group()` call. This way, if there's a connection failure in the \"login\" group, the dependent (nested) \"logout\" group won't be run, but the unrelated \"articles\" group will. Groups would, like checks, be reported with an error rate on the end-of-test summary.\r\n\r\nTo handle errors manually, you could pass in a function as the second argument, eg.\r\n\r\n```js\r\ngroup(\"my group\", function() {\r\n    throw new Error(\"test error\");\r\n}, (e) => throw e);\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/276193563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/276300006","html_url":"https://github.com/grafana/k6/issues/66#issuecomment-276300006","issue_url":"https://api.github.com/repos/grafana/k6/issues/66","id":276300006,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjMwMDAwNg==","user":{"login":"micsjo","id":9320411,"node_id":"MDQ6VXNlcjkzMjA0MTE=","avatar_url":"https://avatars.githubusercontent.com/u/9320411?v=4","gravatar_id":"","url":"https://api.github.com/users/micsjo","html_url":"https://github.com/micsjo","followers_url":"https://api.github.com/users/micsjo/followers","following_url":"https://api.github.com/users/micsjo/following{/other_user}","gists_url":"https://api.github.com/users/micsjo/gists{/gist_id}","starred_url":"https://api.github.com/users/micsjo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/micsjo/subscriptions","organizations_url":"https://api.github.com/users/micsjo/orgs","repos_url":"https://api.github.com/users/micsjo/repos","events_url":"https://api.github.com/users/micsjo/events{/privacy}","received_events_url":"https://api.github.com/users/micsjo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-31T08:10:15Z","updated_at":"2017-01-31T08:10:15Z","body":"Allowing tests to continue when failing does not make sense for any functional tests unless you actively choose/code to do so. I have a hard time to see how the suggested solution actually solves our problem.\r\n\r\n**PROPOSAL:**\r\n\r\nAll normal http responses (regardless of 100-200-300-400-500 and so on) are always considered a successful request. As it should be - the request completed but the response might not be what you wanted.\r\n\r\nOther home-brew response codes (a la curl) for timeout, ssl negotiation failed, connection dropped, not possible to make connection etc will return a special http response code.\r\n\r\nTo control execution behavior the _default_ is to fail the request. Just as you would expect in a functional test. It would return the error property and also the special http response code.\r\n\r\nWhen the \"performance test context\" flag is set either command line or as an option in script the behavior is to _not_ fail the request.\r\n\r\nIt is fully understood it will add more code to the handling of requests but the opposite (to just let it always fail for all incomplete http requests) will lead to large amounts of code needed for all performance test execution to handle all possible errors that should not be considered errors in that context.\r\n\r\nThe only other option I see is to _never_ fail http requests for any transport related issues whatsoever and let the tester add code to validate/verify as needed.\r\n\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/276300006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"micsjo","id":9320411,"node_id":"MDQ6VXNlcjkzMjA0MTE=","avatar_url":"https://avatars.githubusercontent.com/u/9320411?v=4","gravatar_id":"","url":"https://api.github.com/users/micsjo","html_url":"https://github.com/micsjo","followers_url":"https://api.github.com/users/micsjo/followers","following_url":"https://api.github.com/users/micsjo/following{/other_user}","gists_url":"https://api.github.com/users/micsjo/gists{/gist_id}","starred_url":"https://api.github.com/users/micsjo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/micsjo/subscriptions","organizations_url":"https://api.github.com/users/micsjo/orgs","repos_url":"https://api.github.com/users/micsjo/repos","events_url":"https://api.github.com/users/micsjo/events{/privacy}","received_events_url":"https://api.github.com/users/micsjo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/276356408","html_url":"https://github.com/grafana/k6/issues/66#issuecomment-276356408","issue_url":"https://api.github.com/repos/grafana/k6/issues/66","id":276356408,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjM1NjQwOA==","user":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-31T12:57:38Z","updated_at":"2017-01-31T12:57:38Z","body":"I'm ideologically opposed to flags or configuration changing script behavior. A function called with the same parameters in two different places should do the same thing, always, otherwise you sacrifice your ability to reason about the code. It may start innocuously enough, little convenient heuristics or environmental stuff, but then someone will say \"you already made this function do two different things, why not add a flag that changes this function too?\", and then it snowballs from there.\r\n\r\nIn the end, you end up where PHP is now: an unholy mess of unpredictable global state mutations and all-powerful configuration files, where the same script run on two different machines produce completely different, likely incorrect, results.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/276356408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/276360927","html_url":"https://github.com/grafana/k6/issues/66#issuecomment-276360927","issue_url":"https://api.github.com/repos/grafana/k6/issues/66","id":276360927,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjM2MDkyNw==","user":{"login":"micsjo","id":9320411,"node_id":"MDQ6VXNlcjkzMjA0MTE=","avatar_url":"https://avatars.githubusercontent.com/u/9320411?v=4","gravatar_id":"","url":"https://api.github.com/users/micsjo","html_url":"https://github.com/micsjo","followers_url":"https://api.github.com/users/micsjo/followers","following_url":"https://api.github.com/users/micsjo/following{/other_user}","gists_url":"https://api.github.com/users/micsjo/gists{/gist_id}","starred_url":"https://api.github.com/users/micsjo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/micsjo/subscriptions","organizations_url":"https://api.github.com/users/micsjo/orgs","repos_url":"https://api.github.com/users/micsjo/repos","events_url":"https://api.github.com/users/micsjo/events{/privacy}","received_events_url":"https://api.github.com/users/micsjo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-31T13:20:41Z","updated_at":"2017-01-31T13:20:41Z","body":"That leaves us with another option: one http request for functional tests and one for performance tests.\r\n\r\nHaving all requests that don't complete as expected _fail_ is useless in a performance testing context.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/276360927/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"micsjo","id":9320411,"node_id":"MDQ6VXNlcjkzMjA0MTE=","avatar_url":"https://avatars.githubusercontent.com/u/9320411?v=4","gravatar_id":"","url":"https://api.github.com/users/micsjo","html_url":"https://github.com/micsjo","followers_url":"https://api.github.com/users/micsjo/followers","following_url":"https://api.github.com/users/micsjo/following{/other_user}","gists_url":"https://api.github.com/users/micsjo/gists{/gist_id}","starred_url":"https://api.github.com/users/micsjo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/micsjo/subscriptions","organizations_url":"https://api.github.com/users/micsjo/orgs","repos_url":"https://api.github.com/users/micsjo/repos","events_url":"https://api.github.com/users/micsjo/events{/privacy}","received_events_url":"https://api.github.com/users/micsjo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/276370749","html_url":"https://github.com/grafana/k6/issues/66#issuecomment-276370749","issue_url":"https://api.github.com/repos/grafana/k6/issues/66","id":276370749,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjM3MDc0OQ==","user":{"login":"ragnarlonn","id":6524809,"node_id":"MDQ6VXNlcjY1MjQ4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/6524809?v=4","gravatar_id":"","url":"https://api.github.com/users/ragnarlonn","html_url":"https://github.com/ragnarlonn","followers_url":"https://api.github.com/users/ragnarlonn/followers","following_url":"https://api.github.com/users/ragnarlonn/following{/other_user}","gists_url":"https://api.github.com/users/ragnarlonn/gists{/gist_id}","starred_url":"https://api.github.com/users/ragnarlonn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ragnarlonn/subscriptions","organizations_url":"https://api.github.com/users/ragnarlonn/orgs","repos_url":"https://api.github.com/users/ragnarlonn/repos","events_url":"https://api.github.com/users/ragnarlonn/events{/privacy}","received_events_url":"https://api.github.com/users/ragnarlonn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-31T14:04:02Z","updated_at":"2017-01-31T14:08:56Z","body":"I agree that changing script behaviour depending on config doesn't feel right. I also don't like the idea of forcing people to write one type of code for functional and one type for load testing. That will efficiently kill any chance of being able to re-use code between the two types of tests - something that is a very strong selling point if we can pull it off for even a portion of the market.\r\n\r\nI think Martin's ideas are worth considering more. Can we return an HTTP response code under \"normal\" circumstances, and then if the TCP connection fails we return HTTP response code 'nil' (or whatever) and set an error object that the user can query, if they are interested in knowing exactly what happened?   ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/276370749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ragnarlonn","id":6524809,"node_id":"MDQ6VXNlcjY1MjQ4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/6524809?v=4","gravatar_id":"","url":"https://api.github.com/users/ragnarlonn","html_url":"https://github.com/ragnarlonn","followers_url":"https://api.github.com/users/ragnarlonn/followers","following_url":"https://api.github.com/users/ragnarlonn/following{/other_user}","gists_url":"https://api.github.com/users/ragnarlonn/gists{/gist_id}","starred_url":"https://api.github.com/users/ragnarlonn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ragnarlonn/subscriptions","organizations_url":"https://api.github.com/users/ragnarlonn/orgs","repos_url":"https://api.github.com/users/ragnarlonn/repos","events_url":"https://api.github.com/users/ragnarlonn/events{/privacy}","received_events_url":"https://api.github.com/users/ragnarlonn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/276372593","html_url":"https://github.com/grafana/k6/issues/66#issuecomment-276372593","issue_url":"https://api.github.com/repos/grafana/k6/issues/66","id":276372593,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjM3MjU5Mw==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-31T14:11:33Z","updated_at":"2017-01-31T14:20:40Z","body":"Hi @uppfinnarn \r\nWhy don't we have independent scenarios that can optionally contain groups but must contain one or more requests? If there is a TCP connection error etc, then only that scenario throws an exception and restarts but other scenarios continue to run. So I think each scenario will be a separate VU. ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/276372593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":943100197,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTQzMTAwMTk3","url":"https://api.github.com/repos/grafana/k6/issues/events/943100197","actor":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-01-31T14:11:33Z","performed_via_github_app":null},{"id":943100199,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDk0MzEwMDE5OQ==","url":"https://api.github.com/repos/grafana/k6/issues/events/943100199","actor":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-01-31T14:11:33Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/276670711","html_url":"https://github.com/grafana/k6/issues/66#issuecomment-276670711","issue_url":"https://api.github.com/repos/grafana/k6/issues/66","id":276670711,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjY3MDcxMQ==","user":{"login":"micsjo","id":9320411,"node_id":"MDQ6VXNlcjkzMjA0MTE=","avatar_url":"https://avatars.githubusercontent.com/u/9320411?v=4","gravatar_id":"","url":"https://api.github.com/users/micsjo","html_url":"https://github.com/micsjo","followers_url":"https://api.github.com/users/micsjo/followers","following_url":"https://api.github.com/users/micsjo/following{/other_user}","gists_url":"https://api.github.com/users/micsjo/gists{/gist_id}","starred_url":"https://api.github.com/users/micsjo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/micsjo/subscriptions","organizations_url":"https://api.github.com/users/micsjo/orgs","repos_url":"https://api.github.com/users/micsjo/repos","events_url":"https://api.github.com/users/micsjo/events{/privacy}","received_events_url":"https://api.github.com/users/micsjo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-01T14:28:49Z","updated_at":"2017-02-01T14:28:49Z","body":"Simple example of what happens. Make a k6 script with a request for\r\n\r\n**https://static.hotjar.com/c/hotjar-235820.js?sv=5**\r\n\r\nIt fails with \"stream error: REFUSED STREAM\".\r\n\r\nA corresponding request for\r\n\r\n**https://www.google-analytics.com/plugins/ua/ecommerce.js**\r\n\r\nfails with \"stream error: PROTOCOL_ERROR\".\r\n\r\nIt actually is nothing wrong with the above requests. Add a User-Agent header for a proper browser and they will return a well formatted response.\r\n\r\nBut I strongly oppose the fact they _fail_. To me they didn't fail, they just didn't complete the way I expected.\r\n\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/276670711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"micsjo","id":9320411,"node_id":"MDQ6VXNlcjkzMjA0MTE=","avatar_url":"https://avatars.githubusercontent.com/u/9320411?v=4","gravatar_id":"","url":"https://api.github.com/users/micsjo","html_url":"https://github.com/micsjo","followers_url":"https://api.github.com/users/micsjo/followers","following_url":"https://api.github.com/users/micsjo/following{/other_user}","gists_url":"https://api.github.com/users/micsjo/gists{/gist_id}","starred_url":"https://api.github.com/users/micsjo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/micsjo/subscriptions","organizations_url":"https://api.github.com/users/micsjo/orgs","repos_url":"https://api.github.com/users/micsjo/repos","events_url":"https://api.github.com/users/micsjo/events{/privacy}","received_events_url":"https://api.github.com/users/micsjo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/277029701","html_url":"https://github.com/grafana/k6/issues/66#issuecomment-277029701","issue_url":"https://api.github.com/repos/grafana/k6/issues/66","id":277029701,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzAyOTcwMQ==","user":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-02T17:47:06Z","updated_at":"2017-02-02T17:47:06Z","body":"They most certainly fail. They are rejected by the server and produce a protocol error, just like a timeout or a broken pipe would.\r\n\r\nWith this proposal implemented, that failure would be contained within a `group()` and thus fail only the rest of the group - and anything that is after an HTTP request in a group can reasonably be assumed to be related to said HTTP request.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/277029701/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/277624419","html_url":"https://github.com/grafana/k6/issues/66#issuecomment-277624419","issue_url":"https://api.github.com/repos/grafana/k6/issues/66","id":277624419,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzYyNDQxOQ==","user":{"login":"micsjo","id":9320411,"node_id":"MDQ6VXNlcjkzMjA0MTE=","avatar_url":"https://avatars.githubusercontent.com/u/9320411?v=4","gravatar_id":"","url":"https://api.github.com/users/micsjo","html_url":"https://github.com/micsjo","followers_url":"https://api.github.com/users/micsjo/followers","following_url":"https://api.github.com/users/micsjo/following{/other_user}","gists_url":"https://api.github.com/users/micsjo/gists{/gist_id}","starred_url":"https://api.github.com/users/micsjo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/micsjo/subscriptions","organizations_url":"https://api.github.com/users/micsjo/orgs","repos_url":"https://api.github.com/users/micsjo/repos","events_url":"https://api.github.com/users/micsjo/events{/privacy}","received_events_url":"https://api.github.com/users/micsjo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T09:15:53Z","updated_at":"2017-02-06T09:15:53Z","body":"You are assuming they are at all in a group. Which isn't necessarily true.\r\n\r\nAlso - the behavior of failing one group and the continuing with the next is plain _bad_ in functional testing. It doesn't make sense either in performance testing since you have dependencies from requests.\r\n\r\nSample of effects [pseudo code]:\r\n\r\ngroup (\"g1\") {\r\n request_1(\"get static content\");\r\n request_2(\"get page\");\r\n request_3(\"do login\");\r\n}\r\n\r\ngroup (\"g2\") {\r\n request_4(\"do user action\");\r\n request_5(\"get more static content\");\r\n}\r\n\r\nThe above code will produce a hornets nest of debugging issues if request_1 fails and thus fails the entire group. When you get to the next group you will be unauthenticated and unauthorized and fail subsequent requests.\r\n\r\nThis is but one example. It's simply a bad idea. \r\n\r\nThen it is better to fail hard and eject execution. It will just lead to manually implementing workarounds like [pseudo code]:\r\n\r\n// if in performance test run\r\n#IFDEF PERF_TEST_RUN\r\ntry {\r\n#ENDIF\r\n\r\n// my entire script\r\n\r\n#IFDEF PERF_TEST_RUN\r\n} catch (e) {\r\n  // ignore crap\r\n} \r\n#ENDIF\r\n\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/277624419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"micsjo","id":9320411,"node_id":"MDQ6VXNlcjkzMjA0MTE=","avatar_url":"https://avatars.githubusercontent.com/u/9320411?v=4","gravatar_id":"","url":"https://api.github.com/users/micsjo","html_url":"https://github.com/micsjo","followers_url":"https://api.github.com/users/micsjo/followers","following_url":"https://api.github.com/users/micsjo/following{/other_user}","gists_url":"https://api.github.com/users/micsjo/gists{/gist_id}","starred_url":"https://api.github.com/users/micsjo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/micsjo/subscriptions","organizations_url":"https://api.github.com/users/micsjo/orgs","repos_url":"https://api.github.com/users/micsjo/repos","events_url":"https://api.github.com/users/micsjo/events{/privacy}","received_events_url":"https://api.github.com/users/micsjo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/277702815","html_url":"https://github.com/grafana/k6/issues/66#issuecomment-277702815","issue_url":"https://api.github.com/repos/grafana/k6/issues/66","id":277702815,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzcwMjgxNQ==","user":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T14:45:06Z","updated_at":"2017-02-06T14:45:06Z","body":"> You are assuming they are at all in a group. Which isn't necessarily true.\r\n\r\nThis is what conventions are for. We don't have to assume anything, we can tell people what the correct way of doing things is, and make that way as convenient as possible.\r\n\r\nIf they for whatever reason don't want to use groups, then their script will blow up when there's an error. Which may be exactly what they want.\r\n\r\n>group (\"g1\") {\r\n>request_1(\"get static content\");\r\n>request_2(\"get page\");\r\n>request_3(\"do login\");\r\n>}\r\n>\r\n>group (\"g2\") {\r\n>request_4(\"do user action\");\r\n>request_5(\"get more static content\");\r\n>}\r\n\r\nIf you really want to structure it like that, you can make the script explode regardless:\r\n\r\n```js\r\ngroup(\"g1\", function() {\r\n    // ...\r\n}, (e) => throw e);\r\n```\r\n\r\nOr you can do some good ol' try/catch-ing:\r\n\r\n```js\r\ngroup(\"g1\", function() {\r\n    try {\r\n        // ...\r\n    } catch(e) {\r\n        // ...\r\n    }\r\n});\r\n```\r\n\r\nThe idiomatic way to do it would be to design your script so that groups are hierarchic, and there is one or at most a few **related** requests in a group. If you don't wanna do that, you can use the error callback to set a \"loggedIn\" flag to false, or propagate it upwards, or do any number of other things, but this establishes a sane default.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/277702815/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/277721300","html_url":"https://github.com/grafana/k6/issues/66#issuecomment-277721300","issue_url":"https://api.github.com/repos/grafana/k6/issues/66","id":277721300,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzcyMTMwMA==","user":{"login":"micsjo","id":9320411,"node_id":"MDQ6VXNlcjkzMjA0MTE=","avatar_url":"https://avatars.githubusercontent.com/u/9320411?v=4","gravatar_id":"","url":"https://api.github.com/users/micsjo","html_url":"https://github.com/micsjo","followers_url":"https://api.github.com/users/micsjo/followers","following_url":"https://api.github.com/users/micsjo/following{/other_user}","gists_url":"https://api.github.com/users/micsjo/gists{/gist_id}","starred_url":"https://api.github.com/users/micsjo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/micsjo/subscriptions","organizations_url":"https://api.github.com/users/micsjo/orgs","repos_url":"https://api.github.com/users/micsjo/repos","events_url":"https://api.github.com/users/micsjo/events{/privacy}","received_events_url":"https://api.github.com/users/micsjo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T15:44:36Z","updated_at":"2017-02-06T15:44:36Z","body":"To summarize the two main use cases:\r\n\r\n**MAKES SENSE FOR FUNCTIONAL TESTS**\r\n- Fail a request and fail the test (unless you introduce error handling)\r\n\r\n**MAKES SENSE FOR NON-FUNCTIONAL TESTS**\r\n- Do not fail requests whatsoever (unless you purposefully catch and fail manually)\r\n\r\nTo go the middle road as suggested and fail groups is _insane_ and does not make sense for neither functional tests nor non-functional tests.\r\n\r\nIf we can't find a better solution or implementation I strongly suggest we select _ONE_ of them, not the in-between which solves nothing for any of the use cases but makes both harder to implement.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/277721300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"micsjo","id":9320411,"node_id":"MDQ6VXNlcjkzMjA0MTE=","avatar_url":"https://avatars.githubusercontent.com/u/9320411?v=4","gravatar_id":"","url":"https://api.github.com/users/micsjo","html_url":"https://github.com/micsjo","followers_url":"https://api.github.com/users/micsjo/followers","following_url":"https://api.github.com/users/micsjo/following{/other_user}","gists_url":"https://api.github.com/users/micsjo/gists{/gist_id}","starred_url":"https://api.github.com/users/micsjo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/micsjo/subscriptions","organizations_url":"https://api.github.com/users/micsjo/orgs","repos_url":"https://api.github.com/users/micsjo/repos","events_url":"https://api.github.com/users/micsjo/events{/privacy}","received_events_url":"https://api.github.com/users/micsjo/received_events","type":"User","user_view_type":"public","site_admin":false}}]