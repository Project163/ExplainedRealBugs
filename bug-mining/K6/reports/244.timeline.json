[{"id":7783069028,"node_id":"LE_lADOAz4Wr85WD87ZzwAAAAHP6DVk","url":"https://api.github.com/repos/grafana/k6/issues/events/7783069028","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-11-10T13:05:38Z","label":{"name":"feature","color":"d93f0b"},"performed_via_github_app":null},{"id":7783069030,"node_id":"LE_lADOAz4Wr85WD87ZzwAAAAHP6DVm","url":"https://api.github.com/repos/grafana/k6/issues/events/7783069030","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-11-10T13:05:38Z","label":{"name":"evaluation needed","color":"eda27d"},"performed_via_github_app":null},{"actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-10T13:11:10Z","updated_at":"2022-11-10T13:11:10Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/2762","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/2762/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/2762/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/2762/events","html_url":"https://github.com/grafana/k6/issues/2762","id":1442272220,"node_id":"I_kwDOAz4Wr85V91Pc","number":2762,"title":"Significantly high memory usage on 0.41.0?","user":{"login":"19shubham11","id":29531247,"node_id":"MDQ6VXNlcjI5NTMxMjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29531247?v=4","gravatar_id":"","url":"https://api.github.com/users/19shubham11","html_url":"https://github.com/19shubham11","followers_url":"https://api.github.com/users/19shubham11/followers","following_url":"https://api.github.com/users/19shubham11/following{/other_user}","gists_url":"https://api.github.com/users/19shubham11/gists{/gist_id}","starred_url":"https://api.github.com/users/19shubham11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/19shubham11/subscriptions","organizations_url":"https://api.github.com/users/19shubham11/orgs","repos_url":"https://api.github.com/users/19shubham11/repos","events_url":"https://api.github.com/users/19shubham11/events{/privacy}","received_events_url":"https://api.github.com/users/19shubham11/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":869293923,"node_id":"MDU6TGFiZWw4NjkyOTM5MjM=","url":"https://api.github.com/repos/grafana/k6/labels/performance","name":"performance","color":"b3ed84","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2022-11-09T15:09:09Z","updated_at":"2022-11-11T08:43:52Z","closed_at":"2022-11-10T13:11:10Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Brief summary\n\nWe've been using k6 for a couple of months and were able to develop a test-suite that gave us around 200k rps with the use of 5 worker machines running on GCP each running the given suite. We use a ramping-vus iterator and this how our config looks like \r\n```    happy_path: {\r\n        executor: 'ramping-vus',\r\n        gracefulStop: '1m',\r\n        startVUs: 0,\r\n        stages: [\r\n            { duration: '5m', target: 3000 },\r\n            { duration: '5m', target: 5000 },\r\n            { duration: '5m', target: 8000 },\r\n            { duration: '5m', target: 10000 },\r\n            { duration: '5m', target: 12000 },\r\n            { duration: '5m', target: 15000 },\r\n            { duration: '10m', target: 15000 },\r\n        ],\r\n        gracefulRampDown: '5m',\r\n    },\r\n```\r\nthe tests generally run for about 45 mins and reach max VUs of 15000. \r\n\r\nUntil yesterday we were running on k6 version 0.40.0, and upon updating to 0.41.0, memory usage went up really high. We have a max memory limit of 100GB on the instance and the `0.41.0` reached 85% memory usage within 10 mins of the test executing, I reverted back to `0.40.0` and the memory usage was down to ~10% for the entirety of the 45mins. \r\n\r\nIs this a known issue, or related to something introduced in the newer version, or maybe something got deprcated and I need to adjust the setup somehow? \r\n Happy to provide more details if needed \n\n### k6 version\n\n0.41.0\n\n### OS\n\nDebian GNU/Linux 11 (bullseye)\n\n### Docker version and image (if applicable)\n\n_No response_\n\n### Steps to reproduce the problem\n\n- running a high-scale test (15k) VUs on 0.41.0 and on 0.40.0\n\n### Expected behaviour\n\nsignificantly high memory usage on 0.41.0\n\n### Actual behaviour\n\n- should perform the same? ","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/2762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/2762/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-03T10:56:16Z","updated_at":"2023-01-03T10:56:16Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/2836","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/2836/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/2836/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/2836/events","html_url":"https://github.com/grafana/k6/issues/2836","id":1516741395,"node_id":"I_kwDOAz4Wr85aZ6MT","number":2836,"title":"Exponential memory leaks in two latest versions","user":{"login":"raykov","id":133789,"node_id":"MDQ6VXNlcjEzMzc4OQ==","avatar_url":"https://avatars.githubusercontent.com/u/133789?v=4","gravatar_id":"","url":"https://api.github.com/users/raykov","html_url":"https://github.com/raykov","followers_url":"https://api.github.com/users/raykov/followers","following_url":"https://api.github.com/users/raykov/following{/other_user}","gists_url":"https://api.github.com/users/raykov/gists{/gist_id}","starred_url":"https://api.github.com/users/raykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raykov/subscriptions","organizations_url":"https://api.github.com/users/raykov/orgs","repos_url":"https://api.github.com/users/raykov/repos","events_url":"https://api.github.com/users/raykov/events{/privacy}","received_events_url":"https://api.github.com/users/raykov/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":345191758,"node_id":"MDU6TGFiZWwzNDUxOTE3NTg=","url":"https://api.github.com/repos/grafana/k6/labels/bug","name":"bug","color":"b60205","default":true,"description":""},{"id":869293923,"node_id":"MDU6TGFiZWw4NjkyOTM5MjM=","url":"https://api.github.com/repos/grafana/k6/labels/performance","name":"performance","color":"b3ed84","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-01-02T21:43:26Z","updated_at":"2023-01-03T11:01:24Z","closed_at":"2023-01-03T10:56:16Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Brief summary\n\nI noticed that with two latests versions of k6 `0.41.0` & `0.42.0` it started to consume a lot of memory for no reason.\r\n\r\nDeep investigation pointed out that this happens with http calls when url is random on each call. E.g.\r\n\r\n```js\r\nhttp.get(`http://test.k6.io?a=${randomString(10)}&c=${randomString(10)}`);\r\n```\r\n\r\nThis will cause process to consume over 2GiB in 10 minutes with only 100 VUs\r\n\r\n\n\n### k6 version\n\n0.41.0 & 0.42.0\n\n### OS\n\nmacOS\n\n### Docker version and image (if applicable)\n\nDocker 4.3.2, Images grafana/k6:0.41.0 & grafana/k6:0.42.0\n\n### Steps to reproduce the problem\n\n## 0.41.0\r\n### First experiment: http://test.k6.io\r\nscript.js\r\n\r\n```js\r\nimport { sleep, randomSeed } from \"k6\";\r\nimport http from \"k6/http\";\r\nimport { randomString } from 'https://jslib.k6.io/k6-utils/1.4.0/index.js';\r\n\r\nexport function setup() {\r\n    randomSeed(new Date().getTime());\r\n}\r\n\r\nexport default function() {\r\n    http.get(`http://test.k6.io`);\r\n\r\n    sleep(0.5)\r\n}\r\n\r\n```\r\n\r\n```bash\r\ndocker run  -e K6_STAGES=\"1m:100,10m:100\" -v current_dir_with_script:/app   -i grafana/k6:0.41.0   run /app/test.js\r\n```\r\n\r\n### Second experiment: http://test.k6.io?a=b&c=d\r\nscript.js\r\n\r\n```js\r\nimport { sleep, randomSeed } from \"k6\";\r\nimport http from \"k6/http\";\r\nimport { randomString } from 'https://jslib.k6.io/k6-utils/1.4.0/index.js';\r\n\r\nexport function setup() {\r\n    randomSeed(new Date().getTime());\r\n}\r\n\r\nexport default function() {\r\n    http.get(`http://test.k6.io?a=b&c=d`);\r\n\r\n    sleep(0.5)\r\n}\r\n\r\n```\r\n\r\n```bash\r\ndocker run  -e K6_STAGES=\"1m:100,10m:100\" -v current_dir_with_script:/app   -i grafana/k6:0.41.0   run /app/test.js\r\n```\r\n\r\n### Third experiment: http://test.k6.io?a=${randomString(10)}&c=${randomString(10)}\r\n\r\nscript.js\r\n\r\n```js\r\nimport { sleep, randomSeed } from \"k6\";\r\nimport http from \"k6/http\";\r\nimport { randomString } from 'https://jslib.k6.io/k6-utils/1.4.0/index.js';\r\n\r\nexport function setup() {\r\n    randomSeed(new Date().getTime());\r\n}\r\n\r\nexport default function() {\r\n    http.get(`http://test.k6.io?a=${randomString(10)}&c=${randomString(10)}`);\r\n\r\n    sleep(0.5)\r\n}\r\n\r\n```\r\n\r\n```bash\r\ndocker run  -e K6_STAGES=\"1m:100,10m:100\" -v current_dir_with_script:/app   -i grafana/k6:0.41.0   run /app/test.js\r\n```\r\n\r\nMemory consumption over 3 tests, MiB\r\n![chart](https://user-images.githubusercontent.com/133789/210278362-d1c48309-7494-48c0-ba0a-a896697688cf.png)\r\n![Screenshot 2023-01-02 at 22 13 55](https://user-images.githubusercontent.com/133789/210278449-bc962022-8c17-414e-938b-430f0f8d13cf.png)\r\n\r\n\r\n\r\n\r\n\r\n## 0.40.0 (previous version where this works fine)\r\n### First experiment: http://test.k6.io\r\nscript.js\r\n\r\n```js\r\nimport { sleep, randomSeed } from \"k6\";\r\nimport http from \"k6/http\";\r\nimport { randomString } from 'https://jslib.k6.io/k6-utils/1.4.0/index.js';\r\n\r\nexport function setup() {\r\n    randomSeed(new Date().getTime());\r\n}\r\n\r\nexport default function() {\r\n    http.get(`http://test.k6.io`);\r\n\r\n    sleep(0.5)\r\n}\r\n\r\n```\r\n\r\n```bash\r\ndocker run  -e K6_STAGES=\"1m:100,10m:100\" -v current_dir_with_script:/app   -i grafana/k6:0.40.0   run /app/test.js\r\n```\r\n\r\n### Second experiment: http://test.k6.io?a=b&c=d\r\nscript.js\r\n\r\n```js\r\nimport { sleep, randomSeed } from \"k6\";\r\nimport http from \"k6/http\";\r\nimport { randomString } from 'https://jslib.k6.io/k6-utils/1.4.0/index.js';\r\n\r\nexport function setup() {\r\n    randomSeed(new Date().getTime());\r\n}\r\n\r\nexport default function() {\r\n    http.get(`http://test.k6.io?a=b&c=d`);\r\n\r\n    sleep(0.5)\r\n}\r\n\r\n```\r\n\r\n```bash\r\ndocker run  -e K6_STAGES=\"1m:100,10m:100\" -v current_dir_with_script:/app   -i grafana/k6:0.40.0   run /app/test.js\r\n```\r\n\r\n### Third experiment: http://test.k6.io?a=${randomString(10)}&c=${randomString(10)}\r\n\r\nscript.js\r\n\r\n```js\r\nimport { sleep, randomSeed } from \"k6\";\r\nimport http from \"k6/http\";\r\nimport { randomString } from 'https://jslib.k6.io/k6-utils/1.4.0/index.js';\r\n\r\nexport function setup() {\r\n    randomSeed(new Date().getTime());\r\n}\r\n\r\nexport default function() {\r\n    http.get(`http://test.k6.io?a=${randomString(10)}&c=${randomString(10)}`);\r\n\r\n    sleep(0.5)\r\n}\r\n\r\n```\r\n\r\n```bash\r\ndocker run  -e K6_STAGES=\"1m:100,10m:100\" -v current_dir_with_script:/app   -i grafana/k6:0.40.0   run /app/test.js\r\n```\r\n\r\nMemory consumption over 3 tests, MiB\r\n![chart (1)](https://user-images.githubusercontent.com/133789/210279656-d573957d-10b4-43ba-986f-347e938d21b9.png)\r\n![Screenshot 2023-01-02 at 22 39 21](https://user-images.githubusercontent.com/133789/210279663-0e2d14db-7755-4e9d-a833-3ad062e95ea5.png)\r\n\r\n\r\n## Conclusions \r\n\r\nAs you can see, there is no such a drastically jump in memory consumption with version 0.40.0 with random url's in get requests\r\n\r\nps. I also tested with v 0.42.0, situation is the same. \r\n\n\n### Expected behaviour\n\nstable memory consumption around 150 MiB over the test\r\n\r\n![Screenshot 2023-01-02 at 22 23 15](https://user-images.githubusercontent.com/133789/210278940-bbdcc286-decd-4315-baf7-c0fa414fada9.png)\r\n\n\n### Actual behaviour\n\nmemory consumption growth exponentially over 2 GiB\r\n\r\n\r\n![Screenshot 2023-01-02 at 22 24 04](https://user-images.githubusercontent.com/133789/210278955-9a65a340-9996-48ca-925d-3cf8bbd3d9ab.png)\r\n","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/2836/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/2836/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/1424386278","html_url":"https://github.com/grafana/k6/issues/2766#issuecomment-1424386278","issue_url":"https://api.github.com/repos/grafana/k6/issues/2766","id":1424386278,"node_id":"IC_kwDOAz4Wr85U5mjm","user":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-09T15:34:49Z","updated_at":"2023-02-09T15:47:26Z","body":"After some internal discussion there is some agreement on a stop-gappy solution that let's users set metadata from JS code, but skips over the problems above. \r\n\r\n### Proposal\r\n\r\nAdd `metadata` property under `\"k6/execution\".vu` probably as `\"k6/execution\".vu.metrics.metadata`. \r\n\r\nThat property behaves exactly as the current `\"k6/execution\".vu.tags` but insetad of changing the tags it changes the metadata.\r\n\r\n#### Additional API changes:\r\n\r\nAdd `\"k6/execution\".vu.metrics.tags` which is an alias for `\"k6/execution\".vu.tags` to be more consistent. \r\n\r\nFuture APIs that do something with metrics and are per VU can use this as potential place to be added as well. But that is outside the scope of this discussion.\r\n\r\n\r\n#### Async caveats: \r\n\r\nSame as with `\"k6/execution\".vu.tags` \r\nNote: examples are with `tags` so they are easier to try. \r\n```javascript\r\nimport exec from \"k6/execution\";\r\nexport default async () => {\r\n\r\n   exec.vu.tags[\"someTag\"] = \"value\"\r\n   await asyncCall() // not only is this call tagged with `\"someTag\"`, but anything that runs while it is awaited\r\n   delete exec.vu.tags[\"someTag\"] \r\n}\r\n```\r\n\r\nIn order to be able to use `await` you need to first get the promise from `asyncCall` , reset the tag and then `await` it. \r\nYou might do it in a helper function.\r\n\r\n```javascript\r\nimport exec from \"k6/execution\";\r\nfunction helper(tagName, tagValue) {\r\n  try { // theorethically this can also reset to the old value\r\n    exec.vu.tags[tagName] = tagValue\r\n    return asyncCall()\r\n  } finally {\r\n   delete exec.vu.tags[tagName] \r\n  }\r\n}\r\n\r\nexport default async () => {\r\n  await helper(\"someTag\", \"someValue\")\r\n}\r\n```\r\n\r\nIf you want to implement something like `withMetadata` you could ... but it will have the same problems `group` does.\r\n\r\nOn a per call basis you can have somethign with lambda as in \r\n\r\n```javascript\r\nimport exec from \"k6/execution\";\r\nfunction helper(f, tagName, tagValue) {\r\n  try { // theorethically this can also reset to the old value\r\n    exec.vu.tags[tagName] = tagValue\r\n    return f() // f here is a call returning a promise\r\n  } finally {\r\n   delete exec.vu.tags[tagName] \r\n  }\r\n}\r\nexport default async () => {\r\n  await f(()=> {\r\n    return asyncCall(\"with\",  \"some\", \"arguments\")\r\n  }, \"someTag\", \"someValue\"\r\n})\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/1424386278/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8637835808,"node_id":"MIE_lADOAz4Wr85WD87ZzwAAAAIC2uog","url":"https://api.github.com/repos/grafana/k6/issues/events/8637835808","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2023-03-01T12:49:23Z","milestone":{"title":"v0.45.0"},"performed_via_github_app":null},{"actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-03-01T13:00:17Z","updated_at":"2023-03-01T13:00:17Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/2950","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/2950/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/2950/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/2950/events","html_url":"https://github.com/grafana/k6/issues/2950","id":1604882025,"node_id":"I_kwDOAz4Wr85fqI5p","number":2950,"title":"Option to use separate name and url tags (Possibly via raw_url)","user":{"login":"TomRiddle01","id":10030679,"node_id":"MDQ6VXNlcjEwMDMwNjc5","avatar_url":"https://avatars.githubusercontent.com/u/10030679?v=4","gravatar_id":"","url":"https://api.github.com/users/TomRiddle01","html_url":"https://github.com/TomRiddle01","followers_url":"https://api.github.com/users/TomRiddle01/followers","following_url":"https://api.github.com/users/TomRiddle01/following{/other_user}","gists_url":"https://api.github.com/users/TomRiddle01/gists{/gist_id}","starred_url":"https://api.github.com/users/TomRiddle01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TomRiddle01/subscriptions","organizations_url":"https://api.github.com/users/TomRiddle01/orgs","repos_url":"https://api.github.com/users/TomRiddle01/repos","events_url":"https://api.github.com/users/TomRiddle01/events{/privacy}","received_events_url":"https://api.github.com/users/TomRiddle01/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":345191760,"node_id":"MDU6TGFiZWwzNDUxOTE3NjA=","url":"https://api.github.com/repos/grafana/k6/labels/enhancement","name":"enhancement","color":"5319E7","default":true,"description":""},{"id":869282130,"node_id":"MDU6TGFiZWw4NjkyODIxMzA=","url":"https://api.github.com/repos/grafana/k6/labels/feature","name":"feature","color":"5319E7","default":false,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-03-01T12:28:51Z","updated_at":"2023-10-25T07:59:48Z","closed_at":null,"author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Feature Description\n\nFrom these threads (https://github.com/grafana/k6/pull/2654, https://github.com/grafana/k6/pull/2726, https://github.com/grafana/k6/issues/2584) and release notes (https://github.com/grafana/k6/releases/tag/v0.40.0, https://github.com/grafana/k6/releases/tag/v0.41.0) I understand that the url and name tags are now essentially the same. My team and I apparently are the minority that uses those tags/values as described by @na-- in https://github.com/grafana/k6/pull/2654#discussion_r983221476.\r\n\r\nI did not find an issue regarding the planned `raw_url` (Announced here: https://github.com/grafana/k6/pull/2726#issue-1407404161) so I want to voice interest and maybe start a discussion.\r\n\r\n\r\nour use case:\r\nThe websites we test often have a lot of redirects and dynamic URLs. Because of this we tag all requests with shorter names to group them. In case of unexpected behaviours we used to look up the actual URLs from non-aggregated the InfluxDB/Grafana.\r\nWe also like to automatically print a mapping of which names map to which actual URLs to include in a report after the test.\r\n\r\nIn short: We'd like to continue to use something like the proposed `raw_url` in the mentioned threads.\r\nFor our use case this probably means support for non-indexed values in the influxdb output would be needed.\r\n\r\n\r\n\r\n\r\n\r\n  \n\n### Suggested Solution (optional)\n\n_No response_\n\n### Already existing or connected issues / PRs (optional)\n\nhttps://github.com/grafana/k6/pull/2654\r\nhttps://github.com/grafana/k6/pull/2726\r\nhttps://github.com/grafana/k6/releases/tag/v0.40.0\r\nhttps://github.com/grafana/k6/releases/tag/v0.41.0","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/2950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/2950/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":9046700621,"node_id":"AE_lADOAz4Wr85WD87ZzwAAAAIbObJN","url":"https://api.github.com/repos/grafana/k6/issues/events/9046700621","actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2023-04-19T13:33:34Z","assignee":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":9103229441,"node_id":"REFE_lADOAz4Wr85WD87ZzwAAAAIemEIB","url":"https://api.github.com/repos/grafana/k6/issues/events/9103229441","actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ce433399c32c824d3b8a93b619d637c3c0576184","commit_url":"https://api.github.com/repos/grafana/k6/commits/ce433399c32c824d3b8a93b619d637c3c0576184","created_at":"2023-04-26T12:52:13Z","performed_via_github_app":null},{"actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-26T12:52:23Z","updated_at":"2023-04-26T12:52:23Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/3037","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/3037/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/3037/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/3037/events","html_url":"https://github.com/grafana/k6/pull/3037","id":1684972651,"node_id":"PR_kwDOAz4Wr85PMqtR","number":3037,"title":"k6/execution: Add metadata JS API","user":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2743341216,"node_id":"MDU6TGFiZWwyNzQzMzQxMjE2","url":"https://api.github.com/repos/grafana/k6/labels/documentation-needed","name":"documentation-needed","color":"1AE598","default":false,"description":"A PR which will need a separate PR for documentation"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/grafana/k6/milestones/33","html_url":"https://github.com/grafana/k6/milestone/33","labels_url":"https://api.github.com/repos/grafana/k6/milestones/33/labels","id":9066820,"node_id":"MI_kwDOAz4Wr84AillE","number":33,"title":"v0.45.0","description":"","creator":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":55,"state":"closed","created_at":"2023-02-20T12:57:10Z","updated_at":"2023-06-19T11:52:39Z","due_on":"2023-06-19T07:00:00Z","closed_at":"2023-06-19T11:52:39Z"},"comments":3,"created_at":"2023-04-26T12:52:22Z","updated_at":"2023-06-08T08:58:17Z","closed_at":"2023-05-09T15:03:21Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/grafana/k6/pulls/3037","html_url":"https://github.com/grafana/k6/pull/3037","diff_url":"https://github.com/grafana/k6/pull/3037.diff","patch_url":"https://github.com/grafana/k6/pull/3037.patch","merged_at":"2023-05-09T15:03:21Z"},"body":"A bare minimum API to set and get metadata set for the whole VU.\r\n\r\nIt is added on top of the vu property and on top of a new `metrics` one so. If `k6/execution` is imported as `exec` -\r\n`exec.vu.metrics.metadata[\"foo\"]` will get you the currently set metadata for `foo` the same way `exec.vu.tags[\"bar\"]` will get you the value of the tag `bar`.\r\n\r\nSetting metadata is the same.\r\n\r\nIt also adds `exec.vu.metrics.tags` which is the same as `exec.vu.tags` for consistency. While leaving the old one for backwards compatibility.\r\n\r\nThis also includes dropping the ability to list metadata keys and values from `exec.vu.tags`. This was likely left in by mistake.\r\n\r\nThis is a breaking change due to the fact that before that `iter` and `vu` could've been accessed this way but this will now need to be done through the new `exec.vu.metrics.metadata`.\r\n\r\nCloses #2766\r\n\r\n","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/3037/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/3037/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":9201888100,"node_id":"CE_lADOAz4Wr85WD87ZzwAAAAIkeatk","url":"https://api.github.com/repos/grafana/k6/issues/events/9201888100","actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2023-05-09T15:03:23Z","state_reason":null,"performed_via_github_app":null},{"id":9201888185,"node_id":"REFE_lADOAz4Wr85WD87ZzwAAAAIkeau5","url":"https://api.github.com/repos/grafana/k6/issues/events/9201888185","actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"9e3359b7dd4b6dec7440d9e2cac6948b3ed64e4a","commit_url":"https://api.github.com/repos/grafana/k6/commits/9e3359b7dd4b6dec7440d9e2cac6948b3ed64e4a","created_at":"2023-05-09T15:03:24Z","performed_via_github_app":null}]