{"url":"https://api.github.com/repos/grafana/k6/issues/4125","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/4125/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/4125/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/4125/events","html_url":"https://github.com/grafana/k6/issues/4125","id":2742828104,"node_id":"I_kwDOAz4Wr86jfDxI","number":4125,"title":"NPD in NewFrameSession","user":{"login":"ankur22","id":1112428,"node_id":"MDQ6VXNlcjExMTI0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/1112428?v=4","gravatar_id":"","url":"https://api.github.com/users/ankur22","html_url":"https://github.com/ankur22","followers_url":"https://api.github.com/users/ankur22/followers","following_url":"https://api.github.com/users/ankur22/following{/other_user}","gists_url":"https://api.github.com/users/ankur22/gists{/gist_id}","starred_url":"https://api.github.com/users/ankur22/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ankur22/subscriptions","organizations_url":"https://api.github.com/users/ankur22/orgs","repos_url":"https://api.github.com/users/ankur22/repos","events_url":"https://api.github.com/users/ankur22/events{/privacy}","received_events_url":"https://api.github.com/users/ankur22/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":345191758,"node_id":"MDU6TGFiZWwzNDUxOTE3NTg=","url":"https://api.github.com/repos/grafana/k6/labels/bug","name":"bug","color":"b60205","default":true,"description":""},{"id":5881916984,"node_id":"LA_kwDOAz4Wr88AAAABXpbuOA","url":"https://api.github.com/repos/grafana/k6/labels/triage","name":"triage","color":"2ee8ff","default":false,"description":""},{"id":6004839752,"node_id":"LA_kwDOAz4Wr88AAAABZeqVSA","url":"https://api.github.com/repos/grafana/k6/labels/area:%20browser","name":"area: browser","color":"FFCD46","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-11-21T10:07:07Z","updated_at":"2025-02-14T14:45:20Z","closed_at":"2025-02-14T14:45:20Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Brief summary\n\nNPD when calling `s.ID()` on an instance of session that was passed into `NewFrameSession`. The NPD occurs in the `ID` method itself, which is a simple `return s.id`, which means that the session instance is incomplete/nil (suggesting that since in the stach trace we have `(*Session).ID(0xc00334d8e8?)` and the `?` denotes _\"uncertainty about the validity of the memory address or a possible truncation or mismatch of debug information\"_)?\n\n```bash\npanic: runtime error: invalid memory address or nil pointer dereference\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x48 pc=0x15e6940]\n\ngoroutine 683891 [running]:\ngithub.com/grafana/xk6-browser/common.(*Session).ID(0xc00334d8e8?)\ngithub.com/grafana/xk6-browser@v1.9.2-0.20241118153201-d741e4540a3a/common/session.go:53\ngithub.com/grafana/xk6-browser/common.NewFrameSession({0x1f9ad08, 0xc0027e8b90}, {0x1fa4cc0, 0x0}, 0xc000b11860, 0xc001b77ec0, {0xc0012c7840, 0x20}, 0xc002ba7920, 0x0)\ngithub.com/grafana/xk6-browser@v1.9.2-0.20241118153201-d741e4540a3a/common/frame_session.go:95 +0x6e\ngithub.com/grafana/xk6-browser/common.(*FrameSession).attachIFrameToTarget(0xc001b77ec0, 0xc000658bd0, {0xc0012c7820, 0x20})\ngithub.com/grafana/xk6-browser@v1.9.2-0.20241118153201-d741e4540a3a/common/frame_session.go:1034 +0xe5\ngithub.com/grafana/xk6-browser/common.(*FrameSession).onAttachedToTarget(0xc001b77ec0, 0xc003e81460)\ngithub.com/grafana/xk6-browser@v1.9.2-0.20241118153201-d741e4540a3a/common/frame_session.go:967 +0x277\ngithub.com/grafana/xk6-browser/common.(*FrameSession).initEvents.func1()\ngithub.com/grafana/xk6-browser@v1.9.2-0.20241118153201-d741e4540a3a/common/frame_session.go:303 +0x233\ncreated by github.com/grafana/xk6-browser/common.(*FrameSession).initEvents in goroutine 683768\ngithub.com/grafana/xk6-browser@v1.9.2-0.20241118153201-d741e4540a3a/common/frame_session.go:239 +0x19b\n```\n\nTest run id: 3536152\n\n### xk6-browser version\n\nv1.9.1\n\n### OS\n\nNA\n\n### Chrome version\n\nNA\n\n### Docker version and image (if applicable)\n\n_No response_\n\n### Steps to reproduce the problem\n\n-\n\n### Expected behaviour\n\n-\n\n### Actual behaviour\n\n-","closed_by":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/4125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/4125/timeline","performed_via_github_app":null,"state_reason":"completed"}