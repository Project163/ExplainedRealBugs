{"url":"https://api.github.com/repos/grafana/k6/issues/5055","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/5055/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/5055/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/5055/events","html_url":"https://github.com/grafana/k6/issues/5055","id":3319959599,"node_id":"I_kwDOAz4Wr87F4pAv","number":5055,"title":"`k6 login cloud` panicking with 1.2.1 upgrade","user":{"login":"indygriffiths","id":32345766,"node_id":"MDQ6VXNlcjMyMzQ1NzY2","avatar_url":"https://avatars.githubusercontent.com/u/32345766?v=4","gravatar_id":"","url":"https://api.github.com/users/indygriffiths","html_url":"https://github.com/indygriffiths","followers_url":"https://api.github.com/users/indygriffiths/followers","following_url":"https://api.github.com/users/indygriffiths/following{/other_user}","gists_url":"https://api.github.com/users/indygriffiths/gists{/gist_id}","starred_url":"https://api.github.com/users/indygriffiths/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/indygriffiths/subscriptions","organizations_url":"https://api.github.com/users/indygriffiths/orgs","repos_url":"https://api.github.com/users/indygriffiths/repos","events_url":"https://api.github.com/users/indygriffiths/events{/privacy}","received_events_url":"https://api.github.com/users/indygriffiths/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":345191758,"node_id":"MDU6TGFiZWwzNDUxOTE3NTg=","url":"https://api.github.com/repos/grafana/k6/labels/bug","name":"bug","color":"b60205","default":true,"description":""},{"id":874927263,"node_id":"MDU6TGFiZWw4NzQ5MjcyNjM=","url":"https://api.github.com/repos/grafana/k6/labels/high%20prio","name":"high prio","color":"D93F0B","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":1,"created_at":"2025-08-13T21:33:01Z","updated_at":"2025-08-19T08:21:07Z","closed_at":"2025-08-19T08:21:06Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Brief summary\n\nWith the upgrade to `1.2.1` from `1.1.0` we started seeing panics from using the deprecated `k6 login cloud` command as `k6 login` now only accepts `influxdb`.\n\nIt's not a huge deal as we can update our scripts that use `k6 login cloud` to the new `k6 cloud login` command, but flagging that this wasn't mentioned in the release notes if it was intended to be removed, or whether it should fail more gracefully rather than panicking.\n\n```\n$ k6 login\nCommand \"login\" is deprecated, and will be removed in a future release. Please use the \"k6 cloud login\" command instead.\n\nUsage:\n  k6 login [flags]\n  k6 login [command]\n\nAvailable Commands:\n  influxdb    Authenticate with InfluxDB\n\nFlags:\n  -h, --help   help for login\n```\n\n\n### k6 version\n\n1.2.1\n\n### OS\n\nmacOS and Ubuntu\n\n### Docker version and image (if applicable)\n\n_No response_\n\n### Steps to reproduce the problem\n\n1. Run `k6 login cloud`\n\n### Expected behaviour\n\nBased on the release notes, the warning to appear when running the command but the login still working.\n\n### Actual behaviour\n\n```\n$ k6 login cloud -t foo\nCommand \"cloud\" is deprecated, and will be removed in a future release.\nPlease use the \"k6 cloud login\" command instead.\n\nERRO[0000] unexpected k6 panic: runtime error: index out of range [0] with length 0\ngoroutine 1 [running]:\nruntime/debug.Stack()\n\truntime/debug/stack.go:26 +0x64\ngo.k6.io/k6/internal/cmd.(*rootCommand).execute.func2()\n\tgo.k6.io/k6/internal/cmd/root.go:135 +0x54\npanic({0x103c62080?, 0x140001b44f8?})\n\truntime/panic.go:792 +0x124\ngo.k6.io/k6/internal/cmd.analyze(0x1400025d8c8, {0x1400019f440, 0x0, 0x105143d48?})\n\tgo.k6.io/k6/internal/cmd/launcher.go:305 +0x394\ngo.k6.io/k6/internal/cmd.(*launcher).launch(0x140002a6b70, 0x14000327348, {0x1400019f440, 0x0, 0x2})\n\tgo.k6.io/k6/internal/cmd/launcher.go:88 +0x144\ngo.k6.io/k6/internal/cmd.(*rootCommand).persistentPreRunE(0x140001cdd40, 0x14000327348, {0x1400019f440, 0x0, 0x2})\n\tgo.k6.io/k6/internal/cmd/root.go:118 +0xe4\ngithub.com/spf13/cobra.(*Command).execute(0x14000327348, {0x1400019f420, 0x2, 0x2})\n\tgithub.com/spf13/cobra@v1.4.0/command.go:835 +0x4c4\ngithub.com/spf13/cobra.(*Command).ExecuteC(0x14000319348)\n\tgithub.com/spf13/cobra@v1.4.0/command.go:974 +0x318\ngithub.com/spf13/cobra.(*Command).Execute(...)\n\tgithub.com/spf13/cobra@v1.4.0/command.go:902\ngo.k6.io/k6/internal/cmd.(*rootCommand).execute(0x140001cdd40)\n\tgo.k6.io/k6/internal/cmd/root.go:143 +0xc8\ngo.k6.io/k6/internal/cmd.ExecuteWithGlobalState(0x1400025d8c8)\n\tgo.k6.io/k6/internal/cmd/root.go:35 +0xac\ngo.k6.io/k6/cmd.Execute()\n\tgo.k6.io/k6/cmd/execute.go:16 +0x30\nmain.main()\n\tgo.k6.io/k6/main.go:9 +0x1c\n```","closed_by":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/5055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/5055/timeline","performed_via_github_app":null,"state_reason":"completed"}