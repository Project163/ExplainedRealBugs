[{"id":1570824216,"node_id":"MDEyOkxhYmVsZWRFdmVudDE1NzA4MjQyMTY=","url":"https://api.github.com/repos/grafana/k6/issues/events/1570824216","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-04-12T12:14:14Z","label":{"name":"bug","color":"b60205"},"performed_via_github_app":null},{"id":1570831909,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTU3MDgzMTkwOQ==","url":"https://api.github.com/repos/grafana/k6/issues/events/1570831909","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2018-04-12T12:18:26Z","rename":{"from":"Closing of websocket by remote server hangs script and does not trigger the close WS handler","to":"Closing of websocket by remote server does not trigger the script close handler"},"performed_via_github_app":null},{"actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-31T12:48:24Z","updated_at":"2018-12-31T12:48:24Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/885","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/885/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/885/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/885/events","html_url":"https://github.com/grafana/k6/issues/885","id":394263079,"node_id":"MDU6SXNzdWUzOTQyNjMwNzk=","number":885,"title":"WebSocket session counter is not exactly same as VU","user":{"login":"gcg","id":811685,"node_id":"MDQ6VXNlcjgxMTY4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/811685?v=4","gravatar_id":"","url":"https://api.github.com/users/gcg","html_url":"https://github.com/gcg","followers_url":"https://api.github.com/users/gcg/followers","following_url":"https://api.github.com/users/gcg/following{/other_user}","gists_url":"https://api.github.com/users/gcg/gists{/gist_id}","starred_url":"https://api.github.com/users/gcg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gcg/subscriptions","organizations_url":"https://api.github.com/users/gcg/orgs","repos_url":"https://api.github.com/users/gcg/repos","events_url":"https://api.github.com/users/gcg/events{/privacy}","received_events_url":"https://api.github.com/users/gcg/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":345191758,"node_id":"MDU6TGFiZWwzNDUxOTE3NTg=","url":"https://api.github.com/repos/grafana/k6/labels/bug","name":"bug","color":"b60205","default":true,"description":""},{"id":874564661,"node_id":"MDU6TGFiZWw4NzQ1NjQ2NjE=","url":"https://api.github.com/repos/grafana/k6/labels/refactor","name":"refactor","color":"fbca04","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-12-27T00:20:29Z","updated_at":"2020-03-23T12:15:09Z","closed_at":"2020-03-23T12:15:09Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hey there, first I really appricate k6 and thank you for this :) \r\n\r\nI am trying to write some tests with websockets but for some reason k6 never opens the connection count that I want with -u. \r\n\r\nIf I give -u 10000 it usually opens 8k socket connections. If I give the -u 5000, it's somewhere around 4k. I am not sure if I am missing something here. \r\n\r\n![430d368c-11d6-4308-a714-295aef73fd23](https://user-images.githubusercontent.com/811685/50460210-03567500-0942-11e9-9942-7bcf13634393.png)\r\n\r\n\r\nHere is the code version for the same .js file on the screen shot\r\n\r\n```javascript\r\nimport ws from \"k6/ws\";\r\nimport { check, fail } from \"k6\";\r\nimport { Counter } from \"k6/metrics\";\r\n\r\nlet sessionCounter = new Counter('session_counter');\r\nlet msgCounter = new Counter('msg_counter');\r\nlet errCounter = new Counter('err_counter');\r\nlet closeCounter = new Counter('close_counter');\r\nlet pingCounter = new Counter('ping_counter');\r\n\r\nexport function setup() {\r\n  let trivia_id = __ENV.trivia_id;\r\n\r\n  return {\r\n    trivia_id\r\n  }\r\n}\r\n\r\nexport default function (data) {\r\n  let url = `ws://gcg.me:3000/trivia-status/${data.trivia_id}`;\r\n  let con = ws.connect(url, null, function( socket ) {\r\n    socket.on('open', function () {\r\n      sessionCounter.add(1);\r\n      socket.setInterval(function timeout() {\r\n        socket.ping();\r\n        pingCounter.add(1);\r\n      }, 1000);\r\n    });\r\n\r\n    socket.on('close', function () {\r\n      console.log(`Connection closed on ${__VU} on ${__ITER}`);\r\n      closeCounter.add(1);\r\n    });\r\n    socket.on('error', function(e) {\r\n      if (e.error() != \"websocket: close sent\") {\r\n        console.log('An unexpected error occured: ', e.error());\r\n      }\r\n      errCounter.add(1);\r\n    });\r\n\r\n    socket.on('message', function () {\r\n      msgCounter.add(1);\r\n    });\r\n  });\r\n\r\n  check(con, {\r\n    \"status is 101\": (r) => r && r.status === 101\r\n  });\r\n}\r\n```\r\n\r\nAs you can see I am also logging error and socket close events and since they are not showing up on the results I am assuming there was no error and no server side close issues. I also add active socket connection count to my backend and tracked that number real time and it's the same with the sessionCounter. So how come I can't open all the connections I want? \r\n\r\nAnd from the documantation I was hoping to see default ws metrics to be on the result screen but for some reason I am not seeing, that is the reason I am counting every event manually. \r\n\r\nAnd as an extra question, I also want to handle the socket connection errors to re-open that connection after an error to keep the session going. But I didn't see on the documantation page. I want to make my tests as real as possible and if a client loses its socket connection, it usually re-opens the connection. \r\n\r\nThank you. ","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/885/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/462390948","html_url":"https://github.com/grafana/k6/issues/581#issuecomment-462390948","issue_url":"https://api.github.com/repos/grafana/k6/issues/581","id":462390948,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MjM5MDk0OA==","user":{"login":"jonathandemoor","id":3025075,"node_id":"MDQ6VXNlcjMwMjUwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/3025075?v=4","gravatar_id":"","url":"https://api.github.com/users/jonathandemoor","html_url":"https://github.com/jonathandemoor","followers_url":"https://api.github.com/users/jonathandemoor/followers","following_url":"https://api.github.com/users/jonathandemoor/following{/other_user}","gists_url":"https://api.github.com/users/jonathandemoor/gists{/gist_id}","starred_url":"https://api.github.com/users/jonathandemoor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonathandemoor/subscriptions","organizations_url":"https://api.github.com/users/jonathandemoor/orgs","repos_url":"https://api.github.com/users/jonathandemoor/repos","events_url":"https://api.github.com/users/jonathandemoor/events{/privacy}","received_events_url":"https://api.github.com/users/jonathandemoor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-11T16:21:40Z","updated_at":"2019-02-11T16:21:40Z","body":"Any updates? ðŸ˜…","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/462390948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jonathandemoor","id":3025075,"node_id":"MDQ6VXNlcjMwMjUwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/3025075?v=4","gravatar_id":"","url":"https://api.github.com/users/jonathandemoor","html_url":"https://github.com/jonathandemoor","followers_url":"https://api.github.com/users/jonathandemoor/followers","following_url":"https://api.github.com/users/jonathandemoor/following{/other_user}","gists_url":"https://api.github.com/users/jonathandemoor/gists{/gist_id}","starred_url":"https://api.github.com/users/jonathandemoor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonathandemoor/subscriptions","organizations_url":"https://api.github.com/users/jonathandemoor/orgs","repos_url":"https://api.github.com/users/jonathandemoor/repos","events_url":"https://api.github.com/users/jonathandemoor/events{/privacy}","received_events_url":"https://api.github.com/users/jonathandemoor/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2135984430,"node_id":"MDEyOkxhYmVsZWRFdmVudDIxMzU5ODQ0MzA=","url":"https://api.github.com/repos/grafana/k6/issues/events/2135984430","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-02-13T08:25:17Z","label":{"name":"help wanted","color":"159818"},"performed_via_github_app":null},{"id":2135984434,"node_id":"MDEyOkxhYmVsZWRFdmVudDIxMzU5ODQ0MzQ=","url":"https://api.github.com/repos/grafana/k6/issues/events/2135984434","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-02-13T08:25:17Z","label":{"name":"high prio","color":"e99695"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/463104267","html_url":"https://github.com/grafana/k6/issues/581#issuecomment-463104267","issue_url":"https://api.github.com/repos/grafana/k6/issues/581","id":463104267,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MzEwNDI2Nw==","user":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-13T08:25:28Z","updated_at":"2019-02-13T08:25:28Z","body":"@jonathandemoor unfortunately not at this time, sorry...","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/463104267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2135984784,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjEzNTk4NDc4NA==","url":"https://api.github.com/repos/grafana/k6/issues/events/2135984784","actor":{"login":"jonathandemoor","id":3025075,"node_id":"MDQ6VXNlcjMwMjUwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/3025075?v=4","gravatar_id":"","url":"https://api.github.com/users/jonathandemoor","html_url":"https://github.com/jonathandemoor","followers_url":"https://api.github.com/users/jonathandemoor/followers","following_url":"https://api.github.com/users/jonathandemoor/following{/other_user}","gists_url":"https://api.github.com/users/jonathandemoor/gists{/gist_id}","starred_url":"https://api.github.com/users/jonathandemoor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonathandemoor/subscriptions","organizations_url":"https://api.github.com/users/jonathandemoor/orgs","repos_url":"https://api.github.com/users/jonathandemoor/repos","events_url":"https://api.github.com/users/jonathandemoor/events{/privacy}","received_events_url":"https://api.github.com/users/jonathandemoor/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-02-13T08:25:28Z","performed_via_github_app":null},{"id":2135984785,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIxMzU5ODQ3ODU=","url":"https://api.github.com/repos/grafana/k6/issues/events/2135984785","actor":{"login":"jonathandemoor","id":3025075,"node_id":"MDQ6VXNlcjMwMjUwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/3025075?v=4","gravatar_id":"","url":"https://api.github.com/users/jonathandemoor","html_url":"https://github.com/jonathandemoor","followers_url":"https://api.github.com/users/jonathandemoor/followers","following_url":"https://api.github.com/users/jonathandemoor/following{/other_user}","gists_url":"https://api.github.com/users/jonathandemoor/gists{/gist_id}","starred_url":"https://api.github.com/users/jonathandemoor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonathandemoor/subscriptions","organizations_url":"https://api.github.com/users/jonathandemoor/orgs","repos_url":"https://api.github.com/users/jonathandemoor/repos","events_url":"https://api.github.com/users/jonathandemoor/events{/privacy}","received_events_url":"https://api.github.com/users/jonathandemoor/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-02-13T08:25:28Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/468579199","html_url":"https://github.com/grafana/k6/issues/581#issuecomment-468579199","issue_url":"https://api.github.com/repos/grafana/k6/issues/581","id":468579199,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODU3OTE5OQ==","user":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-01T08:05:51Z","updated_at":"2019-03-01T08:05:51Z","body":"On related note I just got a panic in the ws test: \r\n```\r\nok      github.com/loadimpact/k6/js/modules/k6/metrics  4.385s\r\npanic: runtime error: invalid memory address or nil pointer dereference [recovered]\r\n        panic: Panic at 4: runtime error: invalid memory address or nil pointer dereference [recovered]\r\n        panic: Panic at 4: runtime error: invalid memory address or nil pointer dereference [recovered]\r\n        panic: Panic at 7: Panic at 4: runtime error: invalid memory address or nil pointer dereference [recovered]\r\n        panic: Panic at 7: Panic at 4: runtime error: invalid memory address or nil pointer dereference [recovered]\r\n        panic: Panic at 7: Panic at 4: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x83cb53]\r\n\r\ngoroutine 6 [running]:\r\ntesting.tRunner.func1(0xc000132900)\r\n        /home/mstoykov/.gvm/gos/go1.11.1/src/testing/testing.go:792 +0x387\r\npanic(0x99bbc0, 0xc000a906f0)\r\n        /home/mstoykov/.gvm/gos/go1.11.1/src/runtime/panic.go:513 +0x1b9\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*Runtime).RunProgram.func1(0xc003085e10)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/runtime.go:880 +0x9b\r\npanic(0x99bbc0, 0xc000a906f0)\r\n        /home/mstoykov/.gvm/gos/go1.11.1/src/runtime/panic.go:513 +0x1b9\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm).try.func1(0xc0001daa90, 0x0, 0xc003085d10, 0x0, 0x0, 0x0, 0xc003085d68)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:364 +0x459\r\npanic(0x99bbc0, 0xc000a906e0)\r\n        /home/mstoykov/.gvm/gos/go1.11.1/src/runtime/panic.go:513 +0x1b9\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.AssertFunction.func1.1(0xc003084f80)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/runtime.go:1407 +0x9b\r\npanic(0x99bbc0, 0xc000a906e0)\r\n        /home/mstoykov/.gvm/gos/go1.11.1/src/runtime/panic.go:513 +0x1b9\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm).try.func1(0xc0001daa90, 0x1, 0xc003084e88, 0x4, 0x0, 0x1, 0xc003084ee0)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:364 +0x459\r\npanic(0x9a9640, 0x1139e60)\r\n        /home/mstoykov/.gvm/gos/go1.11.1/src/runtime/panic.go:513 +0x1b9\r\ngithub.com/loadimpact/k6/vendor/github.com/gorilla/websocket.(*Conn).WriteControl(0x0, 0x8, 0xc00089e158, 0x2, 0x2, 0xbf16569b8b8a907a, 0x463dda2b8, 0x114c640, 0x0, 0x0)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/gorilla/websocket/conn.go:412 +0x73\r\ngithub.com/loadimpact/k6/js/modules/k6/ws.(*Socket).closeConnection.func1()\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/js/modules/k6/ws/ws.go:434 +0x16d\r\nsync.(*Once).Do(0xc0004e2170, 0xc003084550)\r\n        /home/mstoykov/.gvm/gos/go1.11.1/src/sync/once.go:44 +0xb3\r\ngithub.com/loadimpact/k6/js/modules/k6/ws.(*Socket).closeConnection(0xc0004e2140, 0x3e9, 0x465eb6, 0x973b40)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/js/modules/k6/ws/ws.go:431 +0x76\r\ngithub.com/loadimpact/k6/js/modules/k6/ws.(*Socket).Close(0xc0004e2140, 0x116afc0, 0x0, 0x0)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/js/modules/k6/ws/ws.go:424 +0x3f\r\nreflect.callMethod(0xc0021720c0, 0xc0030846b0, 0xc003084698)\r\n        /home/mstoykov/.gvm/gos/go1.11.1/src/reflect/value.go:689 +0x180\r\nreflect.methodValueCall(0x116afc0, 0x0, 0x0, 0xc0014e6580, 0xc003084998, 0x4b4db9, 0xc000fa24e0, 0xc0021720c0, 0xc0014e65c0, 0x1800000018, ...)\r\n        /home/mstoykov/.gvm/gos/go1.11.1/src/reflect/asm_amd64.s:35 +0x42\r\nreflect.Value.call(0x971880, 0xc0021720c0, 0x13, 0xa52844, 0x4, 0x116afc0, 0x1, 0x0, 0xa50020, 0x1, ...)\r\n        /home/mstoykov/.gvm/gos/go1.11.1/src/reflect/value.go:447 +0x449\r\nreflect.Value.Call(0x971880, 0xc0021720c0, 0x13, 0x116afc0, 0x0, 0x0, 0x203000, 0x203000, 0xc0014e6540)\r\n        /home/mstoykov/.gvm/gos/go1.11.1/src/reflect/value.go:308 +0xa4\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*Runtime).wrapReflectFunc.func1(0xbb8420, 0xc0014e61c0, 0xc0004e8090, 0x0, 0x5, 0xc0004e80e0, 0x2)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/runtime.go:1153 +0x7c3\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm)._nativeCall(0xc0001daa90, 0xc0004e4210, 0x0)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:1826 +0x284\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.call.exec(0x0, 0xc0001daa90)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:1810 +0x4e3\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm).run(0xc0001daa90)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:288 +0x5d\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*funcObject).Call(0xc000bd6480, 0xbb8b00, 0x116ad20, 0xc000a90500, 0x1, 0x1, 0xc003084dd8, 0x40beb3)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/func.go:130 +0x2be\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*funcObject).Call-fm(0xbb8b00, 0x116ad20, 0xc000a90500, 0x1, 0x1, 0xa07200, 0xc0004e2140)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/builtin_function.go:120 +0x48\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.AssertFunction.func1.2()\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/runtime.go:1412 +0x96\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm).try(0xc0001daa90, 0xc003084ef8, 0x0)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:370 +0x10c\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.AssertFunction.func1(0xbb8b00, 0x116ad20, 0xc000a90500, 0x1, 0x1, 0x0, 0x0, 0x0, 0x0)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/runtime.go:1411 +0x10d\r\ngithub.com/loadimpact/k6/js/modules/k6/ws.(*WS).Connect(0x116afc0, 0xbb3da0, 0xc000209e60, 0xc00107e6a4, 0x1b, 0xc000a8ea30, 0x1, 0x1, 0x0, 0x0, ...)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/js/modules/k6/ws/ws.go:196 +0x70f\r\nreflect.Value.call(0x99bc20, 0x116afc0, 0x213, 0xa5489c, 0x9, 0xc000bdc410, 0x3, 0x3, 0xa0eac0, 0xc000a8ea40, ...)\r\n        /home/mstoykov/.gvm/gos/go1.11.1/src/reflect/value.go:447 +0x449\r\nreflect.Value.CallSlice(0x99bc20, 0x116afc0, 0x213, 0xc000bdc410, 0x3, 0x3, 0x194, 0x8, 0xc0030859c8)\r\n        /home/mstoykov/.gvm/gos/go1.11.1/src/reflect/value.go:321 +0xa4\r\ngithub.com/loadimpact/k6/js/common.Bind.func1(0xbb8420, 0xc00020afc0, 0xc000c389e0, 0x2, 0x4, 0xc0021887c0, 0x0)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/js/common/bridge.go:237 +0xa23\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm)._nativeCall(0xc0001daa90, 0xc000bd2f20, 0x2)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:1826 +0x284\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.call.exec(0x2, 0xc0001daa90)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:1810 +0x4e3\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm).run(0xc0001daa90)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:288 +0x5d\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm).run-fm()\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:375 +0x2a\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm).try(0xc0001daa90, 0xc003085d70, 0x0)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:370 +0x10c\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm).runTry(0xc0001daa90, 0xb376d0)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:375 +0x4e\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*Runtime).RunProgram(0xc000001b00, 0xc000c388a0, 0x0, 0x0, 0x0, 0x0)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/runtime.go:891 +0x1b7\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*Runtime).RunScript(0xc000001b00, 0x0, 0x0, 0xc00107e4e0, 0xc4, 0x0, 0x8000106, 0x0, 0xffffffffffffffff)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/runtime.go:870 +0x9b\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*Runtime).RunString(0xc000001b00, 0xc00107e4e0, 0xc4, 0xa5559a, 0xa, 0xc00107e4e0, 0xc4)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/runtime.go:859 +0x47\r\ngithub.com/loadimpact/k6/js/common.RunString(0xc000001b00, 0xa6f074, 0xc1, 0xc000052798, 0x47cb36, 0x5c78e2db, 0x14b40b0b)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/js/common/util.go:39 +0xf3\r\ngithub.com/loadimpact/k6/js/modules/k6/ws.TestSession.func1(0xc000132900)\r\n        /home/mstoykov/.gvm/pkgsets/go1.11.1/global/src/github.com/loadimpact/k6/js/modules/k6/ws/ws_test.go:122 +0x3f\r\ntesting.tRunner(0xc000132900, 0xc000201240)\r\n        /home/mstoykov/.gvm/gos/go1.11.1/src/testing/testing.go:827 +0xbf\r\ncreated by testing.(*T).Run\r\n        /home/mstoykov/.gvm/gos/go1.11.1/src/testing/testing.go:878 +0x353\r\nFAIL    github.com/loadimpact/k6/js/modules/k6/ws       8.876s\r\n```\r\nThis has never happened before and I do a lot of test runs :) I can't at the moment look into it but it might be relevant ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/468579199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-06T07:53:00Z","updated_at":"2019-03-06T07:53:00Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/882","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/882/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/882/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/882/events","html_url":"https://github.com/grafana/k6/issues/882","id":392218655,"node_id":"MDU6SXNzdWUzOTIyMTg2NTU=","number":882,"title":"Global JS event loops in every VU","user":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":345191760,"node_id":"MDU6TGFiZWwzNDUxOTE3NjA=","url":"https://api.github.com/repos/grafana/k6/labels/enhancement","name":"enhancement","color":"5319E7","default":true,"description":""},{"id":869282130,"node_id":"MDU6TGFiZWw4NjkyODIxMzA=","url":"https://api.github.com/repos/grafana/k6/labels/feature","name":"feature","color":"5319E7","default":false,"description":""},{"id":874927263,"node_id":"MDU6TGFiZWw4NzQ5MjcyNjM=","url":"https://api.github.com/repos/grafana/k6/labels/high%20prio","name":"high prio","color":"D93F0B","default":false,"description":""},{"id":949381702,"node_id":"MDU6TGFiZWw5NDkzODE3MDI=","url":"https://api.github.com/repos/grafana/k6/labels/js-compat","name":"js-compat","color":"ea8394","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/grafana/k6/milestones/21","html_url":"https://github.com/grafana/k6/milestone/21","labels_url":"https://api.github.com/repos/grafana/k6/milestones/21/labels","id":7544121,"node_id":"MI_kwDOAz4Wr84Acx05","number":21,"title":"v0.37.0","description":"","creator":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":53,"state":"closed","created_at":"2022-01-05T13:29:43Z","updated_at":"2022-03-15T11:49:17Z","due_on":"2022-03-14T07:00:00Z","closed_at":"2022-03-15T11:49:17Z"},"comments":7,"created_at":"2018-12-18T15:52:14Z","updated_at":"2022-03-02T16:40:28Z","closed_at":"2022-03-02T16:40:28Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"To actually support a lot of cool features and to achieve better compatibility with a ton of JavaScript APIs and libraries out there, we need to be able to support asynchronous execution inside of VUs via a global event loop. We have a [localized one](https://github.com/loadimpact/k6/blob/b154f449b8c4a67929f36cba07f58a218acd99e9/js/modules/k6/ws/ws.go#L237-L323) in the current websocket implementation, but even that's not enough in a lot of cases.\r\n\r\nThings which will benefit from or need an event loop:\r\n- Better websockets (https://github.com/loadimpact/k6/issues/865)\r\n- raw TCP/UDP sockets\r\n- gRPC (https://github.com/loadimpact/k6/issues/441) streaming + multiple concurrent unary requests from a single VU (i.e. a `http.batch()` equivalent)\r\n- HTTP SSE (Server-Sent Events) (https://github.com/loadimpact/k6/issues/746)\r\n- HTTP long polling (https://github.com/loadimpact/k6/issues/1122)\r\n- HTTP/2 server push (https://github.com/loadimpact/k6/issues/881)\r\n- and any asynchronous protocols, including a lot of messaging ones\r\n- `setTimeout()`, `setInterval()`, etc. (https://github.com/loadimpact/k6/issues/332)\r\n- `async`/`await` (https://github.com/loadimpact/k6/issues/779)\r\n- polyfills/mocks (hopefully in JS only, no Go code changes needed) for different browser APIs like [`XMLHttpRequest`](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest) or [`Fetch`](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API), so we have a broader support for browser JS libraries and browserified node libraries\r\n- allow us to eventually mock some parts of the node API, if we want to\r\n- likely other nice things, considering that the most of the JS ecosystem is kind of based on it...\r\n\r\nOf course, the current looping VU model of k6 will necessitate certain restrictions in the way event loops are normally implemented. For one, each VU in k6 has its own separate JS runtime, so each VU will also need to have its own event loop.\r\n\r\nAlso, events probably shouldn't cross over between iterations of the same VU, since that would be very confusing and likely quite error-prone, especially with the arrival-rate based executor. Memory leaks would also be a concern... And even if cross-iteration events are easy to implement and we decide to allow them, I think they shouldn't be enabled by default. So some type of configurable post-iteration timeout option should probably be introduced that will be used to control how long k6 will wait for queued events to fire and finish up before it discards them and continues to the next iteration.\r\n\r\nAs a simple event loop implementation we may look to for inspiration and ideas, the author of [goja](https://github.com/dop251/goja) (the JS runtime k6 uses) also has this repo: https://github.com/dop251/goja_nodejs\r\n\r\n","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/882/reactions","total_count":19,"+1":19,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/882/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-16T07:13:38Z","updated_at":"2019-08-16T07:13:38Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/1116","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/1116/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/1116/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/1116/events","html_url":"https://github.com/grafana/k6/issues/1116","id":481476208,"node_id":"MDU6SXNzdWU0ODE0NzYyMDg=","number":1116,"title":"Panic in websocket handling","user":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":345191758,"node_id":"MDU6TGFiZWwzNDUxOTE3NTg=","url":"https://api.github.com/repos/grafana/k6/labels/bug","name":"bug","color":"b60205","default":true,"description":""},{"id":874927263,"node_id":"MDU6TGFiZWw4NzQ5MjcyNjM=","url":"https://api.github.com/repos/grafana/k6/labels/high%20prio","name":"high prio","color":"D93F0B","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/grafana/k6/milestones/7","html_url":"https://github.com/grafana/k6/milestone/7","labels_url":"https://api.github.com/repos/grafana/k6/milestones/7/labels","id":4536026,"node_id":"MDk6TWlsZXN0b25lNDUzNjAyNg==","number":7,"title":"v0.26.0","description":"","creator":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":109,"state":"closed","created_at":"2019-07-31T08:43:47Z","updated_at":"2022-10-03T09:45:50Z","due_on":null,"closed_at":"2020-04-22T12:31:51Z"},"comments":2,"created_at":"2019-08-16T07:13:38Z","updated_at":"2019-08-29T08:27:46Z","closed_at":"2019-08-29T08:27:46Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"We saw this panic in a very complicated websocket script:\r\n```\r\n*errors.errorString: panic: runtime error: invalid memory address or nil pointer dereference [recovered]\r\n\tpanic: Panic at 28: runtime error: invalid memory address or nil pointer dereference [recovered]\r\n\tpanic: Panic at 28: runtime error: invalid memory address or nil pointer dereference [recovered]\r\n\tpanic: Panic at 106: Panic at 28: runtime error: invalid memory address or nil pointer dereference [recovered]\r\n\tpanic: Panic at 35: Panic at 106: Panic at 28: runtime error: invalid memory address or nil pointer dereference [recovered]\r\n\tpanic: Panic at 35: Panic at 106: Panic at 28: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x10 pc=0xc21917]\r\n\r\ngoroutine 472 [running]:\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.AssertFunction.func1.1(0xc08e027d68)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/runtime.go:1407 +0x9b\r\npanic(0xd3ab80, 0xc085e41490)\r\n\t/usr/lib/go/src/runtime/panic.go:522 +0x1b5\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm).try.func1(0xc00f314750, 0x0, 0xc08e027c70, 0x0, 0x0, 0x0, 0xc08e027cc8)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:364 +0x48e\r\npanic(0xd3ab80, 0xc085dd0d40)\r\n\t/usr/lib/go/src/runtime/panic.go:522 +0x1b5\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm).try.func1(0xc00f314750, 0x1, 0xc08e027958, 0xa, 0x0, 0x0, 0xc08e0279b0)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:364 +0x48e\r\npanic(0xd3ab80, 0xc085dd0d30)\r\n\t/usr/lib/go/src/runtime/panic.go:522 +0x1b5\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.AssertFunction.func1.1(0xc08e026cf8)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/runtime.go:1407 +0x9b\r\npanic(0xd3ab80, 0xc085dd0d30)\r\n\t/usr/lib/go/src/runtime/panic.go:522 +0x1b5\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm).try.func1(0xc00f314750, 0x3, 0xc08e026c00, 0x11, 0x0, 0x0, 0xc08e026c58)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:364 +0x48e\r\npanic(0xd4f720, 0x19d2580)\r\n\t/usr/lib/go/src/runtime/panic.go:522 +0x1b5\r\ngithub.com/loadimpact/k6/vendor/github.com/gorilla/websocket.(*Conn).WriteMessage(0x0, 0x1, 0xc0428e4d80, 0xba, 0xc0, 0xc0, 0x18)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/gorilla/websocket/conn.go:732 +0x37\r\ngithub.com/loadimpact/k6/js/modules/k6/ws.(*Socket).Send(0xc084e49b80, 0xc0428e4cc0, 0xba)\r\n\t/home/go/src/github.com/loadimpact/k6/js/modules/k6/ws/ws.go:349 +0xde\r\nreflect.callMethod(0xc081abde40, 0xc08e026508, 0xc08e0264f0)\r\n\t/usr/lib/go/src/reflect/value.go:690 +0x182\r\nreflect.methodValueCall(0xc0428e4cc0, 0xba, 0xc07759a750, 0xc085dd0d20, 0xc08e026748, 0x4bb8e1, 0xc0720b6a50, 0xc081abde40, 0xc07759a750, 0x1000000010, ...)\r\n\t/usr/lib/go/src/reflect/asm_amd64.s:35 +0x42\r\nreflect.Value.call(0xcfd6c0, 0xc081abde40, 0x13, 0xe6d4ff, 0x4, 0xc0850b7380, 0x1, 0x1, 0xe65740, 0x1098601, ...)\r\n\t/usr/lib/go/src/reflect/value.go:447 +0x461\r\nreflect.Value.Call(0xcfd6c0, 0xc081abde40, 0x13, 0xc0850b7380, 0x1, 0x1, 0xc085dd0d20, 0x98, 0x0)\r\n\t/usr/lib/go/src/reflect/value.go:308 +0xa4\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*Runtime).wrapReflectFunc.func1(0x1098680, 0xc0850b6c40, 0xc08c1e0750, 0x1, 0x19, 0x1098860, 0xc085dd0d10)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/runtime.go:1153 +0x791\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm)._nativeCall(0xc00f314750, 0xc0800a8210, 0x1)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:1826 +0x29a\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.call.exec(0x1, 0xc00f314750)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:1810 +0x4a4\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm).run(0xc00f314750)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:288 +0x51\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*funcObject).Call(0xc0887926c0, 0x1098cc0, 0x1a08120, 0xc085dd0a20, 0x1, 0x1, 0xc08e026b50, 0xc08befd980)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/func.go:130 +0x2c4\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.AssertFunction.func1.2()\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/runtime.go:1412 +0x96\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm).try(0xc00f314750, 0xc08e026c70, 0x0)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:370 +0x10d\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.AssertFunction.func1(0x1098cc0, 0x1a08120, 0xc085dd0a20, 0x1, 0x1, 0x0, 0x0, 0x0, 0x0)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/runtime.go:1411 +0x10d\r\ngithub.com/loadimpact/k6/js/modules/k6/ws.(*WS).Connect(0x1a08450, 0x108b5e0, 0xc088217e30, 0xc00049c300, 0x3c, 0xc085080f40, 0x2, 0x2, 0x0, 0x0, ...)\r\n\t/home/go/src/github.com/loadimpact/k6/js/modules/k6/ws/ws.go:196 +0x7af\r\nreflect.Value.call(0xd3aee0, 0x1a08450, 0x213, 0xe7288b, 0x9, 0xc0878fcc80, 0x3, 0x3, 0xde3e80, 0xc085d92b60, ...)\r\n\t/usr/lib/go/src/reflect/value.go:447 +0x461\r\nreflect.Value.CallSlice(0xd3aee0, 0x1a08450, 0x213, 0xc0878fcc80, 0x3, 0x3, 0x194, 0xc08e027628, 0x8b5d26)\r\n\t/usr/lib/go/src/reflect/value.go:321 +0xa4\r\ngithub.com/loadimpact/k6/js/common.Bind.func1(0x1098680, 0xc0104e9200, 0xc08c1e06e0, 0x3, 0x20, 0xc0882498c0, 0xc08e027840)\r\n\t/home/go/src/github.com/loadimpact/k6/js/common/bridge.go:239 +0x78a\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm)._nativeCall(0xc00f314750, 0xc088ae2dc0, 0x3)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:1826 +0x29a\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.call.exec(0x3, 0xc00f314750)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:1810 +0x4a4\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm).run(0xc00f314750)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:288 +0x51\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm).try(0xc00f314750, 0xc08e0279b8, 0x0)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:370 +0x10d\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm).runTry(0xc00f314750, 0xd35a40)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:375 +0x4e\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.try.exec(0x13, 0x0, 0xc00f314750)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:2245 +0x51\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm).run(0xc00f314750)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:288 +0x51\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*funcObject).Call(0xc0105752c0, 0x1098cc0, 0x1a08120, 0xc085d929a0, 0x1, 0x1, 0xc00fcc5728, 0xc08befd980)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/func.go:130 +0x2c4\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.AssertFunction.func1.2()\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/runtime.go:1412 +0x96\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.(*vm).try(0xc00f314750, 0xc08e027ce0, 0x0)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/vm.go:370 +0x10d\r\ngithub.com/loadimpact/k6/vendor/github.com/dop251/goja.AssertFunction.func1(0x1098cc0, 0x1a08120, 0xc085d929a0, 0x1, 0x1, 0x0, 0x0, 0x0, 0x0)\r\n\t/home/go/src/github.com/loadimpact/k6/vendor/github.com/dop251/goja/runtime.go:1411 +0x10d\r\ngithub.com/loadimpact/k6/js.(*VU).runFn(0xc01058c2d0, 0x108b520, 0xc0653b7bc0, 0xc0036ae300, 0xc010578a00, 0xc085d929a0, 0x1, 0x1, 0x1098cc0, 0xc08e027f30, ...)\r\n\t/home/go/src/github.com/loadimpact/k6/js/runner.go:443 +0x394\r\ngithub.com/loadimpact/k6/js.(*VU).RunOnce(0xc01058c2d0, 0x108b520, 0xc0653b7bc0, 0x0, 0x0)\r\n\t/home/go/src/github.com/loadimpact/k6/js/runner.go:403 +0x1f0\r\ngithub.com/loadimpact/k6/core/local.(*vuHandle).run(0xc00f530ec0, 0xc00007a240, 0xc0026dc8a0, 0xc00050cba0)\r\n\t/home/go/src/github.com/loadimpact/k6/core/local/local.go:70 +0x145\r\n```\r\n\r\nI can't reproduce it with a simple test script, and I can't paste the original script, since it's very complex and has private data in it... :disappointed:  Potentially connected: https://github.com/loadimpact/k6/issues/581#issuecomment-468579199","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/1116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/1116/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":2587456878,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDI1ODc0NTY4Nzg=","url":"https://api.github.com/repos/grafana/k6/issues/events/2587456878","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2019-08-27T15:09:58Z","milestone":{"title":"v0.26.0"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/538012182","html_url":"https://github.com/grafana/k6/issues/581#issuecomment-538012182","issue_url":"https://api.github.com/repos/grafana/k6/issues/581","id":538012182,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODAxMjE4Mg==","user":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-03T16:06:50Z","updated_at":"2019-10-03T16:06:50Z","body":"We already have a [WS close test](https://github.com/loadimpact/k6/blob/1d6fb7f668aa089b374ee8ca35de2a34d77d29ce/js/modules/k6/ws/ws_test.go#L262-L276) that checks if the `close` handler is called, but it initiates the close from the client side, so it doesn't reproduce this issue.\r\n\r\nIt seems that k6 is not properly handling a server-initiated close. Will look into this.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/538012182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2684617716,"node_id":"MDEzOkFzc2lnbmVkRXZlbnQyNjg0NjE3NzE2","url":"https://api.github.com/repos/grafana/k6/issues/events/2684617716","actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2019-10-03T16:06:59Z","assignee":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":2688112913,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI2ODgxMTI5MTM=","url":"https://api.github.com/repos/grafana/k6/issues/events/2688112913","actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d34bce5a43f096de803b7b44c165c618391cb787","commit_url":"https://api.github.com/repos/grafana/k6/commits/d34bce5a43f096de803b7b44c165c618391cb787","created_at":"2019-10-04T17:15:43Z","performed_via_github_app":null},{"actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-04T17:33:24Z","updated_at":"2019-10-04T17:33:24Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/1186","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/1186/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/1186/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/1186/events","html_url":"https://github.com/grafana/k6/pull/1186","id":502758060,"node_id":"MDExOlB1bGxSZXF1ZXN0MzI0Nzc5ODU3","number":1186,"title":"Correctly handle server-initiated WebSocket close","user":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/grafana/k6/milestones/7","html_url":"https://github.com/grafana/k6/milestone/7","labels_url":"https://api.github.com/repos/grafana/k6/milestones/7/labels","id":4536026,"node_id":"MDk6TWlsZXN0b25lNDUzNjAyNg==","number":7,"title":"v0.26.0","description":"","creator":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":109,"state":"closed","created_at":"2019-07-31T08:43:47Z","updated_at":"2022-10-03T09:45:50Z","due_on":null,"closed_at":"2020-04-22T12:31:51Z"},"comments":3,"created_at":"2019-10-04T17:33:24Z","updated_at":"2019-10-28T08:42:38Z","closed_at":"2019-10-28T08:42:33Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/grafana/k6/pulls/1186","html_url":"https://github.com/grafana/k6/pull/1186","diff_url":"https://github.com/grafana/k6/pull/1186.diff","patch_url":"https://github.com/grafana/k6/pull/1186.patch","merged_at":"2019-10-28T08:42:33Z"},"body":"This avoids a hanging behavior when the server closes the WS connection, either via a [control close frame](https://tools.ietf.org/html/rfc6455#section-5.5.1) or by closing the connection prematurely without sending the control frame (deviating from the WS protocol).\r\n\r\nIf the control close frame is not received but the connection is closed, the error (`close 1006 abnormal closure): unexpected EOF`) will be returned to the user's WS error handler, as it indicates an issue with the server.\r\n\r\nThe user-specified close handler should be called in either case now.\r\n\r\nCloses #581","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/1186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/1186/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":2736445345,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI3MzY0NDUzNDU=","url":"https://api.github.com/repos/grafana/k6/issues/events/2736445345","actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d2a699975595c273ac7f8d0093faa339c474d8f6","commit_url":"https://api.github.com/repos/grafana/k6/commits/d2a699975595c273ac7f8d0093faa339c474d8f6","created_at":"2019-10-23T10:07:54Z","performed_via_github_app":null},{"id":2743762863,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI3NDM3NjI4NjM=","url":"https://api.github.com/repos/grafana/k6/issues/events/2743762863","actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"7d1e45d1a20229130e840ef24421624eb2ea6c04","commit_url":"https://api.github.com/repos/grafana/k6/commits/7d1e45d1a20229130e840ef24421624eb2ea6c04","created_at":"2019-10-25T10:42:16Z","performed_via_github_app":null},{"id":2747672509,"node_id":"MDExOkNsb3NlZEV2ZW50Mjc0NzY3MjUwOQ==","url":"https://api.github.com/repos/grafana/k6/issues/events/2747672509","actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-10-28T08:42:33Z","state_reason":null,"performed_via_github_app":null},{"id":2747672560,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI3NDc2NzI1NjA=","url":"https://api.github.com/repos/grafana/k6/issues/events/2747672560","actor":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"c2d73ba070b5223d60e784401e9bda8d634440fe","commit_url":"https://api.github.com/repos/grafana/k6/commits/c2d73ba070b5223d60e784401e9bda8d634440fe","created_at":"2019-10-28T08:42:34Z","performed_via_github_app":null}]