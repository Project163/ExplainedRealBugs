{"url":"https://api.github.com/repos/grafana/k6/issues/1462","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/1462/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/1462/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/1462/events","html_url":"https://github.com/grafana/k6/issues/1462","id":623148094,"node_id":"MDU6SXNzdWU2MjMxNDgwOTQ=","number":1462,"title":"k6 path resolution doesn't work from CWD when running from stdin","user":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":345191758,"node_id":"MDU6TGFiZWwzNDUxOTE3NTg=","url":"https://api.github.com/repos/grafana/k6/labels/bug","name":"bug","color":"b60205","default":true,"description":""},{"id":874929364,"node_id":"MDU6TGFiZWw4NzQ5MjkzNjQ=","url":"https://api.github.com/repos/grafana/k6/labels/lower%20prio","name":"lower prio","color":"fef2c0","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-05-22T11:37:12Z","updated_at":"2024-04-08T07:51:12Z","closed_at":"2024-04-08T07:51:12Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Environment\r\n- k6 version: 0.26.2\r\n- OS and version: Linux (though this probably happens on other OSes as well)\r\n\r\n## Expected Behavior\r\nIf I have the following as `test.js`:\r\n```js\r\nexport var test = 123;\r\n```\r\n\r\nand if I have this as `script.js`:\r\n```js\r\nimport { test } from \"./test.js\"\r\n\r\nexport default function (data) {\r\n    console.log(test);\r\n}\r\n```\r\nAnd both of these files are in the same folder, I should be able to execute them both by running `k6 run ./script.js` and `k6 run - <./script.js`, and get `123` printed either way.\r\n\r\n## Actual Behavior\r\n\r\nInstead, only the first command works. The second gives the following error:\r\n```\r\nGoError: The moduleSpecifier \"file:///test.js\" couldn't be found on local disk. Make sure that you've specified the right path to the file. If you're running k6 using the Docker image make sure you have mounted the local directory (-v /local/path/:/inside/docker/path) containing your script and modules so that they're accessible by k6 from inside of the container, see https://docs.k6.io/v1.0/docs/modules#section-using-local-modules-with-docker. \r\n```\r\n\r\nFor some reason, it's looking at the import file in the root folder.\r\n\r\n","closed_by":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/1462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/1462/timeline","performed_via_github_app":null,"state_reason":"completed"}