[{"id":2033359339,"node_id":"MDEyOkxhYmVsZWRFdmVudDIwMzMzNTkzMzk=","url":"https://api.github.com/repos/grafana/k6/issues/events/2033359339","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-12-18T15:52:15Z","label":{"name":"enhancement","color":"84b6eb"},"performed_via_github_app":null},{"id":2033359340,"node_id":"MDEyOkxhYmVsZWRFdmVudDIwMzMzNTkzNDA=","url":"https://api.github.com/repos/grafana/k6/issues/events/2033359340","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-12-18T15:52:15Z","label":{"name":"feature","color":"d93f0b"},"performed_via_github_app":null},{"id":2033359341,"node_id":"MDEyOkxhYmVsZWRFdmVudDIwMzMzNTkzNDE=","url":"https://api.github.com/repos/grafana/k6/issues/events/2033359341","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-12-18T15:52:15Z","label":{"name":"js-compat","color":"ea8394"},"performed_via_github_app":null},{"actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-20T04:42:23Z","updated_at":"2019-01-20T04:42:23Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/441","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/441/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/441/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/441/events","html_url":"https://github.com/grafana/k6/issues/441","id":286331238,"node_id":"MDU6SXNzdWUyODYzMzEyMzg=","number":441,"title":"Support for gRPC protocol","user":{"login":"robingustafsson","id":1792533,"node_id":"MDQ6VXNlcjE3OTI1MzM=","avatar_url":"https://avatars.githubusercontent.com/u/1792533?v=4","gravatar_id":"","url":"https://api.github.com/users/robingustafsson","html_url":"https://github.com/robingustafsson","followers_url":"https://api.github.com/users/robingustafsson/followers","following_url":"https://api.github.com/users/robingustafsson/following{/other_user}","gists_url":"https://api.github.com/users/robingustafsson/gists{/gist_id}","starred_url":"https://api.github.com/users/robingustafsson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robingustafsson/subscriptions","organizations_url":"https://api.github.com/users/robingustafsson/orgs","repos_url":"https://api.github.com/users/robingustafsson/repos","events_url":"https://api.github.com/users/robingustafsson/events{/privacy}","received_events_url":"https://api.github.com/users/robingustafsson/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":869282130,"node_id":"MDU6TGFiZWw4NjkyODIxMzA=","url":"https://api.github.com/repos/grafana/k6/labels/feature","name":"feature","color":"5319E7","default":false,"description":""},{"id":874927263,"node_id":"MDU6TGFiZWw4NzQ5MjcyNjM=","url":"https://api.github.com/repos/grafana/k6/labels/high%20prio","name":"high prio","color":"D93F0B","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/grafana/k6/milestones/11","html_url":"https://github.com/grafana/k6/milestone/11","labels_url":"https://api.github.com/repos/grafana/k6/milestones/11/labels","id":5853332,"node_id":"MDk6TWlsZXN0b25lNTg1MzMzMg==","number":11,"title":"v0.29.0","description":"","creator":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":47,"state":"closed","created_at":"2020-09-08T07:26:34Z","updated_at":"2021-01-19T11:53:02Z","due_on":"2020-11-09T08:00:00Z","closed_at":"2020-11-11T14:39:15Z"},"comments":34,"created_at":"2018-01-05T16:08:04Z","updated_at":"2020-10-21T08:42:33Z","closed_at":"2020-10-21T08:42:33Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Will happily take suggestions for what a gRPC JS API should look like. I guess https://grpc.io/docs/tutorials/basic/node.html and https://github.com/grpc/grpc-node would be good starting points.\r\n\r\n----\r\n\r\n[Added on May 29th, 2019]\r\n\r\nTo enable testing of more parts of modern software systems, microservices to be more specific, k6 needs to support gRPC. The implementation should support both simple RPC (request/response calls, \"part/iteration 1\") as well as streaming (client-side, server-side and bi-directional, \"part/iteration 2\").\r\n\r\n## Authentication\r\nThe implementation should implement the following authentication mechanisms:\r\n\r\n*Transport*:\r\n- Insecure: no authentication\r\n- TLS: make use of the APIs implemented as part of the PKI crypto issue for loading keys.\r\n\r\n*Per-RPC*:\r\n- Google OAuth2\r\n\r\n## Request/Response RPC\r\nThe expected JS API would look something like this for the request/response RPC part:\r\n\r\n```js\r\nimport grpc from “k6/grpc”;\r\n\r\nlet proto = open(\"EchoService.proto\");\r\nlet client = new grpc.Client(proto, {server: \"localhost:50051\", credentials: {...}});\r\n\r\nexport default function() {\r\n    let res = client.ping({ message: \"Hello gRPC World!\" });\r\n    check(res, {\r\n        \"is successful\": (r) => r.status === grpc.STATUS_OK\r\n    });\r\n}\r\n```\r\n\r\n## Additional changes\r\nThis would require the following changes to k6:\r\n- Add support for a new protocol “grpc” as a JS module “k6/grpc”\r\n- Add support for metrics tracking of key gRPC statistics:\r\n    - DNS lookup, Connect, TLS Handshake, Latency & Response time: Trend\r\n        - Tags:\r\n            - \"service\": the name of the service called\r\n            - \"method\": the service method called\r\n            - \"rpc_type\": the type of RPC call (one of \"simple\", \"server-streaming\", \"client-streaming\" or \"bi-streaming\")\r\n            - \"status\": the response status code of a RPC call\r\n            - \"request_message\": the name of the request message\r\n            - \"response_message\": the name of the response message\r\n    - Requests/second: Rate\r\n    - Active streams: Gauge\r\n- The response object of a RPC call should contain the following properties:\r\n    - \"service\": the name of the service called\r\n    - \"method\": the service method called\r\n    - \"rpc_type\": the type of RPC call (one of \"simple\", \"server-streaming\", \"client-streaming\" or \"bi-streaming\")\r\n    - \"status\": the response status code of a RPC call\r\n    - \"message\": the response message as a JS Object\r\n    - \"request.message\": the request message as a JS Object\r\n\r\n## Resources\r\n- [gRPC docs](https://grpc.io/)\r\n- Go library for reflecting Protocol Buffer files (.proto) and creating bindings dynamically: https://github.com/jhump/protoreflect","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/441/reactions","total_count":38,"+1":34,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":4,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/441/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/469999373","html_url":"https://github.com/grafana/k6/issues/882#issuecomment-469999373","issue_url":"https://api.github.com/repos/grafana/k6/issues/882","id":469999373,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTk5OTM3Mw==","user":{"login":"ofauchon","id":561441,"node_id":"MDQ6VXNlcjU2MTQ0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/561441?v=4","gravatar_id":"","url":"https://api.github.com/users/ofauchon","html_url":"https://github.com/ofauchon","followers_url":"https://api.github.com/users/ofauchon/followers","following_url":"https://api.github.com/users/ofauchon/following{/other_user}","gists_url":"https://api.github.com/users/ofauchon/gists{/gist_id}","starred_url":"https://api.github.com/users/ofauchon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ofauchon/subscriptions","organizations_url":"https://api.github.com/users/ofauchon/orgs","repos_url":"https://api.github.com/users/ofauchon/repos","events_url":"https://api.github.com/users/ofauchon/events{/privacy}","received_events_url":"https://api.github.com/users/ofauchon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-06T07:30:09Z","updated_at":"2019-03-06T07:30:09Z","body":"Hi na,\r\n\r\nDo you already have an implementation of a simple event loop in k6 ?\r\n\r\nI'd be interested in working on a http sse implementation that can callback or send events to main js code.\r\n\r\nThanks\r\nOlivier\r\n ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/469999373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ofauchon","id":561441,"node_id":"MDQ6VXNlcjU2MTQ0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/561441?v=4","gravatar_id":"","url":"https://api.github.com/users/ofauchon","html_url":"https://github.com/ofauchon","followers_url":"https://api.github.com/users/ofauchon/followers","following_url":"https://api.github.com/users/ofauchon/following{/other_user}","gists_url":"https://api.github.com/users/ofauchon/gists{/gist_id}","starred_url":"https://api.github.com/users/ofauchon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ofauchon/subscriptions","organizations_url":"https://api.github.com/users/ofauchon/orgs","repos_url":"https://api.github.com/users/ofauchon/repos","events_url":"https://api.github.com/users/ofauchon/events{/privacy}","received_events_url":"https://api.github.com/users/ofauchon/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/470005125","html_url":"https://github.com/grafana/k6/issues/882#issuecomment-470005125","issue_url":"https://api.github.com/repos/grafana/k6/issues/882","id":470005125,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MDAwNTEyNQ==","user":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-06T07:53:00Z","updated_at":"2019-03-06T07:53:00Z","body":"Thanks, @ofauchon! There's a simple event loop implementation from goja's author [here](https://github.com/dop251/goja_nodejs/tree/master/eventloop), but I haven't investigated how easy it would be to integrate something like it into k6 architecture. I assume there's some substantial refactoring involved...\r\n\r\nWe currently have a very localized event loop in k6 for the websocket handling code [here](https://github.com/loadimpact/k6/blob/0b1b25949256544226cbe3641ad8024c06ef3420/js/modules/k6/ws/ws.go#L237-L323), but unfortunately that type of localized event loop [doesn't scale](https://github.com/loadimpact/k6/issues/865) very well and it has some [other issues](https://github.com/loadimpact/k6/issues/581#issuecomment-468579199), which is why we're pursuing global event loops.  ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/470005125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2183310479,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjE4MzMxMDQ3OQ==","url":"https://api.github.com/repos/grafana/k6/issues/events/2183310479","actor":{"login":"ofauchon","id":561441,"node_id":"MDQ6VXNlcjU2MTQ0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/561441?v=4","gravatar_id":"","url":"https://api.github.com/users/ofauchon","html_url":"https://github.com/ofauchon","followers_url":"https://api.github.com/users/ofauchon/followers","following_url":"https://api.github.com/users/ofauchon/following{/other_user}","gists_url":"https://api.github.com/users/ofauchon/gists{/gist_id}","starred_url":"https://api.github.com/users/ofauchon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ofauchon/subscriptions","organizations_url":"https://api.github.com/users/ofauchon/orgs","repos_url":"https://api.github.com/users/ofauchon/repos","events_url":"https://api.github.com/users/ofauchon/events{/privacy}","received_events_url":"https://api.github.com/users/ofauchon/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-03-06T07:53:00Z","performed_via_github_app":null},{"id":2183310480,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIxODMzMTA0ODA=","url":"https://api.github.com/repos/grafana/k6/issues/events/2183310480","actor":{"login":"ofauchon","id":561441,"node_id":"MDQ6VXNlcjU2MTQ0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/561441?v=4","gravatar_id":"","url":"https://api.github.com/users/ofauchon","html_url":"https://github.com/ofauchon","followers_url":"https://api.github.com/users/ofauchon/followers","following_url":"https://api.github.com/users/ofauchon/following{/other_user}","gists_url":"https://api.github.com/users/ofauchon/gists{/gist_id}","starred_url":"https://api.github.com/users/ofauchon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ofauchon/subscriptions","organizations_url":"https://api.github.com/users/ofauchon/orgs","repos_url":"https://api.github.com/users/ofauchon/repos","events_url":"https://api.github.com/users/ofauchon/events{/privacy}","received_events_url":"https://api.github.com/users/ofauchon/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-03-06T07:53:00Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/496410546","html_url":"https://github.com/grafana/k6/issues/882#issuecomment-496410546","issue_url":"https://api.github.com/repos/grafana/k6/issues/882","id":496410546,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NjQxMDU0Ng==","user":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-05-28T08:07:38Z","updated_at":"2019-05-28T09:19:42Z","body":"After watching [this explanation](https://www.youtube.com/watch?v=8aGhZQkoFbQ) of how the event loop works in V8, I am of the opinion we should probably get started with this in the most simple way possible:\r\nWe add setTimeout (and family), that adds to a `queue`. \r\nAnd the iterations works as :\r\n1. When the `default` function ends we check the queue or if there is anything that will be added to the queue and get it (or wait for it to get added)\r\n2. repeat until nothing in queue or to be added\r\n3. end current iteration\r\n\r\nThis has the problem that we do not add a way to make an http request asyncly. We should probably just add functions with callbacks on them that does this as is [XMLHttpRequest](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest) as well as XMLHttpRequest?\r\n\r\nAlternatively we can make it possible that on golang calls (http.get for example) k6 checks the queue and possibly starts executing from it. This will need some way of ... copying the stack or creating new stacks for the JS VM ? It will also be complicated as we can touch JS values from inside golang's code and we do it .. for various reasons. As a whole this approach will be more golangish and ... arguably better but it will also be very non-JS and I am of the opinion we should **NOT** do it, but instead be as JSier as possible in order for more libraries to work out of the box. \r\n\r\nThis will mean that we will need to change/add the http and the ws api to be async. This can probably be done by adding a callback function to the parameters of the `http.*` functions (the ws api will need a rewrite) which if present will make the call async? \r\n\r\n\r\nThere is definitely a lot more to be discussed and thought but I think it is about time we make at least some experimental implementation. ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/496410546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/497241202","html_url":"https://github.com/grafana/k6/issues/882#issuecomment-497241202","issue_url":"https://api.github.com/repos/grafana/k6/issues/882","id":497241202,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NzI0MTIwMg==","user":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-05-30T07:55:21Z","updated_at":"2019-05-30T07:55:21Z","body":"> we should probably get started with this in the most simple way possible\r\n\r\nI'd usually agree, but in my head, we should start not with the absolute simplest implementation possible, but figure out roughly what we want and start with an exploratory (i.e. simple and potentially throwaway) implementation that covers our initial list of requirements, so we can see where we're having issues and what's missing.\r\n\r\nSpecifically, due to the current k6 architecture, I think it's likely a hard requirement for us to have a way to restrict the execution of event loop jobs at some point. It's still unclear to me whether that point is after each iteration is done or after a scheduler/executor is done, but there should be some sort of a timeout after which any outstanding event loop jobs are killed and discarded. And maybe a simple `Stop()` (like the one in the example event loop [here](https://github.com/dop251/goja_nodejs/blob/master/eventloop/eventloop.go#L92)) would be enough, or maybe we'll need more elaborate constructs - for example with contexts and such. \r\n\r\nLike everything else with this issue, that's still not clear to me, thus I think we'll probably have to throw away our first implementation :smile: \r\n\r\n> We add setTimeout (and family), that adds to a `queue`. \r\n> And the iterations works as :\r\n> 1. When the `default` function ends we check the queue or if there is anything that will be added to the queue and get it (or wait for it to get added)\r\n> 2. repeat until nothing in queue or to be added\r\n> 3. end current iteration\r\n\r\nThis seems reasonable as a start, though I think we should investigate whether there are other opportunities for working on (i.e. executing outstanding events from) the event loop. \r\n\r\nSpecifically, I think it's probably a bad idea to try to clear the event loop when we're doing HTTP requests, simply because k6 is a load testing tool and it's not very acceptable for us to delay HTTP requests. Which can happen, if some event takes longer to complete than the HTTP request during which we scheduled it. `sleep()` on the other hand seems like a nice place where we can try and execute some outstanding tasks from the event loop.\r\n\r\n> This has the problem that we do not add a way to make an http request asyncly. We should probably just add functions with callbacks on them that does this as is XMLHttpRequest as well as XMLHttpRequest?\r\n> Alternatively we can make it possible that on golang calls (http.get for example) k6 checks the queue and possibly starts executing from it. \r\n\r\nI'm not sure callbacks are the best way to go about here. Instead, if we add a new `async: true/false` option to the [`http.Params` object](https://docs.k6.io/docs/params-k6http), we can have the `http.{get,post,request,batch,...}` return a promise if `async` is true and its normal response when `async` is false. That way, the resulting k6 API will be both backwards compatible and a lot more usable and composable. And we can also re-implement the `XMLHttpRequest` and the newer [`Fetch` API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) as pure JS shims that wrap around the k6 `http` module. \r\n\r\nUnfortunately, for that functionality, we'd probably need to extend goja with native support for promises... That shouldn't be too complicated, given Go's async support, but it won't exactly be easy either :disappointed: It has merits on it's own though, since having an event loop, but only accessing it with `setTimeout()` / `setInterval()`, is far from ideal, so we'd likely want promises as well.\r\n\r\n> This will need some way of ... copying the stack or creating new stacks for the JS VM ?\r\n\r\nActually, I'm not sure that's a problem. Given how the current `group()` function works (goja calls k6 Go code which calls a new function in goja), I'm not sure we need to worry about the JS stacks, as long as we're executing only a single thing on the runtime.\r\n\r\n> It will also be complicated as we can touch JS values from inside golang's code and we do it .. for various reasons\r\n\r\nNot sure what you mean by that, sorry.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/497241202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/497314853","html_url":"https://github.com/grafana/k6/issues/882#issuecomment-497314853","issue_url":"https://api.github.com/repos/grafana/k6/issues/882","id":497314853,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NzMxNDg1Mw==","user":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-05-30T12:37:46Z","updated_at":"2019-05-30T12:37:46Z","body":"> >     It will also be complicated as we can touch JS values from inside golang's code and we do it ..  for various reasons\r\n> \r\n> Not sure what you mean by that, sorry. \r\n\r\nWhat I meant is that we do handle (at least) the parameters to all the functions so if you have something like (pseudo code): \r\n\r\n```\r\nvar a = {b: 32};\r\nasync function () {a.b = 21;}\r\nk6.golang.function(a)\r\n```\r\n\r\nIf we decide to during `k6.golang.function` we can schedule something from the queue specifically the call from the previous line and we don't actually copy that `a` in some way we have a race condition. We do this with `http.*` at least. So we will have to have a mechanism that in the middle of `k6/*` call we can say \"okay now we can 1. start in parallel what the call was suppose to do and 2. start executing something from the queue\".\r\n`Sleep` seems as just as bad an idea ... \"you said you want to sleep for 10 seconds but because we actually execute some function that takes forever instead of just sleeping you will wait for 30 seconds\". Yes I know that sleeps are \"at least as long\" but still I don't think this is a good idea. \r\n\r\nBut apart from this ... this is not how JS works anywhere else ... and I think it doesn't work like that anywhere else specifically because it will be a nightmare to reason about. The way JS event loop works (and all other event loops AFAIK) is that you get 1 function that is executed that can queue other functions and when it finishes those functions can be executed. Not they queue other functions that might be executed in the middle of the execution of this function.  \r\n\r\nI do agree that SetTimeout(and family) are not particularly user friendly, but I am not proposing that we juts get an eventloop and SetTimeout release it and not touch ever again. I am saying that nomatter how I look at this we do need: \r\n1. eventloop \r\n2. SetTimeout. \r\nTechnically we need some way to add to the queue but this is exactly what SetTimeout does so I propose we just implement it (and the other ClearTimeout. SetInterval and ClearInterval just seem like an easy addition that will mean that we will probably be able to use [this polyfill](https://www.promisejs.org/) to get Promises :confetti_ball: ) \r\n\r\nI do agree that ultimately we will probably need http.* (and others) to return Promise in some cases (the params sounds good). But this seem like way too much work as a first experiment and as such I prefer if the first experiment is the bare minimum to get ANY amount of eventloopines. The polyfll mention above also have [denodefy](https://www.promisejs.org/api/) which makes a callback based function into a Promise. We can also have \r\n```\r\nfunction http_get(url, params) {\r\n    return new Promise(function(resolve, reject) {\r\n       try {\r\n           var resp = http.get(url, [arams);\r\n           resolve(resp);\r\n       } catch(err) {\r\n            reject(err);  \r\n       }\r\n    });\r\n}\r\n```\r\nWhich although will not help you have more than 1 request being made at the same time will show us (somewhat) how code may look when you try to write async code with `http.get`. ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/497314853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-08T15:30:54Z","updated_at":"2019-07-08T15:30:54Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/1073","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/1073/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/1073/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/1073/events","html_url":"https://github.com/grafana/k6/issues/1073","id":465321673,"node_id":"MDU6SXNzdWU0NjUzMjE2NzM=","number":1073,"title":"amqp protocol support","user":{"login":"hassanbakerrts","id":49791182,"node_id":"MDQ6VXNlcjQ5NzkxMTgy","avatar_url":"https://avatars.githubusercontent.com/u/49791182?v=4","gravatar_id":"","url":"https://api.github.com/users/hassanbakerrts","html_url":"https://github.com/hassanbakerrts","followers_url":"https://api.github.com/users/hassanbakerrts/followers","following_url":"https://api.github.com/users/hassanbakerrts/following{/other_user}","gists_url":"https://api.github.com/users/hassanbakerrts/gists{/gist_id}","starred_url":"https://api.github.com/users/hassanbakerrts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hassanbakerrts/subscriptions","organizations_url":"https://api.github.com/users/hassanbakerrts/orgs","repos_url":"https://api.github.com/users/hassanbakerrts/repos","events_url":"https://api.github.com/users/hassanbakerrts/events{/privacy}","received_events_url":"https://api.github.com/users/hassanbakerrts/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":869282130,"node_id":"MDU6TGFiZWw4NjkyODIxMzA=","url":"https://api.github.com/repos/grafana/k6/labels/feature","name":"feature","color":"5319E7","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2019-07-08T15:25:32Z","updated_at":"2024-01-05T14:58:00Z","closed_at":"2024-01-05T14:58:00Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I'm trying to connect to rabbitmq using the framework `[rhea](https://github.com/amqp/rhea)` so I used `browserify` to make the framework compatible. However, the resulted js is constantly throwing errors. Is there any work-around for this issue?    ","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/1073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/1073/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/510830372","html_url":"https://github.com/grafana/k6/issues/882#issuecomment-510830372","issue_url":"https://api.github.com/repos/grafana/k6/issues/882","id":510830372,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDgzMDM3Mg==","user":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T10:04:29Z","updated_at":"2019-07-12T10:04:29Z","body":"I found [video](https://youtu.be/cCOL7MC4Pl0?t=1650) explaining the event loop and the difference between executing things with  `SetTimeout` and `Promise` from the perspective of when will they run. \r\n\r\np.s. The whole video is interesting, but the linked portion is the more relevant part","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/510830372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T15:27:40Z","updated_at":"2019-07-31T15:27:40Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/884","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/884/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/884/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/884/events","html_url":"https://github.com/grafana/k6/issues/884","id":392539413,"node_id":"MDU6SXNzdWUzOTI1Mzk0MTM=","number":884,"title":"Ideas for improving the group() built-in function","user":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":345191760,"node_id":"MDU6TGFiZWwzNDUxOTE3NjA=","url":"https://api.github.com/repos/grafana/k6/labels/enhancement","name":"enhancement","color":"5319E7","default":true,"description":""},{"id":869282130,"node_id":"MDU6TGFiZWw4NjkyODIxMzA=","url":"https://api.github.com/repos/grafana/k6/labels/feature","name":"feature","color":"5319E7","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-12-19T10:40:11Z","updated_at":"2023-10-13T07:35:00Z","closed_at":"2023-10-13T07:34:59Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"It would currently be quite difficult to implement, but ideally, once https://github.com/loadimpact/k6/issues/883 is resolved, we may be able to partially override some of the global options in a `group()` call. That way we can set different tags for all metrics emitted in that group, or set local default HTTP options once https://github.com/loadimpact/k6/issues/761 is implemented (especially useful for stuff like authentication). \r\n\r\nIn a way, something like that [already happens](https://github.com/loadimpact/k6/blob/d219b19a0353ddc73063ff3c45bc17444f0771c3/js/modules/k6/k6.go#L84-L86), since the `group` system tag's value is changed inside of the `group()` call, but it's not flexible or user-configurable at all.","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/884/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/884/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T10:24:38Z","updated_at":"2019-08-26T10:24:38Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/1122","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/1122/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/1122/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/1122/events","html_url":"https://github.com/grafana/k6/issues/1122","id":485122138,"node_id":"MDU6SXNzdWU0ODUxMjIxMzg=","number":1122,"title":"Support HTTP long polling","user":{"login":"imiric","id":1009277,"node_id":"MDQ6VXNlcjEwMDkyNzc=","avatar_url":"https://avatars.githubusercontent.com/u/1009277?v=4","gravatar_id":"","url":"https://api.github.com/users/imiric","html_url":"https://github.com/imiric","followers_url":"https://api.github.com/users/imiric/followers","following_url":"https://api.github.com/users/imiric/following{/other_user}","gists_url":"https://api.github.com/users/imiric/gists{/gist_id}","starred_url":"https://api.github.com/users/imiric/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imiric/subscriptions","organizations_url":"https://api.github.com/users/imiric/orgs","repos_url":"https://api.github.com/users/imiric/repos","events_url":"https://api.github.com/users/imiric/events{/privacy}","received_events_url":"https://api.github.com/users/imiric/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":869282130,"node_id":"MDU6TGFiZWw4NjkyODIxMzA=","url":"https://api.github.com/repos/grafana/k6/labels/feature","name":"feature","color":"5319E7","default":false,"description":""},{"id":1079102926,"node_id":"MDU6TGFiZWwxMDc5MTAyOTI2","url":"https://api.github.com/repos/grafana/k6/labels/evaluation%20needed","name":"evaluation needed","color":"006B75","default":false,"description":"proposal needs to be validated or tested before fully implementing it in k6"},{"id":3461689468,"node_id":"LA_kwDOAz4Wr87OVTB8","url":"https://api.github.com/repos/grafana/k6/labels/new-http","name":"new-http","color":"E02692","default":false,"description":"issues that would require (or benefit from) a new HTTP API"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-08-26T08:46:48Z","updated_at":"2023-12-11T10:10:03Z","closed_at":null,"author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"A recent support question in Slack brought up testing a SQS endpoint which uses HTTP long polling. `k6/http` currently only supports synchronous requests, and long polling is a popular feature used by other services as well, so we should look into supporting it.\r\n\r\nFrom a brief discussion with @na--, this will likely require an event loop implementation per VU, which puts us on the road to support promises, `async`/`await`, etc., greatly expanding the testing capabilities.\r\n\r\nAlso see #746 and #779.","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/1122/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/1122/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-19T13:41:58Z","updated_at":"2019-12-19T13:41:58Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/1282","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/1282/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/1282/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/1282/events","html_url":"https://github.com/grafana/k6/issues/1282","id":539557416,"node_id":"MDU6SXNzdWU1Mzk1NTc0MTY=","number":1282,"title":"k6-es6 example not working","user":{"login":"joostmeijles","id":4342282,"node_id":"MDQ6VXNlcjQzNDIyODI=","avatar_url":"https://avatars.githubusercontent.com/u/4342282?v=4","gravatar_id":"","url":"https://api.github.com/users/joostmeijles","html_url":"https://github.com/joostmeijles","followers_url":"https://api.github.com/users/joostmeijles/followers","following_url":"https://api.github.com/users/joostmeijles/following{/other_user}","gists_url":"https://api.github.com/users/joostmeijles/gists{/gist_id}","starred_url":"https://api.github.com/users/joostmeijles/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joostmeijles/subscriptions","organizations_url":"https://api.github.com/users/joostmeijles/orgs","repos_url":"https://api.github.com/users/joostmeijles/repos","events_url":"https://api.github.com/users/joostmeijles/events{/privacy}","received_events_url":"https://api.github.com/users/joostmeijles/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"simskij","id":1596025,"node_id":"MDQ6VXNlcjE1OTYwMjU=","avatar_url":"https://avatars.githubusercontent.com/u/1596025?v=4","gravatar_id":"","url":"https://api.github.com/users/simskij","html_url":"https://github.com/simskij","followers_url":"https://api.github.com/users/simskij/followers","following_url":"https://api.github.com/users/simskij/following{/other_user}","gists_url":"https://api.github.com/users/simskij/gists{/gist_id}","starred_url":"https://api.github.com/users/simskij/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simskij/subscriptions","organizations_url":"https://api.github.com/users/simskij/orgs","repos_url":"https://api.github.com/users/simskij/repos","events_url":"https://api.github.com/users/simskij/events{/privacy}","received_events_url":"https://api.github.com/users/simskij/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"simskij","id":1596025,"node_id":"MDQ6VXNlcjE1OTYwMjU=","avatar_url":"https://avatars.githubusercontent.com/u/1596025?v=4","gravatar_id":"","url":"https://api.github.com/users/simskij","html_url":"https://github.com/simskij","followers_url":"https://api.github.com/users/simskij/followers","following_url":"https://api.github.com/users/simskij/following{/other_user}","gists_url":"https://api.github.com/users/simskij/gists{/gist_id}","starred_url":"https://api.github.com/users/simskij/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simskij/subscriptions","organizations_url":"https://api.github.com/users/simskij/orgs","repos_url":"https://api.github.com/users/simskij/repos","events_url":"https://api.github.com/users/simskij/events{/privacy}","received_events_url":"https://api.github.com/users/simskij/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":9,"created_at":"2019-12-18T09:26:29Z","updated_at":"2020-04-23T12:15:07Z","closed_at":"2020-04-23T12:15:07Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"The JS compatibility mode documentation (https://docs.k6.io/docs/javascript-compatibility-mode), points to an example that does not work: https://github.com/MStoykov/k6-es6\r\n\r\nRunning the k6-es6 example results in:\r\n```\r\nERRO[0001] TypeError: util.promisify requires a true ES5 environment at file:///C:/Repos/k6-es6/build/app.bundle.js:8:273234(42)\r\n```","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/1282/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/1282/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":2937611485,"node_id":"MDEyOkxhYmVsZWRFdmVudDI5Mzc2MTE0ODU=","url":"https://api.github.com/repos/grafana/k6/issues/events/2937611485","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-01-10T07:56:33Z","label":{"name":"high prio","color":"e99695"},"performed_via_github_app":null},{"actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-10T08:02:15Z","updated_at":"2020-01-10T08:02:15Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/1306","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/1306/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/1306/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/1306/events","html_url":"https://github.com/grafana/k6/issues/1306","id":547842766,"node_id":"MDU6SXNzdWU1NDc4NDI3NjY=","number":1306,"title":"Add support for socket.io ","user":{"login":"peixin","id":1221523,"node_id":"MDQ6VXNlcjEyMjE1MjM=","avatar_url":"https://avatars.githubusercontent.com/u/1221523?v=4","gravatar_id":"","url":"https://api.github.com/users/peixin","html_url":"https://github.com/peixin","followers_url":"https://api.github.com/users/peixin/followers","following_url":"https://api.github.com/users/peixin/following{/other_user}","gists_url":"https://api.github.com/users/peixin/gists{/gist_id}","starred_url":"https://api.github.com/users/peixin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peixin/subscriptions","organizations_url":"https://api.github.com/users/peixin/orgs","repos_url":"https://api.github.com/users/peixin/repos","events_url":"https://api.github.com/users/peixin/events{/privacy}","received_events_url":"https://api.github.com/users/peixin/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":345191760,"node_id":"MDU6TGFiZWwzNDUxOTE3NjA=","url":"https://api.github.com/repos/grafana/k6/labels/enhancement","name":"enhancement","color":"5319E7","default":true,"description":""},{"id":345191761,"node_id":"MDU6TGFiZWwzNDUxOTE3NjE=","url":"https://api.github.com/repos/grafana/k6/labels/help%20wanted","name":"help wanted","color":"159818","default":true,"description":null},{"id":869282130,"node_id":"MDU6TGFiZWw4NjkyODIxMzA=","url":"https://api.github.com/repos/grafana/k6/labels/feature","name":"feature","color":"5319E7","default":false,"description":""},{"id":5881916984,"node_id":"LA_kwDOAz4Wr88AAAABXpbuOA","url":"https://api.github.com/repos/grafana/k6/labels/triage","name":"triage","color":"2ee8ff","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":18,"created_at":"2020-01-10T03:24:34Z","updated_at":"2025-01-06T16:56:15Z","closed_at":"2024-02-12T15:48:54Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Server using [Socket.IO](https://github.com/socketio/socket.io)\r\n\r\n> Socket.IO is not a WebSocket implementation. Although Socket.IO indeed uses WebSocket as a transport when possible, it adds some metadata to each packet: the packet type, the namespace and the ack id when a message acknowledgement is needed. That is why a WebSocket client will not be able to successfully connect to a Socket.IO server, and a Socket.IO client will not be able to connect to a WebSocket server (like ws://echo.websocket.org) either. Please see the protocol specification [here](https://github.com/socketio/socket.io-protocol).\r\n\r\nUseing  k6  ws module  connect will throw an error:\r\n\r\n> ERRO[0000] GoError: websocket: bad handshake\r\n","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/1306/reactions","total_count":31,"+1":21,"-1":0,"laugh":1,"hooray":3,"confused":0,"heart":1,"rocket":2,"eyes":3},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/1306/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-09T10:53:32Z","updated_at":"2020-06-09T10:53:32Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/1493","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/1493/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/1493/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/1493/events","html_url":"https://github.com/grafana/k6/issues/1493","id":635245860,"node_id":"MDU6SXNzdWU2MzUyNDU4NjA=","number":1493,"title":"Can k6 support socket protocol ? not websocket.","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":869282130,"node_id":"MDU6TGFiZWw4NjkyODIxMzA=","url":"https://api.github.com/repos/grafana/k6/labels/feature","name":"feature","color":"5319E7","default":false,"description":""},{"id":1079102926,"node_id":"MDU6TGFiZWwxMDc5MTAyOTI2","url":"https://api.github.com/repos/grafana/k6/labels/evaluation%20needed","name":"evaluation needed","color":"006B75","default":false,"description":"proposal needs to be validated or tested before fully implementing it in k6"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2020-06-09T09:00:07Z","updated_at":"2024-03-06T13:38:42Z","closed_at":"2024-03-06T13:38:42Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"\r\n\r\n## Feature Description\r\nDoes k6 support socket protocol? If not, how could I extend this function based on k6? Is there any examples？\r\n\r\n\r\n## Suggested Solution (optional)\r\n<!--- Any implementation suggestions you might have: technical details, design tradeoffs, API proposals, etc. -->\r\n","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/1493/reactions","total_count":8,"+1":7,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/1493/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"actor":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T08:13:46Z","updated_at":"2020-07-16T08:13:46Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/dop251/goja/issues/167","repository_url":"https://api.github.com/repos/dop251/goja","labels_url":"https://api.github.com/repos/dop251/goja/issues/167/labels{/name}","comments_url":"https://api.github.com/repos/dop251/goja/issues/167/comments","events_url":"https://api.github.com/repos/dop251/goja/issues/167/events","html_url":"https://github.com/dop251/goja/issues/167","id":657964395,"node_id":"MDU6SXNzdWU2NTc5NjQzOTU=","number":167,"title":"Question: roadmap and some coordination questions","user":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2020-07-16T08:13:46Z","updated_at":"2021-10-14T13:10:23Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":72888736,"node_id":"MDEwOlJlcG9zaXRvcnk3Mjg4ODczNg==","name":"goja","full_name":"dop251/goja","private":false,"owner":{"login":"dop251","id":995021,"node_id":"MDQ6VXNlcjk5NTAyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/995021?v=4","gravatar_id":"","url":"https://api.github.com/users/dop251","html_url":"https://github.com/dop251","followers_url":"https://api.github.com/users/dop251/followers","following_url":"https://api.github.com/users/dop251/following{/other_user}","gists_url":"https://api.github.com/users/dop251/gists{/gist_id}","starred_url":"https://api.github.com/users/dop251/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dop251/subscriptions","organizations_url":"https://api.github.com/users/dop251/orgs","repos_url":"https://api.github.com/users/dop251/repos","events_url":"https://api.github.com/users/dop251/events{/privacy}","received_events_url":"https://api.github.com/users/dop251/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/dop251/goja","description":"ECMAScript/JavaScript engine in pure Go","fork":false,"url":"https://api.github.com/repos/dop251/goja","forks_url":"https://api.github.com/repos/dop251/goja/forks","keys_url":"https://api.github.com/repos/dop251/goja/keys{/key_id}","collaborators_url":"https://api.github.com/repos/dop251/goja/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/dop251/goja/teams","hooks_url":"https://api.github.com/repos/dop251/goja/hooks","issue_events_url":"https://api.github.com/repos/dop251/goja/issues/events{/number}","events_url":"https://api.github.com/repos/dop251/goja/events","assignees_url":"https://api.github.com/repos/dop251/goja/assignees{/user}","branches_url":"https://api.github.com/repos/dop251/goja/branches{/branch}","tags_url":"https://api.github.com/repos/dop251/goja/tags","blobs_url":"https://api.github.com/repos/dop251/goja/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/dop251/goja/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/dop251/goja/git/refs{/sha}","trees_url":"https://api.github.com/repos/dop251/goja/git/trees{/sha}","statuses_url":"https://api.github.com/repos/dop251/goja/statuses/{sha}","languages_url":"https://api.github.com/repos/dop251/goja/languages","stargazers_url":"https://api.github.com/repos/dop251/goja/stargazers","contributors_url":"https://api.github.com/repos/dop251/goja/contributors","subscribers_url":"https://api.github.com/repos/dop251/goja/subscribers","subscription_url":"https://api.github.com/repos/dop251/goja/subscription","commits_url":"https://api.github.com/repos/dop251/goja/commits{/sha}","git_commits_url":"https://api.github.com/repos/dop251/goja/git/commits{/sha}","comments_url":"https://api.github.com/repos/dop251/goja/comments{/number}","issue_comment_url":"https://api.github.com/repos/dop251/goja/issues/comments{/number}","contents_url":"https://api.github.com/repos/dop251/goja/contents/{+path}","compare_url":"https://api.github.com/repos/dop251/goja/compare/{base}...{head}","merges_url":"https://api.github.com/repos/dop251/goja/merges","archive_url":"https://api.github.com/repos/dop251/goja/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/dop251/goja/downloads","issues_url":"https://api.github.com/repos/dop251/goja/issues{/number}","pulls_url":"https://api.github.com/repos/dop251/goja/pulls{/number}","milestones_url":"https://api.github.com/repos/dop251/goja/milestones{/number}","notifications_url":"https://api.github.com/repos/dop251/goja/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/dop251/goja/labels{/name}","releases_url":"https://api.github.com/repos/dop251/goja/releases{/id}","deployments_url":"https://api.github.com/repos/dop251/goja/deployments","created_at":"2016-11-04T22:04:06Z","updated_at":"2025-11-09T16:00:17Z","pushed_at":"2025-11-03T14:12:28Z","git_url":"git://github.com/dop251/goja.git","ssh_url":"git@github.com:dop251/goja.git","clone_url":"https://github.com/dop251/goja.git","svn_url":"https://github.com/dop251/goja","homepage":"","size":1537,"stargazers_count":6552,"watchers_count":6552,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":422,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":28,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["golang","javascript"],"visibility":"public","forks":422,"open_issues":28,"watchers":6552,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hi, @dop251 (and whoever else is interested in the development of goja). \r\n\r\ntl;dr: I (on behalf of the k6 team) would like to coordinate on getting goja to support more ECMAScript standards :D.\r\n\r\nI am one of the developers of [k6](https://github.com/loadimpact/k6) which uses goja a lot ;). Previous to you starting the `es6` branch I had very small hopes that at some point we will be able to get more native support of es6+ javascript and instead was up to update the [babel+corejs](https://github.com/loadimpact/k6) combo in k6. This though has some problems for us - mostly corejs(2.5.1 in this case) adds [up to ~2.3mb of additional memory](https://github.com/loadimpact/k6/issues/1543#issuecomment-656042922) which given that we run multiple goja.VMs adds up ... pretty quickly ... also takes some amount of time to actually run at the beginning. And core-js 3+ [isn't any smaller so](https://github.com/loadimpact/k6/issues/1167#issuecomment-533553572) ... \r\n\r\nLooking at the current support in the es6 branch and what is supported in [core-js 2.5.1 shim](https://github.com/zloirock/core-js/blob/a3616d74c0b9b9409d580337e04c32da6e3877e4/shim.js) it looks that after some testing we are probably good to drop it. As for the es7 stuff - they look not very useful for k6's use case and probably things we can live without, but if possible I am for adding them to goja.\r\n\r\nAnother thing that k6 specifically is interested in is `let`, `const`, and the `import/export` syntax support. This is because all [our examples](https://github.com/loadimpact/k6/tree/master/samples) and the VAST majority of user scripts definitely do use those and without those babel gets into play and starts transpiling code ... which for some cases takes upwards of a minute or two, while goja compiles similar code in ms. To a lesser extent we are also interested in lambdas, [template literals](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals) and classes as those are also fairly used across the board.\r\n\r\nAdditionally(although it is possible that this will get the highest internal priority) we are interested in Promises + async/await syntax as  it will be beneficial for writing load testing scripts. And we have a bunch of issues that are blocked on the lack of [event loop](https://github.com/loadimpact/k6/issues/882), and good syntax for it is probably going to be a big issue as well.\r\n\r\nI haven't looked at the specification all that much (especially recently as we were pushing the infamous PR 1007 and [0.27.0](https://github.com/loadimpact/k6/releases/tag/v0.27.0), which is now out :tada: :champagne: ), so I don't know how much any of the above is actually going to take as development time and whether there are prerequisites that need to be met in order for some of those features to be viable. Also ... while I have delved in the goja code, I am definitely don't understand most of it.\r\n\r\nSo my question is do you have some specific roadmap you are going of ... like \"I am going to do *feature1* then *feature2* and *feature3* can be done in independently.\", \"I won't at all try with *some obscure feature nobody cares about*\". So that we can coordinate on trying to not work on the same things :) \r\n\r\nAlso, are you up for at least merging PRs which add functionality beyond ES6, either syntax or just additional utility functions?\r\n\r\nI have to add a disclaimer, that while we would really like all of those and are willing to work on them, it is unlikely we will be able to do all of them at least not ... soon :tm: . \r\n\r\np.s. Thanks for all the work on this awesome JS VM :tada: \r\n","reactions":{"url":"https://api.github.com/repos/dop251/goja/issues/167/reactions","total_count":17,"+1":9,"-1":0,"laugh":0,"hooray":4,"confused":0,"heart":4,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dop251/goja/issues/167/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-12T07:05:30Z","updated_at":"2020-10-12T07:05:30Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/1667","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/1667/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/1667/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/1667/events","html_url":"https://github.com/grafana/k6/issues/1667","id":718725749,"node_id":"MDU6SXNzdWU3MTg3MjU3NDk=","number":1667,"title":"SFTP protocol support","user":{"login":"sagikazarmark","id":1226384,"node_id":"MDQ6VXNlcjEyMjYzODQ=","avatar_url":"https://avatars.githubusercontent.com/u/1226384?v=4","gravatar_id":"","url":"https://api.github.com/users/sagikazarmark","html_url":"https://github.com/sagikazarmark","followers_url":"https://api.github.com/users/sagikazarmark/followers","following_url":"https://api.github.com/users/sagikazarmark/following{/other_user}","gists_url":"https://api.github.com/users/sagikazarmark/gists{/gist_id}","starred_url":"https://api.github.com/users/sagikazarmark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sagikazarmark/subscriptions","organizations_url":"https://api.github.com/users/sagikazarmark/orgs","repos_url":"https://api.github.com/users/sagikazarmark/repos","events_url":"https://api.github.com/users/sagikazarmark/events{/privacy}","received_events_url":"https://api.github.com/users/sagikazarmark/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":869282130,"node_id":"MDU6TGFiZWw4NjkyODIxMzA=","url":"https://api.github.com/repos/grafana/k6/labels/feature","name":"feature","color":"5319E7","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-10-11T00:02:07Z","updated_at":"2024-03-12T11:16:28Z","closed_at":"2024-03-12T11:16:28Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"## Feature Description\r\n\r\nThis is probably a very long shot, but I thought I would get my use case out there anyway, maybe it's interesting for someone.\r\n\r\nI'm building a custom SFTP server that stores files in S3 that I need to load test somehow.\r\n\r\nThe subject of the test is to asses the upload performance (with local and S3 filesystems), identify and potential improvements and monitor the performance over time (with automated tests).\r\n\r\nk6 is obviously not capable of doing that at the moment (or is it?), but after looking at loads of load testing tools (pun not intended), k6 is the one that I would preferably use for all my needs. Most of the other tools are not extensible at all, usually supporting only HTTP (sadly 1.0/1.1 for most of the time). \"Use the best tool for the job\" is the saying, but I usually prefer if it's one tool and not a dozen for the different load testing scenarios.\r\n\r\nSo ideally, I'd implement the \"sftp\" protocol myself (and probably contribute it back too), except it seems to be a lot of work which I can't invest in k6 at the moment. 😞\r\n\r\nSo my suggestion would be: make it easier to implement new protocols in k6 (if at all possible). Some documentation, dummy examples would probably help a lot. Whether the core should have support for protocols like sftp or they should be some sort of extensions is an entirely different question.\r\n\r\nAs I mentioned at the beginning, this might not be valuable at all for the majority of users, so it's a long shot, I don't really expect any positive answer for adding support to the core, but some pointers to adding a new protocol would be nice, maybe I can find some time to implement sftp.\r\n\r\nThanks!","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/1667/reactions","total_count":5,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/1667/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-19T07:56:39Z","updated_at":"2021-01-19T07:56:39Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/1808","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/1808/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/1808/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/1808/events","html_url":"https://github.com/grafana/k6/issues/1808","id":788795344,"node_id":"MDU6SXNzdWU3ODg3OTUzNDQ=","number":1808,"title":"Improve gRPC connection state management","user":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":869282130,"node_id":"MDU6TGFiZWw4NjkyODIxMzA=","url":"https://api.github.com/repos/grafana/k6/labels/feature","name":"feature","color":"5319E7","default":false,"description":""},{"id":1079102926,"node_id":"MDU6TGFiZWwxMDc5MTAyOTI2","url":"https://api.github.com/repos/grafana/k6/labels/evaluation%20needed","name":"evaluation needed","color":"006B75","default":false,"description":"proposal needs to be validated or tested before fully implementing it in k6"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2021-01-19T07:56:39Z","updated_at":"2024-04-08T10:51:12Z","closed_at":"2024-04-08T10:51:12Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"https://community.k6.io/t/reconnect-in-grpc/1286 is a good example of how our gRPC implementation is not very flexible yet. Specifically, we don't have a good way to detect client disconnects. And I don't have a good idea how to handle them well, though something event-based seems reasonable, so we might need to implement https://github.com/loadimpact/k6/issues/882 before we can...","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/1808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/1808/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-21T16:49:19Z","updated_at":"2021-01-21T16:49:19Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/778","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/778/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/778/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/778/events","html_url":"https://github.com/grafana/k6/issues/778","id":363437539,"node_id":"MDU6SXNzdWUzNjM0Mzc1Mzk=","number":778,"title":"Problem in importing chain of modules","user":{"login":"kkeranen","id":4619674,"node_id":"MDQ6VXNlcjQ2MTk2NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/4619674?v=4","gravatar_id":"","url":"https://api.github.com/users/kkeranen","html_url":"https://github.com/kkeranen","followers_url":"https://api.github.com/users/kkeranen/followers","following_url":"https://api.github.com/users/kkeranen/following{/other_user}","gists_url":"https://api.github.com/users/kkeranen/gists{/gist_id}","starred_url":"https://api.github.com/users/kkeranen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkeranen/subscriptions","organizations_url":"https://api.github.com/users/kkeranen/orgs","repos_url":"https://api.github.com/users/kkeranen/repos","events_url":"https://api.github.com/users/kkeranen/events{/privacy}","received_events_url":"https://api.github.com/users/kkeranen/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":949381702,"node_id":"MDU6TGFiZWw5NDkzODE3MDI=","url":"https://api.github.com/repos/grafana/k6/labels/js-compat","name":"js-compat","color":"ea8394","default":false,"description":""},{"id":1079102926,"node_id":"MDU6TGFiZWwxMDc5MTAyOTI2","url":"https://api.github.com/repos/grafana/k6/labels/evaluation%20needed","name":"evaluation needed","color":"006B75","default":false,"description":"proposal needs to be validated or tested before fully implementing it in k6"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2018-09-25T07:05:32Z","updated_at":"2021-01-21T16:49:55Z","closed_at":"2021-01-21T16:49:19Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"As per your [documentation](https://docs.k6.io/docs/modules) one needs to add \".js\" to paths when importing external modules.\r\n\r\nI'm trying to import modules that try to import other modules (I explained this also in comment of another [issue](https://github.com/loadimpact/k6/issues/422)), and only way I can get this to work is to add \".js\" into import statements in the whole import chain. However, this is very hard for two reasons: 1) some modules are 3rd party modules and 2) our modules are compiled to JavaScript from TypeScript. \r\n\r\nAm I doing something wrong, or is using of chained modules (test script importing module1, then module1 importing module 2 and so on) really so hard? It's so hard that I have not been able to complete the work yet and I've started to consider alternatives to k6.","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/778/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/778/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-01T14:26:59Z","updated_at":"2021-02-01T14:26:59Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/1828","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/1828/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/1828/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/1828/events","html_url":"https://github.com/grafana/k6/issues/1828","id":796172849,"node_id":"MDU6SXNzdWU3OTYxNzI4NDk=","number":1828,"title":"Proposal for adding a new standard  `http_req_failures` metric ","user":{"login":"sniku","id":442646,"node_id":"MDQ6VXNlcjQ0MjY0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/442646?v=4","gravatar_id":"","url":"https://api.github.com/users/sniku","html_url":"https://github.com/sniku","followers_url":"https://api.github.com/users/sniku/followers","following_url":"https://api.github.com/users/sniku/following{/other_user}","gists_url":"https://api.github.com/users/sniku/gists{/gist_id}","starred_url":"https://api.github.com/users/sniku/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sniku/subscriptions","organizations_url":"https://api.github.com/users/sniku/orgs","repos_url":"https://api.github.com/users/sniku/repos","events_url":"https://api.github.com/users/sniku/events{/privacy}","received_events_url":"https://api.github.com/users/sniku/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":869282130,"node_id":"MDU6TGFiZWw4NjkyODIxMzA=","url":"https://api.github.com/repos/grafana/k6/labels/feature","name":"feature","color":"5319E7","default":false,"description":""}],"state":"closed","locked":true,"assignee":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":45,"created_at":"2021-01-28T16:44:15Z","updated_at":"2021-03-10T10:48:59Z","closed_at":"2021-03-10T10:47:24Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I'm opening a new issue instead of building on top of https://github.com/loadimpact/k6/issues/1311 to start the discussion with a  clean slate. I believe this proposal addresses most if not all issues brought up in the original proposal. \r\n\r\n\r\nBefore discussing the implementation details and effort required to build this feature, let's discuss why we want this feature at all. \r\n\r\n1. Users want to know if their http requests fail or not, without adding boilerplate code.\r\n2. Users want to see the http timing metrics for successful requests. \r\n3. Users want to see the ratio between successful and failed requests (0.1% failures is often acceptable)\r\n4. Some users may want to know the absolute number of failed requests (15 requests failed)\r\n\r\n## Basic requirements\r\nThis basic script must:\r\n1. show the number of failed requests,\r\n2. show response time for successful requests,\r\n3. test must exit with non-0 exit code because the threshold is crossed.\r\n\r\n\r\n```js\r\nimport { sleep } from 'k6'\r\nimport http from 'k6/http'\r\n\r\nexport let options = {\r\n  thresholds: {\r\n    // test fails if more than 10% of HTTP requests fail. \r\n    // default http_success_hook is used to determine successful status codes.\r\n    http_reqs_failure: ['rate < 0.1'],\r\n  }\r\n};\r\n\r\nexport default function() {\r\n let response_success  = http.get(\"https://httpbin.test.k6.io/status/200\");\r\n let response_failure1 = http.get(\"https://httpbin.test.k6.io/status/503\");\r\n let response_failure2 = http.get(\"https://httpbin.test.k6.io/status/503\");\r\n}\r\n```\r\n\r\n## Discussion about the metric type for `http_reqs_failure`\r\n\r\nThere are two possible metric types for the new `http_reqs_failure`. Rate or Counter.\r\nBoth types have their advantages, and it's not entirely clear which one is better for this use case.\r\n\r\nAdvantages of Rate:\r\n - ability to easily configure thresholds `http_reqs_failure: rate<0.1`\r\n - shows rate... \r\n\r\nAdvantages of Counter:\r\n - shows failures per second\r\n - shows the total number of failed requests (might be useful to some users)\r\n - is consistent with `http_reqs` metric. \r\n\r\nThe end-of-test summary for this test should look similar to this:\r\n\r\n\r\n## Output when using Counter metric\r\n```sh\r\nhttp_reqs..................: 3      3.076683/s\r\nhttp_reqs_failure..........: 2      2.036683/s\r\nhttp_reqs_success..........: 1      1.036683/s\r\n```\r\n\r\n## Output when using Rate metric\r\n\r\n```sh\r\nhttp_reqs..................: 3      3.134432/s\r\nhttp_reqs_failure..........: 33.33% ✓ 1 ✗ 2\r\nhttp_reqs_success..........: 66.66% ✓ 2 ✗ 1\r\n```\r\n\r\n\r\n\r\nNeither `Rate` nor `Counter` covers all possible use-cases. I think `Rate` is preferable over `Counter`. \r\n\r\nIf we added `count` to the `Rate` metric, the output could possibly look similar to this\r\n\r\n```sh\r\nhttp_reqs..................: 3      0.136/s    \r\nhttp_reqs_failure..........: 33.33% ✓ 2 (66.66%) 3.136/s   ✗ 1 (33.33%) 0.136/s    \r\nhttp_reqs_success..........: 66.66% ✓ 1 (33.33%) 3.136/s   ✗ 2 (66.66%) 0.136/s    \r\n```\r\n\r\nNote, I'm not really advocating for this, just pointing out that neither Rate nor Counter cover all use cases.\r\n\r\n\r\n### Why do we have failures and successes as separate metrics?\r\nThe obvious critique of the above suggestion is to say that `http_reqs_success` is unnecessary because it's opposite of `http_reqs_failure`. This is true, but some outputs don't allow to define logic, and therefore it's not possible to show `http_reqs_success` unless k6 itself produces it.\r\n\r\nOnce the metric filtering feature is developed, I would suggest we exclude `http_reqs_success` by default. \r\n\r\n\r\n### http_req_duration and other http_req_* metrics.\r\n\r\nThe core requirement of this feature is to be able to see http_req_duration for successful requests only.\r\n\r\nThere are two possibilities here:\r\n1. Don't emit `http_req_duration` for failures\r\n2. Tag `http_req_duration` with `failed:true|false` tag and display filtered values.\r\n\r\nLet's discuss both approaches\r\n\r\n### Don't emit http Trend metrics for failed requests \r\n\r\nIn this approach, `http_req_duration` and other http metrics won't include failed requests towards the metric's internal state.   \r\n\r\nUsers who want to track error timings can define custom metrics like this:\r\n\r\n```js\r\n  let http_4xx = new Trend('http_4xx');\r\n\r\n  let res = http.get('http://test.k6.io');\r\n  if(res.status > 400 && res.status <= 499){\r\n    http4xx.add(res.timings.http_req_duration);\r\n  }\r\n```\r\n\r\n\r\n##  Tag `http_req_duration` with `failed:true|false` tag and display filtered values.\r\n\r\nWith this approach, we would emit the `http_req_duration` and friends as we used to, but we will tag values with `failed:true|false` \r\n\r\nThe default-end-of-test summary would display only successful requests like this:\r\n\r\n```sh\r\nhttp_req_duration{failed:false}...: avg=132.76ms min=127.19ms med=132.76ms max=138.33ms p(90)=137.22ms \r\nhttp_reqs........................: 3      3.076683/s\r\nhttp_reqs_failure................: 2      2.036683/s\r\nhttp_reqs_success................: 1      1.036683/s\r\niteration_duration...............: avg=932.4ms  min=932.4ms  med=932.4ms  max=932.4ms  p(90)=932.4ms  p(95)=932.4ms \r\niterations.......................: 1      1.038341/s\r\n```\r\n\r\nThe most problematic issue with this approach is that some outputs don't ingest tags and won't be able to display http_req_duration for successful requests only. \r\n\r\nExamples of `http_req_duration` and `http_reqs_failure` k6 should produce with this approach. \r\n```js\r\n{\r\n  \"type\": \"Point\",\r\n  \"metric\": \"http_req_duration\",\r\n  \"data\": {\r\n    \"time\": \"2021-01-22T12:40:08.277031832+01:00\",\r\n    \"value\": 0.032868,\r\n    \"tags\": {\r\n      \"error_code\": \"1501\",\r\n      \"group\": \"\",\r\n      \"method\": \"GET\",\r\n      \"name\": \"https://httpbin.test.k6.io/status/501\",\r\n      \"proto\": \"HTTP/2.0\",\r\n      \"scenario\": \"default\",\r\n      \"status\": \"501\",\r\n      \"tls_version\": \"tls1.2\",\r\n      \"url\": \"https://httpbin.test.k6.io/status/501\",\r\n      \"failed\": true,  // see reasoning below in the \"cloud support\" section\r\n    }\r\n  }\r\n}\r\n\r\n{\r\n  \"type\": \"Point\",\r\n  \"metric\": \"http_reqs_failure\",\r\n  \"data\": {\r\n    \"time\": \"2021-01-22T12:40:08.277031832+01:00\",\r\n    \"value\": 1,\r\n    \"tags\": {\r\n      // same tags as for http_req_duration\r\n      \"error_code\": \"1501\",\r\n      \"status\": \"501\",\r\n      \"name\": \"https://httpbin.test.k6.io/status/501\",\r\n      \"group\": \"\",\r\n      \"method\": \"GET\",\r\n      \"proto\": \"HTTP/2.0\",\r\n      \"scenario\": \"default\",\r\n      \"tls_version\": \"tls1.2\",\r\n    }\r\n  }\r\n}\r\n\r\n```\r\n\r\n# Cloud support\r\nThere are additional considerations for the `k6 cloud` support.\r\n\r\n### Performance insights \r\nThe \"performance insights\" feature and web app currently assume that successful requests have status 200-399. \r\n* The \"URL table\" displays statuses >=400 with red background \r\n* There are several performance alerts that show up when there are sufficiently many requests with statuses >=400\r\n\r\nBoth approaches listed above solve these problems, although in different ways.\r\n\r\nIn approach 1, we would only get timings for successful requests and therefore we won't show timings for failed requests. \r\nWe will still get tagged `http_reqs_failure` metrics and therefore will be able to show errors without timings.\r\n![image](https://user-images.githubusercontent.com/442646/106166797-d57d3380-618c-11eb-96ea-9b43f88ff142.png)\r\nWe would probably redesign this UI to separate failures from successes in a better way. \r\n\r\nIn approach 2, we would get a new standard tag called `failed` to all `http_req_*` metrics, including `http_req_li_all`.\r\nTimings would still be shown for errors (although probably not useful), but the background of the row would be determined by the `failed` tag.\r\n\r\n![image](https://user-images.githubusercontent.com/442646/106167429-7966df00-618d-11eb-8d26-e8120fe2d9d8.png)\r\n\r\n\r\n```js\r\n  {\r\n    \"type\": \"Points\",\r\n    \"metric\": \"http_req_li_all\",\r\n    \"data\": {\r\n      \"time\": \"1604394111659104\",\r\n      \"type\": \"counter\",\r\n      \"tags\": {\r\n        \"tls_version\": \"tls1.2\",\r\n        \"group\": \"\",\r\n        \"scenario\": \"default\",\r\n        \"url\": \"https://test.k6.io\",\r\n        \"name\": \"https://test.k6.io\",\r\n        \"method\": \"GET\",\r\n        \"status\": \"200\",\r\n        \"proto\": \"HTTP/2.0\",\r\n        \"failed\": false\r\n      },\r\n      \"values\": {\r\n        \"http_req_waiting\": 123.88875,\r\n        \"http_req_receiving\": 0.215741,\r\n        \"http_req_duration\": 124.419757,\r\n        \"http_req_blocked\": 432.893314,\r\n        \"http_req_connecting\": 122.01245,\r\n        \"http_req_tls_handshaking\": 278.872101,\r\n        \"http_req_sending\": 0.315266,\r\n        \"http_reqs\": 10,\r\n        \"http_reqs_success\": 10\r\n      }\r\n    }\r\n  },\r\n  {\r\n    \"type\": \"Points\",\r\n    \"metric\": \"http_req_li_all\",\r\n    \"data\": {\r\n      \"time\": \"1604394111659104\",\r\n      \"type\": \"counter\",\r\n      \"tags\": {\r\n        \"tls_version\": \"tls1.2\",\r\n        \"group\": \"\",\r\n        \"scenario\": \"default\",\r\n        \"url\": \"https://test.k6.io\",\r\n        \"name\": \"https://test.k6.io\",\r\n        \"method\": \"GET\",\r\n        \"status\": \"200\",\r\n        \"proto\": \"HTTP/2.0\",\r\n        \"failed\": true\r\n      },\r\n      \"values\": {\r\n        \"http_req_waiting\": 23.88875,\r\n        \"http_req_receiving\": 0.215741,\r\n        \"http_req_duration\": 24.419757,\r\n        \"http_req_blocked\": 32.893314,\r\n        \"http_req_connecting\": 22.01245,\r\n        \"http_req_tls_handshaking\": 78.872101,\r\n        \"http_req_sending\": 0.315266,\r\n        \"http_reqs\": 10,\r\n        \"http_reqs_failure\": 10\r\n      }\r\n    }\r\n  }\r\n```\r\n\r\n\r\n## (alternative) Why don't we skip the new metrics and purely rely on `failed` tag?\r\n\r\nIt's possible to extend the existing `http_reqs` counter metric by tagging requests with `failed` and changing the metric type to `Rate`. If that's done, the following script would be possible, \r\n\r\n```javascript\r\nimport { sleep } from 'k6'\r\nimport http from 'k6/http'\r\n\r\nexport let options = {\r\n  thresholds: {\r\n    'http_reqs{failed:true}': ['rate < 0.1'],\r\n  }\r\n};\r\n\r\nexport default function() {\r\n let response_success  = http.get(\"https://httpbin.test.k6.io/status/200\");\r\n let response_failure1 = http.get(\"https://httpbin.test.k6.io/status/503\");\r\n let response_failure2 = http.get(\"https://httpbin.test.k6.io/status/503\");\r\n}\r\n```\r\n\r\n\r\nPossible end-of-test summary:\r\n\r\n```sh\r\nhttp_reqs...................: 3      ✓ 1 ✗ 2     3.134432/s\r\nhttp_reqs{failed:true}..: 33.33% ✓ 1 ✗ 2     1.034432/s\r\nhttp_reqs{failed:false}.: 66.66% ✓ 2 ✗ 1     2.104432/s\r\n```\r\n\r\nPossible problems with this approach are:\r\n - some outputs don't ingest tags. It would not be possible to use this functionality with statsd\r\n - http_reqs would be backwards incompatible unless we combine rate and counter into a new metric type. \r\n - some \"special case\" handling would be required for displaying.\r\n\r\nI'm (currently) against this alternative. \r\n\r\n## Defining failure\r\n\r\nTo determine if a request has failed or succeeded, a JavaScript hook function is invoked after the request, but before the metrics emission. This proposal builds on https://github.com/loadimpact/k6/issues/1716\r\n\r\n\r\n```javascript\r\nimport http from 'k6/http'\r\n\r\nexport let options = {\r\n  hooks: {\r\n    http: {\r\n      successHook: 'myHttpSuccessHook',\r\n    }\r\n  }\r\n};\r\n\r\nexport function myHttpSuccessHook(response){\r\n  // returns boolean true|false\r\n  // adds failed = true|false tag\r\n  // decides if the metric goes into http_req_duration.\r\n  // default implementation: return response.status >= 200 && response.status <= 399\r\n  return response.status >= 200 && response.status <= 204\r\n}\r\n\r\nexport default function() {\r\n let response_success  = http.get(\"https://httpbin.test.k6.io/status/200\");\r\n let response_failure1 = http.get(\"https://httpbin.test.k6.io/status/503\");\r\n let response_failure2 = http.get(\"https://httpbin.test.k6.io/status/503\");\r\n}\r\n\r\n```\r\n\r\n## per-request handling\r\nSometimes users need to handle special cases. \r\n\r\n### Alternative 1 - handle inside the hook\r\n\r\n```javascript\r\nimport http from 'k6/http'\r\n\r\nexport let options = {\r\n  hooks: {\r\n    http: {\r\n      successHook: 'myHttpSuccessHook',\r\n    }\r\n  }\r\n};\r\n\r\nexport function myHttpSuccessHook(response){\r\n  if(response.request.name === 'https://httpbin.test.k6.io/status/403'){\r\n    return response.status === 403 // expecting 403 for this specific URL\r\n  }\r\n  return response.status >= 200 && response.status <= 204\r\n}\r\n\r\nexport default function() {\r\n let response_success  = http.get(\"https://httpbin.test.k6.io/status/200\");\r\n let response_failure1 = http.get(\"https://httpbin.test.k6.io/status/503\");\r\n let response_failure2 = http.get(\"https://httpbin.test.k6.io/status/503\");\r\n}\r\n\r\n```\r\n\r\n### Alternative 2 - override the hook per request\r\n\r\n```javascript\r\nimport { sleep } from 'k6'\r\nimport { Rate } from 'k6/metrics'\r\nimport http from 'k6/http'\r\n\r\nexport default function() {\r\n let response_failure1 = http.get(\"https://httpbin.test.k6.io/status/503\");\r\n let response_failure2 = http.get(\"https://httpbin.test.k6.io/status/503\");\r\n let response_success  = http.get(\"https://httpbin.test.k6.io/status/403\", {\r\n  successHook: (r) => r.status===403\r\n });\r\n}\r\n\r\n```\r\n\r\n## What about the redirect chains?\r\n\r\nThis is up for discussion.\r\n\r\n```javascript\r\nimport { sleep } from 'k6'\r\nimport { Rate } from 'k6/metrics'\r\nimport http from 'k6/http'\r\n\r\nexport default function() {\r\n let response_success  = http.get(\"http://httpbin.test.k6.io/absolute-redirect/5\", {\r\n  successHook: (r) => r.status===200\r\n });\r\n}\r\n```\r\n\r\nShould the hook fire on every request in the chain or only on the last one?\r\n\r\n\r\n## Concerns\r\n 1. the performance penalty of executing the js hook function on every request. \r\n 2. the performance penalty of adding more data to `http_req_li_all` and other `http_req_*` metrics.\r\n ","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/1828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/1828/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/grafana/k6/issues/comments/776594248","html_url":"https://github.com/grafana/k6/issues/882#issuecomment-776594248","issue_url":"https://api.github.com/repos/grafana/k6/issues/882","id":776594248,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NjU5NDI0OA==","user":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-10T10:03:34Z","updated_at":"2021-02-10T10:03:34Z","body":"Another use case for asynchronous requests in a single VU: https://community.k6.io/t/run-one-vu-at-a-time-but-have-varying-ramp-up-pattern-within-duration/1377","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/comments/776594248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-16T14:08:33Z","updated_at":"2021-02-16T14:08:33Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/1859","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/1859/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/1859/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/1859/events","html_url":"https://github.com/grafana/k6/issues/1859","id":809334522,"node_id":"MDU6SXNzdWU4MDkzMzQ1MjI=","number":1859,"title":"RSocket Support","user":{"login":"emax19","id":23064543,"node_id":"MDQ6VXNlcjIzMDY0NTQz","avatar_url":"https://avatars.githubusercontent.com/u/23064543?v=4","gravatar_id":"","url":"https://api.github.com/users/emax19","html_url":"https://github.com/emax19","followers_url":"https://api.github.com/users/emax19/followers","following_url":"https://api.github.com/users/emax19/following{/other_user}","gists_url":"https://api.github.com/users/emax19/gists{/gist_id}","starred_url":"https://api.github.com/users/emax19/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/emax19/subscriptions","organizations_url":"https://api.github.com/users/emax19/orgs","repos_url":"https://api.github.com/users/emax19/repos","events_url":"https://api.github.com/users/emax19/events{/privacy}","received_events_url":"https://api.github.com/users/emax19/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":869282130,"node_id":"MDU6TGFiZWw4NjkyODIxMzA=","url":"https://api.github.com/repos/grafana/k6/labels/feature","name":"feature","color":"5319E7","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-02-16T13:57:11Z","updated_at":"2024-04-10T13:35:30Z","closed_at":"2024-04-10T13:35:29Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"<!--- RSocket Support -->\r\nThe RSocket technology has burst into the IT market. It's a very promising technology already used by many big products. So, it will be very helpful to start to support that, please take a look.\r\n","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/1859/reactions","total_count":7,"+1":7,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/1859/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-14T06:17:28Z","updated_at":"2021-05-14T06:17:28Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/2020","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/2020/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/2020/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/2020/events","html_url":"https://github.com/grafana/k6/issues/2020","id":891482243,"node_id":"MDU6SXNzdWU4OTE0ODIyNDM=","number":2020,"title":"Support gRPC streaming","user":{"login":"joshcarp","id":32605850,"node_id":"MDQ6VXNlcjMyNjA1ODUw","avatar_url":"https://avatars.githubusercontent.com/u/32605850?v=4","gravatar_id":"","url":"https://api.github.com/users/joshcarp","html_url":"https://github.com/joshcarp","followers_url":"https://api.github.com/users/joshcarp/followers","following_url":"https://api.github.com/users/joshcarp/following{/other_user}","gists_url":"https://api.github.com/users/joshcarp/gists{/gist_id}","starred_url":"https://api.github.com/users/joshcarp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshcarp/subscriptions","organizations_url":"https://api.github.com/users/joshcarp/orgs","repos_url":"https://api.github.com/users/joshcarp/repos","events_url":"https://api.github.com/users/joshcarp/events{/privacy}","received_events_url":"https://api.github.com/users/joshcarp/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":869282130,"node_id":"MDU6TGFiZWw4NjkyODIxMzA=","url":"https://api.github.com/repos/grafana/k6/labels/feature","name":"feature","color":"5319E7","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"olegbespalov","id":5425600,"node_id":"MDQ6VXNlcjU0MjU2MDA=","avatar_url":"https://avatars.githubusercontent.com/u/5425600?v=4","gravatar_id":"","url":"https://api.github.com/users/olegbespalov","html_url":"https://github.com/olegbespalov","followers_url":"https://api.github.com/users/olegbespalov/followers","following_url":"https://api.github.com/users/olegbespalov/following{/other_user}","gists_url":"https://api.github.com/users/olegbespalov/gists{/gist_id}","starred_url":"https://api.github.com/users/olegbespalov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olegbespalov/subscriptions","organizations_url":"https://api.github.com/users/olegbespalov/orgs","repos_url":"https://api.github.com/users/olegbespalov/repos","events_url":"https://api.github.com/users/olegbespalov/events{/privacy}","received_events_url":"https://api.github.com/users/olegbespalov/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"olegbespalov","id":5425600,"node_id":"MDQ6VXNlcjU0MjU2MDA=","avatar_url":"https://avatars.githubusercontent.com/u/5425600?v=4","gravatar_id":"","url":"https://api.github.com/users/olegbespalov","html_url":"https://github.com/olegbespalov","followers_url":"https://api.github.com/users/olegbespalov/followers","following_url":"https://api.github.com/users/olegbespalov/following{/other_user}","gists_url":"https://api.github.com/users/olegbespalov/gists{/gist_id}","starred_url":"https://api.github.com/users/olegbespalov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/olegbespalov/subscriptions","organizations_url":"https://api.github.com/users/olegbespalov/orgs","repos_url":"https://api.github.com/users/olegbespalov/repos","events_url":"https://api.github.com/users/olegbespalov/events{/privacy}","received_events_url":"https://api.github.com/users/olegbespalov/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/grafana/k6/milestones/33","html_url":"https://github.com/grafana/k6/milestone/33","labels_url":"https://api.github.com/repos/grafana/k6/milestones/33/labels","id":9066820,"node_id":"MI_kwDOAz4Wr84AillE","number":33,"title":"v0.45.0","description":"","creator":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":55,"state":"closed","created_at":"2023-02-20T12:57:10Z","updated_at":"2023-06-19T11:52:39Z","due_on":"2023-06-19T07:00:00Z","closed_at":"2023-06-19T11:52:39Z"},"comments":24,"created_at":"2021-05-14T00:24:23Z","updated_at":"2023-06-19T09:10:59Z","closed_at":"2023-06-19T09:10:59Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"## Feature Description\r\nSupport gRPC streaming as described [here](https://k6.io/blog/performance-testing-grpc-services/)\r\n\r\n\r\n## Suggested Solution (optional)\r\n The grpc Client currently uses the grpc.Invoke command:\r\nhttps://github.com/k6io/k6/blob/61f464b99a2d052347fee157eb68a024f5cf7430/js/modules/k6/grpc/client.go#L398\r\n\r\nInstead of this, possibly using the return value of `NewStream` [godoc](https://godoc.org/google.golang.org/grpc#ClientConn.NewStream):\r\n\r\nhttps://github.com/grpc/grpc-go/blob/87eb5b7502493f758e76c4d09430c0049a81a557/stream.go#L144\r\n\r\nThis would look similar to [the generated stream endpoint grpc code](https://github.com/k6io/k6/blob/5e42319785addea437c38b31f92870a10447c8dd/samples/grpc_server/route_guide.pb.go#L594)\r\n\r\n```go\r\n\r\nfunc (c *routeGuideClient) ListFeatures(ctx context.Context, in *Rectangle, opts ...grpc.CallOption) (RouteGuide_ListFeaturesClient, error) {\r\n\tstream, err := c.cc.NewStream(ctx, &_RouteGuide_serviceDesc.Streams[0], \"/main.RouteGuide/ListFeatures\", opts...)\r\n\tif err != nil {\r\n\t\treturn nil, err\r\n\t}\r\n\tx := &routeGuideListFeaturesClient{stream}\r\n\tif err := x.ClientStream.SendMsg(in); err != nil {\r\n\t\treturn nil, err\r\n\t}\r\n\tif err := x.ClientStream.CloseSend(); err != nil {\r\n\t\treturn nil, err\r\n\t}\r\n\treturn x, nil\r\n}\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/2020/reactions","total_count":22,"+1":20,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":2},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/2020/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-26T08:01:44Z","updated_at":"2021-05-26T08:01:44Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/2040","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/2040/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/2040/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/2040/events","html_url":"https://github.com/grafana/k6/issues/2040","id":899964550,"node_id":"MDU6SXNzdWU4OTk5NjQ1NTA=","number":2040,"title":"Requests per second metric per step in a user flow","user":{"login":"Bessonov","id":182451,"node_id":"MDQ6VXNlcjE4MjQ1MQ==","avatar_url":"https://avatars.githubusercontent.com/u/182451?v=4","gravatar_id":"","url":"https://api.github.com/users/Bessonov","html_url":"https://github.com/Bessonov","followers_url":"https://api.github.com/users/Bessonov/followers","following_url":"https://api.github.com/users/Bessonov/following{/other_user}","gists_url":"https://api.github.com/users/Bessonov/gists{/gist_id}","starred_url":"https://api.github.com/users/Bessonov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bessonov/subscriptions","organizations_url":"https://api.github.com/users/Bessonov/orgs","repos_url":"https://api.github.com/users/Bessonov/repos","events_url":"https://api.github.com/users/Bessonov/events{/privacy}","received_events_url":"https://api.github.com/users/Bessonov/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":869282130,"node_id":"MDU6TGFiZWw4NjkyODIxMzA=","url":"https://api.github.com/repos/grafana/k6/labels/feature","name":"feature","color":"5319E7","default":false,"description":""},{"id":1079102926,"node_id":"MDU6TGFiZWwxMDc5MTAyOTI2","url":"https://api.github.com/repos/grafana/k6/labels/evaluation%20needed","name":"evaluation needed","color":"006B75","default":false,"description":"proposal needs to be validated or tested before fully implementing it in k6"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2021-05-24T20:04:12Z","updated_at":"2021-05-27T07:41:33Z","closed_at":null,"author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"<!--- Provide a general summary of the feature in the Title above -->\r\n\r\n## Feature Description\r\n\r\nI like the output from `ab` and I have a hard time to understand the metrics from k6. Especially I miss the rps metric, if I want to test a user flow. For example, my user flow consists of 5 steps\r\n\r\n1. open register form\r\n2. register user\r\n3. get email with verification link (external service, [maildev](https://github.com/maildev/maildev) to be precise)\r\n4. open confirmation page\r\n5. delete confirmation mail (aka clean up)\r\n\r\nI managed to [get more submetrics](https://community.k6.io/t/separate-metrics-summary-for-each-request-in-default-function/1223/2):\r\n\r\n```\r\n     data_received....................................: 11 MB  1.1 MB/s\r\n     data_sent........................................: 741 kB 73 kB/s\r\n     http_req_blocked.................................: min=0.00ms   avg=0.07ms   p(99)=0.80ms    p(99.9)=14.54ms   max=42.95ms   count=1800\r\n     http_req_connecting..............................: min=0.00ms   avg=0.05ms   p(99)=0.59ms    p(99.9)=4.81ms    max=42.73ms   count=1800\r\n     http_req_duration................................: min=0.55ms   avg=164.64ms p(99)=782.34ms  p(99.9)=923.64ms  max=945.70ms  count=1800\r\n       { expected_response:true }.....................: min=0.55ms   avg=164.64ms p(99)=782.34ms  p(99.9)=923.64ms  max=945.70ms  count=1800\r\n     ✓ { name:1. open register form }.................: min=1.93ms   avg=7.74ms   p(99)=63.97ms   p(99.9)=65.78ms   max=65.97ms   count=300 \r\n     ✓ { name:2. register user }......................: min=108.21ms avg=420.22ms p(99)=857.30ms  p(99.9)=934.59ms  max=945.70ms  count=600 \r\n     ✓ { name:3. get email with verification link }...: min=0.68ms   avg=2.07ms   p(99)=7.01ms    p(99.9)=11.25ms   max=11.52ms   count=300 \r\n     ✓ { name:4. open confirmation page }.............: min=5.28ms   avg=136.00ms p(99)=385.23ms  p(99.9)=461.81ms  max=483.54ms  count=300 \r\n     ✓ { name:5. delete confirmation mail }...........: min=0.55ms   avg=1.61ms   p(99)=12.79ms   p(99.9)=20.00ms   max=20.53ms   count=300 \r\n     http_req_failed..................................: 0.00%  ✓ 0    ✗ 1800\r\n       { name:1. open register form }.................: 0.00%  ✓ 0    ✗ 300 \r\n       { name:2. register user }......................: 0.00%  ✓ 0    ✗ 600 \r\n       { name:3. get email with verification link }...: 0.00%  ✓ 0    ✗ 300 \r\n       { name:4. open confirmation page }.............: 0.00%  ✓ 0    ✗ 300 \r\n       { name:5. delete confirmation mail }...........: 0.00%  ✓ 0    ✗ 300 \r\n     http_req_receiving...............................: min=0.04ms   avg=0.39ms   p(99)=10.76ms   p(99.9)=33.66ms   max=47.22ms   count=1800\r\n     http_req_sending.................................: min=0.01ms   avg=0.05ms   p(99)=0.25ms    p(99.9)=7.38ms    max=11.47ms   count=1800\r\n     http_req_tls_handshaking.........................: min=0.00ms   avg=0.00ms   p(99)=0.00ms    p(99.9)=0.00ms    max=0.00ms    count=1800\r\n     http_req_waiting.................................: min=0.48ms   avg=164.21ms p(99)=782.12ms  p(99.9)=923.43ms  max=945.47ms  count=1800\r\n     http_reqs........................................: 1800   176.622083/s\r\n     iteration_duration...............................: min=342.50ms avg=991.35ms p(99)=1488.04ms p(99.9)=1562.11ms max=1569.80ms count=300 \r\n     iterations.......................................: 300    29.437014/s\r\n     vus..............................................: 10     min=10 max=30\r\n     vus_max..........................................: 30     min=30 max=30\r\n```\r\nwhich shows latencies for every step. Great! If I look at \"iterations [...]  29.437014/s\", then my assumption is, that the system can handle 29.4 registrations per second, also meaning all five steps. Probably, it is the rps metric if there were only one step, right? If I use the same technique for `iterations` or `http_reqs` then it doesn't print it or print not meaningful data:\r\n```\r\n     http_reqs........................................: 1800   172.355533/s\r\n       { name:1. open register form }.................: 300    28.725922/s\r\n       { name:2. register user }......................: 600    57.451844/s\r\n       { name:3. get email with verification link }...: 300    28.725922/s\r\n       { name:4. open confirmation page }.............: 300    28.725922/s\r\n       { name:5. delete confirmation mail }...........: 300    28.725922/s\r\n[...]\r\n     iterations.......................................: 300    28.725922/s\r\n```\r\n\r\n<!--- Describe the feature in detail: what benefits it would have, which problem it would solve, use cases, examples, etc. -->\r\nLatencies are great and give very useful insights. But from my point of view they are not enough to understand the capabilities of a system. For example, latency of 200ms is great for 5000rps, but bad for 5rps.\r\n\r\n## Suggested Solution (optional)\r\n<!--- Any implementation suggestions you might have: technical details, design tradeoffs, API proposals, etc. -->\r\nProbably it would be nice to have same behavior for `http_reqs` (or `iterations`?) like for `http_req_duration`:\r\n\r\n```\r\n     http_reqs........................................: min=50/s   avg=30/s p(99)=10/s  p(99.9)=5/s  max=1/s  count=1800\r\n[...]\r\n     ✓ { name:2. register user }......................: min=10/s avg=7/s p(99)=5/s  p(99.9)=3/s  max=1/s  count=600 \r\n[...]\r\n```\r\n\r\nI looked at [custom metrics](https://k6.io/docs/javascript-api/k6-metrics/), but didn't found a way to achieve it with them.","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/2040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/2040/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-14T05:52:59Z","updated_at":"2021-06-14T05:52:59Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/2061","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/2061/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/2061/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/2061/events","html_url":"https://github.com/grafana/k6/issues/2061","id":919085592,"node_id":"MDU6SXNzdWU5MTkwODU1OTI=","number":2061,"title":"Websocket script run stays 30sec after a given duration time","user":{"login":"tarekbadrsh","id":31471186,"node_id":"MDQ6VXNlcjMxNDcxMTg2","avatar_url":"https://avatars.githubusercontent.com/u/31471186?v=4","gravatar_id":"","url":"https://api.github.com/users/tarekbadrsh","html_url":"https://github.com/tarekbadrsh","followers_url":"https://api.github.com/users/tarekbadrsh/followers","following_url":"https://api.github.com/users/tarekbadrsh/following{/other_user}","gists_url":"https://api.github.com/users/tarekbadrsh/gists{/gist_id}","starred_url":"https://api.github.com/users/tarekbadrsh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarekbadrsh/subscriptions","organizations_url":"https://api.github.com/users/tarekbadrsh/orgs","repos_url":"https://api.github.com/users/tarekbadrsh/repos","events_url":"https://api.github.com/users/tarekbadrsh/events{/privacy}","received_events_url":"https://api.github.com/users/tarekbadrsh/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":345191763,"node_id":"MDU6TGFiZWwzNDUxOTE3NjM=","url":"https://api.github.com/repos/grafana/k6/labels/question","name":"question","color":"cc317c","default":true,"description":null},{"id":865562676,"node_id":"MDU6TGFiZWw4NjU1NjI2NzY=","url":"https://api.github.com/repos/grafana/k6/labels/ux","name":"ux","color":"5319e7","default":false,"description":""},{"id":1079102926,"node_id":"MDU6TGFiZWwxMDc5MTAyOTI2","url":"https://api.github.com/repos/grafana/k6/labels/evaluation%20needed","name":"evaluation needed","color":"006B75","default":false,"description":"proposal needs to be validated or tested before fully implementing it in k6"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-06-11T18:40:30Z","updated_at":"2021-06-14T09:22:00Z","closed_at":null,"author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"<!--- Provide a general summary of the issue in the Title above -->\r\nHi, I'm a bit curious about K6 project and I'm trying to run K6 with different scenarios.\r\n\r\nI was trying to run this [websocket script](https://k6.io/docs/using-k6/protocols/websockets/) and [this one](https://k6.io/docs/examples/websockets/), **`with --duration 1s`** , **`with --duration 10s`** and **`with --duration 20s`**\r\n\r\n\r\n## Environment\r\n<!--- Provide as much information about your environment as possible: output from `k6 version`,\r\n      OCI runtime and image information if using containers, cloud execution environment, etc. -->\r\n- k6 version: [v0.32.0](https://github.com/k6io/k6/releases/tag/v0.32.0) and latest master (with Id: 5b4409706162ddcea1644f8dbdcd69ba0e86719d)\r\n- OS and version: windows10\r\n\r\n## Expected Behavior\r\n<!--- Tell us what should happen -->\r\nI expect the application to run for 1s, 10s or 20s\r\n\r\n## Actual Behavior\r\n<!--- Tell us what happens instead of the expected behavior -->\r\nThe application continues running for 30 in addition of any duration option\r\nrun **`with --duration 1s`** stay running for `(31.0s)`\r\nrun **`with --duration 10s`** stay running for `(40.0s)`\r\nrun **`with --duration 20s`** stay running for `(50.0s)`\r\n\r\nAs you can see below I have the latest version on master also I tried with latest tag v0.32.0 and it have the same behavior.\r\n\r\n```powershell\r\nK6/(master)$ git log -n 1\r\ncommit 5b4409706162ddcea1644f8dbdcd69ba0e86719d (HEAD -> master, origin/master, origin/HEAD)\r\nAuthor: Cem Türker <cemturker92@gmail.com>\r\nDate:   Fri Jun 11 14:17:23 2021 +0200\r\n\r\n    Added GetName method for metrics (#2058)\r\n\r\n    * Added GetName method for metrics\r\n\r\n    Closes #2053\r\n\r\n    * fix indentation and only keep example for one metric.\r\n\r\n    * fix comment indentation\r\n\r\n    * remove extra new lines\r\n\r\n    * Fix lint\r\n\r\nK6/(master)$ go build . && ./k6.exe run --vus 5 --duration 1s script-websocket1.js\r\n\r\n          /\\      |‾‾| /‾‾/   /‾‾/\r\n     /\\  /  \\     |  |/  /   /  /\r\n    /  \\/    \\    |     (   /   ‾‾\\\r\n   /          \\   |  |\\  \\ |  (‾)  |\r\n  / __________ \\  |__| \\__\\ \\_____/ .io\r\n\r\n  execution: local\r\n     script: script-websocket1.js\r\n     output: -\r\n\r\n  scenarios: (100.00%) 1 scenario, 5 max VUs, 31s max duration (incl. graceful stop):\r\n           * default: 5 looping VUs for 1s (gracefulStop: 30s)\r\n\r\nWARN[0000] error getting terminal size                   error=\"The handle is invalid.\"\r\nINFO[0001] connected                                     source=console\r\nINFO[0001] connected                                     source=console\r\nINFO[0001] connected                                     source=console\r\nINFO[0001] connected                                     source=console\r\nINFO[0001] connected                                     source=console\r\n\r\nrunning (31.0s), 0/5 VUs, 0 complete and 5 interrupted iterations\r\ndefault ✓ [======================================] 5 VUs  1s\r\nWARN[0031] No script iterations finished, consider making the test duration longer\r\n\r\n     data_received...: 1.0 kB 33 B/s\r\n     data_sent.......: 1.0 kB 33 B/s\r\n     vus.............: 5      min=5      max=5\r\n     vus_max.........: 5      min=5      max=5\r\n     ws_connecting...: avg=264.24ms min=259.35ms med=264.38ms max=269.35ms p(90)=268.73ms p(95)=269.04ms\r\n     ws_sessions.....: 5      0.161261/s\r\n\r\n\r\n```\r\nI'm not sure if this issue might be related https://github.com/k6io/k6/issues/2040\r\n\r\n## Steps to Reproduce the Problem\r\n<!--- Provide the exact commands, environment variables and relevant script(s) to reproduce this bug. -->\r\n\r\n1. Get k6 version:\r\n   * git checkout 5b4409706162ddcea1644f8dbdcd69ba0e86719d (latest master) \r\n   * git checkout v0.32.0\r\n2. Copy the first script from [here](https://k6.io/docs/using-k6/protocols/websockets/) into `script.js` locally\r\n3. Run `go build . && ./k6.exe run --vus 5 --duration 1s script.js`","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/2061/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/2061/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-17T10:49:38Z","updated_at":"2021-06-17T10:49:38Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/grafana/k6/issues/2068","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/2068/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/2068/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/2068/events","html_url":"https://github.com/grafana/k6/issues/2068","id":923778605,"node_id":"MDU6SXNzdWU5MjM3Nzg2MDU=","number":2068,"title":"Refactor executor contexts?","user":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":874564661,"node_id":"MDU6TGFiZWw4NzQ1NjQ2NjE=","url":"https://api.github.com/repos/grafana/k6/labels/refactor","name":"refactor","color":"fbca04","default":false,"description":""},{"id":1079102926,"node_id":"MDU6TGFiZWwxMDc5MTAyOTI2","url":"https://api.github.com/repos/grafana/k6/labels/evaluation%20needed","name":"evaluation needed","color":"006B75","default":false,"description":"proposal needs to be validated or tested before fully implementing it in k6"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-06-17T10:49:38Z","updated_at":"2021-06-17T10:49:38Z","closed_at":null,"author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":54400687,"node_id":"MDEwOlJlcG9zaXRvcnk1NDQwMDY4Nw==","name":"k6","full_name":"grafana/k6","private":false,"owner":{"login":"grafana","id":7195757,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcxOTU3NTc=","avatar_url":"https://avatars.githubusercontent.com/u/7195757?v=4","gravatar_id":"","url":"https://api.github.com/users/grafana","html_url":"https://github.com/grafana","followers_url":"https://api.github.com/users/grafana/followers","following_url":"https://api.github.com/users/grafana/following{/other_user}","gists_url":"https://api.github.com/users/grafana/gists{/gist_id}","starred_url":"https://api.github.com/users/grafana/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grafana/subscriptions","organizations_url":"https://api.github.com/users/grafana/orgs","repos_url":"https://api.github.com/users/grafana/repos","events_url":"https://api.github.com/users/grafana/events{/privacy}","received_events_url":"https://api.github.com/users/grafana/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/grafana/k6","description":"A modern load testing tool, using Go and JavaScript","fork":false,"url":"https://api.github.com/repos/grafana/k6","forks_url":"https://api.github.com/repos/grafana/k6/forks","keys_url":"https://api.github.com/repos/grafana/k6/keys{/key_id}","collaborators_url":"https://api.github.com/repos/grafana/k6/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/grafana/k6/teams","hooks_url":"https://api.github.com/repos/grafana/k6/hooks","issue_events_url":"https://api.github.com/repos/grafana/k6/issues/events{/number}","events_url":"https://api.github.com/repos/grafana/k6/events","assignees_url":"https://api.github.com/repos/grafana/k6/assignees{/user}","branches_url":"https://api.github.com/repos/grafana/k6/branches{/branch}","tags_url":"https://api.github.com/repos/grafana/k6/tags","blobs_url":"https://api.github.com/repos/grafana/k6/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/grafana/k6/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/grafana/k6/git/refs{/sha}","trees_url":"https://api.github.com/repos/grafana/k6/git/trees{/sha}","statuses_url":"https://api.github.com/repos/grafana/k6/statuses/{sha}","languages_url":"https://api.github.com/repos/grafana/k6/languages","stargazers_url":"https://api.github.com/repos/grafana/k6/stargazers","contributors_url":"https://api.github.com/repos/grafana/k6/contributors","subscribers_url":"https://api.github.com/repos/grafana/k6/subscribers","subscription_url":"https://api.github.com/repos/grafana/k6/subscription","commits_url":"https://api.github.com/repos/grafana/k6/commits{/sha}","git_commits_url":"https://api.github.com/repos/grafana/k6/git/commits{/sha}","comments_url":"https://api.github.com/repos/grafana/k6/comments{/number}","issue_comment_url":"https://api.github.com/repos/grafana/k6/issues/comments{/number}","contents_url":"https://api.github.com/repos/grafana/k6/contents/{+path}","compare_url":"https://api.github.com/repos/grafana/k6/compare/{base}...{head}","merges_url":"https://api.github.com/repos/grafana/k6/merges","archive_url":"https://api.github.com/repos/grafana/k6/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/grafana/k6/downloads","issues_url":"https://api.github.com/repos/grafana/k6/issues{/number}","pulls_url":"https://api.github.com/repos/grafana/k6/pulls{/number}","milestones_url":"https://api.github.com/repos/grafana/k6/milestones{/number}","notifications_url":"https://api.github.com/repos/grafana/k6/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/grafana/k6/labels{/name}","releases_url":"https://api.github.com/repos/grafana/k6/releases{/id}","deployments_url":"https://api.github.com/repos/grafana/k6/deployments","created_at":"2016-03-21T15:30:24Z","updated_at":"2025-11-09T22:33:24Z","pushed_at":"2025-11-09T15:40:01Z","git_url":"git://github.com/grafana/k6.git","ssh_url":"git@github.com:grafana/k6.git","clone_url":"https://github.com/grafana/k6.git","svn_url":"https://github.com/grafana/k6","homepage":"https://grafana.com/oss/k6/","size":68631,"stargazers_count":29152,"watchers_count":29152,"language":"Go","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":1447,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":760,"license":{"key":"agpl-3.0","name":"GNU Affero General Public License v3.0","spdx_id":"AGPL-3.0","url":"https://api.github.com/licenses/agpl-3.0","node_id":"MDc6TGljZW5zZTE="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["es6","go","golang","hacktoberfest","javascript","k6","load-generator","load-testing","performance"],"visibility":"public","forks":1447,"open_issues":760,"watchers":29152,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"This originally started as a PR comment: https://github.com/k6io/k6/pull/1863#discussion_r653262620\r\n\r\nThe context hierarchy is a bit unexpected, we have:\r\n```\r\nparentCtx -> maxDurationCtx -> regDurationCtx\r\n                           \\-> maxDurationCtxWithScenarioState -> vuCtx\r\n```\r\n\r\nSo someone expecting to have the `ScenarioState` in `regDurationCtx` might be surprised. Something like this might be better:\r\n```\r\nparentCtx -> parentCtxWithScenarioState -> maxDurationCtx -> regDurationCtx\r\n                                                         \\-> vuCtx\r\n```\r\nUnfortunately, there are some implementation chicken-and-egg problems that were described in the PR thread :disappointed: \r\n\r\nOther somewhat related things:\r\n- cancelling the VU context at the end of an iteration, which recently came up in [this forum thread](https://community.k6.io/t/xk6-go-extension-not-getting-a-cancel-on-context-when-vu-exit/1911/3), but might be required for event loops (https://github.com/k6io/k6/issues/882)\r\n- test aborting (https://github.com/k6io/k6/pull/1920)\r\n- various other refactoring of the executors, especially their huge `Run()` methods and other optimizations and cleanups (https://github.com/k6io/k6/issues/1524, https://github.com/k6io/k6/issues/1302, https://github.com/k6io/k6/issues/1499)","reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/2068/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/2068/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]