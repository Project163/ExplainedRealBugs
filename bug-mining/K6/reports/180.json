{"url":"https://api.github.com/repos/grafana/k6/issues/2188","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/2188/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/2188/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/2188/events","html_url":"https://github.com/grafana/k6/issues/2188","id":1028867773,"node_id":"I_kwDOAz4Wr849U0a9","number":2188,"title":"Improve exception message on response body being null","user":{"login":"mstoykov","id":312246,"node_id":"MDQ6VXNlcjMxMjI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/312246?v=4","gravatar_id":"","url":"https://api.github.com/users/mstoykov","html_url":"https://github.com/mstoykov","followers_url":"https://api.github.com/users/mstoykov/followers","following_url":"https://api.github.com/users/mstoykov/following{/other_user}","gists_url":"https://api.github.com/users/mstoykov/gists{/gist_id}","starred_url":"https://api.github.com/users/mstoykov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstoykov/subscriptions","organizations_url":"https://api.github.com/users/mstoykov/orgs","repos_url":"https://api.github.com/users/mstoykov/repos","events_url":"https://api.github.com/users/mstoykov/events{/privacy}","received_events_url":"https://api.github.com/users/mstoykov/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":865562676,"node_id":"MDU6TGFiZWw4NjU1NjI2NzY=","url":"https://api.github.com/repos/grafana/k6/labels/ux","name":"ux","color":"5319e7","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/grafana/k6/milestones/18","html_url":"https://github.com/grafana/k6/milestone/18","labels_url":"https://api.github.com/repos/grafana/k6/milestones/18/labels","id":7085998,"node_id":"MI_kwDOAz4Wr84AbB-u","number":18,"title":"v0.35.0","description":"","creator":{"login":"na--","id":3336773,"node_id":"MDQ6VXNlcjMzMzY3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/3336773?v=4","gravatar_id":"","url":"https://api.github.com/users/na--","html_url":"https://github.com/na--","followers_url":"https://api.github.com/users/na--/followers","following_url":"https://api.github.com/users/na--/following{/other_user}","gists_url":"https://api.github.com/users/na--/gists{/gist_id}","starred_url":"https://api.github.com/users/na--/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/na--/subscriptions","organizations_url":"https://api.github.com/users/na--/orgs","repos_url":"https://api.github.com/users/na--/repos","events_url":"https://api.github.com/users/na--/events{/privacy}","received_events_url":"https://api.github.com/users/na--/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":65,"state":"closed","created_at":"2021-08-24T11:42:09Z","updated_at":"2021-11-17T10:48:09Z","due_on":"2021-11-15T08:00:00Z","closed_at":"2021-11-17T10:48:09Z"},"comments":0,"created_at":"2021-10-18T09:27:51Z","updated_at":"2021-10-25T11:30:47Z","closed_at":"2021-10-25T10:59:06Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Currently, if a script tries to use the response body in any way, but the response did timeout or failed in another way leaving it without a body, the following exception will be thrown `invalid type <nil>, expected string, []byte or ArrayBuffer\"` which while probably okay for when the line it throws it is `http.post(url, somebody)` but not `res.json(\"something\")`. \r\n\r\nI want an additional message in case the `body` is `nil`/`null`. For one `nil` means nothing to js and we definitely can go with \"The body is null so we can't transform it to json - this likely was because of a request error getting the response\". We can also definitely check that the body isn't `null` because of `responseType`/`discardResponseBodies` although that will be a bit more involved I think.\r\n\r\nThis can also be done for `.html()` as well.\r\n\r\nThis was prompted by this [community question](https://community.k6.io/t/how-to-understand-sleep-and-ramping-up-vus/2233/7), but is fairly common problem in my experience","closed_by":{"login":"codebien","id":2103732,"node_id":"MDQ6VXNlcjIxMDM3MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2103732?v=4","gravatar_id":"","url":"https://api.github.com/users/codebien","html_url":"https://github.com/codebien","followers_url":"https://api.github.com/users/codebien/followers","following_url":"https://api.github.com/users/codebien/following{/other_user}","gists_url":"https://api.github.com/users/codebien/gists{/gist_id}","starred_url":"https://api.github.com/users/codebien/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codebien/subscriptions","organizations_url":"https://api.github.com/users/codebien/orgs","repos_url":"https://api.github.com/users/codebien/repos","events_url":"https://api.github.com/users/codebien/events{/privacy}","received_events_url":"https://api.github.com/users/codebien/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/2188/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/2188/timeline","performed_via_github_app":null,"state_reason":"completed"}