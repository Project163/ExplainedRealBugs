{"url":"https://api.github.com/repos/grafana/k6/issues/211","repository_url":"https://api.github.com/repos/grafana/k6","labels_url":"https://api.github.com/repos/grafana/k6/issues/211/labels{/name}","comments_url":"https://api.github.com/repos/grafana/k6/issues/211/comments","events_url":"https://api.github.com/repos/grafana/k6/issues/211/events","html_url":"https://github.com/grafana/k6/issues/211","id":227781586,"node_id":"MDU6SXNzdWUyMjc3ODE1ODY=","number":211,"title":"Controlling requests per second","user":{"login":"mambusskruj","id":15351892,"node_id":"MDQ6VXNlcjE1MzUxODky","avatar_url":"https://avatars.githubusercontent.com/u/15351892?v=4","gravatar_id":"","url":"https://api.github.com/users/mambusskruj","html_url":"https://github.com/mambusskruj","followers_url":"https://api.github.com/users/mambusskruj/followers","following_url":"https://api.github.com/users/mambusskruj/following{/other_user}","gists_url":"https://api.github.com/users/mambusskruj/gists{/gist_id}","starred_url":"https://api.github.com/users/mambusskruj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mambusskruj/subscriptions","organizations_url":"https://api.github.com/users/mambusskruj/orgs","repos_url":"https://api.github.com/users/mambusskruj/repos","events_url":"https://api.github.com/users/mambusskruj/events{/privacy}","received_events_url":"https://api.github.com/users/mambusskruj/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":28,"created_at":"2017-05-10T19:13:02Z","updated_at":"2018-04-14T07:38:34Z","closed_at":"2017-12-15T20:37:33Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi guys, \r\nI think it might be very useful to run tests with setting wishful RPS. In general it can be like this:\r\n`k6 run --vus 10 --duration 100s --rps 200 test_script.js`\r\n\r\nOne of the ways to add this functionality is dynamically change some wait time value between execution scenarios per VU. \r\n\r\nFor example one VU needs to execute 20 requests every second. So, we need to calculate what time VU need to wait between starting to execution group with list of urls for achieve 20 requests per second. For this we need to calculate it dynamically paying attention to average response time of this group-urls.\r\n\r\nSo, if we have avg response time for set of group urls like 20ms, and VU need to achieve 20 rps, wait time will calculate like:\r\n\r\n1000ms / 20rq = 50ms (wait time between execution group if response time == 0)\r\nand then 50ms - 20ms (average group response time), so it'll be like 30ms pause for VU between execution group-scenario for achieve 20 rps.\r\n\r\nWell, maybe I do it in a wrong way, but I think more godlike people will have some ideas for this feature.\r\nLets start the conversation! \r\n\r\n","closed_by":{"login":"liclac","id":428026,"node_id":"MDQ6VXNlcjQyODAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/428026?v=4","gravatar_id":"","url":"https://api.github.com/users/liclac","html_url":"https://github.com/liclac","followers_url":"https://api.github.com/users/liclac/followers","following_url":"https://api.github.com/users/liclac/following{/other_user}","gists_url":"https://api.github.com/users/liclac/gists{/gist_id}","starred_url":"https://api.github.com/users/liclac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liclac/subscriptions","organizations_url":"https://api.github.com/users/liclac/orgs","repos_url":"https://api.github.com/users/liclac/repos","events_url":"https://api.github.com/users/liclac/events{/privacy}","received_events_url":"https://api.github.com/users/liclac/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/grafana/k6/issues/211/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/grafana/k6/issues/211/timeline","performed_via_github_app":null,"state_reason":"completed"}