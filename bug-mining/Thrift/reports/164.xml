<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:55:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-489] Java enum validation only validates explicitly assigned values</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-489</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;Java client enum validation code is rejecting any value other than those explicitly assigned inside the enum declaration.  For example:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;enum testEnum {
    valueZero = 0,
    valueOne,
    valueTwo
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;generates the following code (excerpt):&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;public class testEnum {
  public static final int valueZero = 0;
  public static final int valueOne = 1;
  public static final int valueTwo = 2;

  public static final IntRangeSet VALID_VALUES = new IntRangeSet(valueZero);
  public static final Map&amp;lt;Integer, String&amp;gt; VALUES_TO_NAMES = new HashMap&amp;lt;Integer, String&amp;gt;() {{
    put(valueZero, &quot;valueZero&quot;);
    put(valueOne, &quot;valueOne&quot;);
    put(valueTwo, &quot;valueTwo&quot;);
  }};
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If all enums are given explicit values, VALID_VALUES is initialized as follows:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  public static final IntRangeSet VALID_VALUES = new IntRangeSet(valueZero, valueOne, valueTwo);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If no explicit values are assigned, VALID_VALUES is initialized with no parameters.&lt;/p&gt;

&lt;p&gt;Verified with r764072 and r771969.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12424728">THRIFT-489</key>
            <summary>Java enum validation only validates explicitly assigned values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kbarrett">Kevin Barrett</assignee>
                                    <reporter username="kbarrett">Kevin Barrett</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 May 2009 17:05:04 +0000</created>
                <updated>Tue, 1 Nov 2011 02:51:48 +0000</updated>
                            <resolved>Fri, 29 May 2009 20:16:52 +0000</resolved>
                                                    <fixVersion>0.2</fixVersion>
                                    <component>Java - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12713715" author="kbarrett" created="Wed, 27 May 2009 20:18:07 +0000"  >&lt;p&gt;This patch fixes VALID_VALUES generation to include all identifiers, and formats the output a little.&lt;/p&gt;</comment>
                            <comment id="12713778" author="bryanduxbury" created="Wed, 27 May 2009 22:28:03 +0000"  >&lt;p&gt;This is a good change. I&apos;m ok with spreading out the init over many lines, but is there some compelling reason to introduce a bunch of extra whitespace in the constructor call? Also, can you resubmit a patch that is taken relative to the root of the project instead of way down in the source tree? &lt;/p&gt;</comment>
                            <comment id="12713851" author="kbarrett" created="Thu, 28 May 2009 03:57:30 +0000"  >&lt;p&gt;The formatting is just for consistency, and without newlines you&apos;d wind up with a pretty long line even with moderate-sized enums.  Didn&apos;t see a reason not to &amp;#8211; I&apos;m not a Java developer so apologies if it introduces a performance hit of some kind.  The simplest thing would be to just take out the if ((*c_iter)-&amp;gt;has_value()) test.&lt;/p&gt;

&lt;p&gt;I&apos;ll resubmit the patch from the project root.&lt;/p&gt;</comment>
                            <comment id="12713852" author="kbarrett" created="Thu, 28 May 2009 04:01:25 +0000"  >&lt;p&gt;Same diff taken from project root.&lt;/p&gt;</comment>
                            <comment id="12714578" author="bryanduxbury" created="Fri, 29 May 2009 20:16:52 +0000"  >&lt;p&gt;I just committed this patch (with slight spacing modifications to the first line). Thanks for the patch, Kevin!&lt;/p&gt;

&lt;p&gt;Note, I am committing this patch to trunk, not the 0.1 branch. We can discuss if we should commit it to the branch, too.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12409234" name="jvalidv_root.patch" size="1125" author="kbarrett" created="Thu, 28 May 2009 04:01:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>186679</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16byv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245071</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>