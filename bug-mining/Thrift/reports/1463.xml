<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:22:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3498] C++ library assumes optional function pthread_attr_setschedpolicy is available</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3498</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;Building on &lt;a href=&quot;http://haiku-os.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Haiku&lt;/a&gt; the latest code from git fails with&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;src/thrift/concurrency/PosixThreadFactory.cpp: In member function &apos;virtual void apache::thrift::concurrency::PthreadThread::start()&apos;:
src/thrift/concurrency/PosixThreadFactory.cpp:127:58: error: &apos;pthread_attr_setschedpolicy&apos; was not declared in this scope
     if (pthread_attr_setschedpolicy(&amp;amp;thread_attr, policy_) != 0) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is because &lt;tt&gt;pthread_attr_setschedpolicy&lt;/tt&gt; is in fact an optional function POSIX implementations are not required to provide&amp;mdash;and Haiku&apos;s POSIX-compatibility layer does not.&lt;/p&gt;

&lt;p&gt;Thrift should be checking for the availability of this function before including it in the source code. (Nothing else seems to rely on the thread-scheduling policy being available, so it&apos;s just a matter of omitting this one function call.)&lt;/p&gt;</description>
                <environment>&lt;p&gt;gcc 4.8.5 on Haiku hrev49934 (x86)&lt;/p&gt;</environment>
        <key id="12923511">THRIFT-3498</key>
            <summary>C++ library assumes optional function pthread_attr_setschedpolicy is available</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="simonsouth">Simon South</assignee>
                                    <reporter username="simonsouth">Simon South</reporter>
                        <labels>
                            <label>c++</label>
                            <label>haiku</label>
                            <label>library</label>
                            <label>posix</label>
                    </labels>
                <created>Mon, 21 Dec 2015 18:44:38 +0000</created>
                <updated>Wed, 6 Jan 2016 02:06:11 +0000</updated>
                            <resolved>Sat, 2 Jan 2016 18:13:07 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>C++ - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15066903" author="githubbot" created="Mon, 21 Dec 2015 19:10:24 +0000"  >&lt;p&gt;GitHub user simonsouth opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/754&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/754&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3498&quot; title=&quot;C++ library assumes optional function pthread_attr_setschedpolicy is available&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3498&quot;&gt;&lt;del&gt;THRIFT-3498&lt;/del&gt;&lt;/a&gt; C++ library assumes optional function pthread_attr_setschedpolicy is available&lt;/p&gt;

&lt;p&gt;    This patch allows Thrift to build on Haiku and other systems that do not implement POSIX&apos;s thread-execution scheduling option. It adds a check around the call to `pthread_attr_setschedpolicy` in the C++ library.&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;According to POSIX&amp;#93;&lt;/span&gt;(&lt;a href=&quot;http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/unistd.h.html#tag_13_77_03_02&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/unistd.h.html#tag_13_77_03_02&lt;/a&gt;) `_POSIX_THREAD_PRIORITY_SCHEDULING` should be defined in `unistd.h` with a value greater than zero if the `pthread_attr_setschedpolicy` function is known to be available at runtime.&lt;/p&gt;

&lt;p&gt;    `PosixThreadFactory.cpp`: Test for availability of optional `pthread_attr_setschedpolicy` function before including in source code&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/simonsouth/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/simonsouth/thrift&lt;/a&gt; thrift-3498-c++-library-assumes-optional-function&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/754.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/754.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #754&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 69ae417ce33526457e41b8458f9c5d25e11f3992&lt;br/&gt;
Author: Simon South &amp;lt;simon@simonsouth.com&amp;gt;&lt;br/&gt;
Date:   2015-12-21T19:01:36Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3498&quot; title=&quot;C++ library assumes optional function pthread_attr_setschedpolicy is available&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3498&quot;&gt;&lt;del&gt;THRIFT-3498&lt;/del&gt;&lt;/a&gt; C++ library assumes optional function pthread_attr_setschedpolicy is available&lt;/p&gt;

&lt;p&gt;    PosixThreadFactory.cpp: Test for availability of optional&lt;br/&gt;
    pthread_attr_setschedpolicy function before including in source code&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15076616" author="githubbot" created="Sat, 2 Jan 2016 17:59:24 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/754&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/754&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15076624" author="nsuke" created="Sat, 2 Jan 2016 18:13:07 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 46 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2q69j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>