<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:01:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-1355] Running make in lib/rb doesn&apos;t build the native extensions</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-1355</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description></description>
                <environment></environment>
        <key id="12524353">THRIFT-1355</key>
            <summary>Running make in lib/rb doesn&apos;t build the native extensions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jfarrell">Jake Farrell</assignee>
                                    <reporter username="takashi.yonebayashi">Takashi Yonebayashi</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Sep 2011 23:40:59 +0000</created>
                <updated>Fri, 23 Sep 2011 17:57:41 +0000</updated>
                            <resolved>Fri, 23 Sep 2011 17:24:12 +0000</resolved>
                                                    <fixVersion>0.8</fixVersion>
                                    <component>Ruby - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13113039" author="jfarrell" created="Thu, 22 Sep 2011 23:54:52 +0000"  >&lt;p&gt;What version is this bug against? I committed a change earlier today which will generate the gem by default when building the rb library&lt;/p&gt;</comment>
                            <comment id="13113046" author="takashi.yonebayashi" created="Fri, 23 Sep 2011 00:04:47 +0000"  >&lt;p&gt;This was against 1174393.  This is the current head.  The problem isn&apos;t with building the gem, it&apos;s with running &apos;ruby extconf.rb &amp;amp;&amp;amp; make&apos; from lib/rb/ext.  &lt;/p&gt;</comment>
                            <comment id="13113051" author="jfarrell" created="Fri, 23 Sep 2011 00:14:03 +0000"  >&lt;p&gt;Can you attach the error that you are seeing when you run &quot;rake build_ext&quot; from the lib/rb folder&lt;/p&gt;</comment>
                            <comment id="13113084" author="takashi.yonebayashi" created="Fri, 23 Sep 2011 01:01:37 +0000"  >&lt;p&gt;1)&lt;br/&gt;
Thrift::ProtocolException in &apos;Thrift::CompactProtocol should deserialize an empty map to an empty hash&apos;&lt;br/&gt;
Required field i32_map is unset!&lt;br/&gt;
./spec/../test/debug_proto/gen-rb/debug_proto_test_types.rb:385:in `validate&apos;&lt;br/&gt;
./spec/../lib/thrift/serializer/deserializer.rb:29:in `read&apos;&lt;br/&gt;
./spec/../lib/thrift/serializer/deserializer.rb:29:in `deserialize&apos;&lt;br/&gt;
./spec/compact_protocol_spec.rb:125:&lt;/p&gt;

&lt;p&gt;Finished in 3.057992 seconds&lt;/p&gt;

&lt;p&gt;This isn&apos;t likely to help you since I only get this error because I have thrift installed elsewhere that fails this test.  This means that the ext that was installed from that directory is still there after I run make.  This makes sense since when I check the ext directory after running rake build_ext (or make, etc) there are no object files.  Running make in the ext directory before running make in lib/rb fixes the tests.  &lt;/p&gt;

&lt;p&gt;If you want to reproduce this, run make clean from lib/rb/ext then run make from lib/rb.  If you check lib/rb/ext, the extensions will not have been compiled.  &lt;/p&gt;
</comment>
                            <comment id="13113085" author="takashi.yonebayashi" created="Fri, 23 Sep 2011 01:02:58 +0000"  >&lt;p&gt;To clarify, this likely won&apos;t reproduce the failure unless you have a version of the native extensions installed from another location that fails the tests.  You can reproduce the lack of compilation of the files in the ext directory.  &lt;/p&gt;</comment>
                            <comment id="13113465" author="jfarrell" created="Fri, 23 Sep 2011 14:19:27 +0000"  >&lt;p&gt;The test case added in &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1331&quot; title=&quot;Ruby library deserializes an empty map to nil&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1331&quot;&gt;&lt;del&gt;THRIFT-1331&lt;/del&gt;&lt;/a&gt; for CompactProtocolFactory deserializing an empty map to an empty hash is failing. removing this test from compact_protocol_spec.rb allowed realspec call to correctly finish and then the extension and gem to be created. Tracking down issue and will have a patch shortly &lt;/p&gt;</comment>
                            <comment id="13113565" author="takashi.yonebayashi" created="Fri, 23 Sep 2011 17:12:49 +0000"  >&lt;p&gt;I think that&apos;s the issue then.  If specs are run before the extension is built, that would cause this problem.  The extension should be built before the specs are run.  &lt;/p&gt;</comment>
                            <comment id="13113577" author="jfarrell" created="Fri, 23 Sep 2011 17:22:42 +0000"  >&lt;p&gt;Fixes ruby build&lt;/p&gt;</comment>
                            <comment id="13113578" author="jfarrell" created="Fri, 23 Sep 2011 17:24:12 +0000"  >&lt;p&gt;committed &lt;/p&gt;</comment>
                            <comment id="13113582" author="takashi.yonebayashi" created="Fri, 23 Sep 2011 17:25:28 +0000"  >&lt;p&gt;Sweet, thanks.  &lt;/p&gt;</comment>
                            <comment id="13113612" author="hudson" created="Fri, 23 Sep 2011 17:57:41 +0000"  >&lt;p&gt;Integrated in Thrift #276 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/276/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/276/&lt;/a&gt;)&lt;br/&gt;
    Thrift-1355: Running make in lib/rb doesn&apos;t build the native extensions&lt;br/&gt;
Client: rb&lt;br/&gt;
Patch: jfarrell&lt;/p&gt;

&lt;p&gt;Builds extension prior to running spec calls to resolve test deps.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12496288" name="thrift-1355.patch" size="707" author="jfarrell" created="Fri, 23 Sep 2011 17:22:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>59481</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 9 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16cev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245143</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>