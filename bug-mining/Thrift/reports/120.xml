<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:55:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-408] Ruby C extension doesn&apos;t build on 1.8.5</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-408</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;The C extension fails like so:&lt;/p&gt;

&lt;p&gt;gcc -I. -I. -I/usr/local/lib/ruby/1.8/i686-darwin8.9.1 -I/Users/kev/code/thrift/lib/rb/ext -DHAVE_STRLCPY  -fno-common -g -O2 -Wall -Werror  -c binary_protocol_accelerated.c&lt;br/&gt;
cc1: warnings being treated as errors&lt;br/&gt;
binary_protocol_accelerated.c: In function &apos;write_string_direct&apos;:&lt;br/&gt;
binary_protocol_accelerated.c:79: warning: implicit declaration of function &apos;RSTRING_LEN&apos;&lt;br/&gt;
binary_protocol_accelerated.c: In function &apos;read_byte_direct&apos;:&lt;br/&gt;
binary_protocol_accelerated.c:227: warning: implicit declaration of function &apos;RSTRING_PTR&apos;&lt;br/&gt;
binary_protocol_accelerated.c:227: error: subscripted value is neither array nor pointer&lt;br/&gt;
binary_protocol_accelerated.c: In function &apos;read_i16_direct&apos;:&lt;br/&gt;
binary_protocol_accelerated.c:232: error: subscripted value is neither array nor pointer&lt;br/&gt;
binary_protocol_accelerated.c:232: error: subscripted value is neither array nor pointer&lt;br/&gt;
binary_protocol_accelerated.c: In function &apos;read_i32_direct&apos;:&lt;br/&gt;
binary_protocol_accelerated.c:237: error: subscripted value is neither array nor pointer&lt;br/&gt;
binary_protocol_accelerated.c:238: error: subscripted value is neither array nor pointer&lt;br/&gt;
binary_protocol_accelerated.c:239: error: subscripted value is neither array nor pointer&lt;br/&gt;
binary_protocol_accelerated.c:240: error: subscripted value is neither array nor pointer&lt;/p&gt;


&lt;p&gt;This is because RSTRING_LEN and RSTRING_PTR (and also RARRAY_LEN) aren&apos;t defined by Ruby (yet). Those macros were added to make it easier for alternate implementations to support C extensions. Anyway. We can fix them in an ifdef (one for each). RSTRING_LEN is equivalent to (if we want to cast..) &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;RSTRING(rb_String(some_macro_var))-&amp;gt;len&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;. RSTIRNG_PTR is equivalent to &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;RSTRING(rb_String(some_macro_var))-&amp;gt;ptr&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;. RARRAY_LEN is equivalent to &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;RARRAY(rb_Array(some_macro_var))-&amp;gt;len&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;.&lt;/p&gt;

&lt;p&gt;Should probably be put in macros.h and included in struct.c, memory_buffer.c, and binary_protocol_accelerated.c&lt;/p&gt;</description>
                <environment></environment>
        <key id="12419450">THRIFT-408</key>
            <summary>Ruby C extension doesn&apos;t build on 1.8.5</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bryanduxbury">Bryan Duxbury</assignee>
                                    <reporter username="kclark">Kevin Clark</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Mar 2009 03:22:58 +0000</created>
                <updated>Thu, 26 Mar 2009 04:56:05 +0000</updated>
                            <resolved>Thu, 26 Mar 2009 04:56:05 +0000</resolved>
                                    <version>0.1</version>
                                                    <component>Ruby - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12689354" author="bryanduxbury" created="Thu, 26 Mar 2009 04:48:14 +0000"  >&lt;p&gt;How&apos;s this?&lt;/p&gt;</comment>
                            <comment id="12689356" author="kclark" created="Thu, 26 Mar 2009 04:51:58 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12689357" author="bryanduxbury" created="Thu, 26 Mar 2009 04:56:05 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12403685" name="thrift-408.patch" size="1054" author="bryanduxbury" created="Thu, 26 Mar 2009 04:48:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>186609</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 35 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16f5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245588</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>