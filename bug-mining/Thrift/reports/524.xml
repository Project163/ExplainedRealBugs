<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:03:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-1382] Bundle install doesnot work because thrift crashes</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-1382</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;Error running bundle install:&lt;/p&gt;

&lt;p&gt;Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.&lt;/p&gt;

&lt;p&gt;        /home/developer3/.rvm/rubies/ruby-1.9.2-head/bin/ruby extconf.rb &lt;br/&gt;
checking for strlcpy() in string.h... no&lt;br/&gt;
creating Makefile&lt;/p&gt;

&lt;p&gt;make&lt;br/&gt;
gcc -I. -I/home/developer3/.rvm/rubies/ruby-1.9.2-head/include/ruby-1.9.1/x86_64-linux -I/home/developer3/.rvm/rubies/ruby-1.9.2-head/include/ruby-1.9.1/ruby/backward -I/home/developer3/.rvm/rubies/ruby-1.9.2-head/include/ruby-1.9.1 -I.   -fPIC -g -O2 -Wall -Werror  -o thrift_native.o -c thrift_native.c&lt;br/&gt;
gcc -I. -I/home/developer3/.rvm/rubies/ruby-1.9.2-head/include/ruby-1.9.1/x86_64-linux -I/home/developer3/.rvm/rubies/ruby-1.9.2-head/include/ruby-1.9.1/ruby/backward -I/home/developer3/.rvm/rubies/ruby-1.9.2-head/include/ruby-1.9.1 -I.   -fPIC -g -O2 -Wall -Werror  -o compact_protocol.o -c compact_protocol.c&lt;br/&gt;
gcc -I. -I/home/developer3/.rvm/rubies/ruby-1.9.2-head/include/ruby-1.9.1/x86_64-linux -I/home/developer3/.rvm/rubies/ruby-1.9.2-head/include/ruby-1.9.1/ruby/backward -I/home/developer3/.rvm/rubies/ruby-1.9.2-head/include/ruby-1.9.1 -I.   -fPIC -g -O2 -Wall -Werror  -o protocol.o -c protocol.c&lt;br/&gt;
gcc -I. -I/home/developer3/.rvm/rubies/ruby-1.9.2-head/include/ruby-1.9.1/x86_64-linux -I/home/developer3/.rvm/rubies/ruby-1.9.2-head/include/ruby-1.9.1/ruby/backward -I/home/developer3/.rvm/rubies/ruby-1.9.2-head/include/ruby-1.9.1 -I.   -fPIC -g -O2 -Wall -Werror  -o struct.o -c struct.c&lt;br/&gt;
struct.c:28:1: error: static declaration of &apos;strlcpy&apos; follows non-static declaration&lt;br/&gt;
/home/developer3/.rvm/rubies/ruby-1.9.2-head/include/ruby-1.9.1/ruby/missing.h:157:20: note: previous declaration of &apos;strlcpy&apos; was here&lt;br/&gt;
make: *** &lt;span class=&quot;error&quot;&gt;&amp;#91;struct.o&amp;#93;&lt;/span&gt; Error 1&lt;/p&gt;


&lt;p&gt;Gem files will remain installed in /home/developer3/.rvm/gems/ruby-1.9.2-head@agg/gems/thrift-0.7.0 for inspection.&lt;br/&gt;
Results logged to /home/developer3/.rvm/gems/ruby-1.9.2-head@agg/gems/thrift-0.7.0/ext/gem_make.out&lt;br/&gt;
An error occured while installing thrift (0.7.0), and Bundler cannot continue.&lt;br/&gt;
Make sure that `gem install thrift -v &apos;0.7.0&apos;` succeeds before bundling.&lt;/p&gt;</description>
                <environment>&lt;p&gt;I&apos;m using ubuntu 11.10 using RVM.&lt;/p&gt;</environment>
        <key id="12526194">THRIFT-1382</key>
            <summary>Bundle install doesnot work because thrift crashes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jfarrell">Jake Farrell</assignee>
                                    <reporter username="digaoddc">rodrigo dias</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Oct 2011 12:42:55 +0000</created>
                <updated>Wed, 21 Dec 2011 07:58:09 +0000</updated>
                            <resolved>Sun, 6 Nov 2011 16:10:13 +0000</resolved>
                                    <version>0.7</version>
                                    <fixVersion>0.8</fixVersion>
                                    <component>Ruby - Library</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13126863" author="digaoddc" created="Thu, 13 Oct 2011 19:54:17 +0000"  >&lt;p&gt;changed the version of ubuntu&lt;/p&gt;</comment>
                            <comment id="13126948" author="levmatta" created="Thu, 13 Oct 2011 21:24:30 +0000"  >&lt;p&gt;I still have the problem, did you change your Ubuntu ? How is this a fix ?&lt;/p&gt;</comment>
                            <comment id="13129087" author="ytrooper" created="Mon, 17 Oct 2011 19:01:47 +0000"  >&lt;p&gt;I changed the ubuntu version too.&lt;/p&gt;</comment>
                            <comment id="13130561" author="jeanpreis" created="Wed, 19 Oct 2011 12:55:25 +0000"  >&lt;p&gt;Same problem here.&lt;/p&gt;</comment>
                            <comment id="13131313" author="jfarrell" created="Thu, 20 Oct 2011 03:37:07 +0000"  >&lt;p&gt;Do you have the libbsd-dev package installed which contains strlcpy ?&lt;/p&gt;</comment>
                            <comment id="13131587" author="digaoddc" created="Thu, 20 Oct 2011 12:52:22 +0000"  >&lt;p&gt;yes I do have this package installed.&lt;/p&gt;</comment>
                            <comment id="13131588" author="ytrooper" created="Thu, 20 Oct 2011 12:56:13 +0000"  >&lt;p&gt;yes I do have this package too.&lt;/p&gt;</comment>
                            <comment id="13131597" author="levmatta" created="Thu, 20 Oct 2011 13:13:30 +0000"  >&lt;p&gt;I did not have it, I installed it, but no positive effects. Same error here.&lt;/p&gt;</comment>
                            <comment id="13131600" author="jfarrell" created="Thu, 20 Oct 2011 13:17:45 +0000"  >&lt;p&gt;I was able to successfully build the gem last night on netty, ill setup the latest desktop version and attach the packages list and commands used when i have it working&lt;/p&gt;</comment>
                            <comment id="13131620" author="levmatta" created="Thu, 20 Oct 2011 13:24:23 +0000"  >&lt;p&gt;I can confirm that Natty works fine. My problem is just in Oneiric. Tks&lt;/p&gt;</comment>
                            <comment id="13133380" author="jfarrell" created="Sat, 22 Oct 2011 13:18:54 +0000"  >&lt;p&gt;Tracked this down last night. This is a ruby 1.9.x problem, the lib/rb/ext/struct.c has a HAVE_STRLCPY check which configure.ac does not have a AC_CHECK_FUNCS(&lt;span class=&quot;error&quot;&gt;&amp;#91;strlcpy&amp;#93;&lt;/span&gt;) for and ruby 1.9.x has the strlcpy in one of its header. Also the recent changed to use bundler to  build do not pass this check down to the makefile in the extension. For now if you need to compile the easiest hack is to just remove the strlcpy from struct.c. I will get a patch for this shortly to auto detect ruby version and that compiles from configure, from within the lib folder and using bundler by itself.&lt;/p&gt;</comment>
                            <comment id="13136673" author="jfarrell" created="Thu, 27 Oct 2011 01:24:40 +0000"  >&lt;p&gt;Patch to fix strlcpy issue in ruby extension on ubuntu 11.10&lt;/p&gt;</comment>
                            <comment id="13138563" author="levmatta" created="Fri, 28 Oct 2011 17:23:39 +0000"  >&lt;p&gt;Sorry for the ignorance, but I was not able to test it.&lt;br/&gt;
I tried applying the patch and runing &quot;rake install&quot; but this would ignore my RVM setup.&lt;br/&gt;
(I did google for RVM and Echoe, and even inspected Echoe code but I just did not get why the environment was being lost)&lt;/p&gt;

&lt;p&gt;Also tried to apply it and run bundle or gem, but this always re-downloads the gem.&lt;br/&gt;
(I have also &amp;#8211; long before &amp;#8211; tried to fork, redirect and point other to rewritten thrift but then bundler is lost)&lt;/p&gt;

&lt;p&gt;Anyway, unfortunately (due to my incompetence) I could not test it. Sorry.&lt;/p&gt;</comment>
                            <comment id="13138607" author="jfarrell" created="Fri, 28 Oct 2011 18:16:02 +0000"  >&lt;p&gt;Echoe is no longer used, we switched over to using bundler. After applying the patch to the 0.8 trunk you can run &apos;bundle exec rake&apos; in the lib/rb folder and it should create the gem for you&lt;/p&gt;</comment>
                            <comment id="13141177" author="jfarrell" created="Tue, 1 Nov 2011 13:40:28 +0000"  >&lt;p&gt;Moves strlcpy from struct.c into its own file and strlcpy.c&lt;/p&gt;</comment>
                            <comment id="13145031" author="jfarrell" created="Sun, 6 Nov 2011 16:10:13 +0000"  >&lt;p&gt;Committed patch to place strlcpy in its own file and added define of HAVE_STRLCPY when using from here.&lt;/p&gt;</comment>
                            <comment id="13145038" author="hudson" created="Sun, 6 Nov 2011 16:43:37 +0000"  >&lt;p&gt;Integrated in Thrift #323 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/323/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/323/&lt;/a&gt;)&lt;br/&gt;
    Thrift-1382: Bundle install doesnot work because thrift crashes&lt;br/&gt;
Client: ruby&lt;br/&gt;
Patch: Jake Farrell&lt;/p&gt;

&lt;p&gt;Fixes strlcpy header include issue with ruby 1.9.x.&lt;/p&gt;</comment>
                            <comment id="13145049" author="hudson" created="Sun, 6 Nov 2011 17:50:23 +0000"  >&lt;p&gt;Integrated in Thrift #324 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/324/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/324/&lt;/a&gt;)&lt;br/&gt;
    Thrift-1382: Bundle install doesnot work because thrift crashes&lt;br/&gt;
Client: ruby&lt;/p&gt;

&lt;p&gt;Adding header for strlcpy.&lt;/p&gt;</comment>
                            <comment id="13145094" author="hudson" created="Sun, 6 Nov 2011 20:15:16 +0000"  >&lt;p&gt;Integrated in Thrift #325 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/325/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/325/&lt;/a&gt;)&lt;br/&gt;
    Thrift-1382: Bundle install doesnot work because thrift crashes&lt;br/&gt;
Client: ruby&lt;/p&gt;

&lt;p&gt;Fixing strlcpy header.&lt;/p&gt;</comment>
                            <comment id="13173441" author="danko" created="Tue, 20 Dec 2011 19:17:18 +0000"  >&lt;p&gt;How to make changes?&lt;/p&gt;</comment>
                            <comment id="13173443" author="danko" created="Tue, 20 Dec 2011 19:19:14 +0000"  >&lt;p&gt;Please, write detailed instructions, the patch does not work.&lt;/p&gt;</comment>
                            <comment id="13173455" author="psanford" created="Tue, 20 Dec 2011 19:29:59 +0000"  >&lt;p&gt;The patch has been integrated into the 0.8.0 release. Try installing that gem.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ gem install thrift -v 0.8.0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13173525" author="danko" created="Tue, 20 Dec 2011 21:41:03 +0000"  >&lt;p&gt;I installed gem thrist 0.8.0, but a similar error in thrift_client 0.7.1&lt;/p&gt;</comment>
                            <comment id="13173527" author="danko" created="Tue, 20 Dec 2011 21:43:45 +0000"  >&lt;p&gt;I installed gem thrift 0.8.0, but a similar error in thrift_client 0.7.1&lt;/p&gt;</comment>
                            <comment id="13173531" author="psanford" created="Tue, 20 Dec 2011 21:46:18 +0000"  >&lt;p&gt;thrift_client has not updated its dependencies yet. There is already an open issue on the thrift_client project:  &lt;a href=&quot;https://github.com/twitter/thrift_client/pull/36&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/twitter/thrift_client/pull/36&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13173935" author="danko" created="Wed, 21 Dec 2011 07:58:09 +0000"  >&lt;p&gt;I want to install gem Cassandra, but fails because of Thrift (or Thrift_client).&lt;/p&gt;


&lt;p&gt;sudo gem install cassandra&lt;/p&gt;


&lt;p&gt;Building native extensions. This could take a while&#8230; ERROR: Error installing cassandra: ERROR: Failed to build gem native extension.&lt;/p&gt;

&lt;p&gt;/usr/bin/ruby1.9.1 extconf.rb&lt;br/&gt;
checking for strlcpy() in string.h&#8230; no creating Makefile&lt;/p&gt;

&lt;p&gt;make gcc -I. -I/usr/include/ruby-1.9.1/i686-linux -I/usr/include/ruby-1.9.1/ruby/backward -I/usr/include/ruby-1.9.1 -I. -D_FILE_OFFSET_BITS=64 -fPIC -g -O2 -Wall -Werror -o struct.o -c struct.c struct.c:28:1: &#1086;&#1096;&#1080;&#1073;&#1082;&#1072;: static-&#1076;&#1077;&#1082;&#1083;&#1072;&#1088;&#1072;&#1094;&#1080;&#1103; &#171;strlcpy&#187; &#1087;&#1086;&#1089;&#1083;&#1077; &#1085;&#1077;static-&#1076;&#1077;&#1082;&#1083;&#1072;&#1088;&#1072;&#1094;&#1080;&#1080; /usr/include/ruby-1.9.1/ruby/missing.h:157:20: &#1079;&#1072;&#1084;&#1077;&#1095;&#1072;&#1085;&#1080;&#1077;: &#1079;&#1076;&#1077;&#1089;&#1100; &#1073;&#1099;&#1083;&#1072; &#1087;&#1088;&#1077;&#1076;&#1099;&#1076;&#1091;&#1097;&#1072;&#1103; &#1076;&#1077;&#1082;&#1083;&#1072;&#1088;&#1072;&#1094;&#1080;&#1103; &#171;strlcpy&#187; make: * &lt;span class=&quot;error&quot;&gt;&amp;#91;struct.o&amp;#93;&lt;/span&gt; &#1054;&#1096;&#1080;&#1073;&#1082;&#1072; 1&lt;/p&gt;

&lt;p&gt;Gem files will remain installed in /usr/lib/ruby/gems/1.9.1/gems/thrift-0.7.0 for inspection. Results logged to /usr/lib/ruby/gems/1.9.1/gems/thrift-0.7.0/ext/gem_make.out&lt;/p&gt;



&lt;p&gt;How to install the gems? Please, help me.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12501771" name="thrift-1382.patch" size="2249" author="jfarrell" created="Tue, 1 Nov 2011 13:40:28 +0000"/>
                            <attachment id="12501009" name="thrift-1382.patch" size="315" author="jfarrell" created="Thu, 27 Oct 2011 01:24:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>50029</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i169b3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244640</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>