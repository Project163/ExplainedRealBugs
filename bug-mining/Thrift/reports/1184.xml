<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:16:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3008] Node.js server does not fully support exception</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3008</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;To my understanding (based on comment in TestThrift.thrift and C++ server behavior), servers should be able to send T(Application)Exception when an error occurred in the handler.&lt;/p&gt;

&lt;p&gt;Node.js server supports exceptions explicitly declared with &quot;throws&quot;, but does not support the type of exceptions stated above.&lt;br/&gt;
Also, the client test (lib/nodejs/test/test_driver.js) assumes current Node.js server behavior, resulting in cross test failures against C++ and Java reference implementations.&lt;/p&gt;

&lt;p&gt;This patch makes compiler generate server code that can emit errors in an identical way to C++ server code.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12776711">THRIFT-3008</key>
            <summary>Node.js server does not fully support exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="codesf">Randy Abernethy</assignee>
                                    <reporter username="nsuke">Nobuaki Sukegawa</reporter>
                        <labels>
                    </labels>
                <created>Sun, 22 Feb 2015 17:18:40 +0000</created>
                <updated>Tue, 21 Jul 2015 02:21:09 +0000</updated>
                            <resolved>Fri, 27 Feb 2015 01:05:19 +0000</resolved>
                                                    <fixVersion>0.9.3</fixVersion>
                                    <component>Node.js - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14332258" author="githubbot" created="Sun, 22 Feb 2015 17:20:00 +0000"  >&lt;p&gt;GitHub user nsuke opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/382&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/382&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3008&quot; title=&quot;Node.js server does not fully support exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3008&quot;&gt;&lt;del&gt;THRIFT-3008&lt;/del&gt;&lt;/a&gt; - Node.js server does not fully support exception&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/nsuke/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nsuke/thrift&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3008&quot; title=&quot;Node.js server does not fully support exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3008&quot;&gt;&lt;del&gt;THRIFT-3008&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/382.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/382.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #382&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 0c0d51ca1dafa5f8e0004563df780a92580590f3&lt;br/&gt;
Author: Nobuaki Sukegawa &amp;lt;nsukeg@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-02-22T16:49:22Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3008&quot; title=&quot;Node.js server does not fully support exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3008&quot;&gt;&lt;del&gt;THRIFT-3008&lt;/del&gt;&lt;/a&gt; - Node.js server does not fully support exception&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14334387" author="codesf" created="Tue, 24 Feb 2015 04:38:55 +0000"  >&lt;p&gt;Hey Nobuaki,&lt;/p&gt;

&lt;p&gt;Many thanks for the patch. I get failure only on the nodejs-&amp;gt;cpp json cross tests now (thrift/test/test.sh), big improvement. &lt;/p&gt;

&lt;p&gt;All of the promise tests in thrift/lib/nodejs/test/testAll.sh fail with this patch though so we need to bring the promise side up to date. If you can get the thrift/lib/nodejs/test/testAll.sh test to run clean again, that would be fantastic. If not I will commit the patch as is and create a new ticket for the promise cleanup.&lt;/p&gt;

&lt;p&gt;Best,&lt;br/&gt;
Randy&lt;/p&gt;

&lt;p&gt;Relevant thrift/lib/nodejs/test/testAll.sh output:&lt;br/&gt;
===================================&lt;/p&gt;

&lt;p&gt;ok 27 testInsanity&lt;br/&gt;
not ok 28 testException: TException&lt;br/&gt;
  &amp;#8212;&lt;br/&gt;
    operator: fail&lt;br/&gt;
    at: _rejected (/home/randy/thrift/node_modules/q/q.js:797:24)&lt;br/&gt;
  ...&lt;br/&gt;
ok 29 should be equal&lt;/p&gt;


&lt;p&gt;Relevant thrift/test/test.sh output:&lt;br/&gt;
===========================&lt;/p&gt;

&lt;p&gt;nodejs-nodejs    binary        buffered-ip       success(0)&lt;br/&gt;
nodejs-nodejs    binary        buffered-ip-ssl   success(0)&lt;br/&gt;
nodejs-nodejs    binary        framed-ip         success(0)&lt;br/&gt;
nodejs-nodejs    binary        framed-ip-ssl     success(0)&lt;br/&gt;
nodejs-nodejs    compact       buffered-ip       success(0)&lt;br/&gt;
nodejs-nodejs    compact       buffered-ip-ssl   success(0)&lt;br/&gt;
nodejs-nodejs    compact       framed-ip         success(0)&lt;br/&gt;
nodejs-nodejs    compact       framed-ip-ssl     success(0)&lt;br/&gt;
nodejs-nodejs    json          buffered-ip       success(0)&lt;br/&gt;
nodejs-nodejs    json          buffered-ip-ssl   success(0)&lt;br/&gt;
nodejs-nodejs    json          framed-ip         success(0)&lt;br/&gt;
nodejs-nodejs    json          framed-ip-ssl     success(0)&lt;br/&gt;
nodejs-cpp       binary        buffered-ip       success(0)&lt;br/&gt;
nodejs-cpp       binary        buffered-ip-ssl   success(0)&lt;br/&gt;
nodejs-cpp       binary        framed-ip         success(0)&lt;br/&gt;
nodejs-cpp       binary        framed-ip-ssl     success(0)&lt;br/&gt;
nodejs-cpp       compact       buffered-ip       success(0)&lt;br/&gt;
nodejs-cpp       compact       buffered-ip-ssl   success(0)&lt;br/&gt;
nodejs-cpp       compact       framed-ip         success(0)&lt;br/&gt;
nodejs-cpp       compact       framed-ip-ssl     success(0)&lt;br/&gt;
nodejs-cpp       json          buffered-ip       failure(1)&lt;br/&gt;
nodejs-cpp       json          buffered-ip-ssl   failure(1)&lt;br/&gt;
nodejs-cpp       json          framed-ip         failure(1)&lt;br/&gt;
nodejs-cpp       json          framed-ip-ssl     failure(1)&lt;br/&gt;
cpp-nodejs       binary        buffered-ip       success(0)&lt;br/&gt;
cpp-nodejs       binary        buffered-ip-ssl   success(0)&lt;br/&gt;
cpp-nodejs       binary        framed-ip         success(0)&lt;br/&gt;
cpp-nodejs       binary        framed-ip-ssl     success(0)&lt;br/&gt;
cpp-nodejs       compact       buffered-ip       success(0)&lt;br/&gt;
cpp-nodejs       compact       buffered-ip-ssl   success(0)&lt;br/&gt;
cpp-nodejs       compact       framed-ip         success(0)&lt;br/&gt;
cpp-nodejs       compact       framed-ip-ssl     success(0)&lt;br/&gt;
cpp-nodejs       json          buffered-ip       success(0)&lt;br/&gt;
cpp-nodejs       json          buffered-ip-ssl   success(0)&lt;br/&gt;
cpp-nodejs       json          framed-ip         success(0)&lt;br/&gt;
cpp-nodejs       json          framed-ip-ssl     success(0)&lt;/p&gt;</comment>
                            <comment id="14338906" author="nsuke" created="Thu, 26 Feb 2015 18:54:54 +0000"  >&lt;p&gt;Hi Randy, thanks for the review.&lt;/p&gt;

&lt;p&gt;As you pointed out, promise part of &lt;tt&gt;test_handler.js&lt;/tt&gt; needed to be updated.&lt;/p&gt;

&lt;p&gt;I also noticed that JSON test failures are caused by invalid test code for testMapMap where the argument should be int rather than map of map.&lt;/p&gt;

&lt;p&gt;I updated the pull request with above fixes.&lt;/p&gt;</comment>
                            <comment id="14339503" author="githubbot" created="Fri, 27 Feb 2015 01:03:57 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/382&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/382&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14339508" author="codesf" created="Fri, 27 Feb 2015 01:05:19 +0000"  >&lt;p&gt;Committed, many thanks!&lt;/p&gt;</comment>
                            <comment id="14339578" author="hudson" created="Fri, 27 Feb 2015 01:51:36 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1465 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1465/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1465/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3008&quot; title=&quot;Node.js server does not fully support exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3008&quot;&gt;&lt;del&gt;THRIFT-3008&lt;/del&gt;&lt;/a&gt;: Node.js server does not fully support exceptions (ra: rev bd60b92c6f31c871d5bd52debbe75394575cd786)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;compiler/cpp/src/generate/t_js_generator.cc&lt;/li&gt;
	&lt;li&gt;lib/nodejs/test/test_handler.js&lt;/li&gt;
	&lt;li&gt;lib/nodejs/test/test_driver.js&lt;/li&gt;
	&lt;li&gt;lib/nodejs/test/test-cases.js&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 38 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25wi7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>