<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:29:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-4650] Required field incorrectly marked as set when fieldType does not match</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-4650</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;The &quot;Read&quot; function that gets generated incorrectly marks required fields as being set when the type of the field does not match what&apos;s expected.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;For example, the following IDL:&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;struct Foo {&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&#160; 1: required string id&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;}&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;The generated Read function has the following:&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;switch fieldId {&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&#160; case 1:&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&#160;&#160;&#160; if fieldTypeId == thrift.STRING {&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&#160;&#160;&#160;&#160;&#160; if err := p.ReadField1(iprot); err != nil {&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; return err&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }&lt;br/&gt;
 &lt;tt&gt;&#160;&#160;&#160; } else {&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&#160;&#160;&#160;&#160;&#160; if err := iprot.Skip(fieldTypeId); err != nil {&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; return err&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }&lt;br/&gt;
 &lt;tt&gt;&#160;&#160;&#160; issetID = true&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;}&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;I ran into a case where I attempted to deserialize another message type into type Foo, and I expected it to return an error, but it did not.&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;f : = Foo{}&lt;br/&gt;
 err := thrift.NewTDeserializer().Read(&amp;amp;f, bytes)&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;I think &lt;a href=&quot;https://github.com/apache/thrift/blob/master/compiler/cpp/src/thrift/generate/t_go_generator.cc#L1600&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this code&lt;/a&gt; in the generator needs to be moved inside the first &quot;if&quot; block, so that its only set to true if it actually reads the data of the correct type.&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&#160;&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13191202">THRIFT-4650</key>
            <summary>Required field incorrectly marked as set when fieldType does not match</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="codecraig">Craig W</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Oct 2018 13:54:53 +0000</created>
                <updated>Thu, 27 Dec 2018 15:25:20 +0000</updated>
                            <resolved>Tue, 16 Oct 2018 06:40:40 +0000</resolved>
                                    <version>0.11.0</version>
                                    <fixVersion>0.12.0</fixVersion>
                                    <component>Go - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16648518" author="calcifer" created="Fri, 12 Oct 2018 22:03:57 +0000"  >&lt;p&gt;Thanks for reporting, I&apos;ll try to take a look when I can, but pull requests are welcome in the meantime.&lt;/p&gt;</comment>
                            <comment id="16648670" author="codecraig" created="Sat, 13 Oct 2018 01:20:01 +0000"  >&lt;p&gt;No problem, I was going to attempt to work on it. The first step I took was trying to run the &lt;span class=&quot;error&quot;&gt;&amp;#91;unit tests&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/thrift/blob/master/build/docker/README.md#building-like-travis-ci-does-locally)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/blob/master/build/docker/README.md#building-like-travis-ci-does-locally)&lt;/a&gt;&#160;in docker, but they failed (granted it was the master branch). I checked&#160;out the 0.11.0&#160;tag and the tests still didn&apos;t work, so I wasn&apos;t sure how to continue. I thought getting the tests to pass before making changes would be ideal. &lt;/p&gt;

&lt;p&gt;Any suggestions? Thanks!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16648794" author="calcifer" created="Sat, 13 Oct 2018 07:27:02 +0000"  >&lt;p&gt;Unfortunately, some parts of the test suite are not stable and occasionally fail. If you don&apos;t see Go related failures, you should be fine.&lt;/p&gt;</comment>
                            <comment id="16650045" author="codecraig" created="Mon, 15 Oct 2018 10:38:49 +0000"  >&lt;p&gt;I&apos;ll start working on this. Is there a way to just run the Go tests?&lt;/p&gt;</comment>
                            <comment id="16650056" author="calcifer" created="Mon, 15 Oct 2018 10:44:06 +0000"  >&lt;p&gt;After building thrift, you should be able to run &quot;make -k check&quot; in /thrift/test/go/&lt;/p&gt;

&lt;p&gt;For cross tests, you&apos;ll need to use to docker approach or open a PR and Travis will do it for you.&lt;/p&gt;</comment>
                            <comment id="16650136" author="githubbot" created="Mon, 15 Oct 2018 12:26:18 +0000"  >&lt;p&gt;mindscratch opened a new pull request #1610: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4650&quot; title=&quot;Required field incorrectly marked as set when fieldType does not match&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4650&quot;&gt;&lt;del&gt;THRIFT-4650&lt;/del&gt;&lt;/a&gt;: fixes incorrectly marking required fields as being set&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1610&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1610&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4650&quot; title=&quot;Required field incorrectly marked as set when fieldType does not match&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4650&quot;&gt;&lt;del&gt;THRIFT-4650&lt;/del&gt;&lt;/a&gt; where required fields were incorrectly being marked as having been set even if they weren&apos;t.&lt;/p&gt;

&lt;p&gt;   Client: go&lt;/p&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16650137" author="codecraig" created="Mon, 15 Oct 2018 12:26:29 +0000"  >&lt;p&gt;PR is up &lt;a href=&quot;https://github.com/apache/thrift/pull/1610&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1610&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16650143" author="githubbot" created="Mon, 15 Oct 2018 12:31:58 +0000"  >&lt;p&gt;dcelasun commented on issue #1610: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4650&quot; title=&quot;Required field incorrectly marked as set when fieldType does not match&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4650&quot;&gt;&lt;del&gt;THRIFT-4650&lt;/del&gt;&lt;/a&gt;: fixes incorrectly marking required fields as being set&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1610#issuecomment-429835160&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1610#issuecomment-429835160&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks for the PR! Would you mind adding a test that covers this change? Take a look at &lt;span class=&quot;error&quot;&gt;&amp;#91;this commit&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/thrift/commit/88591e32e710a0524327153c8b629d5b461e35e0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/commit/88591e32e710a0524327153c8b629d5b461e35e0&lt;/a&gt;) for an example.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16650179" author="githubbot" created="Mon, 15 Oct 2018 13:11:24 +0000"  >&lt;p&gt;mindscratch commented on issue #1610: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4650&quot; title=&quot;Required field incorrectly marked as set when fieldType does not match&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4650&quot;&gt;&lt;del&gt;THRIFT-4650&lt;/del&gt;&lt;/a&gt;: fixes incorrectly marking required fields as being set&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1610#issuecomment-429847032&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1610#issuecomment-429847032&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &amp;gt; Thanks for the PR! Would you mind adding a test that covers this change? Take a look at &lt;span class=&quot;error&quot;&gt;&amp;#91;this commit&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/thrift/commit/88591e32e710a0524327153c8b629d5b461e35e0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/commit/88591e32e710a0524327153c8b629d5b461e35e0&lt;/a&gt;) for an example.&lt;/p&gt;

&lt;p&gt;   What&apos;s the best/easiest method to run those tests?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16650190" author="githubbot" created="Mon, 15 Oct 2018 13:21:42 +0000"  >&lt;p&gt;mindscratch edited a comment on issue #1610: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4650&quot; title=&quot;Required field incorrectly marked as set when fieldType does not match&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4650&quot;&gt;&lt;del&gt;THRIFT-4650&lt;/del&gt;&lt;/a&gt;: fixes incorrectly marking required fields as being set&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1610#issuecomment-429847032&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1610#issuecomment-429847032&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &amp;gt; Thanks for the PR! Would you mind adding a test that covers this change? Take a look at &lt;span class=&quot;error&quot;&gt;&amp;#91;this commit&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/thrift/commit/88591e32e710a0524327153c8b629d5b461e35e0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/commit/88591e32e710a0524327153c8b629d5b461e35e0&lt;/a&gt;) for an example.&lt;/p&gt;

&lt;p&gt;   What&apos;s the best/easiest method to run those tests?  &amp;#8212; actually I see: `cd thrift/lib/go &amp;amp;&amp;amp; make check-local`&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16650194" author="githubbot" created="Mon, 15 Oct 2018 13:23:55 +0000"  >&lt;p&gt;dcelasun commented on issue #1610: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4650&quot; title=&quot;Required field incorrectly marked as set when fieldType does not match&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4650&quot;&gt;&lt;del&gt;THRIFT-4650&lt;/del&gt;&lt;/a&gt;: fixes incorrectly marking required fields as being set&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1610#issuecomment-429850776&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1610#issuecomment-429850776&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   This is mostly from memory so apologies if there are any errors.&lt;/p&gt;

&lt;p&gt;   You need to compile Thrift itself and run `make -k check` in `lib/go/test`. To compile Thrift with only Go support, run the following at the root of the repository:&lt;/p&gt;

&lt;p&gt;   ```sh&lt;br/&gt;
   $ sh bootstrap.sh&lt;br/&gt;
   $ ./configure --prefix=/usr \&lt;br/&gt;
                 --without-cpp \&lt;br/&gt;
                 --without-c_glib \&lt;br/&gt;
   	       --without-qt4 \&lt;br/&gt;
                 --without-qt5 \&lt;br/&gt;
                 --without-libevent \&lt;br/&gt;
                 --without-csharp \&lt;br/&gt;
                 --without-haskell \&lt;br/&gt;
                 --without-php \&lt;br/&gt;
                 --without-ruby \&lt;br/&gt;
                 --without-python \&lt;br/&gt;
                 --without-erlang \&lt;br/&gt;
                 --without-perl \&lt;br/&gt;
                 --without-java \&lt;br/&gt;
                 --without-c_sharp \&lt;br/&gt;
                 --without-d \&lt;br/&gt;
                 --without-php \&lt;br/&gt;
                 --with-go \&lt;br/&gt;
                 --without-lua \&lt;br/&gt;
                 --without-nodejs \&lt;br/&gt;
                 --without-rs&lt;br/&gt;
   $ make&lt;br/&gt;
   ``&lt;/p&gt;

&lt;p&gt;   This will create a `thrift` binary. Make sure that&apos;s in your `$PATH` and run `make -k check` in `lib/go/test`.&lt;/p&gt;

&lt;p&gt;   The other option is to just update your PR and let Travis run them.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16650195" author="githubbot" created="Mon, 15 Oct 2018 13:24:05 +0000"  >&lt;p&gt;dcelasun edited a comment on issue #1610: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4650&quot; title=&quot;Required field incorrectly marked as set when fieldType does not match&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4650&quot;&gt;&lt;del&gt;THRIFT-4650&lt;/del&gt;&lt;/a&gt;: fixes incorrectly marking required fields as being set&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1610#issuecomment-429850776&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1610#issuecomment-429850776&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   This is mostly from memory so apologies if there are any errors.&lt;/p&gt;

&lt;p&gt;   You need to compile Thrift itself and run `make -k check` in `lib/go/test`. To compile Thrift with only Go support, run the following at the root of the repository:&lt;/p&gt;

&lt;p&gt;   ```sh&lt;br/&gt;
   $ sh bootstrap.sh&lt;br/&gt;
   $ ./configure --prefix=/usr \&lt;br/&gt;
                 --without-cpp \&lt;br/&gt;
                 --without-c_glib \&lt;br/&gt;
   	       --without-qt4 \&lt;br/&gt;
                 --without-qt5 \&lt;br/&gt;
                 --without-libevent \&lt;br/&gt;
                 --without-csharp \&lt;br/&gt;
                 --without-haskell \&lt;br/&gt;
                 --without-php \&lt;br/&gt;
                 --without-ruby \&lt;br/&gt;
                 --without-python \&lt;br/&gt;
                 --without-erlang \&lt;br/&gt;
                 --without-perl \&lt;br/&gt;
                 --without-java \&lt;br/&gt;
                 --without-c_sharp \&lt;br/&gt;
                 --without-d \&lt;br/&gt;
                 --without-php \&lt;br/&gt;
                 --with-go \&lt;br/&gt;
                 --without-lua \&lt;br/&gt;
                 --without-nodejs \&lt;br/&gt;
                 --without-rs&lt;br/&gt;
   $ make&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;   This will create a `thrift` binary. Make sure that&apos;s in your `$PATH` and run `make -k check` in `lib/go/test`.&lt;/p&gt;

&lt;p&gt;   The other option is to just update your PR and let Travis run them.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16650202" author="githubbot" created="Mon, 15 Oct 2018 13:28:32 +0000"  >&lt;p&gt;dcelasun edited a comment on issue #1610: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4650&quot; title=&quot;Required field incorrectly marked as set when fieldType does not match&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4650&quot;&gt;&lt;del&gt;THRIFT-4650&lt;/del&gt;&lt;/a&gt;: fixes incorrectly marking required fields as being set&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1610#issuecomment-429850776&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1610#issuecomment-429850776&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   This is mostly from memory so apologies if there are any errors.&lt;/p&gt;

&lt;p&gt;   You need to compile Thrift itself and run `make -k check` in `lib/go/test`. To compile Thrift with only Go support, run the following at the root of the repository:&lt;/p&gt;

&lt;p&gt;   ```sh&lt;br/&gt;
   $ sh bootstrap.sh&lt;br/&gt;
   $ ./configure --prefix=/usr \&lt;br/&gt;
                 --without-cpp \&lt;br/&gt;
                 --without-c_glib \&lt;br/&gt;
   	       --without-qt4 \&lt;br/&gt;
                 --without-qt5 \&lt;br/&gt;
                 --without-libevent \&lt;br/&gt;
                 --without-csharp \&lt;br/&gt;
                 --without-haskell \&lt;br/&gt;
                 --without-php \&lt;br/&gt;
                 --without-ruby \&lt;br/&gt;
                 --without-python \&lt;br/&gt;
                 --without-erlang \&lt;br/&gt;
                 --without-perl \&lt;br/&gt;
                 --without-java \&lt;br/&gt;
                 --without-c_sharp \&lt;br/&gt;
                 --without-d \&lt;br/&gt;
                 --without-php \&lt;br/&gt;
                 --with-go \&lt;br/&gt;
                 --without-lua \&lt;br/&gt;
                 --without-nodejs \&lt;br/&gt;
                 --without-rs&lt;br/&gt;
   $ make&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;   This will create a `thrift` binary in `compiler/cpp/thrift`. Make sure that&apos;s in your `$PATH` and run `make -k check` in `lib/go/test`.&lt;/p&gt;

&lt;p&gt;   The other option is to just update your PR and let Travis run them.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16651222" author="githubbot" created="Tue, 16 Oct 2018 06:40:17 +0000"  >&lt;p&gt;dcelasun closed pull request #1610: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4650&quot; title=&quot;Required field incorrectly marked as set when fieldType does not match&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4650&quot;&gt;&lt;del&gt;THRIFT-4650&lt;/del&gt;&lt;/a&gt;: fixes incorrectly marking required fields as being set&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1610&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1610&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/compiler/cpp/src/thrift/generate/t_go_generator.cc b/compiler/cpp/src/thrift/generate/t_go_generator.cc&lt;br/&gt;
index b5742f6ec0..0807efbe9e 100644&lt;br/&gt;
&amp;#8212; a/compiler/cpp/src/thrift/generate/t_go_generator.cc&lt;br/&gt;
+++ b/compiler/cpp/src/thrift/generate/t_go_generator.cc&lt;br/&gt;
@@ -1591,17 +1591,19 @@ void t_go_generator::generate_go_struct_reader(ostream&amp;amp; out,&lt;br/&gt;
         &amp;lt;&amp;lt; endl;&lt;br/&gt;
     out &amp;lt;&amp;lt; indent() &amp;lt;&amp;lt; &quot;    return err&quot; &amp;lt;&amp;lt; endl;&lt;br/&gt;
     out &amp;lt;&amp;lt; indent() &amp;lt;&amp;lt; &quot;  }&quot; &amp;lt;&amp;lt; endl;&lt;br/&gt;
+&lt;br/&gt;
+    // Mark required field as read&lt;br/&gt;
+    if ((*f_iter)-&amp;gt;get_req() == t_field::T_REQUIRED) &lt;/p&gt;
{
+      const string field_name(publicize(escape_string((*f_iter)-&amp;gt;get_name())));
+      out &amp;lt;&amp;lt; indent() &amp;lt;&amp;lt; &quot;  isset&quot; &amp;lt;&amp;lt; field_name &amp;lt;&amp;lt; &quot; = true&quot; &amp;lt;&amp;lt; endl;
+    }
&lt;p&gt;+&lt;br/&gt;
     out &amp;lt;&amp;lt; indent() &amp;lt;&amp;lt; &quot;} else {&quot; &amp;lt;&amp;lt; endl;&lt;br/&gt;
     out &amp;lt;&amp;lt; indent() &amp;lt;&amp;lt; &quot;  if err := iprot.Skip(fieldTypeId); err != nil &lt;/p&gt;
{&quot; &amp;lt;&amp;lt; endl;
     out &amp;lt;&amp;lt; indent() &amp;lt;&amp;lt; &quot;    return err&quot; &amp;lt;&amp;lt; endl;
     out &amp;lt;&amp;lt; indent() &amp;lt;&amp;lt; &quot;  }
&lt;p&gt;&quot; &amp;lt;&amp;lt; endl;&lt;br/&gt;
     out &amp;lt;&amp;lt; indent() &amp;lt;&amp;lt; &quot;}&quot; &amp;lt;&amp;lt; endl;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;// Mark required field as read&lt;/li&gt;
	&lt;li&gt;if ((*f_iter)-&amp;gt;get_req() == t_field::T_REQUIRED) 
{
-      const string field_name(publicize(escape_string((*f_iter)-&amp;gt;get_name())));
-      out &amp;lt;&amp;lt; indent() &amp;lt;&amp;lt; &quot;isset&quot; &amp;lt;&amp;lt; field_name &amp;lt;&amp;lt; &quot; = true&quot; &amp;lt;&amp;lt; endl;
-    }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     indent_down();&lt;br/&gt;
   }&lt;br/&gt;
diff --git a/lib/go/test/Makefile.am b/lib/go/test/Makefile.am&lt;br/&gt;
index b7ba870857..78d468129c 100644&lt;br/&gt;
&amp;#8212; a/lib/go/test/Makefile.am&lt;br/&gt;
+++ b/lib/go/test/Makefile.am&lt;br/&gt;
@@ -27,6 +27,7 @@ gopath: $(THRIFT) $(THRIFTTEST) \&lt;br/&gt;
 				MultiplexedProtocolTest.thrift \&lt;br/&gt;
 				OnewayTest.thrift \&lt;br/&gt;
 				OptionalFieldsTest.thrift \&lt;br/&gt;
+				RequiredFieldTest.thrift \&lt;br/&gt;
 				ServicesTest.thrift \&lt;br/&gt;
 				GoTagTest.thrift \&lt;br/&gt;
 				TypedefFieldTest.thrift \&lt;br/&gt;
@@ -46,6 +47,7 @@ gopath: $(THRIFT) $(THRIFTTEST) \&lt;br/&gt;
 	$(THRIFT) $(THRIFTARGS) MultiplexedProtocolTest.thrift&lt;br/&gt;
 	$(THRIFT) $(THRIFTARGS) OnewayTest.thrift&lt;br/&gt;
 	$(THRIFT) $(THRIFTARGS) OptionalFieldsTest.thrift&lt;br/&gt;
+	$(THRIFT) $(THRIFTARGS) RequiredFieldTest.thrift&lt;br/&gt;
 	$(THRIFT) $(THRIFTARGS) ServicesTest.thrift&lt;br/&gt;
 	$(THRIFT) $(THRIFTARGS) GoTagTest.thrift&lt;br/&gt;
 	$(THRIFT) $(THRIFTARGS) TypedefFieldTest.thrift&lt;br/&gt;
@@ -96,6 +98,7 @@ EXTRA_DIST = \&lt;br/&gt;
 	NamespacedTest.thrift \&lt;br/&gt;
 	OnewayTest.thrift \&lt;br/&gt;
 	OptionalFieldsTest.thrift \&lt;br/&gt;
+	RequiredFieldTest.thrift \&lt;br/&gt;
 	RefAnnotationFieldsTest.thrift \&lt;br/&gt;
 	UnionDefaultValueTest.thrift \&lt;br/&gt;
 	UnionBinaryTest.thrift \&lt;br/&gt;
diff --git a/lib/go/test/RequiredFieldTest.thrift b/lib/go/test/RequiredFieldTest.thrift&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 0000000000..4a2dcaeba9&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/lib/go/test/RequiredFieldTest.thrift&lt;br/&gt;
@@ -0,0 +1,7 @@&lt;br/&gt;
+struct RequiredField &lt;/p&gt;
{
+  1: required string name
+}
&lt;p&gt;+&lt;br/&gt;
+struct OtherThing &lt;/p&gt;
{
+  1: required i16 value
+}
&lt;p&gt;diff --git a/lib/go/test/tests/required_fields_test.go b/lib/go/test/tests/required_fields_test.go&lt;br/&gt;
index 287ef60c3b..3fa414ad82 100644&lt;br/&gt;
&amp;#8212; a/lib/go/test/tests/required_fields_test.go&lt;br/&gt;
+++ b/lib/go/test/tests/required_fields_test.go&lt;br/&gt;
@@ -20,12 +20,45 @@&lt;br/&gt;
 package tests&lt;/p&gt;

&lt;p&gt; import (&lt;br/&gt;
+	&quot;context&quot;&lt;br/&gt;
 	&quot;github.com/golang/mock/gomock&quot;&lt;br/&gt;
 	&quot;optionalfieldstest&quot;&lt;br/&gt;
+	&quot;requiredfieldtest&quot;&lt;br/&gt;
 	&quot;testing&quot;&lt;br/&gt;
 	&quot;thrift&quot;&lt;br/&gt;
 )&lt;/p&gt;

&lt;p&gt;+func TestRequiredField_SucecssWhenSet(t *testing.T) {&lt;br/&gt;
+	// create a new RequiredField instance with the required field set&lt;br/&gt;
+	source := &amp;amp;requiredfieldtest.RequiredField&lt;/p&gt;
{Name: &quot;this is a test&quot;}
&lt;p&gt;+	sourceData, err := thrift.NewTSerializer().Write(context.Background(), source)&lt;br/&gt;
+	if err != nil &lt;/p&gt;
{
+		t.Fatalf(&quot;failed to serialize %T: %v&quot;, source, err)
+	}
&lt;p&gt;+&lt;br/&gt;
+	d := thrift.NewTDeserializer()&lt;br/&gt;
+	err = d.Read(&amp;amp;requiredfieldtest.RequiredField{}, sourceData)&lt;br/&gt;
+	if err != nil &lt;/p&gt;
{
+		t.Fatalf(&quot;Did not expect an error when trying to deserialize the requiredfieldtest.RequiredField: %v&quot;, err)
+	}
&lt;p&gt;+}&lt;br/&gt;
+&lt;br/&gt;
+func TestRequiredField_ErrorWhenMissing(t *testing.T) {&lt;br/&gt;
+	// create a new OtherThing instance, without setting the required field&lt;br/&gt;
+	source := &amp;amp;requiredfieldtest.OtherThing{}&lt;br/&gt;
+	sourceData, err := thrift.NewTSerializer().Write(context.Background(), source)&lt;br/&gt;
+	if err != nil &lt;/p&gt;
{
+		t.Fatalf(&quot;failed to serialize %T: %v&quot;, source, err)
+	}
&lt;p&gt;+&lt;br/&gt;
+	// attempt to deserialize into a different type (which should fail)&lt;br/&gt;
+	d := thrift.NewTDeserializer()&lt;br/&gt;
+	err = d.Read(&amp;amp;requiredfieldtest.RequiredField{}, sourceData)&lt;br/&gt;
+	if err == nil &lt;/p&gt;
{
+		t.Fatal(&quot;Expected an error when trying to deserialize an object which is missing a required field&quot;)
+	}
&lt;p&gt;+}&lt;br/&gt;
+&lt;br/&gt;
 func TestStructReadRequiredFields(t *testing.T) {&lt;br/&gt;
 	mockCtrl := gomock.NewController(t)&lt;br/&gt;
 	protocol := NewMockTProtocol(mockCtrl)&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3z4s7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>