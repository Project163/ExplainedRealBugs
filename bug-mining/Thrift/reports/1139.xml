<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:15:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-2906] library not found for -l:libboost_unit_test_framework.a</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-2906</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;The &lt;tt&gt;ld(1)&lt;/tt&gt; (clang) that ships with Mac OS X 10.10.1 doesn&apos;t understand the &lt;tt&gt;-l:libfoo.a&lt;/tt&gt; syntax that it used to link &lt;tt&gt;libboost_unit_test_framework.a&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/bin/sh ../../../libtool  --tag=CXX   --mode=link g++ -Wall -Wextra -pedantic -g -O2 -std=c++11 -L/usr/local/lib  -o processor_test processor/ProcessorTest.o processor/EventLog.o processor/ServerThread.o libprocessortest.la ../../../lib/cpp/libthrift.la ../../../lib/cpp/libthriftnb.la -L/usr/local/lib -levent -l:libboost_unit_test_framework.a -lssl -lcrypto -lpthread
libtool: link: g++ -Wall -Wextra -pedantic -g -O2 -std=c++11 -o .libs/processor_test processor/ProcessorTest.o processor/EventLog.o processor/ServerThread.o -Wl,-bind_at_load  -L/usr/local/lib ./.libs/libprocessortest.a ../../../lib/cpp/.libs/libthrift.dylib -L/usr/local/Cellar/openssl/1.0.1j_1/lib ../../../lib/cpp/.libs/libthriftnb.dylib -levent -l:libboost_unit_test_framework.a -lssl -lcrypto -lpthread
ld: library not found &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; -l:libboost_unit_test_framework.a
clang: error: linker command failed with exit code 1 (use -v to see invocation)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Mac OS X 10.10.1 (Darwin 14.0.0)&lt;/p&gt;

&lt;p&gt;Apple LLVM version 6.0 (clang-600.0.54) (based on LLVM 3.5svn)&lt;br/&gt;
Target: x86_64-apple-darwin14.0.0&lt;br/&gt;
Thread model: posix&lt;/p&gt;</environment>
        <key id="12762882">THRIFT-2906</key>
            <summary>library not found for -l:libboost_unit_test_framework.a</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png" description="This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.">Reopened</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="hcorg">Konrad Grochowski</assignee>
                                    <reporter username="jparise">Jon Parise</reporter>
                        <labels>
                            <label>build</label>
                            <label>patch</label>
                    </labels>
                <created>Fri, 19 Dec 2014 16:21:25 +0000</created>
                <updated>Sat, 14 Nov 2020 08:44:30 +0000</updated>
                                            <version>0.9.2</version>
                                                    <component>Build Process</component>
                    <component>C++ - Compiler</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14253600" author="githubbot" created="Fri, 19 Dec 2014 16:23:55 +0000"  >&lt;p&gt;GitHub user jparise opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/333&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Directly link libboost_unit_test_framework.a.&lt;/p&gt;

&lt;p&gt;    Not all linkers support the `-l:libfoo.a` syntax (notably ld(1) on Mac&lt;br/&gt;
    OS X).  For full compatibility, we want to link directly against the&lt;br/&gt;
    static library using its full path.&lt;/p&gt;

&lt;p&gt;    (We can&apos;t link the dynamic version of this library because of the way&lt;br/&gt;
    that the `_main()` symbol is defined and used by the Thrift unit tests.)&lt;/p&gt;

&lt;p&gt;    Unfortunately, AX_BOOST_BASE doesn&apos;t expose the selected library path&lt;br/&gt;
    as a variable, so we derive BOOST_LIB_DIR from BOOST_LDPATH instead.&lt;br/&gt;
    That variable is defined conditionally on C++ and Boost support.&lt;/p&gt;

&lt;p&gt;    Lastly, I looked at the GNU AX_BOOST_UNIT_TEST_FRAMEWORK macro.  It&lt;br/&gt;
    unfortunately prefers the dynamic library over the static one (see&lt;br/&gt;
    above), so it&apos;s not suitable for our use case.  That macro could be&lt;br/&gt;
    extended to take an argument (e.g. &apos;static&apos;) which would force the use&lt;br/&gt;
    of the static library, but that felt unnecessary here.&lt;/p&gt;

&lt;p&gt;    Fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2906&quot; title=&quot;library not found for -l:libboost_unit_test_framework.a&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2906&quot;&gt;THRIFT-2906&lt;/a&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2906&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/THRIFT-2906&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jparise/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jparise/thrift&lt;/a&gt; thrift-2906&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/333.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/333.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #333&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 76577ed0189a628275246552e60ebbceb3c2cf4a&lt;br/&gt;
Author: Jon Parise &amp;lt;jon@pinterest.com&amp;gt;&lt;br/&gt;
Date:   2014-12-19T01:51:46Z&lt;/p&gt;

&lt;p&gt;    Directly link libboost_unit_test_framework.a.&lt;/p&gt;

&lt;p&gt;    Not all linkers support the `-l:libfoo.a` syntax (notably ld(1) on Mac&lt;br/&gt;
    OS X).  For full compatibility, we want to link directly against the&lt;br/&gt;
    static library using its full path.&lt;/p&gt;

&lt;p&gt;    (We can&apos;t link the dynamic version of this library because of the way&lt;br/&gt;
    that the _main() symbol is defined and used by the Thrift unit tests.)&lt;/p&gt;

&lt;p&gt;    Unfortunately, AX_BOOST_BASE doesn&apos;t expose the selected library path&lt;br/&gt;
    as a variable, so we derive BOOST_LIB_DIR from BOOST_LDPATH instead.&lt;br/&gt;
    That variable is defined conditionally on C++ and Boost support.&lt;/p&gt;

&lt;p&gt;    Lastly, I looked at the GNU AX_BOOST_UNIT_TEST_FRAMEWORK macro.  It&lt;br/&gt;
    unfortunately prefers the dynamic library over the static one (see&lt;br/&gt;
    above), so it&apos;s not suitable for our use case.  That macro could be&lt;br/&gt;
    extended to take an argument (e.g. &apos;static&apos;) which would force the use&lt;br/&gt;
    of the static library, but that felt unnecessary here.&lt;/p&gt;

&lt;p&gt;    Fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2906&quot; title=&quot;library not found for -l:libboost_unit_test_framework.a&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2906&quot;&gt;THRIFT-2906&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14253601" author="hcorg" created="Fri, 19 Dec 2014 16:26:44 +0000"  >&lt;p&gt;maybe it would be better to just change all includes to &quot;boost/test/include&quot; and remove linking at all. I&apos;m pretty sure direct linking was already tested and it too didn&apos;t work on some envs&lt;/p&gt;</comment>
                            <comment id="14253615" author="jparise" created="Fri, 19 Dec 2014 16:38:09 +0000"  >&lt;p&gt;My understanding (from the commit logs, at least) is that direct linking failed because an older &lt;tt&gt;AX_BOOST_BASE&lt;/tt&gt; macro wasn&apos;t aware of some newer (e.g. x64) lib path names.  This proposed change builds the static library&apos;s full path based on &lt;tt&gt;BOOST_LDPATH&lt;/tt&gt;, so it should be as good as the dynamic linking logic.&lt;/p&gt;

&lt;p&gt;Your proposal also sounds reasonable, but I&apos;m not very familiar with the Boost unit testing framework, so I&apos;d have to read a bit more to have more of an opinion.&lt;/p&gt;</comment>
                            <comment id="14254084" author="jparise" created="Fri, 19 Dec 2014 21:52:48 +0000"  >&lt;p&gt;I read through these two notes:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.boost.org/doc/libs/1_55_0/libs/test/doc/html/utf/compilation/direct-include.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.boost.org/doc/libs/1_55_0/libs/test/doc/html/utf/compilation/direct-include.html&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.boost.org/doc/libs/1_55_0/libs/test/doc/html/utf/user-guide/usage-variants/single-header-variant.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.boost.org/doc/libs/1_55_0/libs/test/doc/html/utf/user-guide/usage-variants/single-header-variant.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The single-header variant is attractive but appears to be discouraged, particularly because of the increased build time.  Given that thrift already isn&apos;t a quickly-built project, and that the cost increases linearly paid per-test-module, I don&apos;t know if that&apos;s a tradeoff we&apos;d want to make.&lt;/p&gt;

&lt;p&gt;Assuming my proposed solution covers all supported build environments, it feels like the best way forward.&lt;/p&gt;</comment>
                            <comment id="14254674" author="githubbot" created="Sat, 20 Dec 2014 11:50:57 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/333&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14254696" author="hcorg" created="Sat, 20 Dec 2014 12:15:53 +0000"  >&lt;p&gt;It worked on my env, so - pushed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve changed it a little bit - I&apos;ve added BOOST_TEST_LDADD variable, so future changes in linking (if needed) should be made easier.&lt;/p&gt;

&lt;p&gt;Thanks for patch!&lt;/p&gt;</comment>
                            <comment id="14254698" author="hudson" created="Sat, 20 Dec 2014 12:17:25 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1409 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1409/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1409/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2906&quot; title=&quot;library not found for -l:libboost_unit_test_framework.a&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2906&quot;&gt;THRIFT-2906&lt;/a&gt; - linking with boost_unit_test_framework made more portable (hcorg: rev ec8d8778b51341a7c661f05e3e84465f437fd006)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/cpp/test/Makefile.am&lt;/li&gt;
	&lt;li&gt;configure.ac&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16359424" author="jensg" created="Sat, 10 Feb 2018 13:05:09 +0000"  >&lt;p&gt;This one is back. Environment openSuse Tumbleweed. Something between 0.11.0 and today&apos;s master broke it. The &lt;tt&gt;make&lt;/tt&gt; command works, but &lt;tt&gt;make check&lt;/tt&gt; nearly immediately stops with that error again.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12753402">THRIFT-2799</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13340562">THRIFT-5311</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12873135">THRIFT-3327</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12845803">THRIFT-3249</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12618586">THRIFT-1771</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 40 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23mlr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>