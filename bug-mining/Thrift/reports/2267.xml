<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:35:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-5706] C++ SecurityTest/SecurityFromBufferTest won&apos;t build with OpenSSL v1</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-5706</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;C++ SecurityTest / SecurityFromBufferTest hit this error when trying to build:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SecurityTest.cpp: In member function &#8216;void SecurityTest::ssl_security_matrix::test_method()&#8217;:
SecurityTest.cpp:224:22: error: &#8216;OPENSSL_VERSION_MAJOR&#8217; was not declared in this scope; did you mean &#8216;OPENSSL_VERSION_NUMBER&#8217;?
&#160; 224 | &#160; &#160; &#160; &#160; bool ossl1 = OPENSSL_VERSION_MAJOR == 1;
&#160; &#160; &#160; | &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;^~~~~~~~~~~~~~~~~~~~~
&#160; &#160; &#160; | &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;OPENSSL_VERSION_NUMBER
make[5]: *** [Makefile:1407: SecurityTest.o] Error 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;OPENSSL_VERSION_MAJOR is new in OpenSSL 3. Older versions of OpenSSL used OPENSSL_VERSION_NUMBER. Here is the description from my Ubuntu 20 box:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;/*-
&#160;* Numeric release version identifier:
&#160;* MNNFFPPS: major minor fix patch status
&#160;* The status nibble has one of the values 0 for development, 1 to e for betas
&#160;* 1 to 14, and f for release. &#160;The patch level is exactly that.
&#160;* For example:
&#160;* 0.9.3-dev &#160; &#160; &#160;0x00903000
&#160;* 0.9.3-beta1 &#160; &#160;0x00903001
&#160;* 0.9.3-beta2-dev 0x00903002
&#160;* 0.9.3-beta2 &#160; &#160;0x00903002 (same as ...beta2-dev)
&#160;* 0.9.3 &#160; &#160; &#160; &#160; &#160;0x0090300f
&#160;* 0.9.3a &#160; &#160; &#160; &#160; 0x0090301f
&#160;* 0.9.4 &#160; &#160; &#160; &#160; &#160;0x0090400f
&#160;* 1.2.3z &#160; &#160; &#160; &#160; 0x102031af
&#160;*
&#160;* For continuity reasons (because 0.9.5 is already out, and is coded
&#160;* 0x00905100), between 0.9.5 and 0.9.6 the coding of the patch level
&#160;* part is slightly different, by setting the highest bit. &#160;This means
&#160;* that 0.9.5a looks like this: 0x0090581f. &#160;At 0.9.6, we can start
&#160;* with 0x0090600S...
&#160;*
&#160;* (Prior to 0.9.3-dev a different scheme was used: 0.9.2b is 0x0922.)
&#160;* (Prior to 0.9.5a beta1, a different scheme was used: MMNNFFRBB for
&#160;* &#160;major minor fix final patch/beta)
&#160;*/
# define OPENSSL_VERSION_NUMBER &#160;0x1010106fL&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13535570">THRIFT-5706</key>
            <summary>C++ SecurityTest/SecurityFromBufferTest won&apos;t build with OpenSSL v1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thomasbruggink">Thomas Bruggink</assignee>
                                    <reporter username="joemcdonnell">Joe McDonnell</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 May 2023 01:06:08 +0000</created>
                <updated>Thu, 26 Sep 2024 14:15:28 +0000</updated>
                            <resolved>Thu, 26 Sep 2024 14:15:28 +0000</resolved>
                                    <version>0.19.0</version>
                                    <fixVersion>0.21.0</fixVersion>
                                    <component>C++ - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="7200">2h</timespent>
                                <comments>
                            <comment id="17721130" author="joemcdonnell" created="Wed, 10 May 2023 01:07:36 +0000"  >&lt;p&gt;OpenSSL 3 still provides OPENSSL_VERSION_NUMBER, so the following should work:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&#160; &#160; &#160; &#160; bool ossl1 = (OPENSSL_VERSION_NUMBER &amp;amp; 0xff000000L) == 0x10000000L;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17721489" author="joemcdonnell" created="Wed, 10 May 2023 17:46:53 +0000"  >&lt;p&gt;The reason this was added is that OpenSSL can be built with TLS 1.0 / 1.1 defaulting to off. However, this is not specific to OpenSSL 3. On Ubuntu 20.04, OpenSSL 1.1.1 is built with TLS 1.0/1.1 off by default. See this Ubuntu thread: &lt;a href=&quot;https://discourse.ubuntu.com/t/default-to-tls-v1-2-in-all-tls-libraries-in-20-04-lts/12464/3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://discourse.ubuntu.com/t/default-to-tls-v1-2-in-all-tls-libraries-in-20-04-lts/12464/3&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It seems like what we really want to do is set @SECLEVEL=1 for this test. On my Ubuntu 20 setup, that works. We can check with Ubuntu 22 to see what happens for OpenSSL 3. Edit: On Ubuntu 22 / OpenSSL 3, this would require @SECLEVEL=0 rather than 1.&lt;/p&gt;</comment>
                            <comment id="17885034" author="thomasbruggink" created="Thu, 26 Sep 2024 14:15:17 +0000"  >&lt;p&gt;confirmed as resolved in thrift 0.21.0&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 6 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1hsfc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>