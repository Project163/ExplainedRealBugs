<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:54:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-298] Exception propagation seems broken for Ruby clients</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-298</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;Instead of raising the user defined exception, it&apos;s ../../lib/rb/lib/thrift/struct.rb:176:in `initialize&apos;: wrong number of arguments (0 for 1) (ArgumentError)&lt;/p&gt;

&lt;p&gt;Any thrift service that throws user defined exceptions would get the same exception. Here is an example for the included tutorial:&lt;/p&gt;

&lt;p&gt;$ ./RubyClient.rb &lt;br/&gt;
ping()&lt;br/&gt;
ping()&lt;br/&gt;
add(1,1)&lt;br/&gt;
1+1=2&lt;br/&gt;
add(1,4)&lt;br/&gt;
1+4=5&lt;br/&gt;
calculate(1, Work(comment=None, num1=15, num2=10, op=2))&lt;br/&gt;
15-10=5&lt;br/&gt;
getStruct(1)&lt;br/&gt;
Log: 5&lt;br/&gt;
calculate(1, Work(comment=None, num1=1, num2=0, op=4))&lt;br/&gt;
../../lib/rb/lib/thrift/struct.rb:176:in `initialize&apos;: wrong number of arguments (0 for 1) (ArgumentError)&lt;br/&gt;
        from ../../lib/rb/lib/thrift/struct.rb:176:in `call&apos;&lt;br/&gt;
        from ../../lib/rb/lib/thrift/struct.rb:176:in `exception_initialize&apos;&lt;br/&gt;
        from ../../lib/rb/lib/thrift/struct.rb:194:in `initialize&apos;&lt;br/&gt;
        from ../../lib/rb/lib/thrift/struct.rb:194:in `new&apos;&lt;br/&gt;
        from ../../lib/rb/lib/thrift/struct.rb:194:in `read_field&apos;&lt;br/&gt;
        from ../../lib/rb/lib/thrift/struct.rb:184:in `handle_message&apos;&lt;br/&gt;
        from ../../lib/rb/lib/thrift/struct.rb:95:in `read&apos;&lt;br/&gt;
        from ../../lib/rb/lib/thrift/struct.rb:92:in `loop&apos;&lt;br/&gt;
        from ../../lib/rb/lib/thrift/struct.rb:92:in `read&apos;&lt;br/&gt;
        from ../../lib/rb/lib/thrift/client.rb:29:in `receive_message&apos;&lt;br/&gt;
        from ../gen-rb/Calculator.rb:55:in `recv_calculate&apos;&lt;br/&gt;
        from ../gen-rb/Calculator.rb:47:in `calculate&apos;&lt;br/&gt;
        from ./RubyClient.rb:44&lt;/p&gt;

&lt;p&gt;I&apos;ve verified that this is broken in the current trunk (and quite a few commits back as well)&lt;/p&gt;

&lt;p&gt;This is a blocker for us to release another open source package using thrift.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12413689">THRIFT-298</key>
            <summary>Exception propagation seems broken for Ruby clients</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vicaya">Luke Lu</assignee>
                                    <reporter username="vicaya">Luke Lu</reporter>
                        <labels>
                    </labels>
                <created>Sat, 31 Jan 2009 09:36:34 +0000</created>
                <updated>Tue, 3 Feb 2009 01:17:25 +0000</updated>
                            <resolved>Tue, 3 Feb 2009 00:32:30 +0000</resolved>
                                                                    <component>Ruby - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12669474" author="vicaya" created="Sun, 1 Feb 2009 22:56:25 +0000"  >&lt;p&gt;Looks like there is a simple one line fix for this problem (see attached patch)&lt;/p&gt;

&lt;p&gt;Our exceptions now works fine and the tutorial output looks more reasonable:&lt;/p&gt;

&lt;p&gt;$ ./RubyClient.rb &lt;br/&gt;
ping()&lt;br/&gt;
ping()&lt;br/&gt;
add(1,1)&lt;br/&gt;
1+1=2&lt;br/&gt;
add(1,4)&lt;br/&gt;
1+4=5&lt;br/&gt;
calculate(1, Work(comment=None, num1=15, num2=10, op=2))&lt;br/&gt;
15-10=5&lt;br/&gt;
getStruct(1)&lt;br/&gt;
Log: 5&lt;br/&gt;
calculate(1, Work(comment=None, num1=1, num2=0, op=4))&lt;br/&gt;
InvalidOperation: Cannot divide by 0&lt;br/&gt;
zip&lt;br/&gt;
zip()&lt;/p&gt;</comment>
                            <comment id="12669484" author="bryanduxbury" created="Mon, 2 Feb 2009 00:52:58 +0000"  >&lt;p&gt;Any chance of adding an explicit spec to ruby lib for this?&lt;/p&gt;</comment>
                            <comment id="12669490" author="vicaya" created="Mon, 2 Feb 2009 01:56:58 +0000"  >&lt;p&gt;I guessed just enough to fix the problem but I don&apos;t understand the code enough to write a correct spec for this. I think the original author of the feature (Kevin Ballard (committed by Kevin Clark), I believe, according to the log) and whoever is refactoring ruby protocols (in this case, you, Bryan) should write specs for all the features of thrift.&lt;/p&gt;</comment>
                            <comment id="12669494" author="bryanduxbury" created="Mon, 2 Feb 2009 02:29:11 +0000"  >&lt;p&gt;Well, if you can believe it, I don&apos;t get what&apos;s going on here, either &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. I think this code is a little too complicated. For now, I think I&apos;ll just apply your patch, and hopefully one day it won&apos;t be a problem, as I refactor my way through the Ruby libraries.&lt;/p&gt;</comment>
                            <comment id="12669811" author="bryanduxbury" created="Tue, 3 Feb 2009 00:32:30 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;</comment>
                            <comment id="12669831" author="vicaya" created="Tue, 3 Feb 2009 01:17:25 +0000"  >&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12399252" name="0001-THRIFT-298-Fixed-generated-exception-propagation-in.patch" size="1015" author="vicaya" created="Sun, 1 Feb 2009 22:56:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>186514</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 43 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16fbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245614</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>