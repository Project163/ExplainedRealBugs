<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:02:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-1277] Node.js serializes false booleans as null</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-1277</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;When serializing boolean types, false booleans are serialized as null instead of false.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12519287">THRIFT-1277</key>
            <summary>Node.js serializes false booleans as null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="henrique">Henrique Mendonca</assignee>
                                    <reporter username="cypres">Hans Duedal</reporter>
                        <labels>
                            <label>compiler</label>
                            <label>node</label>
                            <label>nodejs</label>
                    </labels>
                <created>Thu, 18 Aug 2011 12:25:26 +0000</created>
                <updated>Fri, 11 May 2012 00:41:42 +0000</updated>
                            <resolved>Sun, 15 Apr 2012 15:58:15 +0000</resolved>
                                    <version>0.7</version>
                                    <fixVersion>0.9</fixVersion>
                                    <component>JavaScript - Compiler</component>
                    <component>Node.js - Compiler</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13087109" author="wadey" created="Thu, 18 Aug 2011 16:50:33 +0000"  >&lt;p&gt;This will serialize `undefined` as `true`. Perhaps use `!= null` instead which catches both `undefined` and `null`.&lt;/p&gt;</comment>
                            <comment id="13087153" author="cypres" created="Thu, 18 Aug 2011 18:03:05 +0000"  >&lt;p&gt;But since all values are initialized with null during the &quot;construct&quot; will they ever be undefined? But it won&apos;t hurt to do loose compare anyway.&lt;/p&gt;</comment>
                            <comment id="13087164" author="cypres" created="Thu, 18 Aug 2011 18:12:09 +0000"  >&lt;p&gt;Patch using loose compare instead&lt;/p&gt;</comment>
                            <comment id="13144681" author="jfarrell" created="Sat, 5 Nov 2011 13:20:28 +0000"  >&lt;p&gt;Committed &lt;/p&gt;</comment>
                            <comment id="13144690" author="hudson" created="Sat, 5 Nov 2011 13:49:21 +0000"  >&lt;p&gt;Integrated in Thrift #317 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/317/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/317/&lt;/a&gt;)&lt;br/&gt;
    Thrift-1277: Node.js serializes false booleans as null&lt;br/&gt;
Client: js&lt;br/&gt;
Patch: Hans Duedal &lt;/p&gt;

&lt;p&gt;When serializing boolean types, false booleans are serialized as null instead of false switching to  using loose compare instead&lt;/p&gt;</comment>
                            <comment id="13144768" author="roger.meier" created="Sat, 5 Nov 2011 18:01:43 +0000"  >&lt;p&gt;This breaks JavaScript jslint, see &lt;a href=&quot;https://builds.apache.org/job/Thrift/317/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/317/console&lt;/a&gt; and unittest:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;unittest:
     [echo] Running Unit Tests with headless browser!
     [exec] Test testInsanity died, exception and test follows
     [exec] TypeError: Result of expression &apos;this.argument.write&apos; [undefined] is not a function.
     [exec] function () {
     [exec]     var insanity = {
     [exec]       &quot;1&quot;:{
     [exec]         &quot;2&quot;:{
     [exec]           &quot;userMap&quot;:{ &quot;5&quot;:5, &quot;8&quot;:8 },
     [exec]           &quot;xtructs&quot;:[{
     [exec]               &quot;string_thing&quot;:&quot;Goodbye4&quot;,
     [exec]               &quot;byte_thing&quot;:4,
     [exec]               &quot;i32_thing&quot;:4,
     [exec]               &quot;i64_thing&quot;:4
     [exec]             },
     [exec]             {
     [exec]               &quot;string_thing&quot;:&quot;Hello2&quot;,
     [exec]               &quot;byte_thing&quot;:2,
     [exec]               &quot;i32_thing&quot;:2,
     [exec]               &quot;i64_thing&quot;:2
     [exec]             }
     [exec]           ]
     [exec]         },
     [exec]         &quot;3&quot;:{
     [exec]           &quot;userMap&quot;:{ &quot;5&quot;:5, &quot;8&quot;:8 },
     [exec]           &quot;xtructs&quot;:[{
     [exec]               &quot;string_thing&quot;:&quot;Goodbye4&quot;,
     [exec]               &quot;byte_thing&quot;:4,
     [exec]               &quot;i32_thing&quot;:4,
     [exec]               &quot;i64_thing&quot;:4
     [exec]             },
     [exec]             {
     [exec]               &quot;string_thing&quot;:&quot;Hello2&quot;,
     [exec]               &quot;byte_thing&quot;:2,
     [exec]               &quot;i32_thing&quot;:2,
     [exec]               &quot;i64_thing&quot;:2
     [exec]             }
     [exec]           ]
     [exec]         }
     [exec]       },
     [exec]       &quot;2&quot;:{ &quot;6&quot;:{ &quot;userMap&quot;:null, &quot;xtructs&quot;:null } }
     [exec]     };
     [exec]     var res = client.testInsanity(&quot;&quot;);
     [exec]     ok(res, JSON.stringify(res));
     [exec]     ok(insanity, JSON.stringify(insanity));
     [exec]
     [exec]     checkRecursively(res, insanity);
     [exec]   }
     [exec] &apos;waitFor()&apos; finished in 1644ms.
     [exec] Tests completed in 1654 milliseconds.
     [exec] 66 tests of 67 passed, 1 failed.
     [java] Timeout: killed the sub-process
     [java] Java Result: -1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13144973" author="roger.meier" created="Sun, 6 Nov 2011 10:37:26 +0000"  >&lt;p&gt;revert the changes&lt;/p&gt;</comment>
                            <comment id="13144981" author="hudson" created="Sun, 6 Nov 2011 11:27:23 +0000"  >&lt;p&gt;Integrated in Thrift #318 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/318/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/318/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1277&quot; title=&quot;Node.js serializes false booleans as null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1277&quot;&gt;&lt;del&gt;THRIFT-1277&lt;/del&gt;&lt;/a&gt; Node.js serializes false booleans as null&lt;br/&gt;
revert patch =&amp;gt; breaks js&lt;/p&gt;

&lt;p&gt;roger : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1198334&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1198334&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/thrift/trunk/compiler/cpp/src/generate/t_js_generator.cc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13244354" author="ctavan" created="Mon, 2 Apr 2012 17:28:55 +0000"  >&lt;p&gt;What was wrong with the original patch? As far as I can see all parameters get initialized to null or some default value in the constructor. The constructor then overwrites these defaults only if &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-javascript&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (args.varname !== undefined) {
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Consequently we cannot get properties that will be undefined. So we cannot have the case mentioned by Wade. I think we should do strict checking for null.&lt;/p&gt;

&lt;p&gt;It would be great if the strict checking patch could be applied again since it will also not break jslint.&lt;/p&gt;

&lt;p&gt;The lack of correct null checking however breaks quite a lot of stuff (like &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1297&quot; title=&quot;Compiled javascript code does not write falsy values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1297&quot;&gt;&lt;del&gt;THRIFT-1297&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="13249774" author="henrique" created="Mon, 9 Apr 2012 10:15:14 +0000"  >&lt;p&gt;Hi Christoph and Roger&lt;br/&gt;
I think the loose option is a little more robust. Otherwise it would break if someone sets a property to &quot;undefined&quot;.&lt;br/&gt;
a jslint friendly version would be something like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    out &amp;lt;&amp;lt; indent() &amp;lt;&amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.&quot;&lt;/span&gt; &amp;lt;&amp;lt; (*f_iter)-&amp;gt;get_name() &amp;lt;&amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&quot; !== &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.&quot;&lt;/span&gt; &amp;lt;&amp;lt; (*f_iter)-&amp;gt;get_name() &amp;lt;&amp;lt; &lt;span class=&quot;code-quote&quot;&gt;&quot; !== undefined) {&quot;&lt;/span&gt; &amp;lt;&amp;lt; endl;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I can provide a patch if you prefer, and agree &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13249901" author="ctavan" created="Mon, 9 Apr 2012 16:06:16 +0000"  >&lt;p&gt;Henrique, I&apos;m perfectly OK with your suggestion and it would be great if you could provide a patch!&lt;/p&gt;</comment>
                            <comment id="13249920" author="roger.meier" created="Mon, 9 Apr 2012 16:26:45 +0000"  >&lt;p&gt;Yes, Henrique please do so!&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
roger&lt;/p&gt;</comment>
                            <comment id="13254331" author="henrique" created="Sun, 15 Apr 2012 13:39:49 +0000"  >&lt;p&gt;A little delayed but here it is.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1277&quot; title=&quot;Node.js serializes false booleans as null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1277&quot;&gt;&lt;del&gt;THRIFT-1277&lt;/del&gt;&lt;/a&gt;.patch&lt;br/&gt;
it also fixes depreciated qunit code (qunit trunk) and a little bug on test.js, an empty string was given as argument in testInsanity&lt;/p&gt;</comment>
                            <comment id="13254333" author="ctavan" created="Sun, 15 Apr 2012 13:46:55 +0000"  >&lt;p&gt;Cool!&lt;/p&gt;

&lt;p&gt;+1 from my side for getting this patch merged to trunk! Thanks a lot, Henrique.&lt;/p&gt;</comment>
                            <comment id="13254355" author="roger.meier" created="Sun, 15 Apr 2012 15:58:15 +0000"  >&lt;p&gt;committed!&lt;br/&gt;
thanks henrique&lt;br/&gt;
;-r&lt;/p&gt;</comment>
                            <comment id="13254366" author="hudson" created="Sun, 15 Apr 2012 16:43:53 +0000"  >&lt;p&gt;Integrated in Thrift #440 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/440/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/440/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1277&quot; title=&quot;Node.js serializes false booleans as null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1277&quot;&gt;&lt;del&gt;THRIFT-1277&lt;/del&gt;&lt;/a&gt; Node.js serializes false booleans as null&lt;br/&gt;
Patch: Henrique Mendonca (Revision 1326371)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
roger : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1326371&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1326371&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/thrift/trunk/compiler/cpp/src/generate/t_js_generator.cc&lt;/li&gt;
	&lt;li&gt;/thrift/trunk/lib/js/test/test.js&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12522701" name="THRIFT-1277.patch" size="9060" author="henrique" created="Sun, 15 Apr 2012 13:39:49 +0000"/>
                            <attachment id="12490792" name="nodejs_compiler_false_bools.patch" size="665" author="cypres" created="Thu, 18 Aug 2011 12:25:41 +0000"/>
                            <attachment id="12490833" name="nodejs_compiler_false_bools_loose.patch" size="664" author="cypres" created="Thu, 18 Aug 2011 18:12:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>60481</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i083fr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>45156</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>