<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:35:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-5769] Large messages crash Node.js client when using TFramedTransport</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-5769</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;Large messages cause Thrift client to crash when using TFramedTransport.&lt;/p&gt;

&lt;p&gt;Crash is caused by array overflow of residual variable in receiver function.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Stack trace for Node.js v21.7.1&lt;/b&gt;&lt;br/&gt;
(pinpoints the cause as it is using new version of V8)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;redacted&amp;gt;/thrift/lib/nodejs/lib/thrift/framed_transport.js:43
      residual.push(data[i])
               ^

RangeError: Invalid array length
    at Array.push (&amp;lt;anonymous&amp;gt;)
    at &amp;lt;redacted&amp;gt;/thrift/lib/nodejs/lib/thrift/framed_transport.js:43:16
    &amp;lt;redacted&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;br/&gt;
&lt;b&gt;Stack trace for Node.js LTS v20.11.1&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
#
# Fatal error in , line 0
# Fatal JavaScript invalid size error 169220804 (see crbug.com/1201626)
#
#
#
#FailureMessage &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;: 0x16f48a0f8
----- Native stack trace -----

1: 0x100aad340 node::NodePlatform::GetStackTracePrinter()::$_3::__invoke() [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
2: 0x101b309ac V8_Fatal(&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;*, &amp;lt;redacted&amp;gt;) [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
3: 0x100d71334 v8::internal::FactoryBase&amp;lt;v8::internal::Factory&amp;gt;::NewFixedArrayWithFiller(v8::internal::Handle&amp;lt;v8::internal::Map&amp;gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, v8::internal::Handle&amp;lt;v8::internal::Oddball&amp;gt;, v8::internal::AllocationType) [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
4: 0x100f0cf68 v8::internal::(anonymous namespace)::ElementsAccessorBase&amp;lt;v8::internal::(anonymous namespace)::FastPackedSmiElementsAccessor, v8::internal::(anonymous namespace)::ElementsKindTraits&amp;lt;(v8::internal::ElementsKind)0&amp;gt;&amp;gt;::GrowCapacity(v8::internal::Handle&amp;lt;v8::internal::JSObject&amp;gt;, unsigned &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
5: 0x101158600 v8::internal::Runtime_GrowArrayElements(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, unsigned &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;*, v8::internal::Isolate*) [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
6: 0x1014c4c44 Builtins_CEntry_Return1_ArgvOnStack_NoBuiltinExit [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
7: 0x1064cfe9c
8: 0x1064aac88
9: 0x10143c3e4 Builtins_InterpreterEntryTrampoline [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
10: 0x1064aac88
11: 0x10143c3e4 Builtins_InterpreterEntryTrampoline [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
12: 0x10143c3e4 Builtins_InterpreterEntryTrampoline [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
13: 0x10143a50c Builtins_JSEntryTrampoline [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
14: 0x10143a1f4 Builtins_JSEntry [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
15: 0x100d104f8 v8::internal::(anonymous namespace)::Invoke(v8::internal::Isolate*, v8::internal::(anonymous namespace)::InvokeParams &lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt;&amp;amp;) [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
16: 0x100d0f944 v8::internal::Execution::Call(v8::internal::Isolate*, v8::internal::Handle&amp;lt;v8::internal::&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;, v8::internal::Handle&amp;lt;v8::internal::&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, v8::internal::Handle&amp;lt;v8::internal::&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;*) [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
17: 0x100bea214 v8::Function::Call(v8::Local&amp;lt;v8::Context&amp;gt;, v8::Local&amp;lt;v8::Value&amp;gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, v8::Local&amp;lt;v8::Value&amp;gt;*) [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
18: 0x100978fd8 node::InternalMakeCallback(node::Environment*, v8::Local&amp;lt;v8::&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;, v8::Local&amp;lt;v8::&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;, v8::Local&amp;lt;v8::Function&amp;gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, v8::Local&amp;lt;v8::Value&amp;gt;*, node::async_context) [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
19: 0x100979304 node::MakeCallback(v8::Isolate*, v8::Local&amp;lt;v8::&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;, v8::Local&amp;lt;v8::Function&amp;gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, v8::Local&amp;lt;v8::Value&amp;gt;*, node::async_context) [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
20: 0x1009ee554 node::Environment::CheckImmediate(uv_check_s*) [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
21: 0x1014209e0 uv__run_check [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
22: 0x10141a700 uv_run [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
23: 0x100979754 node::SpinEventLoopInternal(node::Environment*) [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
24: 0x100a89c6c node::NodeMainInstance::Run(node::ExitCode*, node::Environment*) [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
25: 0x100a89a08 node::NodeMainInstance::Run() [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
26: 0x100a13718 node::Start(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;**) [&amp;lt;redacted&amp;gt;/.nvm/versions/node/v20.11.1/bin/node]
27: 0x1a61dff28 start [/usr/lib/dyld]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13572271">THRIFT-5769</key>
            <summary>Large messages crash Node.js client when using TFramedTransport</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tjokimie">Tuomo Jokimies</assignee>
                                    <reporter username="tjokimie">Tuomo Jokimies</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Mar 2024 16:38:26 +0000</created>
                <updated>Sat, 21 Sep 2024 13:30:10 +0000</updated>
                            <resolved>Mon, 18 Mar 2024 20:42:35 +0000</resolved>
                                    <version>0.17.0</version>
                    <version>0.18.0</version>
                    <version>0.18.1</version>
                    <version>0.19.0</version>
                                    <fixVersion>0.21.0</fixVersion>
                                    <component>Node.js - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1o1bk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>