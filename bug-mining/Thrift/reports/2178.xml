<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:33:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-4797] Generated Go code produces name collisions on imports</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-4797</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;If two modules have the same name, the produced go code will not compile.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; (
  &lt;span class=&quot;code-quote&quot;&gt;&quot;github.com/sample/project/common&quot;&lt;/span&gt;
  &lt;span class=&quot;code-quote&quot;&gt;&quot;github.com/different/thing/common&quot;&lt;/span&gt;
)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In go the final component (commons) is used as the name so there is a collision.&lt;/p&gt;

&lt;p&gt;This can be fixed by aliasing the modules&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; (
  common_1 &lt;span class=&quot;code-quote&quot;&gt;&quot;github.com/sample/project/common&quot;&lt;/span&gt;
  common_2 &lt;span class=&quot;code-quote&quot;&gt;&quot;github.com/different/thing/common&quot;&lt;/span&gt;
)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13215105">THRIFT-4797</key>
            <summary>Generated Go code produces name collisions on imports</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="qix">Josh Yudaken</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Feb 2019 22:22:12 +0000</created>
                <updated>Wed, 16 Oct 2019 22:27:41 +0000</updated>
                            <resolved>Sat, 29 Jun 2019 06:09:20 +0000</resolved>
                                    <version>0.12.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                    <component>Go - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16765448" author="jking3" created="Mon, 11 Feb 2019 22:32:57 +0000"  >&lt;p&gt;Looks reasonable to me.  Can you submit a pull request for this?&lt;/p&gt;</comment>
                            <comment id="16765450" author="jensg" created="Mon, 11 Feb 2019 22:34:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=qix&quot; class=&quot;user-hover&quot; rel=&quot;qix&quot;&gt;qix&lt;/a&gt;: Did you try to&#160;&lt;tt&gt;namespace&lt;/tt&gt; them?&lt;/p&gt;</comment>
                            <comment id="16766240" author="qix" created="Tue, 12 Feb 2019 16:57:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jensg&quot; class=&quot;user-hover&quot; rel=&quot;jensg&quot;&gt;jensg&lt;/a&gt; - Yes, a namespace like `sample.project.project_common` and `sample.thing.thing_common` would solve the problem... but&#160;that means in&#160;a large project every final component of the namespace has to be unique.&lt;/p&gt;

&lt;p&gt;We have a &lt;b&gt;lot&lt;/b&gt; of namespaces ending in `.common`, `.event`, `.client`, `.v1`, etc.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I don&apos;t have time right now but will work on a pull request for this in the next couple weeks. If anyone wants to take it off my hand I&apos;ll check in on this thread before starting work on it.&lt;/p&gt;</comment>
                            <comment id="16863531" author="johnboiles" created="Thu, 13 Jun 2019 23:06:08 +0000"  >&lt;p&gt;I&apos;ve got a fix &lt;a href=&quot;https://github.com/apache/thrift/pull/1811&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. In short, it looks to see if there&apos;s going to be a collision&#160;in the imports, and if there is, the compiler creates an alias by appending a number with &lt;tt&gt;tmp&lt;/tt&gt;.&#160;It generates code like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-go&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; (
	&lt;span class=&quot;code-quote&quot;&gt;&quot;packagea/common&quot;&lt;/span&gt;
	common0 &lt;span class=&quot;code-quote&quot;&gt;&quot;packageb/common&quot;&lt;/span&gt;
	common1 &lt;span class=&quot;code-quote&quot;&gt;&quot;common&quot;&lt;/span&gt;
)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As a future improvement, it&apos;d be nicer to instead concatenate as many path components as necessary to generate a more human readable endpoint&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-go&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; (
	conflictacommon &lt;span class=&quot;code-quote&quot;&gt;&quot;conflicta/common&quot;&lt;/span&gt;
	conflictbcommon &lt;span class=&quot;code-quote&quot;&gt;&quot;conflictb/common&quot;&lt;/span&gt;
	&lt;span class=&quot;code-quote&quot;&gt;&quot;common&quot;&lt;/span&gt;
)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But that looks like it has some tricks. We&apos;d need to first start with the simplest imports (in this example &lt;tt&gt;common&lt;/tt&gt;), and allow them to lay claim the their name, then go through more complex imports (in this example &lt;tt&gt;conflicta/common&lt;/tt&gt;) and disambiguate.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 22 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi0vhc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>