<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:08:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-1986] TCompactProtocol constants truncated on Windows (C4309)</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-1986</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;visual generates warnings about constant value truncation for lines like these:&lt;br/&gt;
  static const int8_t  PROTOCOL_ID = (int8_t)0x82;&lt;/p&gt;

&lt;p&gt;To be honest - I&apos;m not sure if that truncation really occurs, but there&apos;s an easy way to get rid of this warning (and probably portability problem)&lt;/p&gt;

&lt;p&gt;  static const int8_t  PROTOCOL_ID = 0x82u;&lt;/p&gt;

&lt;p&gt;Both lines generating warning in TCompactProtocol.h fixed in patch&lt;/p&gt;</description>
                <environment></environment>
        <key id="12650238">THRIFT-1986</key>
            <summary>TCompactProtocol constants truncated on Windows (C4309)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roger">Roger Meier</assignee>
                                    <reporter username="hcorg">Konrad Grochowski</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 May 2013 22:58:01 +0000</created>
                <updated>Thu, 6 Jun 2013 04:28:22 +0000</updated>
                            <resolved>Wed, 5 Jun 2013 16:37:36 +0000</resolved>
                                    <version>0.9</version>
                                                    <component>C++ - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13675157" author="roger.meier" created="Tue, 4 Jun 2013 19:49:46 +0000"  >&lt;p&gt;Thanks Konrad!&lt;br/&gt;
;-r&lt;/p&gt;</comment>
                            <comment id="13675498" author="hudson" created="Wed, 5 Jun 2013 01:03:00 +0000"  >&lt;p&gt;Integrated in Thrift #661 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/661/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/661/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1986&quot; title=&quot;TCompactProtocol constants truncated on Windows (C4309)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1986&quot;&gt;&lt;del&gt;THRIFT-1986&lt;/del&gt;&lt;/a&gt; TCompactProtocol constants truncated on Windows (C4309) (Revision cde23dfd2dfdd1271dd409dc9454e30249a9ecc5)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
roger : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/cpp/src/thrift/protocol/TCompactProtocol.h&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13675819" author="hcorg" created="Wed, 5 Jun 2013 11:38:54 +0000"  >&lt;p&gt;this is probably the change that broke the build&lt;/p&gt;

&lt;p&gt;I&apos;m on it&lt;/p&gt;</comment>
                            <comment id="13675848" author="hcorg" created="Wed, 5 Jun 2013 12:05:46 +0000"  >&lt;p&gt;ok, I have a problem - I&apos;m unable to reproduce that error. Test compile and link fine on my machine (gcc 4.7.2)&lt;/p&gt;

&lt;p&gt;looking through Jenkins logs I see it uses gcc 4.6 &lt;/p&gt;

&lt;p&gt;my guess: cast is needed on gcc (something like:&lt;br/&gt;
static const int8_t PROTOCOL_ID = static_cast&amp;lt;int8_t&amp;gt;(0x82u);&lt;/p&gt;

&lt;p&gt;I&apos;ll try to find some old gcc and check it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13675864" author="henrique" created="Wed, 5 Jun 2013 12:29:28 +0000"  >&lt;p&gt;what about:&lt;br/&gt;
  static const int8_t  PROTOCOL_ID = (int8_t)0x82u;&lt;br/&gt;
  static const int8_t  TYPE_MASK = (int8_t)0xE0u; // 1110 0000&lt;/p&gt;

&lt;p&gt;it works on 4.6.3&lt;/p&gt;</comment>
                            <comment id="13675908" author="hudson" created="Wed, 5 Jun 2013 13:34:29 +0000"  >&lt;p&gt;Integrated in Thrift #663 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/663/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/663/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1986&quot; title=&quot;TCompactProtocol constants truncated on Windows (C4309)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1986&quot;&gt;&lt;del&gt;THRIFT-1986&lt;/del&gt;&lt;/a&gt; fix TCompactProtocol constants (Revision b6dfc9036b478219c0427d2a9a7686bf1f415b1c)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
henrique : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/cpp/src/thrift/protocol/TCompactProtocol.h&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13675913" author="hcorg" created="Wed, 5 Jun 2013 13:40:29 +0000"  >&lt;p&gt;I was checking exactly that (I&apos;ve just used static_cast for code purity reasons &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ), but it took me a while to get to old gcc &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;yeah it works, I just gonna check if it removes warning on visual also&lt;/p&gt;</comment>
                            <comment id="13675927" author="hcorg" created="Wed, 5 Jun 2013 13:53:30 +0000"  >&lt;p&gt;ok, warning on visual did not appear, so both &apos;u&apos; and cast is needed to fully satisfy both compilers &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;sorry for breaking the build&lt;/p&gt;

&lt;p&gt;still - I do not understand why gcc 4.6 fails (why it tries to generate address for that static variables)&lt;/p&gt;</comment>
                            <comment id="13675992" author="henrique" created="Wed, 5 Jun 2013 14:58:21 +0000"  >&lt;p&gt;Ok, I&apos;m not sure why Jenkins crashed again but it should work now; another build is pending.&lt;br/&gt;
I&apos;m re-closing this, but feel to open it again if you or anyone else find a better solution.&lt;br/&gt;
Cheers,&lt;br/&gt;
Henrique&lt;/p&gt;</comment>
                            <comment id="13676009" author="hcorg" created="Wed, 5 Jun 2013 15:12:58 +0000"  >&lt;p&gt;as for me it&apos;s fixed - warning did disappear on visual (2010 at least)&lt;/p&gt;

&lt;p&gt;now I have completely warning-free build on gcc 4.7 and visual 2010, so I&apos;m happy &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Konrad&lt;/p&gt;</comment>
                            <comment id="13676090" author="henrique" created="Wed, 5 Jun 2013 16:37:36 +0000"  >&lt;p&gt;Ah, sorry I misunderstood you. Fixed then &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13676688" author="jfarrell" created="Thu, 6 Jun 2013 04:28:22 +0000"  >&lt;p&gt;Henrique, jenkins failed due to sloccount not being available on the build slave it ran on. created INFRA-6356, which i&apos;ll be taking care of shortly&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12650250">THRIFT-1987</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12585498" name="C4309_warning_removed.patch" size="753" author="hcorg" created="Thu, 30 May 2013 22:58:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>330565</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1l12v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>330899</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>