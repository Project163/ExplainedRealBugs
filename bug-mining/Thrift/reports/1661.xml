<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:25:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3546] NodeJS code should not be namespaced (and is currently not strict-mode compliant)</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3546</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;Code generated for NodeJS, whether with a js namespace specified or not, seems to fail strict mode. Specifically, it doesn&apos;t always generate &quot;var&quot; when needed. This might not sound like a big issue but it&apos;s quite a pain to deal with...&lt;/p&gt;

&lt;p&gt;It is standard nowadays to enable strict mode for Javascript code (&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode&lt;/a&gt;). And babel, which is one of most popular ES6 =&amp;gt; ES5 transpilers, while does not force strict mode, does seem to break when you don&apos;t use &quot;var&quot;.&lt;/p&gt;

&lt;p&gt;I think the best solution here is really to just stop using namespaces in node code. Every type will be declared with &quot;var&quot;, and if exported, also assigned to &quot;module.exports&quot;.&lt;/p&gt;

&lt;p&gt;I don&apos;t believe namespaces currently generated in the node code is directly used anywhere or is even accessible outside the file?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12929696">THRIFT-3546</key>
            <summary>NodeJS code should not be namespaced (and is currently not strict-mode compliant)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bcg">Benjamin Gould</assignee>
                                    <reporter username="yunchi">Yunchi Luo</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Jan 2016 05:04:02 +0000</created>
                <updated>Wed, 12 Oct 2016 16:19:31 +0000</updated>
                            <resolved>Wed, 12 Oct 2016 16:19:30 +0000</resolved>
                                    <version>0.9.3</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Node.js - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15552898" author="bcg" created="Thu, 6 Oct 2016 19:16:55 +0000"  >&lt;p&gt;I have a fix for this that eliminates the namespace object heirarchy in node.js generated code, and adds a compiler flag that can be used for backwards compatibility if necessary.&lt;/p&gt;

&lt;p&gt;I think that not generating the namespace objects for node.js/browserify is a sensible default behavior because for node.js/browserify it is idiomatic to use require() rather than relying on objects being in the global namespace (which makes me doubt that very many developers if any are relying on that behavior).&lt;/p&gt;

&lt;p&gt;Github PR coming shortly.&lt;/p&gt;</comment>
                            <comment id="15552922" author="githubbot" created="Thu, 6 Oct 2016 19:26:30 +0000"  >&lt;p&gt;GitHub user bgould opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1111&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1111&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3546&quot; title=&quot;NodeJS code should not be namespaced (and is currently not strict-mode compliant)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3546&quot;&gt;&lt;del&gt;THRIFT-3546&lt;/del&gt;&lt;/a&gt;: Remove global namespace objects from nodejs generated code&lt;/p&gt;

&lt;p&gt;    Modified the node.js code generator to not generate namespace object by default, as using require() is the idiomatic way to reference classes contained in other modules for node, instead of relying on a object heirarchy existing in the global namespace.&lt;/p&gt;

&lt;p&gt;    This change makes the generated code work under Javascript&apos;s &quot;use strict&quot; mode.&lt;/p&gt;

&lt;p&gt;    In case others are relying on the existing behavior, I added a &quot;:with_ns&quot; flag to the compiler that enables the current behavior for backwards compatibility.&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/bgould/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/bgould/thrift&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3546&quot; title=&quot;NodeJS code should not be namespaced (and is currently not strict-mode compliant)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3546&quot;&gt;&lt;del&gt;THRIFT-3546&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1111.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1111.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1111&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 10d11d733bfec328b94e1a3d70675f67cbc44312&lt;br/&gt;
Author: BCG &amp;lt;bgould@users.noreply.github.com&amp;gt;&lt;br/&gt;
Date:   2016-10-05T14:25:27Z&lt;/p&gt;

&lt;p&gt;    Removed namespace objects from nodejs generated code, and added with_ns option for backwards compatibility.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15552929" author="bcg" created="Thu, 6 Oct 2016 19:29:07 +0000"  >&lt;p&gt;The above PR also fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3835&quot; title=&quot;Thrift generates javascript code for node js with error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3835&quot;&gt;THRIFT-3835&lt;/a&gt; if I am not mistaken.&lt;/p&gt;</comment>
                            <comment id="15565392" author="bcg" created="Tue, 11 Oct 2016 13:21:14 +0000"  >&lt;p&gt;Added to my PR to emit a &quot;use strict&quot; directive at the top of generated node.js files and confirmed that they work properly in Chrome and Firefox when run through browserify.&lt;/p&gt;

&lt;p&gt;Additionally, I confirmed that the generated code can be used with babel.&lt;/p&gt;</comment>
                            <comment id="15565717" author="githubbot" created="Tue, 11 Oct 2016 15:17:18 +0000"  >&lt;p&gt;Github user jfarrell commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1111&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1111&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    at quick run through patch looks ok to me, @Jens-G @RandyAbernethy can either of you please review also&lt;/p&gt;</comment>
                            <comment id="15568897" author="codesf" created="Wed, 12 Oct 2016 14:38:16 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15569152" author="githubbot" created="Wed, 12 Oct 2016 16:18:51 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1111&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1111&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12910456">THRIFT-3410</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12971499">THRIFT-3835</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2r7xr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>