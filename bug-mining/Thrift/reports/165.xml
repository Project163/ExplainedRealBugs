<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:56:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-497] TSocket read/peek fails on OS X</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-497</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;Both TSocket::read() and TSocket::peek() have code that detects ECONNRESET in a FreeBSD environment and interprets it to mean that the socket was closed by the other side. This code was added by &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-96&quot; title=&quot;TSocket.peek fails on FreeBSD&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-96&quot;&gt;&lt;del&gt;THRIFT-96&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;When Thrift is used under OS X, the server often sees the ECONNRESET error when the client has simply shutdown the socket. This makes sense since OS X is derived from FreeBSD.&lt;/p&gt;

&lt;p&gt;The attached patch modifies the read() and peek() routines to treat ECONNRESET as close() for OS X, just like it does for other FreeBSD versions. It also moves the read() error message display so that no error message is displayed when ECONNRESET is interpreted as close.&lt;/p&gt;

&lt;p&gt;Just past the error message, I left the test for ECONNRESET without making it depend on the _&lt;em&gt;FREEBSD&lt;/em&gt;_ and _&lt;em&gt;MACH&lt;/em&gt;_ macro definitions. This means that if a real error occurs on a FreeBSD-based system, there will be an extra check for ECONNRESET. I don&apos;t think this is a problem because you&apos;re on the way to throwing an exception anyway in that case, so the performance penalty of checking for ECONNRESET seems minimal. It also keeps the logic simpler.&lt;/p&gt;

&lt;p&gt;Patrick Schlangen gets credit for realizing that the _&lt;em&gt;FREEBSD&lt;/em&gt;_ fix applied to OS X as well.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OS X 10.5.6&lt;/p&gt;</environment>
        <key id="12425137">THRIFT-497</key>
            <summary>TSocket read/peek fails on OS X</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rush">Rush Manbert</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 May 2009 20:11:30 +0000</created>
                <updated>Tue, 1 Nov 2011 02:51:51 +0000</updated>
                            <resolved>Thu, 4 Jun 2009 00:10:53 +0000</resolved>
                                    <version>0.1</version>
                                    <fixVersion>0.2</fixVersion>
                                    <component>C++ - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12708185" author="rush" created="Mon, 11 May 2009 20:13:29 +0000"  >&lt;p&gt;Patch fr TSocket.cpp.&lt;/p&gt;</comment>
                            <comment id="12708188" author="rush" created="Mon, 11 May 2009 20:15:16 +0000"  >&lt;p&gt;The fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-96&quot; title=&quot;TSocket.peek fails on FreeBSD&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-96&quot;&gt;&lt;del&gt;THRIFT-96&lt;/del&gt;&lt;/a&gt; is extended in &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-497&quot; title=&quot;TSocket read/peek fails on OS X&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-497&quot;&gt;&lt;del&gt;THRIFT-497&lt;/del&gt;&lt;/a&gt; so it aplies to OS X.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12401021">THRIFT-96</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12407810" name="497-TSocket.cpp.patch" size="1510" author="rush" created="Mon, 11 May 2009 20:13:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38541</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 29 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16bwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245060</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>