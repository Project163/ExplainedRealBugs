<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:57:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-731] configure doesn&apos;t check for ant &gt;= 1.7</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-731</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;./configure on a machine with ant 1.6 successfully runs, even though it&apos;s required for the Java build step - otherwise you get&lt;/p&gt;

&lt;p&gt;BUILD FAILED&lt;br/&gt;
/home/henry/thrift-0.2.0/lib/java/build.xml:86: Class org.apache.tools.ant.taskdefs.ConditionTask doesn&apos;t support the nested &quot;typefound&quot; element.&lt;/p&gt;

&lt;p&gt;Upgrading to ant 1.7.1 fixed the build failure, but would be nice if configure gave a clue. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12458856">THRIFT-731</key>
            <summary>configure doesn&apos;t check for ant &gt;= 1.7</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jfarrell">Jake Farrell</assignee>
                                    <reporter username="henryr">Henry Robinson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Mar 2010 21:46:29 +0000</created>
                <updated>Wed, 25 May 2011 21:47:34 +0000</updated>
                            <resolved>Wed, 25 May 2011 21:04:27 +0000</resolved>
                                                    <fixVersion>0.7</fixVersion>
                                    <component>Java - Compiler</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12896995" author="hlieberman" created="Tue, 10 Aug 2010 18:42:21 +0000"  >&lt;p&gt;A (very simple) patch for configure.ac that will fail configure if ant &amp;gt;= 1.7 is not present.&lt;/p&gt;</comment>
                            <comment id="12897040" author="bryanduxbury" created="Tue, 10 Aug 2010 21:01:47 +0000"  >&lt;p&gt;I like it. I just committed this. Thanks for the patch, Harlan!&lt;/p&gt;</comment>
                            <comment id="12897498" author="krobertson" created="Wed, 11 Aug 2010 22:48:30 +0000"  >&lt;p&gt;I was attempting to build thrift today and the fix for this issue broke configure.&lt;/p&gt;

&lt;p&gt;Was on a fresh Debian 5.0 system, had ant 1.7 installed, however when calling configure it said ant wasn&apos;t installed.  pkg-config didn&apos;t list ant at all and I couldn&apos;t find any Debian or even Ubuntu packages that included an ant.pc.&lt;/p&gt;

&lt;p&gt;Not sure if I was doing anything wrong, but I reverted the commit and was able to go on and build just fine.&lt;/p&gt;</comment>
                            <comment id="12897504" author="bryanduxbury" created="Wed, 11 Aug 2010 23:02:40 +0000"  >&lt;p&gt;@Ken - I hadn&apos;t tested this on Ubuntu, but it appears like it worked on Mac. I would be open to an alternative implementation if it made it work for you on Ubuntu.&lt;/p&gt;</comment>
                            <comment id="12897518" author="hlieberman" created="Thu, 12 Aug 2010 00:08:39 +0000"  >&lt;p&gt;This is my fault - I should have checked on Ubuntu before sending in this patch, instead of just CentOS.&lt;/p&gt;

&lt;p&gt;If someone with commit access would be so kind to revert my patch to un-break the tree, I can get out another patch for this issue tomorrow when I get back into work.  It&apos;s not going to be as pretty, unfortunately.  The Autoconf macro that can be easily used for this sort of thing requires 2.62, and we recommend 2.60 (and allow 2.59, though support for that is broken right now).  Since I can&apos;t use AC_PATH_PROGS_FEATURE_CHECK, I&apos;ll hack something together with M4.&lt;/p&gt;

&lt;p&gt;Sorry!&lt;/p&gt;</comment>
                            <comment id="12897526" author="bryanduxbury" created="Thu, 12 Aug 2010 00:28:17 +0000"  >&lt;p&gt;I reverted the patch.&lt;/p&gt;</comment>
                            <comment id="12897808" author="hlieberman" created="Thu, 12 Aug 2010 15:57:07 +0000"  >&lt;p&gt;This should do it.  It will throw a syntax error if ant is not present on the system, but autoconf should have already thrown an error because of the check for ant the line above.&lt;/p&gt;

&lt;p&gt;I&apos;d love a few more people to test it before it gets committed though.&lt;/p&gt;</comment>
                            <comment id="12897962" author="krobertson" created="Thu, 12 Aug 2010 21:52:54 +0000"  >&lt;p&gt;The revised patched worked good for me!  Tested on the same Debian 5.0 machine.&lt;/p&gt;</comment>
                            <comment id="12897968" author="dreiss" created="Thu, 12 Aug 2010 21:59:38 +0000"  >&lt;p&gt;1/ Will this abort if the command fails?  I think configure just keeps on charging unless you specifically abort.  Plus, we don&apos;t want to abort, do we?  Just disable Java?&lt;br/&gt;
2/ I think this fails with ant 1.10.&lt;/p&gt;</comment>
                            <comment id="12898263" author="hlieberman" created="Fri, 13 Aug 2010 14:53:36 +0000"  >&lt;p&gt;1) I think that we should abort.  If we are in that loop, then the user has specified that they were looking for the java components to be built.  It would seem contrary to *nix practice to make the decision for the user.  I think aborting with an explanatory message is a better choice... but I can code it either way.&lt;br/&gt;
2) You&apos;re correct.  I just did a straight string comparison for simplicities sake and missed the edge case.  I will think of a better way to do this and roll it into the next patch once I hear back about 1.&lt;/p&gt;</comment>
                            <comment id="12898269" author="dreiss" created="Fri, 13 Aug 2010 15:13:12 +0000"  >&lt;p&gt;&amp;gt; If we are in that loop, then the user has specified that they were looking for the java components to be built.&lt;br/&gt;
This is not necessarily the case.  &quot;with_java&quot; defaults to true.  The &quot;normal&quot; procedure for configure scripts is that if an optional component is missing, the feature is just disabled.  I&apos;m not sure what the best solution is here.  I have some half-finished patches lying around that print a big explanatory message at the end of configure explaining what was enabled and what wasn&apos;t.  Would that be acceptable to people?&lt;/p&gt;</comment>
                            <comment id="12915377" author="bryanduxbury" created="Mon, 27 Sep 2010 17:29:00 +0000"  >&lt;p&gt;Anyone want to tie this up today so that it&apos;ll be committed before I cut the 0.5 branch?&lt;/p&gt;</comment>
                            <comment id="12916243" author="patilsa@missouri.edu" created="Wed, 29 Sep 2010 19:18:44 +0000"  >&lt;p&gt;I am facing a similar issue related to the ant version while compiling thrift on Centos 5.5. Root user uses an ant version 1.6.5. But I have locally installed ant version 1.8.1 for my hadoop user. Is there a way I could use the local installation of ant without the root having to update the ant installation. Can I specify the local ant path during configure? Please let me know if there is a way to do it.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Santosh&lt;/p&gt;</comment>
                            <comment id="12916247" author="patilsa@missouri.edu" created="Wed, 29 Sep 2010 19:26:42 +0000"  >&lt;p&gt;  Hi Henry,&lt;/p&gt;

&lt;p&gt;I am facing a similar issue related to the ant version. Root uses an ant &lt;br/&gt;
version 1.6.5. But I have locally installed ant version 1.8.1 for my &lt;br/&gt;
hadoop user. Is there a way I could use the local installation of ant &lt;br/&gt;
without the root having to update the ant installation. Can I specify &lt;br/&gt;
the local ant path during configure? Please let me know if there is a &lt;br/&gt;
way to do it.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Santosh&lt;/p&gt;</comment>
                            <comment id="12975040" author="thinker0" created="Sat, 25 Dec 2010 11:16:36 +0000"  >&lt;p&gt;hi. env path..&lt;/p&gt;

&lt;p&gt;export ANT_HOME=/usr/program/apache-ant-1.8.1&lt;/p&gt;
</comment>
                            <comment id="12997203" author="nhed" created="Sun, 20 Feb 2011 19:51:53 +0000"  >&lt;p&gt;I also installed a new ant (1.8.2) without removing an older one.&lt;br/&gt;
I also have multiple Java environments.&lt;/p&gt;

&lt;p&gt;My ANT_HOME &amp;amp; JAVA_HOME variables seem to be set correctly through /etc/profile.d/java.sh&lt;br/&gt;
(and marked for export)&lt;/p&gt;

&lt;p&gt;I tested these both logged in as myself and as root (su -l).&lt;/p&gt;

&lt;p&gt;but my problem was when running &apos;sudo make install&apos;.   The &apos;sudo&apos; manual talks about the &apos;-E&apos; option to preserve the environment, but I would assume that this would not be a desirable option to use&lt;/p&gt;

&lt;p&gt;While I know my way around make, but not so much with ant or java, I was wondering if you could comment if the following is a reasonable alternative&lt;/p&gt;

&lt;p&gt;$ sudo make JAVA_HOME=$JAVA_HOME ANT_HOME=$ANT_HOME install &lt;/p&gt;

&lt;p&gt;(explicitly passing the 2 variables to make)&lt;/p&gt;</comment>
                            <comment id="13026158" author="sriranjan" created="Thu, 28 Apr 2011 07:11:36 +0000"  >&lt;p&gt;I second Nevo&apos;s comment. Please provide a way to pass the ant home to make.&lt;/p&gt;</comment>
                            <comment id="13038580" author="jfarrell" created="Tue, 24 May 2011 14:21:39 +0000"  >&lt;p&gt;Sriranjan, Nevo: you can specify which ant, java and javac to use by passing the following to the configure script &lt;/p&gt;

&lt;p&gt;./configure ANT=/path/to/bin/ant JAVAC=/path/to/bin/javac JAVA=/path/to/bin/java &lt;/p&gt;</comment>
                            <comment id="13039332" author="jfarrell" created="Wed, 25 May 2011 21:03:59 +0000"  >&lt;p&gt;New function using part of the previous patches to detect the current version of ant and set WITH_JAVA = no if ant &amp;lt; 1.7. Also cleans up the check for included dep packages since they will be auto downloaded if not available with the new build. &lt;/p&gt;</comment>
                            <comment id="13039356" author="hudson" created="Wed, 25 May 2011 21:47:34 +0000"  >&lt;p&gt;Integrated in Thrift #148 (See &lt;a href=&quot;https://builds.apache.org/hudson/job/Thrift/148/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/hudson/job/Thrift/148/&lt;/a&gt;)&lt;br/&gt;
    Thrift-731: configure doesn&apos;t check for ant &amp;gt;= 1.7&lt;br/&gt;
Client: java, build process&lt;br/&gt;
Patch: Harlan Lieberman-Berg, Jake Farrell&lt;/p&gt;

&lt;p&gt;Adds a configure check to verify that the current version of ant is &amp;gt;= 1.7 otherwise sets WITH_JAVA to no.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12480453" name="Thrift-731.patch" size="1551" author="jfarrell" created="Wed, 25 May 2011 21:03:58 +0000"/>
                            <attachment id="12451695" name="ant.diff" size="453" author="hlieberman" created="Tue, 10 Aug 2010 18:42:21 +0000"/>
                            <attachment id="12451917" name="configure.diff" size="466" author="hlieberman" created="Thu, 12 Aug 2010 15:57:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>186889</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16cvr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245219</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>