<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:05:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-1326] on some platforms, #include &lt;stdint.h&gt; is necessary to be included in Thrift.h</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-1326</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;building server code generated by thrift, I needed to add #include &amp;lt;stdint.h&amp;gt; in main Thrift.h to prevent an &quot;error: uint32_t does not define a type&quot; error. Maybe it does not show on linux, or with earlier GCC.&lt;/p&gt;

&lt;p&gt;Maybe there is a better place than the main Thrift.h for thins #include &amp;lt;stdint.h&amp;gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OSX 10.6.8 / x86_64 / GCC 4.6.1 for building thrift and server code generated by thrift&lt;/p&gt;</environment>
        <key id="12521454">THRIFT-1326</key>
            <summary>on some platforms, #include &lt;stdint.h&gt; is necessary to be included in Thrift.h</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jfarrell">Jake Farrell</assignee>
                                    <reporter username="philou@philou.ch">Philippe STRAUSS</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Sep 2011 13:56:14 +0000</created>
                <updated>Wed, 25 Jul 2012 00:15:13 +0000</updated>
                            <resolved>Fri, 18 May 2012 04:15:13 +0000</resolved>
                                    <version>0.7</version>
                                    <fixVersion>0.9</fixVersion>
                                    <component>C++ - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="900">0.25h</timeoriginalestimate>
                            <timeestimate seconds="900">0.25h</timeestimate>
                                        <comments>
                            <comment id="13140846" author="jfarrell" created="Tue, 1 Nov 2011 02:13:53 +0000"  >&lt;p&gt;Phillippe, i&apos;ve only seen this error when the cpp lib is not installed and you are trying to reference it (example: using fb303 without cpp lib). I am running on 10.6.8 and 10.7.2 and when cpp lib is installed I have not seen this issue. are you still seeing this problem against trunk when the cpp lib is installed? can you provide some more information about your installed setup and possibly a test showing this issue. Thanks&lt;/p&gt;</comment>
                            <comment id="13144850" author="yelirekim" created="Sat, 5 Nov 2011 22:10:49 +0000"  >&lt;p&gt;I had this same issue, as well as a missing include for htonl (netinet/in or arpa/inet depending on your platform).  Both of these problems were fixed by just including the macros HAVE_NETINET_IN_H and HAVE_INTTYPES_H when building code that referenced the thrift libraries.&lt;/p&gt;

&lt;p&gt;I posted to the user mailing list about this a few days ago, it might be better to put an #ifndef HAVE_CONFIG_H (which is the only instance when those macros won&apos;t need to be manually defined) statement in Thrift.h and evaluate which alternatives for inttypes and netinet/in are available.&lt;/p&gt;</comment>
                            <comment id="13159154" author="chaos-ad" created="Tue, 29 Nov 2011 08:38:46 +0000"  >&lt;p&gt;Same issue on ubuntu 11.10:&lt;br/&gt;
autoconf (GNU Autoconf) 2.68&lt;br/&gt;
automake (GNU automake) 1.11.1&lt;br/&gt;
gcc (Ubuntu/Linaro 4.6.1-9ubuntu3) 4.6.1&lt;br/&gt;
Adding -DHAVE_INTTYPES_H to my Makefile helps, but it&apos;s ugly.&lt;/p&gt;</comment>
                            <comment id="13159288" author="jfarrell" created="Tue, 29 Nov 2011 14:39:04 +0000"  >&lt;p&gt;C99 inttypes.h includes stdint.h, so there&apos;s no need to include stdint.h separately. Though on some systems with inttypes.h there is no stdint.h, making it impossible to have a #include stdint.h in Thrift.h. There is no guarantee that where you generate the code you also compile the code so you have to take into account the necessary headers you will need and include them accordingly. This means that we can not have the main configure check help setup the #defines. I guess we could stub out a simple autoconf shell for the cpp lib but this really should be handled by the user and whatever build env they are using. I dont see this as a bug but possibly more a missing documentation for help building clients issue&lt;/p&gt;</comment>
                            <comment id="13159940" author="chaos-ad" created="Wed, 30 Nov 2011 09:24:18 +0000"  >&lt;p&gt;&amp;gt;&amp;gt; C99 inttypes.h includes stdint.h, so there&apos;s no need to include stdint.h separately. Though on some systems with inttypes.h there is no stdint.h, making it impossible to have a #include stdint.h in Thrift.h&lt;/p&gt;

&lt;p&gt;It sounds like a reasonable concern to avoid including stdint.h directly. But why should we avoid including inttypes.h on all platforms? There are some systems, on which including inttypes.h will break any build, since they includes stdint.h, which is absent on this systems? Or missed something?&lt;/p&gt;</comment>
                            <comment id="13167281" author="rcamp" created="Sun, 11 Dec 2011 23:50:05 +0000"  >&lt;p&gt;I faced this issue when doing a very standard install and wasted a lot of time trying to resolve. Steps to reproduce:&lt;/p&gt;

&lt;p&gt;Download Ubuntu Server 10.04 LTS 64 bit&lt;br/&gt;
&lt;a href=&quot;http://www.ubuntu.com/start-download?distro=server&amp;amp;bits=64&amp;amp;release=lts&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.ubuntu.com/start-download?distro=server&amp;amp;bits=64&amp;amp;release=lts&lt;/a&gt;&lt;br/&gt;
Load in VM...&lt;/p&gt;

&lt;p&gt;sudo apt-get upgrade&lt;br/&gt;
sudo apt-get install build-essential automake libtool pkg-config g++ &lt;br/&gt;
sudo apt-get install php5 php5-cli php5-dev python python-dev ant openjdk-6-jdk bjam&lt;br/&gt;
sudo apt-get install libboost-all-dev libevent-dev flex bison git-core&lt;/p&gt;

&lt;p&gt;git clone git://git.apache.org/thrift.git&lt;br/&gt;
cd thrift &lt;/p&gt;

&lt;p&gt;./bootstrap.sh&lt;br/&gt;
./configure&lt;br/&gt;
make&lt;br/&gt;
sudo make install&lt;/p&gt;

&lt;p&gt;cd contrib/fb303&lt;br/&gt;
./bootstrap.sh&lt;br/&gt;
./configure&lt;br/&gt;
make&lt;/p&gt;


&lt;p&gt;The above resulted in the following errors (adding for search index to help others find this ticket):&lt;br/&gt;
TTransport.h error expected constructor, destructor, or type conversion before readAll&lt;br/&gt;
TProtocol.h error &#226;uint32_t&#226; does not name a type &amp;lt;--not sure whats up with the charset issue&lt;br/&gt;
TProtocol.h error uint32_t does not name a type&lt;br/&gt;
FacebookService.cpp uint32_t was not declared in this scope&lt;/p&gt;


&lt;p&gt;SOLUTION:&lt;br/&gt;
sudo nano /usr/local/include/thrift/Thrift.h&lt;br/&gt;
Added the following at the bottom of the includes:&lt;br/&gt;
#include &amp;lt;inttypes.h&amp;gt;&lt;br/&gt;
#include &amp;lt;netinet/in.h&amp;gt;&lt;/p&gt;

&lt;p&gt;I see the two #ifdef conditions which should be loading these but there seems to be some sort of issue apparently.&lt;/p&gt;</comment>
                            <comment id="13167868" author="roger.meier" created="Mon, 12 Dec 2011 22:19:38 +0000"  >&lt;p&gt;Do you have the issue with fb303?&lt;br/&gt;
Is HAVE_CONFIG_H defined?&lt;/p&gt;</comment>
                            <comment id="13167951" author="rcamp" created="Mon, 12 Dec 2011 23:48:30 +0000"  >&lt;p&gt;The issue arises with fb303 make, not the thrift make. I did exactly the steps I provided, nothing more or less.&lt;/p&gt;</comment>
                            <comment id="13168003" author="roger.meier" created="Tue, 13 Dec 2011 00:44:42 +0000"  >&lt;p&gt;ok, it seems that fb303 does not take care on compiler location from current build and it does not set HAVE_CONFIG_H&lt;/p&gt;

&lt;p&gt;se we need a patch for this&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13175692" author="hellerliu" created="Sat, 24 Dec 2011 07:58:24 +0000"  >&lt;p&gt;I have encounter such problems. The compiler complained for not knowing about &quot;uint32_t&quot;, &quot;sockaddr_in&quot; &lt;br/&gt;
After adding this :&lt;/p&gt;

&lt;p&gt; COMMON_DEF=-DHAVE_NETINET_IN_H -DHAVE_INTTYPES_H&lt;/p&gt;

&lt;p&gt;to Makefile, the problem is gone.&lt;/p&gt;</comment>
                            <comment id="13278564" author="jfarrell" created="Fri, 18 May 2012 04:13:13 +0000"  >&lt;p&gt;Updated fb303 configure.ac to look for inttypes.h and netinet/in.h&lt;/p&gt;</comment>
                            <comment id="13278565" author="jfarrell" created="Fri, 18 May 2012 04:15:14 +0000"  >&lt;p&gt;fixed&lt;/p&gt;</comment>
                            <comment id="13278604" author="hudson" created="Fri, 18 May 2012 06:11:38 +0000"  >&lt;p&gt;Integrated in Thrift #475 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/475/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/475/&lt;/a&gt;)&lt;br/&gt;
    Thrift-1326:on some platforms, #include &amp;lt;stdint.h&amp;gt; is necessary to be included in Thrift.h&lt;br/&gt;
Client: contrib/fb303&lt;br/&gt;
Patch: Jake Farrell&lt;/p&gt;

&lt;p&gt;Adding check for needed headers to fb303 configure.ac (Revision 1339969)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12551161">THRIFT-1576</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12528001" name="THRIFT-1326.patch" size="504" author="jfarrell" created="Fri, 18 May 2012 04:13:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62206</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 27 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i168wn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244575</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>