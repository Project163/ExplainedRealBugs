<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:32:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-5087] test/test.py fails with &quot;AssertionError: Python 3.3 or later is required for proper operation.&quot;</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-5087</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/usr/bin/python test/test.py --retry-count 5 --features .* --skip-known-failures --server cpp,c_glib,cl,d,java,csharp,py,,rb,hs,perl,php,go,nodejs,dart,erl,lua,rs,netstd,nodets
Traceback (most recent call last):
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;test/test.py&quot;&lt;/span&gt;, line 45, in &amp;lt;module&amp;gt;
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; (cur_version &amp;gt;= req_version), &lt;span class=&quot;code-quote&quot;&gt;&quot;Python 3.3 or later is required &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; proper operation.&quot;&lt;/span&gt;
AssertionError: Python 3.3 or later is required &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; proper operation.
Makefile:1129: recipe &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; target &lt;span class=&quot;code-quote&quot;&gt;&apos;crossfeature&apos;&lt;/span&gt; failed
make: *** [crossfeature] Error 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13283791">THRIFT-5087</key>
            <summary>test/test.py fails with &quot;AssertionError: Python 3.3 or later is required for proper operation.&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="janosvitok">Jano Svitok</assignee>
                                    <reporter username="jensg">Jens Geyer</reporter>
                        <labels>
                            <label>ci-failure</label>
                    </labels>
                <created>Thu, 6 Feb 2020 21:57:01 +0000</created>
                <updated>Thu, 11 Feb 2021 22:27:08 +0000</updated>
                            <resolved>Fri, 13 Mar 2020 01:19:23 +0000</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                    <component>Build Process</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17031973" author="jensg" created="Thu, 6 Feb 2020 21:57:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://api.travis-ci.org/v3/job/646607791/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/646607791/log.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17042764" author="jensg" created="Sun, 23 Feb 2020 00:10:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=emmenlau&quot; class=&quot;user-hover&quot; rel=&quot;emmenlau&quot;&gt;emmenlau&lt;/a&gt; I was able to solve that on my machine by making python3 the default. Would that be a valid solution?&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://unix.stackexchange.com/a/410851/61758&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://unix.stackexchange.com/a/410851/61758&lt;/a&gt; but also note the comments below.&lt;/p&gt;</comment>
                            <comment id="17042880" author="emmenlau" created="Sun, 23 Feb 2020 10:12:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jensg&quot; class=&quot;user-hover&quot; rel=&quot;jensg&quot;&gt;jensg&lt;/a&gt;&#160;I think this is perfect! I&apos;ve come to the understanding that its not possible to test Python 2 and Python 3 from the same build, so I&apos;d say using Python 3 for the test is perfectly valid. Can you update the Dockerfile and trigger a rebuild of the image? Then the Travis builds should work again, hooray!&lt;/p&gt;

&lt;p&gt;But on a related topic: I think this implies that currently thrift &lt;b&gt;can&lt;/b&gt; &lt;b&gt;build&lt;/b&gt; with Python2 but it &lt;b&gt;can not&lt;/b&gt; &lt;b&gt;test&lt;/b&gt; with Python2. I&apos;m not sure if this is intentional, and/or if this could be worked around somehow. Is it fine to leave Python2 tests off for the time being?&lt;/p&gt;</comment>
                            <comment id="17053972" author="jensg" created="Sat, 7 Mar 2020 10:30:37 +0000"  >&lt;p&gt;Probably not. &lt;/p&gt;</comment>
                            <comment id="17055447" author="janosvitok" created="Mon, 9 Mar 2020 22:57:25 +0000"  >&lt;p&gt;The file is started by make using /usr/bin/python, because configure somehow determined that python3 is not available. I don&apos;t know configure/automake so I can only guess. Search for py3 in configure.ac. have_py3 is set to no&lt;/p&gt;

&lt;p&gt;Also see Makefile.am and CROSS_PY variable.&lt;/p&gt;</comment>
                            <comment id="17055674" author="janosvitok" created="Tue, 10 Mar 2020 08:02:54 +0000"  >&lt;p&gt;This line is suspicious: &lt;a href=&quot;https://github.com/apache/thrift/blob/master/configure.ac#L309&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/blob/master/configure.ac#L309&lt;/a&gt;&lt;br/&gt;
since  $python is 2.7, python3 vesion check is skipped.&lt;/p&gt;</comment>
                            <comment id="17055878" author="janosvitok" created="Tue, 10 Mar 2020 12:06:19 +0000"  >&lt;p&gt;This is the cause of this issue: &lt;a href=&quot;https://github.com/apache/thrift/pull/1995&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1995&lt;/a&gt;&lt;br/&gt;
The condition is OK. I read it as &quot;If /usr/bin/python IS 2.x then search for python3 et al. If /usr/bin/python is 3.x, there&apos;s no need to search for another python3&quot;. So, if /usr/bin/python =$PYTHON is 3.x, call $PYTHON everywhere python3 is required.&lt;/p&gt;

&lt;p&gt;This is a bit unfortunate, because it&apos;s not clear where python 3 is needed and where 2 may work/be required.&lt;/p&gt;

&lt;p&gt;Christopher wrote that --with-py3 does not work, without any details. I may only guess that is might be related to the fact that python2 and python3 are not distinct enough.&lt;/p&gt;

&lt;p&gt;For now, I propose to revert PR 1995, and fix Christopher&apos;s bug afterwards.&lt;/p&gt;</comment>
                            <comment id="17056434" author="jensg" created="Tue, 10 Mar 2020 21:32:09 +0000"  >&lt;p&gt;Could you prepare a PR so we can see the result?&lt;/p&gt;</comment>
                            <comment id="17057398" author="janosvitok" created="Wed, 11 Mar 2020 21:09:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/thrift/pull/2055&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/2055&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17057879" author="janosvitok" created="Thu, 12 Mar 2020 12:23:32 +0000"  >&lt;p&gt;Another version of 2055 pushed. See also discussion in &lt;a href=&quot;https://github.com/apache/thrift/pull/1995&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1995&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13285589">THRIFT-5099</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13286844">THRIFT-5107</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 35 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0b8jc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>