<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:08:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-2032] C# client leaks sockets/handles</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-2032</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;The C# client code does not correctly clean up the transport used, so the programmer has to take care on his own about this. This may even lead to a program hang in certain scenarios. Furthermore, the generated client should support IDisposable.&lt;/p&gt;

&lt;p&gt;Note that in contrast, the server side handles this automatically without any explicit manual coding.&lt;/p&gt;

&lt;p&gt;TODO:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;modify generated code to add IDisposable support&lt;/li&gt;
	&lt;li&gt;modify TProtocol to add IDisposable support&lt;/li&gt;
	&lt;li&gt;update the tutorial code accordingly&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12652999">THRIFT-2032</key>
            <summary>C# client leaks sockets/handles</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jensg">Jens Geyer</assignee>
                                    <reporter username="jensg">Jens Geyer</reporter>
                        <labels>
                    </labels>
                <created>Sat, 15 Jun 2013 01:16:56 +0000</created>
                <updated>Thu, 25 Jul 2013 03:40:04 +0000</updated>
                            <resolved>Tue, 25 Jun 2013 20:23:29 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>0.9.1</fixVersion>
                                    <component>C# - Compiler</component>
                    <component>C# - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13684265" author="jensg" created="Sat, 15 Jun 2013 19:33:16 +0000"  >&lt;p&gt;Patch &lt;span class=&quot;error&quot;&gt;&amp;#91;^THRIFT-2032-csharp-client-leaks-handles.patch &amp;#93;&lt;/span&gt; does also fix a unnecessary double assignment to result2 in AcceptImpl().&lt;/p&gt;</comment>
                            <comment id="13688422" author="jensg" created="Wed, 19 Jun 2013 20:35:52 +0000"  >&lt;p&gt;Meanwhile I&apos;m in doubt if IDisposable for the Iface is really such a good idea. To the class yes, but the Iface breaks Server code due to the missing method. The only reason for this was the using() use case, but maybe that&apos;s not enough of a reason here. &lt;/p&gt;</comment>
                            <comment id="13688724" author="carlyeks" created="Thu, 20 Jun 2013 01:01:53 +0000"  >&lt;p&gt;Just to clarify, you are talking about the Client and the Processor; the IDisposable for the Client&apos;s Iface makes sense, but the IDisposable for the Processor&apos;s Iface doesn&apos;t. Unfortunately, they are the same Iface, so we need to find the correct middle ground.&lt;/p&gt;

&lt;p&gt;I&apos;m much more in favor of having the Iface not be IDisposable, as it lowers the maintanence, with the client being explicitly IDisposable. I&apos;m unsure of how we currently clean up state from the processor, but I don&apos;t think that IDispoable makes the most sense.&lt;/p&gt;</comment>
                            <comment id="13688952" author="jensg" created="Thu, 20 Jun 2013 07:04:20 +0000"  >&lt;p&gt;Exactly. So lets drop the idisposable from the iface. Dont want to put too much effort in here, just need to address the leak.&lt;/p&gt;</comment>
                            <comment id="13691372" author="jensg" created="Sun, 23 Jun 2013 07:38:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=carlyeks&quot; class=&quot;user-hover&quot; rel=&quot;carlyeks&quot;&gt;carlyeks&lt;/a&gt; (or anybody else) did you have the time to look at patch v2? I really would like to get this fixed asap. Thanks!&lt;/p&gt;</comment>
                            <comment id="13693345" author="jensg" created="Tue, 25 Jun 2013 20:23:29 +0000"  >&lt;p&gt;Used the patch &amp;gt; 1 week now, had no problems with it. Committed, assuming lazy consensus. Feel free to reopen, if necessary.&lt;/p&gt;</comment>
                            <comment id="13693420" author="hudson" created="Tue, 25 Jun 2013 21:57:17 +0000"  >&lt;p&gt;Integrated in Thrift #752 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/752/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/752/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2032&quot; title=&quot;C# client leaks sockets/handles&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2032&quot;&gt;&lt;del&gt;THRIFT-2032&lt;/del&gt;&lt;/a&gt; C# client leaks sockets/handles (Revision 102bca47f754d9c9ed6ce341c7f8f106bd2719d7)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
jensg : &lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/csharp/src/Protocol/TProtocol.cs&lt;/li&gt;
	&lt;li&gt;lib/csharp/src/Transport/TServerSocket.cs&lt;/li&gt;
	&lt;li&gt;tutorial/csharp/CsharpClient/CsharpClient.cs&lt;/li&gt;
	&lt;li&gt;compiler/cpp/src/generate/t_csharp_generator.cc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12588923" name="THRIFT-2032-csharp-client-leaks-handles_v2.patch" size="9917" author="jensg" created="Thu, 20 Jun 2013 21:30:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>333322</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 22 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1li0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>333650</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>