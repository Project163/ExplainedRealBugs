<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:15:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-2825] Supplying unicode to python Thrift client can cause next request arguments to get overwritten</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-2825</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;The python thrift client expects bytestrings instead of unicode. However, if you accidentally supply unicode instead of bytestrings it messes the arguments for the next thrift call on that client object, even if all the arguments are ASCII / bytestrings.&lt;/p&gt;

&lt;p&gt;For example, I have some python thrift client code that looks like this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    try:
        client.example_function(&apos;first_call_arg1&apos;, u&apos;&#9731;&apos;, &apos;first_call_arg3&apos;)
    except UnicodeEncodeError:
        pass # This is what we expect to happen

    client.example_function(&apos;second_call_arg1&apos;, &apos;second_call_arg2&apos;, &apos;second_call_arg3&apos;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What I expect to see on the server side is this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Example function called with second_call_arg1 second_call_arg2 second_call_arg3
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But what I see is this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Example function called with first_call_arg1 &#65533; None
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m using the Thrift compiler version 0.9.2 and python thrift library version 0.9.1.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12755460">THRIFT-2825</key>
            <summary>Supplying unicode to python Thrift client can cause next request arguments to get overwritten</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roger">Roger Meier</assignee>
                                    <reporter username="steiza">Zach Steindler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Nov 2014 19:35:06 +0000</created>
                <updated>Mon, 26 Jan 2015 02:26:38 +0000</updated>
                            <resolved>Mon, 1 Dec 2014 23:15:19 +0000</resolved>
                                                    <fixVersion>0.9.3</fixVersion>
                                    <component>Python - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14212711" author="steiza" created="Fri, 14 Nov 2014 19:36:32 +0000"  >&lt;p&gt;Attached is a minimal example, to reproduce you can run the python server.py and client.py to see the described output.&lt;/p&gt;</comment>
                            <comment id="14223215" author="githubbot" created="Mon, 24 Nov 2014 18:04:48 +0000"  >&lt;p&gt;GitHub user steiza opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/282&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/282&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Fix for Python Thrift client when it encounters an exception on write&lt;/p&gt;

&lt;p&gt;    Make sure we clear wbuf on exception, so it doesn&apos;t contain a partial function call.&lt;/p&gt;

&lt;p&gt;    As the branch name suggests, this is for &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2825&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/THRIFT-2825&lt;/a&gt;. This is my first time contributing to Thrift, so let me know if there&apos;s something I should be doing differently!&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/steiza/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/steiza/thrift&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2825&quot; title=&quot;Supplying unicode to python Thrift client can cause next request arguments to get overwritten&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2825&quot;&gt;&lt;del&gt;THRIFT-2825&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/282.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/282.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #282&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit d30b814ba2c07f672a3dfe4f49f8153c06e84c57&lt;br/&gt;
Author: Zach Steindler &amp;lt;steiza@coffeehousecoders.org&amp;gt;&lt;br/&gt;
Date:   2014-11-24T18:00:47Z&lt;/p&gt;

&lt;p&gt;    Fix for Python Thrift client when it encounters an exception on write&lt;/p&gt;

&lt;p&gt;    Make sure we clear wbuf on exception, so it doesn&apos;t contain a&lt;br/&gt;
    partial function call.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14230657" author="roger.meier" created="Mon, 1 Dec 2014 23:15:19 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                            <comment id="14230658" author="githubbot" created="Mon, 1 Dec 2014 23:15:25 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/282&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/282&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14230704" author="hudson" created="Mon, 1 Dec 2014 23:46:43 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1382 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1382/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1382/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2825&quot; title=&quot;Supplying unicode to python Thrift client can cause next request arguments to get overwritten&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2825&quot;&gt;&lt;del&gt;THRIFT-2825&lt;/del&gt;&lt;/a&gt; Supplying unicode to python Thrift client can cause next request arguments to get overwritten (roger: rev 3a5252999d88cc2eaca76469e60a24969ec77da6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/py/src/transport/TTransport.py&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12681595" name="thrift_example.tar.gz" size="6784" author="steiza" created="Fri, 14 Nov 2014 19:36:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 51 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22ecv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>