<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:56:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-569] Segmentation Fault when using BinaryProtocolAccelerated in Ruby</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-569</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;When using the BinaryProtocolAccelerated in Ruby, and expecting a map&amp;lt;string,string&amp;gt; and getting something else, a segmentation fault occurs. I was able to trace the segmentation fault back to binary_protocol_accelerated.c, in r807972, the problem is in RSTRING_LEN(str) inside write_string_direct(...).&lt;/p&gt;

&lt;p&gt;Notice that, in the Python implementation, or when using BinaryProtocol as opposed to BinaryProtocolAccelerated, an exception is raised when a value has a type other than string in a map&amp;lt;string, string&amp;gt;.&lt;/p&gt;

&lt;p&gt;Attached is a patch that solved the problem for me, please advise on whether or not this would be the right way to solve it (it appears to work properly in different cases).&lt;/p&gt;

&lt;p&gt;Also, attached is a set of files that can be used to reproduce the segmentation fault mentioned.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux 2.6.31-4-generic, Ruby 1.8.7, Thrift r807972&lt;/p&gt;</environment>
        <key id="12434141">THRIFT-569</key>
            <summary>Segmentation Fault when using BinaryProtocolAccelerated in Ruby</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="staii">Sinan Taifour</assignee>
                                    <reporter username="staii">Sinan Taifour</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Aug 2009 09:55:35 +0000</created>
                <updated>Tue, 1 Nov 2011 02:52:03 +0000</updated>
                            <resolved>Wed, 2 Sep 2009 20:05:48 +0000</resolved>
                                                    <fixVersion>0.2</fixVersion>
                                    <component>Ruby - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12748321" author="staii" created="Thu, 27 Aug 2009 10:01:15 +0000"  >&lt;p&gt;Using &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;.&lt;/p&gt;</comment>
                            <comment id="12748424" author="bryanduxbury" created="Thu, 27 Aug 2009 16:21:35 +0000"  >&lt;p&gt;Instead of pasting the patch in the description, can you attach the patch as a file? There&apos;s a checkbox on there that grants license to the ASF. Thanks!&lt;/p&gt;</comment>
                            <comment id="12748481" author="staii" created="Thu, 27 Aug 2009 18:06:31 +0000"  >&lt;p&gt;The patch.&lt;/p&gt;</comment>
                            <comment id="12748482" author="staii" created="Thu, 27 Aug 2009 18:08:42 +0000"  >&lt;p&gt;These files can be used to recreate the segmentation fault.&lt;/p&gt;</comment>
                            <comment id="12748483" author="staii" created="Thu, 27 Aug 2009 18:09:49 +0000"  >&lt;p&gt;Removed inline code, files are attached instead.&lt;/p&gt;</comment>
                            <comment id="12750637" author="bryanduxbury" created="Wed, 2 Sep 2009 20:05:48 +0000"  >&lt;p&gt;I just committed this patch. Thanks Sinan!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12417908" name="client.rb" size="426" author="staii" created="Thu, 27 Aug 2009 18:08:42 +0000"/>
                            <attachment id="12417907" name="server.rb" size="601" author="staii" created="Thu, 27 Aug 2009 18:08:42 +0000"/>
                            <attachment id="12417906" name="test.thrift" size="76" author="staii" created="Thu, 27 Aug 2009 18:08:41 +0000"/>
                            <attachment id="12417905" name="thrift-r807972-patch.diff" size="520" author="staii" created="Thu, 27 Aug 2009 18:06:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>186745</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16bif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244997</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>