<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:17:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3097] cmake targets unconditionally depend on optional libraries</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3097</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;if the optional libraries are not installed, the &lt;em&gt;default&lt;/em&gt; cmake build fails.&lt;/p&gt;

&lt;h2&gt;&lt;a name=&quot;Howtoreproduce&quot;&gt;&lt;/a&gt;How to reproduce&lt;/h2&gt;

&lt;h3&gt;&lt;a name=&quot;Case1&quot;&gt;&lt;/a&gt;Case 1&lt;/h3&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&quot;cmake -D WITH_LIBEVENT=OFF&quot; (or just &quot;cmake&quot; on a system without libevent)&lt;/li&gt;
	&lt;li&gt;make
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Linking CXX executable ../../bin/StressTest
/usr/bin/ld: cannot find -lthriftnb
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h3&gt;&lt;a name=&quot;Case2&quot;&gt;&lt;/a&gt;Case 2&lt;/h3&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&quot;cmake&quot; on a system with Python installed but &lt;b&gt;not&lt;/b&gt; package python-dev&lt;/li&gt;
	&lt;li&gt;make&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Building Python library
/usr/lib/python2.7/distutils/dist.py:267: UserWarning: Unknown distribution option: &apos;use_2to3&apos;
  warnings.warn(msg)
running build
running build_py
running build_ext
building &apos;thrift.protocol.fastbinary&apos; extension
x86_64-linux-gnu-gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fno-strict-aliasing -D_FORTIFY_SOURCE=2 -g -fstack-protector-strong -Wformat -Werror=format-security -fPIC -I/usr/include/python2.7 -c src/protocol/fastbinary.c -o build/temp.linux-x86_64-2.7/src/protocol/fastbinary.o
src/protocol/fastbinary.c:20:20: fatal error: Python.h: No such file or directory
 #include &amp;lt;Python.h&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;h3&gt;&lt;a name=&quot;case3&quot;&gt;&lt;/a&gt;case 3&lt;/h3&gt;

&lt;p&gt;After installing libevent, on a system without ZLIB:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Linking CXX executable ../../bin/StressTestNonBlocking
/usr/bin/ld: cannot find -lthriftz
collect2: error: ld returned 1 exit status
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;h3&gt;&lt;a name=&quot;case4&quot;&gt;&lt;/a&gt;case 4&lt;/h3&gt;

&lt;p&gt;After installing ZLIB, either on a system without OpenSSL or on Ubuntu 14.10, where OpenSSL is installed but NOT found (another bug?)&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Building CXX object test/cpp/CMakeFiles/TestClient.dir/src/TestClient.cpp.o
In file included from /home/marco/src/thrift.marco.hg/test/cpp/src/TestClient.cpp:30:0:
/home/marco/src/thrift.marco.hg/lib/cpp/src/thrift/transport/TSSLSocket.h:25:25: fatal error: openssl/ssl.h: No such file or directory
 #include &amp;lt;openssl/ssl.h&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/thrift/pull/443&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/443&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Bug found on Linux Ubuntu 14.10, but it should be present anywhere.&lt;/p&gt;</environment>
        <key id="12821260">THRIFT-3097</key>
            <summary>cmake targets unconditionally depend on optional libraries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="marco.molteni">Marco Molteni</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Apr 2015 18:44:37 +0000</created>
                <updated>Sat, 20 Feb 2021 15:28:08 +0000</updated>
                            <resolved>Wed, 15 Apr 2015 20:23:35 +0000</resolved>
                                                    <fixVersion>0.9.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14496756" author="githubbot" created="Wed, 15 Apr 2015 19:26:53 +0000"  >&lt;p&gt;GitHub user marco-m opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/443&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/443&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thrift 3097&lt;/p&gt;

&lt;p&gt;    See &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3097&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/THRIFT-3097&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/marco-m/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/marco-m/thrift&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3097&quot; title=&quot;cmake targets unconditionally depend on optional libraries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3097&quot;&gt;&lt;del&gt;THRIFT-3097&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/443.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/443.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #443&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 6ac03ffca8020b75249b4a0369bfb76633176921&lt;br/&gt;
Author: Marco Molteni &amp;lt;marco.molteni@laposte.net&amp;gt;&lt;br/&gt;
Date:   2015-04-15T18:46:48Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3097&quot; title=&quot;cmake targets unconditionally depend on optional libraries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3097&quot;&gt;&lt;del&gt;THRIFT-3097&lt;/del&gt;&lt;/a&gt; cmake targets unconditionally depend on optional libraries&lt;/p&gt;

&lt;p&gt;commit e42ac1ccd221e589dfc63d084ba6896be63e4db0&lt;br/&gt;
Author: Marco Molteni &amp;lt;marco.molteni@laposte.net&amp;gt;&lt;br/&gt;
Date:   2015-04-15T19:22:41Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3097&quot; title=&quot;cmake targets unconditionally depend on optional libraries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3097&quot;&gt;&lt;del&gt;THRIFT-3097&lt;/del&gt;&lt;/a&gt; cmake targets unconditionally depend on optional libraries&lt;br/&gt;
    Consider also cases of missing ZLIB and missing OpenSSL.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14496759" author="marco.molteni" created="Wed, 15 Apr 2015 19:28:06 +0000"  >&lt;p&gt;Github pull request: &lt;a href=&quot;https://github.com/apache/thrift/pull/443&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/443&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14496866" author="roger.meier" created="Wed, 15 Apr 2015 20:23:35 +0000"  >&lt;p&gt;Thanks Marco, committed!&lt;/p&gt;</comment>
                            <comment id="14497010" author="hudson" created="Wed, 15 Apr 2015 21:11:26 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1509 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1509/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1509/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3097&quot; title=&quot;cmake targets unconditionally depend on optional libraries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3097&quot;&gt;&lt;del&gt;THRIFT-3097&lt;/del&gt;&lt;/a&gt; cmake targets unconditionally depend on optional libraries (roger: rev 7f47792bf288c3dca049d04de06d57d2f060abba)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/py/CMakeLists.txt&lt;/li&gt;
	&lt;li&gt;CMakeLists.txt&lt;/li&gt;
	&lt;li&gt;build/cmake/DefineOptions.cmake&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3097&quot; title=&quot;cmake targets unconditionally depend on optional libraries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3097&quot;&gt;&lt;del&gt;THRIFT-3097&lt;/del&gt;&lt;/a&gt; cmake targets unconditionally depend on optional libraries Consider also cases of missing ZLIB and missing OpenSSL. (roger: rev fdf0198103fddf9cd43955da5eee9dc4c02ef9b4)&lt;/li&gt;
	&lt;li&gt;CMakeLists.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14533062" author="githubbot" created="Thu, 7 May 2015 17:40:40 +0000"  >&lt;p&gt;Github user marco-m closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/443&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/443&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 28 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2datr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>