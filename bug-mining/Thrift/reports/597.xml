<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:05:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-1159] THttpClient-&gt;Flush() issue (connection thru proxy)</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-1159</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;&lt;b&gt;1)&lt;/b&gt; Issue with &lt;b&gt;timeout&lt;/b&gt; at the moment of call &lt;b&gt;THttpClient-&amp;gt;Flush()&lt;/b&gt; when I try to get data thru &lt;b&gt;proxy&lt;/b&gt;.&lt;br/&gt;
Prerequestites: clent(c# thrift) before proxy, we resource (in my case &lt;a href=&quot;http://google.com&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://google.com&lt;/a&gt;)&lt;br/&gt;
Code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Program {
   &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void Main(string[] args) {
	Uri uri = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Uri(&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//google.com&quot;&lt;/span&gt;);
&lt;/span&gt;	TTransport transport = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; THttpClient(uri);
  	transport.Flush();
   }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;At the moment of call the method &lt;b&gt;transport.Flush();&lt;/b&gt; just goes to sleep forever (in my app). &lt;br/&gt;
Issue is locates in the: file &lt;b&gt;Transport/THttpClient.cs -&amp;gt; method CreateRequest()&lt;/b&gt;  &lt;br/&gt;
code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 
connection.Proxy = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The lib should set state of proxy using some methods like to:&lt;br/&gt;
  use default proxy - property WebRequest.DefaultWebProxy from namespace System.Net&lt;br/&gt;
  add new property or methods with Proxy object&lt;br/&gt;
  probably use a method of declaring an attribute in C# - to write own custom attribute(s) for class THttpClient; it&apos;s   be able manage state of object inside without usage of some xml config files&lt;/p&gt;

&lt;p&gt;&lt;b&gt;2)&lt;/b&gt; &lt;b&gt;Timeout period&lt;/b&gt; is not set by default.&lt;br/&gt;
Actually timeout period set to &lt;b&gt;0&lt;/b&gt;&lt;br/&gt;
Code (file Transport/THttpClient.cs):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; connectTimeout = 0;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; readTimeout = 0;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Need to set value of timeout by default like &lt;b&gt;15&lt;/b&gt; seconds instead of infinite interval.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;3)&lt;/b&gt; &lt;b&gt;HttpWebRequest connection properties&lt;/b&gt; sets by default&lt;br/&gt;
Code (file Transport/THttpClient.cs -&amp;gt; method CreateRequest()):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;connection.ContentType = &lt;span class=&quot;code-quote&quot;&gt;&quot;application/x-thrift&quot;&lt;/span&gt;;
connection.Accept = &lt;span class=&quot;code-quote&quot;&gt;&quot;application/x-thrift&quot;&lt;/span&gt;;
connection.UserAgent = &lt;span class=&quot;code-quote&quot;&gt;&quot;C#/THttpClient&quot;&lt;/span&gt;;
connection.Method = &lt;span class=&quot;code-quote&quot;&gt;&quot;POST&quot;&lt;/span&gt;;
connection.ProtocolVersion = HttpVersion.Version10;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But need to &lt;b&gt;have a way to configure&lt;/b&gt; it options thru object or class attributes in client code&lt;/p&gt;</description>
                <environment>&lt;p&gt;w2k sp4, .net2&lt;/p&gt;</environment>
        <key id="12505763">THRIFT-1159</key>
            <summary>THttpClient-&gt;Flush() issue (connection thru proxy)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ag9">alex_gs</reporter>
                        <labels>
                            <label>thrift</label>
                    </labels>
                <created>Fri, 29 Apr 2011 08:05:14 +0000</created>
                <updated>Sat, 19 May 2012 14:20:18 +0000</updated>
                            <resolved>Fri, 18 May 2012 00:34:59 +0000</resolved>
                                                    <fixVersion>0.9</fixVersion>
                                    <component>C# - Library</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="43200">12h</timeoriginalestimate>
                            <timeestimate seconds="43200">12h</timeestimate>
                                        <comments>
                            <comment id="13028599" author="ag9" created="Wed, 4 May 2011 04:51:23 +0000"  >&lt;p&gt;Extensions/ pathes for THttpClient.cs:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the property (setter) &lt;b&gt;Proxy&lt;/b&gt; for configuring proxy in client code&lt;br/&gt;
Sample:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Uri uri = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Uri(&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:3968/TimeServerSample/post.ashx&quot;&lt;/span&gt;);
&lt;/span&gt;THttpClient transport = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; THttpClient(uri);
transport.Proxy = WebRequest.DefaultWebProxy;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;timeouts is set&lt;/b&gt; like 30 seconds (for connect and read time)&lt;/li&gt;
	&lt;li&gt;inside private method CreateRequest() I&apos;ve added to object connection (of type HttpWebRequest)&lt;br/&gt;
couple of properties &lt;b&gt;(value as false) - Expect100Continue &amp;amp; UseNagleAlgorithm&lt;/b&gt;. It&apos;s allow to extend&lt;br/&gt;
perfomance regarding old version (basically) twice&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13029736" author="ag9" created="Fri, 6 May 2011 04:28:24 +0000"  >&lt;p&gt;Fixed version of &lt;b&gt;THttpClient.cs&lt;/b&gt; above &lt;b&gt;in attachment&lt;/b&gt;&lt;/p&gt;</comment>
                            <comment id="13277501" author="jsamuel" created="Thu, 17 May 2012 02:36:24 +0000"  >&lt;p&gt;How do we get this patch integrated into the main source?  It appears to have been sitting here is a patch for 1 year.  &lt;br/&gt;
This patch fixes my issue in trying to use the API behind a corporate firewall/Web Proxy.&lt;/p&gt;</comment>
                            <comment id="13277539" author="jfarrell" created="Thu, 17 May 2012 04:18:56 +0000"  >&lt;p&gt;Joshua, can you submit a patch against current trunk for this rather than the actual file (&lt;a href=&quot;http://thrift.apache.org/docs/HowToContribute/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://thrift.apache.org/docs/HowToContribute/&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="13277564" author="ag9" created="Thu, 17 May 2012 05:01:25 +0000"  >&lt;p&gt;Also please check a &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1162&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/THRIFT-1162&lt;/a&gt; issue and fix inside. By the way, why issues/fixes not check so long time? I have a really bunch of bugs and fixes with thrift but did not want commit it here because thought the project &quot;in decline&quot;.&lt;/p&gt;</comment>
                            <comment id="13277579" author="jfarrell" created="Thu, 17 May 2012 05:19:49 +0000"  >&lt;p&gt;Alex, I can assure you that Thrift is active and I have been creating releases around every 3-4 months (0.9rc coming shortly). Since the beginning of the this year we have added 2 new libraries, updated the website, resolved ~100 tickets and taken care of some Apache internal house keeping. &lt;/p&gt;

&lt;p&gt;Please attach patches to the tickets with asf inclusion rather than whole files like in this ticket and in Thrift-1162. See &lt;a href=&quot;http://thrift.apache.org/docs/HowToContribute/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://thrift.apache.org/docs/HowToContribute/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13278441" author="jsamuel" created="Fri, 18 May 2012 00:22:15 +0000"  >&lt;p&gt;Patch based on alex_gs&apos;s THttpClient.cs + default to system/config file default proxy, rather than NULL to allow app config file to set the proxy correctly.&lt;/p&gt;</comment>
                            <comment id="13278456" author="jfarrell" created="Fri, 18 May 2012 00:34:59 +0000"  >&lt;p&gt;Thanks for rebase, committed&lt;/p&gt;</comment>
                            <comment id="13278497" author="hudson" created="Fri, 18 May 2012 02:01:09 +0000"  >&lt;p&gt;Integrated in Thrift #472 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/472/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/472/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1159&quot; title=&quot;THttpClient-&amp;gt;Flush() issue (connection thru proxy)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1159&quot;&gt;&lt;del&gt;THRIFT-1159&lt;/del&gt;&lt;/a&gt;:THttpClient-&amp;gt;Flush() issue (connection thru proxy)&lt;br/&gt;
Client: csharp&lt;br/&gt;
Patch: Joshua Samuel + Alex Gaas&lt;/p&gt;

&lt;p&gt;Resolve HttpClient flush issues with proxy. (Revision 1339934)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
jfarrell : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1339934&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1339934&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/thrift/trunk/lib/csharp/src/Transport/THttpClient.cs&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12556526">THRIFT-1610</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12478122" name="THttpClient.cs" size="4652" author="ag9" created="Wed, 4 May 2011 04:51:23 +0000"/>
                            <attachment id="12527961" name="thrift-1325013-THttpClient.cs-for-1159.patch" size="1252" author="jsamuel" created="Fri, 18 May 2012 00:22:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>187240</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 27 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i083c7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>45140</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>