<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:19:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-2917] &quot;make clean&quot; breaks test/c_glib</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-2917</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;Today I ran into a situation where I wanted to do a &lt;tt&gt;make clean&lt;/tt&gt; in the test/c_glib directory only. After that, the build was no longer possible and always ended with:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$&amp;gt; make 
Makefile:564: gen-c_glib/.deps/t_test_second_service.Plo: File or folder not found
Makefile:565: gen-c_glib/.deps/t_test_thrift_test.Plo: File or folder not found
Makefile:566: gen-c_glib/.deps/t_test_thrift_test_types.Plo: File or folder not found
make: *** No rule to make target &lt;span class=&quot;code-quote&quot;&gt;&apos;gen-c_glib/.deps/t_test_thrift_test_types.Plo&apos;&lt;/span&gt;.  Stop.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After running ./configure again the problem went away. &lt;/p&gt;</description>
                <environment>&lt;p&gt;openSUSE 13.2&lt;/p&gt;</environment>
        <key id="12763927">THRIFT-2917</key>
            <summary>&quot;make clean&quot; breaks test/c_glib</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="simonsouth">Simon South</assignee>
                                    <reporter username="jensg">Jens Geyer</reporter>
                        <labels>
                    </labels>
                <created>Sun, 28 Dec 2014 14:34:07 +0000</created>
                <updated>Fri, 31 Jul 2015 21:41:15 +0000</updated>
                            <resolved>Tue, 28 Jul 2015 21:19:23 +0000</resolved>
                                                    <fixVersion>0.9.3</fixVersion>
                                    <component>C glib - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14259675" author="jensg" created="Sun, 28 Dec 2014 16:46:34 +0000"  >&lt;p&gt;Root cause seems to be that the &quot;clean&quot; target removes the gen-c_glib folder including all contents, especially the hidden .deps folder created by configure. According to the &lt;a href=&quot;http://www.gnu.org/software/automake/manual/html_node/Clean.html#Clean&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;GNU guidelines&lt;/a&gt; this should not be the case:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;As the GNU Standards aren&#8217;t always explicit as to which files should be removed by which rule, we&#8217;ve adopted a heuristic that we believe was first formulated by Fran&#231;ois Pinard: &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;If make built it, and it is commonly something that one would want to rebuild (for instance, a .o file), then mostlyclean should delete it.&lt;/li&gt;
	&lt;li&gt;Otherwise, &lt;b&gt;if make built it, then clean should delete it.&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;If configure built it, then distclean should delete it.&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;If the maintainer built it (for instance, a .info file), then maintainer-clean should delete it. However maintainer-clean should not delete anything that needs to exist in order to run &#8216;./configure &amp;amp;&amp;amp; make&#8217;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We recommend that you follow this same set of heuristics in your Makefile.am. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;As .deps is created by configure it should be deleted only by distclean, rather than clean.&lt;/p&gt;</comment>
                            <comment id="14641158" author="simonsouth" created="Fri, 24 Jul 2015 22:15:58 +0000"  >&lt;p&gt;Thanks for the bug report and the explanation, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jensg&quot; class=&quot;user-hover&quot; rel=&quot;jensg&quot;&gt;jensg&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached a patch that changes &lt;tt&gt;make clean&lt;/tt&gt; so it deletes only the files &lt;em&gt;within&lt;/em&gt; generated folders, leaving the &lt;tt&gt;.deps&lt;/tt&gt; subfolder intact. This produces the desired behaviour:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;make clean&lt;/tt&gt; now deletes only the files generated via &lt;tt&gt;make&lt;/tt&gt;, while&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;make distclean&lt;/tt&gt; empties completely the generated folders.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Importantly, &lt;tt&gt;make clean&lt;/tt&gt; no longer breaks the build!&lt;/p&gt;</comment>
                            <comment id="14645060" author="jensg" created="Tue, 28 Jul 2015 21:19:23 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                            <comment id="14645117" author="hudson" created="Tue, 28 Jul 2015 22:10:38 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1626 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1626/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1626/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2917&quot; title=&quot;&amp;quot;make clean&amp;quot; breaks test/c_glib&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2917&quot;&gt;&lt;del&gt;THRIFT-2917&lt;/del&gt;&lt;/a&gt; &quot;make clean&quot; breaks test/c_glib (jensg: rev 8c5fce9afabb2476c134a702356bb1bad1eb43f4)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;tutorial/c_glib/Makefile.am&lt;/li&gt;
	&lt;li&gt;lib/c_glib/test/Makefile.am&lt;/li&gt;
	&lt;li&gt;test/c_glib/Makefile.am&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12849050">THRIFT-3266</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12747116" name="0001-thrift-2917-make-clean-breaks-test-c_glib.patch" size="1193" author="simonsouth" created="Fri, 24 Jul 2015 22:15:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 17 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23swv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>