<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:10:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-2184] undefined method rspec_verify for Thrift::MemoryBufferTransport</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-2184</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;When running &apos;make install&apos;, I get the following errors that do not occur when just running &apos;make&apos;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  1) BinaryProtocolAccelerated it should behave like a binary protocol should write a byte
     Failure/Error: @trans.rspec_verify
     NoMethodError:
       undefined method `rspec_verify&apos; for #&amp;lt;Thrift::MemoryBufferTransport:0x000000034e86c8&amp;gt;
     Shared Example Group: &quot;a binary protocol&quot; called from ./spec/binary_protocol_accelerated_spec.rb:28
     # ./spec/binary_protocol_spec_shared.rb:112:in `block (2 levels) in &amp;lt;top (required)&amp;gt;&apos;

  2) BinaryProtocol it should behave like a binary protocol should write a byte
     Failure/Error: @trans.rspec_verify
     NoMethodError:
       undefined method `rspec_verify&apos; for #&amp;lt;Thrift::MemoryBufferTransport:0x000000034509e0&amp;gt;
     Shared Example Group: &quot;a binary protocol&quot; called from ./spec/binary_protocol_spec.rb:25
     # ./spec/binary_protocol_spec_shared.rb:112:in `block (2 levels) in &amp;lt;top (required)&amp;gt;&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I commented out the call to #rspec_verify, but I do not know what the correct fix is.&lt;/p&gt;

&lt;p&gt;I also get numerous (related) warnings about mock being deprecated:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;DEPRECATION: mock is deprecated. Use double instead. Called from /home/pbrannan/git/thrift/lib/rb/spec/unix_socket_spec.rb:93:in `block (3 levels) in &amp;lt;top (required)&amp;gt;&apos;.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12668468">THRIFT-2184</key>
            <summary>undefined method rspec_verify for Thrift::MemoryBufferTransport</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cout">Paul Brannan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Sep 2013 11:43:07 +0000</created>
                <updated>Thu, 10 Jul 2014 13:42:26 +0000</updated>
                            <resolved>Thu, 10 Jul 2014 13:42:26 +0000</resolved>
                                    <version>0.9.1</version>
                                    <fixVersion>0.9.2</fixVersion>
                                    <component>Ruby - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13866717" author="nhed" created="Thu, 9 Jan 2014 15:40:57 +0000"  >&lt;p&gt;I had the same issue you described&lt;/p&gt;

&lt;p&gt;I think it may have to do with versions of rspec/rspec-mock ... I had multiple rspec gems installed&lt;br/&gt;
(2.14.x 2.10.x &amp;amp; 1.3.x installed), I removed the 2.14.x and it seems to be doing better.&lt;/p&gt;

&lt;p&gt;This is not a solution as more of a workaround, I&apos;m not versed enough in the gem ecosystem to propose a fix&lt;/p&gt;</comment>
                            <comment id="13874496" author="nhed" created="Fri, 17 Jan 2014 06:29:30 +0000"  >&lt;p&gt;Patch attached&lt;/p&gt;

&lt;p&gt;To reproduce the problem one needs to &apos;sudo gem install rspec&apos; and ensure that the rspec 2.14.x is installed.  While lib/rb/thrift.gemspec specifies &apos;rspec&apos;, &apos;~&amp;gt; 2.10.0&apos;  (i.e. do not go beyond 2.10.x), the install-exec-hook make rule was invoking rake directly, bypassing the gemspec.  Running &quot;rake install&quot; through bundler&lt;/p&gt;

&lt;p&gt;p.s. I am a rake/rspec/bundler newb - please review carfully&lt;/p&gt;</comment>
                            <comment id="13874804" author="jfarrell" created="Fri, 17 Jan 2014 14:02:48 +0000"  >&lt;p&gt;Thanks for the patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nhed&quot; class=&quot;user-hover&quot; rel=&quot;nhed&quot;&gt;nhed&lt;/a&gt;. I think that making bundler a req for the ruby lib via make is a good idea, below is a modification to the patch you attached which will remove the dep on rake in the Makefile and require bundler. thoughts?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;diff --git a/configure.ac b/configure.ac
index 593b66c..7d9a82e 100755
--- a/configure.ac
+++ b/configure.ac
@@ -232,9 +232,8 @@ AX_THRIFT_LIB(ruby, [Ruby], yes)
 have_ruby=no
 &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; test &lt;span class=&quot;code-quote&quot;&gt;&quot;$with_ruby&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&quot;yes&quot;&lt;/span&gt;; then
   AC_PATH_PROG([RUBY], [ruby])
-  AC_PATH_PROG([RAKE], [rake])
   AC_PATH_PROG([BUNDLER], [bundle])
-  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; test &lt;span class=&quot;code-quote&quot;&gt;&quot;x$RUBY&quot;&lt;/span&gt; != &lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt; -a &lt;span class=&quot;code-quote&quot;&gt;&quot;x$RAKE&quot;&lt;/span&gt; != &lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt;; then
+  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; test &lt;span class=&quot;code-quote&quot;&gt;&quot;x$RUBY&quot;&lt;/span&gt; != &lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt; -a &lt;span class=&quot;code-quote&quot;&gt;&quot;x$BUNDLER&quot;&lt;/span&gt; != &lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt;; then
     have_ruby=&lt;span class=&quot;code-quote&quot;&gt;&quot;yes&quot;&lt;/span&gt;
   fi
 fi
diff --git a/lib/rb/Makefile.am b/lib/rb/Makefile.am
index 091c67f..300f676 100755
--- a/lib/rb/Makefile.am
+++ b/lib/rb/Makefile.am
@@ -29,21 +29,21 @@ EXTRA_DIST = \
 
 DESTDIR ?= /
 
-all-local:
 &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; HAVE_BUNDLER
+
+all-local:
        $(BUNDLER) install
        $(BUNDLER) exec rake
-endif
 
 install-exec-hook:
-       $(RAKE) install
+       $(BUNDLER) exec rake install
 
 clean-local:
-       $(RAKE) clean
+       $(BUNDLER) exec rake clean
 
 check-local: all
-&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; HAVE_BUNDLER
        $(BUNDLER) install
        $(BUNDLER) exec rake
+
 endif
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13876515" author="nhed" created="Mon, 20 Jan 2014 15:34:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jfarrell&quot; class=&quot;user-hover&quot; rel=&quot;jfarrell&quot;&gt;jfarrell&lt;/a&gt; Please proceed with your patch.  Any issue I may have had with it was not reproducible and is probably loca to me&lt;/p&gt;</comment>
                            <comment id="13879410" author="jfarrell" created="Thu, 23 Jan 2014 03:21:58 +0000"  >&lt;p&gt;committed modified patch, thanks for the initial patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nhed&quot; class=&quot;user-hover&quot; rel=&quot;nhed&quot;&gt;nhed&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13881709" author="hudson" created="Sat, 25 Jan 2014 06:28:34 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1012 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1012/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1012/&lt;/a&gt;)&lt;br/&gt;
Thrift-2184: undefined method rspec_verify for Thrift::MemoryBufferTransport (jfarrell: rev 507740c93c795b9d1f927909456962ec64f67b65)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/rb/Makefile.am&lt;/li&gt;
	&lt;li&gt;configure.ac&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12623590" name="THRIFT-2184.patch" size="277" author="nhed" created="Fri, 17 Jan 2014 06:29:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>348402</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1o2pz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>348699</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>