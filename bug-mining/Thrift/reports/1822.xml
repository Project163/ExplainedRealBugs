<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:27:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-4356] thrift_protocol call Transport cause Segmentation fault</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-4356</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;When thrift_protocol extension try to read or write some bytes, if there is some exception, will cause Segmentation fault&lt;/p&gt;</description>
                <environment>&lt;p&gt;PHP 7.0.23 (cli) (built: Sep 25 2017 08:07:30) ( NTS )&lt;br/&gt;
macOS 10.13.1 Beta (17B25c)&lt;/p&gt;</environment>
        <key id="13106974">THRIFT-4356</key>
            <summary>thrift_protocol call Transport cause Segmentation fault</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Robert Lu">Robert Lu</assignee>
                                    <reporter username="Robert Lu">Robert Lu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Oct 2017 15:44:33 +0000</created>
                <updated>Thu, 14 Dec 2017 13:55:00 +0000</updated>
                            <resolved>Wed, 25 Oct 2017 13:00:14 +0000</resolved>
                                    <version>0.9.3</version>
                    <version>0.10.0</version>
                                    <fixVersion>0.11.0</fixVersion>
                                    <component>PHP - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16191493" author="robert lu" created="Wed, 4 Oct 2017 16:02:55 +0000"  >&lt;p&gt;How to reproduce:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;git clone https:&lt;span class=&quot;code-comment&quot;&gt;//github.com/RobberPhex/thrift_example.git
&lt;/span&gt;cd thrift_example
git checkout example
composer install
# at terminal 1
nc -l 9090 &amp;lt; /dev/&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
# at terminal 2
php client.php # with thrift_protocol extension
# caused Segmentation fault: 11
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</comment>
                            <comment id="16191511" author="githubbot" created="Wed, 4 Oct 2017 16:19:32 +0000"  >&lt;p&gt;GitHub user RobberPhex opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1385&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1385&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4356&quot; title=&quot;thrift_protocol call Transport cause Segmentation fault&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4356&quot;&gt;&lt;del&gt;THRIFT-4356&lt;/del&gt;&lt;/a&gt; thrift_protocol call Transport cause Segmentation fault&lt;/p&gt;

&lt;p&gt;    ref: &amp;lt;&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4356&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/THRIFT-4356&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/RobberPhex/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/RobberPhex/thrift&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4356&quot; title=&quot;thrift_protocol call Transport cause Segmentation fault&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4356&quot;&gt;&lt;del&gt;THRIFT-4356&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1385.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1385.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1385&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 1f6541a61fb692c2376e04b522f256ad8ca640d2&lt;br/&gt;
Author: Robert Lu &amp;lt;robberphex@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-10-04T16:17:15Z&lt;/p&gt;

&lt;p&gt;    if is_validate is not defined&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16198033" author="robert lu" created="Tue, 10 Oct 2017 02:05:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jfarrell&quot; class=&quot;user-hover&quot; rel=&quot;jfarrell&quot;&gt;jfarrell&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The root cause is extension call user function , but not check EG(exception),&lt;br/&gt;
so I add those check.&lt;/p&gt;

&lt;p&gt;If there is any probolem, please comment there. thanks.&lt;/p&gt;</comment>
                            <comment id="16212658" author="githubbot" created="Fri, 20 Oct 2017 13:54:34 +0000"  >&lt;p&gt;Github user RobberPhex commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1391&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1391&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    this pr fix &lt;span class=&quot;error&quot;&gt;&amp;#91;`THRIFT-4356`&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4356&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/THRIFT-4356&lt;/a&gt;) and &lt;span class=&quot;error&quot;&gt;&amp;#91;`THRIFT-4353`&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4353&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/THRIFT-4353&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;    &amp;#8212;&lt;/p&gt;

&lt;p&gt;    And, this work is besed `&#33891;&#33778; &amp;lt;feidong@anjuke.com&amp;gt;`&apos;s work. so I just squashed commits by author(not all-in-one commit).&lt;/p&gt;</comment>
                            <comment id="16218567" author="jking3" created="Wed, 25 Oct 2017 13:00:14 +0000"  >&lt;p&gt;Committed - thanks.&lt;/p&gt;</comment>
                            <comment id="16218568" author="githubbot" created="Wed, 25 Oct 2017 13:00:24 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1385&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1385&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16219118" author="danielsmithsd" created="Wed, 25 Oct 2017 17:21:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Robert+Lu&quot; class=&quot;user-hover&quot; rel=&quot;Robert Lu&quot;&gt;Robert Lu&lt;/a&gt; What version of PHP was this tested on? It looks like this introduced a different bug for me:&lt;/p&gt;

&lt;p&gt;PHP Warning:  PHP Startup: Unable to load dynamic library &apos;/usr/local/lib/php/extensions/no-debug-non-zts-20160303/thrift_protocol.so&apos; - /usr/local/lib/php/extensions/no-debug-non-zts-20160303/thrift_protocol.so: undefined symbol: &lt;em&gt;ZTVN10&lt;/em&gt;&lt;em&gt;cxxabiv120&lt;/em&gt;_si_class_type_infoE in Unknown on line 0&lt;/p&gt;

&lt;p&gt;PHP 7.1.10 (cli) (built: Oct 10 2017 01:25:12) ( NTS )&lt;/p&gt;

&lt;p&gt;I&apos;m running this in Docker with a base image of php:7.1-apache.  I&apos;ll try running it just on that image without my changes and see if there&apos;s a difference.&lt;/p&gt;

&lt;p&gt;ETA: PHP 7.2.0RC4 seems to work&lt;/p&gt;</comment>
                            <comment id="16219281" author="githubbot" created="Wed, 25 Oct 2017 18:52:53 +0000"  >&lt;p&gt;GitHub user RobberPhex opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1400&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1400&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    add stdc++ back&lt;/p&gt;

&lt;p&gt;    at Linux x86,&lt;/p&gt;

&lt;p&gt;    will cause errror:&lt;br/&gt;
    ````&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;php -d extension=./thrift_protocol.so -m&lt;br/&gt;
    PHP Warning:  PHP Startup: Unable to load dynamic library &apos;./thrift_protocol.so&apos; - ./thrift_protocol.so: undefined symbol: &lt;em&gt;ZTVN10&lt;/em&gt;&lt;em&gt;cxxabiv120&lt;/em&gt;_si_class_type_infoE in Unknown on line 0&lt;br/&gt;
    ````&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    ref &lt;span class=&quot;error&quot;&gt;&amp;#91;commit&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4356?focusedCommentId=16219118&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16219118&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/THRIFT-4356?focusedCommentId=16219118&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16219118&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/RobberPhex/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/RobberPhex/thrift&lt;/a&gt; fix-libcpp-dep&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1400.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1400.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1400&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 194b730d565c822dd516f705e51f49d5632e1052&lt;br/&gt;
Author: Robert Lu &amp;lt;robberphex@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-10-25T18:39:17Z&lt;/p&gt;

&lt;p&gt;    add stdc++ back&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16219284" author="robert lu" created="Wed, 25 Oct 2017 18:55:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=danielsmithsd&quot; class=&quot;user-hover&quot; rel=&quot;danielsmithsd&quot;&gt;danielsmithsd&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks for your feedback,&lt;/p&gt;

&lt;p&gt;I submit a PR: &lt;a href=&quot;https://github.com/apache/thrift/pull/1400&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1400&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jking3&quot; class=&quot;user-hover&quot; rel=&quot;jking3&quot;&gt;jking3&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Sorry for leave a bug, should I open a new issue? Or, just review &lt;a href=&quot;https://github.com/apache/thrift/pull/1400?&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1400?&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16219292" author="danielsmithsd" created="Wed, 25 Oct 2017 18:59:59 +0000"  >&lt;p&gt;Thanks much!  Confirmed this fixes what I was seeing.  Curious that the issue was not present in 7.2.0RC4&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3kvf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>