<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:57:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-663] JavaBean code generator produces incorrect setter methods</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-663</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;The original Thrift JavaBean generator produced set* methods for a property &apos;foo&apos; that looked like:&lt;/p&gt;

&lt;p&gt;public void setFoo(int foo) {&lt;br/&gt;
  this.foo = foo;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;The more recent code in the 0.2.0 release now returns a value:&lt;/p&gt;

&lt;p&gt;public MyStruct setFoo(int foo) {&lt;br/&gt;
  this.foo = foo;&lt;br/&gt;
  return this;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;I can imagine this was possibly desired by someone to implement a &quot;chaining&quot; style of coding, but this is no longer a correct JavaBean.  The JavaBean spec requires that the return type of set* functions be &apos;void&apos;, and various tools and frameworks enforce this requirement.  For example, the Stripes web UI toolkit thinks that a field is read-only if the set* function doesn&apos;t return &apos;void&apos;.&lt;/p&gt;

&lt;p&gt;I&apos;ll attach a trivial patch to restore this to the previous behavior.  If a chaining-style setter is desired by others, I&apos;d recommend making this a separate method on the bean rather than replacing the standard setter.  E.g.:&lt;/p&gt;

&lt;p&gt;public MyStruct setChainFoo(int foo) { ...&lt;/p&gt;

&lt;p&gt;Or something like that.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12443832">THRIFT-663</key>
            <summary>JavaBean code generator produces incorrect setter methods</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bryanduxbury">Bryan Duxbury</assignee>
                                    <reporter username="engberg">Dave Engberg</reporter>
                        <labels>
                    </labels>
                <created>Sat, 19 Dec 2009 03:37:49 +0000</created>
                <updated>Sat, 3 Apr 2010 05:11:13 +0000</updated>
                            <resolved>Sat, 3 Apr 2010 05:11:13 +0000</resolved>
                                    <version>0.2</version>
                                    <fixVersion>0.3</fixVersion>
                                    <component>Java - Compiler</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="12792774" author="coshx" created="Sat, 19 Dec 2009 04:00:24 +0000"  >&lt;p&gt;This is also an issue when trying to serialize using XmlEncoder, since it violates the JavaBean spec.&lt;/p&gt;</comment>
                            <comment id="12792808" author="bryanduxbury" created="Sat, 19 Dec 2009 07:33:56 +0000"  >&lt;p&gt;Maybe it&apos;s because I&apos;m not familiar with the JavaBean spec (or even their uses, apparently), but I introduced this as a syntactic sugar way to make instantiating objects easier. I would generally oppose unilaterally reverting these changes, and certainly would oppose generating a bunch of extra weirdly-named methods. I would however support adding a compiler switch that switches back to the old style if that&apos;s what people prefer.&lt;/p&gt;</comment>
                            <comment id="12792810" author="bryanduxbury" created="Sat, 19 Dec 2009 07:35:36 +0000"  >&lt;p&gt;For things like encoding thrift objects to XML, wouldn&apos;t it make more sense to use an TXmlProtocol or something? I don&apos;t think we should degrade the usability of Thrift objects to support an alternative serialization system.&lt;/p&gt;</comment>
                            <comment id="12792862" author="coshx" created="Sat, 19 Dec 2009 16:50:09 +0000"  >&lt;p&gt;In general, I would agree with adding a new compiler switch so that we don&apos;t break backwards compatibility, but we&apos;re calling something a bean that&apos;s not technically a bean, which is why I would support breaking backwards compatibility in this case.&lt;/p&gt;

&lt;p&gt;In terms of using a TXmlProtocol, this is the preferred solution if you&apos;re only using thrift objects, but in a system where the thrift object is used as just another java bean, I would expect that XmlEncoder should work.&lt;/p&gt;</comment>
                            <comment id="12792863" author="engberg" created="Sat, 19 Dec 2009 16:56:19 +0000"  >
&lt;p&gt;The JavaBeans spec is available via:&lt;br/&gt;
&lt;a href=&quot;http://java.sun.com/javase/technologies/desktop/javabeans/docs/spec.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://java.sun.com/javase/technologies/desktop/javabeans/docs/spec.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt; From 7.1:&lt;br/&gt;
For simple properties the accessor type signatures are:&lt;br/&gt;
void setFoo(PropertyType value); // simple setter&lt;br/&gt;
PropertyType getFoo();    // simple getter&lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;I&apos;d be ok with a compiler switch, but I think the default for the &quot;-gen&quot; &lt;br/&gt;
named &quot;java:beans&quot; mode should actually be a JavaBean (with a void &lt;br/&gt;
return value).  If we want to have a forked generator that&apos;s not &lt;br/&gt;
actually JavaBeans, maybe it could be &quot;-gen java:apache&quot; or something &lt;br/&gt;
like that.  The alternative would be a little odd ... a JavaBeans &lt;br/&gt;
generator mode that doesn&apos;t produce JavaBeans.&lt;/p&gt;

</comment>
                            <comment id="12792866" author="bryanduxbury" created="Sat, 19 Dec 2009 17:20:40 +0000"  >&lt;p&gt;One of the changes that has been made is that we always generate the getters and setters now, regardless of whether you do java:beans or not. Maybe we should just make java:beans cause the methods to return void?&lt;/p&gt;</comment>
                            <comment id="12792870" author="coshx" created="Sat, 19 Dec 2009 17:31:23 +0000"  >&lt;p&gt;I think that would work great for me.&lt;/p&gt;</comment>
                            <comment id="12792877" author="engberg" created="Sat, 19 Dec 2009 18:16:19 +0000"  >
&lt;p&gt;Yes, sounds good.&lt;/p&gt;

</comment>
                            <comment id="12851576" author="firepoet" created="Tue, 30 Mar 2010 20:44:48 +0000"  >&lt;p&gt;Any idea when this bug will be worked on?  I&apos;ve just started hitting a part of my application where this would be very handy (I.E., putting a REST front-end on some of my Thrift services).  As it stands, I&apos;ll be applying the patch to my Thrift, but would love it if this thing got done.&lt;/p&gt;</comment>
                            <comment id="12851579" author="bryanduxbury" created="Tue, 30 Mar 2010 20:50:56 +0000"  >&lt;p&gt;I&apos;ll try to tackle this today.&lt;/p&gt;</comment>
                            <comment id="12851586" author="firepoet" created="Tue, 30 Mar 2010 20:57:58 +0000"  >&lt;p&gt;Thanks!  There&apos;s no huge rush &amp;#8211; it would take us some time to integrate the new version &amp;#8211; we have several apps using Thrift.&lt;/p&gt;</comment>
                            <comment id="12851592" author="bryanduxbury" created="Tue, 30 Mar 2010 21:10:01 +0000"  >&lt;p&gt;OK, how about this? &lt;/p&gt;

&lt;p&gt;The &quot;beans&quot; option will make sure the setter methods return void.&lt;/p&gt;

&lt;p&gt;The &quot;private-members&quot; option leaves the setter methods alone, but makes sure the actual members are private. This is for those of us who want the builder style setters but private instance variables.&lt;/p&gt;

&lt;p&gt;Can you give it a whirl and see if it meets your needs?&lt;/p&gt;</comment>
                            <comment id="12851647" author="firepoet" created="Tue, 30 Mar 2010 22:48:05 +0000"  >&lt;p&gt;I was able to test the &quot;beans&quot; option &amp;#8211; works great!  My YAML serializer loves this stuff.&lt;/p&gt;

&lt;p&gt;Didn&apos;t test the &quot;private-members&quot; &apos;cause I don&apos;t have any code that needs it.&lt;/p&gt;</comment>
                            <comment id="12853076" author="bryanduxbury" created="Sat, 3 Apr 2010 05:11:13 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12428524" name="java-setter.diff" size="813" author="engberg" created="Sat, 19 Dec 2009 03:38:03 +0000"/>
                            <attachment id="12440277" name="thrift-663.patch" size="2235" author="bryanduxbury" created="Tue, 30 Mar 2010 21:10:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>186827</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 34 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16enb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245505</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>