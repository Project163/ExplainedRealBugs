<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:04:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-1398] Compiler warning on generated code (Multiface kills -Wall -Werror on gcc 4.6.1)</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-1398</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;I use an older version of g++ (4.1.2) but some of my fellow team members who are using a more recent version (4.6.1)&lt;br/&gt;
they are reporting that (when used with &apos;-Wall&apos;) g++, justifiably complains about possible lack of return&lt;/p&gt;


&lt;p&gt;    int32_t calculate(const int32_t logid, const Work&amp;amp; w) {&lt;br/&gt;
      size_t sz = ifaces_.size();&lt;br/&gt;
      for (size_t i = 0; i &amp;lt; sz; ++i) {&lt;br/&gt;
        if (i == sz - 1) &lt;/p&gt;
{
          return ifaces_[i]-&amp;gt;calculate(logid, w);
        }
&lt;p&gt; else &lt;/p&gt;
{
          ifaces_[i]-&amp;gt;calculate(logid, w);
        }
&lt;p&gt;      }&lt;br/&gt;
    }&lt;/p&gt;


&lt;p&gt;Though a human reading this code can see that the last loop execution results in a return, the compiler can&apos;t&lt;br/&gt;
     &quot;error: control reaches end of non-void function &lt;span class=&quot;error&quot;&gt;&amp;#91;-Werror=return-type&amp;#93;&lt;/span&gt;&quot;&lt;br/&gt;
IMHO we should have a single return at the end of the function&lt;/p&gt;


&lt;p&gt;I would add a generation-time option to suppress multiface if that seems reasonable&lt;/p&gt;

&lt;p&gt;At this time we find that we need to either disable the warning or up the optimization (or both?)&lt;/p&gt;</description>
                <environment>&lt;p&gt;g++ v4.6.1, with all warnings enabled -Wall, using the purist &quot;treat warnings as errors&quot; -Werror flag.  No optimization flags&lt;/p&gt;</environment>
        <key id="12528133">THRIFT-1398</key>
            <summary>Compiler warning on generated code (Multiface kills -Wall -Werror on gcc 4.6.1)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chris5287">Chris Stylianou</assignee>
                                    <reporter username="nhed">Nevo Hed</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Oct 2011 03:11:13 +0000</created>
                <updated>Thu, 23 Jan 2014 03:40:55 +0000</updated>
                            <resolved>Fri, 13 Apr 2012 09:19:28 +0000</resolved>
                                    <version>0.6</version>
                    <version>0.7</version>
                    <version>0.8</version>
                    <version>0.9</version>
                                                    <component>C++ - Compiler</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13132609" author="jfarrell" created="Fri, 21 Oct 2011 11:55:02 +0000"  >&lt;p&gt;Nevo, right now the CI server is set to run with -Wall -Wno-sign-compare -Wno-unused. -Werror was enabled but we have some issues we are trying to cleanup to be able to reenable that flag. If you would like to contribute a patch for this issue please see &lt;a href=&quot;http://wiki.apache.org/thrift/HowToContribute&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wiki.apache.org/thrift/HowToContribute&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13222282" author="chris5287" created="Mon, 5 Mar 2012 11:42:48 +0000"  >&lt;p&gt;Attached a patch which should resolve the issue.&lt;/p&gt;

&lt;p&gt;Thanks to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tomw&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Thomas Wiggins&lt;/a&gt; for the peer-review!&lt;/p&gt;</comment>
                            <comment id="13249587" author="roger.meier" created="Sun, 8 Apr 2012 18:18:47 +0000"  >&lt;p&gt;committed!&lt;/p&gt;</comment>
                            <comment id="13249596" author="hudson" created="Sun, 8 Apr 2012 19:34:53 +0000"  >&lt;p&gt;Integrated in Thrift #431 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/431/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/431/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1398&quot; title=&quot;Compiler warning on generated code (Multiface kills -Wall -Werror on gcc 4.6.1)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1398&quot;&gt;&lt;del&gt;THRIFT-1398&lt;/del&gt;&lt;/a&gt; Compiler warning on generated code (Multiface kills -Wall -Werror on gcc 4.6.1)&lt;br/&gt;
Patch: Nevo Hed (Revision 1311066)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
roger : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1311066&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1311066&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/thrift/trunk/compiler/cpp/src/generate/t_cpp_generator.cc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13252827" author="chris5287" created="Thu, 12 Apr 2012 21:03:18 +0000"  >&lt;p&gt;Woo! Should this be marked as fixed for 0.9?&lt;/p&gt;</comment>
                            <comment id="13253238" author="roger.meier" created="Fri, 13 Apr 2012 09:19:10 +0000"  >&lt;p&gt;fixed assignee, thanks Chris!&lt;/p&gt;</comment>
                            <comment id="13879424" author="nhed" created="Thu, 23 Jan 2014 03:40:55 +0000"  >&lt;p&gt;I noticed that my name is associated with the patch, the fix/patch is by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chris5287&quot; class=&quot;user-hover&quot; rel=&quot;chris5287&quot;&gt;chris5287&lt;/a&gt;, the only thing I did on this one is report the bug (just setting the record straight, I know git commit message wont be updated]&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12517071" name="THRIFT-1398.patch" size="1651" author="chris5287" created="Mon, 5 Mar 2012 11:42:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97432</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 43 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i083jb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>45172</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>