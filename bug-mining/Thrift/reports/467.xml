<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:00:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-1232] JavaScript TException should be a constructor function</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-1232</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;The JavaScript TException is declared as an object with a prototype property assigned to it.&lt;br/&gt;
It should be declared as a constructor function with a prototype. Otherwise exceptions derived from TException using Thrift.inherits are not instances of TException.&lt;/p&gt;

&lt;p&gt;Example:&lt;br/&gt;
function DerivedException() {};&lt;br/&gt;
Thrift.inherits(DerivedException, Thrift.TException);&lt;br/&gt;
var ex = new DerivedException();&lt;br/&gt;
ex instanceof Thrift.TException // =&amp;gt; Error as TException is not a function&lt;/p&gt;</description>
                <environment></environment>
        <key id="12512941">THRIFT-1232</key>
            <summary>JavaScript TException should be a constructor function</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pascal.bach">Pascal Bach</assignee>
                                    <reporter username="pascal.bach">Pascal Bach</reporter>
                        <labels>
                            <label>exception-handling</label>
                            <label>js</label>
                    </labels>
                <created>Wed, 6 Jul 2011 07:31:52 +0000</created>
                <updated>Tue, 1 Nov 2011 02:54:13 +0000</updated>
                            <resolved>Fri, 8 Jul 2011 12:47:34 +0000</resolved>
                                                                    <component>JavaScript - Library</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13060457" author="henrique" created="Wed, 6 Jul 2011 10:21:03 +0000"  >&lt;p&gt;+1&lt;br/&gt;
the current TException &quot;class&quot; is indeed quite odd...&lt;br/&gt;
could you submit a patch?&lt;/p&gt;

&lt;p&gt;thanks&lt;/p&gt;</comment>
                            <comment id="13060658" author="henrique" created="Wed, 6 Jul 2011 16:03:15 +0000"  >&lt;p&gt;actually... following &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-724&quot; title=&quot;User defined exceptions shouldn&amp;#39;t derive from TException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-724&quot;&gt;&lt;del&gt;THRIFT-724&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Error&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Error&lt;/a&gt; , I think it shouldn&apos;t inherit TException at all...&lt;/p&gt;

&lt;p&gt;Perhaps extend it from Error like MDN suggests?&lt;/p&gt;

&lt;p&gt;DerivedException = function(args) {&lt;br/&gt;
  this.prototype = Error.prototype;&lt;br/&gt;
  this.name = &apos;DerivedException&apos;;&lt;br/&gt;
...&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;then you could even get rid of Thrift.inherits() and Thrift.TException on Thrift.js all together.&lt;/p&gt;
</comment>
                            <comment id="13061077" author="pascal.bach" created="Thu, 7 Jul 2011 06:58:13 +0000"  >&lt;p&gt;I agree it is probably best to make user defined exceptions inherit directly from JavaScripts Error.&lt;/p&gt;

&lt;p&gt;But I belive the Mozilla example you show is wrong.&lt;/p&gt;

&lt;p&gt;DerivedException = function(args) &lt;/p&gt;
{ this.name = &apos;DerivedException&apos;; ... }
&lt;p&gt;DerivedException.prototype = Error.prototype; &lt;/p&gt;

</comment>
                            <comment id="13061257" author="pascal.bach" created="Thu, 7 Jul 2011 12:39:51 +0000"  >&lt;p&gt;TException is now derived from JavaScripts Error.&lt;/p&gt;

&lt;p&gt;Further the generated js exception code sets the name attribute to the name of the Struct. This allows javascript to display the by its real name instead of just Error.&lt;/p&gt;

&lt;p&gt;DerivedException instanceof Error // =&amp;gt; true&lt;br/&gt;
DerivedException instanceof TException // =&amp;gt; true&lt;/p&gt;

&lt;p&gt;Are now working&lt;/p&gt;</comment>
                            <comment id="13061315" author="pascal.bach" created="Thu, 7 Jul 2011 13:53:25 +0000"  >&lt;p&gt;I improved the prototype hirarchy in Thrift.js so it is now closer to the C++ code. TApplicationException is now derived from TException. This should give a more consisten feeling&lt;/p&gt;</comment>
                            <comment id="13061935" author="roger.meier" created="Fri, 8 Jul 2011 12:47:34 +0000"  >&lt;p&gt;committed, thanks!&lt;/p&gt;</comment>
                            <comment id="13061938" author="hudson" created="Fri, 8 Jul 2011 12:59:59 +0000"  >&lt;p&gt;Integrated in Thrift #186 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/186/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/186/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1232&quot; title=&quot;JavaScript TException should be a constructor function&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1232&quot;&gt;&lt;del&gt;THRIFT-1232&lt;/del&gt;&lt;/a&gt; JavaScript TException should be a constructor function&lt;br/&gt;
Patch: Pascal Bach&lt;br/&gt;
file: 1232-Improve-Exception-handling-and-make-error-hierarchy.patch&lt;/p&gt;

&lt;p&gt;roger : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1144292&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1144292&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/thrift/trunk/compiler/cpp/src/generate/t_js_generator.cc&lt;/li&gt;
	&lt;li&gt;/thrift/trunk/lib/js/thrift.js&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12485580" name="0001-Improve-Exception-handling.patch" size="1769" author="pascal.bach" created="Thu, 7 Jul 2011 12:39:51 +0000"/>
                            <attachment id="12485591" name="1232-Improve-Exception-handling-and-make-error-hierarchy.patch" size="5144" author="pascal.bach" created="Thu, 7 Jul 2011 13:53:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>68740</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 20 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i169xb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244740</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>