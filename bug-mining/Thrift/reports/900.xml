<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:11:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-2370] Compiler SEGFAULTs generating HTML documentation for complex strucre</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-2370</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;This was introduced recently&lt;/p&gt;

&lt;p&gt;// To reproduce&lt;br/&gt;
//  Save this file as &quot;x.thrift&quot;, then compile with &lt;br/&gt;
//     &quot;thrift --gen html x.thrift&quot;&lt;br/&gt;
// &lt;br/&gt;
// Here is my reproduction with master and 0.9.1&lt;br/&gt;
//  $ /home/nhed/Projects/thrift/compiler/cpp/thrift --version&lt;br/&gt;
//  Thrift version 1.0.0-dev&lt;br/&gt;
//&lt;br/&gt;
//  $ /home/nhed/Projects/thrift/compiler/cpp/thrift --gen html x.thrift&lt;br/&gt;
//  Segmentation fault (core dumped)&lt;br/&gt;
//&lt;br/&gt;
//  $ thrift --version&lt;br/&gt;
//  Thrift version 0.9.1&lt;br/&gt;
//&lt;br/&gt;
//  $ thrift --gen html x.thrift&lt;br/&gt;
//  &amp;lt;no issue&amp;gt;&lt;/p&gt;

&lt;p&gt;struct myMapping &lt;/p&gt;
{ 1: required map&amp;lt;i32, list&amp;lt;i32&amp;gt; &amp;gt; theMap }
&lt;p&gt;struct myStruct  { 1: required myMapping defMap = {&apos;theMap&apos; :&lt;/p&gt;
{ 44 : [ 5 ] }
&lt;p&gt; } }&lt;/p&gt;


&lt;p&gt;Notice that the value of &quot;type&quot; is not a valid pointer in the top stack frame&lt;/p&gt;

&lt;p&gt;#0  t_html_generator::print_const_value (this=0x875810, type=0x20, tvalue=&amp;lt;value optimized out&amp;gt;) at src/generate/t_html_generator.cc:636&lt;br/&gt;
#1  0x0000000000540d7d in t_html_generator::print_const_value (this=0x875810, type=0x875030, tvalue=&amp;lt;value optimized out&amp;gt;) at src/generate/t_html_generator.cc:621&lt;br/&gt;
#2  0x0000000000540d7d in t_html_generator::print_const_value (this=0x875810, type=0x860170, tvalue=&amp;lt;value optimized out&amp;gt;) at src/generate/t_html_generator.cc:621&lt;br/&gt;
#3  0x00000000005411aa in t_html_generator::generate_struct (this=0x875810, tstruct=0x875120) at src/generate/t_html_generator.cc:808&lt;br/&gt;
#4  0x0000000000544a01 in t_html_generator::generate_program (this=0x875810) at src/generate/t_html_generator.cc:302&lt;br/&gt;
#5  0x00000000004057b9 in generate (program=0x85f770, generator_strings=std::vector of length 1, capacity 1 = &lt;/p&gt;
{...}
&lt;p&gt;) at src/main.cc:1013&lt;br/&gt;
#6  0x0000000000408610 in main (argc=4, argv=0x7fffffffe728) at src/main.cc:1197&lt;/p&gt;</description>
                <environment></environment>
        <key id="12696680">THRIFT-2370</key>
            <summary>Compiler SEGFAULTs generating HTML documentation for complex strucre</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jensg">Jens Geyer</assignee>
                                    <reporter username="nhed">Nevo Hed</reporter>
                        <labels>
                            <label>constant</label>
                    </labels>
                <created>Sat, 22 Feb 2014 00:18:05 +0000</created>
                <updated>Mon, 24 Feb 2014 22:04:59 +0000</updated>
                            <resolved>Sun, 23 Feb 2014 18:37:38 +0000</resolved>
                                                    <fixVersion>0.9.2</fixVersion>
                                    <component>HTML - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13909043" author="nhed" created="Sat, 22 Feb 2014 00:30:25 +0000"  >&lt;p&gt;This was introduced by&lt;br/&gt;
&lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=thrift.git;a=commitdiff;h=27148dee980b396afee80bc7e5ce704443de4408&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=thrift.git;a=commitdiff;h=27148dee980b396afee80bc7e5ce704443de4408&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;If I &lt;br/&gt;
$ git checkout 27148dee980b396afee80bc7e5ce704443de4408^&lt;br/&gt;
 build &amp;amp; run  =&amp;gt; no crash&lt;/p&gt;

&lt;p&gt;$ git checkout 27148dee980b396afee80bc7e5ce704443de4408&lt;br/&gt;
 build &amp;amp; run  =&amp;gt; crash&lt;/p&gt;
</comment>
                            <comment id="13909495" author="jensg" created="Sat, 22 Feb 2014 19:39:19 +0000"  >&lt;p&gt;Thanks for catching this. &lt;/p&gt;

&lt;p&gt;In fact, after digging into that issue, the entire method was already a very fragile construction before I event touched it, because the code &lt;em&gt;primarily&lt;/em&gt; relied on the type of the constant value, not the declared data type of the underlying constant/variable/member. With &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12630493/12630493_THRIFT-2370_Compiler_SEGFAULTs_generating_HTML_documentation_for_complex_types.patch&quot; title=&quot;THRIFT-2370_Compiler_SEGFAULTs_generating_HTML_documentation_for_complex_types.patch attached to THRIFT-2370&quot;&gt;this patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; I virtually rewrote the entire method to fix the code and to add some minor enhancements (such as support for referenced constants) along the way. I used Nevo&apos;s test case from above and a &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12630494/12630494_Testcase-enhanced-ConstantsDemo.thrift&quot; title=&quot;Testcase-enhanced-ConstantsDemo.thrift attached to THRIFT-2370&quot;&gt;modified version of ConstantsDemo.thrift&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;Would be great if you and/or someone else could have a look at it. &lt;/p&gt;

</comment>
                            <comment id="13909593" author="roger.meier" created="Sun, 23 Feb 2014 00:01:02 +0000"  >&lt;p&gt;Thanks Jens!&lt;br/&gt;
+1&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2374&quot; title=&quot;No code generated for defaults when complex constants are referenced&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2374&quot;&gt;THRIFT-2374&lt;/a&gt; becomes important...&lt;/p&gt;</comment>
                            <comment id="13909627" author="nhed" created="Sun, 23 Feb 2014 01:44:15 +0000"  >&lt;p&gt;Jens&lt;br/&gt;
Thanks for fixing this&lt;br/&gt;
I tested the patch on my complete set (much more complex than the test case I provided) and it works&lt;br/&gt;
No Crash&lt;/p&gt;
</comment>
                            <comment id="13909836" author="jensg" created="Sun, 23 Feb 2014 18:37:38 +0000"  >&lt;p&gt;Committed, thanks!&lt;/p&gt;</comment>
                            <comment id="13909875" author="hudson" created="Sun, 23 Feb 2014 20:19:12 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1059 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1059/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1059/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2370&quot; title=&quot;Compiler SEGFAULTs generating HTML documentation for complex strucre&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2370&quot;&gt;&lt;del&gt;THRIFT-2370&lt;/del&gt;&lt;/a&gt; Compiler SEGFAULTs generating HTML documentation for complex structure (jensg: rev 305e42ae3e2f9e294446487ae62a9422815f9ce5)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;compiler/cpp/src/generate/t_html_generator.cc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12630493" name="THRIFT-2370_Compiler_SEGFAULTs_generating_HTML_documentation_for_complex_types.patch" size="6908" author="jensg" created="Sat, 22 Feb 2014 19:26:08 +0000"/>
                            <attachment id="12630494" name="Testcase-enhanced-ConstantsDemo.thrift" size="2048" author="jensg" created="Sat, 22 Feb 2014 19:34:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>375156</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 39 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1sncn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>375453</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>