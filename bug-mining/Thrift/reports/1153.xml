<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:16:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-2923] JavaScript client assumes a message being written</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-2923</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;I am working on a solution which uses Thrift directly, without embedded RPC framework, it&apos;s sending messages via UDP. Currently being integrated into Chrome Extension and I found a bug when doing the following:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;var transport = new Thrift.TWebSocketTransport(&quot;http://dummy&quot;);
var protocol  = new Thrift.Protocol( transport );
digest.write( protocol );
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The error is:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Cannot read property &apos;push&apos; of undefined.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The reason for this behaviour is:&lt;/p&gt;

&lt;p&gt;digest.write calls protocol.writeStructBegin which uses this.tpos.push(this.tstack.length) in &lt;a href=&quot;https://github.com/apache/thrift/blob/master/lib/js/src/thrift.js#L778&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/blob/master/lib/js/src/thrift.js#L778&lt;/a&gt; but tpos and tstack aren&apos;t defined unless writeMessageBegin is called in &lt;a href=&quot;https://github.com/apache/thrift/blob/master/lib/js/src/thrift.js#L751&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/blob/master/lib/js/src/thrift.js#L751&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Expected behaviour:&lt;/p&gt;

&lt;p&gt;tstack and tpos should be defined in the Protocol &quot;constructor&quot;, here: &lt;a href=&quot;https://github.com/apache/thrift/blob/master/lib/js/src/thrift.js#L687&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/blob/master/lib/js/src/thrift.js#L687&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12764459">THRIFT-2923</key>
            <summary>JavaScript client assumes a message being written</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="radekg">Radoslaw Gruchalski</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Jan 2015 19:25:27 +0000</created>
                <updated>Mon, 26 Jan 2015 02:26:40 +0000</updated>
                            <resolved>Sun, 4 Jan 2015 12:57:37 +0000</resolved>
                                    <version>0.9.2</version>
                                    <fixVersion>0.9.3</fixVersion>
                                    <component>JavaScript - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14262647" author="radekg" created="Thu, 1 Jan 2015 19:42:28 +0000"  >&lt;p&gt;Pull request created: &lt;a href=&quot;https://github.com/apache/thrift/pull/342&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/342&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14263855" author="roger.meier" created="Sun, 4 Jan 2015 12:57:37 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                            <comment id="14263864" author="hudson" created="Sun, 4 Jan 2015 13:16:16 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1424 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1424/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1424/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2923&quot; title=&quot;JavaScript client assumes a message being written&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2923&quot;&gt;&lt;del&gt;THRIFT-2923&lt;/del&gt;&lt;/a&gt; Initialise tpos and tstack in the Protocol constructor so writing to a protocol without a message does not fail. (roger: rev 1d30558c8c09d08a60f6ddc602b6994cfc9f74b3)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/js/src/thrift.js&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14266993" author="githubbot" created="Tue, 6 Jan 2015 23:48:24 +0000"  >&lt;p&gt;Github user bufferoverflow commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/342#issuecomment-68956070&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/342#issuecomment-68956070&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    committed here 1d30558c8c09d08a60f6ddc602b6994cfc9f74b3&lt;br/&gt;
    please close this PR&lt;/p&gt;</comment>
                            <comment id="14267839" author="githubbot" created="Wed, 7 Jan 2015 16:36:22 +0000"  >&lt;p&gt;Github user radekg closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/342&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/342&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23w5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>