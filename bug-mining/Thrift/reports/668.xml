<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:06:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-1767] unions can&apos;t have required fields (Delphi)</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-1767</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;Required fields within unions should be treaten as optional, the union construct would not make much sense otherwise. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12618091">THRIFT-1767</key>
            <summary>unions can&apos;t have required fields (Delphi)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jensg">Jens Geyer</assignee>
                                    <reporter username="jensg">Jens Geyer</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Nov 2012 00:23:27 +0000</created>
                <updated>Sat, 8 Jun 2013 03:15:38 +0000</updated>
                            <resolved>Sat, 8 Jun 2013 03:15:38 +0000</resolved>
                                    <version>0.8</version>
                    <version>0.9</version>
                                    <fixVersion>0.9.1</fixVersion>
                                    <component>Delphi - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13506276" author="henrique" created="Thu, 29 Nov 2012 07:14:12 +0000"  >&lt;p&gt;+1, thanks Jens!&lt;br/&gt;
... but shouldn&apos;t we throw a warning, at least, when compiling the idl?&lt;/p&gt;</comment>
                            <comment id="13506893" author="jensg" created="Thu, 29 Nov 2012 22:34:15 +0000"  >&lt;p&gt;Yes, indeed =&amp;gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1768&quot; title=&quot;unions can&amp;#39;t have required fields (Compiler)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1768&quot;&gt;&lt;del&gt;THRIFT-1768&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13509799" author="kenjiro" created="Tue, 4 Dec 2012 15:28:28 +0000"  >&lt;p&gt;I think it is nicer if union&apos;s property setter clear all other values.&lt;br/&gt;
Here is experimental patch for it(including Jens&apos;s change).&lt;/p&gt;</comment>
                            <comment id="13509816" author="kenjiro" created="Tue, 4 Dec 2012 15:58:32 +0000"  >&lt;p&gt;I think default value for union&apos;s field is not valid and should be compile error or warning.&lt;/p&gt;</comment>
                            <comment id="13509975" author="jensg" created="Tue, 4 Dec 2012 20:04:31 +0000"  >&lt;p&gt;I&apos;m not so sure ...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Union {
  1 : i32 one,
  2 : i32 two = 3
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;would be ok. Only&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Union {
  1 : i32 one = 4,
  2 : i32 two = 3
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;would produce something unexpected. Depending on the impl either more than one field would be set, or only the last value. But yes, I agree that a warning should be emitted.&lt;/p&gt;

&lt;p&gt;Sidenote: The Java impl indeed seems not to use the Defaults.&lt;/p&gt;


</comment>
                            <comment id="13510071" author="jensg" created="Tue, 4 Dec 2012 22:23:08 +0000"  >&lt;p&gt;Revised patch:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Important: This patch relies on &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1768&quot; title=&quot;unions can&amp;#39;t have required fields (Compiler)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1768&quot;&gt;&lt;del&gt;THRIFT-1768&lt;/del&gt;&lt;/a&gt; patch (rev1) being implemented!&lt;/li&gt;
	&lt;li&gt;removed most of the additional tests for is_union() introduced in the original patch, as they were no longer necessary if T_OPTIONAL is enforced for union fields.&lt;/li&gt;
	&lt;li&gt;slightly enhanced ClearUnionValues() method.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13534379" author="jensg" created="Mon, 17 Dec 2012 22:26:06 +0000"  >&lt;p&gt;Committed. Thanks to Kenjiro + Henrique!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12618239">THRIFT-1768</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12555943" name="THRIFT-1767_union_clear_value_experimental.patch" size="10462" author="kenjiro" created="Tue, 4 Dec 2012 15:29:54 +0000"/>
                            <attachment id="12556002" name="THRIFT-1767_unions_cant_have_required_fields_Delphi - rev2.patch" size="5882" author="jensg" created="Tue, 4 Dec 2012 22:23:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292697</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sbdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>163318</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>