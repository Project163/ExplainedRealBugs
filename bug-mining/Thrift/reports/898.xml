<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:11:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-1579] PHP Extention - function thrift_protocol_read_binary not working from TBinarySerializer::deserialize</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-1579</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;I copy class TBinarySerializer and change code:&lt;/p&gt;

&lt;p&gt;    $transport = new TMemoryBuffer();&lt;br/&gt;
    $protocol = new TBinaryProtocolAccelerated($transport);&lt;br/&gt;
    $transport-&amp;gt;write($string_object);&lt;br/&gt;
    $object = new $class_name();&lt;br/&gt;
    $object-&amp;gt;read($protocol);&lt;br/&gt;
    return $object;&lt;/p&gt;

&lt;p&gt;This code is work. Function thrift_protocol_read_binary can&apos;t deserealize.&lt;/p&gt;

&lt;p&gt;2012/04/16 17:38:52 &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; 1252#0: &amp;#42;126088457 FastCGI sent in stderr: &quot;PHP Fatal error:  Uncaught exception &apos;TTransportException&apos; with message &apos;TMemoryBuffer: Could not read 512 bytes from buffer.&apos; in /usr/lib/php/transport/TMemoryBuffer.php:58&lt;br/&gt;
Stack trace:&lt;br/&gt;
#0 /usr/lib/php/transport/TBufferedTransport.php(126): TMemoryBuffer-&amp;gt;read(512)&lt;br/&gt;
#1 &lt;span class=&quot;error&quot;&gt;&amp;#91;internal function&amp;#93;&lt;/span&gt;: TBufferedTransport-&amp;gt;read(8192)&lt;br/&gt;
#2 /usr/lib/php/protocol/TBinarySerializer.php(62): thrift_protocol_read_binary(Object(TBinaryProtocolAccelerated), &apos;&amp;#42;&amp;#42;&amp;#42;&amp;#42;&amp;#42;&apos;, false)&lt;br/&gt;
#3 /*****/www/index.php(77): TBinarySerializer::deserialize(&apos;???????????????...&apos;, &apos;&amp;#42;&amp;#42;&amp;#42;&amp;#42;&amp;#42;&apos;)&lt;br/&gt;
#4 &lt;/p&gt;
{main}
&lt;p&gt;  thrown in /usr/lib/php/transport/TMemoryBuffer.php on line 58&quot; while reading response header from upstream, client: &amp;#42;&amp;#42;&amp;#42;&amp;#42;&amp;#42;, server: localhost, request: &quot;GET /?&amp;#42;&amp;#42;&amp;#42;&amp;#42;&amp;#42; HTTP/1.1&quot;, upstream: &quot;fastcgi://&amp;#42;&amp;#42;&amp;#42;&amp;#42;&amp;#42;&quot;, host: &quot;&amp;#42;&amp;#42;&amp;#42;&amp;#42;&amp;#42;&quot;&lt;/p&gt;

&lt;p&gt;&amp;#42;&amp;#42;&amp;#42;&amp;#42;&amp;#42; - private information, but here can&apos;t any mistake =)&lt;/p&gt;


&lt;p&gt;Object serelize from java.&lt;/p&gt;

&lt;p&gt;new TSerializer().serialize(request);&lt;/p&gt;</description>
                <environment>&lt;p&gt;&quot;Ubuntu Server Cloud Guest 11.10 (Oneiric Ocelot)&quot; - this for AWS&lt;br/&gt;
Nginx + PHP5-FPM&lt;/p&gt;</environment>
        <key id="12551455">THRIFT-1579</key>
            <summary>PHP Extention - function thrift_protocol_read_binary not working from TBinarySerializer::deserialize</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mastercode">Sergei Labutin</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Apr 2012 11:45:25 +0000</created>
                <updated>Sun, 6 Jul 2014 04:01:02 +0000</updated>
                            <resolved>Sat, 22 Feb 2014 16:36:16 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>0.9.2</fixVersion>
                                    <component>PHP - Library</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13896704" author="t.heintz" created="Mon, 10 Feb 2014 15:48:51 +0000"  >&lt;p&gt;We were experiencing the same bug using the vanilla &lt;tt&gt;TBinarySerializer::deserialize()&lt;/tt&gt; function. This issue only occurs under two circumstances:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The C extension is enabled.&lt;/li&gt;
	&lt;li&gt;The size of the serialized string is less than 512 bytes.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;When the first condition applies, the TBinarySerializer tries to be smart and drops the message header from the serialized string after serialization (to save some space I assume). Upon deserialization it writes a dummy header back to the transport, but when the second condition also applies this header never goes anywhere due to some evil internal object graph rewiring done by &lt;tt&gt;TBinaryProtocolAccelerated::__construct()&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I have attached a patch which fixes this behavior.&lt;/p&gt;</comment>
                            <comment id="13907633" author="jensg" created="Thu, 20 Feb 2014 22:32:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mastercode&quot; class=&quot;user-hover&quot; rel=&quot;mastercode&quot;&gt;mastercode&lt;/a&gt;, do you have any opinion on the patch?&lt;/p&gt;</comment>
                            <comment id="13909429" author="jensg" created="Sat, 22 Feb 2014 16:36:16 +0000"  >&lt;p&gt;Committed. Thanks for the patch, Tobias!&lt;/p&gt;</comment>
                            <comment id="13909447" author="hudson" created="Sat, 22 Feb 2014 17:30:05 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1055 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1055/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1055/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1579&quot; title=&quot;PHP Extention - function thrift_protocol_read_binary not working from TBinarySerializer::deserialize&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1579&quot;&gt;&lt;del&gt;THRIFT-1579&lt;/del&gt;&lt;/a&gt; PHP Extension - function thrift_protocol_read_binary not working from TBinarySerializer::deserialize (jensg: rev 199833807f8dabd0d6d1707a594b7d6cac82641e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/php/test/Test/Thrift/Protocol/TestBinarySerializer.php&lt;/li&gt;
	&lt;li&gt;lib/php/lib/Thrift/Protocol/TBinaryProtocolAccelerated.php&lt;/li&gt;
	&lt;li&gt;lib/php/test/Makefile.am&lt;/li&gt;
	&lt;li&gt;lib/php/lib/Thrift/Serializer/TBinarySerializer.php&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12627997" name="thrift-091-fix-php-binary-serialization.patch" size="5859" author="t.heintz" created="Mon, 10 Feb 2014 15:49:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236263</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 39 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14ie7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>234443</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>