<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:27:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3974] Using clang-3.8 and ThreadSanitizer on the concurrency_test claims bad PThread behavior</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3974</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;After using ThreadSanitizer to prove &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2755&quot; title=&quot;ThreadSanitizer reports data race in ThreadManager::Impl::addWorker&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2755&quot;&gt;&lt;del&gt;THRIFT-2755&lt;/del&gt;&lt;/a&gt; is no longer present after &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3932&quot; title=&quot;C++ ThreadManager has a rare termination race&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3932&quot;&gt;&lt;del&gt;THRIFT-3932&lt;/del&gt;&lt;/a&gt; was completed, it looks like there are some issues in the PThreadThread class, specifically that the destructor calls a virtual method.  ThreadSanitizer picks calls this out (many, many times).  &lt;/p&gt;

&lt;p&gt;The usage may be correct, but since we&apos;re not using C++11 we cannot seal the class (mark it with the final keyword) which would tell ThreadSanitizer nothing can inherit from the class, making that behavior safe.&lt;/p&gt;

&lt;p&gt;Another way to deal with this is to move the join implementation to a non-virtual method and have both the dtor and join() call it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13020540">THRIFT-3974</key>
            <summary>Using clang-3.8 and ThreadSanitizer on the concurrency_test claims bad PThread behavior</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jking3">James E. King III</assignee>
                                    <reporter username="jking3">James E. King III</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Nov 2016 16:17:33 +0000</created>
                <updated>Thu, 14 Dec 2017 13:55:44 +0000</updated>
                            <resolved>Sat, 12 Aug 2017 23:17:36 +0000</resolved>
                                    <version>0.9.3</version>
                    <version>0.10.0</version>
                                    <fixVersion>0.11.0</fixVersion>
                                    <component>C++ - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15895509" author="jking3" created="Sat, 4 Mar 2017 04:34:35 +0000"  >&lt;p&gt;Issue might be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4106&quot; title=&quot;concurrency_test fails randomly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4106&quot;&gt;&lt;del&gt;THRIFT-4106&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16124700" author="githubbot" created="Sat, 12 Aug 2017 20:33:38 +0000"  >&lt;p&gt;GitHub user jeking3 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1331&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1331&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3974&quot; title=&quot;Using clang-3.8 and ThreadSanitizer on the concurrency_test claims bad PThread behavior&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3974&quot;&gt;&lt;del&gt;THRIFT-3974&lt;/del&gt;&lt;/a&gt;: fix ThreadSanitizer identified issues&lt;/p&gt;

&lt;p&gt;    Tested with pthread, boost and std threads and -fsanitizer=thread with clang-4.0.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jeking3/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jeking3/thrift&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3974&quot; title=&quot;Using clang-3.8 and ThreadSanitizer on the concurrency_test claims bad PThread behavior&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3974&quot;&gt;&lt;del&gt;THRIFT-3974&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1331.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1331.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1331&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 8a7d13e6a7acde8883be88ecca6506fb0ee695d7&lt;br/&gt;
Author: James E. King, III &amp;lt;jking@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-08-12T20:04:55Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3974&quot; title=&quot;Using clang-3.8 and ThreadSanitizer on the concurrency_test claims bad PThread behavior&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3974&quot;&gt;&lt;del&gt;THRIFT-3974&lt;/del&gt;&lt;/a&gt;: fix ThreadSanitizer identified issues&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16124741" author="githubbot" created="Sat, 12 Aug 2017 23:17:51 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1331&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1331&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16124742" author="jking3" created="Sat, 12 Aug 2017 23:18:07 +0000"  >&lt;p&gt;Thread Sanitizer runs clean on the concurrency test (and other tests, save a couple that looked like false positives) after the PR.  Resolving.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12745262">THRIFT-2755</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 14 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36aov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>