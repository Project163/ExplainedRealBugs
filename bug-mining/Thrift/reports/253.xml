<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:57:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-650] Make Check fails on Centos/OSX with 0.2.0 tarball</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-650</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;% tar xvfz thrift-0.2.0-incubating.tar.gz &amp;amp;&amp;amp; cd thrift-0.2.0&lt;br/&gt;
% ./configure &amp;amp;&amp;amp; make &amp;amp;&amp;amp; make check&lt;/p&gt;

&lt;p&gt;fails with&lt;/p&gt;

&lt;p&gt;UnitTestMain.cpp:21:45: error: boost/test/included/unit_test.hpp: No such file or directory&lt;/p&gt;

&lt;p&gt;File above exists but not in given directory&lt;/p&gt;

&lt;p&gt;% locate unit_test.hpp                   &lt;br/&gt;
/usr/include/boost/test/auto_unit_test.hpp&lt;br/&gt;
/usr/include/boost/test/unit_test.hpp&lt;/p&gt;

&lt;p&gt;% rpm -qa | grep boost&lt;br/&gt;
boost-1.33.1-10.el5&lt;br/&gt;
boost-devel-1.33.1-10.el5&lt;/p&gt;

&lt;p&gt;(same version of boost library on OSX, but installed via fink).&lt;/p&gt;

&lt;p&gt;Changing the UnitTestMain.cpp to include boost/test/unit_test.cpp causes that file to compile but then&lt;br/&gt;
make check gives the following errors&lt;/p&gt;

&lt;p&gt;TMemoryBufferTest.cpp:28: error: expected constructor, destructor, or type conversion before &apos;(&apos; token&lt;br/&gt;
TMemoryBufferTest.cpp:56: error: expected constructor, destructor, or type conversion before &apos;(&apos; token&lt;br/&gt;
TMemoryBufferTest.cpp:82: error: expected constructor, destructor, or type conversion before &apos;(&apos; token&lt;/p&gt;

&lt;p&gt;Changing the header in TMemoryBufferTest.cpp from &lt;/p&gt;

&lt;p&gt;#include &amp;lt;boost/test/unit_test.hpp&amp;gt;&lt;/p&gt;

&lt;p&gt;to&lt;/p&gt;

&lt;p&gt;#include &amp;lt;boost/test/auto_unit_test.hpp&amp;gt;&lt;/p&gt;

&lt;p&gt;resulted in additional errors&lt;/p&gt;

&lt;p&gt;TMemoryBufferTest.cpp:30: error: expected &apos;,&apos; or &apos;;&apos; before &apos;struct&apos;&lt;br/&gt;
TMemoryBufferTest.cpp:30: error: &apos;test_roundtrip_id&apos; was not declared in this scope&lt;br/&gt;
TMemoryBufferTest.cpp:30: error: template argument 1 is invalid&lt;br/&gt;
TMemoryBufferTest.cpp:107: error: expected &apos;,&apos; or &apos;;&apos; at end of input&lt;/p&gt;

&lt;p&gt;And that&apos;s about as far as I can get not being a C++ type.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Centos 5.3 - Linux centos5_0 2.6.18-128.1.10.el5 #1 SMP Thu May 7 10:35:59 EDT 2009 x86_64 x86_64 x86_64 GNU/Linux&lt;br/&gt;
Mac OSX 10.6.2 - Darwin nympro.local 10.2.0 Darwin Kernel Version 10.2.0: Tue Nov  3 10:37:10 PST 2009; root:xnu-1486.2.11~1/RELEASE_I386 i386 i386 MacBookPro4,1 Darwin&lt;/p&gt;</environment>
        <key id="12443337">THRIFT-650</key>
            <summary>Make Check fails on Centos/OSX with 0.2.0 tarball</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="djnym">Anthony Molinaro</assignee>
                                    <reporter username="djnym">Anthony Molinaro</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Dec 2009 07:42:33 +0000</created>
                <updated>Sun, 2 May 2010 23:06:51 +0000</updated>
                            <resolved>Sun, 2 May 2010 23:06:51 +0000</resolved>
                                    <version>0.2</version>
                                    <fixVersion>0.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12790875" author="dreiss" created="Tue, 15 Dec 2009 18:42:01 +0000"  >&lt;p&gt;Can you post the command that was run by make check right before the error?  Also, what version of boost do you have?&lt;/p&gt;</comment>
                            <comment id="12790908" author="djnym" created="Tue, 15 Dec 2009 19:36:42 +0000"  >&lt;p&gt;I don&apos;t have the command at the moment, but my version of boost is 1.33.1&lt;/p&gt;

&lt;p&gt;% rpm -qa | grep boost&lt;br/&gt;
boost-1.33.1-10.el5&lt;br/&gt;
boost-devel-1.33.1-10.el5&lt;/p&gt;

&lt;p&gt;and attached is a patch which will cause these tests to work with that version of the lib.&lt;/p&gt;</comment>
                            <comment id="12790984" author="simpkins" created="Tue, 15 Dec 2009 22:15:24 +0000"  >&lt;p&gt;The patch looks good to me.  I think it might make more sense to define BOOST_AUTO_TEST_MAIN in UnitTestMain.cpp rather than in TMemoryBufferTest.cpp, though.  Here&apos;s a minor update to the patch that does that.&lt;/p&gt;</comment>
                            <comment id="12791089" author="djnym" created="Wed, 16 Dec 2009 00:33:16 +0000"  >&lt;p&gt;I actually had problems with both patches on OSX 10.6.2, so here&apos;s a patch that both works on Centos 5.3 with boost 1.33 and on OSX 10.6.2 with boost 1.35 from fink.  Basically somewhere between 1.33 and 1.35 they seem to have added some magic autoloading library thing to boost, but since I added the unit test library to get this to work with 1.33, you need to tell 1.35 that this is happening with another #DEFINE.  Luckily that #DEFINE does not exist in boost 1.33, so is essentially ignored.&lt;/p&gt;

&lt;p&gt;With this patch and the two uploaded to &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-649&quot; title=&quot;Java documentation is installed in the wrong place when using autoconf 2.59&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-649&quot;&gt;&lt;del&gt;THRIFT-649&lt;/del&gt;&lt;/a&gt; it&apos;s now possible to do&lt;/p&gt;

&lt;p&gt;% svn co &lt;a href=&quot;http://svn.apache.org/repos/asf/incubator/thrift/trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/incubator/thrift/trunk&lt;/a&gt; thrift&lt;br/&gt;
% cd thrift&lt;br/&gt;
% ./bootstrap.sh &amp;amp;&amp;amp; ./configure &amp;amp;&amp;amp; make &amp;amp;&amp;amp; make check&lt;/p&gt;

&lt;p&gt;and have it work on both Centos 5.3 with older autoconf 2.59 and boost 1.33 as well as work on OSX 10.6.2 with autoconf 2.64 and boost 1.35.&lt;/p&gt;

&lt;p&gt;(although there&apos;s a few other messy bits to getting fink into the right state in order to have boost installed correctly).&lt;/p&gt;</comment>
                            <comment id="12863216" author="bryanduxbury" created="Sun, 2 May 2010 23:06:51 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12428071" name="check.patch" size="4789" author="djnym" created="Tue, 15 Dec 2009 19:36:42 +0000"/>
                            <attachment id="12428089" name="check2.patch" size="5185" author="simpkins" created="Tue, 15 Dec 2009 22:15:24 +0000"/>
                            <attachment id="12428110" name="check3.patch" size="4823" author="djnym" created="Wed, 16 Dec 2009 00:33:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>186814</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 30 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16el3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245495</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>