<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:32:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-5122] Fix memory leak in c_glib tutorial server</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-5122</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;The memory leak was triggered on running c_glib tutorial server. The memory used by a ThriftStruct&apos;s properties don&apos;t need to call g_strdup and&#160;will be malloced on set property. And the error object need to be freed.&lt;/p&gt;

&lt;p&gt;Leak:&lt;br/&gt;
Direct leak of 19 byte(s) in 1 object(s) allocated from:&lt;br/&gt;
 #0 0x7f1744030ae8 in __interceptor_malloc (/usr/lib64/libasan.so.5+0xefae8)&lt;br/&gt;
 #1 0x7f17430851d5 in g_malloc (/usr/lib64/libglib-2.0.so.0+0x531d5)&lt;br/&gt;
 #2 0x7f174309eb32 in g_strdup (/usr/lib64/libglib-2.0.so.0+0x6cb32)&lt;br/&gt;
 #3 0x403285 in tutorial_calculator_handler_calculate /mnt/hgfs/share/thrift-0.13.0/tutorial/c_glib/c_glib_server.c:233&lt;br/&gt;
 #4 0x4081e4 in calculator_handler_calculate gen-c_glib/calculator.c:713&lt;br/&gt;
 #5 0x409870 in calculator_processor_process_calculate gen-c_glib/calculator.c:1030&lt;br/&gt;
 #6 0x40a483 in calculator_processor_dispatch_call gen-c_glib/calculator.c:1198&lt;br/&gt;
 #7 0x7f1743d1ee53 in thrift_dispatch_processor_process (/usr/lib64/libthrift_c_glib.so.0+0xee53)&lt;br/&gt;
 #8 0x7f1743d32d11 in thrift_simple_server_serve src/thrift/c_glib/server/thrift_simple_server.c:58&lt;br/&gt;
 #9 0x7f1743d31b9a in thrift_server_serve src/thrift/c_glib/server/thrift_server.c:108&lt;br/&gt;
 #10 0x404113 in main /mnt/hgfs/share/thrift-0.13.0/tutorial/c_glib/c_glib_server.c:506&lt;br/&gt;
 #11 0x7f1742869872 in __libc_start_main (/usr/lib64/libc.so.6+0x23872)&lt;br/&gt;
 #12 0x402a0d in _start (/mnt/hgfs/share/thrift-0.13.0/tutorial/c_glib/.libs/tutorial_server+0x402a0d)&lt;/p&gt;

&lt;p&gt;Direct leak of 16 byte(s) in 1 object(s) allocated from:&lt;br/&gt;
 #0 0x7f1744030ae8 in __interceptor_malloc (/usr/lib64/libasan.so.5+0xefae8)&lt;br/&gt;
 #1 0x7f17430851d5 in g_malloc (/usr/lib64/libglib-2.0.so.0+0x531d5)&lt;br/&gt;
 #2 0x7f174309ce06 in g_slice_alloc (/usr/lib64/libglib-2.0.so.0+0x6ae06)&lt;br/&gt;
 #3 0x7f174306a350 in g_error_new_valist (/usr/lib64/libglib-2.0.so.0+0x38350)&lt;br/&gt;
 #4 0x7f174306a75e in g_set_error (/usr/lib64/libglib-2.0.so.0+0x3875e)&lt;br/&gt;
 #5 0x7f1743d2df8e in thrift_server_socket_accept src/thrift/c_glib/transport/thrift_server_socket.c:147&lt;br/&gt;
 #6 0x7f1743d2d17d in thrift_server_transport_accept (/usr/lib64/libthrift_c_glib.so.0+0x1d17d)&lt;br/&gt;
 #7 0x7f1743d3298a in thrift_simple_server_serve src/thrift/c_glib/server/thrift_simple_server.c:42&lt;br/&gt;
 #8 0x7f1743d31b9a in thrift_server_serve src/thrift/c_glib/server/thrift_server.c:108&lt;br/&gt;
 #9 0x404113 in main /mnt/hgfs/share/thrift-0.13.0/tutorial/c_glib/c_glib_server.c:506&lt;br/&gt;
 #10 0x7f1742869872 in __libc_start_main (/usr/lib64/libc.so.6+0x23872)&lt;br/&gt;
 #11 0x402a0d in _start (/mnt/hgfs/share/thrift-0.13.0/tutorial/c_glib/.libs/tutorial_server+0x402a0d)&lt;/p&gt;

&lt;p&gt;Direct leak of 2 byte(s) in 1 object(s) allocated from:&lt;br/&gt;
 #0 0x7f1744030ae8 in __interceptor_malloc (/usr/lib64/libasan.so.5+0xefae8)&lt;br/&gt;
 #1 0x7f17430851d5 in g_malloc (/usr/lib64/libglib-2.0.so.0+0x531d5)&lt;br/&gt;
 #2 0x7f174309eb32 in g_strdup (/usr/lib64/libglib-2.0.so.0+0x6cb32)&lt;br/&gt;
 #3 0x403569 in tutorial_calculator_handler_calculate /mnt/hgfs/share/thrift-0.13.0/tutorial/c_glib/c_glib_server.c:265&lt;br/&gt;
 #4 0x4081e4 in calculator_handler_calculate gen-c_glib/calculator.c:713&lt;br/&gt;
 #5 0x409870 in calculator_processor_process_calculate gen-c_glib/calculator.c:1030&lt;br/&gt;
 #6 0x40a483 in calculator_processor_dispatch_call gen-c_glib/calculator.c:1198&lt;br/&gt;
 #7 0x7f1743d1ee53 in thrift_dispatch_processor_process (/usr/lib64/libthrift_c_glib.so.0+0xee53)&lt;br/&gt;
 #8 0x7f1743d32d11 in thrift_simple_server_serve src/thrift/c_glib/server/thrift_simple_server.c:58&lt;br/&gt;
 #9 0x7f1743d31b9a in thrift_server_serve src/thrift/c_glib/server/thrift_server.c:108&lt;br/&gt;
 #10 0x404113 in main /mnt/hgfs/share/thrift-0.13.0/tutorial/c_glib/c_glib_server.c:506&lt;br/&gt;
 #11 0x7f1742869872 in __libc_start_main (/usr/lib64/libc.so.6+0x23872)&lt;br/&gt;
 #12 0x402a0d in _start (/mnt/hgfs/share/thrift-0.13.0/tutorial/c_glib/.libs/tutorial_server+0x402a0d)&lt;/p&gt;

&lt;p&gt;Direct leak of 2 byte(s) in 1 object(s) allocated from:&lt;br/&gt;
 #0 0x7f1744030ae8 in __interceptor_malloc (/usr/lib64/libasan.so.5+0xefae8)&lt;br/&gt;
 #1 0x7f17430851d5 in g_malloc (/usr/lib64/libglib-2.0.so.0+0x531d5)&lt;br/&gt;
 #2 0x7f174309eb32 in g_strdup (/usr/lib64/libglib-2.0.so.0+0x6cb32)&lt;br/&gt;
 #3 0x7f1743af773c (/usr/lib64/libgobject-2.0.so.0+0x3a73c)&lt;br/&gt;
 #4 0x7f1743ad60a5 in g_object_get_valist (/usr/lib64/libgobject-2.0.so.0+0x190a5)&lt;br/&gt;
 #5 0x7f1743ad6463 in g_object_get (/usr/lib64/libgobject-2.0.so.0+0x19463)&lt;br/&gt;
 #6 0x403a2b in tutorial_calculator_handler_get_struct /mnt/hgfs/share/thrift-0.13.0/tutorial/c_glib/c_glib_server.c:333&lt;br/&gt;
 #7 0x40c76c in shared_service_handler_get_struct gen-c_glib/shared_service.c:325&lt;br/&gt;
 #8 0x40cc0d in shared_service_processor_process_get_struct gen-c_glib/shared_service.c:416&lt;br/&gt;
 #9 0x40d1f5 in shared_service_processor_dispatch_call gen-c_glib/shared_service.c:498&lt;br/&gt;
 #10 0x40a4d4 in calculator_processor_dispatch_call gen-c_glib/calculator.c:1206&lt;br/&gt;
 #11 0x7f1743d1ee53 in thrift_dispatch_processor_process (/usr/lib64/libthrift_c_glib.so.0+0xee53)&lt;br/&gt;
 #12 0x7f1743d32d11 in thrift_simple_server_serve src/thrift/c_glib/server/thrift_simple_server.c:58&lt;br/&gt;
 #13 0x7f1743d31b9a in thrift_server_serve src/thrift/c_glib/server/thrift_server.c:108&lt;br/&gt;
 #14 0x404113 in main /mnt/hgfs/share/thrift-0.13.0/tutorial/c_glib/c_glib_server.c:506&lt;br/&gt;
 #15 0x7f1742869872 in __libc_start_main (/usr/lib64/libc.so.6+0x23872)&lt;br/&gt;
 #16 0x402a0d in _start (/mnt/hgfs/share/thrift-0.13.0/tutorial/c_glib/.libs/tutorial_server+0x402a0d)&lt;/p&gt;

&lt;p&gt;Direct leak of 2 byte(s) in 1 object(s) allocated from:&lt;br/&gt;
 #0 0x7f1744030ae8 in __interceptor_malloc (/usr/lib64/libasan.so.5+0xefae8)&lt;br/&gt;
 #1 0x7f17430851d5 in g_malloc (/usr/lib64/libglib-2.0.so.0+0x531d5)&lt;br/&gt;
 #2 0x7f174309eb32 in g_strdup (/usr/lib64/libglib-2.0.so.0+0x6cb32)&lt;br/&gt;
 #3 0x403a5a in tutorial_calculator_handler_get_struct /mnt/hgfs/share/thrift-0.13.0/tutorial/c_glib/c_glib_server.c:337&lt;br/&gt;
 #4 0x40c76c in shared_service_handler_get_struct gen-c_glib/shared_service.c:325&lt;br/&gt;
 #5 0x40cc0d in shared_service_processor_process_get_struct gen-c_glib/shared_service.c:416&lt;br/&gt;
 #6 0x40d1f5 in shared_service_processor_dispatch_call gen-c_glib/shared_service.c:498&lt;br/&gt;
 #7 0x40a4d4 in calculator_processor_dispatch_call gen-c_glib/calculator.c:1206&lt;br/&gt;
 #8 0x7f1743d1ee53 in thrift_dispatch_processor_process (/usr/lib64/libthrift_c_glib.so.0+0xee53)&lt;br/&gt;
 #9 0x7f1743d32d11 in thrift_simple_server_serve src/thrift/c_glib/server/thrift_simple_server.c:58&lt;br/&gt;
 #10 0x7f1743d31b9a in thrift_server_serve src/thrift/c_glib/server/thrift_server.c:108&lt;br/&gt;
 #11 0x404113 in main /mnt/hgfs/share/thrift-0.13.0/tutorial/c_glib/c_glib_server.c:506&lt;br/&gt;
 #12 0x7f1742869872 in __libc_start_main (/usr/lib64/libc.so.6+0x23872)&lt;br/&gt;
 #13 0x402a0d in _start (/mnt/hgfs/share/thrift-0.13.0/tutorial/c_glib/.libs/tutorial_server+0x402a0d)&lt;/p&gt;

&lt;p&gt;Indirect leak of 54 byte(s) in 1 object(s) allocated from:&lt;br/&gt;
 #0 0x7f1744030f28 in __interceptor_realloc (/usr/lib64/libasan.so.5+0xeff28)&lt;br/&gt;
 #1 0x7f17429537d9 in _&lt;em&gt;GI&lt;/em&gt;__vasprintf_chk (/usr/lib64/libc.so.6+0x10d7d9)&lt;br/&gt;
 #2 0x7f17430c5a6c in g_vasprintf (/usr/lib64/libglib-2.0.so.0+0x93a6c)&lt;br/&gt;
 #3 0x7f174309ecd0 in g_strdup_vprintf (/usr/lib64/libglib-2.0.so.0+0x6ccd0)&lt;br/&gt;
 #4 0x7f174306a365 in g_error_new_valist (/usr/lib64/libglib-2.0.so.0+0x38365)&lt;br/&gt;
 #5 0x7f174306a75e in g_set_error (/usr/lib64/libglib-2.0.so.0+0x3875e)&lt;br/&gt;
 #6 0x7f1743d2df8e in thrift_server_socket_accept src/thrift/c_glib/transport/thrift_server_socket.c:147&lt;br/&gt;
 #7 0x7f1743d2d17d in thrift_server_transport_accept (/usr/lib64/libthrift_c_glib.so.0+0x1d17d)&lt;br/&gt;
 #8 0x7f1743d3298a in thrift_simple_server_serve src/thrift/c_glib/server/thrift_simple_server.c:42&lt;br/&gt;
 #9 0x7f1743d31b9a in thrift_server_serve src/thrift/c_glib/server/thrift_server.c:108&lt;br/&gt;
 #10 0x404113 in main /mnt/hgfs/share/thrift-0.13.0/tutorial/c_glib/c_glib_server.c:506&lt;br/&gt;
 #11 0x7f1742869872 in __libc_start_main (/usr/lib64/libc.so.6+0x23872)&lt;br/&gt;
 #12 0x402a0d in _start (/mnt/hgfs/share/thrift-0.13.0/tutorial/c_glib/.libs/tutorial_server+0x402a0d)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13288082">THRIFT-5122</key>
            <summary>Fix memory leak in c_glib tutorial server</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wangyunjian">wangyunjian</assignee>
                                    <reporter username="wangyunjian">wangyunjian</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Feb 2020 15:09:52 +0000</created>
                <updated>Thu, 11 Feb 2021 22:27:39 +0000</updated>
                            <resolved>Thu, 4 Jun 2020 19:32:51 +0000</resolved>
                                    <version>0.13.0</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>Tutorial</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="9000">2.5h</timespent>
                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0byso:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>