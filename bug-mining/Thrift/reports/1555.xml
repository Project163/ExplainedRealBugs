<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:23:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3704] &quot;TConnectedClient died: Could not refill buffer&quot; message shown when using HTTP Server</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3704</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;When using &lt;tt&gt;THttpTransport&lt;/tt&gt; after every request the server prints the following message:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;TConnectedClient died: Could not refill buffer&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;However the operation seems to be completed successfully.&lt;/p&gt;

&lt;p&gt;It doesn&apos;t matter what protocol is used (JSON, Binary). The issue can be observed independent of the client used (C++, JavaScript in Browser).&lt;/p&gt;

&lt;p&gt;The error is thrown in the &lt;tt&gt;THttpTransport::refill&lt;/tt&gt; function in the case where read from the transport returns 0.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if throwing an exception there is really necessary?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux 64bit and Linux arm&lt;/p&gt;</environment>
        <key id="12946535">THRIFT-3704</key>
            <summary>&quot;TConnectedClient died: Could not refill buffer&quot; message shown when using HTTP Server</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pascal.bach">Pascal Bach</assignee>
                                    <reporter username="pascal.bach">Pascal Bach</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Mar 2016 12:52:14 +0000</created>
                <updated>Sun, 3 Apr 2016 17:10:54 +0000</updated>
                            <resolved>Sun, 6 Mar 2016 21:46:09 +0000</resolved>
                                    <version>0.9.3</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>C++ - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15177788" author="pascal.bach" created="Thu, 3 Mar 2016 13:12:31 +0000"  >&lt;p&gt;This patch modifies the Tutorial server in a way that allows reproducing the issue.&lt;br/&gt;
**&lt;b&gt;it&apos;s not a fix!!&lt;/b&gt;**&lt;/p&gt;</comment>
                            <comment id="15179682" author="pascal.bach" created="Fri, 4 Mar 2016 10:23:23 +0000"  >&lt;p&gt;I came up with the solution to treat the case where the buffer could not be refilled the same as when there is an EOF reached.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure it is correct to do this but I couldn&apos;t find anything that&apos;s not working. Maybe somebody with a deeper understanding can give some feedback.&lt;/p&gt;</comment>
                            <comment id="15182351" author="roger.meier" created="Sun, 6 Mar 2016 21:43:50 +0000"  >&lt;p&gt;Yes, throwing &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TTransportException::END_OF_FILE&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; is what we need here. It is handled by &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;src/thrift/server/TConnectedClient.cpp&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;.&lt;br/&gt;
and we do this on other transports as well.&lt;/p&gt;</comment>
                            <comment id="15182355" author="roger.meier" created="Sun, 6 Mar 2016 21:46:09 +0000"  >&lt;p&gt;Thanks Pascal!&lt;/p&gt;</comment>
                            <comment id="15187382" author="hudson" created="Wed, 9 Mar 2016 16:50:34 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift-precommit #290 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift-precommit/290/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift-precommit/290/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3704&quot; title=&quot;&amp;quot;TConnectedClient died: Could not refill buffer&amp;quot; message shown when using HTTP Server&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3704&quot;&gt;&lt;del&gt;THRIFT-3704&lt;/del&gt;&lt;/a&gt; Treat the case where we are not able to refill the buffer (roger: &lt;a href=&quot;https://github.com/apache/thrift/commit/af9d2ac69e6638066db75654ba289bc7d98777a5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/commit/af9d2ac69e6638066db75654ba289bc7d98777a5&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/cpp/src/thrift/transport/THttpTransport.cpp&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12791165" name="0001-Modify-tutorial-server-to-use-HTTP-and-JSON-to-repro.patch" size="2523" author="pascal.bach" created="Thu, 3 Mar 2016 13:12:31 +0000"/>
                            <attachment id="12791439" name="0001-Treat-the-case-where-we-are-not-able-to-refill-the-b.patch" size="891" author="pascal.bach" created="Fri, 4 Mar 2016 10:23:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2u3hj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>