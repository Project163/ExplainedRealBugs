<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:22:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3497] Build fails with &quot;invalid use of incomplete type&quot;</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3497</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;Building the latest code in git on &lt;a href=&quot;http://haiku-os.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Haiku&lt;/a&gt; fails with a number of error messages like&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;In file included from src/thrift/concurrency/Monitor.cpp:22:0:
./src/thrift/concurrency/Util.h: In static member function &apos;static void apache::thrift::concurrency::Util::toTimeval(apache::thrift::concurrency::timeval&amp;amp;, int64_t)&apos;:
./src/thrift/concurrency/Util.h:73:11: error: invalid use of incomplete type &apos;struct apache::thrift::concurrency::timeval&apos;
     result.tv_sec = static_cast&amp;lt;uint32_t&amp;gt;(value / MS_PER_S);                // ms to s
           ^
In file included from src/thrift/concurrency/Monitor.cpp:20:0:
./src/thrift/concurrency/Monitor.h:88:32: error: forward declaration of &apos;struct apache::thrift::concurrency::timeval&apos;
   int waitForTime(const struct timeval* abstime) const;
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This seems to be caused by &lt;tt&gt;Monitor.h&lt;/tt&gt; using &lt;tt&gt;struct timeval&lt;/tt&gt; but not explicitly including &lt;tt&gt;sys/time.h&lt;/tt&gt;. Changing &lt;tt&gt;Monitor.h&lt;/tt&gt; so it conditionally includes &lt;tt&gt;sys/time.h&lt;/tt&gt; on systems that have it resolves the issue.&lt;/p&gt;</description>
                <environment>&lt;p&gt;gcc 4.8.5 on Haiku hrev49934 (x86)&lt;/p&gt;</environment>
        <key id="12923491">THRIFT-3497</key>
            <summary>Build fails with &quot;invalid use of incomplete type&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="simonsouth">Simon South</assignee>
                                    <reporter username="simonsouth">Simon South</reporter>
                        <labels>
                            <label>c++</label>
                            <label>haiku</label>
                            <label>library</label>
                    </labels>
                <created>Mon, 21 Dec 2015 17:59:26 +0000</created>
                <updated>Fri, 8 Jan 2016 23:50:55 +0000</updated>
                            <resolved>Wed, 23 Dec 2015 17:38:03 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>C++ - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15066814" author="githubbot" created="Mon, 21 Dec 2015 18:05:19 +0000"  >&lt;p&gt;GitHub user simonsouth opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/753&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/753&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3497&quot; title=&quot;Build fails with &amp;quot;invalid use of incomplete type&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3497&quot;&gt;&lt;del&gt;THRIFT-3497&lt;/del&gt;&lt;/a&gt; Build fails with &quot;invalid use of incomplete type&quot;&lt;/p&gt;

&lt;p&gt;    This change fixes an &quot;invalid use of incomplete type&quot; compiler error referring to `struct timeval` when building on Haiku.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;`Monitor.cpp`: Include `thrift-config.h` for definition of `HAVE_SYS_TIME_H`.&lt;/li&gt;
	&lt;li&gt;`Monitor.h`: Explicitly include `sys/time.h` on platforms that require this.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/simonsouth/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/simonsouth/thrift&lt;/a&gt; thrift-3497-build-fails-with-invalid-use&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/753.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/753.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #753&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit fc8607d5379a48cf3a5e517a4d32e8faa9a9fdea&lt;br/&gt;
Author: Simon South &amp;lt;simon@simonsouth.com&amp;gt;&lt;br/&gt;
Date:   2015-12-21T18:01:03Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3497&quot; title=&quot;Build fails with &amp;quot;invalid use of incomplete type&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3497&quot;&gt;&lt;del&gt;THRIFT-3497&lt;/del&gt;&lt;/a&gt; Build fails with &quot;invalid use of incomplete type&quot;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Monitor.cpp: Include thrift-config.h for definition of&lt;br/&gt;
      HAVE_SYS_TIME_H&lt;/li&gt;
	&lt;li&gt;Monitor.h: Explicitly include sys/time.h on platforms that require&lt;br/&gt;
      this&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="15069900" author="githubbot" created="Wed, 23 Dec 2015 17:19:50 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/753&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/753&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15090216" author="githubbot" created="Fri, 8 Jan 2016 23:47:06 +0000"  >&lt;p&gt;Github user Jens-G commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/753#issuecomment-170158504&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/753#issuecomment-170158504&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi Simon, is that invalid or why did you close it?&lt;/p&gt;</comment>
                            <comment id="15090220" author="jensg" created="Fri, 8 Jan 2016 23:50:55 +0000"  >&lt;p&gt;Ah, already merged.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 45 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2q653:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>