<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:58:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-840] Perl protocol handler could be more robust against unrecognised types</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-840</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;The Perl protocol implementation can loop arbitrarily on corrupt data because Protocol::skip() skips nothing if it doesn&apos;t recognise a type.  It might be nice if it threw an exception instead.  For example, the loop to skip a map (lib/perl/lib/Thrift/Protocol.pm:374) will keep looking at the same invalid bytes for every iteration if it hits an unrecognised type.  If corrupt data has resulted in a bogus huge map size, then the loop goes on for a long while, rather than dying quickly after running out of available data.&lt;/p&gt;

&lt;p&gt;I recognise that input validation probably isn&apos;t a priority for Thrift (usually communications are well-formed!), but wonder if you&apos;d consider the attached patch which dies if skip or skipBinary encounter types that they don&apos;t know what to do with.  It probably needs more thought than I&apos;ve given it, as I&apos;m not sure what the correct behaviour should be for valid types not handled by the existing code: in the patch I&apos;m throwing an exception for those saying that they cannot be skipped.  An additional TType constant of MAX_TYPE might be helpful in writing a better solution.&lt;/p&gt;

&lt;p&gt;I know it&apos;s a bit weird to be suggesting this; I&apos;m using Thrift for serialisation among other things, and with an occasionally-imperfect data store.  This &quot;infinite&quot; loop was the only instance in which your existing error handling didn&apos;t adequately flag up bad data.  Clearly I should also be doing checksums on the data beforehand, but I just thought I&apos;d suggest this to you.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Conrad&lt;/p&gt;</description>
                <environment>&lt;p&gt;Debian Linux 5.0 (stable), Perl 5.10.0.&lt;/p&gt;</environment>
        <key id="12471009">THRIFT-840</key>
            <summary>Perl protocol handler could be more robust against unrecognised types</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="conrad">Conrad Hughes</assignee>
                                    <reporter username="conrad">Conrad Hughes</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Aug 2010 20:46:27 +0000</created>
                <updated>Thu, 2 Sep 2010 00:26:34 +0000</updated>
                            <resolved>Thu, 2 Sep 2010 00:26:34 +0000</resolved>
                                    <version>0.3</version>
                                    <fixVersion>0.5</fixVersion>
                                    <component>Perl - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12896154" author="conrad" created="Fri, 6 Aug 2010 20:48:26 +0000"  >&lt;p&gt;Throw exception instead of silent return on unrecognised type.&lt;/p&gt;</comment>
                            <comment id="12897969" author="bryanduxbury" created="Thu, 12 Aug 2010 22:00:23 +0000"  >&lt;p&gt;I&apos;m no Perl guy, but it seems like there&apos;s no reason to have two different kinds of &quot;die&quot; cases. The one with the if seems to be subsumed by the one without - am I wrong?&lt;/p&gt;</comment>
                            <comment id="12898024" author="conrad" created="Fri, 13 Aug 2010 00:44:14 +0000"  >

&lt;p&gt;No, you&apos;re exactly right.  I separated them out because I thought it&lt;br/&gt;
might be informative in case it turns out that all those valid types for&lt;br/&gt;
which there&apos;s no skip code should just return 0.  I don&apos;t know what&lt;br/&gt;
should be done for them really, but looking at the Java skip code they&lt;br/&gt;
aren&apos;t handled there either.  It appears to me that you can only reach&lt;br/&gt;
the end of that method in error, so any exception will do as far as I&apos;m&lt;br/&gt;
concerned.&lt;/p&gt;

&lt;p&gt;Conrad&lt;/p&gt;

&lt;p&gt;&amp;#8211; &lt;br/&gt;
The University of Edinburgh is a charitable body, registered in&lt;br/&gt;
Scotland, with registration number SC005336.&lt;/p&gt;
</comment>
                            <comment id="12905338" author="bryanduxbury" created="Thu, 2 Sep 2010 00:26:34 +0000"  >&lt;p&gt;I committed this with the redundant parts removed. Thanks for the patch!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12451463" name="perl_unrecognised_types.patch" size="1256" author="conrad" created="Fri, 6 Aug 2010 20:48:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>186988</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16dz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245396</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>