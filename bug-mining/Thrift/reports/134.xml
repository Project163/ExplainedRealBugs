<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:55:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-175] Specs in Ruby library should be run during make check</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-175</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;We should also make sure that fixtures data is being regenerated &lt;em&gt;every&lt;/em&gt; time. There&apos;s a Rake task for it, but it looks like it only runs if used explicitly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12406629">THRIFT-175</key>
            <summary>Specs in Ruby library should be run during make check</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dreiss">David Reiss</assignee>
                                    <reporter username="kclark">Kevin Clark</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Oct 2008 19:20:29 +0000</created>
                <updated>Tue, 7 Apr 2009 16:31:48 +0000</updated>
                            <resolved>Tue, 7 Apr 2009 16:31:48 +0000</resolved>
                                                    <fixVersion>0.1</fixVersion>
                                    <component>Ruby - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12670059" author="kclark" created="Tue, 3 Feb 2009 18:59:01 +0000"  >&lt;p&gt;I believe the fixture data is being regenerated every time at this point, but the specs still need to be hooked up to make check.&lt;/p&gt;

&lt;p&gt;The issue here was that the specs use rspec, which isn&apos;t in a default ruby install, so non-ruby devs wouldn&apos;t be able to run the test. The specs were intended to be for the library, while the tests (using Test::Unit) would be for the code generation.&lt;/p&gt;

&lt;p&gt;I&apos;m not entirely sure how this should be handled.&lt;/p&gt;</comment>
                            <comment id="12670062" author="bryanduxbury" created="Tue, 3 Feb 2009 19:06:21 +0000"  >&lt;p&gt;Interesting. I see the complexity here. However, I don&apos;t think it makes sense to keep multiple test suites all over the place. It makes it a lot harder to comprehend the codebase for a new coder.&lt;/p&gt;</comment>
                            <comment id="12670068" author="kclark" created="Tue, 3 Feb 2009 19:22:40 +0000"  >&lt;p&gt;I agree. I&apos;m just not sure what the right fix is. The specs are more up to date, and do more than the Test::Unit tests. It&apos;s possible we could include mspec with the tests to fix the &quot;runs out of the box&quot; issue. I believe it&apos;s MIT, like the rest of Rubinius and RubySpec.&lt;/p&gt;</comment>
                            <comment id="12670121" author="dreiss" created="Tue, 3 Feb 2009 21:26:11 +0000"  >&lt;p&gt;It is possible to detect rspec or mspec or whatever in the configure script and only run the spec tests if it is present.  This would allow anyone to successfully run &quot;make check&quot;.  The downside would be that it would silently (or quietly, if we print a &quot;this is what you are getting&quot; message at the end of the configure script) skip the extra tests if the dependency is absent.&lt;/p&gt;</comment>
                            <comment id="12670124" author="kclark" created="Tue, 3 Feb 2009 21:30:55 +0000"  >&lt;p&gt;That&apos;s doable, yup.&lt;/p&gt;</comment>
                            <comment id="12670517" author="dreiss" created="Wed, 4 Feb 2009 21:39:09 +0000"  >&lt;p&gt;So, the normal make check (the ones under test/rb) fail for me with&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  1) Error:
test_encodes_and_decodes_bools(BinaryProtocolAcceleratedTest):
NoMethodError: undefined method `encode_binary&apos; for #&amp;lt;Thrift::BinaryProtocolAccelerated:0x403c29f0&amp;gt;
    ./core/test_binary_protocol_accelerated.rb:39:in `assert_encodes_struct&apos;
    ./core/test_binary_protocol_accelerated.rb:52:in `test_encodes_and_decodes_bools&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;running Ruby 1.8.6 on Ubuntu Hardy.  Any tips?  (I don&apos;t know Ruby.)&lt;/p&gt;</comment>
                            <comment id="12670522" author="bryanduxbury" created="Wed, 4 Feb 2009 21:52:40 +0000"  >&lt;p&gt;That&apos;s happening because i got rid of those methods. I&apos;ll fix the tests.&lt;/p&gt;</comment>
                            <comment id="12670523" author="kclark" created="Wed, 4 Feb 2009 21:53:42 +0000"  >&lt;p&gt;Yeah, this is testing functionality that was taken out with the thrift_native binary_protocol_accelerated reorg (&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-248&quot; title=&quot;Factor BinaryProtocolAccelerated into separate protocol and struct components&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-248&quot;&gt;&lt;del&gt;THRIFT-248&lt;/del&gt;&lt;/a&gt;) and isn&apos;t your bug. They should probably just be removed, I think the reorg had new tests associated with it. Bryan?&lt;/p&gt;</comment>
                            <comment id="12693848" author="bryanduxbury" created="Mon, 30 Mar 2009 17:17:33 +0000"  >&lt;p&gt;There&apos;s actually another problem with this. As it stands right now, the ruby specs &quot;fail&quot; - that is, the tests all pass, but for some reason the process ends up crashing at the end because of something related to the Nonblocking server/test that Kevin Ballard wrote. I would imagine that a nonsuccess exit code would arrest the build process.&lt;/p&gt;</comment>
                            <comment id="12693865" author="kclark" created="Mon, 30 Mar 2009 17:53:22 +0000"  >&lt;p&gt;If I recall, this is because of a bug in fastthread that was fixed in 1.8.6 maybe? Or a new version of fastthread?&lt;/p&gt;</comment>
                            <comment id="12695749" author="michaelstockton" created="Sat, 4 Apr 2009 14:53:06 +0000"  >&lt;p&gt;An explicit @server.shutdown call in a few cases will get rid of the crash (&lt;span class=&quot;error&quot;&gt;&amp;#91;BUG&amp;#93;&lt;/span&gt; queue 0x1389310 freed with live thread(s) waiting).&lt;/p&gt;</comment>
                            <comment id="12696606" author="bryanduxbury" created="Tue, 7 Apr 2009 16:31:48 +0000"  >&lt;p&gt;I have committed David&apos;s makefile patch, and I&apos;ll do mstockton&apos;s patch in a separate issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12404189" name="ASF.LICENSE.NOT.GRANTED--0001-THRIFT-175.-ruby-Run-specs-with-make-check.patch" size="1023" author="dreiss" created="Mon, 30 Mar 2009 23:22:03 +0000"/>
                            <attachment id="12404647" name="thrift-175-fix-thread-error.patch" size="1130" author="michaelstockton" created="Sat, 4 Apr 2009 14:53:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>186412</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16f2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245574</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>