<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:32:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-5238] GetHashCode can throw NullReferenceException</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-5238</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;Thrift generates a setter for each field like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-c#&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;string&lt;/span&gt;&lt;/span&gt; WebhooksSecret
    {
      &lt;span class=&quot;code-keyword&quot;&gt;get&lt;/span&gt;
      {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; _WebhooksSecret;
      }
      &lt;span class=&quot;code-keyword&quot;&gt;set&lt;/span&gt;
      {
        __isset.WebhooksSecret = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;._WebhooksSecret = &lt;span class=&quot;code-keyword&quot;&gt;value&lt;/span&gt;;
      }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But if you set the field to &lt;em&gt;null&lt;/em&gt;, it will be marked as set in the &lt;em&gt;isset&lt;/em&gt; dictionary. Thrift also overrides &lt;em&gt;GetHashCode()&lt;/em&gt; like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-c#&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;int&lt;/span&gt;&lt;/span&gt; GetHashCode() {
      &lt;span class=&quot;code-object&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;int&lt;/span&gt;&lt;/span&gt; hashcode = 157;
      &lt;span class=&quot;code-keyword&quot;&gt;unchecked&lt;/span&gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(__isset.Url)
          hashcode = (hashcode * 397) + Url.GetHashCode();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(__isset.WebhooksSecret)
          hashcode = (hashcode * 397) + WebhooksSecret.GetHashCode();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(__isset.Username)
          hashcode = (hashcode * 397) + Username.GetHashCode();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(__isset.WebhooksTypes)
          hashcode = (hashcode * 397) + TCollections.GetHashCode(WebhooksTypes);
      }
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; hashcode;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that it doesn&apos;t protect against &lt;em&gt;null&lt;/em&gt;, where other overrides like &lt;em&gt;ToString()&lt;/em&gt; do:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-c#&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;string&lt;/span&gt;&lt;/span&gt; ToString()
    {
&lt;span class=&quot;code-comment&quot;&gt;//...
&lt;/span&gt;      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (WebhooksSecret != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; __isset.WebhooksSecret)
      {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(!__first) { sb.Append(&lt;span class=&quot;code-quote&quot;&gt;&quot;, &quot;&lt;/span&gt;); }
        __first = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        sb.Append(&lt;span class=&quot;code-quote&quot;&gt;&quot;WebhooksSecret: &quot;&lt;/span&gt;);
        sb.Append(WebhooksSecret);
      }
&lt;span class=&quot;code-comment&quot;&gt;//...
&lt;/span&gt;    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This can result in the field being set to &lt;em&gt;null&lt;/em&gt; then throwing a &lt;em&gt;NullReferenceException&lt;/em&gt; if a consumer calls &lt;em&gt;GetHashCode()&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached a repro in the form of a unit test library. There are instructions to run this in the README of the zip.&lt;/p&gt;</description>
                <environment>&lt;p&gt;OS: Windows 10 Pro Version 1903 Build 18362.900&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</environment>
        <key id="13313233">THRIFT-5238</key>
            <summary>GetHashCode can throw NullReferenceException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jensg">Jens Geyer</assignee>
                                    <reporter username="lewisjackson">Lewis Jackson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Jun 2020 11:15:24 +0000</created>
                <updated>Thu, 11 Feb 2021 22:27:11 +0000</updated>
                            <resolved>Thu, 25 Jun 2020 20:11:24 +0000</resolved>
                                    <version>0.13.0</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>netstd - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17144427" author="jensg" created="Wed, 24 Jun 2020 21:51:20 +0000"  >&lt;p&gt;Good  catch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13006335" name="Thrift-NullReferenceException-master.zip" size="1396014" author="lewisjackson" created="Wed, 24 Jun 2020 11:15:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0g5n4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>