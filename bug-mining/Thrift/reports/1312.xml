<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:19:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3042] Dockerfiles fail to build</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3042</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;h3&gt;&lt;a name=&quot;Dockerbuildonbuild%2Fdocker%2Fubuntu%2FDockerfilefailsonHaxesetup.e.g.&quot;&gt;&lt;/a&gt;Docker build on build/docker/ubuntu/Dockerfile fails on Haxe setup. e.g.&lt;/h3&gt;

&lt;p&gt;docker@ubuntu:~$ docker build -t thrift thrift/build/docker/ubuntu&lt;br/&gt;
...&lt;br/&gt;
haxe-3.1.3/std/Xml.hx&lt;br/&gt;
Uncaught exception - load.c(237) : Failed to load library : std.ndll (std.ndll: cannot open shared object file: No such file or directory)&lt;br/&gt;
INFO&lt;span class=&quot;error&quot;&gt;&amp;#91;0011&amp;#93;&lt;/span&gt; The command &lt;span class=&quot;error&quot;&gt;&amp;#91;/bin/sh -c apt-get install -y libneko0 &amp;amp;&amp;amp;     mkdir -p /tmp/haxe /usr/lib/haxe &amp;amp;&amp;amp;     curl http://haxe.org/website-content/downloads/3,1,3/downloads/haxe-3.1.3-linux64.tar.gz -o /tmp/haxe/haxe-3.1.3-linux64.tar.gz &amp;amp;&amp;amp;     tar -xvzf /tmp/haxe/haxe-3.1.3-linux64.tar.gz -C /usr/lib/haxe --strip-components=1 &amp;amp;&amp;amp;     ln -s /usr/lib/haxe/haxe /usr/bin/haxe &amp;amp;&amp;amp;     ln -s /usr/lib/haxe/haxelib /usr/bin/haxelib &amp;amp;&amp;amp;     ln -s /usr/lib/libneko.so.0 /usr/lib/libneko.so &amp;amp;&amp;amp;     mkdir -p /usr/lib/haxe/lib  &amp;amp;&amp;amp;     chmod -R 777 /usr/lib/haxe/lib &amp;amp;&amp;amp;     haxelib setup /usr/lib/haxe/lib &amp;amp;&amp;amp;     haxelib install hxcpp&amp;#93;&lt;/span&gt; returned a non-zero code: 1 &lt;/p&gt;


&lt;h3&gt;&lt;a name=&quot;Dockerbuildonbuild%2Fdocker%2FcentosDockerfilefailsonBoostbuild.e.g.&quot;&gt;&lt;/a&gt;Docker build on build/docker/centosDockerfile fails on Boost build. e.g.&lt;/h3&gt;

&lt;p&gt;docker@ubuntu:~$ docker build -t thrift thrift/build/docker/centos&lt;br/&gt;
...&lt;br/&gt;
/tmp/boost/boost_1_55_0/tools/build/v2/tools/gcc.jam:148: in gcc.init from module gcc&lt;br/&gt;
error: toolset gcc initialization:&lt;br/&gt;
error: no command provided, default command &apos;g++&apos; not found&lt;br/&gt;
error: initialized from project-config.jam:12&lt;br/&gt;
/tmp/boost/boost_1_55_0/tools/build/v2/build/toolset.jam:41: in toolset.using from module toolset&lt;br/&gt;
/tmp/boost/boost_1_55_0/tools/build/v2/build/project.jam:1007: in using from module project-rules&lt;br/&gt;
project-config.jam:12: in modules.load from module project-config&lt;br/&gt;
/tmp/boost/boost_1_55_0/tools/build/v2/build-system.jam:249: in load-config from module build-system&lt;br/&gt;
/tmp/boost/boost_1_55_0/tools/build/v2/build-system.jam:412: in load-configuration-files from module build-system&lt;br/&gt;
/tmp/boost/boost_1_55_0/tools/build/v2/build-system.jam:524: in load from module build-system&lt;br/&gt;
/tmp/boost/boost_1_55_0/tools/build/v2/kernel/modules.jam:289: in import from module modules&lt;br/&gt;
/tmp/boost/boost_1_55_0/tools/build/v2/kernel/bootstrap.jam:139: in boost-build from module&lt;br/&gt;
/tmp/boost/boost_1_55_0/boost-build.jam:17: in module scope from module&lt;/p&gt;

&lt;p&gt;INFO&lt;span class=&quot;error&quot;&gt;&amp;#91;0264&amp;#93;&lt;/span&gt; The command &lt;span class=&quot;error&quot;&gt;&amp;#91;/bin/sh -c mkdir -p /tmp/boost &amp;amp;&amp;amp;     curl -SL &amp;quot;http://sourceforge.net/projects/boost/files/boost/1.55.0/boost_1_55_0.tar.gz&amp;quot; | tar -xzC /tmp/boost &amp;amp;&amp;amp;     cd /tmp/boost/boost_1_55_0 &amp;amp;&amp;amp;     ./bootstrap.sh  &amp;amp;&amp;amp;     ./b2 install &amp;amp;&amp;amp;     cd $HOME&amp;#93;&lt;/span&gt; returned a non-zero code: 1 &lt;/p&gt;</description>
                <environment>&lt;p&gt;ubuntu 14.04 docker host&lt;/p&gt;</environment>
        <key id="12782108">THRIFT-3042</key>
            <summary>Dockerfiles fail to build</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jking3">James E. King III</assignee>
                                    <reporter username="codesf">Randy Abernethy</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Mar 2015 00:14:51 +0000</created>
                <updated>Tue, 5 Dec 2017 17:29:58 +0000</updated>
                            <resolved>Mon, 20 Feb 2017 17:44:34 +0000</resolved>
                                    <version>0.9.3</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Build Process</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                                                            <comments>
                            <comment id="14364148" author="jensg" created="Mon, 16 Mar 2015 23:02:39 +0000"  >&lt;p&gt;The Neko VM is needed. It is very recommended to use the script from the openfl website with Linux, instead of the haxe.org downloads. Don&apos;t ask me why it has to be this way, I have no clue, but this is a known issue.&lt;/p&gt;

&lt;p&gt;Documentation:&lt;br/&gt;
&lt;a href=&quot;http://www.openfl.org/documentation/getting-started/installing-openfl/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.openfl.org/documentation/getting-started/installing-openfl/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Linux Install Script&lt;br/&gt;
&lt;a href=&quot;http://www.openfl.org/builds/haxe/haxe-3.1.3-linux-installer.tar.gz&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.openfl.org/builds/haxe/haxe-3.1.3-linux-installer.tar.gz&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14524530" author="jfarrell" created="Sat, 2 May 2015 04:11:39 +0000"  >&lt;p&gt;Patch for ubuntu fixes&lt;/p&gt;</comment>
                            <comment id="14527127" author="roger.meier" created="Mon, 4 May 2015 19:35:02 +0000"  >&lt;p&gt;Thanks Jake,&lt;br/&gt;
looks better, but make check fails...&lt;br/&gt;
-roger&lt;/p&gt;</comment>
                            <comment id="14527190" author="jfarrell" created="Mon, 4 May 2015 20:12:35 +0000"  >&lt;p&gt;not done yet, still working through that and the centos file, just attaching patch for progress&lt;/p&gt;</comment>
                            <comment id="14598768" author="jfarrell" created="Wed, 24 Jun 2015 02:45:53 +0000"  >&lt;p&gt;cmake currently failing tests in updated dockerfiles&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;The following tests FAILED:
	 19 - processor_test (Failed)
	 36 - python_test (Failed)
Errors &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; running CTest
make[3]: *** [CMakeFiles/check] Error 8
make[2]: *** [CMakeFiles/check.dir/all] Error 2
make[1]: *** [CMakeFiles/check.dir/rule] Error 2
make: *** [check] Error 2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14599381" author="jfarrell" created="Wed, 24 Jun 2015 13:14:16 +0000"  >&lt;p&gt;Committed changes up to non working cmake tests at rev 763841b&lt;/p&gt;</comment>
                            <comment id="14599469" author="hudson" created="Wed, 24 Jun 2015 14:14:41 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1580 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1580/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1580/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3042&quot; title=&quot;Dockerfiles fail to build&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3042&quot;&gt;&lt;del&gt;THRIFT-3042&lt;/del&gt;&lt;/a&gt;: Dockerfiles fail to build (jfarrell: rev 763841b4dd83f7f100b469f2d879b86d2cbfb84a)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;build/docker/ubuntu/Dockerfile&lt;/li&gt;
	&lt;li&gt;build/docker/centos/Dockerfile&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14642708" author="hudson" created="Mon, 27 Jul 2015 13:18:01 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1624 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1624/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1624/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3042&quot; title=&quot;Dockerfiles fail to build&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3042&quot;&gt;&lt;del&gt;THRIFT-3042&lt;/del&gt;&lt;/a&gt;: Dockerfiles fail to build (jfarrell: rev b2e90c143e266c9af9ed437a3ab0dbb229a0b722)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;build/docker/centos/Dockerfile&lt;/li&gt;
	&lt;li&gt;build/docker/ubuntu/Dockerfile&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14644416" author="nsuke" created="Tue, 28 Jul 2015 14:19:34 +0000"  >&lt;p&gt;I had problem building ubuntu container.&lt;/p&gt;

&lt;p&gt;It turned out that this was caused by docker reusing &quot;previously succeeded and unchanged since&quot; steps:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Step 4 : RUN apt-get update -y &amp;amp;&amp;amp; apt-get dist-upgrade -y
 ---&amp;gt; Using cache
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That drove apt to get obsolete packages that are no longer available from distro:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Err http:&lt;span class=&quot;code-comment&quot;&gt;//archive.ubuntu.com/ubuntu/ trusty-security/main libcups2 amd64 1.7.2-0ubuntu1.5
&lt;/span&gt;  404  Not Found [IP: 91.189.91.23 80]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A possible solution is to prepend &lt;b&gt;apt-get update -y &amp;amp;&amp;amp;&lt;/b&gt; to every occurences of &lt;b&gt;apt-get install -y&lt;/b&gt; as they &lt;a href=&quot;https://docs.docker.com/articles/dockerfile_best-practices/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;recommend&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Alternatively we can instruct users to always use &lt;tt&gt;docker build --no-cache&lt;/tt&gt; but time spent for re-downloading every package is far greater than one for redundant &lt;b&gt;apt-get update&lt;/b&gt; IMO.&lt;/p&gt;</comment>
                            <comment id="14645184" author="codesf" created="Tue, 28 Jul 2015 23:24:33 +0000"  >&lt;p&gt;+1 for &quot;apt-get update -y &amp;amp;&amp;amp; ...&quot; on all apt-get install lines&lt;/p&gt;</comment>
                            <comment id="14645975" author="jfarrell" created="Wed, 29 Jul 2015 12:33:04 +0000"  >&lt;p&gt;that would add a lot of unnecessary overhead. the dockerfiles where setup in sections to enumerate each client lib deps, if this starts to become an issue we can look at changing how the layers are constructed&lt;/p&gt;</comment>
                            <comment id="15838508" author="jking3" created="Wed, 25 Jan 2017 20:22:04 +0000"  >&lt;p&gt;Is this still an open issue?&lt;/p&gt;</comment>
                            <comment id="15874865" author="jking3" created="Mon, 20 Feb 2017 17:44:34 +0000"  >&lt;p&gt;The docker files for ubuntu and debian have been building well for a while now.  I&apos;m going to mark this resolved.&lt;/p&gt;</comment>
                            <comment id="16278905" author="jking3" created="Tue, 5 Dec 2017 17:29:58 +0000"  >&lt;p&gt;Closing all Thrift-0.10.0 Resolved Jira items (total: 12 that got left behind)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12729920" name="thrift-3042-ubuntu.patch" size="1578" author="jfarrell" created="Sat, 2 May 2015 04:11:39 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12913072">THRIFT-3425</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26shb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>