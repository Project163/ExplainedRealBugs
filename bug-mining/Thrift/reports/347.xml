<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:58:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-955] Thrift compiler for Windows uses lowercase names and directories which is inconsistent with compiling on other platforms</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-955</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;Using thrift compiler 0.5.0 for windows found at: &lt;a href=&quot;http://incubator.apache.org/thrift/download/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://incubator.apache.org/thrift/download/&lt;/a&gt; the compiler produces lowercase files and paths rather than honoring the capitalization of the thrift file.  However using the compiler on other platforms (I&apos;ve tested OS X specifically), or an older compiler for windows found on the wiki, the name follows the capitalization of the thrift file.&lt;/p&gt;

&lt;p&gt;Windows compiler now compiling AdminService.thrift you get:&lt;br/&gt;
./gen-php/adminservice/adminservice_constants.php&lt;br/&gt;
./gen-php/adminservice/adminservice_types.php&lt;br/&gt;
./gen-php/adminservice/AdminService.php&lt;/p&gt;

&lt;p&gt;What you get on other OSes and what you used to get on older versions of windows compiler:&lt;br/&gt;
./gen-php/AdminService/AdminService_constants.php&lt;br/&gt;
./gen-php/AdminService/AdminService_types.php&lt;br/&gt;
./gen-php/AdminService/AdminService.php&lt;/p&gt;

&lt;p&gt;This is an inconsistency that can cause lots of headaches for developers when they are in a mixed environment using both windows and other OSes to compile thrift files.  It makes it easy to get the wrong case and can cause problems for a case sensitive file system.  It seems that the compiler should behave the same regardless of the platform.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7 64 bit. Using thrift compiler for windows found at: &lt;a href=&quot;http://incubator.apache.org/thrift/download/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://incubator.apache.org/thrift/download/&lt;/a&gt;&lt;/p&gt;</environment>
        <key id="12477281">THRIFT-955</key>
            <summary>Thrift compiler for Windows uses lowercase names and directories which is inconsistent with compiling on other platforms</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roger">Roger Meier</assignee>
                                    <reporter username="whitingj">Jeff Whiting</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Oct 2010 21:25:52 +0000</created>
                <updated>Thu, 14 Oct 2010 18:09:45 +0000</updated>
                            <resolved>Thu, 14 Oct 2010 18:09:45 +0000</resolved>
                                    <version>0.5</version>
                                    <fixVersion>0.6</fixVersion>
                                    <component>PHP - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12920780" author="whitingj" created="Wed, 13 Oct 2010 21:57:54 +0000"  >&lt;p&gt;Looking at main.cc you see the following code:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
/**
 * MinGW doesn&apos;t have realpath, so use fallback implementation in that case,
 * otherwise this just calls through to realpath
 */
char *saferealpath(const char *path, char *resolved_path) {
#ifdef MINGW
  char buf[MAX_PATH];
  char* basename;
  DWORD len = GetFullPathName(path, MAX_PATH, buf, &amp;amp;basename);
  if (len == 0 || len &amp;gt; MAX_PATH - 1){
    strcpy(resolved_path, path);
  } else {
    CharLowerBuff(buf, len);
    strcpy(resolved_path, buf);
  }

  // Replace backslashes with forward slashes so the
  // rest of the code behaves correctly.
  size_t resolved_len = strlen(resolved_path);
  for (size_t i = 0; i &amp;lt; resolved_len; i++) {
    if (resolved_path[i] == &apos;\\&apos;) {
      resolved_path[i] = &apos;/&apos;;
    }
  }
  return resolved_path;
#else
  return realpath(path, resolved_path);
#endif
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The code calls CharLowerBuff(buf, len); which would lowercase the entire path. I can&apos;t think of any reason to lowercase the result of GetFullPathName as that function should have returned to you the correct path with the correct case.  I haven&apos;t tested removing that line of code but I bet it would fix this bug. &lt;/p&gt;</comment>
                            <comment id="12920864" author="roger.meier" created="Thu, 14 Oct 2010 07:01:43 +0000"  >&lt;p&gt;Thanks Jeff!&lt;/p&gt;

&lt;p&gt;I just removed that CharLowerBuff line and created the patch&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12457125/12457125_THRIFT-955_remove_CharLowerBuff.patch&quot; title=&quot;THRIFT-955_remove_CharLowerBuff.patch attached to THRIFT-955&quot;&gt;THRIFT-955_remove_CharLowerBuff.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; for revision &lt;a href=&quot;https://svn.apache.org/repos/asf/incubator/thrift/tags/0.5.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/incubator/thrift/tags/0.5.0&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The resulting compiler is here available: &lt;a href=&quot;http://people.apache.org/~roger/dist/thrift/0.5.0/w32-compiler-fix/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://people.apache.org/~roger/dist/thrift/0.5.0/w32-compiler-fix/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I generated several languages, e.g csharp with namespaces and corresponding subfolders etc.&lt;/p&gt;

&lt;p&gt;could you please verify?&lt;/p&gt;

&lt;p&gt;I would really like to commit this to trunk.&lt;/p&gt;</comment>
                            <comment id="12920980" author="whitingj" created="Thu, 14 Oct 2010 15:03:14 +0000"  >&lt;p&gt;Verified.  That fixed my problem!  Thanks for the quick fix.&lt;/p&gt;</comment>
                            <comment id="12921055" author="roger.meier" created="Thu, 14 Oct 2010 18:09:44 +0000"  >&lt;p&gt;Thanks Jeff!&lt;br/&gt;
It&apos;s committed to trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12457125" name="THRIFT-955_remove_CharLowerBuff.patch" size="368" author="roger" created="Thu, 14 Oct 2010 07:01:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>187082</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 6 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16dlz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245337</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>