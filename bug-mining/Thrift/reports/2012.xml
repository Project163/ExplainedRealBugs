<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:31:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-4971] Fix lib/rb/spec/union_spec.rb so that CI succeeds</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-4971</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;I found that recent CI jobs failed with the following error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Failures:

  1) Union Thrift::Union should raise &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; wrong set field when hash initialized and type checking is off

     Failure/Error: expect(example).to raise_error(RuntimeError, &lt;span class=&quot;code-quote&quot;&gt;&quot;set_field is not valid &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; union!&quot;&lt;/span&gt;)

       You must pass a block rather than an argument to `expect` to use the provided block expectation matcher (raise RuntimeError with &lt;span class=&quot;code-quote&quot;&gt;&quot;set_field is not valid &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; union!&quot;&lt;/span&gt;).

     # ./spec/union_spec.rb:55:in `block (3 levels) in &amp;lt;top (required)&amp;gt;&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;rspec-expectations 3.8.5 was released three or four days ago, and it probably caused this error. In accordance with the message, the test case in question should be fixed as follows,&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     it &lt;span class=&quot;code-quote&quot;&gt;&quot;should raise &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; wrong set field when hash initialized and type checking is off&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;
       Thrift.type_checking = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
       union = SpecNamespace::My_union.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;({incorrect_field: :incorrect})
-      example = lambda { Thrift::Serializer.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;.serialize(union) }
-      expect(example).to raise_error(RuntimeError, &lt;span class=&quot;code-quote&quot;&gt;&quot;set_field is not valid &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; union!&quot;&lt;/span&gt;)
+      expect { Thrift::Serializer.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;.serialize(union) }.to raise_error(RuntimeError, &lt;span class=&quot;code-quote&quot;&gt;&quot;set_field is not valid &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; union!&quot;&lt;/span&gt;)
     end
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;just as the previous test case does as follows:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    it &lt;span class=&quot;code-quote&quot;&gt;&quot;should raise &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; wrong set field&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;
      union = SpecNamespace::My_union.&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;
      union.integer32 = 25
      expect { union.some_characters }.to raise_error(RuntimeError, &lt;span class=&quot;code-quote&quot;&gt;&quot;some_characters is not union&apos;s set field.&quot;&lt;/span&gt;)
    end
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13260724">THRIFT-4971</key>
            <summary>Fix lib/rb/spec/union_spec.rb so that CI succeeds</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sekikn">Kengo Seki</assignee>
                                    <reporter username="sekikn">Kengo Seki</reporter>
                        <labels>
                    </labels>
                <created>Sat, 5 Oct 2019 16:27:34 +0000</created>
                <updated>Wed, 16 Oct 2019 22:27:50 +0000</updated>
                            <resolved>Sun, 6 Oct 2019 10:26:04 +0000</resolved>
                                                    <fixVersion>0.13.0</fixVersion>
                                    <component>Ruby - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16945101" author="jensg" created="Sat, 5 Oct 2019 16:30:30 +0000"  >&lt;p&gt;Are you going to prepare PRs for all these tickets?&lt;/p&gt;</comment>
                            <comment id="16945104" author="sekikn" created="Sat, 5 Oct 2019 16:36:36 +0000"  >&lt;p&gt;Yes, will submit it shortly.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 6 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07bow:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>