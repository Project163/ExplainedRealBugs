<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:33:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-5350] 0.14.0 fails to build on non-x86</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-5350</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;```&lt;/p&gt;

&lt;p&gt;make&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;: Entering directory &apos;/builddir/build/BUILD/thrift-0.14.0/compiler/cpp&apos;&lt;br/&gt;
g++ -std=c++11 -DHAVE_CONFIG_H -I./src -Wall -Wextra -pedantic -Werror -O2 -flto=auto -ffat-lto-objects -fexceptions -g -grecord-gcc-switches -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -fstack-protector-strong -specs=/usr/lib/rpm/redhat/redhat-annobin-cc1 -march=armv7-a -mfpu=vfpv3-d16 -mtune=generic-armv7-a -mabi=aapcs-linux -mfloat-abi=hard -c -o src/thrift/generate/thrift-t_delphi_generator.o `test -f &apos;src/thrift/generate/t_delphi_generator.cc&apos; || echo &apos;./&apos;`src/thrift/generate/t_delphi_generator.cc&lt;br/&gt;
src/thrift/generate/t_delphi_generator.cc: In member function &apos;std::string t_delphi_generator::make_pascal_string_literal(std::string)&apos;:&lt;br/&gt;
src/thrift/generate/t_delphi_generator.cc:1066:12: error: comparison is always true due to limited range of data type &lt;span class=&quot;error&quot;&gt;&amp;#91;-Werror=type-limits&amp;#93;&lt;/span&gt;&lt;br/&gt;
 1066 | if( (c &amp;gt;= 0) &amp;amp;&amp;amp; (c &amp;lt; 32)) { // convert ctrl chars, but leave UTF-8 alone&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ~&lt;sub&gt;^&lt;/sub&gt;~~&lt;br/&gt;
cc1plus: all warnings being treated as errors&lt;br/&gt;
make&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;: *** &lt;span class=&quot;error&quot;&gt;&amp;#91;Makefile:1154: src/thrift/generate/thrift-t_delphi_generator.o&amp;#93;&lt;/span&gt; Error 1&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;```&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://koji.fedoraproject.org/koji/taskinfo?taskID=62017099&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://koji.fedoraproject.org/koji/taskinfo?taskID=62017099&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Fedora rawhide&lt;/p&gt;</environment>
        <key id="13358728">THRIFT-5350</key>
            <summary>0.14.0 fails to build on non-x86</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="opoplawski">Orion Poplawski</assignee>
                                    <reporter username="opoplawski">Orion Poplawski</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Feb 2021 23:10:51 +0000</created>
                <updated>Sat, 11 Sep 2021 12:30:57 +0000</updated>
                            <resolved>Wed, 17 Feb 2021 18:54:53 +0000</resolved>
                                    <version>0.14.0</version>
                                    <fixVersion>0.15.0</fixVersion>
                    <fixVersion>0.14.1</fixVersion>
                                    <component>Delphi - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17284975" author="opoplawski" created="Mon, 15 Feb 2021 23:14:00 +0000"  >&lt;p&gt;Same error on aarch64, ppc64le, s390x.&lt;/p&gt;</comment>
                            <comment id="17285031" author="emmenlau" created="Tue, 16 Feb 2021 04:55:53 +0000"  >&lt;p&gt;Would it be possible for you to collect all errors that you get on these platforms into a compiled report? I guess there is a good chance that this is not the only such problem?&lt;/p&gt;

&lt;p&gt;I.e. you could try and see if you get a full compile by making this warning not an error (using something like `-Wno-error=type-limits`), and then send the full build log.&lt;/p&gt;</comment>
                            <comment id="17285531" author="jensg" created="Tue, 16 Feb 2021 22:37:25 +0000"  >&lt;p&gt;Or provide a PR? You&apos;re the one who has the opportunity to reproduce, so why not use it?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17285628" author="opoplawski" created="Wed, 17 Feb 2021 04:17:10 +0000"  >&lt;p&gt;I made a naive stab at a fix (changing char to signed char) but that fails with:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;src/thrift/generate/t_delphi_generator.cc:1065:27: error: loop variable &apos;c&apos; of type &apos;const signed char&amp;amp;&apos; binds to a temporary constructed from type &apos;char&apos; &lt;span class=&quot;error&quot;&gt;&amp;#91;-Werror=range-loop-construct&amp;#93;&lt;/span&gt;&lt;br/&gt;
 1065 | for (signed char const &amp;amp;c: value) {&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ^&lt;br/&gt;
src/thrift/generate/t_delphi_generator.cc:1065:27: note: use non-reference type &apos;const signed char&apos; to make the copy explicit or &apos;const char&amp;amp;&apos; to prevent copying&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;which suggests some possible alternatives, but I&apos;m not sure what&apos;s best here.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Scratch build with -Werror removed is here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://koji.fedoraproject.org/koji/taskinfo?taskID=62129133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://koji.fedoraproject.org/koji/taskinfo?taskID=62129133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;but I &lt;b&gt;think&lt;/b&gt; this is the only warning that is problematic.&#160; I see a number of warnings in the x86 builds that don&apos;t fail the compile.&lt;/p&gt;</comment>
                            <comment id="17285630" author="opoplawski" created="Wed, 17 Feb 2021 04:37:26 +0000"  >&lt;p&gt;Okay, I can confirm that changing it to:&lt;/p&gt;

&lt;p&gt;for (signed char const c: value) {&lt;/p&gt;

&lt;p&gt;compiles, though it introduces a copy.&#160; Alternatively could go the `&lt;del&gt;Wno-error=type-limits` route.&#160; I&apos;ll leave it to someone else to decide which.&lt;/del&gt;-&lt;/p&gt;</comment>
                            <comment id="17285706" author="emmenlau" created="Wed, 17 Feb 2021 08:14:40 +0000"  >&lt;p&gt;&amp;gt; Scratch build with -Werror removed is here:&lt;br/&gt;
&amp;gt; &lt;a href=&quot;https://koji.fedoraproject.org/koji/taskinfo?taskID=62129133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://koji.fedoraproject.org/koji/taskinfo?taskID=62129133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please forgive, but I do not see a build log there. Is it a specific link that I should follow?&lt;/p&gt;</comment>
                            <comment id="17285726" author="jensg" created="Wed, 17 Feb 2021 09:00:15 +0000"  >&lt;p&gt;I think removing -Werror is not the ideal way to solve this. This is one line of code. I would do it myself but I can&apos;t test it.&lt;/p&gt;</comment>
                            <comment id="17285727" author="jensg" created="Wed, 17 Feb 2021 09:00:44 +0000"  >&lt;p&gt;&amp;gt; though it introduces a copy.&lt;/p&gt;

&lt;p&gt;Who cares, if the Thrift&#160;&lt;ins&gt;compiler&lt;/ins&gt; does not work at 110% efficiency does not really matter.&#160; If it works send a PR.&lt;/p&gt;</comment>
                            <comment id="17285728" author="jensg" created="Wed, 17 Feb 2021 09:01:56 +0000"  >&lt;p&gt;The idea of that if()-line was to make a disticntion between ASCII ctrl chars (range&#160;0 to 31) and anything else.&lt;/p&gt;</comment>
                            <comment id="17285861" author="opoplawski" created="Wed, 17 Feb 2021 14:55:31 +0000"  >&lt;p&gt;Pull request filed &lt;a href=&quot;https://github.com/apache/thrift/pull/2331&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/2331&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17285884" author="emmenlau" created="Wed, 17 Feb 2021 15:30:43 +0000"  >&lt;p&gt;I&apos;m not sure if I am confused, but in my humble opinion, something is not making itself completely clear.&lt;/p&gt;

&lt;p&gt;The compiler warning `&lt;tt&gt;error: comparison is always true due to limited range of data type &lt;span class=&quot;error&quot;&gt;&amp;#91;-Werror=type-limits&amp;#93;&lt;/span&gt;&lt;/tt&gt;` seems to say that the &lt;tt&gt;char&lt;/tt&gt; type would always be in the range &lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0, 32&amp;#93;&lt;/span&gt;&lt;/tt&gt;. Is that also how you understand the warning? If that would be the case, then the logic of that generator would be faulty &lt;b&gt;for your platform&lt;/b&gt;, because it would assume every character is a control character. Maybe thrift is just not ready for your platform?&lt;/p&gt;

&lt;p&gt;Before jumping to conclusions, it would be important to understand your platform better. Can you point to some documentation what the type &lt;tt&gt;char&lt;/tt&gt; is on your platform? What range does it have, or what bit depth?&lt;/p&gt;</comment>
                            <comment id="17285897" author="opoplawski" created="Wed, 17 Feb 2021 15:46:27 +0000"  >&lt;p&gt;It threw me a bit at first as well, but the compiler is only complaining about the c&amp;gt;=0 check.&#160; That is always true with unsigned chars.&lt;/p&gt;</comment>
                            <comment id="17286085" author="jensg" created="Wed, 17 Feb 2021 18:57:15 +0000"  >&lt;p&gt;Thanks, merged. I also merged it to the 0.14.0 branch. is that sufficient or do we really need a full release cycle? In the latter case I would prefer to wait at least two weeks or so just in case any other things need to be fixed as well.&lt;/p&gt;</comment>
                            <comment id="17286093" author="opoplawski" created="Wed, 17 Feb 2021 19:12:05 +0000"  >&lt;p&gt;That&apos;s fine.&#160; I&apos;ll be applying the patch directly to the Fedora thrift package.&#160; Thanks.&lt;/p&gt;</comment>
                            <comment id="17286109" author="fishywang" created="Wed, 17 Feb 2021 19:41:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jensg&quot; class=&quot;user-hover&quot; rel=&quot;jensg&quot;&gt;jensg&lt;/a&gt; I would propose to have a v0.14.1 release to include the fixes of this ticket and also &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-5352&quot; title=&quot;Python: IDL exceptions with no fields can&amp;#39;t be instantiated&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-5352&quot;&gt;&lt;del&gt;THRIFT-5352&lt;/del&gt;&lt;/a&gt;. We can wait for a bit in case other fixes need to be included as well.&lt;/p&gt;</comment>
                            <comment id="17286720" author="jensg" created="Thu, 18 Feb 2021 20:51:51 +0000"  >&lt;p&gt;Sure.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 38 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0np28:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>