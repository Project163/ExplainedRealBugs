<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:11:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-2351] PHP TCompactProtocol has fails to decode messages</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-2351</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;There are two typos in TCompactProtocol::readMessageBegin that prevent correct decoding of any message. They are on consecutive lines:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/thrift/blob/master/lib/php/lib/Thrift/Protocol/TCompactProtocol.php#L390-L391&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/blob/master/lib/php/lib/Thrift/Protocol/TCompactProtocol.php#L390-L391&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;First $seqId does not match case of argument $seqid so this is not set PHP is not case sensitive for class names but IS for variable names.&lt;/p&gt;

&lt;p&gt;Second and more importantly, on the following line $name has the decoded length assigned to it instead of $result. This means the method name &quot;hello&quot; ends up being decoded as &quot;6&quot; (the length of the string plus length prefix) and hence any processor trying to dispatch the event will fail.&lt;/p&gt;

&lt;p&gt;I can submit a patch/pull request but its only 6 chars to change and clearly there are no automated tests for this protocol implementation as that should have been caught before.&lt;/p&gt;

&lt;p&gt;I guess not many other people are using PHP as a thrift service processor with this protocol.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Tested under PHP 5.3 and HHVM latest.&lt;/p&gt;</environment>
        <key id="12693610">THRIFT-2351</key>
            <summary>PHP TCompactProtocol has fails to decode messages</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roger">Roger Meier</assignee>
                                    <reporter username="banks">Paul Banks</reporter>
                        <labels>
                            <label>easyfix</label>
                    </labels>
                <created>Thu, 6 Feb 2014 18:00:17 +0000</created>
                <updated>Mon, 29 Jun 2015 21:32:53 +0000</updated>
                            <resolved>Thu, 10 Jul 2014 13:42:25 +0000</resolved>
                                    <version>0.9.1</version>
                                    <fixVersion>0.9.2</fixVersion>
                                    <component>PHP - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="13896090" author="roger.meier" created="Sun, 9 Feb 2014 22:58:41 +0000"  >&lt;p&gt;please create a patch for this and if possible add a compact protocol test to test/test.sh&lt;br/&gt;
we already have this:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;do_test &quot;php-cpp&quot;  &quot;binary&quot; &quot;buffered-ip&quot; \
        &quot;make -C php/ client&quot; \
        &quot;cpp/TestServer&quot; \
        &quot;10&quot; &quot;10&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;java might be a compact protocol test partner&lt;/p&gt;

&lt;p&gt;thanks!&lt;br/&gt;
;-r&lt;/p&gt;</comment>
                            <comment id="13896783" author="banks" created="Mon, 10 Feb 2014 17:39:59 +0000"  >&lt;p&gt;Patch for above issues.&lt;/p&gt;

&lt;p&gt;I tried to get integration tests to verify this however it seems there are no tests that exercise PHP on the service end and given the trivial nature of this patch I wanted to to submit it without committing several more hours to understand and implement more complete coverage of PHP services in the integration test harness.&lt;/p&gt;

&lt;p&gt;I was interested to see that only Java is currently tested with the compact protocol which seems an odd decision - certainly the documentation and many &quot;comparisons&quot; of thirft vs XXX on the web make a big thing about the compact protocol and give it the appearance of a first class citizen and yet it seems no one ever tried to test it for cross-language RPC?&lt;/p&gt;

&lt;p&gt;Anyway, hopefully you can see from this patch that these are obvious mistakes and typos and should be included even without the extra effort of making integration test runner able to demonstrate the bug.&lt;/p&gt;

&lt;p&gt;Thanks. Let me know if I need to submit this differently.&lt;/p&gt;</comment>
                            <comment id="13898331" author="hudson" created="Tue, 11 Feb 2014 21:24:49 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1043 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1043/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1043/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2351&quot; title=&quot;PHP TCompactProtocol has fails to decode messages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2351&quot;&gt;&lt;del&gt;THRIFT-2351&lt;/del&gt;&lt;/a&gt; PHP TCompactProtocol has fails to decode messages (roger: rev 47b89b9584d224a7e0053768b6c7c954eb42bf33)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/php/lib/Thrift/Protocol/TCompactProtocol.php&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13938832" author="jfarrell" created="Tue, 18 Mar 2014 05:18:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=roger.meier&quot; class=&quot;user-hover&quot; rel=&quot;roger.meier&quot;&gt;roger.meier&lt;/a&gt; anything left on this?&lt;/p&gt;</comment>
                            <comment id="13939741" author="roger.meier" created="Tue, 18 Mar 2014 20:36:17 +0000"  >&lt;p&gt;no test case and &lt;b&gt;make cross&lt;/b&gt; integration, we can close this if you like.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12841459">THRIFT-3211</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12694597">THRIFT-2358</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="12414446">THRIFT-334</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12628011" name="THRIFT-2351-fix-php-compact-decoding.patch" size="641" author="banks" created="Mon, 10 Feb 2014 17:39:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>372195</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 36 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1s56v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>372500</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>