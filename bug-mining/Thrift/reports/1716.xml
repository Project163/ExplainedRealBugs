<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:26:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-4026] TSSLSocket doesn&apos;t work with Python &lt; 2.7.9</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-4026</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;As a result of a change made in &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3917&quot; title=&quot;Check backports.ssl_match_hostname module version&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3917&quot;&gt;&lt;del&gt;THRIFT-3917&lt;/del&gt;&lt;/a&gt;, &lt;tt&gt;TSSLSocket&lt;/tt&gt; now fails with a &lt;tt&gt;TypeError&lt;/tt&gt; in &lt;tt&gt;open()&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/bld/thrift/Artools-rpmbuild/thrift-0.10.0/lib/py/build/lib.linux-i686-2.7/thrift/transport/TSSLSocket.py&quot;&lt;/span&gt;, line 293, in open
    self._validate_callback(self.peercert, self._server_hostname)
TypeError: legacy_validate_callback() takes exactly 3 arguments (2 given)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Indeed, &lt;tt&gt;legacy_validate_callback()&lt;/tt&gt; takes an extra &lt;tt&gt;self&lt;/tt&gt; argument, which cannot possibly be compatible with the signature of &lt;a href=&quot;https://docs.python.org/3/library/ssl.html#ssl.match_hostname&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;ssl.match_hostname()&lt;/tt&gt;&lt;/a&gt; (which was added in Python 3.2).&lt;/p&gt;</description>
                <environment>&lt;p&gt;Python 2.7.5&lt;/p&gt;</environment>
        <key id="13033594">THRIFT-4026</key>
            <summary>TSSLSocket doesn&apos;t work with Python &lt; 2.7.9</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nsuke">Nobuaki Sukegawa</assignee>
                                    <reporter username="tsuna">Benoit Sigoure</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Jan 2017 05:01:34 +0000</created>
                <updated>Thu, 14 Dec 2017 13:55:36 +0000</updated>
                            <resolved>Sat, 28 Oct 2017 13:06:21 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.11.0</fixVersion>
                                    <component>Python - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15817193" author="tsuna" created="Wed, 11 Jan 2017 05:04:50 +0000"  >&lt;p&gt;Also after fixing this, you&apos;ll have to fix &lt;tt&gt;test_client_cert&lt;/tt&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;======================================================================
ERROR: test_client_cert (__main__.TSSLSocketTest)                                                                      
----------------------------------------------------------------------                                                 
Traceback (most recent call last):
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;test/test_sslsocket.py&quot;&lt;/span&gt;, line 242, in test_client_cert                                                         
    certfile=SERVER_CERT, ca_certs=CLIENT_CERT)
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;test/test_sslsocket.py&quot;&lt;/span&gt;, line 115, in _server_socket                                                           
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; TSSLServerSocket(port=0, **kwargs)                                                                          
  File &lt;span class=&quot;code-quote&quot;&gt;&quot;/bld/thrift/Artools-rpmbuild/thrift-0.10.0/lib/py/build/lib.linux-i686-2.7/thrift/transport/TSSLSocket.py&quot;&lt;/span&gt;, line 349, in __init__
    raise ValueError(&lt;span class=&quot;code-quote&quot;&gt;&apos;Need ipaddress and backports.ssl_match_hostname &apos;&lt;/span&gt;                                                
ValueError: Need ipaddress and backports.ssl_match_hostname module to verify client certificate                        
        
----------------------------------------------------------------------                                                 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15843901" author="nsuke" created="Sat, 28 Jan 2017 05:57:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tsuna&quot; class=&quot;user-hover&quot; rel=&quot;tsuna&quot;&gt;tsuna&lt;/a&gt; thanks, it seems indeed a bug.&lt;/p&gt;

&lt;p&gt;For anyone who wants to workaround this without managing local patch/fork or upgrading to python &amp;gt;= 2.7.9,&lt;br/&gt;
a recommended workaround is to install backports.ssl_match_hostname package.&lt;/p&gt;</comment>
                            <comment id="15844006" author="githubbot" created="Sat, 28 Jan 2017 09:56:50 +0000"  >&lt;p&gt;GitHub user nsuke opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1166&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4026&quot; title=&quot;TSSLSocket doesn&amp;#39;t work with Python &amp;lt; 2.7.9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4026&quot;&gt;&lt;del&gt;THRIFT-4026&lt;/del&gt;&lt;/a&gt; TSSLSocket doesn&apos;t work with Python &amp;lt; 2.7.9&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/nsuke/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nsuke/thrift&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4026&quot; title=&quot;TSSLSocket doesn&amp;#39;t work with Python &amp;lt; 2.7.9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4026&quot;&gt;&lt;del&gt;THRIFT-4026&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1166.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1166.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1166&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit a348099d80a331a81e7f224cf8299933517e9895&lt;br/&gt;
Author: Nobuaki Sukegawa &amp;lt;nsukeg@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-01-28T09:53:01Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4026&quot; title=&quot;TSSLSocket doesn&amp;#39;t work with Python &amp;lt; 2.7.9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4026&quot;&gt;&lt;del&gt;THRIFT-4026&lt;/del&gt;&lt;/a&gt; TSSLSocket doesn&apos;t work with Python &amp;lt; 2.7.9&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15844158" author="githubbot" created="Sat, 28 Jan 2017 18:59:40 +0000"  >&lt;p&gt;Github user jeking3 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1166&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Build job 17 has been failing due to a haskell issue fairly regularly.  I don&apos;t know how to fix it, but if we can clear it out it would be nice. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15844159" author="githubbot" created="Sat, 28 Jan 2017 19:00:42 +0000"  >&lt;p&gt;Github user jeking3 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1166#discussion_r98337162&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1166#discussion_r98337162&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: build/docker/centos6/Dockerfile &amp;#8212;&lt;br/&gt;
    @@ -41,7 +41,9 @@ RUN yum install -y epel-release &amp;amp;&amp;amp; \&lt;br/&gt;
         &amp;amp;&amp;amp; yum clean all&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;optional dependencies&lt;br/&gt;
    -RUN pip install ipaddress backports.ssl_match_hostname tornado&lt;br/&gt;
    +# skipping ipaddress and backports.ssl_match_hostname to test legacy callback&lt;br/&gt;
    +# RUN pip install ipaddress backports.ssl_match_hostname tornado&lt;br/&gt;
    +RUN pip install tornado
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    Does the ubuntu docker build need to be modified to match?&lt;/p&gt;</comment>
                            <comment id="15844172" author="githubbot" created="Sat, 28 Jan 2017 19:28:04 +0000"  >&lt;p&gt;Github user tsuna commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1166&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    LGTM, thanks for the fix!&lt;/p&gt;</comment>
                            <comment id="15844194" author="githubbot" created="Sat, 28 Jan 2017 21:08:21 +0000"  >&lt;p&gt;Github user jeking3 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1166&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I fixed the build job #17 issue with &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4044&quot; title=&quot;Build job 17 failing on every pull request; hspec core (haskell) 2.4 issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4044&quot;&gt;&lt;del&gt;THRIFT-4044&lt;/del&gt;&lt;/a&gt; so you can merge this or rebase to get a clean build first.&lt;/p&gt;</comment>
                            <comment id="15854464" author="jking3" created="Mon, 6 Feb 2017 18:05:04 +0000"  >&lt;p&gt;Please rebase on master and push another update so we can get a clean CI build.&lt;/p&gt;</comment>
                            <comment id="15862764" author="githubbot" created="Sun, 12 Feb 2017 12:17:25 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1166&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15862765" author="nsuke" created="Sun, 12 Feb 2017 12:19:56 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                            <comment id="15931355" author="jbapple" created="Sat, 18 Mar 2017 19:45:08 +0000"  >&lt;p&gt;I&apos;m still getting the error &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tsuna&quot; class=&quot;user-hover&quot; rel=&quot;tsuna&quot;&gt;tsuna&lt;/a&gt; mentioned above, ending in &lt;tt&gt;ValueError: Need ipaddress and backports.ssl_match_hostname module to verify client certificate&lt;/tt&gt;. This is at commit 6582757752e62efea3f9786dddf0260efaa1f450, Python 2.7.6.&lt;/p&gt;</comment>
                            <comment id="15931383" author="jbapple" created="Sat, 18 Mar 2017 20:32:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jensg&quot; class=&quot;user-hover&quot; rel=&quot;jensg&quot;&gt;jensg&lt;/a&gt;, would you also be willing to Reopen this one?&lt;/p&gt;</comment>
                            <comment id="15931464" author="jking3" created="Sat, 18 Mar 2017 23:23:39 +0000"  >&lt;p&gt;I&apos;ll reopen this for now, someone needs to identify the root cause.&lt;/p&gt;</comment>
                            <comment id="15931518" author="nsuke" created="Sun, 19 Mar 2017 01:13:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbapple&quot; class=&quot;user-hover&quot; rel=&quot;jbapple&quot;&gt;jbapple&lt;/a&gt; are you verifying client certificates on server side ?&lt;br/&gt;
In that case, it is more of a problem of the error message and documentation.&lt;br/&gt;
On older versions of Python, you &quot;Need ipaddress and backports.ssl_match_hostname module to verify client certificate.&quot;&lt;br/&gt;
IOW you need to install the two packages, e.g., using PIP.&lt;/p&gt;</comment>
                            <comment id="15931525" author="jbapple" created="Sun, 19 Mar 2017 01:45:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nsuke&quot; class=&quot;user-hover&quot; rel=&quot;nsuke&quot;&gt;nsuke&lt;/a&gt;, I am running &lt;tt&gt;make check&lt;/tt&gt;. I already have both packages installed with pip.&lt;/p&gt;</comment>
                            <comment id="15931531" author="nsuke" created="Sun, 19 Mar 2017 02:08:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbapple&quot; class=&quot;user-hover&quot; rel=&quot;jbapple&quot;&gt;jbapple&lt;/a&gt; In our CI job #8, we&apos;re running make check on Python 2.7.6 with these two packages.&lt;br/&gt;
Does &lt;tt&gt;import ipaddress&lt;/tt&gt; and &lt;tt&gt;import backports.ssl_match_hostname&lt;/tt&gt; work on your environment ?&lt;/p&gt;</comment>
                            <comment id="15931533" author="jbapple" created="Sun, 19 Mar 2017 02:10:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nsuke&quot; class=&quot;user-hover&quot; rel=&quot;nsuke&quot;&gt;nsuke&lt;/a&gt; Yes.&lt;/p&gt;</comment>
                            <comment id="16178066" author="jking3" created="Sun, 24 Sep 2017 03:39:47 +0000"  >&lt;p&gt;Current CI job uses Python 2.7.12.&lt;/p&gt;</comment>
                            <comment id="16223487" author="jking3" created="Sat, 28 Oct 2017 13:06:21 +0000"  >&lt;p&gt;I am able to run the lib/py unit tests which includes ssl socket tests in Python 2.7.6&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;/usr/bin/python test/test_sslsocket.py
...skipping test_newer_tls
.....PROTOCOL_SSLv2 is not available
.skipping test_ssl_context
..
----------------------------------------------------------------------
Ran 11 tests in 0.229s

OK
root@caf6c22742ec:/thrift/src/lib/py# python --version
Python 2.7.6
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Therefore resolving again.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 3 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i38j87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>