<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:16:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3086] C++ Valgrind Error Cleanup</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3086</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;valgrind identified a few issues in the C++ library:&lt;/p&gt;

&lt;p&gt;1. In TFileTransport, inconsistent use of malloc then delete[]&lt;br/&gt;
2. In ZLibTest, leaking allocations&lt;br/&gt;
3. In RecursiveTest, leaking allocation&lt;/p&gt;

&lt;p&gt;These are minor, but a clean valgrind run is a happy valgrind run.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12818779">THRIFT-3086</key>
            <summary>C++ Valgrind Error Cleanup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jking3">James E. King III</assignee>
                                    <reporter username="jking3">James E. King III</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Apr 2015 01:36:31 +0000</created>
                <updated>Tue, 21 Jul 2015 02:21:14 +0000</updated>
                            <resolved>Sat, 9 May 2015 21:42:48 +0000</resolved>
                                    <version>0.9.2</version>
                                    <fixVersion>0.9.3</fixVersion>
                                    <component>C++ - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14482381" author="githubbot" created="Tue, 7 Apr 2015 01:38:31 +0000"  >&lt;p&gt;GitHub user jeking3 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/429&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/429&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3086&quot; title=&quot;C++ Valgrind Error Cleanup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3086&quot;&gt;&lt;del&gt;THRIFT-3086&lt;/del&gt;&lt;/a&gt; fix a few minor valgrind identified issues&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jeking3/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jeking3/thrift&lt;/a&gt; bugfix/&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3086&quot; title=&quot;C++ Valgrind Error Cleanup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3086&quot;&gt;&lt;del&gt;THRIFT-3086&lt;/del&gt;&lt;/a&gt;-minor-valgrind-issues&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/429.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/429.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #429&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 86889762402795b78e4c1c9381d5b699e74c5fae&lt;br/&gt;
Author: Jim King &amp;lt;jim.king@simplivity.com&amp;gt;&lt;br/&gt;
Date:   2015-04-07T01:38:06Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3086&quot; title=&quot;C++ Valgrind Error Cleanup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3086&quot;&gt;&lt;del&gt;THRIFT-3086&lt;/del&gt;&lt;/a&gt; fix a few minor valgrind identified issues&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14483797" author="githubbot" created="Tue, 7 Apr 2015 18:57:05 +0000"  >&lt;p&gt;Github user bufferoverflow commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/429#issuecomment-90697644&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/429#issuecomment-90697644&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @jeking3 please do not use square brackets [] around the thrift issue identifer, this will be removed when I use git am toi apply the patch.&lt;/p&gt;</comment>
                            <comment id="14483989" author="roger.meier" created="Tue, 7 Apr 2015 20:26:45 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                            <comment id="14483998" author="hudson" created="Tue, 7 Apr 2015 20:31:26 +0000"  >&lt;p&gt;FAILURE: Integrated in Thrift #1494 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1494/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1494/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3086&quot; title=&quot;C++ Valgrind Error Cleanup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3086&quot;&gt;&lt;del&gt;THRIFT-3086&lt;/del&gt;&lt;/a&gt; fix a few minor valgrind identified issues (roger: rev 7848d887e010ad0abb8a6e5857a41108ee6455b7)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/cpp/test/RecursiveTest.cpp&lt;/li&gt;
	&lt;li&gt;lib/cpp/test/ZlibTest.cpp&lt;/li&gt;
	&lt;li&gt;lib/cpp/src/thrift/transport/TFileTransport.cpp&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14484147" author="githubbot" created="Tue, 7 Apr 2015 21:49:56 +0000"  >&lt;p&gt;Github user jeking3 commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/429#issuecomment-90742753&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/429#issuecomment-90742753&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @bufferoverflow Thanks for the heads up, if that is in the process documentation for submitting requests I missed it.  I&apos;ll remove the brackets in my pull requests.&lt;/p&gt;</comment>
                            <comment id="14484154" author="jking3" created="Tue, 7 Apr 2015 21:52:42 +0000"  >&lt;p&gt;Should I stop using brackets in the commit message or the pull request title or both?&lt;br/&gt;
Also, the build failed for reasons that look unrelated to the changes.&lt;/p&gt;</comment>
                            <comment id="14484211" author="roger.meier" created="Tue, 7 Apr 2015 22:22:13 +0000"  >&lt;p&gt;Thanks for the fixes Jim!&lt;/p&gt;

&lt;p&gt;Yes, please stop using brackets for the commit and PR title, it confused &lt;em&gt;asfgit robot&lt;/em&gt; and &lt;em&gt;git am&lt;/em&gt;.&lt;br/&gt;
I&apos;ve just updated CONTRIBUTING.md with details on commit messages and branch names.&lt;/p&gt;

&lt;p&gt;-roger&lt;br/&gt;
;-r&lt;/p&gt;

&lt;p&gt;PS: I think Valgrind&apos;s memcheck, helgrind, cppcheck, strong compiler warnings, multiple compilers and of course unit tests are sufficient for the moment.&lt;br/&gt;
There is no real need for coverity from my perspective. The only interesting question is, do they a better job as the community driven QA tools?&lt;br/&gt;
... another todo: add memcheck and helgrind to CMake build and .travis.yml&lt;/p&gt;</comment>
                            <comment id="14485101" author="jking3" created="Wed, 8 Apr 2015 11:32:27 +0000"  >&lt;p&gt;Coverity catches things other analysis tools will not; I recently ran coverity on the libc sources because I am looking for a file descriptor misuse issue and it found all sorts of resource leaks, use after free, etc.. over 250 high severity and 500 total issues in all - because Coverity examines everything together and checks all the possible combinations of branch execution.  I haven&apos;t seen tools like cppcheck get anywhere near that, and valgrind only checks what executes, not the potential error cases.  So I would highly recommend we try and get a recent Coverity Scan on the codebase and then keep it refreshed regularly.  I&apos;m trying to get the glibc maintainers to do the same on the latest glibc to improve the quality of something practically everything uses.&lt;/p&gt;

&lt;p&gt;On valgrind memcheck, you will need to limit it to the C++ library, as the glib/gobject implementation in c_glib/ is practically untestable with a memory checker.  I tried for a day to get rid of the issues by setting G_DEBUG and other flags to force it to use malloc rather than the built-in slice allocator but I could not; there is no global function I could find that would shutdown and garbage collect everything before exiting, so there were always a ton of leaks.&lt;/p&gt;</comment>
                            <comment id="14485348" author="roger.meier" created="Wed, 8 Apr 2015 14:59:51 +0000"  >&lt;p&gt;As soon as we fixed the issues detected by using the Open source tools we can work on integrating Coverity into regular builds via travis.&lt;br/&gt;
I have nothing against coverity, just think that we still have many other things to fix first and cppcheck, memcheck are good partners to do so.&lt;/p&gt;</comment>
                            <comment id="14486000" author="jking3" created="Wed, 8 Apr 2015 20:50:22 +0000"  >&lt;p&gt;I&apos;m not sure if running coverity on every pull request is feasible time-wise, but we should run it once in a while...&lt;/p&gt;</comment>
                            <comment id="14487617" author="githubbot" created="Thu, 9 Apr 2015 16:29:26 +0000"  >&lt;p&gt;Github user jeking3 commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/429#issuecomment-91282080&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/429#issuecomment-91282080&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The code has been merged so I am closing the pull request.&lt;/p&gt;</comment>
                            <comment id="14487618" author="githubbot" created="Thu, 9 Apr 2015 16:29:26 +0000"  >&lt;p&gt;Github user jeking3 closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/429&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/429&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14530635" author="jking3" created="Wed, 6 May 2015 14:34:05 +0000"  >&lt;p&gt;I&apos;m reopening this to get pull request &lt;a href=&quot;https://github.com/apache/thrift/pull/481&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/481&lt;/a&gt; merged in as part of it.  I added a valgrind exclusion file that quiets the boost thread once allocation that boost claims is valid, and that valgrind checks before it is deleted.  We also now have a vehicle for adding other exclusions if we want.&lt;/p&gt;</comment>
                            <comment id="14536475" author="jking3" created="Sat, 9 May 2015 12:04:22 +0000"  >&lt;p&gt;Waiting for the pull request to be merged so I can &lt;span class=&quot;error&quot;&gt;&amp;#91;re-&amp;#93;&lt;/span&gt;reoslve this.&lt;/p&gt;</comment>
                            <comment id="14536909" author="githubbot" created="Sat, 9 May 2015 21:42:23 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/481&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/481&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14536910" author="roger.meier" created="Sat, 9 May 2015 21:42:48 +0000"  >&lt;p&gt;just committed the valgrind stuff!&lt;/p&gt;

&lt;p&gt;thanks&lt;br/&gt;
-roger&lt;/p&gt;</comment>
                            <comment id="14536929" author="hudson" created="Sat, 9 May 2015 22:25:11 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1540 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1540/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1540/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3086&quot; title=&quot;C++ Valgrind Error Cleanup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3086&quot;&gt;&lt;del&gt;THRIFT-3086&lt;/del&gt;&lt;/a&gt; add valgrind suppression support to the ExperimentalMemCheck test run (roger: rev 446a319f9a26695fb06b725a4959f28c82b558c0)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;build/cmake/DefinePlatformSpecifc.cmake&lt;/li&gt;
	&lt;li&gt;test/valgrind.suppress&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 28 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2cvtb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>