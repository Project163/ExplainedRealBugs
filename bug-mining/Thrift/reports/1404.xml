<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:21:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3413] Thrift code generation bug in Go when extending service</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3413</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;Given the following 2 thrift simple thrift files&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;base.thrift&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
namespace go base

&lt;span class=&quot;code-comment&quot;&gt;/** Common context &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; a request containing information about the requester. */&lt;/span&gt;
struct RequestContext {
    &lt;span class=&quot;code-comment&quot;&gt;/** ID */&lt;/span&gt;
    1:required i64 ID
}

exception WError {
    &lt;span class=&quot;code-comment&quot;&gt;/** Identifying code &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the error */&lt;/span&gt;
    1:i64 code,

    &lt;span class=&quot;code-comment&quot;&gt;/** Descriptive error message */&lt;/span&gt;
    2:string message,
}

service BaseService {
    &lt;span class=&quot;code-comment&quot;&gt;/** A simple ping to see &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the service is alive */&lt;/span&gt;
    void ping() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; (1:WError err)
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;



&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;extended.thrift&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
namespace go extended

include &lt;span class=&quot;code-quote&quot;&gt;&quot;base.thrift&quot;&lt;/span&gt;

struct Extended {
    1:required i64 ID
}

service ExtendedService &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; base.BaseService{
    /**
    Creates the requested Translation. Returns the representation of the
    created Translation with a generated ID and the userId attached.
    */
    Extended createExtended(1:base.RequestContext rc, 2:Extended ex) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; (1:base.WError err)
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is a very simple service extending another service.  When using thrift (0.9.3, 1.0.0-dev both tested), there is an generation problem that requires fixing by hand.&lt;/p&gt;


&lt;p&gt;Running this for generation&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;thrift -r -gen go:package_prefix=github.com/myrepo/gen-go/ extended.thrift
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;if I then change directories and run a go build, I get the following error. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$&amp;gt; cd gen-go/extended/extended_service-remote
$&amp;gt; go build
# github.com/myrepo/gen-go/extended/extended_service-remote
./extended_service-remote.go:134: undefined: extended.NewRequestContext
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is easily reproducible with these steps. &lt;/p&gt;
</description>
                <environment></environment>
        <key id="12911707">THRIFT-3413</key>
            <summary>Thrift code generation bug in Go when extending service</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jensg">Jens Geyer</assignee>
                                    <reporter username="ryanseltzer">Ryan Seltzer</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Nov 2015 23:36:08 +0000</created>
                <updated>Fri, 18 Mar 2016 17:54:29 +0000</updated>
                            <resolved>Fri, 18 Mar 2016 17:54:29 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14999520" author="jensg" created="Tue, 10 Nov 2015 22:56:07 +0000"  >&lt;p&gt;The attached files &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12771646/12771646_base.thrift&quot; title=&quot;base.thrift attached to THRIFT-3413&quot;&gt;base.thrift&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; and &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12771647/12771647_extended.thrift&quot; title=&quot;extended.thrift attached to THRIFT-3413&quot;&gt;extended.thrift&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; are enriched test cases, as there are some more issues. &lt;/p&gt;</comment>
                            <comment id="14999679" author="jensg" created="Wed, 11 Nov 2015 00:34:18 +0000"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                            <comment id="14999751" author="hudson" created="Wed, 11 Nov 2015 01:18:32 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1720 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1720/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1720/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3413&quot; title=&quot;Thrift code generation bug in Go when extending service&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3413&quot;&gt;&lt;del&gt;THRIFT-3413&lt;/del&gt;&lt;/a&gt; Thrift code generation bug in Go when extending service (jensg: rev 86284da8495bcaeca9d9632374ada63cbf388ead)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;compiler/cpp/src/generate/t_go_generator.cc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15036459" author="jensg" created="Wed, 2 Dec 2015 19:41:19 +0000"  >&lt;p&gt;Not fixed. There are still problems which need to be addressed properly.&lt;/p&gt;</comment>
                            <comment id="15036519" author="jensg" created="Wed, 2 Dec 2015 20:12:32 +0000"  >&lt;p&gt;Fixed &amp;amp; committed.&lt;/p&gt;</comment>
                            <comment id="15036577" author="hudson" created="Wed, 2 Dec 2015 20:48:53 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1753 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1753/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1753/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3413&quot; title=&quot;Thrift code generation bug in Go when extending service&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3413&quot;&gt;&lt;del&gt;THRIFT-3413&lt;/del&gt;&lt;/a&gt; Thrift code generation bug in Go when extending service (jensg: rev 3aa617a48341341feb767280eb87da6ea3d05417)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;compiler/cpp/src/generate/t_go_generator.cc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12910512">THRIFT-3411</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12829781">THRIFT-3149</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12775378" name="THRIFT-3413-Thrift-code-generation-bug-in-Go-when-ex.patch" size="2992" author="jensg" created="Wed, 2 Dec 2015 20:12:03 +0000"/>
                            <attachment id="12771661" name="THRIFT-3413-Thrift-code-generation-bug-in-Go-when-ex.patch" size="7324" author="jensg" created="Wed, 11 Nov 2015 00:32:04 +0000"/>
                            <attachment id="12771646" name="base.thrift" size="523" author="jensg" created="Tue, 10 Nov 2015 22:56:07 +0000"/>
                            <attachment id="12771647" name="extended.thrift" size="522" author="jensg" created="Tue, 10 Nov 2015 22:56:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2o62v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>