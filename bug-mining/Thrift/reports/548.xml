<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:04:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-1461] Recent TNonblockingServer changes broke --enable-boostthreads=yes, Windows</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-1461</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;Following the (nice) improvements for TNonblockingServer in &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1442&quot; title=&quot;TNonblockingServer: Refactor to allow multiple IO Threads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1442&quot;&gt;&lt;del&gt;THRIFT-1442&lt;/del&gt;&lt;/a&gt;, this patch restores both --enable-boostthreads=yes, and the Windows build.&lt;/p&gt;

&lt;p&gt;Included in this patch:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add more HAVE_CONFIG_H includes&lt;/li&gt;
	&lt;li&gt;Replace PosixThreadFactory  by PlatformThreadFactory where appropriate&lt;/li&gt;
	&lt;li&gt;Abstract away pthread vs boost::thread inside Thread.h, adding new methods is_current/get_current&lt;/li&gt;
	&lt;li&gt;Renamed INVALID_SOCKET, caused compilation problems on Windows (already defined in WinSock2.h)&lt;/li&gt;
	&lt;li&gt;Restore back more portable evutil_socketpair (in place of pipe, for Windows)&lt;/li&gt;
	&lt;li&gt;Add evutil_make_socket_nonblocking (as of &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1442&quot; title=&quot;TNonblockingServer: Refactor to allow multiple IO Threads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1442&quot;&gt;&lt;del&gt;THRIFT-1442&lt;/del&gt;&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Also included (minor):&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add x64 target to VisualC++ compiler&lt;/li&gt;
	&lt;li&gt;Fix minor glitch in bison/compiler for VisualC++&lt;/li&gt;
	&lt;li&gt;Remove more VisualC++ warnings&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This was tested on Ubuntu 10.10, Boost 1.44, Libevent 2.0.16, Visual C++ 10.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux, Windows&lt;/p&gt;</environment>
        <key id="12534761">THRIFT-1461</key>
            <summary>Recent TNonblockingServer changes broke --enable-boostthreads=yes, Windows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aubonbeurre">alexandre parenteau</assignee>
                                    <reporter username="aubonbeurre">alexandre parenteau</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Mon, 12 Dec 2011 10:32:53 +0000</created>
                <updated>Tue, 17 Jan 2012 14:30:58 +0000</updated>
                            <resolved>Tue, 17 Jan 2012 14:30:58 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>0.9</fixVersion>
                                    <component>C++ - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="13167722" author="roger.meier" created="Mon, 12 Dec 2011 19:52:23 +0000"  >&lt;p&gt;patch looks good, but I have an issue with the libevent version... Debian Squeeze still uses 1.4.13&lt;/p&gt;

&lt;p&gt;It seems that evutil_make_socket_closeonexec is not available. Do you have an alternative?&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../.. -I/usr/include -I./src -Wall -std=c++0x -MT libthriftnb_la-TNonblockingServer.lo -MD -MP -MF .deps/libthriftnb_la-TNonblockingServer.Tpo -c src/server/TNonblockingServer.cpp  -fPIC -DPIC -o .libs/libthriftnb_la-TNonblockingServer.o
src/server/TNonblockingServer.cpp: In member function &apos;void apache::thrift::server::TNonblockingIOThread::createNotificationPipe()&apos;:
src/server/TNonblockingServer.cpp:1300: error: &apos;evutil_make_socket_closeonexec&apos; was not declared in this scope
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13168155" author="aubonbeurre" created="Tue, 13 Dec 2011 06:16:50 +0000"  >&lt;p&gt;@Roger: sorry for this, I overlooked when using libevent 1. I added a ifdef libevent for that effect. Hopefully this will be short-lived, as I noted all debian are moving toward libevent 2, which is part of upcoming wheezy for example, and already in ubuntu &amp;gt;= 11.10. Thanks.&lt;/p&gt;</comment>
                            <comment id="13169807" author="roger.meier" created="Wed, 14 Dec 2011 23:35:24 +0000"  >&lt;p&gt;Thanks Alexandre!&lt;br/&gt;
committed the patch with an additional ifdef within Thread.h&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;#ifdef HAVE_CONFIG_H
#include &amp;lt;config.h&amp;gt;
#endif
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13169880" author="hudson" created="Thu, 15 Dec 2011 00:34:21 +0000"  >&lt;p&gt;Integrated in Thrift #368 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/368/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/368/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1461&quot; title=&quot;Recent TNonblockingServer changes broke --enable-boostthreads=yes, Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1461&quot;&gt;&lt;del&gt;THRIFT-1461&lt;/del&gt;&lt;/a&gt; Recent TNonblockingServer changes broke --enable-boostthreads=yes, Windows&lt;br/&gt;
Patch: Alexandre Parenteau&lt;/p&gt;

&lt;p&gt;roger : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1214547&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1214547&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/thrift/trunk/compiler/cpp/compiler.vcxproj&lt;/li&gt;
	&lt;li&gt;/thrift/trunk/compiler/cpp/src/thrifty.yy&lt;/li&gt;
	&lt;li&gt;/thrift/trunk/configure.ac&lt;/li&gt;
	&lt;li&gt;/thrift/trunk/lib/cpp/src/concurrency/PlatformThreadFactory.h&lt;/li&gt;
	&lt;li&gt;/thrift/trunk/lib/cpp/src/concurrency/PosixThreadFactory.cpp&lt;/li&gt;
	&lt;li&gt;/thrift/trunk/lib/cpp/src/concurrency/Thread.h&lt;/li&gt;
	&lt;li&gt;/thrift/trunk/lib/cpp/src/concurrency/ThreadManager.cpp&lt;/li&gt;
	&lt;li&gt;/thrift/trunk/lib/cpp/src/server/TNonblockingServer.cpp&lt;/li&gt;
	&lt;li&gt;/thrift/trunk/lib/cpp/src/server/TNonblockingServer.h&lt;/li&gt;
	&lt;li&gt;/thrift/trunk/lib/cpp/src/server/TThreadPoolServer.cpp&lt;/li&gt;
	&lt;li&gt;/thrift/trunk/lib/cpp/src/windows/config.h&lt;/li&gt;
	&lt;li&gt;/thrift/trunk/lib/cpp/test/Makefile.am&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13187286" author="jfarrell" created="Mon, 16 Jan 2012 23:00:43 +0000"  >&lt;p&gt;Patch breaks build as seen in &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1488&quot; title=&quot;src/concurrency/Thread.h:91:58: error: invalid conversion from &amp;#39;pthread_t {aka _opaque_pthread_t*}&amp;#39; to &amp;#39;apache::thrift::concurrency::Thread::id_t {aka long long unsigned int}&amp;#39; [-fpermissive]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1488&quot;&gt;&lt;del&gt;THRIFT-1488&lt;/del&gt;&lt;/a&gt;, reverting this results in successful build again. reopening ticket for further investigation &lt;/p&gt;</comment>
                            <comment id="13187717" author="jfarrell" created="Tue, 17 Jan 2012 14:30:58 +0000"  >&lt;p&gt;Added a cast to get_current() in Thrift-1488. Was using libevent 1.4.x, required an upgrade to latest stable 2.x version.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12507136" name="THRIFT-1461-2.txt" size="21007" author="aubonbeurre" created="Tue, 13 Dec 2011 06:16:50 +0000"/>
                            <attachment id="12506987" name="THRIFT_1461.patch" size="20934" author="aubonbeurre" created="Mon, 12 Dec 2011 10:33:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>220445</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 45 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i083uf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>45222</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>