<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:56:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-551] Enumeration doesn&apos;t generate real enum in Java</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-551</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;When a enum is specified in the interface file, the code that is generated for Java just creates a empty class with a list of static integer constants, a list of valid values, and a map of values to names.  It would be better if the enum is created instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12431538">THRIFT-551</key>
            <summary>Enumeration doesn&apos;t generate real enum in Java</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bryanduxbury">Bryan Duxbury</assignee>
                                    <reporter username="sammy.yu">Sammy Yu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Jul 2009 21:09:57 +0000</created>
                <updated>Tue, 1 Nov 2011 02:52:26 +0000</updated>
                            <resolved>Thu, 19 Nov 2009 18:30:00 +0000</resolved>
                                                    <fixVersion>0.2</fixVersion>
                                    <component>Java - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="12736846" author="bryanduxbury" created="Wed, 29 Jul 2009 21:16:44 +0000"  >&lt;p&gt;It looks like this would indeed be a very cool change to make. However it would be a pretty substantial breaking change to existing generated code. What do people think? Should we do this?&lt;/p&gt;</comment>
                            <comment id="12738182" author="jarski" created="Mon, 3 Aug 2009 03:55:26 +0000"  >&lt;p&gt;This would indeed be very helpful now that java enums are in common use... I&apos;ve been wanting to experiment with doing this for a while but not got around to it. However, it is a substantial breaking change &amp;#8211;  perhaps it could be made user selectable, so that people who want to stick with the old int-based enum values can do so? &lt;/p&gt;

&lt;p&gt;One other consideration: People may now be relying on persisted int enum values, so it&apos;d be necessary to be able to keep the associated int. One way to bridge that is to keep the same int values associated with the enums if people could be made into properties of the enum definitions, e.g. &lt;/p&gt;

&lt;p&gt;public class MyEnum {&lt;br/&gt;
  public static final int X = 0;&lt;br/&gt;
  public static final int Y = 100;  // skipped a few to show that they don&apos;t have to be all there&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;becomes&lt;/p&gt;

&lt;p&gt;public enum MyEnum {&lt;br/&gt;
  X (0),&lt;br/&gt;
  Y (100);&lt;br/&gt;
  public final int value;&lt;br/&gt;
  private MyEnum(int value) &lt;/p&gt;
{ this.value = value; }
&lt;p&gt;  public static MyEnum fromIntValue(int X) &lt;/p&gt;
{ // iterate through and pick }
&lt;p&gt;;&lt;br/&gt;
}&lt;/p&gt;
</comment>
                            <comment id="12741920" author="mccv" created="Tue, 11 Aug 2009 15:58:04 +0000"  >&lt;p&gt;I&apos;d like to see this added.  The generated thrift Java interfaces aren&apos;t really clear that some ints are actually enums.  Maybe add it is an optional flag?&lt;/p&gt;</comment>
                            <comment id="12777678" author="bryanduxbury" created="Fri, 13 Nov 2009 21:42:57 +0000"  >&lt;p&gt;Here&apos;s the first draft of this functionality. I had heavy assistance from Mohammad Shahangian on this one. &lt;/p&gt;

&lt;p&gt;I&apos;d love some review of the changes.&lt;/p&gt;</comment>
                            <comment id="12777696" author="herberts" created="Fri, 13 Nov 2009 22:23:49 +0000"  >&lt;p&gt;Won&apos;t the ENUM=16 in class TType break TCompactProtocol which encodes field id deltas (if field id is less than 16 apart from previous field id) as upper 4 bits (with lower 4 bits being field type)?&lt;/p&gt;</comment>
                            <comment id="12777701" author="bryanduxbury" created="Fri, 13 Nov 2009 22:34:52 +0000"  >&lt;p&gt;Compact Protocol uses its own internal enumeration for encoding types on the wire. The ENUM addition to TType is essentially just for the metaDataMap changes.&lt;/p&gt;</comment>
                            <comment id="12778660" author="bryanduxbury" created="Tue, 17 Nov 2009 00:06:59 +0000"  >&lt;p&gt;Anyone else had any thoughts on this patch? I&apos;d love to get it committed, and I&apos;m guessing there&apos;s &lt;b&gt;something&lt;/b&gt; in there that could bear improvement.&lt;/p&gt;</comment>
                            <comment id="12779283" author="dreiss" created="Wed, 18 Nov 2009 04:06:43 +0000"  >&lt;p&gt;Eventually, it might make sense to split TType into one enum that is used internally for type tags and another one that is used for the metaDataMap for application code consumption.  Overloading the one enum seems a little dangerous.&lt;/p&gt;</comment>
                            <comment id="12779298" author="bryanduxbury" created="Wed, 18 Nov 2009 05:02:47 +0000"  >&lt;p&gt;I agree with David. I don&apos;t know if now is that time, though. I suggest we open another ticket for that purpose.&lt;/p&gt;</comment>
                            <comment id="12779316" author="dreiss" created="Wed, 18 Nov 2009 05:58:57 +0000"  >&lt;p&gt;Well, given that this appears to be the first case where we are putting a value in there that doesn&apos;t correspond to a wire value, it might be the time. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  I&apos;m okay with delaying it, though, since there isn&apos;t much of a cost.  There is some unused junk in the C++ version that has never caused any headaches.&lt;/p&gt;</comment>
                            <comment id="12779666" author="mohammad.shahangian" created="Wed, 18 Nov 2009 21:09:32 +0000"  >&lt;p&gt;Bryan, I reviewed the final patch and it looks good to me.&lt;/p&gt;</comment>
                            <comment id="12779732" author="bryanduxbury" created="Wed, 18 Nov 2009 23:34:54 +0000"  >&lt;p&gt;OK, assuming no one objects, I am going to commit this tonight.&lt;/p&gt;</comment>
                            <comment id="12780189" author="bryanduxbury" created="Thu, 19 Nov 2009 18:30:00 +0000"  >&lt;p&gt;I committed this patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12424902" name="thrift-551.patch" size="18290" author="bryanduxbury" created="Fri, 13 Nov 2009 21:42:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>186729</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16auf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244889</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>