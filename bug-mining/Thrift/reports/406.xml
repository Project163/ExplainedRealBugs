<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:59:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-1093] several bugs in python TCompactProtocol</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-1093</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;The python TCompactProtocol implementation has a few bugs:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;In the writeBool method:
	&lt;ul&gt;
		&lt;li&gt;the code has a typo in the spelling of AssertionError&lt;/li&gt;
		&lt;li&gt;code fails when accessing a nonexistent types[] dict to encode the boolean&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;The TType.STOP token was missing from the CTYPES dict and CompactType class, so empty sequence types failed to decode with an error in __getTType looking for TTYPES&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; and not finding it&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The SerializationTest.py code has a few small issues:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;the code didn&apos;t compare the full serialization/deserialization for the versioningV1/V2 structs, only a couple fields&lt;/li&gt;
	&lt;li&gt;the VersioningTestV2 object has a set() field that is initialized to a list, not a set&lt;/li&gt;
	&lt;li&gt;the Compact Protocol code for handling field ID deltas &amp;gt;= 15 wasn&apos;t exercised&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I have a patch to fix the problem with TCompactProtocol encoding Booleans, and updated the test cases to specifically test Booleans (using ThriftTest.ttypes&apos;s Bools).&lt;/p&gt;

&lt;p&gt;I extended the SerializationTest.py code to include testing of the DebugProtoTest,ttype&apos;s CompactProtoTestStruct, manually setting its values (where possible) to the values from the const COMPACT_TEST in DebugProtoTest.thrift.  This uncovered the bug in handling decoding of empty Map types, which is the bug caused by the missing TType.STOP token in the local CTYPES[] dict().&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12501464">THRIFT-1093</key>
            <summary>several bugs in python TCompactProtocol</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="willp">Will Pierce</assignee>
                                    <reporter username="willp">Will Pierce</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Mar 2011 14:15:10 +0000</created>
                <updated>Tue, 15 Mar 2011 17:16:25 +0000</updated>
                            <resolved>Tue, 15 Mar 2011 17:16:25 +0000</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.7</fixVersion>
                                    <component>Python - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13006934" author="willp" created="Tue, 15 Mar 2011 14:16:45 +0000"  >&lt;p&gt;patch attached&lt;/p&gt;</comment>
                            <comment id="13007025" author="bryanduxbury" created="Tue, 15 Mar 2011 17:16:25 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12473682" name="THRIFT-1093.compactproto_encoding_bugs.patch" size="8084" author="willp" created="Tue, 15 Mar 2011 14:16:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>187193</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16d4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245260</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>