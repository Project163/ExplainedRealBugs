<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:06:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-1783] C# doesn&apos;t handle required fields correctly</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-1783</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;The following IDL &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;struct MyStruct {
  1 : required i32 ID,
  2 : optional bool someFlag,
  3 : optional string Key
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;generates this code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void Write(TProtocol oprot) {
      TStruct struc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TStruct(&lt;span class=&quot;code-quote&quot;&gt;&quot;MyStruct&quot;&lt;/span&gt;);
      oprot.WriteStructBegin(struc);
      TField field = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TField();
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (__isset.ID) {
        field.Name = &lt;span class=&quot;code-quote&quot;&gt;&quot;ID&quot;&lt;/span&gt;;
        field.Type = TType.I32;
        field.ID = 1;
        oprot.WriteFieldBegin(field);
        oprot.WriteI32(ID);
        oprot.WriteFieldEnd();
      }
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (__isset.someFlag) {
        field.Name = &lt;span class=&quot;code-quote&quot;&gt;&quot;someFlag&quot;&lt;/span&gt;;
        field.Type = TType.Bool;
        field.ID = 2;
        oprot.WriteFieldBegin(field);
        oprot.WriteBool(SomeFlag);
        oprot.WriteFieldEnd();
      }
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (Key != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; __isset.Key) {
        field.Name = &lt;span class=&quot;code-quote&quot;&gt;&quot;Key&quot;&lt;/span&gt;;
        field.Type = TType.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;
        field.ID = 3;
        oprot.WriteFieldBegin(field);
        oprot.WriteString(Key);
        oprot.WriteFieldEnd();
      }
      oprot.WriteFieldStop();
      oprot.WriteStructEnd();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;This is unexpected, since the ID field is required and thus there&apos;s no need to maintain the _isset flag for it. &lt;/p&gt;

&lt;p&gt;Expected behaviour would be that&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;the field is always written to the output&lt;/li&gt;
	&lt;li&gt;it is ensured that the field is successfully read from the input (see C++ impl)&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12623077">THRIFT-1783</key>
            <summary>C# doesn&apos;t handle required fields correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="carlyeks">Carl Yeksigian</assignee>
                                    <reporter username="jensg">Jens Geyer</reporter>
                        <labels>
                    </labels>
                <created>Sun, 9 Dec 2012 21:52:55 +0000</created>
                <updated>Sat, 8 Jun 2013 03:15:49 +0000</updated>
                            <resolved>Sat, 8 Jun 2013 03:15:49 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>0.9.1</fixVersion>
                                    <component>C# - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13528618" author="carlyeks" created="Tue, 11 Dec 2012 02:21:49 +0000"  >&lt;p&gt;Attached is a patch to fix this issue.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Makes required fields be serialized&lt;/li&gt;
	&lt;li&gt;Only generates isset for non required fields&lt;/li&gt;
	&lt;li&gt;Ensures that required fields are set on deserialization&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13529226" author="tjake" created="Tue, 11 Dec 2012 19:07:26 +0000"  >&lt;p&gt;I believe other languages enforce this by putting the required fields into the constructor.&lt;/p&gt;</comment>
                            <comment id="13529603" author="carlyeks" created="Wed, 12 Dec 2012 03:45:44 +0000"  >&lt;p&gt;v2 of patch, which reads properly.&lt;/p&gt;

&lt;p&gt;Also, added an additional constructor for the required fields; however, making the other constructor private breaks deserialization.&lt;/p&gt;</comment>
                            <comment id="13530252" author="jensg" created="Wed, 12 Dec 2012 19:50:46 +0000"  >&lt;p&gt;+1, not (yet) tested with mono&lt;/p&gt;</comment>
                            <comment id="13532910" author="jensg" created="Sat, 15 Dec 2012 02:28:14 +0000"  >&lt;p&gt;Carl, could you please rebase the patch? Sorry.&lt;/p&gt;</comment>
                            <comment id="13533208" author="carlyeks" created="Sat, 15 Dec 2012 23:42:21 +0000"  >&lt;p&gt;I&apos;ve rebased the patch and cleaned it up a little bit to clean up overlapping logic with the nullable patch. I&apos;ve tested it with and without nullable on Mono.&lt;/p&gt;

&lt;p&gt;--Carl&lt;/p&gt;</comment>
                            <comment id="13533453" author="jensg" created="Sun, 16 Dec 2012 18:06:18 +0000"  >&lt;p&gt;Committed.&lt;br/&gt;
Thanks Carl, great work!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12560502" name="1783-v2.patch" size="8010" author="carlyeks" created="Wed, 12 Dec 2012 03:45:46 +0000"/>
                            <attachment id="12561156" name="1783-v3.patch" size="16534" author="carlyeks" created="Sat, 15 Dec 2012 23:40:46 +0000"/>
                            <attachment id="12560339" name="1783.patch" size="6389" author="carlyeks" created="Tue, 11 Dec 2012 02:21:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>296670</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 49 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14ein:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233815</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>