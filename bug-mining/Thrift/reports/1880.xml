<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:28:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-4531] Thrift generates wrong Python code for immutable structures with optional members</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-4531</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;In order to make generated Python structs hashable one needs to add&#160;&lt;/p&gt;

&lt;p&gt;( python.immutable; )&lt;/p&gt;

&lt;p&gt;annotation. This is true for Python 3, in Python 2 technically the annotation is not mandatory, however leads to undesirable situation, when equal objects have different hash values.&lt;/p&gt;

&lt;p&gt;If the struct has optional members, then the generated code for read(...) method is wrong and results into undefined local variable error. To fix the issue these variables need to be added to beginning of read(...) method and initialized to None or default values if available.&#160;&lt;/p&gt;

&lt;p&gt;I have a patch for&#160;generate\t_py_generator.cc to fix the issue, but I am not familiar with your procedures for contributors.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13148195">THRIFT-4531</key>
            <summary>Thrift generates wrong Python code for immutable structures with optional members</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dcelasun">Duru Can Celasun</assignee>
                                    <reporter username="Margar">Margar Simonyan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Mar 2018 11:10:35 +0000</created>
                <updated>Thu, 27 Dec 2018 15:25:04 +0000</updated>
                            <resolved>Wed, 28 Mar 2018 10:25:35 +0000</resolved>
                                    <version>0.11.0</version>
                                    <fixVersion>0.12.0</fixVersion>
                                    <component>Compiler (General)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16415439" author="calcifer" created="Tue, 27 Mar 2018 11:28:09 +0000"  >&lt;p&gt;See the &lt;a href=&quot;http://thrift.apache.org/docs/HowToContribute&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;contributing guide&lt;/a&gt; for submitting pull requests.&lt;/p&gt;</comment>
                            <comment id="16415444" author="githubbot" created="Tue, 27 Mar 2018 11:33:46 +0000"  >&lt;p&gt;GitHub user margars opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1520&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1520&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4531&quot; title=&quot;Thrift generates wrong Python code for immutable structures with optional members&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4531&quot;&gt;&lt;del&gt;THRIFT-4531&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I am not familiar with your rules for contributions. This issue is described in JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4531&quot; title=&quot;Thrift generates wrong Python code for immutable structures with optional members&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4531&quot;&gt;&lt;del&gt;THRIFT-4531&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/margars/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/margars/thrift&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1520.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1520.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1520&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit d682b13e5e7672702e53f1e696263ef5293d8d37&lt;br/&gt;
Author: Margar Simonyan &amp;lt;margar.simonyan@...&amp;gt;&lt;br/&gt;
Date:   2018-03-27T11:22:10Z&lt;/p&gt;

&lt;p&gt;    Update t_py_generator.cc&lt;/p&gt;

&lt;p&gt;    Fix the generated read() method for immutable structures with optional members.&lt;/p&gt;

&lt;p&gt;commit 14a4c46c480ae041bb51397cefc9be575f17f79a&lt;br/&gt;
Author: Margar Simonyan &amp;lt;margar.simonyan@...&amp;gt;&lt;br/&gt;
Date:   2018-03-27T11:26:51Z&lt;/p&gt;

&lt;p&gt;    Merge pull request #1 from margars/&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4531&quot; title=&quot;Thrift generates wrong Python code for immutable structures with optional members&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4531&quot;&gt;&lt;del&gt;THRIFT-4531&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Update t_py_generator.cc&lt;/p&gt;

&lt;p&gt;commit 29289f4d8c88fee636b779a94aeae48bf81671b0&lt;br/&gt;
Author: Margar Simonyan &amp;lt;margar.simonyan@...&amp;gt;&lt;br/&gt;
Date:   2018-03-27T11:28:11Z&lt;/p&gt;

&lt;p&gt;    Revert &quot;Update t_py_generator.cc&quot;&lt;/p&gt;

&lt;p&gt;commit 56dc4f04c20a9601063deec75630ff4212937a46&lt;br/&gt;
Author: Margar Simonyan &amp;lt;margar.simonyan@...&amp;gt;&lt;br/&gt;
Date:   2018-03-27T11:28:35Z&lt;/p&gt;

&lt;p&gt;    Merge pull request #2 from margars/revert-1-&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4531&quot; title=&quot;Thrift generates wrong Python code for immutable structures with optional members&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4531&quot;&gt;&lt;del&gt;THRIFT-4531&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Revert &quot;Update t_py_generator.cc&quot;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16415457" author="githubbot" created="Tue, 27 Mar 2018 11:46:05 +0000"  >&lt;p&gt;Github user dcelasun commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1520&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1520&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    There are no changes in this PR. Please correct it and force push.&lt;/p&gt;</comment>
                            <comment id="16415473" author="githubbot" created="Tue, 27 Mar 2018 11:54:43 +0000"  >&lt;p&gt;Github user margars commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1520&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1520&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Sorry, I am not familiar with all this setup and rules.&lt;/p&gt;</comment>
                            <comment id="16415488" author="githubbot" created="Tue, 27 Mar 2018 12:03:10 +0000"  >&lt;p&gt;Github user dcelasun commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1520&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1520&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Also, please squash your commits.&lt;/p&gt;</comment>
                            <comment id="16415493" author="githubbot" created="Tue, 27 Mar 2018 12:11:56 +0000"  >&lt;p&gt;Github user margars closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1520&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1520&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16415495" author="githubbot" created="Tue, 27 Mar 2018 12:13:18 +0000"  >&lt;p&gt;Github user margars commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1520&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1520&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I am behind corporate firewall and don&apos;t know how to squash from the web interface, will try from scratch. &lt;/p&gt;</comment>
                            <comment id="16415537" author="githubbot" created="Tue, 27 Mar 2018 12:32:46 +0000"  >&lt;p&gt;GitHub user margars opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1521&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1521&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4531&quot; title=&quot;Thrift generates wrong Python code for immutable structures with optional members&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4531&quot;&gt;&lt;del&gt;THRIFT-4531&lt;/del&gt;&lt;/a&gt; (#1)&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4531&quot; title=&quot;Thrift generates wrong Python code for immutable structures with optional members&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4531&quot;&gt;&lt;del&gt;THRIFT-4531&lt;/del&gt;&lt;/a&gt;: Fix generated Python read() method for immutable structs with optional members.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/margars/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/margars/thrift&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1521.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1521.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1521&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 969047b3c09af133dd3d24591baedc8ed3c52318&lt;br/&gt;
Author: Margar Simonyan &amp;lt;margar.simonyan@...&amp;gt;&lt;br/&gt;
Date:   2018-03-27T12:30:14Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4531&quot; title=&quot;Thrift generates wrong Python code for immutable structures with optional members&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4531&quot;&gt;&lt;del&gt;THRIFT-4531&lt;/del&gt;&lt;/a&gt; (#1)&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4531&quot; title=&quot;Thrift generates wrong Python code for immutable structures with optional members&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4531&quot;&gt;&lt;del&gt;THRIFT-4531&lt;/del&gt;&lt;/a&gt;: Fix generated Python read() method for immutable structs with optional members.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16415620" author="githubbot" created="Tue, 27 Mar 2018 13:38:49 +0000"  >&lt;p&gt;Github user margars commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1521&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1521&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Build failed with Gradle POM parsing error which has nothing to do with the commit.&lt;/p&gt;</comment>
                            <comment id="16416970" author="margar" created="Wed, 28 Mar 2018 07:35:00 +0000"  >&lt;p&gt;Once Gradle issues are resolved one needs to trigger the builds again and merge (given all tests pass).&lt;/p&gt;</comment>
                            <comment id="16417137" author="githubbot" created="Wed, 28 Mar 2018 10:24:46 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1521&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1521&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16417138" author="calcifer" created="Wed, 28 Mar 2018 10:24:46 +0000"  >&lt;p&gt;Build is fine on my Travis, merging.&lt;/p&gt;</comment>
                            <comment id="16417164" author="margar" created="Wed, 28 Mar 2018 10:58:19 +0000"  >&lt;p&gt;Thanks for merging, looking forward for release 0.12.&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 33 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rtrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>