<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:30:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-4855] go CI fails with &quot;cannot find package &quot;golang.org/x/tools/go/packages&quot; in any of ...&quot;</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-4855</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;Example: &lt;a href=&quot;https://api.travis-ci.org/v3/job/525677999/log.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.travis-ci.org/v3/job/525677999/log.txt&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
mkdir -p src/gen
/thrift/src/compiler/cpp/thrift -out src/gen --gen go:thrift_import=thrift ThriftTest.thrift
[WARNING:/thrift/src/test/go/ThriftTest.thrift:45] No generator named &lt;span class=&quot;code-quote&quot;&gt;&apos;noexist&apos;&lt;/span&gt; could be found!
[WARNING:/thrift/src/test/go/ThriftTest.thrift:47] cpp generator does not accept &lt;span class=&quot;code-quote&quot;&gt;&apos;noexist&apos;&lt;/span&gt; as sub-namespace!
/thrift/src/compiler/cpp/thrift -out src/gen --gen go:thrift_import=thrift ../StressTest.thrift
[WARNING:/thrift/src/test/StressTest.thrift:31] Consider using the more efficient &lt;span class=&quot;code-quote&quot;&gt;&quot;binary&quot;&lt;/span&gt; type instead of &lt;span class=&quot;code-quote&quot;&gt;&quot;list&amp;lt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;&amp;gt;&quot;&lt;/span&gt;.
[WARNING:/thrift/src/test/StressTest.thrift:31] Consider using the more efficient &lt;span class=&quot;code-quote&quot;&gt;&quot;binary&quot;&lt;/span&gt; type instead of &lt;span class=&quot;code-quote&quot;&gt;&quot;list&amp;lt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;&amp;gt;&quot;&lt;/span&gt;.
GOPATH=`pwd` /usr/local/bin/go get github.com/golang/mock/gomock || &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
sed -i &lt;span class=&quot;code-quote&quot;&gt;&apos;s/\&lt;span class=&quot;code-quote&quot;&gt;&quot;context\&quot;&lt;/span&gt;/\&lt;span class=&quot;code-quote&quot;&gt;&quot;golang.org\/x\/net\/context\&quot;&lt;/span&gt;/g&apos;&lt;/span&gt; src/github.com/golang/mock/gomock/controller.go || &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
GOPATH=`pwd` /usr/local/bin/go get github.com/golang/mock/gomock
ln -nfs ../../../lib/go/thrift src/thrift
touch gopath
GOPATH=`pwd` /usr/local/bin/go install github.com/golang/mock/mockgen
src/github.com/golang/mock/mockgen/parse.go:34:2: cannot find &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;golang.org/x/tools/go/packages&quot;&lt;/span&gt; in any of:
	/usr/local/go/src/golang.org/x/tools/go/packages (from $GOROOT)
	/thrift/src/test/go/src/golang.org/x/tools/go/packages (from $GOPATH)
Makefile:673: recipe &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; target &lt;span class=&quot;code-quote&quot;&gt;&apos;genmock&apos;&lt;/span&gt; failed
make[2]: *** [genmock] Error 1
make[2]: Leaving directory &lt;span class=&quot;code-quote&quot;&gt;&apos;/thrift/src/test/go&apos;&lt;/span&gt;
Makefile:633: recipe &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; target &lt;span class=&quot;code-quote&quot;&gt;&apos;check-recursive&apos;&lt;/span&gt; failed
make[1]: *** [check-recursive] Error 1
make[1]: Leaving directory &lt;span class=&quot;code-quote&quot;&gt;&apos;/thrift/src/test&apos;&lt;/span&gt;
Makefile:686: recipe &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; target &lt;span class=&quot;code-quote&quot;&gt;&apos;check-recursive&apos;&lt;/span&gt; failed
make: *** [check-recursive] Error 1
travis_time:end:0aae51b0:start=1556474908740752565,finish=1556476800695330969,duration=1891954578404
[0K[31;1mThe command &lt;span class=&quot;code-quote&quot;&gt;&quot;build/docker/run.sh&quot;&lt;/span&gt; exited with 2.[0m
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I can reproduce it locally on my machine but I&apos;m not quite sure I even understand what the problem is. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13230577">THRIFT-4855</key>
            <summary>go CI fails with &quot;cannot find package &quot;golang.org/x/tools/go/packages&quot; in any of ...&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dcelasun">Duru Can Celasun</assignee>
                                    <reporter username="jensg">Jens Geyer</reporter>
                        <labels>
                    </labels>
                <created>Sun, 28 Apr 2019 21:56:46 +0000</created>
                <updated>Wed, 16 Oct 2019 22:27:54 +0000</updated>
                            <resolved>Fri, 10 May 2019 19:09:10 +0000</resolved>
                                    <version>0.13.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                    <component>Build Process</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16829188" author="calcifer" created="Mon, 29 Apr 2019 12:09:09 +0000"  >&lt;p&gt;This is happening because golang/mock has &lt;a href=&quot;https://github.com/golang/mock/commit/79d8603a659da203b11a30b9faeb999604924d86&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;removed their vendor directory&lt;/a&gt; and are now relying on &lt;a href=&quot;https://github.com/golang/go/wiki/Modules&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Go modules&lt;/a&gt; for dependency management.&lt;/p&gt;

&lt;p&gt;Basically, Go modules are the future and GOPATH is effectively deprecated. If we stop using pre-modules versions of Go (Go&amp;lt;11) on Travis, we can fully switch the test suite to modules and let it handle dependencies.&lt;/p&gt;

&lt;p&gt;Otherwise we&apos;ll need to either pin golang/mock to an old version, or find some other way to download dependencies.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="16829759" author="jensg" created="Mon, 29 Apr 2019 22:05:01 +0000"  >&lt;p&gt;&amp;gt; If we stop using pre-modules versions of Go (Go&amp;lt;11) on Travis, we can fully switch the test suite to modules and let it handle dependencies.&lt;/p&gt;

&lt;p&gt;Conceptionaly speaking, sooner or later this will probably hurt us again and need to be done anyway, right? What impact would that have on the CI builds, i.e. what else needs to be done? &lt;/p&gt;</comment>
                            <comment id="16829764" author="calcifer" created="Mon, 29 Apr 2019 22:08:26 +0000"  >&lt;p&gt;Yes, non-modules way of doing things is slowly going away and we&apos;ll have to deal with it eventually. I&apos;ll work on a PR to switch CI to modules.&lt;/p&gt;</comment>
                            <comment id="16833152" author="jking3" created="Sat, 4 May 2019 20:09:44 +0000"  >&lt;p&gt;I have the Appveyor issues under control and will check something in soon for that.  This looks like it is causing 3 build jobs to fail in Travis CI.&lt;/p&gt;</comment>
                            <comment id="16836803" author="jking3" created="Fri, 10 May 2019 00:18:07 +0000"  >&lt;p&gt;This needs to be fixed at the highest priority.  Thrift builds are unusable in CI until this is fixed.  Should we disable go all together?&lt;/p&gt;</comment>
                            <comment id="16836973" author="calcifer" created="Fri, 10 May 2019 07:20:07 +0000"  >&lt;p&gt;I&apos;m working on this right now, should have a commit today.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16837455" author="calcifer" created="Fri, 10 May 2019 17:21:53 +0000"  >&lt;p&gt;OK it turns out switching to modules won&apos;t be trivial since we have a very non-idiomatic directory structure for Go tests. It will take a larger time effort than I can spare right now. For now I&apos;ve just opened a PR that pins golang/mock to 1.2.0 so everything will keep working. I&apos;ll merge it once the Travis build is done.&lt;/p&gt;

&lt;p&gt;When Go 1.13 is released (or whenever modules stop being experimental) we can revisit this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 27 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z027vk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>