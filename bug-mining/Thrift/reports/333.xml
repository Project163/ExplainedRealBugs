<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:58:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-918] Make haskell tests run again</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-918</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;This allows the haskell tests to run:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;cd $THRIFT/test/hs
sh runserver.hs

# In another terminal
cd $THRIFT/test/hs
sh runclient.hs
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It&apos;s not awesome yet, but allows upstream to test both the library code and the generated code from my patches. This patch also includes a few simple bug/typo fixes in code I hadn&apos;t tested yet.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OS X 10.6 ; GHC 6.12.3 ; Haskell Platform 2010.2.0.0&lt;/p&gt;

&lt;p&gt;Darwin &amp;#8211; 10.4.0 Darwin Kernel Version 10.4.0: Fri Apr 23 18:28:53 PDT 2010; root:xnu-1504.7.4~1/RELEASE_I386 i386&lt;br/&gt;
The Glorious Glasgow Haskell Compilation System, version 6.12.3&lt;/p&gt;</environment>
        <key id="12474962">THRIFT-918</key>
            <summary>Make haskell tests run again</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="clavoie">Christian Lavoie</assignee>
                                    <reporter username="clavoie">Christian Lavoie</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Sep 2010 18:58:33 +0000</created>
                <updated>Mon, 27 Sep 2010 19:46:58 +0000</updated>
                            <resolved>Mon, 27 Sep 2010 19:31:56 +0000</resolved>
                                    <version>0.5</version>
                                    <fixVersion>0.5</fixVersion>
                                    <component>Haskell - Compiler</component>
                    <component>Haskell - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12914230" author="clavoie" created="Thu, 23 Sep 2010 21:23:01 +0000"  >&lt;p&gt;This allows the haskell tests to run:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;# In a terminal
cd $THRIFT/test/hs
sh runserver.hs ThriftTest

# In another terminal
cd $THRIFT/test/hs
sh runclient.hs ThriftTest
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;# In a terminal
cd $THRIFT/test/hs
sh runserver.hs ConstantsDemo

# In another terminal
cd $THRIFT/test/hs
sh runclient.hs ConstantsDemo
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Apparently I&apos;m the only one using ConstantsDemo by now, so I&apos;ve taken out the two bits that failed to run through the thrift compiler.&lt;/p&gt;</comment>
                            <comment id="12914320" author="clavoie" created="Fri, 24 Sep 2010 03:03:21 +0000"  >&lt;p&gt;This version of the patch enables the DebugProtoTest &apos;torture&apos; test.&lt;/p&gt;</comment>
                            <comment id="12914349" author="clavoie" created="Fri, 24 Sep 2010 06:22:56 +0000"  >&lt;p&gt;Tests now compile with pedantic warning levels.&lt;/p&gt;</comment>
                            <comment id="12915373" author="bryanduxbury" created="Mon, 27 Sep 2010 17:23:42 +0000"  >&lt;p&gt;Since you&apos;re on a Haskell roll...&lt;/p&gt;</comment>
                            <comment id="12915415" author="djnym" created="Mon, 27 Sep 2010 18:32:39 +0000"  >&lt;p&gt;Christian, I think there is something wrong with your patch, it seems to contain differences for files which do not exist&lt;/p&gt;

{noquote}&lt;br/&gt;
&lt;br/&gt;
patch -p0 &amp;lt; ~/Downloads/v4-thrift-fix-haskell-tests.patch &lt;br/&gt;
patching file test/ConstantsDemo.thrift&lt;br/&gt;
patching file test/hs/Server.hs&lt;br/&gt;
can&apos;t find file to patch at input line 92&lt;br/&gt;
Perhaps you used the wrong -p or --strip option?&lt;br/&gt;
The text leading up to this was:&lt;br/&gt;
--------------------------&lt;br/&gt;
|Index: test/hs/ThriftTest_TestServer.hs&lt;br/&gt;
|===================================================================&lt;br/&gt;
|--- test/hs/ThriftTest_TestServer.hs   (revision 1000559)&lt;br/&gt;
|+++ test/hs/ThriftTest_TestServer.hs   (working copy)&lt;br/&gt;
--------------------------&lt;br/&gt;
File to patch: &lt;br/&gt;
{noquote}</comment>
                            <comment id="12915423" author="clavoie" created="Mon, 27 Sep 2010 18:45:17 +0000"  >&lt;p&gt;Yeah, I jsut caught that myself. Here&apos;s a fixed version &amp;#8211; I think v4 was created by a confused svn client (modified Client.hs, then cp&apos;ed it, then moved it, then edited some more, etc).&lt;/p&gt;

&lt;p&gt;This applies cleanly to a clean one &amp;#8211; it adds 6 new files.&lt;/p&gt;</comment>
                            <comment id="12915444" author="djnym" created="Mon, 27 Sep 2010 19:31:56 +0000"  >&lt;p&gt;This applied cleanly.  I was unable to actually run the tests, as they asked for THRIFT_BIN and then when I ran with&lt;/p&gt;

&lt;p&gt;% THRIFT_BIN=../../compiler/cpp/thrift sh runserver.sh&lt;br/&gt;
Missing thrift file ../../test/.thrift&lt;/p&gt;

&lt;p&gt;So looks like there might still need to be some work to get these easier to run (it may just be that I don&apos;t know how to run them, I tried to just do what you suggested Christian, but is there a compile step I&apos;m missing, and or do I have to install first).    It would be cool if they somehow ran during &apos;make check&apos; and didn&apos;t require installation of anything, but that seems like another ticket.   For now, this doesn&apos;t break anything and seems like a good addition for 0.5 so&lt;br/&gt;
committing.&lt;/p&gt;

&lt;p&gt;Christian, if you feel like taking on getting this called from &apos;make check&apos; please add a ticket and do so.  Thanks for all the patches!&lt;/p&gt;</comment>
                            <comment id="12915446" author="clavoie" created="Mon, 27 Sep 2010 19:43:24 +0000"  >&lt;p&gt;Priority here was to make the bindings compilable and testable &amp;#8211; you do need a &lt;tt&gt;thrift&lt;/tt&gt; binary in your path that has been compiled from a recent enough head (it needs my committed Haskell patches).&lt;/p&gt;

&lt;p&gt;You can specify an alternative binary with &lt;tt&gt;THRIFT_BIN&lt;/tt&gt;, but it tries to auto-detect one from &lt;tt&gt;PATH&lt;/tt&gt; anyway.&lt;/p&gt;

&lt;p&gt;It doesn&apos;t work with &lt;tt&gt;make check&lt;/tt&gt; yet; but that&apos;s next on my list, it just felt orthogonal to getting tests altogether.&lt;/p&gt;</comment>
                            <comment id="12915448" author="clavoie" created="Mon, 27 Sep 2010 19:46:24 +0000"  >&lt;p&gt;Also, you need to pass it the name of a test to run:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;THRIFT_BIN=... runserver.sh ThriftTest
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And run the client from a different term:&lt;/p&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;THRIFT_BIN=... runclient.sh ThriftTest
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then kill the server, has it just runs forever.&lt;/p&gt;

&lt;p&gt;This sucks, I know. I&apos;ll get it fixed ASAP.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12443487">THRIFT-652</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12455403" name="v1-thrift-fix-haskell-tests.patch" size="5678" author="clavoie" created="Thu, 23 Sep 2010 19:01:27 +0000"/>
                            <attachment id="12455421" name="v2-thrift-fix-haskell-tests.patch" size="17122" author="clavoie" created="Thu, 23 Sep 2010 21:23:00 +0000"/>
                            <attachment id="12455460" name="v3-thrift-fix-haskell-tests.patch" size="27334" author="clavoie" created="Fri, 24 Sep 2010 03:03:21 +0000"/>
                            <attachment id="12455467" name="v4-thrift-fix-haskell-tests.patch" size="32857" author="clavoie" created="Fri, 24 Sep 2010 06:22:56 +0000"/>
                            <attachment id="12455739" name="v5-thrift-fix-haskell-tests.patch" size="30836" author="clavoie" created="Mon, 27 Sep 2010 18:45:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38726</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16dpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245354</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>