<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:23:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3479] Oneway calls should not return exceptions to clients</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3479</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;We noticed the following happening over in &lt;a href=&quot;https://issues.apache.org/jira/browse/ACCUMULO-4065&quot; title=&quot;Oneway Thrift calls leave message on client&amp;#39;s InputStream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ACCUMULO-4065&quot;&gt;&lt;del&gt;ACCUMULO-4065&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;A client made a oneway call to a server which ultimately caused a TException to propagate up through to ProcessFunction. This caused a message to be sent back to the client with a TApplicationException wrapping the TException.&lt;/p&gt;

&lt;p&gt;The problem is that the client had already returned its connection to a pool because it was oneway (it had no means to know when the call finished &amp;#8211; nor did it care). The next client that tried to send an RPC to the same server sent its message, then read the response off the wire, only to get the oneway call&apos;s exception Message, not the response for the call it made.&lt;/p&gt;

&lt;p&gt;Ultimately, this screwed up the connection (the next client was always reading the previous clients response).&lt;/p&gt;

&lt;p&gt;Given my understanding on the current implementation (mostly discerned from the docs, a bit from code), it&apos;s my belief that oneway calls can never safely return a message to clients.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12920156">THRIFT-3479</key>
            <summary>Oneway calls should not return exceptions to clients</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="elserj">Josh Elser</assignee>
                                    <reporter username="elserj">Josh Elser</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Dec 2015 18:38:56 +0000</created>
                <updated>Fri, 10 Feb 2017 04:09:20 +0000</updated>
                            <resolved>Fri, 18 Mar 2016 15:40:19 +0000</resolved>
                                    <version>0.9.1</version>
                    <version>0.9.2</version>
                    <version>0.9.3</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Java - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15047231" author="elserj" created="Tue, 8 Dec 2015 18:41:36 +0000"  >&lt;p&gt;Testing the waters: here&apos;s a tentative patch for the change I think needs to be made. Publishing it now for any discussion.&lt;/p&gt;

&lt;p&gt;I&apos;d love to add some testing for this, but I&apos;m not quite sure where to begin. I&apos;ll have to look at that some more. I also need to figure out how to run all of the tests as well.&lt;/p&gt;</comment>
                            <comment id="15049379" author="roger.meier" created="Wed, 9 Dec 2015 21:04:13 +0000"  >&lt;p&gt;Thanks for the patch!&lt;/p&gt;

&lt;p&gt;Yes, one way should behave like this, but we still have the risk that it behaves different within the languages and we have over 20 of them...&lt;/p&gt;

&lt;p&gt;One of the most challenging parts of Thrift is same behavior across languages, that&apos;s why we invested a lot into cross language testing which is described over here: &lt;a href=&quot;http://thrift.apache.org/test/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://thrift.apache.org/test/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15049405" author="elserj" created="Wed, 9 Dec 2015 21:28:15 +0000"  >&lt;p&gt;Oh, great. Thanks for the link Roger. I hadn&apos;t stumbled onto that testing page on my own yet. That will be very helpful.&lt;/p&gt;

&lt;p&gt;I&apos;ll take a look at that and get back to ya&apos;ll.&lt;/p&gt;</comment>
                            <comment id="15202844" author="hudson" created="Sat, 19 Mar 2016 16:45:37 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift-precommit #335 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift-precommit/335/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift-precommit/335/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3479&quot; title=&quot;Oneway calls should not return exceptions to clients&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3479&quot;&gt;&lt;del&gt;THRIFT-3479&lt;/del&gt;&lt;/a&gt; Avoid returning a message to a client on TException. (nsuke: &lt;a href=&quot;https://github.com/apache/thrift/commit/b3a42dd050db2657a589b7b73e3d121211649fe5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/commit/b3a42dd050db2657a589b7b73e3d121211649fe5&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/java/src/org/apache/thrift/ProcessFunction.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12914721">ACCUMULO-4065</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13041939">ACCUMULO-4584</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12776365" name="THRIFT-3479.001.patch" size="1615" author="elserj" created="Tue, 8 Dec 2015 18:41:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 35 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2pm3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>