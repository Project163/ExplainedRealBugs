<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:29:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-4656] infinite loop in latest PHP library</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-4656</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;The latest PHP library can enter into infinite loop state when specific payload is returned:&lt;/p&gt;

&lt;p&gt;HTTP status: 200&lt;/p&gt;

&lt;p&gt;Response body: &amp;lt;empty&amp;gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;It was introduced with &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4645&quot; title=&quot;TCurlClient: show actual error message when throwing TTransportException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4645&quot;&gt;&lt;del&gt;THRIFT-4645&lt;/del&gt;&lt;/a&gt;, where check was replaced from&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
!$&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;-&amp;gt;response_&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;-&amp;gt;response_ === &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13195251">THRIFT-4656</key>
            <summary>infinite loop in latest PHP library</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jking3">James E. King III</assignee>
                                    <reporter username="sokac">Josip Sokcevic</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Oct 2018 22:25:13 +0000</created>
                <updated>Thu, 27 Dec 2018 15:25:01 +0000</updated>
                            <resolved>Wed, 5 Dec 2018 21:08:42 +0000</resolved>
                                    <version>0.12.0</version>
                                    <fixVersion>0.12.0</fixVersion>
                                    <component>PHP - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16669396" author="githubbot" created="Tue, 30 Oct 2018 22:30:22 +0000"  >&lt;p&gt;sokac opened a new pull request #1618: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4656&quot; title=&quot;infinite loop in latest PHP library&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4656&quot;&gt;&lt;del&gt;THRIFT-4656&lt;/del&gt;&lt;/a&gt;: Fix infinite loop in PHP TCurlClient&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1618&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1618&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Infinite loop happens when response body is empty and HTTP status is&lt;br/&gt;
   200. This patch fixes it.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;tested in production&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16672320" author="githubbot" created="Thu, 1 Nov 2018 23:00:46 +0000"  >&lt;p&gt;sokac commented on issue #1618: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4656&quot; title=&quot;infinite loop in latest PHP library&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4656&quot;&gt;&lt;del&gt;THRIFT-4656&lt;/del&gt;&lt;/a&gt;: Fix infinite loop in PHP TCurlClient&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1618#issuecomment-435215291&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1618#issuecomment-435215291&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @jeking3 it was the case before &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4645&quot; title=&quot;TCurlClient: show actual error message when throwing TTransportException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4645&quot;&gt;&lt;del&gt;THRIFT-4645&lt;/del&gt;&lt;/a&gt; got fixed. If response was empty, an exception was thrown.&lt;/p&gt;

&lt;p&gt;   Alternative is to override readAll. Parent class TTransport, &lt;a href=&quot;https://github.com/apache/thrift/blob/master/lib/php/lib/Transport/TTransport.php#L76&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/blob/master/lib/php/lib/Transport/TTransport.php#L76&lt;/a&gt; , will keep calling read until receives all bytes. Since we know TCurlClient won&apos;t get any more bytes, an exception can be thrown in case read returns fewer than $len.&lt;/p&gt;

&lt;p&gt;   To give a little bit of background how this issue was reproduced - due to bug in upstream under some conditions, upstream could respond with 200 OK and empty response. This caused PHP to spin until supervisor terminated it due reached timeout.&lt;/p&gt;

&lt;p&gt;   Do you think this PR makes sense or should we override readAll? I&apos;m open to suggestions too&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16674545" author="githubbot" created="Sun, 4 Nov 2018 22:53:47 +0000"  >&lt;p&gt;jeking3 commented on issue #1618: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4656&quot; title=&quot;infinite loop in latest PHP library&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4656&quot;&gt;&lt;del&gt;THRIFT-4656&lt;/del&gt;&lt;/a&gt;: Fix infinite loop in PHP TCurlClient&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1618#issuecomment-435716145&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1618#issuecomment-435716145&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I think we need to understand why there&apos;s a 0 length response sitting there.  My guess is that it&apos;s due to a oneway call followed by a normal call.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16674546" author="githubbot" created="Sun, 4 Nov 2018 22:54:51 +0000"  >&lt;p&gt;jeking3 edited a comment on issue #1618: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4656&quot; title=&quot;infinite loop in latest PHP library&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4656&quot;&gt;&lt;del&gt;THRIFT-4656&lt;/del&gt;&lt;/a&gt;: Fix infinite loop in PHP TCurlClient&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1618#issuecomment-435716145&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1618#issuecomment-435716145&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I think we need to understand why there&apos;s a 0 length response sitting there.  My guess is that it&apos;s due to a oneway call followed by a normal call.  This issue has been seen in other language runtimes as well.  It&apos;s why the HTTP transport support is shaky at best.  There&apos;s a topic in Jira about HTTP transport with C++ and how broken it is...&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16677176" author="githubbot" created="Tue, 6 Nov 2018 19:00:05 +0000"  >&lt;p&gt;sokac commented on issue #1618: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4656&quot; title=&quot;infinite loop in latest PHP library&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4656&quot;&gt;&lt;del&gt;THRIFT-4656&lt;/del&gt;&lt;/a&gt;: Fix infinite loop in PHP TCurlClient&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1618#issuecomment-436368820&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1618#issuecomment-436368820&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @jeking3 200 OK with empty response was due an upstream bug not related to Thrift (our framework returned wrong http status code in case of exception, sits lower on stack than Thrift processor; already patched). From what I can tell, Thrift response should never be an empty response.&lt;/p&gt;

&lt;p&gt;   However, no library shouldn&apos;t be stuck in an infinite loop due invalid server response imo. This change:&lt;br/&gt;
   &lt;a href=&quot;https://github.com/apache/thrift/pull/1602/files#diff-74eb8d4b20c423c78252e3e3dc847099R227&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1602/files#diff-74eb8d4b20c423c78252e3e3dc847099R227&lt;/a&gt;&lt;br/&gt;
   introduced a change how empty response is handled by TCurlClient. Before it was merged, it would throw TTransportException on empty payload.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16681661" author="githubbot" created="Fri, 9 Nov 2018 16:18:06 +0000"  >&lt;p&gt;jeking3 commented on issue #1618: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4656&quot; title=&quot;infinite loop in latest PHP library&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4656&quot;&gt;&lt;del&gt;THRIFT-4656&lt;/del&gt;&lt;/a&gt;: Fix infinite loop in PHP TCurlClient&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1618#issuecomment-437410921&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1618#issuecomment-437410921&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I&apos;m still concerned about how oneway requests are handled with HTTP transport.  It would be a HTTP/1.1 200 OK response without any payload...&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16682908" author="githubbot" created="Sun, 11 Nov 2018 15:33:36 +0000"  >&lt;p&gt;allengeorge commented on issue #1618: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4656&quot; title=&quot;infinite loop in latest PHP library&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4656&quot;&gt;&lt;del&gt;THRIFT-4656&lt;/del&gt;&lt;/a&gt;: Fix infinite loop in PHP TCurlClient&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1618#issuecomment-437680054&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1618#issuecomment-437680054&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Would it be better for the language runtime to return a `204` indicating a successful request but no content?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16682916" author="githubbot" created="Sun, 11 Nov 2018 15:56:09 +0000"  >&lt;p&gt;jeking3 commented on issue #1618: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4656&quot; title=&quot;infinite loop in latest PHP library&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4656&quot;&gt;&lt;del&gt;THRIFT-4656&lt;/del&gt;&lt;/a&gt;: Fix infinite loop in PHP TCurlClient&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1618#issuecomment-437681718&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1618#issuecomment-437681718&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Sounds like an improvement, but here&apos;s the issue I think exists with oneway:&lt;/p&gt;

&lt;p&gt;   1. Generated client code sends a oneway request.&lt;br/&gt;
   2. HTTP transport packages it up and send it to the server.  This could be through a proxy.&lt;br/&gt;
   3. Server receives it.  Since it is a oneway request, my assumption is the server, no matter what the language, has a HTTP transport that issues a response (like 200 OK without content, or 204 as you stated).  If it did not, it wouldn&apos;t work through a proxy (or at least, the proxy might behave badly).&lt;br/&gt;
   An example of this can be found at &lt;a href=&quot;https://github.com/apache/thrift/blob/master/lib/py/src/server/THttpServer.py#L86&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/blob/master/lib/py/src/server/THttpServer.py#L86&lt;/a&gt;.&lt;br/&gt;
   4. Client has no generated response reader code because it is oneway, so the client code never attempts to get the transport response (which is fair, oneway probably came around before we had a transport with a mandatory response).  However now there&apos;s a transport reply sitting in the buffer.&lt;br/&gt;
   5. The next request sent by the client that is normal (not oneway) would send the request and then read the HTTP 1.1 200 OK response buffered from from the oneway request, and the actual reply to the two-way request would get queued up; however the response processor for the twoway request, seeing no payload, would throw an exception.&lt;/p&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16682920" author="githubbot" created="Sun, 11 Nov 2018 16:10:20 +0000"  >&lt;p&gt;allengeorge commented on issue #1618: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4656&quot; title=&quot;infinite loop in latest PHP library&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4656&quot;&gt;&lt;del&gt;THRIFT-4656&lt;/del&gt;&lt;/a&gt;: Fix infinite loop in PHP TCurlClient&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1618#issuecomment-437682746&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1618#issuecomment-437682746&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Oh. Hmm - you&apos;re absolutely right. Because the autogen&apos;d code is protocol agnostic it doesn&apos;t know that in some cases the protocol has no concept of a one-way interaction. &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16684690" author="githubbot" created="Tue, 13 Nov 2018 03:46:24 +0000"  >&lt;p&gt;sokac commented on issue #1618: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4656&quot; title=&quot;infinite loop in latest PHP library&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4656&quot;&gt;&lt;del&gt;THRIFT-4656&lt;/del&gt;&lt;/a&gt;: Fix infinite loop in PHP TCurlClient&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1618#issuecomment-438122866&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1618#issuecomment-438122866&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @jeking3 I updated PR. You were right about oneway - server returns 200 OK with empty body. Looks like &lt;a href=&quot;https://github.com/apache/thrift/pull/1602/files#diff-74eb8d4b20c423c78252e3e3dc847099R227&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1602/files#diff-74eb8d4b20c423c78252e3e3dc847099R227&lt;/a&gt; unintentionally fixed a bug, and the original version of this PR would have broken it.&lt;/p&gt;

&lt;p&gt;   I tested with simple service that has both oneway and regular functions, everything was fully functional. I noticed php client will block until it gets response, but that&apos;s a different problem.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16710564" author="githubbot" created="Wed, 5 Dec 2018 19:53:11 +0000"  >&lt;p&gt;sokac commented on issue #1618: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4656&quot; title=&quot;infinite loop in latest PHP library&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4656&quot;&gt;&lt;del&gt;THRIFT-4656&lt;/del&gt;&lt;/a&gt;: Fix infinite loop in PHP TCurlClient&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1618#issuecomment-444622225&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1618#issuecomment-444622225&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @jeking3 sorry for spamming. Have you had time to review? I&apos;d be great if we can get this out in v0.12 as current `master` has issue with infinite loop and 0.11 doesn&apos;t have.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16710636" author="githubbot" created="Wed, 5 Dec 2018 21:07:13 +0000"  >&lt;p&gt;jeking3 closed pull request #1618: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4656&quot; title=&quot;infinite loop in latest PHP library&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4656&quot;&gt;&lt;del&gt;THRIFT-4656&lt;/del&gt;&lt;/a&gt;: Fix infinite loop in PHP TCurlClient&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1618&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1618&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/lib/php/lib/Transport/TCurlClient.php b/lib/php/lib/Transport/TCurlClient.php&lt;br/&gt;
index 3d4908d901..482b43b72c 100644&lt;br/&gt;
&amp;#8212; a/lib/php/lib/Transport/TCurlClient.php&lt;br/&gt;
+++ b/lib/php/lib/Transport/TCurlClient.php&lt;br/&gt;
@@ -169,6 +169,24 @@ public function read($len)&lt;br/&gt;
         }&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;+    /**&lt;br/&gt;
+     * Guarantees that the full amount of data is read. Since TCurlClient gets entire payload at&lt;br/&gt;
+     * once, parent readAll cannot be used.&lt;br/&gt;
+     *&lt;br/&gt;
+     * @return string The data, of exact length&lt;br/&gt;
+     * @throws TTransportException if cannot read data&lt;br/&gt;
+     */&lt;br/&gt;
+    public function readAll($len)&lt;br/&gt;
+    {&lt;br/&gt;
+        $data = $this-&amp;gt;read($len);&lt;br/&gt;
+&lt;br/&gt;
+        if (TStringFuncFactory::create()-&amp;gt;strlen($data) !== $len) &lt;/p&gt;
{
+            throw new TTransportException(&apos;TCurlClient could not read &apos;.$len.&apos; bytes&apos;);
+        }
&lt;p&gt;+&lt;br/&gt;
+        return $data;&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Writes some data into the pending buffer&lt;br/&gt;
      *&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16710637" author="jking3" created="Wed, 5 Dec 2018 21:08:42 +0000"  >&lt;p&gt;Committed - thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12946301" name="0001-THRIFT-4656-Fix-infinite-loop-in-PHP-TCurlClient.patch" size="1217" author="sokac" created="Tue, 30 Oct 2018 22:29:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3zto7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>