<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:29:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-4661] Rust enum name wrong case in generated structs</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-4661</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;&lt;b&gt;For this thrift (note lowercase &quot;e&quot; at beginning of enum name):&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;enum ePlatform&lt;/p&gt;

{ None = 0 }

&lt;p&gt;struct SettingItem&lt;/p&gt;

{ 1: ePlatform platform }

&lt;p&gt;&lt;b&gt;Generated with:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;thrift -gen rs -out ../rust/thrift/src enum_lowercase_prefix.thrift&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Generated Rust fails to compile:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;error&lt;span class=&quot;error&quot;&gt;&amp;#91;E0412&amp;#93;&lt;/span&gt;: cannot find type `ePlatform` in this scope&lt;br/&gt;
 --&amp;gt; src\enum_lowercase_prefix.rs:71:24&lt;br/&gt;
&#160;&lt;br/&gt;
71 | pub platform: Option&amp;lt;ePlatform&amp;gt;,&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;^^^^^^^^^ did you mean `EPlatform`?&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;In t_rs_generator.cc line 3025:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;return rust_namespace(ttype) + ttype-&amp;gt;get_name();&lt;/p&gt;

&lt;p&gt;&lt;b&gt;To match behavior in generate_enum(), probably needs to be:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;return rust_namespace(ttype) + rust_camel_case(ttype-&amp;gt;get_name());&lt;/p&gt;</description>
                <environment>&lt;p&gt;C:\Users\jake&amp;gt;rustup show&lt;br/&gt;
Default host: x86_64-pc-windows-msvc&lt;/p&gt;

&lt;p&gt;stable-x86_64-pc-windows-msvc (default)&lt;br/&gt;
rustc 1.30.0 (da5f414c2 2018-10-24)&lt;/p&gt;</environment>
        <key id="13196748">THRIFT-4661</key>
            <summary>Rust enum name wrong case in generated structs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="allengeorge">Allen George</assignee>
                                    <reporter username="jeikabu">J W</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Nov 2018 06:39:19 +0000</created>
                <updated>Thu, 27 Dec 2018 15:25:07 +0000</updated>
                            <resolved>Fri, 9 Nov 2018 22:56:45 +0000</resolved>
                                    <version>0.11.0</version>
                                    <fixVersion>0.12.0</fixVersion>
                                    <component>Rust - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16677827" author="githubbot" created="Wed, 7 Nov 2018 08:28:12 +0000"  >&lt;p&gt;jake-ruyi opened a new pull request #1623: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4661&quot; title=&quot;Rust enum name wrong case in generated structs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4661&quot;&gt;&lt;del&gt;THRIFT-4661&lt;/del&gt;&lt;/a&gt;: Rust enum name wrong case in generated structs&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1623&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1623&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Client: rs&lt;/p&gt;

&lt;p&gt;   Small fix with test.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16678107" author="githubbot" created="Wed, 7 Nov 2018 11:53:28 +0000"  >&lt;p&gt;allengeorge commented on issue #1623: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4661&quot; title=&quot;Rust enum name wrong case in generated structs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4661&quot;&gt;&lt;del&gt;THRIFT-4661&lt;/del&gt;&lt;/a&gt;: Rust enum name wrong case in generated structs&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1623#issuecomment-436599340&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1623#issuecomment-436599340&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @jake-ruyi Thank you for the bug report and the PR! The changes look good.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16678112" author="githubbot" created="Wed, 7 Nov 2018 11:55:12 +0000"  >&lt;p&gt;allengeorge commented on issue #1623: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4661&quot; title=&quot;Rust enum name wrong case in generated structs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4661&quot;&gt;&lt;del&gt;THRIFT-4661&lt;/del&gt;&lt;/a&gt;: Rust enum name wrong case in generated structs&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1623#issuecomment-436599745&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1623#issuecomment-436599745&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @jeking3 The build failures appear to be unrelated.&lt;/p&gt;

&lt;p&gt;   On Appveyor it looks like JDK8 could not be downloaded/unpackaged &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; and on Travis it looks like the CL compile failed because it couldn&apos;t find a generated thrift file (I wonder if there&apos;s some sort of Makefile bug or race; lemme look into that).&lt;/p&gt;

&lt;p&gt;   Could this be merged?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16681631" author="githubbot" created="Fri, 9 Nov 2018 15:57:04 +0000"  >&lt;p&gt;jeking3 commented on issue #1623: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4661&quot; title=&quot;Rust enum name wrong case in generated structs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4661&quot;&gt;&lt;del&gt;THRIFT-4661&lt;/del&gt;&lt;/a&gt;: Rust enum name wrong case in generated structs&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1623#issuecomment-437403785&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1623#issuecomment-437403785&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @allengeorge do you have access in GitHub to &quot;approve&quot; a PR?  If you go to the &quot;Files changed&quot; tab, can you submit a review approval from there?  I&apos;m just curious.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16681633" author="githubbot" created="Fri, 9 Nov 2018 15:58:18 +0000"  >&lt;p&gt;jeking3 commented on issue #1623: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4661&quot; title=&quot;Rust enum name wrong case in generated structs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4661&quot;&gt;&lt;del&gt;THRIFT-4661&lt;/del&gt;&lt;/a&gt;: Rust enum name wrong case in generated structs&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1623#issuecomment-437404329&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1623#issuecomment-437404329&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   On the CL missing file my assumption was it is a race inside the cl build framework.  It has plagued the project since CL was added.  If you can smite that, it would help stabilize the builds.  The other issue I have seen is a less frequent ssl/socket issue in the dlang tests.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16681652" author="githubbot" created="Fri, 9 Nov 2018 16:11:28 +0000"  >&lt;p&gt;allengeorge commented on issue #1623: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4661&quot; title=&quot;Rust enum name wrong case in generated structs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4661&quot;&gt;&lt;del&gt;THRIFT-4661&lt;/del&gt;&lt;/a&gt;: Rust enum name wrong case in generated structs&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1623#issuecomment-437408771&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1623#issuecomment-437408771&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @jeking3 I can approve (just did), but I don&apos;t have write access to the repo, so I can&apos;t actually merge PRs.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16682038" author="githubbot" created="Fri, 9 Nov 2018 22:56:29 +0000"  >&lt;p&gt;jeking3 closed pull request #1623: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4661&quot; title=&quot;Rust enum name wrong case in generated structs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4661&quot;&gt;&lt;del&gt;THRIFT-4661&lt;/del&gt;&lt;/a&gt;: Rust enum name wrong case in generated structs&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1623&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1623&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/compiler/cpp/src/thrift/generate/t_rs_generator.cc b/compiler/cpp/src/thrift/generate/t_rs_generator.cc&lt;br/&gt;
index dc11fd3ee2..5cd67f6755 100644&lt;br/&gt;
&amp;#8212; a/compiler/cpp/src/thrift/generate/t_rs_generator.cc&lt;br/&gt;
+++ b/compiler/cpp/src/thrift/generate/t_rs_generator.cc&lt;br/&gt;
@@ -3022,7 +3022,7 @@ string t_rs_generator::to_rust_type(t_type* ttype, bool ordered_float) &lt;/p&gt;
{
     rust_type =  ttypedef-&amp;gt;is_forward_typedef() ? &quot;Box&amp;lt;&quot; + rust_type + &quot;&amp;gt;&quot; : rust_type;
     return rust_type;
   }
&lt;p&gt; else if (ttype-&amp;gt;is_enum()) &lt;/p&gt;
{
-    return rust_namespace(ttype) + ttype-&amp;gt;get_name();
+    return rust_namespace(ttype) + rust_camel_case(ttype-&amp;gt;get_name());
   }
&lt;p&gt; else if (ttype-&amp;gt;is_struct() || ttype-&amp;gt;is_xception()) &lt;/p&gt;
{
     return rust_namespace(ttype) + rust_camel_case(ttype-&amp;gt;get_name());
   }
&lt;p&gt; else if (ttype-&amp;gt;is_map()) {&lt;br/&gt;
diff --git a/lib/rs/test/src/bin/kitchen_sink_server.rs b/lib/rs/test/src/bin/kitchen_sink_server.rs&lt;br/&gt;
index 15ceb29dc4..ae7026288c 100644&lt;br/&gt;
&amp;#8212; a/lib/rs/test/src/bin/kitchen_sink_server.rs&lt;br/&gt;
+++ b/lib/rs/test/src/bin/kitchen_sink_server.rs&lt;br/&gt;
@@ -22,7 +22,7 @@ extern crate kitchen_sink;&lt;br/&gt;
 extern crate thrift;&lt;/p&gt;

&lt;p&gt; use kitchen_sink::base_one::Noodle;&lt;br/&gt;
-use kitchen_sink::base_two::&lt;/p&gt;
{Napkin, NapkinServiceSyncHandler, Ramen, RamenServiceSyncHandler}
&lt;p&gt;;&lt;br/&gt;
+use kitchen_sink::base_two::&lt;/p&gt;
{BrothType, Napkin, NapkinServiceSyncHandler, Ramen, RamenServiceSyncHandler}
&lt;p&gt;;&lt;br/&gt;
 use kitchen_sink::midlayer::&lt;/p&gt;
{Dessert, Meal, MealServiceSyncHandler, MealServiceSyncProcessor}
&lt;p&gt;;&lt;br/&gt;
 use kitchen_sink::recursive;&lt;br/&gt;
 use kitchen_sink::ultimate::{Drink, FullMeal, FullMealAndDrinks,&lt;br/&gt;
@@ -252,7 +252,7 @@ fn noodle() -&amp;gt; Noodle {&lt;br/&gt;
 }&lt;/p&gt;

&lt;p&gt; fn ramen() -&amp;gt; Ramen &lt;/p&gt;
{
-    Ramen::new(&quot;Mr Ramen&quot;.to_owned(), 72)
+    Ramen::new(&quot;Mr Ramen&quot;.to_owned(), 72, BrothType::MISO)
 }

&lt;p&gt; fn napkin() -&amp;gt; Napkin {&lt;br/&gt;
diff --git a/lib/rs/test/thrifts/Base_Two.thrift b/lib/rs/test/thrifts/Base_Two.thrift&lt;br/&gt;
index b4b4ea1a5f..caa6acb86b 100644&lt;br/&gt;
&amp;#8212; a/lib/rs/test/thrifts/Base_Two.thrift&lt;br/&gt;
+++ b/lib/rs/test/thrifts/Base_Two.thrift&lt;br/&gt;
@@ -23,9 +23,15 @@&lt;/p&gt;

&lt;p&gt; const i32 WaterWeight = 200&lt;/p&gt;

&lt;p&gt;+enum brothType &lt;/p&gt;
{
+  Miso,
+  shouyu,
+}
&lt;p&gt;+&lt;br/&gt;
 struct Ramen &lt;/p&gt;
{
   1: optional string ramenType
   2: required i32 noodleCount
+  3: brothType broth
 }

&lt;p&gt; struct Napkin {&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 1 week, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s007mg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>