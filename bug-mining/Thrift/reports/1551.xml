<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:23:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3569] c_glib protocols do not check number of bytes read by transport</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3569</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;I propose adding a read_all method to the thrift_transport interface with the obvious default implementation and using that.  This would facilitate implementation of other protocols.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12932223">THRIFT-3569</key>
            <summary>c_glib protocols do not check number of bytes read by transport</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cjmay">Chandler May</assignee>
                                    <reporter username="cjmay">Chandler May</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Jan 2016 19:52:31 +0000</created>
                <updated>Sun, 6 Mar 2016 16:40:30 +0000</updated>
                            <resolved>Sat, 5 Mar 2016 14:01:12 +0000</resolved>
                                    <version>0.9.3</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>C glib - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15143312" author="githubbot" created="Thu, 11 Feb 2016 19:20:01 +0000"  >&lt;p&gt;GitHub user cjmay opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/849&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/849&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3569&quot; title=&quot;c_glib protocols do not check number of bytes read by transport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3569&quot;&gt;&lt;del&gt;THRIFT-3569&lt;/del&gt;&lt;/a&gt; Add thrift_transport_read_all to facilitate large reads in c_glib&lt;/p&gt;

&lt;p&gt;    Add a read_all method to the base transport class, following suit from the C++ library, and use it instead of the original read method in the protocol implementations.  This fixes a bug causing reads of large fields (e.g., string or binary fields) to fail, depending on the underlying transport and platform.  Test using a framed transport with a tiny frame size.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/cjmay/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/cjmay/thrift&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3569&quot; title=&quot;c_glib protocols do not check number of bytes read by transport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3569&quot;&gt;&lt;del&gt;THRIFT-3569&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/849.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/849.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #849&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 96172b11ac0608ae59ebea416a4cae1158195706&lt;br/&gt;
Author: Chandler May &amp;lt;cjmay4754@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-02-11T13:25:25Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3569&quot; title=&quot;c_glib protocols do not check number of bytes read by transport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3569&quot;&gt;&lt;del&gt;THRIFT-3569&lt;/del&gt;&lt;/a&gt; Add thrift_transport_read_all to facilitate large reads in c_glib.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15143421" author="hudson" created="Thu, 11 Feb 2016 20:14:53 +0000"  >&lt;p&gt;FAILURE: Integrated in Thrift-precommit #85 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift-precommit/85/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift-precommit/85/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3569&quot; title=&quot;c_glib protocols do not check number of bytes read by transport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3569&quot;&gt;&lt;del&gt;THRIFT-3569&lt;/del&gt;&lt;/a&gt; Add thrift_transport_read_all to facilitate large reads in (cjmay4754: &lt;a href=&quot;https://github.com/apache/thrift/commit/96172b11ac0608ae59ebea416a4cae1158195706&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/commit/96172b11ac0608ae59ebea416a4cae1158195706&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/c_glib/src/thrift/c_glib/protocol/thrift_compact_protocol.c&lt;/li&gt;
	&lt;li&gt;lib/c_glib/src/thrift/c_glib/transport/thrift_transport.c&lt;/li&gt;
	&lt;li&gt;lib/c_glib/test/testcompactprotocol.c&lt;/li&gt;
	&lt;li&gt;lib/c_glib/test/testbinaryprotocol.c&lt;/li&gt;
	&lt;li&gt;lib/c_glib/test/Makefile.am&lt;/li&gt;
	&lt;li&gt;lib/c_glib/src/thrift/c_glib/protocol/thrift_binary_protocol.c&lt;/li&gt;
	&lt;li&gt;lib/c_glib/src/thrift/c_glib/transport/thrift_transport.h&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15178755" author="cjmay" created="Thu, 3 Mar 2016 22:47:08 +0000"  >&lt;p&gt;Bump?  This seems like a significant bug to me; larger reads will fail depending on the transport and environment.  (The travis failures were unrelated.)&lt;/p&gt;</comment>
                            <comment id="15181721" author="githubbot" created="Sat, 5 Mar 2016 13:56:20 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/849&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/849&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15181726" author="nsuke" created="Sat, 5 Mar 2016 14:01:12 +0000"  >&lt;p&gt;Committed, thanks !&lt;br/&gt;
Although I couldn&apos;t reproduce the problem using the tests (with some renames), it should fix occasional failures.&lt;/p&gt;</comment>
                            <comment id="15181949" author="hudson" created="Sun, 6 Mar 2016 02:05:06 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift-precommit #267 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift-precommit/267/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift-precommit/267/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3569&quot; title=&quot;c_glib protocols do not check number of bytes read by transport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3569&quot;&gt;&lt;del&gt;THRIFT-3569&lt;/del&gt;&lt;/a&gt; Add thrift_transport_read_all to facilitate large reads in (nsuke: &lt;a href=&quot;https://github.com/apache/thrift/commit/1ccd81bfbc7dc09dc7a8a5e64f313935b799c833&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/commit/1ccd81bfbc7dc09dc7a8a5e64f313935b799c833&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/c_glib/src/thrift/c_glib/transport/thrift_transport.c&lt;/li&gt;
	&lt;li&gt;lib/c_glib/test/testcompactprotocol.c&lt;/li&gt;
	&lt;li&gt;lib/c_glib/src/thrift/c_glib/protocol/thrift_compact_protocol.c&lt;/li&gt;
	&lt;li&gt;lib/c_glib/test/Makefile.am&lt;/li&gt;
	&lt;li&gt;lib/c_glib/test/testbinaryprotocol.c&lt;/li&gt;
	&lt;li&gt;lib/c_glib/src/thrift/c_glib/protocol/thrift_binary_protocol.c&lt;/li&gt;
	&lt;li&gt;lib/c_glib/src/thrift/c_glib/transport/thrift_transport.h&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15182228" author="cjmay" created="Sun, 6 Mar 2016 16:40:30 +0000"  >&lt;p&gt;It&apos;s troubling that you didn&apos;t reproduce the error using those tests, though.  I think r_buf_size in thrift_framed_transport doesn&apos;t do what I thought.  Also, the implementation of read in thrift_socket loops until the requested number of bytes is read.&lt;/p&gt;

&lt;p&gt;Looking more closely, neither r_buf_size nor w_buf_size have any effect in thrift_framed_transport; also, read_all should be used in read_frame... in any case, the best way to fix the tests for the current issue might be just to create a fake transport.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 37 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rniv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>