<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:34:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-5499] Receive timeout not triggered when response exceeds timeout</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-5499</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;When the client&apos;s timeout is set to valid value and the response exceeds this timeout there is no exception thrown.&lt;/p&gt;

&lt;p&gt;I&apos;ve provided a reproducible testcase&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13038931/13038931_THRIFT-ReceiveTimeout.zip&quot; title=&quot;THRIFT-ReceiveTimeout.zip attached to THRIFT-5499&quot;&gt;THRIFT-ReceiveTimeout.zip&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13423007">THRIFT-5499</key>
            <summary>Receive timeout not triggered when response exceeds timeout</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="Plumet">Plumet</assignee>
                                    <reporter username="Plumet">Plumet</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Jan 2022 10:17:43 +0000</created>
                <updated>Mon, 21 Mar 2022 20:31:02 +0000</updated>
                                            <version>0.15.0</version>
                    <version>0.16.0</version>
                                                    <component>netstd - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17477139" author="plumet" created="Mon, 17 Jan 2022 11:33:43 +0000"  >&lt;p&gt;I&apos;ve done a little research and here is my conclusion:&lt;/p&gt;

&lt;p&gt;The underlying operation that&apos;s used to read from the stream is ReadAsync. Reading asynchronously does not trigger the ReceiveTimeout.&#160;&lt;/p&gt;

&lt;p&gt;cfr. The .Net docs &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/system.net.sockets.socket.receivetimeout?view=net-6.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.microsoft.com/en-us/dotnet/api/system.net.sockets.socket.receivetimeout?view=net-6.0&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Gets or sets a value that specifies the amount of time after which a &lt;em&gt;synchronous&lt;/em&gt; Receive call will time out.&lt;/p&gt;

&lt;p&gt;cfr. The underlying winsock docs &lt;a href=&quot;https://docs.microsoft.com/en-us/windows/win32/winsock/sol-socket-socket-options:&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.microsoft.com/en-us/windows/win32/winsock/sol-socket-socket-options:&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The timeout, in milliseconds, for &lt;em&gt;blocking&lt;/em&gt; receive calls.&lt;/p&gt;

&lt;p&gt;Point is, when this value is set in the Thrift client, the client should be using blocking calls in a separate task/thread.&lt;/p&gt;</comment>
                            <comment id="17478218" author="jensg" created="Tue, 18 Jan 2022 21:25:09 +0000"  >&lt;p&gt;Feel free to send a pull request.&lt;/p&gt;</comment>
                            <comment id="17509260" author="jensg" created="Sat, 19 Mar 2022 12:26:26 +0000"  >&lt;p&gt;REOPEN: This actually breaks when used in a web scenario:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;System.InvalidOperationException&lt;br/&gt;
&#160; HResult=0x80131509&lt;br/&gt;
&#160; Nachricht = Synchronous operations are disallowed. Call ReadAsync or set AllowSynchronousIO to true instead.&lt;br/&gt;
&#160; Quelle = Microsoft.AspNetCore.Server.IIS&lt;br/&gt;
&#160; Stapel&#252;berwachung:&lt;br/&gt;
&#160; &#160;bei Microsoft.AspNetCore.Server.IIS.Core.HttpRequestStream.Read(Byte[] buffer, Int32 offset, Int32 count)&lt;br/&gt;
&#160; &#160;bei Microsoft.AspNetCore.Server.IIS.Core.WrappingStream.Read(Byte[] buffer, Int32 offset, Int32 count)&lt;br/&gt;
&#160; &#160;bei Thrift.Transport.Client.TStreamTransport.&amp;lt;&amp;gt;c_&lt;em&gt;DisplayClass15_0.&amp;lt;ReadAsync&amp;gt;b&lt;/em&gt;_0() in TStreamTransport.cs: Zeile84&lt;br/&gt;
&#160; &#160;bei System.Threading.Tasks.Task`1.InnerInvoke()&lt;br/&gt;
&#160; &#160;bei System.Threading.Tasks.Task.&amp;lt;&amp;gt;c.&amp;lt;.cctor&amp;gt;b__272_0(Object obj)&lt;br/&gt;
&#160; &#160;bei System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)&lt;/p&gt;</comment>
                            <comment id="17509980" author="plumet" created="Mon, 21 Mar 2022 16:17:03 +0000"  >&lt;p&gt;There are a couple of solutions to this problem:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&#160;Keep reading synchronously from the underlying stream and let the configuration of the clients change (AllowSynchronousIO).&lt;/li&gt;
	&lt;li&gt;Read asynchronously from the steam and use a timer and create a&#160; timeoutexception.&lt;/li&gt;
	&lt;li&gt;Remove the receive timeout in the configuration as it&apos;s not supported on asynchronous read operations.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="17510095" author="jensg" created="Mon, 21 Mar 2022 20:31:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;There are a couple of solutions to this problem:&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;One that works would suffice.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13038931" name="THRIFT-ReceiveTimeout.zip" size="1204777" author="Plumet" created="Mon, 17 Jan 2022 10:14:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>C#</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0yn6w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>