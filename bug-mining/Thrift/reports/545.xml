<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:03:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-1421] Debian Packages can not be built</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-1421</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Thrift/job/Thrift-Debian-Packages/92/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/S-Z/view/Thrift/job/Thrift-Debian-Packages/92/console&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;# Ruby library
cd /home/jenkins/jenkins-slave/workspace/Thrift-Debian-Packages/thrift/lib/rb	&amp;amp;&amp;amp; \
		ruby setup.rb config --installdirs=std &amp;amp;&amp;amp; \
		ruby setup.rb setup
ruby: No such file or directory -- setup.rb (LoadError)
make: *** [build-arch-stamp] Error 1
dpkg-buildpackage: error: debian/rules build gave error exit status 2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12530258">THRIFT-1421</key>
            <summary>Debian Packages can not be built</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jfarrell">Jake Farrell</assignee>
                                    <reporter username="roger">Roger Meier</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Nov 2011 12:10:14 +0000</created>
                <updated>Thu, 2 May 2013 02:29:46 +0000</updated>
                            <resolved>Fri, 9 Dec 2011 10:41:34 +0000</resolved>
                                                    <fixVersion>0.9</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13145036" author="jfarrell" created="Sun, 6 Nov 2011 16:41:30 +0000"  >&lt;p&gt;This was broken due to the switch to using bundler for the ruby gem. Attached is a patch to fix the debian build and include the gem in the debian/libthrift-ruby folder as it has handled previously. &lt;/p&gt;

&lt;p&gt;Since ruby is now offered as a gem I don&apos;t think we should include it as it has been, rather we should either switch to creating a ruby-thrift deb or just let gem pick the version up from rubygems.org. Thoughts?&lt;/p&gt;
</comment>
                            <comment id="13145082" author="roger.meier" created="Sun, 6 Nov 2011 19:20:59 +0000"  >&lt;p&gt;I&apos;m not a ruby user. However, if using gem is the most common way to install a ruby library and nobody needs a debian package, then we should remove ruby completely from the debian package build.&lt;/p&gt;</comment>
                            <comment id="13145102" author="hudson" created="Sun, 6 Nov 2011 20:56:10 +0000"  >&lt;p&gt;Integrated in Thrift #326 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/326/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/326/&lt;/a&gt;)&lt;br/&gt;
    Thrift-1421: Debian Packages can not be built (ruby build fails)&lt;br/&gt;
Client: deb&lt;br/&gt;
Patch: Jake Farrell&lt;/p&gt;

&lt;p&gt;Removing ruby from deb as it is now available as a gem.&lt;/p&gt;</comment>
                            <comment id="13145105" author="jfarrell" created="Sun, 6 Nov 2011 21:00:31 +0000"  >&lt;p&gt;Committed patch to remove ruby from debian build. CI is now failing on erlang jsx.&lt;/p&gt;</comment>
                            <comment id="13147124" author="hudson" created="Wed, 9 Nov 2011 15:58:14 +0000"  >&lt;p&gt;Integrated in Thrift #329 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/329/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/329/&lt;/a&gt;)&lt;br/&gt;
    Thrift-1421: Debian Packages can not be built&lt;br/&gt;
Client: debian&lt;br/&gt;
Patch: Jake Farrell&lt;/p&gt;

&lt;p&gt;Commenting out erlang from debian build until jsx can be fixed.&lt;/p&gt;</comment>
                            <comment id="13147153" author="jfarrell" created="Wed, 9 Nov 2011 17:00:25 +0000"  >&lt;p&gt;Build of Thrift Debian Package finished successfully: &lt;a href=&quot;https://builds.apache.org/job/Thrift-Debian-Packages/106/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift-Debian-Packages/106/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13158691" author="thepaul" created="Mon, 28 Nov 2011 19:52:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;m not a ruby user. However, if using gem is the most common way to install a ruby library and nobody needs a debian package, then we should remove ruby completely from the debian package build.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Strong -1 from a Debian developer here. While it&apos;s common for Ruby developers to get libraries as gems during development and testing, there are still a lot of good reasons for sticking to OS packages for deployment. Ideally, both a thrift gem and a ruby-thrift deb should be available.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Commenting out erlang from debian build until jsx can be fixed.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I recommend you remove the corresponding stanza from debian/control as well, or you&apos;ll get confusing empty libthrift-erlang packages lying around.&lt;/p&gt;</comment>
                            <comment id="13158704" author="jfarrell" created="Mon, 28 Nov 2011 20:02:38 +0000"  >&lt;p&gt;Removed Erlang from rules and control so libthrift-erlang will not be generated. I&apos;m fine with keeping libruby if it is easier for people than getting it from rubygems.&lt;/p&gt;</comment>
                            <comment id="13158730" author="hudson" created="Mon, 28 Nov 2011 20:29:47 +0000"  >&lt;p&gt;Integrated in Thrift #344 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/344/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/344/&lt;/a&gt;)&lt;br/&gt;
    Thrift-1421: Debian Packages can not be built&lt;/p&gt;

&lt;p&gt;Removing Erlang package from debian rules and control&lt;/p&gt;</comment>
                            <comment id="13163430" author="brandonarp" created="Tue, 6 Dec 2011 08:24:31 +0000"  >&lt;p&gt;I added ruby 1.9.1 and ruby 1.8 folders to the debian build, renamed the library ruby-thrift as per the new debian ruby packaging guidelines, set the ruby architecture to be all (just using ruby files right now, not native), and added mongrel and rake to the build deps for the deb package.  Rspec is a dependency, but the build doesn&apos;t work with the latest version, so you have to install that via gem.  It&apos;s not perfect, but it&apos;s a step in the right direction.&lt;/p&gt;</comment>
                            <comment id="13165141" author="roger.meier" created="Thu, 8 Dec 2011 10:37:05 +0000"  >&lt;p&gt;Hi Brandon&lt;br/&gt;
I have a question: Why do you rename libthrift-ruby to ruby-thrift ?&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-Package: libthrift-ruby
+Package: ruby-thrift
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Is this the common naming scheme for ruby libraries?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13165325" author="thepaul" created="Thu, 8 Dec 2011 16:54:21 +0000"  >&lt;p&gt;It is for Debian, as of wheezy (the version currently in development). See:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://wiki.debian.org/Teams/Ruby/Packaging#Guidelines_for_Ruby_packaging&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wiki.debian.org/Teams/Ruby/Packaging#Guidelines_for_Ruby_packaging&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;And while I haven&apos;t seen an official statement that Ubuntu is adopting the same policy, they have packaged gem2deb and a large number of Ruby libs with the new naming scheme are already in oneiric:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://packages.ubuntu.com/oneiric/ruby/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://packages.ubuntu.com/oneiric/ruby/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So, yeah.&lt;/p&gt;</comment>
                            <comment id="13165646" author="roger.meier" created="Thu, 8 Dec 2011 22:39:35 +0000"  >&lt;p&gt;Thanks for pointing out the details Paul!&lt;/p&gt;

&lt;p&gt;I really like to apply your patch, but I have the following build issue on Debian Squeeze:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;make[2]: Leaving directory `/tmp/thrift/lib/rb/ext&apos;
&amp;lt;internal:lib/rubygems/custom_require&amp;gt;:29:in `require&apos;: no such file to load -- mongrel (LoadError)
        from &amp;lt;internal:lib/rubygems/custom_require&amp;gt;:29:in `require&apos;
        from /tmp/thrift/lib/rb/lib/thrift/server/mongrel_http_server.rb:20:in `&amp;lt;top (required)&amp;gt;&apos;
        from &amp;lt;internal:lib/rubygems/custom_require&amp;gt;:29:in `require&apos;
        from &amp;lt;internal:lib/rubygems/custom_require&amp;gt;:29:in `require&apos;
        from spec/mongrel_http_server_spec.rb:21:in `&amp;lt;top (required)&amp;gt;&apos;
        from /usr/lib/ruby/1.9.1/spec/runner/example_group_runner.rb:15:in `load&apos;
        from /usr/lib/ruby/1.9.1/spec/runner/example_group_runner.rb:15:in `block in load_files&apos;
        from /usr/lib/ruby/1.9.1/spec/runner/example_group_runner.rb:14:in `each&apos;
        from /usr/lib/ruby/1.9.1/spec/runner/example_group_runner.rb:14:in `load_files&apos;
        from /usr/lib/ruby/1.9.1/spec/runner/options.rb:133:in `run_examples&apos;
        from /usr/lib/ruby/1.9.1/spec/runner/command_line.rb:9:in `run&apos;
        from /usr/bin/spec:3:in `&amp;lt;main&amp;gt;&apos;
rake aborted!
Command /usr/bin/ruby1.9.1 -I&quot;lib&quot;  &quot;/usr/bin/spec&quot; &quot;spec/base_protocol_spec.rb&quot; &quot;spec/base_transport_spec.rb&quot; &quot;spec/binary_protocol_accelerated_spec.rb&quot; &quot;spec/binary_protocol_spec.rb&quot; &quot;spec/client_spec.rb&quot; &quot;spec/exception_spec.rb&quot; &quot;spec/mongrel_http_server_spec.rb&quot; &quot;spec/processor_spec.rb&quot; &quot;spec/server_socket_spec.rb&quot; &quot;spec/socket_spec.rb&quot; &quot;spec/struct_spec.rb&quot; &quot;spec/union_spec.rb&quot; &quot;spec/compact_protocol_spec.rb&quot; &quot;spec/http_client_spec.rb&quot; &quot;spec/nonblocking_server_spec.rb&quot; &quot;spec/serializer_spec.rb&quot; &quot;spec/server_spec.rb&quot; &quot;spec/types_spec.rb&quot; &quot;spec/unix_socket_spec.rb&quot; --color failed
/usr/lib/ruby/1.9.1/spec/rake/spectask.rb:177:in `block (2 levels) in define&apos;
/usr/lib/ruby/1.9.1/rake.rb:1110:in `verbose&apos;
/usr/lib/ruby/1.9.1/spec/rake/spectask.rb:153:in `block in define&apos;
/usr/lib/ruby/1.9.1/rake.rb:634:in `call&apos;
/usr/lib/ruby/1.9.1/rake.rb:634:in `block in execute&apos;
/usr/lib/ruby/1.9.1/rake.rb:629:in `each&apos;
/usr/lib/ruby/1.9.1/rake.rb:629:in `execute&apos;
/usr/lib/ruby/1.9.1/rake.rb:595:in `block in invoke_with_call_chain&apos;
/usr/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize&apos;
/usr/lib/ruby/1.9.1/rake.rb:588:in `invoke_with_call_chain&apos;
/usr/lib/ruby/1.9.1/rake.rb:605:in `block in invoke_prerequisites&apos;
/usr/lib/ruby/1.9.1/rake.rb:602:in `each&apos;
/usr/lib/ruby/1.9.1/rake.rb:602:in `invoke_prerequisites&apos;
/usr/lib/ruby/1.9.1/rake.rb:594:in `block in invoke_with_call_chain&apos;
/usr/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize&apos;
/usr/lib/ruby/1.9.1/rake.rb:588:in `invoke_with_call_chain&apos;
/usr/lib/ruby/1.9.1/rake.rb:605:in `block in invoke_prerequisites&apos;
/usr/lib/ruby/1.9.1/rake.rb:602:in `each&apos;
/usr/lib/ruby/1.9.1/rake.rb:602:in `invoke_prerequisites&apos;
/usr/lib/ruby/1.9.1/rake.rb:594:in `block in invoke_with_call_chain&apos;
/usr/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize&apos;
/usr/lib/ruby/1.9.1/rake.rb:588:in `invoke_with_call_chain&apos;
/usr/lib/ruby/1.9.1/rake.rb:605:in `block in invoke_prerequisites&apos;
/usr/lib/ruby/1.9.1/rake.rb:602:in `each&apos;
/usr/lib/ruby/1.9.1/rake.rb:602:in `invoke_prerequisites&apos;
/usr/lib/ruby/1.9.1/rake.rb:594:in `block in invoke_with_call_chain&apos;
/usr/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize&apos;
/usr/lib/ruby/1.9.1/rake.rb:588:in `invoke_with_call_chain&apos;
/usr/lib/ruby/1.9.1/rake.rb:581:in `invoke&apos;
/usr/lib/ruby/1.9.1/rake.rb:2041:in `invoke_task&apos;
/usr/lib/ruby/1.9.1/rake.rb:2019:in `block (2 levels) in top_level&apos;
/usr/lib/ruby/1.9.1/rake.rb:2019:in `each&apos;
/usr/lib/ruby/1.9.1/rake.rb:2019:in `block in top_level&apos;
/usr/lib/ruby/1.9.1/rake.rb:2058:in `standard_exception_handling&apos;
/usr/lib/ruby/1.9.1/rake.rb:2013:in `top_level&apos;
/usr/lib/ruby/1.9.1/rake.rb:1992:in `run&apos;
/usr/bin/rake:28:in `&amp;lt;main&amp;gt;&apos;
make[1]: *** [all-local] Error 1
make[1]: Leaving directory `/tmp/thrift/lib/rb&apos;
make: *** [build-indep-stamp] Error 2
dpkg-buildpackage: error: debian/rules build gave error exit status 2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;any hints?&lt;/p&gt;</comment>
                            <comment id="13165748" author="brandonarp" created="Fri, 9 Dec 2011 01:50:33 +0000"  >&lt;p&gt;You&apos;ll need to install mongrel, rake and the rspec 1.3.2 gem to build the deb.  I believe that you&apos;ll need to install rspec as a gem as the apt repos can only have one version, and it&apos;s the incompatible rspec 2.0.&lt;/p&gt;</comment>
                            <comment id="13165771" author="jfarrell" created="Fri, 9 Dec 2011 02:17:18 +0000"  >&lt;p&gt;I had looked at switching over to rspec2 since this is a source of many issues with building the ruby lib but kept rpsec 1.3.2  due to the ci servers running the older version. Since you are trying to build on ruby 1.9.x you will also have to install mongrel --pre due to an current issue with mongrel.&lt;/p&gt;</comment>
                            <comment id="13166051" author="roger.meier" created="Fri, 9 Dec 2011 10:41:34 +0000"  >&lt;p&gt;Thank you all!&lt;/p&gt;

&lt;p&gt;I did the following minor edits and committed the patch:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;use rm -rf for cleaning up egg-info&lt;/li&gt;
	&lt;li&gt;remove ruby1.9.1-dev as build dependency (=&amp;gt; no external mongrel required)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-roger&lt;/p&gt;</comment>
                            <comment id="13166129" author="hudson" created="Fri, 9 Dec 2011 12:46:29 +0000"  >&lt;p&gt;Integrated in Thrift #357 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/357/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/357/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1421&quot; title=&quot;Debian Packages can not be built&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1421&quot;&gt;&lt;del&gt;THRIFT-1421&lt;/del&gt;&lt;/a&gt; Debian Packages can not be built&lt;br/&gt;
Patch: Brandon Arp&lt;br/&gt;
Fix: ruby build&lt;/p&gt;

&lt;p&gt;roger : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1212324&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1212324&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/thrift/trunk/contrib/debian/control&lt;/li&gt;
	&lt;li&gt;/thrift/trunk/contrib/debian/rules&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12524423">THRIFT-1357</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12506226" name="deb_ruby.patch.txt" size="2756" author="brandonarp" created="Tue, 6 Dec 2011 08:24:31 +0000"/>
                            <attachment id="12502674" name="thrift-1421.patch" size="1615" author="jfarrell" created="Sun, 6 Nov 2011 16:41:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>216040</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 50 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i083wf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>45231</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>