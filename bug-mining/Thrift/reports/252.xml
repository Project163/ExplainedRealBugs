<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:57:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-646] Erlang library is missing install target</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-646</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;The lib/erl/Makefile current contains&lt;/p&gt;

&lt;p&gt;install: all&lt;br/&gt;
    echo &apos;No install target, sorry.&apos;&lt;/p&gt;

&lt;p&gt;The attached Makefile.am includes both an install and uninstall target which places things into the correct erlang library directory for the installed erlang.  This means if someone has multiple erlangs install it will use whichever it finds first.&lt;/p&gt;

&lt;p&gt;Also attached is the patch to configrue.ac which causes automake to recognize the Makefile.am.&lt;/p&gt;

&lt;p&gt;The current lib/erl/Makefile should be removed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12443158">THRIFT-646</key>
            <summary>Erlang library is missing install target</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dreiss">David Reiss</assignee>
                                    <reporter username="djnym">Anthony Molinaro</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Dec 2009 23:48:19 +0000</created>
                <updated>Tue, 1 Nov 2011 02:52:09 +0000</updated>
                            <resolved>Thu, 19 Aug 2010 16:31:52 +0000</resolved>
                                    <version>0.2</version>
                                    <fixVersion>0.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12863210" author="bryanduxbury" created="Sun, 2 May 2010 22:40:49 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;</comment>
                            <comment id="12866207" author="dreiss" created="Tue, 11 May 2010 17:02:39 +0000"  >&lt;p&gt;Anyone care if I commit this follow-up patch?&lt;/p&gt;</comment>
                            <comment id="12875844" author="eletuchy" created="Sat, 5 Jun 2010 03:25:31 +0000"  >&lt;p&gt;Go for it. Though &lt;br/&gt;
&lt;a href=&quot;http://lists.gnu.org/archive/html/bug-autoconf/2010-05/msg00003.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://lists.gnu.org/archive/html/bug-autoconf/2010-05/msg00003.html&lt;/a&gt; is a little &lt;br/&gt;
off-putting.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Eugene&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="12899298" author="djnym" created="Tue, 17 Aug 2010 06:24:36 +0000"  >&lt;p&gt;Actually, I just noticed in trying out the 0.4.0 tar which supposedly fixes this that your update to my patch installs the library in the wrong place.  Instead of getting the install directory by asking erl where it is in the Makefile.am like&lt;/p&gt;

&lt;p&gt;ERL_LIB_ROOT_DIR=$(shell erl -eval &apos;io:format(&quot;~s~n&quot;, &lt;span class=&quot;error&quot;&gt;&amp;#91;code:lib_dir()&amp;#93;&lt;/span&gt;)&apos; -s init stop -noshell)&lt;/p&gt;

&lt;p&gt;you call a macro called AC_ERLANG_SUBST_INSTALL_LIB_DIR which for some reason is based on libdir?  There seems to be a macro called AC_ERLANG_SUBST_LIB_DIR which is equivalent to the line above in that it calls code:lib_dir() and uses that&lt;br/&gt;
as a substitution value.   So maybe change to AC_ERLANG_SUBST_LIB_DIR in configure.ac, and use $(ERLANG_LIB_DIR)/$(AC_PACKAGE_NAME)-$(AC_PACKAGE_VERSION) in place of $(ERLANG_INSTALL_LIB_DIR_thrift) in the lib/erl/Makefile.am?&lt;/p&gt;</comment>
                            <comment id="12899637" author="dreiss" created="Tue, 17 Aug 2010 22:53:27 +0000"  >&lt;p&gt;I think AC_ERLANG_SUBST_LIB_DIR is meant to find a working version of erlang and AC_ERLANG_SUBST_INSTALL_LIB_DIR is for where to install the packages.  Is there a reason you can&apos;t set libdir or the environment variable ERLANG_INSTALL_LIBDIR?  If so, we could possibly run AC_ERLANG_SUBST_LIB_DIR and seth the ERLANG_INSTALL_LIB_DIR environment variable to the result.&lt;/p&gt;</comment>
                            <comment id="12899737" author="djnym" created="Wed, 18 Aug 2010 05:41:37 +0000"  >
&lt;p&gt;I could set the environment variable, but I sort of  feel using erlang should be as easy to use as perl and python (both of which figure out the appropriate place to install on the system and put themselves there, but provide variable to override those choices).  I see looking at the m4 again that the AC_ERLANG_SUBST_INSTALL_LIB_SUBDIR does work with the ERLANG_INSTALL_LIB_DIR environment variable.  I just tried this&lt;/p&gt;


&lt;p&gt;AC_ERLANG_PATH_ERL&lt;br/&gt;
AC_ERLANG_PATH_ERLC&lt;br/&gt;
AC_ERLANG_SUBST_LIB_DIR&lt;br/&gt;
ERLANG_INSTALL_LIB_DIR=${ERLANG_LIB_DIR}&lt;br/&gt;
AC_ERLANG_SUBST_INSTALL_LIB_SUBDIR(AC_PACKAGE_NAME, AC_PACKAGE_VERSION)&lt;/p&gt;

&lt;p&gt;which appears to work, but only with autoconf 2.65, 2.63 did not work.  I guess it&apos;s some sort of bug with 2.63.&lt;/p&gt;

&lt;p&gt;Also for some reason even just doing&lt;/p&gt;

&lt;p&gt;ERLANG_INSTALL_LIB_DIR=`$ERL -eval &apos;io:format(&quot;~s~n&quot;, @&amp;lt;:@code:lib_dir()@:&amp;gt;@)&apos; -s init stop -noshell`&lt;/p&gt;

&lt;p&gt;failed in 2.63 but succeeded in 2.65.   Changing $ERL to erl does seem to work with 2.63 for whatever reason.&lt;br/&gt;
 Seems like this is a somewhat known issue &lt;a href=&quot;https://support.process-one.net/browse/EXMPP-35?focusedCommentId=41182&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://support.process-one.net/browse/EXMPP-35?focusedCommentId=41182&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Anyway, that makes the overriding of the environment variable in configure.ac seem sort of annoying.&lt;/p&gt;

&lt;p&gt;What I had before doing this in the Makefile.am worked fine.  You could guard a little bit by changing my use of erl with $ERL but that may fail for some odd reason as well.&lt;/p&gt;

&lt;p&gt;Hmm, well, I still think it would be best if erlang installed itself in a place it can just run,  the Makefile.am way I had originally seems to work regardless of autoconf version, so some variation of it might be best?&lt;/p&gt;</comment>
                            <comment id="12899917" author="dreiss" created="Wed, 18 Aug 2010 17:14:37 +0000"  >&lt;p&gt;Why don&apos;t we just make sure that all of our release tarballs are built with autoconf 2.65 or greater?&lt;/p&gt;</comment>
                            <comment id="12899957" author="djnym" created="Wed, 18 Aug 2010 18:54:09 +0000"  >&lt;p&gt;That works, I just created a small configure.ac with the lines in my last comment, then ran autoconf 2.63 on it, and checked that it failed.  Then updated to 2.65 reran autoconf, watched it succeed, then copied the configure script to a box with autoconf 2.59 and also watched it succeed.  So as long as we can guarantee the releaser is building with 2.65 or greater, I think we are good with adding&lt;/p&gt;

&lt;p&gt;AC_ERLANG_SUBST_LIB_DIR&lt;br/&gt;
ERLANG_INSTALL_LIB_DIR=${ERLANG_LIB_DIR}&lt;/p&gt;

&lt;p&gt;before the call to&lt;/p&gt;

&lt;p&gt;AC_ERLANG_SUBST_INSTALL_LIB_SUBDIR(AC_PACKAGE_NAME, AC_PACKAGE_VERSION)&lt;/p&gt;</comment>
                            <comment id="12900189" author="djnym" created="Thu, 19 Aug 2010 06:49:11 +0000"  >&lt;p&gt;If Brian is willing to do releases using autoconf 2.65 or greater when he does releases here&apos;s a patch for this problem.  If not, we&apos;ll have to back out to my original solution.&lt;/p&gt;</comment>
                            <comment id="12900299" author="mlum" created="Thu, 19 Aug 2010 15:00:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-858&quot; title=&quot;Have bootstrap.sh check for a suitable autoconf version before running&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-858&quot;&gt;&lt;del&gt;THRIFT-858&lt;/del&gt;&lt;/a&gt; will help ensure autoconf 2.65 or greater is used.&lt;/p&gt;</comment>
                            <comment id="12900308" author="bryanduxbury" created="Thu, 19 Aug 2010 15:18:14 +0000"  >&lt;p&gt;My autoconf is indeed 2.65.&lt;/p&gt;</comment>
                            <comment id="12900344" author="dreiss" created="Thu, 19 Aug 2010 16:31:52 +0000"  >&lt;p&gt;One downside of this is that it doesn&apos;t allow the erlang install dir to be overridden on the command line.  I think it will be a pretty easy fix if we ever have to do it, though.&lt;/p&gt;</comment>
                            <comment id="12902044" author="dreiss" created="Tue, 24 Aug 2010 19:55:56 +0000"  >&lt;p&gt;Looks like this broke the build on machines without erlang?  Patch attached.&lt;/p&gt;</comment>
                            <comment id="12902054" author="djnym" created="Tue, 24 Aug 2010 20:19:57 +0000"  >&lt;p&gt;Looks good to me.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12452965" name="ASF.LICENSE.NOT.GRANTED--v1-0001-THRIFT-646.-erlang-Fix-build-on-machines-without-Erl.patch" size="1276" author="dreiss" created="Tue, 24 Aug 2010 19:55:19 +0000"/>
                            <attachment id="12443652" name="ASF.LICENSE.NOT.GRANTED--v1-0001-THRIFT-646.-erlang-Misc-build-cleanups.patch" size="3268" author="dreiss" created="Tue, 4 May 2010 22:37:39 +0000"/>
                            <attachment id="12427796" name="Makefile.am" size="1764" author="djnym" created="Fri, 11 Dec 2009 23:50:07 +0000"/>
                            <attachment id="12427797" name="erl.patch" size="333" author="djnym" created="Fri, 11 Dec 2009 23:50:07 +0000"/>
                            <attachment id="12452491" name="erlang-install-dir.patch" size="470" author="djnym" created="Thu, 19 Aug 2010 06:49:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37903</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 14 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16be7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244978</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>