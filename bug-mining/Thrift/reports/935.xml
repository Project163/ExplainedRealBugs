<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:12:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-2460] unopened socket fd must be less than zero.</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-2460</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;ThriftSocket-&amp;gt;sd is 0 when initialized.&lt;br/&gt;
But socket() function return a fd number greater than &lt;b&gt;equal&lt;/b&gt; 0.&lt;br/&gt;
So, ThriftSocket-&amp;gt;sd must be less than 0 in initialize function.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12707871">THRIFT-2460</key>
            <summary>unopened socket fd must be less than zero.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jensg">Jens Geyer</assignee>
                                    <reporter username="hsleep">Jaesang Kim</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Apr 2014 04:27:12 +0000</created>
                <updated>Fri, 18 Apr 2014 16:59:49 +0000</updated>
                            <resolved>Tue, 15 Apr 2014 19:16:53 +0000</resolved>
                                    <version>0.9.1</version>
                                    <fixVersion>0.9.2</fixVersion>
                                    <component>C glib - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13967188" author="jensg" created="Fri, 11 Apr 2014 22:38:04 +0000"  >&lt;p&gt;According to &lt;a href=&quot;http://pubs.opengroup.org/onlinepubs/009695399/functions/socket.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://pubs.opengroup.org/onlinepubs/009695399/functions/socket.html&lt;/a&gt;, it seems you are correct (&quot;non-negative integer&quot;). &lt;br/&gt;
May I ask ...&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;...  if by accident you already have a patch&lt;/li&gt;
	&lt;li&gt;... whether you run into an real issue with the actual behaviour, or if you just spotted it by reading the code?&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="13968127" author="hsleep" created="Mon, 14 Apr 2014 06:51:05 +0000"  >&lt;p&gt;this is a my patch to set unopened socket fd to negative integer.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jensg&quot; class=&quot;user-hover&quot; rel=&quot;jensg&quot;&gt;jensg&lt;/a&gt;&lt;br/&gt;
In daemon process, usually close STDIN(fd 0) and fd 0 reused anywhere in the process. So, have to use -1 for a invalid socket.&lt;br/&gt;
e.g.) In thrift CPP library, used THRIFT_INVALID_SOCKET(-1) for a invalid one.&lt;/p&gt;</comment>
                            <comment id="13968795" author="jensg" created="Mon, 14 Apr 2014 20:25:44 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hsleep&quot; class=&quot;user-hover&quot; rel=&quot;hsleep&quot;&gt;hsleep&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;thanks for the patch. Unfortunately, I have some problems with it, which should be adressed:&lt;/p&gt;

&lt;p&gt;1. there should be &lt;b&gt;exactly one definition&lt;/b&gt; of &lt;tt&gt;#define THRIFT_INVALID_SOCKET (-1)&lt;/tt&gt;, not three.&lt;br/&gt;
2. on Windows, there is a predefined constant &lt;tt&gt;INVALID_SOCKET&lt;/tt&gt; which should be used instead of &lt;tt&gt;(-1)&lt;/tt&gt;, if available&lt;/p&gt;

&lt;p&gt;Could you please fix this?&lt;/p&gt;</comment>
                            <comment id="13969346" author="hsleep" created="Tue, 15 Apr 2014 08:43:17 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jensg&quot; class=&quot;user-hover&quot; rel=&quot;jensg&quot;&gt;jensg&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;1. I updated my patch for exactly one definition of &lt;tt&gt;THRIFT_INVALID_SOCKET&lt;/tt&gt;.&lt;br/&gt;
2. I think that the thrift c_glib can&apos;t be used in Windows. To use c_glib in windows so many code work is needed. It&apos;s beyond this issue.&lt;/p&gt;</comment>
                            <comment id="13969943" author="jensg" created="Tue, 15 Apr 2014 19:16:53 +0000"  >&lt;p&gt;Many thanks, committed.&lt;/p&gt;</comment>
                            <comment id="13970196" author="hudson" created="Tue, 15 Apr 2014 23:31:22 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1131 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1131/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1131/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2460&quot; title=&quot;unopened socket fd must be less than zero.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2460&quot;&gt;&lt;del&gt;THRIFT-2460&lt;/del&gt;&lt;/a&gt; unopened socket fd must be less than zero. (jensg: rev 2f75e2daa3af5f2ee899a3e57166c54bbe0499e3)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/c_glib/src/thrift/c_glib/transport/thrift_server_socket.c&lt;/li&gt;
	&lt;li&gt;lib/c_glib/src/thrift/c_glib/transport/thrift_socket.c&lt;/li&gt;
	&lt;li&gt;lib/c_glib/src/thrift/c_glib/transport/thrift_transport.h&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13973935" author="jeweljar" created="Fri, 18 Apr 2014 09:56:17 +0000"  >&lt;p&gt;On Windows, SOCKET is unsigned int, and INVALID_SOCKET is (~0).&lt;br/&gt;
So, you can use (-1) for the THRIFT_INVALID_SOCKET on Windows, as well.&lt;br/&gt;
(~0) is more appropriate for unsigned int, but no difference between (-1) and (~0), practically.&lt;/p&gt;</comment>
                            <comment id="13974251" author="jensg" created="Fri, 18 Apr 2014 16:59:49 +0000"  >&lt;p&gt;That&apos;s why I commented above. I still think it&apos;s a good idea and will gladly review any patches to that extent. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12640223" name="thrift-2460-unopened_socket_set_to_negative_integer.patch" size="3903" author="hsleep" created="Tue, 15 Apr 2014 08:43:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386194</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 31 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uj2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386459</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>