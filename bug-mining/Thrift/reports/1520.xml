<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:23:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3616] lib/py/test/test_sslsocket.py is flaky</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3616</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;As seen here: &lt;a href=&quot;https://builds.apache.org/job/Thrift-precommit/86/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift-precommit/86/console&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;...
/usr/bin/python3 test/thrift_json.py
.
----------------------------------------------------------------------
Ran 1 test in 0.011s

OK
/usr/bin/python3 test/test_sslsocket.py
.FFFsys:1: ResourceWarning: unclosed &amp;lt;ssl.SSLSocket fd=4, family=AddressFamily.AF_INET6, type=SocketKind.SOCK_STREAM, proto=0, laddr=(&apos;::1&apos;, 23458, 0, 0), raddr=(&apos;::1&apos;, 41151, 0, 0)&amp;gt;
F/thrift/lib/py/build/lib/thrift/transport/TSSLSocket.py:253: DeprecationWarning: validate is deprecated. Use cert_reqs=ssl.CERT_REQUIRED instead
  DeprecationWarning)
/thrift/lib/py/build/lib/thrift/transport/TSSLSocket.py:253: DeprecationWarning: validate is deprecated. Use cert_reqs=ssl.CERT_NONE instead
  DeprecationWarning)
.sys:1: ResourceWarning: unclosed &amp;lt;ssl.SSLSocket fd=5, family=AddressFamily.AF_INET6, type=SocketKind.SOCK_STREAM, proto=0, laddr=(&apos;::1&apos;, 23458, 0, 0), raddr=(&apos;::1&apos;, 41155, 0, 0)&amp;gt;
F/thrift/lib/py/build/lib/thrift/transport/TSSLSocket.py:265: DeprecationWarning: Use cert_reqs instead
  warnings.warn(&apos;Use cert_reqs instead&apos;, DeprecationWarning)
.sys:1: ResourceWarning: unclosed &amp;lt;ssl.SSLSocket fd=4, family=AddressFamily.AF_INET6, type=SocketKind.SOCK_STREAM, proto=0, laddr=(&apos;::1&apos;, 23458, 0, 0), raddr=(&apos;::1&apos;, 41157, 0, 0)&amp;gt;
Exception in thread Thread-11:
Traceback (most recent call last):
  File &quot;/usr/lib/python3.4/threading.py&quot;, line 920, in _bootstrap_inner
    self.run()
  File &quot;test/test_sslsocket.py&quot;, line 60, in run
    self.client = self._server.accept()
  File &quot;/thrift/lib/py/build/lib/thrift/transport/TSSLSocket.py&quot;, line 418, in accept
    client = self._wrap_socket(plain_client)
  File &quot;/thrift/lib/py/build/lib/thrift/transport/TSSLSocket.py&quot;, line 181, in _wrap_socket
    server_hostname=self._server_hostname)
  File &quot;/usr/lib/python3.4/ssl.py&quot;, line 365, in wrap_socket
    _context=self)
  File &quot;/usr/lib/python3.4/ssl.py&quot;, line 601, in __init__
    self.do_handshake()
  File &quot;/usr/lib/python3.4/ssl.py&quot;, line 828, in do_handshake
    self._sslobj.do_handshake()
ConnectionResetError: [Errno 104] Connection reset by peer

PROTOCOL_SSLv2 is not available
..test/test_sslsocket.py:59: ResourceWarning: unclosed &amp;lt;socket.socket fd=3, family=AddressFamily.AF_UNIX, type=SocketKind.SOCK_STREAM, proto=0&amp;gt;
  self._server.listen()
.
======================================================================
FAIL: test_client_cert (__main__.TSSLSocketTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File &quot;test/test_sslsocket.py&quot;, line 210, in test_client_cert
    self._assert_connection_success(server, client)
  File &quot;test/test_sslsocket.py&quot;, line 112, in _assert_connection_success
    self.assertTrue(acc.client is not None)
AssertionError: False is not true

======================================================================
FAIL: test_deprecation (__main__.TSSLSocketTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File &quot;test/test_sslsocket.py&quot;, line 138, in test_deprecation
    self.assertEqual(len(w), 3)
AssertionError: 4 != 3

======================================================================
FAIL: test_newer_tls (__main__.TSSLSocketTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File &quot;test/test_sslsocket.py&quot;, line 268, in test_newer_tls
    self._assert_connection_success(server, client)
  File &quot;test/test_sslsocket.py&quot;, line 112, in _assert_connection_success
    self.assertTrue(acc.client is not None)
AssertionError: False is not true

======================================================================
FAIL: test_server_cert (__main__.TSSLSocketTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File &quot;test/test_sslsocket.py&quot;, line 172, in test_server_cert
    self._assert_connection_success(server, client)
  File &quot;test/test_sslsocket.py&quot;, line 112, in _assert_connection_success
    self.assertTrue(acc.client is not None)
AssertionError: False is not true

======================================================================
FAIL: test_set_server_cert (__main__.TSSLSocketTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File &quot;test/test_sslsocket.py&quot;, line 191, in test_set_server_cert
    self._assert_connection_success(server, client)
  File &quot;test/test_sslsocket.py&quot;, line 112, in _assert_connection_success
    self.assertTrue(acc.client is not None)
AssertionError: False is not true

----------------------------------------------------------------------
Ran 11 tests in 5.240s

FAILED (failures=5)
make[3]: *** [py3-test] Error 1
make[3]: Leaving directory `/thrift/lib/py&apos;
make[2]: *** [check-am] Error 2
make[2]: Leaving directory `/thrift/lib/py&apos;
make[1]: *** [check-recursive] Error 1
make[1]: Leaving directory `/thrift/lib&apos;
make: *** [check-recursive] Error 1
Build step &apos;Execute shell&apos; marked build as failure
[WARNINGS] Skipping publisher since build result is FAILURE
[TASKS] Skipping publisher since build result is FAILURE
Archiving artifacts
Compressed 47.75 MB of artifacts by 95.2% relative to #55
Publishing Javadoc
Update relevant JIRA issues is waiting for a checkpoint on Thrift-precommit #85
Sending e-mails to: dev@thrift.apache.org
Finished: FAILURE
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A quick check shows timing issues &lt;a href=&quot;https://github.com/apache/thrift/commit/f07b4a14dfc30a397d49b18c3f50230a08310bd1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;flaky precedent&lt;/a&gt; - it may be the same issue, have not dug yet.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12938616">THRIFT-3616</key>
            <summary>lib/py/test/test_sslsocket.py is flaky</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsirois">John Sirois</assignee>
                                    <reporter username="jsirois">John Sirois</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Feb 2016 20:29:46 +0000</created>
                <updated>Fri, 19 Feb 2016 02:17:48 +0000</updated>
                            <resolved>Fri, 12 Feb 2016 17:34:21 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Python - Library</component>
                    <component>Test Suite</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15143462" author="jsirois" created="Thu, 11 Feb 2016 20:31:25 +0000"  >&lt;p&gt;Seen multiple times over the course of working &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3608&quot; title=&quot;lib/cpp/test/SecurityTest is flaky in jenkins Thrift-precommit build.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3608&quot;&gt;&lt;del&gt;THRIFT-3608&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15143466" author="jsirois" created="Thu, 11 Feb 2016 20:32:44 +0000"  >&lt;p&gt;/cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nsuke&quot; class=&quot;user-hover&quot; rel=&quot;nsuke&quot;&gt;nsuke&lt;/a&gt; - I&apos;m going to work this presently since I&apos;m on a quest to get a green jenkins Thrift-precommit job, but I may turn it over to you since you&apos;re expert in this slice of the codebase if I have trouble making progress today.&lt;/p&gt;</comment>
                            <comment id="15143542" author="jsirois" created="Thu, 11 Feb 2016 21:30:36 +0000"  >&lt;p&gt;OK - I have a delay-free way to fix this that also speeds up the test, just need to polish and I&apos;ll have a PR shortly.&lt;/p&gt;

&lt;p&gt;Before: Ran 11 tests in 8.213s&lt;br/&gt;
After: Ran 11 tests in 0.284s&lt;/p&gt;</comment>
                            <comment id="15144683" author="jsirois" created="Fri, 12 Feb 2016 15:14:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/thrift/pull/850&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/850&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15144730" author="githubbot" created="Fri, 12 Feb 2016 15:45:44 +0000"  >&lt;p&gt;Github user jsirois commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/850#issuecomment-183379947&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/850#issuecomment-183379947&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Noting that Jenkins CI failed on lib/cpp/test/SecurityTest.cpp before getting to test_sslsocket.py.&lt;br/&gt;
    I have a fix for the SecurityTest in #848 that still needs review attention so I&apos;ll mark &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3616&quot; title=&quot;lib/py/test/test_sslsocket.py is flaky&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3616&quot;&gt;&lt;del&gt;THRIFT-3616&lt;/del&gt;&lt;/a&gt; as blocked on &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3608&quot; title=&quot;lib/cpp/test/SecurityTest is flaky in jenkins Thrift-precommit build.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3608&quot;&gt;&lt;del&gt;THRIFT-3608&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15144915" author="nsuke" created="Fri, 12 Feb 2016 17:34:21 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                            <comment id="15144917" author="nsuke" created="Fri, 12 Feb 2016 17:35:33 +0000"  >&lt;p&gt;Just a small tips: include THRIFT-XXXX (3616 in this case) to your pull request title in the future, and everything there will be logged here too.&lt;/p&gt;</comment>
                            <comment id="15144928" author="jsirois" created="Fri, 12 Feb 2016 17:38:41 +0000"  >&lt;p&gt;Ah yes, I misread 8 and 9 here: &lt;a href=&quot;https://thrift.apache.org/docs/HowToContribute#contributing-via-github-pull-requests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://thrift.apache.org/docs/HowToContribute#contributing-via-github-pull-requests&lt;/a&gt;&lt;br/&gt;
Will do going forward.&lt;/p&gt;</comment>
                            <comment id="15144950" author="jsirois" created="Fri, 12 Feb 2016 17:51:11 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nsuke&quot; class=&quot;user-hover&quot; rel=&quot;nsuke&quot;&gt;nsuke&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="15145032" author="hudson" created="Fri, 12 Feb 2016 18:40:28 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift-precommit #95 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift-precommit/95/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift-precommit/95/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3616&quot; title=&quot;lib/py/test/test_sslsocket.py is flaky&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3616&quot;&gt;&lt;del&gt;THRIFT-3616&lt;/del&gt;&lt;/a&gt; Improve TSSLSocketTest robustness. Client: Test (Python) (nsuke: &lt;a href=&quot;https://github.com/apache/thrift/commit/ac06704a0c62df9ca03782cb05b0f8cc05387a45&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/commit/ac06704a0c62df9ca03782cb05b0f8cc05387a45&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/py/test/test_sslsocket.py&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12938204">THRIFT-3608</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 40 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sqnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>