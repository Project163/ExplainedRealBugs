<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:32:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-5144] Fix memory leak when generate deserialize list element</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-5144</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;The memory leak was triggered on calling generate_deserialize_list_element() function when the elements&apos;s type is numeric.The memory leak was triggered on calling generate_deserialize_list_element() function when the elements&apos;s type is numeric. The elements have been malloced, but they have not been freed. The elements need to be freed after adding in array.&lt;/p&gt;

&lt;p&gt;Leak:&lt;br/&gt;
Direct leak of 20 byte(s) in 5 object(s) allocated from:&lt;br/&gt;
    #0 0x7f0d7e5adae8 in __interceptor_malloc (/usr/lib64/libasan.so.5+0xefae8)&lt;br/&gt;
    #1 0x7f0d7d5dc1d5 in g_malloc (/usr/lib64/libglib-2.0.so.0+0x531d5)&lt;br/&gt;
    #2 0x427d91 in t_test_thrift_test_client_recv_test_list gen-c_glib/t_test_thrift_test.c:2845&lt;br/&gt;
    #3 0x42827c in t_test_thrift_test_client_test_list gen-c_glib/t_test_thrift_test.c:2891&lt;br/&gt;
    #4 0x417f68 in t_test_thrift_test_if_test_list gen-c_glib/t_test_thrift_test.c:93&lt;br/&gt;
    #5 0x40eb74 in main src/test_client.c:1048&lt;br/&gt;
    #6 0x7f0d7cdc0872 in __libc_start_main (/usr/lib64/libc.so.6+0x23872)&lt;br/&gt;
    #7 0x404e4d in _start (/mnt/hgfs/share/thrift-0.13.0/test/c_glib/.libs/test_client+0x404e4d)&lt;/p&gt;

&lt;p&gt;Direct leak of 20 byte(s) in 5 object(s) allocated from:&lt;br/&gt;
    #0 0x7f6e884a0ae8 in __interceptor_malloc (/usr/lib64/libasan.so.5+0xefae8)&lt;br/&gt;
    #1 0x7f6e874cf1d5 in g_malloc (/usr/lib64/libglib-2.0.so.0+0x531d5)&lt;br/&gt;
    #2 0x482e86 in t_test_thrift_test_test_list_args_read gen-c_glib/t_test_thrift_test_types.c:16790&lt;br/&gt;
    #3 0x7f6e88170865 in thrift_struct_read src/thrift/c_glib/thrift_struct.c:30&lt;br/&gt;
    #4 0x42f3d1 in t_test_thrift_test_processor_process_test_list gen-c_glib/t_test_thrift_test.c:6253&lt;br/&gt;
    #5 0x4340fc in t_test_thrift_test_processor_dispatch_call gen-c_glib/t_test_thrift_test.c:7178&lt;br/&gt;
    #6 0x7f6e881722f0 in thrift_dispatch_processor_process src/thrift/c_glib/processor/thrift_dispatch_processor.c:56&lt;br/&gt;
    #7 0x7f6e881967df in thrift_simple_server_serve src/thrift/c_glib/server/thrift_simple_server.c:58&lt;br/&gt;
    #8 0x7f6e88195668 in thrift_server_serve src/thrift/c_glib/server/thrift_server.c:108&lt;br/&gt;
    #9 0x409311 in main src/test_server.c:278&lt;br/&gt;
    #10 0x7f6e86cb3872 in __libc_start_main (/usr/lib64/libc.so.6+0x23872)&lt;br/&gt;
    #11 0x4049ed in _start (/mnt/hgfs/share/thrift-0.13.0/test/c_glib/.libs/test_server+0x4049ed)&lt;/p&gt;

&lt;p&gt;The old code:&lt;br/&gt;
&#160;/* iterate through list elements */&lt;br/&gt;
for (i = 0; i &amp;lt; size; i++)&lt;/p&gt;
{
  gint32* _elem31 = g_new (gint32, 1);
  if ((ret = thrift_protocol_read_i32 (protocol, &amp;amp;*_elem31, error)) &amp;lt; 0)
	return -1;
  xfer += ret;
  g_array_append_vals (this_object-&amp;gt;newlist, _elem31, 1);
}

&lt;p&gt;The new code:&lt;br/&gt;
/* iterate through list elements */&lt;br/&gt;
for (i = 0; i &amp;lt; size; i++)&lt;/p&gt;
{
  gint32* _elem31 = g_new (gint32, 1);
  if ((ret = thrift_protocol_read_i32 (protocol, &amp;amp;*_elem31, error)) &amp;lt; 0)
	return -1;
  xfer += ret;
  g_array_append_vals (this_object-&amp;gt;newlist, _elem31, 1);
  g_free (_elem31);
}</description>
                <environment></environment>
        <key id="13293105">THRIFT-5144</key>
            <summary>Fix memory leak when generate deserialize list element</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wangyunjian">wangyunjian</assignee>
                                    <reporter username="wangyunjian">wangyunjian</reporter>
                        <labels>
                    </labels>
                <created>Sat, 21 Mar 2020 14:32:27 +0000</created>
                <updated>Thu, 11 Feb 2021 22:27:33 +0000</updated>
                            <resolved>Sat, 27 Jun 2020 13:26:10 +0000</resolved>
                                    <version>0.13.0</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>C glib - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13235388">THRIFT-4873</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 34 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0crow:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>