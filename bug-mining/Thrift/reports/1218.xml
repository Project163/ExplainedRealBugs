<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:17:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3062] C++ TServerSocket invalid port number (over 999999) causes stack corruption</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3062</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;In &lt;tt&gt;TServerSocket::listen()&lt;/tt&gt; a buffer of size 7 is allocated for the string to numeric translation of the port number, defined as &lt;tt&gt;int&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  char port[sizeof(&quot;65536&quot;) + 1];
  ...
  sprintf(port, &quot;%d&quot;, port_);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;An input of 1000000 or more will cause stack corruption.  Recommend changing sprintf to something safer, or making a larger buffer.  In this case, one can safely allocate a fixed size buffer on the stack to accomodate the largest result possible, avoiding the problem.  Alternatively, ensure the input is bound, which is what &lt;tt&gt;TSocket::localOpen()&lt;/tt&gt; does.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12786810">THRIFT-3062</key>
            <summary>C++ TServerSocket invalid port number (over 999999) causes stack corruption</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jking3">James E. King III</assignee>
                                    <reporter username="jking3">James E. King III</reporter>
                        <labels>
                            <label>security</label>
                    </labels>
                <created>Mon, 30 Mar 2015 18:41:52 +0000</created>
                <updated>Tue, 21 Jul 2015 02:21:16 +0000</updated>
                            <resolved>Mon, 4 May 2015 13:36:09 +0000</resolved>
                                    <version>0.9.2</version>
                                    <fixVersion>0.9.3</fixVersion>
                                    <component>C++ - Library</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14389183" author="jking3" created="Tue, 31 Mar 2015 18:53:09 +0000"  >&lt;p&gt;I have attached a patch for this.  Note that this particular patch depends on my patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1025&quot; title=&quot;C++ ServerSocket should inherit from Socket with the necessary Ctor to listen on connections from a specific host (similar to perl library)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1025&quot;&gt;&lt;del&gt;THRIFT-1025&lt;/del&gt;&lt;/a&gt; being applied first because that one adds unit testing on new code introduced to TServerSocket, and this patch extends the unit test for TServerSocket with an additional test case.&lt;/p&gt;</comment>
                            <comment id="14393878" author="jking3" created="Fri, 3 Apr 2015 01:17:53 +0000"  >&lt;p&gt;To properly test this, I&apos;d like to have the unit test framework for TServerSocket in place from &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1025&quot; title=&quot;C++ ServerSocket should inherit from Socket with the necessary Ctor to listen on connections from a specific host (similar to perl library)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1025&quot;&gt;&lt;del&gt;THRIFT-1025&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14395902" author="githubbot" created="Sat, 4 Apr 2015 19:48:54 +0000"  >&lt;p&gt;GitHub user jeking3 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/425&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/425&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3062&quot; title=&quot;C++ TServerSocket invalid port number (over 999999) causes stack corruption&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3062&quot;&gt;&lt;del&gt;THRIFT-3062&lt;/del&gt;&lt;/a&gt; fix segfault on invalid port number&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jeking3/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jeking3/thrift&lt;/a&gt; bugfix/&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3062&quot; title=&quot;C++ TServerSocket invalid port number (over 999999) causes stack corruption&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3062&quot;&gt;&lt;del&gt;THRIFT-3062&lt;/del&gt;&lt;/a&gt;-invalid-port-number-segfault&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/425.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/425.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #425&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 9d5654389daab6ab6be6bdae110a1acede51e945&lt;br/&gt;
Author: Jim King &amp;lt;jim.king@simplivity.com&amp;gt;&lt;br/&gt;
Date:   2015-04-04T19:47:34Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3062&quot; title=&quot;C++ TServerSocket invalid port number (over 999999) causes stack corruption&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3062&quot;&gt;&lt;del&gt;THRIFT-3062&lt;/del&gt;&lt;/a&gt; fix segfault on invalid port number&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14492907" author="jking3" created="Mon, 13 Apr 2015 19:19:15 +0000"  >&lt;p&gt;This is ready to be merged.&lt;/p&gt;</comment>
                            <comment id="14494612" author="githubbot" created="Tue, 14 Apr 2015 19:07:21 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/425&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/425&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14494615" author="roger.meier" created="Tue, 14 Apr 2015 19:08:24 +0000"  >&lt;p&gt;Thanks Jim!&lt;/p&gt;
</comment>
                            <comment id="14494712" author="hudson" created="Tue, 14 Apr 2015 19:27:41 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1507 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1507/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1507/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3062&quot; title=&quot;C++ TServerSocket invalid port number (over 999999) causes stack corruption&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3062&quot;&gt;&lt;del&gt;THRIFT-3062&lt;/del&gt;&lt;/a&gt; fix segfault on invalid port number (roger: rev efd14e7c2521c3210531f1893719905ea8a0835e)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/cpp/test/TServerSocketTest.cpp&lt;/li&gt;
	&lt;li&gt;lib/cpp/src/thrift/transport/TServerSocket.cpp&lt;/li&gt;
	&lt;li&gt;lib/cpp/test/TTransportCheckThrow.h&lt;/li&gt;
	&lt;li&gt;lib/cpp/src/thrift/transport/TSocket.cpp&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12493684">THRIFT-1025</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12708496" name="THRIFT-3062.patch" size="4065" author="jking3" created="Tue, 31 Mar 2015 18:53:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i27jzr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>