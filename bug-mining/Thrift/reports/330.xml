<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:58:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-920] C++ Test and Tutorial does not compile anymore due to the change within Enum handling</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-920</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;This patch changes the following files, to support the new more powerful enumeration handling introduced since 0.4.0&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;M      test/cpp/Thrift-test.mk
M      test/cpp/src/TestClient.cpp
M      test/cpp/src/TestServer.cpp
M      tutorial/cpp/CppClient.cpp
M      tutorial/cpp/CppServer.cpp
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;changes e.g.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-    crazy.userMap.insert(make_pair(EIGHT, 8));
+    crazy.userMap.insert(make_pair(Numberz::EIGHT, 8));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="12475118">THRIFT-920</key>
            <summary>C++ Test and Tutorial does not compile anymore due to the change within Enum handling</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roger">Roger Meier</assignee>
                                    <reporter username="roger">Roger Meier</reporter>
                        <labels>
                    </labels>
                <created>Sun, 26 Sep 2010 01:07:01 +0000</created>
                <updated>Mon, 27 Sep 2010 17:26:32 +0000</updated>
                            <resolved>Mon, 27 Sep 2010 17:26:32 +0000</resolved>
                                    <version>0.5</version>
                                    <fixVersion>0.5</fixVersion>
                                    <component>C++ - Library</component>
                    <component>Test Suite</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12915004" author="roger.meier" created="Sun, 26 Sep 2010 17:15:49 +0000"  >&lt;p&gt;TestClient, TestServer and tutorial should compile as long as they are distributed with a release, so please commit for 0.5&lt;/p&gt;</comment>
                            <comment id="12915010" author="clavoie" created="Sun, 26 Sep 2010 18:03:57 +0000"  >&lt;p&gt;On my box (Mac OS X 10.6; gcc 4.2, boost 1.44) the patch I&apos;m attaching is needed to make the test compile (it&apos;s a superset of Roger&apos;s).&lt;/p&gt;

&lt;p&gt;Roger, can you try it out and let me know if it&apos;s kosher on your box too?&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Darwin -- 10.4.0 Darwin Kernel Version 10.4.0: Fri Apr 23 18:28:53 PDT 2010; root:xnu-1504.7.4~1/RELEASE_I386 i386

i686-apple-darwin10-g++-4.2.1 (GCC) 4.2.1 (Apple Inc. build 5664)

boost                          @1.44.0         devel/boost
boost-jam                      @3.1.18         devel/boost-jam
gcc45                          @4.5.1          lang/gcc45
libevent                       @1.4.14b        devel/libevent
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12915024" author="roger.meier" created="Sun, 26 Sep 2010 19:31:01 +0000"  >&lt;p&gt;Christian, I had a look on your patch. It work&apos;s.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if this is the proper solution:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;remove &lt;em&gt;using namespace boost;&lt;/em&gt; from TestServer.cpp and use &lt;em&gt;boost::shared_ptr&lt;/em&gt; instead of &lt;em&gt;shared_ptr&lt;/em&gt;&lt;/li&gt;
	&lt;li&gt;using string without namespace prefix works on other files you use as well&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;could you please use the original patch and add the following include to TestServer.cpp:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;#include &amp;lt;boost/shared_ptr.hpp&amp;gt;

&lt;span class=&quot;code-comment&quot;&gt;// maybe also
&lt;/span&gt;#include &amp;lt;string&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12915026" author="clavoie" created="Sun, 26 Sep 2010 19:42:21 +0000"  >&lt;p&gt;Actually, the problem is that without my patch boost::exception and std::exception are clashing:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;~/ports/src/thrift-svn-test-920/test/cpp moosefish$ boost_home=/opt/local/include make -f Thrift-test.mk 
../../compiler/cpp/thrift --gen cpp ../ThriftTest.thrift
g++ -o TestServer -Wall -O3 -I. -I./gen-cpp -I../../lib/cpp/src -I/opt/local/include -L../../lib/cpp/.libs -lthrift -lthriftnb -levent src/TestServer.cpp ./gen-cpp/ThriftTest.cpp ./gen-cpp/ThriftTest_types.cpp ../../lib/cpp/test/ThriftTest_extras.cpp
src/TestServer.cpp: In function &apos;int main(int, char**)&apos;:
src/TestServer.cpp:356: error: reference to &apos;exception&apos; is ambiguous
/opt/local/include/boost/exception/exception.hpp:194: error: candidates are: class boost::exception
/usr/include/c++/4.2.1/exception:57: error:                 class std::exception
src/TestServer.cpp:356: error: expected type-specifier before &apos;exception&apos;
src/TestServer.cpp:356: error: expected `)&apos; before &apos;&amp;amp;&apos; token
src/TestServer.cpp:356: error: expected `{&apos; before &apos;&amp;amp;&apos; token
src/TestServer.cpp:356: error: &apos;e&apos; was not declared in this scope
src/TestServer.cpp:356: error: expected `;&apos; before &apos;)&apos; token
make: *** [server] Error 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;IMHO, the right thing is to avoid the using clauses entirely, maybe keeping &apos;using apache::thrift&apos;, but I suspect I&apos;m in the distinct minority.&lt;/p&gt;</comment>
                            <comment id="12915049" author="roger.meier" created="Sun, 26 Sep 2010 21:47:47 +0000"  >&lt;p&gt;Yes, there are probably too many &lt;em&gt;using namespace&lt;/em&gt;  clauses.&lt;/p&gt;

&lt;p&gt;This patch is just a little fix, so that stuff gets compiled again. I just added a new patch to solve your issue as well: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-  } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (exception&amp;amp; e) {
+  } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (std::exception&amp;amp; e) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Anyway, TestServer and TestClient need some rework to become real unit tests by using boost unit test framework.&lt;br/&gt;
and thats probably the time to cleanup these things you mentioned.&lt;/p&gt;</comment>
                            <comment id="12915369" author="bryanduxbury" created="Mon, 27 Sep 2010 17:15:31 +0000"  >&lt;p&gt;Are you guys ready for the v3 patch to be committed? &lt;/p&gt;</comment>
                            <comment id="12915372" author="clavoie" created="Mon, 27 Sep 2010 17:22:49 +0000"  >&lt;p&gt;Yeah, the abuses of using clauses should be cleaned up eventually, but it&apos;s not a requirement for 0.5.&lt;/p&gt;

&lt;p&gt;v3 does what it says on the tin, please commit.&lt;/p&gt;</comment>
                            <comment id="12915376" author="bryanduxbury" created="Mon, 27 Sep 2010 17:26:32 +0000"  >&lt;p&gt;OK, I just committed this. Thanks for the patch!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12455583" name="THRIFT-920_cpp_fix_enum_change_on_test_and_tutorial.patch" size="8340" author="roger" created="Sun, 26 Sep 2010 01:07:44 +0000"/>
                            <attachment id="12455625" name="THRIFT-920_cpp_fix_enum_change_on_test_and_tutorial.v3.patch" size="8573" author="roger" created="Sun, 26 Sep 2010 21:47:47 +0000"/>
                            <attachment id="12455616" name="v2-thrift-fix-cpp-test.patch" size="12429" author="clavoie" created="Sun, 26 Sep 2010 18:03:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>187052</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16dq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245356</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>