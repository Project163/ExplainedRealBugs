<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:06:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-1831] Bug in list deserializer</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-1831</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;The function generate_deserialize_list_element() has a functional bug. It uses the following code to append a new element while deserializing.&lt;/p&gt;

&lt;p&gt;out &amp;lt;&amp;lt; &quot;g_array_append_val (&quot; &amp;lt;&amp;lt; prefix &amp;lt;&amp;lt; &quot;, &quot; &amp;lt;&amp;lt; elem &amp;lt;&amp;lt; &quot;);&quot; &amp;lt;&amp;lt; endl&lt;/p&gt;

&lt;p&gt;g_array_append_val() is a macro is glib which expects an array element, whereas &quot;elem&quot; in generate_deserialize_list_element() is a pointer to the array element. Deserialization doesn&apos;t work because of it. I don&apos;t think this part of the code was ever tested. I don&apos;t see any test or example code in c_glib which use lists.&lt;/p&gt;

&lt;p&gt;One way to fix this is to use the glib API g_array_append_vals() instead. (BTW, g_array_append_val() is a wrapper macro which uses g_array_append_vals() internally). I&apos;ll attach the patch. It&apos;s been tested already.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux x86, glib 2.34 (latest)&lt;/p&gt;</environment>
        <key id="12627923">THRIFT-1831</key>
            <summary>Bug in list deserializer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sath33sh">Satheesh Velmurugan</reporter>
                        <labels>
                            <label>c_glib</label>
                            <label>list</label>
                    </labels>
                <created>Wed, 16 Jan 2013 20:49:42 +0000</created>
                <updated>Sat, 8 Jun 2013 12:46:00 +0000</updated>
                            <resolved>Sat, 8 Jun 2013 12:46:00 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>0.9.1</fixVersion>
                                    <component>C glib - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13555446" author="sath33sh" created="Wed, 16 Jan 2013 20:54:08 +0000"  >&lt;p&gt;Patch for issue &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1831&quot; title=&quot;Bug in list deserializer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1831&quot;&gt;&lt;del&gt;THRIFT-1831&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13555496" author="roger.meier" created="Wed, 16 Jan 2013 21:45:31 +0000"  >&lt;p&gt;I will commit this.&lt;/p&gt;

&lt;p&gt;However, a test case for this would be appreciated.&lt;/p&gt;

&lt;p&gt;see &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-847&quot; title=&quot;Test Framework harmonization across all languages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-847&quot;&gt;&lt;del&gt;THRIFT-847&lt;/del&gt;&lt;/a&gt; or test/test.sh&lt;/p&gt;</comment>
                            <comment id="13555501" author="roger.meier" created="Wed, 16 Jan 2013 21:48:43 +0000"  >&lt;p&gt;committed, I&apos;ll keep the ticket open and wait for a test case based on test/ThriftTest.thrift&lt;/p&gt;

&lt;p&gt;all the best!&lt;br/&gt;
roger&lt;br/&gt;
;-r&lt;/p&gt;</comment>
                            <comment id="13555941" author="hudson" created="Thu, 17 Jan 2013 07:14:50 +0000"  >&lt;p&gt;Integrated in Thrift #615 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/615/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/615/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1831&quot; title=&quot;Bug in list deserializer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1831&quot;&gt;&lt;del&gt;THRIFT-1831&lt;/del&gt;&lt;/a&gt; Bug in list deserializer (Revision d5364246335f33c75d1c18fad5c5fbd974b8f929)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
roger : &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=thrift.git&amp;amp;a=commit&amp;amp;h=d5364246335f33c75d1c18fad5c5fbd974b8f929&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=thrift.git&amp;amp;a=commit&amp;amp;h=d5364246335f33c75d1c18fad5c5fbd974b8f929&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;compiler/cpp/src/generate/t_c_glib_generator.cc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13556667" author="sath33sh" created="Thu, 17 Jan 2013 22:28:53 +0000"  >&lt;p&gt;Hudson,&lt;br/&gt;
I don&apos;t think the failure is related to my patch. Logs show that it failed somewhere in a cpp test, whereas the patch I gave was for c_glib.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
satheesh&lt;/p&gt;</comment>
                            <comment id="13556670" author="sath33sh" created="Thu, 17 Jan 2013 22:31:26 +0000"  >&lt;p&gt;Roger,&lt;br/&gt;
Regarding unit test, I can&apos;t find test code in c_glib where I can quickly add a test case for this patch. The example in &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-847&quot; title=&quot;Test Framework harmonization across all languages&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-847&quot;&gt;&lt;del&gt;THRIFT-847&lt;/del&gt;&lt;/a&gt; seems to be specific to cpp. Do you have any examples for c_glib?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
satheesh&lt;/p&gt;</comment>
                            <comment id="13558082" author="roger.meier" created="Sat, 19 Jan 2013 20:01:10 +0000"  >&lt;p&gt;see here lib/c_glib/test/&lt;/p&gt;

&lt;p&gt;test/test.sh is the cross language test suite, important to use for compatibility tests&lt;/p&gt;</comment>
                            <comment id="13678744" author="jfarrell" created="Sat, 8 Jun 2013 12:46:00 +0000"  >&lt;p&gt;Patch was committed, closing ticket.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12565178" name="thrift-0.9.0-fix-THRIFT-1831.patch" size="711" author="sath33sh" created="Wed, 16 Jan 2013 20:54:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>304771</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 24 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i17vvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>254132</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>