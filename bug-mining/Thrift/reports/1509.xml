<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:23:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3597] `make check` hangs in go tests</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3597</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;I noticed this in other work and bisected to &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3251&quot; title=&quot;Add http transport for server to Go lib&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3251&quot;&gt;&lt;del&gt;THRIFT-3251&lt;/del&gt;&lt;/a&gt;.  Looks like:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;git reset --hard f8ca05528e04a24b9f843c82c6600e4de5e42291
make check
...
Your bundle is complete!
Use `bundle show [gemname]` to see where a bundled gem is installed.
/home/jsirois/.rvm/gems/ruby-2.1.4@global/bin/bundle exec /home/jsirois/.rvm/rubies/ruby-2.1.4/bin/ruby -I. test_suite.rb
Loaded suite test_suite
Started
............

Finished in 0.001784889 seconds.
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
12 tests, 25 assertions, 0 failures, 0 errors, 0 pendings, 0 omissions, 0 notifications
100% passed
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
6723.11 tests/s, 14006.47 assertions/s
make[2]: Leaving directory &apos;/home/jsirois/dev/3rdparty/jsirois-thrift/test/rb&apos;
Making check in go
make[2]: Entering directory &apos;/home/jsirois/dev/3rdparty/jsirois-thrift/test/go&apos;
Makefile:649: warning: overriding recipe for target &apos;check&apos;
Makefile:498: warning: ignoring old recipe for target &apos;check&apos;
mkdir -p src/gen
../../compiler/cpp/thrift -out src/gen --gen go:thrift_import=thrift ThriftTest.thrift
[WARNING:/home/jsirois/dev/3rdparty/jsirois-thrift/test/go/ThriftTest.thrift:83] The &quot;byte&quot; type is a compatibility alias for &quot;i8&quot;. Use &quot;i8&quot; to emphasize the signedness of this type.

[WARNING:/home/jsirois/dev/3rdparty/jsirois-thrift/test/go/ThriftTest.thrift:44] No generator named &apos;noexist&apos; could be found!
[WARNING:/home/jsirois/dev/3rdparty/jsirois-thrift/test/go/ThriftTest.thrift:46] cpp generator does not accept &apos;noexist&apos; as sub-namespace!
../../compiler/cpp/thrift -out src/gen --gen go:thrift_import=thrift ../StressTest.thrift
[WARNING:/home/jsirois/dev/3rdparty/jsirois-thrift/test/StressTest.thrift:27] The &quot;byte&quot; type is a compatibility alias for &quot;i8&quot;. Use &quot;i8&quot; to emphasize the signedness of this type.

[WARNING:/home/jsirois/dev/3rdparty/jsirois-thrift/test/StressTest.thrift:31] Consider using the more efficient &quot;binary&quot; type instead of &quot;list&amp;lt;byte&amp;gt;&quot;.
[WARNING:/home/jsirois/dev/3rdparty/jsirois-thrift/test/StressTest.thrift:31] Consider using the more efficient &quot;binary&quot; type instead of &quot;list&amp;lt;byte&amp;gt;&quot;.
ln -nfs ../../../lib/go/thrift src/thrift
GOPATH=`pwd` /usr/bin/go get github.com/golang/mock/gomock
touch gopath
GOPATH=`pwd` /usr/bin/go test -v common/...
=== RUN   TestAllConnection
SIGQUIT: quit
PC=0x45f9b9 m=0

goroutine 0 [idle]:
runtime.epollwait(0x4, 0x7fff2e2496b0, 0xffffffff00000080, 0x0, 0xffffffff, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
	/usr/lib/go/src/runtime/sys_linux_amd64.s:420 +0x19
runtime.netpoll(0xa93501, 0x0)
	/usr/lib/go/src/runtime/netpoll_epoll.go:68 +0x94
runtime.findrunnable(0xc82001c000, 0x0)
	/usr/lib/go/src/runtime/proc1.go:1520 +0x598
runtime.schedule()
	/usr/lib/go/src/runtime/proc1.go:1647 +0x267
runtime.park_m(0xc820001680)
	/usr/lib/go/src/runtime/proc1.go:1706 +0x18b
runtime.mcall(0x7fff2e249dc0)
	/usr/lib/go/src/runtime/asm_amd64.s:204 +0x5b

goroutine 1 [chan receive]:
testing.RunTests(0x93d3c0, 0xa8a5b0, 0x1, 0x1, 0x1)
	/usr/lib/go/src/testing/testing.go:562 +0x8ad
testing.(*M).Run(0xc820051ef8, 0x0)
	/usr/lib/go/src/testing/testing.go:494 +0x70
main.main()
	common/_test/_testmain.go:54 +0x116

goroutine 17 [syscall, locked to thread]:
runtime.goexit()
	/usr/lib/go/src/runtime/asm_amd64.s:1721 +0x1

goroutine 5 [IO wait]:
net.runtime_pollWait(0x7f1b6ce4afa0, 0x72, 0xc820010250)
	/usr/lib/go/src/runtime/netpoll.go:157 +0x60
net.(*pollDesc).Wait(0xc82005c370, 0x72, 0x0, 0x0)
	/usr/lib/go/src/net/fd_poll_runtime.go:73 +0x3a
net.(*pollDesc).WaitRead(0xc82005c370, 0x0, 0x0)
	/usr/lib/go/src/net/fd_poll_runtime.go:78 +0x36
net.(*netFD).accept(0xc82005c310, 0x0, 0x7f1b6ce4b060, 0xc82000a9c0)
	/usr/lib/go/src/net/fd_unix.go:408 +0x27c
net.(*TCPListener).AcceptTCP(0xc820030048, 0xffffffff, 0x0, 0x0)
	/usr/lib/go/src/net/tcpsock_posix.go:254 +0x4d
net.(*TCPListener).Accept(0xc820030048, 0x0, 0x0, 0x0, 0x0)
	/usr/lib/go/src/net/tcpsock_posix.go:264 +0x3d
thrift.(*TServerSocket).Accept(0xc820014640, 0x0, 0x0, 0x0, 0x0)
	/home/jsirois/dev/3rdparty/jsirois-thrift/test/go/src/thrift/server_socket.go:73 +0x313
thrift.(*TSimpleServer).AcceptLoop(0xc82005c2a0, 0x0, 0x0)
	/home/jsirois/dev/3rdparty/jsirois-thrift/test/go/src/thrift/simple_server.go:123 +0x4e
thrift.(*TSimpleServer).Serve(0xc82005c2a0, 0x0, 0x0)
	/home/jsirois/dev/3rdparty/jsirois-thrift/test/go/src/thrift/simple_server.go:147 +0x64
common.doUnit(0xc820098120, 0xc820053e60)
	/home/jsirois/dev/3rdparty/jsirois-thrift/test/go/src/common/clientserver_test.go:68 +0x6f0
common.TestAllConnection(0xc820098120)
	/home/jsirois/dev/3rdparty/jsirois-thrift/test/go/src/common/clientserver_test.go:52 +0x1bc
testing.tRunner(0xc820098120, 0xa8a5b0)
	/usr/lib/go/src/testing/testing.go:456 +0x98
created by testing.RunTests
	/usr/lib/go/src/testing/testing.go:561 +0x86d

goroutine 6 [semacquire]:
net.runtime_Semacquire(0xc82005c318)
	/usr/lib/go/src/runtime/sema.go:48 +0x26
net.(*fdMutex).RWLock(0xc82005c310, 0x1, 0x4b7554)
	/usr/lib/go/src/net/fd_mutex.go:143 +0x16c
net.(*netFD).readLock(0xc82005c310, 0x0, 0x0)
	/usr/lib/go/src/net/fd_unix.go:160 +0x39
net.(*netFD).accept(0xc82005c310, 0x0, 0x0, 0x0)
	/usr/lib/go/src/net/fd_unix.go:389 +0x6c
net.(*TCPListener).AcceptTCP(0xc820030048, 0xffffffff, 0x0, 0x0)
	/usr/lib/go/src/net/tcpsock_posix.go:254 +0x4d
net.(*TCPListener).Accept(0xc820030048, 0x0, 0x0, 0x0, 0x0)
	/usr/lib/go/src/net/tcpsock_posix.go:264 +0x3d
thrift.(*TServerSocket).Accept(0xc820014640, 0x0, 0x0, 0x0, 0x0)
	/home/jsirois/dev/3rdparty/jsirois-thrift/test/go/src/thrift/server_socket.go:73 +0x313
thrift.(*TSimpleServer).AcceptLoop(0xc82005c2a0, 0x0, 0x0)
	/home/jsirois/dev/3rdparty/jsirois-thrift/test/go/src/thrift/simple_server.go:123 +0x4e
created by common.doUnit
	/home/jsirois/dev/3rdparty/jsirois-thrift/test/go/src/common/clientserver_test.go:67 +0x6df

rax    0xfffffffffffffffc
rbx    0xffffffff
rcx    0x45f9b9
rdx    0x80
rdi    0x4
rsi    0x7fff2e2496b0
rbp    0xa93e00
rsp    0x7fff2e249670
r8     0xa93e00
r9     0x0
r10    0xffffffff
r11    0x246
r12    0x8
r13    0x93a7e4
r14    0x9
r15    0x8
rip    0x45f9b9
rflags 0x246
cs     0x33
fs     0x0
gs     0x0
*** Test killed with quit: ran too long (10m0s).
FAIL	common	600.004s
Makefile:649: recipe for target &apos;check&apos; failed
make[2]: *** [check] Error 1
make[2]: Leaving directory &apos;/home/jsirois/dev/3rdparty/jsirois-thrift/test/go&apos;
Makefile:593: recipe for target &apos;check-recursive&apos; failed
make[1]: *** [check-recursive] Error 1
make[1]: Leaving directory &apos;/home/jsirois/dev/3rdparty/jsirois-thrift/test&apos;
Makefile:635: recipe for target &apos;check-recursive&apos; failed
make: *** [check-recursive] Error 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A &lt;tt&gt;git reset --hard f8ca05528e04a24b9f843c82c6600e4de5e42291^&lt;/tt&gt; restores a passing make check.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12936542">THRIFT-3597</key>
            <summary>`make check` hangs in go tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsirois">John Sirois</assignee>
                                    <reporter username="jsirois">John Sirois</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Feb 2016 23:58:47 +0000</created>
                <updated>Fri, 19 Feb 2016 02:17:40 +0000</updated>
                            <resolved>Thu, 4 Feb 2016 05:31:10 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Go - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15131412" author="jsirois" created="Thu, 4 Feb 2016 00:00:44 +0000"  >&lt;p&gt;I can&apos;t find how to self-assign but I have a patch and will post shortly.&lt;/p&gt;</comment>
                            <comment id="15131432" author="jsirois" created="Thu, 4 Feb 2016 00:21:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/thrift/pull/833&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/833&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15131433" author="jsirois" created="Thu, 4 Feb 2016 00:22:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dimiro1%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;dimiro1@gmail.com&quot;&gt;dimiro1@gmail.com&lt;/a&gt;, if you have a chance to review &lt;a href=&quot;https://github.com/apache/thrift/pull/833&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/833&lt;/a&gt; I&apos;d be grateful.&lt;/p&gt;</comment>
                            <comment id="15131518" author="jsirois" created="Thu, 4 Feb 2016 01:31:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nsuke&quot; class=&quot;user-hover&quot; rel=&quot;nsuke&quot;&gt;nsuke&lt;/a&gt; - I think this is the real fix for your paper-over fix &lt;a href=&quot;https://github.com/apache/thrift/commit/2eed686406812411199f30e64131548000bbb62a#diff-354f30a63fb0907d4ad57269548329e3R158&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Reviews are appreciated.&lt;/p&gt;</comment>
                            <comment id="15131759" author="nsuke" created="Thu, 4 Feb 2016 05:31:10 +0000"  >&lt;p&gt;Committed, it&apos;s great, thanks for looking into it !&lt;/p&gt;</comment>
                            <comment id="15138407" author="hudson" created="Tue, 9 Feb 2016 06:23:21 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift-precommit #45 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift-precommit/45/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift-precommit/45/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3597&quot; title=&quot;`make check` hangs in go tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3597&quot;&gt;&lt;del&gt;THRIFT-3597&lt;/del&gt;&lt;/a&gt; `make check` hangs in go tests Client: Test (Go) Patch: John (nsuke: &lt;a href=&quot;https://github.com/apache/thrift/commit/f7d497978d21233b087e3edc6eaa6a38b88ee461&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/commit/f7d497978d21233b087e3edc6eaa6a38b88ee461&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;test/go/src/common/clientserver_test.go&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12934831">THRIFT-3583</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12846454">THRIFT-3251</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 41 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2se3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>