<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:06:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-1788] C#: Constants static constructor does not compile</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-1788</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;The following Thrift IDL does not correctly compile to C# (from test/ConstantsDemo.thrift):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;struct thing {
  1: i32 hello,
  2: i32 goodbye
}

&lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; enumconstants {
  ONE = 1,
  TWO = 2
}

&lt;span class=&quot;code-comment&quot;&gt;// struct thing2 {
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//   &lt;span class=&quot;code-comment&quot;&gt;/** standard docstring */&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//   1: enumconstants val = TWO
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// }
&lt;/span&gt;
typedef i32 myIntType
&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; myIntType myInt = 3

&lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; map&amp;lt;enumconstants,string&amp;gt; GEN_ENUM_NAMES = {ONE : &lt;span class=&quot;code-quote&quot;&gt;&quot;HOWDY&quot;&lt;/span&gt;, TWO: &lt;span class=&quot;code-quote&quot;&gt;&quot;PARTNER&quot;&lt;/span&gt;}
&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; i32 hex_const = 0x0001F

&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; i32 GEN_ME = -3523553
&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; GEn_DUB = 325.532
&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; GEn_DU = 085.2355
&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; string GEN_STRING = &lt;span class=&quot;code-quote&quot;&gt;&quot;asldkjasfd&quot;&lt;/span&gt;

&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; map&amp;lt;i32,i32&amp;gt; GEN_MAP = { 35532 : 233, 43523 : 853 }
&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; list&amp;lt;i32&amp;gt; GEN_LIST = [ 235235, 23598352, 3253523 ]

&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; map&amp;lt;i32, map&amp;lt;i32, i32&amp;gt;&amp;gt; GEN_MAPMAP = { 235 : { 532 : 53255, 235:235}}

&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; map&amp;lt;string,i32&amp;gt; GEN_MAP2 = { &lt;span class=&quot;code-quote&quot;&gt;&quot;hello&quot;&lt;/span&gt; : 233, &lt;span class=&quot;code-quote&quot;&gt;&quot;lkj98d&quot;&lt;/span&gt; : 853, &lt;span class=&quot;code-quote&quot;&gt;&apos;lkjsdf&apos;&lt;/span&gt; : 098325 }

&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; thing GEN_THING = { &lt;span class=&quot;code-quote&quot;&gt;&apos;hello&apos;&lt;/span&gt; : 325, &lt;span class=&quot;code-quote&quot;&gt;&apos;goodbye&apos;&lt;/span&gt; : 325352 }

&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; map&amp;lt;i32,thing&amp;gt; GEN_WHAT = { 35 : { &lt;span class=&quot;code-quote&quot;&gt;&apos;hello&apos;&lt;/span&gt; : 325, &lt;span class=&quot;code-quote&quot;&gt;&apos;goodbye&apos;&lt;/span&gt; : 325352 } }

&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; set&amp;lt;i32&amp;gt; GEN_SET = [ 235, 235, 53235 ]

exception Blah {
  1:  i32 bing }

exception Gak {}

service yowza {
  void blingity(),
  i32 blangity() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; (1: Blah hoot )
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The constructor generated does not use the correct property name, instead using the field name.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/**
 * Autogenerated by Thrift &lt;span class=&quot;code-object&quot;&gt;Compiler&lt;/span&gt; (0.8.0)
 *
 * DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING
 *  @generated
 */
using &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;;
using &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.Collections;
using &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.Collections.Generic;
using &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.Text;
using &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.IO;
using Thrift;
using Thrift.Collections;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Constants
{
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; hex_const = 31;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; GEN_ME = -3523553;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; GEn_DUB = 325.532;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt; GEn_DU = 85.2355;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; string GEN_STRING = &lt;span class=&quot;code-quote&quot;&gt;&quot;asldkjasfd&quot;&lt;/span&gt;;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Dictionary&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt; GEN_MAP = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Dictionary&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;();
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt; GEN_LIST = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;();
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Dictionary&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, Dictionary&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;&amp;gt; GEN_MAPMAP = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Dictionary&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, Dictionary&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;&amp;gt;();
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Dictionary&amp;lt;string, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt; GEN_MAP2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Dictionary&amp;lt;string, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;();
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; thing GEN_THING = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; thing();
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Dictionary&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, thing&amp;gt; GEN_WHAT = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Dictionary&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, thing&amp;gt;();
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; THashSet&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt; GEN_SET = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; THashSet&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;();
  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Constants()
  {
    GEN_MAP[35532] = 233;
    GEN_MAP[43523] = 853;
    GEN_LIST.Add(235235);
    GEN_LIST.Add(23598352);
    GEN_LIST.Add(3253523);
    Dictionary&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt; tmp0 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Dictionary&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;();
    tmp0[532] = 53255;
    tmp0[235] = 235;
    GEN_MAPMAP[235] = tmp0;
    GEN_MAP2[&lt;span class=&quot;code-quote&quot;&gt;&quot;hello&quot;&lt;/span&gt;] = 233;
    GEN_MAP2[&lt;span class=&quot;code-quote&quot;&gt;&quot;lkj98d&quot;&lt;/span&gt;] = 853;
    GEN_MAP2[&lt;span class=&quot;code-quote&quot;&gt;&quot;lkjsdf&quot;&lt;/span&gt;] = 98325;
    GEN_THING.hello = 325;
    GEN_THING.goodbye = 325352;
    thing tmp1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; thing();
    tmp1.hello = 325;
    tmp1.goodbye = 325352;
    GEN_WHAT[35] = tmp1;
    GEN_SET.Add(235);
    GEN_SET.Add(235);
    GEN_SET.Add(53235);
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think it should be tmp1.Hello = 325, tmp1.Goodbye = 325352; this is in line with what the Java compiler produces.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12623652">THRIFT-1788</key>
            <summary>C#: Constants static constructor does not compile</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="carlyeks">Carl Yeksigian</assignee>
                                    <reporter username="carlyeks">Carl Yeksigian</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Dec 2012 01:51:43 +0000</created>
                <updated>Sat, 8 Jun 2013 03:15:43 +0000</updated>
                            <resolved>Sat, 8 Jun 2013 03:15:43 +0000</resolved>
                                    <version>0.8</version>
                    <version>0.9</version>
                                    <fixVersion>0.9.1</fixVersion>
                                    <component>C# - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13530632" author="carlyeks" created="Thu, 13 Dec 2012 03:14:50 +0000"  >&lt;p&gt;Patch which uses property name rather than field name.&lt;/p&gt;</comment>
                            <comment id="13534371" author="jensg" created="Mon, 17 Dec 2012 22:16:37 +0000"  >&lt;p&gt;Carl,&lt;/p&gt;

&lt;p&gt;I can confirm that the code does not compile before. &lt;br/&gt;
But it also does not compiler after applying the patch. &lt;br/&gt;
The reason is already visible in your sample:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Constants
{
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; hex_const = 31;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The first assignment from the IDL (const myIntType myInt = 3) seems to be rendered incompletely, causing the Compiler to fail. I think we should try to fix this too.&lt;/p&gt;
</comment>
                            <comment id="13534455" author="carlyeks" created="Tue, 18 Dec 2012 00:20:45 +0000"  >&lt;p&gt;I&apos;ve fixed the issue &amp;#8211; my initial patch only fixed the static constructor.&lt;/p&gt;

&lt;p&gt;Now, the typedefs are navigated to their bases.&lt;/p&gt;</comment>
                            <comment id="13535366" author="jensg" created="Tue, 18 Dec 2012 21:36:18 +0000"  >&lt;p&gt;Committed, works like a charm.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12623453">THRIFT-1786</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12561379" name="1788-v2.patch" size="2416" author="carlyeks" created="Tue, 18 Dec 2012 00:20:47 +0000"/>
                            <attachment id="12560711" name="1788.patch" size="1426" author="carlyeks" created="Thu, 13 Dec 2012 03:14:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>297380</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14o9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>235398</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>