<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:23:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3618] Python TSSLSocket deprecation message should print caller&apos;s location</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3618</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;deprecation message should print exactly where the method is called, but currently it is printing out the location where the message is emitted.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12938848">THRIFT-3618</key>
            <summary>Python TSSLSocket deprecation message should print caller&apos;s location</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nsuke">Nobuaki Sukegawa</assignee>
                                    <reporter username="nsuke">Nobuaki Sukegawa</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Feb 2016 16:46:22 +0000</created>
                <updated>Fri, 19 Feb 2016 02:17:38 +0000</updated>
                            <resolved>Sat, 13 Feb 2016 14:27:43 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Python - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15144838" author="githubbot" created="Fri, 12 Feb 2016 16:48:30 +0000"  >&lt;p&gt;Github user nsuke commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/850#discussion_r52765986&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/850#discussion_r52765986&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: lib/py/test/test_sslsocket.py &amp;#8212;&lt;br/&gt;
    @@ -75,185 +104,176 @@ def _&lt;em&gt;exit&lt;/em&gt;_(self, exc_type, exc_value, traceback):&lt;/p&gt;


&lt;p&gt;     class TSSLSocketTest(unittest.TestCase):&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;def _assert_connection_failure(self, server, client):&lt;br/&gt;
    +    def _server_socket(self, **kwargs):&lt;br/&gt;
    +        return TSSLServerSocket(port=0, **kwargs)&lt;br/&gt;
    +&lt;br/&gt;
    +    @contextmanager&lt;br/&gt;
    +    def _connectable_client(self, server, path=None, **client_kwargs):&lt;br/&gt;
             acc = ServerAcceptor(server)&lt;br/&gt;
             try:&lt;br/&gt;
                 acc.start()&lt;/li&gt;
	&lt;li&gt;time.sleep(CONNECT_DELAY / 2)&lt;/li&gt;
	&lt;li&gt;client.setTimeout(CONNECT_TIMEOUT / 2)&lt;/li&gt;
	&lt;li&gt;with self._assert_raises(Exception):&lt;/li&gt;
	&lt;li&gt;logging.disable(logging.CRITICAL)&lt;/li&gt;
	&lt;li&gt;client.open()&lt;/li&gt;
	&lt;li&gt;select.select([], &lt;span class=&quot;error&quot;&gt;&amp;#91;client.handle&amp;#93;&lt;/span&gt;, [], CONNECT_TIMEOUT / 2)&lt;/li&gt;
	&lt;li&gt;# self.assertIsNone(acc.client)&lt;/li&gt;
	&lt;li&gt;self.assertTrue(acc.client is None)&lt;br/&gt;
    +            acc.await_listening()&lt;br/&gt;
    +&lt;br/&gt;
    +            host, port = (&apos;localhost&apos;, acc.port) if path is None else (None, None)&lt;br/&gt;
    +            client = TSSLSocket(host, port, path, **client_kwargs)&lt;br/&gt;
    +            yield acc, client&lt;br/&gt;
             finally:&lt;/li&gt;
	&lt;li&gt;logging.disable(logging.NOTSET)&lt;/li&gt;
	&lt;li&gt;client.close()&lt;br/&gt;
                 if acc.client:&lt;br/&gt;
                     acc.client.close()&lt;br/&gt;
                 server.close()&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    +    def _assert_connection_failure(self, server, path=None, **client_args):&lt;br/&gt;
    +        with self._connectable_client(server, path=path, **client_args) as (acc, client):&lt;br/&gt;
    +            try:&lt;br/&gt;
    +                logging.disable(logging.CRITICAL)&lt;br/&gt;
    +                # We need to wait for a connection failure, but not too long.  20ms is a tunable&lt;br/&gt;
    +                # compromise between test speed and stability&lt;br/&gt;
    +                client.setTimeout(20)&lt;br/&gt;
    +                with self._assert_raises(TTransportException):&lt;br/&gt;
    +                    client.open()&lt;br/&gt;
    +                self.assertTrue(acc.client is None)&lt;br/&gt;
    +            finally:&lt;br/&gt;
    +                logging.disable(logging.NOTSET)&lt;br/&gt;
    +&lt;br/&gt;
         def _assert_raises(self, exc):&lt;br/&gt;
             if sys.hexversion &amp;gt;= 0x020700F0:&lt;br/&gt;
                 return self.assertRaises(exc)&lt;br/&gt;
             else:&lt;br/&gt;
                 return AssertRaises(exc)&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;def _assert_connection_success(self, server, client):&lt;/li&gt;
	&lt;li&gt;acc = ServerAcceptor(server)&lt;/li&gt;
	&lt;li&gt;try:&lt;/li&gt;
	&lt;li&gt;acc.start()&lt;/li&gt;
	&lt;li&gt;time.sleep(CONNECT_DELAY)&lt;/li&gt;
	&lt;li&gt;client.setTimeout(CONNECT_TIMEOUT)&lt;br/&gt;
    +    def _assert_connection_success(self, server, path=None, **client_args):&lt;br/&gt;
    +        with self._connectable_client(server, path=path, **client_args) as (acc, client):&lt;br/&gt;
                 client.open()&lt;/li&gt;
	&lt;li&gt;select.select([], &lt;span class=&quot;error&quot;&gt;&amp;#91;client.handle&amp;#93;&lt;/span&gt;, [], CONNECT_TIMEOUT)&lt;/li&gt;
	&lt;li&gt;# self.assertIsNotNone(acc.client)&lt;/li&gt;
	&lt;li&gt;self.assertTrue(acc.client is not None)&lt;/li&gt;
	&lt;li&gt;finally:&lt;/li&gt;
	&lt;li&gt;client.close()&lt;/li&gt;
	&lt;li&gt;if acc.client:&lt;/li&gt;
	&lt;li&gt;acc.client.close()&lt;/li&gt;
	&lt;li&gt;server.close()&lt;br/&gt;
    +            try:&lt;br/&gt;
    +                self.assertTrue(acc.client is not None)&lt;br/&gt;
    +            finally:&lt;br/&gt;
    +                client.close()&lt;/li&gt;
&lt;/ul&gt;


&lt;ol&gt;
	&lt;li&gt;deprecated feature&lt;br/&gt;
         def test_deprecation(self):
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    Just FIY, this is the issue &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3618&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/THRIFT-3618&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15144999" author="githubbot" created="Fri, 12 Feb 2016 18:20:24 +0000"  >&lt;p&gt;GitHub user nsuke opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/852&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/852&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3618&quot; title=&quot;Python TSSLSocket deprecation message should print caller&amp;#39;s location&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3618&quot;&gt;&lt;del&gt;THRIFT-3618&lt;/del&gt;&lt;/a&gt; Python TSSLSocket deprecation message should print caller&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;&apos;s location&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/nsuke/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nsuke/thrift&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3618&quot; title=&quot;Python TSSLSocket deprecation message should print caller&amp;#39;s location&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3618&quot;&gt;&lt;del&gt;THRIFT-3618&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/852.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/852.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #852&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 4da84818beea16177502254a90be022ade961662&lt;br/&gt;
Author: Nobuaki Sukegawa &amp;lt;nsuke@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-02-12T18:11:16Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3618&quot; title=&quot;Python TSSLSocket deprecation message should print caller&amp;#39;s location&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3618&quot;&gt;&lt;del&gt;THRIFT-3618&lt;/del&gt;&lt;/a&gt; Python TSSLSocket deprecation message should print caller&apos;s location&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15145109" author="hudson" created="Fri, 12 Feb 2016 19:13:31 +0000"  >&lt;p&gt;FAILURE: Integrated in Thrift-precommit #99 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift-precommit/99/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift-precommit/99/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3618&quot; title=&quot;Python TSSLSocket deprecation message should print caller&amp;#39;s location&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3618&quot;&gt;&lt;del&gt;THRIFT-3618&lt;/del&gt;&lt;/a&gt; Python TSSLSocket deprecation message should print caller&apos;s (nsuke: &lt;a href=&quot;https://github.com/apache/thrift/commit/4da84818beea16177502254a90be022ade961662&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/commit/4da84818beea16177502254a90be022ade961662&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/py/test/test_sslsocket.py&lt;/li&gt;
	&lt;li&gt;lib/py/src/transport/TSSLSocket.py&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15145986" author="githubbot" created="Sat, 13 Feb 2016 14:15:23 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/852&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/852&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15145993" author="nsuke" created="Sat, 13 Feb 2016 14:27:43 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                            <comment id="15146127" author="hudson" created="Sat, 13 Feb 2016 18:59:34 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift-precommit #122 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift-precommit/122/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift-precommit/122/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3618&quot; title=&quot;Python TSSLSocket deprecation message should print caller&amp;#39;s location&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3618&quot;&gt;&lt;del&gt;THRIFT-3618&lt;/del&gt;&lt;/a&gt; Python TSSLSocket deprecation message should print caller&apos;s (nsuke: &lt;a href=&quot;https://github.com/apache/thrift/commit/6a0ca7ff2750d45346d6d7faaf931de2b6254321&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/commit/6a0ca7ff2750d45346d6d7faaf931de2b6254321&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/py/src/transport/TSSLSocket.py&lt;/li&gt;
	&lt;li&gt;lib/py/test/test_sslsocket.py&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 40 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ss3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>