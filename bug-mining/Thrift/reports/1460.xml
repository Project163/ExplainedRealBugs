<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:22:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3496] C++: Cob style client fails when sending a consecutive request</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3496</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;I extended the C++ unit tests to send a second request using the same generated client instance (without recreating it). This causes the following two problems:&lt;/p&gt;

&lt;p&gt;1.) the client still has the first request in it&apos;s output buffer causing it to send the first request again and again&lt;/p&gt;

&lt;p&gt;2.) the wrong cob gets called, as sending the second request will always overwrite the cob of the first request&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux&lt;/p&gt;</environment>
        <key id="12923402">THRIFT-3496</key>
            <summary>C++: Cob style client fails when sending a consecutive request</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sebastian.zenker">Sebastian Zenker</assignee>
                                    <reporter username="sebastian.zenker">Sebastian Zenker</reporter>
                        <labels>
                            <label>easyfix</label>
                    </labels>
                <created>Mon, 21 Dec 2015 11:25:36 +0000</created>
                <updated>Sat, 20 Feb 2021 15:28:08 +0000</updated>
                            <resolved>Tue, 2 Feb 2016 17:35:33 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>C++ - Compiler</component>
                    <component>C++ - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="15066347" author="githubbot" created="Mon, 21 Dec 2015 11:33:57 +0000"  >&lt;p&gt;GitHub user szenker opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/752&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/752&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thrift 3496: C++: Cob style client fails when sending a consecutive request&lt;/p&gt;

&lt;p&gt;    see &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3496&quot; title=&quot;C++: Cob style client fails when sending a consecutive request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3496&quot;&gt;&lt;del&gt;THRIFT-3496&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/szenker/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/szenker/thrift&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3496&quot; title=&quot;C++: Cob style client fails when sending a consecutive request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3496&quot;&gt;&lt;del&gt;THRIFT-3496&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/752.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/752.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #752&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 430fec6afc9647ccd2dadfef3bc99f1b5ba39485&lt;br/&gt;
Author: Sebastian Zenker &amp;lt;sebastian.zenker@gmx.de&amp;gt;&lt;br/&gt;
Date:   2015-12-18T15:15:08Z&lt;/p&gt;

&lt;p&gt;    fixed: sending a second request via Cob style client wasn&apos;t working as the otrans_ buffer still contained the content from the first request&lt;/p&gt;

&lt;p&gt;commit 656d7ad24b0984dbc959b7130c97e1d128a400bb&lt;br/&gt;
Author: Sebastian Zenker &amp;lt;sebastian.zenker@gmx.de&amp;gt;&lt;br/&gt;
Date:   2015-12-18T15:21:12Z&lt;/p&gt;

&lt;p&gt;    fixed: TEvhttpClientChannel - when sending a second request (via sendAndRecvMessage()) before the first cob of the first request has signaled that a response is available, the cob of the first request gets overwritten by the second request. Consequently, the cob of the first request never gets called and cob of the second gets called twice.&lt;/p&gt;

&lt;p&gt;commit b9a65d539adeecbd09a88138272922c8df490e7b&lt;br/&gt;
Author: Sebastian Zenker &amp;lt;sebastian.zenker@gmx.de&amp;gt;&lt;br/&gt;
Date:   2015-12-21T11:16:23Z&lt;/p&gt;

&lt;p&gt;    extended the cpp TestClient to issue consecutive calls on the same client&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15066348" author="sebastian.zenker" created="Mon, 21 Dec 2015 11:35:20 +0000"  >&lt;p&gt;Please see my pull request on GitHub&lt;/p&gt;</comment>
                            <comment id="15066361" author="sebastian.zenker" created="Mon, 21 Dec 2015 11:42:34 +0000"  >&lt;p&gt;I captured the traffic between the test client and test server using Wireshark. &lt;br/&gt;
./TestServer --server-type=threaded --transport=http&lt;br/&gt;
./TestClient --transport=evhttp&lt;/p&gt;

&lt;p&gt;When the client sends a second request, it will still contain the first request.&lt;/p&gt;

&lt;p&gt;// Client sends first request: ////////////////////////////////////////////////////////////////////&lt;br/&gt;
POST / HTTP/1.1&lt;br/&gt;
Host: localhost&lt;br/&gt;
Content-Type: application/x-thrift&lt;br/&gt;
Content-Length: 21&lt;/p&gt;

&lt;p&gt;........testVoid.....&lt;/p&gt;

&lt;p&gt;// response (ok) ///////////////////////////////////////////////////////////////////////////////////////////&lt;br/&gt;
HTTP/1.1 200 OK&lt;br/&gt;
Date: Mon, 21 Dec 2015 10:58:57 GMT&lt;br/&gt;
Server: Thrift/1.0.0-dev&lt;br/&gt;
Access-Control-Allow-Origin: *&lt;br/&gt;
Content-Type: application/x-thrift&lt;br/&gt;
Content-Length: 21&lt;br/&gt;
Connection: Keep-Alive&lt;/p&gt;

&lt;p&gt;........testVoid.....&lt;/p&gt;

&lt;p&gt;// Client sends second request, which still includes the first request /////////////////////////////////&lt;br/&gt;
POST / HTTP/1.1&lt;br/&gt;
Host: localhost&lt;br/&gt;
Content-Type: application/x-thrift&lt;br/&gt;
Content-Length: 56&lt;/p&gt;

&lt;p&gt;........testVoid............&lt;br/&gt;
testString...........test0.&lt;/p&gt;

&lt;p&gt;// response from server ///////////////////////////////////////////////////////////////////////////////////////////&lt;br/&gt;
HTTP/1.1 200 OK&lt;br/&gt;
Date: Mon, 21 Dec 2015 10:58:57 GMT&lt;br/&gt;
Server: Thrift/1.0.0-dev&lt;br/&gt;
Access-Control-Allow-Origin: *&lt;br/&gt;
Content-Type: application/x-thrift&lt;br/&gt;
Content-Length: 21&lt;br/&gt;
Connection: Keep-Alive&lt;/p&gt;

&lt;p&gt;........testVoid.....&lt;/p&gt;

&lt;p&gt;HTTP/1.1 200 OK&lt;br/&gt;
Date: Mon, 21 Dec 2015 10:58:57 GMT&lt;br/&gt;
Server: Thrift/1.0.0-dev&lt;br/&gt;
Access-Control-Allow-Origin: *&lt;br/&gt;
Content-Type: application/x-thrift&lt;br/&gt;
Content-Length: 35&lt;br/&gt;
Connection: Keep-Alive&lt;/p&gt;

&lt;p&gt;.......&lt;br/&gt;
testString...........test0.&lt;/p&gt;</comment>
                            <comment id="15069901" author="githubbot" created="Wed, 23 Dec 2015 17:19:50 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/752&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/752&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15069963" author="nsuke" created="Wed, 23 Dec 2015 17:57:21 +0000"  >&lt;p&gt;Committed, thanks !&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2q5lb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>