<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:54:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-229] ruby client timeout does not affect connect()</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-229</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;the ruby library does not wrap client connect() calls in a timeout select. so a ruby thrift client could be blocked in connect() indefinitely.&lt;/p&gt;</description>
                <environment>&lt;p&gt;all&lt;/p&gt;</environment>
        <key id="12410214">THRIFT-229</key>
            <summary>ruby client timeout does not affect connect()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bryanduxbury">Bryan Duxbury</assignee>
                                    <reporter username="robey">Robey Pointer</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Dec 2008 19:17:54 +0000</created>
                <updated>Sat, 7 Mar 2009 00:04:17 +0000</updated>
                            <resolved>Sat, 7 Mar 2009 00:04:17 +0000</resolved>
                                                    <fixVersion>0.1</fixVersion>
                                    <component>Ruby - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12664753" author="bryanduxbury" created="Sat, 17 Jan 2009 00:34:50 +0000"  >&lt;p&gt;I think that this patch fixes the problem. Can you apply it locally and test it out?&lt;/p&gt;</comment>
                            <comment id="12665553" author="robey" created="Tue, 20 Jan 2009 20:44:53 +0000"  >&lt;p&gt;that patch doesn&apos;t quite work because of namespace issues (and a missing arg). attached is a modification that makes it work for me.&lt;/p&gt;

&lt;p&gt;one thing to note: IP6 addresses will break. this appears to be a bug in ruby.&lt;/p&gt;</comment>
                            <comment id="12665561" author="bryanduxbury" created="Tue, 20 Jan 2009 21:02:57 +0000"  >&lt;p&gt;Ok, this looks good. Thanks for responding with a fix!&lt;/p&gt;

&lt;p&gt;Unless anyone objects, I&apos;m going to commit this change.&lt;/p&gt;</comment>
                            <comment id="12665569" author="robey" created="Tue, 20 Jan 2009 21:19:36 +0000"  >&lt;p&gt;oops, i just noticed that i left &quot;@timeout / 1000.0&quot; in that patch. sorry about that. it should be left as just &quot;@timeout&quot;.&lt;/p&gt;</comment>
                            <comment id="12665667" author="bryanduxbury" created="Wed, 21 Jan 2009 01:05:59 +0000"  >&lt;p&gt;I applied the patch and made the change you suggested, but I get tons of spec failures in socket_spec.rb. Can you run the specs locally and see if you can figure out what&apos;s going wrong?&lt;/p&gt;</comment>
                            <comment id="12666051" author="robey" created="Thu, 22 Jan 2009 05:04:05 +0000"  >&lt;p&gt;i get those too. this is the localhost problem &amp;#8211; ruby is having trouble with IP6 addresses (and localhost has a lot of IP6 aliases). i&apos;m going to ask a ruby expert how to work around this.&lt;/p&gt;</comment>
                            <comment id="12666078" author="robey" created="Thu, 22 Jan 2009 07:24:08 +0000"  >&lt;p&gt;i think this should get it. it also required some changes to mocks.&lt;/p&gt;</comment>
                            <comment id="12666286" author="bryanduxbury" created="Thu, 22 Jan 2009 20:36:46 +0000"  >&lt;p&gt;I still get two failures:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;1)
Thrift::TransportException in &lt;span class=&quot;code-quote&quot;&gt;&apos;Thrift::Socket should open a ::Socket with &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; args&apos;&lt;/span&gt;
Could not connect to localhost:9090: undefined method `connect_nonblock&apos; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; nil:NilClass
./spec/../lib/thrift/transport/socket.rb:42:in `open&apos;
./spec/socket_spec.rb:27:

2)
Thrift::TransportException in &lt;span class=&quot;code-quote&quot;&gt;&apos;Thrift::Socket should accept host/port options&apos;&lt;/span&gt;
Could not connect to my.domain:1234: undefined method `connect_nonblock&apos; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; nil:NilClass
./spec/../lib/thrift/transport/socket.rb:42:in `open&apos;
./spec/socket_spec.rb:34:
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12666355" author="robey" created="Fri, 23 Jan 2009 00:01:23 +0000"  >&lt;p&gt;works fine on both machines here. looks like you&apos;re getting a nil @handle. maybe try printing some debug info around that area? not sure why ruby would return nil from Socket.new tho.&lt;/p&gt;</comment>
                            <comment id="12667939" author="robey" created="Wed, 28 Jan 2009 06:03:41 +0000"  >&lt;p&gt;i was trying on a mac. just applied the patch on ubuntu and it worked the same there too.&lt;/p&gt;</comment>
                            <comment id="12679407" author="robey" created="Thu, 5 Mar 2009 22:57:43 +0000"  >&lt;p&gt;ping! has this been applied yet?&lt;/p&gt;</comment>
                            <comment id="12679697" author="kclark" created="Fri, 6 Mar 2009 19:47:08 +0000"  >&lt;p&gt;Sorry for the wait on feedback for this one Robey. I&apos;m getting the exact same failures as Bryan above. It&apos;s because the mocks in the specs aren&apos;t returning anything from the fake Socket.new. Lines 24 and 31 should be like:&lt;/p&gt;

&lt;p&gt;       ::Socket.should_receive(:new).and_return(mock(&quot;Handle&quot;, :connect_nonblock =&amp;gt; true))&lt;/p&gt;

&lt;p&gt;If you tweak the patch, I&apos;ll commit. Thanks, and really sorry for the wait.&lt;/p&gt;</comment>
                            <comment id="12679769" author="robey" created="Fri, 6 Mar 2009 23:54:32 +0000"  >&lt;p&gt;new patch&lt;/p&gt;</comment>
                            <comment id="12679774" author="robey" created="Fri, 6 Mar 2009 23:58:21 +0000"  >&lt;p&gt;worked for me before but works for me after, too, so &amp;#8211; here&apos;s a new patch with your change. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12679776" author="kclark" created="Sat, 7 Mar 2009 00:04:17 +0000"  >&lt;p&gt;Pushed in 751142.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12398330" name="patch-2.txt" size="1230" author="robey" created="Tue, 20 Jan 2009 20:44:53 +0000"/>
                            <attachment id="12398448" name="patch-3.txt" size="2983" author="robey" created="Thu, 22 Jan 2009 07:24:08 +0000"/>
                            <attachment id="12401657" name="patch.txt" size="3091" author="robey" created="Fri, 6 Mar 2009 23:54:32 +0000"/>
                            <attachment id="12398125" name="thrift-229.patch" size="844" author="bryanduxbury" created="Sat, 17 Jan 2009 00:34:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38439</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 38 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16f9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245606</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>