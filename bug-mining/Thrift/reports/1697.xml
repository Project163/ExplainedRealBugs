<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:25:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3873] Fix various build warnings when using Visual Studio</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3873</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;While verifying a defect I had to build the windows thrift C++ library and found a number of compiler warnings that needed to be cleaned up.  As part of cleaning these up, I found that additional compilers were also posting warnings.&lt;/p&gt;

&lt;p&gt;Acceptance Criteria:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;I can build successfully with Visual Studio 2010 targeting x86 debug mode with /WX (warnings are errors).&lt;/li&gt;
	&lt;li&gt;I can build successfully with Visual Studio 2010 targeting x86 release mode with /WX (warnings are errors).&lt;/li&gt;
	&lt;li&gt;I can build successfully with Visual Studio 2010 targeting x64 debug mode with /WX (warnings are errors).&lt;/li&gt;
	&lt;li&gt;I can build successfully with Visual Studio 2010 targeting x64 release mode with /WX (warnings are errors).&lt;/li&gt;
	&lt;li&gt;I can build successfully with Visual Studio 2015 targeting x86 debug mode with /WX (warnings are errors).&lt;/li&gt;
	&lt;li&gt;I can build successfully with Visual Studio 2015 targeting x86 release mode with /WX (warnings are errors).&lt;/li&gt;
	&lt;li&gt;I can build successfully with Visual Studio 2015 targeting x64 debug mode with /WX (warnings are errors).&lt;/li&gt;
	&lt;li&gt;I can build successfully with Visual Studio 2015 targeting x64 release mode with /WX (warnings are errors).&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Follow-up:  I got pretty close to this ideal goal, but not quite there.  There were improvements nonetheless and I was able to successfully build with Visual Studio 2010, 2012, 2013, and 2015, Debug or Release, Win32 or x64 modes and pass unit tests.  As such I didn&apos;t meet all the criteria of removing every warning, but the majority are gone.&lt;/p&gt;</description>
                <environment>&lt;p&gt;VS2010, Windows&lt;/p&gt;</environment>
        <key id="12987832">THRIFT-3873</key>
            <summary>Fix various build warnings when using Visual Studio</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jking3">James E. King III</assignee>
                                    <reporter username="jking3">James E. King III</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Jul 2016 16:09:18 +0000</created>
                <updated>Thu, 14 Dec 2017 13:54:46 +0000</updated>
                            <resolved>Fri, 20 Jan 2017 15:19:44 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.11.0</fixVersion>
                                    <component>C++ - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15368483" author="jking3" created="Fri, 8 Jul 2016 21:11:42 +0000"  >&lt;p&gt;I found the concurrency tests are using assert() in a bad way which causes these tests only to run on debug builds.  Once I enabled /W3 for MSVC builds it pointed out a couple things were unused in a release build leading me to this.  I&apos;m fixing this up as part of this change set.  I have it building with /W3 and no warnings.  Could even turn on /WX but thinking perhaps not the best thing to do given the combinations of compilers and libraries out there.&lt;/p&gt;</comment>
                            <comment id="15368710" author="jking3" created="Fri, 8 Jul 2016 23:31:48 +0000"  >&lt;p&gt;I also found the define of VERSION in config.h conflicts with another definition on Windows, and probably also with other third part libraries; when I changed it to THRIFT_VERSION I found that THttpClient and THttpServer compiled okay on Windows, but on linux VERSION was undefined!  Keeping it THRIFT_VERSION is much safer.&lt;/p&gt;</comment>
                            <comment id="15368843" author="githubbot" created="Sat, 9 Jul 2016 01:05:00 +0000"  >&lt;p&gt;Github user jeking3 closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1043&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1043&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15368847" author="githubbot" created="Sat, 9 Jul 2016 01:08:10 +0000"  >&lt;p&gt;GitHub user jeking3 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1044&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1044&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3873&quot; title=&quot;Fix various build warnings when using Visual Studio&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3873&quot;&gt;&lt;del&gt;THRIFT-3873&lt;/del&gt;&lt;/a&gt;: fix compiler warnings on windows with VS2010&lt;/p&gt;

&lt;p&gt;    Also fixed: concurrency tests were using assert() in a bad way limiting them to debug builds only&lt;br/&gt;
    Also fixed: changed config.h VERSION to THRIFT_VERSION to avoid conflicts with windows or third party headers&lt;/p&gt;

&lt;p&gt;    With this pull request in a CMake build on Windows VS2010 or on Linux (Ubuntu 14.04) the C++ code compiles clean with /W3 level warnings enabled.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jeking3/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jeking3/thrift&lt;/a&gt; defect/&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3873&quot; title=&quot;Fix various build warnings when using Visual Studio&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3873&quot;&gt;&lt;del&gt;THRIFT-3873&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1044.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1044.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1044&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 171d202ad1bf643c485ec7cdbaccf59cba67b489&lt;br/&gt;
Author: James E. King, III &amp;lt;jim.king@simplivity.com&amp;gt;&lt;br/&gt;
Date:   2016-07-08T22:04:21Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3873&quot; title=&quot;Fix various build warnings when using Visual Studio&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3873&quot;&gt;&lt;del&gt;THRIFT-3873&lt;/del&gt;&lt;/a&gt;: fix compiler warnings on windows with VS2010 and fix concurrency tests only running in debug mode; change VERSION to THRIFT_VERSION to avoid conflicts with third party or OS headers&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15368871" author="githubbot" created="Sat, 9 Jul 2016 01:49:15 +0000"  >&lt;p&gt;Github user jeking3 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1044&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1044&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Found that the automake environment wasn&apos;t building properly - will push a fix.&lt;/p&gt;</comment>
                            <comment id="15369198" author="jking3" created="Sat, 9 Jul 2016 17:05:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jensg&quot; class=&quot;user-hover&quot; rel=&quot;jensg&quot;&gt;jensg&lt;/a&gt; One of the 23 Travis jobs timed out at 48 minutes but it looks like it had passed all its tests and was in the middle of make cross.  Is there a way to rebuild one of those jobs?  Would you consider merging it given it passed almost all the tests, and the build environment is to blame for the single failed test?  It does need a code review.  There were issues with integer conversions relating to 64-bit pointer manipulation.  Much of the code in transport uses 32-bit integers for sizes.  What I did in these cases was to add an assert to ensure the pointer calculation was within the proper range before casting it.  I couldn&apos;t convince myself that moving all the code in transport to 64-bit would be the right thing to do for this project, since I assume we have plenty of folks using thrift in embedded 32-bit processors... although I would expect those environments to provide 64-bit support it might not be as fast.&lt;/p&gt;</comment>
                            <comment id="15371617" author="jensg" created="Mon, 11 Jul 2016 21:03:07 +0000"  >&lt;p&gt;Ok, I do that.&lt;/p&gt;

&lt;p&gt;&amp;gt; Is there a way to rebuild one of those jobs?&lt;/p&gt;

&lt;p&gt;AFAIK the simplest way is to &quot;update&quot; the PR.&lt;/p&gt;</comment>
                            <comment id="15412698" author="githubbot" created="Tue, 9 Aug 2016 00:14:52 +0000"  >&lt;p&gt;Github user tpcwang commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1044&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1044&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I didn&apos;t review the changes in detail, but I agree with the change and like the fact that we can compile cleanly with /W3 :+1: &lt;/p&gt;</comment>
                            <comment id="15530157" author="githubbot" created="Wed, 28 Sep 2016 16:31:11 +0000"  >&lt;p&gt;Github user jeking3 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1044&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1044&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I rebased on &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3936&quot; title=&quot;Cannot compile 0.10.0 development tip with VS2013 and earlier (snprintf, uint32_t)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3936&quot;&gt;&lt;del&gt;THRIFT-3936&lt;/del&gt;&lt;/a&gt; so that it would compile and resolved merge conflicts that occurred since July.&lt;/p&gt;</comment>
                            <comment id="15530294" author="githubbot" created="Wed, 28 Sep 2016 17:24:57 +0000"  >&lt;p&gt;Github user nsuke commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1044&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1044&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @jeking3 hi, sorry for the delay, what is your thought on &quot;#define __STDC_LIMIT_MACROS + ..._MAX&quot; v.s. numeric_limists&amp;lt;...&amp;gt;::max() ?&lt;br/&gt;
    If it were my own code, I would always use numeric_limists but I had once very strange compilation error on VC++14 with this too.&lt;br/&gt;
    Do you think define + _MAX is better or as good for our code base ?&lt;/p&gt;</comment>
                            <comment id="15530323" author="githubbot" created="Wed, 28 Sep 2016 17:34:03 +0000"  >&lt;p&gt;Github user jeking3 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1044&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1044&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I have tended to use the C99 limit macros in the past, however either one should be acceptable.  I don&apos;t believe I have experienced issues with numeric_limits before.  Either solution should be portable going forward as well so I don&apos;t see the need to favor one over the other.&lt;/p&gt;
</comment>
                            <comment id="15530331" author="githubbot" created="Wed, 28 Sep 2016 17:35:57 +0000"  >&lt;p&gt;Github user jeking3 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1044&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1044&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Going to rebase one more time on &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3936&quot; title=&quot;Cannot compile 0.10.0 development tip with VS2013 and earlier (snprintf, uint32_t)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3936&quot;&gt;&lt;del&gt;THRIFT-3936&lt;/del&gt;&lt;/a&gt; which now includes the fix for appveyor.&lt;/p&gt;</comment>
                            <comment id="15532688" author="githubbot" created="Thu, 29 Sep 2016 12:48:32 +0000"  >&lt;p&gt;Github user jeking3 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1044&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1044&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Rebasing again on &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3936&quot; title=&quot;Cannot compile 0.10.0 development tip with VS2013 and earlier (snprintf, uint32_t)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3936&quot;&gt;&lt;del&gt;THRIFT-3936&lt;/del&gt;&lt;/a&gt; so it compiles on VS2010 after &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2836&quot; title=&quot;Optionally generate C++11 MoveConstructible types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2836&quot;&gt;&lt;del&gt;THRIFT-2836&lt;/del&gt;&lt;/a&gt; was introduced... so we&apos;ll want &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3936&quot; title=&quot;Cannot compile 0.10.0 development tip with VS2013 and earlier (snprintf, uint32_t)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3936&quot;&gt;&lt;del&gt;THRIFT-3936&lt;/del&gt;&lt;/a&gt; to be merged before this one.&lt;/p&gt;</comment>
                            <comment id="15533821" author="githubbot" created="Thu, 29 Sep 2016 19:35:02 +0000"  >&lt;p&gt;Github user jeking3 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1044&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1044&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;ll rebase on master once &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3936&quot; title=&quot;Cannot compile 0.10.0 development tip with VS2013 and earlier (snprintf, uint32_t)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3936&quot;&gt;&lt;del&gt;THRIFT-3936&lt;/del&gt;&lt;/a&gt; is merged, since something odd happened with the build.&lt;/p&gt;</comment>
                            <comment id="15538710" author="githubbot" created="Sat, 1 Oct 2016 15:47:08 +0000"  >&lt;p&gt;Github user jeking3 closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1044&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1044&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15538711" author="githubbot" created="Sat, 1 Oct 2016 15:47:30 +0000"  >&lt;p&gt;Github user jeking3 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1044&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1044&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;m closing this to re-submit it without &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3936&quot; title=&quot;Cannot compile 0.10.0 development tip with VS2013 and earlier (snprintf, uint32_t)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3936&quot;&gt;&lt;del&gt;THRIFT-3936&lt;/del&gt;&lt;/a&gt; in it since it was merged to master, but when I rebased it&apos;s still here.&lt;/p&gt;</comment>
                            <comment id="15538754" author="jking3" created="Sat, 1 Oct 2016 16:13:53 +0000"  >&lt;p&gt;Marking this blocked by &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3932&quot; title=&quot;C++ ThreadManager has a rare termination race&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3932&quot;&gt;&lt;del&gt;THRIFT-3932&lt;/del&gt;&lt;/a&gt; because it has more substantial (and better) changes to the concurrency test code which do the same thing (and a lot more).  Once &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3932&quot; title=&quot;C++ ThreadManager has a rare termination race&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3932&quot;&gt;&lt;del&gt;THRIFT-3932&lt;/del&gt;&lt;/a&gt; merges I will rebase this and re-submit.&lt;/p&gt;</comment>
                            <comment id="15660301" author="githubbot" created="Sat, 12 Nov 2016 21:15:20 +0000"  >&lt;p&gt;GitHub user jeking3 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3873&quot; title=&quot;Fix various build warnings when using Visual Studio&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3873&quot;&gt;&lt;del&gt;THRIFT-3873&lt;/del&gt;&lt;/a&gt;: fix compiler warnings on windows with VS2010&lt;/p&gt;

&lt;p&gt;    Also changed VERSION to THRIFT_VERSION to avoid conflicts with third party or OS headers.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jeking3/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jeking3/thrift&lt;/a&gt; defect/&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3873&quot; title=&quot;Fix various build warnings when using Visual Studio&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3873&quot;&gt;&lt;del&gt;THRIFT-3873&lt;/del&gt;&lt;/a&gt;-take-3&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1128&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit a46d39010b52ab4aaae4ea1b5de477261999f1df&lt;br/&gt;
Author: James E. King, III &amp;lt;jim.king@simplivity.com&amp;gt;&lt;br/&gt;
Date:   2016-07-08T22:04:21Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3873&quot; title=&quot;Fix various build warnings when using Visual Studio&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3873&quot;&gt;&lt;del&gt;THRIFT-3873&lt;/del&gt;&lt;/a&gt;: fix compiler warnings on windows with VS2010; change VERSION to THRIFT_VERSION to avoid conflicts with third party or OS headers&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15665675" author="githubbot" created="Tue, 15 Nov 2016 01:29:14 +0000"  >&lt;p&gt;Github user ben-craig commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r87931050&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r87931050&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: compiler/cpp/CMakeLists.txt &amp;#8212;&lt;br/&gt;
    @@ -18,6 +18,16 @@&lt;br/&gt;
     #&lt;/p&gt;

&lt;p&gt;     configure_file(${CMAKE_CURRENT_SOURCE_DIR}/src/thrift/version.h.in ${CMAKE_CURRENT_BINARY_DIR}/thrift/version.h)&lt;br/&gt;
    +if(MSVC)&lt;br/&gt;
    +    # The winflexbison generator outputs some macros that conflict with the Visual Studio 2010 copy of stdint.h&lt;br/&gt;
    +    # This might be fixed in later versions of Visual Studio, but an easy solution is to include stdint.h first&lt;br/&gt;
    +    if(HAVE_STDINT_H)&lt;br/&gt;
    +        add_definitions(/FI&quot;stdint.h&quot;)&lt;br/&gt;
    +    endif(HAVE_STDINT_H)&lt;br/&gt;
    +&lt;br/&gt;
    +    # The generated code also causes a size type warning we cannot work around easily&lt;br/&gt;
    +    set_source_files_properties(thriftl.cc PROPERTIES COMPILE_FLAGS /wd4267)&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    This should be resolved by putting a pragma in the source code.  Only put code relevant things in the build system if there are no other alternatives.&lt;/p&gt;</comment>
                            <comment id="15665676" author="githubbot" created="Tue, 15 Nov 2016 01:29:14 +0000"  >&lt;p&gt;Github user ben-craig commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r87931893&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r87931893&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: lib/cpp/src/thrift/transport/TServerSocket.cpp &amp;#8212;&lt;br/&gt;
    @@ -60,7 +60,7 @@&lt;br/&gt;
     #endif // _WIN32&lt;br/&gt;
     #endif&lt;/p&gt;

&lt;p&gt;    -#if defined(_WIN32) &amp;amp;&amp;amp; (_WIN32_WINNT &amp;lt; 0x0600)&lt;br/&gt;
    +#if defined(_WIN32) &amp;amp;&amp;amp; (_WIN32_WINNT &amp;lt; 0x0600) &amp;amp;&amp;amp; !defined(AI_ADDRCONFIG)&lt;br/&gt;
       #define AI_ADDRCONFIG 0x0400&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    You didn&apos;t break this, but this kind of thing is exactly what the platform socket header is for.  Defining constants that don&apos;t belong to us often leads to trouble.  Instead, we should be defining something like THRIFT_AI_ADDRCONFIG that can either be the real AI_ADDRCONFIG or 0x0400.&lt;/p&gt;</comment>
                            <comment id="15665677" author="githubbot" created="Tue, 15 Nov 2016 01:29:14 +0000"  >&lt;p&gt;Github user ben-craig commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r87931714&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r87931714&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: lib/cpp/src/thrift/transport/THeaderTransport.h &amp;#8212;&lt;br/&gt;
    @@ -135,8 +141,9 @@ class THeaderTransport : public TVirtualTransport&amp;lt;THeaderTransport, TFramedTrans&lt;br/&gt;
       void transform(uint8_t* ptr, uint32_t sz);&lt;/p&gt;

&lt;p&gt;       uint16_t getNumTransforms() const {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;int trans = writeTrans_.size();&lt;/li&gt;
	&lt;li&gt;return trans;&lt;br/&gt;
    +    std::vector&amp;lt;uint16_t&amp;gt;::size_type trans = writeTrans_.size();&lt;br/&gt;
    +    assert(trans &amp;lt;= UINT16_MAX);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    If your casting error checking is just debug asserts, then you might as well stick with the casts.&lt;br/&gt;
    My preference would be to throw an exception if the size is out of bounds.&lt;/p&gt;</comment>
                            <comment id="15665757" author="githubbot" created="Tue, 15 Nov 2016 02:09:45 +0000"  >&lt;p&gt;Github user jeking3 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @ben-craig Thanks these are great comments, I will make some changes to improve this.&lt;/p&gt;</comment>
                            <comment id="15674972" author="githubbot" created="Thu, 17 Nov 2016 22:17:29 +0000"  >&lt;p&gt;Github user jeking3 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r88559811&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r88559811&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: lib/cpp/src/thrift/transport/TServerSocket.cpp &amp;#8212;&lt;br/&gt;
    @@ -60,7 +60,7 @@&lt;br/&gt;
     #endif // _WIN32&lt;br/&gt;
     #endif&lt;/p&gt;

&lt;p&gt;    -#if defined(_WIN32) &amp;amp;&amp;amp; (_WIN32_WINNT &amp;lt; 0x0600)&lt;br/&gt;
    +#if defined(_WIN32) &amp;amp;&amp;amp; (_WIN32_WINNT &amp;lt; 0x0600) &amp;amp;&amp;amp; !defined(AI_ADDRCONFIG)&lt;br/&gt;
       #define AI_ADDRCONFIG 0x0400&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    I&apos;m not convinced this needs to be defined here; every windows platform windows supports has winsock2, which includes ws2def.h, which defines this and AI_PASSIVE which is used right alongside AI_ADDRCONFIG in the code... so I am going to remove the #if block here.&lt;/p&gt;</comment>
                            <comment id="15674976" author="githubbot" created="Thu, 17 Nov 2016 22:18:48 +0000"  >&lt;p&gt;Github user jeking3 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r88560045&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r88560045&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: compiler/cpp/CMakeLists.txt &amp;#8212;&lt;br/&gt;
    @@ -18,6 +18,16 @@&lt;br/&gt;
     #&lt;/p&gt;

&lt;p&gt;     configure_file(${CMAKE_CURRENT_SOURCE_DIR}/src/thrift/version.h.in ${CMAKE_CURRENT_BINARY_DIR}/thrift/version.h)&lt;br/&gt;
    +if(MSVC)&lt;br/&gt;
    +    # The winflexbison generator outputs some macros that conflict with the Visual Studio 2010 copy of stdint.h&lt;br/&gt;
    +    # This might be fixed in later versions of Visual Studio, but an easy solution is to include stdint.h first&lt;br/&gt;
    +    if(HAVE_STDINT_H)&lt;br/&gt;
    +        add_definitions(/FI&quot;stdint.h&quot;)&lt;br/&gt;
    +    endif(HAVE_STDINT_H)&lt;br/&gt;
    +&lt;br/&gt;
    +    # The generated code also causes a size type warning we cannot work around easily&lt;br/&gt;
    +    set_source_files_properties(thriftl.cc PROPERTIES COMPILE_FLAGS /wd4267)&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    I was able to move this into thriftc.ll however we still need the /FIstdint.h to avoid compiler warnings.&lt;/p&gt;</comment>
                            <comment id="15675137" author="githubbot" created="Thu, 17 Nov 2016 23:30:00 +0000"  >&lt;p&gt;Github user jeking3 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r88571093&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r88571093&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: lib/cpp/src/thrift/transport/THeaderTransport.h &amp;#8212;&lt;br/&gt;
    @@ -135,8 +141,9 @@ class THeaderTransport : public TVirtualTransport&amp;lt;THeaderTransport, TFramedTrans&lt;br/&gt;
       void transform(uint8_t* ptr, uint32_t sz);&lt;/p&gt;

&lt;p&gt;       uint16_t getNumTransforms() const {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;int trans = writeTrans_.size();&lt;/li&gt;
	&lt;li&gt;return trans;&lt;br/&gt;
    +    std::vector&amp;lt;uint16_t&amp;gt;::size_type trans = writeTrans_.size();&lt;br/&gt;
    +    assert(trans &amp;lt;= UINT16_MAX);
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I added &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3978&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/THRIFT-3978&lt;/a&gt; to cover this across the codebase.&lt;/p&gt;</comment>
                            <comment id="15680195" author="githubbot" created="Sun, 20 Nov 2016 01:30:48 +0000"  >&lt;p&gt;Github user hcorg commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r88791710&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r88791710&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: lib/cpp/src/thrift/transport/THeaderTransport.cpp &amp;#8212;&lt;br/&gt;
    @@ -494,7 +519,12 @@ void THeaderTransport::flush() {&lt;br/&gt;
         }&lt;/p&gt;

&lt;p&gt;         // Fixups after varint size calculations&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;headerSize = (pkt - headerStart);&lt;br/&gt;
    +    ptrdiff_t ptrSize = pkt - headerStart;&lt;br/&gt;
    +	if (ptrSize &amp;gt; std::numeric_limits&amp;lt;uint32_t&amp;gt;().max()) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    indentation&lt;/p&gt;</comment>
                            <comment id="15680196" author="githubbot" created="Sun, 20 Nov 2016 01:30:48 +0000"  >&lt;p&gt;Github user hcorg commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r88791711&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r88791711&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: lib/cpp/src/thrift/transport/THeaderTransport.h &amp;#8212;&lt;br/&gt;
    @@ -135,8 +142,12 @@ class THeaderTransport : public TVirtualTransport&amp;lt;THeaderTransport, TFramedTrans&lt;br/&gt;
       void transform(uint8_t* ptr, uint32_t sz);&lt;/p&gt;

&lt;p&gt;       uint16_t getNumTransforms() const {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;int trans = writeTrans_.size();&lt;/li&gt;
	&lt;li&gt;return trans;&lt;br/&gt;
    +    std::vector&amp;lt;uint16_t&amp;gt;::size_type trans = writeTrans_.size();&lt;br/&gt;
    +	if (trans &amp;gt; std::numeric_limits&amp;lt;uint16_t&amp;gt;().max()) {&lt;br/&gt;
    +      throw TTransportException(TTransportException::CORRUPTED_DATA,
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    indent&lt;/p&gt;</comment>
                            <comment id="15680197" author="githubbot" created="Sun, 20 Nov 2016 01:30:48 +0000"  >&lt;p&gt;Github user hcorg commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r88791667&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r88791667&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: lib/cpp/src/thrift/transport/THeaderTransport.cpp &amp;#8212;&lt;br/&gt;
    @@ -375,7 +383,12 @@ void THeaderTransport::resetProtocol() {&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;     uint32_t THeaderTransport::getWriteBytes() {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return wBase_ - wBuf_.get();&lt;br/&gt;
    +  ptrdiff_t wb = wBase_ - wBuf_.get();&lt;br/&gt;
    +  if (wb &amp;gt; std::numeric_limits&amp;lt;uint32_t&amp;gt;().max()) 
{
    +    throw TTransportException(TTransportException::CORRUPTED_DATA,
    +                              &quot;write size is unreasonable&quot;);
    +  }
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    as before - code repetition - some utility function would make it much cleaner (different than before, as now TTTransportException should be thrown)&lt;/p&gt;</comment>
                            <comment id="15680198" author="githubbot" created="Sun, 20 Nov 2016 01:30:48 +0000"  >&lt;p&gt;Github user hcorg commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r88791621&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r88791621&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: compiler/cpp/src/thrift/generate/t_erl_generator.cc &amp;#8212;&lt;br/&gt;
    @@ -968,10 +969,13 @@ void t_erl_generator::export_string(string name, int num) {&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;     void t_erl_generator::export_types_function(t_function* tfunction, string prefix) {&lt;br/&gt;
    -&lt;br/&gt;
    +  t_struct::members_type::size_type num = tfunction-&amp;gt;get_arglist()-&amp;gt;get_members().size();&lt;br/&gt;
    +  if (num &amp;gt; std::numeric_limits&amp;lt;int&amp;gt;().max()) {&lt;br/&gt;
    +    throw &quot;integer overflow in t_erl_generator::export_types_function, name &quot; + tfunction-&amp;gt;get_name();&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    throwing std::string is an antipattern - it should at least be wrapped in std::runtime_error &lt;/p&gt;

&lt;p&gt;    this code is also repeated in couple of places, maybe some utility function could simplify it?&lt;/p&gt;

&lt;p&gt;    something like: &lt;br/&gt;
    `template &amp;lt;typename To, typename From&amp;gt; To safe_numeric_cast(From i) &lt;/p&gt;
{ ... }
&lt;p&gt;`&lt;/p&gt;</comment>
                            <comment id="15680199" author="githubbot" created="Sun, 20 Nov 2016 01:30:48 +0000"  >&lt;p&gt;Github user hcorg commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r88791642&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r88791642&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: compiler/cpp/src/thrift/thriftl.ll &amp;#8212;&lt;br/&gt;
    @@ -39,11 +39,17 @@&lt;br/&gt;
     #endif&lt;/p&gt;

&lt;p&gt;     #ifdef _MSC_VER&lt;br/&gt;
    -//warning C4102: &apos;find_rule&apos; : unreferenced label&lt;br/&gt;
    -#pragma warning(disable:4102)&lt;br/&gt;
    -//avoid isatty redefinition&lt;br/&gt;
    +#pragma warning( push )&lt;br/&gt;
    +// warning C4267: &apos;argument&apos; : conversion from &apos;size_t&apos; to &apos;int&apos;, possible loss of data&lt;br/&gt;
    +#pragma warning( disable : 4267 )&lt;br/&gt;
    +&lt;br/&gt;
    +// warning C4102: &apos;find_rule&apos; : unreferenced label&lt;br/&gt;
    +#pragma warning( disable : 4102 )&lt;br/&gt;
    +&lt;br/&gt;
    +// avoid isatty redefinition&lt;br/&gt;
     #define YY_NEVER_INTERACTIVE 1&lt;/p&gt;

&lt;p&gt;    +// no &amp;lt;unistd.h&amp;gt;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    unnecessary comment imho&lt;/p&gt;</comment>
                            <comment id="15680200" author="githubbot" created="Sun, 20 Nov 2016 01:30:48 +0000"  >&lt;p&gt;Github user hcorg commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r88791632&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r88791632&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: compiler/cpp/src/thrift/generate/t_go_generator.cc &amp;#8212;&lt;br/&gt;
    @@ -433,7 +434,11 @@ std::string t_go_generator::camelcase(const std::string&amp;amp; value) const {&lt;br/&gt;
           if (islower(value2&lt;span class=&quot;error&quot;&gt;&amp;#91;i + 1&amp;#93;&lt;/span&gt;)) &lt;/p&gt;
{
             value2.replace(i, 2, 1, toupper(value2[i + 1]));
           }
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;fix_common_initialism(value2, i);&lt;br/&gt;
    +&lt;br/&gt;
    +	  if (i &amp;gt; std::numeric_limits&amp;lt;int&amp;gt;().max()) {&lt;br/&gt;
    +        throw &quot;integer overflow in t_go_generator::camelcase, value = &quot; + value;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    looks like some indentation problem (some time ago `make format` was helping with such issues... but it might no longer work :/ )&lt;/p&gt;</comment>
                            <comment id="15680201" author="githubbot" created="Sun, 20 Nov 2016 01:30:48 +0000"  >&lt;p&gt;Github user hcorg commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r88791701&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r88791701&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: lib/cpp/src/thrift/transport/THeaderTransport.cpp &amp;#8212;&lt;br/&gt;
    @@ -394,15 +411,19 @@ void THeaderTransport::setHeader(const string&amp;amp; key, const string&amp;amp; value) &lt;/p&gt;
{
       writeHeaders_[key] = value;
     }

&lt;p&gt;    -size_t THeaderTransport::getMaxWriteHeadersSize() const {&lt;br/&gt;
    +uint32_t THeaderTransport::getMaxWriteHeadersSize() const {&lt;br/&gt;
       size_t maxWriteHeadersSize = 0;&lt;br/&gt;
       THeaderTransport::StringToStringMap::const_iterator it;&lt;br/&gt;
       for (it = writeHeaders_.begin(); it != writeHeaders_.end(); ++it) &lt;/p&gt;
{
         // add sizes of key and value to maxWriteHeadersSize
         // 2 varints32 + the strings themselves
         maxWriteHeadersSize += 5 + 5 + (it-&amp;gt;first).length() + (it-&amp;gt;second).length();
       }
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return maxWriteHeadersSize;&lt;br/&gt;
    +  if (maxWriteHeadersSize &amp;gt; std::numeric_limits&amp;lt;uint32_t&amp;gt;().max()) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I&apos;ve just realized - if somebody will compile this code on 32bit machine with gcc he will get &quot;comparison always true&quot; warning... just a thought &lt;/p&gt;</comment>
                            <comment id="15680202" author="githubbot" created="Sun, 20 Nov 2016 01:30:48 +0000"  >&lt;p&gt;Github user hcorg commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r88791721&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r88791721&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: lib/cpp/test/JSONProtoTest.cpp &amp;#8212;&lt;br/&gt;
    @@ -262,8 +262,9 @@ BOOST_AUTO_TEST_CASE(test_json_proto_8) &lt;/p&gt;
{
       &quot;:[\&quot;i8\&quot;,3,1,2,3]}
&lt;p&gt;,\&quot;13\&quot;:&lt;/p&gt;
{\&quot;lst\&quot;:[\&quot;i16\&quot;,3,1,2,3]}
&lt;p&gt;,\&quot;14\&quot;:{\&quot;lst\&quot;:[\&quot;i64&quot;&lt;br/&gt;
       &quot;\&quot;,3,1,2,3]}}&quot;;&lt;/p&gt;

&lt;p&gt;    +  size_t bufSiz = strlen(json_string)*sizeof(char);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    `const std::size_t bufSize` could improve readability&lt;/p&gt;</comment>
                            <comment id="15681333" author="githubbot" created="Sun, 20 Nov 2016 15:35:30 +0000"  >&lt;p&gt;Github user jeking3 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r88804076&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r88804076&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: compiler/cpp/src/thrift/generate/t_erl_generator.cc &amp;#8212;&lt;br/&gt;
    @@ -968,10 +969,13 @@ void t_erl_generator::export_string(string name, int num) {&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;     void t_erl_generator::export_types_function(t_function* tfunction, string prefix) {&lt;br/&gt;
    -&lt;br/&gt;
    +  t_struct::members_type::size_type num = tfunction-&amp;gt;get_arglist()-&amp;gt;get_members().size();&lt;br/&gt;
    +  if (num &amp;gt; std::numeric_limits&amp;lt;int&amp;gt;().max()) {&lt;br/&gt;
    +    throw &quot;integer overflow in t_erl_generator::export_types_function, name &quot; + tfunction-&amp;gt;get_name();&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Throwing std::string or char * is a pattern used throughout the compiler code.  While I agree with you this is not something that should be done, I was following what was already there for continuity and maintainability.  &lt;/p&gt;

&lt;p&gt;    I filed &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3982&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/THRIFT-3982&lt;/a&gt; to cover this issue across the compiler codebase.  As such, I would like to request this remain.&lt;/p&gt;</comment>
                            <comment id="15681386" author="githubbot" created="Sun, 20 Nov 2016 16:15:13 +0000"  >&lt;p&gt;Github user jeking3 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r88804923&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r88804923&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: lib/cpp/src/thrift/transport/THeaderTransport.cpp &amp;#8212;&lt;br/&gt;
    @@ -394,15 +411,19 @@ void THeaderTransport::setHeader(const string&amp;amp; key, const string&amp;amp; value) &lt;/p&gt;
{
       writeHeaders_[key] = value;
     }

&lt;p&gt;    -size_t THeaderTransport::getMaxWriteHeadersSize() const {&lt;br/&gt;
    +uint32_t THeaderTransport::getMaxWriteHeadersSize() const {&lt;br/&gt;
       size_t maxWriteHeadersSize = 0;&lt;br/&gt;
       THeaderTransport::StringToStringMap::const_iterator it;&lt;br/&gt;
       for (it = writeHeaders_.begin(); it != writeHeaders_.end(); ++it) &lt;/p&gt;
{
         // add sizes of key and value to maxWriteHeadersSize
         // 2 varints32 + the strings themselves
         maxWriteHeadersSize += 5 + 5 + (it-&amp;gt;first).length() + (it-&amp;gt;second).length();
       }
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return maxWriteHeadersSize;&lt;br/&gt;
    +  if (maxWriteHeadersSize &amp;gt; std::numeric_limits&amp;lt;uint32_t&amp;gt;().max()) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I suppose the same would occur if I build Win32 instead of x64.  I&apos;ll give it a try.&lt;/p&gt;</comment>
                            <comment id="15681388" author="githubbot" created="Sun, 20 Nov 2016 16:15:44 +0000"  >&lt;p&gt;Github user jeking3 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r88804934&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r88804934&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: compiler/cpp/src/thrift/thriftl.ll &amp;#8212;&lt;br/&gt;
    @@ -39,11 +39,17 @@&lt;br/&gt;
     #endif&lt;/p&gt;

&lt;p&gt;     #ifdef _MSC_VER&lt;br/&gt;
    -//warning C4102: &apos;find_rule&apos; : unreferenced label&lt;br/&gt;
    -#pragma warning(disable:4102)&lt;br/&gt;
    -//avoid isatty redefinition&lt;br/&gt;
    +#pragma warning( push )&lt;br/&gt;
    +// warning C4267: &apos;argument&apos; : conversion from &apos;size_t&apos; to &apos;int&apos;, possible loss of data&lt;br/&gt;
    +#pragma warning( disable : 4267 )&lt;br/&gt;
    +&lt;br/&gt;
    +// warning C4102: &apos;find_rule&apos; : unreferenced label&lt;br/&gt;
    +#pragma warning( disable : 4102 )&lt;br/&gt;
    +&lt;br/&gt;
    +// avoid isatty redefinition&lt;br/&gt;
     #define YY_NEVER_INTERACTIVE 1&lt;/p&gt;

&lt;p&gt;    +// no &amp;lt;unistd.h&amp;gt;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Removed in next push.&lt;/p&gt;</comment>
                            <comment id="15681390" author="githubbot" created="Sun, 20 Nov 2016 16:17:35 +0000"  >&lt;p&gt;Github user jeking3 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r88804989&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r88804989&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: lib/cpp/src/thrift/transport/THeaderTransport.cpp &amp;#8212;&lt;br/&gt;
    @@ -375,7 +383,12 @@ void THeaderTransport::resetProtocol() {&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;     uint32_t THeaderTransport::getWriteBytes() {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return wBase_ - wBuf_.get();&lt;br/&gt;
    +  ptrdiff_t wb = wBase_ - wBuf_.get();&lt;br/&gt;
    +  if (wb &amp;gt; std::numeric_limits&amp;lt;uint32_t&amp;gt;().max()) 
{
    +    throw TTransportException(TTransportException::CORRUPTED_DATA,
    +                              &quot;write size is unreasonable&quot;);
    +  }
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I added apache::thrift::transport::safe_numeric_cast to the TTransportException header.  I couldn&apos;t think of a better place to put it for now... I agree it simplifies the code in many places, and the transport code seems to be the code closest to the platform where these transform issues exist.&lt;/p&gt;</comment>
                            <comment id="15681392" author="githubbot" created="Sun, 20 Nov 2016 16:17:48 +0000"  >&lt;p&gt;Github user jeking3 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r88804996&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r88804996&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: lib/cpp/test/JSONProtoTest.cpp &amp;#8212;&lt;br/&gt;
    @@ -262,8 +262,9 @@ BOOST_AUTO_TEST_CASE(test_json_proto_8) &lt;/p&gt;
{
       &quot;:[\&quot;i8\&quot;,3,1,2,3]}
&lt;p&gt;,\&quot;13\&quot;:&lt;/p&gt;
{\&quot;lst\&quot;:[\&quot;i16\&quot;,3,1,2,3]}
&lt;p&gt;,\&quot;14\&quot;:{\&quot;lst\&quot;:[\&quot;i64&quot;&lt;br/&gt;
       &quot;\&quot;,3,1,2,3]}}&quot;;&lt;/p&gt;

&lt;p&gt;    +  size_t bufSiz = strlen(json_string)*sizeof(char);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Fixed in the next push.&lt;/p&gt;</comment>
                            <comment id="15681417" author="githubbot" created="Sun, 20 Nov 2016 16:36:30 +0000"  >&lt;p&gt;Github user jeking3 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r88805388&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r88805388&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: lib/cpp/src/thrift/transport/THeaderTransport.cpp &amp;#8212;&lt;br/&gt;
    @@ -394,15 +411,19 @@ void THeaderTransport::setHeader(const string&amp;amp; key, const string&amp;amp; value) &lt;/p&gt;
{
       writeHeaders_[key] = value;
     }

&lt;p&gt;    -size_t THeaderTransport::getMaxWriteHeadersSize() const {&lt;br/&gt;
    +uint32_t THeaderTransport::getMaxWriteHeadersSize() const {&lt;br/&gt;
       size_t maxWriteHeadersSize = 0;&lt;br/&gt;
       THeaderTransport::StringToStringMap::const_iterator it;&lt;br/&gt;
       for (it = writeHeaders_.begin(); it != writeHeaders_.end(); ++it) &lt;/p&gt;
{
         // add sizes of key and value to maxWriteHeadersSize
         // 2 varints32 + the strings themselves
         maxWriteHeadersSize += 5 + 5 + (it-&amp;gt;first).length() + (it-&amp;gt;second).length();
       }
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return maxWriteHeadersSize;&lt;br/&gt;
    +  if (maxWriteHeadersSize &amp;gt; std::numeric_limits&amp;lt;uint32_t&amp;gt;().max()) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Compiling in Win32 exposed additional warnings I will clean up.  Thanks for this comment!  I am also going to build with Visual Studio 2015 in 32-bit and 64-bit to make sure they are all cleaned up.  I have Win64 VS2010 building without any warnings at this point.  In addition I found that the tutorial CMakeLists.txt assumes ZLIB is configured so I changed it to be conditional on the ZLIB library.&lt;/p&gt;</comment>
                            <comment id="15796266" author="githubbot" created="Tue, 3 Jan 2017 21:39:48 +0000"  >&lt;p&gt;Github user Jens-G commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r94489293&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r94489293&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: compiler/cpp/src/thrift/generate/t_erl_generator.cc &amp;#8212;&lt;br/&gt;
    @@ -984,10 +988,13 @@ void t_erl_generator::export_types_string(string name, int num) {&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;     void t_erl_generator::export_function(t_function* tfunction, string prefix) {&lt;br/&gt;
    -&lt;br/&gt;
    +  t_struct::members_type::size_type num = tfunction-&amp;gt;get_arglist()-&amp;gt;get_members().size();&lt;br/&gt;
    +  if (num &amp;gt; std::numeric_limits&amp;lt;int&amp;gt;().max()) {&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    I&apos;m getting a warning at ` if (num &amp;gt; std::numeric_limits&amp;lt;int&amp;gt;().max()) { ` in this file and also in the erlang generator (2 occurences):&lt;/p&gt;

&lt;p&gt;    `C4018: &quot;&amp;gt;&quot;: Conflict between &quot;signed&quot; and &quot;unsigned&quot;`&lt;/p&gt;</comment>
                            <comment id="15796365" author="githubbot" created="Tue, 3 Jan 2017 22:15:40 +0000"  >&lt;p&gt;Github user jeking3 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r94495800&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r94495800&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: compiler/cpp/src/thrift/generate/t_erl_generator.cc &amp;#8212;&lt;br/&gt;
    @@ -984,10 +988,13 @@ void t_erl_generator::export_types_string(string name, int num) {&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;     void t_erl_generator::export_function(t_function* tfunction, string prefix) {&lt;br/&gt;
    -&lt;br/&gt;
    +  t_struct::members_type::size_type num = tfunction-&amp;gt;get_arglist()-&amp;gt;get_members().size();&lt;br/&gt;
    +  if (num &amp;gt; std::numeric_limits&amp;lt;int&amp;gt;().max()) {&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Yes, I just finished a suite of batch files to build zlib, openssl, libevent, and thrift for VS 2010 through 2015, win32/x64, debug/release.  I started running into these signed/unsigned issues today and I am working through resolving it.  The acceptance criteria for this issue is that I can build all combinations with zero warnings - we&apos;ll see how close I get.&lt;/p&gt;</comment>
                            <comment id="15812484" author="githubbot" created="Mon, 9 Jan 2017 18:35:08 +0000"  >&lt;p&gt;Github user jeking3 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r95216695&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r95216695&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: lib/cpp/src/thrift/transport/THeaderTransport.cpp &amp;#8212;&lt;br/&gt;
    @@ -375,7 +383,12 @@ void THeaderTransport::resetProtocol() {&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;     uint32_t THeaderTransport::getWriteBytes() {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return wBase_ - wBuf_.get();&lt;br/&gt;
    +  ptrdiff_t wb = wBase_ - wBuf_.get();&lt;br/&gt;
    +  if (wb &amp;gt; std::numeric_limits&amp;lt;uint32_t&amp;gt;().max()) 
{
    +    throw TTransportException(TTransportException::CORRUPTED_DATA,
    +                              &quot;write size is unreasonable&quot;);
    +  }
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Unfortunately using a template like this caused build warnings to occur when the inputs are not the same signed-ness.  I think these bounds checks need to be done with eyes wide open, and need to be specific in each case in order to avoid compiler warnings.&lt;/p&gt;</comment>
                            <comment id="15812489" author="githubbot" created="Mon, 9 Jan 2017 18:36:54 +0000"  >&lt;p&gt;Github user jeking3 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r95217047&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r95217047&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: lib/cpp/src/thrift/transport/THeaderTransport.cpp &amp;#8212;&lt;br/&gt;
    @@ -394,15 +411,19 @@ void THeaderTransport::setHeader(const string&amp;amp; key, const string&amp;amp; value) &lt;/p&gt;
{
       writeHeaders_[key] = value;
     }

&lt;p&gt;    -size_t THeaderTransport::getMaxWriteHeadersSize() const {&lt;br/&gt;
    +uint32_t THeaderTransport::getMaxWriteHeadersSize() const {&lt;br/&gt;
       size_t maxWriteHeadersSize = 0;&lt;br/&gt;
       THeaderTransport::StringToStringMap::const_iterator it;&lt;br/&gt;
       for (it = writeHeaders_.begin(); it != writeHeaders_.end(); ++it) &lt;/p&gt;
{
         // add sizes of key and value to maxWriteHeadersSize
         // 2 varints32 + the strings themselves
         maxWriteHeadersSize += 5 + 5 + (it-&amp;gt;first).length() + (it-&amp;gt;second).length();
       }
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return maxWriteHeadersSize;&lt;br/&gt;
    +  if (maxWriteHeadersSize &amp;gt; std::numeric_limits&amp;lt;uint32_t&amp;gt;().max()) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I have built all third party libraries under Visual Studio 2010, 2012, 2013, and 2015 in x86 and x86 mode, in debug and release, in static and dynamic mode, where appropriate.  Then I build thrift in the same configurations.  I will be releasing the windows build instructions and contributed build batch files to the project so that they can be used as a reference on how to build thrift on windows for C++ with all of the features enabled, using cmake.&lt;/p&gt;</comment>
                            <comment id="15816199" author="githubbot" created="Tue, 10 Jan 2017 21:09:00 +0000"  >&lt;p&gt;Github user jeking3 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hi, I pushed fixes for the open issues however I need to make sure it still builds on linux; my local build failed so it looks like there will be another push to clean that up.  Thanks for your patience.&lt;/p&gt;</comment>
                            <comment id="15818658" author="githubbot" created="Wed, 11 Jan 2017 15:42:54 +0000"  >&lt;p&gt;Github user jeking3 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r95604407&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r95604407&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: lib/cpp/src/thrift/windows/config.h &amp;#8212;&lt;br/&gt;
    @@ -36,6 +36,9 @@&lt;br/&gt;
     #define USE_BOOST_THREAD 1&lt;br/&gt;
     #endif&lt;/p&gt;

&lt;p&gt;    +// Something that defines PRId64 is required to build&lt;br/&gt;
    +#define HAVE_INTTYPES_H 1&lt;br/&gt;
    +&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Note I have opened &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4025&quot; title=&quot;Use the cmake generated config.h on windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4025&quot;&gt;THRIFT-4025&lt;/a&gt; because I don&apos;t see why we have a custom config.h file on Windows when we go through the hassle of generating one with cmake.&lt;/p&gt;</comment>
                            <comment id="15818664" author="githubbot" created="Wed, 11 Jan 2017 15:44:45 +0000"  >&lt;p&gt;Github user hcorg commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128#discussion_r95604812&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128#discussion_r95604812&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: lib/cpp/src/thrift/windows/config.h &amp;#8212;&lt;br/&gt;
    @@ -36,6 +36,9 @@&lt;br/&gt;
     #define USE_BOOST_THREAD 1&lt;br/&gt;
     #endif&lt;/p&gt;

&lt;p&gt;    +// Something that defines PRId64 is required to build&lt;br/&gt;
    +#define HAVE_INTTYPES_H 1&lt;br/&gt;
    +&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    it&apos;s probably left-over from pre-cmake times: vstudio project included in repo did not generate any config.h, yet something had to be included...&lt;/p&gt;</comment>
                            <comment id="15818667" author="githubbot" created="Wed, 11 Jan 2017 15:46:43 +0000"  >&lt;p&gt;Github user jeking3 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    There was just one issue on linux; I reverted a change in TBufferTransports.h (I had converted an assert to an exception, but we can figure out what to do with asserts holistically in &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3978&quot; title=&quot;Thrift C++ runtime uses assert to prevent overflows, checks sanity only in debug builds&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3978&quot;&gt;THRIFT-3978&lt;/a&gt;).  Hopefully this will pass.  I have built this on all flavors of Visual Studio 2010, 2012, 2013, 2015 in Debug and Release, Win32 and x64, and run the unit tests.  I also built this on Ubuntu 14.04.  The CI build will prove out any other issues.&lt;/p&gt;</comment>
                            <comment id="15818967" author="githubbot" created="Wed, 11 Jan 2017 17:54:01 +0000"  >&lt;p&gt;Github user jeking3 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Quite the strange error in a couple of the builds.  In the compilation of TNonBlockingServer.cpp it says PRIu32 is unexpected.  The build is locating inttypes.h per the cmake output, so inttypes.h is being included.  I write a small test program and compiled it on Ubuntu 14.04 with gcc 4.6.4 and 4.8.2 and both of them were fine in using that once inttypes.h was included.&lt;/p&gt;</comment>
                            <comment id="15819215" author="githubbot" created="Wed, 11 Jan 2017 21:22:02 +0000"  >&lt;p&gt;Github user jeking3 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The previous CI build failed in a couple ways I cannot explain; one was in building the docker environment and the other was a failure to build something in c_glib in an autoconf build.  I tried to recreate the latter locally using a cmake build environment but I could not.  I rebased to the latest master and did a force push and we&apos;ll see what happens.&lt;/p&gt;</comment>
                            <comment id="15831924" author="githubbot" created="Fri, 20 Jan 2017 15:19:09 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1128&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15831926" author="jking3" created="Fri, 20 Jan 2017 15:19:44 +0000"  >&lt;p&gt;Completed with &lt;a href=&quot;https://github.com/apache/thrift/pull/1128&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1128&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13006129">THRIFT-3932</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12974898">THRIFT-3847</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13022006">THRIFT-3982</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13021625">THRIFT-3978</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30pmf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>