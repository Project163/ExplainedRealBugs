<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:33:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-5444] Netstd generator produces uncompileable code for enums ending with &quot;_result&quot; or &quot;_args&quot;</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-5444</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;When the .thrift files contains an enumeration whose name contains &quot;_result&quot;, the generated code contains &quot;Result&quot; except in the definition of the enum itself, preventing the code from compiling successfully.&lt;/p&gt;

&lt;p&gt;Since other enumerations are generated preserving the case and underscores, I believe the issue lies on the usage side and not definition.&lt;/p&gt;

&lt;p&gt;Provided example (generated with &lt;tt&gt;netstd:no_deepcopy&lt;/tt&gt;) shows the case where the enum in used as a return value but the issue is the same when used as parameter or inside a struct.&lt;/p&gt;

&lt;p&gt;I observed this issue with the current HEAD and checked that it already existed in 0.14.2.&lt;/p&gt;

&lt;p&gt;I will take a look and try to propose a patch.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13392870">THRIFT-5444</key>
            <summary>Netstd generator produces uncompileable code for enums ending with &quot;_result&quot; or &quot;_args&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jensg">Jens Geyer</assignee>
                                    <reporter username="Triton">Triton Circonflexe</reporter>
                        <labels>
                    </labels>
                <created>Sat, 31 Jul 2021 14:30:15 +0000</created>
                <updated>Sat, 11 Sep 2021 12:30:58 +0000</updated>
                            <resolved>Sun, 1 Aug 2021 10:02:03 +0000</resolved>
                                    <version>0.14.2</version>
                                    <fixVersion>0.15.0</fixVersion>
                                    <component>netstd - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="600">10m</timespent>
                                <comments>
                            <comment id="17391020" author="triton" created="Sat, 31 Jul 2021 17:45:51 +0000"  >&lt;p&gt;Same happens for &quot;_args&quot; so &lt;tt&gt;check_and_correct_struct_name&lt;/tt&gt; clearly have something to do with it.&lt;br/&gt;
Either it&#8217;s called when it should not be or it&#8217;s not selective enough, or both (in particular, &quot;something_result_suffix&quot; is modified as well while it seems to target only endings).&lt;/p&gt;</comment>
                            <comment id="17391043" author="jensg" created="Sat, 31 Jul 2021 19:47:27 +0000"  >&lt;p&gt;What is a TBZ2 file and what do&#160;I need it for?&lt;/p&gt;</comment>
                            <comment id="17391056" author="triton" created="Sat, 31 Jul 2021 21:01:27 +0000"  >&lt;p&gt;A .tbz2 is just a .tar.bz2 archive (7-zip should open it seamlessly but I can replace with a zip if you want).&lt;br/&gt;
It contains a minimal example, the generated code that fails to compile and the fixed code (at least a possible fix).&lt;/p&gt;

&lt;p&gt;Looking at the history, I found &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-5091&quot; title=&quot;Netstd generator produces uncompileable code for struct names ending with &amp;quot;_result&amp;quot; or &amp;quot;_args&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-5091&quot;&gt;&lt;del&gt;THRIFT-5091&lt;/del&gt;&lt;/a&gt; and I was wondering what is the rationale for &quot;_result&quot; and &quot;_args&quot; replacements?&lt;br/&gt;
Is it linked to some internals of Thrift or some constraints on .NET Standard (like &lt;tt&gt;GetType()&lt;/tt&gt; which is reserved in C#)?&lt;/p&gt;</comment>
                            <comment id="17391060" author="jensg" created="Sat, 31 Jul 2021 21:25:02 +0000"  >&lt;p&gt;Naming conflicts with internal auto-generated structs. It is some remnants from the older versions, but it looks a bit broken indeed.&lt;/p&gt;</comment>
                            <comment id="17391069" author="jensg" created="Sat, 31 Jul 2021 22:44:22 +0000"  >&lt;p&gt;Since I already rewrote that args/result stuff a while ago (it now &quot;deconflicts&quot; by using some &lt;tt&gt;InternalStruct&lt;/tt&gt;) I was able to simply get rid of that special case, rectify a few things along the way and had the patch ready. Test case included.&lt;/p&gt;</comment>
                            <comment id="17391113" author="triton" created="Sun, 1 Aug 2021 07:59:17 +0000"  >&lt;p&gt;Tested with my own test case (very similar to the one included) as well as with the real project (where &quot;_result&quot; is sometimes present in the middle of the name instead of at the end) and everything works as expected.&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13284946">THRIFT-5091</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13031303" name="enum_result.tbz2" size="3446" author="Triton" created="Sat, 31 Jul 2021 14:08:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 15 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ti08:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>