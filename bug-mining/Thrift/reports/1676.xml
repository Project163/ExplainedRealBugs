<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:25:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3348] PHP TCompactProtocol bool&amp;int64 readvalue bug</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3348</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;create a thrift file like&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; namespace php demo
 namesapce py demo
 struct obj{
     1:required i64 int64,
     2:required bool bol,
 }
 service Demo {
     obj trans(1:obj item),
 }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;protocol use TCompactProtocol&lt;br/&gt;
server is python, client is php &lt;br/&gt;
client call trans func with  &lt;br/&gt;
i64(-1)&lt;br/&gt;
bool(true)&lt;br/&gt;
and print the server response&lt;br/&gt;
the output is&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;object(demo\obj)#8 (2) {
  [&lt;span class=&quot;code-quote&quot;&gt;&quot;int64&quot;&lt;/span&gt;]=&amp;gt;
  &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt;(1.844674407371E+19)
  [&lt;span class=&quot;code-quote&quot;&gt;&quot;bol&quot;&lt;/span&gt;]=&amp;gt;
  bool(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;osx 10.10.5, php 5.5.27, python 2.7.10 thrift 0.9.2 , install by brew. 64 bit machines&lt;/p&gt;</environment>
        <key id="12895703">THRIFT-3348</key>
            <summary>PHP TCompactProtocol bool&amp;int64 readvalue bug</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hakon">H&#229;kon Hitland</assignee>
                                    <reporter username="Saerdna">Dahao.Saerdna.Zhao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Sep 2015 07:42:02 +0000</created>
                <updated>Fri, 11 Mar 2022 23:17:34 +0000</updated>
                            <resolved>Thu, 17 Nov 2016 20:31:36 +0000</resolved>
                                    <version>0.9.2</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>PHP - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="14400">4h</timeoriginalestimate>
                            <timeestimate seconds="14400">4h</timeestimate>
                                        <comments>
                            <comment id="15674508" author="githubbot" created="Thu, 17 Nov 2016 18:52:00 +0000"  >&lt;p&gt;GitHub user zhaakhi opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1132&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1132&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3348&quot; title=&quot;PHP TCompactProtocol bool&amp;amp;int64 readvalue bug&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3348&quot;&gt;&lt;del&gt;THRIFT-3348&lt;/del&gt;&lt;/a&gt; PHP TCompactProtocol bool&amp;amp;int64 readvalue bug&lt;/p&gt;

&lt;p&gt;    TCompactProtocol always serializes boolean struct values as false, due&lt;br/&gt;
    to a confusion between the internal compact type field representation&lt;br/&gt;
    and the normal Thrift types.&lt;/p&gt;

&lt;p&gt;    There is also a slight mishandling of i64 values where -2^63 will&lt;br/&gt;
    overflow and be converted to a float, even though it is representable as&lt;br/&gt;
    a 64-bit int.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/zhaakhi/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/zhaakhi/thrift&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3348&quot; title=&quot;PHP TCompactProtocol bool&amp;amp;int64 readvalue bug&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3348&quot;&gt;&lt;del&gt;THRIFT-3348&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1132.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1132.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1132&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit f6a0fb0480aa3fc2d6b69dd676b219cdf7b3e9a0&lt;br/&gt;
Author: H&#229;kon Hitland &amp;lt;hakon.hitland@zedge.net&amp;gt;&lt;br/&gt;
Date:   2016-11-17T15:59:30Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3348&quot; title=&quot;PHP TCompactProtocol bool&amp;amp;int64 readvalue bug&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3348&quot;&gt;&lt;del&gt;THRIFT-3348&lt;/del&gt;&lt;/a&gt; PHP TCompactProtocol bool&amp;amp;int64 readvalue bug&lt;/p&gt;

&lt;p&gt;    TCompactProtocol always serializes boolean struct values as false, due&lt;br/&gt;
    to a confusion between the internal compact type field representation&lt;br/&gt;
    and the normal Thrift types.&lt;/p&gt;

&lt;p&gt;    There is also a slight mishandling of i64 values where -2^63 will&lt;br/&gt;
    overflow and be converted to a float, even though it is representable as&lt;br/&gt;
    a 64-bit int.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15674718" author="githubbot" created="Thu, 17 Nov 2016 20:31:01 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1132&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1132&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15674721" author="jensg" created="Thu, 17 Nov 2016 20:31:37 +0000"  >&lt;p&gt;Committed, thanks!&lt;/p&gt;</comment>
                            <comment id="15825806" author="barrylb" created="Tue, 17 Jan 2017 10:34:49 +0000"  >&lt;p&gt;this should also resolve &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1548&quot; title=&quot;PHP TCompactProtocol always reads bools as false&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1548&quot;&gt;&lt;del&gt;THRIFT-1548&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12548578">THRIFT-1548</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13433130">THRIFT-5538</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12954948">THRIFT-3767</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 44 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2lg1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>