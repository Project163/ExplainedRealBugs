<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:14:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-2660] Validate the bytes received in TSaslTransport</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-2660</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;In TSaslTransport#receiveSaslMessage, we are doing two things incorrectly:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Not validating the status byte code.&lt;/li&gt;
	&lt;li&gt;Not validating the decoded payload size integer before allocating a whole array with it.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The latter especially is bad when a network security software sends a thrift server port some garbage data, causing it to receive failures like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.OutOfMemoryError: Java heap space
	at org.apache.thrift.transport.TSaslTransport.receiveSaslMessage(TSaslTransport.java:181)
	at org.apache.thrift.transport.TSaslServerTransport.handleSaslStartMessage(TSaslServerTransport.java:125)
	at org.apache.thrift.transport.TSaslTransport.open(TSaslTransport.java:253)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or even,&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ERROR org.apache.thrift.server.TThreadPoolServer: Error occurred during processing of message.
java.lang.NegativeArraySizeException
        at org.apache.thrift.transport.TSaslTransport.receiveSaslMessage(TSaslTransport.java:181)
        at org.apache.thrift.transport.TSaslServerTransport.handleSaslStartMessage(TSaslServerTransport.java:125)
        at org.apache.thrift.transport.TSaslTransport.open(TSaslTransport.java:253)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12733584">THRIFT-2660</key>
            <summary>Validate the bytes received in TSaslTransport</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roger">Roger Meier</assignee>
                                    <reporter username="qwertymaniac">Harsh J</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Aug 2014 20:08:44 +0000</created>
                <updated>Wed, 5 Nov 2014 04:48:58 +0000</updated>
                            <resolved>Wed, 13 Aug 2014 10:38:03 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>0.9.2</fixVersion>
                                    <component>Java - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14095072" author="qwertymaniac" created="Wed, 13 Aug 2014 02:49:25 +0000"  >&lt;p&gt;Improved test and fixed a bug with earlier fix that disallowed 0-len payloads (which are legit).&lt;/p&gt;</comment>
                            <comment id="14095345" author="roger.meier" created="Wed, 13 Aug 2014 10:38:03 +0000"  >&lt;p&gt;committed&lt;/p&gt;</comment>
                            <comment id="14095349" author="roger.meier" created="Wed, 13 Aug 2014 10:56:15 +0000"  >&lt;p&gt;+ committed changes from new patch&lt;/p&gt;</comment>
                            <comment id="14095405" author="hudson" created="Wed, 13 Aug 2014 12:08:41 +0000"  >&lt;p&gt;FAILURE: Integrated in Thrift #1258 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1258/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1258/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2660&quot; title=&quot;Validate the bytes received in TSaslTransport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2660&quot;&gt;&lt;del&gt;THRIFT-2660&lt;/del&gt;&lt;/a&gt; Validate the bytes received in TSaslTransport (roger: rev c983250355bc5fd572a6b56fc5637461ef868ec8)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/java/src/org/apache/thrift/transport/TSaslTransport.java&lt;/li&gt;
	&lt;li&gt;lib/java/test/org/apache/thrift/transport/TestTSaslTransports.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2660&quot; title=&quot;Validate the bytes received in TSaslTransport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2660&quot;&gt;&lt;del&gt;THRIFT-2660&lt;/del&gt;&lt;/a&gt; Validate the bytes received in TSaslTransport (roger: rev 5f841dff8b264708fe961186bd26c1016acdfca4)&lt;/li&gt;
	&lt;li&gt;lib/java/test/org/apache/thrift/transport/TestTSaslTransports.java&lt;/li&gt;
	&lt;li&gt;lib/java/src/org/apache/thrift/transport/TSaslTransport.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14097532" author="qwertymaniac" created="Thu, 14 Aug 2014 19:53:57 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=roger.meier&quot; class=&quot;user-hover&quot; rel=&quot;roger.meier&quot;&gt;roger.meier&lt;/a&gt;! Is there any chance this can be backported to make it appear in the upcoming 0.9.2 release? I did see an RC0 float up, so the answer may be no, but thought I&apos;d ask.&lt;/p&gt;</comment>
                            <comment id="14099972" author="roger.meier" created="Sun, 17 Aug 2014 15:43:12 +0000"  >&lt;p&gt;Yes, why not. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jfarrell&quot; class=&quot;user-hover&quot; rel=&quot;jfarrell&quot;&gt;jfarrell&lt;/a&gt; what do you think?&lt;/p&gt;</comment>
                            <comment id="14102313" author="jfarrell" created="Tue, 19 Aug 2014 15:24:54 +0000"  >&lt;p&gt;if its in the current trunk then it will get into the next rc, i&apos;ve been working on the cross compile issues for arm based projects and was hoping to get that in as well. i might just push on that for the now and get this release candidate out&lt;/p&gt;</comment>
                            <comment id="14102458" author="qwertymaniac" created="Tue, 19 Aug 2014 16:57:32 +0000"  >&lt;p&gt;Thank you again, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jfarrell&quot; class=&quot;user-hover&quot; rel=&quot;jfarrell&quot;&gt;jfarrell&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=roger.meier&quot; class=&quot;user-hover&quot; rel=&quot;roger.meier&quot;&gt;roger.meier&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="14110884" author="brocknoland" created="Tue, 26 Aug 2014 16:11:01 +0000"  >&lt;p&gt;Nice work!! I think the 100MB max message size will work for the vast majority of use cases, but I do think this should be configurable. I&apos;ve created &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2678&quot; title=&quot;Make max message size configurable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2678&quot;&gt;&lt;del&gt;THRIFT-2678&lt;/del&gt;&lt;/a&gt; to track that.&lt;/p&gt;</comment>
                            <comment id="14197561" author="hudson" created="Wed, 5 Nov 2014 04:48:58 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1331 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1331/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1331/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2660&quot; title=&quot;Validate the bytes received in TSaslTransport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2660&quot;&gt;&lt;del&gt;THRIFT-2660&lt;/del&gt;&lt;/a&gt; Validate the bytes received in TSaslTransport (roger: rev c983250355bc5fd572a6b56fc5637461ef868ec8)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/java/test/org/apache/thrift/transport/TestTSaslTransports.java&lt;/li&gt;
	&lt;li&gt;lib/java/src/org/apache/thrift/transport/TSaslTransport.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2660&quot; title=&quot;Validate the bytes received in TSaslTransport&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2660&quot;&gt;&lt;del&gt;THRIFT-2660&lt;/del&gt;&lt;/a&gt; Validate the bytes received in TSaslTransport (roger: rev 5f841dff8b264708fe961186bd26c1016acdfca4)&lt;/li&gt;
	&lt;li&gt;lib/java/src/org/apache/thrift/transport/TSaslTransport.java&lt;/li&gt;
	&lt;li&gt;lib/java/test/org/apache/thrift/transport/TestTSaslTransports.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12736833">THRIFT-2678</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12696116">HIVE-6468</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12661382" name="THRIFT-2660.patch" size="4315" author="qwertymaniac" created="Wed, 13 Aug 2014 02:49:25 +0000"/>
                            <attachment id="12661294" name="THRIFT-2660.patch" size="4102" author="qwertymaniac" created="Tue, 12 Aug 2014 20:09:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>411612</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1yta7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>411603</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>