<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:29:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-4586] Thrift generated strings for Cocoa/Objective-C should use copy not strong.</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-4586</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;Thrift generated strings for Cocoa/Objective-C should use copy not strong.&lt;/p&gt;

&lt;p&gt;Currently all strings use strong. This is dangerous if one assigns a strong reference to an analytics object.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13166249">THRIFT-4586</key>
            <summary>Thrift generated strings for Cocoa/Objective-C should use copy not strong.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jking3">James E. King III</assignee>
                                    <reporter username="carboncomputed">Kevin Carbone</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jun 2018 01:40:48 +0000</created>
                <updated>Thu, 27 Dec 2018 15:25:20 +0000</updated>
                            <resolved>Tue, 3 Jul 2018 12:19:14 +0000</resolved>
                                                    <fixVersion>0.12.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16513228" author="githubbot" created="Fri, 15 Jun 2018 01:45:44 +0000"  >&lt;p&gt;CarbonComputed opened a new pull request #1564: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4586&quot; title=&quot;Thrift generated strings for Cocoa/Objective-C should use copy not strong.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4586&quot;&gt;&lt;del&gt;THRIFT-4586&lt;/del&gt;&lt;/a&gt;: Correctly generates NSString with copy instead of strong - Cocoa&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1564&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1564&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Cocoa generator generates NSString with copy instead of strong&lt;/p&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16515125" author="githubbot" created="Sun, 17 Jun 2018 16:22:14 +0000"  >&lt;p&gt;jeking3 commented on issue #1564: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4586&quot; title=&quot;Thrift generated strings for Cocoa/Objective-C should use copy not strong.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4586&quot;&gt;&lt;del&gt;THRIFT-4586&lt;/del&gt;&lt;/a&gt;: Correctly generates NSString with copy instead of strong - Cocoa&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1564#issuecomment-397889896&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1564#issuecomment-397889896&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I&apos;ll need someone who knows the language to code review. and we can ignore the CI because we don&apos;t currently test cocoa in CI.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16522945" author="githubbot" created="Mon, 25 Jun 2018 23:33:30 +0000"  >&lt;p&gt;CarbonComputed commented on issue #1564: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4586&quot; title=&quot;Thrift generated strings for Cocoa/Objective-C should use copy not strong.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4586&quot;&gt;&lt;del&gt;THRIFT-4586&lt;/del&gt;&lt;/a&gt;: Correctly generates NSString with copy instead of strong - Cocoa&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1564#issuecomment-400128084&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1564#issuecomment-400128084&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @Jens-G Any thoughts on this?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16524157" author="githubbot" created="Tue, 26 Jun 2018 20:00:41 +0000"  >&lt;p&gt;Jens-G commented on issue #1564: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4586&quot; title=&quot;Thrift generated strings for Cocoa/Objective-C should use copy not strong.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4586&quot;&gt;&lt;del&gt;THRIFT-4586&lt;/del&gt;&lt;/a&gt;: Correctly generates NSString with copy instead of strong - Cocoa&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1564#issuecomment-400442882&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1564#issuecomment-400442882&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Sory, no. I do not feel qualified enough for that task. Don&apos;t we have some cocoa users around? Hard to believe ...&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16524164" author="githubbot" created="Tue, 26 Jun 2018 20:07:19 +0000"  >&lt;p&gt;CarbonComputed commented on issue #1564: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4586&quot; title=&quot;Thrift generated strings for Cocoa/Objective-C should use copy not strong.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4586&quot;&gt;&lt;del&gt;THRIFT-4586&lt;/del&gt;&lt;/a&gt;: Correctly generates NSString with copy instead of strong - Cocoa&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1564#issuecomment-400444669&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1564#issuecomment-400444669&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @Jens-G Yeah I posted the PR on behalf of Reddit. We use it on iOS and I noticed that the generated NSStrings are strong which is something you don&apos;t want to do. Lets say a developer sets a string on the generated class, if that string is modified, youre directly modifiying the reference to that string, which is something you don&apos;t want to do and can cause unexpected behavior. I can some iOS devs, but I&apos;m not sure who to add that has the unique Thrift knowledge here.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16524166" author="githubbot" created="Tue, 26 Jun 2018 20:07:44 +0000"  >&lt;p&gt;CarbonComputed edited a comment on issue #1564: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4586&quot; title=&quot;Thrift generated strings for Cocoa/Objective-C should use copy not strong.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4586&quot;&gt;&lt;del&gt;THRIFT-4586&lt;/del&gt;&lt;/a&gt;: Correctly generates NSString with copy instead of strong - Cocoa&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1564#issuecomment-400444669&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1564#issuecomment-400444669&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @Jens-G Yeah I posted the PR on behalf of Reddit. We use it on iOS and I noticed that the generated NSStrings are strong which is something you don&apos;t want to do. Lets say a developer sets a string on the generated class, if that string is modified, youre directly modifiying the reference to that string, which is something you don&apos;t want to do and can cause unexpected behavior. I can add some iOS devs, but I&apos;m not sure who to add that has the unique Thrift knowledge here.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16525026" author="githubbot" created="Wed, 27 Jun 2018 13:03:02 +0000"  >&lt;p&gt;jeking3 commented on issue #1564: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4586&quot; title=&quot;Thrift generated strings for Cocoa/Objective-C should use copy not strong.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4586&quot;&gt;&lt;del&gt;THRIFT-4586&lt;/del&gt;&lt;/a&gt;: Correctly generates NSString with copy instead of strong - Cocoa&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1564#issuecomment-400663675&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1564#issuecomment-400663675&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   CI failures for this PR don&apos;t mean much since we don&apos;t test cocoa in the CI build today &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16531287" author="githubbot" created="Tue, 3 Jul 2018 12:18:58 +0000"  >&lt;p&gt;jeking3 closed pull request #1564: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4586&quot; title=&quot;Thrift generated strings for Cocoa/Objective-C should use copy not strong.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4586&quot;&gt;&lt;del&gt;THRIFT-4586&lt;/del&gt;&lt;/a&gt;: Correctly generates NSString with copy instead of strong - Cocoa&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1564&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1564&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/compiler/cpp/src/thrift/generate/t_cocoa_generator.cc b/compiler/cpp/src/thrift/generate/t_cocoa_generator.cc&lt;br/&gt;
index 5bed2d71a5..ac644f5c59 100644&lt;br/&gt;
&amp;#8212; a/compiler/cpp/src/thrift/generate/t_cocoa_generator.cc&lt;br/&gt;
+++ b/compiler/cpp/src/thrift/generate/t_cocoa_generator.cc&lt;br/&gt;
@@ -238,6 +238,12 @@ class t_cocoa_generator : public t_oop_generator {&lt;br/&gt;
   std::string getter_name(string field_name);&lt;br/&gt;
   std::string setter_name(string field_name);&lt;/p&gt;

&lt;p&gt;+  bool type_can_be_copy(t_type* ttype) &lt;/p&gt;
{
+    ttype = get_true_type(ttype);
+    
+    return ttype-&amp;gt;is_string();
+  }
&lt;p&gt;+  &lt;br/&gt;
   bool type_can_be_null(t_type* ttype) {&lt;br/&gt;
     ttype = get_true_type(ttype);&lt;/p&gt;

&lt;p&gt;@@ -3011,7 +3017,9 @@ string t_cocoa_generator::declare_property(t_field* tfield) {&lt;br/&gt;
   std::ostringstream render;&lt;br/&gt;
   render &amp;lt;&amp;lt; &quot;@property (&quot;;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (type_can_be_null(tfield-&amp;gt;get_type())) {&lt;br/&gt;
+  if (type_can_be_copy(tfield-&amp;gt;get_type())) 
{
+    render &amp;lt;&amp;lt; &quot;copy, &quot;;
+  }
&lt;p&gt; else if (type_can_be_null(tfield-&amp;gt;get_type())) &lt;/p&gt;
{
     render &amp;lt;&amp;lt; &quot;strong, &quot;;
   }
&lt;p&gt; else {&lt;br/&gt;
     render &amp;lt;&amp;lt; &quot;assign, &quot;;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16531288" author="jking3" created="Tue, 3 Jul 2018 12:19:14 +0000"  >&lt;p&gt;Committed - thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3uw87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>