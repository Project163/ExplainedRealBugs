<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:10:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-2247] Go generator doesn&apos;t deal well with map keys of type binary</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-2247</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;The current Go generator doesn&apos;t deal well with maps where the map key is []byte. For some weird reason, you just can&apos;t have a map[[]byte]foo in Go, so we have to go for map&lt;span class=&quot;error&quot;&gt;&amp;#91;string&amp;#93;&lt;/span&gt;foo, which is actually equivalent (Go strings preserve all bytes).&lt;/p&gt;

&lt;p&gt;I&apos;m trying to come up with a patch for this.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux phileas 3.2.0-4-amd64 #1 SMP Debian 3.2.46-1+deb7u1 x86_64 GNU/Linux (testing/jessie)&lt;/p&gt;</environment>
        <key id="12677030">THRIFT-2247</key>
            <summary>Go generator doesn&apos;t deal well with map keys of type binary</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tonnerre">Tonnerre Lombard</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Nov 2013 10:22:18 +0000</created>
                <updated>Sat, 20 Feb 2021 15:27:23 +0000</updated>
                            <resolved>Tue, 5 Nov 2013 08:19:23 +0000</resolved>
                                                    <fixVersion>0.9.2</fixVersion>
                                    <component>Go - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13811753" author="tonnerre" created="Fri, 1 Nov 2013 23:16:53 +0000"  >&lt;p&gt;This makes the generated Go files for the Cassandra thrift interface build for me.&lt;/p&gt;</comment>
                            <comment id="13812333" author="jensg" created="Sun, 3 Nov 2013 11:15:55 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tonnerre&quot; class=&quot;user-hover&quot; rel=&quot;tonnerre&quot;&gt;tonnerre&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;many thanks for the patch. &lt;/p&gt;

&lt;p&gt;Two remarks/questions though:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The patch fails to apply to current trunk at the BeginMap/Set/List parts around line 25xx, unfortunately.&lt;/li&gt;
	&lt;li&gt;Is there any chance to enhabce the patch in a way that it also solves &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2063&quot; title=&quot;Go compiler cannot create code for maps with complex/binary keys&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2063&quot;&gt;THRIFT-2063&lt;/a&gt;?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13813033" author="apesternikov" created="Mon, 4 Nov 2013 17:27:31 +0000"  >&lt;p&gt;Enhancing the patch to support weird keys is not trivial, as it requires implementing custom maps/sets.&lt;br/&gt;
On the other hand, using string for binary keys would make cassandra and hbase interface work (which is probably some of the major show stoppers)&lt;/p&gt;</comment>
                            <comment id="13813300" author="jensg" created="Mon, 4 Nov 2013 21:30:48 +0000"  >&lt;p&gt;Ok then for the latter, it is of course not required for this one and binary keys is a start. But I still need to be able to apply the patch, in order to review/test/commit the stuff (first bullet point). By the way, is a test case included beyond getting the Cassandra interface compiled?&lt;/p&gt;</comment>
                            <comment id="13813586" author="apesternikov" created="Tue, 5 Nov 2013 02:53:08 +0000"  >&lt;p&gt;If original author fails to show up I can recreate the patch off the trunk.&lt;br/&gt;
The patch provided does not include tests. I&apos;m not sure about good testing strategy in this case, but I can verify it on real cassandra server with real client application. It would be awesome if I can replace the sideline fork I&apos;m currently use now with the mainline thrift compiler and library.&lt;/p&gt;</comment>
                            <comment id="13813590" author="apesternikov" created="Tue, 5 Nov 2013 03:06:43 +0000"  >&lt;p&gt;Interestingly, the patch applied almost cleanly for me, just with little offset. I&apos;m attaching the diff.&lt;/p&gt;</comment>
                            <comment id="13813635" author="apesternikov" created="Tue, 5 Nov 2013 04:58:43 +0000"  >&lt;p&gt;I can confirm that cassandra interface, generated using this patch is working in real server and client (using &lt;a href=&quot;https://github.com/apesternikov/gossie&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apesternikov/gossie&lt;/a&gt; which has generated interface and has been modified to use stock thrift library).&lt;br/&gt;
Thank you very much!&lt;/p&gt;</comment>
                            <comment id="13813750" author="jensg" created="Tue, 5 Nov 2013 08:19:23 +0000"  >&lt;p&gt;Like a charm. Committed, thank you both!&lt;/p&gt;</comment>
                            <comment id="13813861" author="tonnerre" created="Tue, 5 Nov 2013 11:30:48 +0000"  >&lt;p&gt;Oh, be away for the night, have your issue fixed! Excellent, thanks!&lt;/p&gt;</comment>
                            <comment id="13814500" author="hudson" created="Wed, 6 Nov 2013 01:33:54 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #936 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/936/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/936/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2247&quot; title=&quot;Go generator doesn&amp;#39;t deal well with map keys of type binary&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2247&quot;&gt;&lt;del&gt;THRIFT-2247&lt;/del&gt;&lt;/a&gt; Go generator doesn&apos;t deal well with map keys of type binary (jensg: rev 73250ba96ccb7714397602a652e0b9de2b998efc)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;compiler/cpp/src/generate/t_go_generator.cc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12677031">THRIFT-2248</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12611715" name="0001-THRIFT-2247-Fix-handling-of-binary-keys-in-maps-for-.patch" size="6439" author="tonnerre" created="Fri, 1 Nov 2013 23:16:53 +0000"/>
                            <attachment id="12612096" name="thrift-2247-binary-as-string-keys.patch" size="5736" author="apesternikov" created="Tue, 5 Nov 2013 03:06:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>356406</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1pfxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>356694</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>