<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:58:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-743] compile error with GHC 6.12.1</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-743</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;The Haskell bindings do not compile with GHC 6.12.1, because rec seems to be a reserved word in that version.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Debian GNU/Linux 5.0.4, x86_64&lt;/p&gt;</environment>
        <key id="12460685">THRIFT-743</key>
            <summary>compile error with GHC 6.12.1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="clavoie">Christian Lavoie</assignee>
                                    <reporter username="mgrabmueller">Martin Grabmueller</reporter>
                        <labels>
                            <label>compilation</label>
                    </labels>
                <created>Tue, 30 Mar 2010 10:05:57 +0000</created>
                <updated>Sun, 26 Sep 2010 13:38:49 +0000</updated>
                            <resolved>Sun, 26 Sep 2010 04:27:09 +0000</resolved>
                                                    <fixVersion>0.5</fixVersion>
                                    <component>Haskell - Compiler</component>
                    <component>Haskell - Library</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12851340" author="mgrabmueller" created="Tue, 30 Mar 2010 10:07:55 +0000"  >&lt;p&gt;This patch simply renames rec to record, to make the Haskell bindings compile with GHC 6.12.1.&lt;/p&gt;</comment>
                            <comment id="12870709" author="seliopou" created="Mon, 24 May 2010 16:58:27 +0000"  >&lt;p&gt;This problem isn&apos;t limited to the library code. Generated code uses the identifier &quot;rec&quot; several times. Both the library code and the generator should be fixed before this issue is closed. &lt;/p&gt;</comment>
                            <comment id="12871139" author="mgrabmueller" created="Tue, 25 May 2010 13:25:33 +0000"  >&lt;p&gt;Second version of the patch. Now includes changes to the Haskell generator as well as fixing a missing import of &quot;Prelude.length&quot;.&lt;/p&gt;

&lt;p&gt;I have used this version for generating Thrift bindings for Cassandra. They worked well, but I have not been able to run the Thrift test suit because&lt;br/&gt;
of some missing Perl modules. I would be grateful if someone could test the changes.&lt;/p&gt;</comment>
                            <comment id="12911115" author="clavoie" created="Sat, 18 Sep 2010 23:15:06 +0000"  >&lt;p&gt;Patch does what it says in the tin, and was tested to work fine on:&lt;/p&gt;

&lt;p&gt;Darwin &amp;#8211; 10.4.0 Darwin Kernel Version 10.4.0: Fri Apr 23 18:28:53 PDT 2010; root:xnu-1504.7.4~1/RELEASE_I386 i386&lt;br/&gt;
The Glorious Glasgow Haskell Compilation System, version 6.12.3&lt;/p&gt;

&lt;p&gt;Should be committed before releasing, as code will not compile without.&lt;/p&gt;</comment>
                            <comment id="12912601" author="clavoie" created="Mon, 20 Sep 2010 17:25:39 +0000"  >&lt;p&gt;This is the same as Martin&apos;s latest patch, but re-synced to head (resolves 2 conflicts arising from applying my other patches. Thanks!)&lt;/p&gt;</comment>
                            <comment id="12912679" author="clavoie" created="Mon, 20 Sep 2010 20:01:58 +0000"  >&lt;p&gt;BTW, all three versions of this patch contain two fixes:&lt;/p&gt;

&lt;p&gt;1) Missing length import from the Prelude in generated code. This is required, generated code just won&apos;t compile without.&lt;/p&gt;

&lt;p&gt;2) Renames rec -&amp;gt; record &amp;#8211;  not strictly needed since &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-901&quot; title=&quot;Allow the bindings to compile without -fglasgow-exts and with -Wall -Werror&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-901&quot;&gt;&lt;del&gt;THRIFT-901&lt;/del&gt;&lt;/a&gt; was applied, but a good thing to apply anyway.&lt;/p&gt;

&lt;p&gt;Full story is that when compiling with -XArrows rec and proc are keywords, and not without. -fglasgow-exts (which &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-901&quot; title=&quot;Allow the bindings to compile without -fglasgow-exts and with -Wall -Werror&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-901&quot;&gt;&lt;del&gt;THRIFT-901&lt;/del&gt;&lt;/a&gt; removes the need for) enables -XArrows (and dozens other similar changes to the language) and causes the compiler to barf with extremely inscrutable error messages (parse errors and/or &quot;non-sensical&quot; typing errors).&lt;/p&gt;

&lt;p&gt;As of &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-901&quot; title=&quot;Allow the bindings to compile without -fglasgow-exts and with -Wall -Werror&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-901&quot;&gt;&lt;del&gt;THRIFT-901&lt;/del&gt;&lt;/a&gt;, #2 is only required if you want to use both the Arrows extensions and thrift bindings without tweaking your ghc flags per haskell source file.&lt;/p&gt;</comment>
                            <comment id="12913192" author="djnym" created="Tue, 21 Sep 2010 19:23:17 +0000"  >&lt;p&gt;Christian, if you can get the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-905&quot; title=&quot;Make haskell thrift bindings use automake to compile and install&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-905&quot;&gt;&lt;del&gt;THRIFT-905&lt;/del&gt;&lt;/a&gt; to clean correctly I can start commiting these various changes.  Otherwise I&apos;m not totally clear without &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-905&quot; title=&quot;Make haskell thrift bindings use automake to compile and install&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-905&quot;&gt;&lt;del&gt;THRIFT-905&lt;/del&gt;&lt;/a&gt; how to build the haskell bindings.  Also, do all these changes to get things to compile with ghc 6.12.x mean we should check for a minimum version of 6.12.x?  Both fink and macports on the mac have 6.10.x, should we be targeting that version?  Or will the changes you are making work with that version?&lt;/p&gt;</comment>
                            <comment id="12913547" author="clavoie" created="Wed, 22 Sep 2010 13:32:10 +0000"  >&lt;p&gt;1) Re-synced to head&lt;/p&gt;

&lt;p&gt;2) Dropped the Prelude fix (which is now in HEAD, and thus redundant)&lt;/p&gt;

&lt;p&gt;3) Also renamed usage of &apos;proc&apos; to &apos;proc_&apos; preventatively&lt;/p&gt;</comment>
                            <comment id="12913627" author="clavoie" created="Wed, 22 Sep 2010 15:41:29 +0000"  >&lt;p&gt;Anthony &amp;#8211; I&apos;m working on &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-905&quot; title=&quot;Make haskell thrift bindings use automake to compile and install&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-905&quot;&gt;&lt;del&gt;THRIFT-905&lt;/del&gt;&lt;/a&gt; too, but my knowledge of autotools is... biased towards my mental stability, not towards deep expertise &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;However, my v4 of &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-743&quot; title=&quot;compile error with GHC 6.12.1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-743&quot;&gt;&lt;del&gt;THRIFT-743&lt;/del&gt;&lt;/a&gt; is independent from any version of &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-905&quot; title=&quot;Make haskell thrift bindings use automake to compile and install&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-905&quot;&gt;&lt;del&gt;THRIFT-905&lt;/del&gt;&lt;/a&gt;, and should apply cleanly without.&lt;/p&gt;

&lt;p&gt;To the best of my knowledge all versions of &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-743&quot; title=&quot;compile error with GHC 6.12.1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-743&quot;&gt;&lt;del&gt;THRIFT-743&lt;/del&gt;&lt;/a&gt; do NOT break previous versions of GHC; they merely rename a few identifiers away ( rec -&amp;gt; record, proc -&amp;gt; proc_ } because in 6.12 they became keywords under certain circumstances. This shouldn&apos;t have any negative effects on old ghc (no more than renaming a variable &apos;class&apos; to &apos;klass&apos; should break C compilers, but make it work in C++).&lt;/p&gt;

&lt;p&gt;As far as which version of GHC to target, I&apos;m aiming to have as few dependencies on modern GHC. Certainly my patches so far will relax the requirements on modern GHC; but I&apos;m less sure about the required extra cabal packages. I spent a fair chunk of time yesterday trying to get an old ghc install working, but it&apos;s increasingly difficult to find a setup that satisfy all of the following criteria:&lt;/p&gt;

&lt;p&gt;1) Compiles or runs from golden binaries&lt;/p&gt;

&lt;p&gt;2) Has GHC &amp;lt;= 6.10&lt;/p&gt;

&lt;p&gt;3) Has autotools &amp;gt;= 2.65&lt;/p&gt;

&lt;p&gt;Typically, #2 and #3 are mutually exclusive (freebsd8.1, for example, only has autotools2.62; debian unstable won&apos;t compile ghc 6.10 with its packaged 6.12; debian stable has ghc 6.6 but downright ancient autotools; ...).&lt;/p&gt;

&lt;p&gt;I would aim for this to compile cleanly on the last 2-3 haskell platform releases; it&apos;s fast becoming the haskell community&apos;s golden standard &amp;#8211; macports and fink haven&apos;t treated me well on mac on that regard, and are increasingly irrelevant for Haskell development, as far as I can tell.&lt;/p&gt;</comment>
                            <comment id="12914917" author="djnym" created="Sun, 26 Sep 2010 04:27:09 +0000"  >&lt;p&gt;Patch compiles and doesn&apos;t seem to cause any errors, so committed it.  Please close if it is good for you Christian.&lt;/p&gt;</comment>
                            <comment id="12914974" author="clavoie" created="Sun, 26 Sep 2010 13:38:49 +0000"  >&lt;p&gt;Yeah, I can get my tests (and thus all of Thrift and the Thrift generated code I need) with this patch in all three basic set of flags:&lt;/p&gt;

&lt;p&gt;1) -fglasgow-exts&lt;br/&gt;
2) -XArrows&lt;br/&gt;
3) neither&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12445451" name="ghc-6.12.1-compile-problem-patch-v2.txt" size="5689" author="mgrabmueller" created="Tue, 25 May 2010 13:25:33 +0000"/>
                            <attachment id="12440198" name="ghc-6.12.1-compile-problem-patch.txt" size="1721" author="mgrabmueller" created="Tue, 30 Mar 2010 10:07:55 +0000"/>
                            <attachment id="12455062" name="v3-thrift-compile-errors.patch" size="5798" author="clavoie" created="Mon, 20 Sep 2010 17:25:39 +0000"/>
                            <attachment id="12455261" name="v4-rename-proc-rec-keywords.patch" size="7625" author="clavoie" created="Wed, 22 Sep 2010 13:32:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>186901</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16dqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245358</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>