<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:05:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-1624] Isset Generated differently on different platforms</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-1624</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;Genereated java code is different depending on the environment. &lt;/p&gt;

&lt;p&gt;Example Service:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;service IssetService
{
   bool test()
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;CentOS 5 result:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void readObject(java.io.ObjectInputStream in) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; java.io.IOException, ClassNotFoundException {
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        read(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; org.apache.thrift.protocol.TCompactProtocol(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; org.apache.thrift.transport.TIOStreamTransport(in)));
      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (org.apache.thrift.TException te) {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; java.io.IOException(te);
      }
    }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Mac OS X result:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void readObject(java.io.ObjectInputStream in) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; java.io.IOException, ClassNotFoundException {
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        &lt;span class=&quot;code-comment&quot;&gt;// it doesn&lt;span class=&quot;code-quote&quot;&gt;&apos;t seem like you should have to &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;, but java serialization is wacky, and doesn&apos;&lt;/span&gt;t call the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; constructor.
&lt;/span&gt;        __isset_bitfield = 0;
        read(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; org.apache.thrift.protocol.TCompactProtocol(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; org.apache.thrift.transport.TIOStreamTransport(in)));
      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (org.apache.thrift.TException te) {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; java.io.IOException(te);
      }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The inconsistency is a problem as we have a hybrid env. Also we are unsure which is correct.&lt;/p&gt;

&lt;p&gt;I have dug around in the code and is seems to come down to this method &quot;tstruct-&amp;gt;is_union()&quot;. On CentOS the struct is a union so the &apos;isset&apos; code is omitted. While the opposite is true for Mac OS X. I am still unsure as to the cause but before I submit a patch I need to know which is correct.&lt;/p&gt;</description>
                <environment>&lt;p&gt;CentOS 5 Mac OS X&lt;/p&gt;</environment>
        <key id="12559724">THRIFT-1624</key>
            <summary>Isset Generated differently on different platforms</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bryanduxbury">Bryan Duxbury</assignee>
                                    <reporter username="nvcook42">Nathaniel Cook</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Jun 2012 17:29:11 +0000</created>
                <updated>Tue, 26 Jun 2012 16:45:58 +0000</updated>
                            <resolved>Tue, 26 Jun 2012 16:45:58 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>0.9</fixVersion>
                                    <component>Compiler (General)</component>
                    <component>Java - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13291294" author="bryanduxbury" created="Thu, 7 Jun 2012 20:52:16 +0000"  >&lt;p&gt;Are you using the same versions of thrift between your two hosts? And where did you get them from?&lt;/p&gt;</comment>
                            <comment id="13291301" author="nvcook42" created="Thu, 7 Jun 2012 21:01:05 +0000"  >&lt;p&gt;Yes, they are the same version. I compiled them both from trunk.&lt;/p&gt;</comment>
                            <comment id="13291333" author="brianbloniarz" created="Thu, 7 Jun 2012 21:40:52 +0000"  >&lt;p&gt;Here&apos;s a theory: maybe t_struct::is_union_ is just an uninitialized variable?&lt;/p&gt;

&lt;p&gt;The t_struct constructor doesn&apos;t initialize it. thrifty.yy line 724 will initialize it for struct/union declarations, but I&apos;m guessing that codepath is skipped for service declarations.&lt;/p&gt;</comment>
                            <comment id="13291345" author="brianbloniarz" created="Thu, 7 Jun 2012 21:48:47 +0000"  >&lt;p&gt;Nathaniel, could you see if the following patch fixes the issue?&lt;/p&gt;</comment>
                            <comment id="13401020" author="brianbloniarz" created="Mon, 25 Jun 2012 23:28:21 +0000"  >&lt;p&gt;Hey Bryan, would you consider merging this patch?&lt;/p&gt;

&lt;p&gt;Nathaniel never replied to confirm that it fixed his issue, but fixing an uninitialized variable couldn&apos;t hurt.&lt;/p&gt;</comment>
                            <comment id="13401070" author="bryanduxbury" created="Tue, 26 Jun 2012 00:33:34 +0000"  >&lt;p&gt;I just committed this patch. Should we close this ticket?&lt;/p&gt;</comment>
                            <comment id="13401083" author="hudson" created="Tue, 26 Jun 2012 01:13:07 +0000"  >&lt;p&gt;Integrated in Thrift #506 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/506/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/506/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1624&quot; title=&quot;Isset Generated differently on different platforms&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1624&quot;&gt;&lt;del&gt;THRIFT-1624&lt;/del&gt;&lt;/a&gt;. java: Isset Generated differently on different platforms&lt;/p&gt;

&lt;p&gt;This patch initializes is_union_ to a specific value to try and avoid the issue.&lt;/p&gt;

&lt;p&gt;Patch: Brian Bloniarz (Revision 1353784)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
bryanduxbury : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1353784&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1353784&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/thrift/trunk/compiler/cpp/src/parse/t_struct.h&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13401093" author="nvcook42" created="Tue, 26 Jun 2012 01:40:03 +0000"  >&lt;p&gt;Sorry I forgot to get back to you on this. The patch worked great. Feel free to close the issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12531310" name="is_union_uninitialized.patch" size="576" author="brianbloniarz" created="Thu, 7 Jun 2012 21:48:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245658</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i06chj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34957</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>