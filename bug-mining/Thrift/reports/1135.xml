<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:15:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-2894] PHP json serializer skips maps with int/bool keys</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-2894</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;When the PHP generator runs with the &quot;json&quot; option, it skips fields that are maps with non-string keys. An instance of this struct will produce an empty object when JSON-serialized:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;struct Foo {
  1: map&amp;lt;i32,string&amp;gt;;
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is unnecessarily strict, since PHP&apos;s json_encode() function will convert the keys to strings for you.&lt;/p&gt;

&lt;p&gt;Pull request coming.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12761996">THRIFT-2894</key>
            <summary>PHP json serializer skips maps with int/bool keys</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jensg">Jens Geyer</assignee>
                                    <reporter username="stigsb">Stig Bakken</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Dec 2014 10:41:21 +0000</created>
                <updated>Mon, 29 Dec 2014 21:36:30 +0000</updated>
                            <resolved>Thu, 18 Dec 2014 20:57:29 +0000</resolved>
                                    <version>0.9.2</version>
                                    <fixVersion>0.9.3</fixVersion>
                                    <component>PHP - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14248113" author="githubbot" created="Tue, 16 Dec 2014 10:43:15 +0000"  >&lt;p&gt;GitHub user stigsb opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/320&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/320&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    PHP generator: in jsonSerialize, only skip maps with non-scalar keys&lt;/p&gt;

&lt;p&gt;    (previously skipped maps with non-string keys)&lt;br/&gt;
    Jira ticket: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2894&quot; title=&quot;PHP json serializer skips maps with int/bool keys&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2894&quot;&gt;&lt;del&gt;THRIFT-2894&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/stigsb/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/stigsb/thrift&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2894&quot; title=&quot;PHP json serializer skips maps with int/bool keys&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2894&quot;&gt;&lt;del&gt;THRIFT-2894&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/320.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/320.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #320&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 5914cf3c5c552c8d7641add4e596884ce2c59da4&lt;br/&gt;
Author: Stig Bakken &amp;lt;stig@zedge.net&amp;gt;&lt;br/&gt;
Date:   2014-12-12T11:49:47Z&lt;/p&gt;

&lt;p&gt;    PHP generator: in jsonSerialize, only skip maps with non-scalar keys&lt;br/&gt;
    (previously skipped maps with non-string keys)&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14249043" author="githubbot" created="Tue, 16 Dec 2014 21:59:50 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/320&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/320&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14249045" author="jensg" created="Tue, 16 Dec 2014 22:02:04 +0000"  >&lt;p&gt;Committed, thanks!&lt;/p&gt;</comment>
                            <comment id="14249068" author="hudson" created="Tue, 16 Dec 2014 22:19:16 +0000"  >&lt;p&gt;FAILURE: Integrated in Thrift #1405 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1405/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1405/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2894&quot; title=&quot;PHP json serializer skips maps with int/bool keys&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2894&quot;&gt;&lt;del&gt;THRIFT-2894&lt;/del&gt;&lt;/a&gt; PHP json serializer skips maps with int/bool keys (jensg: rev a792e5d5ac8747f7f0d4b59c3a631bb86159fe18)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;compiler/cpp/src/generate/t_php_generator.cc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14249645" author="stigsb" created="Wed, 17 Dec 2014 09:22:24 +0000"  >&lt;p&gt;Hi Jens,&lt;/p&gt;

&lt;p&gt;I updated (and squashed) the original pull request, the commit you merged did not handle enums correctly.  This is the fixed commit:&lt;br/&gt;
&lt;a href=&quot;https://github.com/stigsb/thrift/commit/5914cf3c5c552c8d7641add4e596884ce2c59da4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/stigsb/thrift/commit/5914cf3c5c552c8d7641add4e596884ce2c59da4&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14251315" author="githubbot" created="Thu, 18 Dec 2014 07:06:16 +0000"  >&lt;p&gt;GitHub user stigsb opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/331&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/331&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    PHP generator: in jsonSerialize, only skip maps with non-scalar keys&lt;/p&gt;

&lt;p&gt;    Previously skipped maps with enum or non-base-type keys. This fixes the original patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2894&quot; title=&quot;PHP json serializer skips maps with int/bool keys&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2894&quot;&gt;&lt;del&gt;THRIFT-2894&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/stigsb/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/stigsb/thrift&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2894&quot; title=&quot;PHP json serializer skips maps with int/bool keys&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2894&quot;&gt;&lt;del&gt;THRIFT-2894&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/331.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/331.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #331&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 9b80e8c3c43428497ffa4274e6b427343aeb855c&lt;br/&gt;
Author: Stig Bakken &amp;lt;stig@zedge.net&amp;gt;&lt;br/&gt;
Date:   2014-12-12T11:49:47Z&lt;/p&gt;

&lt;p&gt;    PHP generator: in jsonSerialize, only skip maps with non-scalar keys&lt;br/&gt;
    (previously skipped maps with non-string keys)&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14252231" author="githubbot" created="Thu, 18 Dec 2014 20:56:40 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/331&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/331&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14252232" author="jensg" created="Thu, 18 Dec 2014 20:57:29 +0000"  >&lt;p&gt;Committed, thanks!&lt;/p&gt;</comment>
                            <comment id="14252266" author="hudson" created="Thu, 18 Dec 2014 21:17:15 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1407 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1407/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1407/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2894&quot; title=&quot;PHP json serializer skips maps with int/bool keys&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2894&quot;&gt;&lt;del&gt;THRIFT-2894&lt;/del&gt;&lt;/a&gt; PHP json serializer skips maps with int/bool keys (jensg: rev c61b3a8170e0decf2a4e863c89bf34acc16b0363)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;compiler/cpp/src/generate/t_php_generator.cc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 48 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23h6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>