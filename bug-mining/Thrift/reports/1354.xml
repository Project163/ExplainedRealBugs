<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:20:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3336] Thrift generated streaming operators added in 0.9.2 cannot be overridden</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3336</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;I work on one project that has been using thrift-0.8.0 and I am updating it to 0.9.3.  The project defines streaming operators for &quot;operator &amp;lt;&amp;lt;&quot; on a variety of thrift-generated types.&lt;/p&gt;

&lt;p&gt;The fix added in &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2067&quot; title=&quot;Thrift objects should have a default string representation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2067&quot;&gt;&lt;del&gt;THRIFT-2067&lt;/del&gt;&lt;/a&gt; provides similar but not identical functionality however it was done in a way that cannot be overridden, and this causes projects upgrading from versions prior to 0.9.2 with their own streaming operators to fail to compile.&lt;/p&gt;

&lt;p&gt;One way to make the streaming operator virtual is to follow the example provided in &lt;a href=&quot;http://stackoverflow.com/questions/5189614/operator-and-inheritance&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/5189614/operator-and-inheritance&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12895149">THRIFT-3336</key>
            <summary>Thrift generated streaming operators added in 0.9.2 cannot be overridden</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jking3">James E. King III</assignee>
                                    <reporter username="jking3">James E. King III</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Sep 2015 15:29:19 +0000</created>
                <updated>Mon, 30 Jan 2017 19:21:23 +0000</updated>
                            <resolved>Fri, 25 Sep 2015 18:45:04 +0000</resolved>
                                    <version>0.9.2</version>
                    <version>0.9.3</version>
                                    <fixVersion>0.9.3</fixVersion>
                                    <component>C++ - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14904673" author="jking3" created="Wed, 23 Sep 2015 15:35:24 +0000"  >&lt;p&gt;The code change in &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2067&quot; title=&quot;Thrift objects should have a default string representation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2067&quot;&gt;&lt;del&gt;THRIFT-2067&lt;/del&gt;&lt;/a&gt; is also generating operator&amp;lt;&amp;lt; friend declarations on internal structures - I have eliminated that as well.&lt;/p&gt;</comment>
                            <comment id="14904708" author="hcorg" created="Wed, 23 Sep 2015 15:56:53 +0000"  >&lt;p&gt;as I wrote in &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2067&quot; title=&quot;Thrift objects should have a default string representation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2067&quot;&gt;&lt;del&gt;THRIFT-2067&lt;/del&gt;&lt;/a&gt; - `operator&amp;lt;&amp;lt;` on internal structures was generated by design - to help debug/log incoming function arguments etc.&lt;/p&gt;</comment>
                            <comment id="14904746" author="jking3" created="Wed, 23 Sep 2015 16:22:08 +0000"  >&lt;p&gt;Agree, but there are only declarations and no definitions.  Definitions are only emitted for user types.  If the original intention was provide definitions for internal structure helpers that will need to be tracked in a separate defect.&lt;/p&gt;</comment>
                            <comment id="14904806" author="hcorg" created="Wed, 23 Sep 2015 16:49:25 +0000"  >&lt;p&gt;oh, that&apos;s a bug, nice catch&lt;/p&gt;

&lt;p&gt;I&apos;ll fix it after this issue - no need to creating merge conflicts &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14904901" author="jking3" created="Wed, 23 Sep 2015 17:50:15 +0000"  >&lt;p&gt;Given the addition of compiler generated streaming out operators is an incompatible change, would it make more sense to make this a compile time option with the default on?  This would allow folks to easily turn off the emission of the streaming operator so that they can continue to use their own.  Thoughts?&lt;/p&gt;</comment>
                            <comment id="14904949" author="hcorg" created="Wed, 23 Sep 2015 18:06:03 +0000"  >&lt;p&gt;I personally quite like generation options, &lt;b&gt;but&lt;/b&gt; I saw this discussion quite often on Jira or maillist and usually consensus was: &quot;keep generation options at minimum, if really needed - use annotations&quot;. I do not think that generating operator&amp;lt;&amp;lt; in C++ is something that should go into annotations (present in IDL file). Option would probably be frown upon... &lt;/p&gt;

&lt;p&gt;As nobody before complained about it, and your solution should improve extendability (and I do see any potential new problems it could introduce) - I&apos;d leave it for now as default and possibly return to discussion if somebody find some new issue - no need to do more work than necessary.&lt;/p&gt;

&lt;p&gt;off-topic: probably providing thrift compiler with ability to read options from some file, or introducing some special format of &quot;options per language in IDL file&quot; (comments, top-level annotations, new grammar construct?) would solve a lot of such discussions...&lt;/p&gt;</comment>
                            <comment id="14907943" author="githubbot" created="Fri, 25 Sep 2015 11:21:45 +0000"  >&lt;p&gt;GitHub user jeking3 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/626&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/626&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3336&quot; title=&quot;Thrift generated streaming operators added in 0.9.2 cannot be overridden&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3336&quot;&gt;&lt;del&gt;THRIFT-3336&lt;/del&gt;&lt;/a&gt;: eliminate extraneous ostream operators in generated code&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;; provide an overridable ostream implementation&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jeking3/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jeking3/thrift&lt;/a&gt; bugfix/&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3336&quot; title=&quot;Thrift generated streaming operators added in 0.9.2 cannot be overridden&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3336&quot;&gt;&lt;del&gt;THRIFT-3336&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/626.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/626.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #626&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 0c74ec5b963c52122036e7559120180023a3527d&lt;br/&gt;
Author: James E. King, III &amp;lt;jim.king@simplivity.com&amp;gt;&lt;br/&gt;
Date:   2015-09-23T15:37:44Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3336&quot; title=&quot;Thrift generated streaming operators added in 0.9.2 cannot be overridden&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3336&quot;&gt;&lt;del&gt;THRIFT-3336&lt;/del&gt;&lt;/a&gt;: eliminate extraneous ostream operators in generated code; provide an overridable ostream implementation&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14908321" author="githubbot" created="Fri, 25 Sep 2015 16:58:39 +0000"  >&lt;p&gt;Github user hcorg commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/626#discussion_r40451162&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/626#discussion_r40451162&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: compiler/cpp/src/generate/t_cpp_generator.cc &amp;#8212;&lt;br/&gt;
    @@ -1506,24 +1523,16 @@ void generate_fields(std::ofstream&amp;amp; out,&lt;br/&gt;
     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Generates operator&amp;lt;&amp;lt;&lt;br/&gt;
      */&lt;br/&gt;
    -void t_cpp_generator::generate_struct_ostream_operator(std::ofstream&amp;amp; out, t_struct* tstruct) {&lt;br/&gt;
    +void t_cpp_generator::generate_struct_print_operator(std::ofstream&amp;amp; out, t_struct* tstruct) {&lt;br/&gt;
       out &amp;lt;&amp;lt; indent();&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;generate_struct_ostream_operator_decl(out, tstruct);&lt;br/&gt;
    +  generate_struct_print_operator_decl(out, tstruct);&lt;br/&gt;
       out &amp;lt;&amp;lt; &quot; {&quot; &amp;lt;&amp;lt; endl;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;       indent_up();&lt;/p&gt;

&lt;p&gt;       out &amp;lt;&amp;lt; indent() &amp;lt;&amp;lt; &quot;using apache::thrift::to_string;&quot; &amp;lt;&amp;lt; endl;&lt;br/&gt;
    -&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;// eliminate compiler unused warning&lt;/li&gt;
	&lt;li&gt;const vector&amp;lt;t_field*&amp;gt;&amp;amp; fields = tstruct-&amp;gt;get_members();&lt;/li&gt;
	&lt;li&gt;if (fields.empty())&lt;/li&gt;
	&lt;li&gt;out &amp;lt;&amp;lt; indent() &amp;lt;&amp;lt; &quot;(void) obj;&quot; &amp;lt;&amp;lt; endl;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    why this line is removed? I&apos;m pretty sure struct/exception without fields will generate warning &quot;unused function parameter&quot; for operator&amp;lt;&amp;lt;/print method&lt;/p&gt;</comment>
                            <comment id="14908332" author="hcorg" created="Fri, 25 Sep 2015 17:06:29 +0000"  >&lt;p&gt;disregard this comment&lt;/p&gt;</comment>
                            <comment id="14908485" author="githubbot" created="Fri, 25 Sep 2015 18:43:27 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/626&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/626&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14908487" author="hcorg" created="Fri, 25 Sep 2015 18:45:05 +0000"  >&lt;p&gt;Commited, thanks!&lt;/p&gt;

&lt;p&gt;I&apos;ve changed generated method name to `printTo` to make it name more self-explainable.&lt;/p&gt;</comment>
                            <comment id="14908569" author="hudson" created="Fri, 25 Sep 2015 19:48:27 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1665 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1665/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1665/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3336&quot; title=&quot;Thrift generated streaming operators added in 0.9.2 cannot be overridden&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3336&quot;&gt;&lt;del&gt;THRIFT-3336&lt;/del&gt;&lt;/a&gt;: C++ - generated ostream operator&amp;lt;&amp;lt; will be overridable (hcorg: rev c623197d37be470307c70c54d600ce8e74ed1373)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;compiler/cpp/src/generate/t_cpp_generator.cc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13038974">THRIFT-4060</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12654761">THRIFT-2067</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 8 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2lcmf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>