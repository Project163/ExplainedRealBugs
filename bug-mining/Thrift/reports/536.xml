<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:03:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-1330] PHP Namespaces no longer generated</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-1330</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;PHP namespaces are not being generated, ever. PHP 5.3 namespace aren&apos;t generated either.&lt;/p&gt;

&lt;p&gt;The following will illustrate the bug. This works in Thrift 0.6.*&lt;/p&gt;

&lt;p&gt;$ thrift -version&lt;br/&gt;
Thrift version 0.7.0&lt;br/&gt;
$ cat &amp;gt; test.thrift&lt;br/&gt;
namespace php TestNamespace&lt;br/&gt;
struct ItemX {}&lt;br/&gt;
$ thrift --gen php test.thrift&lt;br/&gt;
$ grep &quot;TestNamespace&quot; gen-php/test/test_types.php &amp;amp;&amp;amp; echo &quot;Has namespace&quot; || echo &quot;NO NAMESPACE FOUND&quot;&lt;br/&gt;
NO NAMESPACE FOUND&lt;/p&gt;

&lt;p&gt;$ thrift -version&lt;br/&gt;
Thrift version 0.8.0-dev&lt;br/&gt;
$ thrift -gen php test.thrift &lt;br/&gt;
$ grep &quot;TestNamespace&quot; gen-php/test/test_types.php &amp;amp;&amp;amp; echo &quot;Has namespace&quot; || echo &quot;NO NAMESPACE FOUND&quot;&lt;br/&gt;
NO NAMESPACE FOUND&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OS X 10.6.8, CentOS 5.6, Ubuntu 11.04&lt;/p&gt;</environment>
        <key id="12521623">THRIFT-1330</key>
            <summary>PHP Namespaces no longer generated</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yelirekim">Mike Riley</assignee>
                                    <reporter username="barmstrong@qualtrics.com">B Armstrong</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Sep 2011 17:05:21 +0000</created>
                <updated>Mon, 23 Jan 2012 16:31:34 +0000</updated>
                            <resolved>Sat, 26 Nov 2011 18:35:19 +0000</resolved>
                                    <version>0.7</version>
                    <version>0.8</version>
                                    <fixVersion>0.8</fixVersion>
                                    <component>PHP - Compiler</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13099114" author="jfarrell" created="Wed, 7 Sep 2011 17:21:25 +0000"  >&lt;p&gt;the compiler was given a &apos;namespace&apos; option to not break compatibility with older versions of php. From thrift --help&lt;/p&gt;

&lt;p&gt;    namespace:       Generate PHP namespaces as defined in PHP &amp;gt;= 5.3&lt;/p&gt;


&lt;p&gt;&amp;gt; thrift --gen php:namespace test.thrift&lt;br/&gt;
&amp;gt; grep &quot;TestNamespace&quot; gen-php/test/test_types.php &amp;amp;&amp;amp; echo &quot;Has namespace&quot; || echo &quot;NO NAMESPACE FOUND&quot;&lt;br/&gt;
namespace TestNamespace;&lt;br/&gt;
Has namespace&lt;/p&gt;</comment>
                            <comment id="13099122" author="barmstrong@qualtrics.com" created="Wed, 7 Sep 2011 17:33:24 +0000"  >&lt;p&gt;The &apos;namespace&apos; options adds the PHP 5.3 style namespace, that is correct. I guess my bug was poorly written up.&lt;/p&gt;

&lt;p&gt;The actual bug is that we can&apos;t get the PHP 5.2 style of &quot;namespacing&quot;. AKA Prefixing all of the classes with the &quot;namespace&quot; name.&lt;/p&gt;

&lt;p&gt;Here is the output with thrift 0.6.0:&lt;/p&gt;

&lt;p&gt;$ thrift -version&lt;br/&gt;
Thrift version 0.6.0&lt;br/&gt;
$ thrift -gen php test.thrift &lt;br/&gt;
$ grep &quot;TestNamespace&quot; gen-php/test/test_types.php &amp;amp;&amp;amp; echo &quot;Has namespace&quot; || echo &quot;NO NAMESPACE FOUND&quot;&lt;br/&gt;
class TestNamespace_ItemX {&lt;br/&gt;
Has namespace&lt;/p&gt;

&lt;p&gt;With thrift 0.7.0 and 0.8.0 we cannot get the old functionality to work.&lt;/p&gt;</comment>
                            <comment id="13099134" author="barmstrong@qualtrics.com" created="Wed, 7 Sep 2011 17:40:53 +0000"  >&lt;p&gt;It should be noted that this bug is reporting that the &quot;compatibility with older versions of php&quot; has been broken.&lt;/p&gt;</comment>
                            <comment id="13099204" author="jfarrell" created="Wed, 7 Sep 2011 18:53:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1241&quot; title=&quot;php namespace generation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1241&quot;&gt;&lt;del&gt;THRIFT-1241&lt;/del&gt;&lt;/a&gt; introduced the php namespaces, would make sense to set the NS_ROOT with older style namespace for php classes &amp;lt; 5.3. If you would like to provide a patch for this that would be great, otherwise i can tackle it after some of the other tickets i have&lt;/p&gt;</comment>
                            <comment id="13131958" author="yelirekim" created="Thu, 20 Oct 2011 19:56:15 +0000"  >&lt;p&gt;I&apos;m going to tackle this and Thrift-1392, what are reasonable target PHP version(s) to use in testing backwards compatibility?&lt;/p&gt;</comment>
                            <comment id="13131965" author="jfarrell" created="Thu, 20 Oct 2011 20:00:11 +0000"  >&lt;p&gt;Thanks Mike, I would look at php 5.2 and 5.3&lt;/p&gt;</comment>
                            <comment id="13141180" author="jfarrell" created="Tue, 1 Nov 2011 13:53:04 +0000"  >&lt;p&gt;mike, any progress with this? i&apos;m looking at starting the next release candidate soon and would like to get this resolved and added if its close to being completed&lt;/p&gt;</comment>
                            <comment id="13141184" author="yelirekim" created="Tue, 1 Nov 2011 14:05:15 +0000"  >&lt;p&gt;I have these fixed locally.  However, I&apos;m working off of the 0.7 tag as I&apos;m unable to get the C++ server libraries from trunk to work within my application.  AFAIK there is no conflict there but I haven&apos;t tried patching into trunk yet.&lt;/p&gt;

&lt;p&gt;I also have several other areas within thrift that I&apos;ve been tooling around with and will need to pluck only the pertinent parts out of the php compiler.&lt;/p&gt;

&lt;p&gt;Won&apos;t take much time, but if it&apos;s all the same, I&apos;d like to wait until Saturday to put it all together.&lt;/p&gt;</comment>
                            <comment id="13141192" author="jfarrell" created="Tue, 1 Nov 2011 14:15:09 +0000"  >&lt;p&gt;If you want to attach an initial working copy of the patch I can help rebase the patch against trunk. If you need help getting your server to work with the current trunk send an email to the dev list with the issue and we can help get it working&lt;/p&gt;</comment>
                            <comment id="13141243" author="yelirekim" created="Tue, 1 Nov 2011 15:38:11 +0000"  >&lt;p&gt;It&apos;s no problem, I want to make sure my other changes work against trunk as well, I knew I would have to do it eventually.  Unless it&apos;s a problem to wait until Saturday?&lt;/p&gt;</comment>
                            <comment id="13147175" author="jfarrell" created="Wed, 9 Nov 2011 17:32:39 +0000"  >&lt;p&gt;Mike, any progress on this? would like to get this into the 0.8 release&lt;/p&gt;</comment>
                            <comment id="13151218" author="rssh" created="Wed, 16 Nov 2011 14:14:19 +0000"  >&lt;p&gt;Note, that this also brokes php tutorial.&lt;/p&gt;</comment>
                            <comment id="13153444" author="yelirekim" created="Sat, 19 Nov 2011 10:14:48 +0000"  >&lt;p&gt;I ran this against my project and a few contrived tests combining the old/new namespacing and autoloading parameters.&lt;/p&gt;

&lt;p&gt;The scope of changes is relatively wide so if anyone has better testing code that uses namespacing and/or autoloading it would help.&lt;/p&gt;</comment>
                            <comment id="13153935" author="yelirekim" created="Mon, 21 Nov 2011 01:30:17 +0000"  >&lt;p&gt;While using this today I noticed that constants are written out awkwardly with modern namespacing enabled, I&apos;m updating the patch.&lt;/p&gt;</comment>
                            <comment id="13157527" author="jfarrell" created="Sat, 26 Nov 2011 15:53:30 +0000"  >&lt;p&gt;Mike: Testing the r1 patch what does your autoloader look like for this when using autoload=1? When generated all files are dumped into one folder rather than being placed into any type of folder structure. This can be duplicated by changing the namespace in the test case from ThriftTest to Thrift.Test&lt;/p&gt;</comment>
                            <comment id="13157541" author="yelirekim" created="Sat, 26 Nov 2011 16:40:23 +0000"  >&lt;p&gt;I can confirm this occurs, however this has been the behavior present since at least 0.7x, the file/folder structure is identical. I suppose it never really occurred to me that this was unexpected behavior since I am using namespaces to separate thrift code from my non-generated code and only have one namespace to worry about as far as thrift is concerned.&lt;/p&gt;

&lt;p&gt;Could you describe the expected behavior for me so I can try and fix this?&lt;/p&gt;</comment>
                            <comment id="13157564" author="yelirekim" created="Sat, 26 Nov 2011 17:56:04 +0000"  >&lt;p&gt;Jake:&lt;/p&gt;

&lt;p&gt;I&apos;m a little confused at this point because I just looked back over the revision history for the autoloader and it doesn&apos;t seem to have ever changed.  The autoloader works by reading out of the $GLOBALS array to find the path to the specified resource. It should function correctly irrespective of any directory structure assuming you&apos;re writing out paths correctly into $GLOBALS.  What does worry me is that there seems to be a php.path namespace declarator, undocumented, which you can set in your thrift file.  I haven&apos;t explored what this does but I&apos;m betting it will function similar to what you are expecting, which I assume is Zend style autoloading based on folder hierarchies matching class prefixes. I&apos;m betting we have some kind of disconnect here on a basic level as far as how autoloading is supposed to work, which admittedly is probably my fault because I&apos;m very new to thrift.&lt;/p&gt;

&lt;p&gt;The specific example you emailed me, Thrift_Test_VersioningTestV1, to the best of my understanding, functions as expected.  I changed my namespace to Thrift.Test, which was properly prefixed to the class name in the declaration, usage would be as follows:&lt;/p&gt;

&lt;p&gt;1. Included autoload.php in your script. &lt;br/&gt;
2. Include the ThriftTest_types.php file to load the autoload paths.&lt;br/&gt;
3. Invoke &apos;new Thrift_Test_VersioningTestV1()&apos;&lt;/p&gt;

&lt;p&gt;This will cause the autoloader to find the following entry:&lt;/p&gt;

&lt;p&gt;$GLOBALS&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;THRIFT_AUTOLOAD&amp;#39;&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;thrift_test_versioningtestv1&amp;#39;&amp;#93;&lt;/span&gt; = &apos;ThriftTest/ThriftTest.VersioningTestV1.php&apos;;&lt;/p&gt;

&lt;p&gt;And correctly determine the path to the requested class allowing you to load it.&lt;/p&gt;

&lt;p&gt;Could you try and clarify what the issue is here?&lt;/p&gt;</comment>
                            <comment id="13157572" author="jfarrell" created="Sat, 26 Nov 2011 18:19:41 +0000"  >&lt;p&gt;the php lib has been one of the more neglected libraries we have, trying to make sure all bases are covered and that we don&apos;t introduce any new issues. The patch looked good to me, just wanted to double check before committing &lt;/p&gt;</comment>
                            <comment id="13157576" author="yelirekim" created="Sat, 26 Nov 2011 18:28:03 +0000"  >&lt;p&gt;I&apos;m realizing we have needless / awkward prefixing in the class filenames but this is harmless because you can&apos;t have more than one namespace per .thrift file, so as long as there are unique filenames in the folder for each class there won&apos;t ever be issues there.&lt;/p&gt;

&lt;p&gt;Time permitting, I was actually planning on getting Zend style autoloading to work so that you could use thrift resources as dropins to a Zend (or Pear) autoloaded environment.  The current autoloader prevents you from doing this without a little hacking.&lt;/p&gt;</comment>
                            <comment id="13157579" author="jfarrell" created="Sat, 26 Nov 2011 18:35:19 +0000"  >&lt;p&gt;The zend autoloading should be another issue separate from this one. Thanks for the great work on this Mike, committed the r1 patch &lt;/p&gt;</comment>
                            <comment id="13157583" author="hudson" created="Sat, 26 Nov 2011 18:51:48 +0000"  >&lt;p&gt;Integrated in Thrift #343 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/343/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/343/&lt;/a&gt;)&lt;br/&gt;
    Thrift-1330: PHP Namespaces no longer generated&lt;br/&gt;
Client: php&lt;br/&gt;
Patch: Mike Riley&lt;/p&gt;

&lt;p&gt;Fixes namespaces in PHP generator to with with php &amp;gt;= 5.3.x&lt;/p&gt;</comment>
                            <comment id="13157991" author="qerub" created="Sun, 27 Nov 2011 20:23:52 +0000"  >&lt;p&gt;This issue has been wrongfully closed; namespaces (i.e. class name prefixes) are still not supported for PHP &amp;lt; 5.3.&lt;/p&gt;</comment>
                            <comment id="13157993" author="yelirekim" created="Sun, 27 Nov 2011 20:28:27 +0000"  >&lt;p&gt;Is this based off of the commit message or have you seen it behave incorrectly?  I tested this on PHP 5.2.&lt;/p&gt;</comment>
                            <comment id="13157995" author="qerub" created="Sun, 27 Nov 2011 20:31:39 +0000"  >&lt;p&gt;OK, I&apos;m sorry; it is fixed! Just not in build #343 that closed this issue.&lt;/p&gt;</comment>
                            <comment id="13158004" author="jfarrell" created="Sun, 27 Nov 2011 20:44:10 +0000"  >&lt;p&gt;The ci server does not close issue only comments on them, I closed this issue. build #343 failed due to the python test case server not being able to bind to localhost:9090, nothing related to thrift-1330. The ci server has been showing this issue intermittently&lt;/p&gt;</comment>
                            <comment id="13178934" author="sirbrialliance" created="Tue, 3 Jan 2012 19:07:07 +0000"  >&lt;p&gt;This is not fully fixed yet, enums are still broken:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ cat test.thrift 
namespace php TestNamespace
&lt;span class=&quot;code-keyword&quot;&gt;enum&lt;/span&gt; MyEnum {}
$ thrift -version
Thrift version 0.8.0
$ thrift --gen php test.thrift
$ grep &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestNamespace&quot;&lt;/span&gt; gen-php/test/test_types.php || echo &lt;span class=&quot;code-quote&quot;&gt;&quot;NO NAMESPACE FOUND&quot;&lt;/span&gt;
NO NAMESPACE FOUND
$ thrift6 -version
Thrift version 0.6.0
$ thrift6 --gen php test.thrift
$ grep &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestNamespace&quot;&lt;/span&gt; gen-php/test/test_types.php || echo &lt;span class=&quot;code-quote&quot;&gt;&quot;NO NAMESPACE FOUND&quot;&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestNamespace_MyEnum {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13191243" author="sirbrialliance" created="Mon, 23 Jan 2012 16:31:34 +0000"  >&lt;p&gt;Enum issue appears to be fixed in trunk.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12527378">THRIFT-1392</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12504350" name="thrift-1392-1330.patch" size="6935" author="yelirekim" created="Sat, 19 Nov 2011 10:14:48 +0000"/>
                            <attachment id="12504459" name="thrift-1392-1330r1.patch" size="7161" author="yelirekim" created="Mon, 21 Nov 2011 01:32:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19226</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1699z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244635</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>