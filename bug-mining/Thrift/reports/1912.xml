<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:29:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-4622] glibC compilation issue</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-4622</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;&lt;font color=&quot;#707070&quot;&gt;&lt;b&gt;Generated glibC files results in compiler error.&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;/usr/include/glib-2.0/glib/garray.h:88:9: note: expected &#8216;GArray * {aka struct _GArray *}&#8217; but argument is of type &#8216;GPtrArray * {aka struct _GPtrArray *}&#8217;&lt;br/&gt;
 GArray* g_array_append_vals (GArray *array,&lt;br/&gt;
 ^&lt;br/&gt;
 ../gen-c_glib/c__h_w_handling_h_d_&lt;em&gt;handling_types.c: In function &#8216;c&lt;/em&gt;_h_w_handling_image_info_write&#8217;:&lt;br/&gt;
 /usr/include/glib-2.0/glib/garray.h:67:54: error: &#8216;GPtrArray {aka struct _GPtrArray}&#8217; has no member named &#8216;data&#8217;&lt;br/&gt;
 #define g_array_index(a,t,i) (((t*) (void *) (a)-&amp;gt;data) &lt;span class=&quot;error&quot;&gt;&amp;#91;(i)&amp;#93;&lt;/span&gt;)&lt;br/&gt;
 ^&lt;br/&gt;
 ../gen-c_glib/c__h_w_handling_h_d__handling_types.c:198:56: note: in expansion of macro &#8216;g_array_index&#8217;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#707070&quot;&gt;The Generated code resulting in the error:&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;if ((ret = thrift_protocol_write_i16 (protocol, (g_array_index (this_object-&amp;gt;image, gint16, i1)), error)) &amp;lt; 0)&lt;br/&gt;
 return -1;&lt;/p&gt;

&lt;p&gt;.thrift code generating this&lt;/p&gt;

&lt;p&gt;struct ImageInfo&lt;/p&gt;

{ 1: list&amp;lt;int16&amp;gt; image; 2: optional int16 size_h; 3: optional int16 size_v; }

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Here the int16 is typedef from i16.&#160;&lt;/p&gt;

&lt;p&gt;When i replace int16 with i16, the error is solved.&#160;&lt;/p&gt;

&lt;p&gt;Will update when I find the reason&lt;/p&gt;</description>
                <environment>&lt;p&gt;Thrift 0.11.0&lt;/p&gt;

&lt;p&gt;glib 2.0&lt;/p&gt;</environment>
        <key id="13179569">THRIFT-4622</key>
            <summary>glibC compilation issue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="simonsouth">Simon South</assignee>
                                    <reporter username="Gowri4950">Gowrishankar Murali</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Aug 2018 12:16:40 +0000</created>
                <updated>Thu, 27 Dec 2018 15:24:55 +0000</updated>
                            <resolved>Wed, 29 Aug 2018 12:03:11 +0000</resolved>
                                    <version>0.11.0</version>
                                    <fixVersion>0.12.0</fixVersion>
                                    <component>C glib - Compiler</component>
                    <component>C glib - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16584978" author="githubbot" created="Sun, 19 Aug 2018 02:07:22 +0000"  >&lt;p&gt;simonsouth opened a new pull request #1582: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4622&quot; title=&quot;glibC compilation issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4622&quot;&gt;&lt;del&gt;THRIFT-4622&lt;/del&gt;&lt;/a&gt;: Resolve typedef&apos;d list elements (C (GLib))&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1582&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1582&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   With this change the C (GLib) compiler fully resolves the type of a list&apos;s elements before generating the C type for the list.&lt;/p&gt;

&lt;p&gt;   This fixes an issue where the compiler would output broken code for a list containing elements of a typedef&apos;d type.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16584979" author="simonsouth" created="Sun, 19 Aug 2018 02:13:32 +0000"  >&lt;p&gt;Thanks for reporting this, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Gowri4950&quot; class=&quot;user-hover&quot; rel=&quot;Gowri4950&quot;&gt;Gowri4950&lt;/a&gt;. The issue was the&#160;compiler failing to resolve the list&apos;s typedef&apos;d element type to its true type before generating the declaration for the list in C. Consequently, different parts of the generated code disagreed on how the list ought to be accessed.&lt;/p&gt;

&lt;p&gt;As noted above, I&apos;ve submitted a pull request on GitHub with a fix.&lt;/p&gt;</comment>
                            <comment id="16596238" author="githubbot" created="Wed, 29 Aug 2018 12:03:10 +0000"  >&lt;p&gt;jeking3 closed pull request #1582: &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4622&quot; title=&quot;glibC compilation issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4622&quot;&gt;&lt;del&gt;THRIFT-4622&lt;/del&gt;&lt;/a&gt;: Resolve typedef&apos;d list elements (C (GLib))&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/thrift/pull/1582&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1582&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/compiler/cpp/src/thrift/generate/t_c_glib_generator.cc b/compiler/cpp/src/thrift/generate/t_c_glib_generator.cc&lt;br/&gt;
index b27fc6099d..b1e80421d6 100644&lt;br/&gt;
&amp;#8212; a/compiler/cpp/src/thrift/generate/t_c_glib_generator.cc&lt;br/&gt;
+++ b/compiler/cpp/src/thrift/generate/t_c_glib_generator.cc&lt;br/&gt;
@@ -579,7 +579,7 @@ string t_c_glib_generator::type_name(t_type* ttype, bool in_typedef, bool is_con&lt;br/&gt;
       // TODO: discuss whether or not to implement TSet, THashSet or GHashSet&lt;br/&gt;
       cname = &quot;GHashTable&quot;;&lt;br/&gt;
     } else if (ttype-&amp;gt;is_list()) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;t_type* etype = ((t_list*)ttype)-&amp;gt;get_elem_type();&lt;br/&gt;
+      t_type* etype = get_true_type(((t_list*)ttype)-&amp;gt;get_elem_type());&lt;br/&gt;
       if (etype-&amp;gt;is_void()) 
{
         throw std::runtime_error(&quot;compiler error: list element type cannot be void&quot;);
       }&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16596239" author="jking3" created="Wed, 29 Aug 2018 12:03:11 +0000"  >&lt;p&gt;Committed - thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 11 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3x5iv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>