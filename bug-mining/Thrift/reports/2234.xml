<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:34:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-4655] Parser fails on the word &quot;from&quot;</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-4655</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12945572/12945572_image-2018-10-25-17-08-31-856.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#191f25&quot;&gt;2018-10-25 04:04:42&#65306;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; thrift failed output: &lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;#191f25&quot;&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; thrift failed error: &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR:/tmp/pebble_idl_tmp/mkt/dis/1540454677417/idlPro/dis/src/main/thrift/mkt_dis_model_dto.thrift:887&amp;#93;&lt;/span&gt; (last token was &apos;from&apos;)&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;#191f25&quot;&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal com.tuniu.thrift.tools:maven-thrift-plugin:0.1.11_1-SNAPSHOT:compile (thrift-java-sources) on project mkt-dis-idl: thrift did not exit cleanly. Review output for more information. -&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt;&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;#191f25&quot;&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;#191f25&quot;&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; To see the full stack trace of the errors, re-run Maven with the -e switch.&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;#191f25&quot;&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Re-run Maven using the -X switch to enable full debug logging.&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;#191f25&quot;&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;#191f25&quot;&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; For more information about the errors and possible solutions, please read the following articles:&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;#191f25&quot;&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Help 1&amp;#93;&lt;/span&gt; &lt;/font&gt;&lt;a href=&quot;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13194103">THRIFT-4655</key>
            <summary>Parser fails on the word &quot;from&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jensg">Jens Geyer</assignee>
                                    <reporter username="felix wang">felix wang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Oct 2018 09:09:40 +0000</created>
                <updated>Mon, 13 Feb 2023 21:10:13 +0000</updated>
                            <resolved>Sun, 16 Oct 2022 09:52:00 +0000</resolved>
                                    <version>0.9.3</version>
                                    <fixVersion>0.18.0</fixVersion>
                                    <component>Java - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                                        <aggregatetimeremainingestimate seconds="0">0h</aggregatetimeremainingestimate>
                                        <aggregatetimespent seconds="4200">1h 10m</aggregatetimespent>
                                    <comments>
                            <comment id="16663664" author="jking3" created="Thu, 25 Oct 2018 12:13:31 +0000"  >&lt;p&gt;What is your thrift compiler command (we don&apos;t know what language(s) you are targeting with what options, but I am guessing Java)?  What version of the thrift compiler (I see 0.9.3 reported - did you try 0.11.0 just to see if this was resolved)?  There isn&apos;t a lot to go on here.  Can you isolate it down to a simple example?&lt;/p&gt;</comment>
                            <comment id="16663671" author="jking3" created="Thu, 25 Oct 2018 12:19:17 +0000"  >&lt;p&gt;From 0.11.0:&lt;br/&gt;
```&lt;br/&gt;
jking@ubuntu:/tmp$ ~/thrift/compiler/cpp/thrift --gen java foo.thrift&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;FAILURE:generation:1&amp;#93;&lt;/span&gt; Cannot use reserved language keyword: &quot;from&quot;&lt;br/&gt;
```&lt;br/&gt;
These are reserved keywords in csharp and netcore, but not in Java.  I would not have expected the compiler to complain unless generating csharp and netcore.&lt;br/&gt;
```&lt;br/&gt;
jking@ubuntu:~/thrift/compiler/cpp$ grep &apos;keyword&apos; src/thrift/generate/*.cc | grep from&lt;br/&gt;
src/thrift/generate/t_csharp_generator.cc:  csharp_keywords&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;from&amp;quot;&amp;#93;&lt;/span&gt; = 1;&lt;br/&gt;
src/thrift/generate/t_netcore_generator.cc:    netcore_keywords&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;from&amp;quot;&amp;#93;&lt;/span&gt; = 1;&lt;br/&gt;
```&lt;/p&gt;

&lt;p&gt;I suggest you use a different name for your structure member.  Thrift uses the ordinal position and not the variable name for serdes, so changing the name will not make things incompatible on the wire.  Code on either end will need to change next time it is compiled, that&apos;s all.&lt;/p&gt;</comment>
                            <comment id="16731126" author="jensg" created="Sun, 30 Dec 2018 23:28:28 +0000"  >&lt;blockquote&gt;&lt;p&gt;&lt;b&gt;I suggest you use a different name for your structure member&lt;/b&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;del&gt;I think I will give up on that one. We will probably never manage to do it right. What is the right word for Bankrotterkl&#228;rung in english?&lt;/del&gt;&lt;/p&gt;</comment>
                            <comment id="16731129" author="jensg" created="Sun, 30 Dec 2018 23:37:12 +0000"  >&lt;p&gt;REOPEN: We should fix that.&lt;/p&gt;

&lt;p&gt;As a workaround,. the proposed solution is fine, but other than that it is not a solution at all. It&apos;s just awkward to have to give out such advice without being ashamed about the necessity of the advice at all. Since when is &quot;from&quot; a keyword in Java? Since yesterday?&lt;/p&gt;</comment>
                            <comment id="16731130" author="jensg" created="Sun, 30 Dec 2018 23:45:57 +0000"  >&lt;blockquote&gt;&lt;p&gt;I would not have expected the compiler to complain unless generating csharp and netcore.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I repeat it again: That whole approach is doomed to fail.&lt;/p&gt;

&lt;p&gt;There are two kinds of Keywords and one additional special case:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;KW related to IDL constructs (i.e. Thrift IDL keywords)&lt;/li&gt;
	&lt;li&gt;KW related to the generated Output (i.e. language specific Keywords)&lt;/li&gt;
	&lt;li&gt;special language constraints (e.g. it is illegal in C# to use a member name equal to the surrounding type)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The first one should be very concise and the Thrift Compiler should ALWAYS complain, regardless of the target language. Especially, the complaints should NOT change with the set of target languages.&lt;/p&gt;

&lt;p&gt;The latter two sets of problems should not lead to any complaints at all. Rather they should be silently handled and transformed into suitable language constructs (i.e. prefixing KWs with @ in C#). If you think we need to have a warning in such cases, add one for G&apos;s sake.&lt;/p&gt;

&lt;p&gt;That&apos;s basically it. Simple, explainable, and free of unexpected reactions from the system as a whole. At the cost of a bit more work for the implementer of the generator.&lt;/p&gt;</comment>
                            <comment id="16731153" author="jking3" created="Mon, 31 Dec 2018 03:48:12 +0000"  >&lt;p&gt;What I could see is (for example...) if you generate lua and python code, and have the word &quot;from&quot;, the compiler could put out a warning.  If you generate lua, python, and netcore code, the compiler could error out.  &lt;/p&gt;

&lt;p&gt;OR,&lt;/p&gt;

&lt;p&gt;A command line option could make the language-specific keyword checking behave differently:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Only check the languages I am generating&lt;/li&gt;
	&lt;li&gt;Check all languages (this may not work with the compiler plugin mode)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Language-specific keyword issues are warnings&lt;/li&gt;
	&lt;li&gt;Language-specific keyword issues are errors&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Then we need sensible defaults for these.&lt;/p&gt;</comment>
                            <comment id="16731294" author="jensg" created="Mon, 31 Dec 2018 12:25:04 +0000"  >&lt;p&gt;&amp;gt;&#160;&lt;font color=&quot;#333333&quot;&gt; if you generate lua and python code,&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt; the compiler could put out a warning. &lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&amp;gt;&#160;&lt;font color=&quot;#333333&quot;&gt; If you generate lua, python, and netcore code, the compiler could error out. &lt;/font&gt;&lt;/p&gt;

&lt;p&gt;Why are you so eager to introduce inconsistent behaviour that only makes the product as a whole hard to use? I explained about half a dozen times that this is a bad idea, and I also explained why.&lt;/p&gt;

&lt;p&gt;One eaxmple: Evernote offers a public Thrift API. Is it their task to make sure that the IDL will produce valid code in every language? No. This is something that the Thrift Compiler is responsible for. They don&apos;t care About languages they do not use themselves, and instead rely on the Compiler to handle that for them. And that&apos;s exactly what they should do. So who is responsible? We are. And nobody else.&lt;/p&gt;

&lt;p&gt;If the usage of just another language (netcore in your example) breaks the whole workflow by spitting out errors, Thrift morphes &lt;font color=&quot;#333333&quot;&gt;from a helpful tool&lt;/font&gt; into a roadbump you want to avoid. .&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16731396" author="jking3" created="Mon, 31 Dec 2018 17:49:27 +0000"  >&lt;p&gt;I&apos;m okay saying the combination of all language KW + thrift IDL kw are always enforced.  I just thought based on other pull requests to separate the content that it was desired to make it configurable.  If we always enforce it so things are always portable to new languages without speed bumps, works for me.&lt;/p&gt;</comment>
                            <comment id="16731820" author="jensg" created="Wed, 2 Jan 2019 08:09:35 +0000"  >&lt;p&gt;Ok, I will spend some time with that. That whole topic now annoys me for a while. I&apos;m going to solve it once and for all.&lt;/p&gt;</comment>
                            <comment id="17618246" author="jensg" created="Sun, 16 Oct 2022 09:52:00 +0000"  >&lt;p&gt;The solution moves the PHP-specific keyword list code out of the common generator base class into the php generator (where it belongs). &lt;/p&gt;

&lt;p&gt;The default behaviour is now to return an empty keyword list for the &quot;validation&quot; step. Each target language is free to override this and use that validation filter, if such is necessary and there is no other way to deal with it properly (e.g. in C# we can prefix stuff with &quot;@&quot;) &lt;/p&gt;

&lt;p&gt;Also, the validation step now prints exactly, which language generator implementation tries to fight the user from using what keyword. This should help to exercise some pressure on that particular implementation to get it finally right.&lt;/p&gt;

&lt;p&gt;NB. The rerasons and arguments for and against this design are already explained at length in the linked ticket(s). I don&apos;t want to repeat it here. Furthermore, as we still have a number of different validation concepts and keywords handlers (one in the IDL,. this &quot;validation&quot; meachanism, the iondividual generators keywords lists and last not least the go validator) implemented, I am aware of the fact that this is not a 100% perfect solution either, but it&apos;s one step into that direction. There&apos;s plenty of work to do, but it&apos;s all out of the scope of this ticket.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13288169">THRIFT-5124</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12712113">THRIFT-2509</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13138303">THRIFT-4496</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12945572" name="image-2018-10-25-17-08-31-856.png" size="9869" author="felix wang" created="Thu, 25 Oct 2018 09:08:33 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="13017075">THRIFT-3956</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 4 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3zmlb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>