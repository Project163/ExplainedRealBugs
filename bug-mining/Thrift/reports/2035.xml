<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:31:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-4999] HTTPTransportClient doesn&apos;t check for HTTP status code</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-4999</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;This issue is similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4641&quot; title=&quot;TCurlClient doesn&amp;#39;t check for HTTP status code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4641&quot;&gt;&lt;del&gt;THRIFT-4641&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;When receiving a non 2xx code, HTTPTransportClient tries to parse response body instead of raising a clean TransportError.&lt;/p&gt;

&lt;p&gt;We observe a Thrift::ProtocolException instead of a Thrift::TransportException&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;request on &lt;a href=&quot;http://example.org/test&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://example.org/test&lt;/a&gt; returns an 500 response, with an empty body (or an error page).&lt;/li&gt;
	&lt;li&gt;currently ruby code will not read the response code and blindly try to parse the body&lt;/li&gt;
	&lt;li&gt;this action will fail with ProtocolException (which is, I believe, the error meaning &quot;protocol is not implemented correctly)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In this case, reading the error code sent by the http layer (500) and raising appropriate exception (TransportException) feels more correct. This bug was already present in &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-4641&quot; title=&quot;TCurlClient doesn&amp;#39;t check for HTTP status code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-4641&quot;&gt;&lt;del&gt;THRIFT-4641&lt;/del&gt;&lt;/a&gt; (for the php client). Quoting this other ticket:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;TCurlClient doesn&apos;t check for HTTP status code. Other languages, such as Go and Java&lt;br/&gt;
do check for it. This can lead to potentially wrong exception being thrown: TProtocolException&lt;br/&gt;
instead of TTransportException. To be more precise, TCurlTransport doesn&apos;t error out and&lt;br/&gt;
Protocol starts to parse response, which may lead to TProtocolException. For example, AWS&lt;br/&gt;
ALB may return 502 Bad Gateway with HTML as part of payload when there&apos;s an issue with an&lt;br/&gt;
upstream. In such case, a client may want to retry but it only makes sense if there&apos;s a transport&lt;br/&gt;
exception.&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="13266794">THRIFT-4999</key>
            <summary>HTTPTransportClient doesn&apos;t check for HTTP status code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kamaradclimber">Gregoire Seux</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Nov 2019 10:22:01 +0000</created>
                <updated>Thu, 21 Nov 2019 21:44:06 +0000</updated>
                                            <version>0.13.0</version>
                                                    <component>Ruby - Library</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z08cog:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>