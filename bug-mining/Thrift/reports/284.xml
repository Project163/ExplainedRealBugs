<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:57:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-837] PHP accelerator bug for writes &gt; 8k</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-837</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;When we write more than 8k, the output transport does a directWrite() rather than buffering, in which case we need to use the passed len value rather than the length of the buffer.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12470765">THRIFT-837</key>
            <summary>PHP accelerator bug for writes &gt; 8k</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tkho">Thomas Kho</assignee>
                                    <reporter username="tkho">Thomas Kho</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Aug 2010 21:50:56 +0000</created>
                <updated>Tue, 1 Nov 2011 02:51:36 +0000</updated>
                            <resolved>Thu, 12 Aug 2010 23:30:21 +0000</resolved>
                                    <version>0.1</version>
                    <version>0.2</version>
                    <version>0.3</version>
                    <version>0.4</version>
                                    <fixVersion>0.4</fixVersion>
                                    <component>PHP - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                                                            <comments>
                            <comment id="12895849" author="bryanduxbury" created="Thu, 5 Aug 2010 22:32:38 +0000"  >&lt;p&gt;Any chance you could contribute a test case for this?&lt;/p&gt;</comment>
                            <comment id="12897781" author="bryanduxbury" created="Thu, 12 Aug 2010 14:50:49 +0000"  >&lt;p&gt;I&apos;m not 100% sure that I understand this patch, but I&apos;m pretty sure it has a bug. In directWrite, you&apos;re ignoring the &quot;data&quot; argument and always writing the data from &quot;buffer&quot;. This seems like it would cause an issue regardless of what length is being used.&lt;/p&gt;</comment>
                            <comment id="12897987" author="tkho" created="Thu, 12 Aug 2010 22:48:56 +0000"  >&lt;p&gt;Messed up the first patch. In my test script, I was sending both a 10kb request and response string, and only verified the contents of the response string. Because it was sending data of the right length, the request succeeded.&lt;/p&gt;</comment>
                            <comment id="12897991" author="tkho" created="Thu, 12 Aug 2010 22:55:19 +0000"  >&lt;p&gt;Sorry about that Bryan. Sloppiness on my part. Fixed and updated the patch.&lt;/p&gt;

&lt;p&gt;What kind of format are you looking for regarding test case? I&apos;m not really sure how to write a programatic test for this, but there&apos;s not much to the thrift definition I used to tickle the bug:&lt;/p&gt;

&lt;p&gt;test.thrift:&lt;/p&gt;

&lt;p&gt;struct TestRequest {&lt;br/&gt;
  1: string request,&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;struct TestResponse {&lt;br/&gt;
  1: string response,&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;service TestService {&lt;br/&gt;
  TestResponse get(1: TestRequest request)&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;I used some Facebook-specific libraries for both the PHP client and C++ server. The only salient notes are that I used a buffered transport and the accelerator (TBinaryProtocolAccelerated).&lt;/p&gt;</comment>
                            <comment id="12897999" author="bryanduxbury" created="Thu, 12 Aug 2010 23:22:47 +0000"  >&lt;p&gt;I guess I was sort of imagining there being a transport unit test for the PHP library that you could enhance, but that appears not to be the case.&lt;/p&gt;</comment>
                            <comment id="12904999" author="loretoparisi" created="Wed, 1 Sep 2010 11:34:27 +0000"  >&lt;p&gt;If you look at TSocket Write bug&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-826&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/THRIFT-826&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;it seems to us that this patch while fixing the 8K buffer length, it breaks the TFramedTransport, so that&apos;s the reason of the TSocket read (&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-347&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/THRIFT-347&lt;/a&gt;) and write bug.&lt;/p&gt;

&lt;p&gt;If it is the case, this needs to be re-opened to further investigations.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12451966" name="php_extension_8kbug.patch" size="858" author="tkho" created="Thu, 12 Aug 2010 22:48:56 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12473026">THRIFT-887</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38618</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16c93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245117</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>