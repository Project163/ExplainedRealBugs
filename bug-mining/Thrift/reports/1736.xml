<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:26:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3944] TSSLSocket has dead code in checkHandshake</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3944</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;There is a block of code in checkHandshake that attempts to set read/write memory bios to be nonblocking. This code doesn&apos;t do anything:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/thrift/blob/master/lib/cpp/src/thrift/transport/TSSLSocket.cpp#L441&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/blob/master/lib/cpp/src/thrift/transport/TSSLSocket.cpp#L441&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Here&apos;s what this code looks like, and the problems:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;BIO_new(BIO_s_mem()) creates a new memory BIO. Not sure why.&lt;/li&gt;
	&lt;li&gt;BIO_set_nbio() executes BIO_ctrl(..., BIO_C_SET_NBIO, ...). This errors out and return 0 because mem_ctrl does not have a case for BIO_C_SET_NBIO. See: &lt;a href=&quot;https://github.com/openssl/openssl/blob/6f0ac0e2f27d9240516edb9a23b7863e7ad02898/crypto/bio/bss_mem.c#L226&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/openssl/openssl/blob/6f0ac0e2f27d9240516edb9a23b7863e7ad02898/crypto/bio/bss_mem.c#L226&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;SSL_set_bio() sets the SSL* to use the memory BIOs.&lt;/li&gt;
	&lt;li&gt;SSL_set_fd() creates a socket BIO, sets the FD on it, and uses SSL_set_bio() to replace the memory BIOs.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;As far as I can tell, this block of code does nothing and will not change functionality. If there&apos;s a reason that it&apos;s there, it needs to be re-implemented.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13010217">THRIFT-3944</key>
            <summary>TSSLSocket has dead code in checkHandshake</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tewang">Ted Wang</assignee>
                                    <reporter username="tewang">Ted Wang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Oct 2016 17:29:23 +0000</created>
                <updated>Thu, 14 Dec 2017 13:55:25 +0000</updated>
                            <resolved>Sat, 1 Apr 2017 14:18:47 +0000</resolved>
                                    <version>0.9.3</version>
                                    <fixVersion>0.11.0</fixVersion>
                                    <component>C++ - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15552630" author="githubbot" created="Thu, 6 Oct 2016 17:44:19 +0000"  >&lt;p&gt;GitHub user tpcwang opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1110&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1110&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3944&quot; title=&quot;TSSLSocket has dead code in checkHandshake&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3944&quot;&gt;&lt;del&gt;THRIFT-3944&lt;/del&gt;&lt;/a&gt; TSSLSocket has dead code in checkHandshake&lt;/p&gt;

&lt;p&gt;    See &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3944&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/THRIFT-3944&lt;/a&gt; for why I think this can be safely removed without changing functionality.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tpcwang/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tpcwang/thrift&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3944&quot; title=&quot;TSSLSocket has dead code in checkHandshake&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3944&quot;&gt;&lt;del&gt;THRIFT-3944&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1110.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1110.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1110&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit fe26d8ad37f82a5a8231e8ab3f0b794912b1eb99&lt;br/&gt;
Author: tpcwang &amp;lt;tpc.wang@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-10-06T17:41:44Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3944&quot; title=&quot;TSSLSocket has dead code in checkHandshake&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3944&quot;&gt;&lt;del&gt;THRIFT-3944&lt;/del&gt;&lt;/a&gt; TSSLSocket has dead code in checkHandshake&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15552776" author="nsuke" created="Thu, 6 Oct 2016 18:39:28 +0000"  >&lt;p&gt;The patch looks correct.&lt;/p&gt;

&lt;p&gt;&amp;gt; If there&apos;s a reason that it&apos;s there, it needs to be re-implemented.&lt;/p&gt;

&lt;p&gt;The code comment says that it is setting BIOs to non-blocking.&lt;br/&gt;
Since the socket is set to non-blocking right before this and the BIOs created by SSL_set_fd inherit the socket&apos;s non-blocking behavior, I don&apos;t think there&apos;s something we need to re-implement.&lt;/p&gt;</comment>
                            <comment id="15554170" author="jking3" created="Fri, 7 Oct 2016 05:19:37 +0000"  >&lt;p&gt;Patch looks correct. :+1:&lt;/p&gt;</comment>
                            <comment id="15952241" author="githubbot" created="Sat, 1 Apr 2017 14:18:58 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1110&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1110&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 33 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34j5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>