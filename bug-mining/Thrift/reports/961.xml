<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:13:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-2560] Thrift compiler generator tries to concat ints with strings using +</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-2560</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;As reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2558&quot; title=&quot;CSharp compiler generator tries to concat ints with strings using +&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2558&quot;&gt;&lt;del&gt;THRIFT-2558&lt;/del&gt;&lt;/a&gt;, at several places in the Thrift language code generators an attenpt is made to throw a string by adding a string literal (&quot;&quot;) and an int (t_base_type::t_base) in several places:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;compiler error: no C# name &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; base type &quot;&lt;/span&gt; + tbase-&amp;gt;get_base();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Additionally, at several places a wrong language name in these eror messages is used, probably due to the fact that most code generators are implemented re-using another, similar language&apos;s code generator.&lt;/p&gt;</description>
                <environment>&lt;p&gt;all&lt;/p&gt;</environment>
        <key id="12717573">THRIFT-2560</key>
            <summary>Thrift compiler generator tries to concat ints with strings using +</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jensg">Jens Geyer</assignee>
                                    <reporter username="jensg">Jens Geyer</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 May 2014 16:33:38 +0000</created>
                <updated>Thu, 3 Jul 2014 19:51:22 +0000</updated>
                            <resolved>Sat, 31 May 2014 20:38:59 +0000</resolved>
                                    <version>0.9.1</version>
                                    <fixVersion>0.9.2</fixVersion>
                                    <component>C# - Compiler</component>
                    <component>Compiler (General)</component>
                    <component>Delphi - Compiler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                                                            <comments>
                            <comment id="14013934" author="jensg" created="Fri, 30 May 2014 17:00:26 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=codesf&quot; class=&quot;user-hover&quot; rel=&quot;codesf&quot;&gt;codesf&lt;/a&gt;,&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;same bug appears in delphi and d generators&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You are right with Delphi,m but I couldn&apos;t find any occurrence in the D part. What do I overlook?&lt;/p&gt;</comment>
                            <comment id="14014225" author="codesf" created="Fri, 30 May 2014 21:14:15 +0000"  >&lt;p&gt;Hey Jens,&lt;/p&gt;

&lt;p&gt;Clang says line 743 in t_d_generator.cc.&lt;/p&gt;

&lt;p&gt;-Randy&lt;/p&gt;</comment>
                            <comment id="14014585" author="jensg" created="Sat, 31 May 2014 09:58:53 +0000"  >&lt;blockquote&gt;&lt;p&gt;Clang says line 743 in t_d_generator.cc.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Indeed. Going to include that in my patch.&lt;/p&gt;

&lt;p&gt;What bothers me a litte: Why do neither the other compilers we use nor tools like coverity detect such comparingly simple bugs? Is there any reasonable explanation? Any C++ gurus around who can explain this?&lt;/p&gt;</comment>
                            <comment id="14014588" author="codesf" created="Sat, 31 May 2014 10:05:42 +0000"  >&lt;p&gt;I agree, it should be a warning everywhere. It is legal code though. The string literal is squirreled away in a data segment by the compiler and the address goes in its place. C++ allows you to do address arithmetic so that is what it does when it sees: const char * + int. Since throw will accept anything, no problem throwing an address.&lt;/p&gt;

&lt;p&gt;In my experience Clang has by far the best warnings in the business. Would be great if we could build on Clang as a target.&lt;/p&gt;</comment>
                            <comment id="14014606" author="jensg" created="Sat, 31 May 2014 11:08:45 +0000"  >&lt;blockquote&gt;
&lt;p&gt;The string literal is squirreled away in a data segment by the compiler and the address goes in its place. C++ allows you to do address arithmetic &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Mmmh. In Pascal I can do address arithmetic as well, but even then I would need at least an explicitly written cast. Maybe that&apos;s why Real Programmers&#8482; don&apos;t use Pascal &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. Anyway, thanks for the explanation. BTW, updated my patch. I took the liberty to align your C# changes with the rest of the world. Is that ok?&lt;/p&gt;
</comment>
                            <comment id="14014627" author="codesf" created="Sat, 31 May 2014 11:45:43 +0000"  >&lt;p&gt;I think it was Bjarne Stroustrup who said, &quot;it is easy to shoot yourself in the foot with C, with C++ it is harder but when you do you blow your whole leg off&quot;.&lt;/p&gt;

&lt;p&gt;I have not been aligned with the REST of the world for some time, so please adjust any abomination I have committed!  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14014806" author="jensg" created="Sat, 31 May 2014 20:38:59 +0000"  >&lt;p&gt;What a statement! George Bernard Shaw said it best: &quot;&lt;em&gt;The reasonable man adapts himself to the world: the unreasonable one persists in trying to adapt the world to himself. Therefore all progress depends on the unreasonable man&lt;/em&gt;&quot;.&lt;/p&gt;

&lt;p&gt;Committed.&lt;/p&gt;</comment>
                            <comment id="14014807" author="hudson" created="Sat, 31 May 2014 20:40:09 +0000"  >&lt;p&gt;FAILURE: Integrated in Thrift #1169 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1169/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1169/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-2560&quot; title=&quot;Thrift compiler generator tries to concat ints with strings using +&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-2560&quot;&gt;&lt;del&gt;THRIFT-2560&lt;/del&gt;&lt;/a&gt; Thrift compiler generator tries to concat ints with strings using + (jensg: rev a3350b48eade40903b4cb7986301fafa8297fb16)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;compiler/cpp/src/generate/t_xsd_generator.cc&lt;/li&gt;
	&lt;li&gt;compiler/cpp/src/generate/t_csharp_generator.cc&lt;/li&gt;
	&lt;li&gt;compiler/cpp/src/generate/t_as3_generator.cc&lt;/li&gt;
	&lt;li&gt;compiler/cpp/src/generate/t_d_generator.cc&lt;/li&gt;
	&lt;li&gt;compiler/cpp/src/generate/t_javame_generator.cc&lt;/li&gt;
	&lt;li&gt;compiler/cpp/src/generate/t_delphi_generator.cc&lt;/li&gt;
	&lt;li&gt;compiler/cpp/src/generate/t_ocaml_generator.cc&lt;/li&gt;
	&lt;li&gt;compiler/cpp/src/generate/t_cocoa_generator.cc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="12717524">THRIFT-2558</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12647768" name="THRIFT-2560-Thrift-compiler-generator-tries-to-conca-V2.patch" size="9517" author="jensg" created="Sat, 31 May 2014 11:01:31 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12717524">THRIFT-2558</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>395777</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1w513:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>395895</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>