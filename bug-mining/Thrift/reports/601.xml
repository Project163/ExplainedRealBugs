<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:05:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-1585] C++ library fails to build with OS X pthread implementation</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-1585</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;On OS X, &lt;tt&gt;pthread_t&lt;/tt&gt; is &lt;tt&gt;_opaque_pthread_t*&lt;/tt&gt;, but the current implementation assumes that it is implicitly convertible to &lt;tt&gt;uint64_t&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;This yields to:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;src/thrift/server/TNonblockingServer.cpp: In member function &apos;void apache::thrift::server::TNonblockingIOThread::breakLoop(bool)&apos;:&lt;br/&gt;
src/thrift/server/TNonblockingServer.cpp:1433: error: invalid conversion from &apos;uint64_t&apos; to &apos;_opaque_pthread_t*&apos;&lt;br/&gt;
src/thrift/server/TNonblockingServer.cpp:1433: error:   initializing argument 1 of &apos;static bool apache::thrift::concurrency::Thread::is_current(_opaque_pthread_t*)&apos;&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment>&lt;p&gt;OS X 10.7, i686-apple-darwin11-llvm-gcc-4.2 resp. Apple clang version 3.1&lt;/p&gt;</environment>
        <key id="12552158">THRIFT-1585</key>
            <summary>C++ library fails to build with OS X pthread implementation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klickverbot">David Nadlinger</assignee>
                                    <reporter username="klickverbot">David Nadlinger</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Apr 2012 16:33:58 +0000</created>
                <updated>Fri, 22 Jun 2012 04:20:00 +0000</updated>
                            <resolved>Wed, 23 May 2012 19:17:41 +0000</resolved>
                                    <version>0.9</version>
                                                    <component>C++ - Library</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13281756" author="andrewcox79" created="Wed, 23 May 2012 17:57:08 +0000"  >&lt;p&gt;Can we get this patch committed? The existing code (before the patch) is broken in practice on OS X, and it violates a basic rules:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;it assumes the pthread implementation defines pthread_t as a type that is binary-compatible with uint64_t&lt;/li&gt;
	&lt;li&gt;it makes a different declaration of the interface Thread abstraction interface (specifically Thread::is_current) depending on the threading implementation&lt;/li&gt;
	&lt;li&gt;it exposes an implementation-specific type (pthread_t) on the interface&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13281761" author="andrewcox79" created="Wed, 23 May 2012 18:00:31 +0000"  >&lt;p&gt;BTW, this is the same issue as &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1488&quot; title=&quot;src/concurrency/Thread.h:91:58: error: invalid conversion from &amp;#39;pthread_t {aka _opaque_pthread_t*}&amp;#39; to &amp;#39;apache::thrift::concurrency::Thread::id_t {aka long long unsigned int}&amp;#39; [-fpermissive]&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1488&quot;&gt;&lt;del&gt;THRIFT-1488&lt;/del&gt;&lt;/a&gt; (though I like this patch better).&lt;/p&gt;</comment>
                            <comment id="13281817" author="roger.meier" created="Wed, 23 May 2012 19:17:41 +0000"  >&lt;p&gt;thanks David!&lt;/p&gt;</comment>
                            <comment id="13281838" author="hudson" created="Wed, 23 May 2012 19:48:07 +0000"  >&lt;p&gt;Integrated in Thrift #486 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/486/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/486/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1585&quot; title=&quot;C++ library fails to build with OS X pthread implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1585&quot;&gt;&lt;del&gt;THRIFT-1585&lt;/del&gt;&lt;/a&gt; C++ library fails to build with OS X pthread implementation&lt;br/&gt;
Patch: David Nadlinger (Revision 1341990)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
roger : &lt;a href=&quot;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1341990&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/?view=rev&amp;amp;rev=1341990&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/thrift/trunk/lib/cpp/src/thrift/concurrency/Thread.h&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13281849" author="klickverbot" created="Wed, 23 May 2012 19:58:33 +0000"  >&lt;p&gt;Seems like some of the Python test failed &#8211; spurious error?&lt;/p&gt;</comment>
                            <comment id="13281863" author="roger.meier" created="Wed, 23 May 2012 20:13:59 +0000"  >&lt;p&gt;yes, the python test... we need a fix&lt;/p&gt;

&lt;p&gt;because we run under some circumstances tests on ci in parallel? bloking ports?&lt;/p&gt;

&lt;p&gt;We probably have to define a build order to avoid this.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="12538074">THRIFT-1488</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12523823" name="0001-THRIFT-1585-C-library-fails-to-build-with-OS-X-pthread.patch" size="1583" author="klickverbot" created="Mon, 23 Apr 2012 17:17:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>247151</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i083b3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>45135</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>