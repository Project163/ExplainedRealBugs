<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:13:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-1584] Error: could not SetMinThreads in ThreadPool on single-core machines</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-1584</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;On a linux system with single cpu core, TThreadPoolServer(csharp) might throw an exception like &quot;Error: could not SetMinThreads in ThreadPool&quot;.&lt;/p&gt;

&lt;p&gt;According to SetMinThreads description in MSDN:&lt;br/&gt;
If you specify a negative number or a number larger than the maximum number of active thread pool threads (obtained using GetMaxThreads), SetMinThreads returns false and does not change either of the minimum values.&lt;/p&gt;

&lt;p&gt;The default DEFAULT_MIN_THREADS value is 10, while GetMaxThreads obtains 100 and 4 on a single-cpu computer. This make SetMinThreads function failed.&lt;/p&gt;

&lt;p&gt;The number obtained by GetMaxThreads is associated with the number of cpu core.&lt;br/&gt;
So I suggest to change the order of SetMinThreads and SetMaxThreads, like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!ThreadPool.SetMaxThreads(maxThreadPoolThreads, maxThreadPoolThreads))
		&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Exception(&lt;span class=&quot;code-quote&quot;&gt;&quot;Error: could not SetMaxThreads in ThreadPool&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!ThreadPool.SetMinThreads(minThreadPoolThreads, minThreadPoolThreads))
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Exception(&lt;span class=&quot;code-quote&quot;&gt;&quot;Error: could not SetMinThreads in ThreadPool&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment>&lt;p&gt;Hardware: Single-Core CPU, &lt;br/&gt;
System: CentOS system, &lt;br/&gt;
Coding Language: mono&lt;/p&gt;</environment>
        <key id="12552069">THRIFT-1584</key>
            <summary>Error: could not SetMinThreads in ThreadPool on single-core machines</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jensg">Jens Geyer</assignee>
                                    <reporter username="bulletis">Funny</reporter>
                        <labels>
                    </labels>
                <created>Sun, 22 Apr 2012 23:34:59 +0000</created>
                <updated>Wed, 28 May 2014 22:17:27 +0000</updated>
                            <resolved>Wed, 28 May 2014 20:37:46 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>0.9.2</fixVersion>
                                    <component>C# - Library</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14010933" author="mrvader" created="Wed, 28 May 2014 08:48:41 +0000"  >&lt;p&gt;Today i needed the TThreadPoolServer. I get exactly the same error! My CPU is a dual-core, my OS is Linux Mint 17 and I&apos;m using Mono 4.0.&lt;/p&gt;</comment>
                            <comment id="14011519" author="jensg" created="Wed, 28 May 2014 20:14:09 +0000"  >&lt;p&gt;&amp;gt; So I suggest to change the order of SetMinThreads and SetMaxThreads&lt;/p&gt;

&lt;p&gt;Makes sense. Patch attached.&lt;/p&gt;</comment>
                            <comment id="14011545" author="jensg" created="Wed, 28 May 2014 20:37:46 +0000"  >&lt;p&gt;Committed, thanks for spotting this!&lt;/p&gt;</comment>
                            <comment id="14011700" author="hudson" created="Wed, 28 May 2014 22:17:27 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1159 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1159/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1159/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-1584&quot; title=&quot;Error: could not SetMinThreads in ThreadPool on single-core machines&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-1584&quot;&gt;&lt;del&gt;THRIFT-1584&lt;/del&gt;&lt;/a&gt; could not SetMinThreads in ThreadPool on single-core machines (jensg: rev 4b0fede142950c31ac04460221021ebc2800c0db)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;lib/csharp/src/Server/TThreadPoolServer.cs&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12647202" name="THRIFT-1584_Error_could_not_SetMinThreads_in_ThreadPool.patch" size="1360" author="jensg" created="Wed, 28 May 2014 20:13:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>296927</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14idr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>234441</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>