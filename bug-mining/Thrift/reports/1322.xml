<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:19:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3164] Thrift C++ library SSL socket by default allows for unsecure SSLv3 negotiation</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3164</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;The TSSLSocketFactory allows for both SSLv3 and TLSv1 handshake.  SSLv3 is ancient and has a serious security flaw:&lt;br/&gt;
&lt;a href=&quot;http://disablessl3.com/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://disablessl3.com/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Currently the project uses the following default (in TSSLSocket.h):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  /**
   * Constructor/Destructor
   *
   * @param protocol The SSL/TLS protocol to use.
   */
  TSSLSocketFactory(const SSLProtocol&amp;amp; protocol = SSLTLS);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;also (same file:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;/**
 * Wrap OpenSSL SSL_CTX into a class.
 */
class SSLContext {
public:
  SSLContext(const SSLProtocol&amp;amp; protocol = SSLTLS);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This enumeration maps to:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;enum SSLProtocol {
  SSLTLS = 0, // Supports SSLv3 and TLSv1.
  // SSLv2		= 1,	// HORRIBLY INSECURE!
  SSLv3 = 2,   // Supports SSLv3 only.
  TLSv1_0 = 3, // Supports TLSv1_0 only.
  TLSv1_1 = 4, // Supports TLSv1_1 only.
  TLSv1_2 = 5  // Supports TLSv1_2 only.
};
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Recommend changing the default/minimum in Thrift to TLSv1.  Add a test to prove SSLv3 client cannot connect by default, and that TLSv1_0, _1, and _2 can all connect.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3165&quot; title=&quot;Disable unsafe TLSv1.0 and TLSv1.1 by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3165&quot;&gt;THRIFT-3165&lt;/a&gt; takes the recommendation a step further and suggests the default should be TLS v1.2 or later, and the third party using Thrift can decide if they want to allow less-secure ciphers.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12830907">THRIFT-3164</key>
            <summary>Thrift C++ library SSL socket by default allows for unsecure SSLv3 negotiation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jking3">James E. King III</assignee>
                                    <reporter username="jking3">James E. King III</reporter>
                        <labels>
                            <label>SSL</label>
                            <label>SSLSocketFactory</label>
                            <label>Security</label>
                    </labels>
                <created>Tue, 19 May 2015 04:35:38 +0000</created>
                <updated>Tue, 25 Aug 2015 04:44:53 +0000</updated>
                            <resolved>Thu, 30 Jul 2015 19:59:12 +0000</resolved>
                                    <version>0.8</version>
                    <version>0.9</version>
                    <version>0.9.1</version>
                    <version>0.9.2</version>
                                    <fixVersion>0.9.3</fixVersion>
                                    <component>C++ - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14644648" author="jking3" created="Tue, 28 Jul 2015 17:01:48 +0000"  >&lt;p&gt;I changed SSLProtocol::SSLTLS in the C++ library so that it will handshake with SSLv3 peers but will only negotiate TLSv1_0 or later.  I disabled SSLv3 in much the same way SSLv2 was disabled a while ago.&lt;/p&gt;

&lt;p&gt;I also took the time to put together a matrix unit test called SecurityTest which leverages authentication and encryption and tests every SSLProtocol as client and as server against each-other.&lt;/p&gt;</comment>
                            <comment id="14644717" author="githubbot" created="Tue, 28 Jul 2015 17:35:20 +0000"  >&lt;p&gt;GitHub user jeking3 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/569&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/569&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3164&quot; title=&quot;Thrift C++ library SSL socket by default allows for unsecure SSLv3 negotiation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3164&quot;&gt;&lt;del&gt;THRIFT-3164&lt;/del&gt;&lt;/a&gt;: disable insecure SSLv3 protocol in cpp lib unless asked for&lt;/p&gt;

&lt;p&gt;    unless SSLv3 is specifically asked for this will make the default more secure; added a matrix security unit test for SSL in the cpp lib&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jeking3/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jeking3/thrift&lt;/a&gt; bugfix/&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3164&quot; title=&quot;Thrift C++ library SSL socket by default allows for unsecure SSLv3 negotiation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3164&quot;&gt;&lt;del&gt;THRIFT-3164&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/569.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/569.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #569&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 7154ea86dfe2d0184fff47611d2ff7dcbee6684c&lt;br/&gt;
Author: Jim King &amp;lt;jim.king@simplivity.com&amp;gt;&lt;br/&gt;
Date:   2015-07-28T17:31:27Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3164&quot; title=&quot;Thrift C++ library SSL socket by default allows for unsecure SSLv3 negotiation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3164&quot;&gt;&lt;del&gt;THRIFT-3164&lt;/del&gt;&lt;/a&gt;: disable insecure SSLv3 protocol in cpp lib unless SSLv3 is specifically asked for to make the defaults more secure; added a matrix security unit test for SSL in the cpp lib&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14647820" author="jking3" created="Thu, 30 Jul 2015 15:35:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=roger.meier&quot; class=&quot;user-hover&quot; rel=&quot;roger.meier&quot;&gt;roger.meier&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jensg&quot; class=&quot;user-hover&quot; rel=&quot;jensg&quot;&gt;jensg&lt;/a&gt;, the Travis CI job has passed with the exception of one job which looks like a Travis environmental issue (a system ran out of memory).  This has been happening randomly in builds and not related to the changes.  I would like to get this merged into 0.9.3 because it includes a good unit test for TSSLSocket and TSSLServerSocket interoperability.  The unit test has run in a loop over 10,000 times on my system.  The change disables SSLv3 because it is horribly insecure but allows clients to handshake with SSLv3, but they will have to negotiate TLSv1_0 or later unless the implementer specifically asks for a SSLv3 protocol server.&lt;/p&gt;</comment>
                            <comment id="14648208" author="roger.meier" created="Thu, 30 Jul 2015 19:59:12 +0000"  >&lt;p&gt;Thanks Jim!&lt;/p&gt;</comment>
                            <comment id="14648224" author="githubbot" created="Thu, 30 Jul 2015 20:07:55 +0000"  >&lt;p&gt;Github user jeking3 commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/569#issuecomment-126465603&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/569#issuecomment-126465603&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Merged, closing.&lt;/p&gt;</comment>
                            <comment id="14648225" author="githubbot" created="Thu, 30 Jul 2015 20:07:56 +0000"  >&lt;p&gt;Github user jeking3 closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/569&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/569&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14648270" author="hudson" created="Thu, 30 Jul 2015 20:29:43 +0000"  >&lt;p&gt;SUCCESS: Integrated in Thrift #1633 (See &lt;a href=&quot;https://builds.apache.org/job/Thrift/1633/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Thrift/1633/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3164&quot; title=&quot;Thrift C++ library SSL socket by default allows for unsecure SSLv3 negotiation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3164&quot;&gt;&lt;del&gt;THRIFT-3164&lt;/del&gt;&lt;/a&gt;: disable insecure SSLv3 protocol in cpp lib unless SSLv3 is specifically asked for to make the defaults more secure; added a matrix security unit test for SSL in the cpp lib (roger: rev b0b710a426fedb48ff5d0643ba64e339ee7efa31)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;configure.ac&lt;/li&gt;
	&lt;li&gt;lib/cpp/test/SecurityTest.cpp&lt;/li&gt;
	&lt;li&gt;lib/cpp/test/Makefile.am&lt;/li&gt;
	&lt;li&gt;lib/cpp/src/thrift/transport/TSSLSocket.cpp&lt;/li&gt;
	&lt;li&gt;lib/cpp/test/CMakeLists.txt&lt;/li&gt;
	&lt;li&gt;.gitignore&lt;/li&gt;
	&lt;li&gt;lib/cpp/src/thrift/transport/TSSLSocket.h&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12831133">THRIFT-3165</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12405434">THRIFT-151</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 16 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ewq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>