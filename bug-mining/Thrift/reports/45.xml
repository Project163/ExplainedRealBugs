<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:53:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-168] Buffered transports leave data in write buffer on failed flush</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-168</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;When TBuffered/TFramedTransport&apos;s underlying transport fails during a flush(), the transport enters an irrecoverable state with unflushed data in its write buffer.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12406429">THRIFT-168</key>
            <summary>Buffered transports leave data in write buffer on failed flush</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="erikfrey">Erik Frey</assignee>
                                    <reporter username="erikfrey">Erik Frey</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Oct 2008 19:13:07 +0000</created>
                <updated>Tue, 1 Nov 2011 02:54:02 +0000</updated>
                            <resolved>Wed, 29 Oct 2008 22:52:15 +0000</resolved>
                                                                    <component>C++ - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12639545" author="erikfrey" created="Tue, 14 Oct 2008 19:13:55 +0000"  >&lt;p&gt;Patch fixes problem for cpp lib.&lt;/p&gt;</comment>
                            <comment id="12639556" author="mcslee" created="Tue, 14 Oct 2008 19:33:01 +0000"  >&lt;p&gt;I don&apos;t think this line is fair game:&lt;/p&gt;

&lt;p&gt;+    // Reset our pointers with a pad, so we can insert the size later&lt;br/&gt;
+    wBase_ = wBuf_.get() + sizeof(sz_nbo);&lt;br/&gt;
+&lt;/p&gt;

&lt;p&gt;There&apos;s no strict guaranteed that wBuf_ is allocated. The former implementation used the write() method to write in the 0 size byte, which would grow the buffer if theoretically necessary.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;// Reset our pointers.&lt;/li&gt;
	&lt;li&gt;wBase_ = wBuf_.get();&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;// Pad the buffer so we can insert the size later.&lt;/li&gt;
	&lt;li&gt;uint32_t pad = 0;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;
			&lt;ul&gt;
				&lt;li&gt;
				&lt;ul&gt;
					&lt;li&gt;-  this-&amp;gt;write((uint8_t*)&amp;amp;pad, sizeof(pad)); *******&lt;/li&gt;
				&lt;/ul&gt;
				&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This would advance the wBase_ pointer properly.&lt;/p&gt;</comment>
                            <comment id="12639571" author="erikfrey" created="Tue, 14 Oct 2008 19:55:36 +0000"  >&lt;p&gt;The conditional above:&lt;/p&gt;

&lt;p&gt;sz_hbo = wBase_ - (wBuf_.get() + sizeof(sz_nbo));&lt;/p&gt;

&lt;p&gt;if (sz_hbo &amp;gt; 0) {&lt;/p&gt;

&lt;p&gt;ensures that wBuf_ is allocated, and that its length is at least sizeof(sz_nbo)&lt;/p&gt;</comment>
                            <comment id="12639625" author="dreiss" created="Tue, 14 Oct 2008 22:20:20 +0000"  >&lt;p&gt;This should be fine, but we should add an explanatory comment.&lt;/p&gt;</comment>
                            <comment id="12640286" author="erikfrey" created="Thu, 16 Oct 2008 19:37:37 +0000"  >&lt;p&gt;Comments added like in the php source.&lt;/p&gt;</comment>
                            <comment id="12643081" author="erikfrey" created="Mon, 27 Oct 2008 22:32:46 +0000"  >&lt;p&gt;Anything else needed for this to be commited to trunk?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12392276" name="buffered_flush_fix_cpp.patch" size="1455" author="erikfrey" created="Thu, 16 Oct 2008 19:37:37 +0000"/>
                            <attachment id="12392124" name="buffered_flush_fix_cpp.patch" size="1127" author="erikfrey" created="Tue, 14 Oct 2008 19:13:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>186406</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16a7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244785</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>