<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:25:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-3957] TConnectedClient does not disconnect from clients when their timeout is reached.</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-3957</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;When starting the TestServer with the first appended patch:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;bin/TestServer --protocol=json --transport=http --server-type=thread-pool --port=9080
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And connecting to it with this shell command:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;wget --post-data=&lt;span class=&quot;code-quote&quot;&gt;&apos;[&apos;&lt;/span&gt; http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:9080&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The connection stays up for a long time. Making DOS attacks very easy, because at some point the server runs out of available client connections.&lt;/p&gt;

&lt;p&gt;The second appended patch fixes the issue in TConnectedClient.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13017654">THRIFT-3957</key>
            <summary>TConnectedClient does not disconnect from clients when their timeout is reached.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jking3">James E. King III</assignee>
                                    <reporter username="cmhe">Claudius Heine</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Nov 2016 14:26:38 +0000</created>
                <updated>Mon, 12 Dec 2016 18:02:35 +0000</updated>
                            <resolved>Thu, 10 Nov 2016 21:03:25 +0000</resolved>
                                    <version>0.9.3</version>
                    <version>0.10.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>C++ - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15632895" author="cmhe" created="Thu, 3 Nov 2016 14:35:07 +0000"  >&lt;p&gt;0001-cpp-TestServer-removed-while-loop-and-added-connecti.patch: changes the TestServer to demonstrate the problem&lt;br/&gt;
0002-cpp-server-TConnectedClient-Timeouts-are-disconnecti.patch: fixes the problem&lt;/p&gt;</comment>
                            <comment id="15633916" author="githubbot" created="Thu, 3 Nov 2016 19:19:48 +0000"  >&lt;p&gt;GitHub user jeking3 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1122&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1122&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3957&quot; title=&quot;TConnectedClient does not disconnect from clients when their timeout is reached.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3957&quot;&gt;&lt;del&gt;THRIFT-3957&lt;/del&gt;&lt;/a&gt;: TConnectedClient does not disconnect from clients when their timeout is reached&lt;/p&gt;

&lt;p&gt;    Fix per patches posted to Thrift Jira&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jeking3/thrift&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jeking3/thrift&lt;/a&gt; defect/&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3957&quot; title=&quot;TConnectedClient does not disconnect from clients when their timeout is reached.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;THRIFT-3957&quot;&gt;&lt;del&gt;THRIFT-3957&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1122.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1122.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1122&lt;/p&gt;

&lt;hr /&gt;

&lt;hr /&gt;</comment>
                            <comment id="15633925" author="jking3" created="Thu, 3 Nov 2016 19:21:58 +0000"  >&lt;p&gt;Patch 0001 uses C++11 which will not work.  Did you intend for this to be checked in or is it just to demonstrate the issue?&lt;/p&gt;</comment>
                            <comment id="15634023" author="cmhe" created="Thu, 3 Nov 2016 19:52:02 +0000"  >&lt;p&gt;Patch 0001 is just for demonstration.&lt;/p&gt;</comment>
                            <comment id="15634173" author="jking3" created="Thu, 3 Nov 2016 20:37:25 +0000"  >&lt;p&gt;Okay, I fixed up the pull request that&apos;s outstanding.  Sadly, the documentation on TSocket.h isn&apos;t very descriptive about setting the timeout and the implications of such.  I&apos;ve seen looping code in TSocket that revolves around TIMED_OUT however my guess is that it existed in the past to attempt to give the socket thread(s) a chance to unblock from a poll, select, or recv call and check to see if the server has been stopped.  That&apos;s no longer needed since 0.9.3 because of the interruptable socket implementation, so this change works for me.  The code that was in TConnectedClient was pulled from the three different server implementations and I believe all of them used to ignore TIMED_OUT so this could cause a behavioral difference in future versions that folks may not expect, however it is &quot;more correct&quot;.&lt;/p&gt;</comment>
                            <comment id="15635065" author="githubbot" created="Fri, 4 Nov 2016 03:11:59 +0000"  >&lt;p&gt;Github user jeking3 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1122&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1122&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks like a build system issue:&lt;/p&gt;

&lt;p&gt;    &amp;gt; Downloading unordered-containers-0.2.7.1...&lt;br/&gt;
    &amp;gt; Failed to install network-uri-2.6.1.0&lt;br/&gt;
    &amp;gt; Build log ( /root/.cabal/logs/network-uri-2.6.1.0.log ):&lt;br/&gt;
    &amp;gt; cabal: /root/.cabal/logs/network-uri-2.6.1.0.log: does not exist&lt;br/&gt;
    &amp;gt; Makefile:613: recipe for target &apos;all-local&apos; failed&lt;br/&gt;
    &amp;gt; make&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;: *** &lt;span class=&quot;error&quot;&gt;&amp;#91;all-local&amp;#93;&lt;/span&gt; Error 1&lt;br/&gt;
    &amp;gt; make&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;: Leaving directory &apos;/thrift/src/lib/hs&apos;&lt;br/&gt;
    &amp;gt; Makefile:552: recipe for target &apos;all-recursive&apos; failed&lt;br/&gt;
    &amp;gt; make&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;: *** &lt;span class=&quot;error&quot;&gt;&amp;#91;all-recursive&amp;#93;&lt;/span&gt; Error 1&lt;br/&gt;
    &amp;gt; make&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;: Leaving directory &apos;/thrift/src/lib&apos;&lt;br/&gt;
    &amp;gt; Makefile:635: recipe for target &apos;all-recursive&apos; failed&lt;br/&gt;
    &amp;gt; make&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;: *** &lt;span class=&quot;error&quot;&gt;&amp;#91;all-recursive&amp;#93;&lt;/span&gt; Error 1&lt;br/&gt;
    &amp;gt; make&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;: Leaving directory &apos;/thrift/src&apos;&lt;br/&gt;
    &amp;gt; Makefile:548: recipe for target &apos;all&apos; failed&lt;br/&gt;
    &amp;gt; make: *** &lt;span class=&quot;error&quot;&gt;&amp;#91;all&amp;#93;&lt;/span&gt; Error 2&lt;br/&gt;
    &amp;gt; The command &quot;docker run --net=host -e BUILD_LIBS=&quot;$BUILD_LIBS&quot; $BUILD_ENV -v $(pwd):/thrift/src -it thrift-build:$DISTRO build/docker/scripts/$SCRIPT $BUILD_ARG&quot; exited with 2.&lt;/p&gt;

&lt;p&gt;    Any way to kick another one, or can I merge?&lt;/p&gt;</comment>
                            <comment id="15654986" author="roger.meier" created="Thu, 10 Nov 2016 20:02:27 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15655134" author="githubbot" created="Thu, 10 Nov 2016 21:02:00 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/thrift/pull/1122&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/thrift/pull/1122&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12836822" name="0001-cpp-TestServer-removed-while-loop-and-added-connecti.patch" size="2568" author="cmhe" created="Thu, 3 Nov 2016 14:35:07 +0000"/>
                            <attachment id="12836821" name="0002-cpp-server-TConnectedClient-Timeouts-are-disconnecti.patch" size="1300" author="cmhe" created="Thu, 3 Nov 2016 14:35:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35svr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>