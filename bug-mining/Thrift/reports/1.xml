<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:52:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[THRIFT-11] TThreadPoolServer won&apos;t shut down gracefully</title>
                <link>https://issues.apache.org/jira/browse/THRIFT-11</link>
                <project id="12310800" key="THRIFT">Thrift</project>
                    <description>&lt;p&gt;The way I&apos;m reading TThreadPoolServer.java, it looks like the stop() method&apos;s intent is to let the server shut down gracefully. However, because of the way that the WorkerProcess work loop is structured, if the clients are consistently making requests, the requests will keep getting served until the ThreadPoolExecutor&apos;s shutdown timeout expires, at which point the client threads will be forcibly aborted. This is because the innermost while loop around processor.process does not check the server&apos;s shutdown_ flag.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12396222">THRIFT-11</key>
            <summary>TThreadPoolServer won&apos;t shut down gracefully</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bryanduxbury">Bryan Duxbury</assignee>
                                    <reporter username="bryanduxbury">Bryan Duxbury</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 May 2008 20:33:56 +0000</created>
                <updated>Tue, 1 Nov 2011 02:52:18 +0000</updated>
                            <resolved>Sat, 31 May 2008 02:50:13 +0000</resolved>
                                                                    <component>Java - Library</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12597617" author="bryanduxbury" created="Fri, 16 May 2008 21:20:59 +0000"  >&lt;p&gt;Here&apos;s a patch that should fix this problem. &lt;/p&gt;</comment>
                            <comment id="12597623" author="bryanduxbury" created="Fri, 16 May 2008 21:34:16 +0000"  >&lt;p&gt;Here&apos;s a slightly better version. The stopped_ variable is changed from a boolean to an AtomicBoolean.&lt;/p&gt;</comment>
                            <comment id="12597630" author="jstuyts" created="Fri, 16 May 2008 21:48:49 +0000"  >&lt;p&gt;IMHO your first patch was fine. &lt;tt&gt;AtomicBoolean&lt;/tt&gt; is nothing more than an object wrapper around a volatile &lt;tt&gt;int&lt;/tt&gt;. So basically it is the same as using a volatile &lt;tt&gt;boolean&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Using &lt;tt&gt;AtomicBoolean&lt;/tt&gt; also creates a dependency on Java 1.6 which might not be desirable.&lt;/p&gt;

&lt;p&gt;I do not know why &lt;tt&gt;AtomicBoolean&lt;/tt&gt; was introduced in 1.6, but by looking at the code I think it allows you to atomically get and set, and compare and set a boolean (without using synchronization?). Both these functions are not used by your second patch.&lt;/p&gt;</comment>
                            <comment id="12597632" author="bryanduxbury" created="Fri, 16 May 2008 21:58:56 +0000"  >&lt;p&gt;I don&apos;t object to using the first patch, then. &lt;/p&gt;

&lt;p&gt;Otherwise, does this look like something that should be committed to TRUNK?&lt;/p&gt;</comment>
                            <comment id="12600665" author="dreiss" created="Thu, 29 May 2008 02:29:45 +0000"  >&lt;p&gt;This is definitely something that belongs in the trunk.  What do you think of this version that also keeps (approximate) track of the elapsed time so that we don&apos;t block forever if we keep getting interrupted.&lt;/p&gt;</comment>
                            <comment id="12600820" author="bryanduxbury" created="Thu, 29 May 2008 16:20:56 +0000"  >&lt;p&gt;Makes sense.&lt;/p&gt;</comment>
                            <comment id="12601332" author="dreiss" created="Sat, 31 May 2008 02:50:13 +0000"  >&lt;p&gt;Committed patch v3.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12382221" name="graceful_shutdown-v2.patch" size="3306" author="bryanduxbury" created="Fri, 16 May 2008 21:34:16 +0000"/>
                            <attachment id="12382991" name="graceful_shutdown-v3.patch" size="2268" author="dreiss" created="Thu, 29 May 2008 02:29:45 +0000"/>
                            <attachment id="12382219" name="graceful_shutdown.patch" size="1820" author="bryanduxbury" created="Fri, 16 May 2008 21:20:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>186270</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16b3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244929</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>