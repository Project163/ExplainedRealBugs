diff --git a/build/docker/scripts/make-dist.sh b/build/docker/scripts/make-dist.sh
index c72813098..5a3681e18 100755
--- a/build/docker/scripts/make-dist.sh
+++ b/build/docker/scripts/make-dist.sh
@@ -4,3 +4,6 @@ set -ev
 ./bootstrap.sh
 ./configure $*
 make dist
+tar xvf thrift-*.tar.gz
+cd thrift-*
+./build/docker/scripts/cmake.sh
diff --git a/compiler/cpp/Makefile.am b/compiler/cpp/Makefile.am
index caf9424a6..a2393916d 100644
--- a/compiler/cpp/Makefile.am
+++ b/compiler/cpp/Makefile.am
@@ -191,6 +191,7 @@ EXTRA_DIST = \
              coding_standards.md \
              README.md \
              CMakeLists.txt \
+             test \
              $(WINDOWS_DIST)
 
 clean-local:
