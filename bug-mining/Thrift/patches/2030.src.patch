diff --git a/lib/nodejs/lib/thrift/ws_transport.js b/lib/nodejs/lib/thrift/ws_transport.js
index 3513b84be..4cf62b9f9 100644
--- a/lib/nodejs/lib/thrift/ws_transport.js
+++ b/lib/nodejs/lib/thrift/ws_transport.js
@@ -83,8 +83,8 @@ TWebSocketTransport.prototype.__onOpen = function() {
       //If the user made calls before the connection was fully
       //open, send them now
       this.send_pending.forEach(function(elem) {
-         this.socket.send(elem.buf);
-         this.callbacks.push((function() {
+         self.socket.send(elem.buf);
+         self.callbacks.push((function() {
            var clientCallback = elem.cb;
            return function(msg) {
               self.setRecvBuffer(msg);
