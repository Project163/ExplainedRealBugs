diff --git a/lib/java/src/org/apache/thrift/server/THsHaServer.java b/lib/java/src/org/apache/thrift/server/THsHaServer.java
index 8bf096ed6..47600f51a 100644
--- a/lib/java/src/org/apache/thrift/server/THsHaServer.java
+++ b/lib/java/src/org/apache/thrift/server/THsHaServer.java
@@ -112,8 +112,11 @@ public class THsHaServer extends TNonblockingServer {
                       TNonblockingServerTransport serverTransport,
                       TProtocolFactory protocolFactory,
                       Options options) {
-    this(processor, serverTransport, new TFramedTransport.Factory(),
-      protocolFactory);
+    this(new TProcessorFactory(processor), serverTransport, 
+      new TFramedTransport.Factory(),
+      new TFramedTransport.Factory(),
+      protocolFactory, protocolFactory, 
+      options);
   }
 
   /**
