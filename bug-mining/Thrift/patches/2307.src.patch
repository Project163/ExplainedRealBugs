diff --git a/lib/py/src/ext/module.cpp b/lib/py/src/ext/module.cpp
index f14ddaeb6..fbee51d16 100644
--- a/lib/py/src/ext/module.cpp
+++ b/lib/py/src/ext/module.cpp
@@ -17,6 +17,7 @@
  * under the License.
  */
 
+#define PY_SSIZE_T_CLEAN
 #include <Python.h>
 #include "types.h"
 #include "binary.h"
diff --git a/lib/py/src/ext/types.cpp b/lib/py/src/ext/types.cpp
index e8d6939b1..0c20e5622 100644
--- a/lib/py/src/ext/types.cpp
+++ b/lib/py/src/ext/types.cpp
@@ -17,6 +17,7 @@
  * under the License.
  */
 
+#define PY_SSIZE_T_CLEAN
 #include "ext/types.h"
 #include "ext/protocol.h"
 
