diff --git a/lib/cpp/src/thrift/server/TNonblockingServer.cpp b/lib/cpp/src/thrift/server/TNonblockingServer.cpp
index c556d96a2..1b77a7594 100644
--- a/lib/cpp/src/thrift/server/TNonblockingServer.cpp
+++ b/lib/cpp/src/thrift/server/TNonblockingServer.cpp
@@ -1195,7 +1195,7 @@ void TNonblockingServer::registerEvents(event_base* user_event_base) {
   userEventBase_ = user_event_base;
 
   // init listen socket
-  if (serverSocket_ < 0)
+  if (serverSocket_ == THRIFT_INVALID_SOCKET)
     createAndListenOnSocket();
 
   // set up the IO threads
