diff --git a/.gitignore b/.gitignore
index f4a4b6577..e9fb81cd8 100644
--- a/.gitignore
+++ b/.gitignore
@@ -196,6 +196,7 @@ test-driver
 /lib/php/src/packages/
 /lib/php/test/phpunit.xml
 /lib/php/test/packages/
+/lib/py/dist/
 /lib/erl/logs/
 /libtool
 /ltmain.sh
diff --git a/aclocal/ac_prog_bison.m4 b/aclocal/ac_prog_bison.m4
index 1e2d200c7..c74b4f18b 100644
--- a/aclocal/ac_prog_bison.m4
+++ b/aclocal/ac_prog_bison.m4
@@ -1,6 +1,6 @@
 dnl
 dnl Check Bison version
-dnl AC_PROG_BISON([MIN_VERSION=2.6])
+dnl AC_PROG_BISON([MIN_VERSION=2.4])
 dnl
 dnl Will define BISON_USE_PARSER_H_EXTENSION if Automake is < 1.11
 dnl for use with .h includes.
@@ -8,7 +8,7 @@ dnl
 
 AC_DEFUN([AC_PROG_BISON], [
 if test "x$1" = "x" ; then
-  bison_required_version="2.6"
+  bison_required_version="2.4"
 else
   bison_required_version="$1"
 fi
@@ -27,7 +27,7 @@ if test "$have_prog_bison" = "yes" ; then
   if test "$bison_version" \< "$bison_required_version" ; then
     BISON=:
     AC_MSG_RESULT([no])
-    AC_MSG_ERROR([Bison version 2.6 or higher must be installed on the system!])
+    AC_MSG_ERROR([Bison version 2.4 or higher must be installed on the system!])
   else
     AC_MSG_RESULT([yes])
     BISON=bison
diff --git a/configure.ac b/configure.ac
index 49d704eb4..065ac68c8 100755
--- a/configure.ac
+++ b/configure.ac
@@ -265,10 +265,12 @@ AM_CONDITIONAL(WITH_PHP, [test "$have_php" = "yes"])
 
 AX_THRIFT_LIB(php_extension, [PHP_EXTENSION], yes)
 if test "$with_php_extension" = "yes"; then
-  AC_PATH_PROG([PHP_CONFIG], [php-config])
-  if test -n "$PHP_CONFIG" ; then
-    AC_CONFIG_SUBDIRS([lib/php/src/ext/thrift_protocol])
-    have_php_extension="yes"
+  if test -f "lib/php/src/ext/thrift_protocol/configure"; then
+    AC_PATH_PROG([PHP_CONFIG], [php-config])
+    if test -n "$PHP_CONFIG" ; then
+      AC_CONFIG_SUBDIRS([lib/php/src/ext/thrift_protocol])
+      have_php_extension="yes"
+    fi
   fi
 fi
 AM_CONDITIONAL(WITH_PHP_EXTENSION, [test "$have_php_extension" = "yes"])
diff --git a/contrib/Vagrantfile b/contrib/Vagrantfile
index a63858715..5eec59f94 100644
--- a/contrib/Vagrantfile
+++ b/contrib/Vagrantfile
@@ -67,6 +67,7 @@ sudo apt-get -y install -qq golang golang-go
 
 # Haskell dependencies
 sudo apt-get install -qq ghc cabal-install libghc-binary-dev libghc-network-dev libghc-http-dev libghc-hashable-dev libghc-unordered-containers-dev libghc-vector-dev
+sudo cabal update
 
 # Lua dependencies
 sudo apt-get install -qq lua5.2 lua5.2-dev
diff --git a/lib/php/Makefile.am b/lib/php/Makefile.am
index c7fbad322..d1a560a28 100755
--- a/lib/php/Makefile.am
+++ b/lib/php/Makefile.am
@@ -22,11 +22,10 @@ if WITH_TESTS
 SUBDIRS = test
 endif
 
+if WITH_PHP_EXTENSION
 %.so:
-	cd src/ext/thrift_protocol/ \
-	  && $(MAKE)
+	cd src/ext/thrift_protocol/ && $(MAKE)
 
-if WITH_PHP_EXTENSION
 phpconfdir=$(PHP_CONFIG_PREFIX)
 phpconf_DATA=thrift_protocol.ini
 
