diff --git a/lib/d/src/thrift/transport/websocket.d b/lib/d/src/thrift/transport/websocket.d
index 25d1f7d01..b800e519e 100644
--- a/lib/d/src/thrift/transport/websocket.d
+++ b/lib/d/src/thrift/transport/websocket.d
@@ -121,7 +121,7 @@ protected:
       upgrade_ = sicmp(upgrade, "websocket") == 0;
     } else if (startsWith!compToLower(split[0], cast(ubyte[])"connection")) {
       auto connection = stripLeft(cast(const(char)[])split[2]);
-      connection_ = sicmp(connection, "upgrade") == 0;
+      connection_ = canFind(connection.toLower, "upgrade");
     } else if (startsWith!compToLower(split[0], cast(ubyte[])"sec-websocket-key")) {
       auto secWebSocketKey = stripLeft(cast(const(char)[])split[2]);
       auto hash = sha1Of(secWebSocketKey ~ WEBSOCKET_GUID);
