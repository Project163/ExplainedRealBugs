diff --git a/compiler/cpp/src/generate/t_java_generator.cc b/compiler/cpp/src/generate/t_java_generator.cc
old mode 100644
new mode 100755
index 6ef383886..945d6ef03
--- a/compiler/cpp/src/generate/t_java_generator.cc
+++ b/compiler/cpp/src/generate/t_java_generator.cc
@@ -355,6 +355,7 @@ string t_java_generator::java_type_imports() {
     "import org.apache.thrift.protocol.TTupleProtocol;\n" +
     "import org.apache.thrift.protocol.TProtocolException;\n" +
     "import org.apache.thrift.EncodingUtils;\n" +
+    "import org.apache.thrift.TException;\n" +
     "import java.util.List;\n" +
     "import java.util.ArrayList;\n" +
     "import java.util.Map;\n" +
@@ -1242,7 +1243,7 @@ void t_java_generator::generate_java_struct_definition(ofstream &out,
     (in_class ? "static " : "") << "class " << tstruct->get_name() << " ";
 
   if (is_exception) {
-    out << "extends Exception ";
+    out << "extends TException ";
   }
   out << "implements org.apache.thrift.TBase<" << tstruct->get_name() << ", " << tstruct->get_name() << "._Fields>, java.io.Serializable, Cloneable";
 
diff --git a/lib/java/test/org/apache/thrift/server/TestNonblockingServer.java b/lib/java/test/org/apache/thrift/server/TestNonblockingServer.java
old mode 100644
new mode 100755
index b23cd5cf4..783769563
--- a/lib/java/test/org/apache/thrift/server/TestNonblockingServer.java
+++ b/lib/java/test/org/apache/thrift/server/TestNonblockingServer.java
@@ -36,7 +36,7 @@ public class TestNonblockingServer extends ServerTestBase {
 
   private Thread serverThread;
   private TServer server;
-  private static final int NUM_QUERIES = 10000;
+  private static final int NUM_QUERIES = 1000;
 
   protected TServer getServer(TProcessor processor, TNonblockingServerSocket socket, TProtocolFactory protoFactory, TTransportFactory factory) {
     final Args args = new Args(socket).processor(processor).protocolFactory(protoFactory);
