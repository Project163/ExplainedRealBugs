diff --git a/lib/cpp/src/thrift/transport/TPipeServer.cpp b/lib/cpp/src/thrift/transport/TPipeServer.cpp
index 3779d7fa4..44295f1c6 100644
--- a/lib/cpp/src/thrift/transport/TPipeServer.cpp
+++ b/lib/cpp/src/thrift/transport/TPipeServer.cpp
@@ -119,7 +119,10 @@ public:
     }
   }
 
-  virtual void close() { Pipe_.reset(); }
+  virtual void close() { 
+    TAutoCrit lock(pipe_protect_);
+    Pipe_.reset(); 
+  }
 
   virtual boost::shared_ptr<TTransport> acceptImpl();
 
