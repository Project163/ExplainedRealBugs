diff --git a/test/go/Makefile.am b/test/go/Makefile.am
index 6da83394b..3cf6a70ee 100644
--- a/test/go/Makefile.am
+++ b/test/go/Makefile.am
@@ -58,8 +58,7 @@ check: gopath genmock
 	GOPATH=`pwd` $(GO) test -v common/...
 
 genmock: gopath
-	GOPATH=`pwd` $(GO) install github.com/golang/mock/mockgen
-	GOPATH=`pwd` bin/mockgen -destination=src/common/mock_handler.go -package=common gen/thrifttest ThriftTest
+	sh genmock.sh
 
 EXTRA_DIST = \
 	src/bin \
diff --git a/test/go/genmock.sh b/test/go/genmock.sh
new file mode 100644
index 000000000..3ba41b9ed
--- /dev/null
+++ b/test/go/genmock.sh
@@ -0,0 +1,15 @@
+#!/bin/sh
+set -e
+
+export GOPATH=`pwd`
+export GOBIN=`pwd`/bin
+export GO111MODULE=off
+
+mkdir -p src/github.com/golang/mock
+cd src/github.com/golang
+curl -fsSL https://github.com/golang/mock/archive/v1.2.0.tar.gz -o mock.tar.gz
+tar -xzvf mock.tar.gz -C mock --strip-components=1
+cd mock/mockgen
+go install .
+cd ../../../../../
+bin/mockgen -destination=src/common/mock_handler.go -package=common gen/thrifttest ThriftTest
