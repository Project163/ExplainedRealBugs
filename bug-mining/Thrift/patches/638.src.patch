diff --git a/lib/cpp/src/thrift/transport/TServerSocket.h b/lib/cpp/src/thrift/transport/TServerSocket.h
index fb93eb4da..2ee759316 100644
--- a/lib/cpp/src/thrift/transport/TServerSocket.h
+++ b/lib/cpp/src/thrift/transport/TServerSocket.h
@@ -22,7 +22,7 @@
 
 #include "TServerTransport.h"
 #include <boost/shared_ptr.hpp>
-#ifdef __linux__
+#ifndef _WIN32
    typedef int SOCKET;
 #endif
 
diff --git a/lib/cpp/src/thrift/transport/TSocket.h b/lib/cpp/src/thrift/transport/TSocket.h
index 4f091c485..ecf6d79cc 100644
--- a/lib/cpp/src/thrift/transport/TSocket.h
+++ b/lib/cpp/src/thrift/transport/TSocket.h
@@ -32,7 +32,7 @@
 #ifdef HAVE_NETDB_H
 #include <netdb.h>
 #endif
-#ifdef __linux__
+#ifndef _WIN32
    typedef int SOCKET;
 #endif
 
