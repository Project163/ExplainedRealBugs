diff --git a/lib/rb/lib/thrift/transport/socket.rb b/lib/rb/lib/thrift/transport/socket.rb
index 8f58352ef..219fbf97a 100644
--- a/lib/rb/lib/thrift/transport/socket.rb
+++ b/lib/rb/lib/thrift/transport/socket.rb
@@ -23,9 +23,23 @@ module Thrift
 
     def open
       begin
-        @handle = TCPSocket.new(@host, @port)
-      rescue StandardError
-        raise TransportException.new(TransportException::NOT_OPEN, "Could not connect to #{@desc}")
+        addrinfo = ::Socket::getaddrinfo(@host, @port).first
+        @handle = ::Socket.new(addrinfo[4], ::Socket::SOCK_STREAM, 0)
+        sockaddr = ::Socket.sockaddr_in(addrinfo[1], addrinfo[3])
+        begin
+          @handle.connect_nonblock(sockaddr)
+        rescue Errno::EINPROGRESS
+          unless IO.select(nil, [ @handle ], nil, @timeout)
+            raise TransportException.new(TransportException::NOT_OPEN, "Connection timeout to #{@desc}")
+          end
+          begin
+            @handle.connect_nonblock(sockaddr)
+          rescue Errno::EISCONN
+          end
+        end
+        @handle
+      rescue StandardError => e
+        raise TransportException.new(TransportException::NOT_OPEN, "Could not connect to #{@desc}: #{e}")
       end
     end
 
diff --git a/lib/rb/spec/socket_spec.rb b/lib/rb/spec/socket_spec.rb
index c5866ee74..cd2fed4ca 100644
--- a/lib/rb/spec/socket_spec.rb
+++ b/lib/rb/spec/socket_spec.rb
@@ -9,28 +9,33 @@ class ThriftSocketSpec < Spec::ExampleGroup
       @socket = Socket.new
       @handle = mock("Handle", :closed? => false)
       @handle.stub!(:close)
-      TCPSocket.stub!(:new).and_return(@handle)
+      @handle.stub!(:connect_nonblock)
+      ::Socket.stub!(:new).and_return(@handle)
     end
 
     it_should_behave_like "a socket"
 
     it "should raise a TransportException when it cannot open a socket" do
-      TCPSocket.should_receive(:new).and_raise(StandardError)
+      ::Socket.should_receive(:new).and_raise(StandardError)
       lambda { @socket.open }.should raise_error(Thrift::TransportException) { |e| e.type.should == Thrift::TransportException::NOT_OPEN }
     end
 
-    it "should open a TCPSocket with default args" do
-      TCPSocket.should_receive(:new).with('localhost', 9090)
+    it "should open a ::Socket with default args" do
+      ::Socket.should_receive(:new).and_return(mock("Handle", :connect_nonblock => true))
+      ::Socket.should_receive(:getaddrinfo).with("localhost", 9090).and_return([[]])
+      ::Socket.should_receive(:sockaddr_in)
       @socket.open
     end
 
     it "should accept host/port options" do
-      TCPSocket.should_receive(:new).with('my.domain', 1234)
+      ::Socket.should_receive(:new).and_return(mock("Handle", :connect_nonblock => true))
+      ::Socket.should_receive(:getaddrinfo).with("my.domain", 1234).and_return([[]])
+      ::Socket.should_receive(:sockaddr_in)
       Socket.new('my.domain', 1234).open
     end
 
     it "should accept an optional timeout" do
-      TCPSocket.stub!(:new)
+      ::Socket.stub!(:new)
       Socket.new('localhost', 8080, 5).timeout.should == 5
     end
   end
