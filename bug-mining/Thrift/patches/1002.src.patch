diff --git a/compiler/cpp/src/thriftl.ll b/compiler/cpp/src/thriftl.ll
index 1fe6b2efe..af67ff961 100644
--- a/compiler/cpp/src/thriftl.ll
+++ b/compiler/cpp/src/thriftl.ll
@@ -53,8 +53,10 @@
 #ifdef _MSC_VER
 #include "windows/config.h"
 #else
+#ifndef _WIN32
 #include "config.h"
 #endif
+#endif
 #include "main.h"
 #include "globals.h"
 #include "parse/t_program.h"
