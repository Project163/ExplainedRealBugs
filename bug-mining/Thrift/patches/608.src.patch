diff --git a/compiler/cpp/Makefile.am b/compiler/cpp/Makefile.am
index b7d1b5042..391f35ddf 100644
--- a/compiler/cpp/Makefile.am
+++ b/compiler/cpp/Makefile.am
@@ -105,6 +105,6 @@ EXTRA_DIST = \
              $(WINDOWS_DIST)
 
 clean-local:
-	$(RM) thriftl.cc thrifty.cc thrifty.h version.h
+	$(RM) thriftl.cc thrifty.cc thrifty.h version.h windows/version.h
 
 src/main.cc: version.h
diff --git a/compiler/cpp/src/windows/version.h b/compiler/cpp/src/windows/version.h.in
similarity index 96%
rename from compiler/cpp/src/windows/version.h
rename to compiler/cpp/src/windows/version.h.in
index 9e681d587..94b7c568e 100644
--- a/compiler/cpp/src/windows/version.h
+++ b/compiler/cpp/src/windows/version.h.in
@@ -29,7 +29,7 @@
 #endif
 
 #define PATH_MAX MAX_PATH
-#define THRIFT_VERSION "0.9.0-dev"
+#define THRIFT_VERSION "@PACKAGE_VERSION@"
 
 #ifndef S_ISDIR
 #define S_ISDIR(mode)  (((mode) & S_IFMT) == S_IFDIR)
diff --git a/configure.ac b/configure.ac
index 6855f35a1..e595447df 100755
--- a/configure.ac
+++ b/configure.ac
@@ -574,6 +574,7 @@ AC_CONFIG_FILES([
   Makefile
   compiler/cpp/Makefile
   compiler/cpp/version.h
+  compiler/cpp/src/windows/version.h
   lib/Makefile
   lib/cpp/Makefile
   lib/cpp/test/Makefile
