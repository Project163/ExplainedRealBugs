diff --git a/lib/Compilation.js b/lib/Compilation.js
index 2492515e8..2712fa7d7 100644
--- a/lib/Compilation.js
+++ b/lib/Compilation.js
@@ -1883,7 +1883,7 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si
 					creatingModuleDuringBuildSet
 				);
 			}
-			creatingModuleDuringBuildSet.add(originModule);
+			creatingModuleDuringBuildSet.add(module);
 
 			// When building is blocked by another module
 			// search for a cycle, cancel the cycle by throwing
