diff --git a/lib/NormalModuleFactory.js b/lib/NormalModuleFactory.js
index 402156fb6..3949e87bd 100644
--- a/lib/NormalModuleFactory.js
+++ b/lib/NormalModuleFactory.js
@@ -766,6 +766,7 @@ class NormalModuleFactory extends ModuleFactory {
 					if (!unsafeCacheData.has(module)) {
 						unsafeCacheData.set(module, module.getUnsafeCacheData());
 					}
+					this._restoredUnsafeCacheEntries.add(module);
 				}
 
 				callback(null, factoryResult);
diff --git a/lib/asset/AssetGenerator.js b/lib/asset/AssetGenerator.js
index affd3fdea..8c743ec86 100644
--- a/lib/asset/AssetGenerator.js
+++ b/lib/asset/AssetGenerator.js
@@ -265,7 +265,7 @@ class AssetGenerator extends Generator {
 	 * @returns {Set<string>} available types (do not mutate)
 	 */
 	getTypes(module) {
-		if (module.buildInfo.dataUrl || this.emit === false) {
+		if ((module.buildInfo && module.buildInfo.dataUrl) || this.emit === false) {
 			return JS_TYPES;
 		} else {
 			return JS_AND_ASSET_TYPES;
@@ -289,7 +289,7 @@ class AssetGenerator extends Generator {
 				return originalSource.size();
 			}
 			default:
-				if (module.buildInfo.dataUrl) {
+				if (module.buildInfo && module.buildInfo.dataUrl) {
 					const originalSource = module.originalSource();
 
 					if (!originalSource) {
diff --git a/lib/json/JsonGenerator.js b/lib/json/JsonGenerator.js
index 724c2a577..ada27ace1 100644
--- a/lib/json/JsonGenerator.js
+++ b/lib/json/JsonGenerator.js
@@ -116,7 +116,7 @@ class JsonGenerator extends Generator {
 	 * @returns {number} estimate size of the module
 	 */
 	getSize(module, type) {
-		let data = module.buildInfo.jsonData;
+		let data = module.buildInfo && module.buildInfo.jsonData;
 		if (!data) return 0;
 		return stringifySafe(data).length + 10;
 	}
@@ -145,7 +145,7 @@ class JsonGenerator extends Generator {
 			concatenationScope
 		}
 	) {
-		const data = module.buildInfo.jsonData;
+		const data = module.buildInfo && module.buildInfo.jsonData;
 		if (data === undefined) {
 			return new RawSource(
 				runtimeTemplate.missingModuleStatement({
diff --git a/test/watchCases/cache/unsafe-cache/0/changing-module.js b/test/watchCases/cache/unsafe-cache/0/changing-module.js
new file mode 100644
index 000000000..545ea91ed
--- /dev/null
+++ b/test/watchCases/cache/unsafe-cache/0/changing-module.js
@@ -0,0 +1,5 @@
+import "./unchanged-module.js";
+import "./unchanged-module.json";
+new URL("./unchanged-module.svg", import.meta.url);
+
+export default "0";
diff --git a/test/watchCases/cache/unsafe-cache/0/index.js b/test/watchCases/cache/unsafe-cache/0/index.js
new file mode 100644
index 000000000..6e6b374db
--- /dev/null
+++ b/test/watchCases/cache/unsafe-cache/0/index.js
@@ -0,0 +1,5 @@
+import value from "./changing-module";
+
+it("should compile and cleanup correctly", () => {
+	expect(value).toBe(WATCH_STEP);
+});
diff --git a/test/watchCases/cache/unsafe-cache/0/proxy-module.js b/test/watchCases/cache/unsafe-cache/0/proxy-module.js
new file mode 100644
index 000000000..d47e8e2f6
--- /dev/null
+++ b/test/watchCases/cache/unsafe-cache/0/proxy-module.js
@@ -0,0 +1,3 @@
+import "./unchanged-module.js";
+import "./unchanged-module.json";
+new URL("./unchanged-module.svg", import.meta.url);
diff --git a/test/watchCases/cache/unsafe-cache/0/unchanged-module.js b/test/watchCases/cache/unsafe-cache/0/unchanged-module.js
new file mode 100644
index 000000000..7a4e8a723
--- /dev/null
+++ b/test/watchCases/cache/unsafe-cache/0/unchanged-module.js
@@ -0,0 +1 @@
+export default 42;
diff --git a/test/watchCases/cache/unsafe-cache/0/unchanged-module.json b/test/watchCases/cache/unsafe-cache/0/unchanged-module.json
new file mode 100644
index 000000000..0967ef424
--- /dev/null
+++ b/test/watchCases/cache/unsafe-cache/0/unchanged-module.json
@@ -0,0 +1 @@
+{}
diff --git a/test/watchCases/cache/unsafe-cache/0/unchanged-module.svg b/test/watchCases/cache/unsafe-cache/0/unchanged-module.svg
new file mode 100644
index 000000000..3e8fcacea
--- /dev/null
+++ b/test/watchCases/cache/unsafe-cache/0/unchanged-module.svg
@@ -0,0 +1 @@
+<svg></svg>
diff --git a/test/watchCases/cache/unsafe-cache/1/changing-module.js b/test/watchCases/cache/unsafe-cache/1/changing-module.js
new file mode 100644
index 000000000..7c8bda2b2
--- /dev/null
+++ b/test/watchCases/cache/unsafe-cache/1/changing-module.js
@@ -0,0 +1,5 @@
+import "./unchanged-module.js";
+import "./unchanged-module.json";
+new URL("./unchanged-module.svg", import.meta.url);
+
+export default "1";
diff --git a/test/watchCases/cache/unsafe-cache/2/changing-module.js b/test/watchCases/cache/unsafe-cache/2/changing-module.js
new file mode 100644
index 000000000..0de780c72
--- /dev/null
+++ b/test/watchCases/cache/unsafe-cache/2/changing-module.js
@@ -0,0 +1,5 @@
+import "./unchanged-module.js";
+import "./unchanged-module.json";
+new URL("./unchanged-module.svg", import.meta.url);
+
+export default "2";
diff --git a/test/watchCases/cache/unsafe-cache/webpack.config.js b/test/watchCases/cache/unsafe-cache/webpack.config.js
new file mode 100644
index 000000000..cf4ca6af4
--- /dev/null
+++ b/test/watchCases/cache/unsafe-cache/webpack.config.js
@@ -0,0 +1,10 @@
+/** @type {import("../../../../").Configuration} */
+module.exports = {
+	mode: "development",
+	cache: {
+		type: "memory"
+	},
+	module: {
+		unsafeCache: true
+	}
+};
