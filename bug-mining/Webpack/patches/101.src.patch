diff --git a/declarations/WebpackOptions.d.ts b/declarations/WebpackOptions.d.ts
index a20120a0d..07a42cc4a 100644
--- a/declarations/WebpackOptions.d.ts
+++ b/declarations/WebpackOptions.d.ts
@@ -78,6 +78,10 @@ export type FilenameTemplate =
 			pathData: import("../lib/Compilation").PathData,
 			assetInfo?: import("../lib/Compilation").AssetInfo
 	  ) => string);
+/**
+ * Specifies the layer in which modules of this entrypoint are placed.
+ */
+export type Layer = null | string;
 /**
  * Add a comment in the UMD wrapper.
  */
@@ -146,6 +150,12 @@ export type ExternalItem =
 	| RegExp
 	| string
 	| {
+			/**
+			 * Specify externals depending on the layer.
+			 */
+			byLayer?: {
+				[k: string]: ExternalItem;
+			};
 			/**
 			 * The dependency used for the external.
 			 */
@@ -158,7 +168,11 @@ export type ExternalItem =
 				  };
 	  }
 	| ((
-			data: {context: string; request: string},
+			data: {
+				context: string;
+				request: string;
+				contextInfo: import("../lib/ModuleFactory").ModuleFactoryCreateDataContextInfo;
+			},
 			callback: (err?: Error, result?: string) => void
 	  ) => void);
 /**
@@ -920,6 +934,10 @@ export interface EntryDescription {
 	 * Module(s) that are loaded upon startup.
 	 */
 	import: EntryItem;
+	/**
+	 * Specifies the layer in which modules of this entrypoint are placed.
+	 */
+	layer?: Layer;
 	/**
 	 * Options for library.
 	 */
@@ -1008,6 +1026,10 @@ export interface Experiments {
 	 * Support WebAssembly as asynchronous EcmaScript Module.
 	 */
 	asyncWebAssembly?: boolean;
+	/**
+	 * Enable module and chunk layers.
+	 */
+	layers?: boolean;
 	/**
 	 * Allow output javascript files as module source type.
 	 */
@@ -1272,6 +1294,14 @@ export interface RuleSetRule {
 	 * Match the issuer of the module (The module pointing to this module).
 	 */
 	issuer?: RuleSetConditionOrConditionsAbsolute;
+	/**
+	 * Match layer of the issuer of this module (The module pointing to this module).
+	 */
+	issuerLayer?: RuleSetConditionOrConditions;
+	/**
+	 * Specifies the layer in which the module should be placed in.
+	 */
+	layer?: string;
 	/**
 	 * Shortcut for use.loader.
 	 */
@@ -1860,6 +1890,10 @@ export interface OptimizationSplitChunksCacheGroup {
 	 * Sets the hint for chunk id.
 	 */
 	idHint?: string;
+	/**
+	 * Assign modules to a cache group by module layer.
+	 */
+	layer?: RegExp | string | Function;
 	/**
 	 * Maximum number of requests which are accepted for on-demand loading.
 	 */
@@ -2412,6 +2446,10 @@ export interface StatsOptions {
 	 * Group modules by their extension.
 	 */
 	groupModulesByExtension?: boolean;
+	/**
+	 * Group modules by their layer.
+	 */
+	groupModulesByLayer?: boolean;
 	/**
 	 * Group modules by their path.
 	 */
@@ -2582,6 +2620,10 @@ export interface EntryDescriptionNormalized {
 	 * Module(s) that are loaded upon startup. The last one is exported.
 	 */
 	import?: string[];
+	/**
+	 * Specifies the layer in which modules of this entrypoint are placed.
+	 */
+	layer?: Layer;
 	/**
 	 * Options for library.
 	 */
diff --git a/lib/APIPlugin.js b/lib/APIPlugin.js
index c0a0587c7..ab8eeafbd 100644
--- a/lib/APIPlugin.js
+++ b/lib/APIPlugin.js
@@ -8,6 +8,7 @@
 const RuntimeGlobals = require("./RuntimeGlobals");
 const WebpackError = require("./WebpackError");
 const ConstDependency = require("./dependencies/ConstDependency");
+const BasicEvaluatedExpression = require("./javascript/BasicEvaluatedExpression");
 const {
 	toConstantDependency,
 	evaluateToString
@@ -16,6 +17,7 @@ const ChunkNameRuntimeModule = require("./runtime/ChunkNameRuntimeModule");
 const GetFullHashRuntimeModule = require("./runtime/GetFullHashRuntimeModule");
 
 /** @typedef {import("./Compiler")} Compiler */
+/** @typedef {import("./javascript/JavascriptParser")} JavascriptParser */
 
 /* eslint-disable camelcase */
 const REPLACEMENTS = {
@@ -132,6 +134,9 @@ class APIPlugin {
 						return true;
 					});
 
+				/**
+				 * @param {JavascriptParser} parser the parser
+				 */
 				const handler = parser => {
 					Object.keys(REPLACEMENTS).forEach(key => {
 						const info = REPLACEMENTS[key];
@@ -154,6 +159,37 @@ class APIPlugin {
 								.tap("APIPlugin", evaluateToString(info.type));
 						}
 					});
+
+					parser.hooks.expression
+						.for("__webpack_layer__")
+						.tap("APIPlugin", expr => {
+							const dep = new ConstDependency(
+								JSON.stringify(parser.state.module.layer),
+								expr.range
+							);
+							dep.loc = expr.loc;
+							parser.state.module.addPresentationalDependency(dep);
+							return true;
+						});
+					parser.hooks.evaluateIdentifier
+						.for("__webpack_layer__")
+						.tap("APIPlugin", expr =>
+							(parser.state.module.layer === null
+								? new BasicEvaluatedExpression().setNull()
+								: new BasicEvaluatedExpression().setString(
+										parser.state.module.layer
+								  )
+							).setRange(expr.range)
+						);
+					parser.hooks.evaluateTypeof
+						.for("__webpack_layer__")
+						.tap("APIPlugin", expr =>
+							new BasicEvaluatedExpression()
+								.setString(
+									parser.state.module.layer === null ? "object" : "string"
+								)
+								.setRange(expr.range)
+						);
 				};
 
 				normalModuleFactory.hooks.parser
diff --git a/lib/Compilation.js b/lib/Compilation.js
index e8b8f22a6..ad5e26a33 100644
--- a/lib/Compilation.js
+++ b/lib/Compilation.js
@@ -93,6 +93,7 @@ const { isSourceEqual } = require("./util/source");
 /** @typedef {import("./Entrypoint").EntryOptions} EntryOptions */
 /** @typedef {import("./Module").CodeGenerationResult} CodeGenerationResult */
 /** @typedef {import("./ModuleFactory")} ModuleFactory */
+/** @typedef {import("./ModuleFactory").ModuleFactoryCreateDataContextInfo} ModuleFactoryCreateDataContextInfo */
 /** @typedef {import("./RequestShortener")} RequestShortener */
 /** @typedef {import("./RuntimeModule")} RuntimeModule */
 /** @typedef {import("./Template").RenderManifestEntry} RenderManifestEntry */
@@ -241,6 +242,7 @@ const { isSourceEqual } = require("./util/source");
  * @property {boolean} dependentModules
  * @property {boolean} runtimeModules
  * @property {boolean} groupModulesByCacheStatus
+ * @property {boolean} groupModulesByLayer
  * @property {boolean} groupModulesByAttributes
  * @property {boolean} groupModulesByPath
  * @property {boolean} groupModulesByExtension
@@ -1418,6 +1420,7 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si
 	 * @property {ModuleFactory} factory
 	 * @property {Dependency[]} dependencies
 	 * @property {Module | null} originModule
+	 * @property {Partial<ModuleFactoryCreateDataContextInfo>=} contextInfo
 	 * @property {string=} context
 	 * @property {boolean=} recursive recurse into dependencies of the created module
 	 */
@@ -1428,7 +1431,14 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si
 	 * @returns {void}
 	 */
 	handleModuleCreation(
-		{ factory, dependencies, originModule, context, recursive = true },
+		{
+			factory,
+			dependencies,
+			originModule,
+			contextInfo,
+			context,
+			recursive = true
+		},
 		callback
 	) {
 		const moduleGraph = this.moduleGraph;
@@ -1436,7 +1446,14 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si
 		const currentProfile = this.profile ? new ModuleProfile() : undefined;
 
 		this.factorizeModule(
-			{ currentProfile, factory, dependencies, originModule, context },
+			{
+				currentProfile,
+				factory,
+				dependencies,
+				originModule,
+				contextInfo,
+				context
+			},
 			(err, newModule) => {
 				if (err) {
 					if (dependencies.every(d => d.optional)) {
@@ -1563,6 +1580,7 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si
 	 * @property {ModuleFactory} factory
 	 * @property {Dependency[]} dependencies
 	 * @property {Module | null} originModule
+	 * @property {Partial<ModuleFactoryCreateDataContextInfo>=} contextInfo
 	 * @property {string=} context
 	 */
 
@@ -1581,7 +1599,14 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si
 	 * @returns {void}
 	 */
 	_factorizeModule(
-		{ currentProfile, factory, dependencies, originModule, context },
+		{
+			currentProfile,
+			factory,
+			dependencies,
+			originModule,
+			contextInfo,
+			context
+		},
 		callback
 	) {
 		if (currentProfile !== undefined) {
@@ -1591,7 +1616,9 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si
 			{
 				contextInfo: {
 					issuer: originModule ? originModule.nameForCondition() : "",
-					compiler: this.compiler.name
+					issuerLayer: originModule ? originModule.layer : null,
+					compiler: this.compiler.name,
+					...contextInfo
 				},
 				resolveOptions: originModule ? originModule.resolveOptions : undefined,
 				context: context
@@ -1650,13 +1677,24 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si
 	}
 
 	/**
-	 *
 	 * @param {string} context context string path
 	 * @param {Dependency} dependency dependency used to create Module chain
 	 * @param {ModuleCallback} callback callback for when module chain is complete
 	 * @returns {void} will throw if dependency instance is not a valid Dependency
 	 */
 	addModuleChain(context, dependency, callback) {
+		return this.addModuleTree({ context, dependency }, callback);
+	}
+
+	/**
+	 * @param {Object} options options
+	 * @param {string} options.context context string path
+	 * @param {Dependency} options.dependency dependency used to create Module chain
+	 * @param {Partial<ModuleFactoryCreateDataContextInfo>=} options.contextInfo additional context info for the root module
+	 * @param {ModuleCallback} callback callback for when module chain is complete
+	 * @returns {void} will throw if dependency instance is not a valid Dependency
+	 */
+	addModuleTree({ context, dependency, contextInfo }, callback) {
 		if (
 			typeof dependency !== "object" ||
 			dependency === null ||
@@ -1681,6 +1719,7 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si
 				factory: moduleFactory,
 				dependencies: [dependency],
 				originModule: null,
+				contextInfo,
 				context
 			},
 			err => {
@@ -1780,14 +1819,23 @@ BREAKING CHANGE: Asset processing hooks in Compilation has been merged into a si
 
 		this.hooks.addEntry.call(entry, options);
 
-		this.addModuleChain(context, entry, (err, module) => {
-			if (err) {
-				this.hooks.failedEntry.call(entry, options, err);
-				return callback(err);
+		this.addModuleTree(
+			{
+				context,
+				dependency: entry,
+				contextInfo: entryData.options.layer
+					? { issuerLayer: entryData.options.layer }
+					: undefined
+			},
+			(err, module) => {
+				if (err) {
+					this.hooks.failedEntry.call(entry, options, err);
+					return callback(err);
+				}
+				this.hooks.succeedEntry.call(entry, options, module);
+				return callback(null, module);
 			}
-			this.hooks.succeedEntry.call(entry, options, module);
-			return callback(null, module);
-		});
+		);
 	}
 
 	/**
diff --git a/lib/Compiler.js b/lib/Compiler.js
index bea484469..208d0b84a 100644
--- a/lib/Compiler.js
+++ b/lib/Compiler.js
@@ -995,7 +995,8 @@ ${other}`);
 			fs: this.inputFileSystem,
 			resolverFactory: this.resolverFactory,
 			options: this.options.module || {},
-			associatedObjectForCache: this.root
+			associatedObjectForCache: this.root,
+			layers: this.options.experiments.layers
 		});
 		this.hooks.normalModuleFactory.call(normalModuleFactory);
 		return normalModuleFactory;
diff --git a/lib/EntryOptionPlugin.js b/lib/EntryOptionPlugin.js
index 412e8ff77..8291b14fb 100644
--- a/lib/EntryOptionPlugin.js
+++ b/lib/EntryOptionPlugin.js
@@ -60,11 +60,17 @@ class EntryOptionPlugin {
 			name,
 			filename: desc.filename,
 			runtime: desc.runtime,
+			layer: desc.layer,
 			dependOn: desc.dependOn,
 			chunkLoading: desc.chunkLoading,
 			wasmLoading: desc.wasmLoading,
 			library: desc.library
 		};
+		if (desc.layer !== undefined && !compiler.options.experiments.layers) {
+			throw new Error(
+				"'entryOptions.layer' is only allowed when 'experiments.layers' is enabled"
+			);
+		}
 		if (desc.chunkLoading) {
 			const EnableChunkLoadingPlugin = require("./javascript/EnableChunkLoadingPlugin");
 			EnableChunkLoadingPlugin.checkEnabled(compiler, desc.chunkLoading);
diff --git a/lib/ExternalModuleFactoryPlugin.js b/lib/ExternalModuleFactoryPlugin.js
index b1e2caa45..3a2dae8da 100644
--- a/lib/ExternalModuleFactoryPlugin.js
+++ b/lib/ExternalModuleFactoryPlugin.js
@@ -42,6 +42,7 @@ class ExternalModuleFactoryPlugin {
 			"ExternalModuleFactoryPlugin",
 			(data, callback) => {
 				const context = data.context;
+				const contextInfo = data.contextInfo;
 				const dependency = data.dependencies[0];
 
 				/**
@@ -156,21 +157,49 @@ class ExternalModuleFactoryPlugin {
 							externals(
 								{
 									context,
-									request: dependency.request
+									request: dependency.request,
+									contextInfo
 								},
 								cb
 							);
 						}
 						return;
-					} else if (
-						typeof externals === "object" &&
-						Object.prototype.hasOwnProperty.call(externals, dependency.request)
-					) {
-						return handleExternal(
-							externals[dependency.request],
-							undefined,
-							callback
-						);
+					} else if (typeof externals === "object") {
+						const byLayer = externals.byLayer;
+						if (typeof byLayer === "object") {
+							const layerExternals = byLayer[contextInfo.issuerLayer];
+							if (typeof layerExternals === "object") {
+								return handleExternals(layerExternals, (err, module) => {
+									if (err) return callback(err);
+									if (module) return callback(null, module);
+									if (
+										Object.prototype.hasOwnProperty.call(
+											externals,
+											dependency.request
+										)
+									) {
+										return handleExternal(
+											externals[dependency.request],
+											undefined,
+											callback
+										);
+									}
+									callback();
+								});
+							}
+						}
+						if (
+							Object.prototype.hasOwnProperty.call(
+								externals,
+								dependency.request
+							)
+						) {
+							return handleExternal(
+								externals[dependency.request],
+								undefined,
+								callback
+							);
+						}
 					}
 					callback();
 				};
diff --git a/lib/Module.js b/lib/Module.js
index 9b363e7f1..4c3a1dad9 100644
--- a/lib/Module.js
+++ b/lib/Module.js
@@ -119,14 +119,17 @@ class Module extends DependenciesBlock {
 	/**
 	 * @param {string} type the module type
 	 * @param {string=} context an optional context
+	 * @param {string=} layer an optional layer in which the module is
 	 */
-	constructor(type, context = null) {
+	constructor(type, context = null, layer = null) {
 		super();
 
 		/** @type {string} */
 		this.type = type;
-		/** @type {string} */
+		/** @type {string | null} */
 		this.context = context;
+		/** @type {string | null} */
+		this.layer = layer;
 		/** @type {boolean} */
 		this.needId = true;
 
@@ -916,6 +919,7 @@ class Module extends DependenciesBlock {
 	serialize(context) {
 		const { write } = context;
 		write(this.type);
+		write(this.layer);
 		write(this.context);
 		write(this.resolveOptions);
 		write(this.factoryMeta);
@@ -940,6 +944,7 @@ class Module extends DependenciesBlock {
 	deserialize(context) {
 		const { read } = context;
 		this.type = read();
+		this.layer = read();
 		this.context = read();
 		this.resolveOptions = read();
 		this.factoryMeta = read();
diff --git a/lib/ModuleFactory.js b/lib/ModuleFactory.js
index 40cf81ba9..dab8811d7 100644
--- a/lib/ModuleFactory.js
+++ b/lib/ModuleFactory.js
@@ -20,6 +20,7 @@
 /**
  * @typedef {Object} ModuleFactoryCreateDataContextInfo
  * @property {string} issuer
+ * @property {string | null=} issuerLayer
  * @property {string} compiler
  */
 
diff --git a/lib/NormalModule.js b/lib/NormalModule.js
index 1d9339b20..93918e338 100644
--- a/lib/NormalModule.js
+++ b/lib/NormalModule.js
@@ -188,6 +188,7 @@ class NormalModule extends Module {
 
 	/**
 	 * @param {Object} options options object
+	 * @param {string=} options.layer an optional layer in which the module is
 	 * @param {string} options.type module type
 	 * @param {string} options.request request string
 	 * @param {string} options.userRequest request intended by user (without loaders from config)
@@ -200,6 +201,7 @@ class NormalModule extends Module {
 	 * @param {Object} options.resolveOptions options used for resolving requests from this module
 	 */
 	constructor({
+		layer,
 		type,
 		request,
 		userRequest,
@@ -211,7 +213,7 @@ class NormalModule extends Module {
 		generator,
 		resolveOptions
 	}) {
-		super(type, getContext(resource));
+		super(type, getContext(resource), layer);
 
 		// Info from Factory
 		/** @type {string} */
@@ -256,7 +258,11 @@ class NormalModule extends Module {
 	 * @returns {string} a unique identifier of the module
 	 */
 	identifier() {
-		return this.request;
+		if (this.layer === null) {
+			return this.request;
+		} else {
+			return `${this.request}|${this.layer}`;
+		}
 	}
 
 	/**
@@ -1080,8 +1086,10 @@ class NormalModule extends Module {
 
 	static deserialize(context) {
 		const obj = new NormalModule({
-			// will be filled by updateCacheModule
+			// will be deserialized by Module
+			layer: null,
 			type: "",
+			// will be filled by updateCacheModule
 			resource: "",
 			request: null,
 			userRequest: null,
diff --git a/lib/NormalModuleFactory.js b/lib/NormalModuleFactory.js
index e32a84da0..a7045a833 100644
--- a/lib/NormalModuleFactory.js
+++ b/lib/NormalModuleFactory.js
@@ -166,12 +166,14 @@ const ruleSetCompiler = new RuleSetCompiler([
 	new BasicMatcherRulePlugin("realResource"),
 	new BasicMatcherRulePlugin("issuer"),
 	new BasicMatcherRulePlugin("compiler"),
+	new BasicMatcherRulePlugin("issuerLayer"),
 	new DescriptionDataMatcherRulePlugin(),
 	new BasicEffectRulePlugin("type"),
 	new BasicEffectRulePlugin("sideEffects"),
 	new BasicEffectRulePlugin("parser"),
 	new BasicEffectRulePlugin("resolve"),
 	new BasicEffectRulePlugin("generator"),
+	new BasicEffectRulePlugin("layer"),
 	new UseEffectRulePlugin()
 ]);
 
@@ -183,13 +185,15 @@ class NormalModuleFactory extends ModuleFactory {
 	 * @param {ResolverFactory} param.resolverFactory resolverFactory
 	 * @param {ModuleOptions} param.options options
 	 * @param {Object=} param.associatedObjectForCache an object to which the cache will be attached
+	 * @param {boolean=} param.layers enable layers
 	 */
 	constructor({
 		context,
 		fs,
 		resolverFactory,
 		options,
-		associatedObjectForCache
+		associatedObjectForCache,
+		layers = false
 	}) {
 		super();
 		this.hooks = Object.freeze({
@@ -437,7 +441,8 @@ class NormalModuleFactory extends ModuleFactory {
 							? undefined
 							: resourceData.data.descriptionFileData,
 						issuer: contextInfo.issuer,
-						compiler: contextInfo.compiler
+						compiler: contextInfo.compiler,
+						issuerLayer: contextInfo.issuerLayer || ""
 					});
 					const settings = {};
 					const useLoadersPost = [];
@@ -485,7 +490,17 @@ class NormalModuleFactory extends ModuleFactory {
 						for (const loader of preLoaders) allLoaders.push(loader);
 						const type = settings.type;
 						const resolveOptions = settings.resolve;
+						const layer = settings.layer;
+						if (layer !== undefined && !layers) {
+							return callback(
+								new Error(
+									"'Rule.layer' is only allowed when 'experiments.layers' is enabled"
+								)
+							);
+						}
 						Object.assign(data.createData, {
+							layer:
+								layer === undefined ? contextInfo.issuerLayer || null : layer,
 							request: stringifyLoadersAndResource(
 								allLoaders,
 								resourceData.resource
diff --git a/lib/config/normalization.js b/lib/config/normalization.js
index a841a26a8..1944f055d 100644
--- a/lib/config/normalization.js
+++ b/lib/config/normalization.js
@@ -416,6 +416,7 @@ const getNormalizedEntryStatic = entry => {
 					value.import &&
 					(Array.isArray(value.import) ? value.import : [value.import]),
 				filename: value.filename,
+				layer: value.layer,
 				runtime: value.runtime,
 				chunkLoading: value.chunkLoading,
 				wasmLoading: value.wasmLoading,
diff --git a/lib/optimize/ConcatenatedModule.js b/lib/optimize/ConcatenatedModule.js
index 9cfc989db..b3f27c621 100644
--- a/lib/optimize/ConcatenatedModule.js
+++ b/lib/optimize/ConcatenatedModule.js
@@ -660,7 +660,7 @@ class ConcatenatedModule extends Module {
 	 * @param {Set<Module>=} options.modules all concatenated modules
 	 */
 	constructor({ identifier, rootModule, modules, runtime }) {
-		super("javascript/esm", null);
+		super("javascript/esm", null, rootModule.layer);
 
 		// Info from Factory
 		/** @type {string} */
diff --git a/lib/optimize/SplitChunksPlugin.js b/lib/optimize/SplitChunksPlugin.js
index f0292422b..edca93f24 100644
--- a/lib/optimize/SplitChunksPlugin.js
+++ b/lib/optimize/SplitChunksPlugin.js
@@ -444,7 +444,8 @@ const normalizeCacheGroups = (cacheGroups, defaultSizeTypes) => {
 				handlers.push((module, context, results) => {
 					if (
 						checkTest(option.test, module, context) &&
-						checkModuleType(option.type, module)
+						checkModuleType(option.type, module) &&
+						checkModuleLayer(option.layer, module)
 					) {
 						results.push(source);
 					}
@@ -513,6 +514,27 @@ const checkModuleType = (test, module) => {
 	return false;
 };
 
+/**
+ * @param {undefined|string|RegExp|Function} test type option
+ * @param {Module} module the module
+ * @returns {boolean} true, if the module should be selected
+ */
+const checkModuleLayer = (test, module) => {
+	if (test === undefined) return true;
+	if (typeof test === "function") {
+		return test(module.layer);
+	}
+	if (typeof test === "string") {
+		const layer = module.layer;
+		return test === "" ? !layer : layer && layer.startsWith(test);
+	}
+	if (test instanceof RegExp) {
+		const layer = module.layer;
+		return test.test(layer);
+	}
+	return false;
+};
+
 /**
  * @param {OptimizationSplitChunksCacheGroup} options the group options
  * @param {string} key key of cache group
diff --git a/lib/rules/RuleSetCompiler.js b/lib/rules/RuleSetCompiler.js
index 81241d2cd..b22a6a9a6 100644
--- a/lib/rules/RuleSetCompiler.js
+++ b/lib/rules/RuleSetCompiler.js
@@ -209,6 +209,12 @@ class RuleSetCompiler {
 	 * @returns {Condition} compiled condition
 	 */
 	compileCondition(path, condition) {
+		if (condition === "") {
+			return {
+				matchWhenEmpty: true,
+				fn: str => str === ""
+			};
+		}
 		if (!condition) {
 			throw this.error(
 				path,
diff --git a/lib/stats/DefaultStatsFactoryPlugin.js b/lib/stats/DefaultStatsFactoryPlugin.js
index a1c36203e..3284c87da 100644
--- a/lib/stats/DefaultStatsFactoryPlugin.js
+++ b/lib/stats/DefaultStatsFactoryPlugin.js
@@ -792,6 +792,7 @@ const SIMPLE_EXTRACTORS = {
 			Object.assign(object, {
 				type: "module",
 				moduleType: module.type,
+				layer: module.layer,
 				size: module.size(),
 				sizes,
 				built,
@@ -1620,6 +1621,7 @@ const MODULES_GROUPERS = type => ({
 		};
 		const {
 			groupModulesByCacheStatus,
+			groupModulesByLayer,
 			groupModulesByAttributes,
 			groupModulesByType,
 			groupModulesByPath,
@@ -1673,6 +1675,21 @@ const MODULES_GROUPERS = type => ({
 				}
 			});
 		}
+		if (groupModulesByLayer) {
+			groupConfigs.push({
+				getKeys: module => {
+					return [module.layer];
+				},
+				createGroup: (key, children, modules) => {
+					return {
+						type: "modules by layer",
+						layer: key,
+						children,
+						...moduleGroup(children, modules)
+					};
+				}
+			});
+		}
 		if (groupModulesByPath || groupModulesByExtension) {
 			groupConfigs.push({
 				getKeys: module => {
diff --git a/lib/stats/DefaultStatsPresetPlugin.js b/lib/stats/DefaultStatsPresetPlugin.js
index ea63f607c..69b6dcafd 100644
--- a/lib/stats/DefaultStatsPresetPlugin.js
+++ b/lib/stats/DefaultStatsPresetPlugin.js
@@ -165,6 +165,7 @@ const DEFAULTS = {
 	nestedModules: OFF_FOR_TO_STRING,
 	groupModulesByType: ON_FOR_TO_STRING,
 	groupModulesByCacheStatus: ON_FOR_TO_STRING,
+	groupModulesByLayer: ON_FOR_TO_STRING,
 	groupModulesByAttributes: ON_FOR_TO_STRING,
 	groupModulesByPath: ON_FOR_TO_STRING,
 	groupModulesByExtension: ON_FOR_TO_STRING,
diff --git a/lib/stats/DefaultStatsPrinterPlugin.js b/lib/stats/DefaultStatsPrinterPlugin.js
index a414640ca..af3a24c09 100644
--- a/lib/stats/DefaultStatsPrinterPlugin.js
+++ b/lib/stats/DefaultStatsPrinterPlugin.js
@@ -253,6 +253,8 @@ const SIMPLE_PRINTERS = {
 		return (prefix || "") + bold(resource);
 	},
 	"module.identifier": identifier => undefined,
+	"module.layer": (layer, { formatLayer }) =>
+		layer ? formatLayer(layer) : undefined,
 	"module.sizes": printSizes,
 	"module.chunks[]": (id, { formatChunkId }) => formatChunkId(id),
 	"module.depth": (depth, { formatFlag }) =>
@@ -659,6 +661,7 @@ const PREFERRED_ORDERS = {
 		"name",
 		"identifier",
 		"id",
+		"layer",
 		"sizes",
 		"chunks",
 		"depth",
@@ -1033,6 +1036,7 @@ const AVAILABLE_FORMATS = {
 	formatFilename: (filename, { green, yellow }, oversize) =>
 		(oversize ? yellow : green)(filename),
 	formatFlag: flag => `[${flag}]`,
+	formatLayer: layer => `(in ${layer})`,
 	formatSize: require("../SizeFormatHelpers").formatSize,
 	formatDateTime: (dateTime, { bold }) => {
 		const d = new Date(dateTime);
diff --git a/schemas/WebpackOptions.json b/schemas/WebpackOptions.json
index edc63a08d..bd90157fe 100644
--- a/schemas/WebpackOptions.json
+++ b/schemas/WebpackOptions.json
@@ -366,6 +366,9 @@
         "import": {
           "$ref": "#/definitions/EntryItem"
         },
+        "layer": {
+          "$ref": "#/definitions/Layer"
+        },
         "library": {
           "$ref": "#/definitions/LibraryOptions"
         },
@@ -411,6 +414,9 @@
           "minItems": 1,
           "uniqueItems": true
         },
+        "layer": {
+          "$ref": "#/definitions/Layer"
+        },
         "library": {
           "$ref": "#/definitions/LibraryOptions"
         },
@@ -571,6 +577,10 @@
           "description": "Support WebAssembly as asynchronous EcmaScript Module.",
           "type": "boolean"
         },
+        "layers": {
+          "description": "Enable module and chunk layers.",
+          "type": "boolean"
+        },
         "outputModule": {
           "description": "Allow output javascript files as module source type.",
           "type": "boolean"
@@ -623,12 +633,21 @@
                 "type": "object"
               }
             ]
+          },
+          "properties": {
+            "byLayer": {
+              "description": "Specify externals depending on the layer.",
+              "type": "object",
+              "additionalProperties": {
+                "$ref": "#/definitions/ExternalItem"
+              }
+            }
           }
         },
         {
           "description": "The function is called on each dependency (`function(context, request, callback(err, result))`).",
           "instanceof": "Function",
-          "tsType": "((data: { context: string, request: string }, callback: (err?: Error, result?: string) => void) => void)"
+          "tsType": "((data: { context: string, request: string, contextInfo: import('../lib/ModuleFactory').ModuleFactoryCreateDataContextInfo }, callback: (err?: Error, result?: string) => void) => void)"
         }
       ]
     },
@@ -1056,6 +1075,18 @@
         }
       }
     },
+    "Layer": {
+      "description": "Specifies the layer in which modules of this entrypoint are placed.",
+      "anyOf": [
+        {
+          "enum": [null]
+        },
+        {
+          "type": "string",
+          "minLength": 1
+        }
+      ]
+    },
     "Library": {
       "description": "Make the output files a library, exporting the exports of the entry point.",
       "anyOf": [
@@ -1742,6 +1773,22 @@
           "description": "Sets the hint for chunk id.",
           "type": "string"
         },
+        "layer": {
+          "description": "Assign modules to a cache group by module layer.",
+          "anyOf": [
+            {
+              "instanceof": "RegExp",
+              "tsType": "RegExp"
+            },
+            {
+              "type": "string"
+            },
+            {
+              "instanceof": "Function",
+              "tsType": "Function"
+            }
+          ]
+        },
         "maxAsyncRequests": {
           "description": "Maximum number of requests which are accepted for on-demand loading.",
           "type": "number",
@@ -2886,8 +2933,7 @@
           "tsType": "RegExp"
         },
         {
-          "type": "string",
-          "minLength": 1
+          "type": "string"
         },
         {
           "type": "object",
@@ -3109,6 +3155,18 @@
             }
           ]
         },
+        "issuerLayer": {
+          "description": "Match layer of the issuer of this module (The module pointing to this module).",
+          "oneOf": [
+            {
+              "$ref": "#/definitions/RuleSetConditionOrConditions"
+            }
+          ]
+        },
+        "layer": {
+          "description": "Specifies the layer in which the module should be placed in.",
+          "type": "string"
+        },
         "loader": {
           "description": "Shortcut for use.loader.",
           "oneOf": [
@@ -3636,6 +3694,10 @@
           "description": "Group modules by their extension.",
           "type": "boolean"
         },
+        "groupModulesByLayer": {
+          "description": "Group modules by their layer.",
+          "type": "boolean"
+        },
         "groupModulesByPath": {
           "description": "Group modules by their path.",
           "type": "boolean"
diff --git a/test/Validation.test.js b/test/Validation.test.js
index 6f7fa27f9..f91d8fd0a 100644
--- a/test/Validation.test.js
+++ b/test/Validation.test.js
@@ -181,7 +181,7 @@ describe("Validation", () => {
 			expect(msg).toMatchInlineSnapshot(`
 			"Invalid configuration object. Webpack has been initialized using a configuration object that does not match the API schema.
 			 - configuration.module.rules[0].oneOf[0] has an unknown property 'passer'. These properties are valid:
-			   object { compiler?, dependency?, descriptionData?, enforce?, exclude?, generator?, include?, issuer?, loader?, mimetype?, oneOf?, options?, parser?, realResource?, resolve?, resource?, resourceFragment?, resourceQuery?, rules?, sideEffects?, test?, type?, use? }
+			   object { compiler?, dependency?, descriptionData?, enforce?, exclude?, generator?, include?, issuer?, issuerLayer?, layer?, loader?, mimetype?, oneOf?, options?, parser?, realResource?, resolve?, resource?, resourceFragment?, resourceQuery?, rules?, sideEffects?, test?, type?, use? }
 			   -> A rule description with conditions and effects for modules."
 		`)
 	);
@@ -461,7 +461,7 @@ describe("Validation", () => {
 			       test: ...
 			     }
 			   }.
-			   object { <key>: false | RegExp | string | function | object { automaticNameDelimiter?, chunks?, enforce?, enforceSizeThreshold?, filename?, idHint?, maxAsyncRequests?, maxAsyncSize?, maxInitialRequests?, maxInitialSize?, maxSize?, minChunks?, minRemainingSize?, minSize?, name?, priority?, reuseExistingChunk?, test?, type?, usedExports? } }
+			   object { <key>: false | RegExp | string | function | object { automaticNameDelimiter?, chunks?, enforce?, enforceSizeThreshold?, filename?, idHint?, layer?, maxAsyncRequests?, maxAsyncSize?, maxInitialRequests?, maxInitialSize?, maxSize?, minChunks?, minRemainingSize?, minSize?, name?, priority?, reuseExistingChunk?, test?, type?, usedExports? } }
 			   -> Assign modules to a cache group (modules from different cache groups are tried to keep in separate chunks, default categories: 'default', 'defaultVendors')."
 		`)
 	);
diff --git a/test/__snapshots__/Cli.test.js.snap b/test/__snapshots__/Cli.test.js.snap
index 61a2ec78b..dd96abcc2 100644
--- a/test/__snapshots__/Cli.test.js.snap
+++ b/test/__snapshots__/Cli.test.js.snap
@@ -354,6 +354,19 @@ Object {
     "multiple": false,
     "simpleType": "boolean",
   },
+  "experiments-layers": Object {
+    "configs": Array [
+      Object {
+        "description": "Enable module and chunk layers.",
+        "multiple": false,
+        "path": "experiments.layers",
+        "type": "boolean",
+      },
+    ],
+    "description": "Enable module and chunk layers.",
+    "multiple": false,
+    "simpleType": "boolean",
+  },
   "experiments-output-module": Object {
     "configs": Array [
       Object {
@@ -1986,6 +1999,38 @@ Object {
     "multiple": true,
     "simpleType": "string",
   },
+  "module-rules-issuer-layer": Object {
+    "configs": Array [
+      Object {
+        "description": "Match layer of the issuer of this module (The module pointing to this module).",
+        "multiple": true,
+        "path": "module.rules[].issuerLayer",
+        "type": "RegExp",
+      },
+      Object {
+        "description": "Match layer of the issuer of this module (The module pointing to this module).",
+        "multiple": true,
+        "path": "module.rules[].issuerLayer",
+        "type": "string",
+      },
+    ],
+    "description": "Match layer of the issuer of this module (The module pointing to this module).",
+    "multiple": true,
+    "simpleType": "string",
+  },
+  "module-rules-layer": Object {
+    "configs": Array [
+      Object {
+        "description": "Specifies the layer in which the module should be placed in.",
+        "multiple": true,
+        "path": "module.rules[].layer",
+        "type": "string",
+      },
+    ],
+    "description": "Specifies the layer in which the module should be placed in.",
+    "multiple": true,
+    "simpleType": "string",
+  },
   "module-rules-loader": Object {
     "configs": Array [
       Object {
@@ -6185,6 +6230,19 @@ Object {
     "multiple": false,
     "simpleType": "boolean",
   },
+  "stats-group-modules-by-layer": Object {
+    "configs": Array [
+      Object {
+        "description": "Group modules by their layer.",
+        "multiple": false,
+        "path": "stats.groupModulesByLayer",
+        "type": "boolean",
+      },
+    ],
+    "description": "Group modules by their layer.",
+    "multiple": false,
+    "simpleType": "boolean",
+  },
   "stats-group-modules-by-path": Object {
     "configs": Array [
       Object {
diff --git a/test/configCases/layer/rules/index.js b/test/configCases/layer/rules/index.js
new file mode 100644
index 000000000..efc4cd79d
--- /dev/null
+++ b/test/configCases/layer/rules/index.js
@@ -0,0 +1,27 @@
+import { object as direct } from "./module";
+import { object as reexported } from "./reexport";
+import { __loaderValue as entryLayerValue } from "./module";
+
+import { direct as layerDirect } from "./module-layer-change";
+import { reexported as layerReexported } from "./module-layer-change";
+import { __loaderValue as layerValue } from "./module-layer-change";
+
+import { direct as otherLayerDirect } from "./module-other-layer-change";
+import { reexported as otherLayerReexported } from "./module-other-layer-change";
+import { __loaderValue as otherLayerValue } from "./module-other-layer-change";
+
+it("should allow to duplicate modules with layers", () => {
+	expect(direct).toBe(reexported);
+	expect(layerDirect).toBe(layerReexported);
+	expect(otherLayerDirect).toBe(otherLayerReexported);
+
+	expect(layerDirect).not.toBe(direct);
+	expect(otherLayerDirect).not.toBe(direct);
+	expect(otherLayerDirect).not.toBe(layerDirect);
+});
+
+it("apply rules based on layer", () => {
+	expect(layerValue).toBe("ok");
+	expect(otherLayerValue).toBe("other");
+	expect(entryLayerValue).toBe("entry");
+});
diff --git a/test/configCases/layer/rules/loader.js b/test/configCases/layer/rules/loader.js
new file mode 100644
index 000000000..34dbc1b17
--- /dev/null
+++ b/test/configCases/layer/rules/loader.js
@@ -0,0 +1,6 @@
+module.exports = function (source) {
+	const options = this.getOptions();
+	return `${source}
+;
+export const __loaderValue = ${JSON.stringify(options.value)};`;
+};
diff --git a/test/configCases/layer/rules/module-layer-change.js b/test/configCases/layer/rules/module-layer-change.js
new file mode 100644
index 000000000..601aa230b
--- /dev/null
+++ b/test/configCases/layer/rules/module-layer-change.js
@@ -0,0 +1,3 @@
+export { object as direct } from "./module";
+export { object as reexported } from "./reexport";
+export * from "./module";
diff --git a/test/configCases/layer/rules/module-other-layer-change.js b/test/configCases/layer/rules/module-other-layer-change.js
new file mode 100644
index 000000000..601aa230b
--- /dev/null
+++ b/test/configCases/layer/rules/module-other-layer-change.js
@@ -0,0 +1,3 @@
+export { object as direct } from "./module";
+export { object as reexported } from "./reexport";
+export * from "./module";
diff --git a/test/configCases/layer/rules/module.js b/test/configCases/layer/rules/module.js
new file mode 100644
index 000000000..a41483a44
--- /dev/null
+++ b/test/configCases/layer/rules/module.js
@@ -0,0 +1,3 @@
+export const object = {
+	layer: __webpack_layer__
+};
diff --git a/test/configCases/layer/rules/reexport.js b/test/configCases/layer/rules/reexport.js
new file mode 100644
index 000000000..b999044ad
--- /dev/null
+++ b/test/configCases/layer/rules/reexport.js
@@ -0,0 +1 @@
+export * from "./module";
diff --git a/test/configCases/layer/rules/webpack.config.js b/test/configCases/layer/rules/webpack.config.js
new file mode 100644
index 000000000..17abe8cf4
--- /dev/null
+++ b/test/configCases/layer/rules/webpack.config.js
@@ -0,0 +1,51 @@
+/** @type {import("../../../../").Configuration} */
+module.exports = {
+	entry: {
+		bundle0: {
+			import: "./index.js",
+			layer: "entry-layer"
+		}
+	},
+	output: {
+		pathinfo: "verbose"
+	},
+	module: {
+		rules: [
+			{
+				test: /module-layer-change/,
+				layer: "layer"
+			},
+			{
+				test: /module-other-layer-change/,
+				layer: "other-layer"
+			},
+			{
+				test: /module\.js$/,
+				issuerLayer: "other-layer",
+				loader: "./loader.js",
+				options: {
+					value: "other"
+				}
+			},
+			{
+				test: /module\.js$/,
+				issuerLayer: "layer",
+				loader: "./loader.js",
+				options: {
+					value: "ok"
+				}
+			},
+			{
+				test: /module\.js$/,
+				issuerLayer: "entry-layer",
+				loader: "./loader.js",
+				options: {
+					value: "entry"
+				}
+			}
+		]
+	},
+	experiments: {
+		layers: true
+	}
+};
diff --git a/types.d.ts b/types.d.ts
index 6cfdfab8e..f471e9ae8 100644
--- a/types.d.ts
+++ b/types.d.ts
@@ -1319,6 +1319,23 @@ declare class Compilation {
 		dependency: Dependency,
 		callback: (err?: WebpackError, result?: Module) => void
 	): void;
+	addModuleTree(
+		__0: {
+			/**
+			 * context string path
+			 */
+			context: string;
+			/**
+			 * dependency used to create Module chain
+			 */
+			dependency: Dependency;
+			/**
+			 * additional context info for the root module
+			 */
+			contextInfo?: Partial<ModuleFactoryCreateDataContextInfo>;
+		},
+		callback: (err?: WebpackError, result?: Module) => void
+	): void;
 	addEntry(
 		context: string,
 		entry: Dependency,
@@ -1735,9 +1752,17 @@ declare interface Configuration {
 		| ExternalItem[]
 		| {
 				[index: string]: string | boolean | string[] | { [index: string]: any };
+				/**
+				 * Specify externals depending on the layer.
+				 */
+				byLayer?: { [index: string]: ExternalItem };
 		  }
 		| ((
-				data: { context: string; request: string },
+				data: {
+					context: string;
+					request: string;
+					contextInfo: ModuleFactoryCreateDataContextInfo;
+				},
 				callback: (err?: Error, result?: string) => void
 		  ) => void);
 
@@ -2681,6 +2706,11 @@ declare interface EntryDescription {
 	 */
 	import: EntryItem;
 
+	/**
+	 * Specifies the layer in which modules of this entrypoint are placed.
+	 */
+	layer?: null | string;
+
 	/**
 	 * Options for library.
 	 */
@@ -2721,6 +2751,11 @@ declare interface EntryDescriptionNormalized {
 	 */
 	import?: string[];
 
+	/**
+	 * Specifies the layer in which modules of this entrypoint are placed.
+	 */
+	layer?: null | string;
+
 	/**
 	 * Options for library.
 	 */
@@ -2766,6 +2801,7 @@ type EntryOptions = { name?: string } & Pick<
 	| "filename"
 	| "chunkLoading"
 	| "dependOn"
+	| "layer"
 	| "library"
 	| "runtime"
 	| "wasmLoading"
@@ -2910,6 +2946,11 @@ declare interface Experiments {
 	 */
 	asyncWebAssembly?: boolean;
 
+	/**
+	 * Enable module and chunk layers.
+	 */
+	layers?: boolean;
+
 	/**
 	 * Allow output javascript files as module source type.
 	 */
@@ -3185,9 +3226,19 @@ declare interface ExpressionExpressionInfo {
 type ExternalItem =
 	| string
 	| RegExp
-	| { [index: string]: string | boolean | string[] | { [index: string]: any } }
+	| {
+			[index: string]: string | boolean | string[] | { [index: string]: any };
+			/**
+			 * Specify externals depending on the layer.
+			 */
+			byLayer?: { [index: string]: ExternalItem };
+	  }
 	| ((
-			data: { context: string; request: string },
+			data: {
+				context: string;
+				request: string;
+				contextInfo: ModuleFactoryCreateDataContextInfo;
+			},
 			callback: (err?: Error, result?: string) => void
 	  ) => void);
 declare class ExternalModule extends Module {
@@ -3209,9 +3260,19 @@ type Externals =
 	| string
 	| RegExp
 	| ExternalItem[]
-	| { [index: string]: string | boolean | string[] | { [index: string]: any } }
+	| {
+			[index: string]: string | boolean | string[] | { [index: string]: any };
+			/**
+			 * Specify externals depending on the layer.
+			 */
+			byLayer?: { [index: string]: ExternalItem };
+	  }
 	| ((
-			data: { context: string; request: string },
+			data: {
+				context: string;
+				request: string;
+				contextInfo: ModuleFactoryCreateDataContextInfo;
+			},
 			callback: (err?: Error, result?: string) => void
 	  ) => void);
 declare class ExternalsPlugin {
@@ -3294,6 +3355,7 @@ declare interface FactorizeModuleOptions {
 	factory: ModuleFactory;
 	dependencies: Dependency[];
 	originModule: null | Module;
+	contextInfo?: Partial<ModuleFactoryCreateDataContextInfo>;
 	context?: string;
 }
 type FakeHook<T> = T & FakeHookMarker;
@@ -3621,6 +3683,7 @@ declare interface HandleModuleCreationOptions {
 	factory: ModuleFactory;
 	dependencies: Dependency[];
 	originModule: null | Module;
+	contextInfo?: Partial<ModuleFactoryCreateDataContextInfo>;
 	context?: string;
 
 	/**
@@ -4634,6 +4697,7 @@ declare interface KnownNormalizedStatsOptions {
 	dependentModules: boolean;
 	runtimeModules: boolean;
 	groupModulesByCacheStatus: boolean;
+	groupModulesByLayer: boolean;
 	groupModulesByAttributes: boolean;
 	groupModulesByPath: boolean;
 	groupModulesByExtension: boolean;
@@ -5063,9 +5127,10 @@ declare interface MinChunkSizePluginOptions {
 	minChunkSize: number;
 }
 declare class Module extends DependenciesBlock {
-	constructor(type: string, context?: string);
+	constructor(type: string, context?: string, layer?: string);
 	type: string;
-	context: string;
+	context: null | string;
+	layer: null | string;
 	needId: boolean;
 	debugId: number;
 	resolveOptions: ResolveOptionsWebpackOptions;
@@ -5213,6 +5278,7 @@ declare interface ModuleFactoryCreateData {
 }
 declare interface ModuleFactoryCreateDataContextInfo {
 	issuer: string;
+	issuerLayer?: null | string;
 	compiler: string;
 }
 declare interface ModuleFactoryResult {
@@ -5878,6 +5944,10 @@ declare class NodeTemplatePlugin {
 type NodeWebpackOptions = false | NodeOptions;
 declare class NormalModule extends Module {
 	constructor(__0: {
+		/**
+		 * an optional layer in which the module is
+		 */
+		layer?: string;
 		/**
 		 * module type
 		 */
@@ -6250,6 +6320,11 @@ declare interface OptimizationSplitChunksCacheGroup {
 	 */
 	idHint?: string;
 
+	/**
+	 * Assign modules to a cache group by module layer.
+	 */
+	layer?: string | Function | RegExp;
+
 	/**
 	 * Maximum number of requests which are accepted for on-demand loading.
 	 */
@@ -8016,6 +8091,34 @@ declare interface RuleSetRule {
 		| ((value: string) => boolean)
 		| RuleSetConditionAbsolute[];
 
+	/**
+	 * Match layer of the issuer of this module (The module pointing to this module).
+	 */
+	issuerLayer?:
+		| string
+		| RegExp
+		| {
+				/**
+				 * Logical AND.
+				 */
+				and?: RuleSetCondition[];
+				/**
+				 * Logical NOT.
+				 */
+				not?: RuleSetCondition[];
+				/**
+				 * Logical OR.
+				 */
+				or?: RuleSetCondition[];
+		  }
+		| ((value: string) => boolean)
+		| RuleSetCondition[];
+
+	/**
+	 * Specifies the layer in which the module should be placed in.
+	 */
+	layer?: string;
+
 	/**
 	 * Shortcut for use.loader.
 	 */
@@ -9484,6 +9587,11 @@ declare interface StatsOptions {
 	 */
 	groupModulesByExtension?: boolean;
 
+	/**
+	 * Group modules by their layer.
+	 */
+	groupModulesByLayer?: boolean;
+
 	/**
 	 * Group modules by their path.
 	 */
