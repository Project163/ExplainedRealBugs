diff --git a/lib/css/CssModulesPlugin.js b/lib/css/CssModulesPlugin.js
index 706185d3d..1da2425c4 100644
--- a/lib/css/CssModulesPlugin.js
+++ b/lib/css/CssModulesPlugin.js
@@ -368,24 +368,24 @@ class CssModulesPlugin {
 
 					/** @type {CssModule[] | undefined} */
 					const modules = orderedCssModulesPerChunk.get(chunk);
-					const { path: filename, info } = compilation.getPathWithInfo(
-						CssModulesPlugin.getChunkFilenameTemplate(
-							chunk,
-							compilation.outputOptions
-						),
-						{
-							hash,
-							runtime: chunk.runtime,
-							chunk,
-							contentHashType: "css"
-						}
-					);
-					const undoPath = getUndoPath(
-						filename,
-						compilation.outputOptions.path,
-						false
-					);
 					if (modules !== undefined) {
+						const { path: filename, info } = compilation.getPathWithInfo(
+							CssModulesPlugin.getChunkFilenameTemplate(
+								chunk,
+								compilation.outputOptions
+							),
+							{
+								hash,
+								runtime: chunk.runtime,
+								chunk,
+								contentHashType: "css"
+							}
+						);
+						const undoPath = getUndoPath(
+							filename,
+							compilation.outputOptions.path,
+							false
+						);
 						result.push({
 							render: () =>
 								this.renderChunk({
