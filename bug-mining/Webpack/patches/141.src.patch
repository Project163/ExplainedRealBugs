diff --git a/lib/Compilation.js b/lib/Compilation.js
index 2492515e8..430e78f59 100644
--- a/lib/Compilation.js
+++ b/lib/Compilation.js
@@ -4687,21 +4687,18 @@ This prevents using hashes of each other and should be avoided.`);
 			 * @returns {void}
 			 */
 			(module, push, callback) => {
-				this.addModuleQueue.waitFor(module, err => {
+				this.buildQueue.waitFor(module, err => {
 					if (err) return callback(err);
-					this.buildQueue.waitFor(module, err => {
+					this.processDependenciesQueue.waitFor(module, err => {
 						if (err) return callback(err);
-						this.processDependenciesQueue.waitFor(module, err => {
-							if (err) return callback(err);
-							for (const {
-								module: m
-							} of this.moduleGraph.getOutgoingConnections(module)) {
-								const size = modules.size;
-								modules.add(m);
-								if (modules.size !== size) push(m);
-							}
-							callback();
-						});
+						for (const { module: m } of this.moduleGraph.getOutgoingConnections(
+							module
+						)) {
+							const size = modules.size;
+							modules.add(m);
+							if (modules.size !== size) push(m);
+						}
+						callback();
 					});
 				});
 			},
