diff --git a/lib/optimize/ConcatenatedModule.js b/lib/optimize/ConcatenatedModule.js
index b13755a20..00fbd76ee 100644
--- a/lib/optimize/ConcatenatedModule.js
+++ b/lib/optimize/ConcatenatedModule.js
@@ -1045,16 +1045,20 @@ class ConcatenatedModule extends Module {
 		// get all global names
 		for (const info of modulesWithInfo) {
 			if (info.type === "concatenated") {
-				const superClassExpressions = [];
-
 				// ignore symbols from moduleScope
 				if (info.moduleScope) {
 					ignoredScopes.add(info.moduleScope);
+				}
 
-					// The super class expression in class scopes behaves weird
-					// We store ranges of all super class expressions to make
-					// renaming to work correctly
-					for (const childScope of info.moduleScope.childScopes) {
+				// The super class expression in class scopes behaves weird
+				// We get ranges of all super class expressions to make
+				// renaming to work correctly
+				const superClassCache = new WeakMap();
+				const getSuperClassExpressions = scope => {
+					const cacheEntry = superClassCache.get(scope);
+					if (cacheEntry !== undefined) return cacheEntry;
+					const superClassExpressions = [];
+					for (const childScope of scope.childScopes) {
 						if (childScope.type !== "class") continue;
 						const block = childScope.block;
 						if (
@@ -1068,7 +1072,9 @@ class ConcatenatedModule extends Module {
 							});
 						}
 					}
-				}
+					superClassCache.set(scope, superClassExpressions);
+					return superClassExpressions;
+				};
 
 				// add global symbols
 				if (info.globalScope) {
@@ -1101,7 +1107,7 @@ class ConcatenatedModule extends Module {
 								binding.info.module.identifier(),
 								"name" in binding ? binding.name : ""
 							);
-							for (const expr of superClassExpressions) {
+							for (const expr of getSuperClassExpressions(reference.from)) {
 								if (
 									expr.range[0] <= reference.identifier.range[0] &&
 									expr.range[1] >= reference.identifier.range[1]
diff --git a/test/cases/scope-hoisting/issue-11840/Mixin.js b/test/cases/scope-hoisting/issue-11840/Mixin.js
new file mode 100644
index 000000000..ac4784b2e
--- /dev/null
+++ b/test/cases/scope-hoisting/issue-11840/Mixin.js
@@ -0,0 +1 @@
+export const Mixin = class Mixin {};
diff --git a/test/cases/scope-hoisting/issue-11840/index.js b/test/cases/scope-hoisting/issue-11840/index.js
new file mode 100644
index 000000000..d4df5f14a
--- /dev/null
+++ b/test/cases/scope-hoisting/issue-11840/index.js
@@ -0,0 +1,7 @@
+import { Mixin } from "./Mixin";
+
+const createMixin = fn => class Mixin extends fn(Mixin) {};
+
+it("should have no name conflict", () => {
+	expect(new (createMixin(x => x))()).toBeInstanceOf(Mixin);
+});
