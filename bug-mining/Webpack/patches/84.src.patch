diff --git a/lib/optimize/ModuleConcatenationPlugin.js b/lib/optimize/ModuleConcatenationPlugin.js
index 1c8bf4984..c0f5591c8 100644
--- a/lib/optimize/ModuleConcatenationPlugin.js
+++ b/lib/optimize/ModuleConcatenationPlugin.js
@@ -225,7 +225,7 @@ class ModuleConcatenationPlugin {
 							const filteredRuntime = filterRuntime(chunkRuntime, r =>
 								exportsInfo.isModuleUsed(r)
 							);
-							const runtime =
+							const activeRuntime =
 								filteredRuntime === true
 									? chunkRuntime
 									: filteredRuntime === false
@@ -235,7 +235,7 @@ class ModuleConcatenationPlugin {
 							// create a configuration with the root
 							const currentConfiguration = new ConcatConfiguration(
 								currentRoot,
-								runtime
+								activeRuntime
 							);
 
 							// cache failures to add modules
@@ -249,7 +249,7 @@ class ModuleConcatenationPlugin {
 							for (const imp of this._getImports(
 								compilation,
 								currentRoot,
-								runtime
+								activeRuntime
 							)) {
 								candidates.add(imp);
 							}
@@ -263,7 +263,8 @@ class ModuleConcatenationPlugin {
 									compilation,
 									currentConfiguration,
 									imp,
-									runtime,
+									chunkRuntime,
+									activeRuntime,
 									possibleInners,
 									impCandidates,
 									failureCache,
@@ -498,7 +499,8 @@ class ModuleConcatenationPlugin {
 	 * @param {Compilation} compilation webpack compilation
 	 * @param {ConcatConfiguration} config concat configuration (will be modified when added)
 	 * @param {Module} module the module to be added
-	 * @param {RuntimeSpec} runtime the runtime scope
+	 * @param {RuntimeSpec} runtime the runtime scope of the generated code
+	 * @param {RuntimeSpec} activeRuntime the runtime scope of the root module
 	 * @param {Set<Module>} possibleModules modules that are candidates
 	 * @param {Set<Module>} candidates list of potential candidates (will be added to)
 	 * @param {Map<Module, Module | function(RequestShortener): string>} failureCache cache for problematic modules to be more performant
@@ -510,6 +512,7 @@ class ModuleConcatenationPlugin {
 		config,
 		module,
 		runtime,
+		activeRuntime,
 		possibleModules,
 		candidates,
 		failureCache,
@@ -732,6 +735,7 @@ class ModuleConcatenationPlugin {
 				config,
 				originModule,
 				runtime,
+				activeRuntime,
 				possibleModules,
 				candidates,
 				failureCache,
diff --git a/test/configCases/graph/issue-11856.2/a.js b/test/configCases/graph/issue-11856.2/a.js
new file mode 100644
index 000000000..244516d4d
--- /dev/null
+++ b/test/configCases/graph/issue-11856.2/a.js
@@ -0,0 +1,5 @@
+import { value } from "./shared-c";
+
+it("should have to correct value", () => {
+	expect(value).toBe(42);
+});
diff --git a/test/configCases/graph/issue-11856.2/b.js b/test/configCases/graph/issue-11856.2/b.js
new file mode 100644
index 000000000..7666bd7a0
--- /dev/null
+++ b/test/configCases/graph/issue-11856.2/b.js
@@ -0,0 +1,5 @@
+import { value } from "./b2";
+
+it("should have to correct value", () => {
+	expect(value).toBe(42);
+});
diff --git a/test/configCases/graph/issue-11856.2/b2.js b/test/configCases/graph/issue-11856.2/b2.js
new file mode 100644
index 000000000..ff5c6ca15
--- /dev/null
+++ b/test/configCases/graph/issue-11856.2/b2.js
@@ -0,0 +1 @@
+export * from "./shared-e";
diff --git a/test/configCases/graph/issue-11856.2/shared-c.js b/test/configCases/graph/issue-11856.2/shared-c.js
new file mode 100644
index 000000000..2e0539bdf
--- /dev/null
+++ b/test/configCases/graph/issue-11856.2/shared-c.js
@@ -0,0 +1 @@
+export * from "./shared-d";
diff --git a/test/configCases/graph/issue-11856.2/shared-d.js b/test/configCases/graph/issue-11856.2/shared-d.js
new file mode 100644
index 000000000..ff5c6ca15
--- /dev/null
+++ b/test/configCases/graph/issue-11856.2/shared-d.js
@@ -0,0 +1 @@
+export * from "./shared-e";
diff --git a/test/configCases/graph/issue-11856.2/shared-e.js b/test/configCases/graph/issue-11856.2/shared-e.js
new file mode 100644
index 000000000..46d3ca8c6
--- /dev/null
+++ b/test/configCases/graph/issue-11856.2/shared-e.js
@@ -0,0 +1 @@
+export const value = 42;
diff --git a/test/configCases/graph/issue-11856.2/test.config.js b/test/configCases/graph/issue-11856.2/test.config.js
new file mode 100644
index 000000000..989a7739d
--- /dev/null
+++ b/test/configCases/graph/issue-11856.2/test.config.js
@@ -0,0 +1,5 @@
+module.exports = {
+	findBundle: function (i, options) {
+		return ["shared.js", "a.js", "b.js"];
+	}
+};
diff --git a/test/configCases/graph/issue-11856.2/webpack.config.js b/test/configCases/graph/issue-11856.2/webpack.config.js
new file mode 100644
index 000000000..aa924728c
--- /dev/null
+++ b/test/configCases/graph/issue-11856.2/webpack.config.js
@@ -0,0 +1,26 @@
+/** @type {import("../../../../").Configuration} */
+module.exports = {
+	entry: {
+		a: "./a",
+		b: "./b"
+	},
+	target: "web",
+	output: {
+		filename: "[name].js",
+		library: { type: "commonjs-module" }
+	},
+	optimization: {
+		usedExports: true,
+		concatenateModules: true,
+		splitChunks: {
+			cacheGroups: {
+				forceMerge: {
+					test: /shared/,
+					enforce: true,
+					name: "shared",
+					chunks: "all"
+				}
+			}
+		}
+	}
+};
diff --git a/test/configCases/graph/issue-11856/a.js b/test/configCases/graph/issue-11856/a.js
new file mode 100644
index 000000000..244516d4d
--- /dev/null
+++ b/test/configCases/graph/issue-11856/a.js
@@ -0,0 +1,5 @@
+import { value } from "./shared-c";
+
+it("should have to correct value", () => {
+	expect(value).toBe(42);
+});
diff --git a/test/configCases/graph/issue-11856/b.js b/test/configCases/graph/issue-11856/b.js
new file mode 100644
index 000000000..69313beed
--- /dev/null
+++ b/test/configCases/graph/issue-11856/b.js
@@ -0,0 +1,5 @@
+import { value } from "./shared-d";
+
+it("should have to correct value", () => {
+	expect(value).toBe(42);
+});
diff --git a/test/configCases/graph/issue-11856/shared-c.js b/test/configCases/graph/issue-11856/shared-c.js
new file mode 100644
index 000000000..2e0539bdf
--- /dev/null
+++ b/test/configCases/graph/issue-11856/shared-c.js
@@ -0,0 +1 @@
+export * from "./shared-d";
diff --git a/test/configCases/graph/issue-11856/shared-d.js b/test/configCases/graph/issue-11856/shared-d.js
new file mode 100644
index 000000000..46d3ca8c6
--- /dev/null
+++ b/test/configCases/graph/issue-11856/shared-d.js
@@ -0,0 +1 @@
+export const value = 42;
diff --git a/test/configCases/graph/issue-11856/test.config.js b/test/configCases/graph/issue-11856/test.config.js
new file mode 100644
index 000000000..989a7739d
--- /dev/null
+++ b/test/configCases/graph/issue-11856/test.config.js
@@ -0,0 +1,5 @@
+module.exports = {
+	findBundle: function (i, options) {
+		return ["shared.js", "a.js", "b.js"];
+	}
+};
diff --git a/test/configCases/graph/issue-11856/webpack.config.js b/test/configCases/graph/issue-11856/webpack.config.js
new file mode 100644
index 000000000..aa924728c
--- /dev/null
+++ b/test/configCases/graph/issue-11856/webpack.config.js
@@ -0,0 +1,26 @@
+/** @type {import("../../../../").Configuration} */
+module.exports = {
+	entry: {
+		a: "./a",
+		b: "./b"
+	},
+	target: "web",
+	output: {
+		filename: "[name].js",
+		library: { type: "commonjs-module" }
+	},
+	optimization: {
+		usedExports: true,
+		concatenateModules: true,
+		splitChunks: {
+			cacheGroups: {
+				forceMerge: {
+					test: /shared/,
+					enforce: true,
+					name: "shared",
+					chunks: "all"
+				}
+			}
+		}
+	}
+};
