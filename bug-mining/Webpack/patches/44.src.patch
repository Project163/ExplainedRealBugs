diff --git a/lib/dependencies/HarmonyExportImportedSpecifierDependency.js b/lib/dependencies/HarmonyExportImportedSpecifierDependency.js
index 7b2fcf2a3..31dc373b3 100644
--- a/lib/dependencies/HarmonyExportImportedSpecifierDependency.js
+++ b/lib/dependencies/HarmonyExportImportedSpecifierDependency.js
@@ -293,7 +293,7 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {
 		let checked;
 
 		if (noExtraImports) {
-			for (const exportInfo of exportsInfo.exports) {
+			for (const exportInfo of exportsInfo.orderedExports) {
 				if (ignoredExports.has(exportInfo.name)) continue;
 				if (exportInfo.used !== UsageState.Unused) {
 					imports.add(exportInfo.name);
@@ -303,7 +303,7 @@ class HarmonyExportImportedSpecifierDependency extends HarmonyImportDependency {
 
 		if (noExtraExports) {
 			checked = new Set();
-			for (const exportInfo of importedExportsInfo.exports) {
+			for (const exportInfo of importedExportsInfo.orderedExports) {
 				if (ignoredExports.has(exportInfo.name)) continue;
 				switch (exportInfo.provided) {
 					case true:
diff --git a/test/HotTestCases.template.js b/test/HotTestCases.template.js
index b63ce6f9b..0072cc8fb 100644
--- a/test/HotTestCases.template.js
+++ b/test/HotTestCases.template.js
@@ -3,6 +3,7 @@
 const path = require("path");
 const fs = require("graceful-fs");
 const vm = require("vm");
+const rimraf = require("rimraf");
 const checkArrayExpectation = require("./checkArrayExpectation");
 const createLazyTestEnv = require("./helpers/createLazyTestEnv");
 
@@ -42,8 +43,8 @@ const describeCases = config => {
 									category.name,
 									testName
 								);
+								rimraf.sync(outputDirectory);
 								const recordsPath = path.join(outputDirectory, "records.json");
-								if (fs.existsSync(recordsPath)) fs.unlinkSync(recordsPath);
 								const fakeUpdateLoaderOptions = {
 									updateIndex: 0
 								};
diff --git a/test/hotCases/determinism/issue-10174/deps/a.js b/test/hotCases/determinism/issue-10174/deps/a.js
new file mode 100644
index 000000000..35dccc1ad
--- /dev/null
+++ b/test/hotCases/determinism/issue-10174/deps/a.js
@@ -0,0 +1 @@
+export * from './b'
diff --git a/test/hotCases/determinism/issue-10174/deps/b.js b/test/hotCases/determinism/issue-10174/deps/b.js
new file mode 100644
index 000000000..064f1ffa0
--- /dev/null
+++ b/test/hotCases/determinism/issue-10174/deps/b.js
@@ -0,0 +1,5 @@
+export * from './c'
+
+export function b() {
+  // this extra export is needed for the issue to reproduce
+}
diff --git a/test/hotCases/determinism/issue-10174/deps/c.js b/test/hotCases/determinism/issue-10174/deps/c.js
new file mode 100644
index 000000000..585b84134
--- /dev/null
+++ b/test/hotCases/determinism/issue-10174/deps/c.js
@@ -0,0 +1,3 @@
+export function c() {
+	return 42;
+}
diff --git a/test/hotCases/determinism/issue-10174/hot.js b/test/hotCases/determinism/issue-10174/hot.js
new file mode 100644
index 000000000..4fd270707
--- /dev/null
+++ b/test/hotCases/determinism/issue-10174/hot.js
@@ -0,0 +1,3 @@
+export default 1;
+---
+export default 2;
diff --git a/test/hotCases/determinism/issue-10174/index.js b/test/hotCases/determinism/issue-10174/index.js
new file mode 100644
index 000000000..71a1e60a4
--- /dev/null
+++ b/test/hotCases/determinism/issue-10174/index.js
@@ -0,0 +1,14 @@
+import { c } from "./deps/a";
+import hot from "./hot";
+
+it("should only register changes for the changed module", done => {
+	expect(hot).toBe(1);
+	expect(c()).toBe(42);
+	module.hot.accept("./hot", () => {
+		expect(hot).toBe(2);
+		expect(c()).toBe(42);
+		done();
+	});
+
+	NEXT(require("../../update")(done));
+});
