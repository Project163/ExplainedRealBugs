[{"url":"https://api.github.com/repos/webpack/webpack/issues/comments/710716204","html_url":"https://github.com/webpack/webpack/issues/11724#issuecomment-710716204","issue_url":"https://api.github.com/repos/webpack/webpack/issues/11724","id":710716204,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMDcxNjIwNA==","user":{"login":"code1x1","id":25490139,"node_id":"MDQ6VXNlcjI1NDkwMTM5","avatar_url":"https://avatars.githubusercontent.com/u/25490139?v=4","gravatar_id":"","url":"https://api.github.com/users/code1x1","html_url":"https://github.com/code1x1","followers_url":"https://api.github.com/users/code1x1/followers","following_url":"https://api.github.com/users/code1x1/following{/other_user}","gists_url":"https://api.github.com/users/code1x1/gists{/gist_id}","starred_url":"https://api.github.com/users/code1x1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/code1x1/subscriptions","organizations_url":"https://api.github.com/users/code1x1/orgs","repos_url":"https://api.github.com/users/code1x1/repos","events_url":"https://api.github.com/users/code1x1/events{/privacy}","received_events_url":"https://api.github.com/users/code1x1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-17T01:05:00Z","updated_at":"2020-10-17T01:05:00Z","body":"i forked your project and did minor changes to make it a working example. even with html template and external lodash script import\r\n\r\nhttps://github.com/code1x1/webpack-externals-concat-bug/tree/master\r\n\r\nyou assume that the `undefined.map` doesnt map to the `this['lodash']` module but it did and webpack did assume that `this['lodash']` will be `undefined` because this is scoped to the module closure. the webpack bundler know that `this` will not contain a lodash property in strict mode hence it will evaluate it to undefined.\r\nthe problem is that your setup is not possilbe. the main reason is when you would drop the strict mode all your modules will be in one giant this object. correct me if im missing some logic here.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/webpack/webpack/issues/comments/710716204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"code1x1","id":25490139,"node_id":"MDQ6VXNlcjI1NDkwMTM5","avatar_url":"https://avatars.githubusercontent.com/u/25490139?v=4","gravatar_id":"","url":"https://api.github.com/users/code1x1","html_url":"https://github.com/code1x1","followers_url":"https://api.github.com/users/code1x1/followers","following_url":"https://api.github.com/users/code1x1/following{/other_user}","gists_url":"https://api.github.com/users/code1x1/gists{/gist_id}","starred_url":"https://api.github.com/users/code1x1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/code1x1/subscriptions","organizations_url":"https://api.github.com/users/code1x1/orgs","repos_url":"https://api.github.com/users/code1x1/repos","events_url":"https://api.github.com/users/code1x1/events{/privacy}","received_events_url":"https://api.github.com/users/code1x1/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3889557346,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM4ODk1NTczNDY=","url":"https://api.github.com/repos/webpack/webpack/issues/events/3889557346","actor":{"login":"jsnajdr","id":664258,"node_id":"MDQ6VXNlcjY2NDI1OA==","avatar_url":"https://avatars.githubusercontent.com/u/664258?v=4","gravatar_id":"","url":"https://api.github.com/users/jsnajdr","html_url":"https://github.com/jsnajdr","followers_url":"https://api.github.com/users/jsnajdr/followers","following_url":"https://api.github.com/users/jsnajdr/following{/other_user}","gists_url":"https://api.github.com/users/jsnajdr/gists{/gist_id}","starred_url":"https://api.github.com/users/jsnajdr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jsnajdr/subscriptions","organizations_url":"https://api.github.com/users/jsnajdr/orgs","repos_url":"https://api.github.com/users/jsnajdr/repos","events_url":"https://api.github.com/users/jsnajdr/events{/privacy}","received_events_url":"https://api.github.com/users/jsnajdr/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"18c369bdfd21751dbaf4b1b30f940722cc381c8e","commit_url":"https://api.github.com/repos/Automattic/webpack/commits/18c369bdfd21751dbaf4b1b30f940722cc381c8e","created_at":"2020-10-17T18:33:46Z","performed_via_github_app":null},{"actor":{"login":"jsnajdr","id":664258,"node_id":"MDQ6VXNlcjY2NDI1OA==","avatar_url":"https://avatars.githubusercontent.com/u/664258?v=4","gravatar_id":"","url":"https://api.github.com/users/jsnajdr","html_url":"https://github.com/jsnajdr","followers_url":"https://api.github.com/users/jsnajdr/followers","following_url":"https://api.github.com/users/jsnajdr/following{/other_user}","gists_url":"https://api.github.com/users/jsnajdr/gists{/gist_id}","starred_url":"https://api.github.com/users/jsnajdr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jsnajdr/subscriptions","organizations_url":"https://api.github.com/users/jsnajdr/orgs","repos_url":"https://api.github.com/users/jsnajdr/repos","events_url":"https://api.github.com/users/jsnajdr/events{/privacy}","received_events_url":"https://api.github.com/users/jsnajdr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-17T18:44:16Z","updated_at":"2020-10-17T18:44:16Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/webpack/webpack/issues/11735","repository_url":"https://api.github.com/repos/webpack/webpack","labels_url":"https://api.github.com/repos/webpack/webpack/issues/11735/labels{/name}","comments_url":"https://api.github.com/repos/webpack/webpack/issues/11735/comments","events_url":"https://api.github.com/repos/webpack/webpack/issues/11735/events","html_url":"https://github.com/webpack/webpack/pull/11735","id":723824344,"node_id":"MDExOlB1bGxSZXF1ZXN0NTA1MzI5NTM0","number":11735,"title":"Make external modules of type 'this' work with module concatenation","user":{"login":"jsnajdr","id":664258,"node_id":"MDQ6VXNlcjY2NDI1OA==","avatar_url":"https://avatars.githubusercontent.com/u/664258?v=4","gravatar_id":"","url":"https://api.github.com/users/jsnajdr","html_url":"https://github.com/jsnajdr","followers_url":"https://api.github.com/users/jsnajdr/followers","following_url":"https://api.github.com/users/jsnajdr/following{/other_user}","gists_url":"https://api.github.com/users/jsnajdr/gists{/gist_id}","starred_url":"https://api.github.com/users/jsnajdr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jsnajdr/subscriptions","organizations_url":"https://api.github.com/users/jsnajdr/orgs","repos_url":"https://api.github.com/users/jsnajdr/repos","events_url":"https://api.github.com/users/jsnajdr/events{/privacy}","received_events_url":"https://api.github.com/users/jsnajdr/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":572712741,"node_id":"MDU6TGFiZWw1NzI3MTI3NDE=","url":"https://api.github.com/repos/webpack/webpack/labels/PR:%20CI-ok","name":"PR: CI-ok","color":"0e8a16","default":false,"description":null},{"id":572817354,"node_id":"MDU6TGFiZWw1NzI4MTczNTQ=","url":"https://api.github.com/repos/webpack/webpack/labels/PR:%20unreviewed","name":"PR: unreviewed","color":"fbca04","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-10-17T18:44:16Z","updated_at":"2020-10-26T16:09:20Z","closed_at":"2020-10-20T17:38:10Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":3678731,"node_id":"MDEwOlJlcG9zaXRvcnkzNjc4NzMx","name":"webpack","full_name":"webpack/webpack","private":false,"owner":{"login":"webpack","id":2105791,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIxMDU3OTE=","avatar_url":"https://avatars.githubusercontent.com/u/2105791?v=4","gravatar_id":"","url":"https://api.github.com/users/webpack","html_url":"https://github.com/webpack","followers_url":"https://api.github.com/users/webpack/followers","following_url":"https://api.github.com/users/webpack/following{/other_user}","gists_url":"https://api.github.com/users/webpack/gists{/gist_id}","starred_url":"https://api.github.com/users/webpack/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/webpack/subscriptions","organizations_url":"https://api.github.com/users/webpack/orgs","repos_url":"https://api.github.com/users/webpack/repos","events_url":"https://api.github.com/users/webpack/events{/privacy}","received_events_url":"https://api.github.com/users/webpack/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/webpack/webpack","description":"A bundler for javascript and friends. Packs many modules into a few bundled assets. Code Splitting allows for loading parts of the application on demand. Through \"loaders\", modules can be CommonJs, AMD, ES6 modules, CSS, Images, JSON, Coffeescript, LESS, ... and your custom stuff.","fork":false,"url":"https://api.github.com/repos/webpack/webpack","forks_url":"https://api.github.com/repos/webpack/webpack/forks","keys_url":"https://api.github.com/repos/webpack/webpack/keys{/key_id}","collaborators_url":"https://api.github.com/repos/webpack/webpack/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/webpack/webpack/teams","hooks_url":"https://api.github.com/repos/webpack/webpack/hooks","issue_events_url":"https://api.github.com/repos/webpack/webpack/issues/events{/number}","events_url":"https://api.github.com/repos/webpack/webpack/events","assignees_url":"https://api.github.com/repos/webpack/webpack/assignees{/user}","branches_url":"https://api.github.com/repos/webpack/webpack/branches{/branch}","tags_url":"https://api.github.com/repos/webpack/webpack/tags","blobs_url":"https://api.github.com/repos/webpack/webpack/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/webpack/webpack/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/webpack/webpack/git/refs{/sha}","trees_url":"https://api.github.com/repos/webpack/webpack/git/trees{/sha}","statuses_url":"https://api.github.com/repos/webpack/webpack/statuses/{sha}","languages_url":"https://api.github.com/repos/webpack/webpack/languages","stargazers_url":"https://api.github.com/repos/webpack/webpack/stargazers","contributors_url":"https://api.github.com/repos/webpack/webpack/contributors","subscribers_url":"https://api.github.com/repos/webpack/webpack/subscribers","subscription_url":"https://api.github.com/repos/webpack/webpack/subscription","commits_url":"https://api.github.com/repos/webpack/webpack/commits{/sha}","git_commits_url":"https://api.github.com/repos/webpack/webpack/git/commits{/sha}","comments_url":"https://api.github.com/repos/webpack/webpack/comments{/number}","issue_comment_url":"https://api.github.com/repos/webpack/webpack/issues/comments{/number}","contents_url":"https://api.github.com/repos/webpack/webpack/contents/{+path}","compare_url":"https://api.github.com/repos/webpack/webpack/compare/{base}...{head}","merges_url":"https://api.github.com/repos/webpack/webpack/merges","archive_url":"https://api.github.com/repos/webpack/webpack/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/webpack/webpack/downloads","issues_url":"https://api.github.com/repos/webpack/webpack/issues{/number}","pulls_url":"https://api.github.com/repos/webpack/webpack/pulls{/number}","milestones_url":"https://api.github.com/repos/webpack/webpack/milestones{/number}","notifications_url":"https://api.github.com/repos/webpack/webpack/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/webpack/webpack/labels{/name}","releases_url":"https://api.github.com/repos/webpack/webpack/releases{/id}","deployments_url":"https://api.github.com/repos/webpack/webpack/deployments","created_at":"2012-03-10T10:08:14Z","updated_at":"2025-11-08T16:39:47Z","pushed_at":"2025-11-09T07:05:36Z","git_url":"git://github.com/webpack/webpack.git","ssh_url":"git@github.com:webpack/webpack.git","clone_url":"https://github.com/webpack/webpack.git","svn_url":"https://github.com/webpack/webpack","homepage":"https://webpack.js.org","size":74292,"stargazers_count":65742,"watchers_count":65742,"language":"JavaScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":9165,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":215,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["amd","build-tool","commonjs","compiler","es2015","es6","esm","javascript","javascript-compiler","javascript-modules","loaders","module-bundler","plugins","web","web-performance","webpack"],"visibility":"public","forks":9165,"open_issues":215,"watchers":65742,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/webpack/webpack/pulls/11735","html_url":"https://github.com/webpack/webpack/pull/11735","diff_url":"https://github.com/webpack/webpack/pull/11735.diff","patch_url":"https://github.com/webpack/webpack/pull/11735.patch","merged_at":"2020-10-20T17:38:09Z"},"body":"Fixes #11724.\r\n\r\nChanges how the object lookup is wrapped in an IIFE to avoid hiding the left side of the assignment inside a function.\r\n\r\nWhen concatenating modules, the module exports are assigned to a local variable, not to `module.exports`. Therefore, the generated code of the module is:\r\n```js\r\n(function() { const lodash_namespace = this['lodash']; })();\r\n```\r\nBut because the local variable is scoped inside the function, it's not visible outside it and can't be used by other modules.\r\n\r\nIf the assignment is to `module.export`, wrapping inside a function doesn't do any harm, that's why it always worked before external modules concatenation started to be supported.\r\n\r\nAfter this patch, the IIFE wraps only the object lookup:\r\n```js\r\nconst lodash_namespace = (function() { return this['lodash']; })();\r\n```\r\n\r\nThe second change is that the external module of type `this` is forced to be in non-strict mode .That's the only mode where the `this` lookup has any meaningful behavior, accessing the global object. In strict mode the default `this` is `undefined` and the external lookup never works.\r\n","reactions":{"url":"https://api.github.com/repos/webpack/webpack/issues/11735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/webpack/webpack/issues/11735/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":3891322711,"node_id":"MDEyOkxhYmVsZWRFdmVudDM4OTEzMjI3MTE=","url":"https://api.github.com/repos/webpack/webpack/issues/events/3891322711","actor":{"login":"sokra","id":1365881,"node_id":"MDQ6VXNlcjEzNjU4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1365881?v=4","gravatar_id":"","url":"https://api.github.com/users/sokra","html_url":"https://github.com/sokra","followers_url":"https://api.github.com/users/sokra/followers","following_url":"https://api.github.com/users/sokra/following{/other_user}","gists_url":"https://api.github.com/users/sokra/gists{/gist_id}","starred_url":"https://api.github.com/users/sokra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sokra/subscriptions","organizations_url":"https://api.github.com/users/sokra/orgs","repos_url":"https://api.github.com/users/sokra/repos","events_url":"https://api.github.com/users/sokra/events{/privacy}","received_events_url":"https://api.github.com/users/sokra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-10-19T05:10:20Z","label":{"name":"critical-bug","color":"d93f0b"},"performed_via_github_app":null},{"id":3891322712,"node_id":"MDEyOkxhYmVsZWRFdmVudDM4OTEzMjI3MTI=","url":"https://api.github.com/repos/webpack/webpack/issues/events/3891322712","actor":{"login":"sokra","id":1365881,"node_id":"MDQ6VXNlcjEzNjU4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1365881?v=4","gravatar_id":"","url":"https://api.github.com/users/sokra","html_url":"https://github.com/sokra","followers_url":"https://api.github.com/users/sokra/followers","following_url":"https://api.github.com/users/sokra/following{/other_user}","gists_url":"https://api.github.com/users/sokra/gists{/gist_id}","starred_url":"https://api.github.com/users/sokra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sokra/subscriptions","organizations_url":"https://api.github.com/users/sokra/orgs","repos_url":"https://api.github.com/users/sokra/repos","events_url":"https://api.github.com/users/sokra/events{/privacy}","received_events_url":"https://api.github.com/users/sokra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-10-19T05:10:20Z","label":{"name":"webpack-5","color":"c5def5"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/webpack/webpack/issues/comments/711788444","html_url":"https://github.com/webpack/webpack/issues/11724#issuecomment-711788444","issue_url":"https://api.github.com/repos/webpack/webpack/issues/11724","id":711788444,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMTc4ODQ0NA==","user":{"login":"jsnajdr","id":664258,"node_id":"MDQ6VXNlcjY2NDI1OA==","avatar_url":"https://avatars.githubusercontent.com/u/664258?v=4","gravatar_id":"","url":"https://api.github.com/users/jsnajdr","html_url":"https://github.com/jsnajdr","followers_url":"https://api.github.com/users/jsnajdr/followers","following_url":"https://api.github.com/users/jsnajdr/following{/other_user}","gists_url":"https://api.github.com/users/jsnajdr/gists{/gist_id}","starred_url":"https://api.github.com/users/jsnajdr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jsnajdr/subscriptions","organizations_url":"https://api.github.com/users/jsnajdr/orgs","repos_url":"https://api.github.com/users/jsnajdr/repos","events_url":"https://api.github.com/users/jsnajdr/events{/privacy}","received_events_url":"https://api.github.com/users/jsnajdr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T07:52:34Z","updated_at":"2020-10-19T07:52:34Z","body":"@code1x1 While it's true that various parts of webpack evaluate JS expressions and can tell that something is always `undefined`, I don't think it's happening here. The bug is that the variable that the exports are assigned to is inside a function (the IIFE) and therefore not visible outside the function. That breaks the concatenation logic.\r\n\r\n> the main reason is when you would drop the strict mode all your modules will be in one giant this object.\r\n\r\nIf I drop the strict mode just for one module, it means that webpack will need to add `\"use strict\"` at the beginning of every module function, instead of adding just one global one at the top.\r\n\r\nThat's really happening and I'd say it's the cost of using `this` as a global. It works only in non-strict mode and doesn't make sense in strict mode.\r\n\r\nWe'll probably move away from using the `this` global in our project, as it inevitably de-optimizes the bundle, but `external: this` continues to be a supported feature of webpack and it should work.\r\n\r\nI submitted a fix in #11735 and described more implementation details there.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/webpack/webpack/issues/comments/711788444/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jsnajdr","id":664258,"node_id":"MDQ6VXNlcjY2NDI1OA==","avatar_url":"https://avatars.githubusercontent.com/u/664258?v=4","gravatar_id":"","url":"https://api.github.com/users/jsnajdr","html_url":"https://github.com/jsnajdr","followers_url":"https://api.github.com/users/jsnajdr/followers","following_url":"https://api.github.com/users/jsnajdr/following{/other_user}","gists_url":"https://api.github.com/users/jsnajdr/gists{/gist_id}","starred_url":"https://api.github.com/users/jsnajdr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jsnajdr/subscriptions","organizations_url":"https://api.github.com/users/jsnajdr/orgs","repos_url":"https://api.github.com/users/jsnajdr/repos","events_url":"https://api.github.com/users/jsnajdr/events{/privacy}","received_events_url":"https://api.github.com/users/jsnajdr/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3891879179,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mzg5MTg3OTE3OQ==","url":"https://api.github.com/repos/webpack/webpack/issues/events/3891879179","actor":{"login":"code1x1","id":25490139,"node_id":"MDQ6VXNlcjI1NDkwMTM5","avatar_url":"https://avatars.githubusercontent.com/u/25490139?v=4","gravatar_id":"","url":"https://api.github.com/users/code1x1","html_url":"https://github.com/code1x1","followers_url":"https://api.github.com/users/code1x1/followers","following_url":"https://api.github.com/users/code1x1/following{/other_user}","gists_url":"https://api.github.com/users/code1x1/gists{/gist_id}","starred_url":"https://api.github.com/users/code1x1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/code1x1/subscriptions","organizations_url":"https://api.github.com/users/code1x1/orgs","repos_url":"https://api.github.com/users/code1x1/repos","events_url":"https://api.github.com/users/code1x1/events{/privacy}","received_events_url":"https://api.github.com/users/code1x1/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-10-19T07:52:35Z","performed_via_github_app":null},{"id":3891879186,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM4OTE4NzkxODY=","url":"https://api.github.com/repos/webpack/webpack/issues/events/3891879186","actor":{"login":"code1x1","id":25490139,"node_id":"MDQ6VXNlcjI1NDkwMTM5","avatar_url":"https://avatars.githubusercontent.com/u/25490139?v=4","gravatar_id":"","url":"https://api.github.com/users/code1x1","html_url":"https://github.com/code1x1","followers_url":"https://api.github.com/users/code1x1/followers","following_url":"https://api.github.com/users/code1x1/following{/other_user}","gists_url":"https://api.github.com/users/code1x1/gists{/gist_id}","starred_url":"https://api.github.com/users/code1x1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/code1x1/subscriptions","organizations_url":"https://api.github.com/users/code1x1/orgs","repos_url":"https://api.github.com/users/code1x1/repos","events_url":"https://api.github.com/users/code1x1/events{/privacy}","received_events_url":"https://api.github.com/users/code1x1/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-10-19T07:52:35Z","performed_via_github_app":null},{"actor":{"login":"jsnajdr","id":664258,"node_id":"MDQ6VXNlcjY2NDI1OA==","avatar_url":"https://avatars.githubusercontent.com/u/664258?v=4","gravatar_id":"","url":"https://api.github.com/users/jsnajdr","html_url":"https://github.com/jsnajdr","followers_url":"https://api.github.com/users/jsnajdr/followers","following_url":"https://api.github.com/users/jsnajdr/following{/other_user}","gists_url":"https://api.github.com/users/jsnajdr/gists{/gist_id}","starred_url":"https://api.github.com/users/jsnajdr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jsnajdr/subscriptions","organizations_url":"https://api.github.com/users/jsnajdr/orgs","repos_url":"https://api.github.com/users/jsnajdr/repos","events_url":"https://api.github.com/users/jsnajdr/events{/privacy}","received_events_url":"https://api.github.com/users/jsnajdr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T13:56:02Z","updated_at":"2020-10-19T13:56:02Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/WordPress/gutenberg/issues/26272","repository_url":"https://api.github.com/repos/WordPress/gutenberg","labels_url":"https://api.github.com/repos/WordPress/gutenberg/issues/26272/labels{/name}","comments_url":"https://api.github.com/repos/WordPress/gutenberg/issues/26272/comments","events_url":"https://api.github.com/repos/WordPress/gutenberg/issues/26272/events","html_url":"https://github.com/WordPress/gutenberg/pull/26272","id":724633552,"node_id":"MDExOlB1bGxSZXF1ZXN0NTA1OTg3MDI0","number":26272,"title":"Build: assign the library exports to window.wp rather than this.wp","user":{"login":"jsnajdr","id":664258,"node_id":"MDQ6VXNlcjY2NDI1OA==","avatar_url":"https://avatars.githubusercontent.com/u/664258?v=4","gravatar_id":"","url":"https://api.github.com/users/jsnajdr","html_url":"https://github.com/jsnajdr","followers_url":"https://api.github.com/users/jsnajdr/followers","following_url":"https://api.github.com/users/jsnajdr/following{/other_user}","gists_url":"https://api.github.com/users/jsnajdr/gists{/gist_id}","starred_url":"https://api.github.com/users/jsnajdr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jsnajdr/subscriptions","organizations_url":"https://api.github.com/users/jsnajdr/orgs","repos_url":"https://api.github.com/users/jsnajdr/repos","events_url":"https://api.github.com/users/jsnajdr/events{/privacy}","received_events_url":"https://api.github.com/users/jsnajdr/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":596512821,"node_id":"MDU6TGFiZWw1OTY1MTI4MjE=","url":"https://api.github.com/repos/WordPress/gutenberg/labels/[Type]%20Build%20Tooling","name":"[Type] Build Tooling","color":"111111","default":false,"description":"Issues or PRs related to build tooling"}],"state":"closed","locked":false,"assignee":{"login":"jsnajdr","id":664258,"node_id":"MDQ6VXNlcjY2NDI1OA==","avatar_url":"https://avatars.githubusercontent.com/u/664258?v=4","gravatar_id":"","url":"https://api.github.com/users/jsnajdr","html_url":"https://github.com/jsnajdr","followers_url":"https://api.github.com/users/jsnajdr/followers","following_url":"https://api.github.com/users/jsnajdr/following{/other_user}","gists_url":"https://api.github.com/users/jsnajdr/gists{/gist_id}","starred_url":"https://api.github.com/users/jsnajdr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jsnajdr/subscriptions","organizations_url":"https://api.github.com/users/jsnajdr/orgs","repos_url":"https://api.github.com/users/jsnajdr/repos","events_url":"https://api.github.com/users/jsnajdr/events{/privacy}","received_events_url":"https://api.github.com/users/jsnajdr/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"jsnajdr","id":664258,"node_id":"MDQ6VXNlcjY2NDI1OA==","avatar_url":"https://avatars.githubusercontent.com/u/664258?v=4","gravatar_id":"","url":"https://api.github.com/users/jsnajdr","html_url":"https://github.com/jsnajdr","followers_url":"https://api.github.com/users/jsnajdr/followers","following_url":"https://api.github.com/users/jsnajdr/following{/other_user}","gists_url":"https://api.github.com/users/jsnajdr/gists{/gist_id}","starred_url":"https://api.github.com/users/jsnajdr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jsnajdr/subscriptions","organizations_url":"https://api.github.com/users/jsnajdr/orgs","repos_url":"https://api.github.com/users/jsnajdr/repos","events_url":"https://api.github.com/users/jsnajdr/events{/privacy}","received_events_url":"https://api.github.com/users/jsnajdr/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/WordPress/gutenberg/milestones/134","html_url":"https://github.com/WordPress/gutenberg/milestone/134","labels_url":"https://api.github.com/repos/WordPress/gutenberg/milestones/134/labels","id":6009431,"node_id":"MDk6TWlsZXN0b25lNjAwOTQzMQ==","number":134,"title":"Gutenberg 9.3","description":"","creator":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":117,"state":"closed","created_at":"2020-10-19T23:12:54Z","updated_at":"2020-11-18T12:31:46Z","due_on":"2020-11-02T08:00:00Z","closed_at":"2020-11-18T12:31:46Z"},"comments":5,"created_at":"2020-10-19T13:56:02Z","updated_at":"2020-10-26T11:46:46Z","closed_at":"2020-10-26T11:28:04Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":80862584,"node_id":"MDEwOlJlcG9zaXRvcnk4MDg2MjU4NA==","name":"gutenberg","full_name":"WordPress/gutenberg","private":false,"owner":{"login":"WordPress","id":276006,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI3NjAwNg==","avatar_url":"https://avatars.githubusercontent.com/u/276006?v=4","gravatar_id":"","url":"https://api.github.com/users/WordPress","html_url":"https://github.com/WordPress","followers_url":"https://api.github.com/users/WordPress/followers","following_url":"https://api.github.com/users/WordPress/following{/other_user}","gists_url":"https://api.github.com/users/WordPress/gists{/gist_id}","starred_url":"https://api.github.com/users/WordPress/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WordPress/subscriptions","organizations_url":"https://api.github.com/users/WordPress/orgs","repos_url":"https://api.github.com/users/WordPress/repos","events_url":"https://api.github.com/users/WordPress/events{/privacy}","received_events_url":"https://api.github.com/users/WordPress/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/WordPress/gutenberg","description":"The Block Editor project for WordPress and beyond. Plugin is available from the official repository.","fork":false,"url":"https://api.github.com/repos/WordPress/gutenberg","forks_url":"https://api.github.com/repos/WordPress/gutenberg/forks","keys_url":"https://api.github.com/repos/WordPress/gutenberg/keys{/key_id}","collaborators_url":"https://api.github.com/repos/WordPress/gutenberg/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/WordPress/gutenberg/teams","hooks_url":"https://api.github.com/repos/WordPress/gutenberg/hooks","issue_events_url":"https://api.github.com/repos/WordPress/gutenberg/issues/events{/number}","events_url":"https://api.github.com/repos/WordPress/gutenberg/events","assignees_url":"https://api.github.com/repos/WordPress/gutenberg/assignees{/user}","branches_url":"https://api.github.com/repos/WordPress/gutenberg/branches{/branch}","tags_url":"https://api.github.com/repos/WordPress/gutenberg/tags","blobs_url":"https://api.github.com/repos/WordPress/gutenberg/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/WordPress/gutenberg/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/WordPress/gutenberg/git/refs{/sha}","trees_url":"https://api.github.com/repos/WordPress/gutenberg/git/trees{/sha}","statuses_url":"https://api.github.com/repos/WordPress/gutenberg/statuses/{sha}","languages_url":"https://api.github.com/repos/WordPress/gutenberg/languages","stargazers_url":"https://api.github.com/repos/WordPress/gutenberg/stargazers","contributors_url":"https://api.github.com/repos/WordPress/gutenberg/contributors","subscribers_url":"https://api.github.com/repos/WordPress/gutenberg/subscribers","subscription_url":"https://api.github.com/repos/WordPress/gutenberg/subscription","commits_url":"https://api.github.com/repos/WordPress/gutenberg/commits{/sha}","git_commits_url":"https://api.github.com/repos/WordPress/gutenberg/git/commits{/sha}","comments_url":"https://api.github.com/repos/WordPress/gutenberg/comments{/number}","issue_comment_url":"https://api.github.com/repos/WordPress/gutenberg/issues/comments{/number}","contents_url":"https://api.github.com/repos/WordPress/gutenberg/contents/{+path}","compare_url":"https://api.github.com/repos/WordPress/gutenberg/compare/{base}...{head}","merges_url":"https://api.github.com/repos/WordPress/gutenberg/merges","archive_url":"https://api.github.com/repos/WordPress/gutenberg/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/WordPress/gutenberg/downloads","issues_url":"https://api.github.com/repos/WordPress/gutenberg/issues{/number}","pulls_url":"https://api.github.com/repos/WordPress/gutenberg/pulls{/number}","milestones_url":"https://api.github.com/repos/WordPress/gutenberg/milestones{/number}","notifications_url":"https://api.github.com/repos/WordPress/gutenberg/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/WordPress/gutenberg/labels{/name}","releases_url":"https://api.github.com/repos/WordPress/gutenberg/releases{/id}","deployments_url":"https://api.github.com/repos/WordPress/gutenberg/deployments","created_at":"2017-02-03T19:34:19Z","updated_at":"2025-11-09T20:05:25Z","pushed_at":"2025-11-09T19:58:09Z","git_url":"git://github.com/WordPress/gutenberg.git","ssh_url":"git@github.com:WordPress/gutenberg.git","clone_url":"https://github.com/WordPress/gutenberg.git","svn_url":"https://github.com/WordPress/gutenberg","homepage":"https://wordpress.org/gutenberg/","size":902873,"stargazers_count":11434,"watchers_count":11434,"language":"JavaScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":4595,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":7679,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["gutenberg","wordpress","wordpress-plugin"],"visibility":"public","forks":4595,"open_issues":7679,"watchers":11434,"default_branch":"trunk","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/WordPress/gutenberg/pulls/26272","html_url":"https://github.com/WordPress/gutenberg/pull/26272","diff_url":"https://github.com/WordPress/gutenberg/pull/26272.diff","patch_url":"https://github.com/WordPress/gutenberg/pull/26272.patch","merged_at":"2020-10-26T11:28:04Z"},"body":"Fixes https://github.com/WordPress/gutenberg/issues/26134.\n\nWhen the Gutenberg libraries are built into production scripts, they start with a preamble like:\r\n```js\r\nthis.wp = this.wp || {}, this.wp.data = ( function( e ) { ... } )( ... );\r\n```\r\nIt evaluates an IIFE with the compiled library and assigns the exports to `this.wp.data`. In non-strict mode, `this` evaluates to `window` or `global`. In strict mode, if the script started with `\"use strict\"`, `this` would be `undefined` and the library would fail to load.\r\n\r\nIn webpack 5, the modules are in strict mode by default, and opting out of strict mode disables some optimizations like module concatenation. `this.wp` relies on legacy JS features, namely the non-strict mode.\r\n\r\nAt the same time, many [existing WordPress scripts](https://github.com/WordPress/WordPress/blob/master/wp-admin/js/editor.js) use the same preamble with `window`:\r\n```js\r\nwindow.wp = window.wp || {}, window.wp.data = ( function( e ) { ... } )( ... );\r\n```\r\n\r\nAs the scripts are ever loaded into a browser (are they?), `window.wp` is equally good, but compatible with modern JS and tools.\r\n\r\nThis PR changes the way how build output is generated by webpack, and how the `dependency-extraction-webpack-plugin` imports external modules.\r\n\r\nIt should be fully backward compatible, because, in the end, if it succeeds, the assignment target is always `window`, both before and after.\r\n\r\nRelated webpack 5 bug that I found when playing with webpack 5 and `dependency-extraction-webpack-plugin`: https://github.com/webpack/webpack/issues/11724","reactions":{"url":"https://api.github.com/repos/WordPress/gutenberg/issues/26272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/WordPress/gutenberg/issues/26272/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":3899993636,"node_id":"MDExOkNsb3NlZEV2ZW50Mzg5OTk5MzYzNg==","url":"https://api.github.com/repos/webpack/webpack/issues/events/3899993636","actor":{"login":"sokra","id":1365881,"node_id":"MDQ6VXNlcjEzNjU4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1365881?v=4","gravatar_id":"","url":"https://api.github.com/users/sokra","html_url":"https://github.com/sokra","followers_url":"https://api.github.com/users/sokra/followers","following_url":"https://api.github.com/users/sokra/following{/other_user}","gists_url":"https://api.github.com/users/sokra/gists{/gist_id}","starred_url":"https://api.github.com/users/sokra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sokra/subscriptions","organizations_url":"https://api.github.com/users/sokra/orgs","repos_url":"https://api.github.com/users/sokra/repos","events_url":"https://api.github.com/users/sokra/events{/privacy}","received_events_url":"https://api.github.com/users/sokra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"18c369bdfd21751dbaf4b1b30f940722cc381c8e","commit_url":"https://api.github.com/repos/webpack/webpack/commits/18c369bdfd21751dbaf4b1b30f940722cc381c8e","created_at":"2020-10-20T17:38:08Z","state_reason":null,"performed_via_github_app":null}]