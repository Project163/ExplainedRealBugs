{"url":"https://api.github.com/repos/webpack/webpack/issues/9154","repository_url":"https://api.github.com/repos/webpack/webpack","labels_url":"https://api.github.com/repos/webpack/webpack/issues/9154/labels{/name}","comments_url":"https://api.github.com/repos/webpack/webpack/issues/9154/comments","events_url":"https://api.github.com/repos/webpack/webpack/issues/9154/events","html_url":"https://github.com/webpack/webpack/issues/9154","id":446141595,"node_id":"MDU6SXNzdWU0NDYxNDE1OTU=","number":9154,"title":"webpack 5 alpha 12: split chunks for node.js target returns Promise","user":{"login":"dnalborczyk","id":2903325,"node_id":"MDQ6VXNlcjI5MDMzMjU=","avatar_url":"https://avatars.githubusercontent.com/u/2903325?v=4","gravatar_id":"","url":"https://api.github.com/users/dnalborczyk","html_url":"https://github.com/dnalborczyk","followers_url":"https://api.github.com/users/dnalborczyk/followers","following_url":"https://api.github.com/users/dnalborczyk/following{/other_user}","gists_url":"https://api.github.com/users/dnalborczyk/gists{/gist_id}","starred_url":"https://api.github.com/users/dnalborczyk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dnalborczyk/subscriptions","organizations_url":"https://api.github.com/users/dnalborczyk/orgs","repos_url":"https://api.github.com/users/dnalborczyk/repos","events_url":"https://api.github.com/users/dnalborczyk/events{/privacy}","received_events_url":"https://api.github.com/users/dnalborczyk/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-05-20T14:14:18Z","updated_at":"2019-05-22T06:33:00Z","closed_at":"2019-05-22T06:33:00Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"# Bug report\r\n\r\n`webpack 5 alpha 3` introduced split chunks support for node.js (and others): https://github.com/webpack/webpack/releases/tag/v5.0.0-alpha.3 .\r\n\r\n**What is the current behavior?**\r\n\r\nthe problem is that the entry chunk returns a Promise, when loaded with `node.js`.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce.**\r\n\r\n```js\r\n// webpack.config.js\r\nexport default {\r\n  mode: 'development',\r\n  entry: {\r\n    index: './src/index.js',\r\n  },\r\n  output: {\r\n    filename: 'index.js',\r\n    libraryTarget: 'commonjs2',\r\n    path: resolve(__dirname, 'build'),\r\n  },\r\n  target: 'node',\r\n  optimization: {\r\n    splitChunks: {\r\n      cacheGroups: {\r\n        vendor: {\r\n          chunks: 'all',\r\n          filename: 'vendor.js',\r\n          name: 'vendor',\r\n          test: /node_modules/,\r\n        },\r\n      },\r\n    },\r\n  },\r\n}\r\n```\r\n\r\n```js\r\n// index.js\r\n// (uuid is just a placeholder for any module)\r\nexport {default} from 'uuid'\r\n```\r\n\r\nwhen the above is being loaded (required or imported) after the bundling, the exports of index.js would be wrapped in a Promise, e.g.:\r\n\r\n```js\r\nimport foo from './index.js'\r\n// foo is a Promise\r\n```\r\n\r\n**What is the expected behavior?**\r\n\r\nI'd expect the entry chunk to `export a commonjs module`, as opposed to a `Promise with a module`.\r\n\r\n**Other relevant information:**\r\nwebpack version:  **v5.0.0 alpha 12**\r\nNode.js version: v12.2.0\r\nOperating System: macOS 10.14.6 beta\r\nAdditional tools: -\r\n\r\n**Additional notes**\r\n\r\nwhen the `optimization` block in `webpack.config.js` is removed, and everything is bundled together, `index.js` would export the expected result.\r\n\r\nI can also provide with a github repro repository if it would be more helpful.","closed_by":{"login":"sokra","id":1365881,"node_id":"MDQ6VXNlcjEzNjU4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1365881?v=4","gravatar_id":"","url":"https://api.github.com/users/sokra","html_url":"https://github.com/sokra","followers_url":"https://api.github.com/users/sokra/followers","following_url":"https://api.github.com/users/sokra/following{/other_user}","gists_url":"https://api.github.com/users/sokra/gists{/gist_id}","starred_url":"https://api.github.com/users/sokra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sokra/subscriptions","organizations_url":"https://api.github.com/users/sokra/orgs","repos_url":"https://api.github.com/users/sokra/repos","events_url":"https://api.github.com/users/sokra/events{/privacy}","received_events_url":"https://api.github.com/users/sokra/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/webpack/webpack/issues/9154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/webpack/webpack/issues/9154/timeline","performed_via_github_app":null,"state_reason":"completed"}