{"url":"https://api.github.com/repos/webpack/webpack/issues/10168","repository_url":"https://api.github.com/repos/webpack/webpack","labels_url":"https://api.github.com/repos/webpack/webpack/issues/10168/labels{/name}","comments_url":"https://api.github.com/repos/webpack/webpack/issues/10168/comments","events_url":"https://api.github.com/repos/webpack/webpack/issues/10168/events","html_url":"https://github.com/webpack/webpack/issues/10168","id":541484936,"node_id":"MDU6SXNzdWU1NDE0ODQ5MzY=","number":10168,"title":"Bug with ModuleConcatenationPlugin re-naming of identifiers, renaming things that aren't duplicate.","user":{"login":"trusktr","id":297678,"node_id":"MDQ6VXNlcjI5NzY3OA==","avatar_url":"https://avatars.githubusercontent.com/u/297678?v=4","gravatar_id":"","url":"https://api.github.com/users/trusktr","html_url":"https://github.com/trusktr","followers_url":"https://api.github.com/users/trusktr/followers","following_url":"https://api.github.com/users/trusktr/following{/other_user}","gists_url":"https://api.github.com/users/trusktr/gists{/gist_id}","starred_url":"https://api.github.com/users/trusktr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trusktr/subscriptions","organizations_url":"https://api.github.com/users/trusktr/orgs","repos_url":"https://api.github.com/users/trusktr/repos","events_url":"https://api.github.com/users/trusktr/events{/privacy}","received_events_url":"https://api.github.com/users/trusktr/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-12-22T18:16:17Z","updated_at":"2019-12-24T07:01:41Z","closed_at":"2019-12-24T07:01:41Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!-- Please don't delete this template because we'll close your issue -->\r\n<!-- Before creating an issue please make sure you are using the latest version of webpack. -->\r\n\r\n# Bug report\r\n\r\nFor example I do not have any duplicates of classes named `BaseMeshBehavior`, but in the output I see\r\n\r\n```js\r\nclass BaseMeshBehavior_BaseMeshBehavior extends Behavior_Behavior {\r\n```\r\n\r\n**What is the current behavior?**\r\n\r\nrenaming of identifiers although there are not more than one definition.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce.**\r\n\r\n```js\r\n//@ts-check\r\nconst CWD = process.cwd();\r\n\r\nconst camelcase = require(\"camelcase\");\r\nconst path = require(\"path\");\r\nconst fs = require(\"fs\");\r\nconst webpack = require(\"webpack\");\r\nconst r = require(\"regexr\").default;\r\nconst pkg = require(path.join(CWD, \"package.json\"));\r\nconst builderConfigPath = path.join(CWD, \"builder.config.js\");\r\nconst builderConfig = fs.existsSync(builderConfigPath)\r\n  ? require(builderConfigPath)\r\n  : {};\r\nconst pkgNameParts = pkg.name.split(\"/\");\r\nconst lastPkgNamePart = pkgNameParts[pkgNameParts.length - 1];\r\nconst globalName = builderConfig.globalName;\r\nconst NAME =\r\n  globalName === false || globalName === \"\"\r\n    ? \"\"\r\n    : globalName || camelcase(lastPkgNamePart);\r\n\r\nconst alsoResolveRelativeToArchetype = () => [\r\n  path.relative(\r\n    CWD,\r\n    path.join(\r\n      path.dirname(require.resolve(\"builder-js-package\")),\r\n      \"node_modules\"\r\n    )\r\n  ),\r\n  \"node_modules\"\r\n];\r\n\r\nmodule.exports = {\r\n  entry: `.${path.sep}dist${path.sep}index`,\r\n  output: {\r\n    path: path.join(CWD, \"dist\"),\r\n    filename: \"global.js\",\r\n    library: NAME,\r\n    libraryTarget: \"var\" // alternative: \"window\"\r\n  },\r\n  resolve: {\r\n    modules: alsoResolveRelativeToArchetype(),\r\n    extensions: [\".js\"]\r\n  },\r\n  resolveLoader: {\r\n    modules: alsoResolveRelativeToArchetype()\r\n  },\r\n  module: {\r\n    rules: [\r\n      {\r\n        test: /\\.js$/,\r\n        use: [\"source-map-loader\"],\r\n        enforce: \"pre\"\r\n      }\r\n    ]\r\n  },\r\n  plugins: [new webpack.optimize.ModuleConcatenationPlugin()],\r\n  devtool: \"source-map\",\r\n  mode: \"production\",\r\n  optimization: { minimize: true },\r\n  stats: { assets: false }\r\n};\r\n```\r\n\r\n**What is the expected behavior?**\r\n\r\nIt should not rename anything if it is not necessary. At the moment, it seems to rename many of my classes, but there are no definitions of anything else with the same name so there's no reason to rename them (as far as I know). \r\n\r\nFor reference, Rollup doesn't rename them.\r\n\r\nThis is what I see in the output:\r\n\r\n```js\r\n/* concated harmony reexport DeclarativeBase */__webpack_require__.d(__webpack_exports__, \"DeclarativeBase\", function() { return DeclarativeBase_DeclarativeBase; });\r\n/* concated harmony reexport HTMLNode */__webpack_require__.d(__webpack_exports__, \"HTMLNode\", function() { return HTMLNode_HTMLNode; });\r\n/* concated harmony reexport HTMLScene */__webpack_require__.d(__webpack_exports__, \"HTMLScene\", function() { return HTMLScene_HTMLScene; });\r\n/* concated harmony reexport WebComponent */__webpack_require__.d(__webpack_exports__, \"WebComponent\", function() { return WebComponent_WebComponent; });\r\n/* concated harmony reexport BaseGeometryBehavior */__webpack_require__.d(__webpack_exports__, \"BaseGeometryBehavior\", function() { return BaseGeometryBehavior_BaseGeometryBehavior; });\r\n/* concated harmony reexport BaseMaterialBehavior */__webpack_require__.d(__webpack_exports__, \"BaseMaterialBehavior\", function() { return BaseMaterialBehavior_BaseMaterialBehavior; });\r\n/* concated harmony reexport BaseMeshBehavior */__webpack_require__.d(__webpack_exports__, \"BaseMeshBehavior\", function() { return BaseMeshBehavior_BaseMeshBehavior; });\r\n/* concated harmony reexport BasicMaterialBehavior */__webpack_require__.d(__webpack_exports__, \"BasicMaterialBehavior\", function() { return BasicMaterialBehavior_BasicMaterialBehavior; });\r\n/* concated harmony reexport BoxGeometryBehavior */__webpack_require__.d(__webpack_exports__, \"BoxGeometryBehavior\", function() { return BoxGeometryBehavior_BoxGeometryBehavior; });\r\n/* concated harmony reexport DefaultBehaviors */__webpack_require__.d(__webpack_exports__, \"DefaultBehaviors\", function() { return DefaultBehaviors_DefaultBehaviors; });\r\n/* concated harmony reexport DOMNodeGeometryBehavior */__webpack_require__.d(__webpack_exports__, \"DOMNodeGeometryBehavior\", function() { return DOMNodeGeometryBehavior_DOMNodeGeometryBehavior; });\r\n/* concated harmony reexport DOMNodeMaterialBehavior */__webpack_require__.d(__webpack_exports__, \"DOMNodeMaterialBehavior\", function() { return DOMNodeMaterialBehavior_DOMNodeMaterialBehavior; });\r\n/* concated harmony reexport ObjModelBehavior */__webpack_require__.d(__webpack_exports__, \"ObjModelBehavior\", function() { return ObjModelBehavior_ObjModelBehavior; });\r\n/* concated harmony reexport PhongMaterialBehavior */__webpack_require__.d(__webpack_exports__, \"PhongMaterialBehavior\", function() { return PhongMaterialBehavior_PhongMaterialBehavior; });\r\n/* concated harmony reexport PlaneGeometryBehavior */__webpack_require__.d(__webpack_exports__, \"PlaneGeometryBehavior\", function() { return PlaneGeometryBehavior_PlaneGeometryBehavior; });\r\n/* concated harmony reexport SphereGeometryBehavior */__webpack_require__.d(__webpack_exports__, \"SphereGeometryBehavior\", function() { return SphereGeometryBehavior_SphereGeometryBehavior; });\r\n/* concated harmony reexport Cube */__webpack_require__.d(__webpack_exports__, \"Cube\", function() { return Cube_Cube; });\r\n/* concated harmony reexport PushPaneLayout */__webpack_require__.d(__webpack_exports__, \"PushPaneLayout\", function() { return PushPaneLayout_PushPaneLayout; });\r\n```\r\n\r\nFor each of those identifiers, there's only one of them anywhere in my project.\r\n\r\nRelated: https://github.com/webpack/webpack/issues/5463 (by @Michael-Tajmajer-Emrsn)\r\n\r\n**Other relevant information:**\r\nwebpack version:  4.27.1\r\nNode.js version: v13.5.0\r\nOperating System: macOS\r\nAdditional tools:\r\n","closed_by":{"login":"sokra","id":1365881,"node_id":"MDQ6VXNlcjEzNjU4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1365881?v=4","gravatar_id":"","url":"https://api.github.com/users/sokra","html_url":"https://github.com/sokra","followers_url":"https://api.github.com/users/sokra/followers","following_url":"https://api.github.com/users/sokra/following{/other_user}","gists_url":"https://api.github.com/users/sokra/gists{/gist_id}","starred_url":"https://api.github.com/users/sokra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sokra/subscriptions","organizations_url":"https://api.github.com/users/sokra/orgs","repos_url":"https://api.github.com/users/sokra/repos","events_url":"https://api.github.com/users/sokra/events{/privacy}","received_events_url":"https://api.github.com/users/sokra/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/webpack/webpack/issues/10168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/webpack/webpack/issues/10168/timeline","performed_via_github_app":null,"state_reason":"completed"}