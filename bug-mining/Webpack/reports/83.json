{"url":"https://api.github.com/repos/webpack/webpack/issues/11770","repository_url":"https://api.github.com/repos/webpack/webpack","labels_url":"https://api.github.com/repos/webpack/webpack/issues/11770/labels{/name}","comments_url":"https://api.github.com/repos/webpack/webpack/issues/11770/comments","events_url":"https://api.github.com/repos/webpack/webpack/issues/11770/events","html_url":"https://github.com/webpack/webpack/issues/11770","id":726429840,"node_id":"MDU6SXNzdWU3MjY0Mjk4NDA=","number":11770,"title":"splitChunks with innerGraph does not add required dependencies into common chunk","user":{"login":"Knagis","id":8700285,"node_id":"MDQ6VXNlcjg3MDAyODU=","avatar_url":"https://avatars.githubusercontent.com/u/8700285?v=4","gravatar_id":"","url":"https://api.github.com/users/Knagis","html_url":"https://github.com/Knagis","followers_url":"https://api.github.com/users/Knagis/followers","following_url":"https://api.github.com/users/Knagis/following{/other_user}","gists_url":"https://api.github.com/users/Knagis/gists{/gist_id}","starred_url":"https://api.github.com/users/Knagis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Knagis/subscriptions","organizations_url":"https://api.github.com/users/Knagis/orgs","repos_url":"https://api.github.com/users/Knagis/repos","events_url":"https://api.github.com/users/Knagis/events{/privacy}","received_events_url":"https://api.github.com/users/Knagis/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":816832417,"node_id":"MDU6TGFiZWw4MTY4MzI0MTc=","url":"https://api.github.com/repos/webpack/webpack/labels/webpack-5","name":"webpack-5","color":"c5def5","default":false,"description":""},{"id":2424789964,"node_id":"MDU6TGFiZWwyNDI0Nzg5OTY0","url":"https://api.github.com/repos/webpack/webpack/labels/critical-bug","name":"critical-bug","color":"d93f0b","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":40,"created_at":"2020-10-21T12:23:03Z","updated_at":"2020-10-28T12:26:26Z","closed_at":"2020-10-27T11:50:54Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!-- Please don't delete this template because we'll close your issue -->\r\n<!-- Before creating an issue please make sure you are using the latest version of webpack. -->\r\n\r\n# Bug report\r\n\r\n<!-- Please ask questions on StackOverflow or the webpack Gitter. -->\r\n<!-- https://stackoverflow.com/questions/ask?tags=webpack -->\r\n<!-- https://gitter.im/webpack/webpack -->\r\n<!-- Issues which contain questions or support requests will be closed. -->\r\n\r\n**What is the current behavior?**\r\n\r\nTwo entries and common chunk (see the linked repo for more details):\r\n* index1 - imports dep1 which imports dep2. actually uses both of them\r\n* index2 - imports dep1 but only uses a function that does not depend on dep2\r\n* commons - contains everything that is used by more than one entry\r\n\r\nThe issue is that dep2 is detected only as required only for index1 (since index2 does not actually use it). By itself that is kind of fine - when loading commons+index1, everything works, because dep2 is loaded from index1 chunk.\r\n\r\nHowever when loading index2, fails with runtime error due to the fact that in commons chunk, dep1 still lists dep2 as dependency - but it is not included in either commons or index2.\r\n\r\n**If the current behavior is a bug, please provide the steps to reproduce.**\r\n\r\nhttps://github.com/Knagis/webpack-concat-issue/tree/commons-error\r\n\r\n<!-- A great way to do this is to provide your configuration via a GitHub repository -->\r\n<!-- The most helpful is a minimal reproduction with instructions on how to reproduce -->\r\n<!-- Repositories with too many files or large `webpack.config.js` files are not suitable -->\r\n<!-- Please only add small code snippets directly into this issue -->\r\n<!-- https://gist.github.com is a good place for longer code snippets -->\r\n<!-- If your issue is caused by a plugin or loader, please create an issue on the loader/plugin repository instead -->\r\n\r\n**What is the expected behavior?**\r\n\r\nno runtime errors (either dep2 is included in commons chunk or it is loaded only when calling the function that uses it or various other combinations of moving/splitting the modules so that it works for both entries)\r\n\r\n<!-- \"It should work\" is not a helpful explanation -->\r\n<!-- Explain exactly how it should behave -->\r\n\r\n**Other relevant information:**\r\nwebpack version:  5.1.3\r\nNode.js version: 12.13.1\r\nOperating System: Win10\r\nAdditional tools:\r\n","closed_by":{"login":"sokra","id":1365881,"node_id":"MDQ6VXNlcjEzNjU4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1365881?v=4","gravatar_id":"","url":"https://api.github.com/users/sokra","html_url":"https://github.com/sokra","followers_url":"https://api.github.com/users/sokra/followers","following_url":"https://api.github.com/users/sokra/following{/other_user}","gists_url":"https://api.github.com/users/sokra/gists{/gist_id}","starred_url":"https://api.github.com/users/sokra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sokra/subscriptions","organizations_url":"https://api.github.com/users/sokra/orgs","repos_url":"https://api.github.com/users/sokra/repos","events_url":"https://api.github.com/users/sokra/events{/privacy}","received_events_url":"https://api.github.com/users/sokra/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/webpack/webpack/issues/11770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/webpack/webpack/issues/11770/timeline","performed_via_github_app":null,"state_reason":"completed"}