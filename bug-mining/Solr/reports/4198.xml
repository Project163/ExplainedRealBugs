<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:38:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-13414] SolrSchema - Avoid NPE if Luke returns field with no type defined</title>
                <link>https://issues.apache.org/jira/browse/SOLR-13414</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;&lt;b&gt;Summary&lt;/b&gt;&lt;br/&gt;
If the underlying Lucene index has fields defined but no type, SolrSchema fails with NPE. The index most likely has issues and would be better to delete/recreate the index. This ticket adds a null check to prevent the NPE and won&apos;t break on a potentially invalid index.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Initial Description&lt;/b&gt;&lt;br/&gt;
When attempting to create a JDBC sql query against a large collection (400m + records) we get a null error.&lt;/p&gt;

&lt;p&gt;After &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/lucene-solr-user/201904.mbox/%3C1dd6ac3b-e17b-4c29-872e-c7560504a46c%40Spark%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;initial discussion in solr-user&lt;/a&gt; I have been asked to open this ticket - The exception thrown does not provide sufficient detail to understand the underlying problem. Its it thought to be an issue with the schema not initialising correctly.&#160;&lt;/p&gt;

&lt;p&gt;Attached is the managed-schema after a downconfig.&lt;/p&gt;

&lt;p&gt;Stack trace from email thread:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Solr Admin UI Logging&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.io.IOException: Failed to execute sqlQuery &lt;span class=&quot;code-quote&quot;&gt;&apos;select id from document limit 10&apos;&lt;/span&gt; against JDBC connection &lt;span class=&quot;code-quote&quot;&gt;&apos;jdbc:calcitesolr:&apos;&lt;/span&gt;.
Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; executing SQL &lt;span class=&quot;code-quote&quot;&gt;&quot;select id from document limit 10&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
        at org.apache.solr.client.solrj.io.stream.JDBCStream.open(JDBCStream.java:271)
        at org.apache.solr.client.solrj.io.stream.ExceptionStream.open(ExceptionStream.java:54)
        at org.apache.solr.handler.StreamHandler$TimerStream.open(StreamHandler.java:394)
        at org.apache.solr.client.solrj.io.stream.TupleStream.writeMap(TupleStream.java:78)
        at org.apache.solr.common.util.JsonTextWriter.writeMap(JsonTextWriter.java:164)
        at org.apache.solr.common.util.TextWriter.writeVal(TextWriter.java:69)
        at org.apache.solr.response.TextResponseWriter.writeVal(TextResponseWriter.java:152)
        at org.apache.solr.common.util.JsonTextWriter.writeNamedListAsMapWithDups(JsonTextWriter.java:386)
        at org.apache.solr.common.util.JsonTextWriter.writeNamedList(JsonTextWriter.java:292)
        at org.apache.solr.response.JSONWriter.writeResponse(JSONWriter.java:73)
        at org.apache.solr.response.JSONResponseWriter.write(JSONResponseWriter.java:66)
        at org.apache.solr.response.QueryResponseWriterUtil.writeQueryResponse(QueryResponseWriterUtil.java:65)
        at org.apache.solr.servlet.HttpSolrCall.writeResponse(HttpSolrCall.java:788)
        at org.apache.solr.servlet.HttpSolrCall.call(HttpSolrCall.java:525)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:395)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:341)
        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1602)
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:540)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:146)
        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)
        at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:257)
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1588)
        at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255)
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1345)
        at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:203)
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:480)
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1557)
        at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:201)
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1247)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:144)
        at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:220)
        at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:126)
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)
        at org.eclipse.jetty.rewrite.handler.RewriteHandler.handle(RewriteHandler.java:335)
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)
        at org.eclipse.jetty.server.Server.handle(Server.java:502)
        at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:364)
        at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:260)
        at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:305)
        at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)
        at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:118)
        at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:333)
        at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:310)
        at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:168)
        at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:126)
        at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:366)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:765)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:683)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source)
Caused by: java.sql.SQLException: Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; executing SQL &lt;span class=&quot;code-quote&quot;&gt;&quot;select id from document limit 10&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
        at org.apache.calcite.avatica.Helper.createException(Helper.java:56)
        at org.apache.calcite.avatica.Helper.createException(Helper.java:41)
        at org.apache.calcite.avatica.AvaticaStatement.executeInternal(AvaticaStatement.java:156)
        at org.apache.calcite.avatica.AvaticaStatement.executeQuery(AvaticaStatement.java:218)
        at org.apache.solr.client.solrj.io.stream.JDBCStream.open(JDBCStream.java:269)
        ... 49 more
Caused by: java.lang.NullPointerException
        at org.apache.calcite.plan.volcano.VolcanoPlanner.validate(VolcanoPlanner.java:891)
        at org.apache.calcite.plan.volcano.VolcanoPlanner.register(VolcanoPlanner.java:866)
        at org.apache.calcite.plan.volcano.VolcanoPlanner.ensureRegistered(VolcanoPlanner.java:883)
        at org.apache.calcite.plan.volcano.VolcanoPlanner.ensureRegistered(VolcanoPlanner.java:101)
        at org.apache.calcite.rel.AbstractRelNode.onRegister(AbstractRelNode.java:336)
        at org.apache.calcite.plan.volcano.VolcanoPlanner.registerImpl(VolcanoPlanner.java:1496)
        at org.apache.calcite.plan.volcano.VolcanoPlanner.register(VolcanoPlanner.java:863)
        at org.apache.calcite.plan.volcano.VolcanoPlanner.ensureRegistered(VolcanoPlanner.java:883)
        at org.apache.calcite.plan.volcano.VolcanoPlanner.ensureRegistered(VolcanoPlanner.java:101)
        at org.apache.calcite.rel.AbstractRelNode.onRegister(AbstractRelNode.java:336)
        at org.apache.calcite.plan.volcano.VolcanoPlanner.registerImpl(VolcanoPlanner.java:1496)
        at org.apache.calcite.plan.volcano.VolcanoPlanner.setRoot(VolcanoPlanner.java:308)
        at org.apache.calcite.tools.Programs$5.run(Programs.java:309)
        at org.apache.calcite.tools.Programs$SequenceProgram.run(Programs.java:387)
        at org.apache.calcite.prepare.Prepare.optimize(Prepare.java:186)
        at org.apache.calcite.prepare.Prepare.prepareSql(Prepare.java:319)
        at org.apache.calcite.prepare.Prepare.prepareSql(Prepare.java:228)
        at org.apache.calcite.prepare.CalcitePrepareImpl.prepare2_(CalcitePrepareImpl.java:784)
        at org.apache.calcite.prepare.CalcitePrepareImpl.prepare_(CalcitePrepareImpl.java:639)
        at org.apache.calcite.prepare.CalcitePrepareImpl.prepareSql(CalcitePrepareImpl.java:609)
        at org.apache.calcite.jdbc.CalciteConnectionImpl.parseQuery(CalciteConnectionImpl.java:214)
        at org.apache.calcite.jdbc.CalciteMetaImpl.prepareAndExecute(CalciteMetaImpl.java:603)
        at org.apache.calcite.avatica.AvaticaConnection.prepareAndExecuteInternal(AvaticaConnection.java:638)
        at org.apache.calcite.avatica.AvaticaStatement.executeInternal(AvaticaStatement.java:149)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;solr.log&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; executing SQL &lt;span class=&quot;code-quote&quot;&gt;&quot;select id from data limit 10&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;

at
org.apache.solr.client.solrj.io.stream.JDBCStream.open(JDBCStream.java:271)
at
org.apache.solr.client.solrj.io.stream.ExceptionStream.open(ExceptionStream.java:54)
at
org.apache.solr.handler.StreamHandler$TimerStream.open(StreamHandler.java:394)
at
org.apache.solr.client.solrj.io.stream.TupleStream.writeMap(TupleStream.java:78)
at
org.apache.solr.common.util.JsonTextWriter.writeMap(JsonTextWriter.java:164)
at org.apache.solr.common.util.TextWriter.writeVal(TextWriter.java:69)
at
org.apache.solr.response.TextResponseWriter.writeVal(TextResponseWriter.java:152)
at
org.apache.solr.common.util.JsonTextWriter.writeNamedListAsMapWithDups(JsonTextWriter.java:386)
at
org.apache.solr.common.util.JsonTextWriter.writeNamedList(JsonTextWriter.java:292)
at org.apache.solr.response.JSONWriter.writeResponse(JSONWriter.java:73)
at
org.apache.solr.response.JSONResponseWriter.write(JSONResponseWriter.java:66)
at
org.apache.solr.response.QueryResponseWriterUtil.writeQueryResponse(QueryResponseWriterUtil.java:65)
at org.apache.solr.servlet.HttpSolrCall.writeResponse(HttpSolrCall.java:788)
at org.apache.solr.servlet.HttpSolrCall.call(HttpSolrCall.java:525)
at
org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:395)
at
org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:341)
at
org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1602)
at
org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:540)
at
org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:146)
at
org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)
at
org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)
at
org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:257)
at
org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1588)
at
org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255)
at
org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1345)
at
org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:203)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:480)
at
org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1557)
at
org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:201)
at
org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1247)
at
org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:144)
at
org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:220)
at
org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:126)
at
org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)
at
org.eclipse.jetty.rewrite.handler.RewriteHandler.handle(RewriteHandler.java:335)
at
org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)
at org.eclipse.jetty.server.Server.handle(Server.java:502)
at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:364)
at
org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:260)
at
org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:305)
at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)
at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:118)
at
org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:333)
at
org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:310)
at
org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:168)
at
org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.produce(EatWhatYouKill.java:132)
at
org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:765)
at
org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:683)
at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source)
Caused by: java.sql.SQLException: Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; executing SQL &quot;select id from
data limit 10&quot;: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
at org.apache.calcite.avatica.Helper.createException(Helper.java:56)
at org.apache.calcite.avatica.Helper.createException(Helper.java:41)
at
org.apache.calcite.avatica.AvaticaStatement.executeInternal(AvaticaStatement.java:156)
at
org.apache.calcite.avatica.AvaticaStatement.executeQuery(AvaticaStatement.java:218)
at
org.apache.solr.client.solrj.io.stream.JDBCStream.open(JDBCStream.java:269)
... 48 more
Caused by: java.lang.NullPointerException
at
org.apache.solr.handler.sql.SolrSchema.getRelDataType(SolrSchema.java:103)
at org.apache.solr.handler.sql.SolrTable.getRowType(SolrTable.java:83)
at org.apache.calcite.sql.validate.EmptyScope.resolve_(EmptyScope.java:159)
at
org.apache.calcite.sql.validate.EmptyScope.resolveTable(EmptyScope.java:99)
at
org.apache.calcite.sql.validate.DelegatingScope.resolveTable(DelegatingScope.java:202)
at
org.apache.calcite.sql.validate.IdentifierNamespace.resolveImpl(IdentifierNamespace.java:104)
at
org.apache.calcite.sql.validate.IdentifierNamespace.validateImpl(IdentifierNamespace.java:167)
at
org.apache.calcite.sql.validate.AbstractNamespace.validate(AbstractNamespace.java:84)
at
org.apache.calcite.sql.validate.SqlValidatorImpl.validateNamespace(SqlValidatorImpl.java:939)
at
org.apache.calcite.sql.validate.SqlValidatorImpl.validateQuery(SqlValidatorImpl.java:920)
at
org.apache.calcite.sql.validate.SqlValidatorImpl.validateFrom(SqlValidatorImpl.java:2954)
at
org.apache.calcite.sql.validate.SqlValidatorImpl.validateFrom(SqlValidatorImpl.java:2939)
at
org.apache.calcite.sql.validate.SqlValidatorImpl.validateSelect(SqlValidatorImpl.java:3181)
at
org.apache.calcite.sql.validate.SelectNamespace.validateImpl(SelectNamespace.java:60)
at
org.apache.calcite.sql.validate.AbstractNamespace.validate(AbstractNamespace.java:84)
at
org.apache.calcite.sql.validate.SqlValidatorImpl.validateNamespace(SqlValidatorImpl.java:939)
at
org.apache.calcite.sql.validate.SqlValidatorImpl.validateQuery(SqlValidatorImpl.java:920)
at org.apache.calcite.sql.SqlSelect.validate(SqlSelect.java:220)
at
org.apache.calcite.sql.validate.SqlValidatorImpl.validateScopedExpression(SqlValidatorImpl.java:895)
at
org.apache.calcite.sql.validate.SqlValidatorImpl.validate(SqlValidatorImpl.java:605)
at
org.apache.calcite.sql2rel.SqlToRelConverter.convertQuery(SqlToRelConverter.java:550)
at org.apache.calcite.prepare.Prepare.prepareSql(Prepare.java:264)
at org.apache.calcite.prepare.Prepare.prepareSql(Prepare.java:228)
at
org.apache.calcite.prepare.CalcitePrepareImpl.prepare2_(CalcitePrepareImpl.java:784)
at
org.apache.calcite.prepare.CalcitePrepareImpl.prepare_(CalcitePrepareImpl.java:639)
at
org.apache.calcite.prepare.CalcitePrepareImpl.prepareSql(CalcitePrepareImpl.java:609)
at
org.apache.calcite.jdbc.CalciteConnectionImpl.parseQuery(CalciteConnectionImpl.java:214)
at
org.apache.calcite.jdbc.CalciteMetaImpl.prepareAndExecute(CalciteMetaImpl.java:603)
at
org.apache.calcite.avatica.AvaticaConnection.prepareAndExecuteInternal(AvaticaConnection.java:638)
at
org.apache.calcite.avatica.AvaticaStatement.executeInternal(AvaticaStatement.java:149)
... 50 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13229034">SOLR-13414</key>
            <summary>SolrSchema - Avoid NPE if Luke returns field with no type defined</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="krisden">Kevin Risden</assignee>
                                    <reporter username="davebarnett">David Barnett</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Apr 2019 11:42:37 +0000</created>
                <updated>Tue, 8 Oct 2019 14:50:07 +0000</updated>
                            <resolved>Fri, 26 Apr 2019 14:31:04 +0000</resolved>
                                    <version>7.3</version>
                    <version>7.7.1</version>
                                    <fixVersion>7.7.2</fixVersion>
                    <fixVersion>8.1</fixVersion>
                    <fixVersion>9.0</fixVersion>
                                    <component>Parallel SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="16822014" author="joel.bernstein" created="Fri, 19 Apr 2019 16:02:25 +0000"  >&lt;p&gt;Ok, I&apos;ll attach a binary with added debugging for the 7.7.1 build.&lt;/p&gt;</comment>
                            <comment id="16822025" author="joel.bernstein" created="Fri, 19 Apr 2019 16:20:00 +0000"  >&lt;p&gt;I attached two things:&lt;/p&gt;

&lt;p&gt;1) A new jar for solr-core built from branch_7x. It should be basically the same as 7.7.1 as dev has stopped on the 7x branch.&lt;/p&gt;

&lt;p&gt;2) A patch file with the change.&lt;/p&gt;

&lt;p&gt;This outputs a line to the console log file with information about which field is being loaded from the schema and if the field info is null. I believe this will show us which field is causing the null pointer.&lt;/p&gt;

&lt;p&gt;You can replace the solr-core.jar with the binary here. Keep a copy of the old jar and copy it back when done.&lt;/p&gt;</comment>
                            <comment id="16824200" author="davebarnett" created="Tue, 23 Apr 2019 14:54:30 +0000"  >&lt;p&gt;Hi Joel&lt;/p&gt;

&lt;p&gt;Thanks for this, I installed the core.jar and re ran my tests, I&apos;ve attached the solr.log. Nothing obvious jumping out.&lt;/p&gt;</comment>
                            <comment id="16824204" author="risdenk" created="Tue, 23 Apr 2019 14:57:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davebarnett&quot; class=&quot;user-hover&quot; rel=&quot;davebarnett&quot;&gt;davebarnett&lt;/a&gt; - the System.out.println lines should go to the .out file if there is one in Solr. Not sure it will be in the  log file. Depending where you are storing Solr logs you might be able to find the right file with &lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
grep -rnF &lt;span class=&quot;code-quote&quot;&gt;&apos;Field Info is&apos;&lt;/span&gt; PATH_TO_SOLR_INSTALL
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16824235" author="davebarnett" created="Tue, 23 Apr 2019 15:20:07 +0000"  >&lt;p&gt;Hi Kevin, thanks for that. I cannot see a .out file and I&apos;m running this Solr instance on Windows 10.&lt;/p&gt;

&lt;p&gt;I&apos;ve also started Solr 7.x using command line from a windows command shell. I assume thats the console in this case too - I see no verbose output (beyond happy searching - screenshot attached)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16824268" author="joel.bernstein" created="Tue, 23 Apr 2019 15:45:47 +0000"  >&lt;p&gt;In the logs directory is there a log file with console in it? What files do you see in the logs directory?&lt;/p&gt;

&lt;p&gt;I don&apos;t have easy access to a windows setup. If need be I can output to the solr.log as well.&lt;/p&gt;</comment>
                            <comment id="16824277" author="davebarnett" created="Tue, 23 Apr 2019 15:56:33 +0000"  >&lt;p&gt;console log attached Joel, not much in there too&lt;/p&gt;</comment>
                            <comment id="16824344" author="risdenk" created="Tue, 23 Apr 2019 17:17:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davebarnett&quot; class=&quot;user-hover&quot; rel=&quot;davebarnett&quot;&gt;davebarnett&lt;/a&gt; - Just to make sure I understand what has been tried/attached so far. Here is what I think should happen:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Stop Solr&lt;/li&gt;
	&lt;li&gt;Put modified solr-core jar in place (move old one out of the Solr install directory)&lt;/li&gt;
	&lt;li&gt;Start Solr&lt;/li&gt;
	&lt;li&gt;Try to run SQL query&lt;/li&gt;
	&lt;li&gt;Check logs for lines with &apos;Field Info is&apos;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I think something wasn&apos;t done properly because the new stacktrace from the Solr log has line numbers that match the original report. I would have expected new line numbers with the new jar since there were added lines. &lt;/p&gt;</comment>
                            <comment id="16824556" author="davebarnett" created="Tue, 23 Apr 2019 21:21:42 +0000"  >&lt;p&gt;Hi Kevin, its possible something didn&apos;t happen as planned but I made sure, core was replaced and old core was renamed. Emptied tmp, and deleted old logs (as per screenshot attached).&lt;/p&gt;

&lt;p&gt;Will try again and post the new solr.log and console-log - just in case I missed something.&lt;/p&gt;

&lt;p&gt;Thanks Dave&lt;/p&gt;</comment>
                            <comment id="16825563" author="davebarnett" created="Wed, 24 Apr 2019 23:09:00 +0000"  >&lt;p&gt;Hi Joel, any other thoughts on this?&lt;/p&gt;

&lt;p&gt;We really would like to understand the issue.&lt;/p&gt;

&lt;p&gt;Thanks very much&lt;/p&gt;

</comment>
                            <comment id="16825580" author="elyograg" created="Wed, 24 Apr 2019 23:45:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;and old core was renamed&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t think you can just rename the old jar.  It needs to be completely removed from WEB-INF/lib or Jetty/Java will probably still load it and use it.  Moving it rather than deleting it would be a good idea, so it can be restored later.&lt;/p&gt;

&lt;p&gt;Hopefully this note is actually helpful and not a wild goose chase.&lt;/p&gt;</comment>
                            <comment id="16825652" author="joel.bernstein" created="Thu, 25 Apr 2019 02:30:23 +0000"  >&lt;p&gt;Yep, make sure the old jar is moved out of the class path entirely.&lt;/p&gt;</comment>
                            <comment id="16825969" author="davebarnett" created="Thu, 25 Apr 2019 11:18:00 +0000"  >&lt;p&gt;Morning all&lt;/p&gt;

&lt;p&gt;I had left the solr-core-7.7.1 in the WEB-INF/lib (thank you)&lt;/p&gt;

&lt;p&gt;I now get the output with Field info -&lt;/p&gt;

&lt;p&gt;Of 83 Fields all say &quot;Field info is not null&quot;&lt;/p&gt;

&lt;p&gt;0 count for &quot;is null&quot;&lt;/p&gt;

&lt;p&gt;Attached is the console-log file&lt;/p&gt;






&lt;p&gt;&amp;#8211; &lt;br/&gt;
&lt;b&gt;David Barnett&lt;/b&gt;&lt;br/&gt;
O&amp;amp;G Technology Consulting Ltd&lt;br/&gt;
oandgtc@gmail.com&lt;br/&gt;
+44 (0) 7753 235608&lt;/p&gt;</comment>
                            <comment id="16826148" author="risdenk" created="Thu, 25 Apr 2019 15:12:33 +0000"  >&lt;p&gt;Hmmm so does that mean that &quot;luceneFieldInfo.getType()&quot; is returning null and breaking the switch on line 103?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/branch_7_7/solr/core/src/java/org/apache/solr/handler/sql/SolrSchema.java#L103&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/branch_7_7/solr/core/src/java/org/apache/solr/handler/sql/SolrSchema.java#L103&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The javadocs for LukeResponse.FieldInfo doesn&apos;t say anything about null guarantees. &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://lucene.apache.org/solr/7_7_0/solr-solrj/org/apache/solr/client/solrj/response/LukeResponse.FieldInfo.html#getType(&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lucene.apache.org/solr/7_7_0/solr-solrj/org/apache/solr/client/solrj/response/LukeResponse.FieldInfo.html#getType(&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Checked the code and there is nothing stopping it from being a null there.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/branch_7_7/solr/solrj/src/java/org/apache/solr/client/solrj/response/LukeResponse.java#L118&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/branch_7_7/solr/solrj/src/java/org/apache/solr/client/solrj/response/LukeResponse.java#L118&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think I can come up with a luke request and would get the same result for that collection so we can see what is getting returned. I think we should be able to do this without adding more logging yet.&lt;/p&gt;</comment>
                            <comment id="16826154" author="risdenk" created="Thu, 25 Apr 2019 15:20:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davebarnett&quot; class=&quot;user-hover&quot; rel=&quot;davebarnett&quot;&gt;davebarnett&lt;/a&gt; - Can you run this query and share the results (it shouldn&apos;t have anything sensitive):&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
http:&lt;span class=&quot;code-comment&quot;&gt;//SOLR_HOST:SOLR_PORT/solr/COLLECTION/admin/luke?numTerms=0&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This should match what the output of the following is (in a slightly different format):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/branch_7_7/solr/core/src/java/org/apache/solr/handler/sql/SolrSchema.java#L78&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/branch_7_7/solr/core/src/java/org/apache/solr/handler/sql/SolrSchema.java#L78&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16826158" author="risdenk" created="Thu, 25 Apr 2019 15:22:57 +0000"  >&lt;p&gt;Assuming the output of the above is correct, the issue might be with field &quot;Field:COUNTY&quot; since the way the debug logging works is that it would log that for each field before failing on the NPE.&lt;/p&gt;</comment>
                            <comment id="16826165" author="davebarnett" created="Thu, 25 Apr 2019 15:29:00 +0000"  >&lt;p&gt;Hi Kevin&lt;/p&gt;

&lt;p&gt;Command ran just fine, I put it to XML and saved here Luke_out.xml&lt;/p&gt;

&lt;p&gt;Here is a clip from the output showing COUNTY I&#8217;ve also taken CRS_Name too (to show difference) Is it missing a type definition (it should be String)&lt;/p&gt;

&lt;p&gt;&amp;lt;lst&#160;name=&quot;COUNTY&quot;&amp;gt;&lt;br/&gt;
&amp;lt;null&#160;name=&quot;type&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;str&#160;name=&quot;schema&quot;&amp;gt;------------------&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;/lst&amp;gt;&lt;br/&gt;
&amp;lt;lst&#160;name=&quot;CRS_Name&quot;&amp;gt;&lt;br/&gt;
&amp;lt;str&#160;name=&quot;type&quot;&amp;gt;string&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str&#160;name=&quot;schema&quot;&amp;gt;I-SDU----&lt;del&gt;OF&lt;/del&gt;----l&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str&#160;name=&quot;index&quot;&amp;gt;ITS------&lt;del&gt;OF&lt;/del&gt;-----&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;int&#160;name=&quot;docs&quot;&amp;gt;1&amp;lt;/int&amp;gt;&lt;/p&gt;</comment>
                            <comment id="16826170" author="risdenk" created="Thu, 25 Apr 2019 15:33:53 +0000"  >&lt;p&gt;In the output I noticed something interesting:&lt;/p&gt;

&lt;p&gt;There is both COUNTY and County - same field name different case. The managed-schema attached previously, only has County in it. &lt;/p&gt;

&lt;p&gt;So it looks like docs are indexed with different case field names? Reimporting would force all docs to have the right field name definition I think which is why you wouldn&apos;t see this issue after recreating the index.&lt;/p&gt;</comment>
                            <comment id="16826184" author="davebarnett" created="Thu, 25 Apr 2019 15:42:00 +0000"  >&lt;p&gt;Hi Kevin&lt;/p&gt;

&lt;p&gt;Running the second command with a different output looks like this:&lt;/p&gt;


&lt;p&gt;&#8226; COMMODITY3:&lt;br/&gt;
{&lt;br/&gt;
    &#8226; type:&#160;&quot;string&quot;,&lt;br/&gt;
    &#8226; schema:&#160;&quot;I-SDU----&lt;del&gt;OF&lt;/del&gt;----l&quot;,&lt;br/&gt;
    &#8226; index:&#160;&quot;ITS------&lt;del&gt;OF&lt;/del&gt;-----&quot;,&lt;br/&gt;
    &#8226; docs:&#160;369984&lt;br/&gt;
},&lt;br/&gt;
&#8226; COUNTY:&lt;br/&gt;
{&lt;br/&gt;
    &#8226; type:&#160;null,&lt;br/&gt;
    &#8226; schema:&#160;&quot;------------------&quot;&lt;br/&gt;
},&lt;br/&gt;
&#8226; CRS_Name:&lt;br/&gt;
{&lt;br/&gt;
    &#8226; type:&#160;&quot;string&quot;,&lt;br/&gt;
    &#8226; schema:&#160;&quot;I-SDU----&lt;del&gt;OF&lt;/del&gt;----l&quot;,&lt;br/&gt;
    &#8226; index:&#160;&quot;ITS------&lt;del&gt;OF&lt;/del&gt;-----&quot;,&lt;br/&gt;
    &#8226; docs:&#160;1&lt;br/&gt;
},&lt;/p&gt;


&lt;p&gt;Yes we have many indexer processes that &#8216;could&#8217; refer to the same Field Upper or lower case (if we didn&#8217;t spot it in the modelling at some point)&lt;/p&gt;

&lt;p&gt;So to remedy this I just remove the field with the null Type ? I tried through the Admin UI but get a message saying &quot;error processing commands&#8221;&lt;/p&gt;

&lt;p&gt;I was not able to delete the Field as I say but I was able to Add it again with the Type set to String and the SQL now works !&lt;/p&gt;

&lt;p&gt;However - in this scenario it would be useful to understand the best way to remove this misinformed Field definition&lt;/p&gt;

&lt;p&gt;Really appreciate all you help with this!&lt;/p&gt;

&lt;p&gt;Dave&lt;/p&gt;
</comment>
                            <comment id="16826193" author="risdenk" created="Thu, 25 Apr 2019 15:51:37 +0000"  >&lt;p&gt;So Luke is looking at the actual index files. I would guess somewhere along the way in Solr, COUNTY was defined and then deleted or changed to be County. I think there were documents indexed as some point with the field name COUNTY. These documents were deleted but segments still have SOME reference to COUNTY (ie: not merged and fully removing the indexed documents).&lt;/p&gt;

&lt;p&gt;Long story short - I don&apos;t know of a way to delete that field fully from the Lucene index under the hood.&lt;/p&gt;

&lt;p&gt;The workaround of adding the field back works, but then you could end up with documents in either COUNTY or County. I&apos;d actually be curious how Solr handles two fields with the same name different case when querying.&lt;/p&gt;

&lt;p&gt;I think the SQL integration could add a check to make sure that we handle this case better, but it does highlight an interesting case with the underlying index.&lt;/p&gt;</comment>
                            <comment id="16826199" author="davebarnett" created="Thu, 25 Apr 2019 15:56:00 +0000"  >&lt;p&gt;Thanks again&lt;/p&gt;

&lt;p&gt;Would this bug spawn an enhancement request for better handling from the SQL interface ?&lt;/p&gt;

&lt;p&gt;Cheers&lt;/p&gt;</comment>
                            <comment id="16826206" author="risdenk" created="Thu, 25 Apr 2019 16:06:58 +0000"  >&lt;p&gt;I think a reasonable fix would be to add a null check before the switch statement&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/branch_7_7/solr/core/src/java/org/apache/solr/handler/sql/SolrSchema.java#L103&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/branch_7_7/solr/core/src/java/org/apache/solr/handler/sql/SolrSchema.java#L103&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This would prevent adding the field as an option in SQL and avoid the issue you ran into.&lt;/p&gt;</comment>
                            <comment id="16826210" author="davebarnett" created="Thu, 25 Apr 2019 16:13:00 +0000"  >&lt;p&gt;Do you want me to open one Kevin / Joel ?&lt;/p&gt;</comment>
                            <comment id="16826214" author="erickerickson" created="Thu, 25 Apr 2019 16:24:10 +0000"  >&lt;p&gt;David:&lt;/p&gt;

&lt;p&gt;There is no good way to purge fields completely from an index. At the Lucene level, each segment is a complete, mini index which includes all fields, so you can still have two separate fields County and COUNTY.&lt;/p&gt;

&lt;p&gt;Worse, the actual way the field is defined is &lt;em&gt;also&lt;/em&gt; on a per-segment basis, so switching the field type is not guaranteed at all to always work seamlessly. It depends IIUC on what order the segments get merged in. Say Lucene is merging two segments, one in which the field type for County is text and one for string. IDK which definition the merged segment respects. We see this all the time when someone changes a docValues multiValued option from true to false or vice-versa.&lt;/p&gt;

&lt;p&gt;Even when there are no obvious errors reported, the response can be inaccurate. Let&apos;s take a case of faceting where the underlying field is changed from text to string. For segments where the text based field is faceted, there&apos;ll be a bucket for each and every word in the field, but for the segments with string, there will be exactly one bucket per doc. If that scenario doesn&apos;t report an error.&lt;/p&gt;

&lt;p&gt;For almost all changes, I strongly recommend you blow away your index and start over. Recreate the collection and re-index in SolrCloud terms. There are a few exceptions, but they&apos;re so tricky that it&apos;s often much easier and faster to just use a sledgehammer.&lt;/p&gt;

&lt;p&gt;And finally, the fact that you have COUNTY and County feels like you have either schemaless mode enabled or are using dynamic fields. I strongly urge you to disable schemaless before going to production. It&apos;s fine for getting started, but for prod situations I&apos;d rather take more control over exactly what my index looks like.&lt;/p&gt;

&lt;p&gt;If at all possible I like to explicitly define every field so things like this are caught at index time, but that&apos;s not always practical. Dynamic fields are preferable to schemaless in that situation though.&lt;/p&gt;

&lt;p&gt;Best,&lt;br/&gt;
Erick&lt;/p&gt;
</comment>
                            <comment id="16826264" author="risdenk" created="Thu, 25 Apr 2019 17:32:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davebarnett&quot; class=&quot;user-hover&quot; rel=&quot;davebarnett&quot;&gt;davebarnett&lt;/a&gt; - we can use this ticket to add the null check. Will rename the title and can put a quick patch together.&lt;/p&gt;</comment>
                            <comment id="16826275" author="davebarnett" created="Thu, 25 Apr 2019 17:46:00 +0000"  >&lt;p&gt;Thank you&lt;/p&gt;</comment>
                            <comment id="16826554" author="lucenesolrqa" created="Fri, 26 Apr 2019 00:51:33 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Prechecks &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; test4tests &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; The patch doesn&apos;t appear to include any new or modified tests. Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; master Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  3m 45s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Patch Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  2m 53s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  2m 53s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Release audit (RAT) &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  2m 53s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Check forbidden APIs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  2m 53s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Validate source patterns &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  2m 53s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Other Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 89m 23s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; core in the patch passed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;100m 50s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13414&quot; title=&quot;SolrSchema - Avoid NPE if Luke returns field with no type defined&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13414&quot;&gt;&lt;del&gt;SOLR-13414&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12967048/SOLR-13414.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12967048/SOLR-13414.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  compile  javac  unit  ratsources  checkforbiddenapis  validatesourcepatterns  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux lucene2-us-west.apache.org 4.4.0-112-generic #135-Ubuntu SMP Fri Jan 19 11:48:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-SOLR-Build/sourcedir/dev-tools/test-patch/lucene-solr-yetus-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / ef79dd5 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; version: Apache Ant(TM) version 1.9.6 compiled on July 20 2018 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LTS &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Test Results &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/386/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/386/testReport/&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: solr/core U: solr/core &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/386/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/386/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.7.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16826963" author="jira-bot" created="Fri, 26 Apr 2019 13:41:14 +0000"  >&lt;p&gt;Commit 35aeb7f6231dd58a89d2af9bb1105229bdb56258 in lucene-solr&apos;s branch refs/heads/master from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=35aeb7f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=35aeb7f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13414&quot; title=&quot;SolrSchema - Avoid NPE if Luke returns field with no type defined&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13414&quot;&gt;&lt;del&gt;SOLR-13414&lt;/del&gt;&lt;/a&gt;: SolrSchema - Avoid NPE if Luke returns field with no type defined&lt;/p&gt;

&lt;p&gt;Signed-off-by: Kevin Risden &amp;lt;krisden@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="16826980" author="jira-bot" created="Fri, 26 Apr 2019 14:00:05 +0000"  >&lt;p&gt;Commit 0e7e470ada7f779330fe8c7da110b39a5626fa3b in lucene-solr&apos;s branch refs/heads/branch_8x from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=0e7e470&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=0e7e470&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13414&quot; title=&quot;SolrSchema - Avoid NPE if Luke returns field with no type defined&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13414&quot;&gt;&lt;del&gt;SOLR-13414&lt;/del&gt;&lt;/a&gt;: SolrSchema - Avoid NPE if Luke returns field with no type defined&lt;/p&gt;

&lt;p&gt;Signed-off-by: Kevin Risden &amp;lt;krisden@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="16827002" author="jira-bot" created="Fri, 26 Apr 2019 14:29:24 +0000"  >&lt;p&gt;Commit 0eba9ac1cdd08098c9b6e77035bb8d0c2ea5295c in lucene-solr&apos;s branch refs/heads/branch_7_7 from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=0eba9ac&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=0eba9ac&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13414&quot; title=&quot;SolrSchema - Avoid NPE if Luke returns field with no type defined&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13414&quot;&gt;&lt;del&gt;SOLR-13414&lt;/del&gt;&lt;/a&gt;: SolrSchema - Avoid NPE if Luke returns field with no type defined&lt;/p&gt;

&lt;p&gt;Signed-off-by: Kevin Risden &amp;lt;krisden@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="16827004" author="risdenk" created="Fri, 26 Apr 2019 14:31:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davebarnett&quot; class=&quot;user-hover&quot; rel=&quot;davebarnett&quot;&gt;davebarnett&lt;/a&gt; - Thanks for reporting and helping determine root cause.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbernste&quot; class=&quot;user-hover&quot; rel=&quot;jbernste&quot;&gt;jbernste&lt;/a&gt;&#160;- Thanks for helping debug.&lt;/p&gt;</comment>
                            <comment id="16857056" author="janhoy" created="Wed, 5 Jun 2019 21:30:39 +0000"  >&lt;p&gt;Closing after the 7.7.2 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12967048" name="SOLR-13414.patch" size="2880" author="krisden" created="Thu, 25 Apr 2019 17:58:31 +0000"/>
                            <attachment id="12966498" name="SOLR-13414.patch" size="880" author="jbernste" created="Fri, 19 Apr 2019 16:16:50 +0000"/>
                            <attachment id="12966811" name="before_starting_solr.png" size="559728" author="davebarnett" created="Tue, 23 Apr 2019 21:12:20 +0000"/>
                            <attachment id="12966778" name="command_prompt.png" size="51359" author="davebarnett" created="Tue, 23 Apr 2019 15:19:47 +0000"/>
                            <attachment id="12967030" name="luke_out.xml" size="26117" author="davebarnett" created="Thu, 25 Apr 2019 15:29:00 +0000"/>
                            <attachment id="12966475" name="managed-schema" size="57269" author="davebarnett" created="Fri, 19 Apr 2019 11:42:10 +0000"/>
                            <attachment id="12966812" name="new_solr-8983-console.log" size="1838" author="davebarnett" created="Tue, 23 Apr 2019 21:22:20 +0000"/>
                            <attachment id="12966813" name="new_solr.log" size="176386" author="davebarnett" created="Tue, 23 Apr 2019 21:22:26 +0000"/>
                            <attachment id="12967002" name="solr-8983-console.log" size="5404" author="davebarnett" created="Thu, 25 Apr 2019 11:18:00 +0000"/>
                            <attachment id="12966782" name="solr-8983-console.log" size="1838" author="davebarnett" created="Tue, 23 Apr 2019 15:56:05 +0000"/>
                            <attachment id="12966499" name="solr-core-7.8.0-SNAPSHOT.jar" size="5526181" author="jbernste" created="Fri, 19 Apr 2019 16:17:13 +0000"/>
                            <attachment id="12966772" name="solr.log" size="215338" author="davebarnett" created="Tue, 23 Apr 2019 14:55:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z01yew:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>