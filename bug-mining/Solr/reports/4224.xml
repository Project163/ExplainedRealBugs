<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:38:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-13510] Intermittent 401&apos;s for internode requests with basicauth enabled</title>
                <link>https://issues.apache.org/jira/browse/SOLR-13510</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;We recently got a bug report on the mailing list:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;On Solr 8.1.1, using our previously working security.json, running queries&lt;br/&gt;
(through the admin UI currently) I non-deterministically get 401 responses&lt;br/&gt;
on queries when a collection has more than 1 shard. Increasing the number&lt;br/&gt;
of shards in the collection makes the errors more likely.&lt;/p&gt;

&lt;p&gt;{&lt;br/&gt;
  &quot;responseHeader&quot;:{&lt;br/&gt;
    &quot;zkConnected&quot;:true,&lt;br/&gt;
    &quot;status&quot;:401,&lt;br/&gt;
    &quot;QTime&quot;:30,&lt;br/&gt;
    &quot;params&quot;:{&lt;br/&gt;
      &quot;q&quot;:&quot;&lt;b&gt;:&lt;/b&gt;&quot;,&lt;br/&gt;
      &quot;_&quot;:&quot;1559474550365&quot;}},&lt;br/&gt;
  &quot;error&quot;:{&lt;br/&gt;
    &quot;metadata&quot;:[&lt;/p&gt;

&lt;p&gt;&quot;error-class&quot;,&quot;org.apache.solr.client.solrj.impl.BaseHttpSolrClient$RemoteSolrException&quot;,&lt;/p&gt;

&lt;p&gt;&quot;root-error-class&quot;,&quot;org.apache.solr.client.solrj.impl.BaseHttpSolrClient$RemoteSolrException&quot;],&lt;br/&gt;
    &quot;msg&quot;:&quot;Error from server at null: Expected mime type&lt;br/&gt;
application/octet-stream but got text/html. &amp;lt;html&amp;gt;\n&amp;lt;head&amp;gt;\n&amp;lt;meta&lt;br/&gt;
http-equiv=\&quot;Content-Type\&quot;&lt;br/&gt;
content=\&quot;text/html;charset=utf-8\&quot;/&amp;gt;\n&amp;lt;title&amp;gt;Error 401 require&lt;br/&gt;
authentication&amp;lt;/title&amp;gt;\n&amp;lt;/head&amp;gt;\n&amp;lt;body&amp;gt;&amp;lt;h2&amp;gt;HTTP ERROR 401&amp;lt;/h2&amp;gt;\n&amp;lt;p&amp;gt;Problem&lt;br/&gt;
accessing /solr/gettingstarted_shard4_replica_n6/select. Reason:\n&amp;lt;pre&amp;gt;&lt;br/&gt;
 require authentication&amp;lt;/pre&amp;gt;&amp;lt;/p&amp;gt;\n&amp;lt;/body&amp;gt;\n&amp;lt;/html&amp;gt;\n&quot;,&lt;br/&gt;
    &quot;code&quot;:401}}&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The reporter (credit to Colvin Cowie) also gives reproduction steps:&lt;/p&gt;

&lt;blockquote&gt;
&lt;ol&gt;
	&lt;li&gt;Extract solr 8.1.1.&lt;/li&gt;
	&lt;li&gt;bin\solr start -e cloud&lt;br/&gt;
        1 node / &lt;span class=&quot;error&quot;&gt;&amp;#91;default port&amp;#93;&lt;/span&gt; / &lt;span class=&quot;error&quot;&gt;&amp;#91;default collection name&amp;#93;&lt;/span&gt; / 4 shards / 1&lt;br/&gt;
replica / &lt;span class=&quot;error&quot;&gt;&amp;#91;_default configuration&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;server\scripts\cloud-scripts\zkcli -zkhost localhost:9983 -cmd putfile&lt;br/&gt;
/security.json &amp;lt;path-to-security-json-file-with-content-below&amp;gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;{&lt;br/&gt;
    &quot;authentication&quot;: {&lt;br/&gt;
        &quot;blockUnknown&quot;: true,&lt;br/&gt;
        &quot;class&quot;: &quot;solr.BasicAuthPlugin&quot;,&lt;br/&gt;
        &quot;credentials&quot;: &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {
            &amp;quot;solradmin&amp;quot;}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;    },&lt;br/&gt;
    &quot;authorization&quot;: {&lt;br/&gt;
        &quot;class&quot;: &quot;solr.RuleBasedAuthorizationPlugin&quot;,&lt;br/&gt;
        &quot;permissions&quot;: [&lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: { &amp;quot;name&amp;quot;}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt; ],&lt;br/&gt;
        &quot;user-role&quot;: &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {&amp;quot;solradmin&amp;quot;}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;    }&lt;br/&gt;
}&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;(Minor edits for conciseness)&lt;/p&gt;

&lt;p&gt;I&apos;m able to reproduce this bug as well.  Other auth issues (&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13472&quot; title=&quot;HTTP requests to a node that does not hold a core of the collection are unauthorized&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13472&quot;&gt;&lt;del&gt;SOLR-13472&lt;/del&gt;&lt;/a&gt;) look like they&apos;re impacted by the topography of the collection and cluster.  But this doesn&apos;t seem affected by that at all (401&apos;s occur on inter-node requests regardless of the recipient of the initial request, and even when all nodes have a shard replica).&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13237243">SOLR-13510</key>
            <summary>Intermittent 401&apos;s for internode requests with basicauth enabled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="caomanhdat">Cao Manh Dat</assignee>
                                    <reporter username="gerlowskija">Jason Gerlowski</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Jun 2019 13:31:22 +0000</created>
                <updated>Mon, 7 Aug 2023 17:25:24 +0000</updated>
                            <resolved>Wed, 12 Jun 2019 13:21:54 +0000</resolved>
                                    <version>9.0</version>
                                    <fixVersion>8.1.2</fixVersion>
                    <fixVersion>8.2</fixVersion>
                    <fixVersion>9.0</fixVersion>
                                    <component>Authentication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>13</watches>
                                                                                                                <comments>
                            <comment id="16854605" author="gerlowskija" created="Mon, 3 Jun 2019 13:42:58 +0000"  >&lt;p&gt;The 401 appears to be on an inter-node request, which is odd since those typically use PKI for authentication.  Following up on this I added &lt;tt&gt;&quot;forwardCredentials&quot;: &quot;true&lt;/tt&gt; as an authentication property in security.json, and the behavior goes away.  The behavior persists though if the &quot;forwardCredentials&quot; property is either &quot;false&quot;, or missing entirely.&lt;/p&gt;

&lt;p&gt;This seems like a bug in the handling of this new property.  It seems that sometimes requests are sent without PKI, even when forwardCredentials=false would indicate that they should be.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=janhoy&quot; class=&quot;user-hover&quot; rel=&quot;janhoy&quot;&gt;janhoy&lt;/a&gt; do you have any guesses why this might be?  I think you were involved in the new &quot;forwardCredentials&quot; change.  It seems easy enough to reproduce if you get a few minutes to take a look.&lt;/p&gt;</comment>
                            <comment id="16854670" author="ctargett" created="Mon, 3 Jun 2019 14:46:13 +0000"  >&lt;p&gt;The same person commented about this behavior to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13421&quot; title=&quot;Intermittent error 401 with JSON Facet query to retrieve count all collections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13421&quot;&gt;&lt;del&gt;SOLR-13421&lt;/del&gt;&lt;/a&gt;. The issues are possibly duplicates?&lt;/p&gt;</comment>
                            <comment id="16854880" author="janhoy" created="Mon, 3 Jun 2019 17:31:36 +0000"  >&lt;p&gt;Sounds like a possible bug in &lt;tt&gt;forwardCredentials&lt;/tt&gt;. Let&apos;s try to create a failing unit test for this, involving more than one collection in same cluster...&lt;/p&gt;</comment>
                            <comment id="16855064" author="janhoy" created="Mon, 3 Jun 2019 21:24:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gerlowskija&quot; class=&quot;user-hover&quot; rel=&quot;gerlowskija&quot;&gt;gerlowskija&lt;/a&gt; with your understanding of the situation, are you able to create a patch with a failing unit test? I tried creating 3 extra collections in BasicAuthIntegrationTest (which has 3 nodes) but it did not trigger any failures.&lt;/p&gt;

&lt;p&gt;I wonder if there may be some interaction with HTTP2 and&#160;Http2SolrClient here? If the outside client uses HTTP1 and inter-node traffic is always HTTP2, then it could be that we fail to convey the credentials from the request as this is done in slightly different way, and probably not tested. The logic in asserting that PKIAuthPlugin registers its interceptor for HTTP1 and HTTP2 may also be fragile or slightly different.&#160;If setting &lt;tt&gt;-Dsolr.http1=true&lt;/tt&gt; when starting Solr fixes the issue, then this theory is proven.&lt;/p&gt;</comment>
                            <comment id="16855409" author="janhoy" created="Tue, 4 Jun 2019 07:13:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=caomanhdat&quot; class=&quot;user-hover&quot; rel=&quot;caomanhdat&quot;&gt;caomanhdat&lt;/a&gt;, remember the discussion in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12799&quot; title=&quot;Allow Authentication Plugins to easily intercept internode requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12799&quot;&gt;&lt;del&gt;SOLR-12799&lt;/del&gt;&lt;/a&gt; about handling the two different clients? Do you have any insight into what might be happening here?&lt;/p&gt;</comment>
                            <comment id="16855427" author="janhoy" created="Tue, 4 Jun 2019 07:39:48 +0000"  >&lt;p&gt;I started &lt;tt&gt;bin/solr -e cloud&lt;/tt&gt;&#160;with 1 node, 4 shards, 1 replica &#160;and auth enabled through &lt;tt&gt;bin/solr auth enable -credentials solr:solr -blockUnknown true -z localhost:9983&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;{{}}Here&apos;s the difference in logs between successful request and failed (with DEBUG enabled for o.a.s.security)&lt;/p&gt;

&lt;p&gt;SUCCESSFUL:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2019-06-04 07:31:06.515 DEBUG (httpShardExecutor-5-thread-22-processing-x:gettingstarted_shard2_replica_n2 r:core_node5 http:////192.168.127.248:8983//solr//gettingstarted_shard3_replica_n4// n:192.168.127.248:8983_solr c:gettingstarted s:shard2 [http:////192.168.127.248:8983//solr//gettingstarted_shard3_replica_n4//]) [c:gettingstarted s:shard2 r:core_node5 x:gettingstarted_shard2_replica_n2] o.a.s.s.PKIAuthenticationPlugin secures this internode request
2019-06-04 07:31:06.515 DEBUG (httpShardExecutor-5-thread-21-processing-x:gettingstarted_shard2_replica_n2 r:core_node5 http:////192.168.127.248:8983//solr//gettingstarted_shard2_replica_n2// n:192.168.127.248:8983_solr c:gettingstarted s:shard2 [http:////192.168.127.248:8983//solr//gettingstarted_shard2_replica_n2//]) [c:gettingstarted s:shard2 r:core_node5 x:gettingstarted_shard2_replica_n2] o.a.s.s.PKIAuthenticationPlugin secures this internode request
2019-06-04 07:31:06.515 DEBUG (httpShardExecutor-5-thread-23-processing-x:gettingstarted_shard2_replica_n2 r:core_node5 http:////192.168.127.248:8983//solr//gettingstarted_shard4_replica_n6// n:192.168.127.248:8983_solr c:gettingstarted s:shard2 [http:////192.168.127.248:8983//solr//gettingstarted_shard4_replica_n6//]) [c:gettingstarted s:shard2 r:core_node5 x:gettingstarted_shard2_replica_n2] o.a.s.s.PKIAuthenticationPlugin secures this internode request
2019-06-04 07:31:06.516 DEBUG (httpShardExecutor-5-thread-24-processing-x:gettingstarted_shard2_replica_n2 r:core_node5 http:////192.168.127.248:8983//solr//gettingstarted_shard1_replica_n1// n:192.168.127.248:8983_solr c:gettingstarted s:shard2 [http:////192.168.127.248:8983//solr//gettingstarted_shard1_replica_n1//]) [c:gettingstarted s:shard2 r:core_node5 x:gettingstarted_shard2_replica_n2] o.a.s.s.PKIAuthenticationPlugin secures this internode request
2019-06-04 07:31:06.521 DEBUG (qtp67730604-26) [c:gettingstarted s:shard1 r:core_node3 x:gettingstarted_shard1_replica_n1] o.a.s.s.PKIAuthenticationPlugin Successfully decrypted header solr 1559633466515
2019-06-04 07:31:06.523 DEBUG (qtp67730604-27) [c:gettingstarted s:shard2 r:core_node5 x:gettingstarted_shard2_replica_n2] o.a.s.s.PKIAuthenticationPlugin Successfully decrypted header solr 1559633466515
2019-06-04 07:31:06.523 DEBUG (qtp67730604-113) [c:gettingstarted s:shard4 r:core_node8 x:gettingstarted_shard4_replica_n6] o.a.s.s.PKIAuthenticationPlugin Successfully decrypted header solr 1559633466515
2019-06-04 07:31:06.523 INFO (qtp67730604-26) [c:gettingstarted s:shard2 r:core_node5 x:gettingstarted_shard2_replica_n2] o.a.s.c.S.Request [gettingstarted_shard2_replica_n2] webapp=/solr path=/select params={df=_text_&amp;amp;distrib=false&amp;amp;fl=id&amp;amp;fl=score&amp;amp;shards.purpose=4&amp;amp;start=0&amp;amp;fsv=true&amp;amp;shard.url=http://192.168.127.248:8983/solr/gettingstarted_shard2_replica_n2/&amp;amp;rows=10&amp;amp;version=2&amp;amp;q=*:*&amp;amp;NOW=1559633466513&amp;amp;isShard=true&amp;amp;wt=javabin&amp;amp;_=1559633303203} hits=0 status=0 QTime=1
2019-06-04 07:31:06.523 INFO (qtp67730604-27) [c:gettingstarted s:shard3 r:core_node7 x:gettingstarted_shard3_replica_n4] o.a.s.c.S.Request [gettingstarted_shard3_replica_n4] webapp=/solr path=/select params={df=_text_&amp;amp;distrib=false&amp;amp;fl=id&amp;amp;fl=score&amp;amp;shards.purpose=4&amp;amp;start=0&amp;amp;fsv=true&amp;amp;shard.url=http://192.168.127.248:8983/solr/gettingstarted_shard3_replica_n4/&amp;amp;rows=10&amp;amp;version=2&amp;amp;q=*:*&amp;amp;NOW=1559633466513&amp;amp;isShard=true&amp;amp;wt=javabin&amp;amp;_=1559633303203} hits=0 status=0 QTime=0
2019-06-04 07:31:06.523 INFO (qtp67730604-113) [c:gettingstarted s:shard4 r:core_node8 x:gettingstarted_shard4_replica_n6] o.a.s.c.S.Request [gettingstarted_shard4_replica_n6] webapp=/solr path=/select params={df=_text_&amp;amp;distrib=false&amp;amp;fl=id&amp;amp;fl=score&amp;amp;shards.purpose=4&amp;amp;start=0&amp;amp;fsv=true&amp;amp;shard.url=http://192.168.127.248:8983/solr/gettingstarted_shard4_replica_n6/&amp;amp;rows=10&amp;amp;version=2&amp;amp;q=*:*&amp;amp;NOW=1559633466513&amp;amp;isShard=true&amp;amp;wt=javabin&amp;amp;_=1559633303203} hits=0 status=0 QTime=0
2019-06-04 07:31:06.524 DEBUG (qtp67730604-23) [c:gettingstarted s:shard4 r:core_node8 x:gettingstarted_shard4_replica_n6] o.a.s.s.PKIAuthenticationPlugin Successfully decrypted header solr 1559633466516
2019-06-04 07:31:06.527 INFO (qtp67730604-23) [c:gettingstarted s:shard1 r:core_node3 x:gettingstarted_shard1_replica_n1] o.a.s.c.S.Request [gettingstarted_shard1_replica_n1] webapp=/solr path=/select params={df=_text_&amp;amp;distrib=false&amp;amp;fl=id&amp;amp;fl=score&amp;amp;shards.purpose=4&amp;amp;start=0&amp;amp;fsv=true&amp;amp;shard.url=http://192.168.127.248:8983/solr/gettingstarted_shard1_replica_n1/&amp;amp;rows=10&amp;amp;version=2&amp;amp;q=*:*&amp;amp;NOW=1559633466513&amp;amp;isShard=true&amp;amp;wt=javabin&amp;amp;_=1559633303203} hits=0 status=0 QTime=2
2019-06-04 07:31:06.529 INFO (qtp67730604-20) [c:gettingstarted s:shard2 r:core_node5 x:gettingstarted_shard2_replica_n2] o.a.s.c.S.Request [gettingstarted_shard2_replica_n2] webapp=/solr path=/select params={q=*:*&amp;amp;_=1559633303203} hits=0 status=0 QTime=15&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;FAILED:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2019-06-04 07:31:00.217 DEBUG (httpShardExecutor-5-thread-17-processing-x:gettingstarted_shard1_replica_n1 r:core_node3 http:////192.168.127.248:8983//solr//gettingstarted_shard2_replica_n2// n:192.168.127.248:8983_solr c:gettingstarted s:shard1 [http:////192.168.127.248:8983//solr//gettingstarted_shard2_replica_n2//]) [c:gettingstarted s:shard1 r:core_node3 x:gettingstarted_shard1_replica_n1] o.a.s.s.PKIAuthenticationPlugin secures this internode request
2019-06-04 07:31:00.217 DEBUG (httpShardExecutor-5-thread-18-processing-x:gettingstarted_shard1_replica_n1 r:core_node3 http:////192.168.127.248:8983//solr//gettingstarted_shard3_replica_n4// n:192.168.127.248:8983_solr c:gettingstarted s:shard1 [http:////192.168.127.248:8983//solr//gettingstarted_shard3_replica_n4//]) [c:gettingstarted s:shard1 r:core_node3 x:gettingstarted_shard1_replica_n1] o.a.s.s.PKIAuthenticationPlugin secures this internode request
2019-06-04 07:31:00.217 DEBUG (httpShardExecutor-5-thread-19-processing-x:gettingstarted_shard1_replica_n1 r:core_node3 http:////192.168.127.248:8983//solr//gettingstarted_shard4_replica_n6// n:192.168.127.248:8983_solr c:gettingstarted s:shard1 [http:////192.168.127.248:8983//solr//gettingstarted_shard4_replica_n6//]) [c:gettingstarted s:shard1 r:core_node3 x:gettingstarted_shard1_replica_n1] o.a.s.s.PKIAuthenticationPlugin secures this internode request
2019-06-04 07:31:00.217 DEBUG (httpShardExecutor-5-thread-20-processing-x:gettingstarted_shard1_replica_n1 r:core_node3 http:////192.168.127.248:8983//solr//gettingstarted_shard1_replica_n1// n:192.168.127.248:8983_solr c:gettingstarted s:shard1 [http:////192.168.127.248:8983//solr//gettingstarted_shard1_replica_n1//]) [c:gettingstarted s:shard1 r:core_node3 x:gettingstarted_shard1_replica_n1] o.a.s.s.PKIAuthenticationPlugin secures this internode request
2019-06-04 07:31:00.223 DEBUG (qtp67730604-27) [c:gettingstarted s:shard1 r:core_node3 x:gettingstarted_shard1_replica_n1] o.a.s.s.PKIAuthenticationPlugin Successfully decrypted header solr 1559633460217
2019-06-04 07:31:00.224 INFO (qtp67730604-27) [c:gettingstarted s:shard2 r:core_node5 x:gettingstarted_shard2_replica_n2] o.a.s.c.S.Request [gettingstarted_shard2_replica_n2] webapp=/solr path=/select params={df=_text_&amp;amp;distrib=false&amp;amp;fl=id&amp;amp;fl=score&amp;amp;shards.purpose=4&amp;amp;start=0&amp;amp;fsv=true&amp;amp;shard.url=http://192.168.127.248:8983/solr/gettingstarted_shard2_replica_n2/&amp;amp;rows=10&amp;amp;version=2&amp;amp;q=*:*&amp;amp;NOW=1559633460216&amp;amp;isShard=true&amp;amp;wt=javabin&amp;amp;_=1559633303203} hits=0 status=0 QTime=0
2019-06-04 07:31:00.224 DEBUG (qtp67730604-113) [c:gettingstarted s:shard2 r:core_node5 x:gettingstarted_shard2_replica_n2] o.a.s.s.PKIAuthenticationPlugin Successfully decrypted header solr 1559633460217
2019-06-04 07:31:00.224 DEBUG (qtp67730604-86) [c:gettingstarted s:shard3 r:core_node7 x:gettingstarted_shard3_replica_n4] o.a.s.s.PKIAuthenticationPlugin Successfully decrypted header solr 1559633460217
2019-06-04 07:31:00.225 INFO (qtp67730604-86) [c:gettingstarted s:shard1 r:core_node3 x:gettingstarted_shard1_replica_n1] o.a.s.c.S.Request [gettingstarted_shard1_replica_n1] webapp=/solr path=/select params={df=_text_&amp;amp;distrib=false&amp;amp;fl=id&amp;amp;fl=score&amp;amp;shards.purpose=4&amp;amp;start=0&amp;amp;fsv=true&amp;amp;shard.url=http://192.168.127.248:8983/solr/gettingstarted_shard1_replica_n1/&amp;amp;rows=10&amp;amp;version=2&amp;amp;q=*:*&amp;amp;NOW=1559633460216&amp;amp;isShard=true&amp;amp;wt=javabin&amp;amp;_=1559633303203} hits=0 status=0 QTime=0
2019-06-04 07:31:00.225 INFO (qtp67730604-113) [c:gettingstarted s:shard4 r:core_node8 x:gettingstarted_shard4_replica_n6] o.a.s.c.S.Request [gettingstarted_shard4_replica_n6] webapp=/solr path=/select params={df=_text_&amp;amp;distrib=false&amp;amp;fl=id&amp;amp;fl=score&amp;amp;shards.purpose=4&amp;amp;start=0&amp;amp;fsv=true&amp;amp;shard.url=http://192.168.127.248:8983/solr/gettingstarted_shard4_replica_n6/&amp;amp;rows=10&amp;amp;version=2&amp;amp;q=*:*&amp;amp;NOW=1559633460216&amp;amp;isShard=true&amp;amp;wt=javabin&amp;amp;_=1559633303203} hits=0 status=0 QTime=1
2019-06-04 07:31:00.227 ERROR (qtp67730604-24) [c:gettingstarted s:shard1 r:core_node3 x:gettingstarted_shard1_replica_n1] o.a.s.h.RequestHandlerBase org.apache.solr.client.solrj.impl.BaseHttpSolrClient$RemoteSolrException: Error from server at null: Expected mime type application/octet-stream but got text/html. &amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html;charset=utf-8&quot;/&amp;gt;
&amp;lt;title&amp;gt;Error 401 require authentication&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;&amp;lt;h2&amp;gt;HTTP ERROR 401&amp;lt;/h2&amp;gt;
&amp;lt;p&amp;gt;Problem accessing /solr/gettingstarted_shard3_replica_n4/select. Reason:
&amp;lt;pre&amp;gt; require authentication&amp;lt;/pre&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;

at org.apache.solr.client.solrj.impl.Http2SolrClient.processErrorsAndResponse(Http2SolrClient.java:681)
at org.apache.solr.client.solrj.impl.Http2SolrClient.request(Http2SolrClient.java:400)
at org.apache.solr.client.solrj.impl.Http2SolrClient.request(Http2SolrClient.java:739)
at org.apache.solr.client.solrj.SolrClient.request(SolrClient.java:1274)
at org.apache.solr.handler.component.HttpShardHandler.request(HttpShardHandler.java:227)
at org.apache.solr.handler.component.HttpShardHandler.lambda$submit$0(HttpShardHandler.java:188)
at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
at com.codahale.metrics.InstrumentedExecutorService$InstrumentedRunnable.run(InstrumentedExecutorService.java:181)
at org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.lambda$execute$0(ExecutorUtil.java:209)
at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
at java.base/java.lang.Thread.run(Thread.java:834)

2019-06-04 07:31:00.227 INFO (qtp67730604-24) [c:gettingstarted s:shard1 r:core_node3 x:gettingstarted_shard1_replica_n1] o.a.s.c.S.Request [gettingstarted_shard1_replica_n1] webapp=/solr path=/select params={q=*:*&amp;amp;_=1559633303203} status=401 QTime=11&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Interestingly enough, all four sub-requests report &lt;tt&gt;PKIAuthenticationPlugin secures this internode request&lt;/tt&gt;, but only three reports &lt;tt&gt;Successfully decrypted header solr 1559633460217&lt;/tt&gt;.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16855646" author="gerlowskija" created="Tue, 4 Jun 2019 12:33:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;with your understanding of the situation, are you able to create a patch with a failing unit test?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Probably?  I might be able to get to it if it&apos;s trivial, but I&apos;m tight on time today.  &quot;Luckily&quot; this has proved pretty easy to reproduce on the command line though, so we still have an easy test (even though its a bit more manual).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;... setting -Dsolr.http1=true when starting Solr ...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I tried this out by putting &lt;tt&gt;SOLR_OPTS=&quot;$SOLR_OPTS -Dsolr.http1=true&quot;&lt;/tt&gt; in my solr.in.sh.  Still seeing the intermittent errors.  Has anyone else tried this to confirm?  It might still be Http2 related (it sounds plausible to me at least), but we don&apos;t have any evidence for that yet.  And we might have some against it.&lt;/p&gt;</comment>
                            <comment id="16855665" author="caomanhdat" created="Tue, 4 Jun 2019 12:51:50 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gerlowskija&quot; class=&quot;user-hover&quot; rel=&quot;gerlowskija&quot;&gt;gerlowskija&lt;/a&gt;, even with &lt;tt&gt;-Dsolr.http1=true&lt;/tt&gt;, we are still using &lt;tt&gt;Http2SolrClient&lt;/tt&gt; for internal communication, so If this is a problem relate to Solr 8.0 only, it might be caused by &lt;tt&gt;Http2SolrClient&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16855745" author="JIRAUSER298947" created="Tue, 4 Jun 2019 14:19:56 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=caomanhdat&quot; class=&quot;user-hover&quot; rel=&quot;caomanhdat&quot;&gt;caomanhdat&lt;/a&gt; this problem does only seem to be in Solr 8.x. I&apos;ve not been able to reproduce it in Solr 7.7.0 / 7.7.1&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gerlowskija&quot; class=&quot;user-hover&quot; rel=&quot;gerlowskija&quot;&gt;gerlowskija&lt;/a&gt; - setting&#160;forwardCredentials to true works as far as I can tell so far&lt;/p&gt;</comment>
                            <comment id="16855779" author="caomanhdat" created="Tue, 4 Jun 2019 14:48:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cjcowie&quot; class=&quot;user-hover&quot; rel=&quot;cjcowie&quot;&gt;cjcowie&lt;/a&gt; I beleived the attached patch will solve the problem. Can you rerun with this patch?&lt;/p&gt;

&lt;p&gt;Explain: in &lt;tt&gt;Http2SolrClient&lt;/tt&gt; listeners will can be called in another thread than the thread calling execute request method, therefore SolrRequestInfo will return null on that case.&lt;/p&gt;</comment>
                            <comment id="16855824" author="jira-bot" created="Tue, 4 Jun 2019 15:16:44 +0000"  >&lt;p&gt;Commit cee4ed783ef1c5e3d8051823739287cbde448e3b in lucene-solr&apos;s branch refs/heads/master from Cao Manh Dat&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=cee4ed7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=cee4ed7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13510&quot; title=&quot;Intermittent 401&amp;#39;s for internode requests with basicauth enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13510&quot;&gt;&lt;del&gt;SOLR-13510&lt;/del&gt;&lt;/a&gt;: Intermittent 401&apos;s for internode requests with basicauth enabled&lt;/p&gt;</comment>
                            <comment id="16855827" author="jira-bot" created="Tue, 4 Jun 2019 15:17:42 +0000"  >&lt;p&gt;Commit 518143c2f0f55182303100a284e2a92d7e895076 in lucene-solr&apos;s branch refs/heads/branch_8x from Cao Manh Dat&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=518143c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=518143c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13510&quot; title=&quot;Intermittent 401&amp;#39;s for internode requests with basicauth enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13510&quot;&gt;&lt;del&gt;SOLR-13510&lt;/del&gt;&lt;/a&gt;: Intermittent 401&apos;s for internode requests with basicauth enabled&lt;/p&gt;</comment>
                            <comment id="16855943" author="ctargett" created="Tue, 4 Jun 2019 17:44:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=caomanhdat&quot; class=&quot;user-hover&quot; rel=&quot;caomanhdat&quot;&gt;caomanhdat&lt;/a&gt;, could you backport to branch_8_1 also? I think we should consider an 8.1.2 for this problem.&lt;/p&gt;</comment>
                            <comment id="16855952" author="caomanhdat" created="Tue, 4 Jun 2019 17:59:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctargett&quot; class=&quot;user-hover&quot; rel=&quot;ctargett&quot;&gt;ctargett&lt;/a&gt;, yeah, sure!&lt;/p&gt;</comment>
                            <comment id="16856019" author="jira-bot" created="Tue, 4 Jun 2019 18:59:38 +0000"  >&lt;p&gt;Commit 7cc04f5adcbf49786c10c80d885138d53f5e1321 in lucene-solr&apos;s branch refs/heads/branch_8_1 from Cao Manh Dat&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=7cc04f5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=7cc04f5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13510&quot; title=&quot;Intermittent 401&amp;#39;s for internode requests with basicauth enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13510&quot;&gt;&lt;del&gt;SOLR-13510&lt;/del&gt;&lt;/a&gt;: Intermittent 401&apos;s for internode requests with basicauth enabled&lt;/p&gt;</comment>
                            <comment id="16856023" author="jira-bot" created="Tue, 4 Jun 2019 19:03:32 +0000"  >&lt;p&gt;Commit 26b49827ed66c8b6721bdaee1a8eda785ec2592d in lucene-solr&apos;s branch refs/heads/branch_8x from Cao Manh Dat&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=26b4982&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=26b4982&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13510&quot; title=&quot;Intermittent 401&amp;#39;s for internode requests with basicauth enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13510&quot;&gt;&lt;del&gt;SOLR-13510&lt;/del&gt;&lt;/a&gt;: Move entry of CHANGES.txt to 8.1.2&lt;/p&gt;</comment>
                            <comment id="16856025" author="jira-bot" created="Tue, 4 Jun 2019 19:03:43 +0000"  >&lt;p&gt;Commit bd3cc0b6a18d9583d22ee0f8f997e411036f6220 in lucene-solr&apos;s branch refs/heads/master from Cao Manh Dat&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=bd3cc0b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=bd3cc0b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13510&quot; title=&quot;Intermittent 401&amp;#39;s for internode requests with basicauth enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13510&quot;&gt;&lt;del&gt;SOLR-13510&lt;/del&gt;&lt;/a&gt;: Move entry of CHANGES.txt to 8.1.2&lt;/p&gt;</comment>
                            <comment id="16856829" author="gerlowskija" created="Wed, 5 Jun 2019 16:20:20 +0000"  >&lt;p&gt;I retested things this morning, and confirm that this seems to have fixed the auth issues for queries.  I also tried reproducing the problem with index updates/deletions, but wasn&apos;t able to.  (We&apos;ve only gotten reports of this for queries, but I figured it made sense to double check updates, since they can also be routed between nodes.)&lt;/p&gt;

&lt;p&gt;Curious to hear whether this fixes things for Colvin as well.&lt;/p&gt;
</comment>
                            <comment id="16856862" author="JIRAUSER298947" created="Wed, 5 Jun 2019 16:53:39 +0000"  >&lt;p&gt;I tested with the patch on the 8.1.x branch and it certainly appears to fix the random 401s.&lt;/p&gt;

&lt;p&gt;I&apos;ve got some other issues to resolve for migrating our config+plugins from 6.6. to 8.1. before I can really test our usage on 8. So that won&apos;t be for a while.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;One thing I have just encountered with trying 8 after using 6, is that there&apos;s some slightly nasty behaviour around the Admin UI pages being cached by the browser (at it appears to be a caching issue). It&apos;s easily fixed by reloading the page without the cache, but it&apos;s not great if you hit it. I&apos;ll send it to the mailing list.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16858359" author="janhoy" created="Fri, 7 Jun 2019 07:23:24 +0000"  >&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13526&quot; title=&quot;BasicAuthIntegrationTest and JWTAuthIntegrationTest fails metrics tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13526&quot;&gt;&lt;del&gt;SOLR-13526&lt;/del&gt;&lt;/a&gt;, seems the branch_8_1 commit has triggered other failures:&#160;&lt;a href=&quot;https://jenkins.thetaphi.de/job/Lucene-Solr-8.1-Windows/133/#showFailuresLink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jenkins.thetaphi.de/job/Lucene-Solr-8.1-Windows/133/#showFailuresLink&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16858389" author="caomanhdat" created="Fri, 7 Jun 2019 08:17:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=janhoy&quot; class=&quot;user-hover&quot; rel=&quot;janhoy&quot;&gt;janhoy&lt;/a&gt; I kinda think that  the old metrics assertion was wrong?&lt;/p&gt;</comment>
                            <comment id="16858545" author="janhoy" created="Fri, 7 Jun 2019 11:44:30 +0000"  >&lt;p&gt;Nope, just reproduced on 8_1 and it somehow ALWAYS uses PKI for inter-node now (verified on JWTAuthIntegrationTest). I see that a mix of HttpSolrClient and Http2SolrClient is in use, but have not been able to figure out why this happened after your commit, and only for 8_1.&lt;/p&gt;</comment>
                            <comment id="16893617" author="ivera" created="Fri, 26 Jul 2019 08:56:31 +0000"  >&lt;p&gt;Closing after the 8.2.0 release&lt;/p&gt;</comment>
                            <comment id="16906207" author="JIRAUSER298947" created="Tue, 13 Aug 2019 13:36:52 +0000"  >&lt;p&gt;Hello. Looking at the changes.txt in the 8.2 release, &lt;a href=&quot;http://lucene.apache.org/core/8_2_0/changes/Changes.html#v8.2.0.bug_fixes&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://lucene.apache.org/core/8_2_0/changes/Changes.html#v8.2.0.bug_fixes&lt;/a&gt; I don&apos;t see this issue referenced.&lt;br/&gt;
I expect because of this&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Commit bd3cc0b6a18d9583d22ee0f8f997e411036f6220 in lucene-solr&apos;s branch refs/heads/master from Cao Manh Dat
[ https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=bd3cc0b ]

SOLR-13510: Move entry of CHANGES.txt to 8.1.2&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I suspect it&apos;s too late to do anything about it, and as long the fix is in the build itself, that&apos;s all that really matters.&lt;/p&gt;</comment>
                            <comment id="16912179" author="sjwoodard" created="Wed, 21 Aug 2019 11:07:24 +0000"  >&lt;p&gt;I&apos;m still seeing this issue on Solr 8.2, and it only happens on the replicas.&#160;&lt;/p&gt;

&lt;p&gt;EDIT: this is happening during indexing. We&apos;re not testing querying yet.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;gt; Master at:
&amp;gt; http:&lt;span class=&quot;code-comment&quot;&gt;//xx.xx.xx.xx:8983/solr/collection1_shard6_replica_t53/
&lt;/span&gt;&amp;gt; &amp;lt;http:&lt;span class=&quot;code-comment&quot;&gt;//xx.xx.xx.xx:8983/solr/collection1_shard6_replica_t53/&amp;gt; is not
&lt;/span&gt;&amp;gt; available. Index fetch failed by exception:
&amp;gt; org.apache.solr.client.solrj.impl.HttpSolrClient$RemoteSolrException:
&amp;gt; Error from server
&amp;gt;&#160; at http:&lt;span class=&quot;code-comment&quot;&gt;//xx.xx.xx.xx:8983/solr/collection1_shard6_replica_t53
&lt;/span&gt;&amp;gt; &amp;lt;http:&lt;span class=&quot;code-comment&quot;&gt;//xx.xx.xx.xx:8983/solr/collection1_shard6_replica_t53&amp;gt;: Expected
&lt;/span&gt;&amp;gt; mime type application/octet-stream but got text/html. &amp;lt;html&amp;gt;
&amp;gt;&#160; &amp;lt;head&amp;gt; &amp;lt;meta http-equiv=&lt;span class=&quot;code-quote&quot;&gt;&quot;Content-Type&quot;&lt;/span&gt; content=&lt;span class=&quot;code-quote&quot;&gt;&quot;text/html;charset=utf-8&quot;&lt;/span&gt;/&amp;gt;&amp;lt;title&amp;gt;Error 401 require authentication&amp;lt;/title&amp;gt; &amp;lt;/head&amp;gt; &amp;lt;body&amp;gt;&amp;lt;h2&amp;gt;HTTP ERROR 401&amp;lt;/h2&amp;gt; &amp;lt;p&amp;gt;Problem accessing /solr/collection1_shard6_replica_t53/replication. Reason:
&amp;gt; &amp;lt;pre&amp;gt;&#160;&#160;&#160; require authentication&amp;lt;/pre&amp;gt;&amp;lt;/p&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16915553" author="caomanhdat" created="Mon, 26 Aug 2019 07:50:09 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sjwoodard&quot; class=&quot;user-hover&quot; rel=&quot;sjwoodard&quot;&gt;sjwoodard&lt;/a&gt; I kinda think this problem relate to TLOG/PULL replicas with basicauth enabled. Can you open a new issue and provide steps to reproduce your problem?&lt;/p&gt;</comment>
                            <comment id="17517049" author="JIRAUSER287571" created="Mon, 4 Apr 2022 19:06:49 +0000"  >&lt;p&gt;Hi, I&apos;m still seeing this issue on a solrcloud cluster with one collection, one shard and five replicas.&#160; Our collection had indexed fine and we&apos;re not sure what caused this error to appear.&#160; We are running 8.11.1 (newest as of date).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;We are also not setting `BlockUnknown=true` as seen in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9188&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this issue&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17517051" author="anshumg" created="Mon, 4 Apr 2022 19:12:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nickumia&quot; class=&quot;user-hover&quot; rel=&quot;nickumia&quot;&gt;nickumia&lt;/a&gt;&#160; - the fix for hasn&apos;t been released yet. What you&apos;re seeing is most likely related to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14569&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SOLR-14569&lt;/a&gt;&#160;and it would be released with 9.0 and 8.11.2.&lt;/p&gt;</comment>
                            <comment id="17517059" author="JIRAUSER287571" created="Mon, 4 Apr 2022 19:23:30 +0000"  >&lt;p&gt;Thanks for your quick reply &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anshum&quot; class=&quot;user-hover&quot; rel=&quot;anshum&quot;&gt;anshum&lt;/a&gt;!&#160; I was trying to make sense of all of the information and comments in the issue you posted.&#160; Is the workaround solution surrounding the configuration of `shardHandlerFactory` in the solr.xml?&lt;/p&gt;

&lt;p&gt;Also, is there an ETA on the release of 8.11.2?&lt;/p&gt;</comment>
                            <comment id="17517060" author="anshumg" created="Mon, 4 Apr 2022 19:28:38 +0000"  >&lt;p&gt;The only workaround without the patch is to not define a custom shardHandlerFactory on the /select requestHandler . I&apos;m not sure what are you intend to override with the custom handler so you may not be able to get rid of it, in which case you can either patch, build, and deploy or wait until the new release.&lt;/p&gt;

&lt;p&gt;The 8.11.2 release should happen shortly after the 9.0 release which is currently underway.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I hope that helps.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17517108" author="JIRAUSER287571" created="Mon, 4 Apr 2022 20:48:28 +0000"  >&lt;p&gt;Thanks for your insight!&#160; My team will have to evaluate whether the workaround patch is compatible with our web application.&#160; I&apos;ve created &lt;a href=&quot;https://github.com/GSA/data.gov/issues/3770&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;an issue&lt;/a&gt; on our side to track our progress.&#160; We were hoping to complete a major migration in one of our applications; however, this sets us back if we can&apos;t assimilate the patch into our workflow.&#160;&lt;/p&gt;

&lt;p&gt;Really hoping Solr 8.11.2/9.0 happens soon! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Is there a good way to track progress of that milestone?&lt;/p&gt;</comment>
                            <comment id="17517129" author="anshumg" created="Mon, 4 Apr 2022 21:23:23 +0000"  >&lt;p&gt;The Solr developer list &lt;tt&gt;dev@solr.apache.org&lt;/tt&gt; is where you would be able to track the vote threads and also get an update.&lt;/p&gt;

&lt;p&gt;Once the vote passes there would be an email sent out to the developer and user mailing list along with updates on the Solr website.&lt;/p&gt;</comment>
                            <comment id="17517539" author="JIRAUSER287571" created="Tue, 5 Apr 2022 16:18:53 +0000"  >&lt;p&gt;Hi again &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anshum&quot; class=&quot;user-hover&quot; rel=&quot;anshum&quot;&gt;anshum&lt;/a&gt;, I did a deep dive on all of our solr configuration and have verified that we are not actually defining a custom shardHandlerFactory on the /select requestHandler.&#160; I created a new instance of our solr setup and am currently re-indexing it.&#160; While it is not the same issue I was seeing before, it seems vaguely related since it has to do with HTTP Authentication.&#160; Here&apos;s the backtrace from the logs,&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2022-04-05 16:07:22.471 ERROR (updateExecutor-9-thread-7-processing-n:&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-solr:80_solr x:ckan_shard1_replica_n1 c:ckan s:shard1 r:core_node3) [c:ckan s:shard1 r:core_node3 x:ckan_shard1_replica_n1] o.a.s.u.SolrCmdDistributor org.apache.solr.client.solrj.impl.BaseHttpSolrClient$RemoteSolrException: Error from server at &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;: Could not parse response with encoding ISO-8859-1 =&amp;gt; org.apache.solr.client.solrj.impl.BaseHttpSolrClient$RemoteSolrException: Error from server at &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;: Could not parse response with encoding ISO-8859-1
&#160; &#160; &#160; &#160; at org.apache.solr.client.solrj.impl.Http2SolrClient.processErrorsAndResponse(Http2SolrClient.java:703)
org.apache.solr.client.solrj.impl.BaseHttpSolrClient$RemoteSolrException: Error from server at &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;: Could not parse response with encoding ISO-8859-1
&#160; &#160; &#160; &#160; at org.apache.solr.client.solrj.impl.Http2SolrClient.processErrorsAndResponse(Http2SolrClient.java:703) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.solr.client.solrj.impl.Http2SolrClient.request(Http2SolrClient.java:421) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.solr.client.solrj.impl.Http2SolrClient.request(Http2SolrClient.java:776) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.solr.client.solrj.impl.ConcurrentUpdateHttp2SolrClient.request(ConcurrentUpdateHttp2SolrClient.java:370) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.solr.client.solrj.SolrClient.request(SolrClient.java:1290) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.solr.update.SolrCmdDistributor.doRequest(SolrCmdDistributor.java:345) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.solr.update.SolrCmdDistributor.lambda$submit$0(SolrCmdDistributor.java:334) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.FutureTask.run(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.FutureTask.run(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at com.codahale.metrics.InstrumentedExecutorService$InstrumentedRunnable.run(InstrumentedExecutorService.java:180) ~[metrics-core-4.1.5.jar:4.1.5]
&#160; &#160; &#160; &#160; at org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.lambda$execute$0(ExecutorUtil.java:218) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source) [?:?]
Caused by: java.io.IOException: org.eclipse.jetty.client.HttpResponseException: HTTP protocol violation: Authentication challenge without WWW-Authenticate header
&#160; &#160; &#160; &#160; at org.eclipse.jetty.client.util.InputStreamResponseListener$Input.toIOException(InputStreamResponseListener.java:345) ~[?:?]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.client.util.InputStreamResponseListener$Input.read(InputStreamResponseListener.java:313) ~[?:?]
&#160; &#160; &#160; &#160; at sun.nio.cs.StreamDecoder.readBytes(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at sun.nio.cs.StreamDecoder.implRead(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at sun.nio.cs.StreamDecoder.read(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.io.InputStreamReader.read(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.io.Reader.read(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:1282) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:1261) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.commons.io.IOUtils.copy(IOUtils.java:1108) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.commons.io.IOUtils.copy(IOUtils.java:922) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.commons.io.IOUtils.toString(IOUtils.java:2681) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.commons.io.IOUtils.toString(IOUtils.java:2707) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.solr.client.solrj.impl.Http2SolrClient.processErrorsAndResponse(Http2SolrClient.java:701) ~[?:?]
&#160; &#160; &#160; &#160; ... 14 more
Caused by: org.eclipse.jetty.client.HttpResponseException: HTTP protocol violation: Authentication challenge without WWW-Authenticate header
&#160; &#160; &#160; &#160; at org.eclipse.jetty.client.AuthenticationProtocolHandler$AuthenticationListener.onComplete(AuthenticationProtocolHandler.java:164) ~[?:?]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:218) ~[?:?]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:210) ~[?:?]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.client.HttpReceiver.terminateResponse(HttpReceiver.java:481) ~[?:?]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.client.HttpReceiver.terminateResponse(HttpReceiver.java:461) ~[?:?]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.client.HttpReceiver.responseSuccess(HttpReceiver.java:424) ~[?:?]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.http2.client.http.HttpReceiverOverHTTP2.access$1400(HttpReceiverOverHTTP2.java:49) ~[?:?]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.http2.client.http.HttpReceiverOverHTTP2$ContentNotifier.process(HttpReceiverOverHTTP2.java:273) ~[?:?]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.http2.client.http.HttpReceiverOverHTTP2$ContentNotifier.offer(HttpReceiverOverHTTP2.java:234) ~[?:?]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.http2.client.http.HttpReceiverOverHTTP2$ContentNotifier.access$300(HttpReceiverOverHTTP2.java:214) ~[?:?]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.http2.client.http.HttpReceiverOverHTTP2.notifyContent(HttpReceiverOverHTTP2.java:211) ~[?:?]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.http2.client.http.HttpReceiverOverHTTP2.onData(HttpReceiverOverHTTP2.java:179) ~[?:?]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.http2.HTTP2Stream.notifyData(HTTP2Stream.java:645) ~[http2-common-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.http2.HTTP2Stream.onData(HTTP2Stream.java:387) ~[http2-common-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.http2.HTTP2Stream.process(HTTP2Stream.java:306) ~[http2-common-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.http2.HTTP2Session.onData(HTTP2Session.java:260) ~[http2-common-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.http2.HTTP2Connection$ParserListener.onData(HTTP2Connection.java:390) ~[http2-common-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.http2.parser.BodyParser.notifyData(BodyParser.java:108) ~[http2-common-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.http2.parser.DataBodyParser.onData(DataBodyParser.java:150) ~[http2-common-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.http2.parser.DataBodyParser.onData(DataBodyParser.java:145) ~[http2-common-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.http2.parser.DataBodyParser.parse(DataBodyParser.java:111) ~[http2-common-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.http2.parser.Parser.parseBody(Parser.java:198) ~[http2-common-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.http2.parser.Parser.parse(Parser.java:127) ~[http2-common-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.http2.HTTP2Connection$HTTP2Producer.produce(HTTP2Connection.java:261) ~[http2-common-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.produceTask(EatWhatYouKill.java:362) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:186) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:173) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.produce(EatWhatYouKill.java:137) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.http2.HTTP2Connection.produce(HTTP2Connection.java:183) ~[http2-common-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.http2.HTTP2Connection.onFillable(HTTP2Connection.java:138) ~[http2-common-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.http2.HTTP2Connection$FillableCallback.succeeded(HTTP2Connection.java:361) ~[http2-common-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:105) ~[jetty-io-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.io.ChannelEndPoint$1.run(ChannelEndPoint.java:104) ~[jetty-io-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.util.thread.Invocable.invokeNonBlocking(Invocable.java:69) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.invokeTask(EatWhatYouKill.java:350) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:305) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:173) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.produce(EatWhatYouKill.java:137) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
&#160; &#160; &#160; &#160; ... 4 more &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The following log trace is the one I was originally seeing and the one that replicated the error on this issue and the one you posted.&#160; I was getting the same error on RecoveryStrategy (even though this one is just a MetricsHistoryHandler).&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2022-04-05 16:09:41.318 WARN &#160;(MetricsHistoryHandler-22-thread-1) [ &#160; ] o.a.s.c.s.i.SolrClientNodeStateProvider could not get tags from node &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-solr:80_solr =&amp;gt; org.apache.solr.client.solrj.impl.HttpSolrClient$RemoteSolrException: Error from server at http:&lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-solr:80/solr: Expected mime type application/octet-stream but got text/html. &amp;lt;html&amp;gt;
&lt;/span&gt;&amp;lt;head&amp;gt;
org.apache.solr.client.solrj.impl.HttpSolrClient$RemoteSolrException: Error from server at http:&lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-solr:80/solr: Expected mime type application/octet-stream but got text/html. &amp;lt;html&amp;gt;
&lt;/span&gt;&amp;lt;head&amp;gt;
&amp;lt;meta http-equiv=&lt;span class=&quot;code-quote&quot;&gt;&quot;Content-Type&quot;&lt;/span&gt; content=&lt;span class=&quot;code-quote&quot;&gt;&quot;text/html;charset=ISO-8859-1&quot;&lt;/span&gt;/&amp;gt;
&amp;lt;title&amp;gt;Error 401 Authentication failed, Response code: 401&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;&amp;lt;h2&amp;gt;HTTP ERROR 401 Authentication failed, Response code: 401&amp;lt;/h2&amp;gt;
&amp;lt;table&amp;gt;
&amp;lt;tr&amp;gt;&amp;lt;th&amp;gt;URI:&amp;lt;/th&amp;gt;&amp;lt;td&amp;gt;/solr/admin/metrics&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;
&amp;lt;tr&amp;gt;&amp;lt;th&amp;gt;STATUS:&amp;lt;/th&amp;gt;&amp;lt;td&amp;gt;401&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;
&amp;lt;tr&amp;gt;&amp;lt;th&amp;gt;MESSAGE:&amp;lt;/th&amp;gt;&amp;lt;td&amp;gt;Authentication failed, Response code: 401&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;
&amp;lt;tr&amp;gt;&amp;lt;th&amp;gt;SERVLET:&amp;lt;/th&amp;gt;&amp;lt;td&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;
&amp;lt;/table&amp;gt;&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;&#160; &#160; &#160; &#160; at org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:635) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:266) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:248) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.solr.client.solrj.SolrClient.request(SolrClient.java:1290) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.solr.client.solrj.impl.SolrClientNodeStateProvider$ClientSnitchCtx.invoke(SolrClientNodeStateProvider.java:389) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.solr.client.solrj.impl.SolrClientNodeStateProvider$ClientSnitchCtx.invokeWithRetry(SolrClientNodeStateProvider.java:354) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.solr.client.solrj.impl.SolrClientNodeStateProvider.fetchReplicaMetrics(SolrClientNodeStateProvider.java:197) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.solr.client.solrj.impl.SolrClientNodeStateProvider.fetchReplicaMetrics(SolrClientNodeStateProvider.java:187) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.solr.client.solrj.impl.SolrClientNodeStateProvider.getReplicaInfo(SolrClientNodeStateProvider.java:170) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.solr.handler.admin.MetricsHistoryHandler.collectGlobalMetrics(MetricsHistoryHandler.java:506) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.solr.handler.admin.MetricsHistoryHandler.collectMetrics(MetricsHistoryHandler.java:394) ~[?:?]
&#160; &#160; &#160; &#160; at org.apache.solr.handler.admin.MetricsHistoryHandler.lambda$&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;$0(MetricsHistoryHandler.java:241) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.FutureTask.runAndReset(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[?:?]
&#160; &#160; &#160; &#160; at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source) [?:?] &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I know you have other tasks, but if you have any additional information on how to fix the error I&apos;m seeing, it would be greatly appreciated.&#160; Also, if you think this issue would be resolved in the Solr 9.0 release, that information would be useful as well.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17517578" author="anshumg" created="Tue, 5 Apr 2022 17:14:29 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nickumia&quot; class=&quot;user-hover&quot; rel=&quot;nickumia&quot;&gt;nickumia&lt;/a&gt; - Let&apos;s move this conversation to the user list as this might need more investigating to make sure that it&apos;s related to this specific JIRA or the one that&apos;s already been resolved.&lt;/p&gt;
</comment>
                            <comment id="17532646" author="JIRAUSER289075" created="Fri, 6 May 2022 05:06:03 +0000"  >&lt;p&gt;We had same issue running solr 8.11 on k8s.&#160; Any eta of new releases?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13229569">SOLR-13421</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13238123">SOLR-13526</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13311363">SOLR-14569</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12970845" name="SOLR-13510.patch" size="6322" author="caomanhdat" created="Tue, 4 Jun 2019 14:46:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 27 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z03cxk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>