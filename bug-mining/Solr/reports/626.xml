<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:22:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-2383] Velocity: Generalize range and date facet display</title>
                <link>https://issues.apache.org/jira/browse/SOLR-2383</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Velocity (/browse) GUI has hardcoded price range facet and a hardcoded manufacturedate_dt date facet. Need general solution which work for any facet.range and facet.date.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12499787">SOLR-2383</key>
            <summary>Velocity: Generalize range and date facet display</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="janhoy">Jan H&#248;ydahl</assignee>
                                    <reporter username="janhoy">Jan H&#248;ydahl</reporter>
                        <labels>
                            <label>facet</label>
                            <label>range</label>
                            <label>velocity</label>
                    </labels>
                <created>Sat, 26 Feb 2011 03:42:56 +0000</created>
                <updated>Fri, 16 Sep 2011 14:48:51 +0000</updated>
                            <resolved>Tue, 6 Sep 2011 13:24:40 +0000</resolved>
                                                    <fixVersion>3.4</fixVersion>
                    <fixVersion>4.0-ALPHA</fixVersion>
                                    <component>Response Writers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                                                            <comments>
                            <comment id="12999711" author="janhoy" created="Sat, 26 Feb 2011 03:47:44 +0000"  >&lt;p&gt;Attachd patch fixes generalized display of facet.ranges&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Iterate over all available facet.ranges&lt;/li&gt;
	&lt;li&gt;Use field name as Display value (capitalized)&lt;/li&gt;
	&lt;li&gt;Fixes bug with wrongly quoted range string&lt;/li&gt;
	&lt;li&gt;Fixes bug where the &quot;More than..&quot; was always displayed&lt;/li&gt;
	&lt;li&gt;Displays the range label as &amp;lt;from&amp;gt; - &amp;lt;to&amp;gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12999713" author="janhoy" created="Sat, 26 Feb 2011 03:56:03 +0000"  >&lt;p&gt;Revising patch.&lt;/p&gt;

&lt;p&gt;Also, adds a range facet for popularity field&lt;/p&gt;</comment>
                            <comment id="12999814" author="janhoy" created="Sat, 26 Feb 2011 18:22:47 +0000"  >&lt;p&gt;This last patch adds the following:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Same generic treatment of facet.dates as for facet.range&lt;/li&gt;
	&lt;li&gt;Added the gap in plain text to the printout, i.e. prints &quot;Jan 2006 +1YEAR&quot; instead of only &quot;Jan 2006&quot;&lt;/li&gt;
	&lt;li&gt;Reduced font size of the &quot;toggle parsed query&quot; and made it stylable instead of hardcoding a &amp;lt;pre&amp;gt; tag&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13001970" author="janhoy" created="Thu, 3 Mar 2011 12:07:22 +0000"  >&lt;p&gt;Would appreciate if someone could test out this patch on your own data and test various combinations of facet.range and gaps to see if it is water tight&lt;/p&gt;</comment>
                            <comment id="13018549" author="janhoy" created="Mon, 11 Apr 2011 20:19:04 +0000"  >&lt;p&gt;Updated to trunk&lt;/p&gt;</comment>
                            <comment id="13018657" author="yseeley@gmail.com" created="Tue, 12 Apr 2011 01:03:59 +0000"  >&lt;p&gt;I started to take a look at this, but ran into exceptions due to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1566&quot; title=&quot;Allow components to add fields to outgoing documents&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1566&quot;&gt;&lt;del&gt;SOLR-1566&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13020510" author="yseeley@gmail.com" created="Sat, 16 Apr 2011 01:20:23 +0000"  >&lt;p&gt;Looking good Jan!&lt;/p&gt;

&lt;p&gt;I did notice one issue with the example data:&lt;br/&gt;
the &quot;popularity 3-6&quot; link shows 1 match, but when I click it, I get 6 results.&lt;/p&gt;

&lt;p&gt;I believe this is because the faceting is finding (3 &amp;lt;= popularity &amp;lt; 6) while the filter generated by clicking on the link is popularity:&lt;span class=&quot;error&quot;&gt;&amp;#91;3 TO 6&amp;#93;&lt;/span&gt;&lt;br/&gt;
So I guess the generated filters should generally be of the form popularity:[3 TO 6} ?&lt;/p&gt;</comment>
                            <comment id="13020939" author="janhoy" created="Mon, 18 Apr 2011 08:17:29 +0000"  >&lt;p&gt;Yonik, you&apos;re right. With the new default to have the upper range exclusive, we need to adjust the fq.&lt;/p&gt;

&lt;p&gt;This new patch uses &apos;}&apos; as upper boundary for the filters for both range and date, making the counts correct for the example.&lt;/p&gt;

&lt;p&gt;NOTE: I have not attempted to make it smart enough to obey facet.range.include.&lt;/p&gt;</comment>
                            <comment id="13034001" author="janhoy" created="Mon, 16 May 2011 12:58:40 +0000"  >&lt;p&gt;Reopening to add patch for branch 3.2&lt;/p&gt;</comment>
                            <comment id="13034002" author="janhoy" created="Mon, 16 May 2011 13:00:54 +0000"  >&lt;p&gt;This Velocity enhancement should make it to 3.2.&lt;/p&gt;

&lt;p&gt;In this patch I back-port what was committed for 4.0, with these exceptions:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;No pivot facets&lt;/li&gt;
	&lt;li&gt;End range uses ] instead of }&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13043817" author="rcmuir" created="Fri, 3 Jun 2011 16:47:13 +0000"  >&lt;p&gt;Bulk move 3.2 -&amp;gt; 3.3&lt;/p&gt;</comment>
                            <comment id="13052410" author="janhoy" created="Tue, 21 Jun 2011 07:46:24 +0000"  >&lt;p&gt;3.3 will support the [from TO to} syntax, right? Attempt to get this in for 3.3. Grant?&lt;/p&gt;</comment>
                            <comment id="13055264" author="janhoy" created="Mon, 27 Jun 2011 01:02:44 +0000"  >&lt;p&gt;This patch (&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2383&quot; title=&quot;Velocity: Generalize range and date facet display&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2383&quot;&gt;&lt;del&gt;SOLR-2383&lt;/del&gt;&lt;/a&gt;-branch_3x.patch) works with 3x branch. Ready for commit?&lt;/p&gt;</comment>
                            <comment id="13055275" author="janhoy" created="Mon, 27 Jun 2011 01:26:15 +0000"  >&lt;p&gt;Moved date facet over to range facet. Fixed popularity facet.&lt;/p&gt;

&lt;p&gt;Only problem now is that 3.x does not have support for exclusive range queries [from TO to} so the count when clicking a range facet is wrong.&lt;/p&gt;</comment>
                            <comment id="13087011" author="gsingers" created="Thu, 18 Aug 2011 13:40:35 +0000"  >&lt;p&gt;Jan, you want to take this one?&lt;/p&gt;</comment>
                            <comment id="13096414" author="janhoy" created="Fri, 2 Sep 2011 22:15:53 +0000"  >&lt;p&gt;New patch against branch_3x&lt;/p&gt;

&lt;p&gt;Fixed display of date ranges with correct UTC date format. Improved display of float ranges. Removed date facet macro.&lt;/p&gt;

&lt;p&gt;Think this is ready for 3.4, could someone take it for a ride?&lt;/p&gt;</comment>
                            <comment id="13096633" author="janhoy" created="Sat, 3 Sep 2011 11:09:18 +0000"  >&lt;p&gt;Hmm, found some bugs already, will do another one&lt;/p&gt;</comment>
                            <comment id="13096635" author="janhoy" created="Sat, 3 Sep 2011 11:21:13 +0000"  >&lt;p&gt;Fixed bug in some ranges, which contained whitespace due to Velocity macro. Also, now always displays date range end as a datemath&lt;/p&gt;</comment>
                            <comment id="13097109" author="janhoy" created="Mon, 5 Sep 2011 10:19:02 +0000"  >&lt;p&gt;Plan to commit this in a day or two, if no objections&lt;/p&gt;</comment>
                            <comment id="13097197" author="billnbell" created="Mon, 5 Sep 2011 16:22:11 +0000"  >&lt;p&gt;Does this mean the [0 TO 8} will not work?&lt;/p&gt;

&lt;p&gt;popularity:[3 TO 6} ?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;
</comment>
                            <comment id="13097315" author="janhoy" created="Mon, 5 Sep 2011 20:34:06 +0000"  >&lt;p&gt;@Bill&lt;br/&gt;
Yes, the exclusive upper range syntax [x TO y} only works on 4.0, and I haven&apos;t found a good way to emulate the same behaviour in 3.x. This means that you&apos;ll sometimes see more hits when clicking a facet than the number presented, being the values exactly on the upper bound. Do you have a suggestion?&lt;/p&gt;</comment>
                            <comment id="13097990" author="janhoy" created="Tue, 6 Sep 2011 13:24:40 +0000"  >&lt;p&gt;Checked in backport to 3.x&lt;/p&gt;</comment>
                            <comment id="13105839" author="dsmiley" created="Fri, 16 Sep 2011 04:14:03 +0000"  >&lt;p&gt;Jan,&lt;br/&gt;
To get around the Solr 3x limitation on not being able to say [x TO y}, you can still do: &lt;span class=&quot;error&quot;&gt;&amp;#91;x TO y&amp;#93;&lt;/span&gt; -y    &lt;br/&gt;
I tell readers about this in the 2nd edition of my Solr book due the end of October.&lt;/p&gt;</comment>
                            <comment id="13105955" author="janhoy" created="Fri, 16 Sep 2011 09:03:28 +0000"  >&lt;p&gt;David. Thanks for your comment. You are welcome to submit a patch which fixes this in the Velocity templates in 3x - would be nice.&lt;/p&gt;</comment>
                            <comment id="13106207" author="rcmuir" created="Fri, 16 Sep 2011 14:48:51 +0000"  >&lt;p&gt;bulk close for 3.4&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12500169">SOLR-2398</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12479323" name="SOLR-2383-branch_32.patch" size="9385" author="janhoy" created="Mon, 16 May 2011 13:00:53 +0000"/>
                            <attachment id="12492890" name="SOLR-2383-branch_3x.patch" size="19209" author="janhoy" created="Sat, 3 Sep 2011 11:21:13 +0000"/>
                            <attachment id="12492838" name="SOLR-2383-branch_3x.patch" size="9514" author="janhoy" created="Fri, 2 Sep 2011 22:15:53 +0000"/>
                            <attachment id="12483890" name="SOLR-2383-branch_3x.patch" size="8608" author="janhoy" created="Mon, 27 Jun 2011 01:26:15 +0000"/>
                            <attachment id="12483886" name="SOLR-2383-branch_3x.patch" size="9194" author="janhoy" created="Mon, 27 Jun 2011 01:02:44 +0000"/>
                            <attachment id="12476588" name="SOLR-2383.patch" size="7424" author="janhoy" created="Mon, 18 Apr 2011 08:17:29 +0000"/>
                            <attachment id="12476052" name="SOLR-2383.patch" size="6616" author="janhoy" created="Mon, 11 Apr 2011 20:19:04 +0000"/>
                            <attachment id="12472064" name="SOLR-2383.patch" size="6677" author="janhoy" created="Sat, 26 Feb 2011 18:22:46 +0000"/>
                            <attachment id="12472014" name="SOLR-2383.patch" size="3395" author="janhoy" created="Sat, 26 Feb 2011 03:56:03 +0000"/>
                            <attachment id="12472011" name="SOLR-2383.patch" size="3443" author="janhoy" created="Sat, 26 Feb 2011 03:47:44 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12521275">SOLR-2741</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5149</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03l3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18851</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>