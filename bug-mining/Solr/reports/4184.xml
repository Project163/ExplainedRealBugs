<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:37:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-13336] solrconfig.xml maxBooleanClauses ignored by programtic/rewrtten queries; can result in exponential expansion of naive queries</title>
                <link>https://issues.apache.org/jira/browse/SOLR-13336</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;changes made in Solr 7.0 set the effective value of &lt;tt&gt;BoleanQuery.getMaxClauseCount&lt;/tt&gt; to &lt;tt&gt;Integer.MAX_VALUE-1&lt;/tt&gt; and only impossed a restriction based on the (existing) solrconfig.xml setting  at the Solr query parser level via a new utility helper method.l&lt;/p&gt;

&lt;p&gt;But this means programatically generated queries (either by low level lucene methods, or by query re-writing) no longer had any safety valve to prevent (effectively) infinite expansion.  This issue fixes this problem by:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;restoring a default upper bound on &lt;tt&gt;BoleanQuery.getMaxClauseCount&lt;/tt&gt; of 1024&lt;/li&gt;
	&lt;li&gt;introducing a new solr.xml level setting for configuring this upper bound:
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;int name=&quot;maxBooleanClauses&quot;&amp;gt;${solr.max.booleanClauses:1024}&amp;lt;/int&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;NOTE&lt;/b&gt; that this solr.xml limit is ahard upper bound, that superceeds the existing solrconfig.xml setting, which has been left in place and still limits the size of user specified boolean queries.  ie: solr.xml maxBooleanClauses &amp;gt;= solrconfig.xml maxBooleanClauses &amp;gt;= number of clauses a user explicitly specifies in a query string; solr.xml maxBooleanClauses &amp;gt;= numberr of clauses in an expanded/rewritten query&lt;/p&gt;

&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;original bug report&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;Since &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10921&quot; title=&quot;Make boolean query clause limit configurable per-query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10921&quot;&gt;&lt;del&gt;SOLR-10921&lt;/del&gt;&lt;/a&gt; it appears that Solr always sets &lt;tt&gt;BooleanQuery.maxClauseCount&lt;/tt&gt; (at the Lucene level) to &lt;tt&gt;Integer.MAX_VALUE-1&lt;/tt&gt;. I assume this is because Solr parses &lt;tt&gt;maxBooleanClauses&lt;/tt&gt; out of the config and applies it externally.&lt;/p&gt;

&lt;p&gt;In any case, when used as part of &lt;tt&gt;lucene.util.QueryBuilder.analyzeGraphPhrase&lt;/tt&gt; (and possibly other places?), the Lucene code checks internally against only the static &lt;tt&gt;maxClauseCount&lt;/tt&gt; variable (permanently set to &lt;tt&gt;Integer.MAX_VALUE-1&lt;/tt&gt; in the context of Solr).&lt;/p&gt;

&lt;p&gt;Thus in at least one case (&lt;tt&gt;analyzeGraphPhrase()&lt;/tt&gt;, but&#160;possibly others?), &lt;tt&gt;maxBooleanClauses&lt;/tt&gt; is having no effect. I&apos;m pretty sure this is what&apos;s underlying the &lt;a href=&quot;https://mail-archives.apache.org/mod_mbox/lucene-solr-user/201902.mbox/%3CCAF%3DheHE6-MOtn2XRbEg7%3D1tpNEGtE8GaChnOhFLPeJzpF18SGA%40mail.gmail.com%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;issue reported here as being related to Solr 7.6&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;To summarize, users are definitely susceptible (to varying degrees of likely severity, assuming no actual &lt;em&gt;malicious&lt;/em&gt; attack) if:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Running Solr &amp;gt;= 7.6.0&lt;/li&gt;
	&lt;li&gt;Using edismax with &quot;ps&quot; param set to &amp;gt;0&lt;/li&gt;
	&lt;li&gt;Query-time analysis chain is &lt;em&gt;at all&lt;/em&gt; capable of producing graphs (e.g., WordDelimiterGraphFilter, SynonymGraphFilter that has corresponding synonyms with varying token lengths.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Users are &lt;em&gt;particularly&lt;/em&gt; vulnerable in practice if they have query-time &lt;tt&gt;WordDelimiterGraphFilter&lt;/tt&gt; configured with &lt;tt&gt;preserveOriginal=true&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;To clarify, Lucene/Solr 7.6 didn&apos;t exactly &lt;em&gt;introduce&lt;/em&gt; the issue; it only increased the likelihood of problems manifesting (as a result of &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-8531&quot; title=&quot;QueryBuilder hard-codes inOrder=true for generated sloppy span near queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-8531&quot;&gt;&lt;del&gt;LUCENE-8531&lt;/del&gt;&lt;/a&gt;). Notably, the &quot;enumerated strings&quot; approach to graph phrase query (reintroduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-8531&quot; title=&quot;QueryBuilder hard-codes inOrder=true for generated sloppy span near queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-8531&quot;&gt;&lt;del&gt;LUCENE-8531&lt;/del&gt;&lt;/a&gt;) was previously in place pre-6.5 &#8211; at which point it could rely on default Lucene-level &lt;tt&gt;maxClauseCount&lt;/tt&gt; failsafe (removed as of 7.0). This explains the odd &quot;Affects versions&quot; =&amp;gt; maxBooleanClauses was disabled at the Lucene level (in Solr contexts) starting with version 7.0, but the change became more likely to manifest problems for users as of 7.6.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13222711">SOLR-13336</key>
            <summary>solrconfig.xml maxBooleanClauses ignored by programtic/rewrtten queries; can result in exponential expansion of naive queries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="magibney">Michael Gibney</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Mar 2019 01:40:57 +0000</created>
                <updated>Thu, 16 Jun 2022 12:58:22 +0000</updated>
                            <resolved>Mon, 15 Apr 2019 22:03:29 +0000</resolved>
                                    <version>7.0</version>
                    <version>8.0</version>
                                    <fixVersion>8.1</fixVersion>
                    <fixVersion>9.0</fixVersion>
                                    <component>query parsers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="16796699" author="mgibney" created="Wed, 20 Mar 2019 02:09:24 +0000"  >&lt;p&gt;I hope to put together a test that illustrates the problem, but in the meantime, the following can reproduce the issue.&lt;/p&gt;

&lt;p&gt;Literally &lt;em&gt;any&lt;/em&gt; analysis chain capable of producing graphs is susceptible. A simple example is:&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;fieldType name=&lt;span class=&quot;code-quote&quot;&gt;&quot;search&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.TextField&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;analyzer&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;tokenizer class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.ICUTokenizerFactory&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;filter class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.WordDelimiterGraphFilterFactory&quot;&lt;/span&gt; generateWordParts=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; generateNumberParts=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; preserveOriginal=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;filter class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.ICUFoldingFilterFactory&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/analyzer&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/fieldType&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;tt&gt;SynonymGraphFilter&lt;/tt&gt; with varying-length multi-word synonyms and &lt;tt&gt;expand=true&lt;/tt&gt; in place of WDGF would also be vulnerable.&lt;/p&gt;

&lt;p&gt;Assuming &lt;tt&gt;search_field&lt;/tt&gt; is of type &lt;tt&gt;search&lt;/tt&gt; (as defined above), the following query (with 32 graph articulation points) would expand to `Integer.MAX_VALUE` boolean clauses:&lt;br/&gt;
&lt;tt&gt;/solr/collection/select?defType=edismax&amp;amp;ps=1&amp;amp;qf=search_field&amp;amp;pf=search_field&amp;amp;q=a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1+a1&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Although the above search is sufficient to reproduce the issue with a simple config, it is admittedly a bit contrived. But in practice there are many reasonable configs that are more liberal about creating graphs for naive input. For instance, the reason our config was so vulnerable was that we had our &lt;tt&gt;ICUTokenizer&lt;/tt&gt; set with a &lt;tt&gt;rulefiles&lt;/tt&gt; rbbi config to not strip certain adjacent characters that have semantic significance. One of the things we did was to leave &quot;&amp;#43;&quot; in place (and then deal with it downstream in the WDGF) for cases like &quot;&amp;#43;1&quot; or &quot;a&amp;#43;&quot; or &quot;c&amp;#43;&amp;#43;&quot; or &quot;you&amp;#43;me&quot;.&lt;/p&gt;

&lt;p&gt;Then we got queries from an bot that double-encoded spaces as literal `+` characters, so we were getting requests encoded as url query params like: &lt;tt&gt;war%2Band%2Bpeace&lt;/tt&gt;, instead of &lt;tt&gt;war+and+peace&lt;/tt&gt;, which expanded to a phrase query over synonym queries (not too bad). But once a term like &quot;Y2K&quot; kicked query parsing into &lt;tt&gt;analyzeGraphPhrase()&lt;/tt&gt;, each term was considered an articulation point, so `a b Y2K c d e f g h i j k l m n o p q r s t u v w x y z`, double-URL-encoded, with `n=27` terms, was getting parsed into a boolean query with 2^(n-1) clauses, with the failsafe &lt;tt&gt;maxBooleanClauses&lt;/tt&gt; effectively entirely disabled.&lt;/p&gt;
</comment>
                            <comment id="16797187" author="mgibney" created="Wed, 20 Mar 2019 13:46:53 +0000"  >&lt;p&gt;This issue (just posted on the lucene-solr-user list) is likely related:&lt;br/&gt;
 &lt;a href=&quot;https://mail-archives.apache.org/mod_mbox/lucene-solr-user/201903.mbox/%3C85F8132D-7D82-4D3B-A737-C4176D7CF245%40contoso.com%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Use of ShingleFilter causing very large BooleanQuery structures in Solr 7.1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16802540" author="janhoy" created="Wed, 27 Mar 2019 08:25:45 +0000"  >&lt;p&gt;I don&apos;t think we should classify DOS attacks as security issues, but more as normal performance issues.&lt;/p&gt;</comment>
                            <comment id="16803191" author="ctargett" created="Wed, 27 Mar 2019 18:32:57 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t think we should classify DOS attacks as security issues, but more as normal performance issues.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It would be good to get some consensus on that idea. &lt;/p&gt;

&lt;p&gt;I asked Hoss to take a look at this problem, and he agrees it traces back to the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10921&quot; title=&quot;Make boolean query clause limit configurable per-query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10921&quot;&gt;&lt;del&gt;SOLR-10921&lt;/del&gt;&lt;/a&gt;. In essence (I&apos;m paraphrasing here, and barely understand it...don&apos;t shoot the messenger), the hardcoded lack of a safety valve was exposed by &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-8531&quot; title=&quot;QueryBuilder hard-codes inOrder=true for generated sloppy span near queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-8531&quot;&gt;&lt;del&gt;LUCENE-8531&lt;/del&gt;&lt;/a&gt;, but Hoss pointed out to me that any code path that uses &lt;tt&gt;BooleanQuery.Builder&lt;/tt&gt; without going through what was added with &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10921&quot; title=&quot;Make boolean query clause limit configurable per-query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10921&quot;&gt;&lt;del&gt;SOLR-10921&lt;/del&gt;&lt;/a&gt; is also susceptible to this problem.&lt;/p&gt;

&lt;p&gt;Hoss also said that the only real solution is to add a &lt;tt&gt;solr.xml&lt;/tt&gt; setting to re-add control back to the &quot;the global static &lt;tt&gt;BooleanQuery.maxBooleanClauses&lt;/tt&gt; static value that gives us a safety valve&quot;. The change that was made in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10921&quot; title=&quot;Make boolean query clause limit configurable per-query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10921&quot;&gt;&lt;del&gt;SOLR-10921&lt;/del&gt;&lt;/a&gt; only provides a safety valve for &lt;em&gt;explicitly&lt;/em&gt; or &lt;em&gt;externally&lt;/em&gt; generated queries (such as a user or client might do) but doesn&apos;t do anything to address &lt;em&gt;internally&lt;/em&gt; generated queries like the ones described here.&lt;/p&gt;

&lt;p&gt;This is a really major fundamental problem here, and I think we need to make this issue public so we can determine as a community the best solution and get more eyes on it. Being hidden away as a private issue isn&apos;t going to get us much traction IMO, so we should only keep it this way if we agree it&apos;s a real threat.&lt;/p&gt;</comment>
                            <comment id="16803494" author="ehatcher" created="Thu, 28 Mar 2019 00:30:01 +0000"  >&lt;p&gt;My take: this is a &quot;security&quot; issue in that it could be used to bring down critical, life-depending-even, systems.&lt;/p&gt;

&lt;p&gt;I agree with Cassandra that I think we make it public as well, as it&apos;s not a data leak vulnerability and we already have several reports on the mailing list of this happening in the wild.&#160; &#160;Looks like the fix can come fast and furious given the incredible work Hoss has done on it already and we have a need to get other fixes in to a quick turn around Solr 7.x release (iiuc).&#160; &#160;&lt;/p&gt;</comment>
                            <comment id="16803861" author="dsmiley" created="Thu, 28 Mar 2019 11:57:01 +0000"  >&lt;p&gt;+1 to make public &lt;/p&gt;</comment>
                            <comment id="16805073" author="mgibney" created="Fri, 29 Mar 2019 15:03:59 +0000"  >&lt;p&gt;I know it&apos;s not my decision to make, but I&apos;m&#160;ok with making it public. I realize that in most cases, DOS would not be considered a security vulnerability, but to explain my decision to initially raise this as private/security issue:&lt;/p&gt;

&lt;p&gt;For susceptible configurations, this issue can manifest accidentally for naive input, and can be trivially triggered by succinct (&amp;lt;100 characters) malicious (or curious &#8211; &quot;I wonder if &lt;em&gt;x&lt;/em&gt; site is vulnerable&quot;) input. When the issue manifests, it can easily do so catastrophically, consuming all heap and large amounts of CPU, permanently bringing down enough nodes to tank an entire cluster, regardless of replication, etc.&lt;/p&gt;

&lt;p&gt;For my case, there were no log messages associated with the triggering request; debugging required thread dumps, following up stack trace in source code, etc. Also, because the issue manifests only for certain input, for susceptible configs even organizations with integration tests might&#160;deploy without detecting a problem.&lt;/p&gt;

&lt;p&gt;To summarize, I&apos;m not sure whether or not this qualifies as a &quot;security issue&quot; in the canonical sense, but I definitely didn&apos;t feel comfortable personally making the call to broadcast it publicly (at least not without having more people involved in the decision).&lt;/p&gt;</comment>
                            <comment id="16812721" author="hossman" created="Mon, 8 Apr 2019 19:23:54 +0000"  >&lt;p&gt;As cassandra mentioned above, I think the only viable way to &quot;fix&quot; this is to replace the current hardcoded...&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
BooleanQuery.setMaxClauseCount(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.MAX_VALUE-1);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;...introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10921&quot; title=&quot;Make boolean query clause limit configurable per-query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10921&quot;&gt;&lt;del&gt;SOLR-10921&lt;/del&gt;&lt;/a&gt; with a new &lt;tt&gt;solr.xml&lt;/tt&gt; setting...&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; != &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.cfg.getBooleanQueryMaxClauseCount()) {
  BooleanQuery.setMaxClauseCount(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.cfg.getBooleanQueryMaxClauseCount());
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The attached patch:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;adds &lt;tt&gt;maxBooleanClauses&lt;/tt&gt; as a new global optional &lt;tt&gt;solr.xml&lt;/tt&gt; setting
	&lt;ul&gt;
		&lt;li&gt;does &lt;b&gt;NOT&lt;/b&gt; add any new hardcoded default &#8211; instead it simply defers to the &lt;tt&gt;BooleanQuery.getMaxClauseCount()&lt;/tt&gt; default&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;preserves the existing use of &lt;tt&gt;solrconfig.xml&lt;/tt&gt;&apos;s &lt;tt&gt;&amp;lt;maxBooleanClauses&amp;gt;&lt;/tt&gt; as a &quot;per-collection&quot; upper bound on the number of clauses in an &lt;em&gt;explicit/externally created&lt;/em&gt; BooleanQuery (as introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10921&quot; title=&quot;Make boolean query clause limit configurable per-query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10921&quot;&gt;&lt;del&gt;SOLR-10921&lt;/del&gt;&lt;/a&gt;)
	&lt;ul&gt;
		&lt;li&gt;logs a warning if the &lt;tt&gt;solrconfig.xml&lt;/tt&gt; value for &lt;tt&gt;&amp;lt;maxBooleanClauses&amp;gt;&lt;/tt&gt; exceeds the global &lt;tt&gt;maxBooleanClauses&lt;/tt&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;adds a new &quot;softcoded&quot; default to the solr.xml shipped with solr, allowing the same sysprop already used in the &lt;tt&gt;_default&lt;/tt&gt; configset&apos;s &lt;tt&gt;solrconfig.xml&lt;/tt&gt; to control both limits at the same time...
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;!-- solr.xml --&amp;gt;
  &amp;lt;int name=&quot;maxBooleanClauses&quot;&amp;gt;${solr.max.booleanClauses:1024}&amp;lt;/int&amp;gt;

&amp;lt;!-- solrconfig.xml --&amp;gt;
    &amp;lt;maxBooleanClauses&amp;gt;${solr.max.booleanClauses:1024}&amp;lt;/maxBooleanClauses&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The outstanding nocommits are related to:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;updating the ref-guide to explain the two options and how they relate&lt;/li&gt;
	&lt;li&gt;updating the comments explaining &lt;tt&gt;&amp;lt;maxBooleanClauses&amp;gt;&lt;/tt&gt; in &lt;tt&gt;solrconfig.xml&lt;/tt&gt; to mention the solr.xml setting as an upper bound&lt;/li&gt;
	&lt;li&gt;whether anyone wants to bikeshed over the topic of solr having a hardcoded default for global &lt;tt&gt;maxBooleanClauses&lt;/tt&gt; instead of using the existing hardcoded lucene default
	&lt;ul&gt;
		&lt;li&gt;I&apos;m not willing to add this &#8211; if someone else wants to they can update the patch themselves&lt;/li&gt;
		&lt;li&gt;i only included these nocommits to draw attention to what should be changed if there is concensus on adding this.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;
&lt;p&gt;If there are no objections to the approach in this patch, i&apos;ll move forward with updating the docs &amp;amp; config comments.&lt;/p&gt;</comment>
                            <comment id="16812900" author="hossman" created="Tue, 9 Apr 2019 00:44:02 +0000"  >&lt;p&gt;Patch updated to include...&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;solr ref guide updates for both options, clarifying the distinction, and hyperlinking between the two&lt;/li&gt;
	&lt;li&gt;updated default/sample solrconfig.xml comments clarifying scope that &lt;tt&gt;&amp;lt;maxBooleanClauses&amp;gt;&lt;/tt&gt; impacts and mentioning solr.xml setting.&lt;/li&gt;
	&lt;li&gt;remove remaining nocommit comments&lt;/li&gt;
	&lt;li&gt;resolve one precommit issue in a test (don&apos;t use &apos;new Integer&apos;)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think this is ready to commit to master &amp;amp; backport to branch_8x but i would appreciate feedback first.&lt;/p&gt;

&lt;p&gt;Also: Anyone have any thoughts on how much of this can/should be backported for bug fix releases, and which branches it should be backported too?&lt;/p&gt;</comment>
                            <comment id="16813281" author="dsmiley" created="Tue, 9 Apr 2019 11:12:58 +0000"  >&lt;p&gt;+1 to your approach as described     I&#8217;m traveling and can&#8217;t look at your patch&lt;/p&gt;</comment>
                            <comment id="16814727" author="mgibney" created="Wed, 10 Apr 2019 18:02:35 +0000"  >&lt;p&gt;+1, the patch looks good to me; thanks!&lt;/p&gt;</comment>
                            <comment id="16815196" author="lucenesolrqa" created="Thu, 11 Apr 2019 08:31:22 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Prechecks &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; test4tests &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch appears to include 4 new or modified test files. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; master Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  4m 23s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Patch Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  3m 52s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  3m 52s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Check configsets&apos; lucene version &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  3m 38s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Release audit (RAT) &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  3m 48s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Check forbidden APIs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  3m 38s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Validate source patterns &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  3m 38s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Validate ref guide &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  3m 38s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Other Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 39m 53s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; core in the patch failed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 13m 55s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; solrj in the patch passed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 69m 15s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Reason &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Tests &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Failed junit tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; solr.handler.admin.AutoscalingHistoryHandlerTest &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13336&quot; title=&quot;solrconfig.xml maxBooleanClauses ignored by programtic/rewrtten queries; can result in exponential expansion of naive queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13336&quot;&gt;&lt;del&gt;SOLR-13336&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12965266/SOLR-13336.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12965266/SOLR-13336.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  compile  javac  unit  ratsources  checkforbiddenapis  validatesourcepatterns  checkluceneversion  validaterefguide  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux lucene2-us-west.apache.org 4.4.0-112-generic #135-Ubuntu SMP Fri Jan 19 11:48:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-SOLR-Build/sourcedir/dev-tools/test-patch/lucene-solr-yetus-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 02c4503 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; version: Apache Ant(TM) version 1.9.6 compiled on July 20 2018 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 1.8.0_191 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; unit &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/369/artifact/out/patch-unit-solr_core.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/369/artifact/out/patch-unit-solr_core.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Test Results &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/369/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/369/testReport/&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: solr/core solr/server solr/solrj solr/solr-ref-guide U: solr &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/369/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/369/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.7.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16815251" author="ab" created="Thu, 11 Apr 2019 09:32:43 +0000"  >&lt;p&gt;+1 to the change, this makes sense from the operational POV, too - set a safe global limit and then further lower it down as necessary per collection, knowing it won&apos;t ever get worse than the global limit no matter how&#160;sloppy your query parser is.&lt;/p&gt;

&lt;p&gt;I think this should be backported to all active 8x branches, not sure about 7x.&lt;/p&gt;

&lt;p&gt;A few minor comments:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;`SolrConfig`: &quot;log.warn(&quot;solrconfig.xml: &amp;lt;maxBooleanClauses&amp;gt; of {} is greater then global limit of {}&quot;: &quot;then&quot; -&amp;gt; &quot;than&quot;&lt;/li&gt;
	&lt;li&gt;`TestSolrQueryParser` @BeforeClass: I wonder if this won&apos;t affect other unrelated tests executing in the same JVM?&lt;/li&gt;
	&lt;li&gt;`CoreContainer`: &quot;if (null != this.cfg.getBooleanQueryMaxClauseCount()) {&quot; - this hurts my eyes a little &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;could we please swap the sides?&lt;/li&gt;
	&lt;li&gt;`StreamExpressionTest`: &quot;// use filter() to allow eing parsed&quot;: &quot;eing&quot; -&amp;gt; &quot;being&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;There are also a few small typos in the Ref Guide docs:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&quot;whether those clauses where explicitly&quot;: &quot;where&quot; -&amp;gt; &quot;were&quot;. Not sure if the second part of the sentence doesn&apos;t need a verb...&lt;/li&gt;
	&lt;li&gt;&quot;specify more clauses then this&quot;: &quot;then&quot; -&amp;gt; &quot;than&quot;&lt;/li&gt;
	&lt;li&gt;&quot;per-collection limit is greater then&quot;: &quot;then&quot; -&amp;gt; &quot;than&quot;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16815911" author="ehatcher" created="Fri, 12 Apr 2019 02:50:44 +0000"  >&lt;p&gt;+1 to this.&#160; &#160;Hoss&apos; analysis is thorough, and the patch hits the spot.&lt;/p&gt;</comment>
                            <comment id="16816684" author="hossman" created="Fri, 12 Apr 2019 21:55:33 +0000"  >&lt;p&gt;Attaching an updated patch that fixes all the typos ab mentioned...&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;`TestSolrQueryParser` @BeforeClass: I wonder if this won&apos;t affect other unrelated tests executing in the same JVM?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;...if it does then that&apos;s a bug in &lt;tt&gt;SystemPropertiesRestoreRule&lt;/tt&gt; and we have much bigger problems in our tests then just this one change.&lt;/p&gt;</comment>
                            <comment id="16816685" author="hossman" created="Fri, 12 Apr 2019 21:56:54 +0000"  >&lt;p&gt;Gah ... &quot;Attach Files&quot; let me &quot;Attach Files&quot; w/o requiring me to actually attach the file &amp;#8211; here it is.&lt;/p&gt;</comment>
                            <comment id="16816878" author="lucenesolrqa" created="Sat, 13 Apr 2019 08:52:44 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Prechecks &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; test4tests &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch appears to include 4 new or modified test files. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; master Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  2m  9s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Patch Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 58s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 59s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Check configsets&apos; lucene version &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 37s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Release audit (RAT) &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 49s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Check forbidden APIs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 37s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Validate source patterns &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 37s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Validate ref guide &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 37s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Other Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 45m 56s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; core in the patch passed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  5m 37s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; solrj in the patch passed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 59m 37s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13336&quot; title=&quot;solrconfig.xml maxBooleanClauses ignored by programtic/rewrtten queries; can result in exponential expansion of naive queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13336&quot;&gt;&lt;del&gt;SOLR-13336&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12965763/SOLR-13336.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12965763/SOLR-13336.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  compile  javac  unit  ratsources  checkforbiddenapis  validatesourcepatterns  checkluceneversion  validaterefguide  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux lucene1-us-west 4.4.0-137-generic #163~14.04.1-Ubuntu SMP Mon Sep 24 17:14:57 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-SOLR-Build/sourcedir/dev-tools/test-patch/lucene-solr-yetus-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 6e28cd6 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; version: Apache Ant(TM) version 1.9.3 compiled on July 24 2018 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 1.8.0_191 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Test Results &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/372/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/372/testReport/&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: solr/core solr/server solr/solrj solr/solr-ref-guide U: solr &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/372/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/372/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.7.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16818199" author="jira-bot" created="Mon, 15 Apr 2019 17:27:18 +0000"  >&lt;p&gt;Commit d90034f0d61cd1525e10d07cf064a8647dc08cc9 in lucene-solr&apos;s branch refs/heads/master from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=d90034f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=d90034f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13336&quot; title=&quot;solrconfig.xml maxBooleanClauses ignored by programtic/rewrtten queries; can result in exponential expansion of naive queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13336&quot;&gt;&lt;del&gt;SOLR-13336&lt;/del&gt;&lt;/a&gt;: add maxBooleanClauses (default to 1024) setting to solr.xml, reverting previous effective value of Integer.MAX_VALUE-1, to restrict risk of pathalogical query expansion.&lt;/p&gt;</comment>
                            <comment id="16818267" author="jira-bot" created="Mon, 15 Apr 2019 18:40:57 +0000"  >&lt;p&gt;Commit 59a3c45d9cc1a338c3dffbe5e7bd996a8e0dd37a in lucene-solr&apos;s branch refs/heads/branch_8x from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=59a3c45&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=59a3c45&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13336&quot; title=&quot;solrconfig.xml maxBooleanClauses ignored by programtic/rewrtten queries; can result in exponential expansion of naive queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13336&quot;&gt;&lt;del&gt;SOLR-13336&lt;/del&gt;&lt;/a&gt;: add maxBooleanClauses (default to 1024) setting to solr.xml, reverting previous effective value of Integer.MAX_VALUE-1, to restrict risk of pathalogical query expansion.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit d90034f0d61cd1525e10d07cf064a8647dc08cc9)&lt;/p&gt;</comment>
                            <comment id="16818428" author="hossman" created="Mon, 15 Apr 2019 22:03:29 +0000"  >&lt;p&gt;Ok, i think we&apos;re all good now .. thank you for raising this issue  Michael, and thanks to everyone who helped review the patch.&lt;/p&gt;</comment>
                            <comment id="16822093" author="jira-bot" created="Fri, 19 Apr 2019 18:00:12 +0000"  >&lt;p&gt;Commit 1c3d23e58a987e60a0af08b9fca2211908cf49d3 in lucene-solr&apos;s branch refs/heads/master from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=1c3d23e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=1c3d23e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13336&quot; title=&quot;solrconfig.xml maxBooleanClauses ignored by programtic/rewrtten queries; can result in exponential expansion of naive queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13336&quot;&gt;&lt;del&gt;SOLR-13336&lt;/del&gt;&lt;/a&gt;: fix CloudInspectUtil to use filter to eliminate risk of TooManyClausesException&lt;/p&gt;</comment>
                            <comment id="16822095" author="jira-bot" created="Fri, 19 Apr 2019 18:03:16 +0000"  >&lt;p&gt;Commit 449dc4438bca5f63f48044e81bc5ba401e8faea6 in lucene-solr&apos;s branch refs/heads/branch_8x from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=449dc44&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=449dc44&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13336&quot; title=&quot;solrconfig.xml maxBooleanClauses ignored by programtic/rewrtten queries; can result in exponential expansion of naive queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13336&quot;&gt;&lt;del&gt;SOLR-13336&lt;/del&gt;&lt;/a&gt;: fix CloudInspectUtil to use filter to eliminate risk of TooManyClausesException&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 1c3d23e58a987e60a0af08b9fca2211908cf49d3)&lt;/p&gt;</comment>
                            <comment id="17535682" author="janhoy" created="Thu, 12 May 2022 00:26:54 +0000"  >&lt;p&gt;Closing after the 9.0.0 release&lt;/p&gt;</comment>
                            <comment id="17555069" author="JIRAUSER291092" created="Thu, 16 Jun 2022 12:58:22 +0000"  >&lt;p&gt;Can someone confirm the patch available in this ticket will work with solr 7.7.3?&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13081134">SOLR-10921</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13191713">LUCENE-8531</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12965763" name="SOLR-13336.patch" size="26251" author="hossman" created="Fri, 12 Apr 2019 21:56:01 +0000"/>
                            <attachment id="12965266" name="SOLR-13336.patch" size="26244" author="hossman" created="Tue, 9 Apr 2019 00:37:26 +0000"/>
                            <attachment id="12965244" name="SOLR-13336.patch" size="22416" author="hossman" created="Mon, 8 Apr 2019 19:23:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z00vvk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>