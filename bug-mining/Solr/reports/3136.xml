<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:17:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9639] CdcrVersionReplicationTest failure</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9639</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;h3&gt;&lt;a name=&quot;itfails.&quot;&gt;&lt;/a&gt;it fails.&lt;/h3&gt;

&lt;p&gt;The problem is &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/core/src/test/org/apache/solr/cloud/BaseCdcrDistributedZkTest.java#L597&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;over there&lt;/a&gt; when it deletes that temporal collection (which is a tricky thing per se) while it&apos;s still in recovery Solr Cloud went crazy: it closes the core, and almost done it, but it can&apos;t be unloaded because PeerSync (remember, it&apos;s recovering) open it ones, and it bloat logs with &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;105902 INFO  (qtp3284815-656) &lt;span class=&quot;error&quot;&gt;&amp;#91;n:127.0.0.1:41440_ia%2Fd    &amp;#93;&lt;/span&gt; o.a.s.c.SolrCore Core collection1 is not yet closed, waiting 100 ms before checking again.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;But then, something spawn too many request &lt;tt&gt;/get&lt;/tt&gt;?? which deadlocks until heap is exceeded and it dies. The fix is obvious, just to wait until recoveries finishes, before removing tmp_collection. &lt;br/&gt;
Beside of this particular fix,is there any ideas about deadlock caused by deleting recovering collection?  &lt;/p&gt;</description>
                <environment></environment>
        <key id="13011961">SOLR-9639</key>
            <summary>CdcrVersionReplicationTest failure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mkhl">Mikhail Khludnev</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Oct 2016 11:54:32 +0000</created>
                <updated>Sat, 8 Jun 2019 15:30:33 +0000</updated>
                            <resolved>Fri, 14 Oct 2016 18:18:50 +0000</resolved>
                                                    <fixVersion>6.3</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15571705" author="mkhludnev" created="Thu, 13 Oct 2016 11:56:59 +0000"  >&lt;p&gt;attaching failure log, stacktrace, and a head of successful execution.&lt;br/&gt;
&lt;tt&gt;ant test  -Dtestcase=CdcrVersionReplicationTest -Dtests.seed=374BB442DF231F4F -Dtests.multiplier=3 -Dtests.slow=true -Dtests.locale=tr -Dtests.timezone=Africa/Tunis -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="15572767" author="romseygeek" created="Thu, 13 Oct 2016 18:19:43 +0000"  >&lt;p&gt;I think we need a way to cancel or interrupt PeerSync from RecoveryStrategy?&lt;/p&gt;</comment>
                            <comment id="15572892" author="mkhludnev" created="Thu, 13 Oct 2016 19:15:07 +0000"  >&lt;p&gt;Don&apos;t you want to fix ci first with this one liner, and implement reasonable break at recovery then?  &lt;/p&gt;</comment>
                            <comment id="15573038" author="romseygeek" created="Thu, 13 Oct 2016 20:14:26 +0000"  >&lt;p&gt;+1 to the quick fix, let&apos;s open a separate JIRA for the cancellation.&lt;/p&gt;</comment>
                            <comment id="15574984" author="mkhludnev" created="Fri, 14 Oct 2016 10:55:16 +0000"  >&lt;p&gt;After applying this solr test runs much smoothly at my machine. Launching precommit. &lt;/p&gt;</comment>
                            <comment id="15575084" author="jira-bot" created="Fri, 14 Oct 2016 11:43:35 +0000"  >&lt;p&gt;Commit 47446733884e030feaecac355c01c58f9e5e3169 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkhludnev&quot; class=&quot;user-hover&quot; rel=&quot;mkhludnev&quot;&gt;mkhludnev&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=4744673&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=4744673&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9639&quot; title=&quot;CdcrVersionReplicationTest failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9639&quot;&gt;&lt;del&gt;SOLR-9639&lt;/del&gt;&lt;/a&gt;: CDCR Tests only fix. Wait until recovery is over before&lt;br/&gt;
remove the tmp_colletion.&lt;/p&gt;</comment>
                            <comment id="15575105" author="jira-bot" created="Fri, 14 Oct 2016 11:49:35 +0000"  >&lt;p&gt;Commit 96e0c2ff48cf70f9c376760e50b78281699d0e53 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkhludnev&quot; class=&quot;user-hover&quot; rel=&quot;mkhludnev&quot;&gt;mkhludnev&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=96e0c2f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=96e0c2f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9639&quot; title=&quot;CdcrVersionReplicationTest failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9639&quot;&gt;&lt;del&gt;SOLR-9639&lt;/del&gt;&lt;/a&gt;: CDCR Tests only fix. Wait until recovery is over before&lt;br/&gt;
remove the tmp_colletion.&lt;/p&gt;</comment>
                            <comment id="15576080" author="mkhludnev" created="Fri, 14 Oct 2016 18:18:50 +0000"  >&lt;p&gt;follow up  &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9645&quot; title=&quot;removing collection while it&amp;#39;s recovering blows up cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9645&quot;&gt;SOLR-9645&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15650249" author="shalinmangar" created="Wed, 9 Nov 2016 08:37:57 +0000"  >&lt;p&gt;Closing after 6.3.0 release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="13012427">SOLR-9645</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12833099" name="CDcr failure.txt" size="11147647" author="mkhl" created="Thu, 13 Oct 2016 11:56:59 +0000"/>
                            <attachment id="12833349" name="SOLR-9639.patch" size="1102" author="mkhl" created="Fri, 14 Oct 2016 10:55:16 +0000"/>
                            <attachment id="12833103" name="SOLR-9639.patch" size="654" author="mkhl" created="Thu, 13 Oct 2016 12:08:11 +0000"/>
                            <attachment id="12833100" name="cdcr-stack.txt" size="16857496" author="mkhl" created="Thu, 13 Oct 2016 11:56:59 +0000"/>
                            <attachment id="12833101" name="cdcr-success.txt" size="36128" author="mkhl" created="Thu, 13 Oct 2016 11:56:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34tvr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>