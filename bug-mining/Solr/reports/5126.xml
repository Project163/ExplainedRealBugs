<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:08:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-17045] DenseVectorField w/ vectorDimension &gt; 1024 no longer works by default</title>
                <link>https://issues.apache.org/jira/browse/SOLR-17045</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Starting with Solr 9.4, configuring a &lt;tt&gt;DenseVectorField&lt;/tt&gt; w/ &lt;tt&gt;vectorDimension&lt;/tt&gt; &amp;gt; 1024 no longer works by default. There is no error on startup, but when indexing you&apos;ll get errors like...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  2&amp;gt;           =&amp;gt; org.apache.solr.common.SolrException: Exception writing document id 2 to the index; possible analysis error: Field [vector]vector&apos;s dimensions must be &amp;lt;= [1024]; got 1600
  2&amp;gt; 	at org.apache.solr.update.DirectUpdateHandler2.addDoc(DirectUpdateHandler2.java:329)
  2&amp;gt; org.apache.solr.common.SolrException: Exception writing document id 2 to the index; possible analysis error: Field [vector]vector&apos;s dimensions must be &amp;lt;= [1024]; got 1600
  2&amp;gt; 	at org.apache.solr.update.DirectUpdateHandler2.addDoc(DirectUpdateHandler2.java:329) ~[solr-core-9.4.0.jar:9.4.0 71e101bb37497f730078d9afe1991b60d10bfe96 - stillalex - 2023-10-10 19:10:39]
  2&amp;gt; 	at org.apache.solr.update.processor.RunUpdateProcessorFactory$RunUpdateProcessor.processAdd(RunUpdateProcessorFactory.java:76) ~[solr-core-9.4.0.jar:9.4.0 71e101bb37497f730078d9afe1991b60d10bfe96 - stillalex - 2023-10-10 19:10:39]
...
  2&amp;gt; Caused by: java.lang.IllegalArgumentException: Field [vector]vector&apos;s dimensions must be &amp;lt;= [1024]; got 1600
  2&amp;gt; 	at org.apache.lucene.index.IndexingChain.validateMaxVectorDimension(IndexingChain.java:843) ~[lucene-core-9.8.0.jar:9.8.0 d914b3722bd5b8ef31ccf7e8ddc638a87fd648db - 2023-09-21 21:57:47]
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is because Lucene 9.8 moved the dimension size limitation to the codec &#8211; and while Solr 9.4&apos;s &lt;tt&gt;SchemaCodecFactory&lt;/tt&gt; was updated to implement a per-field &lt;tt&gt;SolrDelegatingKnnVectorsFormat&lt;/tt&gt; that respected the &lt;tt&gt;vectorDimension&lt;/tt&gt; configured for each &lt;tt&gt;DenseVectorField&lt;/tt&gt; &lt;b&gt;the &lt;tt&gt;SchemaCodecFactory&lt;/tt&gt; &lt;em&gt;is not implicitly used by default in Solr&lt;/em&gt;&lt;/b&gt; &#8211; nor is it explicitly configured in the &lt;tt&gt;_default&lt;/tt&gt; configset.&lt;/p&gt;


&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Known Work Around&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;Existing &lt;tt&gt;DenseVectorField&lt;/tt&gt; who encounter this error when upgrading to Solr &amp;gt;= 9.4, or new user attempting to use &lt;tt&gt;DenseVectorField&lt;/tt&gt; with &lt;tt&gt;vectorDimension&lt;/tt&gt; &amp;gt; 1024, need to explicitly configure  &lt;tt&gt;SchemaCodecFactory&lt;/tt&gt; in the solrconfig.xml for each collection.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13554854">SOLR-17045</key>
            <summary>DenseVectorField w/ vectorDimension &gt; 1024 no longer works by default</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Oct 2023 21:40:07 +0000</created>
                <updated>Fri, 17 Oct 2025 20:04:47 +0000</updated>
                            <resolved>Tue, 31 Oct 2023 22:40:13 +0000</resolved>
                                    <version>9.3</version>
                                    <fixVersion>9.5</fixVersion>
                    <fixVersion>10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17777479" author="hossman" created="Thu, 19 Oct 2023 21:45:57 +0000"  >&lt;p&gt;NOTE: I created this issue mainly for tracking &amp;amp; linking purposes, to help users who may search for the problem when encountering the bug in the wild.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure that there is much that can be done in the scope of a &quot;bug fix&quot; for this problem.&lt;/p&gt;

&lt;p&gt;I think the best long term solution is to change Solr to use &lt;tt&gt;SchemaCodecFactory&lt;/tt&gt; as it&apos;s implicit default &amp;#8211; but i will file &amp;amp; link a distinct issue for that change since it has larger implications (and would probably not be suitable for backporting to include in a bug-fix release)&lt;/p&gt;</comment>
                            <comment id="17781529" author="jira-bot" created="Tue, 31 Oct 2023 21:45:36 +0000"  >&lt;p&gt;Commit d2fa8427b970129589ba2ef0997f7395042ae9bd in solr&apos;s branch refs/heads/main from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=d2fa8427b97&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=d2fa8427b97&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17045&quot; title=&quot;DenseVectorField w/ vectorDimension &amp;gt; 1024 no longer works by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17045&quot;&gt;&lt;del&gt;SOLR-17045&lt;/del&gt;&lt;/a&gt;: correct &apos;bug fix&apos; jira id typo in CHANGES: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17046&quot; title=&quot;SchemaCodecFactory should be the implicit default if no &amp;lt;codeFactory/&amp;gt; is configured&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17046&quot;&gt;&lt;del&gt;SOLR-17046&lt;/del&gt;&lt;/a&gt; -&amp;gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17045&quot; title=&quot;DenseVectorField w/ vectorDimension &amp;gt; 1024 no longer works by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17045&quot;&gt;&lt;del&gt;SOLR-17045&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17781548" author="jira-bot" created="Tue, 31 Oct 2023 22:39:19 +0000"  >&lt;p&gt;Commit d0f271e2af301aa5bf8630dd1e5d8ce63f7ad000 in solr&apos;s branch refs/heads/branch_9x from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=d0f271e2af3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=d0f271e2af3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17046&quot; title=&quot;SchemaCodecFactory should be the implicit default if no &amp;lt;codeFactory/&amp;gt; is configured&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17046&quot;&gt;&lt;del&gt;SOLR-17046&lt;/del&gt;&lt;/a&gt;: SchemaCodecFactory is now the implicit default codec factory&lt;/p&gt;

&lt;p&gt;This provides a fix for...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17045&quot; title=&quot;DenseVectorField w/ vectorDimension &amp;gt; 1024 no longer works by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17045&quot;&gt;&lt;del&gt;SOLR-17045&lt;/del&gt;&lt;/a&gt;: DenseVectorField w/ vectorDimension &amp;gt; 1024 now work automatically with _default configset, due to implicit use of SchemaCodecFactory.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 96f0f65aeecade92f02f5efe6a2b5c2b3e97b80f)&lt;br/&gt;
(cherry picked from commit d2fa8427b970129589ba2ef0997f7395042ae9bd)&lt;/p&gt;</comment>
                            <comment id="17799923" author="dsmiley" created="Fri, 22 Dec 2023 19:50:41 +0000"  >&lt;p&gt;Is this worth bringing to 9.4.1?  AFAICT, a user can at least easily fix via explicitly specifying the SchemaCodecFactory in their solrconfig.xml.   :shrug:&lt;/p&gt;</comment>
                            <comment id="17816768" author="gerlowskija" created="Mon, 12 Feb 2024 19:49:01 +0000"  >&lt;p&gt;Closing after the 9.5.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                                                <inwardlinks description="is fixed by">
                                        <issuelink>
            <issuekey id="13554856">SOLR-17046</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13551141">SOLR-16985</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13554861">SOLR-17047</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13555395">SOLR-17052</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1l2og:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>