<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:15:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9406] SolrSuggester should selectively register close hook</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9406</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Currently this is the code for registering a close hook for SolrSuggester:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;lookup = factory.create(config, core);
    core.addCloseHook(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CloseHook() {
      @Override
      &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void preClose(SolrCore core) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (lookup != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; lookup &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Closeable) {
          &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            ((Closeable) lookup).close();
          } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException e) {
            LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Could not close the suggester lookup.&quot;&lt;/span&gt;, e);
          }
        }
      }
      
      @Override
      &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void postClose(SolrCore core) {}
    });
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notice that the close hook is always registered, even though the close logic runs conditionally.&lt;/p&gt;

&lt;p&gt;This can be changed so that the close hook is registered conditionally.&lt;/p&gt;

&lt;p&gt;This will help avoid memory leaks in scenarios where a custom component reloads the SolrSuggester multiple times for the same core. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12996564">SOLR-9406</key>
            <summary>SolrSuggester should selectively register close hook</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10003">Resolved</resolution>
                                        <assignee username="jbernste">Joel Bernstein</assignee>
                                    <reporter username="covolution">Gethin James</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Aug 2016 09:08:50 +0000</created>
                <updated>Sat, 8 Jun 2019 15:38:11 +0000</updated>
                            <resolved>Wed, 24 Aug 2016 00:23:39 +0000</resolved>
                                    <version>4.10.3</version>
                                    <fixVersion>6.3</fixVersion>
                                    <component>Suggester</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15416926" author="covolution" created="Thu, 11 Aug 2016 09:12:54 +0000"  >&lt;p&gt;A potential solution would be to put the following around the closehook creation:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (lookup != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; lookup &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Closeable) {
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15417171" author="joel.bernstein" created="Thu, 11 Aug 2016 12:56:57 +0000"  >&lt;p&gt;Un-assigning myself in case anyone else wants to take this. If no one does then I&apos;ll help move this forward.&lt;/p&gt;</comment>
                            <comment id="15431038" author="joel.bernstein" created="Mon, 22 Aug 2016 15:43:13 +0000"  >&lt;p&gt;Simple patch to conditionally register the close hook. The conditional logic is the same, it&apos;s just moved outside of the close hook itself, to control the close hook registration.&lt;/p&gt;</comment>
                            <comment id="15433503" author="joel.bernstein" created="Tue, 23 Aug 2016 19:56:17 +0000"  >&lt;p&gt;Shoot, I put the wrong jira ticket on the commit. I used SEARCH-9406 instead of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9406&quot; title=&quot;SolrSuggester should selectively register close hook&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9406&quot;&gt;&lt;del&gt;SOLR-9406&lt;/del&gt;&lt;/a&gt;. SEARCH is what we use at alfresco to prefix search tickets.&lt;/p&gt;

&lt;p&gt;The master commit was:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/lucene-solr/commit/a1b55eb743a6826299f155f95e41676fc33b576a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/commit/a1b55eb743a6826299f155f95e41676fc33b576a&lt;/a&gt;&lt;br/&gt;
The branch_6x commit was:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/lucene-solr/commit/171f633616de4e7778894166ee6fcb45fd8a23cf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/commit/171f633616de4e7778894166ee6fcb45fd8a23cf&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15433901" author="jira-bot" created="Wed, 24 Aug 2016 00:10:03 +0000"  >&lt;p&gt;Commit 4c0ff4e0f1105f3b81346bc680493832ffbae69c in lucene-solr&apos;s branch refs/heads/master from jbernste&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=4c0ff4e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=4c0ff4e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9406&quot; title=&quot;SolrSuggester should selectively register close hook&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9406&quot;&gt;&lt;del&gt;SOLR-9406&lt;/del&gt;&lt;/a&gt;: Update CHANGES.txt&lt;/p&gt;</comment>
                            <comment id="15433919" author="jira-bot" created="Wed, 24 Aug 2016 00:20:59 +0000"  >&lt;p&gt;Commit 69e22ae4eccef1833183fd3b0fe5302c19efd79c in lucene-solr&apos;s branch refs/heads/branch_6x from jbernste&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=69e22ae&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=69e22ae&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9406&quot; title=&quot;SolrSuggester should selectively register close hook&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9406&quot;&gt;&lt;del&gt;SOLR-9406&lt;/del&gt;&lt;/a&gt;: Update CHANGES.txt&lt;/p&gt;</comment>
                            <comment id="15650294" author="shalinmangar" created="Wed, 9 Nov 2016 08:38:49 +0000"  >&lt;p&gt;Closing after 6.3.0 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12824878" name="SOLR-9406.patch" size="1440" author="jbernste" created="Mon, 22 Aug 2016 15:43:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i326zz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>