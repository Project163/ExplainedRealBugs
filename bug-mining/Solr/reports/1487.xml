<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:38:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4489] StringIndexOutOfBoundsException in SpellCheckComponent </title>
                <link>https://issues.apache.org/jira/browse/SOLR-4489</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;My SOLR request params are as shown below.&lt;/p&gt;

&lt;p&gt;spellcheck=true&amp;amp;enableElevation=true&amp;amp;facet=true&amp;amp;spellcheck.q=minecraft&amp;amp;spellcheck.extendedResults=true&amp;amp;spellcheck.maxCollations=10&amp;amp;spellcheck.collate=true&amp;amp;wt=javabin&amp;amp;defType=edismax&amp;amp;spellcheck.onlyMorePopular=true  etc.&lt;/p&gt;

&lt;p&gt;Note: this work fine many use cases, however it fails for some query terms.&lt;/p&gt;


&lt;p&gt;Feb 22, 2013 11:06:04 AM org.apache.solr.common.SolrException log&lt;br/&gt;
SEVERE: null:java.lang.StringIndexOutOfBoundsException: String index out of range: -5&lt;br/&gt;
	at java.lang.AbstractStringBuilder.replace(AbstractStringBuilder.java:797)&lt;br/&gt;
	at java.lang.StringBuilder.replace(StringBuilder.java:271)&lt;br/&gt;
	at org.apache.solr.spelling.SpellCheckCollator.getCollation(SpellCheckCollator.java:190)&lt;br/&gt;
	at org.apache.solr.spelling.SpellCheckCollator.collate(SpellCheckCollator.java:75)&lt;br/&gt;
	at org.apache.solr.handler.component.SpellCheckComponent.addCollationsToResponse(SpellCheckComponent.java:203)&lt;br/&gt;
	at org.apache.solr.handler.component.SpellCheckComponent.process(SpellCheckComponent.java:180)&lt;br/&gt;
	at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:206)&lt;br/&gt;
	at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)&lt;br/&gt;
	at org.apache.solr.core.SolrCore.execute(SolrCore.java:1699)&lt;br/&gt;
	at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:455)&lt;br/&gt;
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:276)&lt;br/&gt;
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1337)&lt;br/&gt;
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:484)&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)&lt;br/&gt;
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:524)&lt;br/&gt;
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:233)&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1065)&lt;br/&gt;
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:413)&lt;br/&gt;
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192)&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:999)&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250)&lt;br/&gt;
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:149)&lt;br/&gt;
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)&lt;br/&gt;
	at org.eclipse.jetty.server.Server.handle(Server.java:351)&lt;br/&gt;
	at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:454)&lt;br/&gt;
	at org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:47)&lt;br/&gt;
	at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:890)&lt;br/&gt;
	at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:944)&lt;br/&gt;
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:634)&lt;br/&gt;
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:230)&lt;br/&gt;
	at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:66)&lt;br/&gt;
	at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:254)&lt;br/&gt;
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:599)&lt;br/&gt;
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:534)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:680)&lt;/p&gt;


</description>
                <environment>&lt;p&gt;all&lt;/p&gt;</environment>
        <key id="12633654">SOLR-4489</key>
            <summary>StringIndexOutOfBoundsException in SpellCheckComponent </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdyer">James Dyer</assignee>
                                    <reporter username="vmarrapu">venkata marrapu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Feb 2013 17:30:19 +0000</created>
                <updated>Sat, 5 Oct 2013 10:18:49 +0000</updated>
                            <resolved>Thu, 25 Jul 2013 16:19:26 +0000</resolved>
                                    <version>4.3.1</version>
                    <version>4.4</version>
                                    <fixVersion>4.5</fixVersion>
                                    <component>spellchecker</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13584957" author="vmarrapu" created="Sat, 23 Feb 2013 02:14:42 +0000"  >&lt;p&gt;Tested in Solr 4.1 release &amp;amp; noticed same issue.&lt;br/&gt;
I am using DirectSolrSpellChecker. &lt;/p&gt;

&lt;p&gt;from my solrconfig.xml&lt;/p&gt;


&lt;p&gt;&amp;lt;searchComponent name=&quot;spellcheck&quot; class=&quot;solr.SpellCheckComponent&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;str name=&quot;queryAnalyzerFieldType&quot;&amp;gt;textSpell&amp;lt;/str&amp;gt;&lt;br/&gt;
       &amp;lt;lst name=&quot;spellchecker&quot;&amp;gt;&lt;br/&gt;
          &amp;lt;str name=&quot;name&quot;&amp;gt;default&amp;lt;/str&amp;gt;&lt;br/&gt;
          &amp;lt;str name=&quot;field&quot;&amp;gt;textSpell&amp;lt;/str&amp;gt;&lt;br/&gt;
          &amp;lt;str name=&quot;classname&quot;&amp;gt;solr.DirectSolrSpellChecker&amp;lt;/str&amp;gt;&lt;br/&gt;
          &amp;lt;str name=&quot;distanceMeasure&quot;&amp;gt;internal&amp;lt;/str&amp;gt;&lt;br/&gt;
         &amp;lt;float name=&quot;accuracy&quot;&amp;gt;0.5&amp;lt;/float&amp;gt;&lt;br/&gt;
         &amp;lt;int name=&quot;maxEdits&quot;&amp;gt;2&amp;lt;/int&amp;gt;&lt;br/&gt;
         &amp;lt;int name=&quot;minPrefix&quot;&amp;gt;1&amp;lt;/int&amp;gt;&lt;br/&gt;
         &amp;lt;int name=&quot;maxInspections&quot;&amp;gt;5&amp;lt;/int&amp;gt;&lt;br/&gt;
         &amp;lt;int name=&quot;minQueryLength&quot;&amp;gt;4&amp;lt;/int&amp;gt;&lt;br/&gt;
         &amp;lt;float name=&quot;maxQueryFrequency&quot;&amp;gt;0.01&amp;lt;/float&amp;gt;&lt;br/&gt;
      &amp;lt;/lst&amp;gt;&lt;/p&gt;

&lt;p&gt;      &amp;lt;lst name=&quot;spellchecker&quot;&amp;gt;&lt;br/&gt;
          &amp;lt;str name=&quot;name&quot;&amp;gt;wordbreak&amp;lt;/str&amp;gt;&lt;br/&gt;
          &amp;lt;str name=&quot;classname&quot;&amp;gt;solr.WordBreakSolrSpellChecker&amp;lt;/str&amp;gt;&lt;br/&gt;
          &amp;lt;str name=&quot;field&quot;&amp;gt;textSpell&amp;lt;/str&amp;gt;&lt;br/&gt;
          &amp;lt;str name=&quot;combineWords&quot;&amp;gt;true&amp;lt;/str&amp;gt;&lt;br/&gt;
          &amp;lt;str name=&quot;breakWords&quot;&amp;gt;true&amp;lt;/str&amp;gt;&lt;br/&gt;
          &amp;lt;int name=&quot;maxChanges&quot;&amp;gt;10&amp;lt;/int&amp;gt;&lt;br/&gt;
      &amp;lt;/lst&amp;gt;&lt;br/&gt;
   &amp;lt;/searchComponent&amp;gt;&lt;/p&gt;</comment>
                            <comment id="13604973" author="alukanin" created="Mon, 18 Mar 2013 10:04:59 +0000"  >&lt;p&gt;The same issue with wordbreak in Solr 4.1:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;params={spellcheck=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;indent=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;q=calvin\+harris\+feat\+ne\+yo&amp;amp;spellcheck.q=calvin\+harris\+feat\+ne\+yo&amp;amp;wt=xml}

SEVERE: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;:java.lang.StringIndexOutOfBoundsException: &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; index out of range: 25
	at java.lang.AbstractStringBuilder.charAt(AbstractStringBuilder.java:174)
	at java.lang.StringBuilder.charAt(StringBuilder.java:55)
	at org.apache.solr.spelling.SpellCheckCollator.getCollation(SpellCheckCollator.java:164)
	at org.apache.solr.spelling.SpellCheckCollator.collate(SpellCheckCollator.java:75)
	at org.apache.solr.handler.component.SpellCheckComponent.addCollationsToResponse(SpellCheckComponent.java:203)
	at org.apache.solr.handler.component.SpellCheckComponent.process(SpellCheckComponent.java:180)
	at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:208)
	at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135)
	at org.apache.solr.core.SolrCore.execute(SolrCore.java:1816)
	at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:448)
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:269)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If I set&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	&amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;combineWords&quot;&lt;/span&gt;&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;lt;/str&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the exception disappears.&lt;/p&gt;</comment>
                            <comment id="13604986" author="alukanin" created="Mon, 18 Mar 2013 10:21:16 +0000"  >&lt;p&gt;with combineWords=false I have another exception for the query &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&#1088;&#1080;&#1082;&#1080;\-&#1090;&#1080;&#1082;&#1080;\-&#1090;&#1072;&#1074;&#1080;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.solr.spelling.SpellCheckCollator collate
WARNING: Exception trying to re-query to check &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; a spell check possibility would &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; any hits.
org.apache.solr.common.SolrException: org.apache.solr.search.SyntaxError: Cannot parse &lt;span class=&quot;code-quote&quot;&gt;&apos;&#1088;&#1080;&#1082;&#1080;\-&#1090;&#1072;&#1082;&#1080;\(-&#1090; -&#1072; -&#1074;&#1080;)&apos;&lt;/span&gt;: Encountered &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt;)&lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt;) &quot;&quot; at line 1, column 21.
Was expecting one of:
    &amp;lt;EOF&amp;gt; 
    &amp;lt;AND&amp;gt; ...
    &amp;lt;OR&amp;gt; ...
    &amp;lt;NOT&amp;gt; ...
    &lt;span class=&quot;code-quote&quot;&gt;&quot;+&quot;&lt;/span&gt; ...
    &lt;span class=&quot;code-quote&quot;&gt;&quot;-&quot;&lt;/span&gt; ...
    &amp;lt;BAREOPER&amp;gt; ...
    &lt;span class=&quot;code-quote&quot;&gt;&quot;(&quot;&lt;/span&gt; ...
    &lt;span class=&quot;code-quote&quot;&gt;&quot;*&quot;&lt;/span&gt; ...
    &lt;span class=&quot;code-quote&quot;&gt;&quot;^&quot;&lt;/span&gt; ...
    &amp;lt;QUOTED&amp;gt; ...
    &amp;lt;TERM&amp;gt; ...
    &amp;lt;FUZZY_SLOP&amp;gt; ...
    &amp;lt;PREFIXTERM&amp;gt; ...
    &amp;lt;WILDTERM&amp;gt; ...
    &amp;lt;REGEXPTERM&amp;gt; ...
    &lt;span class=&quot;code-quote&quot;&gt;&quot;[&quot;&lt;/span&gt; ...
    &lt;span class=&quot;code-quote&quot;&gt;&quot;{&quot;&lt;/span&gt; ...
    &amp;lt;LPARAMS&amp;gt; ...
    &amp;lt;NUMBER&amp;gt; ...
    
	at org.apache.solr.handler.component.QueryComponent.prepare(QueryComponent.java:147)
	at org.apache.solr.spelling.SpellCheckCollator.collate(SpellCheckCollator.java:111)
	at org.apache.solr.handler.component.SpellCheckComponent.addCollationsToResponse(SpellCheckComponent.java:203)
	at org.apache.solr.handler.component.SpellCheckComponent.process(SpellCheckComponent.java:180)
	at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:208)
	at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135)
	at org.apache.solr.core.SolrCore.execute(SolrCore.java:1816)
	at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:448)
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:269)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)
Caused by: org.apache.solr.search.SyntaxError: Cannot parse &lt;span class=&quot;code-quote&quot;&gt;&apos;&#1088;&#1080;&#1082;&#1080;\-&#1090;&#1072;&#1082;&#1080;\(-&#1090; -&#1072; -&#1074;&#1080;)&apos;&lt;/span&gt;: Encountered &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt;)&lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt;) &quot;&quot; at line 1, column 21.
Was expecting one of:
    &amp;lt;EOF&amp;gt; 
    &amp;lt;AND&amp;gt; ...
    &amp;lt;OR&amp;gt; ...
    &amp;lt;NOT&amp;gt; ...
    &lt;span class=&quot;code-quote&quot;&gt;&quot;+&quot;&lt;/span&gt; ...
    &lt;span class=&quot;code-quote&quot;&gt;&quot;-&quot;&lt;/span&gt; ...
    &amp;lt;BAREOPER&amp;gt; ...
    &lt;span class=&quot;code-quote&quot;&gt;&quot;(&quot;&lt;/span&gt; ...
    &lt;span class=&quot;code-quote&quot;&gt;&quot;*&quot;&lt;/span&gt; ...
    &lt;span class=&quot;code-quote&quot;&gt;&quot;^&quot;&lt;/span&gt; ...
    &amp;lt;QUOTED&amp;gt; ...
    &amp;lt;TERM&amp;gt; ...
    &amp;lt;FUZZY_SLOP&amp;gt; ...
    &amp;lt;PREFIXTERM&amp;gt; ...
    &amp;lt;WILDTERM&amp;gt; ...
    &amp;lt;REGEXPTERM&amp;gt; ...
    &lt;span class=&quot;code-quote&quot;&gt;&quot;[&quot;&lt;/span&gt; ...
    &lt;span class=&quot;code-quote&quot;&gt;&quot;{&quot;&lt;/span&gt; ...
    &amp;lt;LPARAMS&amp;gt; ...
    &amp;lt;NUMBER&amp;gt; ...
    
	at org.apache.solr.parser.SolrQueryParserBase.parse(SolrQueryParserBase.java:164)
	at org.apache.solr.search.LuceneQParser.parse(LuceneQParserPlugin.java:72)
	at org.apache.solr.search.QParser.getQuery(QParser.java:142)
	at org.apache.solr.handler.component.QueryComponent.prepare(QueryComponent.java:117)
	... 23 more
Caused by: org.apache.solr.parser.ParseException: Encountered &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt;)&lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt;) &quot;&quot; at line 1, column 21.
Was expecting one of:
    &amp;lt;EOF&amp;gt; 
    &amp;lt;AND&amp;gt; ...
    &amp;lt;OR&amp;gt; ...
    &amp;lt;NOT&amp;gt; ...
    &lt;span class=&quot;code-quote&quot;&gt;&quot;+&quot;&lt;/span&gt; ...
    &lt;span class=&quot;code-quote&quot;&gt;&quot;-&quot;&lt;/span&gt; ...
    &amp;lt;BAREOPER&amp;gt; ...
    &lt;span class=&quot;code-quote&quot;&gt;&quot;(&quot;&lt;/span&gt; ...
    &lt;span class=&quot;code-quote&quot;&gt;&quot;*&quot;&lt;/span&gt; ...
    &lt;span class=&quot;code-quote&quot;&gt;&quot;^&quot;&lt;/span&gt; ...
    &amp;lt;QUOTED&amp;gt; ...
    &amp;lt;TERM&amp;gt; ...
    &amp;lt;FUZZY_SLOP&amp;gt; ...
    &amp;lt;PREFIXTERM&amp;gt; ...
    &amp;lt;WILDTERM&amp;gt; ...
    &amp;lt;REGEXPTERM&amp;gt; ...
    &lt;span class=&quot;code-quote&quot;&gt;&quot;[&quot;&lt;/span&gt; ...
    &lt;span class=&quot;code-quote&quot;&gt;&quot;{&quot;&lt;/span&gt; ...
    &amp;lt;LPARAMS&amp;gt; ...
    &amp;lt;NUMBER&amp;gt; ...
    
	at org.apache.solr.parser.QueryParser.generateParseException(QueryParser.java:651)
	at org.apache.solr.parser.QueryParser.jj_consume_token(QueryParser.java:533)
	at org.apache.solr.parser.QueryParser.TopLevelQuery(QueryParser.java:98)
	at org.apache.solr.parser.SolrQueryParserBase.parse(SolrQueryParserBase.java:160)
	... 26 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, SpellCheckCollator generates a corrupted query for the original escaped query.&lt;br/&gt;
I have&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;solrQueryParser defaultOperator=&lt;span class=&quot;code-quote&quot;&gt;&quot;AND&quot;&lt;/span&gt;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;in the schema, as well.&lt;/p&gt;</comment>
                            <comment id="13718563" author="jdyer" created="Wed, 24 Jul 2013 16:53:21 +0000"  >&lt;p&gt;Here is a failing unit test.&lt;/p&gt;</comment>
                            <comment id="13718724" author="jdyer" created="Wed, 24 Jul 2013 19:12:35 +0000"  >&lt;p&gt;Here is a patch with a fix &amp;amp; test.  All tests pass.  I will commit this shortly.&lt;/p&gt;</comment>
                            <comment id="13719735" author="jira-bot" created="Thu, 25 Jul 2013 16:04:04 +0000"  >&lt;p&gt;Commit 1507042 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdyer&quot; class=&quot;user-hover&quot; rel=&quot;jdyer&quot;&gt;jdyer&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1507042&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1507042&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4489&quot; title=&quot;StringIndexOutOfBoundsException in SpellCheckComponent &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4489&quot;&gt;&lt;del&gt;SOLR-4489&lt;/del&gt;&lt;/a&gt;: fix StringIndexOutOfBoundsException in SpellCheckComponent&lt;/p&gt;</comment>
                            <comment id="13719741" author="jira-bot" created="Thu, 25 Jul 2013 16:17:04 +0000"  >&lt;p&gt;Commit 1507049 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdyer&quot; class=&quot;user-hover&quot; rel=&quot;jdyer&quot;&gt;jdyer&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1507049&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1507049&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4489&quot; title=&quot;StringIndexOutOfBoundsException in SpellCheckComponent &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4489&quot;&gt;&lt;del&gt;SOLR-4489&lt;/del&gt;&lt;/a&gt;: fix StringIndexOutOfBoundsException in SpellCheckComponent&lt;/p&gt;</comment>
                            <comment id="13787028" author="jpountz" created="Sat, 5 Oct 2013 10:18:49 +0000"  >&lt;p&gt;4.5 release -&amp;gt; bulk close&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12594002" name="SOLR-4489.patch" size="2784" author="jdyer" created="Wed, 24 Jul 2013 19:12:35 +0000"/>
                            <attachment id="12593977" name="SOLR-4489.patch" size="1883" author="jdyer" created="Wed, 24 Jul 2013 16:53:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314149</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 7 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1i7mf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314494</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>