<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:35:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-12749] timeseries() expression missing sum() results for empty buckets</title>
                <link>https://issues.apache.org/jira/browse/SOLR-12749</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;See solr-user post &lt;a href=&quot;https://lists.apache.org/thread.html/aeacef8fd8cee980bb74f2f6b7e1c3fd0b7ead7d7a0e7b79dd48659f@%3Csolr-user.lucene.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/aeacef8fd8cee980bb74f2f6b7e1c3fd0b7ead7d7a0e7b79dd48659f@%3Csolr-user.lucene.apache.org%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;We have a timeseries expression with gap=&quot;+1DAY&quot; and a sum(imps_l) to aggregate sums of an integer for each bucket.&#160;Now, some day buckets do not contain any documents at all, and instead of returning a tuple with value 0, it returns&#160;a tuple with no entry at all for the sum, see the bucket for date_dt 2018-06-22 below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-javascript&quot;&gt;
{
&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;result-set&quot;&lt;/span&gt;: {
&#160;&#160;&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;docs&quot;&lt;/span&gt;: [
&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;sum(imps_l)&quot;&lt;/span&gt;: 0,
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;date_dt&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;2018-06-21&quot;&lt;/span&gt;,
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;count(*)&quot;&lt;/span&gt;: 5
&#160;&#160;&#160;&#160;&#160;},
&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;date_dt&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;2018-06-22&quot;&lt;/span&gt;,
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;count(*)&quot;&lt;/span&gt;: 0
&#160;&#160;&#160;&#160;&#160;},
&#160;&#160;&#160;&#160;&#160;{
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;EOF&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;,
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;span class=&quot;code-quote&quot;&gt;&quot;RESPONSE_TIME&quot;&lt;/span&gt;: 3
&#160;&#160;&#160;&#160;&#160;}
&#160;&#160;&#160;]
&#160;}
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Now when we want to convert this into a column using col(a,&apos;sum(imps_l)&apos;) then that array will get mostly numbers&#160;but also some string entries &apos;sum(imps_l)&apos; which is the key name. I need purely integers in the column.&lt;/p&gt;

&lt;p&gt;Should the timeseries() have output values for all functions even if there are no documents in the bucket?&#160;Or is there something similar to the select() expression that can take a stream of tuples not originating directly&#160;from search() and replace values? Or is there perhaps a function that can loop through the column produced by col()&#160;and replace non-numeric values with 0?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13183333">SOLR-12749</key>
            <summary>timeseries() expression missing sum() results for empty buckets</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10003">Resolved</resolution>
                                        <assignee username="jbernste">Joel Bernstein</assignee>
                                    <reporter username="janhoy">Jan H&#248;ydahl</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Sep 2018 08:39:41 +0000</created>
                <updated>Tue, 8 Oct 2019 14:50:17 +0000</updated>
                            <resolved>Mon, 8 Oct 2018 17:09:04 +0000</resolved>
                                    <version>7.4</version>
                                    <fixVersion>7.5</fixVersion>
                    <fixVersion>8.0</fixVersion>
                                    <component>streaming expressions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16605748" author="joel.bernstein" created="Thu, 6 Sep 2018 13:08:12 +0000"  >&lt;p&gt;We had this discussion at Alfresco and decided that a null value in a timeseries is not helpful. I can commit a fix which adds the zero for the buckets that have null values returned buy the JSON facet API.&lt;/p&gt;</comment>
                            <comment id="16606571" author="jira-bot" created="Fri, 7 Sep 2018 00:34:39 +0000"  >&lt;p&gt;Commit 98611d33a7f334ece5faba594120ac3398a0009d in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbernste&quot; class=&quot;user-hover&quot; rel=&quot;jbernste&quot;&gt;jbernste&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=98611d3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=98611d3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12749&quot; title=&quot;timeseries() expression missing sum() results for empty buckets&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12749&quot;&gt;&lt;del&gt;SOLR-12749&lt;/del&gt;&lt;/a&gt;: timeseries() expression missing sum() results for empty buckets&lt;/p&gt;</comment>
                            <comment id="16606575" author="jira-bot" created="Fri, 7 Sep 2018 00:40:02 +0000"  >&lt;p&gt;Commit 7715bd02e644be4277f1b0b8d387c838657b3096 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbernste&quot; class=&quot;user-hover&quot; rel=&quot;jbernste&quot;&gt;jbernste&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7715bd0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7715bd0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12749&quot; title=&quot;timeseries() expression missing sum() results for empty buckets&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12749&quot;&gt;&lt;del&gt;SOLR-12749&lt;/del&gt;&lt;/a&gt;: timeseries() expression missing sum() results for empty buckets&lt;/p&gt;</comment>
                            <comment id="16606576" author="joel.bernstein" created="Fri, 7 Sep 2018 00:41:03 +0000"  >&lt;p&gt;Ok, just need to update the CHANGES.txt. I&apos;ll get to that shortly.&lt;/p&gt;</comment>
                            <comment id="16606807" author="jira-bot" created="Fri, 7 Sep 2018 07:49:20 +0000"  >&lt;p&gt;Commit 98611d33a7f334ece5faba594120ac3398a0009d in lucene-solr&apos;s branch refs/heads/jira/http2 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbernste&quot; class=&quot;user-hover&quot; rel=&quot;jbernste&quot;&gt;jbernste&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=98611d3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=98611d3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12749&quot; title=&quot;timeseries() expression missing sum() results for empty buckets&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12749&quot;&gt;&lt;del&gt;SOLR-12749&lt;/del&gt;&lt;/a&gt;: timeseries() expression missing sum() results for empty buckets&lt;/p&gt;</comment>
                            <comment id="16639520" author="janhoy" created="Fri, 5 Oct 2018 09:15:15 +0000"  >&lt;p&gt;Joel, you committed this to branch_7x on sept 7th, and the &lt;tt&gt;branch_7_5&lt;/tt&gt; was cut on sept 10th. Does that mean it is included in 7.5.0? Please update CHANGES and fix version to reflect this and then resolve the issue.&lt;/p&gt;</comment>
                            <comment id="16639854" author="joel.bernstein" created="Fri, 5 Oct 2018 13:50:11 +0000"  >&lt;p&gt;Yeah, I missed this. I will update CHANGES.txt. This was in 7.5.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12938740" name="SOLR-12749.patch" size="3495" author="jbernste" created="Fri, 7 Sep 2018 00:22:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 6 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xsj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>