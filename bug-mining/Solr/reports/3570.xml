<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:26:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-11155] /analysis/field and /analysis/document requests should support points fields</title>
                <link>https://issues.apache.org/jira/browse/SOLR-11155</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The following added to FieldAnalysisRequestHandlerTest currently fails:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  @Test
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testIntPoint() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    FieldAnalysisRequest request = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FieldAnalysisRequest();
    request.addFieldType(&lt;span class=&quot;code-quote&quot;&gt;&quot;pint&quot;&lt;/span&gt;);
    request.setFieldValue(&lt;span class=&quot;code-quote&quot;&gt;&quot;5&quot;&lt;/span&gt;);
    handler.handleAnalysisRequest(request, h.getCore().getLatestSchema());
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;as follows:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=FieldAnalysisRequestHandlerTest -Dtests.method=testIntPoint -Dtests.seed=167CC259812871FB -Dtests.slow=true -Dtests.locale=fi-FI -Dtests.timezone=Asia/Hebron -Dtests.asserts=true -Dtests.file.encoding=US-ASCII
   [junit4] ERROR   0.01s | FieldAnalysisRequestHandlerTest.testIntPoint &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.UnsupportedOperationException: Can&apos;t generate internal string in PointField. use PointField.toInternalByteRef
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([167CC259812871FB:6BF651CEF8FF5B04]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.schema.PointField.toInternal(PointField.java:187)
   [junit4]    &amp;gt; 	at org.apache.solr.schema.FieldType$DefaultAnalyzer$1.incrementToken(FieldType.java:488)
   [junit4]    &amp;gt; 	at org.apache.solr.handler.AnalysisRequestHandlerBase.analyzeTokenStream(AnalysisRequestHandlerBase.java:188)
   [junit4]    &amp;gt; 	at org.apache.solr.handler.AnalysisRequestHandlerBase.analyzeValue(AnalysisRequestHandlerBase.java:102)
   [junit4]    &amp;gt; 	at org.apache.solr.handler.FieldAnalysisRequestHandler.analyzeValues(FieldAnalysisRequestHandler.java:225)
   [junit4]    &amp;gt; 	at org.apache.solr.handler.FieldAnalysisRequestHandler.handleAnalysisRequest(FieldAnalysisRequestHandler.java:186)
   [junit4]    &amp;gt; 	at org.apache.solr.handler.FieldAnalysisRequestHandlerTest.testIntPoint(FieldAnalysisRequestHandlerTest.java:435)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If points fields aren&apos;t supported by the FieldAnalysisRequestHandler, then this should be directly stated in the error message, which should be a 4XX error rather than a 5XX error.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13090378">SOLR-11155</key>
            <summary>/analysis/field and /analysis/document requests should support points fields</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sarowe">Steven Rowe</assignee>
                                    <reporter username="sarowe">Steven Rowe</reporter>
                        <labels>
                            <label>numeric-tries-to-points</label>
                    </labels>
                <created>Wed, 26 Jul 2017 23:32:15 +0000</created>
                <updated>Thu, 3 Oct 2019 14:20:10 +0000</updated>
                            <resolved>Fri, 28 Jul 2017 15:09:09 +0000</resolved>
                                                    <fixVersion>7.0</fixVersion>
                    <fixVersion>7.1</fixVersion>
                    <fixVersion>8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16104804" author="gerlowskija" created="Fri, 28 Jul 2017 11:12:05 +0000"  >&lt;p&gt;Hmm, digging into the code a big, this does seem like a legitimate error (as opposed to an accidental bug).&lt;/p&gt;

&lt;p&gt;With that i mind, the attached patch changes the returned error to return a 400 with the message: &quot;The Field Analysis request handler does not support point fields.&quot;&lt;/p&gt;

&lt;p&gt;The patch also adds a modified version of the &lt;tt&gt;testIntPoint&lt;/tt&gt; test in the description above, to ensure that the error is triggered and comes back as expected.&lt;/p&gt;

&lt;p&gt;Tests and precommit pass.&lt;/p&gt;</comment>
                            <comment id="16105043" author="steve_rowe" created="Fri, 28 Jul 2017 14:38:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;Hmm, digging into the code a big, this does seem like a legitimate error (as opposed to an accidental bug).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gerlowskija&quot; class=&quot;user-hover&quot; rel=&quot;gerlowskija&quot;&gt;gerlowskija&lt;/a&gt; for looking into it and for making a patch.  I realized that the problem also affects the DocumentAnalysisRequestHandler, and that it would be fairly easy to implement support, so I&apos;ve done that, rather than going with your clean exception patch.&lt;/p&gt;

&lt;p&gt;The attached patch adds points support for analysis requests, as well as tests for FieldAnalysisRequestHandler and DocumentAnalysisRequestHandler.&lt;/p&gt;

&lt;p&gt;I plan on committing once precommit and all Solr tests pass.&lt;/p&gt;</comment>
                            <comment id="16105074" author="steve_rowe" created="Fri, 28 Jul 2017 15:06:36 +0000"  >&lt;p&gt;Final patch, I had forgotten to rollback the change I made in &lt;tt&gt;SolrExampleTests.java&lt;/tt&gt; under &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10846&quot; title=&quot;ExternalFileField/FileFloatSource throws NPE if keyField is Points based&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10846&quot;&gt;&lt;del&gt;SOLR-10846&lt;/del&gt;&lt;/a&gt;, which can (with this patch) once again test that non-numeric text sent to &lt;tt&gt;/analysis/field&lt;/tt&gt; for numeric fields generates a 400 error.  I also added a CHANGES entry.&lt;/p&gt;

&lt;p&gt;Precommit and all Solr tests pass, committing shortly.&lt;/p&gt;</comment>
                            <comment id="16105077" author="jira-bot" created="Fri, 28 Jul 2017 15:08:17 +0000"  >&lt;p&gt;Commit 717a6a8dd089f62d972b2d7cfdc95d34362b5d50 in lucene-solr&apos;s branch refs/heads/branch_7_0 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=717a6a8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=717a6a8&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11155&quot; title=&quot;/analysis/field and /analysis/document requests should support points fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11155&quot;&gt;&lt;del&gt;SOLR-11155&lt;/del&gt;&lt;/a&gt;: /analysis/field and /analysis/document requests should support points fields.&lt;/p&gt;</comment>
                            <comment id="16105078" author="jira-bot" created="Fri, 28 Jul 2017 15:08:19 +0000"  >&lt;p&gt;Commit 46a195dd2f48bedd57d2f03427ffbbbca0958f43 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=46a195d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=46a195d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11155&quot; title=&quot;/analysis/field and /analysis/document requests should support points fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11155&quot;&gt;&lt;del&gt;SOLR-11155&lt;/del&gt;&lt;/a&gt;: /analysis/field and /analysis/document requests should support points fields.&lt;/p&gt;</comment>
                            <comment id="16105079" author="jira-bot" created="Fri, 28 Jul 2017 15:08:21 +0000"  >&lt;p&gt;Commit 51b68404883f9cff4a130ebc378adb04dbd73a3e in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=51b6840&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=51b6840&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11155&quot; title=&quot;/analysis/field and /analysis/document requests should support points fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11155&quot;&gt;&lt;del&gt;SOLR-11155&lt;/del&gt;&lt;/a&gt;: /analysis/field and /analysis/document requests should support points fields.&lt;/p&gt;</comment>
                            <comment id="16207445" author="shalinmangar" created="Tue, 17 Oct 2017 11:04:15 +0000"  >&lt;p&gt;Bulk close after 7.1.0 release&lt;/p&gt;</comment>
                            <comment id="16943631" author="alessandro.benedetti" created="Thu, 3 Oct 2019 14:20:10 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;/** Given the readable value, &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; the term value that will match it. */&lt;/span&gt;
 &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; readableToIndexed(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; val) {
 &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; toInternal(val);
 }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In case of PointField this will fail, inviting to use the toInternalByteRef, shouldn&apos;t this be fixed as well?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12879360" name="SOLR-11155.patch" size="12753" author="sarowe" created="Fri, 28 Jul 2017 14:57:13 +0000"/>
                            <attachment id="12879356" name="SOLR-11155.patch" size="10992" author="sarowe" created="Fri, 28 Jul 2017 14:34:47 +0000"/>
                            <attachment id="12879339" name="SOLR-11155.patch" size="4652" author="gerlowskija" created="Fri, 28 Jul 2017 11:07:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 6 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3i2dz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>