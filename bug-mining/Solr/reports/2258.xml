<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:00:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6793] ReplicationHandler does not destroy all of it&apos;s created SnapPullers</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6793</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description></description>
                <environment></environment>
        <key id="12757677">SOLR-6793</key>
            <summary>ReplicationHandler does not destroy all of it&apos;s created SnapPullers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="markrmiller@gmail.com">Mark Miller</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Nov 2014 12:19:52 +0000</created>
                <updated>Mon, 9 May 2016 18:54:00 +0000</updated>
                            <resolved>Sat, 10 Jan 2015 16:15:10 +0000</resolved>
                                                    <fixVersion>5.0</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14224800" author="markrmiller@gmail.com" created="Tue, 25 Nov 2014 16:46:25 +0000"  >&lt;p&gt;I don&apos;t really think this is much of a current problem - but as we build and add, we would like to know that destroy is called for each SnapPuller for cleanup.&lt;/p&gt;</comment>
                            <comment id="14226971" author="andyetitmoves" created="Wed, 26 Nov 2014 23:05:50 +0000"  >&lt;p&gt;+1 for the current patch, it does fix stuff, but in &lt;tt&gt;doFetch&lt;/tt&gt;, shouldn&apos;t the &lt;tt&gt;finally&lt;/tt&gt; block have the same cleanup?&lt;/p&gt;

&lt;p&gt;FWIW, this entire &lt;tt&gt;(temp)SnapPuller&lt;/tt&gt; stuff is pretty messy, took me quite a bit of time when I first tried to get my head around it. Should the scheduling functionality in &lt;tt&gt;SnapPuller&lt;/tt&gt; really move to &lt;tt&gt;ReplicationHandler&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="14227044" author="andyetitmoves" created="Thu, 27 Nov 2014 00:25:45 +0000"  >&lt;p&gt;I started taking a dig at this with &lt;a href=&quot;https://github.com/bloomberg/lucene-solr/commit/50a198e518d66380e4bfef81baddd7fd27ffa198&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/bloomberg/lucene-solr/commit/50a198e518d66380e4bfef81baddd7fd27ffa198&lt;/a&gt; A couple of tests fail though, I need to take a look.. With this refactoring in place, it looks like &lt;tt&gt;tempSnapPuller&lt;/tt&gt; can go away, but may be I am missing something..&lt;/p&gt;</comment>
                            <comment id="14227068" author="markrmiller@gmail.com" created="Thu, 27 Nov 2014 00:52:33 +0000"  >&lt;p&gt;Thanks for the review.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;this entire (temp)SnapPuller stuff is pretty messy&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Agreed.&lt;/p&gt;</comment>
                            <comment id="14227069" author="markrmiller@gmail.com" created="Thu, 27 Nov 2014 00:54:02 +0000"  >&lt;p&gt;Side Note from looking at your patch: We should rename SnapPuller to something more meaningful, like IndexFetcher.&lt;/p&gt;</comment>
                            <comment id="14227229" author="markrmiller@gmail.com" created="Thu, 27 Nov 2014 03:52:30 +0000"  >&lt;blockquote&gt;&lt;p&gt;shouldn&apos;t the finally block have the same cleanup?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not sure - the tempSnapPuller is kept around for stats calls, and I&apos;m worried about using it after destroy is called. Has a bad smell.&lt;/p&gt;</comment>
                            <comment id="14227686" author="andyetitmoves" created="Thu, 27 Nov 2014 14:17:42 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;m not sure - the tempSnapPuller is kept around for stats calls, and I&apos;m worried about using it after destroy is called. Has a bad smell.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ah. Yeah, this entire stats business is actually the only thing which makes me nervous about removing temp as well. &lt;tt&gt;tempSnapPuller&lt;/tt&gt; is assigned to &lt;tt&gt;snapPuller&lt;/tt&gt; at the end, so you won&apos;t be calling it on a destroyed object, but I need to figure out what the intent of the stats is &amp;#8211; is it for the last &lt;tt&gt;doFetch&lt;/tt&gt; call done by replicate, or something else? If it&apos;s the former, what&apos;s &lt;tt&gt;snapPuller&lt;/tt&gt; doing?&lt;/p&gt;</comment>
                            <comment id="14227997" author="andyetitmoves" created="Thu, 27 Nov 2014 22:48:20 +0000"  >&lt;p&gt;Raised &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6804&quot; title=&quot;Untangle SnapPuller and ReplicationHandler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6804&quot;&gt;&lt;del&gt;SOLR-6804&lt;/del&gt;&lt;/a&gt; for the untangling..&lt;/p&gt;</comment>
                            <comment id="14270264" author="markrmiller@gmail.com" created="Fri, 9 Jan 2015 00:11:15 +0000"  >&lt;blockquote&gt;&lt;p&gt;shouldn&apos;t the finally block have the same cleanup?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No, the temp close is handled finally in the close hook. If it is changed first, then we close the previous one. The temp puller is kept around for stat calls as mentioned above currently.&lt;/p&gt;

&lt;p&gt;While we might improve some of that, I think this is correct for the current code.&lt;/p&gt;</comment>
                            <comment id="14272567" author="jira-bot" created="Sat, 10 Jan 2015 16:12:40 +0000"  >&lt;p&gt;Commit 1650764 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1650764&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1650764&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6793&quot; title=&quot;ReplicationHandler does not destroy all of it&amp;#39;s created SnapPullers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6793&quot;&gt;&lt;del&gt;SOLR-6793&lt;/del&gt;&lt;/a&gt;: ReplicationHandler does not destroy all of it&apos;s created SnapPullers.&lt;/p&gt;</comment>
                            <comment id="14272568" author="jira-bot" created="Sat, 10 Jan 2015 16:13:50 +0000"  >&lt;p&gt;Commit 1650765 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1650765&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1650765&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6793&quot; title=&quot;ReplicationHandler does not destroy all of it&amp;#39;s created SnapPullers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6793&quot;&gt;&lt;del&gt;SOLR-6793&lt;/del&gt;&lt;/a&gt;: ReplicationHandler does not destroy all of it&apos;s created SnapPullers.&lt;/p&gt;</comment>
                            <comment id="14332702" author="anshumg" created="Mon, 23 Feb 2015 05:01:25 +0000"  >&lt;p&gt;Bulk close after 5.0 release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12765811">SOLR-6932</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12634451">SOLR-4509</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12683560" name="SOLR-6793.patch" size="1177" author="markrmiller@gmail.com" created="Tue, 25 Nov 2014 14:25:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22ref:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>