<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:27:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-3316] Distributed Grouping fails in some scenarios.</title>
                <link>https://issues.apache.org/jira/browse/SOLR-3316</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;During a distributed grouping request, if rows is set to 0 a 500 error is returned.&lt;/p&gt;

&lt;p&gt;If groups are unique to a shard and the row count is set to 1, then the matches number is only the matches from one shard.&lt;/p&gt;

&lt;p&gt;I&apos;ve put together a failing test.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7, JDK 6u26&lt;/p&gt;</environment>
        <key id="12549570">SOLR-3316</key>
            <summary>Distributed Grouping fails in some scenarios.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="martijn.v.groningen">Martijn van Groningen</assignee>
                                    <reporter username="cyoung">Cody Young</reporter>
                        <labels>
                            <label>distributed</label>
                            <label>grouping</label>
                    </labels>
                <created>Wed, 4 Apr 2012 21:05:57 +0000</created>
                <updated>Fri, 10 May 2013 10:39:26 +0000</updated>
                            <resolved>Fri, 6 Apr 2012 16:25:04 +0000</resolved>
                                    <version>3.4</version>
                    <version>3.5</version>
                                    <fixVersion>3.6</fixVersion>
                    <fixVersion>4.0-ALPHA</fixVersion>
                                    <component>SearchComponents - other</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13247740" author="martijn.v.groningen" created="Thu, 5 Apr 2012 21:53:42 +0000"  >&lt;p&gt;Thanks for creating the test case! &lt;/p&gt;

&lt;p&gt;I dived into the issue and I figured out why the matches is wrong when the top groups aren&apos;t retrieved from all shards. The total hit count (matches) is now computed in the first phase instead of in the second phase. The test passes now.&lt;/p&gt;

&lt;p&gt;What is odd is that the grouping request where stats is being used even fails when grouping is disabled...&lt;/p&gt;

&lt;p&gt;I think this issue also occur in all 3.x versions.&lt;/p&gt;</comment>
                            <comment id="13247755" author="cyoung" created="Thu, 5 Apr 2012 22:09:49 +0000"  >&lt;p&gt;That did it! All working now.&lt;/p&gt;

&lt;p&gt;Thanks for you help and I&apos;m glad I could contribute. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13248236" author="martijn.v.groningen" created="Fri, 6 Apr 2012 11:25:49 +0000"  >&lt;p&gt;This issue also occurs in previous 3x releases. Attached a patch that fixes that.&lt;/p&gt;</comment>
                            <comment id="13248252" author="rcmuir" created="Fri, 6 Apr 2012 12:01:18 +0000"  >&lt;p&gt;Some parts of the patch make it difficult to review:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;why does SimpleEndResultTransformer.transform lose its @Override?&lt;/li&gt;
	&lt;li&gt;why does GroupedEndResultTransformer/SimpleEndResultTransformer.transform gain an 
{@inheritDoc}
&lt;p&gt;? I&apos;m not sure this will really do what you expect, because it extends a package-private method (EndResultTransformer.inheritDoc), which we don&apos;t generate javadocs for (only public, protected).&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="13248258" author="martijn.v.groningen" created="Fri, 6 Apr 2012 12:12:07 +0000"  >&lt;p&gt;Changed priority to blocker to include this bug fix into the 3.6 release. I think the changes are safe. I ran the build several times (with java 5). The javadocs task doesn&apos;t throw any errors. I also ran the distributed grouping test with multiplier of 3:&lt;br/&gt;
ant test-core -Dtests.multiplier=3 -Dtestcase=TestDistributedGrouping&lt;/p&gt;

&lt;p&gt;If others think the changes aren&apos;t safe then the block priority can be removed.&lt;/p&gt;</comment>
                            <comment id="13248259" author="martijn.v.groningen" created="Fri, 6 Apr 2012 12:17:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;why does SimpleEndResultTransformer.transform lose its @Override?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I can change that back. My personal preference is to use @inheritDoc instead of @Override for method that implements from an interface.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;why does GroupedEndResultTransformer/SimpleEndResultTransformer.transform gain an &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {@inheritDoc}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;? I&apos;m not sure this will really do what you expect, because it extends a package-private method (EndResultTransformer.inheritDoc), which we don&apos;t generate javadocs for (only public, protected).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;EndResultTransformer is an interface. The default is visibility public for methods, so we want to keep the javadoc, right?&lt;/p&gt;</comment>
                            <comment id="13248262" author="rcmuir" created="Fri, 6 Apr 2012 12:21:47 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I can change that back. My personal preference is to use @inheritDoc instead of @Override for method that implements from an interface.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thats ok: for 3.6 we cannot have this @Override here anyway.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;EndResultTransformer is an interface. The default is visibility public for methods, so we want to keep the javadoc, right?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think i recommend just doing &apos;ant javadocs&apos; and inspecting build/docs/... and ensuring the javadocs read as you would like.&lt;/p&gt;

&lt;p&gt;If you are satisfied, please commit to trunk only first and others can review while hudson chews on it in trunk: or does this somehow not affect 4.0?!&lt;/p&gt;</comment>
                            <comment id="13248266" author="martijn.v.groningen" created="Fri, 6 Apr 2012 12:27:05 +0000"  >&lt;blockquote&gt;&lt;p&gt;If you are satisfied, please commit to trunk only first and others can review while hudson chews on it in trunk: or does this somehow not affect 4.0?!&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It does affect trunk. I only did use 4.0 as affect version, since it isn&apos;t released. I&apos;ll commit to trunk first and see if Hudson likes this change.&lt;/p&gt;</comment>
                            <comment id="13248286" author="martijn.v.groningen" created="Fri, 6 Apr 2012 12:47:44 +0000"  >&lt;p&gt;Committed to trunk.&lt;/p&gt;</comment>
                            <comment id="13248293" author="martijn.v.groningen" created="Fri, 6 Apr 2012 12:59:38 +0000"  >&lt;p&gt;Updated patch.&lt;/p&gt;</comment>
                            <comment id="13248343" author="mikemccand" created="Fri, 6 Apr 2012 13:52:40 +0000"  >&lt;p&gt;Patch looks good!&lt;/p&gt;

&lt;p&gt;I guess it&apos;s OK to make the hard change to the EndResultTransformer interface... (it&apos;s marked @experimental).&lt;/p&gt;</comment>
                            <comment id="13248442" author="rcmuir" created="Fri, 6 Apr 2012 16:02:17 +0000"  >&lt;p&gt;Given mike&apos;s review, i think this should be committed to 3.x&lt;/p&gt;</comment>
                            <comment id="13248462" author="rcmuir" created="Fri, 6 Apr 2012 16:14:23 +0000"  >&lt;p&gt;I&apos;ll take the backport.&lt;/p&gt;</comment>
                            <comment id="13248469" author="rcmuir" created="Fri, 6 Apr 2012 16:25:04 +0000"  >&lt;p&gt;Thanks Cody!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12553939">SOLR-3436</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12521671" name="SOLR-3316-3x.patch" size="25064" author="martijn.v.groningen" created="Fri, 6 Apr 2012 12:59:38 +0000"/>
                            <attachment id="12521665" name="SOLR-3316-3x.patch" size="24312" author="martijn.v.groningen" created="Fri, 6 Apr 2012 11:25:49 +0000"/>
                            <attachment id="12521589" name="SOLR-3316.patch" size="25771" author="martijn.v.groningen" created="Thu, 5 Apr 2012 21:53:42 +0000"/>
                            <attachment id="12521392" name="TestDistributedGrouping.java.patch" size="5227" author="cyoung" created="Wed, 4 Apr 2012 21:06:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>234561</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 33 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03fe7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17927</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>