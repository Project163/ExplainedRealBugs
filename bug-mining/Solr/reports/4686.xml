<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:47:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-15399] TestPullReplica and TestPullReplicaWithAuth are flaky</title>
                <link>https://issues.apache.org/jira/browse/SOLR-15399</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;See:&lt;br/&gt;
&lt;a href=&quot;https://jenkins.thetaphi.de/job/Solr-main-Linux/537/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jenkins.thetaphi.de/job/Solr-main-Linux/537/&lt;/a&gt;&lt;br/&gt;
and&lt;br/&gt;
&lt;a href=&quot;https://jenkins.thetaphi.de/job/Solr-main-Linux/536/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jenkins.thetaphi.de/job/Solr-main-Linux/536/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Unf. these pass with beasting locally 30/30 but something is still awry here ...&lt;/p&gt;</description>
                <environment></environment>
        <key id="13377479">SOLR-15399</key>
            <summary>TestPullReplica and TestPullReplicaWithAuth are flaky</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thelabdude">Timothy Potter</assignee>
                                    <reporter username="thelabdude">Timothy Potter</reporter>
                        <labels>
                    </labels>
                <created>Sun, 9 May 2021 02:12:26 +0000</created>
                <updated>Wed, 23 Jun 2021 13:49:26 +0000</updated>
                            <resolved>Thu, 20 May 2021 19:55:12 +0000</resolved>
                                                    <fixVersion>9.0</fixVersion>
                    <fixVersion>8.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="6600">1h 50m</timespent>
                                <comments>
                            <comment id="17347064" author="thelabdude" created="Tue, 18 May 2021 17:12:47 +0000"  >&lt;p&gt;Debugging this via beasting ... here&apos;s what I&apos;m seeing in the logs so far: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  2&amp;gt; 13227 INFO  (TEST-TestPullReplica.testKillLeader-seed#[AF3CA0CC9910FE0]) [n:127.0.0.1:63150_solr     ] o.a.s.c.TestPullReplica 
  2&amp;gt; 
  2&amp;gt; &amp;gt;&amp;gt; Sending first doc to collection pull_replica_test_kill_leader
  2&amp;gt; 
  2&amp;gt; 
  2&amp;gt; 13233 DEBUG (indexFetcher-303-thread-1) [     ] o.a.s.h.ReplicationHandler Polling &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; index modifications
  2&amp;gt; 13233 INFO  (indexFetcher-303-thread-1) [     ] o.a.s.h.IndexFetcher Last replication failed, so I&apos;ll force replication
  2&amp;gt; 13233 INFO  (indexFetcher-303-thread-1) [     ] o.a.s.h.IndexFetcher Updated leaderUrl to http:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:63150/solr/pull_replica_test_kill_leader_shard1_replica_n1/
&lt;/span&gt;  2&amp;gt; 13233 INFO  (qtp831673056-203) [n:127.0.0.1:63150_solr c:pull_replica_test_kill_leader s:shard1 r:core_node3 x:pull_replica_test_kill_leader_shard1_replica_n1 ] o.a.s.c.ZkShardTerms Successful update of terms at /collections/pull_replica_test_kill_leader/terms/shard1 to Terms{values={core_node3=1}, version=1} &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; ensureHighestTermsAreNotZero
  2&amp;gt; 13233 INFO  (qtp831673056-203) [n:127.0.0.1:63150_solr c:pull_replica_test_kill_leader s:shard1 r:core_node3 x:pull_replica_test_kill_leader_shard1_replica_n1 ] o.a.s.u.p.LogUpdateProcessorFactory [pull_replica_test_kill_leader_shard1_replica_n1]  webapp=/solr path=/update params={wt=javabin&amp;amp;version=2}{add=[1 (1700115601919311872)]} 0 3
  2&amp;gt; 13234 INFO  (qtp831673056-165) [n:127.0.0.1:63150_solr c:pull_replica_test_kill_leader s:shard1 r:core_node3 x:pull_replica_test_kill_leader_shard1_replica_n1 ] o.a.s.c.S.Request [pull_replica_test_kill_leader_shard1_replica_n1]  webapp=/solr path=/replication params={qt=/replication&amp;amp;wt=javabin&amp;amp;version=2&amp;amp;command=indexversion} status=0 QTime=0
  2&amp;gt; 13235 INFO  (indexFetcher-303-thread-1) [     ] o.a.s.h.IndexFetcher Leader&apos;s generation: 1
  2&amp;gt; 13235 INFO  (indexFetcher-303-thread-1) [     ] o.a.s.h.IndexFetcher Leader&apos;s version: 0
  2&amp;gt; 13235 INFO  (indexFetcher-303-thread-1) [     ] o.a.s.h.IndexFetcher Follower&apos;s generation: 1
  2&amp;gt; 13235 INFO  (indexFetcher-303-thread-1) [     ] o.a.s.h.IndexFetcher Follower&apos;s version: 0
  2&amp;gt; 13235 INFO  (indexFetcher-303-thread-1) [     ] o.a.s.h.IndexFetcher New index in Leader. Deleting mine...
  2&amp;gt; 13236 INFO  (searcherExecutor-292-thread-1) [     ] o.a.s.c.SolrCore [pull_replica_test_kill_leader_shard1_replica_p2]  Registered &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; searcher autowarm time: 0 ms
  2&amp;gt; 13236 DEBUG (indexFetcher-303-thread-1) [     ] o.a.s.h.IndexFetcher Nothing to replicate, leader&apos;s version is 0
  2&amp;gt; 13239 INFO  (searcherExecutor-294-thread-1-processing-n:127.0.0.1:63150_solr x:pull_replica_test_kill_leader_shard1_replica_n1 c:pull_replica_test_kill_leader s:shard1 r:core_node3) [n:127.0.0.1:63150_solr c:pull_replica_test_kill_leader s:shard1 r:core_node3 x:pull_replica_test_kill_leader_shard1_replica_n1 ] o.a.s.c.SolrCore [pull_replica_test_kill_leader_shard1_replica_n1]  Registered &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; searcher autowarm time: 0 ms
  2&amp;gt; 13239 INFO  (qtp831673056-201) [n:127.0.0.1:63150_solr c:pull_replica_test_kill_leader s:shard1 r:core_node3 x:pull_replica_test_kill_leader_shard1_replica_n1 ] o.a.s.u.p.LogUpdateProcessorFactory [pull_replica_test_kill_leader_shard1_replica_n1]  webapp=/solr path=/update params={_stateVer_=pull_replica_test_kill_leader:7&amp;amp;waitSearcher=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;commit=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;softCommit=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;amp;wt=javabin&amp;amp;version=2}{commit=} 0 4
  2&amp;gt; 13242 INFO  (qtp831673056-146) [n:127.0.0.1:63150_solr c:pull_replica_test_kill_leader s:shard1 r:core_node3 x:pull_replica_test_kill_leader_shard1_replica_n1 ] o.a.s.c.S.Request [pull_replica_test_kill_leader_shard1_replica_n1]  webapp=/solr path=/select params={q=*:*&amp;amp;wt=javabin&amp;amp;version=2} hits=1 status=0 QTime=0
  2&amp;gt; 13242 INFO  (TEST-TestPullReplica.testKillLeader-seed#[AF3CA0CC9910FE0]) [n:127.0.0.1:63150_solr     ] o.a.s.c.TestPullReplica 
  2&amp;gt; 
  2&amp;gt; &amp;gt;&amp;gt; Leader http:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:63150/solr/pull_replica_test_kill_leader_shard1_replica_n1/ has 1 doc, checking PULL replica at http://127.0.0.1:63149/solr/pull_replica_test_kill_leader_shard1_replica_p2/ now ...
&lt;/span&gt;  2&amp;gt; 
  2&amp;gt; 
  2&amp;gt; 13244 INFO  (qtp954792869-200) [n:127.0.0.1:63149_solr c:pull_replica_test_kill_leader s:shard1 r:core_node4 x:pull_replica_test_kill_leader_shard1_replica_p2 ] o.a.s.c.S.Request [pull_replica_test_kill_leader_shard1_replica_p2]  webapp=/solr path=/select params={q=*:*&amp;amp;wt=javabin&amp;amp;version=2} hits=0 status=0 QTime=0
  2&amp;gt; 13454 INFO  (qtp954792869-202) [n:127.0.0.1:63149_solr c:pull_replica_test_kill_leader s:shard1 r:core_node4 x:pull_replica_test_kill_leader_shard1_replica_p2 ] o.a.s.c.S.Request [pull_replica_test_kill_leader_shard1_replica_p2]  webapp=/solr path=/select params={q=*:*&amp;amp;wt=javabin&amp;amp;version=2} hits=0 status=0 QTime=0
  2&amp;gt; 13664 INFO  (qtp954792869-137) [n:127.0.0.1:63149_solr c:pull_replica_test_kill_leader s:shard1 r:core_node4 x:pull_replica_test_kill_leader_shard1_replica_p2 ] o.a.s.c.S.Request [pull_replica_test_kill_leader_shard1_replica_p2]  webapp=/solr path=/select params={q=*:*&amp;amp;wt=javabin&amp;amp;version=2} hits=0 status=0 QTime=0
  2&amp;gt; 13869 INFO  (qtp954792869-199) [n:127.0.0.1:63149_solr c:pull_replica_test_kill_leader s:shard1 r:core_node4 x:pull_replica_test_kill_leader_shard1_replica_p2 ] o.a.s.c.S.Request [pull_replica_test_kill_leader_shard1_replica_p2]  webapp=/solr path=/select params={q=*:*&amp;amp;wt=javabin&amp;amp;version=2} hits=0 status=0 QTime=0
  2&amp;gt; 14078 INFO  (qtp954792869-148) [n:127.0.0.1:63149_solr c:pull_replica_test_kill_leader s:shard1 r:core_node4 x:pull_replica_test_kill_leader_shard1_replica_p2 ] o.a.s.c.S.Request [pull_replica_test_kill_leader_shard1_replica_p2]  webapp=/solr path=/select params={q=*:*&amp;amp;wt=javabin&amp;amp;version=2} hits=0 status=0 QTime=0
  2&amp;gt; 14243 DEBUG (indexFetcher-303-thread-1) [     ] o.a.s.h.ReplicationHandler Polling &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; index modifications
  2&amp;gt; 14243 DEBUG (indexFetcher-303-thread-1) [     ] o.a.s.h.IndexFetcher leaderUrl didn&apos;t change
  2&amp;gt; 14244 INFO  (qtp831673056-203) [n:127.0.0.1:63150_solr c:pull_replica_test_kill_leader s:shard1 r:core_node3 x:pull_replica_test_kill_leader_shard1_replica_n1 ] o.a.s.c.S.Request [pull_replica_test_kill_leader_shard1_replica_n1]  webapp=/solr path=/replication params={qt=/replication&amp;amp;wt=javabin&amp;amp;version=2&amp;amp;command=indexversion} status=0 QTime=0
  2&amp;gt; 14245 INFO  (indexFetcher-303-thread-1) [     ] o.a.s.h.IndexFetcher Leader&apos;s generation: 2
  2&amp;gt; 14245 INFO  (indexFetcher-303-thread-1) [     ] o.a.s.h.IndexFetcher Leader&apos;s version: 1621356584476
  2&amp;gt; 14245 INFO  (indexFetcher-303-thread-1) [     ] o.a.s.h.IndexFetcher Follower&apos;s generation: 2
  2&amp;gt; 14245 INFO  (indexFetcher-303-thread-1) [     ] o.a.s.h.IndexFetcher Follower&apos;s version: 1621356584476
  2&amp;gt; 14245 INFO  (indexFetcher-303-thread-1) [     ] o.a.s.h.IndexFetcher Follower in sync with leader.
  2&amp;gt; 14285 INFO  (qtp954792869-305) [n:127.0.0.1:63149_solr c:pull_replica_test_kill_leader s:shard1 r:core_node4 x:pull_replica_test_kill_leader_shard1_replica_p2 ] o.a.s.c.S.Request [pull_replica_test_kill_leader_shard1_replica_p2]  webapp=/solr path=/select params={q=*:*&amp;amp;wt=javabin&amp;amp;version=2} hits=0 status=0 QTime=0
  2&amp;gt; 14496 INFO  (qtp954792869-237) [n:127.0.0.1:63149_solr c:pull_replica_test_kill_leader s:shard1 r:core_node4 x:pull_replica_test_kill_leader_shard1_replica_p2 ] o.a.s.c.S.Request [pull_replica_test_kill_leader_shard1_replica_p2]  webapp=/solr path=/select params={q=*:*&amp;amp;wt=javabin&amp;amp;version=2} hits=0 status=0 QTime=0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;From these logs, it&apos;s almost like the PULL replica gets the leader&apos;s index but doesn&apos;t open its new searcher. &lt;/p&gt;</comment>
                            <comment id="17348676" author="jira-bot" created="Thu, 20 May 2021 18:35:56 +0000"  >&lt;p&gt;Commit c731873aef43e81224caafdf02a1ba2f3b3a99e7 in solr&apos;s branch refs/heads/main from Timothy Potter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=c731873&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=c731873&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15399&quot; title=&quot;TestPullReplica and TestPullReplicaWithAuth are flaky&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15399&quot;&gt;&lt;del&gt;SOLR-15399&lt;/del&gt;&lt;/a&gt;: IndexFetcher should not issue a local commit for PULL replicas (#133)&lt;/p&gt;
</comment>
                            <comment id="17348717" author="jira-bot" created="Thu, 20 May 2021 19:55:13 +0000"  >&lt;p&gt;Commit d6f8ce9c1e33315d9aaef4bf49fbacfbb941f06b in lucene-solr&apos;s branch refs/heads/branch_8x from Timothy Potter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=d6f8ce9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=d6f8ce9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15399&quot; title=&quot;TestPullReplica and TestPullReplicaWithAuth are flaky&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15399&quot;&gt;&lt;del&gt;SOLR-15399&lt;/del&gt;&lt;/a&gt;: IndexFetcher should not issue a local commit for PULL replicas when leader&apos;s version is zero; backport to 8x (#2498)&lt;/p&gt;
</comment>
                            <comment id="17368164" author="mayya" created="Wed, 23 Jun 2021 13:42:23 +0000"  >&lt;p&gt;Closing after the 8.9.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                            <outwardlinks description="fixes">
                                        <issuelink>
            <issuekey id="13145366">SOLR-12100</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qv7k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>