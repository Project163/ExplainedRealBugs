<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:22:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-10323] SpellingQueryConverter does not remove &quot;:&quot; char when using fielded queries</title>
                <link>https://issues.apache.org/jira/browse/SOLR-10323</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;If you pass a fielded query to &lt;tt&gt;SpellingQueryConverter.convert&lt;/tt&gt;, it returns a token that is prefixed with a &quot;:&quot; char.&lt;/p&gt;

&lt;p&gt;Example: The query &quot;foo:bar&quot; is converted to &quot;:bar&quot;&lt;/p&gt;

&lt;p&gt;This bug seems to have been introduced by the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2556&quot; title=&quot;Spellcheck component not returned with numeric queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2556&quot;&gt;&lt;del&gt;SOLR-2556&lt;/del&gt;&lt;/a&gt;. Before this patch, &lt;tt&gt;SpellingQueryConverter.convert&lt;/tt&gt; returned tokens without the leading colon char.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13057748">SOLR-10323</key>
            <summary>SpellingQueryConverter does not remove &quot;:&quot; char when using fielded queries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdyer">James Dyer</assignee>
                                    <reporter username="Mikep86">Michael Pellegrini</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Mar 2017 00:41:24 +0000</created>
                <updated>Sat, 8 Jun 2019 15:31:32 +0000</updated>
                            <resolved>Thu, 6 Apr 2017 19:48:41 +0000</resolved>
                                    <version>6.2.1</version>
                                    <fixVersion>6.6</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                    <component>spellchecker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15936766" author="sarkaramrit2@gmail.com" created="Wed, 22 Mar 2017 17:41:31 +0000"  >&lt;p&gt;The issue seems to be bigger than that:&lt;/p&gt;

&lt;p&gt;In SpellingQueryConverterTest::testNumeric()&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Test
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testNumeric() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    SpellingQueryConverter converter = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SpellingQueryConverter();
    converter.init(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NamedList());
    converter.setAnalyzer(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; WhitespaceAnalyzer());
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] queries = {&lt;span class=&quot;code-quote&quot;&gt;&quot;12345&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;foo:12345&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;12345 67890&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;foo:(12345 67890)&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;foo:(life 67890)&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;12345 life&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;+12345 +life&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;-12345 life&quot;&lt;/span&gt;};
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[] tokensToExpect = {1, 1, 2, 2, 2, 2, 2, 2};
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; queries.length; i++) {
      Collection&amp;lt;Token&amp;gt; tokens = converter.convert(queries[i]);
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;tkns &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &quot;&lt;/span&gt;+queries[i]+&lt;span class=&quot;code-quote&quot;&gt;&quot; &amp;gt;&amp;gt; &quot;&lt;/span&gt;+tokens);
      assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;tokens Size: &quot;&lt;/span&gt; + tokens.size() + &lt;span class=&quot;code-quote&quot;&gt;&quot; is not: &quot;&lt;/span&gt; + tokensToExpect[i], tokens.size() == tokensToExpect[i]);
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;tkns &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 12345 &amp;gt;&amp;gt; [12345]
tkns &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; foo:12345 &amp;gt;&amp;gt; [:12345]
tkns &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 12345 67890 &amp;gt;&amp;gt; [12345, 67890]
tkns &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; foo:(12345 67890) &amp;gt;&amp;gt; [(12345, 67890]
tkns &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; foo:(life 67890) &amp;gt;&amp;gt; [(life, 67890]
tkns &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 12345 life &amp;gt;&amp;gt; [12345, life]
tkns &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; +12345 +life &amp;gt;&amp;gt; [+12345, +life]
tkns &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; -12345 life &amp;gt;&amp;gt; [-12345, life]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Observe &lt;b&gt;(&lt;/b&gt; coming anywhere, braces are not handled too. Test cases are not hard enough there.&lt;/p&gt;</comment>
                            <comment id="15936915" author="sarkaramrit2@gmail.com" created="Wed, 22 Mar 2017 18:50:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10323&quot; title=&quot;SpellingQueryConverter does not remove &amp;quot;:&amp;quot; char when using fielded queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10323&quot;&gt;&lt;del&gt;SOLR-10323&lt;/del&gt;&lt;/a&gt;.patch uploaded which will ignore &quot;:&quot; and &quot;(&quot; throughout the original term. This fixes our problem but an overhead comes around as the SpellingQueryConverter will break if the original term is like:&lt;/p&gt;

&lt;p&gt;foo:bar(random)  ===&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;bar, random&amp;#93;&lt;/span&gt;, in current code, this happens already&lt;br/&gt;
foo:bar:bar ===&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;bar, bar&amp;#93;&lt;/span&gt;, in current code, this happens already&lt;/p&gt;

&lt;p&gt;and there is no way to escape it like:&lt;br/&gt;
foo:bar&amp;#40;random)&lt;br/&gt;
foo:bar\:bar&lt;/p&gt;

&lt;p&gt;But this will work perfectly with other special characters like underscores, highen and alphanumerics.&lt;/p&gt;

&lt;p&gt;I will add relevant test cases very soon if we have +1 with the stated compromise.&lt;/p&gt;</comment>
                            <comment id="15937787" author="sarkaramrit2@gmail.com" created="Thu, 23 Mar 2017 06:08:01 +0000"  >&lt;p&gt;changed the QUERY_REGEX:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;(?:(?!(([A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u2001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\-.0-9\xb7\u0300-\u036f\u203f-\u2040]|\p{Cs}{2})+:|[\^.:(]\d+)))[^^.\s][\p{L}_\-0-9]+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;.......:|[\^.:(]\d+)))........
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15954072" author="mikep86" created="Mon, 3 Apr 2017 19:57:19 +0000"  >&lt;p&gt;This compromise works for my needs&lt;/p&gt;</comment>
                            <comment id="15954285" author="sarkaramrit2@gmail.com" created="Mon, 3 Apr 2017 22:52:58 +0000"  >&lt;p&gt;Cool, I will add the test cases then to the current patch and would request a committer to have a look, suggest any improvements and ultimately commit that. This is a legit bug.&lt;/p&gt;</comment>
                            <comment id="15954449" author="sarkaramrit2@gmail.com" created="Tue, 4 Apr 2017 01:21:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10323&quot; title=&quot;SpellingQueryConverter does not remove &amp;quot;:&amp;quot; char when using fielded queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10323&quot;&gt;&lt;del&gt;SOLR-10323&lt;/del&gt;&lt;/a&gt;.patch uploaded with light but precise test cases.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	modified:   solr/core/src/java/org/apache/solr/spelling/SpellingQueryConverter.java
	modified:   solr/core/src/test/org/apache/solr/spelling/SpellingQueryConverterTest.java
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Requesting someone to review the patch.&lt;/p&gt;</comment>
                            <comment id="15957516" author="mikep86" created="Wed, 5 Apr 2017 19:38:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdyer&quot; class=&quot;user-hover&quot; rel=&quot;jdyer&quot;&gt;jdyer&lt;/a&gt; can you review this patch?&lt;/p&gt;</comment>
                            <comment id="15959099" author="jdyer" created="Thu, 6 Apr 2017 15:30:18 +0000"  >&lt;p&gt;This patch makes the test a little simpler.  Straightforward fix.  I&apos;ll commit this shortly.&lt;/p&gt;</comment>
                            <comment id="15959430" author="jira-bot" created="Thu, 6 Apr 2017 17:50:10 +0000"  >&lt;p&gt;Commit e75a2e6b86bdac5ee86a4c3fa9d2f5e33bfc42d1 in lucene-solr&apos;s branch refs/heads/master from jdyer1&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=e75a2e6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=e75a2e6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10323&quot; title=&quot;SpellingQueryConverter does not remove &amp;quot;:&amp;quot; char when using fielded queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10323&quot;&gt;&lt;del&gt;SOLR-10323&lt;/del&gt;&lt;/a&gt;: fix to SpellingQueryConverter to properly strip out colons in field-specific queries&lt;/p&gt;</comment>
                            <comment id="15959599" author="jira-bot" created="Thu, 6 Apr 2017 19:39:32 +0000"  >&lt;p&gt;Commit d5de738ed4ad561d0e7cc058ac3aa10a814be2f0 in lucene-solr&apos;s branch refs/heads/branch_6x from jdyer1&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=d5de738&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=d5de738&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10323&quot; title=&quot;SpellingQueryConverter does not remove &amp;quot;:&amp;quot; char when using fielded queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10323&quot;&gt;&lt;del&gt;SOLR-10323&lt;/del&gt;&lt;/a&gt;: fix to SpellingQueryConverter to properly strip out colons in field-specific queries&lt;/p&gt;</comment>
                            <comment id="15959619" author="jdyer" created="Thu, 6 Apr 2017 19:48:41 +0000"  >&lt;p&gt;Thank you Amrit for the patch and Michael for reporting this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12862310" name="SOLR-10323.patch" size="2287" author="jdyer" created="Thu, 6 Apr 2017 15:30:18 +0000"/>
                            <attachment id="12861793" name="SOLR-10323.patch" size="3010" author="sarkaramrit2@gmail.com" created="Tue, 4 Apr 2017 01:21:40 +0000"/>
                            <attachment id="12859983" name="SOLR-10323.patch" size="832" author="sarkaramrit2@gmail.com" created="Wed, 22 Mar 2017 18:50:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3cjy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>