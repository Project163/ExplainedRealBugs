<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:04:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16946] Cluster Singleton stop method sometimes not called on Overseer close</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16946</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;If a Cluster Singleton plugin is added, then the normal behavior is for the ClusterSingleton stop method to be called when the Overseer is closed. &lt;/p&gt;

&lt;p&gt;However, if the plugin configuration is updated after it has been added, then the stop method is not called when the Overseer is closed.&lt;/p&gt;

&lt;p&gt;When the &lt;em&gt;/cluster/plugin&lt;/em&gt; API is called with an update payload, the &lt;em&gt;ClusterSingletons.modified&lt;/em&gt; method is called, which adds the new plugin to the &lt;em&gt;singletonMap&lt;/em&gt; (and starts it if applicable). Then it stops and removes the old one.&lt;/p&gt;

&lt;p&gt;Given that the &lt;em&gt;singletonMap&lt;/em&gt; is keyed on the plugin name, adding the replacement will overwrite the existing (old) entry in the map. Then when attempting to remove the previous plugin, the new replacement is inadvertently removed instead.&lt;/p&gt;

&lt;p&gt;This leaves the &lt;em&gt;singletonMap&lt;/em&gt; with no entry for the updated plugin. When the Overseer node goes down, the stop method is not called for the plugin because it does not have an entry in the map.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13548299">SOLR-16946</key>
            <summary>Cluster Singleton stop method sometimes not called on Overseer close</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="noble.paul">Noble Paul</assignee>
                                    <reporter username="pmcarthur">Paul McArthur</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Aug 2023 22:59:24 +0000</created>
                <updated>Sun, 15 Oct 2023 20:13:54 +0000</updated>
                            <resolved>Wed, 23 Aug 2023 12:02:57 +0000</resolved>
                                    <version>9.0</version>
                    <version>9.1</version>
                    <version>9.2</version>
                    <version>9.1.1</version>
                    <version>9.3</version>
                                    <fixVersion>9.4</fixVersion>
                                    <component>Plugin system</component>
                    <component>SolrCloud</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17757876" author="jira-bot" created="Wed, 23 Aug 2023 08:18:20 +0000"  >&lt;p&gt;Commit 0619f7873cfcb2f19539d6b2a69225d76e17ca66 in solr&apos;s branch refs/heads/main from pjmcarthur&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=0619f7873cf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=0619f7873cf&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16946&quot; title=&quot;Cluster Singleton stop method sometimes not called on Overseer close&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16946&quot;&gt;&lt;del&gt;SOLR-16946&lt;/del&gt;&lt;/a&gt;: Updated Cluster Singleton plugins are stopped correctly when the Overseer is closed (#1862)&lt;/p&gt;
</comment>
                            <comment id="17757878" author="jira-bot" created="Wed, 23 Aug 2023 08:20:29 +0000"  >&lt;p&gt;Commit 56d322464a8022a3198f54f9f4fad824c746831f in solr&apos;s branch refs/heads/branch_9x from pjmcarthur&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=56d322464a8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=56d322464a8&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16946&quot; title=&quot;Cluster Singleton stop method sometimes not called on Overseer close&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16946&quot;&gt;&lt;del&gt;SOLR-16946&lt;/del&gt;&lt;/a&gt;: Updated Cluster Singleton plugins are stopped correctly when the Overseer is closed (#1862)&lt;/p&gt;
</comment>
                            <comment id="17757981" author="janhoy" created="Wed, 23 Aug 2023 11:37:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; , remember to close Jira when done&lt;/p&gt;</comment>
                            <comment id="17758005" author="ichattopadhyaya" created="Wed, 23 Aug 2023 12:42:05 +0000"  >&lt;p&gt;Should we backport to 8.11.x?&lt;/p&gt;</comment>
                            <comment id="17758219" author="JIRAUSER300242" created="Wed, 23 Aug 2023 20:00:59 +0000"  >&lt;p&gt;This issue only affects Solr 9, there should be no need to backport to 8.11.x&lt;/p&gt;</comment>
                            <comment id="17775453" author="alex.parvulescu" created="Sun, 15 Oct 2023 19:57:05 +0000"  >&lt;p&gt;Closing after the 9.4.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 4 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1jy9c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>