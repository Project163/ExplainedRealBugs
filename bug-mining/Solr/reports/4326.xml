<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:40:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-13760] Date Math in &quot;start&quot; attribute of routed alias causes exception</title>
                <link>https://issues.apache.org/jira/browse/SOLR-13760</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The start parameter (for Time Routed Aliases and 2-Dimensional Routed Aliases using time components) is meant to accept date math as well as a timestamp. However it seems that none of the tests actually test this, and my changes for DRA forgot to account for it in one place, so an exception is thrown adding a document to an alias with such a configuration. Will add a test and a fix.&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13256697">SOLR-13760</key>
            <summary>Date Math in &quot;start&quot; attribute of routed alias causes exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gus">Gus Heck</assignee>
                                    <reporter username="gus">Gus Heck</reporter>
                        <labels>
                    </labels>
                <created>Sat, 14 Sep 2019 16:48:13 +0000</created>
                <updated>Tue, 21 Jan 2020 16:57:01 +0000</updated>
                            <resolved>Fri, 11 Oct 2019 01:48:46 +0000</resolved>
                                    <version>8.3</version>
                                    <fixVersion>8.3</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="16929819" author="gus_heck" created="Sat, 14 Sep 2019 20:46:37 +0000"  >&lt;p&gt;The fix in the pull request parses the date math correctly. The interesting effect here is that a DRA configured with something like &quot;start&quot;:&quot;NOW/DAY&quot; would never allow old documents for a new category no matter how long it&apos;s been running. I think it&apos;s possible to see this as a feature, but also possible to see it as a bit tricky or surprising. We might want to consider converting the NOW/DAY to a timestamp and updating the alias after the first document arrives for a DRA, thus creating a level &quot;first date&quot; across all categories. For a pure TRA this is not a problem because there is only one time series in play, and the first TRA collection is created, the start parameter is never used again.&lt;/p&gt;

&lt;p&gt;As I type this I think I just realized that the fix in the PR still has a problem... I suspect that the NOW/DAY config will erroneously reject any document not in the present day because there&apos;s no check to see if a first collection exists already.... hmm&lt;/p&gt;</comment>
                            <comment id="16948119" author="gus_heck" created="Thu, 10 Oct 2019 01:54:38 +0000"  >&lt;p&gt;Updated the PR with logic to convert date math in the start attribute for the routed alias to a specific timestamp. This  needs to get into 8.3 to avoid TRA regression so I&apos;ll likely push this to master/8x/8.3 tomorrow evening unless folks have concerns. Test beasted fine for 40 tests (20 at a time) will set it up to run longer with a higher concurrency than processor count overnight.&lt;/p&gt;</comment>
                            <comment id="16948974" author="jira-bot" created="Thu, 10 Oct 2019 22:17:30 +0000"  >&lt;p&gt;Commit be813bd0aefcf480f854a05c7880494da5e8c8bf in lucene-solr&apos;s branch refs/heads/master from Gus Heck&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=be813bd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=be813bd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13760&quot; title=&quot;Date Math in &amp;quot;start&amp;quot; attribute of routed alias causes exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13760&quot;&gt;&lt;del&gt;SOLR-13760&lt;/del&gt;&lt;/a&gt; - restore viability of date math in TRA start property (#879)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13760&quot; title=&quot;Date Math in &amp;quot;start&amp;quot; attribute of routed alias causes exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13760&quot;&gt;&lt;del&gt;SOLR-13760&lt;/del&gt;&lt;/a&gt; - restore viability of date math in TRA start property by&lt;br/&gt;
fixing the start date for time routed aliases&lt;br/&gt;
upon the receipt of the first document to avoid problems&lt;br/&gt;
with date math calculations required by DRA&apos;s&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16948975" author="jira-bot" created="Thu, 10 Oct 2019 22:17:31 +0000"  >&lt;p&gt;Commit be813bd0aefcf480f854a05c7880494da5e8c8bf in lucene-solr&apos;s branch refs/heads/master from Gus Heck&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=be813bd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=be813bd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13760&quot; title=&quot;Date Math in &amp;quot;start&amp;quot; attribute of routed alias causes exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13760&quot;&gt;&lt;del&gt;SOLR-13760&lt;/del&gt;&lt;/a&gt; - restore viability of date math in TRA start property (#879)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13760&quot; title=&quot;Date Math in &amp;quot;start&amp;quot; attribute of routed alias causes exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13760&quot;&gt;&lt;del&gt;SOLR-13760&lt;/del&gt;&lt;/a&gt; - restore viability of date math in TRA start property by&lt;br/&gt;
fixing the start date for time routed aliases&lt;br/&gt;
upon the receipt of the first document to avoid problems&lt;br/&gt;
with date math calculations required by DRA&apos;s&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16948982" author="jira-bot" created="Thu, 10 Oct 2019 22:35:58 +0000"  >&lt;p&gt;Commit fb3d030e056989e61243df956c34cde7b702e654 in lucene-solr&apos;s branch refs/heads/master from Gus Heck&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=fb3d030&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=fb3d030&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13760&quot; title=&quot;Date Math in &amp;quot;start&amp;quot; attribute of routed alias causes exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13760&quot;&gt;&lt;del&gt;SOLR-13760&lt;/del&gt;&lt;/a&gt; update CHANGES.txt&lt;/p&gt;</comment>
                            <comment id="16949022" author="jira-bot" created="Fri, 11 Oct 2019 00:42:30 +0000"  >&lt;p&gt;Commit d5b26be691f526d140cf5fb937dbca8813ceafd2 in lucene-solr&apos;s branch refs/heads/branch_8x from Gus Heck&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=d5b26be&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=d5b26be&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13760&quot; title=&quot;Date Math in &amp;quot;start&amp;quot; attribute of routed alias causes exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13760&quot;&gt;&lt;del&gt;SOLR-13760&lt;/del&gt;&lt;/a&gt; - restore viability of date math in TRA start property by&lt;br/&gt;
fixing the start date for time routed aliases&lt;br/&gt;
upon the receipt of the first document to avoid problems&lt;br/&gt;
with date math calculations required by DRA&apos;s&lt;/p&gt;

&lt;p&gt;(cherry picked from commit be813bd0aefcf480f854a05c7880494da5e8c8bf)&lt;/p&gt;</comment>
                            <comment id="16949049" author="jira-bot" created="Fri, 11 Oct 2019 01:37:00 +0000"  >&lt;p&gt;Commit 277e098039723c3d20886baaa33c9e4dfec8cee5 in lucene-solr&apos;s branch refs/heads/branch_8_3 from Gus Heck&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=277e098&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=277e098&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13760&quot; title=&quot;Date Math in &amp;quot;start&amp;quot; attribute of routed alias causes exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13760&quot;&gt;&lt;del&gt;SOLR-13760&lt;/del&gt;&lt;/a&gt; - restore viability of date math in TRA start property (#879)&lt;br/&gt;
by fixing the start date for time routed aliases&lt;br/&gt;
upon the receipt of the first document to avoid problems&lt;br/&gt;
with date math calculations required by DRA&apos;s&lt;/p&gt;

&lt;p&gt;(cherry picked from commit be813bd0aefcf480f854a05c7880494da5e8c8bf)&lt;/p&gt;</comment>
                            <comment id="16949051" author="jira-bot" created="Fri, 11 Oct 2019 01:40:22 +0000"  >&lt;p&gt;Commit cdca1fcd678abbb3d22a15fbccdfa36a2ae86c32 in lucene-solr&apos;s branch refs/heads/branch_8x from Gus Heck&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=cdca1fc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=cdca1fc&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13760&quot; title=&quot;Date Math in &amp;quot;start&amp;quot; attribute of routed alias causes exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13760&quot;&gt;&lt;del&gt;SOLR-13760&lt;/del&gt;&lt;/a&gt; update CHANGES.txt&lt;/p&gt;

&lt;p&gt;(cherry picked from commit fb3d030e056989e61243df956c34cde7b702e654)&lt;/p&gt;</comment>
                            <comment id="16949853" author="gus_heck" created="Sat, 12 Oct 2019 01:09:53 +0000"  >&lt;p&gt;Noticed one test failure on fucit.org, for the test added in this ticket, which is very very irritating since I beasted the test with 40 simultaneous copies for 1000 tests before committing, completely saturating my cpu to the point where the machine was unusable for 2-3 hrs, and yet didn&apos;t have one failure. Will keep an eye on it.&#160;&lt;/p&gt;</comment>
                            <comment id="16949855" author="gus_heck" created="Sat, 12 Oct 2019 01:12:56 +0000"  >&lt;p&gt;I should add that the nature of the failure is one of the assert not seeing a change in zookeeper, despite the test having waited on a watch for changes to aliases.json. Clearly since it passes other times, this is a test timing issue. The seed does not reproduce.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13269197">SOLR-13943</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 5 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z06n9c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>