<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:07:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-7942] fix error logging when index is locked on startup, add deprecation warning if unlockOnStartup is configured</title>
                <link>https://issues.apache.org/jira/browse/SOLR-7942</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-6508&quot; title=&quot;Simplify Directory/lock api&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-6508&quot;&gt;&lt;del&gt;LUCENE-6508&lt;/del&gt;&lt;/a&gt; removed support for unlockOnStartup, but the way the changes are made are inconsistent with how other config options have been deprecated in the past, and cause a confusing error message if an index is locked on startup...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;in 5x, the SolrConfig constructor should log a warning if the unlockOnStartup option is specified (regardless of whether it&apos;s true or false) so users know they need to cleanup their configs and change their expectations (even if they never get - or have not yet gotten - a lock problem)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;in SolrCore, the LockObtainFailedException that is thrown if the index is locked should &lt;em&gt;not&lt;/em&gt; say &quot;&lt;tt&gt;Solr now longer supports forceful unlocking via &apos;unlockOnStartup&apos;&lt;/tt&gt;&quot;
	&lt;ul&gt;
		&lt;li&gt;besides the no/now typo, this wording missleads users into thinking that the LockObtainFailedException error is in some way related to that config option &amp;#8211; creating an implication that using that option lead them to this error.  we shouldn&apos;t mention that here.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12857043">SOLR-7942</key>
            <summary>fix error logging when index is locked on startup, add deprecation warning if unlockOnStartup is configured</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Aug 2015 21:57:57 +0000</created>
                <updated>Mon, 9 May 2016 18:57:23 +0000</updated>
                            <resolved>Thu, 27 Aug 2015 18:12:34 +0000</resolved>
                                                    <fixVersion>5.4</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14702061" author="thetaphi" created="Tue, 18 Aug 2015 22:03:37 +0000"  >&lt;p&gt;Sorry the typo was caused by me! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14702066" author="thetaphi" created="Tue, 18 Aug 2015 22:07:55 +0000"  >&lt;p&gt;In any case, the error message should be very rare.&lt;/p&gt;

&lt;p&gt;BTW, It&apos;s impossible to ever need to unlock the directory in the default config (NIOFSLockFactory), because the JVM / OS kernel cleans up the lock on JVM exit. SO the message does not need to be so prominent. In the default config, if directory is locked you have a second Solr instance somewhere running. Poeple using HDFS may need more instructions how to remove the lock! SimpleFSLockFactory is something nobody should use at all (maybe only with NFS), so this is also not a problematic thing.&lt;/p&gt;</comment>
                            <comment id="14702080" author="hossman" created="Tue, 18 Aug 2015 22:14:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;...In the default config, if directory is locked you have a second Solr instance somewhere running....&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;right: i&apos;d like to improve that errmsg to make the most common situation (multiple instances) more obvious, but also point out it depends on your config.  the main thing though is to stop mentioning unlockOnStartup completley &amp;#8211; because right now even if you aren&apos;t using it, you&apos;ll get an error mentioning it, and if you go searching for it it&apos;ll be hard to find because we&apos;re removing it from the ref guide.&lt;/p&gt;

&lt;p&gt;the only time you should ever get a log msg mentioning unlockOnStartup is_if_ you already have it configured &amp;#8211; then we should tell you to stop (the first point)&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;In any case, this isn&apos;t a major issue, i just wanted to file it as a reminder to clean it up as soon as i have some time.&lt;/p&gt;</comment>
                            <comment id="14715618" author="hossman" created="Wed, 26 Aug 2015 22:11:04 +0000"  >&lt;p&gt;Here&apos;s what i had in mind, with the &lt;tt&gt;true // &apos;fail&apos; in trunk&lt;/tt&gt; changed to &lt;tt&gt;false // warn in 5x&lt;/tt&gt; when backporting.&lt;/p&gt;

&lt;p&gt;Anyone have concerns/feedack about the various warning/err msgs?&lt;/p&gt;</comment>
                            <comment id="14717129" author="jira-bot" created="Thu, 27 Aug 2015 17:35:41 +0000"  >&lt;p&gt;Commit 1698200 from hossman@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1698200&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1698200&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7942&quot; title=&quot;fix error logging when index is locked on startup, add deprecation warning if unlockOnStartup is configured&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7942&quot;&gt;&lt;del&gt;SOLR-7942&lt;/del&gt;&lt;/a&gt;: Previously removed unlockOnStartup option (&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-6508&quot; title=&quot;Simplify Directory/lock api&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-6508&quot;&gt;&lt;del&gt;LUCENE-6508&lt;/del&gt;&lt;/a&gt;) now logs warning if configured, will be an error in 6.0.  Also improved error msg if an index is locked on startup&lt;/p&gt;</comment>
                            <comment id="14717202" author="jira-bot" created="Thu, 27 Aug 2015 18:12:12 +0000"  >&lt;p&gt;Commit 1698203 from hossman@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1698203&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1698203&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7942&quot; title=&quot;fix error logging when index is locked on startup, add deprecation warning if unlockOnStartup is configured&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7942&quot;&gt;&lt;del&gt;SOLR-7942&lt;/del&gt;&lt;/a&gt;: Previously removed unlockOnStartup option (&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-6508&quot; title=&quot;Simplify Directory/lock api&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-6508&quot;&gt;&lt;del&gt;LUCENE-6508&lt;/del&gt;&lt;/a&gt;) now logs warning if configured, will be an error in 6.0.  Also improved error msg if an index is locked on startup (merge r1698200)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12755075">SOLR-6737</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12752588" name="SOLR-7942.patch" size="2926" author="hossman" created="Wed, 26 Aug 2015 22:11:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2j2q7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>