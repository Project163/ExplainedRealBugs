<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:03:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-7248] In legacyCloud=false mode we should check if the core was hosted on the same node before registering it </title>
                <link>https://issues.apache.org/jira/browse/SOLR-7248</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Related discussion here - &lt;a href=&quot;http://markmail.org/message/n32mxbv42hzuneyy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://markmail.org/message/n32mxbv42hzuneyy&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Currently we check if the same coreNodeName is present in clusterstate before registering it. We should make this check more stringent and allow a core to be registered only if it the coreNodeName is present and if it&apos;s on the same node.&lt;/p&gt;

&lt;p&gt;This will ensure that junk replica folders lying around on old nodes don&apos;t end up registering themselves when the node gets bounced.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12782154">SOLR-7248</key>
            <summary>In legacyCloud=false mode we should check if the core was hosted on the same node before registering it </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="varun">Varun Thacker</assignee>
                                    <reporter username="varun">Varun Thacker</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Mar 2015 09:32:19 +0000</created>
                <updated>Thu, 21 Nov 2019 00:41:37 +0000</updated>
                            <resolved>Tue, 24 Mar 2015 18:27:54 +0000</resolved>
                                    <version>5.0</version>
                                    <fixVersion>5.1</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14363083" author="varunthacker" created="Mon, 16 Mar 2015 11:22:04 +0000"  >&lt;p&gt;Patch which checks both coreNodeName and base_url to verify if the core is already present in the clusterstate. &lt;/p&gt;

&lt;p&gt;Also refactored that method.&lt;/p&gt;</comment>
                            <comment id="14363158" author="noble.paul" created="Mon, 16 Mar 2015 12:53:21 +0000"  >&lt;p&gt;compare both baseurl and corename&lt;/p&gt;</comment>
                            <comment id="14363231" author="varunthacker" created="Mon, 16 Mar 2015 14:16:03 +0000"  >&lt;p&gt;Updated patch which compares both &apos;base_url&apos; and &apos;name&apos;&lt;/p&gt;</comment>
                            <comment id="14363337" author="markrmiller@gmail.com" created="Mon, 16 Mar 2015 15:22:47 +0000"  >&lt;p&gt;In fact, I think we need to reconsider legacyCloud.&lt;/p&gt;

&lt;p&gt;We have reserved the right to add ZK == truth features by default in 5 releases.&lt;/p&gt;

&lt;p&gt;We may want to first add and improve them behind legacyCloud as an option and once we have confidence in them, move them to default? Or we may want to keep everything behind legacyCloud for all of 5. I would prefer to start doing zk == truth by default - when you don&apos;t support pre configuring SolrCore&apos;s (As we say we won&apos;t in 5.0 CHANGES.txt), most of these changes are really fixing what a user would perceive as a bug.&lt;/p&gt;</comment>
                            <comment id="14363427" author="varunthacker" created="Mon, 16 Mar 2015 16:22:49 +0000"  >&lt;blockquote&gt;&lt;p&gt;We may want to first add and improve them behind legacyCloud as an option and once we have confidence in them, move them to default? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1.&lt;/p&gt;

&lt;p&gt;What are the things that you have in mind that we could add to make ZK as truth?&lt;/p&gt;</comment>
                            <comment id="14363441" author="markrmiller@gmail.com" created="Mon, 16 Mar 2015 16:30:13 +0000"  >&lt;p&gt;Just simple stuff - some of it may already happen with legacyCloud=true, but I know there are not enough tests for it, nor is it completely done.&lt;/p&gt;

&lt;p&gt;Basically though, you shouldn&apos;t be able to create a core for a collection if that collection does not exist. So for example, on startup, any core that is part not part of a collection in zk should be removed. Likewise, if ZooKeeper says a node should host a SolrCore and it does not, it should be created (given their is a leader to replicate from or when using a shared filesystem). &lt;/p&gt;

&lt;p&gt;Basically, all the individual Solr instances should make the appropriate local adjustments to stay in sync with what ZooKeeper describes as the current cluster.&lt;/p&gt;</comment>
                            <comment id="14367654" author="varunthacker" created="Wed, 18 Mar 2015 18:43:47 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; for putting down whats needed. I created &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7269&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SOLR-7269&lt;/a&gt; to track it. &lt;/p&gt;

&lt;p&gt;We could commit this patch as is right? &lt;/p&gt;

&lt;p&gt;I also found &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7251&quot; title=&quot;In legacyCloud=false, If a create collection fails, information about that collection should not be persisted in ZK&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7251&quot;&gt;&lt;del&gt;SOLR-7251&lt;/del&gt;&lt;/a&gt; while doing some manual testing for this patch.&lt;/p&gt;</comment>
                            <comment id="14367663" author="markrmiller@gmail.com" created="Wed, 18 Mar 2015 18:50:15 +0000"  >&lt;p&gt;Yeah, I was just chiming in here because of the legacyCloud connection.&lt;/p&gt;</comment>
                            <comment id="14378108" author="jira-bot" created="Tue, 24 Mar 2015 16:35:32 +0000"  >&lt;p&gt;Commit 1668931 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=varun&quot; class=&quot;user-hover&quot; rel=&quot;varun&quot;&gt;varun&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1668931&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1668931&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7248&quot; title=&quot;In legacyCloud=false mode we should check if the core was hosted on the same node before registering it &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7248&quot;&gt;&lt;del&gt;SOLR-7248&lt;/del&gt;&lt;/a&gt;: In legacyCloud=false mode we should check if the core was hosted on the same node before registering it&lt;/p&gt;</comment>
                            <comment id="14378324" author="jira-bot" created="Tue, 24 Mar 2015 18:25:17 +0000"  >&lt;p&gt;Commit 1668953 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=varun&quot; class=&quot;user-hover&quot; rel=&quot;varun&quot;&gt;varun&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1668953&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1668953&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7248&quot; title=&quot;In legacyCloud=false mode we should check if the core was hosted on the same node before registering it &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7248&quot;&gt;&lt;del&gt;SOLR-7248&lt;/del&gt;&lt;/a&gt;: In legacyCloud=false mode we should check if the core was hosted on the same node before registering it (merging from trunk)&lt;/p&gt;</comment>
                            <comment id="14378328" author="varunthacker" created="Tue, 24 Mar 2015 18:27:54 +0000"  >&lt;p&gt;Thanks Noble and Mark.&lt;/p&gt;</comment>
                            <comment id="14495222" author="thelabdude" created="Wed, 15 Apr 2015 00:30:08 +0000"  >&lt;p&gt;Bulk close after 5.1 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12987029">SOLR-9281</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12704776" name="SOLR-7248.patch" size="2530" author="varun" created="Mon, 16 Mar 2015 14:16:03 +0000"/>
                            <attachment id="12704761" name="SOLR-7248.patch" size="2432" author="varun" created="Mon, 16 Mar 2015 11:22:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26srj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>