<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:25:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-3084] default=&quot;true&quot; causes NPE -&gt; SolrException from QueryResponseWriter initWriters</title>
                <link>https://issues.apache.org/jira/browse/SOLR-3084</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;This is from issue &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2718&quot; title=&quot;Lazy load response writers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2718&quot;&gt;&lt;del&gt;SOLR-2718&lt;/del&gt;&lt;/a&gt; and came up after backporting that issue to branch_3x.&lt;br/&gt;
After that backport I get a SolrException.&lt;/p&gt;

&lt;p&gt;Jan 31, 2012 1:50:15 PM org.apache.solr.core.SolrCore initListeners&lt;br/&gt;
INFO: [] Added SolrEventListener for firstSearcher: org.apache.solr.core.QuerySenderListener{queries=[&lt;/p&gt;
{q=*:*,start=0,rows=10,spellcheck.build=true}
&lt;p&gt;, .....&lt;br/&gt;
Jan 31, 2012 2:00:10 PM org.apache.solr.common.SolrException log&lt;br/&gt;
SEVERE: org.apache.solr.common.SolrException: QueryResponseWriter init failure&lt;br/&gt;
    at org.apache.solr.core.SolrCore.initWriters(SolrCore.java:1499)&lt;br/&gt;
    at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:557)&lt;br/&gt;
    at org.apache.solr.core.CoreContainer.create(CoreContainer.java:466)&lt;br/&gt;
    at org.apache.solr.core.CoreContainer.load(CoreContainer.java:319)&lt;br/&gt;
... &lt;/p&gt;
</description>
                <environment></environment>
        <key id="12540692">SOLR-3084</key>
            <summary>default=&quot;true&quot; causes NPE -&gt; SolrException from QueryResponseWriter initWriters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="befehl">Bernd Fehling</assignee>
                                    <reporter username="befehl">Bernd Fehling</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Feb 2012 09:00:58 +0000</created>
                <updated>Fri, 10 May 2013 10:38:43 +0000</updated>
                            <resolved>Wed, 1 Feb 2012 21:15:59 +0000</resolved>
                                                    <fixVersion>3.6</fixVersion>
                    <fixVersion>4.0-ALPHA</fixVersion>
                                    <component>Response Writers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13197701" author="befehl" created="Wed, 1 Feb 2012 09:16:11 +0000"  >&lt;p&gt;It turned out that log.warn is always triggered, also for the first default queryResponseWriter.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;if(info.isDefault()){
  defaultResponseWriter = writer;
  if(defaultResponseWriter != null)
    log.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Multiple default queryResponseWriter registered ignoring: &quot;&lt;/span&gt; + old.getClass().getName());
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Solution is to place &quot;defaultResponseWriter = writer;&quot; after the if clause.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;if(info.isDefault()){
  if(defaultResponseWriter != null)
    log.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Multiple default queryResponseWriter registered ignoring: &quot;&lt;/span&gt; + old.getClass().getName());
  defaultResponseWriter = writer;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="13198117" author="hossman" created="Wed, 1 Feb 2012 20:31:39 +0000"  >&lt;p&gt;Bernd: I&apos;m not sure why you resolved this?  it definitely looks like a very annoying and serious bug that would burn anyone overriding the &quot;default&quot; responseWriter &amp;#8211; and not even in a way that would give them a useful error message&lt;/p&gt;

&lt;p&gt;the problem isn&apos;t just the order of the assignment as you fix in your patch, but also that:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;this check assumes &quot;old&quot; is non-null, which this check has no buisness assuming&lt;/li&gt;
	&lt;li&gt;that &quot;old&quot; is in some way a reflection of the duplicate &quot;defaults&quot; ... which is completely un-true.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13198127" author="hossman" created="Wed, 1 Feb 2012 20:46:22 +0000"  >&lt;p&gt;Updated patch to fix the check to not use &quot;old&quot; at all.&lt;/p&gt;

&lt;p&gt;also tweaked a test config so that &apos;default=&quot;true&quot;&apos; was used, making this failure extremely evident in tests (w/o this patch)&lt;/p&gt;</comment>
                            <comment id="13198159" author="hossman" created="Wed, 1 Feb 2012 21:15:59 +0000"  >&lt;p&gt;Thanks for reporting this and helping get to the bottom of it Bernd!&lt;/p&gt;

&lt;p&gt;Committed revision 1239316. - trunk&lt;br/&gt;
Committed revision 1239327. - 3x&lt;/p&gt;</comment>
                            <comment id="13198597" author="befehl" created="Thu, 2 Feb 2012 08:09:35 +0000"  >&lt;p&gt;Thanks a lot for checking my patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12512799" name="SOLR-3084.patch" size="1544" author="hossman" created="Wed, 1 Feb 2012 20:46:22 +0000"/>
                            <attachment id="12512735" name="SOLR-3084.patch" size="830" author="befehl" created="Wed, 1 Feb 2012 09:03:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226087</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03gs7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18152</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>