<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:12:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-8836] /update should return BAD REQUEST when invalid JSON provided</title>
                <link>https://issues.apache.org/jira/browse/SOLR-8836</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When a user provides invalid JSON to the /update endpoint, the request fails with a 500 (INTERNAL SERVER ERROR).  If the user looks at the response body, they&apos;ll see a message indicating that the provided JSON was invalid.  However, going from the status code alone, the failure is indistinguishable from a true server-error.  This is a bit misleading.  It would be nice if Solr instead returned a 400 (BAD REQUEST) status code when it detects invalid arguments.&lt;/p&gt;

&lt;p&gt;Reproduction Steps:&lt;br/&gt;
1.) bin/solr start -e cloud -noprompt&lt;br/&gt;
2.) curl -i -l -k -X POST -H &apos;Content-Type: application/json&apos; &apos;http://localhost:8983/solr/gettingstarted/update&apos; --data-binary &apos;}{&apos;&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12949657">SOLR-8836</key>
            <summary>/update should return BAD REQUEST when invalid JSON provided</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="anshum">Anshum Gupta</assignee>
                                    <reporter username="gerlowskija">Jason Gerlowski</reporter>
                        <labels>
                    </labels>
                <created>Sun, 13 Mar 2016 03:24:56 +0000</created>
                <updated>Mon, 9 May 2016 18:51:54 +0000</updated>
                            <resolved>Tue, 15 Mar 2016 19:16:48 +0000</resolved>
                                    <version>6.0</version>
                                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15192105" author="gerlowskija" created="Sun, 13 Mar 2016 03:33:43 +0000"  >&lt;p&gt;A simple patch demonstrating a fix for the issue.  With this fix, /update answers invalid JSON with the response:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[~/c/s/l/solr] $ curl -i -l -k -X POST -H &lt;span class=&quot;code-quote&quot;&gt;&apos;Content-Type: application/json&apos;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:7574/solr/gettingstarted/update&apos;&lt;/span&gt; --data-binary &lt;span class=&quot;code-quote&quot;&gt;&apos;}{&apos;&lt;/span&gt;
&lt;/span&gt;HTTP/1.1 400 Bad Request

{&lt;span class=&quot;code-quote&quot;&gt;&quot;responseHeader&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;status&quot;&lt;/span&gt;:400,&lt;span class=&quot;code-quote&quot;&gt;&quot;QTime&quot;&lt;/span&gt;:11},&lt;span class=&quot;code-quote&quot;&gt;&quot;error&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;metadata&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;error-class&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.solr.common.SolrException&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;root-error-class&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;org.noggit.JSONParser$ParseException&quot;&lt;/span&gt;],&lt;span class=&quot;code-quote&quot;&gt;&quot;msg&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;org.noggit.JSONParser$ParseException: JSON Parse Error: &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;=},position=0 BEFORE=&lt;span class=&quot;code-quote&quot;&gt;&apos;}&apos;&lt;/span&gt; AFTER=&lt;span class=&quot;code-quote&quot;&gt;&apos;{&apos;&lt;/span&gt;&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;code&quot;&lt;/span&gt;:400}}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This fixes the status code, but the response body is a little odd.  I&apos;m not quite sure where the &quot;metadata&quot;, &quot;error-class&quot;, &quot;root-error-class&quot; nesting comes from.  Still some details of Solr&apos;s error reporting that I&apos;m brushing up on; bit of a work-in-progress.&lt;/p&gt;</comment>
                            <comment id="15192507" author="gerlowskija" created="Sun, 13 Mar 2016 19:52:52 +0000"  >&lt;p&gt;Looking into Solr&apos;s error messages more, I think the error-message is pretty standard when SolrException is used.  So I&apos;m fine with it now.&lt;/p&gt;

&lt;p&gt;Latest patch adds a test, which ensures 400 is returned.  All tests pass locally.&lt;/p&gt;

&lt;p&gt;Patch should be ready for review if anyone has interest in seeing this change get in.&lt;/p&gt;</comment>
                            <comment id="15193418" author="anshumg" created="Mon, 14 Mar 2016 15:03:03 +0000"  >&lt;p&gt;Thanks Jason. &lt;br/&gt;
LGTM, I&apos;ll run the tests and commit.&lt;/p&gt;</comment>
                            <comment id="15195849" author="jira-bot" created="Tue, 15 Mar 2016 18:15:33 +0000"  >&lt;p&gt;Commit 30a77b73b603ba52a50da397aefc6f9a88f05732 in lucene-solr&apos;s branch refs/heads/master from anshum&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=30a77b7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=30a77b7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8836&quot; title=&quot;/update should return BAD REQUEST when invalid JSON provided&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8836&quot;&gt;&lt;del&gt;SOLR-8836&lt;/del&gt;&lt;/a&gt;: Return 400, and a SolrException when an invalid json is provided to the update handler instead of 500.&lt;/p&gt;</comment>
                            <comment id="15195953" author="jira-bot" created="Tue, 15 Mar 2016 18:50:32 +0000"  >&lt;p&gt;Commit 4deb4cd1bac4d18914164fccc3e377eb8f11a117 in lucene-solr&apos;s branch refs/heads/branch_6x from anshum&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=4deb4cd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=4deb4cd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8836&quot; title=&quot;/update should return BAD REQUEST when invalid JSON provided&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8836&quot;&gt;&lt;del&gt;SOLR-8836&lt;/del&gt;&lt;/a&gt;: Return 400, and a SolrException when an invalid json is provided to the update handler instead of 500.&lt;/p&gt;</comment>
                            <comment id="15196014" author="jira-bot" created="Tue, 15 Mar 2016 19:16:25 +0000"  >&lt;p&gt;Commit cd070d7b17955fc3cc10f013e9694946c5ce1c88 in lucene-solr&apos;s branch refs/heads/branch_6_0 from anshum&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=cd070d7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=cd070d7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8836&quot; title=&quot;/update should return BAD REQUEST when invalid JSON provided&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8836&quot;&gt;&lt;del&gt;SOLR-8836&lt;/del&gt;&lt;/a&gt;: Return 400, and a SolrException when an invalid json is provided to the update handler instead of 500.&lt;/p&gt;</comment>
                            <comment id="15196016" author="anshumg" created="Tue, 15 Mar 2016 19:16:48 +0000"  >&lt;p&gt;Thanks Jason.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12793214" name="SOLR-8836.patch" size="2807" author="gerlowskija" created="Sun, 13 Mar 2016 19:52:52 +0000"/>
                            <attachment id="12793180" name="SOLR-8836.patch" size="1393" author="gerlowskija" created="Sun, 13 Mar 2016 03:33:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2uk9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>