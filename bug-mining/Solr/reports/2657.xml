<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:08:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-7967] AddSchemaFieldsUpdateProcessorFactory does not check if the ConfigSet is immutable</title>
                <link>https://issues.apache.org/jira/browse/SOLR-7967</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7742&quot; title=&quot;Support for Immutable ConfigSets&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7742&quot;&gt;&lt;del&gt;SOLR-7742&lt;/del&gt;&lt;/a&gt; introduced Immutable ConfigSets.  There are checks added to SolrConfigHandler and SchemaHandler so that if a user tries to modify the SolrConfig or the Schema via either of these interfaces an error is returned if the ConfigSet is defined to be immutable.&lt;/p&gt;

&lt;p&gt;Updates to the schema made via the AddSchemaFieldsUpdateProcessorFactory are not checked in this way.  I&apos;m not certain this should be considered a bug.  A ConfigSet is defined by {SolrConfig, Schema, ConfigSetProperties}.  On one hand, you can argue that you are modifying the Schema, which is part of the ConfigSet, so the immutable check should apply. On the other hand, the SolrConfig (which defines the AddSchema...Factory} defines that it wants the Config to be updated, so if you view the ConfigSet in totality you could argue nothing is really changing. I&apos;d slightly lean towards adding the check, but could go either way.&lt;/p&gt;

&lt;p&gt;Other opinions?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12858477">SOLR-7967</key>
            <summary>AddSchemaFieldsUpdateProcessorFactory does not check if the ConfigSet is immutable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gchanan">Gregory Chanan</assignee>
                                    <reporter username="gchanan">Gregory Chanan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Aug 2015 00:30:26 +0000</created>
                <updated>Mon, 9 May 2016 18:47:49 +0000</updated>
                            <resolved>Thu, 8 Oct 2015 00:15:00 +0000</resolved>
                                    <version>5.3</version>
                    <version>6.0</version>
                                    <fixVersion>5.4</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14711686" author="hossman" created="Tue, 25 Aug 2015 17:57:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;...so if you view the ConfigSet in totality you could argue nothing is really changing. I&apos;d slightly lean towards adding the check, but could go either way.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not all that familiar with how Immutable ConfigSets work internally, or what the &quot;designed&quot; usecase / usage patterns are, but i think the right questions to ask are:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;what &lt;em&gt;might&lt;/em&gt; users reasonably want to do to in conjunction with (Immutable) ConfigSets and a data driven schema?&lt;/li&gt;
	&lt;li&gt;what, logically, should be the default behavior of (Immutable) ConfigSets and a data driven schema?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The answer(s) to the first question should all be &lt;em&gt;possible&lt;/em&gt; even if they require special configuration &amp;#8211; and or: if some conbinations of options XYZ give you errors telling you that the combination is invalid and needs to be changed to either XQZ or XYP to make sense and be usable.&lt;/p&gt;

&lt;p&gt;The answer to the second question should be the default behavior, w/o any special config.&lt;/p&gt;</comment>
                            <comment id="14711776" author="gchanan" created="Tue, 25 Aug 2015 18:53:04 +0000"  >&lt;p&gt;Thanks for the discussion Hoss Man, those questions were very helpful.&lt;/p&gt;

&lt;p&gt;At a high level, the use case is to provide an immutable configuration as a &quot;template&quot; for others to build their own configuration on top of.  This could be generic templates e.g. in a distribution or as a company/use case specific template.  In SolrCloud mode, this allows an administrator to provide these templates and in combination with a &quot;ConfigSet&quot; API (&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7789&quot; title=&quot;Introduce a ConfigSet management API at /admin/configs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7789&quot;&gt;&lt;del&gt;SOLR-7789&lt;/del&gt;&lt;/a&gt;), a collection administrator can create their own configuration without writing directly to ZooKeeper (which is problematic from a security perspective).&lt;/p&gt;

&lt;p&gt;Given that use case, I believe the answers to your questions are:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;what, logically, should be the default behavior of (Immutable) ConfigSets and a data driven schema?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Attempts to modify an immutable ConfigSet via a data driven schema should result in an error, since it is an attempt to modify an immutable / company sanctioned template.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;what might users reasonably want to do to in conjunction with (Immutable) ConfigSets and a data driven schema?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Users may want to base their configuration on a template and use a data driven schema to update their own configuration.  They can do this by creating their own non-immutable ConfigSet using the API (&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7789&quot; title=&quot;Introduce a ConfigSet management API at /admin/configs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7789&quot;&gt;&lt;del&gt;SOLR-7789&lt;/del&gt;&lt;/a&gt;) and using the data driven schema based on that template.&lt;/p&gt;</comment>
                            <comment id="14945883" author="gchanan" created="Tue, 6 Oct 2015 21:43:43 +0000"  >&lt;p&gt;Here&apos;s a patch.  It only does the immutable ConfigSet check if it&apos;s planning to actually add a new field.  Interestingly, that differs from the existing mutable schema check, which checks before looking at the existing fields.  So, if you had a not-mutable schema and an AddSchemaFieldsUpdateProcessorFactory you wouldn&apos;t be able to index any data, even data with all existing fields.  That&apos;s probably a pre-existing bug, but seems really minor.&lt;/p&gt;</comment>
                            <comment id="14945888" author="gchanan" created="Tue, 6 Oct 2015 21:46:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8134&quot; title=&quot;AddSchemaFieldsUpdateProcessorFactory throws immutable schema error even if no fields are added&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8134&quot;&gt;SOLR-8134&lt;/a&gt; for the mutable schema bug.&lt;/p&gt;</comment>
                            <comment id="14946113" author="gchanan" created="Wed, 7 Oct 2015 01:23:15 +0000"  >&lt;p&gt;Patch with some extra null checking to get the more invasive tests to pass.&lt;/p&gt;</comment>
                            <comment id="14947849" author="jira-bot" created="Thu, 8 Oct 2015 00:14:20 +0000"  >&lt;p&gt;Commit 1707423 from gchanan@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1707423&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1707423&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7967&quot; title=&quot;AddSchemaFieldsUpdateProcessorFactory does not check if the ConfigSet is immutable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7967&quot;&gt;&lt;del&gt;SOLR-7967&lt;/del&gt;&lt;/a&gt;: AddSchemaFieldsUpdateProcessorFactory does not check if the ConfigSet is immutable&lt;/p&gt;</comment>
                            <comment id="14947850" author="jira-bot" created="Thu, 8 Oct 2015 00:14:34 +0000"  >&lt;p&gt;Commit 1707424 from gchanan@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1707424&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1707424&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7967&quot; title=&quot;AddSchemaFieldsUpdateProcessorFactory does not check if the ConfigSet is immutable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7967&quot;&gt;&lt;del&gt;SOLR-7967&lt;/del&gt;&lt;/a&gt;: AddSchemaFieldsUpdateProcessorFactory does not check if the ConfigSet is immutable&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12841864">SOLR-7742</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12765311" name="SOLR-7967.patch" size="4203" author="gchanan" created="Wed, 7 Oct 2015 01:23:15 +0000"/>
                            <attachment id="12765267" name="SOLR-7967.patch" size="4166" author="gchanan" created="Tue, 6 Oct 2015 21:43:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jbev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>