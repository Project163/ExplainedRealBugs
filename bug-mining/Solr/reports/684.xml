<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:23:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-2669] SchemaField.calcProps has some backwards validation</title>
                <link>https://issues.apache.org/jira/browse/SOLR-2669</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2048&quot; title=&quot;Omit positions but keep termFreq&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-2048&quot;&gt;&lt;del&gt;LUCENE-2048&lt;/del&gt;&lt;/a&gt; drew my attention to SchemaField.calProps and made me realize that some of the validation checks in this method are backwards&lt;/p&gt;

&lt;p&gt;The check rmuir added in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2048&quot; title=&quot;Omit positions but keep termFreq&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-2048&quot;&gt;&lt;del&gt;LUCENE-2048&lt;/del&gt;&lt;/a&gt; seems to just bea straight up mistake...&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;omitTermFreqAndPosition=false, omitPositions=true&lt;/tt&gt; ... ERROR&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;omitTermFreqAndPosition=true, omitPositions=false&lt;/tt&gt; ... NO error but non-sense&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The following however are long standing oddities...&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;indexed=false omitNorms=true&lt;/tt&gt; ... ERROR&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;indexed=false omitTermFreqAndPositions=true&lt;/tt&gt; ... ERROR&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;indexed=false omitNorms=false&lt;/tt&gt; ... NO error but non-sense&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;indexed=false omitTermFreqAndPositions=false&lt;/tt&gt; ... NO error but non-sense&lt;/li&gt;
	&lt;li&gt;(omitPositions was added to the &quot;INDEX&quot; check and has similar problems)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I asked yonik about this in IRC, and he speculates that the reason this test started out that way is that it doesn&apos;t make any sense to ask for some index specific stuff to be omited if you have already said you don&apos;t want indexing at all.&lt;/p&gt;

&lt;p&gt;my counter point was that it doesn&apos;t &lt;b&gt;hurt&lt;/b&gt; to ask for some indexing metadata to be omited, but it certainly doesn&apos;t make sense to explicitly ask for any of that metadata to be left in if you asid you don&apos;t want any indexing.&lt;/p&gt;

&lt;p&gt;To draw an analogy: &quot;Please omit the dressing from my salad, and please don&apos;t bring me a salad&quot; is a redundant request, but it doesn&apos;t hurt anything.  &quot;Please make sure there is dressing on my salad, and please don&apos;t bring me a salad&quot; makes no sense at all &amp;#8211; if you don&apos;t want the salad, then why are asking for dressing on it?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12515062">SOLR-2669</key>
            <summary>SchemaField.calcProps has some backwards validation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Jul 2011 20:30:59 +0000</created>
                <updated>Fri, 16 Sep 2011 14:48:51 +0000</updated>
                            <resolved>Sun, 24 Jul 2011 22:46:53 +0000</resolved>
                                                    <fixVersion>3.4</fixVersion>
                    <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13069723" author="hossman" created="Fri, 22 Jul 2011 20:32:36 +0000"  >&lt;p&gt;patch that reverses these validation checks, with test config additions demonstrating the combinations that should work, and BadIndexSchemaTest additions that demonstrate the combinations that &lt;b&gt;should&lt;/b&gt; fail.&lt;/p&gt;</comment>
                            <comment id="13069919" author="rcmuir" created="Sat, 23 Jul 2011 08:38:16 +0000"  >&lt;blockquote&gt;
&lt;p&gt;To draw an analogy: &quot;Please omit the dressing from my salad, and please don&apos;t bring me a salad&quot; is a redundant request, but it doesn&apos;t hurt anything. &quot;Please make sure there is dressing on my salad, and please don&apos;t bring me a salad&quot; makes no sense at all &#8211; if you don&apos;t want the salad, then why are asking for dressing on it?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think this logic makes sense... the whole intention for the positions checks was to throw an error in the nonsense case (I tested, doesn&apos;t actually work at all in trunk right now)&lt;/p&gt;

&lt;p&gt;patch looks good, this stuff needed tests.&lt;/p&gt;</comment>
                            <comment id="13070241" author="hossman" created="Sun, 24 Jul 2011 20:17:34 +0000"  >&lt;p&gt;Thanks for the review rmuir&lt;/p&gt;

&lt;p&gt;Committed revision 1150478. - trunk&lt;/p&gt;

&lt;p&gt;Still working on backporting to 3x, i thought it was going to be straight forward but BadIndexSchemaTest is vastly diff on that branch because of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1846&quot; title=&quot;Remove support for (broken) abortOnConfigurationError&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1846&quot;&gt;&lt;del&gt;SOLR-1846&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(Poking around with this also made me realize that none of the validation Solr does accounts for inconsistencies between the fieldtype and the field, so i&apos;ve spun that off into &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2674&quot; title=&quot;Schema field validation does not look for inconsistencies between field and fieldType&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2674&quot;&gt;SOLR-2674&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="13070270" author="hossman" created="Sun, 24 Jul 2011 22:46:53 +0000"  >&lt;p&gt;Committed revision 1150510. - 3x&lt;/p&gt;</comment>
                            <comment id="13106205" author="rcmuir" created="Fri, 16 Sep 2011 14:48:51 +0000"  >&lt;p&gt;bulk close for 3.4&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12487474" name="SOLR-2669.patch" size="12932" author="hossman" created="Fri, 22 Jul 2011 20:32:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4882</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03jdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18571</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>