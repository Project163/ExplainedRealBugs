<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:56:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6426] SolrZkClient clean can fail due to a race with children nodes.</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6426</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description></description>
                <environment></environment>
        <key id="12736437">SOLR-6426</key>
            <summary>SolrZkClient clean can fail due to a race with children nodes.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="markrmiller@gmail.com">Mark Miller</reporter>
                        <labels>
                    </labels>
                <created>Sun, 24 Aug 2014 23:42:52 +0000</created>
                <updated>Mon, 9 May 2016 18:51:05 +0000</updated>
                            <resolved>Thu, 26 Feb 2015 11:46:33 +0000</resolved>
                                                    <fixVersion>4.10.4</fixVersion>
                    <fixVersion>5.0</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14108640" author="jira-bot" created="Mon, 25 Aug 2014 00:03:29 +0000"  >&lt;p&gt;Commit 1620245 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1620245&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1620245&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6426&quot; title=&quot;SolrZkClient clean can fail due to a race with children nodes.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6426&quot;&gt;&lt;del&gt;SOLR-6426&lt;/del&gt;&lt;/a&gt;: SolrZkClient clean can fail due to a race with children nodes.&lt;/p&gt;</comment>
                            <comment id="14108641" author="jira-bot" created="Mon, 25 Aug 2014 00:05:07 +0000"  >&lt;p&gt;Commit 1620246 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1620246&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1620246&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6426&quot; title=&quot;SolrZkClient clean can fail due to a race with children nodes.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6426&quot;&gt;&lt;del&gt;SOLR-6426&lt;/del&gt;&lt;/a&gt;: SolrZkClient clean can fail due to a race with children nodes.&lt;/p&gt;</comment>
                            <comment id="14157255" author="mewmewball" created="Thu, 2 Oct 2014 21:52:32 +0000"  >&lt;p&gt;Hey Mark, just took a look at this patch and there is a risk of stack overflow if children nodes are actively being added. Would you please comment on where you saw the race happen that necessitated this change? Is it better to eliminate that risk instead?&lt;/p&gt;</comment>
                            <comment id="14157354" author="markrmiller@gmail.com" created="Thu, 2 Oct 2014 22:57:11 +0000"  >&lt;p&gt;This should not normally happen in working Solr code, say nothing about a race with another client constantly adding nodes.&lt;/p&gt;

&lt;p&gt;I saw it happen in a test case or something - the reason it happens is unrelated - as a general client method, I don&apos;t think the method itself should randomly bail part way through depending on arbitrary timing.&lt;/p&gt;
</comment>
                            <comment id="14157361" author="markrmiller@gmail.com" created="Thu, 2 Oct 2014 23:00:40 +0000"  >&lt;p&gt;Also, keep in mind, this change does nothing about the risk of another client constantly adding nodes. That could race with this before and after. This is about trying to remove a node that has children - it looks like the node has no children, we try to remove it, boom it has a child. It doesn&apos;t affect a race off adding and removing children nodes. It just makes the method consistent in working how it was intended rather than this odd race fail you can get.&lt;/p&gt;

&lt;p&gt;That doesn&apos;t mean the clean method itself could not be re implemented or something, but that&apos;s another issue.&lt;/p&gt;</comment>
                            <comment id="14157445" author="mewmewball" created="Thu, 2 Oct 2014 23:46:49 +0000"  >&lt;p&gt;The only thing that I&apos;m worried with regarding to the racing clients is that before, this code will fail (which is what you&apos;re trying to fix here), but now there might be a risk of infinite recursion here causing stack overflow if it keeps coming back to this point and finding more children after it thinks it deleted all of them. In practice it probably won&apos;t happen, but it just feels a bit scary. Maybe that part can be made iterative instead (with a maximum bail-out number of tries)?&lt;/p&gt;</comment>
                            <comment id="14332889" author="anshumg" created="Mon, 23 Feb 2015 05:02:27 +0000"  >&lt;p&gt;Bulk close after 5.0 release.&lt;/p&gt;</comment>
                            <comment id="14338273" author="shalinmangar" created="Thu, 26 Feb 2015 11:45:17 +0000"  >&lt;p&gt;Reopening to backport to 4.10.4&lt;/p&gt;</comment>
                            <comment id="14338276" author="jira-bot" created="Thu, 26 Feb 2015 11:48:49 +0000"  >&lt;p&gt;Commit 1662426 from shalin@apache.org in branch &apos;dev/branches/lucene_solr_4_10&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1662426&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1662426&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6426&quot; title=&quot;SolrZkClient clean can fail due to a race with children nodes.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6426&quot;&gt;&lt;del&gt;SOLR-6426&lt;/del&gt;&lt;/a&gt;: SolrZkClient clean can fail due to a race with children nodes.&lt;/p&gt;</comment>
                            <comment id="14348920" author="mikemccand" created="Thu, 5 Mar 2015 15:36:30 +0000"  >&lt;p&gt;Bulk close for 4.10.4 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1za33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>