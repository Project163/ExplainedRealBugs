<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:47:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-3854] SolrCloud does not work with https</title>
                <link>https://issues.apache.org/jira/browse/SOLR-3854</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;There are a few places in current codebase that assume http is used. This prevents using https when running solr in cloud mode.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12608232">SOLR-3854</key>
            <summary>SolrCloud does not work with https</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="siren">Sami Siren</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Sep 2012 12:44:00 +0000</created>
                <updated>Wed, 18 Dec 2019 00:47:40 +0000</updated>
                            <resolved>Fri, 14 Feb 2014 17:20:14 +0000</resolved>
                                                    <fixVersion>4.7</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>7</votes>
                                    <watches>13</watches>
                                                                                                                <comments>
                            <comment id="13458652" author="siren" created="Wed, 19 Sep 2012 12:46:00 +0000"  >&lt;p&gt;Here&apos;s a patch against trunk that allows one to use https too.&lt;/p&gt;</comment>
                            <comment id="13496290" author="markrmiller@gmail.com" created="Tue, 13 Nov 2012 16:11:43 +0000"  >&lt;p&gt;this one ready Sami?&lt;/p&gt;</comment>
                            <comment id="13496294" author="siren" created="Tue, 13 Nov 2012 16:16:00 +0000"  >&lt;p&gt;I was planning to add some tests too, but got distracted with something else. I&apos;ll try to get to this again in near future.&lt;/p&gt;</comment>
                            <comment id="13535379" author="sdavids" created="Tue, 18 Dec 2012 21:53:19 +0000"  >&lt;p&gt;+1 We are running into this problem right now. Glad to see Sami&apos;s patch is adding the option to the solr.xml.&lt;/p&gt;</comment>
                            <comment id="13538348" author="hossman" created="Fri, 21 Dec 2012 19:47:04 +0000"  >&lt;p&gt;Updated Sami&apos;s patch to trunk to account for recent changes.&lt;/p&gt;

&lt;p&gt;Existing tests pass, but still no new tests using https.&lt;/p&gt;</comment>
                            <comment id="13541454" author="markrmiller@gmail.com" created="Mon, 31 Dec 2012 18:49:57 +0000"  >&lt;p&gt;Sami, Hossman, will you get this in shortly for 4.1 or should I push it to 4.2?&lt;/p&gt;</comment>
                            <comment id="13561070" author="alexey" created="Wed, 23 Jan 2013 20:37:49 +0000"  >&lt;p&gt;I&apos;ve uploaded another patch that I believe is less intrusive.&lt;/p&gt;

&lt;p&gt;It touches only two places:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;host property parsing in ZkController&lt;br/&gt;
host property supports passing a scheme/protocol already, it just has a tiny bug in the parsing code
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;&quot;ZkController&quot;&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;       Matcher m = URL_PREFIX.matcher(host);
-      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (m.matches()) {
-        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; prefix = m.group(1);
-        host = prefix + host;
-      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
+      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!m.matches()) {
         host = &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//&quot;&lt;/span&gt; + host;
&lt;/span&gt;       }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;I think Solr&apos;s distributed &lt;em&gt;shard&lt;/em&gt; paramater should support handling scheme/protocol as part of a shard address
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;&quot;HttpShardHandler&quot;&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;       &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i=0; i&amp;lt;urls.size(); i++) {
-        urls.set(i, httpShardHandlerFactory.scheme + urls.get(i));
+        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; url = urls.get(i);
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!URL_PREFIX.matcher(url).matches()) {
+          url = httpShardHandlerFactory.scheme + url;
+        }
+        urls.set(i, url);
       }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;With these two tiny fixes I&apos;ve been able to run SolrCloud in SSL mode. When you start a node you should pass &quot;-Dhost=&lt;a href=&quot;https://localhost&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://localhost&lt;/a&gt;&quot; parameter. Correct https addresses are saved in the Zk&apos;s cluster state, used in indexing in SolrCmdDistributor and passed to search handlers as a shard parameter. Am I missing something?&lt;/p&gt;</comment>
                            <comment id="13563935" author="markrmiller@gmail.com" created="Sun, 27 Jan 2013 21:25:32 +0000"  >&lt;p&gt;One comment:&lt;br/&gt;
It might be nice to add an option that create https addresses even when auto detecting the host.&lt;/p&gt;

&lt;p&gt;Otherwise, I have not looked closely enough to see how the two approaches differ. Sami, hossman?&lt;/p&gt;</comment>
                            <comment id="13566397" author="janhoy" created="Wed, 30 Jan 2013 11:51:58 +0000"  >&lt;p&gt;Have not reviewed in detail. Some use SSL + Basic Authentication. Can you comment on whether these two patches will allow BasicAuth, e.g. by passing -Dhost=&lt;a href=&quot;https://user:pass@localhost&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://user:pass@localhost&lt;/a&gt; ? What about certificate based auth?&lt;/p&gt;</comment>
                            <comment id="13568373" author="hossman" created="Fri, 1 Feb 2013 01:56:51 +0000"  >&lt;p&gt;I like that alexey&apos;s patch is a lot shorter, but i haven&apos;t had a chance to compare them closely enough to understand the pros/cons in terms of configurability.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;It might be nice to add an option that create https addresses even when auto detecting the host.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;maybe i&apos;m missing something, but instead of hardcoding a default of &quot;http&quot; in zkcontroller like alexey mentioned, couldn&apos;t that be done by using cc.getHttpShardHandlerFactory().schema as the default?&lt;/p&gt;

&lt;p&gt;In any case .. i&apos;m not sure that we can reliably make much progress until we can write test for this stuff &amp;#8211; and as a first step i put up a patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4394&quot; title=&quot;Add SSL tests and example configs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4394&quot;&gt;&lt;del&gt;SOLR-4394&lt;/del&gt;&lt;/a&gt; to get to the point where we have some simple client&amp;lt;&amp;#45;ssl&amp;#45;&amp;gt;solr  tests ... if we move forward on that, then we can take the next step of client&amp;lt;&amp;#45;ssl&amp;#45;&amp;gt;solrcloud&amp;lt;&amp;#45;ssl&amp;#45;&amp;gt;solrcloud tests&lt;/p&gt;</comment>
                            <comment id="13632041" author="samkass" created="Mon, 15 Apr 2013 19:03:02 +0000"  >&lt;p&gt;While Alexey&apos;s patch is admirably succinct, Sami&apos;s patch allows setting the protocol via the solr.xml file where all the other settings are stored, as well as getting rid of a bunch of arbitrary comparisons to the explicit &quot;http&quot; string, so seems preferable to me.&lt;/p&gt;</comment>
                            <comment id="13717450" author="steve_rowe" created="Tue, 23 Jul 2013 18:48:16 +0000"  >&lt;p&gt;Bulk move 4.4 issues to 4.5 and 5.0&lt;/p&gt;</comment>
                            <comment id="13857268" author="markrmiller@gmail.com" created="Fri, 27 Dec 2013 03:05:29 +0000"  >&lt;p&gt;1 from Alexey&apos;s approach has been committed. I&apos;m also going to commit 2 - I think this approach should work fine. That will fix the support that I kind of assumed would work way back win.&lt;/p&gt;

&lt;p&gt;Sami&apos;s first class support can then be finished or not at a later time.&lt;/p&gt;</comment>
                            <comment id="13857278" author="markrmiller@gmail.com" created="Fri, 27 Dec 2013 03:25:40 +0000"  >&lt;p&gt;Hmm...looking a little deeper, it&apos;s not too much more work to finish Sami&apos;s patch, and I think it&apos;s the right long term approach. We already have a spot to set the url scheme for http search requests - I think other http requests should respect that same scheme config.&lt;/p&gt;</comment>
                            <comment id="13857296" author="markrmiller@gmail.com" created="Fri, 27 Dec 2013 04:14:35 +0000"  >&lt;p&gt;First pass. I took Sami&apos;s URLUtils and went through and setup the rest as I thought made the most sense. Pretty similar to what Sami did but with trunk in mind.&lt;/p&gt;

&lt;p&gt;I&apos;d like to also stop storing the scheme as part of urls - but that doesn&apos;t have to be done in this issue I think. This just ignores the scheme for any address and uses the configured scheme. Better to also ignore the scheme when we first generate or accept the url.&lt;/p&gt;</comment>
                            <comment id="13888741" author="sdavids" created="Sat, 1 Feb 2014 21:19:03 +0000"  >&lt;p&gt;Created a patch that includes a test that runs the &quot;BasicDistributedZkTest&quot; in SSL mode. While creating the test there were a couple of places that were causing issues if the wrong scheme was in zookeeper, so I added Sami&apos;s &quot;hostProtocol&quot; back in to get the test to pass.&lt;/p&gt;</comment>
                            <comment id="13888779" author="markrmiller@gmail.com" created="Sat, 1 Feb 2014 23:49:35 +0000"  >&lt;p&gt;Thanks! I&apos;ll review this soon.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;While creating the test there were a couple of places that were causing issues if the wrong scheme was in zookeeper, so I added Sami&apos;s &quot;hostProtocol&quot; back &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think we may just want to track that down. Personally, I don&apos;t really like the idea of having to set SSL twice - once for updates and once for searches. I don&apos;t really see the use case, and it seems more complicated than necessary. I think it makes sense to simply have one place to set the url scheme for distributed requests.&lt;/p&gt;

&lt;p&gt;It also would have been nice to leave the scheme out of ZooKeeper from the beginning, but I think that can be a later improvement.&lt;/p&gt;</comment>
                            <comment id="13888821" author="sdavids" created="Sun, 2 Feb 2014 04:44:26 +0000"  >&lt;p&gt;I believe the RecoveryStrategy was complaining (among others) as it reads the URL directly from ZooKeeper:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; leaderBaseUrl = leaderprops.getStr(ZkStateReader.BASE_URL_PROP);
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; leaderCoreName = leaderprops.getStr(ZkStateReader.CORE_NAME_PROP);

&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; leaderUrl = ZkCoreNodeProps.getCoreUrl(leaderBaseUrl, leaderCoreName);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This same concept is in CloudSolrServer:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ZkCoreNodeProps zkProps = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZkCoreNodeProps(leader);
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; url = zkProps.getBaseUrl() + &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; + col.getName();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;CloudSolrServer would need to be updated as well to allow a configurable URL scheme as there isn&apos;t a configured HttpShardHandler to grab the value.&lt;/p&gt;

&lt;p&gt;I believe it is somewhat reasonable to have each node report the scheme that is able to be used to connect to that specific server, more so for external clients that would like to use the base_url value as reported in zookeeper. Though I do see why needing to configure the url scheme in two different locations isn&apos;t optimal, I think it is a little strange that HttpShardHandler throws away the scheme of all passed URLs and inserts it&apos;s scheme. How about the HttpShardHandler not strip the schemes off unless a scheme was &lt;b&gt;specifically&lt;/b&gt; configured, if that was the case then only the &quot;hostProtocol&quot; would need to be configured.&lt;/p&gt;</comment>
                            <comment id="13888825" author="markrmiller@gmail.com" created="Sun, 2 Feb 2014 05:11:16 +0000"  >&lt;p&gt;That sounds reasonable.&lt;/p&gt;

&lt;p&gt;I think hostProtocol is the wrong name though? &lt;a href=&quot;http://en.wikipedia.org/wiki/URI_scheme&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://en.wikipedia.org/wiki/URI_scheme&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13889087" author="sdavids" created="Sun, 2 Feb 2014 22:26:43 +0000"  >&lt;p&gt;Update the patch with the following changes:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;hostProtocol has been changed to hostUrlScheme&lt;/li&gt;
	&lt;li&gt;No longer need to specify the &quot;urlScheme&quot; on the HttpShardHandlerFactory. The scheme is only stripped/replaced if that value is specifically configured and SolrCloud passes the configured base_url value with the proper http/https scheme.&lt;/li&gt;
	&lt;li&gt;Added a test that runs the CloudSolrServerTest in SSL mode&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;There appears to be a few other places that is still hard-coding a scheme:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;SolrZkClient.getBaseUrlForNodeName(nodeName)&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;...
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//&quot;&lt;/span&gt; + hostAndPort + (path.isEmpty() ? &lt;span class=&quot;code-quote&quot;&gt;&quot;&quot; : (&quot;&lt;/span&gt;/&quot; + path));&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;getBaseUrlForNodeName is exclusively used by the OverseerCollectionProcessor.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;CloudSolrServer.request(request)&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;...
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (request.getPath().equals(&lt;span class=&quot;code-quote&quot;&gt;&quot;/admin/collections&quot;&lt;/span&gt;)
        || request.getPath().equals(&lt;span class=&quot;code-quote&quot;&gt;&quot;/admin/cores&quot;&lt;/span&gt;)) {
      Set&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; liveNodes = clusterState.getLiveNodes();
      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; liveNode : liveNodes) {
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; splitPointBetweenHostPortAndContext = liveNode.indexOf(&lt;span class=&quot;code-quote&quot;&gt;&quot;_&quot;&lt;/span&gt;);
        theUrlList.add(&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//&quot;&lt;/span&gt;
&lt;/span&gt;            + liveNode.substring(0, splitPointBetweenHostPortAndContext)
            + &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;
            + URLDecoder.decode(liveNode, &lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;).substring(
                splitPointBetweenHostPortAndContext + 1));
      }
    }
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Not positive how those two instances should be handled as it isn&apos;t dealing with a specific core, but the server in general.&lt;/p&gt;</comment>
                            <comment id="13890977" author="ehatcher" created="Tue, 4 Feb 2014 18:29:49 +0000"  >&lt;p&gt;Steve - is your latest patch for trunk or branch_4x or does it matter?&lt;/p&gt;

&lt;p&gt;Seems to apply ok on trunks, but with offsets:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ patch -p0 &amp;lt; SOLR-3854.patch 
patching file solr/core/src/java/org/apache/solr/client/solrj/embedded/JettySolrRunner.java
patching file solr/core/src/java/org/apache/solr/cloud/ElectionContext.java
patching file solr/core/src/java/org/apache/solr/cloud/OverseerCollectionProcessor.java
Hunk #1 succeeded at 511 (offset 24 lines).
Hunk #2 succeeded at 766 (offset 24 lines).
Hunk #3 succeeded at 1511 (offset 24 lines).
Hunk #4 succeeded at 1646 (offset 24 lines).
Hunk #5 succeeded at 1743 (offset 24 lines).
patching file solr/core/src/java/org/apache/solr/cloud/SyncStrategy.java
patching file solr/core/src/java/org/apache/solr/cloud/ZkController.java
patching file solr/core/src/java/org/apache/solr/core/ConfigSolr.java
patching file solr/core/src/java/org/apache/solr/core/ConfigSolrXml.java
patching file solr/core/src/java/org/apache/solr/core/ConfigSolrXmlOld.java
patching file solr/core/src/java/org/apache/solr/core/ZkContainer.java
patching file solr/core/src/java/org/apache/solr/handler/admin/CoreAdminHandler.java
patching file solr/core/src/java/org/apache/solr/handler/component/HttpShardHandler.java
patching file solr/core/src/java/org/apache/solr/handler/component/HttpShardHandlerFactory.java
patching file solr/core/src/java/org/apache/solr/update/PeerSync.java
patching file solr/core/src/test/org/apache/solr/cloud/BasicDistributedSSLZkTest.java
patching file solr/core/src/test/org/apache/solr/cloud/BasicDistributedZkTest.java
patching file solr/core/src/test/org/apache/solr/cloud/ZkControllerTest.java
patching file solr/core/src/test/org/apache/solr/core/TestSolrXml.java
patching file solr/core/src/test-files/solr/solr-50-all.xml
patching file solr/core/src/test-files/solr/solr.xml
patching file solr/solrj/src/java/org/apache/solr/common/util/URLUtil.java
patching file solr/solrj/src/test/org/apache/solr/client/solrj/impl/CloudSolrServerSSLTest.java
patching file solr/solrj/src/test/org/apache/solr/common/util/URLUtilTest.java
patching file solr/solrj/src/test-files/solrj/solr/solr.xml
patching file solr/test-framework/src/java/org/apache/solr/BaseDistributedSearchTestCase.java
patching file solr/test-framework/src/java/org/apache/solr/cloud/AbstractFullDistribZkTestBase.java
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but reports some failures on branch_4x:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ patch -p0 &amp;lt; SOLR-3854.patch 
patching file solr/core/src/java/org/apache/solr/client/solrj/embedded/JettySolrRunner.java
patching file solr/core/src/java/org/apache/solr/cloud/ElectionContext.java
patching file solr/core/src/java/org/apache/solr/cloud/OverseerCollectionProcessor.java
Hunk #1 succeeded at 511 (offset 24 lines).
Hunk #2 succeeded at 766 (offset 24 lines).
Hunk #3 succeeded at 1511 (offset 24 lines).
Hunk #4 succeeded at 1646 (offset 24 lines).
Hunk #5 succeeded at 1743 (offset 24 lines).
patching file solr/core/src/java/org/apache/solr/cloud/SyncStrategy.java
patching file solr/core/src/java/org/apache/solr/cloud/ZkController.java
patching file solr/core/src/java/org/apache/solr/core/ConfigSolr.java
Hunk #1 succeeded at 135 (offset 4 lines).
Hunk #2 succeeded at 239 (offset 4 lines).
patching file solr/core/src/java/org/apache/solr/core/ConfigSolrXml.java
patching file solr/core/src/java/org/apache/solr/core/ConfigSolrXmlOld.java
Hunk #1 succeeded at 149 (offset -2 lines).
patching file solr/core/src/java/org/apache/solr/core/ZkContainer.java
Hunk #1 FAILED at 65.
Hunk #2 succeeded at 155 (offset 21 lines).
1 out of 2 hunks FAILED -- saving rejects to file solr/core/src/java/org/apache/solr/core/ZkContainer.java.rej
patching file solr/core/src/java/org/apache/solr/handler/admin/CoreAdminHandler.java
patching file solr/core/src/java/org/apache/solr/handler/component/HttpShardHandler.java
patching file solr/core/src/java/org/apache/solr/handler/component/HttpShardHandlerFactory.java
patching file solr/core/src/java/org/apache/solr/update/PeerSync.java
patching file solr/core/src/test/org/apache/solr/cloud/BasicDistributedSSLZkTest.java
patching file solr/core/src/test/org/apache/solr/cloud/BasicDistributedZkTest.java
patching file solr/core/src/test/org/apache/solr/cloud/ZkControllerTest.java
patching file solr/core/src/test/org/apache/solr/core/TestSolrXml.java
patching file solr/core/src/test-files/solr/solr-50-all.xml
patching file solr/core/src/test-files/solr/solr.xml
patching file solr/solrj/src/java/org/apache/solr/common/util/URLUtil.java
patching file solr/solrj/src/test/org/apache/solr/client/solrj/impl/CloudSolrServerSSLTest.java
patching file solr/solrj/src/test/org/apache/solr/common/util/URLUtilTest.java
patching file solr/solrj/src/test-files/solrj/solr/solr.xml
patching file solr/test-framework/src/java/org/apache/solr/BaseDistributedSearchTestCase.java
patching file solr/test-framework/src/java/org/apache/solr/cloud/AbstractFullDistribZkTestBase.java
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Am I doing something wrong or in the wrong place?  I&apos;m admittedly little rusty/unfamiliar with this fast moving (SolrCloud distrib testing) area lately.&lt;/p&gt;</comment>
                            <comment id="13890992" author="sdavids" created="Tue, 4 Feb 2014 18:43:14 +0000"  >&lt;p&gt;The latest patch was for the trunk.&lt;/p&gt;</comment>
                            <comment id="13891278" author="ehatcher" created="Tue, 4 Feb 2014 21:57:41 +0000"  >&lt;p&gt;Applying that patch to a clean trunk checkout, I&apos;m getting test failures (&quot;ant test&quot; from the solr/ subdirectory):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   [junit4] Tests with failures (first 10 out of 48):
   [junit4]   - org.apache.solr.handler.admin.ShowFileRequestHandlerTest.test404ViaHttp
   [junit4]   - org.apache.solr.handler.admin.ShowFileRequestHandlerTest.testGetRawFile
   [junit4]   - org.apache.solr.handler.admin.ShowFileRequestHandlerTest.testDirList
   [junit4]   - org.apache.solr.cloud.OverseerTest.testOverseerFailure
   [junit4]   - org.apache.solr.cloud.BasicDistributedSSLZkTest.testDistribSearch
   [junit4]   - org.apache.solr.update.processor.AddSchemaFieldsUpdateProcessorFactoryTest.testSingleField
   [junit4]   - org.apache.solr.update.processor.AddSchemaFieldsUpdateProcessorFactoryTest.testSingleFieldRoundTrip
   [junit4]   - org.apache.solr.update.processor.AddSchemaFieldsUpdateProcessorFactoryTest.testSingleFieldDefaultFieldTypeRoundTrip
   [junit4]   - org.apache.solr.update.processor.AddSchemaFieldsUpdateProcessorFactoryTest.testMultipleFieldsRoundTrip
   [junit4]   - org.apache.solr.update.processor.AddSchemaFieldsUpdateProcessorFactoryTest.testParseAndAddMultipleFieldsRoundTrip
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I can get the, hopefully relevant details in case that&apos;s worthwhile.  All runs clean for others? &lt;/p&gt;</comment>
                            <comment id="13891294" author="sdavids" created="Tue, 4 Feb 2014 22:14:30 +0000"  >&lt;p&gt;I was running the tests from within Eclipse without problems, will try to run from ant later this evening. Happen to know if there are any gotchas that you need to take into account between the two?&lt;/p&gt;</comment>
                            <comment id="13891600" author="sdavids" created="Wed, 5 Feb 2014 01:58:09 +0000"  >&lt;p&gt;After running the test suite there appears to be some inconsistencies between test runs.&lt;/p&gt;

&lt;p&gt;The first run resulted in 7 failed tests...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;ant -Dtests.jvms=8 test&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4] Tests with failures:
   [junit4]   - org.apache.solr.analytics.expression.ExpressionTest.powerTest
   [junit4]   - org.apache.solr.analytics.expression.ExpressionTest.absoluteValueTest
   [junit4]   - org.apache.solr.analytics.expression.ExpressionTest.divideTest
   [junit4]   - org.apache.solr.analytics.expression.ExpressionTest.multiplyTest
   [junit4]   - org.apache.solr.analytics.expression.ExpressionTest.negateTest
   [junit4]   - org.apache.solr.analytics.expression.ExpressionTest.addTest
   [junit4]   - org.apache.solr.cloud.BasicDistributedSSLZkTest.testDistribSearch
   [junit4] 
   [junit4] 
   [junit4] JVM J0:     2.60 ..   692.15 =   689.55s
   [junit4] JVM J1:     2.12 ..   704.03 =   701.91s
   [junit4] JVM J2:     2.60 ..   692.29 =   689.69s
   [junit4] JVM J3:     2.35 ..   692.78 =   690.43s
   [junit4] JVM J4:     2.12 ..   693.73 =   691.62s
   [junit4] JVM J5:     2.35 ..   693.26 =   690.92s
   [junit4] JVM J6:     2.60 ..   696.68 =   694.08s
   [junit4] JVM J7:     2.35 ..   691.85 =   689.50s
   [junit4] Execution time total: 11 minutes 44 seconds
   [junit4] Tests summary: 366 suites, 1591 tests, 7 failures, 27 ignored (14 assumptions)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Tried it again and 3 tests failed...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;ant -Dtests.jvms=8 test&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4] Tests with failures:
   [junit4]   - org.apache.solr.update.SoftAutoCommitTest.testSoftAndHardCommitMaxTimeMixedAdds
   [junit4]   - org.apache.solr.cloud.OverseerRolesTest.testDistribSearch
   [junit4]   - org.apache.solr.cloud.BasicDistributedSSLZkTest.testDistribSearch
   [junit4] 
   [junit4] 
   [junit4] JVM J0:     2.35 ..   704.78 =   702.43s
   [junit4] JVM J1:     2.35 ..   704.96 =   702.61s
   [junit4] JVM J2:     2.37 ..   704.79 =   702.42s
   [junit4] JVM J3:     2.35 ..   705.01 =   702.66s
   [junit4] JVM J4:     2.35 ..   704.87 =   702.52s
   [junit4] JVM J5:     2.35 ..   766.99 =   764.65s
   [junit4] JVM J6:     2.37 ..   705.05 =   702.68s
   [junit4] JVM J7:     2.59 ..   704.88 =   702.28s
   [junit4] Execution time total: 12 minutes 47 seconds
   [junit4] Tests summary: 366 suites, 1591 tests, 1 error, 2 failures, 26 ignored (13 assumptions)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Decided to isolate just running the SolrCloud test package and all tests passed...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;ant -Dtests.jvms=8 -Dtests.class=org.apache.solr.cloud.* test&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4] JVM J0:     2.22 ..   352.21 =   349.99s
   [junit4] JVM J1:     2.23 ..   371.36 =   369.13s
   [junit4] JVM J2:     2.22 ..   351.94 =   349.72s
   [junit4] JVM J3:     2.22 ..   351.69 =   349.47s
   [junit4] JVM J4:     2.48 ..   356.82 =   354.34s
   [junit4] JVM J5:     2.22 ..   352.47 =   350.25s
   [junit4] JVM J6:     2.22 ..   353.56 =   351.34s
   [junit4] JVM J7:     2.22 ..   384.37 =   382.15s
   [junit4] Execution time total: 6 minutes 24 seconds
   [junit4] Tests summary: 52 suites, 102 tests, 8 ignored (7 assumptions)
     [echo] 5 slowest tests:
[junit4:tophints] 237.14s | org.apache.solr.cloud.ChaosMonkeyNothingIsSafeTest
[junit4:tophints] 192.24s | org.apache.solr.cloud.BasicDistributedSSLZkTest
[junit4:tophints] 179.70s | org.apache.solr.cloud.DistribCursorPagingTest
[junit4:tophints] 179.07s | org.apache.solr.cloud.BasicDistributedZkTest
[junit4:tophints] 161.44s | org.apache.solr.TestRandomFaceting
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Anyone have ideas why there are inconsistencies between test runs?&lt;/p&gt;</comment>
                            <comment id="13891655" author="markrmiller@gmail.com" created="Wed, 5 Feb 2014 03:21:07 +0000"  >&lt;p&gt;Most of those are known flakey tests &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13891868" author="sdavids" created="Wed, 5 Feb 2014 07:01:58 +0000"  >&lt;p&gt;New patch for the trunk which allows clients to set a &quot;urlScheme&quot; in the recently created &quot;/clusterprops.json&quot; file (&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5610&quot; title=&quot;Support cluster-wide properties with an API called CLUSTERPROP&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5610&quot;&gt;&lt;del&gt;SOLR-5610&lt;/del&gt;&lt;/a&gt;). This allows the OverseerCollectionProcessor &amp;amp; CloudSolrServer to build the proper schemed url given a plain node name outside of the knowledge of each individual core&apos;s urlScheme configuration. The functionality enables admin functionality to manipulate the cluster: create/delete/split/etc. Those were the last holdouts that were hard coding a url scheme.&lt;/p&gt;</comment>
                            <comment id="13892130" author="sdavids" created="Wed, 5 Feb 2014 14:10:10 +0000"  >&lt;p&gt;Just thinking about this a little bit more, if the &quot;urlScheme&quot; is defined in the clusterprops.json file then we can drop the &quot;urlScheme&quot; configuration in the solr.xml - whatever is defined in the clusterprops is applied to all cores on all servers within the cluster. This may make configuration a bit easier but at the potential loss of flexibility, is there a use case where someone only wants to run https in a certain core or certain machines within the cluster (not all). Alternatively, we can use the value defined in the cluster props as the default value if no urlScheme is defined specifically on that core (if not specified anywhere default to http). Just a few thoughts...&lt;/p&gt;</comment>
                            <comment id="13893051" author="markrmiller@gmail.com" created="Thu, 6 Feb 2014 05:16:10 +0000"  >&lt;p&gt;That all sounds reasonable to me...&lt;/p&gt;</comment>
                            <comment id="13893055" author="sdavids" created="Thu, 6 Feb 2014 05:20:07 +0000"  >&lt;p&gt;Updated patch from trunk. Chatted with Mark and decided to remove the &quot;hostUrlScheme&quot; from the solr.xml in favor of just setting the &quot;urlScheme&quot; property in the clusterprops.json file.&lt;/p&gt;</comment>
                            <comment id="13894084" author="markrmiller@gmail.com" created="Fri, 7 Feb 2014 01:30:36 +0000"  >&lt;p&gt;Thanks Steve - I started looking at this last night and have done a bit more work early this morning. I&apos;m tweaking the tests a little to get some more coverage, but I think things look good overall.&lt;/p&gt;</comment>
                            <comment id="13894090" author="sdavids" created="Fri, 7 Feb 2014 01:37:01 +0000"  >&lt;p&gt;Thanks, let me know if you need a hand. I was also thinking that the following test should be added to verify the scheme:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void testBaseUrlHttpsScheme() {
    List&amp;lt;Replica&amp;gt; replicas = getZkReplicas();
    assertFalse(&lt;span class=&quot;code-quote&quot;&gt;&quot;No replicas found in ZooKeeper&quot;&lt;/span&gt;, replicas.isEmpty());
    
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(Replica replica : replicas) {
      &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; baseUrl = (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;) replica.get(ZkStateReader.BASE_URL_PROP);
      assertTrue(baseUrl + &lt;span class=&quot;code-quote&quot;&gt;&quot; didn&apos;t begin with a https url scheme&quot;&lt;/span&gt;, StringUtils.startsWith(baseUrl, &lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//&quot;&lt;/span&gt;));
&lt;/span&gt;      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        URL url = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URL(baseUrl);
        assertNotNull(&lt;span class=&quot;code-quote&quot;&gt;&quot;No path can be found &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &quot;&lt;/span&gt; + replica.getNodeName(), url.getPath());
      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {
        fail(replica.getNodeName() + &lt;span class=&quot;code-quote&quot;&gt;&quot; failed to build a proper URL [&quot;&lt;/span&gt; + baseUrl + &lt;span class=&quot;code-quote&quot;&gt;&quot;]&quot;&lt;/span&gt;);
      }
    }
  }
  
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; List&amp;lt;Replica&amp;gt; getZkReplicas() {
    List&amp;lt;Replica&amp;gt; replicas = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;Replica&amp;gt;();
    ClusterState clusterState = cloudClient.getZkStateReader().getClusterState();
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; collection : clusterState.getCollections()) {
      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(Slice slice : clusterState.getSlicesMap(collection).values()) {
        replicas.addAll(slice.getReplicas());
      }
    }
    
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; replicas;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13894095" author="markrmiller@gmail.com" created="Fri, 7 Feb 2014 01:49:23 +0000"  >&lt;p&gt;Hmm...it seems like we really don&apos;t want to put the scheme in zk as part of the base url - if you want to turn things on and off, it won&apos;t respect that anyway.&lt;/p&gt;</comment>
                            <comment id="13894099" author="sdavids" created="Fri, 7 Feb 2014 01:55:53 +0000"  >&lt;p&gt;True, it will only be respected on a server restart. So if you wanted to go from http -&amp;gt; https you would need to update the clusterprops.json then restart all of your nodes to pick up the new configuration. Although, if the scheme was stored as apart of either the HttpShardHandler or in the solr.xml a restart would be required as well. I don&apos;t think people will be flipping SSL on/off, more of a global set it and forget it property.&lt;/p&gt;</comment>
                            <comment id="13894139" author="markrmiller@gmail.com" created="Fri, 7 Feb 2014 02:47:39 +0000"  >&lt;p&gt;Server restart is fine - I had it in my head we didn&apos;t regenerate the url in zk on every startup - but its only coreNodeName that is not generated. Nevermind.&lt;/p&gt;</comment>
                            <comment id="13894214" author="markrmiller@gmail.com" created="Fri, 7 Feb 2014 05:37:07 +0000"  >&lt;p&gt;So I looked at pulling the new ssl test code into AbstractFullDistribZkTestBase. Most tests should just work with this, and a couple that explicitly use http or something just need a little getter. Then, rather than run this one test and add the extra test time, like a dozen tests can randomly run with ssl or not.&lt;/p&gt;

&lt;p&gt;The problem is that it seems to all work fine running tests one at a time in eclipse, but running them with ant test has all kinds of fails. I have not figured out why yet. I&apos;ve tried a few things, but everything looks like it should clean up properly (the latest patch was missing clearing the system properties it set in teardown or afterclass). Somehow the tests are interacting with each other, or they don&apos;t work when run by ant (there are some differences unless you pass security managers and what not via your ide).&lt;/p&gt;</comment>
                            <comment id="13894218" author="markrmiller@gmail.com" created="Fri, 7 Feb 2014 05:46:39 +0000"  >&lt;p&gt;The error I see is:   Caused by: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)&lt;/p&gt;</comment>
                            <comment id="13895618" author="sdavids" created="Sat, 8 Feb 2014 16:19:41 +0000"  >&lt;p&gt;Fixed the majority of the SSLExceptions by configuring our own HttpClientConfigurer that doesn&apos;t complain when it encounters a self-signed cert via the TrustSelfSignedStrategy. There is one more place that complains in the SolrDispatchFilter.remoteQuery(...) method that doesn&apos;t use HttpClient (uses standard java.net to establish a connection). We should update that code to go ahead and create an HttpClient instance via HttpClientUtil.createClient(...) which will take care of the last remaining SSLExceptions.&lt;/p&gt;</comment>
                            <comment id="13895632" author="markrmiller@gmail.com" created="Sat, 8 Feb 2014 17:11:00 +0000"  >&lt;p&gt;Oh sweet, thanks!&lt;/p&gt;</comment>
                            <comment id="13895633" author="markrmiller@gmail.com" created="Sat, 8 Feb 2014 17:11:57 +0000"  >&lt;blockquote&gt;&lt;p&gt;We should update that code to go ahead and create an HttpClient instance via HttpClientUtil.createClient(...) which will take care of the last remaining SSLExceptions.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5700&quot; title=&quot;Improve error handling of remote queries (proxied requests)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5700&quot;&gt;&lt;del&gt;SOLR-5700&lt;/del&gt;&lt;/a&gt;: Improve error handling of remote queries (proxied requests) &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13895764" author="sdavids" created="Sat, 8 Feb 2014 23:01:12 +0000"  >&lt;p&gt;Attached a new patch that fixes the BasicDistributedZk2Test (was using java.net instead of using HttpClient). Also, with the &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5700&quot; title=&quot;Improve error handling of remote queries (proxied requests)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5700&quot;&gt;&lt;del&gt;SOLR-5700&lt;/del&gt;&lt;/a&gt; patch applied (left separate) it fixed the other broken test with SSLExceptions.&lt;/p&gt;</comment>
                            <comment id="13895793" author="markrmiller@gmail.com" created="Sun, 9 Feb 2014 01:19:46 +0000"  >&lt;p&gt;Thanks Steve! I&apos;m seeing a similar fail as before in an unrelated CacheHeaderTest - I&apos;ve stopped there. Perhaps a test clean up issue? I&apos;m headed out for a bit, but I&apos;ll take a look tomorrow.&lt;/p&gt;</comment>
                            <comment id="13895797" author="markrmiller@gmail.com" created="Sun, 9 Feb 2014 01:31:42 +0000"  >&lt;p&gt;Do we clean up the HttpClientConfigurer after each test so that the next test in that jvm gets as clean env? Or is there something else to clean up?&lt;/p&gt;</comment>
                            <comment id="13895802" author="markrmiller@gmail.com" created="Sun, 9 Feb 2014 01:37:09 +0000"  >&lt;p&gt;I see the configurer clean up in teardown. I&apos;m not sure what I&apos;m seeing. My guess is that you don&apos;t see it because of test ordering (I run 8 test jvms in parallel and the default is much lower). I&apos;ll dig in tomorrow if you don&apos;t get to it first.&lt;/p&gt;</comment>
                            <comment id="13895836" author="sdavids" created="Sun, 9 Feb 2014 05:50:38 +0000"  >&lt;p&gt;Did you apply the SolrDispatchFilter changes from the patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5700&quot; title=&quot;Improve error handling of remote queries (proxied requests)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5700&quot;&gt;&lt;del&gt;SOLR-5700&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="13895917" author="markrmiller@gmail.com" created="Sun, 9 Feb 2014 16:06:41 +0000"  >&lt;p&gt;Yeah, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5700&quot; title=&quot;Improve error handling of remote queries (proxied requests)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5700&quot;&gt;&lt;del&gt;SOLR-5700&lt;/del&gt;&lt;/a&gt; has been committed and is part of what I&apos;m testing. Still seeing a lot of fails. Taking a look.&lt;/p&gt;</comment>
                            <comment id="13895920" author="sdavids" created="Sun, 9 Feb 2014 16:30:02 +0000"  >&lt;p&gt;Oh, it could be because the extra call to &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;initSSLConfig(sslConfig, keystorePath);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; has been removed in SolrJettyTestBase.getSSLConfig() which has now turned on SSL for tests that previously weren&apos;t configured to run SSL since the initSSL method sets &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;sslConfig.useSsl = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
sslConfig.clientAuth = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13895926" author="markrmiller@gmail.com" created="Sun, 9 Feb 2014 16:45:36 +0000"  >&lt;p&gt;Yeah, I had pulled that out in the last patch I put up because it looked like a test bug, tossing out the randomized settings.&lt;/p&gt;</comment>
                            <comment id="13895930" author="markrmiller@gmail.com" created="Sun, 9 Feb 2014 17:34:17 +0000"  >&lt;p&gt;I&apos;m working through each of them. I&apos;ll be done shortly I think.&lt;/p&gt;</comment>
                            <comment id="13896085" author="jira-bot" created="Sun, 9 Feb 2014 22:39:50 +0000"  >&lt;p&gt;Commit 1566456 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1566456&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1566456&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt;: SSL support for SolrCloud&lt;/p&gt;</comment>
                            <comment id="13896086" author="markrmiller@gmail.com" created="Sun, 9 Feb 2014 22:42:47 +0000"  >&lt;p&gt;I just committed an initial pass to trunk. Since we are just working out tests here, it will be easier to collaborate this way - patch is getting unwieldy.&lt;/p&gt;

&lt;p&gt;The latest has SSL working for almost all tests randomly, if possible. Some tests are excluded for various reasons. It&apos;s a huge expansion in our coverage though.&lt;/p&gt;

&lt;p&gt;Currently, we don&apos;t use the client auth setting. Perhaps that can be improved by someone that understands it better than I. I&apos;d have to dig first.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sdavids&quot; class=&quot;user-hover&quot; rel=&quot;sdavids&quot;&gt;sdavids&lt;/a&gt;, I&apos;ll leave this open in the case you have any further patches in you. Likewise, let me know if everything looks okay to you.&lt;/p&gt;</comment>
                            <comment id="13896087" author="markrmiller@gmail.com" created="Sun, 9 Feb 2014 22:44:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/commit/e400b48a7e778d17678311b1d48f9fcb7e741b0d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/commit/e400b48a7e778d17678311b1d48f9fcb7e741b0d&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13896088" author="sdavids" created="Sun, 9 Feb 2014 22:53:31 +0000"  >&lt;p&gt;Awesome, will take a little bit more of a deep-dive. One thing I noticed right away though, what&apos;s the reason for adding &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;urlScheme&quot;&lt;/span&gt;&amp;gt;${urlScheme:}&amp;lt;/str&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; throughout the various solr.xml files? That shouldn&apos;t be necessary with the patch.&lt;/p&gt;</comment>
                            <comment id="13896091" author="markrmiller@gmail.com" created="Sun, 9 Feb 2014 23:02:29 +0000"  >&lt;p&gt;Yeah, it&apos;s needed - not all tests are solrcloud tests or have zookeeper involved. Those tests now also use SSL randomly and do distrib searches and need to turn on the https scheme.&lt;/p&gt;

&lt;p&gt;One of the base SolrCloud tests will clear that system property. Probably better if that was cleared randomly for better coverage.&lt;/p&gt;</comment>
                            <comment id="13896125" author="jira-bot" created="Mon, 10 Feb 2014 00:50:26 +0000"  >&lt;p&gt;Commit 1566483 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1566483&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1566483&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt;: Boost test timeouts - SSL can be slower.&lt;/p&gt;</comment>
                            <comment id="13896219" author="sdavids" created="Mon, 10 Feb 2014 05:08:24 +0000"  >&lt;p&gt;Attached a new patch from trunk that allows the test harness to perform two-way SSL handshakes, the two-way SSL will now be randomly selected during test runs. Also, cleaned up some of the code by breaking out the SSLConfig into a separate class.&lt;/p&gt;</comment>
                            <comment id="13896253" author="jira-bot" created="Mon, 10 Feb 2014 06:08:39 +0000"  >&lt;p&gt;Commit 1566515 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1566515&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1566515&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt;: Allows the test harness to perform two-way SSL handshakes, the two-way SSL will now be randomly selected during test runs. Also, cleaned up some of the code by breaking out the SSLConfig into a separate class. Also try and address failing the statics retained check.&lt;/p&gt;</comment>
                            <comment id="13896255" author="markrmiller@gmail.com" created="Mon, 10 Feb 2014 06:17:45 +0000"  >&lt;p&gt;Thanks Steve! Great stuff.&lt;/p&gt;</comment>
                            <comment id="13897305" author="sdavids" created="Mon, 10 Feb 2014 23:58:22 +0000"  >&lt;p&gt;Looks like the ALLOW_SSL property doesn&apos;t get reset to true in the afterClass method (should replace sslConfig = null; in SolrTestCaseJ4). Other than that, I don&apos;t see any glaring issues - have a timeline for pushing this to the 4.x branch? If there are any outstanding issues you would like me to look at just let me know.&lt;/p&gt;</comment>
                            <comment id="13897324" author="jira-bot" created="Tue, 11 Feb 2014 00:14:33 +0000"  >&lt;p&gt;Commit 1566883 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1566883&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1566883&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt; : Reset ALLOW_SSL in afterClass.&lt;/p&gt;</comment>
                            <comment id="13897420" author="markrmiller@gmail.com" created="Tue, 11 Feb 2014 01:35:44 +0000"  >&lt;p&gt;Thanks Steve - I&apos;ll merge back to 4x fairly soon.&lt;/p&gt;</comment>
                            <comment id="13897977" author="jira-bot" created="Tue, 11 Feb 2014 16:17:40 +0000"  >&lt;p&gt;Commit 1567203 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1567203&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1567203&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt; : Disable SSL on OSX for this test for now.&lt;/p&gt;</comment>
                            <comment id="13897983" author="markrmiller@gmail.com" created="Tue, 11 Feb 2014 16:25:11 +0000"  >&lt;p&gt;As reported on the email list, using SSL with &quot;BasicDistributedZk2Test&quot; on OSX causes the following exception:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;	Caused by: java.net.SocketException: Invalid argument
		at java.net.SocketInputStream.socketRead0(Native Method)
		at java.net.SocketInputStream.read(SocketInputStream.java:152)
		at java.net.SocketInputStream.read(SocketInputStream.java:122)
		at sun.security.ssl.InputRecord.readFully(InputRecord.java:442)
		at sun.security.ssl.InputRecord.read(InputRecord.java:480)
		at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:927)
		at sun.security.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:884)
		at sun.security.ssl.AppInputStream.read(AppInputStream.java:102)
		at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:160)
		at org.apache.http.impl.io.SocketInputBuffer.fillBuffer(SocketInputBuffer.java:84)
		at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:273)
		at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:140)
		at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:57)
		at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:260)
		at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:283)
		at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:251)
		at org.apache.http.impl.conn.ManagedClientConnectionImpl.receiveResponseHeader(ManagedClientConnectionImpl.java:197)
		at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:271)
		at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:123)
		at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:682)
		at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:486)
		at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:863)
		at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)
		at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:106)
		at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:57)
		at org.apache.solr.client.solrj.impl.HttpSolrServer.request(HttpSolrServer.java:395)
		... 11 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13898808" author="sdavids" created="Wed, 12 Feb 2014 05:19:14 +0000"  >&lt;p&gt;I was able to reproduce this problem in OSX in both BasicDistributedZk2Test and BasicDistributedZkTest when using two-way SSL by configuring &quot;useSsl = true&quot; and &quot;useClientAuth = true&quot;. Once the useClientAuth was turned off it seems to consistently provide good test runs.&lt;/p&gt;

&lt;p&gt;Here is the full test suite results:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;trySsl = true, trySslClientAuth = true&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4] Tests with failures:
   [junit4]   - org.apache.solr.cloud.BasicDistributedZk2Test.testDistribSearch
   [junit4]   - org.apache.solr.TestDistributedSearch.testDistribSearch
   [junit4]   - org.apache.solr.cloud.DistribCursorPagingTest.testDistribSearch
   [junit4]   - org.apache.solr.cloud.BasicDistributedZkTest.testDistribSearch
   [junit4]   - org.apache.solr.TestDistributedGrouping.testDistribSearch
   [junit4]   - org.apache.solr.update.SoftAutoCommitTest.testSoftAndHardCommitMaxTimeMixedAdds
   [junit4] 
   [junit4] 
   [junit4] JVM J0:     2.58 ..   899.26 =   896.67s
   [junit4] JVM J1:     2.81 ..   899.14 =   896.33s
   [junit4] JVM J2:     2.58 ..   899.03 =   896.45s
   [junit4] JVM J3:     2.59 ..   899.27 =   896.69s
   [junit4] JVM J4:     2.58 ..   899.27 =   896.69s
   [junit4] JVM J5:     2.84 ..   899.09 =   896.25s
   [junit4] JVM J6:     2.80 ..   899.13 =   896.33s
   [junit4] JVM J7:     2.58 ..   899.07 =   896.49s
   [junit4] Execution time total: 14 minutes 59 seconds
   [junit4] Tests summary: 372 suites, 1603 tests, 5 errors, 1 failure, 26 ignored (13 assumptions)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;trySsl = true, trySslClientAuth = false&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4] Tests with failures:
   [junit4]   - org.apache.solr.update.SoftAutoCommitTest.testSoftAndHardCommitMaxTimeMixedAdds
   [junit4] 
   [junit4] 
   [junit4] JVM J0:     2.27 ..   716.97 =   714.69s
   [junit4] JVM J1:     2.28 ..   716.79 =   714.51s
   [junit4] JVM J2:     2.27 ..   716.99 =   714.72s
   [junit4] JVM J3:     2.52 ..   716.78 =   714.26s
   [junit4] JVM J4:     2.28 ..   716.82 =   714.54s
   [junit4] JVM J5:     2.52 ..   717.00 =   714.48s
   [junit4] JVM J6:     2.28 ..   716.80 =   714.52s
   [junit4] JVM J7:     2.27 ..   716.95 =   714.67s
   [junit4] Execution time total: 11 minutes 57 seconds
   [junit4] Tests summary: 372 suites, 1603 tests, 1 failure, 26 ignored (13 assumptions)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I attached a patch which cleans up a lot of the tests by using a common function to build a consistent schemed URL (fixes SSL for SolrCmdDistributorTest) + disabled the &quot;useClientAuth&quot; property for OSX clients. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elyograg&quot; class=&quot;user-hover&quot; rel=&quot;elyograg&quot;&gt;elyograg&lt;/a&gt; was kind enough to perform a few test runs (BasicDistributedZkTest &amp;amp; BasicDistributedZk2Test) on both windows and linux with both SSL params set to true with clean test runs.&lt;/p&gt;</comment>
                            <comment id="13899174" author="jira-bot" created="Wed, 12 Feb 2014 15:11:26 +0000"  >&lt;p&gt;Commit 1567643 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1567643&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1567643&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt;: Cleans up a lot of the tests by using a common function to build a consistent schemed URL (fixes SSL for SolrCmdDistributorTest) + disabled the &quot;useClientAuth&quot; property for OSX clients.&lt;/p&gt;</comment>
                            <comment id="13899322" author="jira-bot" created="Wed, 12 Feb 2014 17:43:11 +0000"  >&lt;p&gt;Commit 1567700 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1567700&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1567700&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt;: Update MorphlineGoLiveMiniMRTest for SSL. Disable SSL for now .&lt;/p&gt;</comment>
                            <comment id="13899328" author="jira-bot" created="Wed, 12 Feb 2014 17:46:51 +0000"  >&lt;p&gt;Commit 1567701 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1567701&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1567701&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt;: Update MorphlineGoLiveMiniMRTest for SSL. Disable SSL for now .&lt;/p&gt;</comment>
                            <comment id="13899354" author="jira-bot" created="Wed, 12 Feb 2014 18:00:27 +0000"  >&lt;p&gt;Commit 1567703 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1567703&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1567703&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt;: Revert last commit - SSL not on 4x yet.&lt;/p&gt;</comment>
                            <comment id="13900533" author="hossman" created="Thu, 13 Feb 2014 17:31:20 +0000"  >&lt;p&gt;I think there&apos;s a maven config problem here that still needs resolved...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/Lucene-Solr-Maven-trunk/1103/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Lucene-Solr-Maven-trunk/1103/&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Subject: Re: [JENKINS-MAVEN] Lucene-Solr-Maven-trunk #1103: POMs out of sync

Hmmm...  lots of compilation failures from Maven build regarding 
http-client classess not found?

This seems to have been a problem with the maven build since Feb 10...

https://builds.apache.org/job/Lucene-Solr-Maven-trunk/1101/

...looking at the commits, i think this looks like the suspicious one...

https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1566456

It&apos;s the only commit arround that day that changes an ivy.xml file, and 
that change relates to httpcomponents...

https://svn.apache.org/viewvc/lucene/dev/trunk/solr/core/ivy.xml?r1=1566456&amp;amp;r2=1566455&amp;amp;pathrev=1566456


...so it looks like something else needs to change in the maven configs as 
well?
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13900982" author="sdavids" created="Fri, 14 Feb 2014 01:15:43 +0000"  >&lt;p&gt;Seems like adding HttpClient wasn&apos;t necessary - was able to compile and run tests without it. Quick patch to revert:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Index: solr/core/ivy.xml
===================================================================
--- solr/core/ivy.xml	(revision 1566863)
+++ solr/core/ivy.xml	(working copy)
@@ -48,7 +48,6 @@
     &amp;lt;dependency org=&quot;org.easymock&quot; name=&quot;easymock&quot; rev=&quot;${/org.easymock/easymock}&quot; conf=&quot;test-&amp;gt;*&quot;/&amp;gt;
     &amp;lt;dependency org=&quot;cglib&quot; name=&quot;cglib-nodep&quot; rev=&quot;${/cglib/cglib-nodep}&quot; conf=&quot;test-&amp;gt;*&quot;/&amp;gt;
     &amp;lt;dependency org=&quot;org.objenesis&quot; name=&quot;objenesis&quot; rev=&quot;${/org.objenesis/objenesis}&quot; conf=&quot;test-&amp;gt;*&quot;/&amp;gt;
-    &amp;lt;dependency org=&quot;org.apache.httpcomponents&quot; name=&quot;httpclient&quot; rev=&quot;${/org.apache.httpcomponents/httpclient}&quot; conf=&quot;test-&amp;gt;*&quot;/&amp;gt;
 
     &amp;lt;dependency org=&quot;org.apache.hadoop&quot; name=&quot;hadoop-common&quot; rev=&quot;${/org.apache.hadoop/hadoop-common}&quot; conf=&quot;compile.hadoop-&amp;gt;*&quot;/&amp;gt;
     &amp;lt;!--
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13900999" author="steve_rowe" created="Fri, 14 Feb 2014 01:32:38 +0000"  >&lt;blockquote&gt;&lt;p&gt;Seems like adding HttpClient wasn&apos;t necessary - was able to compile and run tests without it. Quick patch to revert:&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks Steve, I came to the same conclusion and also successfully ran all core tests without this redundant dependency (since &lt;tt&gt;solrj/lib/&amp;#42;.jar&lt;/tt&gt; is included in Solr core&apos;s compile classpath, and so also its test classpath).&lt;/p&gt;

&lt;p&gt;I&apos;ll commit shortly.&lt;/p&gt;</comment>
                            <comment id="13901003" author="jira-bot" created="Fri, 14 Feb 2014 01:34:12 +0000"  >&lt;p&gt;Commit 1568184 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1568184&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1568184&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt;: remove redundant solr-core test dependency on httpclient&lt;/p&gt;</comment>
                            <comment id="13901580" author="jira-bot" created="Fri, 14 Feb 2014 16:02:11 +0000"  >&lt;p&gt;Commit 1568340 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1568340&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1568340&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt;: SSL support for SolrCloud.&lt;/p&gt;</comment>
                            <comment id="13901590" author="jira-bot" created="Fri, 14 Feb 2014 16:22:16 +0000"  >&lt;p&gt;Commit 1568341 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1568341&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1568341&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt;: Boost test timeouts - SSL can be slower.&lt;/p&gt;</comment>
                            <comment id="13901609" author="jira-bot" created="Fri, 14 Feb 2014 16:42:06 +0000"  >&lt;p&gt;Commit 1568347 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1568347&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1568347&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt;: Allows the test harness to perform two-way SSL handshakes, the two-way SSL will now be randomly selected during test runs. Also, cleaned up some of the code by breaking out the SSLConfig into a separate class. Also try and address failing the statics retained check.&lt;/p&gt;</comment>
                            <comment id="13901640" author="jira-bot" created="Fri, 14 Feb 2014 16:57:22 +0000"  >&lt;p&gt;Commit 1568351 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1568351&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1568351&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt; : Reset ALLOW_SSL in afterClass.&lt;/p&gt;</comment>
                            <comment id="13901649" author="jira-bot" created="Fri, 14 Feb 2014 17:05:54 +0000"  >&lt;p&gt;Commit 1568356 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1568356&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1568356&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt; : Disable SSL on OSX for this test for now.&lt;/p&gt;</comment>
                            <comment id="13901652" author="jira-bot" created="Fri, 14 Feb 2014 17:07:46 +0000"  >&lt;p&gt;Commit 1568357 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1568357&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1568357&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt;: Cleans up a lot of the tests by using a common function to build a consistent schemed URL (fixes SSL for SolrCmdDistributorTest) + disabled the &quot;useClientAuth&quot; property for OSX clients.&lt;/p&gt;</comment>
                            <comment id="13901658" author="jira-bot" created="Fri, 14 Feb 2014 17:17:22 +0000"  >&lt;p&gt;Commit 1568363 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1568363&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1568363&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt;: remove redundant solr-core test dependency on httpclient.&lt;/p&gt;</comment>
                            <comment id="13901662" author="markrmiller@gmail.com" created="Fri, 14 Feb 2014 17:20:14 +0000"  >&lt;p&gt;Thanks to everyone that contributed to getting this done! And an extral thanks to Steve for driving it home.&lt;/p&gt;</comment>
                            <comment id="13902532" author="jira-bot" created="Sat, 15 Feb 2014 21:38:26 +0000"  >&lt;p&gt;Commit 1568689 from hossman@apache.org in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1568689&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1568689&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;re-apply r1567231, which seems to have been inadvertantly reverted in r1568340 as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13907288" author="markrmiller@gmail.com" created="Thu, 20 Feb 2014 18:34:25 +0000"  >&lt;p&gt;As Noble brought up in 4.7 vote thread:&lt;/p&gt;

&lt;p&gt;The new scheme property has to be white listed to work with the cluster properties api.&lt;/p&gt;

&lt;p&gt;Currently, a user will have to manually add the entry to ZooKeeper. We should open a new issue depending on whether or not the fix makes it into a respin.&lt;/p&gt;</comment>
                            <comment id="13908014" author="sdavids" created="Fri, 21 Feb 2014 06:19:51 +0000"  >&lt;p&gt;Came across an issue with the release candidate... Unfortunately when switching from http -&amp;gt; https it causes the same node to become a replica for that shard group. That is because the base url is being compared in the clusterstate to grab the previously assigned core node name / shard id. I attached a patch that uses the nodeName instead (essentially the same as baseUrl just without the scheme). It is important to note that the port is actually embedded in the node name, so if the port changes the machine will be added as a new replica. Thus, if clients would like to update their port from 8080 -&amp;gt; 8443 they would need to update the node_name value in the clusterstate.json file in zookeeper.&lt;/p&gt;

&lt;p&gt;Here is how to get the clusterprops.json initially populated in the example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;steves-mbp:cloud-scripts sdavids$ pwd
/Users/sdavids/Downloads/solr-4.7.0/example/scripts/cloud-scripts
steves-mbp:cloud-scripts sdavids$ ./zkcli.sh -zkhost localhost:9983 -cmd put /clusterprops.json &lt;span class=&quot;code-quote&quot;&gt;&apos;{&lt;span class=&quot;code-quote&quot;&gt;&quot;urlScheme&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;https&quot;&lt;/span&gt;}&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13909271" author="jira-bot" created="Sat, 22 Feb 2014 06:48:17 +0000"  >&lt;p&gt;Commit 1570797 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1570797&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1570797&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt; urlScheme property should be whitelisted&lt;/p&gt;</comment>
                            <comment id="13909272" author="jira-bot" created="Sat, 22 Feb 2014 06:50:03 +0000"  >&lt;p&gt;Commit 1570798 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/branches/lucene_solr_4_7&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1570798&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1570798&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt; urlScheme property should be whitelisted&lt;/p&gt;</comment>
                            <comment id="13909273" author="jira-bot" created="Sat, 22 Feb 2014 06:50:57 +0000"  >&lt;p&gt;Commit 1570799 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1570799&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1570799&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt; urlScheme property should be whitelisted&lt;/p&gt;</comment>
                            <comment id="13909532" author="markrmiller@gmail.com" created="Sat, 22 Feb 2014 20:53:37 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sdavids&quot; class=&quot;user-hover&quot; rel=&quot;sdavids&quot;&gt;sdavids&lt;/a&gt;. Sorry for the delayed response, have not been feeling well. Unless there is another RC we can discuss getting this into, which seems unlikely at this point, we will have to address it in a 4.7.1 or 4.8 release.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;That is because the base url is being compared in the clusterstate to grab the previously assigned core node name / shard id. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That sounds like an ugly bug, though I have not looked at the code or patch yet. &lt;/p&gt;
</comment>
                            <comment id="13910875" author="markrmiller@gmail.com" created="Mon, 24 Feb 2014 22:00:09 +0000"  >&lt;p&gt;The previous issue has been moved to: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5770&quot; title=&quot;All attempts to match a SolrCore with it&amp;#39;s state in clusterstate.json should be done with the NodeName rather than the baseUrl.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5770&quot;&gt;&lt;del&gt;SOLR-5770&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There is an issue with opting out of SSL for a unit tests here: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5771&quot; title=&quot;Add SuppressSSL instead of static boolean in SolrTestCaseJ4&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5771&quot;&gt;&lt;del&gt;SOLR-5771&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="13922717" author="jira-bot" created="Thu, 6 Mar 2014 16:33:33 +0000"  >&lt;p&gt;Commit 1574951 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1574951&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1574951&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt;: IntelliJ config: add solr example lib test dependency to map-reduce and dataimporthandler contribs&lt;/p&gt;</comment>
                            <comment id="13922718" author="jira-bot" created="Thu, 6 Mar 2014 16:36:04 +0000"  >&lt;p&gt;Commit 1574953 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1574953&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1574953&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt;: IntelliJ config: add solr example lib test dependency to map-reduce and dataimporthandler contribs (merged trunk r1574951)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12630278">SOLR-4394</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12693470">SOLR-5700</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12962407">SOLR-9039</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12696956">SOLR-5770</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12685872">SOLR-5567</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12632136">SOLR-4451</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12697001">SOLR-5771</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12696351">SOLR-5757</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="12631072">SOLR-4407</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12631072">SOLR-4407</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12627839" name="SOLR-3854.patch" size="49477" author="sdavids" created="Sat, 8 Feb 2014 23:01:12 +0000"/>
                            <attachment id="12627820" name="SOLR-3854.patch" size="42995" author="sdavids" created="Sat, 8 Feb 2014 16:19:41 +0000"/>
                            <attachment id="12627554" name="SOLR-3854.patch" size="52295" author="markrmiller@gmail.com" created="Fri, 7 Feb 2014 05:40:43 +0000"/>
                            <attachment id="12627296" name="SOLR-3854.patch" size="44268" author="sdavids" created="Thu, 6 Feb 2014 05:20:07 +0000"/>
                            <attachment id="12627087" name="SOLR-3854.patch" size="51916" author="sdavids" created="Wed, 5 Feb 2014 07:01:58 +0000"/>
                            <attachment id="12626569" name="SOLR-3854.patch" size="39570" author="sdavids" created="Sun, 2 Feb 2014 22:26:43 +0000"/>
                            <attachment id="12626497" name="SOLR-3854.patch" size="33131" author="sdavids" created="Sat, 1 Feb 2014 21:48:53 +0000"/>
                            <attachment id="12620581" name="SOLR-3854.patch" size="16015" author="markrmiller@gmail.com" created="Fri, 27 Dec 2013 04:14:35 +0000"/>
                            <attachment id="12566180" name="SOLR-3854.patch" size="2115" author="alexey.serba" created="Wed, 23 Jan 2013 20:09:19 +0000"/>
                            <attachment id="12562125" name="SOLR-3854.patch" size="21683" author="hossman" created="Fri, 21 Dec 2012 19:47:04 +0000"/>
                            <attachment id="12545724" name="SOLR-3854.patch" size="21840" author="siren" created="Wed, 19 Sep 2012 12:46:00 +0000"/>
                            <attachment id="12627921" name="SOLR-3854v2.patch" size="22814" author="sdavids" created="Mon, 10 Feb 2014 05:08:24 +0000"/>
                            <attachment id="12628434" name="SOLR-3854v3.patch" size="18300" author="sdavids" created="Wed, 12 Feb 2014 05:19:14 +0000"/>
                            <attachment id="12630260" name="SOLR-3854v4.patch" size="3193" author="sdavids" created="Fri, 21 Feb 2014 06:19:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>243141</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03c93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17418</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>