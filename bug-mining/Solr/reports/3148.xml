<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:17:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-2039] Multivalued fields with dynamic names does not work properly with DIH</title>
                <link>https://issues.apache.org/jira/browse/SOLR-2039</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Attempting to use multiValued fields using the DataImportHandler with dynamic names does not seem to work as intended.&lt;/p&gt;

&lt;p&gt;Setting up the following in schema.xml&lt;br/&gt;
&amp;lt;dynamicField name=&quot;*_s&quot;  type=&quot;string&quot;  indexed=&quot;true&quot;  stored=&quot;true&quot; multiValued=&quot;true&quot; /&amp;gt; &lt;/p&gt;

&lt;p&gt;Then attempting to import a multiValued field through a RDBMS using children records with a dynamic name. The snippet from data-config.xml&lt;/p&gt;

&lt;p&gt;&amp;lt;entity name=&quot;terms&quot; query=&quot;select distinct DESC_TERM from tem_metadata where item_id=${item.ID_PK}&quot;&amp;gt;&lt;br/&gt;
                      &amp;lt;entity name=&quot;metadata&quot; query=&quot;select * from term_metadata where item_id=${item.ID_PK} AND desc_term=&apos;${terms.DESC_TERM}&apos;&quot; &amp;gt;&lt;br/&gt;
                             &amp;lt;field name=&quot;${terms.DESC_TERM}_s&quot; column=&quot;TEXT_VALUE&quot; /&amp;gt;&lt;br/&gt;
                       &amp;lt;/entity&amp;gt;&lt;br/&gt;
 &amp;lt;/entity&amp;gt;&lt;/p&gt;

&lt;p&gt;Results in only the FIRST record being imported. If we change the field name in the above example to a constant (ie above field entry becomes: &amp;lt;field name=&quot;metadata_record_s&quot; column=&quot;TEXT_VALUE&quot; /&amp;gt;). The multiple records are correctly imported.&lt;/p&gt;

&lt;p&gt;This was posted on solr-user, and others have reported the problem on the mailing list archive.&lt;/p&gt;

&lt;p&gt;The workaround was to use a javascript transform to perform the same behavior. Changes in data-config.xml become:&lt;/p&gt;

&lt;p&gt;&amp;lt;entity name=&quot;metadata&quot; query=&quot;select * from vw_item_metadata where item_id=${item.DIVID_PK} AND core_desc_term=&apos;${terms.CORE_DESC_TERM}&apos;&quot; transformer=&quot;script:f1&quot;/&amp;gt; &lt;/p&gt;

&lt;p&gt;&amp;lt;script&amp;gt;&amp;lt;![CDATA[&lt;br/&gt;
      function f1(row) &lt;/p&gt;
{
        var name = row.get(&apos;CORE_DESC_TERM&apos;);
                        var value = row.get(&apos;TEXT_VALUE&apos;)
        row.put(name+ &apos;_s&apos;, value);
       
        return row;
      }
&lt;p&gt; ]]&amp;gt;&amp;lt;/script&amp;gt; &lt;/p&gt;

&lt;p&gt;This results in multivalued field with a dynamic name assigned.&lt;/p&gt;




</description>
                <environment>&lt;p&gt;Windows XP, Default Solr 1.4 install with jetty&lt;/p&gt;</environment>
        <key id="12471339">SOLR-2039</key>
            <summary>Multivalued fields with dynamic names does not work properly with DIH</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalin">Shalin Shekhar Mangar</assignee>
                                    <reporter username="harrysmithwla">K A</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Aug 2010 19:05:30 +0000</created>
                <updated>Wed, 2 Oct 2019 17:24:19 +0000</updated>
                            <resolved>Wed, 26 Oct 2016 05:36:12 +0000</resolved>
                                    <version>1.4.1</version>
                                    <fixVersion>6.3</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                    <component>contrib - DataImportHandler</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>10</watches>
                                                                                                                <comments>
                            <comment id="12897398" author="cmale" created="Wed, 11 Aug 2010 19:08:17 +0000"  >&lt;p&gt;+1 to fixing this.  I have also seen this bug in the wild.&lt;/p&gt;</comment>
                            <comment id="12926714" author="koji" created="Sun, 31 Oct 2010 14:28:21 +0000"  >&lt;p&gt;Just assigning a component&lt;/p&gt;</comment>
                            <comment id="12934190" author="pavlickm" created="Sat, 20 Nov 2010 20:51:10 +0000"  >&lt;p&gt;how i understand, the issue is that DIH cannot import dynamic fields with specific field names. for example, i have following &lt;br/&gt;
&lt;ins&gt;schema.xml&lt;/ins&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;&lt;br/&gt;
&amp;lt;dynamicField name=&quot;*_s&quot; type=&quot;string&quot; indexed=&quot;true&quot; stored=&quot;true&quot; multiValued=&quot;true&quot; /&amp;gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;ins&gt;data-config.xml&lt;/ins&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;&lt;br/&gt;
&amp;lt;entity name=&quot;items&quot; query=&quot;select * from item&quot;&amp;gt;&lt;br/&gt;
&amp;lt;field name=&quot;${items.item_name}_s&quot; column=&quot;item_value&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;/entity&amp;gt;&lt;/font&gt;&lt;br/&gt;
DB with following content&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;item_name&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;item_value&lt;/b&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;item1         &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;value1       &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;item2         &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;value2       &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;and i want to Solr indexed my data such way, that i would get something like this&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;&lt;br/&gt;
&amp;lt;doc&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;item1_s&quot;&amp;gt;&lt;br/&gt;
value1&lt;br/&gt;
&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;item2_s&quot;&amp;gt;&lt;br/&gt;
value2&lt;br/&gt;
&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;/doc&amp;gt;&lt;/font&gt;&lt;/p&gt;</comment>
                            <comment id="12934292" author="pavlickm" created="Sun, 21 Nov 2010 14:46:39 +0000"  >&lt;p&gt;I hope this patch will help solve the issue&lt;/p&gt;</comment>
                            <comment id="15588457" author="caomanhdat" created="Wed, 19 Oct 2016 11:13:43 +0000"  >&lt;p&gt;An updated patch for this issues, along with a passed test on the lastest code.&lt;/p&gt;</comment>
                            <comment id="15607490" author="jira-bot" created="Wed, 26 Oct 2016 05:32:12 +0000"  >&lt;p&gt;Commit b8d9647307c5559706aeec3aad32c2e416188979 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=b8d9647&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=b8d9647&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2039&quot; title=&quot;Multivalued fields with dynamic names does not work properly with DIH&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2039&quot;&gt;&lt;del&gt;SOLR-2039&lt;/del&gt;&lt;/a&gt;: Multivalued fields with dynamic names does not work properly with DIH&lt;/p&gt;</comment>
                            <comment id="15607492" author="jira-bot" created="Wed, 26 Oct 2016 05:32:46 +0000"  >&lt;p&gt;Commit 279647a303750408d10f6f8a6c27a066176fe49e in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=279647a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=279647a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2039&quot; title=&quot;Multivalued fields with dynamic names does not work properly with DIH&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2039&quot;&gt;&lt;del&gt;SOLR-2039&lt;/del&gt;&lt;/a&gt;: Multivalued fields with dynamic names does not work properly with DIH&lt;/p&gt;

&lt;p&gt;(cherry picked from commit b8d9647)&lt;/p&gt;</comment>
                            <comment id="15607501" author="shalinmangar" created="Wed, 26 Oct 2016 05:36:13 +0000"  >&lt;p&gt;Thanks ruslan and Dat for the patches!&lt;/p&gt;</comment>
                            <comment id="15650274" author="shalinmangar" created="Wed, 9 Nov 2016 08:38:15 +0000"  >&lt;p&gt;Closing after 6.3.0 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12834147" name="SOLR-2039.patch" size="2947" author="caomanhdat" created="Wed, 19 Oct 2016 11:13:43 +0000"/>
                            <attachment id="12460130" name="SOLR-2039.patch" size="810" author="pavlickm" created="Sun, 21 Nov 2010 14:46:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5451</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03n5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19185</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>