<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:29:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-3690] binary solr package isn&apos;t including lucene test-framework jar</title>
                <link>https://issues.apache.org/jira/browse/SOLR-3690</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;As noted by Koorosh on the solr-user list...&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I have been developing extensions to SOLR code using 4.0 truck. For JUnit testing I am extending AbstractSolrTestCase which in the ALPHA release is located in JAR apache-solr-test-framework-4.0.0-ALPHA.jar. However, this class extends LuceneTestCase which comes from JAR lucene-test-framework-4.0-SNAPSHOT.jar. In the ALPHA release the later JAR is not shipped or I can&apos;t find it.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;...i confirmed that Solr 4.0.0-ALPHA binary package the solr test framework is in test./dist/apache-solr-test-framework-4.0.0-ALPHA.jar but the lucene test-framework jar isn&apos;t included at all.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12600758">SOLR-3690</key>
            <summary>binary solr package isn&apos;t including lucene test-framework jar</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Jul 2012 23:53:52 +0000</created>
                <updated>Mon, 9 May 2016 18:48:40 +0000</updated>
                            <resolved>Wed, 15 Aug 2012 18:36:11 +0000</resolved>
                                    <version>4.0-ALPHA</version>
                                    <fixVersion>4.0</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13425404" author="hossman" created="Mon, 30 Jul 2012 23:58:58 +0000"  >&lt;p&gt;This sort of requires some careful thining baout how this should be packaged.&lt;/p&gt;

&lt;p&gt;Normally if a lucene jar is a solr core dependency, we include it in the war and that&apos;s it.  &lt;/p&gt;

&lt;p&gt;If it&apos;s not a core dependency and it&apos;s only used by contribs, we ship it in the lucene-libs dir of that contrib.&lt;/p&gt;

&lt;p&gt;solr-test-framework isn&apos;t either of those though &amp;#8211; and doesn&apos;t really have a place for a &quot;lucene-lib&quot; dir at the moment &amp;#8211; but there&apos;s no reason we couldn&apos;t add test-framework/lucene-libs to the packages i suppose.  probably a good idea to include a test-framework/README.txt anyway.&lt;/p&gt;
</comment>
                            <comment id="13425475" author="rcmuir" created="Tue, 31 Jul 2012 02:38:28 +0000"  >&lt;p&gt;It would be good to think about: ideally in the future we could imagine more lucene .jar&apos;s easily pluggable into Solr.&lt;/p&gt;

&lt;p&gt;So how should the thing be shipped?&lt;/p&gt;

&lt;p&gt;For instance, other lucene analysis jars are in the same boat as this lucene-test-framework.jar, they might&lt;br/&gt;
be large (like lucene-test-framework which is 6MB!) and due to size excluded in the .war file, but still &lt;br/&gt;
useful to some people.&lt;/p&gt;

&lt;p&gt;It would be nice to be consistent with the other analyzers and their dependencies (e.g. ICU or morfologik jars),&lt;br/&gt;
the same way as lucene-test-framework and its dependencies (randomized-runner, etc). We might have more modules&lt;br/&gt;
like this in the future (e.g. codecs is growing fast, we have a lot of similarities, these are easily pluggable today: just throwing these out there).&lt;/p&gt;</comment>
                            <comment id="13429790" author="rcmuir" created="Tue, 7 Aug 2012 03:43:04 +0000"  >&lt;p&gt;rmuir20120906-bulk-40-change&lt;/p&gt;</comment>
                            <comment id="13434230" author="hossman" created="Tue, 14 Aug 2012 16:22:59 +0000"  >&lt;blockquote&gt;&lt;p&gt;It would be good to think about: ideally in the future we could imagine more lucene .jar&apos;s easily pluggable into Solr.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;right, this is what i was asking about in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-4044&quot; title=&quot;Add NamedSPILoader support to TokenizerFactory, TokenFilterFactory and CharFilterFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-4044&quot;&gt;&lt;del&gt;LUCENE-4044&lt;/del&gt;&lt;/a&gt;...&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;FWIW: The other issue to consider here is how the packaging of these &quot;uber-module-jars&quot; will work in Solr binary pacakges ... right now it&apos;s the solr contribs that provide the factories that ensure the lucene modules they depend on make it into the final tgx/zip files ... if lucene modules start providing the factories themselves, we&apos;ll need some build.xml shenanigans to copy those module jars into the solr package dirs.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;...but we punted on it there.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;It would be nice to be consistent with the other analyzers and their dependencies (e.g. ICU or morfologik jars), the same way as lucene-test-framework and its dependencies (randomized-runner, etc). We might have more modules&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Agreed.  I think we should continue to punt on the larger issue (of including arbitrary lucene jars like codecs and what not) in the binary release, and focus here in this issue on treating the solr-test-framework the same as a solr-contrib and have it pull in it&apos;s lucene-libs and external dependencies via ivy.xml&lt;/p&gt;

&lt;p&gt;I&apos;ll start working on a patch&lt;/p&gt;</comment>
                            <comment id="13434233" author="rcmuir" created="Tue, 14 Aug 2012 16:27:02 +0000"  >&lt;p&gt;that sounds good. then we get consistency. separately we can figure out what might be better for the future.&lt;/p&gt;</comment>
                            <comment id="13434700" author="hossman" created="Wed, 15 Aug 2012 00:43:53 +0000"  >&lt;p&gt;Ok, patch ready for review.&lt;/p&gt;

&lt;p&gt;a few things to note:&lt;/p&gt;

&lt;p&gt;1) adding the logic to solr-test-framework to know about lucene-libs and libs caused some javadoc errors due to multiple copies of junit jars sowing up in the classpath used to build the javadocs ... but the real cruz of hte problem seemed to be that solr-test-framework was previously juping through unneccessary hoops to build the javadocs &lt;b&gt;because&lt;/b&gt; it didn&apos;t use lucene-libs and libs properly ... i think i&apos;ve fixed it appropriately.&lt;/p&gt;

&lt;p&gt;2) since solr-test-framework is not truly a contrib, i didn&apos;t put it&apos;s resulting README.txt, lucene-libs and lib dirs under &quot;contrib&quot; in the binary package, but i also didn&apos;t really think it made sense to pollute the top level dir with another directory either, so i followed the lead of solrj and put it under &quot;dist/&quot;&lt;/p&gt;

&lt;p&gt;comments?&lt;/p&gt;</comment>
                            <comment id="13434704" author="rcmuir" created="Wed, 15 Aug 2012 00:51:47 +0000"  >&lt;p&gt;I can explain the screwed up unnecessary javadocs hoops. really this deserves a comment.&lt;/p&gt;

&lt;p&gt;With your current patch the &apos;hack&apos; will break:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;javadocs-lint:
     [exec] 
     [exec] Crawl/parse...
     [exec] 
     [exec] Verify...
     [exec] 
     [exec] build/docs/api/test-framework/org/apache/solr/analysis/MockTokenizerFactory.html
     [exec]   BROKEN LINK: file:/home/rmuir/workspace/lucene-trunk/lucene/build/docs/test-framework/org/apache/lucene/analysis/Tokenizer.html
     [exec]   BROKEN LINK: file:/home/rmuir/workspace/lucene-trunk/lucene/build/docs/test-framework/org/apache/lucene/analysis/Tokenizer.html
     [exec] 
     [exec] build/docs/api/test-framework/org/apache/solr/analysis/MockCharFilterFactory.html
     [exec]   BROKEN LINK: file:/home/rmuir/workspace/lucene-trunk/lucene/build/docs/test-framework/org/apache/lucene/analysis/CharFilter.html
     [exec]   BROKEN LINK: file:/home/rmuir/workspace/lucene-trunk/lucene/build/docs/test-framework/org/apache/lucene/analysis/CharFilter.html
     [exec] 
     [exec] build/docs/api/test-framework/org/apache/solr/core/MockDirectoryFactory.html
     [exec]   BROKEN LINK: file:/home/rmuir/workspace/lucene-trunk/lucene/build/docs/test-framework/org/apache/lucene/store/Directory.html
     [exec]   BROKEN LINK: file:/home/rmuir/workspace/lucene-trunk/lucene/build/docs/test-framework/org/apache/lucene/store/Directory.html
     [exec] 
     [exec] build/docs/api/test-framework/org/apache/solr/core/MockFSDirectoryFactory.html
     [exec]   BROKEN LINK: file:/home/rmuir/workspace/lucene-trunk/lucene/build/docs/test-framework/org/apache/lucene/store/Directory.html
     [exec]   BROKEN LINK: file:/home/rmuir/workspace/lucene-trunk/lucene/build/docs/test-framework/org/apache/lucene/store/Directory.html
     [exec] 
     [exec] Broken javadocs links were found!

BUILD FAILED
/home/rmuir/workspace/lucene-trunk/solr/build.xml:528: The following error occurred while executing this line:
/home/rmuir/workspace/lucene-trunk/lucene/common-build.xml:1740: exec returned: 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="13434708" author="rcmuir" created="Wed, 15 Aug 2012 00:54:52 +0000"  >&lt;p&gt;OK I was looking to &apos;show&apos; the example on the website docs, but that isnt going to work. Basically the problem here is we have:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;org.apache.lucene.analysis package in lucene-core&lt;/li&gt;
	&lt;li&gt;org.apache.lucene.analysis package in lucene-test-framework&lt;/li&gt;
	&lt;li&gt;... with o.a.l.store and so on&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;so this &apos;package&apos; conflict causes problems for the package-list, and solr-test-framework links to lucene-test-framework&lt;br/&gt;
because it &apos;has these packages&apos; (but so does lucene-core!). &lt;/p&gt;

&lt;p&gt;yes its a hack, and yes you can say its bogus we have the duplicated packages in multiple modules, HOWEVER this is tests.&lt;br/&gt;
I think its ok to have &apos;greyed out links&apos; from the solr-test-framework javadocs to these lucene-core things, because&lt;br/&gt;
its fair we should be able to test pkg-private stuff &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;However, there might be a better, cleaner way than the hack i had before: such as somehow explicitly disabling these packages&lt;br/&gt;
or some javadocs option like that.&lt;/p&gt;</comment>
                            <comment id="13434759" author="hossman" created="Wed, 15 Aug 2012 02:24:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;so this &apos;package&apos; conflict causes problems for the package-list, and solr-test-framework links to lucene-test-framework&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;yeah, that makes total sense ... it ust wasn&apos;t clear before why it was doing what it was doing. (although there was still a lot of wonky and unnecessary classpath stuff)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think its ok to have &apos;greyed out links&apos; from the solr-test-framework javadocs to these lucene-core things&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Unfortunately it also means we have greyed out links to the core-test-framework stuff as well, and people are who are learning about solr-test-framework baseclasses are probably going to need to know just as much about stuff like LuceneTestCase, but i don&apos;t really see a good solution to that, so oh well.&lt;/p&gt;

&lt;p&gt;i switched back to using invoke-javadoc directly and got things working with javadocs-lint.  i went on and attempted to at least get the solr-test-framework javadocs linking to the solr-core javadocs, but ran into a problem that the relative paths between them are differnet between &quot;build&quot; and &quot;dist&quot; and javadocs-lint expects them to work in build, so i scraped that (but it&apos;s attached if anyone wants to take a crack at it)&lt;/p&gt;
</comment>
                            <comment id="13435003" author="rcmuir" created="Wed, 15 Aug 2012 12:06:57 +0000"  >&lt;p&gt;I understand the problem. its actually part of a larger problem for solr?&lt;/p&gt;

&lt;p&gt;Currently the solr javadocs in dist/ are really organized in a mess. &apos;javadocs-all&apos; creates this massive javadocs of everything (core, solrj, contribs) and puts&lt;br/&gt;
it in the output folder THEN solrj is redundantly duplicated on top of this. so you have e.g.&lt;br/&gt;
&lt;a href=&quot;http://lucene.apache.org/solr/api-4_0_0-ALPHA/org/apache/solr/client/solrj/package-summary.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://lucene.apache.org/solr/api-4_0_0-ALPHA/org/apache/solr/client/solrj/package-summary.html&lt;/a&gt;&lt;br/&gt;
but also&lt;br/&gt;
&lt;a href=&quot;http://lucene.apache.org/solr/api-4_0_0-ALPHA/solrj/org/apache/solr/client/solrj/package-summary.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://lucene.apache.org/solr/api-4_0_0-ALPHA/solrj/org/apache/solr/client/solrj/package-summary.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This is not useful and not very navigable.&lt;/p&gt;

&lt;p&gt;Instead I think, like lucene, we should nuke javadocs-all completely and organize javadocs into subfolders (core, solrj, test-framework, dataimport, ...),&lt;br/&gt;
that have the links to each other.&lt;/p&gt;

&lt;p&gt;We can then add a nice auto-generated index page like &lt;a href=&quot;http://lucene.apache.org/core/4_0_0-ALPHA/index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://lucene.apache.org/core/4_0_0-ALPHA/index.html&lt;/a&gt; that lets you navigate them, thats&lt;br/&gt;
also checked of course by the link-checkers and such.&lt;/p&gt;

&lt;p&gt;Uwe just started talking about doing this on &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2747&quot; title=&quot;Include formatted Changes.html for release&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2747&quot;&gt;&lt;del&gt;SOLR-2747&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I know this is all beyond the scope of the issue, I&apos;m just explaining why its crazy and what I think we should do to make it simpler.&lt;/p&gt;</comment>
                            <comment id="13435005" author="thetaphi" created="Wed, 15 Aug 2012 12:08:12 +0000"  >&lt;p&gt;+1, I can help &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13435385" author="hossman" created="Wed, 15 Aug 2012 18:36:11 +0000"  >&lt;p&gt;Committed revision 1373553. - trunk&lt;br/&gt;
Committed revision 1373557. - 4x&lt;/p&gt;

&lt;p&gt;...we can iterate on javadoc improvements elsewhere&lt;/p&gt;
</comment>
                            <comment id="13654011" author="thetaphi" created="Fri, 10 May 2013 10:33:44 +0000"  >&lt;p&gt;Closed after release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12540998" name="SOLR-3690.broken.jdoc.links.to.solrcore.patch" size="11434" author="hossman" created="Wed, 15 Aug 2012 02:24:12 +0000"/>
                            <attachment id="12540997" name="SOLR-3690.patch" size="10553" author="hossman" created="Wed, 15 Aug 2012 02:24:12 +0000"/>
                            <attachment id="12540988" name="SOLR-3690.patch" size="10155" author="hossman" created="Wed, 15 Aug 2012 00:43:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>243293</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03d6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17570</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>