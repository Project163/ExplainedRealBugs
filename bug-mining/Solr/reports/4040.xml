<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:34:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-5163] edismax should throw exception when qf refers to nonexistent field</title>
                <link>https://issues.apache.org/jira/browse/SOLR-5163</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;query:&lt;/p&gt;

&lt;p&gt;q=foo AND bar&lt;br/&gt;
qf=field1&lt;br/&gt;
qf=field2&lt;br/&gt;
defType=edismax&lt;/p&gt;

&lt;p&gt;Where field1 exists and field2 doesn&apos;t..&lt;/p&gt;

&lt;p&gt;will treat the AND as a term vs and operator&lt;/p&gt;</description>
                <environment></environment>
        <key id="12663933">SOLR-5163</key>
            <summary>edismax should throw exception when qf refers to nonexistent field</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dsmiley">David Smiley</assignee>
                                    <reporter username="sbower">Steven Bower</reporter>
                        <labels>
                            <label>newdev</label>
                    </labels>
                <created>Thu, 15 Aug 2013 22:06:30 +0000</created>
                <updated>Thu, 14 Mar 2019 13:08:08 +0000</updated>
                            <resolved>Thu, 27 Sep 2018 19:55:33 +0000</resolved>
                                    <version>4.10.4</version>
                                    <fixVersion>8.0</fixVersion>
                                    <component>query parsers</component>
                    <component>search</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16322406" author="ctargett" created="Thu, 11 Jan 2018 15:22:11 +0000"  >&lt;p&gt;I can reproduce this with the techproducts example docs. Index them, then do a query like:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;debugQuery=on&amp;amp;defType=edismax&amp;amp;q=storm%20AND%20sword&amp;amp;qf=name^2.0&amp;amp;qf=series^2.0&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;(where the field &quot;series&quot; for the 2nd &lt;tt&gt;qf&lt;/tt&gt; is the field that doesn&apos;t exist)&lt;/p&gt;

&lt;p&gt;The parsedquery from the debug output is: &lt;/p&gt;

&lt;p&gt;&lt;tt&gt;+(DisjunctionMaxQuery(((name:storm)^2.0)) DisjunctionMaxQuery(((name:and)^2.0)) DisjunctionMaxQuery(((name:sword)^2.0)))&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;If you use a field that does exist, like &quot;series_t&quot;, instead you get a parsedquery like:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;+(+DisjunctionMaxQuery(((name:storm)^2.0 | (series_t:storm)^2.0)) +DisjunctionMaxQuery(((name:sword)^2.0 | (series_t:sword)^2.0)))&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;The stranger thing is the query with the bad field name is the only one that returns the matching document.&lt;/p&gt;</comment>
                            <comment id="16390114" author="dsmiley" created="Wed, 7 Mar 2018 20:05:29 +0000"  >&lt;p&gt;I&apos;ve been bitten by this a several times.  It can be nasty since a typo in your &quot;qf&quot; won&apos;t necessarily be noticed right away &amp;#8211; no error, just bad search results for certain queries that use operators.  It might not even be a typo but the schema being out of sync.  I suspect the fix will need to be careful to throw an exception for &quot;qf&quot; errors only while not throwing an exception if the user&apos;s query appears it might refer to a field.  Probably the easiest/safest way to do this is validate &quot;qf&quot; up front.  Clearly needs a test.&lt;/p&gt;</comment>
                            <comment id="16595117" author="charles sanders" created="Tue, 28 Aug 2018 15:08:32 +0000"  >&lt;p&gt;I&apos;m new to the project and this is my first contribution, thank you for your patience.&lt;/p&gt;

&lt;p&gt;I have attached a patch file with code changes to address the issue.  It is not a candidate to commit in its current state.  The code changes satisfy the test case provided in Cassandrea&apos;s comment above.  Using the &apos;techproducts&apos; example, an exception is throw when query fields (qf) contains field &apos;series&apos;.  But passes when field &apos;series_t&apos; is used.  If other invalid fields are used, such as foo_t, the exception is thrown.  An exception is thrown for any query field not persisted to the index or defined in the schema.&lt;/p&gt;

&lt;p&gt;However..... There are unit test failures when executing &apos;ant -Dtestcase=TestExtendedDismaxParser test&apos;.  The error raised is &amp;lt;o.a.s.c.CachingDirectoryFactory Timeout waiting for all directory ref counts to be released&amp;gt;.  I believe this is due more to my lack of knowledge of the test framework than the actual code addition.  May need to add an @AfterClass method with some tear down code.  Not sure.  Maybe someone with more test framework knowledge can steer me in the right direction.&lt;/p&gt;

&lt;p&gt;Please take a look at the patch and let me know if I have missed the boat completely.  Any help / instructions / advice greatly appreciated.&lt;/p&gt;</comment>
                            <comment id="16595133" author="dsmiley" created="Tue, 28 Aug 2018 15:25:08 +0000"  >&lt;p&gt;Thanks for contributing!&lt;/p&gt;

&lt;p&gt;I took a brief look at your patch.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;I think DisMaxQParser.parseQueryFields should include validation. &#160;Note that this method is also used by ExtendedDismaxQParser. &#160;This method already takes the schema so it has the necessary inputs.&lt;/li&gt;
	&lt;li&gt;Only use the Solr schema &quot;IndexSchema&quot;, don&apos;t go down to the Lucene level &quot;FieldInfos&quot;.&lt;/li&gt;
	&lt;li&gt;It&apos;s sufficient&#160;to call IndesSchema.getField(name). &#160;It&apos;ll throw an exception if it can&apos;t, and that exception will be marked as a BAD_REQUEST as it should be. &#160;This method handles dynamic fields; the approach you took would not.&lt;/li&gt;
	&lt;li&gt;Missing a test&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;RE &quot;Timeout waiting for all directory ref counts to be released&quot;, I suspect there was an exception reported prior to that point? &#160;Any way this error surprises me. &#160;If after doing the above and adding a test, even if you still get this error, post the patch any way and I&apos;ll take a look then.&lt;/p&gt;</comment>
                            <comment id="16595370" author="eribeiro" created="Tue, 28 Aug 2018 17:54:04 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Charles+Sanders&quot; class=&quot;user-hover&quot; rel=&quot;Charles Sanders&quot;&gt;Charles Sanders&lt;/a&gt;, a couple of questions about your patch (congrats for contributing, btw!):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
validateQueryFields(req);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You pass req, but req is only used to get the Schema, so why not pass the schema, i.e., validateQueryFields(req.getSchema())?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void validateQueryFields(SolrQueryRequest req) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; SyntaxError {
     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (queryFields == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || queryFields.isEmpty()) {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SyntaxError(&lt;span class=&quot;code-quote&quot;&gt;&quot;No query fields given.&quot;&lt;/span&gt;);
     }&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If df is not specified then the parser will resort to use df (or throw an exception if neither is specified). Therefore, even tough this if clause is a nice defensive guard I don&apos;t think it really is worth now, because if queryFields is empty the error will be thrown before reaching this method. And even if is empty then the result is that the for-loop is not traversed.&lt;/p&gt;

&lt;p&gt;Finally,&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
req.getSchema().getFields().keySet()&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;could be extracted to a variable before entering the loop, instead of being called for each field.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Best regards!&lt;/p&gt;</comment>
                            <comment id="16615578" author="eribeiro" created="Sat, 15 Sep 2018 03:10:32 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Charles+Sanders&quot; class=&quot;user-hover&quot; rel=&quot;Charles Sanders&quot;&gt;Charles Sanders&lt;/a&gt;, are you still working on this issue? If not, can I provide another patch to it?&lt;/p&gt;</comment>
                            <comment id="16617834" author="charles sanders" created="Mon, 17 Sep 2018 17:01:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eribeiro&quot; class=&quot;user-hover&quot; rel=&quot;eribeiro&quot;&gt;eribeiro&lt;/a&gt; Yes I am planning to get back to this.&#160; Been busy and on vacation.&#160; I hope to get back to this within the next couple of weeks.&#160; Thanks.&lt;/p&gt;</comment>
                            <comment id="16620991" author="charles sanders" created="Wed, 19 Sep 2018 18:17:54 +0000"  >&lt;p&gt;Attached a new patch file.&#160; The first attempt did not take into account field aliases.&#160; Had to take a slightly different approach.&#160; Added a unit test for the validation.&#160; All unit tests pass.&#160; I think I have addressed all previous comments.&#160; As always, feedback appreciated.&lt;/p&gt;</comment>
                            <comment id="16621372" author="eribeiro" created="Thu, 20 Sep 2018 01:00:51 +0000"  >&lt;p&gt;Hey, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Charles+Sanders&quot; class=&quot;user-hover&quot; rel=&quot;Charles Sanders&quot;&gt;Charles Sanders&lt;/a&gt;, you could simplify things a bit more. Like &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;&#160;pointed out&#160;&lt;a href=&quot;https://jira.apache.org/jira/browse/SOLR-5163?focusedCommentId=16595133&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-16595133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jira.apache.org/jira/browse/SOLR-5163?focusedCommentId=16595133&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-16595133&lt;/a&gt;&#160;it is more interesting to validate the fields in &lt;b&gt;&lt;em&gt;DismaxQueryParser#parseQueryFields&lt;/em&gt;&lt;/b&gt; like below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
   &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; e : queryFields.keySet()){
      indexSchema.getField(e);
   }
} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (SolrException ex) {
  &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SyntaxError(ex.getMessage());
}

&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; queryFields;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Or, even use Java8 style like below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
queryFields.keySet().forEach(indexSchema::getField);

&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; queryFields;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The advantage is double fold: it gets checked for both DismaxParser and ExtendedDismaxParser and the logic is in a well defined place (besides being a tidy bit more simple).&lt;/p&gt;

&lt;p&gt;As for the tests, relying too heavily on String comparisons makes the tests fragile (a unrelated change on the return string and the test can fail). IIRC, it is even an anti-pattern, but I know it can be difficult not to resort to this kind of check then why not make it more economic like below?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;/** SOLR-5163 */&lt;/span&gt; 
@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testValidateQueryFields() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {

  &lt;span class=&quot;code-comment&quot;&gt;// test existent qf
&lt;/span&gt;  assertJQ(req(&lt;span class=&quot;code-quote&quot;&gt;&quot;defType&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;edismax&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;df&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;text&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;q&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;olive AND other&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;qf&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;subject^3 title&quot;&lt;/span&gt;)
      , &lt;span class=&quot;code-quote&quot;&gt;&quot;/response/numFound==0&quot;&lt;/span&gt;
  );

  &lt;span class=&quot;code-comment&quot;&gt;// test nonexistent qf
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      assertJQ(req(&lt;span class=&quot;code-quote&quot;&gt;&quot;defType&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;edismax&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;df&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;text&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;q&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;olive AND other&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;qf&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;subject^3 nosuchfield&quot;&lt;/span&gt;)
          , &lt;span class=&quot;code-quote&quot;&gt;&quot;/response/numFound==0&quot;&lt;/span&gt;
      );
      fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;nosuchfield qf doesn&apos;t exists&quot;&lt;/span&gt;);
  } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
     assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;undefined field: \&quot;&lt;/span&gt;nosuchfield\&quot;&quot;, e.getMessage());
  }&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Cheers!&lt;/p&gt;</comment>
                            <comment id="16621903" author="charles sanders" created="Thu, 20 Sep 2018 12:10:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eribeiro&quot; class=&quot;user-hover&quot; rel=&quot;eribeiro&quot;&gt;eribeiro&lt;/a&gt;&#160; Initially I put the check in DismaxQueryParser#parseQueryFields, as seen in the first patch.  But existing unit tests for field aliases failed.  The method DismaxQueryParser#parseQueryFields does not know about field aliases.  That is why I moved the check to ExtendedDismaxQParser.&lt;/p&gt;

&lt;p&gt;As for the unit test, I attempted to follow the pattern established in TestExtendedDismaxParser. There are many tests in the class that use the same string comparison pattern.  ???&lt;/p&gt;

&lt;p&gt;This is a very large repository of code.  Still trying to get a foot hold.  I would be very interested to see and learn from a patch you create for this issue.&lt;/p&gt;</comment>
                            <comment id="16621953" author="dsmiley" created="Thu, 20 Sep 2018 12:47:12 +0000"  >&lt;p&gt;Ah; thanks for explaining why you placed the code here; makes sense.&lt;/p&gt;

&lt;p&gt;I like your test; I&apos;m a fan of doing string comparisons for checking the structure of a Query.  It&apos;s a one-liner that is very easy to read.  Yes it&apos;s more fragile but I&apos;ll take the readability trade any day.&lt;/p&gt;

&lt;p&gt;Looks good to me.  I&apos;ll let the patch review bot take a look then commit it.&lt;/p&gt;</comment>
                            <comment id="16621982" author="eribeiro" created="Thu, 20 Sep 2018 13:01:53 +0000"  >&lt;p&gt;If &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt; agreed then it&apos;s hands down the solution. Go ahead!&#160;&lt;/p&gt;</comment>
                            <comment id="16621998" author="dsmiley" created="Thu, 20 Sep 2018 13:08:14 +0000"  >&lt;p&gt;Aliases can refer to other aliases and it&apos;s resolved recursively.  Based on the patch here, if an alias refers to a bogus field, then the new checks wouldn&apos;t catch it.  It&apos;s not a blocker to mean but it is a shortcoming.  You might also want to see if the field is an alias first to avoid the throw of an exception that may be innocent.  FYI ExtendedSolrQueryParser validateCyclicAliasing does some checks vaguely similar to what might be needed.&lt;/p&gt;</comment>
                            <comment id="16623639" author="charles sanders" created="Fri, 21 Sep 2018 13:45:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;&#160;&#160;Yes you are correct about aliases.  I should have caught than.  Totally my fault.  I am working on a new patch to work through aliases and test the underling source field(s).  New patch coming soon.&lt;/p&gt;</comment>
                            <comment id="16624711" author="lucenesolrqa" created="Sat, 22 Sep 2018 15:26:11 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Prechecks &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; test4tests &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch appears to include 1 new or modified test files. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; master Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  4m 30s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Patch Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  3m  2s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  3m  2s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Release audit (RAT) &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  3m  2s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Check forbidden APIs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  3m  2s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Validate source patterns &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  3m  2s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Other Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 89m 27s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; core in the patch passed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;100m 28s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5163&quot; title=&quot;edismax should throw exception when qf refers to nonexistent field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5163&quot;&gt;&lt;del&gt;SOLR-5163&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12940463/SOLR-5163.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12940463/SOLR-5163.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  compile  javac  unit  ratsources  checkforbiddenapis  validatesourcepatterns  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux lucene2-us-west.apache.org 4.4.0-112-generic #135-Ubuntu SMP Fri Jan 19 11:48:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-SOLR-Build/sourcedir/dev-tools/test-patch/lucene-solr-yetus-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 4ccf0fb &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; version: Apache Ant(TM) version 1.9.6 compiled on July 20 2018 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 1.8.0_172 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Test Results &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/183/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/183/testReport/&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: solr solr/core U: solr &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/183/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/183/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.7.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16627215" author="charles sanders" created="Tue, 25 Sep 2018 11:53:54 +0000"  >&lt;p&gt;Added a new patch.  This one accounts for query field aliases.  During validation, when an alias is detected, it will loop through the alias until it finds the source field(s) and then validate those against the schema as well.  This was not properly addressed in the previous patch.&lt;/p&gt;</comment>
                            <comment id="16628186" author="lucenesolrqa" created="Wed, 26 Sep 2018 02:47:06 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Prechecks &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; test4tests &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch appears to include 1 new or modified test files. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; master Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 24s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Patch Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 15s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 15s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Release audit (RAT) &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 15s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Check forbidden APIs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 15s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Validate source patterns &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 15s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Other Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 55m 53s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; core in the patch failed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 60m 39s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Reason &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Tests &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Failed junit tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; solr.cloud.MoveReplicaHDFSTest &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5163&quot; title=&quot;edismax should throw exception when qf refers to nonexistent field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5163&quot;&gt;&lt;del&gt;SOLR-5163&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12941205/SOLR-5163.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12941205/SOLR-5163.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  compile  javac  unit  ratsources  checkforbiddenapis  validatesourcepatterns  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux lucene1-us-west 4.4.0-130-generic #156~14.04.1-Ubuntu SMP Thu Jun 14 13:51:47 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-SOLR-Build/sourcedir/dev-tools/test-patch/lucene-solr-yetus-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 5816766 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; version: Apache Ant(TM) version 1.9.3 compiled on July 24 2018 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 1.8.0_172 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; unit &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/189/artifact/out/patch-unit-solr_core.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/189/artifact/out/patch-unit-solr_core.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Test Results &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/189/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/189/testReport/&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: solr solr/core U: solr &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/189/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/189/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.7.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16628675" author="dsmiley" created="Wed, 26 Sep 2018 12:22:38 +0000"  >&lt;p&gt;Looks pretty good. &#160;Though I don&apos;t think you tested this change? &#160;Also, if there&apos;s an infinite loop in aliasing, what will happen? &#160;I believe this resulted in a failure before but I wonder if now, due to this new code, Solr will loop forever? &#160;Perhaps you should in one shot both do the recursive aliasing detection (moving from where is now) and also validate the field?&lt;/p&gt;</comment>
                            <comment id="16628705" author="charles sanders" created="Wed, 26 Sep 2018 12:51:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;  I ran &apos;ant clean test&apos; on the code before creating the patch.  All the unit tests passed.  The code does check for an infinite alias loop using the existing check &apos;validateCyclicAliasing&apos;.  I&apos;m relying on that method to throw an exception and break the loop if one exists.&lt;/p&gt;

&lt;p&gt;Sorry.  Maybe this is bigger than I am.  Maybe &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eribeiro&quot; class=&quot;user-hover&quot; rel=&quot;eribeiro&quot;&gt;eribeiro&lt;/a&gt; should finish this.  He mentioned he had a patch candidate.  Thanks.&lt;/p&gt;</comment>
                            <comment id="16630966" author="jira-bot" created="Thu, 27 Sep 2018 19:53:45 +0000"  >&lt;p&gt;Commit 9481c1f623b77214a2a14ad18efc59fb406ed765 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Charles+Sanders&quot; class=&quot;user-hover&quot; rel=&quot;Charles Sanders&quot;&gt;Charles Sanders&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9481c1f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9481c1f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5163&quot; title=&quot;edismax should throw exception when qf refers to nonexistent field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5163&quot;&gt;&lt;del&gt;SOLR-5163&lt;/del&gt;&lt;/a&gt;: edismax now throws an exception when qf refers to a nonexistent field&lt;/p&gt;</comment>
                            <comment id="16630970" author="dsmiley" created="Thu, 27 Sep 2018 19:55:33 +0000"  >&lt;p&gt;Oh I see, and I see the test too. &#160;(I wrote my previous comment without checking if&#160;cyclic aliasing&#160;was tested).&lt;/p&gt;

&lt;p&gt;I committed to 8.0.&lt;/p&gt;

&lt;p&gt;Thanks for contributing Charles!&lt;/p&gt;</comment>
                            <comment id="16631272" author="jira-bot" created="Fri, 28 Sep 2018 02:18:48 +0000"  >&lt;p&gt;Commit 9481c1f623b77214a2a14ad18efc59fb406ed765 in lucene-solr&apos;s branch refs/heads/jira/http2 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Charles+Sanders&quot; class=&quot;user-hover&quot; rel=&quot;Charles Sanders&quot;&gt;Charles Sanders&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9481c1f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9481c1f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5163&quot; title=&quot;edismax should throw exception when qf refers to nonexistent field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5163&quot;&gt;&lt;del&gt;SOLR-5163&lt;/del&gt;&lt;/a&gt;: edismax now throws an exception when qf refers to a nonexistent field&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12941205" name="SOLR-5163.patch" size="10035" author="Charles Sanders" created="Tue, 25 Sep 2018 11:50:12 +0000"/>
                            <attachment id="12940463" name="SOLR-5163.patch" size="7400" author="Charles Sanders" created="Wed, 19 Sep 2018 18:12:11 +0000"/>
                            <attachment id="12937454" name="SOLR-5163.patch" size="3853" author="Charles Sanders" created="Tue, 28 Aug 2018 15:06:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>343934</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 7 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1nb93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>344236</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>