<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:23:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-2668] DIH - multithreaded does not rollback on errors from EntityProcessor</title>
                <link>https://issues.apache.org/jira/browse/SOLR-2668</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;If the EntityProcessor of a subentity throws an Exception in its init() Method, DocBuilder logs &quot;Import completed successfully&quot; and calls commit instead of calling rollback.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12514979">SOLR-2668</key>
            <summary>DIH - multithreaded does not rollback on errors from EntityProcessor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalin">Shalin Shekhar Mangar</assignee>
                                    <reporter username="wese">Frank Wesemann</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Jul 2011 23:38:35 +0000</created>
                <updated>Thu, 25 Aug 2011 11:27:04 +0000</updated>
                            <resolved>Thu, 25 Aug 2011 11:27:04 +0000</resolved>
                                    <version>3.3</version>
                                                    <component>contrib - DataImportHandler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13069294" author="wese" created="Thu, 21 Jul 2011 23:47:08 +0000"  >&lt;p&gt;patch for the unittest to clarify the problem&lt;/p&gt;</comment>
                            <comment id="13070767" author="shalinmangar" created="Mon, 25 Jul 2011 21:19:51 +0000"  >&lt;p&gt;Thanks for the test Frank. There are more problems. In single thread mode, an error causes a rollback but in threaded mode, a commit is called.&lt;/p&gt;</comment>
                            <comment id="13090182" author="shalinmangar" created="Wed, 24 Aug 2011 12:48:46 +0000"  >&lt;p&gt;I was looking at this problem again today. The onError attributes are not used to deal with exceptions from EntityProcessor.init() method. They are only used for reading rows, applying transformers and inserting documents into Solr.&lt;/p&gt;

&lt;p&gt;The real problem was that in multi-threaded mode, the exceptions from EntityProcessor.init were being eaten up so a commit was called instead of rolling back the changes. I&apos;ve fixed that to re-throw the exception up the hierarchy.&lt;/p&gt;</comment>
                            <comment id="13090937" author="shalinmangar" created="Thu, 25 Aug 2011 11:11:54 +0000"  >&lt;p&gt;Fixed a bug in the tests. The index was not being emptied in tearDown so even after rollback, the index had 4 documents.&lt;/p&gt;

&lt;p&gt;Just to show that multi-threaded does honor the onError attribute, I&apos;ve added a test which uses a transformer which always fails.&lt;/p&gt;

&lt;p&gt;The older two tests are used to demonstrate that both multi-threaded and serial mode show the same characteristic for a failing entity processor.&lt;/p&gt;</comment>
                            <comment id="13090947" author="shalinmangar" created="Thu, 25 Aug 2011 11:27:04 +0000"  >&lt;p&gt;Committed revision 1161505 on trunk and 1161510 on branch_3x.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12491619" name="SOLR-2668.patch" size="7535" author="shalin" created="Thu, 25 Aug 2011 11:11:54 +0000"/>
                            <attachment id="12491474" name="SOLR-2668.patch" size="5767" author="shalin" created="Wed, 24 Aug 2011 12:48:46 +0000"/>
                            <attachment id="12487374" name="SOLR-2668.patch" size="4919" author="wese" created="Thu, 21 Jul 2011 23:47:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4883</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 13 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03jdj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18572</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>