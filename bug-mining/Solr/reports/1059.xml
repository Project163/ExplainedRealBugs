<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:30:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-3878] NPE in CurrencyValue.parse() while issuing wildcard range query on a CurrencyField</title>
                <link>https://issues.apache.org/jira/browse/SOLR-3878</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;According to the &lt;a href=&quot;http://wiki.apache.org/solr/CurrencyField#Querying&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;wiki&lt;/a&gt; wildcard range queries are supported. In reality either of the following queries result in NPE using the example schema.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;price_c:&lt;span class=&quot;error&quot;&gt;&amp;#91;* TO 1000&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;price_c:&lt;span class=&quot;error&quot;&gt;&amp;#91;* TO 1000,USD&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;price_c:&lt;span class=&quot;error&quot;&gt;&amp;#91;*,USD TO 1000,USD&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;price_c:&lt;span class=&quot;error&quot;&gt;&amp;#91;1000 TO *&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;price_c:&lt;span class=&quot;error&quot;&gt;&amp;#91;1000,USD TO *&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;price_c:&lt;span class=&quot;error&quot;&gt;&amp;#91;1000,USD TO *&amp;#93;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12608903">SOLR-3878</key>
            <summary>NPE in CurrencyValue.parse() while issuing wildcard range query on a CurrencyField</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="janhoy">Jan H&#248;ydahl</assignee>
                                    <reporter username="mmiklos">Mikl&#243;s M&#225;rton</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Sep 2012 17:26:30 +0000</created>
                <updated>Mon, 9 May 2016 18:48:23 +0000</updated>
                            <resolved>Tue, 25 Sep 2012 01:51:51 +0000</resolved>
                                    <version>3.6.1</version>
                    <version>4.0-BETA</version>
                                    <fixVersion>4.0</fixVersion>
                    <fixVersion>4.1</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>query parsers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13462204" author="janhoy" created="Mon, 24 Sep 2012 22:30:03 +0000"  >&lt;p&gt;Confirmed. The code does not support open-ended ranges &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Starting a fix.&lt;/p&gt;</comment>
                            <comment id="13462227" author="janhoy" created="Mon, 24 Sep 2012 22:52:35 +0000"  >&lt;p&gt;Aiming for the 4.0 respin&lt;/p&gt;</comment>
                            <comment id="13462245" author="janhoy" created="Mon, 24 Sep 2012 23:16:56 +0000"  >&lt;p&gt;Patch for trunk attached, including tests&lt;/p&gt;</comment>
                            <comment id="13462279" author="hossman" created="Tue, 25 Sep 2012 00:07:14 +0000"  >&lt;p&gt;Jan: i&apos;ve only skimmed the patch, but would it be better/simpler if CurrencyValue.parse(...) always returned a non null CurrencyValue object, but that CurrencyValue.getAmmount() could return null (ie: make it return Long instead of long)?&lt;/p&gt;

&lt;p&gt;that seems like it would simply some of the null checks you had to add in your patch.&lt;/p&gt;

&lt;p&gt;either way:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;CurrencyValue.parse should have some javadocs talking about how it deals with &quot;&amp;#42;&quot; as input&lt;/li&gt;
	&lt;li&gt;other uses of CurrencyValue.parse need to be checked to ensure the behavior appropriately if &quot;&amp;#42;&quot; is specified as a value (ie: will i get a meaningful error if I try to add a document with a value of &quot;*&quot; ? what happens if i do a query on &lt;tt&gt;currency_field:&amp;#42;&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="13462307" author="mmiklos" created="Tue, 25 Sep 2012 00:46:56 +0000"  >&lt;p&gt;Hoss says something... Either way: I&apos;m pretty happy that it&apos;s already solved. :]&lt;/p&gt;

&lt;p&gt;I hate to nitpick, but as I checked the source (always happy to learn something), I noticed a typo in the block comment above CurrencyValue.parse():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   * &amp;lt;p/&amp;gt;
   * Currency values are expected to be in the format &amp;amp;lt;amount&amp;amp;gt;,&amp;amp;lt;currency code&amp;amp;gt;,
   * &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; example, &lt;span class=&quot;code-quote&quot;&gt;&quot;500,USD&quot;&lt;/span&gt; would represent 5 U.S. Dollars.
   * &amp;lt;p/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I assume it should be &quot;... &lt;b&gt;500&lt;/b&gt; U.S. Dollars ...&quot;&lt;/p&gt;</comment>
                            <comment id="13462354" author="janhoy" created="Tue, 25 Sep 2012 01:51:51 +0000"  >&lt;p&gt;Committed to trunk (1389659), 4.x (1389675) and 4.0.0 (1389679)&lt;/p&gt;

&lt;p&gt;Hoss, I kept the implementation returning null as CurrencyValue as this actually means fewer changes, and is more inline with the other range methods.&lt;br/&gt;
Regarding price_c:*, that did not work in 3.6 either (returns 0 hits), and does not work now. Will file a separate issue.&lt;br/&gt;
Also, polishing JavaDocs can be dealt with post 4.0.0 release.&lt;/p&gt;</comment>
                            <comment id="13610768" author="commit-tag-bot" created="Fri, 22 Mar 2013 16:33:52 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Jan H&#248;ydahl&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1389675&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1389675&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3878&quot; title=&quot;NPE in CurrencyValue.parse() while issuing wildcard range query on a CurrencyField&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3878&quot;&gt;&lt;del&gt;SOLR-3878&lt;/del&gt;&lt;/a&gt;: NPE in CurrencyValue.parse() while issuing wildcard range query on a CurrencyField&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12546404" name="SOLR-3878.patch" size="4235" author="janhoy" created="Mon, 24 Sep 2012 23:16:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>243118</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 35 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03c3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17395</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>