<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:55:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-2168] Velocity facet output for facet missing</title>
                <link>https://issues.apache.org/jira/browse/SOLR-2168</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>
&lt;p&gt;If I add fact.missing to the facet params for a field, the Veolcity output has in the facet list:&lt;/p&gt;

&lt;p&gt;$facet.name (9220)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12477543">SOLR-2168</key>
            <summary>Velocity facet output for facet missing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ehatcher">Erik Hatcher</assignee>
                                    <reporter username="pwolanin">Peter Wolanin</reporter>
                        <labels>
                    </labels>
                <created>Sat, 16 Oct 2010 18:11:04 +0000</created>
                <updated>Mon, 9 May 2016 18:48:02 +0000</updated>
                            <resolved>Tue, 5 Aug 2014 09:49:35 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>4.10</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>Response Writers</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12921737" author="pwolanin" created="Sat, 16 Oct 2010 19:11:29 +0000"  >&lt;p&gt;Attaching a functional (if not elegant) fix - I find the velocity template syntax a little ... annoying&lt;/p&gt;</comment>
                            <comment id="12921831" author="ehatcher" created="Sun, 17 Oct 2010 12:01:07 +0000"  >&lt;p&gt;I&apos;ve taken the patch idea and gave it a slight modification.  In my effort to learn git, I&apos;ve committed it to my &quot;facet_missing&quot; branch here: &lt;a href=&quot;http://github.com/erikhatcher/lucene-solr/commit/70197cca24129141081d83ea422515dc69287e73&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://github.com/erikhatcher/lucene-solr/commit/70197cca24129141081d83ea422515dc69287e73&lt;/a&gt;  (I&apos;ve still got to figure out how to push this change to Solr&apos;s trunk through git)&lt;/p&gt;

&lt;p&gt;I changed the code to so that the #set wasn&apos;t needed and also changed the label shown for missing facets to &amp;lt;No $field.name&amp;gt; to have angle brackets to avoid it looking like a regular value.  These changes ok with you?   (I also cleaned up the formatting of that file slightly)&lt;/p&gt;

&lt;p&gt;Out of curiosity, what&apos;s annoying about Velocity syntax?  (for example, show me how it&apos;d look in your template language of choice)&lt;/p&gt;</comment>
                            <comment id="12921833" author="ehatcher" created="Sun, 17 Oct 2010 12:09:47 +0000"  >&lt;p&gt;Also, in the patch I linked to in my previous comment I made it so that the missing facet isn&apos;t shown if the count is zero.&lt;/p&gt;</comment>
                            <comment id="12921852" author="pwolanin" created="Sun, 17 Oct 2010 14:24:56 +0000"  >&lt;p&gt;Those all sound like good changes.&lt;/p&gt;

&lt;p&gt;In terms of templating -I&apos;d find something like erb, or PHP, or jsp much easier, and I imagine many more people are failiar with those.  So far, I feel like it&apos;s hard to understand in velocity how variables and control structures are distinguished from the output, and it&apos;s not clear that it&apos;s a real template in terms of the way e.g. white space is handled or not.  This is especially true in the case of macro output, where is seems like e.g. the carriage returns and spaces I&apos;d naturally include in control structures to make them readable become part of the output.&lt;/p&gt;

&lt;p&gt;The variable handling is also weird, that I need to use #set() for actual assignment?&lt;/p&gt;

&lt;p&gt;In terms of readablilty, loo for example, at this bit:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;li&amp;gt;&amp;lt;a href=&quot;#url_for_home#lens&amp;amp;fq=$esc.url(
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the &amp;amp;fq= is output in the middle of a series of macro and function calls but nothing visually distinguishes them.  Can I define new functions instead of macros?  If a macro call could be written as #&lt;/p&gt;
{url_for_home}
&lt;p&gt; it would provide more visual separation. &lt;/p&gt;

&lt;p&gt;I notice in the patch you have:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;-${field.name}:[* TO *]&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Looks like the function call can be written like this?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;${esc.url(&lt;span class=&quot;code-quote&quot;&gt;&quot;-${field.name}:[* TO *]&quot;&lt;/span&gt;)}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12921854" author="yseeley@gmail.com" created="Sun, 17 Oct 2010 14:34:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;In my effort to learn git, I&apos;ve committed it to my &quot;facet_missing&quot; branch here&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hmmm, I&apos;m liking this already...&lt;br/&gt;
Nice and easy review of patches (including commenting), and you can get just the patch, or the compete file, or the complete tree.&lt;/p&gt;</comment>
                            <comment id="12921855" author="pwolanin" created="Sun, 17 Oct 2010 14:47:50 +0000"  >&lt;p&gt;&lt;br/&gt;
If you want to start using git more widely for devlopement (assuming people still post the final patches as attachments here) you might want to set up a canonical mirror some place on github so that everyone uses the same initial tree.  We have this for Drupal: &lt;a href=&quot;http://github.com/drupal/drupal&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://github.com/drupal/drupal&lt;/a&gt; and mirroring out of svn is probably even easier if someone has a server and can just run a script on cron every ~15 min.&lt;/p&gt;</comment>
                            <comment id="12921856" author="yseeley@gmail.com" created="Sun, 17 Oct 2010 14:56:05 +0000"  >&lt;p&gt;&lt;a href=&quot;http://git.apache.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git.apache.org/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://github.com/apache/lucene-solr&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://github.com/apache/lucene-solr&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13034994" author="pwolanin" created="Tue, 17 May 2011 19:28:17 +0000"  >&lt;p&gt;Did this change to the templates get committed to the actual Solr repo?&lt;/p&gt;</comment>
                            <comment id="13035015" author="ehatcher" created="Tue, 17 May 2011 20:05:31 +0000"  >&lt;p&gt;Alas not yet, Peter.  Sorry.&lt;/p&gt;</comment>
                            <comment id="14086044" author="jira-bot" created="Tue, 5 Aug 2014 09:43:44 +0000"  >&lt;p&gt;Commit 1615902 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ehatcher&quot; class=&quot;user-hover&quot; rel=&quot;ehatcher&quot;&gt;ehatcher&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1615902&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1615902&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2168&quot; title=&quot;Velocity facet output for facet missing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2168&quot;&gt;&lt;del&gt;SOLR-2168&lt;/del&gt;&lt;/a&gt;: Added support for facet.missing in /browse field and pivot faceting.&lt;/p&gt;</comment>
                            <comment id="14086047" author="jira-bot" created="Tue, 5 Aug 2014 09:46:27 +0000"  >&lt;p&gt;Commit 1615903 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ehatcher&quot; class=&quot;user-hover&quot; rel=&quot;ehatcher&quot;&gt;ehatcher&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1615903&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1615903&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2168&quot; title=&quot;Velocity facet output for facet missing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2168&quot;&gt;&lt;del&gt;SOLR-2168&lt;/del&gt;&lt;/a&gt;: Added support for facet.missing in /browse field and pivot faceting.&lt;/p&gt;</comment>
                            <comment id="14086050" author="ehatcher" created="Tue, 5 Aug 2014 09:49:35 +0000"  >&lt;p&gt;Apologies, Peter, for not knocking this out much sooner.  I also noticed the same treatment was needed for pivot facets so I added that in there as well as defaulting /browse to facet.missing=true.&lt;/p&gt;

&lt;p&gt;And yes, in this case the templating did get a bit ugly because checking for only null in Velocity isn&apos;t as clean, and there&apos;s some code duplication in here (I took care of some of that in a common macro).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12457349" name="SOLR-2168.patch" size="738" author="pwolanin" created="Sat, 16 Oct 2010 19:11:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5342</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03mef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19062</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>