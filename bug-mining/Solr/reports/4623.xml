<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:46:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-12559] FunctionQParser.FLAG_USE_FIELDNAME_SOURCE doesn&apos;t work when subparsers are involved</title>
                <link>https://issues.apache.org/jira/browse/SOLR-12559</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;While working on a patch dealing with json facet syntax parsing, i was trying to write a test verifying the equivalence of 2 json facet requests that should be identical and discovered that when &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10613&quot; title=&quot;Allow value source parser to accept multi-valued fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10613&quot;&gt;&lt;del&gt;SOLR-10613&lt;/del&gt;&lt;/a&gt; was implemented to defer the parsing of field names via &lt;tt&gt;FieldNameValueSource&lt;/tt&gt; the implementation did not account for the invocation of sub parsers via param references.&lt;/p&gt;

&lt;p&gt;specifically &amp;#8211; this json facet request will produce two AggValueSources which are not &lt;tt&gt;equals()&lt;/tt&gt;...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;curl http://localhost:8983/solr/query -d &apos;q=*:*&amp;amp;my_field=foo_i&amp;amp;
json.facet={
  x : &quot;min(foo_i)&quot;,
  y : &quot;min($my_field)&quot;
}&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&quot;x&quot; uses &lt;tt&gt;FieldNameValueSource&lt;/tt&gt; while &quot;y&quot; directly uses an &lt;tt&gt;IntValueSource&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;(It&apos;s not immediately obvious to me if this currently causes any user visible bugs or performance hicups, but it will definitely be problematic for users once we add support for &lt;tt&gt;min(multivalued_field_i)&lt;/tt&gt; )&lt;/p&gt;</description>
                <environment></environment>
        <key id="13172726">SOLR-12559</key>
            <summary>FunctionQParser.FLAG_USE_FIELDNAME_SOURCE doesn&apos;t work when subparsers are involved</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="munendrasn">Munendra S N</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Jul 2018 18:11:34 +0000</created>
                <updated>Sat, 9 Jan 2021 16:59:06 +0000</updated>
                            <resolved>Sat, 9 Jan 2021 16:59:06 +0000</resolved>
                                                    <fixVersion>8.8</fixVersion>
                                    <component>Facet Module</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16546963" author="hossman" created="Tue, 17 Jul 2018 18:12:57 +0000"  >&lt;p&gt;No trivially fix jumped out at me, because the &quot;flags&quot; used by FunctionQParser aren&apos;t an object property that can be set on the subprocessor ... they are only passed as a param directly to &lt;tt&gt;parseValueSource&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="17244417" author="munendrasn" created="Sat, 5 Dec 2020 06:51:36 +0000"  >&lt;p&gt; &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13016520/13016520_SOLR-12559.patch&quot; title=&quot;SOLR-12559.patch attached to SOLR-12559&quot;&gt;SOLR-12559.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;br/&gt;
The patch handles the 1 level dereferenced case like &lt;tt&gt;min($my_field)&lt;/tt&gt; with my_field=some_s but doesn&apos;t handle cases like &lt;tt&gt;min($my_field)&lt;/tt&gt; with my_field=some_s and some_s=actual_field.&lt;/p&gt;</comment>
                            <comment id="17260648" author="munendrasn" created="Thu, 7 Jan 2021 16:56:09 +0000"  >&lt;p&gt;Planning to commit this tomorrow so that this can be included with 8.8 release&lt;/p&gt;</comment>
                            <comment id="17261876" author="jira-bot" created="Sat, 9 Jan 2021 14:49:04 +0000"  >&lt;p&gt;Commit 2c1ec75eaaa6ed60d633459667df74943ae5dd59 in lucene-solr&apos;s branch refs/heads/master from Munendra S N&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=2c1ec75&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=2c1ec75&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12559&quot; title=&quot;FunctionQParser.FLAG_USE_FIELDNAME_SOURCE doesn&amp;#39;t work when subparsers are involved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12559&quot;&gt;&lt;del&gt;SOLR-12559&lt;/del&gt;&lt;/a&gt;: fix error when multi-val fields are derefernced in JSON aggs&lt;/p&gt;

&lt;p&gt;This ensures all derefernced fields are not parsed into actual valuesource&lt;br/&gt;
but parsed into a placeholder value. This works for 1-level of dereferencing&lt;/p&gt;</comment>
                            <comment id="17261899" author="jira-bot" created="Sat, 9 Jan 2021 16:59:05 +0000"  >&lt;p&gt;Commit 503c7eac53e30b252eac89d943948628d48f8555 in lucene-solr&apos;s branch refs/heads/branch_8x from Munendra S N&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=503c7ea&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=503c7ea&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12559&quot; title=&quot;FunctionQParser.FLAG_USE_FIELDNAME_SOURCE doesn&amp;#39;t work when subparsers are involved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12559&quot;&gt;&lt;del&gt;SOLR-12559&lt;/del&gt;&lt;/a&gt;: fix error when multi-val fields are derefernced in JSON aggs&lt;/p&gt;

&lt;p&gt;This ensures all derefernced fields are not parsed into actual valuesource&lt;br/&gt;
but parsed into a placeholder value. This works for 1-level of dereferencing&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13121740">SOLR-11706</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13173265">SOLR-12567</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13016520" name="SOLR-12559.patch" size="10438" author="munendrasn" created="Sat, 5 Dec 2020 06:49:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 44 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vzmn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>