<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:05:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4506] [solr4.0.0] many index.{date} dir in replication node </title>
                <link>https://issues.apache.org/jira/browse/SOLR-4506</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;in our test,we used solrcloud feature in solr4.0(version detail :4.0.0.2012.10.06.03.04.33).&lt;br/&gt;
the solrcloud configuration is 3 shards and 2 replications each shard.&lt;br/&gt;
we found that there are over than 25 dirs which named index.&lt;/p&gt;
{date}
&lt;p&gt; in one replication node belonging to shard 3. &lt;br/&gt;
for example:&lt;br/&gt;
index.20130217233335864  index.20130218012211880  index.20130218015714713  index.20130218023101958  index.20130218030424083  tlog&lt;br/&gt;
index.20130218005648324  index.20130218012751078  index.20130218020141293  &lt;/p&gt;

&lt;p&gt;the issue seems like &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1781&quot; title=&quot;Replication index directories not always cleaned up&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1781&quot;&gt;&lt;del&gt;SOLR-1781&lt;/del&gt;&lt;/a&gt;. but it is fixed in 4.0-BETA,5.0. &lt;br/&gt;
so is solr4.0 ? if it is fixed too in solr4.0, why we find the issue again ?&lt;br/&gt;
what can I do?   &lt;/p&gt;</description>
                <environment>&lt;p&gt;the solr4.0 runs on suse11.&lt;br/&gt;
mem:32G&lt;br/&gt;
cpu:16 cores&lt;/p&gt;</environment>
        <key id="12634075">SOLR-4506</key>
            <summary>[solr4.0.0] many index.{date} dir in replication node </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thelabdude">Timothy Potter</assignee>
                                    <reporter username="zhuojunjian">zhuojunjian</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Feb 2013 08:10:02 +0000</created>
                <updated>Mon, 9 May 2016 18:50:45 +0000</updated>
                            <resolved>Thu, 4 Jun 2015 17:47:56 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>5.3</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>7</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="43200">12h</timeoriginalestimate>
                            <timeestimate seconds="43200">12h</timeestimate>
                                        <comments>
                            <comment id="13587808" author="markrmiller@gmail.com" created="Wed, 27 Feb 2013 00:50:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;if it is fixed too in solr4.0, why we find the issue again ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think because it was a probably different bug? I think it&apos;s probably also going to be fixed in 4.2 given some other recent fixes.&lt;/p&gt;

&lt;p&gt;All high level guesses though.&lt;/p&gt;</comment>
                            <comment id="13587874" author="zhuojunjian" created="Wed, 27 Feb 2013 01:55:14 +0000"  >&lt;p&gt;hi&lt;br/&gt;
thanks for your reply &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
now what we can do ? upgrade solr4.0 to solr4.1 or waiting?&lt;br/&gt;
Some more specific questions:&lt;br/&gt;
1.in what case indexes such as index.&lt;/p&gt;
{date} are created ?&lt;br/&gt;
2.is it configurable to clean up useless index.{date}
&lt;p&gt; in solr4.0 ?&lt;/p&gt;</comment>
                            <comment id="13588100" author="zhuojunjian" created="Wed, 27 Feb 2013 08:06:54 +0000"  >&lt;p&gt;I checked the solr JIRA list and find some similar issues. you can see &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3853&quot; title=&quot;Solr Replication does not delete temp index folder in case of broken master index&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3853&quot;&gt;SOLR-3853&lt;/a&gt;.because we missed the log files, so we can not check what case will cause the issue. And I am trying to duplicate the issue.&lt;/p&gt;
</comment>
                            <comment id="13590369" author="zhuojunjian" created="Fri, 1 Mar 2013 09:33:30 +0000"  >&lt;p&gt;hi&lt;br/&gt;
we have duplicated the issue today.&lt;br/&gt;
step 1: kill one replicate node (node A) , and make it not running.&lt;br/&gt;
step 2: import many data to the solrcloud so that its leader node created too many new indexes.&lt;br/&gt;
step 3: make node A running normally, and it will download files from its leader node.&lt;br/&gt;
step 4: before node A finishes the download operation, kill node A again.&lt;br/&gt;
step 5: then make node A running normally again, we will find there are two index dirs in the ../data/., and if we continue step 3 ~ step 4 , the number of index dirs will increase .&lt;/p&gt;

&lt;p&gt;I think it may be a bug. do you have any idea about that? &lt;/p&gt;</comment>
                            <comment id="13590522" author="markrmiller@gmail.com" created="Fri, 1 Mar 2013 13:44:43 +0000"  >&lt;p&gt;I think its a known issue that interrupted replications will leave dirs around. We can look at cleaning them up on startup or something...&lt;/p&gt;</comment>
                            <comment id="13591953" author="zhuojunjian" created="Mon, 4 Mar 2013 03:07:23 +0000"  >&lt;p&gt;OK&lt;br/&gt;
I got that.&lt;/p&gt;</comment>
                            <comment id="13591978" author="zhuojunjian" created="Mon, 4 Mar 2013 04:19:10 +0000"  >&lt;p&gt;thanks for your reply.&lt;/p&gt;</comment>
                            <comment id="13592075" author="zhuojunjian" created="Mon, 4 Mar 2013 09:07:32 +0000"  >&lt;p&gt;hi&lt;br/&gt;
do you have any plan for this issue ?&lt;br/&gt;
4.1 or other ?&lt;/p&gt;</comment>
                            <comment id="13595633" author="markrmiller@gmail.com" created="Thu, 7 Mar 2013 07:20:57 +0000"  >&lt;p&gt;Yup, I can try and deal with this for 4.3. 4.2 is rolling now and it will take me some time to get this worked out.&lt;/p&gt;</comment>
                            <comment id="13596952" author="zhuojunjian" created="Fri, 8 Mar 2013 09:00:52 +0000"  >&lt;p&gt;hi&lt;br/&gt;
ok.&lt;br/&gt;
do you think when the version 4.3 will be released?&lt;/p&gt;</comment>
                            <comment id="13717164" author="steve_rowe" created="Tue, 23 Jul 2013 18:47:19 +0000"  >&lt;p&gt;Bulk move 4.4 issues to 4.5 and 5.0&lt;/p&gt;</comment>
                            <comment id="13971333" author="thetaphi" created="Wed, 16 Apr 2014 12:57:48 +0000"  >&lt;p&gt;Move issue to Solr 4.9.&lt;/p&gt;</comment>
                            <comment id="14561026" author="thelabdude" created="Wed, 27 May 2015 14:06:57 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt;, I&apos;d like to take this one up as I need it for some other issue I&apos;m working on. Let me know if you have any updated code or ideas on this otherwise, feel free to assign over to me and I&apos;ll work on it for 5.3. Thanks&lt;/p&gt;</comment>
                            <comment id="14561089" author="markrmiller@gmail.com" created="Wed, 27 May 2015 14:45:03 +0000"  >&lt;p&gt;Fire away - fell off my radar - can&apos;t remember 2013 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14571499" author="thelabdude" created="Wed, 3 Jun 2015 19:00:53 +0000"  >&lt;p&gt;Patch that performs the cleanup operation at the end of the &lt;tt&gt;SolrCore.initIndex&lt;/tt&gt; method. The delete work is done in a background daemon thread (which should run quickly). Might be overkill, but I added a check on the &lt;tt&gt;livePaths&lt;/tt&gt; known to the CachingDirectoryFactory before deleting a directory. Patch works with local FS and HDFS.&lt;/p&gt;</comment>
                            <comment id="14572526" author="markrmiller@gmail.com" created="Thu, 4 Jun 2015 10:48:43 +0000"  >&lt;p&gt;+1, LGTM.&lt;/p&gt;</comment>
                            <comment id="14573214" author="jira-bot" created="Thu, 4 Jun 2015 17:36:45 +0000"  >&lt;p&gt;Commit 1683601 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1683601&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1683601&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4506&quot; title=&quot;[solr4.0.0] many index.{date} dir in replication node &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4506&quot;&gt;&lt;del&gt;SOLR-4506&lt;/del&gt;&lt;/a&gt;: Clean-up old (unused) index directories in the background after initializing a new index&lt;/p&gt;</comment>
                            <comment id="14573233" author="jira-bot" created="Thu, 4 Jun 2015 17:47:44 +0000"  >&lt;p&gt;Commit 1683604 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1683604&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1683604&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4506&quot; title=&quot;[solr4.0.0] many index.{date} dir in replication node &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4506&quot;&gt;&lt;del&gt;SOLR-4506&lt;/del&gt;&lt;/a&gt;: Clean-up old (unused) index directories in the background after initializing a new index&lt;/p&gt;</comment>
                            <comment id="14713264" author="shalinmangar" created="Wed, 26 Aug 2015 13:06:14 +0000"  >&lt;p&gt;Bulk close for 5.3.0 release&lt;/p&gt;</comment>
                            <comment id="15065568" author="markrmiller@gmail.com" created="Sat, 19 Dec 2015 23:13:12 +0000"  >&lt;p&gt;This appears to be triggering the following nightly fail: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8447&quot; title=&quot;Nightly fail in org.apache.solr.handler.TestReplicationHandler: ObjectTracker found 9 object(s) that were not released!!! [NRTCachingDirectory, ...&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8447&quot;&gt;SOLR-8447&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12923250">SOLR-8447</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12737347" name="SOLR-4506.patch" size="21661" author="thelabdude" created="Wed, 3 Jun 2015 19:00:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314568</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 48 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ia7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314912</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>