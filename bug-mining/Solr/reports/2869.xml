<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:11:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-8778] Deprecate CSVStrategy&apos;s setters, and make its pre-configured strategies immutable</title>
                <link>https://issues.apache.org/jira/browse/SOLR-8778</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Removing some deprecated things in CSVStrategy (&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8764&quot; title=&quot;Remove all deprecated methods and classes from master prior to the 6.0 release&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8764&quot;&gt;&lt;del&gt;SOLR-8764&lt;/del&gt;&lt;/a&gt;) exposed a bug: it&apos;s possible to redefine the public static &lt;tt&gt;CSVStrategy.{DEFAULT,EXCEL,TDF}_STRATEGY&lt;/tt&gt; strategies, simply by calling their setters.&lt;/p&gt;

&lt;p&gt;Right now that&apos;s happening in &lt;tt&gt;CSVParserTest.testUnicodeEscape()&lt;/tt&gt;, where the default unicode escape interpretation is changed from false to true.  And then if that test happens to run before &lt;tt&gt;CSVStrategyTest.testSetCSVStrategy()&lt;/tt&gt;, which tests that the unicode escape interpretation on the default strategy is set to false, then the latter will fail.&lt;/p&gt;

&lt;p&gt;Example failures: &lt;a href=&quot;http://jenkins.thetaphi.de/job/Lucene-Solr-trunk-Linux/16079/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.thetaphi.de/job/Lucene-Solr-trunk-Linux/16079/&lt;/a&gt; and &lt;a href=&quot;http://jenkins.thetaphi.de/job/Lucene-Solr-trunk-MacOSX/3126/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.thetaphi.de/job/Lucene-Solr-trunk-MacOSX/3126/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12946336">SOLR-8778</key>
            <summary>Deprecate CSVStrategy&apos;s setters, and make its pre-configured strategies immutable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sarowe">Steven Rowe</assignee>
                                    <reporter username="sarowe">Steven Rowe</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Mar 2016 00:00:16 +0000</created>
                <updated>Mon, 24 Feb 2020 18:35:26 +0000</updated>
                            <resolved>Thu, 3 Mar 2016 19:22:10 +0000</resolved>
                                                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15176777" author="steve_rowe" created="Thu, 3 Mar 2016 00:12:49 +0000"  >&lt;p&gt;I don&apos;t think it&apos;s useful to have live setters at all on a CSVStrategy instance - they should be removed.&lt;/p&gt;

&lt;p&gt;I&apos;ll make a patch that:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;deprecates the setters (to be removed in 7.0, sigh)&lt;/li&gt;
	&lt;li&gt;switches the ctors to not call the setters&lt;/li&gt;
	&lt;li&gt;switches all internal Solr usages to treat CSVStrategy instances as if they were immutable (i.e., don&apos;t call any setters)&lt;/li&gt;
	&lt;li&gt;adds a deprecated private CSVStrategy subclass that throws an error from all setters, to be used for the pre-defined static strategies&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15177964" author="steve_rowe" created="Thu, 3 Mar 2016 15:33:11 +0000"  >&lt;p&gt;Patch implementing the idea, additionally adding a ctor param for &lt;tt&gt;printerNewline&lt;/tt&gt; and deprecating &lt;tt&gt;clone()&lt;/tt&gt;, which will also be removed (along with &lt;tt&gt;implements Cloneable&lt;/tt&gt;) in Solr 7, since the sequence (clone(),setXXX(), ...) will no longer be supported - people will just create new immutable instances using one of the ctors.&lt;/p&gt;

&lt;p&gt;I guess a builder would make sense here, since there are now 9 params in the full ctor, but I don&apos;t plan on doing that.&lt;/p&gt;

&lt;p&gt;I&apos;ll make a followup issue to remove the deprecated stuff in master.&lt;/p&gt;

&lt;p&gt;Precommit passes, along with the unit tests in the same package.  Running the full Solr test suite now, once done, assuming no failures, I&apos;ll commit.&lt;/p&gt;</comment>
                            <comment id="15177978" author="thetaphi" created="Thu, 3 Mar 2016 15:46:00 +0000"  >&lt;p&gt;+1 to fix this!&lt;/p&gt;

&lt;p&gt;Ideally we should remove our CSV fork from Solr&apos;s repository! I tried to do that and cut over to the official release, but I gave up; see &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3213&quot; title=&quot;Upgrade to commons-csv once it is released&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3213&quot;&gt;&lt;del&gt;SOLR-3213&lt;/del&gt;&lt;/a&gt;. The commons-csv release is a total rewrite not having any overlap with our early fork in the internal package. The official release does not support most &quot;hackish&quot; stuff, introduced to spare allocations (which is no longer an issue in Java 8, we can do &lt;tt&gt;new CSV*()&lt;/tt&gt; as often as we like, Hotspot optimizes that away). I think this stuff also is the reason for this issue, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;So we should really upgrade to a better CSV parser (official commons-csv) and remove the &quot;reuse&quot; of instances in thread unsafe ways.&lt;/p&gt;</comment>
                            <comment id="15177985" author="steve_rowe" created="Thu, 3 Mar 2016 15:47:59 +0000"  >&lt;p&gt;+1, after the 6.0 release.  I&apos;ll commit the patch for now.&lt;/p&gt;</comment>
                            <comment id="15177998" author="jira-bot" created="Thu, 3 Mar 2016 15:54:56 +0000"  >&lt;p&gt;Commit a079ff2528a384468289a8fb80787b418c887496 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a079ff2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a079ff2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8778&quot; title=&quot;Deprecate CSVStrategy&amp;#39;s setters, and make its pre-configured strategies immutable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8778&quot;&gt;&lt;del&gt;SOLR-8778&lt;/del&gt;&lt;/a&gt;: Deprecate CSVStrategy&apos;s setters, and make its pre-configured strategies immutable&lt;/p&gt;</comment>
                            <comment id="15178002" author="jira-bot" created="Thu, 3 Mar 2016 15:57:19 +0000"  >&lt;p&gt;Commit eb0c3bd90a4feee61b7c9b4c21a78a9f9bace0ff in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=eb0c3bd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=eb0c3bd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8778&quot; title=&quot;Deprecate CSVStrategy&amp;#39;s setters, and make its pre-configured strategies immutable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8778&quot;&gt;&lt;del&gt;SOLR-8778&lt;/del&gt;&lt;/a&gt;: Deprecate CSVStrategy&apos;s setters, and make its pre-configured strategies immutable&lt;/p&gt;</comment>
                            <comment id="15178004" author="jira-bot" created="Thu, 3 Mar 2016 15:57:57 +0000"  >&lt;p&gt;Commit 8034b5aabd17aa60a37417359841623b07a9e927 in lucene-solr&apos;s branch refs/heads/branch_6_0 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=8034b5a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=8034b5a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8778&quot; title=&quot;Deprecate CSVStrategy&amp;#39;s setters, and make its pre-configured strategies immutable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8778&quot;&gt;&lt;del&gt;SOLR-8778&lt;/del&gt;&lt;/a&gt;: Deprecate CSVStrategy&apos;s setters, and make its pre-configured strategies immutable&lt;/p&gt;</comment>
                            <comment id="15178422" author="steve_rowe" created="Thu, 3 Mar 2016 19:22:10 +0000"  >&lt;p&gt;Resolving as fixed.  I&apos;ll hold off creating a JIRA to remove the deprecated stuff in master, since as Uwe says we should instead remove the whole fork.&lt;/p&gt;</comment>
                            <comment id="15178593" author="thetaphi" created="Thu, 3 Mar 2016 20:47:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;ll hold off creating a JIRA to remove the deprecated stuff in master, since as Uwe says we should instead remove the whole fork.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We should investigate this. Issue with patch is &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3213&quot; title=&quot;Upgrade to commons-csv once it is released&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3213&quot;&gt;&lt;del&gt;SOLR-3213&lt;/del&gt;&lt;/a&gt;, but I gave up because to fix this you have to understand the whole CSV handler code (and I was not familar to it when I tried to do this).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13287286">SOLR-14279</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12545576">SOLR-3213</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12945714">SOLR-8764</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12791189" name="SOLR-8778.patch" size="20632" author="sarowe" created="Thu, 3 Mar 2016 15:33:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2u29b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>