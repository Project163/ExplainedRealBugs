<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:52:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16589] Large fields with large=&quot;true&quot; can be truncated when using unicode values</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16589</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;h3&gt;&lt;a name=&quot;Summary&quot;&gt;&lt;/a&gt;Summary&lt;/h3&gt;
&lt;p&gt;For fields using large=&quot;true&quot;, large fields (which is what they are intended for) can be truncated in v9+ of Solr.&lt;/p&gt;

&lt;p&gt;Example fieldtype definition:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;fieldtype name=&lt;span class=&quot;code-quote&quot;&gt;&quot;string_large&quot;&lt;/span&gt; &#160;class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.TextField&quot;&lt;/span&gt; multiValued=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt; indexed=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt; stored=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt; omitNorms=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt; large=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt; /&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;h3&gt;&lt;a name=&quot;Cause&quot;&gt;&lt;/a&gt;Cause&lt;/h3&gt;
&lt;p&gt;Looks like this is a bug introduced along with &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-8805&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/LUCENE-8805&lt;/a&gt; / &lt;a href=&quot;https://github.com/apache/lucene/issues/9849&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene/issues/9849&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The current code is here:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/solr/blob/main/solr/core/src/java/org/apache/solr/search/SolrDocumentFetcher.java#L511&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/blob/main/solr/core/src/java/org/apache/solr/search/SolrDocumentFetcher.java#L511&lt;/a&gt;&lt;br/&gt;
&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void stringField(FieldInfo fieldInfo, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; value) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    Objects.requireNonNull(value, &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; value should not be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;);
&#160;   bytesRef.bytes = value.getBytes(StandardCharsets.UTF_8);
    bytesRef.length = value.length();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;br/&gt;
Specifically with respect to &quot;large&quot; fields handling.&lt;/p&gt;

&lt;p&gt;The length in utf8 bytes will often be longer than the string length `value.length()`, hence the truncation.&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;Fix&quot;&gt;&lt;/a&gt;Fix&lt;/h3&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
bytesRef.length = bytesRef.bytes.length &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13514047">SOLR-16589</key>
            <summary>Large fields with large=&quot;true&quot; can be truncated when using unicode values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="krisden">Kevin Risden</assignee>
                                    <reporter username="nosvalds">Nikolas Osvalds</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Dec 2022 13:33:58 +0000</created>
                <updated>Fri, 17 Oct 2025 20:05:15 +0000</updated>
                            <resolved>Fri, 16 Dec 2022 13:44:07 +0000</resolved>
                                    <version>9.0</version>
                    <version>9.1</version>
                                    <fixVersion>9.2</fixVersion>
                    <fixVersion>9.1.1</fixVersion>
                    <fixVersion>10.0</fixVersion>
                                    <component>search</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="17648108" author="risdenk" created="Thu, 15 Dec 2022 15:11:52 +0000"  >&lt;p&gt;Before saying this ends up in Apache Lucene land - I see that &lt;a href=&quot;https://github.com/apache/lucene/issues/12021&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene/issues/12021&lt;/a&gt; was already opened there. I&apos;m going to update the links above to point to the Apache Solr code.&lt;/p&gt;</comment>
                            <comment id="17648216" author="jira-bot" created="Thu, 15 Dec 2022 19:15:08 +0000"  >&lt;p&gt;Commit 45834aa62454b15f6bb3b4ebeeee2f0a94fc11f9 in solr&apos;s branch refs/heads/main from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=45834aa6245&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=45834aa6245&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16589&quot; title=&quot;Large fields with large=&amp;quot;true&amp;quot; can be truncated when using unicode values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16589&quot;&gt;&lt;del&gt;SOLR-16589&lt;/del&gt;&lt;/a&gt;: Large fields with large=true can be truncated when using unicode values (#1241)&lt;/p&gt;
</comment>
                            <comment id="17648277" author="jira-bot" created="Thu, 15 Dec 2022 22:39:14 +0000"  >&lt;p&gt;Commit 81ad26810b478ab9134827feb08cdac213ca6e3a in solr&apos;s branch refs/heads/branch_9x from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=81ad26810b4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=81ad26810b4&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16589&quot; title=&quot;Large fields with large=&amp;quot;true&amp;quot; can be truncated when using unicode values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16589&quot;&gt;&lt;del&gt;SOLR-16589&lt;/del&gt;&lt;/a&gt;: Large fields with large=true can be truncated when using unicode values (#1241)&lt;/p&gt;
</comment>
                            <comment id="17648279" author="risdenk" created="Thu, 15 Dec 2022 22:43:38 +0000"  >&lt;p&gt;Sigh let it sit all day and then Jenkins fails with the following right as I backport this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2&amp;gt; 915665 INFO  (TEST-LargeFieldTest.test-seed#[511A4AF18155F449]) [] o.a.s.SolrTestCaseJ4 ###Ending test
   &amp;gt;     org.junit.ComparisonFailure: expected:&amp;lt;&#359;&#1018417;&#61007;&#57413;)[ï¿½]&#43189;	&#6191;&#60036;&#59828;&#64346;&#1019422;&#30421;&#54816;&amp;gt; but was:&amp;lt;&#359;&#1018417;&#61007;&#57413;)[#14;]&#43189;	&#6191;&#60036;&#59828;&#64346;&#1019422;&#30421;&#54816;&amp;gt;
   &amp;gt;         at __randomizedtesting.SeedInfo.seed([511A4AF18155F449:D94E752B2FA999B1]:0)
   &amp;gt;         at org.junit.Assert.assertEquals(Assert.java:117)
   &amp;gt;         at org.junit.Assert.assertEquals(Assert.java:146)
   &amp;gt;         at org.apache.solr.search.LargeFieldTest.test(LargeFieldTest.java:114)
   &amp;gt;         at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
   &amp;gt;         at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
   &amp;gt;         at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
   &amp;gt;         at java.base/java.lang.reflect.Method.invoke(Method.java:566)
   &amp;gt;         at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1758)
   &amp;gt;         at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:946)
   &amp;gt;         at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:982)
   &amp;gt;         at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:996)
   &amp;gt;         at com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:80)
   &amp;gt;         at org.junit.rules.RunRules.evaluate(RunRules.java:20)
   &amp;gt;         at org.apache.lucene.tests.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:44)
   &amp;gt;         at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
   &amp;gt;         at org.apache.lucene.tests.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:45)
   &amp;gt;         at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
   &amp;gt;         at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
   &amp;gt;         at org.junit.rules.RunRules.evaluate(RunRules.java:20)
   &amp;gt;         at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
   &amp;gt;         at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)
   &amp;gt;         at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:843)
   &amp;gt;         at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:490)
   &amp;gt;         at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:955)
   &amp;gt;         at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:840)
   &amp;gt;         at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:891)
   &amp;gt;         at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:902)
   &amp;gt;         at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
   &amp;gt;         at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
   &amp;gt;         at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
   &amp;gt;         at com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:80)
   &amp;gt;         at org.junit.rules.RunRules.evaluate(RunRules.java:20)
   &amp;gt;         at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
   &amp;gt;         at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
   &amp;gt;         at org.apache.lucene.tests.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:38)
   &amp;gt;         at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
   &amp;gt;         at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
   &amp;gt;         at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
   &amp;gt;         at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
   &amp;gt;         at org.apache.lucene.tests.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53)
   &amp;gt;         at org.apache.lucene.tests.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
   &amp;gt;         at org.apache.lucene.tests.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
   &amp;gt;         at org.apache.lucene.tests.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
   &amp;gt;         at org.apache.lucene.tests.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:47)
   &amp;gt;         at org.junit.rules.RunRules.evaluate(RunRules.java:20)
   &amp;gt;         at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
   &amp;gt;         at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:390)
   &amp;gt;         at com.carrotsearch.randomizedtesting.ThreadLeakControl.lambda$forkTimeoutingTask$0(ThreadLeakControl.java:850)
   &amp;gt;         at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:829)
  2&amp;gt; NOTE: reproduce with: gradlew test --tests LargeFieldTest.test -Dtests.seed=511A4AF18155F449 -Dtests.multiplier=2 -Dtests.locale=br-FR -Dtests.timezone=Europe/Malta -Dtests.asserts=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.file.encoding=UTF-8
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ll take a look either later tonight or tomorrow.&lt;/p&gt;</comment>
                            <comment id="17648284" author="risdenk" created="Thu, 15 Dec 2022 23:11:33 +0000"  >&lt;p&gt;Well being a bit too adventurous with the unicode &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; This causes issues w/ XML so need to switch to the conveniently named method randomXmlUsableUnicodeString to generate the unicode.&lt;/p&gt;</comment>
                            <comment id="17648285" author="jira-bot" created="Thu, 15 Dec 2022 23:11:49 +0000"  >&lt;p&gt;Commit f00c157ff4b7249a8503154cf11c125cae8c75bc in solr&apos;s branch refs/heads/main from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=f00c157ff4b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=f00c157ff4b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16589&quot; title=&quot;Large fields with large=&amp;quot;true&amp;quot; can be truncated when using unicode values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16589&quot;&gt;&lt;del&gt;SOLR-16589&lt;/del&gt;&lt;/a&gt;: Fix test to use reasonable unicode in xml&lt;/p&gt;</comment>
                            <comment id="17648286" author="jira-bot" created="Thu, 15 Dec 2022 23:12:10 +0000"  >&lt;p&gt;Commit e72c4bf368de65f0af5d7c2add71bb2b180a69b0 in solr&apos;s branch refs/heads/branch_9x from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=e72c4bf368d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=e72c4bf368d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16589&quot; title=&quot;Large fields with large=&amp;quot;true&amp;quot; can be truncated when using unicode values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16589&quot;&gt;&lt;del&gt;SOLR-16589&lt;/del&gt;&lt;/a&gt;: Fix test to use reasonable unicode in xml&lt;/p&gt;</comment>
                            <comment id="17648287" author="jira-bot" created="Thu, 15 Dec 2022 23:12:31 +0000"  >&lt;p&gt;Commit d558cec6582a6084d0bb163d55b960e00d340a44 in solr&apos;s branch refs/heads/branch_9_1 from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=d558cec6582&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=d558cec6582&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16589&quot; title=&quot;Large fields with large=&amp;quot;true&amp;quot; can be truncated when using unicode values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16589&quot;&gt;&lt;del&gt;SOLR-16589&lt;/del&gt;&lt;/a&gt;: Large fields with large=true can be truncated when using unicode values (#1241)&lt;/p&gt;</comment>
                            <comment id="17648288" author="jira-bot" created="Thu, 15 Dec 2022 23:12:32 +0000"  >&lt;p&gt;Commit 0100f191125a6dd75e169cbb76769238fadaedc5 in solr&apos;s branch refs/heads/branch_9_1 from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=0100f191125&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=0100f191125&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16589&quot; title=&quot;Large fields with large=&amp;quot;true&amp;quot; can be truncated when using unicode values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16589&quot;&gt;&lt;del&gt;SOLR-16589&lt;/del&gt;&lt;/a&gt;: Fix test to use reasonable unicode in xml&lt;/p&gt;</comment>
                            <comment id="17648289" author="jira-bot" created="Thu, 15 Dec 2022 23:14:11 +0000"  >&lt;p&gt;Commit 853fd084c1429593b72d75e1c2d400065529cb54 in solr&apos;s branch refs/heads/main from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=853fd084c14&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=853fd084c14&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16589&quot; title=&quot;Large fields with large=&amp;quot;true&amp;quot; can be truncated when using unicode values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16589&quot;&gt;&lt;del&gt;SOLR-16589&lt;/del&gt;&lt;/a&gt;: move changes to 9.1.1&lt;/p&gt;</comment>
                            <comment id="17648291" author="jira-bot" created="Thu, 15 Dec 2022 23:15:40 +0000"  >&lt;p&gt;Commit 28d95c38fcdf7e51473d4df4e51770d1e9a2a2e4 in solr&apos;s branch refs/heads/branch_9x from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=28d95c38fcd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=28d95c38fcd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16589&quot; title=&quot;Large fields with large=&amp;quot;true&amp;quot; can be truncated when using unicode values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16589&quot;&gt;&lt;del&gt;SOLR-16589&lt;/del&gt;&lt;/a&gt;: move changes to 9.1.1&lt;/p&gt;</comment>
                            <comment id="17648617" author="risdenk" created="Fri, 16 Dec 2022 13:00:06 +0000"  >&lt;p&gt;Well another reproducing seed:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
./gradlew test --tests LargeFieldTest.test -Dtests.seed=A5EC77E6B81D86A2 -Dtests.multiplier=3 -Dtests.locale=jgo-CM -Dtests.timezone=Asia/Ashgabat -Dtests.asserts=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.file.encoding=UTF-8

...

  2&amp;gt; 2106 INFO  (TEST-LargeFieldTest.test-seed#[A5EC77E6B81D86A2]) [] o.a.s.SolrTestCaseJ4 ###Ending test
   &amp;gt;     org.junit.ComparisonFailure: expected:&amp;lt;[HXwf^Z-]DZSy&amp;gt; but was:&amp;lt;[#24;HXwf^Z-#1;]DZSy&amp;gt;
   &amp;gt;         at __randomizedtesting.SeedInfo.seed([A5EC77E6B81D86A2:2DB8483C16E1EB5A]:0)
   &amp;gt;         at org.junit.Assert.assertEquals(Assert.java:117)
   &amp;gt;         at org.junit.Assert.assertEquals(Assert.java:146)
   &amp;gt;         at org.apache.solr.search.LargeFieldTest.test(LargeFieldTest.java:113)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The string starts with a CAN character - &lt;a href=&quot;https://www.compart.com/en/unicode/U+0018&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.compart.com/en/unicode/U+0018&lt;/a&gt; which is encoded as #24; and a SOH character - &lt;a href=&quot;https://www.compart.com/en/unicode/U+0001&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.compart.com/en/unicode/U+0001&lt;/a&gt; that is encoded as #1;.&lt;/p&gt;

&lt;p&gt;I haven&apos;t found WHY this is happening yet. It might be related to the standard analyzer used for the field type - that we don&apos;t get EXACTLY back what we put into the field.&lt;/p&gt;</comment>
                            <comment id="17648619" author="risdenk" created="Fri, 16 Dec 2022 13:18:54 +0000"  >&lt;p&gt;Ah so found a sneaky method in the test that is used when inserting a document called &quot;XML.escapeCharData&quot; - This is a Solr specific test method that changes the document that gets inserted. I don&apos;t know why it exists but just adding this to the test to ensure the string matches.&lt;/p&gt;</comment>
                            <comment id="17648631" author="risdenk" created="Fri, 16 Dec 2022 13:38:27 +0000"  >&lt;p&gt;Alright so ran `./gradlew -p solr/core beast --tests LargeFieldTest -Ptests.dups=100` and no new failures. So I feel pretty good about this. I previously had run it ~10 times before pushing.&lt;/p&gt;</comment>
                            <comment id="17648632" author="jira-bot" created="Fri, 16 Dec 2022 13:38:38 +0000"  >&lt;p&gt;Commit b6bfb56ccb56937d28ed8190126ea92c618cd5c9 in solr&apos;s branch refs/heads/main from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=b6bfb56ccb5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=b6bfb56ccb5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16589&quot; title=&quot;Large fields with large=&amp;quot;true&amp;quot; can be truncated when using unicode values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16589&quot;&gt;&lt;del&gt;SOLR-16589&lt;/del&gt;&lt;/a&gt;: Fix test to use same xml encoding used&lt;/p&gt;</comment>
                            <comment id="17648634" author="jira-bot" created="Fri, 16 Dec 2022 13:39:30 +0000"  >&lt;p&gt;Commit 0b7d0a02f630ce751aecb608b2e402136c166e17 in solr&apos;s branch refs/heads/branch_9x from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=0b7d0a02f63&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=0b7d0a02f63&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16589&quot; title=&quot;Large fields with large=&amp;quot;true&amp;quot; can be truncated when using unicode values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16589&quot;&gt;&lt;del&gt;SOLR-16589&lt;/del&gt;&lt;/a&gt;: Fix test to use same xml encoding used&lt;/p&gt;</comment>
                            <comment id="17648635" author="jira-bot" created="Fri, 16 Dec 2022 13:42:08 +0000"  >&lt;p&gt;Commit a29e95e225b6f015ee366234f528c9445575e124 in solr&apos;s branch refs/heads/branch_9_1 from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=a29e95e225b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=a29e95e225b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16589&quot; title=&quot;Large fields with large=&amp;quot;true&amp;quot; can be truncated when using unicode values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16589&quot;&gt;&lt;del&gt;SOLR-16589&lt;/del&gt;&lt;/a&gt;: Fix test to use same xml encoding used&lt;/p&gt;</comment>
                            <comment id="17680672" author="mgibney" created="Wed, 25 Jan 2023 16:11:07 +0000"  >&lt;p&gt;Closing after the 9.1.1 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13234126">LUCENE-8805</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 41 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1e4a0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>