<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:33:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4134] Cannot &quot;set&quot; multiple values into multivalued field with partial updates when using the standard RequestWriter.</title>
                <link>https://issues.apache.org/jira/browse/SOLR-4134</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I would like to &quot;set&quot; multiple values into a field using partial updates like so:
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; values = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt;();
values.add(&lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;);
values.add(&lt;span class=&quot;code-quote&quot;&gt;&quot;two&quot;&lt;/span&gt;);
values.add(&lt;span class=&quot;code-quote&quot;&gt;&quot;three&quot;&lt;/span&gt;);
doc.setField(field, singletonMap(&lt;span class=&quot;code-quote&quot;&gt;&quot;set&quot;&lt;/span&gt;, values));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When using the standard XML-based RequestWriter, you end up with a single value that looks like &lt;span class=&quot;error&quot;&gt;&amp;#91;one, two, three&amp;#93;&lt;/span&gt;, because of the toString() calls on lines 130 and 132 of ClientUtils. It works properly when using the BinaryRequestWriter.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12618405">SOLR-4134</key>
            <summary>Cannot &quot;set&quot; multiple values into multivalued field with partial updates when using the standard RequestWriter.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalin">Shalin Shekhar Mangar</assignee>
                                    <reporter username="willbutler">Will Butler</reporter>
                        <labels>
                    </labels>
                <created>Sat, 1 Dec 2012 00:07:03 +0000</created>
                <updated>Thu, 24 Jan 2013 06:33:42 +0000</updated>
                            <resolved>Fri, 28 Dec 2012 15:17:24 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                                    <component>clients - java</component>
                    <component>update</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13537014" author="shalinmangar" created="Thu, 20 Dec 2012 13:27:15 +0000"  >&lt;p&gt;Patch with test and fix.&lt;/p&gt;

&lt;p&gt;An example of the XML request with this patch for the example given in the issue description would be: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;field name=&lt;span class=&quot;code-quote&quot;&gt;&quot;multi_ss&quot;&lt;/span&gt; update=&lt;span class=&quot;code-quote&quot;&gt;&quot;set&quot;&lt;/span&gt;&amp;gt;first&amp;lt;/field&amp;gt;
&amp;lt;field name=&lt;span class=&quot;code-quote&quot;&gt;&quot;multi_ss&quot;&lt;/span&gt; update=&lt;span class=&quot;code-quote&quot;&gt;&quot;set&quot;&lt;/span&gt;&amp;gt;second&amp;lt;/field&amp;gt;
&amp;lt;field name=&lt;span class=&quot;code-quote&quot;&gt;&quot;multi_ss&quot;&lt;/span&gt; update=&lt;span class=&quot;code-quote&quot;&gt;&quot;set&quot;&lt;/span&gt;&amp;gt;third&amp;lt;/field&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ll commit this tomorrow.&lt;/p&gt;</comment>
                            <comment id="13537817" author="shalinmangar" created="Fri, 21 Dec 2012 12:28:12 +0000"  >&lt;p&gt;Added a test for &quot;add&quot; operation too.&lt;/p&gt;

&lt;p&gt;I&apos;ll commit shortly.&lt;/p&gt;</comment>
                            <comment id="13537838" author="commit-tag-bot" created="Fri, 21 Dec 2012 13:04:46 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; Shalin Shekhar Mangar&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1424906&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1424906&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4134&quot; title=&quot;Cannot &amp;quot;set&amp;quot; multiple values into multivalued field with partial updates when using the standard RequestWriter.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4134&quot;&gt;&lt;del&gt;SOLR-4134&lt;/del&gt;&lt;/a&gt;: Standard (XML) request writer cannot &quot;set&quot; multiple values into&lt;br/&gt;
  multivalued field with partial updates. (Luis Cappa Banda, Will Butler, shalin)&lt;/p&gt;</comment>
                            <comment id="13537843" author="commit-tag-bot" created="Fri, 21 Dec 2012 13:18:42 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Shalin Shekhar Mangar&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1424907&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1424907&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4134&quot; title=&quot;Cannot &amp;quot;set&amp;quot; multiple values into multivalued field with partial updates when using the standard RequestWriter.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4134&quot;&gt;&lt;del&gt;SOLR-4134&lt;/del&gt;&lt;/a&gt;: Standard (XML) request writer cannot &quot;set&quot; multiple values into&lt;br/&gt;
  multivalued field with partial updates. (Luis Cappa Banda, Will Butler, shalin)&lt;/p&gt;</comment>
                            <comment id="13537845" author="shalinmangar" created="Fri, 21 Dec 2012 13:19:43 +0000"  >&lt;p&gt;Fixed in trunk and branch_4x&lt;/p&gt;</comment>
                            <comment id="13537900" author="commit-tag-bot" created="Fri, 21 Dec 2012 14:16:52 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Shalin Shekhar Mangar&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1424911&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1424911&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4134&quot; title=&quot;Cannot &amp;quot;set&amp;quot; multiple values into multivalued field with partial updates when using the standard RequestWriter.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4134&quot;&gt;&lt;del&gt;SOLR-4134&lt;/del&gt;&lt;/a&gt;: Added missing @Test annotation on unit test method&lt;/p&gt;</comment>
                            <comment id="13537903" author="commit-tag-bot" created="Fri, 21 Dec 2012 14:17:06 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; Shalin Shekhar Mangar&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1424909&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1424909&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4134&quot; title=&quot;Cannot &amp;quot;set&amp;quot; multiple values into multivalued field with partial updates when using the standard RequestWriter.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4134&quot;&gt;&lt;del&gt;SOLR-4134&lt;/del&gt;&lt;/a&gt;: Added missing @Test annotation on unit test method&lt;/p&gt;</comment>
                            <comment id="13538174" author="jmcejuela" created="Fri, 21 Dec 2012 16:17:30 +0000"  >&lt;p&gt;Awesome! Thanks for the great work&lt;/p&gt;</comment>
                            <comment id="13540256" author="yseeley@gmail.com" created="Fri, 28 Dec 2012 01:26:28 +0000"  >&lt;p&gt;Reopening - I think this broke increment.&lt;/p&gt;

&lt;p&gt;I added a test here:&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1426373&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1426373&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The increment code ends up trying to parse &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&quot; because the XML loader always represents extended info (like atomic updates) as a List&amp;lt;Object&amp;gt;.  We should try to preserve as much information as possible and only use a list when there are multiple values (or if list syntax is actually used).&lt;/p&gt;</comment>
                            <comment id="13540479" author="commit-tag-bot" created="Fri, 28 Dec 2012 15:06:24 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; Shalin Shekhar Mangar&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1426537&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1426537&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4134&quot; title=&quot;Cannot &amp;quot;set&amp;quot; multiple values into multivalued field with partial updates when using the standard RequestWriter.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4134&quot;&gt;&lt;del&gt;SOLR-4134&lt;/del&gt;&lt;/a&gt; &amp;#8211; Use List as value type only when multiple values are present in atomic updates&lt;/p&gt;</comment>
                            <comment id="13540482" author="commit-tag-bot" created="Fri, 28 Dec 2012 15:12:43 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Shalin Shekhar Mangar&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1426538&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1426538&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4134&quot; title=&quot;Cannot &amp;quot;set&amp;quot; multiple values into multivalued field with partial updates when using the standard RequestWriter.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4134&quot;&gt;&lt;del&gt;SOLR-4134&lt;/del&gt;&lt;/a&gt; &amp;#8211; Use List as value type only when multiple values are present in atomic updates&lt;/p&gt;</comment>
                            <comment id="13540483" author="shalinmangar" created="Fri, 28 Dec 2012 15:17:09 +0000"  >&lt;p&gt;Forgot to attach the fix here before committing the fix.&lt;/p&gt;</comment>
                            <comment id="13548898" author="ehatcher" created="Wed, 9 Jan 2013 19:46:09 +0000"  >&lt;p&gt;Shalin - can you add a CHANGES entry for this one too so it&apos;s easier for others that experience this issue with 4.0 to see that it got fixed in 4.1+?  Thanks!&lt;/p&gt;</comment>
                            <comment id="13552434" author="shalinmangar" created="Mon, 14 Jan 2013 05:07:04 +0000"  >&lt;p&gt;Hi Erick, a change log entry was added with my first commit.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12626580">SOLR-4286</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12626966">SOLR-4294</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12616223">SOLR-4080</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12626580">SOLR-4286</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12562586" name="SOLR-4134-nolist-fix.patch" size="3510" author="shalin" created="Fri, 28 Dec 2012 15:17:09 +0000"/>
                            <attachment id="12562072" name="SOLR-4134.patch" size="8654" author="shalin" created="Fri, 21 Dec 2012 12:28:12 +0000"/>
                            <attachment id="12561886" name="SOLR-4134.patch" size="8738" author="shalin" created="Thu, 20 Dec 2012 13:27:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>293195</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0suqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>166457</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>