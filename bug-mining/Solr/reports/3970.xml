<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:33:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-12513] Reproducing TestCodecSupport.testMixedCompressionMode failure</title>
                <link>https://issues.apache.org/jira/browse/SOLR-12513</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;From &lt;a href=&quot;https://jenkins.thetaphi.de/job/Lucene-Solr-master-Windows/7375/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jenkins.thetaphi.de/job/Lucene-Solr-master-Windows/7375/&lt;/a&gt; (reproduces for me on Linux):&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Checking out Revision 3b9d3a760a432b97aad2c08b2f778fa2344eb14a (refs/remotes/origin/master)
[...]
   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=TestCodecSupport -Dtests.method=testMixedCompressionMode -Dtests.seed=F584376A20EC9B2D -Dtests.slow=true -Dtests.locale=ha-GH -Dtests.timezone=Africa/Nairobi -Dtests.asserts=true -Dtests.file.encoding=UTF-8
   [junit4] FAILURE 0.59s J1 | TestCodecSupport.testMixedCompressionMode &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: org.junit.ComparisonFailure: Expecting compression mode string to be BEST_SPEED but got: BEST_COMPRESSION
   [junit4]    &amp;gt;  SegmentInfo: _5(8.0.0):c1
   [junit4]    &amp;gt;  SegmentInfos: segments_e: _7(8.0.0):c2 _5(8.0.0):c1
   [junit4]    &amp;gt;  Codec: Lucene70 expected:&amp;lt;BEST_[SPEED]&amp;gt; but was:&amp;lt;BEST_[COMPRESSION]&amp;gt;
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([F584376A20EC9B2D:2BF1400E658E6E9C]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.core.TestCodecSupport.lambda$assertCompressionMode$0(TestCodecSupport.java:115)
   [junit4]    &amp;gt; 	at org.apache.solr.core.SolrCore.withSearcher(SolrCore.java:1874)
   [junit4]    &amp;gt; 	at org.apache.solr.core.TestCodecSupport.assertCompressionMode(TestCodecSupport.java:112)
   [junit4]    &amp;gt; 	at org.apache.solr.core.TestCodecSupport.testMixedCompressionMode(TestCodecSupport.java:157)
   [junit4]    &amp;gt; 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
   [junit4]    &amp;gt; 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
   [junit4]    &amp;gt; 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
   [junit4]    &amp;gt; 	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
   [junit4]    &amp;gt; 	at java.base/java.lang.Thread.run(Thread.java:844)
[...]
   [junit4]   2&amp;gt; NOTE: test params are: codec=Asserting(Lucene70): {}, docValues:{}, maxPointsInLeafNode=1658, maxMBSortInHeap=7.737749859284375, sim=Asserting(org.apache.lucene.search.similarities.AssertingSimilarity@2da9a1c5), locale=ha-GH, timezone=Africa/Nairobi
   [junit4]   2&amp;gt; NOTE: Windows 10 10.0 amd64/Oracle Corporation 10.0.1 (64-bit)/cpus=3,threads=1,free=39067800,total=97320960
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13167850">SOLR-12513</key>
            <summary>Reproducing TestCodecSupport.testMixedCompressionMode failure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="erickerickson">Erick Erickson</assignee>
                                    <reporter username="sarowe">Steven Rowe</reporter>
                        <labels>
                    </labels>
                <created>Sun, 24 Jun 2018 03:05:31 +0000</created>
                <updated>Sat, 8 Jun 2019 15:00:57 +0000</updated>
                            <resolved>Mon, 25 Jun 2018 22:41:17 +0000</resolved>
                                                    <fixVersion>7.5</fixVersion>
                    <fixVersion>8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16521528" author="erickerickson" created="Sun, 24 Jun 2018 16:00:49 +0000"  >&lt;p&gt;Digging....&lt;/p&gt;</comment>
                            <comment id="16521867" author="erickerickson" created="Mon, 25 Jun 2018 05:40:12 +0000"  >&lt;p&gt;Fixing the test is easy enough, just specify maxSegments=1 for the optimize call at line 156.&lt;/p&gt;

&lt;p&gt;change &lt;tt&gt;assertU(optimize());&lt;/tt&gt; to &lt;tt&gt;assertU(optimize(&quot;maxSegments&quot;, &quot;1&quot;));&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;This does call into question other places where optimize assumes 1 setment, so I took a quick look through the other calls to assertU(optimize()) and found several that have comments or it&apos;s immediately obvious that they expect exactly one segment and changed those too. &lt;/p&gt;

&lt;p&gt;Along the way I looked at DirectUpdateHandlerOptimizeTest as that called optimize, and I&apos;m puzzled. The last time that test did anything except test that calling optimize with -1 threw an error was... 2008.&lt;/p&gt;

&lt;p&gt;The assertNumSegments was commented out about then. This change predates TieredMergePolicy, which doesn&apos;t behave the way this test expects anyway. So if you re-enable assertNumSegments (well, actually use one that doesn&apos;t read the directory over in TestMergePolicyConfig) then the very first assert fails.&lt;/p&gt;

&lt;p&gt;Testing the assert failure with a segment count of -1 seems like a good thing to keep so I&apos;ll move if over into TestMergePolicyConfig and delete DirectUpdateHandlerOptimizeTest. Since it doesn&apos;t really care what merge policy is used, it just needs to be tested once.&lt;/p&gt;

&lt;p&gt;There are two mentions in: &lt;br/&gt;
..../lucene/tools/junit4/cached-timehints.txt&lt;br/&gt;
I&apos;m not familiar with this file, should the references just be removed? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; do you know?&lt;/p&gt;

&lt;p&gt;Meanwhile I&apos;ll beast TestCodecSupport tonight.&lt;/p&gt;
</comment>
                            <comment id="16522417" author="steve_rowe" created="Mon, 25 Jun 2018 15:14:05 +0000"  >&lt;blockquote&gt;&lt;p&gt;There are two mentions in: &lt;br/&gt;
 ..../lucene/tools/junit4/cached-timehints.txt&lt;br/&gt;
 I&apos;m not familiar with this file, should the references just be removed? Steve Rowe do you know?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That file is generated locally based on test timings. I think it&apos;s okay to ignore them, but if you&apos;re worried about it you can regenerate the file using &lt;tt&gt;ant test-updatecache&lt;/tt&gt; (if you&apos;re curious you can see what it does in &lt;tt&gt;lucene/common-build.xml&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16522489" author="erickerickson" created="Mon, 25 Jun 2018 16:22:41 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I regenerated the hints file, so the actual code changes are very small compared to the total patch size.&lt;/p&gt;

&lt;p&gt;I have yet to run precommit and full tests on this one, but after I do I&apos;ll check this patch in.&lt;/p&gt;</comment>
                            <comment id="16522773" author="dweiss" created="Mon, 25 Jun 2018 20:29:08 +0000"  >&lt;p&gt;That file is used to provide default timings for load balancing of suites across JVMs to minimize the overall execution time. I can&apos;t remember the last time I updated that file, so perhaps we should just leave it as empty (which is not a big deal since those timings are also generated locally to an ignored file and even if they&apos;re not used, there is job-stealing in place).&lt;/p&gt;

&lt;p&gt;Try:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
cd lucene
ant test-help
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and see the section:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     [help] #
     [help] # Load balancing and caches. --------------------------------------
     [help] #
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16522829" author="erickerickson" created="Mon, 25 Jun 2018 21:16:40 +0000"  >&lt;p&gt;OK, I&apos;ll just remove all the content then? There&apos;s no point in keeping the content if it&apos;s not useful.&lt;/p&gt;</comment>
                            <comment id="16522879" author="erickerickson" created="Mon, 25 Jun 2018 22:17:01 +0000"  >&lt;p&gt;Final patch, CHANGES.txt and empty hints file.&lt;/p&gt;</comment>
                            <comment id="16522901" author="steve_rowe" created="Mon, 25 Jun 2018 22:38:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;those timings are also generated locally to an ignored file&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks Dawid, I had forgotten that there is both a static and a dynamic version of the file.&lt;/p&gt;</comment>
                            <comment id="16522902" author="erickerickson" created="Mon, 25 Jun 2018 22:41:17 +0000"  >&lt;p&gt;Commit revisions:&lt;/p&gt;

&lt;p&gt;master: 1d85cd783863f75cea133fb9c452302214165a4d&lt;br/&gt;
7x:        53ec8224705f4f0d35751b18b3f0168517c43121&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13104885">LUCENE-7976</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12929093" name="SOLR-12513.patch" size="102728" author="erickerickson" created="Mon, 25 Jun 2018 22:16:34 +0000"/>
                            <attachment id="12929046" name="SOLR-12513.patch" size="320007" author="erickerickson" created="Mon, 25 Jun 2018 16:20:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3v633:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>