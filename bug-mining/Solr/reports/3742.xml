<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:30:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-11758] Missing boolVal implementation in FloatDocValues</title>
                <link>https://issues.apache.org/jira/browse/SOLR-11758</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;In case of &lt;b&gt;DoubleDocValues&lt;/b&gt;, &lt;b&gt;boolVal(int doc)&lt;/b&gt; has been implemented but this is missing in case &lt;b&gt;FloatDocValues&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Impact&lt;/b&gt;: For any DocValues which extends &lt;b&gt;FloatDocValues&lt;/b&gt; and doesn&apos;t implement &lt;b&gt;boolVal(int doc)&lt;/b&gt;, parent &lt;b&gt;boolVal&lt;/b&gt; in FucntionValues would be called.&lt;/p&gt;

&lt;p&gt;boolVal implementation in FunctionValues&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; boolVal(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; doc) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; intVal(doc) != 0;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Let me know if I can work on it&lt;/p&gt;</description>
                <environment></environment>
        <key id="13124706">SOLR-11758</key>
            <summary>Missing boolVal implementation in FloatDocValues</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="munendrasn">Munendra S N</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Dec 2017 15:36:12 +0000</created>
                <updated>Sat, 8 Jun 2019 15:13:10 +0000</updated>
                            <resolved>Sat, 6 Jan 2018 20:06:17 +0000</resolved>
                                                    <fixVersion>7.3</fixVersion>
                    <fixVersion>8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="7200">2h</timeoriginalestimate>
                            <timeestimate seconds="7200">2h</timeestimate>
                                        <comments>
                            <comment id="16292789" author="munendrasn" created="Fri, 15 Dec 2017 16:47:37 +0000"  >&lt;p&gt;I have attached the patch. This contains the fix along with simple test which would fail without this fix.&lt;/p&gt;</comment>
                            <comment id="16292817" author="munendrasn" created="Fri, 15 Dec 2017 17:01:57 +0000"  >&lt;p&gt;Adding further details to explain the need for this.&lt;br/&gt;
I wanted to boost some documents by fixed value if they match some condition&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(and(query($qq1),query($qq2)),500,0)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here, problem was that even when document matched these condition it was not getting boosted. Even though query($qq1) and query($qq2) both returned non-zero positive values (both values were &amp;lt; 1).&lt;br/&gt;
In this case, I could have also used &lt;b&gt;exists&lt;/b&gt; which would solve but I wanted to know the reason for such behavior.&lt;/p&gt;

&lt;p&gt;On debugging, I found that &lt;b&gt;FloatDocValues&lt;/b&gt; which is base class for &lt;b&gt;QueryDocValues&lt;/b&gt; doesn&apos;t implement &lt;b&gt;boolVal&lt;/b&gt; method, hence, &lt;b&gt;boolVal&lt;/b&gt; of &lt;b&gt;FunctionValues&lt;/b&gt; is called.&lt;br/&gt;
Ideally, &lt;b&gt;FloatDocValues&lt;/b&gt; should have an implementation to override boolValue like how it is done in &lt;b&gt;DoubleDocValues&lt;/b&gt;.&lt;/p&gt;
</comment>
                            <comment id="16314349" author="hossman" created="Sat, 6 Jan 2018 03:50:39 +0000"  >&lt;p&gt;Nice catch!&lt;/p&gt;

&lt;p&gt;I expanded on your test a bit to prove that all of the numeric DocValue abstract FunctionValue classes follow the same expected semantics for &lt;tt&gt;boolVal()&lt;/tt&gt; and added some sanity check tests at the solr level of the specific type of failure you encountered.&lt;/p&gt;

&lt;p&gt;I&apos;ll commit soon unless anyone else spots any problems.&lt;/p&gt;</comment>
                            <comment id="16314881" author="jira-bot" created="Sat, 6 Jan 2018 20:05:40 +0000"  >&lt;p&gt;Commit a6cd4ac41941f1d8bfc5b2e5267c8bdec1b62b56 in lucene-solr&apos;s branch refs/heads/branch_7x from Chris Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a6cd4ac&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a6cd4ac&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11758&quot; title=&quot;Missing boolVal implementation in FloatDocValues&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11758&quot;&gt;&lt;del&gt;SOLR-11758&lt;/del&gt;&lt;/a&gt;: Fixed FloatDocValues.boolVal to correctly return true for all values != 0.0F&lt;/p&gt;

&lt;p&gt;(cherry picked from commit d03cb44de73bb29e16a3ab927ee57d6eb916789a)&lt;/p&gt;</comment>
                            <comment id="16314882" author="jira-bot" created="Sat, 6 Jan 2018 20:05:42 +0000"  >&lt;p&gt;Commit d03cb44de73bb29e16a3ab927ee57d6eb916789a in lucene-solr&apos;s branch refs/heads/master from Chris Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=d03cb44&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=d03cb44&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11758&quot; title=&quot;Missing boolVal implementation in FloatDocValues&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11758&quot;&gt;&lt;del&gt;SOLR-11758&lt;/del&gt;&lt;/a&gt;: Fixed FloatDocValues.boolVal to correctly return true for all values != 0.0F&lt;/p&gt;</comment>
                            <comment id="16314883" author="hossman" created="Sat, 6 Jan 2018 20:06:17 +0000"  >&lt;p&gt;Thanks Munendra!&lt;/p&gt;</comment>
                            <comment id="16318298" author="munendrasn" created="Tue, 9 Jan 2018 11:46:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman&quot; class=&quot;user-hover&quot; rel=&quot;hossman&quot;&gt;hossman&lt;/a&gt;&lt;br/&gt;
Thank you for reviewing, improving and committing the patch&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12904906" name="SOLR-11758.patch" size="6666" author="hossman" created="Sat, 6 Jan 2018 03:47:24 +0000"/>
                            <attachment id="12902405" name="SOLR-11758.patch" size="2521" author="munendrasn" created="Fri, 15 Dec 2017 16:46:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 45 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nv2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>