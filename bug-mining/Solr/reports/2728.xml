<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:09:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-8340] HighlightComponent throws a NullPointerException when the attribute of ResponseBuilder which named &apos;onePassDistributedQuery&apos; is &apos;true&apos; and &apos;rows&apos; is greater than zero</title>
                <link>https://issues.apache.org/jira/browse/SOLR-8340</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt; When the attribute &apos;onePassDistributedQuery&apos; is &apos;true&apos;,QueryCompoent will not  send a ShardRequest to retrive field values, highlight values has been return by shards in createMainQuery together.&lt;br/&gt;
See code below:&lt;/p&gt;

&lt;p&gt; private void handleRegularResponses(ResponseBuilder rb, ShardRequest sreq) {&lt;br/&gt;
    if ((sreq.purpose &amp;amp; ShardRequest.PURPOSE_GET_TOP_IDS) != 0) &lt;/p&gt;
{
//merge all id and score,and ResponseBuilder.resultIds just stored id between start to rows
      mergeIds(rb, sreq);
    }

&lt;p&gt;    if ((sreq.purpose &amp;amp; ShardRequest.PURPOSE_GET_TERM_STATS) != 0) &lt;/p&gt;
{
      updateStats(rb, sreq);
    }

&lt;p&gt;    if ((sreq.purpose &amp;amp; ShardRequest.PURPOSE_GET_FIELDS) != 0) &lt;/p&gt;
{
//where ResponseBuilder.onePassDistributedQuery is true,highlight values was retrived at same time,but not truncated by &apos;start&apos; and &apos;rows&apos;,just return top N(N=start+rows),
      returnFields(rb, sreq);
    }
&lt;p&gt;  }&lt;/p&gt;</description>
                <environment></environment>
        <key id="12915999">SOLR-8340</key>
            <summary>HighlightComponent throws a NullPointerException when the attribute of ResponseBuilder which named &apos;onePassDistributedQuery&apos; is &apos;true&apos; and &apos;rows&apos; is greater than zero</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dsmiley">David Smiley</assignee>
                                    <reporter username="zengjie">zengjie</reporter>
                        <labels>
                            <label>highlighting</label>
                    </labels>
                <created>Wed, 25 Nov 2015 01:52:45 +0000</created>
                <updated>Fri, 23 Jun 2017 15:35:58 +0000</updated>
                            <resolved>Mon, 28 Dec 2015 14:58:48 +0000</resolved>
                                    <version>5.3.1</version>
                                    <fixVersion>5.3.2</fixVersion>
                    <fixVersion>5.4</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>highlighter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15025980" author="zengjie" created="Wed, 25 Nov 2015 01:58:28 +0000"  >&lt;p&gt;I fixed this issue by checking &apos;sdoc&apos; is or not a null object ,but I&apos;m not test this patch,just for reference&lt;/p&gt;</comment>
                            <comment id="15026523" author="cpoerschke" created="Wed, 25 Nov 2015 09:52:26 +0000"  >&lt;p&gt;Summary of the issue and corresponding patch look good to me.&lt;/p&gt;</comment>
                            <comment id="15030206" author="jira-bot" created="Fri, 27 Nov 2015 20:01:26 +0000"  >&lt;p&gt;Commit 1716911 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1716911&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1716911&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8340&quot; title=&quot;HighlightComponent throws a NullPointerException when the attribute of ResponseBuilder which named &amp;#39;onePassDistributedQuery&amp;#39; is &amp;#39;true&amp;#39; and &amp;#39;rows&amp;#39; is greater than zero&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8340&quot;&gt;&lt;del&gt;SOLR-8340&lt;/del&gt;&lt;/a&gt;: Fixed NullPointerException in HighlightComponent.&lt;/p&gt;</comment>
                            <comment id="15030252" author="jira-bot" created="Fri, 27 Nov 2015 21:28:34 +0000"  >&lt;p&gt;Commit 1716917 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1716917&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1716917&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8340&quot; title=&quot;HighlightComponent throws a NullPointerException when the attribute of ResponseBuilder which named &amp;#39;onePassDistributedQuery&amp;#39; is &amp;#39;true&amp;#39; and &amp;#39;rows&amp;#39; is greater than zero&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8340&quot;&gt;&lt;del&gt;SOLR-8340&lt;/del&gt;&lt;/a&gt;: Fixed NullPointerException in HighlightComponent. (merge in revision 1716911 from trunk)&lt;/p&gt;</comment>
                            <comment id="15030254" author="cpoerschke" created="Fri, 27 Nov 2015 21:30:18 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zengjie&quot; class=&quot;user-hover&quot; rel=&quot;zengjie&quot;&gt;zengjie&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="15030397" author="dsmiley" created="Sat, 28 Nov 2015 06:08:27 +0000"  >&lt;p&gt;Christine, can you please merge to 5.4 before it&apos;s released?  This is a bug, after all.&lt;/p&gt;</comment>
                            <comment id="15031643" author="jira-bot" created="Mon, 30 Nov 2015 10:50:36 +0000"  >&lt;p&gt;Commit 1717224 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt; in branch &apos;dev/branches/lucene_solr_5_4&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1717224&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1717224&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8340&quot; title=&quot;HighlightComponent throws a NullPointerException when the attribute of ResponseBuilder which named &amp;#39;onePassDistributedQuery&amp;#39; is &amp;#39;true&amp;#39; and &amp;#39;rows&amp;#39; is greater than zero&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8340&quot;&gt;&lt;del&gt;SOLR-8340&lt;/del&gt;&lt;/a&gt;: Fixed NullPointerException in HighlightComponent. (merge in revision 1716917 from branch_5x)&lt;/p&gt;</comment>
                            <comment id="15031650" author="cpoerschke" created="Mon, 30 Nov 2015 10:53:08 +0000"  >&lt;p&gt;Good catch. Fix now merged to 5.4 branch. solr/CHANGES.txt update on trunk and branch_5x w.r.t. 5.5 versus 5.4 section to follow.&lt;/p&gt;</comment>
                            <comment id="15031656" author="jira-bot" created="Mon, 30 Nov 2015 11:01:13 +0000"  >&lt;p&gt;Commit 1717226 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1717226&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1717226&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8340&quot; title=&quot;HighlightComponent throws a NullPointerException when the attribute of ResponseBuilder which named &amp;#39;onePassDistributedQuery&amp;#39; is &amp;#39;true&amp;#39; and &amp;#39;rows&amp;#39; is greater than zero&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8340&quot;&gt;&lt;del&gt;SOLR-8340&lt;/del&gt;&lt;/a&gt;: move solr/CHANGES.txt entry from 5.4.0 to 5.5.0 section&lt;/p&gt;</comment>
                            <comment id="15031659" author="jira-bot" created="Mon, 30 Nov 2015 11:03:11 +0000"  >&lt;p&gt;Commit 1717227 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1717227&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1717227&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8340&quot; title=&quot;HighlightComponent throws a NullPointerException when the attribute of ResponseBuilder which named &amp;#39;onePassDistributedQuery&amp;#39; is &amp;#39;true&amp;#39; and &amp;#39;rows&amp;#39; is greater than zero&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8340&quot;&gt;&lt;del&gt;SOLR-8340&lt;/del&gt;&lt;/a&gt;: move solr/CHANGES.txt entry from 5.4.0 to 5.5.0 section (merge in revision 1717226 from trunk)&lt;/p&gt;</comment>
                            <comment id="15072776" author="jira-bot" created="Mon, 28 Dec 2015 14:55:14 +0000"  >&lt;p&gt;Commit 1721931 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt; in branch &apos;dev/branches/lucene_solr_5_3&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1721931&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1721931&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8059&quot; title=&quot;NPE distributed DebugComponent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8059&quot;&gt;&lt;del&gt;SOLR-8059&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8340&quot; title=&quot;HighlightComponent throws a NullPointerException when the attribute of ResponseBuilder which named &amp;#39;onePassDistributedQuery&amp;#39; is &amp;#39;true&amp;#39; and &amp;#39;rows&amp;#39; is greater than zero&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8340&quot;&gt;&lt;del&gt;SOLR-8340&lt;/del&gt;&lt;/a&gt;: Fix HighlightComponent &amp;amp; DebugComponent finishStage NPE&apos;s when distrib.singlePass&lt;/p&gt;</comment>
                            <comment id="15073578" author="jira-bot" created="Tue, 29 Dec 2015 07:16:47 +0000"  >&lt;p&gt;Commit 1722062 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anshumg&quot; class=&quot;user-hover&quot; rel=&quot;anshumg&quot;&gt;anshumg&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1722062&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1722062&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8340&quot; title=&quot;HighlightComponent throws a NullPointerException when the attribute of ResponseBuilder which named &amp;#39;onePassDistributedQuery&amp;#39; is &amp;#39;true&amp;#39; and &amp;#39;rows&amp;#39; is greater than zero&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8340&quot;&gt;&lt;del&gt;SOLR-8340&lt;/del&gt;&lt;/a&gt;: Add change log entry to 5.3.2 section on trunk&lt;/p&gt;</comment>
                            <comment id="15073579" author="jira-bot" created="Tue, 29 Dec 2015 07:18:09 +0000"  >&lt;p&gt;Commit 1722063 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anshumg&quot; class=&quot;user-hover&quot; rel=&quot;anshumg&quot;&gt;anshumg&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1722063&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1722063&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8340&quot; title=&quot;HighlightComponent throws a NullPointerException when the attribute of ResponseBuilder which named &amp;#39;onePassDistributedQuery&amp;#39; is &amp;#39;true&amp;#39; and &amp;#39;rows&amp;#39; is greater than zero&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8340&quot;&gt;&lt;del&gt;SOLR-8340&lt;/del&gt;&lt;/a&gt;: Add change log entry to 5.3.2 section (merge from trunk)&lt;/p&gt;</comment>
                            <comment id="15093624" author="jira-bot" created="Tue, 12 Jan 2016 09:44:31 +0000"  >&lt;p&gt;Commit 1724184 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jpountz&quot; class=&quot;user-hover&quot; rel=&quot;jpountz&quot;&gt;jpountz&lt;/a&gt; in branch &apos;dev/branches/lucene_solr_5_4&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1724184&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1724184&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8340&quot; title=&quot;HighlightComponent throws a NullPointerException when the attribute of ResponseBuilder which named &amp;#39;onePassDistributedQuery&amp;#39; is &amp;#39;true&amp;#39; and &amp;#39;rows&amp;#39; is greater than zero&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8340&quot;&gt;&lt;del&gt;SOLR-8340&lt;/del&gt;&lt;/a&gt;: Add change log entry to 5.3.2 section.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12864513">SOLR-8060</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12774233" name="solr.patch" size="780" author="zengjie" created="Wed, 25 Nov 2015 01:58:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 45 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2owh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>