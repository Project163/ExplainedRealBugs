<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:25:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-3062] Solr4 Join query with fq not correctly filtering results</title>
                <link>https://issues.apache.org/jira/browse/SOLR-3062</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;filter queries are not properly filtering results when using a join query in solr4&lt;/p&gt;

&lt;p&gt;To replicate, use the attached patch file which contains a test method that will fail (but should pass).&lt;/p&gt;

&lt;p&gt;OR&lt;/p&gt;

&lt;p&gt;run the solr example:&lt;/p&gt;

&lt;p&gt;cd solr&lt;br/&gt;
ant example&lt;br/&gt;
java -jar start.jar&lt;br/&gt;
cd exampledocs&lt;br/&gt;
java -jar post.jar *.xml&lt;/p&gt;

&lt;p&gt;Then try a few of the sample queries on the wiki page &lt;a href=&quot;http://wiki.apache.org/solr/Join&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wiki.apache.org/solr/Join&lt;/a&gt;.  In particular, this is illustrates the issue:&lt;/p&gt;

&lt;p&gt;Find all manufacturer docs named &quot;belkin&quot;, then join them against (product) docs and filter that list to only products with a price less than 12 dollars&lt;br/&gt;
&lt;a href=&quot;http://localhost:8983/solr/select?q=&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/select?q=&lt;/a&gt;&lt;/p&gt;
{!join+from=id+to=manu_id_s}
&lt;p&gt;compName_s:Belkin&amp;amp;fq=price:%5B%2A+TO+12%5D&lt;/p&gt;

&lt;p&gt;When you run that query, you will get two results, one with a price of 19.95 and another with a price of 11.5  Because of the filter query, I&apos;m only expecting to see one result - the one with a price of 11.99.&lt;/p&gt;

&lt;p&gt;I was able to track this down to a change in revision #1188624 (&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1188624&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1188624&lt;/a&gt; : &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1536&quot; title=&quot;if a filter can support random access API, we should use it&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-1536&quot;&gt;&lt;del&gt;LUCENE-1536&lt;/del&gt;&lt;/a&gt;: Filters can now be applied down-low, if their DocIdSet implements a new bits() method, returning all documents in a random access way).  Prior to that revision (i.e. 1188613 and before) the test method will pass and the example will work as expected.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12539993">SOLR-3062</key>
            <summary>Solr4 Join query with fq not correctly filtering results</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yseeley@gmail.com">Yonik Seeley</assignee>
                                    <reporter username="mjhugo">Mike Hugo</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Jan 2012 04:01:57 +0000</created>
                <updated>Fri, 10 May 2013 10:39:19 +0000</updated>
                            <resolved>Thu, 2 Feb 2012 01:43:31 +0000</resolved>
                                    <version>4.0-ALPHA</version>
                                    <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13198165" author="yseeley@gmail.com" created="Wed, 1 Feb 2012 21:27:14 +0000"  >&lt;p&gt;Note: as Hoss pointed out, the commits shown in this issue to date are actually for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3069&quot; title=&quot;add ability to commit w/o opening a new searcher&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3069&quot;&gt;&lt;del&gt;SOLR-3069&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13198449" author="yseeley@gmail.com" created="Thu, 2 Feb 2012 01:43:31 +0000"  >&lt;p&gt;Fix committed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12414034">LUCENE-1536</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12512075" name="join_filter_query_problem.patch" size="2678" author="mjhugo" created="Fri, 27 Jan 2012 04:02:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225496</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03gx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18174</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>