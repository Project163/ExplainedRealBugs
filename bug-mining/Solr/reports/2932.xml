<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:13:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9029] regular fails since  ZkStateReaderTest.testStateFormatUpdateWithExplicitRefreshLazy </title>
                <link>https://issues.apache.org/jira/browse/SOLR-9029</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;jenkins started to semi-regularly complain about ZkStateReaderTest.testStateFormatUpdateWithExplicitRefreshLazy on march 7 (53 failures in 45 days at current count)&lt;/p&gt;

&lt;p&gt;March 7th is not-coincidently when commit 093a8ce57c06f1bf2f71ddde52dcc7b40cbd6197 for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8745&quot; title=&quot;Deprecate ZkStateReader.updateClusterState(), remove uses&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8745&quot;&gt;&lt;del&gt;SOLR-8745&lt;/del&gt;&lt;/a&gt; was made, modifying both the test &amp;amp; a bunch of ClusterState code.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Sample failure...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/Lucene-Solr-Tests-master/1096&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Lucene-Solr-Tests-master/1096&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=ZkStateReaderTest -Dtests.method=testStateFormatUpdateWithExplicitRefreshLazy -Dtests.seed=78F99EDE682EC04B -Dtests.multiplier=2 -Dtests.slow=true -Dtests.locale=tr-TR -Dtests.timezone=Europe/Tallinn -Dtests.asserts=true -Dtests.file.encoding=UTF-8
   [junit4] ERROR   0.45s J0 | ZkStateReaderTest.testStateFormatUpdateWithExplicitRefreshLazy &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: org.apache.solr.common.SolrException: Could not find collection : c1
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([78F99EDE682EC04B:13B63EA311211D71]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.common.cloud.ClusterState.getCollection(ClusterState.java:170)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.overseer.ZkStateReaderTest.testStateFormatUpdate(ZkStateReaderTest.java:135)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.overseer.ZkStateReaderTest.testStateFormatUpdateWithExplicitRefreshLazy(ZkStateReaderTest.java:46)
   [junit4]    &amp;gt; 	at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...i&apos;ve also seen this fail locally, but i&apos;ve never been able to reproduce it with the same seed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12961447">SOLR-9029</key>
            <summary>regular fails since  ZkStateReaderTest.testStateFormatUpdateWithExplicitRefreshLazy </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dragonsinth">Scott Blum</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Apr 2016 23:09:32 +0000</created>
                <updated>Wed, 2 Oct 2019 17:25:02 +0000</updated>
                            <resolved>Tue, 26 Apr 2016 03:09:06 +0000</resolved>
                                                    <fixVersion>6.1</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15252978" author="hossman" created="Thu, 21 Apr 2016 23:13:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dragonsinth&quot; class=&quot;user-hover&quot; rel=&quot;dragonsinth&quot;&gt;dragonsinth&lt;/a&gt; - anything jump out at you?&lt;/p&gt;</comment>
                            <comment id="15252998" author="dragonsinth" created="Thu, 21 Apr 2016 23:32:37 +0000"  >&lt;p&gt;Scanned through the code, nothing jumps out at me. I&apos;ll dig deeper at some point.&lt;/p&gt;</comment>
                            <comment id="15257329" author="dragonsinth" created="Tue, 26 Apr 2016 00:27:01 +0000"  >&lt;p&gt;Super puzzling.  We&apos;ve tested that the ZK node exists, and the fact that reader.forceUpdateCollection() is called on the same thread that subsequently checks collection exists practically eliminates data visibility problems.&lt;/p&gt;</comment>
                            <comment id="15257375" author="dragonsinth" created="Tue, 26 Apr 2016 01:12:23 +0000"  >&lt;p&gt;Finally found it... there&apos;s an very rare edge case in forceUpdateCollection() that only occurs when a collection moves from being the legacy collection state straight to being a lazy collection, without ever being observed missing.  Basically, it requires you to not see any ZK events during the execution of the test method.  I can repro this by putting early exits in LegacyClusterStateWatcher and CollectionsChildWatcher to prevent any watch events from taking effect.&lt;/p&gt;</comment>
                            <comment id="15257379" author="dragonsinth" created="Tue, 26 Apr 2016 01:16:51 +0000"  >&lt;p&gt;Testing a fix now: &lt;a href=&quot;https://github.com/fullstorydev/lucene-solr/tree/SOLR-9029&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/fullstorydev/lucene-solr/tree/SOLR-9029&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman&quot; class=&quot;user-hover&quot; rel=&quot;hossman&quot;&gt;hossman&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt; if you&apos;d like to look at the change.&lt;/p&gt;</comment>
                            <comment id="15257477" author="jira-bot" created="Tue, 26 Apr 2016 03:07:04 +0000"  >&lt;p&gt;Commit 89c65af2a6e5f1c8216c1202f65e8d670ef14385 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dragonsinth&quot; class=&quot;user-hover&quot; rel=&quot;dragonsinth&quot;&gt;dragonsinth&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=89c65af&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=89c65af&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9029&quot; title=&quot;regular fails since  ZkStateReaderTest.testStateFormatUpdateWithExplicitRefreshLazy &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9029&quot;&gt;&lt;del&gt;SOLR-9029&lt;/del&gt;&lt;/a&gt;: fix rare ZkStateReader visibility race during collection state format update&lt;/p&gt;</comment>
                            <comment id="15257478" author="jira-bot" created="Tue, 26 Apr 2016 03:07:37 +0000"  >&lt;p&gt;Commit 89857653cafdafe5396abe946cc3d7f4fec1377d in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dragonsinth&quot; class=&quot;user-hover&quot; rel=&quot;dragonsinth&quot;&gt;dragonsinth&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=8985765&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=8985765&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9029&quot; title=&quot;regular fails since  ZkStateReaderTest.testStateFormatUpdateWithExplicitRefreshLazy &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9029&quot;&gt;&lt;del&gt;SOLR-9029&lt;/del&gt;&lt;/a&gt;: fix rare ZkStateReader visibility race during collection state format update&lt;/p&gt;</comment>
                            <comment id="15258116" author="markrmiller@gmail.com" created="Tue, 26 Apr 2016 13:51:57 +0000"  >&lt;p&gt;Great, I was seeing this a lot locally.&lt;/p&gt;</comment>
                            <comment id="15277187" author="hossman" created="Mon, 9 May 2016 22:19:06 +0000"  >
&lt;p&gt;Manually correcting fixVersion per Step #S5 of &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-7271&quot; title=&quot;Cleanup jira&amp;#39;s concept of &amp;#39;master&amp;#39; and &amp;#39;6.0&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-7271&quot;&gt;&lt;del&gt;LUCENE-7271&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15293944" author="steve_rowe" created="Fri, 20 May 2016 18:40:32 +0000"  >&lt;p&gt;Not backporting to 6.0.1, since the modifications are to &lt;tt&gt;ZkStateReader.forceUpdateCollection()&lt;/tt&gt;, introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8745&quot; title=&quot;Deprecate ZkStateReader.updateClusterState(), remove uses&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8745&quot;&gt;&lt;del&gt;SOLR-8745&lt;/del&gt;&lt;/a&gt;, which won&apos;t be backported to branch_6_0.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12945135">SOLR-8745</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2wk1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>