<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:04:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6220] Replica placement strategy for solrcloud</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6220</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;h1&gt;&lt;a name=&quot;Objective&quot;&gt;&lt;/a&gt;Objective&lt;/h1&gt;
&lt;p&gt;Most cloud based systems allow to specify rules on how the replicas/nodes of a cluster are allocated . Solr should have a flexible mechanism through which we should be able to control allocation of replicas or later change it to suit the needs of the system&lt;/p&gt;

&lt;p&gt;All configurations are per collection basis. The rules are applied whenever a replica is created in any of the shards in a given collection during&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;collection creation&lt;/li&gt;
	&lt;li&gt;shard splitting&lt;/li&gt;
	&lt;li&gt;add replica&lt;/li&gt;
	&lt;li&gt;createsshard&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;There are two aspects to how replicas are placed: snitch and placement. &lt;/p&gt;

&lt;h2&gt;&lt;a name=&quot;snitch&quot;&gt;&lt;/a&gt;snitch &lt;/h2&gt;
&lt;p&gt;How to identify the tags of nodes. Snitches are configured through collection create command with the snitch param  . eg: snitch=EC2Snitch or snitch=class:EC2Snitch&lt;/p&gt;


&lt;h2&gt;&lt;a name=&quot;ImplicitSnitch&quot;&gt;&lt;/a&gt;ImplicitSnitch &lt;/h2&gt;
&lt;p&gt;This is shipped by default with Solr. user does not need to specify &lt;tt&gt;ImplicitSnitch&lt;/tt&gt; in configuration. If the tags known to ImplicitSnitch are present in the rules , it is automatically used,&lt;br/&gt;
tags provided by ImplicitSnitch&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;cores :  No:of cores in the node&lt;/li&gt;
	&lt;li&gt;disk : Disk space available in the node&lt;/li&gt;
	&lt;li&gt;host : host name of the node&lt;/li&gt;
	&lt;li&gt;node: node name&lt;/li&gt;
	&lt;li&gt;D.* : These are values available from systrem propertes. &lt;tt&gt;D.key&lt;/tt&gt; means a value that is passed to the node as &lt;tt&gt;-Dkey=keyValue&lt;/tt&gt; during the node startup. It is possible to use rules like &lt;tt&gt;D.key:expectedVal,shard:*&lt;/tt&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;h2&gt;&lt;a name=&quot;Rules&quot;&gt;&lt;/a&gt;Rules &lt;/h2&gt;

&lt;p&gt;This tells how many replicas for a given shard needs to be assigned to nodes with the given key value pairs. These parameters will be passed on to the collection CREATE api as a multivalued parameter  &quot;rule&quot; . The values will be saved in the state of the collection as follows&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-javascript&quot;&gt;{
 &#8220;mycollection&#8221;:{
  &#8220;snitch&#8221;: {
      class:&#8220;ImplicitSnitch&#8221;
    }
  &#8220;rules&#8221;:[{&lt;span class=&quot;code-quote&quot;&gt;&quot;cores&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;4-&quot;&lt;/span&gt;}, 
             {&lt;span class=&quot;code-quote&quot;&gt;&quot;replica&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; ,&lt;span class=&quot;code-quote&quot;&gt;&quot;shard&quot;&lt;/span&gt; :&lt;span class=&quot;code-quote&quot;&gt;&quot;*&quot;&lt;/span&gt; ,&lt;span class=&quot;code-quote&quot;&gt;&quot;node&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;*&quot;&lt;/span&gt;},
             {&lt;span class=&quot;code-quote&quot;&gt;&quot;disk&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;gt;100&quot;&lt;/span&gt;}]
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A rule is specified as a pseudo JSON syntax . which is a map of keys and values&lt;br/&gt;
*Each collection can have any number of rules. As long as the rules do not conflict with each other it should be OK. Or else an error is thrown&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;In each rule , shard and replica can be omitted
	&lt;ul&gt;
		&lt;li&gt;default value of  replica is &lt;tt&gt;&amp;#42;&lt;/tt&gt; means ANY or you can specify a count and an operand such as &lt;tt&gt;&amp;lt;&lt;/tt&gt; (less than) or &lt;tt&gt;&amp;gt;&lt;/tt&gt; (greater than)&lt;/li&gt;
		&lt;li&gt;and the value of shard can be a shard name or  &lt;tt&gt;&amp;#42;&lt;/tt&gt; means EACH  or &lt;tt&gt;**&lt;/tt&gt; means ANY.  default value is &lt;tt&gt;&amp;#42;&amp;#42;&lt;/tt&gt; (ANY)&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;There should be exactly one extra condition in a rule other than &lt;tt&gt;shard&lt;/tt&gt; and &lt;tt&gt;replica&lt;/tt&gt;.&lt;/li&gt;
	&lt;li&gt;all keys other than &lt;tt&gt;shard&lt;/tt&gt; and &lt;tt&gt;replica&lt;/tt&gt; are called tags and the tags are nothing but values provided by the snitch for each node&lt;/li&gt;
	&lt;li&gt;By default certain tags such as &lt;tt&gt;node&lt;/tt&gt;, &lt;tt&gt;host&lt;/tt&gt;, &lt;tt&gt;port&lt;/tt&gt; are provided by the system implicitly&lt;/li&gt;
&lt;/ul&gt;


&lt;h3&gt;&lt;a name=&quot;Howarenodespickedup%3F&quot;&gt;&lt;/a&gt;How are nodes picked up? &lt;/h3&gt;
&lt;p&gt;Nodes are not picked up in random. The rules are used to first sort the nodes according to affinity. For example, if there is a rule that says &lt;tt&gt;disk:100+&lt;/tt&gt; , nodes with  more disk space are given higher preference.  And if the rule is &lt;tt&gt;disk:100-&lt;/tt&gt; nodes with lesser disk space will be given priority. If everything else is equal , nodes with fewer cores are given higher priority&lt;/p&gt;

&lt;h3&gt;&lt;a name=&quot;Fuzzymatch&quot;&gt;&lt;/a&gt;Fuzzy match&lt;/h3&gt;
&lt;p&gt;Fuzzy match can be applied when strict matches fail .The values can be prefixed &lt;tt&gt;~&lt;/tt&gt; to specify fuzziness&lt;/p&gt;

&lt;p&gt;example rule&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; #Example requirement &quot;use only one replica of a shard in a host if possible, if no matches found , relax that rule&quot;. 
rack:*,shard:*,replica:&amp;lt;2~

#Another example, assign all replicas to nodes with disk space of 100GB or more,, or relax the rule if not possible. This will ensure that if a node does not exist with 100GB disk, nodes are picked up the order of size say a 85GB node would be picked up over 80GB disk node
disk:&amp;gt;100~
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Examples:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;#in each rack there can be max two replicas of A given shard
 rack:*,shard:*,replica:&amp;lt;3
//in each rack there can be max two replicas of ANY replica
 rack:*,shard:**,replica:2
 rack:*,replica:&amp;lt;3

 #in each node there should be a max one replica of EACH shard
 node:*,shard:*,replica:1-
 #in each node there should be a max one replica of ANY shard
 node:*,shard:**,replica:1-
 node:*,replica:1-
 
#In rack 738 and shard=shard1, there can be a max 0 replica
 rack:738,shard:shard1,replica:&amp;lt;1
 
 #All replicas of shard1 should go to rack 730
 shard:shard1,replica:*,rack:730
 shard:shard1,rack:730

 #all replicas must be created in a node with at least 20GB disk
 replica:*,shard:*,disk:&amp;gt;20
 replica:*,disk:&amp;gt;20
 disk:&amp;gt;20
#All replicas should be created in nodes with less than 5 cores
#In this ANY AND each for shard have same meaning
replica:*,shard:**,cores:&amp;lt;5
replica:*,cores:&amp;lt;5
cores:&amp;lt;5
#one replica of shard1 must go to node 192.168.1.2:8080_solr
node:&#8221;192.168.1.2:8080_solr&#8221;, shard:shard1, replica:1 
#No replica of shard1 should go to rack 738
rack:!738,shard:shard1,replica:*
rack:!738,shard:shard1
#No replica  of ANY shard should go to rack 738
rack:!738,shard:**,replica:*
rack:!738,shard:*
rack:!738
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;



&lt;p&gt;In the collection create API all the placement rules are provided as a parameters called rule&lt;br/&gt;
example:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;snitch=EC2Snitch&amp;amp;rule=shard:*,replica:1,dc:dc1&amp;amp;rule=shard:*,replica:&amp;lt;2,dc:dc3&amp;amp;rule=shard:shard1,replica:,rack:!738} 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12724740">SOLR-6220</key>
            <summary>Replica placement strategy for solrcloud</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="noble.paul">Noble Paul</assignee>
                                    <reporter username="noble.paul">Noble Paul</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Jul 2014 15:05:29 +0000</created>
                <updated>Mon, 9 May 2016 18:54:16 +0000</updated>
                            <resolved>Thu, 11 Jun 2015 08:38:29 +0000</resolved>
                                                    <fixVersion>5.2</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>5</votes>
                                    <watches>23</watches>
                                                                                                                                                            <comments>
                            <comment id="14255216" author="sbower" created="Sun, 21 Dec 2014 17:14:12 +0000"  >&lt;p&gt;I like where you are going with this...&lt;/p&gt;

&lt;p&gt;Some thoughts:&lt;/p&gt;

&lt;p&gt;This snitch information I think should be exposed at a more general level than just in replica placement.. One very useful area would be in query routing for datacenter/rack/server afinity..&lt;/p&gt;

&lt;p&gt;There seem to be several types of information the &quot;snitch&quot; is providing; System (cpu, dc, rack, etc..), Node (# cores, etc..), Collection (# shards, routing, etc..), Shard (# docs, # replicas, Core (disk size, etc..).. Plus ideally you&apos;d like to have managed properties really at all levels... I wonder if a more robust framework for the snitches would be better:&lt;/p&gt;

&lt;p&gt;I am thinking something more hierarchical, imagine a tree where the top level elements are provided by a collection of snitches that are dynamically provided when requested...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;{
  &quot;system&quot; : {
    &quot;dc&quot; : &quot;east&quot;
    &quot;rack&quot; : 124
  },
  &quot;collection&quot; : {
    &quot;name&quot; : &quot;foo&quot;,
    &quot;numShards&quot; : 5,
  }
  &quot;...&quot;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This way you could layer in lots of different information without having to re-implement functionality in different snitches or have some complex snitch class hierarchy... you&apos;d simply plug snitches into different parts of the infrastructure (node, collection, etc..) Obviously this would need to be fleshed out a bit more..&lt;/p&gt;

&lt;p&gt;The idea of Snitches is somewhat in the spirit of Chef&apos;s Ohai (&lt;a href=&quot;https://github.com/opscode/ohai&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/opscode/ohai&lt;/a&gt;) it may be beneficial to provide something similar... and/or we could lift/port some code for things it does already outside Solr&lt;/p&gt;

&lt;p&gt;In terms of the rule-sets.. I&apos;m curious with the rules you describe how you&apos;d model:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;N shards evenly distributed between D datacenters (for this case assume N is evenly divisible by D)&lt;/li&gt;
	&lt;li&gt;All replicas should be in separate racks (unless there is no other choice)&lt;/li&gt;
	&lt;li&gt;All replicas should be on separate hosts (unless there is no other choice)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14255653" author="noble.paul" created="Mon, 22 Dec 2014 11:18:59 +0000"  >&lt;blockquote&gt;&lt;p&gt;N shards evenly distributed between D datacenters (for this case assume N is evenly divisible by D)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This does not.&#160;Is it realy helpful to have just some shards in a DC? The design distributes every shard &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;All replicas should be in separate racks (unless there is no other choice)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;All replicas should be on separate hosts (unless there is no other choice)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;not yet. Would be a nice syntax to add&lt;/p&gt;</comment>
                            <comment id="14483171" author="noble.paul" created="Tue, 7 Apr 2015 13:48:09 +0000"  >&lt;p&gt;First cut with some basic tests&lt;/p&gt;</comment>
                            <comment id="14496464" author="noble.paul" created="Wed, 15 Apr 2015 16:20:19 +0000"  >&lt;p&gt;All planned features included. Tests will come next&lt;/p&gt;</comment>
                            <comment id="14502855" author="noble.paul" created="Mon, 20 Apr 2015 13:48:32 +0000"  >&lt;p&gt;More tests . &lt;/p&gt;</comment>
                            <comment id="14502868" author="shalinmangar" created="Mon, 20 Apr 2015 13:56:44 +0000"  >&lt;blockquote&gt;
&lt;p&gt;//in each node there should be a max one replica of EACH shard&lt;/p&gt;
 &lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {node}&lt;/span&gt; &lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;Instead of &quot;1-&quot; can we use regular &amp;lt;, &amp;lt;=, &amp;gt;, &amp;gt;= operators? For example &quot;replica:&amp;lt;=1&quot; to signal that a maximum of 1 replica is required and &quot;disk:&amp;gt;=20&quot; can signal that the chosen node must have more than 20GB of space&lt;/p&gt;</comment>
                            <comment id="14502881" author="noble.paul" created="Mon, 20 Apr 2015 14:05:13 +0000"  >&lt;p&gt;The rules are passed as request params . example : &lt;tt&gt;rule=shard:*,disk=20+&lt;/tt&gt; &lt;br/&gt;
I considered using &lt;tt&gt;&amp;lt;=&lt;/tt&gt; , &lt;tt&gt;&amp;gt;=&lt;/tt&gt; and &lt;tt&gt;!=&lt;/tt&gt;  . But , that means the user needs to escape &lt;tt&gt;=&lt;/tt&gt; in the request. Which can badly affect the readability&lt;/p&gt;

</comment>
                            <comment id="14504891" author="noble.paul" created="Tue, 21 Apr 2015 12:49:15 +0000"  >&lt;ul&gt;
	&lt;li&gt;Added fuzzy match option &lt;tt&gt;~&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;nodes are presorted based on rules instead of randomly picking nodes&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;ImplicitSnitch&lt;/tt&gt; can support per node system properties&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14506587" author="noble.paul" created="Wed, 22 Apr 2015 07:35:22 +0000"  >&lt;p&gt;Operators &lt;tt&gt;+&lt;/tt&gt; and &lt;tt&gt;-&lt;/tt&gt; replaced with &lt;tt&gt;&amp;lt;&lt;/tt&gt; and &lt;tt&gt;&amp;gt;&lt;/tt&gt;&lt;br/&gt;
This is now feature complete.&lt;br/&gt;
I&apos;ll add some more tests and commit this&lt;/p&gt;</comment>
                            <comment id="14507166" author="noble.paul" created="Wed, 22 Apr 2015 14:32:39 +0000"  >&lt;p&gt;More tests &lt;/p&gt;</comment>
                            <comment id="14517014" author="shalinmangar" created="Tue, 28 Apr 2015 13:24:12 +0000"  >&lt;p&gt;The latest patch doesn&apos;t compile. It has errors in OverseerCollectionProcessor. Can you please post a patch which is in sync with trunk?&lt;/p&gt;</comment>
                            <comment id="14517194" author="noble.paul" created="Tue, 28 Apr 2015 15:23:56 +0000"  >&lt;p&gt;Updated patch to trunk&lt;/p&gt;</comment>
                            <comment id="14526684" author="jira-bot" created="Mon, 4 May 2015 14:40:07 +0000"  >&lt;p&gt;Commit 1677607 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1677607&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1677607&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6220&quot; title=&quot;Replica placement strategy for solrcloud&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6220&quot;&gt;&lt;del&gt;SOLR-6220&lt;/del&gt;&lt;/a&gt;: Rule Based Replica Assignment during collection creation&lt;/p&gt;</comment>
                            <comment id="14526734" author="jira-bot" created="Mon, 4 May 2015 15:10:10 +0000"  >&lt;p&gt;Commit 1677614 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1677614&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1677614&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6220&quot; title=&quot;Replica placement strategy for solrcloud&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6220&quot;&gt;&lt;del&gt;SOLR-6220&lt;/del&gt;&lt;/a&gt;: setting eol style&lt;/p&gt;</comment>
                            <comment id="14526770" author="tomasflobbe" created="Mon, 4 May 2015 15:54:11 +0000"  >&lt;p&gt;Ideally, most warnings should be fixed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; , but at least the one in &lt;tt&gt;SnitchContext&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; SimpleSolrResponse invoke(UpdateShardHandler shardHandler,  &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; url, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path, SolrParams params)
      &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, SolrServerException {
    GenericSolrRequest request = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericSolrRequest(SolrRequest.METHOD.GET, path, params);
    NamedList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; rsp = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HttpSolrClient(url, shardHandler.getHttpClient(), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BinaryResponseParser()).request(request);
    request.response.nl = rsp;
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; request.response;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Resource leak: &apos;&amp;lt;unassigned Closeable value&amp;gt;&apos; is never closed&lt;/p&gt;</comment>
                            <comment id="14526772" author="anshumg" created="Mon, 4 May 2015 15:54:27 +0000"  >&lt;p&gt;This seems to have broken &lt;tt&gt;ant precommit&lt;/tt&gt;.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[forbidden-apis] Forbidden method invocation: java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;#getBytes() [Uses &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; charset]
[forbidden-apis]   in org.apache.solr.cloud.rule.RuleEngineTest (RuleEngineTest.java:63)
[forbidden-apis] Forbidden method invocation: java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;#getBytes() [Uses &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; charset]
[forbidden-apis]   in org.apache.solr.cloud.rule.RuleEngineTest (RuleEngineTest.java:108)
[forbidden-apis] Forbidden method invocation: java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;#getBytes() [Uses &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; charset]
[forbidden-apis]   in org.apache.solr.cloud.rule.RuleEngineTest (RuleEngineTest.java:185)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14526783" author="jira-bot" created="Mon, 4 May 2015 16:10:24 +0000"  >&lt;p&gt;Commit 1677622 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anshumg&quot; class=&quot;user-hover&quot; rel=&quot;anshumg&quot;&gt;anshumg&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1677622&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1677622&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6220&quot; title=&quot;Replica placement strategy for solrcloud&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6220&quot;&gt;&lt;del&gt;SOLR-6220&lt;/del&gt;&lt;/a&gt;: Fixes forbidden method invocation String#getBytes() in RuleEngineTest&lt;/p&gt;</comment>
                            <comment id="14526826" author="jira-bot" created="Mon, 4 May 2015 16:46:45 +0000"  >&lt;p&gt;Commit 1677635 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1677635&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1677635&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6220&quot; title=&quot;Replica placement strategy for solrcloud&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6220&quot;&gt;&lt;del&gt;SOLR-6220&lt;/del&gt;&lt;/a&gt;: use closeable in try block&lt;/p&gt;</comment>
                            <comment id="14526889" author="mewmewball" created="Mon, 4 May 2015 17:25:41 +0000"  >&lt;p&gt;It&apos;ll also be nice to have a new collection API to modify the rule for a collection so that we can add rules for an existing collection or modify a bad rule set.&lt;/p&gt;</comment>
                            <comment id="14526928" author="jira-bot" created="Mon, 4 May 2015 17:52:57 +0000"  >&lt;p&gt;Commit 1677642 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anshumg&quot; class=&quot;user-hover&quot; rel=&quot;anshumg&quot;&gt;anshumg&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1677642&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1677642&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6220&quot; title=&quot;Replica placement strategy for solrcloud&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6220&quot;&gt;&lt;del&gt;SOLR-6220&lt;/del&gt;&lt;/a&gt;: Fix javadocs for precommit to pass&lt;/p&gt;</comment>
                            <comment id="14526930" author="anshumg" created="Mon, 4 May 2015 17:53:45 +0000"  >&lt;p&gt;That would be a good thing to have. Can you create a new JIRA for that if one doesn&apos;t already exist?&lt;/p&gt;</comment>
                            <comment id="14526949" author="noble.paul" created="Mon, 4 May 2015 18:00:12 +0000"  >&lt;p&gt;It&apos;s planned and I would like to piggy back on the modify collection API &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5132&quot; title=&quot;Implement a modifyCollection API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5132&quot;&gt;&lt;del&gt;SOLR-5132&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14526994" author="jira-bot" created="Mon, 4 May 2015 18:24:55 +0000"  >&lt;p&gt;Commit 1677648 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1677648&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1677648&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6220&quot; title=&quot;Replica placement strategy for solrcloud&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6220&quot;&gt;&lt;del&gt;SOLR-6220&lt;/del&gt;&lt;/a&gt;: Rule Based Replica Assignment during collection creation&lt;/p&gt;</comment>
                            <comment id="14527905" author="jira-bot" created="Tue, 5 May 2015 04:55:32 +0000"  >&lt;p&gt;Commit 1677741 from shalin@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1677741&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1677741&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6220&quot; title=&quot;Replica placement strategy for solrcloud&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6220&quot;&gt;&lt;del&gt;SOLR-6220&lt;/del&gt;&lt;/a&gt;: Fix compile error on Java7&lt;/p&gt;</comment>
                            <comment id="14532782" author="jira-bot" created="Thu, 7 May 2015 14:41:37 +0000"  >&lt;p&gt;Commit 1678222 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1678222&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1678222&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6220&quot; title=&quot;Replica placement strategy for solrcloud&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6220&quot;&gt;&lt;del&gt;SOLR-6220&lt;/del&gt;&lt;/a&gt;: renamed tag names disk to freedisk, and the system property prefix to sysprop.&lt;/p&gt;</comment>
                            <comment id="14540687" author="mewmewball" created="Tue, 12 May 2015 20:48:45 +0000"  >&lt;p&gt;This doesn&apos;t seem to handle addReplica. I think it&apos;d be nice to merge in the logic of the Assign class and get rid of it completely so there&apos;s just one place to handle any kind of replica assignment.&lt;/p&gt;</comment>
                            <comment id="14541638" author="noble.paul" created="Wed, 13 May 2015 09:16:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mewmewball&quot; class=&quot;user-hover&quot; rel=&quot;mewmewball&quot;&gt;mewmewball&lt;/a&gt; That&apos;s the plan &lt;/p&gt;

&lt;p&gt;it should be added for addReplica , createShard and splitShard &lt;/p&gt;</comment>
                            <comment id="14581681" author="shalinmangar" created="Thu, 11 Jun 2015 08:38:30 +0000"  >&lt;p&gt;This was released in 5.2&lt;/p&gt;</comment>
                            <comment id="14586920" author="anshumg" created="Mon, 15 Jun 2015 21:44:34 +0000"  >&lt;p&gt;Bulk close for 5.2.0.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12723750">SOLR-6205</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12662873">SOLR-5132</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12837248">SOLR-7668</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12928617">SOLR-8522</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12835086">SOLR-7629</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12728826" name="SOLR-6220.patch" size="90899" author="noble.paul" created="Tue, 28 Apr 2015 15:39:05 +0000"/>
                            <attachment id="12727238" name="SOLR-6220.patch" size="82752" author="noble.paul" created="Wed, 22 Apr 2015 14:32:39 +0000"/>
                            <attachment id="12727150" name="SOLR-6220.patch" size="77410" author="noble.paul" created="Wed, 22 Apr 2015 07:35:22 +0000"/>
                            <attachment id="12726874" name="SOLR-6220.patch" size="78358" author="noble.paul" created="Tue, 21 Apr 2015 12:49:15 +0000"/>
                            <attachment id="12726563" name="SOLR-6220.patch" size="73896" author="noble.paul" created="Mon, 20 Apr 2015 13:50:14 +0000"/>
                            <attachment id="12725619" name="SOLR-6220.patch" size="70511" author="noble.paul" created="Wed, 15 Apr 2015 16:20:19 +0000"/>
                            <attachment id="12723634" name="SOLR-6220.patch" size="34200" author="noble.paul" created="Tue, 7 Apr 2015 13:48:09 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12730251">SOLR-6288</subtask>
                            <subtask id="12730252">SOLR-6289</subtask>
                            <subtask id="12831356">SOLR-7577</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>402923</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 23 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xclr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>402983</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>