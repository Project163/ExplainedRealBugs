<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:29:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-11606] Mockito does not work with newer Java versions -&gt; disable tests automatically when no working Mockito</title>
                <link>https://issues.apache.org/jira/browse/SOLR-11606</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When running Solr&apos;s tests with Java versions that are not supported by the Mockito mocking library, it fails with an error message.&lt;/p&gt;

&lt;p&gt;We should disable the tests, if the underlying Mockito version does not allow to mock classes, because the Java version is too new. There is already and issue open at ByteBuddy that is the root cause: &lt;a href=&quot;https://github.com/raphw/byte-buddy/issues/370&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/raphw/byte-buddy/issues/370&lt;/a&gt; and &lt;a href=&quot;https://github.com/mockito/mockito/issues/1243&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mockito/mockito/issues/1243&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The idea here is to use ByteBuddy&apos;s ClassFileVersion class to check if mocking is supported. This adds a new method to SolrTestCaseJ4: &lt;tt&gt;assumeWorkingMockito()&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Tests that use the Mockito library should add this assume to their tests, to disable them if the mocking is not supported. Instead of using a Java version test, we do this with ByteBuddy, because this is more dynamic (if we update Mockito so it works with newer Java versions, it is automatically working).&lt;/p&gt;

&lt;p&gt;At the same time, we should update Mockito/ByteBuddy ASAP when a new version is available.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13116170">SOLR-11606</key>
            <summary>Mockito does not work with newer Java versions -&gt; disable tests automatically when no working Mockito</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="uschindler">Uwe Schindler</assignee>
                                    <reporter username="uschindler">Uwe Schindler</reporter>
                        <labels>
                            <label>Java10</label>
                    </labels>
                <created>Sat, 4 Nov 2017 16:37:25 +0000</created>
                <updated>Sat, 8 Jun 2019 15:11:58 +0000</updated>
                            <resolved>Sat, 4 Nov 2017 18:40:26 +0000</resolved>
                                                    <fixVersion>7.2</fixVersion>
                    <fixVersion>8.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16239098" author="thetaphi" created="Sat, 4 Nov 2017 16:52:59 +0000"  >&lt;p&gt;Here is the patch. I will commit this after running tests with Java 10.&lt;/p&gt;</comment>
                            <comment id="16239130" author="thetaphi" created="Sat, 4 Nov 2017 17:52:41 +0000"  >&lt;p&gt;New patch, that also verifies that every test source file that uses Mockito at least contains a call to &lt;tt&gt;assumeWorkingMockito()&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16239150" author="jira-bot" created="Sat, 4 Nov 2017 18:37:53 +0000"  >&lt;p&gt;Commit 3ab1a07662db324be9cdb76a5acfcbc2cbbd85cf in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=3ab1a07&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=3ab1a07&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11606&quot; title=&quot;Mockito does not work with newer Java versions -&amp;gt; disable tests automatically when no working Mockito&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11606&quot;&gt;&lt;del&gt;SOLR-11606&lt;/del&gt;&lt;/a&gt;: Disable tests automatically if Mockito does not work with Java runtime (Java 10)&lt;/p&gt;</comment>
                            <comment id="16239152" author="jira-bot" created="Sat, 4 Nov 2017 18:40:16 +0000"  >&lt;p&gt;Commit c4a113ab9e3041deace6a5c85f5aa228a91151b5 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=c4a113a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=c4a113a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11606&quot; title=&quot;Mockito does not work with newer Java versions -&amp;gt; disable tests automatically when no working Mockito&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11606&quot;&gt;&lt;del&gt;SOLR-11606&lt;/del&gt;&lt;/a&gt;: Disable tests automatically if Mockito does not work with Java runtime (Java 10)&lt;/p&gt;</comment>
                            <comment id="16239213" author="jira-bot" created="Sat, 4 Nov 2017 20:29:25 +0000"  >&lt;p&gt;Commit 610efa79258910c7cf5025a0dbe73bc53f278785 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=610efa7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=610efa7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11606&quot; title=&quot;Mockito does not work with newer Java versions -&amp;gt; disable tests automatically when no working Mockito&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11606&quot;&gt;&lt;del&gt;SOLR-11606&lt;/del&gt;&lt;/a&gt;: Add missing assumeWorkingMockito()&lt;/p&gt;</comment>
                            <comment id="16239214" author="jira-bot" created="Sat, 4 Nov 2017 20:30:50 +0000"  >&lt;p&gt;Commit 1af62a6ed0a1b1b0a2a93fd2756e004bcb24ea6b in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=1af62a6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=1af62a6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11606&quot; title=&quot;Mockito does not work with newer Java versions -&amp;gt; disable tests automatically when no working Mockito&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11606&quot;&gt;&lt;del&gt;SOLR-11606&lt;/del&gt;&lt;/a&gt;: Add missing assumeWorkingMockito()&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12896077" name="SOLR-11606.patch" size="22960" author="uschindler" created="Sat, 4 Nov 2017 17:51:57 +0000"/>
                            <attachment id="12896062" name="SOLR-11606.patch" size="20000" author="uschindler" created="Sat, 4 Nov 2017 16:52:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 2 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3melr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>