<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:22:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9867] The Solr examples can not always be started after being stopped due to race with loading core.</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9867</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I&apos;m having trouble when I start up the schemaless example after shutting down.&lt;/p&gt;

&lt;p&gt;I first tracked this down to the fact that the run example tool is getting an error when it tries to create the SolrCore (again, it already exists) and so it deletes the cores instance dir which leads to tlog and index lock errors in Solr.&lt;/p&gt;

&lt;p&gt;The reason it seems to be trying to create the core when it already exists is that the run example tool uses a core status call to check existence and because the core is loading, we don&apos;t consider it as existing. I added a check to look for core.properties.&lt;/p&gt;

&lt;p&gt;That seemed to let me start up, but my first requests failed because the core was still loading. It appears CoreContainer#getCore  is supposed to be blocking so you don&apos;t have this problem, but there must be an issue, because it is not blocking.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13028288">SOLR-9867</key>
            <summary>The Solr examples can not always be started after being stopped due to race with loading core.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mkhl">Mikhail Khludnev</assignee>
                                    <reporter username="markrmiller@gmail.com">Mark Miller</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Dec 2016 04:28:17 +0000</created>
                <updated>Sat, 8 Jun 2019 15:32:29 +0000</updated>
                            <resolved>Fri, 5 May 2017 20:27:43 +0000</resolved>
                                                    <fixVersion>6.6</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>13</watches>
                                                                                                                                                            <comments>
                            <comment id="15750349" author="markrmiller@gmail.com" created="Thu, 15 Dec 2016 04:28:47 +0000"  >&lt;p&gt;Probably a problem with other examples too, but I have not looked into it.&lt;/p&gt;</comment>
                            <comment id="15753154" author="arafalov" created="Fri, 16 Dec 2016 01:59:49 +0000"  >&lt;p&gt;Is this with trunk or a particular version?&lt;/p&gt;</comment>
                            <comment id="15761924" author="markrmiller@gmail.com" created="Mon, 19 Dec 2016 18:31:36 +0000"  >&lt;p&gt;This is trunk so far, I have not tested on 6x.&lt;/p&gt;</comment>
                            <comment id="15781464" author="varunthacker" created="Tue, 27 Dec 2016 22:57:25 +0000"  >&lt;p&gt;Yeah this problem seems to be with other examples as well:&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;./bin/solr start -e techproducts
./bin/solr stop
./bin/solr start -e techproducts
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The third step causes the problem:&lt;br/&gt;
When we start since techproducts already exists , the start script fails to see that and tries to create the core again leaving Solr in a bad state.&lt;/p&gt;

&lt;p&gt;This doesn&apos;t happen in Solr 6.2.1 but happens in Solr 6.3&lt;br/&gt;
Here is the message I get when I run the third step in Solr 6.2.1&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;solr-6.2.1$ ./bin/solr start -e techproducts
Solr home directory ~/solr-6.2.1/example/techproducts/solr already exists.

Starting up Solr on port 8983 using command:
bin/solr start -p 8983 -s &lt;span class=&quot;code-quote&quot;&gt;&quot;example/techproducts/solr&quot;&lt;/span&gt;

Waiting up to 30 seconds to see Solr running on port 8983 [|]  
Started Solr server on port 8983 (pid=16088). Happy searching!

    
WARNING: Core &lt;span class=&quot;code-quote&quot;&gt;&apos;techproducts&apos;&lt;/span&gt; already exists!
Checked core existence using Core API command:
http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr/admin/cores?action=STATUS&amp;amp;core=techproducts
&lt;/span&gt;

Solr techproducts example launched successfully. Direct your Web browser to http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr to visit the Solr Admin UI&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15788522" author="markrmiller@gmail.com" created="Fri, 30 Dec 2016 23:07:06 +0000"  >&lt;p&gt;Thanks for looking into this Varun.&lt;/p&gt;

&lt;p&gt;I think this behavior was built into CoreContainer previously and must have been removed in a refactoring. Now I see no code that actually waits for a core to load, just the methods on CoreContainer for it.&lt;/p&gt;

&lt;p&gt;So we can restore the expected behavior here and wait for the core to load rather than throw an exception:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        if (core != null) {
          path = path.substring(idx);
        } else if (cores.isCoreLoading(corename)) { // extra mem barriers, so don&apos;t look at this before trying to get core
          throw new SolrException(ErrorCode.SERVICE_UNAVAILABLE, &quot;SolrCore is loading&quot;);
        } else {
          // the core may have just finished loading
          core = cores.getCore(corename);
          if (core != null) {
            path = path.substring(idx);
          } 
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15809514" author="markrmiller@gmail.com" created="Sun, 8 Jan 2017 14:58:29 +0000"  >&lt;p&gt;If someone has time to review this, we should get it in for release.&lt;/p&gt;</comment>
                            <comment id="15810626" author="varunthacker" created="Mon, 9 Jan 2017 04:14:17 +0000"  >&lt;p&gt;I tried out the patch against master and I get this error&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[master] ~/apache-work/lucene-solr/solr$ ./bin/solr start -e techproducts
&amp;lt;snip&amp;gt;
[master] ~/apache-work/lucene-solr/solr$ ./bin/solr stop
[master] ~/apache-work/lucene-solr/solr$ ./bin/solr start -e techproducts
Solr home directory /Users/varun/apache-work/lucene-solr/solr/example/techproducts/solr already exists.

Starting up Solr on port 8983 using command:
bin/solr start -p 8983 -s &lt;span class=&quot;code-quote&quot;&gt;&quot;example/techproducts/solr&quot;&lt;/span&gt;

Archiving 1 old GC log files to /Users/varun/apache-work/lucene-solr/solr/example/techproducts/solr/../logs/archived
Archiving 1 console log files to /Users/varun/apache-work/lucene-solr/solr/example/techproducts/solr/../logs/archived
Rotating solr logs, keeping a max of 9 generations
Waiting up to 180 seconds to see Solr running on port 8983 [\]  
Started Solr server on port 8983 (pid=53397). Happy searching!

    
Creating &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; core &lt;span class=&quot;code-quote&quot;&gt;&apos;techproducts&apos;&lt;/span&gt; using command:
http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr/admin/cores?action=CREATE&amp;amp;name=techproducts&amp;amp;instanceDir=techproducts
&lt;/span&gt;

ERROR: Error CREATEing SolrCore &lt;span class=&quot;code-quote&quot;&gt;&apos;techproducts&apos;&lt;/span&gt;: Could not create a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; core in /Users/varun/apache-work/lucene-solr/solr/example/techproducts/solr/techproductsas another core is already defined there


ERROR: Failed to create techproducts using command: [-name, techproducts, -shards, 1, -replicationFactor, 1, -confname, techproducts, -confdir, sample_techproducts_configs, -configsetsDir, /Users/varun/apache-work/lucene-solr/solr/server/solr/configsets, -solrUrl, http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr]&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="15810664" author="varunthacker" created="Mon, 9 Jan 2017 04:35:44 +0000"  >&lt;p&gt;The patch didn&apos;t work because &lt;tt&gt;SolrCli Line 2704&lt;/tt&gt; makes a call to &lt;tt&gt;admin/cores?action=STATUS&amp;amp;core=techproducts&lt;/tt&gt;} to check if the core exists or not.&lt;/p&gt;

&lt;p&gt;In {HttpSolrCall}} &lt;tt&gt;admin&lt;/tt&gt; requests are handled differently&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (handler != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      solrReq = SolrRequestParsers.DEFAULT.parse(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, path, req);
      solrReq.getContext().put(CoreContainer.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName(), cores);
      requestType = RequestType.ADMIN;
      action = ADMIN;
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15831811" author="janhoy" created="Fri, 20 Jan 2017 14:24:19 +0000"  >&lt;p&gt;Tested (without patch) on 6.3 and master, and I get the same behavior as you got in 6.2.1 (&lt;tt&gt;WARNING: Core &apos;techproducts&apos; already exists!&lt;/tt&gt;)&lt;/p&gt;</comment>
                            <comment id="15831817" author="markrmiller@gmail.com" created="Fri, 20 Jan 2017 14:31:39 +0000"  >&lt;p&gt;The bug is essentially a race so no surprise it could work for someone. Almost never does for&lt;br/&gt;
me. &lt;/p&gt;</comment>
                            <comment id="15831889" author="janhoy" created="Fri, 20 Jan 2017 15:06:00 +0000"  >&lt;p&gt;So could a workaround for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2646&quot; title=&quot;Integrate Solr benchmarking support into the Benchmark module&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2646&quot;&gt;&lt;del&gt;SOLR-2646&lt;/del&gt;&lt;/a&gt; be to introduce a small delay between starting Solr and checking for collections? Or simply double check collection existence using another method in SolrCLI?&lt;/p&gt;</comment>
                            <comment id="15831901" author="markrmiller@gmail.com" created="Fri, 20 Jan 2017 15:10:25 +0000"  >&lt;p&gt;I&apos;m not sure if you can easily work around it outside of hacking the Solr start script/code to do that wait, but yeah, you can work around it with a hack.&lt;/p&gt;

&lt;p&gt;We should fix this bug soon though - if I wasn&apos;t traveling I would have been sure to get it in 6.4. Solr has always accepted requests on startup without having to deal with getting a loading core exception.&lt;/p&gt;</comment>
                            <comment id="15832895" author="caomanhdat" created="Sat, 21 Jan 2017 09:04:42 +0000"  >&lt;p&gt;I didn&apos;t look at the issue carefully, but this is how I normally start schemaless example and restart it&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;./bin/solr start -e techproducts
./bin/solr stop
./bin/solr start -s example/techproducts/solr 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15833063" author="markrmiller@gmail.com" created="Sat, 21 Jan 2017 17:10:17 +0000"  >&lt;p&gt;Yeah, and that may work for some, but now there is a race where it won&apos;t work in many cases, and it also means we have added a race to many scripting cases similar to our start script issue - if you start Solr and start trying to interact with a core in a script, it will depend on timing how successful you are without introducing retry code.&lt;/p&gt;

&lt;p&gt;Anyway, I&apos;ll fix this soon, I&apos;ve just been busy.&lt;/p&gt;</comment>
                            <comment id="15907815" author="ichattopadhyaya" created="Mon, 13 Mar 2017 16:47:28 +0000"  >&lt;p&gt;Moving to 6.5, since 6.4 has already been released.&lt;/p&gt;</comment>
                            <comment id="15987650" author="mkhludnev" created="Thu, 27 Apr 2017 20:53:36 +0000"  >&lt;p&gt;I&apos;ve added printing response on core status requests. Here is how race looks like&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Solr is running on 8983 in standalone mode with status:
{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;solr_home&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;/Use..olr/example/techproducts/solr&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;version&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;7.0.0-SNAPSHOT eb1671c8f9a472a6ba6ff2516c55110574a64a96 - khludnevm - 2017-04-27 18:02:58&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;startTime&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;2017-04-27T15:09:24.404Z&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;uptime&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;0 days, 0 hours, 0 minutes, 9 seconds&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;memory&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;35.9 MB (%7.3) of 490.7 MB&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;baseUrl&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr&quot;&lt;/span&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;here are status responses&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr/admin/cores?action=STATUS&amp;amp;core=techproducts
&lt;/span&gt;{responseHeader={status=0, QTime=2}, initFailures={}, status={techproducts={}}}
http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr/admin/cores?action=STATUS&amp;amp;core=techproducts
&lt;/span&gt;{responseHeader={status=0, QTime=0}, initFailures={}, status={techproducts={}}}

Creating &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; core &lt;span class=&quot;code-quote&quot;&gt;&apos;techproducts&apos;&lt;/span&gt; using command:
http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr/admin/cores?action=CREATE&amp;amp;name=techproducts&amp;amp;instanceDir=techproducts
&lt;/span&gt;
ERROR: Error CREATEing SolrCore &lt;span class=&quot;code-quote&quot;&gt;&apos;techproducts&apos;&lt;/span&gt;: Unable to create core [techproducts] Caused by: Lock held by &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; virtual machine: /Users/khludnevm/lucene-solr/solr/example/techproducts/solr/techproducts/data/index/write.lock
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here is how it looks like in logs, one core is loading, it responds on STATUS HttpSolrCall, and recieves core create request from SolrCLI. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;INFO  - 2017-04-27 15:09:33.021; [   x:techproducts] org.apache.solr.schema.IndexSchema; [techproducts] Schema name=example
INFO  - 2017-04-27 15:09:34.059; [   ] org.apache.solr.servlet.HttpSolrCall; [admin] webapp=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; path=/admin/info/system params={wt=json} status=0 QTime=103
INFO  - 2017-04-27 15:09:34.132; [   ] org.apache.solr.core.TransientSolrCoreCacheDefault; Allocating &lt;span class=&quot;code-keyword&quot;&gt;transient&lt;/span&gt; cache &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 2147483647 &lt;span class=&quot;code-keyword&quot;&gt;transient&lt;/span&gt; cores
INFO  - 2017-04-27 15:09:34.133; [   ] org.apache.solr.servlet.HttpSolrCall; [admin] webapp=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; path=/admin/cores params={core=techproducts&amp;amp;action=STATUS&amp;amp;wt=json} status=0 QTime=2
INFO  - 2017-04-27 15:09:34.202; [   x:techproducts] org.apache.solr.&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;.RestManager$Registry; Registered ManagedResource impl org.apache.solr.&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;.schema.analysis.ManagedWordSetResource
INFO  - 2017-04-27 15:09:34.202; [   ] org.apache.solr.servlet.HttpSolrCall; [admin] webapp=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; path=/admin/info/system params={wt=json} status=0 QTime=61
INFO  - 2017-04-27 15:09:34.203; [   x:techproducts] org.apache.solr.&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;.RestManager$Registry; Registered ManagedResource impl org.apache.solr.&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;.schema.analysis.ManagedSynonymFilterFa
INFO  - 2017-04-27 15:09:34.215; [   x:techproducts] org.apache.solr.schema.IndexSchema; Loaded schema example/1.6 with uniqueid field id
INFO  - 2017-04-27 15:09:34.216; [   x:techproducts] org.apache.solr.&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;.RestManager$Registry; Added observer of type org.apache.solr.&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;.schema.analysis.ManagedStopFilterFactory to exi
INFO  - 2017-04-27 15:09:34.216; [   x:techproducts] org.apache.solr.&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;.RestManager$Registry; Added observer of type org.apache.solr.&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;.schema.analysis.ManagedSynonymFilterFactory to 
INFO  - 2017-04-27 15:09:34.270; [   ] org.apache.solr.servlet.HttpSolrCall; [admin] webapp=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; path=/admin/info/system params={wt=json} status=0 QTime=57
INFO  - 2017-04-27 15:09:34.282; [   ] org.apache.solr.servlet.HttpSolrCall; [admin] webapp=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; path=/admin/cores params={core=techproducts&amp;amp;action=STATUS&amp;amp;wt=json} status=0 QTime=0
INFO  - 2017-04-27 15:09:34.287; [   ] org.apache.solr.handler.admin.CoreAdminOperation; core create command name=techproducts&amp;amp;action=CREATE&amp;amp;instanceDir=techproducts&amp;amp;wt=json
INFO  - 2017-04-27 15:09:34.294; [   x:techproducts] org.apache.solr.core.CoreContainer; Creating SolrCore &lt;span class=&quot;code-quote&quot;&gt;&apos;techproducts&apos;&lt;/span&gt; using configuration from instancedir /Users/khl
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; </comment>
                            <comment id="15989383" author="mkhludnev" created="Fri, 28 Apr 2017 20:00:20 +0000"  >&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12865628/12865628_SOLR-9867-test.patch&quot; title=&quot;SOLR-9867-test.patch attached to SOLR-9867&quot;&gt;SOLR-9867-test.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; enabling existing test (Thank&apos;s to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt;, it&apos;s was an enormous effort, Tim!).&lt;br/&gt;
Ok. &lt;tt&gt;CoreAdminOperation.getCoreStatus(CoreContainer, String, boolean)&lt;/tt&gt; is completely ignorant to &lt;tt&gt;CoreContainer.isCoreLoading(String)&lt;/tt&gt;, I can explain this. It&apos;s ok. &lt;/p&gt;</comment>
                            <comment id="15989390" author="mkhludnev" created="Fri, 28 Apr 2017 20:08:07 +0000"  >&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12865616/12865616_SDF+init+and+doFilter+in+parallel.png&quot; title=&quot;SDF init and doFilter in parallel.png attached to SOLR-9867&quot;&gt;SDF init and doFilter in parallel.png&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; here is what I can&apos;t explain. SolrDispatchFilter.init() and doFilter() is running in parallel. How is it possible? It&apos;s the same SolrDispatchFilter instance. Can it be caused just by JettyRunner usage in test?   &lt;/p&gt;</comment>
                            <comment id="15989536" author="mkhludnev" created="Fri, 28 Apr 2017 22:25:59 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;diff --git a/solr/core/src/java/org/apache/solr/servlet/SolrDispatchFilter.java b/solr/core/src/java/org/apache/solr/servlet/SolrDispatchFilter.java
index 39ccadc..ab46f19 100644
--- a/solr/core/src/java/org/apache/solr/servlet/SolrDispatchFilter.java
+++ b/solr/core/src/java/org/apache/solr/servlet/SolrDispatchFilter.java
@@ -96,6 +96,8 @@
   &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt; testMode = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
   &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isV2Enabled = !&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;.equals(&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;disable.v2.api&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;));
 
+  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; initIsDone;
+
   /**
    * Enum to define action that needs to be processed.
    * PASSTHROUGH: Pass through to Restlet via webapp.
@@ -182,6 +184,7 @@
     }
 
     log.trace(&lt;span class=&quot;code-quote&quot;&gt;&quot;SolrDispatchFilter.init() done&quot;&lt;/span&gt;);
+    initIsDone = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
   }
 
   &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void setupJvmMetrics()  {
@@ -307,6 +310,7 @@
   }
   
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void doFilter(ServletRequest request, ServletResponse response, FilterChain chain, &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; retry) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, ServletException {
+    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; initIsDone:&lt;span class=&quot;code-quote&quot;&gt;&quot;I swear&quot;&lt;/span&gt;;
     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!(request &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; HttpServletRequest)) &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
     &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;305  INFO  (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-1) [    ] o.a.s.s.SolrDispatchFilter  ___      _       Welcome to Apache Solr&#8482; version 7.0.0
305  INFO  (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-1) [    ] o.a.s.s.SolrDispatchFilter / __| ___| |_ _   Starting in standalone mode on port 52215
305  INFO  (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-1) [    ] o.a.s.s.SolrDispatchFilter \__ \/ _ \ | &apos;_|  Install dir: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
321  INFO  (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-1) [    ] o.a.s.s.SolrDispatchFilter |___/\___/_|_|    Start time: 2017-04-28T22:25:03.738Z
335  INFO  (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-1) [    ] o.a.s.c.SolrResourceLoader solr home defaulted to &lt;span class=&quot;code-quote&quot;&gt;&apos;solr/&apos;&lt;/span&gt; (could not find system property or JNDI)
341  INFO  (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-1) [    ] o.a.s.c.SolrXmlConfig Loading container configuration from /&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/folders/rg/fr1t3mx9391f1_g0xs8wtq2d1xv078/T/solr.util.TestSolrCLIRunExample_E157FC17061E2B1D-001/tempDir-001/schemaless/solr/solr.xml
465  WARN  (qtp151277770-21) [    ] o.e.j.s.ServletHandler Error &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /solr/admin/info/system
java.lang.AssertionError: I swear
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:313)
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:309)
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1699)
	at org.apache.solr.client.solrj.embedded.JettySolrRunner$DebugFilter.doFilter(JettySolrRunner.java:139)
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1699)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:582)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:224)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1180)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:512)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1112)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)
	at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:462)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)
	at org.eclipse.jetty.server.Server.handle(Server.java:534)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So, what we gonna do, then... &lt;/p&gt;</comment>
                            <comment id="15990057" author="mkhludnev" created="Sat, 29 Apr 2017 22:03:02 +0000"  >&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12866416/12866416_SOLR-9867.patch&quot; title=&quot;SOLR-9867.patch attached to SOLR-9867&quot;&gt;SOLR-9867.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; is on 6x. It enables &lt;tt&gt;testTechproductsExample&lt;/tt&gt; and makes &lt;tt&gt;beast&lt;/tt&gt; happy about it. Therefore, there should be some work to fix tests, which are currently failing on ci.  &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the patch makes core status aware of loading cores and latches SolrDispatchFilter.doFilter on init. Otherwise, status request might be handled before core starts load in background. I always though that a servlet container provides init/doFilter latching, so naive.&lt;/li&gt;
	&lt;li&gt;perhaps, instead of latch we can assign &lt;tt&gt;cores&lt;/tt&gt; strictly at the end of &lt;tt&gt;init&lt;/tt&gt;. What do you think?&lt;/li&gt;
	&lt;li&gt;patch also blocks container closing, until core loading is stopped with failure.&lt;/li&gt;
	&lt;li&gt;and also it makes run example tool spin until core is loaded before search.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Concerns? &lt;/p&gt;</comment>
                            <comment id="15990128" author="erickerickson" created="Sun, 30 Apr 2017 05:20:58 +0000"  >&lt;p&gt;Fixed some indentation issues, but otherwise identical.&lt;/p&gt;

&lt;p&gt;FWIW, I&apos;m curious to see if this is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10562&quot; title=&quot;TestSolrCLIRunExample failures indicating documents just indexed are not all searchable.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10562&quot;&gt;&lt;del&gt;SOLR-10562&lt;/del&gt;&lt;/a&gt; and the recent SolrCloudExampleTest failures so I&apos;m beasting this latter tonight. Sometime soon I&apos;ll uncrank the debugging I had in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10562&quot; title=&quot;TestSolrCLIRunExample failures indicating documents just indexed are not all searchable.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10562&quot;&gt;&lt;del&gt;SOLR-10562&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;All this has to do with reloading, so I figured I&apos;d at least see.&lt;/p&gt;</comment>
                            <comment id="15990142" author="mdrob" created="Sun, 30 Apr 2017 06:06:14 +0000"  >&lt;p&gt;Great idea to add isLoading info.&lt;/p&gt;

&lt;p&gt;Is latch.await() on every request going to be a performance impact? I don&apos;t have a jdk source on this computer to check.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;perhaps, instead of latch we can assign cores strictly at the end of init. What do you think?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Depends on if we want early requests to fail or to wait, no?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;patch also blocks container closing, until core loading is stopped with failure.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;couldn&apos;t this take a while? How did you decide 10 seconds?&lt;/p&gt;</comment>
                            <comment id="15990278" author="erickerickson" created="Sun, 30 Apr 2017 16:17:36 +0000"  >&lt;p&gt;Well, it was a nice idea but apparently this JIRA doesn&apos;t fix the recent SolrCloudExampleTest failures. Pity.&lt;/p&gt;</comment>
                            <comment id="15990284" author="mkhludnev" created="Sun, 30 Apr 2017 16:36:10 +0000"  >&lt;p&gt;Right. Heads up &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10588&quot; title=&quot;SolrCloudExampleTest.testLoadDocsIntoGettingStartedCollection failure caused by concurrent core reload. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10588&quot;&gt;&lt;del&gt;SOLR-10588&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15994981" author="mkhludnev" created="Wed, 3 May 2017 14:32:42 +0000"  >&lt;p&gt;also attaching &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12866188/12866188_SOLR-9867-ignore-whitespace.patch&quot; title=&quot;SOLR-9867-ignore-whitespace.patch attached to SOLR-9867&quot;&gt;SOLR-9867-ignore-whitespace.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; to make review easier since original &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12866416/12866416_SOLR-9867.patch&quot; title=&quot;SOLR-9867.patch attached to SOLR-9867&quot;&gt;SOLR-9867.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; has too many identations. &lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;Keystuff&quot;&gt;&lt;/a&gt;Key stuff&lt;/h3&gt;
&lt;ul&gt;
	&lt;li&gt;I&apos;ve removed SDF.init() latch, and just assign volatile &lt;tt&gt;SDF.cores&lt;/tt&gt; at the end of &lt;tt&gt;init()&lt;/tt&gt; since SDF.doFilter() already has a precondition check &lt;tt&gt;SDF.cores!=null&lt;/tt&gt;.&lt;/li&gt;
	&lt;li&gt;this change introduces new &lt;tt&gt;/admin/cores?action=STATUS&amp;amp;&lt;/tt&gt; response:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{ name:foo, isLoaded:&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, isLoading:&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;SolrCLI&lt;/tt&gt; waits for a core to come up 1 min max with 1 sec poll interval.&lt;/li&gt;
&lt;/ul&gt;


&lt;h3&gt;&lt;a name=&quot;BTW&quot;&gt;&lt;/a&gt;BTW&lt;/h3&gt;
&lt;p&gt;What about committing it tomorrow? &lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;Also&quot;&gt;&lt;/a&gt;Also&lt;/h3&gt;
&lt;p&gt;All &lt;tt&gt;TestSolrCLIRunExample&lt;/tt&gt; tests runs just for 47 secs at my laptop. Should it still be marked as &lt;tt&gt;@Slow&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="15994993" author="mkhludnev" created="Wed, 3 May 2017 14:40:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mdrob&quot; class=&quot;user-hover&quot; rel=&quot;mdrob&quot;&gt;mdrob&lt;/a&gt;,&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;perhaps, instead of latch we can assign cores strictly at the end of init. What do you think?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Indeed! Thanks for the hint!&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Depends on if we want early requests to fail or to wait, no?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I suppose it&apos;s fine since we already have this check.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;couldn&apos;t this take a while? How did you decide 10 seconds?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I hardly remember how exactly I get to it. Now I set it to 30 sec (almost no one experience it, since most of the users wait till Solr load cores before stop it), internally it makes 0.5 sec polls, so it doesn&apos;t really matter. But I&apos;m happy to put any number there which makes tests pass. &lt;/p&gt;</comment>
                            <comment id="15995053" author="erickerickson" created="Wed, 3 May 2017 15:19:52 +0000"  >&lt;p&gt;got the patch, I&apos;m starting to give it a beast run. I notice that you also changed TestSolrCLIRunExample but I&apos;m beasting SolrCloudExampleTest. Let me know if I should beast TestSolrCLIRunExample instead.&lt;/p&gt;</comment>
                            <comment id="15995077" author="mkhludnev" created="Wed, 3 May 2017 15:30:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=erickerickson&quot; class=&quot;user-hover&quot; rel=&quot;erickerickson&quot;&gt;erickerickson&lt;/a&gt;,&lt;br/&gt;
Here we need to test/beast &lt;tt&gt;TestSolrCLIRunExample&lt;/tt&gt; for sure. We&apos;ve done with &lt;tt&gt;SolrCloudExampleTest&lt;/tt&gt; at &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10588&quot; title=&quot;SolrCloudExampleTest.testLoadDocsIntoGettingStartedCollection failure caused by concurrent core reload. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10588&quot;&gt;&lt;del&gt;SOLR-10588&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15995083" author="erickerickson" created="Wed, 3 May 2017 15:33:19 +0000"  >&lt;p&gt;Got it, running TestSolrCLIRunExample now.&lt;/p&gt;</comment>
                            <comment id="15995485" author="erickerickson" created="Wed, 3 May 2017 19:31:12 +0000"  >&lt;p&gt;Out of 1,000 runs I see only one problem, our old friend ObjectTracker:&lt;/p&gt;

&lt;p&gt;Throwable #1: java.lang.AssertionError: ObjectTracker found 5 object(s) that were not released!!! &lt;span class=&quot;error&quot;&gt;&amp;#91;NRTCachingDirectory, NRTCachingDirectory, NRTCachingDirectory, MDCAwareThreadPoolExecutor, TransactionLog&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;All other 999 showed &quot;BUILD SUCCESSFUL&quot;&lt;/p&gt;</comment>
                            <comment id="15995503" author="mkhludnev" created="Wed, 3 May 2017 19:41:12 +0000"  >&lt;p&gt;It sounds like it can go off tomorrow.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=erickerickson&quot; class=&quot;user-hover&quot; rel=&quot;erickerickson&quot;&gt;erickerickson&lt;/a&gt;, can you share an output from &lt;em&gt;our old friend&lt;/em&gt; by any chance? &lt;/p&gt;</comment>
                            <comment id="15995672" author="erickerickson" created="Wed, 3 May 2017 20:59:53 +0000"  >&lt;p&gt;Here&apos;s the failing log. Thank heavens for Mark&apos;s beasting program....&lt;/p&gt;</comment>
                            <comment id="15995734" author="mkhludnev" created="Wed, 3 May 2017 21:35:43 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   [junit4]   2&amp;gt; 35073 INFO  (qtp1031286021-158) [n:localhost:32820_solr    ] o.a.s.s.HttpSolrCall [admin] webapp=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; path=/admin/collections params={replicationFactor=2&amp;amp;maxShardsPerNode=4&amp;amp;collection.configName=testCloudExamplePrompt&amp;amp;name=testCloudExamplePrompt&amp;amp;action=CREATE&amp;amp;numShards=2&amp;amp;wt=json} status=0 QTime=5117
   [junit4]   2&amp;gt; 35108 INFO  (qtp1031286021-207) [n:localhost:32820_solr c:testCloudExamplePrompt s:shard2 r:core_node1 x:testCloudExamplePrompt_shard2_replica1] o.a.s.h.SolrConfigHandler Executed config commands successfully and persisted to ZK [{&lt;span class=&quot;code-quote&quot;&gt;&quot;set-property&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;updateHandler.autoSoftCommit.maxTime&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;3000&quot;&lt;/span&gt;}}]
   [junit4]   2&amp;gt; 35111 INFO  (qtp1031286021-207) [n:localhost:32820_solr c:testCloudExamplePrompt s:shard2 r:core_node1 x:testCloudExamplePrompt_shard2_replica1] o.a.s.h.SolrConfigHandler Waiting up to 30 secs &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 4 replicas to set the property overlay to be of version 0 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; collection testCloudExamplePrompt
   [junit4]   2&amp;gt; 35112 INFO  (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-81) [n:localhost:32820_solr    ] o.a.s.c.SolrCore config update listener called &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; core testCloudExamplePrompt_shard2_replica2
   [junit4]   2&amp;gt; 35115 INFO  (solrHandlerExecutor-81-thread-1-processing-n:localhost:32820_solr x:testCloudExamplePrompt_shard2_replica1 s:shard2 c:testCloudExamplePrompt r:core_node1) [n:localhost:32820_solr c:testCloudExamplePrompt s:shard2 r:core_node1 x:testCloudExamplePrompt_shard2_replica1] o.a.s.h.SolrConfigHandler Time elapsed : 0 secs, maxWait 30
   [junit4]   2&amp;gt; 35115 INFO  (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-81) [n:localhost:32820_solr    ] o.a.s.c.SolrCore core reload testCloudExamplePrompt_shard2_replica2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Collection has been created, param update is sent, Zk listener &lt;tt&gt;(Thread-81)&lt;/tt&gt; starts core reload &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   [junit4]   2&amp;gt; 39099 INFO  (qtp1031286021-155) [n:localhost:32820_solr    ] o.a.s.m.SolrMetricManager Closing metric reporters &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; registry=solr.core.testCloudExamplePrompt.shard2.replica2, tag=149464127
   [junit4]   2&amp;gt; 39099 INFO  (qtp1031286021-155) [n:localhost:32820_solr    ] o.a.s.m.SolrMetricManager Closing metric reporters &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; registry=solr.collection.testCloudExamplePrompt.shard2.leader, tag=149464127
   [junit4]   2&amp;gt; 39106 INFO  (zkCallback-16-thread-1-processing-n:localhost:32820_solr) [n:localhost:32820_solr    ] o.a.s.c.c.ZkStateReader A cluster state change: [WatchedEvent state:SyncConnected type:NodeDataChanged path:/collections/testCloudExamplePrompt/state.json] &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; collection [testCloudExamplePrompt] has occurred - updating... (live nodes size: [1])
   [junit4]   2&amp;gt; 39106 INFO  (qtp1031286021-221) [n:localhost:32820_solr    ] o.a.s.s.HttpSolrCall [admin] webapp=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; path=/admin/cores params={deleteInstanceDir=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;core=testCloudExamplePrompt_shard1_replica2&amp;amp;qt=/admin/cores&amp;amp;deleteDataDir=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;action=UNLOAD&amp;amp;wt=javabin&amp;amp;version=2} status=0 QTime=107
   [junit4]   2&amp;gt; 39107 INFO  (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-81) [n:localhost:32820_solr c:testCloudExamplePrompt s:shard2 r:core_node3 x:testCloudExamplePrompt_shard2_replica2] o.a.s.m.r.SolrJmxReporter JMX monitoring &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;solr.core.testCloudExamplePrompt.shard1.replica2&apos;&lt;/span&gt; (registry &lt;span class=&quot;code-quote&quot;&gt;&apos;solr.core.testCloudExamplePrompt.shard1.replica2&apos;&lt;/span&gt;) enabled at server: com.sun.jmx.mbeanserver.JmxMBeanServer@167c2a09
   [junit4]   2&amp;gt; 39108 INFO  (qtp1031286021-187) [n:localhost:32820_solr    ] o.a.s.s.HttpSolrCall [admin] webapp=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; path=/admin/cores params={deleteInstanceDir=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;core=testCloudExamplePrompt_shard2_replica1&amp;amp;qt=/admin/cores&amp;amp;deleteDataDir=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;action=UNLOAD&amp;amp;wt=javabin&amp;amp;version=2} status=0 QTime=77
   [junit4]   2&amp;gt; 39109 WARN  (zkCallback-16-thread-1-processing-n:localhost:32820_solr) [n:localhost:32820_solr    ] o.a.s.c.LeaderElector Our node is no longer in line to be leader
   [junit4]   2&amp;gt; 39109 WARN  (zkCallback-16-thread-2-processing-n:localhost:32820_solr) [n:localhost:32820_solr    ] o.a.s.c.LeaderElector Our node is no longer in line to be leader
   [junit4]   2&amp;gt; 39113 WARN  (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-81) [n:localhost:32820_solr c:testCloudExamplePrompt s:shard2 r:core_node3 x:testCloudExamplePrompt_shard2_replica2] o.a.s.c.ZkController listener &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; error
   [junit4]   2&amp;gt; org.apache.solr.common.SolrException: Unable to reload core [testCloudExamplePrompt_shard1_replica2]
   [junit4]   2&amp;gt; 	at org.apache.solr.core.CoreContainer.reload(CoreContainer.java:1197)
   [junit4]   2&amp;gt; 	at org.apache.solr.core.SolrCore.lambda$getConfListener$18(SolrCore.java:2953)
   [junit4]   2&amp;gt; 	at org.apache.solr.cloud.ZkController.lambda$fireEventListeners$4(ZkController.java:2350)
   [junit4]   2&amp;gt; 	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
   [junit4]   2&amp;gt; Caused by: java.lang.NullPointerException
   [junit4]   2&amp;gt; 	at org.apache.solr.metrics.SolrMetricManager.loadShardReporters(SolrMetricManager.java:1032)
   [junit4]   2&amp;gt; 	at org.apache.solr.metrics.SolrCoreMetricManager.loadReporters(SolrCoreMetricManager.java:89)
   [junit4]   2&amp;gt; 	at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:897)
   [junit4]   2&amp;gt; 	at org.apache.solr.core.SolrCore.reload(SolrCore.java:648)
   [junit4]   2&amp;gt; 	at org.apache.solr.core.CoreContainer.reload(CoreContainer.java:1184)
   [junit4]   2&amp;gt; 	... 3 more
   [junit4]   2&amp;gt; 39114 INFO  (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-81) [n:localhost:32820_solr c:testCloudExamplePrompt s:shard2 r:core_node3 x:testCloudExamplePrompt_shard2_replica2] o.a.s.c.SolrCore config update listener called &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; core testCloudExamplePrompt_shard2_replica1
   [junit4]   2&amp;gt; 39114 INFO  (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-81) [n:localhost:32820_solr c:testCloudExamplePrompt s:shard2 r:core_node3 x:testCloudExamplePrompt_shard2_replica2] o.a.s.c.SolrCore config update listener called &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; core testCloudExamplePrompt_shard1_replica1
   [junit4]   2&amp;gt; 39122 INFO  (qtp1031286021-155) [n:localhost:32820_solr    ] o.a.s.s.HttpSolrCall [admin] webapp=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; path=/admin/cores params={deleteInstanceDir=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;core=testCloudExamplePrompt_shard2_replica2&amp;amp;qt=/admin/cores&amp;amp;deleteDataDir=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;action=UNLOAD&amp;amp;wt=javabin&amp;amp;version=2} status=0 QTime=89
   [junit4]   2&amp;gt; 39122 INFO  (qtp1031286021-208) [n:localhost:32820_solr    ] o.a.s.s.HttpSolrCall [admin] webapp=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; path=/admin/cores params={deleteInstanceDir=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;core=testCloudExamplePrompt_shard1_replica1&amp;amp;qt=/admin/cores&amp;amp;deleteDataDir=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;action=UNLOAD&amp;amp;wt=javabin&amp;amp;version=2} status=0 QTime=116
   [junit4]   2&amp;gt; 39840 INFO  (qtp1031286021-207) [n:localhost:32820_solr    ] o.a.s.s.HttpSolrCall [admin] webapp=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; path=/admin/collections params={name=testCloudExamplePrompt&amp;amp;action=DELETE&amp;amp;wt=json} status=0 QTime=867
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Core unloading &lt;tt&gt;(qtp1031286021-155)&lt;/tt&gt; closed Metrics&apos;s registry and right after that reloading core tries to register in it. This causes NPE, which leaks the &quot;old&quot; core, don&apos;t know why. &lt;/p&gt;

&lt;p&gt;I don&apos;t consider it as a blocker for commit. WDYT?  &lt;/p&gt;</comment>
                            <comment id="15995801" author="erickerickson" created="Wed, 3 May 2017 22:22:34 +0000"  >&lt;p&gt;It&apos;s nothing new I don&apos;t think. Possibly related to Shalin&apos;s comment on &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10562&quot; title=&quot;TestSolrCLIRunExample failures indicating documents just indexed are not all searchable.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10562&quot;&gt;&lt;del&gt;SOLR-10562&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;So let&apos;s go ahead and commit and perhaps beast it again when something happens on 10562?&lt;/p&gt;</comment>
                            <comment id="15996238" author="jira-bot" created="Thu, 4 May 2017 06:20:43 +0000"  >&lt;p&gt;Commit 32b7791fa8019aff2fca65c06deda48a6360da41 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkhludnev&quot; class=&quot;user-hover&quot; rel=&quot;mkhludnev&quot;&gt;mkhludnev&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=32b7791&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=32b7791&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9867&quot; title=&quot;The Solr examples can not always be started after being stopped due to race with loading core.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9867&quot;&gt;&lt;del&gt;SOLR-9867&lt;/del&gt;&lt;/a&gt;: fixing TestSolrCLIRunExample.testTechproductsExample&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;SolrDispatchFilter.doFilter rejects invocation until init() is completed.&lt;/li&gt;
	&lt;li&gt;introducing isLoaded=false, isLoading=true core status&lt;/li&gt;
	&lt;li&gt;blocking shutdown until core loading stops&lt;/li&gt;
	&lt;li&gt;looping run example tool while core is loading 1 min max.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15996251" author="jira-bot" created="Thu, 4 May 2017 06:33:25 +0000"  >&lt;p&gt;Commit 62b0458166dda2a83aee3e348ae76ea75542f6b4 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkhludnev&quot; class=&quot;user-hover&quot; rel=&quot;mkhludnev&quot;&gt;mkhludnev&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=62b0458&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=62b0458&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9867&quot; title=&quot;The Solr examples can not always be started after being stopped due to race with loading core.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9867&quot;&gt;&lt;del&gt;SOLR-9867&lt;/del&gt;&lt;/a&gt;: fixing TestSolrCLIRunExample.testTechproductsExample&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;SolrDispatchFilter.doFilter rejects invocation until init() is completed.&lt;/li&gt;
	&lt;li&gt;introducing isLoaded=false, isLoading=true core status&lt;/li&gt;
	&lt;li&gt;blocking shutdown until core loading stops&lt;/li&gt;
	&lt;li&gt;looping run example tool while core is loading 1 min max.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15996302" author="mkhludnev" created="Thu, 4 May 2017 07:43:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=erickerickson&quot; class=&quot;user-hover&quot; rel=&quot;erickerickson&quot;&gt;erickerickson&lt;/a&gt; I spin off &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10605&quot; title=&quot;TestSolrCLIRunExample.testInteractiveSolrCloudExample() ObjectTracker failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10605&quot;&gt;&lt;del&gt;SOLR-10605&lt;/del&gt;&lt;/a&gt; since &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9867&quot; title=&quot;The Solr examples can not always be started after being stopped due to race with loading core.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9867&quot;&gt;&lt;del&gt;SOLR-9867&lt;/del&gt;&lt;/a&gt; is about &lt;tt&gt;TestSolrCLIRunExample.testTechproductsExample()&lt;/tt&gt;.&lt;br/&gt;
Please comment on it.  &lt;/p&gt;</comment>
                            <comment id="15996337" author="mkhludnev" created="Thu, 4 May 2017 08:22:19 +0000"  >&lt;p&gt;Test passed.&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/Lucene-Solr-Tests-6.x/861/testReport/org.apache.solr.util/TestSolrCLIRunExample/testTechproductsExample/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Lucene-Solr-Tests-6.x/861/testReport/org.apache.solr.util/TestSolrCLIRunExample/testTechproductsExample/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15996426" author="mkhludnev" created="Thu, 4 May 2017 09:22:37 +0000"  >&lt;p&gt;failure &lt;br/&gt;
&lt;a href=&quot;https://jenkins.thetaphi.de/job/Lucene-Solr-master-MacOSX/3986/testReport/org.apache.solr.util/TestSolrCLIRunExample/testTechproductsExample/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jenkins.thetaphi.de/job/Lucene-Solr-master-MacOSX/3986/testReport/org.apache.solr.util/TestSolrCLIRunExample/testTechproductsExample/&lt;/a&gt;&lt;br/&gt;
[^Lucene-Solr-master-MacOSX #3986 Console [Jenkins].htm]&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.AssertionError: expected 32 docs in the techproducts example but found 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15996505" author="werder" created="Thu, 4 May 2017 10:26:06 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I&apos;ve removed SDF.init() latch, and just assign volatile SDF.cores at the end of init() since SDF.doFilter() already has a precondition check SDF.cores!=null.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not sure whether it helped - there is an assignment for &lt;tt&gt;cores&lt;/tt&gt; in &lt;tt&gt;createCoreContainer()&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="15996649" author="mkhludnev" created="Thu, 4 May 2017 12:40:54 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=werder&quot; class=&quot;user-hover&quot; rel=&quot;werder&quot;&gt;werder&lt;/a&gt;. &lt;br/&gt;
I suppose I can commit this &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12866388/12866388_SOLR-9867-createCoreContainer-fix.patch&quot; title=&quot;SOLR-9867-createCoreContainer-fix.patch attached to SOLR-9867&quot;&gt;SOLR-9867-createCoreContainer-fix.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; fix now since it&apos;s what I expected from the code. &lt;/p&gt;</comment>
                            <comment id="15996661" author="jira-bot" created="Thu, 4 May 2017 12:46:16 +0000"  >&lt;p&gt;Commit 30f1422ba955a38c37b1ec97244ebb7ede9ee7be in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkhludnev&quot; class=&quot;user-hover&quot; rel=&quot;mkhludnev&quot;&gt;mkhludnev&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=30f1422&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=30f1422&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9867&quot; title=&quot;The Solr examples can not always be started after being stopped due to race with loading core.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9867&quot;&gt;&lt;del&gt;SOLR-9867&lt;/del&gt;&lt;/a&gt;: make sure cores are assigned in the end of SolrDispatchFilter.createCoreContainer() only&lt;/p&gt;</comment>
                            <comment id="15996664" author="jira-bot" created="Thu, 4 May 2017 12:48:16 +0000"  >&lt;p&gt;Commit b4f936c7367dfaff6edc75fdce20ea383d0c1dd1 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkhludnev&quot; class=&quot;user-hover&quot; rel=&quot;mkhludnev&quot;&gt;mkhludnev&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=b4f936c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=b4f936c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9867&quot; title=&quot;The Solr examples can not always be started after being stopped due to race with loading core.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9867&quot;&gt;&lt;del&gt;SOLR-9867&lt;/del&gt;&lt;/a&gt;: make sure cores are assigned in the end of SolrDispatchFilter.createCoreContainer() only&lt;/p&gt;</comment>
                            <comment id="15996703" author="mkhludnev" created="Thu, 4 May 2017 13:11:36 +0000"  >&lt;p&gt;it seems like it wasn&apos;t a great idea. &lt;/p&gt;</comment>
                            <comment id="15996711" author="jira-bot" created="Thu, 4 May 2017 13:19:47 +0000"  >&lt;p&gt;Commit 1534b6219fa99f7a64f372778e727382e256b423 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkhludnev&quot; class=&quot;user-hover&quot; rel=&quot;mkhludnev&quot;&gt;mkhludnev&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=1534b62&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=1534b62&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9867&quot; title=&quot;The Solr examples can not always be started after being stopped due to race with loading core.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9867&quot;&gt;&lt;del&gt;SOLR-9867&lt;/del&gt;&lt;/a&gt;: rollback SDF.createCoreContainer(). disable testTechproductsExample&lt;/p&gt;</comment>
                            <comment id="15996712" author="jira-bot" created="Thu, 4 May 2017 13:21:09 +0000"  >&lt;p&gt;Commit 72e76138ce7d9ec21d3178eb6ee65908792d0614 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkhludnev&quot; class=&quot;user-hover&quot; rel=&quot;mkhludnev&quot;&gt;mkhludnev&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=72e7613&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=72e7613&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9867&quot; title=&quot;The Solr examples can not always be started after being stopped due to race with loading core.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9867&quot;&gt;&lt;del&gt;SOLR-9867&lt;/del&gt;&lt;/a&gt;: rollback SDF.createCoreContainer(). disable testTechproductsExample&lt;/p&gt;</comment>
                            <comment id="15996716" author="mkhludnev" created="Thu, 4 May 2017 13:23:28 +0000"  >&lt;p&gt;rolled back &lt;tt&gt;SDF.createCoreContainer()&lt;/tt&gt;, disabled &lt;tt&gt;testTechproductsExample&lt;/tt&gt;&lt;br/&gt;
Since it seems like it breaks &lt;tt&gt;JvmMetricsTest.testSetupJvmMetrics&lt;/tt&gt; at least. &lt;/p&gt;</comment>
                            <comment id="15996760" author="werder" created="Thu, 4 May 2017 13:55:36 +0000"  >&lt;p&gt;But what if we, &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12866408/SOLR-9867.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;you know&lt;/a&gt;....&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void setupJvmMetrics()  {
+  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void setupJvmMetrics(CoreContainer cores)  {
     SolrMetricManager metricManager = cores.getMetricManager();
     &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Set&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; hiddenSysProps = cores.getConfig().getHiddenSysProps();
     &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
@@ -247,7 +247,7 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;SolrDispatchFilter &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; BaseSolrFilter {
    */
   &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; CoreContainer createCoreContainer(Path solrHome, Properties extraProperties) {
     NodeConfig nodeConfig = loadNodeConfig(solrHome, extraProperties);
-    cores = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CoreContainer(nodeConfig, extraProperties, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
+    CoreContainer cores = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CoreContainer(nodeConfig, extraProperties, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
     cores.load();
     &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; cores;
   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15996780" author="mkhludnev" created="Thu, 4 May 2017 14:09:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=werder&quot; class=&quot;user-hover&quot; rel=&quot;werder&quot;&gt;werder&lt;/a&gt;, where have you been an hour ago?  &lt;/p&gt;</comment>
                            <comment id="15996804" author="mkhludnev" created="Thu, 4 May 2017 14:26:41 +0000"  >&lt;p&gt;Ok. &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12866416/12866416_SOLR-9867.patch&quot; title=&quot;SOLR-9867.patch attached to SOLR-9867&quot;&gt;SOLR-9867.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; let&apos;s make cores assigned once, again. &lt;/p&gt;</comment>
                            <comment id="15996883" author="jira-bot" created="Thu, 4 May 2017 15:05:32 +0000"  >&lt;p&gt;Commit 5eb4a8d71b491ca7f389b4dc7414dbc1a2620ae2 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkhludnev&quot; class=&quot;user-hover&quot; rel=&quot;mkhludnev&quot;&gt;mkhludnev&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=5eb4a8d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=5eb4a8d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9867&quot; title=&quot;The Solr examples can not always be started after being stopped due to race with loading core.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9867&quot;&gt;&lt;del&gt;SOLR-9867&lt;/del&gt;&lt;/a&gt;: fixing JvmMetricsTest broken earlier, bring back testTechproductsExample()&lt;br/&gt;
and single SDF.cores assignment.&lt;/p&gt;</comment>
                            <comment id="15996932" author="jira-bot" created="Thu, 4 May 2017 15:30:30 +0000"  >&lt;p&gt;Commit b59f816e6204e59dbb9bfde464032cabb8ba0d50 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkhludnev&quot; class=&quot;user-hover&quot; rel=&quot;mkhludnev&quot;&gt;mkhludnev&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=b59f816&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=b59f816&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9867&quot; title=&quot;The Solr examples can not always be started after being stopped due to race with loading core.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9867&quot;&gt;&lt;del&gt;SOLR-9867&lt;/del&gt;&lt;/a&gt;: fixing JvmMetricsTest broken earlier, bring back testTechproductsExample()&lt;br/&gt;
and single SDF.cores assignment.&lt;/p&gt;</comment>
                            <comment id="15997496" author="mkhludnev" created="Thu, 4 May 2017 21:53:26 +0000"  >&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12866499/12866499_6x+failure+0+docs.txt&quot; title=&quot;6x failure 0 docs.txt attached to SOLR-9867&quot;&gt;6x failure 0 docs.txt&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;br/&gt;
&lt;a href=&quot;https://jenkins.thetaphi.de/job/Lucene-Solr-6.x-Linux/3438/consoleFull&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jenkins.thetaphi.de/job/Lucene-Solr-6.x-Linux/3438/consoleFull&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   [junit4]   2&amp;gt; 2187212 INFO  (qtp33229559-24974) [    ] o.a.s.s.HttpSolrCall [admin] webapp=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; path=/admin/cores params={name=techproducts&amp;amp;action=CREATE&amp;amp;instanceDir=techproducts&amp;amp;wt=json} status=0 QTime=822
   [junit4]   1&amp;gt; SimplePostTool version 5.0.0
   [junit4]   1&amp;gt; Posting files to [base] url http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:36619/solr/techproducts/update using content-type application/xml...
&lt;/span&gt;...
   [junit4]   1&amp;gt; 14 files indexed.
   [junit4]   1&amp;gt; COMMITting Solr index changes to http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:36619/solr/techproducts/update...
&lt;/span&gt;   [junit4]   1&amp;gt; Time spent: 0:00:00.017
   [junit4]   2&amp;gt; 2187234 INFO  (qtp33229559-24974) [    ] o.a.s.c.S.Request [techproducts]  webapp=/solr path=/select params={q=*:*&amp;amp;wt=javabin&amp;amp;version=2} hits=0 status=0 QTime=0
   [junit4]   2&amp;gt; 2187234 WARN  (TEST-TestSolrCLIRunExample.testTechproductsExample-seed#[6C573D0F56B69777]) [    ] o.a.s.u.TestSolrCLIRunExample Going to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 1 second before re-trying query &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; techproduct example docs ...
   [junit4]   2&amp;gt; 2188237 INFO  (qtp33229559-24972) [    ] o.a.s.c.S.Request [techproducts]  webapp=/solr path=/select params={q=*:*&amp;amp;wt=javabin&amp;amp;version=2} hits=0 status=0 QTime=0
   [junit4]   2&amp;gt; 2188237 INFO  (TEST-TestSolrCLIRunExample.testTechproductsExample-seed#[6C573D0F56B69777]) [    ] o.a.s.SolrTestCaseJ4 ###Ending testTechproductsExample

Throwable #1: java.lang.AssertionError: expected 32 docs in the techproducts example but found 0,
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Updates come in 17 ms and left no update activity log. What is it? &lt;/p&gt;</comment>
                            <comment id="15997544" author="mkhludnev" created="Thu, 4 May 2017 22:33:49 +0000"  >&lt;p&gt;the same is &lt;a href=&quot;https://builds.apache.org/job/Lucene-Solr-Tests-6.x/862/consoleFull&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&lt;br/&gt;
posttool throw xmls to nowhere in 2 ms, and .. nothing.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  [junit4]   2&amp;gt; 2054068 INFO  (qtp132288369-20302) [    x:techproducts] o.a.s.s.HttpSolrCall [admin] webapp=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; path=/admin/cores params={name=techproducts&amp;amp;action=CREATE&amp;amp;instanceDir=techproducts&amp;amp;wt=json} status=0 QTime=454
   [junit4]   1&amp;gt; SimplePostTool version 5.0.0
   [junit4]   1&amp;gt; Posting files to [base] url http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:43383/solr/techproducts/update using content-type application/xml...
&lt;/span&gt;   [junit4]   1&amp;gt; POSTing file money.xml to [base]
....
   [junit4]   1&amp;gt; POSTing file ipod_other.xml to [base]
   [junit4]   1&amp;gt; 14 files indexed.
   [junit4]   1&amp;gt; COMMITting Solr index changes to http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:43383/solr/techproducts/update...
&lt;/span&gt;   [junit4]   1&amp;gt; Time spent: 0:00:00.002
   [junit4]   2&amp;gt; 2054075 INFO  (qtp132288369-20305) [    x:techproducts] o.a.s.c.S.Request [techproducts]  webapp=/solr path=/select params={q=*:*&amp;amp;wt=javabin&amp;amp;version=2} hits=0 status=0 QTime=0
   [junit4]   2&amp;gt; 2054075 WARN  (TEST-TestSolrCLIRunExample.testTechproductsExample-seed#[51307655FACE2661]) [    ] o.a.s.u.TestSolrCLIRunExample Going to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 1 second before re-trying query &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; techproduct example docs ...
   [junit4]   2&amp;gt; 2055078 INFO  (qtp132288369-20305) [    x:techproducts] o.a.s.c.S.Request [techproducts]  webapp=/solr path=/select params={q=*:*&amp;amp;wt=javabin&amp;amp;version=2} hits=0 status=0 QTime=1
   [junit4]   2&amp;gt; 2055079 INFO  (TEST-TestSolrCLIRunExample.testTechproductsExample-seed#[51307655FACE2661]) [    ] o.a.s.SolrTestCaseJ4 ###Ending testTechproductsExample
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;  
&lt;p&gt;Is it super asynchronous? &lt;/p&gt;</comment>
                            <comment id="15997574" author="jira-bot" created="Thu, 4 May 2017 23:17:53 +0000"  >&lt;p&gt;Commit 56851d6e6b781516f06b7203d60f6ad117ea5091 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkhludnev&quot; class=&quot;user-hover&quot; rel=&quot;mkhludnev&quot;&gt;mkhludnev&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=56851d6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=56851d6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9867&quot; title=&quot;The Solr examples can not always be started after being stopped due to race with loading core.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9867&quot;&gt;&lt;del&gt;SOLR-9867&lt;/del&gt;&lt;/a&gt;: @Ignore TestSolrCLIRunExample.testTechproductsExample()&lt;/p&gt;</comment>
                            <comment id="15997580" author="jira-bot" created="Thu, 4 May 2017 23:20:48 +0000"  >&lt;p&gt;Commit c6ebee6a49e82f53090adf95836996ffecf0bb1c in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkhludnev&quot; class=&quot;user-hover&quot; rel=&quot;mkhludnev&quot;&gt;mkhludnev&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=c6ebee6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=c6ebee6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9867&quot; title=&quot;The Solr examples can not always be started after being stopped due to race with loading core.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9867&quot;&gt;&lt;del&gt;SOLR-9867&lt;/del&gt;&lt;/a&gt;: @Ignore TestSolrCLIRunExample.testTechproductsExample()&lt;/p&gt;</comment>
                            <comment id="15998732" author="werder" created="Fri, 5 May 2017 18:29:11 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   [junit4]   1&amp;gt; POSTing file money.xml to [base]
....
   [junit4]   1&amp;gt; POSTing file ipod_other.xml to [base]
   [junit4]   1&amp;gt; 14 files indexed.
   [junit4]   1&amp;gt; COMMITting Solr index changes to http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:43383/solr/techproducts/update...
&lt;/span&gt;   [junit4]   1&amp;gt; Time spent: 0:00:00.002

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; if everything works as expected there should be Solr&apos;s logs among client&apos;s logs. All that&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;17062 INFO  (qtp638502344-15) [    x:techproducts] o.a.s.u.p.LogUpdateProcessorFactory [techproducts]  webapp=/solr path=/update params={}{add=[EN7800GTX/2DHTV/256M (1566581601311129600), 100-435805 (1566581601326858240)]} 0 20

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and etc.&lt;/p&gt;

&lt;p&gt;I feel like it might be a test issue, because if one sets &lt;tt&gt;SimplePostTool.mockMode&lt;/tt&gt; to &lt;tt&gt;true&lt;/tt&gt;, issue will reproduce. &lt;/p&gt;</comment>
                            <comment id="15998895" author="mkhludnev" created="Fri, 5 May 2017 20:14:58 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=werder&quot; class=&quot;user-hover&quot; rel=&quot;werder&quot;&gt;werder&lt;/a&gt; the finding is priceless, let&apos;s tackle it &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10614&quot; title=&quot;fix TestSolrCLIRunExample.testTechproductsExample&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10614&quot;&gt;&lt;del&gt;SOLR-10614&lt;/del&gt;&lt;/a&gt; later. &lt;br/&gt;
Now, urging by &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10611&quot; title=&quot;TestLeaderElectionWithEmptyReplica failure on jenkins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10611&quot;&gt;&lt;del&gt;SOLR-10611&lt;/del&gt;&lt;/a&gt; we need to bring the latch back again under &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10615&quot; title=&quot;latch SolrDispatchFilter.doFilter() on init() completion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10615&quot;&gt;&lt;del&gt;SOLR-10615&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                            <outwardlinks description="contains">
                                        <issuelink>
            <issuekey id="13064908">SOLR-10517</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13067989">SOLR-10588</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13069050">SOLR-10605</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13069417">SOLR-10611</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12513463">SOLR-2646</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12866499" name="6x failure 0 docs.txt" size="47657" author="mkhl" created="Thu, 4 May 2017 21:53:26 +0000"/>
                            <attachment id="12866363" name="Lucene-Solr-master-MacOSX #3986 Console [Jenkins].htm" size="9192172" author="mkhl" created="Thu, 4 May 2017 09:22:37 +0000"/>
                            <attachment id="12865616" name="SDF init and doFilter in parallel.png" size="462068" author="mkhl" created="Fri, 28 Apr 2017 20:08:07 +0000"/>
                            <attachment id="12866388" name="SOLR-9867-createCoreContainer-fix.patch" size="1302" author="mkhl" created="Thu, 4 May 2017 12:40:54 +0000"/>
                            <attachment id="12866188" name="SOLR-9867-ignore-whitespace.patch" size="13083" author="mkhl" created="Wed, 3 May 2017 14:32:42 +0000"/>
                            <attachment id="12865628" name="SOLR-9867-test.patch" size="4069" author="mkhl" created="Fri, 28 Apr 2017 21:16:53 +0000"/>
                            <attachment id="12866416" name="SOLR-9867.patch" size="3079" author="mkhl" created="Thu, 4 May 2017 14:26:41 +0000"/>
                            <attachment id="12866408" name="SOLR-9867.patch" size="1591" author="werder" created="Thu, 4 May 2017 13:54:18 +0000"/>
                            <attachment id="12866189" name="SOLR-9867.patch" size="19636" author="mkhl" created="Wed, 3 May 2017 14:32:42 +0000"/>
                            <attachment id="12865689" name="SOLR-9867.patch" size="23871" author="erickerickson" created="Sun, 30 Apr 2017 05:20:58 +0000"/>
                            <attachment id="12865680" name="SOLR-9867.patch" size="11028" author="mkhl" created="Sat, 29 Apr 2017 22:03:02 +0000"/>
                            <attachment id="12846228" name="SOLR-9867.patch" size="1808" author="markrmiller@gmail.com" created="Sun, 8 Jan 2017 14:57:27 +0000"/>
                            <attachment id="12846227" name="SOLR-9867.patch" size="1646" author="markrmiller@gmail.com" created="Sun, 8 Jan 2017 14:54:32 +0000"/>
                            <attachment id="12866270" name="stdout_90" size="462796" author="erickerickson" created="Wed, 3 May 2017 20:59:53 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="13069568">SOLR-10614</subtask>
                            <subtask id="13069569">SOLR-10615</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37mif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>