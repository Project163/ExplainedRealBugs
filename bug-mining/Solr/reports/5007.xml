<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:56:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16656] rid parameter missing from query logs</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16656</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I think there was a regression introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15790&quot; title=&quot;Populate MDC with rid (CommonParams.REQUEST_ID)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15790&quot;&gt;&lt;del&gt;SOLR-15790&lt;/del&gt;&lt;/a&gt; where the rid param is no longer logged correctly.&lt;/p&gt;

&lt;p&gt;Solr 8 logs, rid=-1 logged with final query after distributed results were collected:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;.... INFO  (qtp1482246673-23) [c:gettingstarted s:shard1 r:core_node3 x:gettingstarted_shard1_replica_n1] o.a.s.c.S.Request [gettingstarted_shard1_replica_n1]  webapp=/solr path=/select params={q=*:*&amp;amp;indent=true&amp;amp;q.op=OR&amp;amp;_=1675975274863} rid=-1 hits=0 status=0 QTime=3
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Solr 9 logs:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;.... INFO  (qtp351877391-20) [c:gettingstarted s:shard2 r:core_node7 x:gettingstarted_shard2_replica_n4] o.a.s.c.S.Request webapp=/solr path=/select params={q=*:*&amp;amp;indent=true&amp;amp;q.op=OR&amp;amp;useParams=&amp;amp;_=1675975376183} hits=0 status=0 QTime=6
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I narrowed down the issue to a problem with the SearchHandler. the part that determines if the rid param should be added does not match with the lifecycle of the ResponseBuilder.&lt;br/&gt;
basically the decision to add the param is done in tagRequestWithRequestId &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; based on the rb.isDistrib flag which will only be computed later in getAndPrepShardHandler &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, so at the moment where this is supposed to be added, it&apos;s always false. this param will never be logged.&lt;/p&gt;

&lt;p&gt;Even though it&apos;s just logging, I see this as a potential regression. I think having this info logged is very valuable.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/solr/blob/47b7f6c75a43256c41abf4db1e5c0efafc15625e/solr/core/src/java/org/apache/solr/handler/component/SearchHandler.java#L631&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/blob/47b7f6c75a43256c41abf4db1e5c0efafc15625e/solr/core/src/java/org/apache/solr/handler/component/SearchHandler.java#L631&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/solr/blob/47b7f6c75a43256c41abf4db1e5c0efafc15625e/solr/core/src/java/org/apache/solr/handler/component/SearchHandler.java#L280&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/blob/47b7f6c75a43256c41abf4db1e5c0efafc15625e/solr/core/src/java/org/apache/solr/handler/component/SearchHandler.java#L280&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13524710">SOLR-16656</key>
            <summary>rid parameter missing from query logs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="krisden">Kevin Risden</assignee>
                                    <reporter username="stillalex">Alex Deparvu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Feb 2023 19:29:56 +0000</created>
                <updated>Fri, 17 Oct 2025 20:05:18 +0000</updated>
                            <resolved>Wed, 1 Mar 2023 17:24:11 +0000</resolved>
                                    <version>9.0</version>
                    <version>9.1</version>
                    <version>9.1.1</version>
                                    <fixVersion>9.2</fixVersion>
                    <fixVersion>10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                <comments>
                            <comment id="17695213" author="jira-bot" created="Wed, 1 Mar 2023 17:17:44 +0000"  >&lt;p&gt;Commit 35a9bed31dc19be41fce98a9d28e3ff2dd86201e in solr&apos;s branch refs/heads/main from Alex&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=35a9bed31dc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=35a9bed31dc&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16656&quot; title=&quot;rid parameter missing from query logs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16656&quot;&gt;&lt;del&gt;SOLR-16656&lt;/del&gt;&lt;/a&gt;: rid parameter missing from query logs (#1364)&lt;/p&gt;
</comment>
                            <comment id="17695214" author="jira-bot" created="Wed, 1 Mar 2023 17:24:08 +0000"  >&lt;p&gt;Commit 628c64a920968d797ec49850d9fbdefedd5bc62c in solr&apos;s branch refs/heads/branch_9x from Alex&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=628c64a9209&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=628c64a9209&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16656&quot; title=&quot;rid parameter missing from query logs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16656&quot;&gt;&lt;del&gt;SOLR-16656&lt;/del&gt;&lt;/a&gt;: rid parameter missing from query logs (#1364)&lt;/p&gt;
</comment>
                            <comment id="17695215" author="risdenk" created="Wed, 1 Mar 2023 17:24:11 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stillalex&quot; class=&quot;user-hover&quot; rel=&quot;stillalex&quot;&gt;stillalex&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17705485" author="houston" created="Mon, 27 Mar 2023 18:04:12 +0000"  >&lt;p&gt;Closing after the 9.2.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13411152">SOLR-15790</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1fxl4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>