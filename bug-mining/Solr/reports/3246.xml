<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:19:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-10063] CoreContainer shutdown has race condition that can cause a hang on shutdown.</title>
                <link>https://issues.apache.org/jira/browse/SOLR-10063</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description></description>
                <environment></environment>
        <key id="13039189">SOLR-10063</key>
            <summary>CoreContainer shutdown has race condition that can cause a hang on shutdown.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="markrmiller@gmail.com">Mark Miller</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 Jan 2017 14:17:49 +0000</created>
                <updated>Sat, 8 Jun 2019 15:28:47 +0000</updated>
                            <resolved>Wed, 22 Feb 2017 16:56:16 +0000</resolved>
                                                    <fixVersion>6.5</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15847366" author="cpoerschke" created="Tue, 31 Jan 2017 19:28:14 +0000"  >&lt;p&gt;Hi Mark, could you share the exact beast command(s) you used for the &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10032&quot; title=&quot;Create report to assess Solr test quality at a commit point.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10032&quot;&gt;&lt;del&gt;SOLR-10032&lt;/del&gt;&lt;/a&gt; report? I just ran&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ant beast -Dbeast.iters=100 -Dtestcase=TestShardHandlerFactory
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;here for &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/core/src/test/org/apache/solr/core/TestShardHandlerFactory.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;TestShardHandlerFactory&lt;/a&gt; and it was fine and the test itself seems very uninteresting and hence am wondering about interaction between tests or how to more aggressively beast? Thanks.&lt;/p&gt;</comment>
                            <comment id="15854806" author="markrmiller@gmail.com" created="Mon, 6 Feb 2017 21:44:11 +0000"  >&lt;p&gt;This is due to a race on shutdown. On shutdown the code breaks waits with an interruptAll and then assumes things are all good, but something can go into wait right after the interruptAll. A workaround is:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12851246/12851246_im-patch-1.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="15854813" author="markrmiller@gmail.com" created="Mon, 6 Feb 2017 21:49:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;ant beast -Dbeast.iters=100 -Dtestcase=TestShardHandlerFactory&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think I remember you figured out the parallel argument in another thread.&lt;/p&gt;

&lt;p&gt;With my beast script, I would see this about one in 60 runs doing 10 in parallel for 30 total iterations.&lt;/p&gt;

&lt;p&gt;The above prevents the hang so far in my test beasting, but it&apos;s not really foolproof either.&lt;/p&gt;</comment>
                            <comment id="15862556" author="jira-bot" created="Sat, 11 Feb 2017 22:22:03 +0000"  >&lt;p&gt;Commit 5b976959d9ed84509dbc2724d89bad0142436b22 in lucene-solr&apos;s branch refs/heads/master from markrmiller&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=5b97695&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=5b97695&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10063&quot; title=&quot;CoreContainer shutdown has race condition that can cause a hang on shutdown.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10063&quot;&gt;&lt;del&gt;SOLR-10063&lt;/del&gt;&lt;/a&gt;: CoreContainer shutdown has race condition that can cause a hang on shutdown.&lt;/p&gt;</comment>
                            <comment id="15878714" author="jira-bot" created="Wed, 22 Feb 2017 16:55:49 +0000"  >&lt;p&gt;Commit 16d0ee3a4c7476224ec2b93e366b776c0d24d0b1 in lucene-solr&apos;s branch refs/heads/branch_6x from markrmiller&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=16d0ee3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=16d0ee3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10063&quot; title=&quot;CoreContainer shutdown has race condition that can cause a hang on shutdown.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10063&quot;&gt;&lt;del&gt;SOLR-10063&lt;/del&gt;&lt;/a&gt;: CoreContainer shutdown has race condition that can cause a hang on shutdown.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Conflicts:&lt;/li&gt;
	&lt;li&gt;solr/CHANGES.txt&lt;/li&gt;
&lt;/ol&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="13037726">SOLR-10032</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13040776">SOLR-10101</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12851246" name="im-patch-1.png" size="137922" author="markrmiller@gmail.com" created="Mon, 6 Feb 2017 21:44:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39f3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>