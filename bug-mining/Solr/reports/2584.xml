<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:06:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-7866] getMaxVersionFromIndex is throwing an NPE if some segments are not current</title>
                <link>https://issues.apache.org/jira/browse/SOLR-7866</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Reported by user on #solr irc (via Shalin)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.NullPointerException
	at org.apache.lucene.util.NumericUtils.prefixCodedToLong(NumericUtils.java:226)
	at org.apache.lucene.util.NumericUtils.getMaxLong(NumericUtils.java:582)
	at org.apache.solr.update.VersionInfo.getMaxVersionFromIndex(VersionInfo.java:234)
	at org.apache.solr.update.UpdateLog.seedBucketsWithHighestVersion(UpdateLog.java:1580)
	at org.apache.solr.update.UpdateLog.seedBucketsWithHighestVersion(UpdateLog.java:1610)
	at org.apache.solr.core.SolrCore.seedVersionBuckets(SolrCore.java:861)
	at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:843)
	at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:658)
	at org.apache.solr.core.CoreContainer.create(CoreContainer.java:637)
	at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:381)
	at org.apache.solr.core.CoreContainer$1.call(CoreContainer.java:375)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor$1.run(ExecutorUtil.java:148)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12851149">SOLR-7866</key>
            <summary>getMaxVersionFromIndex is throwing an NPE if some segments are not current</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thelabdude">Timothy Potter</assignee>
                                    <reporter username="thelabdude">Timothy Potter</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Aug 2015 17:09:14 +0000</created>
                <updated>Mon, 9 May 2016 18:50:42 +0000</updated>
                            <resolved>Thu, 6 Aug 2015 01:15:44 +0000</resolved>
                                                    <fixVersion>5.3</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14654186" author="thelabdude" created="Tue, 4 Aug 2015 19:14:16 +0000"  >&lt;p&gt;At first, I thought this was due to 5.x code reading a 4.x index, but i was able to get the max version for an index created with 4.2 on branch_5x. So I don&apos;t know what&apos;s going on here exactly ...&lt;/p&gt;

&lt;p&gt;However, since this code is an optimization, I don&apos;t think we should fail to initialize the core, so I&apos;m going to catch Exception instead of just IOException so that at least the index is usable, albeit with degraded indexing performance.&lt;/p&gt;</comment>
                            <comment id="14654243" author="hossman" created="Tue, 4 Aug 2015 19:46:43 +0000"  >&lt;p&gt;i think the root cause here is &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-6719&quot; title=&quot;NumericUtils.getMinLong and NumericUtils.getMaxLong have undefined behavior when no docs have value - throw NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-6719&quot;&gt;&lt;del&gt;LUCENE-6719&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14654312" author="thelabdude" created="Tue, 4 Aug 2015 20:34:39 +0000"  >&lt;p&gt;Patch to make sure there are terms before requesting the max.&lt;/p&gt;</comment>
                            <comment id="14654332" author="thelabdude" created="Tue, 4 Aug 2015 20:52:45 +0000"  >&lt;p&gt;Not sure how to create a unit test for this because even if terms is empty, i get a MAX value back:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   [junit4]   2&amp;gt; 61414 INFO  (qtp13679606-95) [n:127.0.0.1:55465_ c:c8n_vers_1x3 s:shard1 r:core_node1 x:c8n_vers_1x3_shard1_replica2] o.a.s.u.VersionInfo
   [junit4]   2&amp;gt;  versionTerms.size=-1
   [junit4]   2&amp;gt; 61417 INFO  (qtp13679606-95) [n:127.0.0.1:55465_ c:c8n_vers_1x3 s:shard1 r:core_node1 x:c8n_vers_1x3_shard1_replica2] o.a.s.u.VersionInfo Found MAX value 1508608304047194112 from Terms &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; _version_ in index
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14654785" author="thelabdude" created="Wed, 5 Aug 2015 04:12:32 +0000"  >&lt;p&gt;Dropping this ticket from Blocker for 5.3 to major status as I haven&apos;t been able to reproduce this issue. We could of course just code around this issue by catching the NPE but given that I can&apos;t reproduce it with empty / non-empty 4.x and 5.x indexes, I&apos;m hesitant to change code in this area until &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-6719&quot; title=&quot;NumericUtils.getMinLong and NumericUtils.getMaxLong have undefined behavior when no docs have value - throw NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-6719&quot;&gt;&lt;del&gt;LUCENE-6719&lt;/del&gt;&lt;/a&gt; is resolved.&lt;/p&gt;</comment>
                            <comment id="14659280" author="jira-bot" created="Thu, 6 Aug 2015 00:53:30 +0000"  >&lt;p&gt;Commit 1694385 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1694385&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1694385&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7866&quot; title=&quot;getMaxVersionFromIndex is throwing an NPE if some segments are not current&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7866&quot;&gt;&lt;del&gt;SOLR-7866&lt;/del&gt;&lt;/a&gt;: Harden code to prevent an unhandled NPE when trying to determine the max value of the version field.&lt;/p&gt;</comment>
                            <comment id="14659291" author="jira-bot" created="Thu, 6 Aug 2015 01:12:35 +0000"  >&lt;p&gt;Commit 1694388 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1694388&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1694388&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7866&quot; title=&quot;getMaxVersionFromIndex is throwing an NPE if some segments are not current&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7866&quot;&gt;&lt;del&gt;SOLR-7866&lt;/del&gt;&lt;/a&gt;: Harden code to prevent an unhandled NPE when trying to determine the max value of the version field.&lt;/p&gt;</comment>
                            <comment id="14659294" author="jira-bot" created="Thu, 6 Aug 2015 01:15:23 +0000"  >&lt;p&gt;Commit 1694389 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; in branch &apos;dev/branches/lucene_solr_5_3&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1694389&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1694389&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7866&quot; title=&quot;getMaxVersionFromIndex is throwing an NPE if some segments are not current&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7866&quot;&gt;&lt;del&gt;SOLR-7866&lt;/del&gt;&lt;/a&gt;: Harden code to prevent an unhandled NPE when trying to determine the max value of the version field.&lt;/p&gt;</comment>
                            <comment id="14713283" author="shalinmangar" created="Wed, 26 Aug 2015 13:06:18 +0000"  >&lt;p&gt;Bulk close for 5.3.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12851483">LUCENE-6719</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12748733" name="SOLR-7866.patch" size="772" author="thelabdude" created="Tue, 4 Aug 2015 20:34:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2i9wf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>