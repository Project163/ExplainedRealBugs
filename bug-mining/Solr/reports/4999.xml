<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:55:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16628] Occasional resource leak around XmlConfigFile parsing </title>
                <link>https://issues.apache.org/jira/browse/SOLR-16628</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Currently, xml config file parsing can in exceptional circumstances lead to resource leaks (InputStream not being closed). This has occasionally &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16336?focusedCommentId=17678323#comment-17678323&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;shown up in tests&lt;/a&gt; and presumably could also manifest in the wild.&lt;/p&gt;

&lt;p&gt;I suspect (but am not certain) that these changes may have been introduced in version 8.9 by &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15337&quot; title=&quot;Avoid XPath in solrconfig.xml parsing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15337&quot;&gt;&lt;del&gt;SOLR-15337&lt;/del&gt;&lt;/a&gt; (closing of byte streams in xml parsing is unusual iiuc in that according to spec, closing is handled internal to the parser, so it&apos;s easy to rely on that behavior and things will usually be ok. But we should take extra steps to ensure the InputStreams are always closed).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13520115">SOLR-16628</key>
            <summary>Occasional resource leak around XmlConfigFile parsing </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="magibney">Michael Gibney</assignee>
                                    <reporter username="magibney">Michael Gibney</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Jan 2023 22:04:00 +0000</created>
                <updated>Mon, 27 Mar 2023 18:04:19 +0000</updated>
                            <resolved>Thu, 9 Feb 2023 18:58:06 +0000</resolved>
                                    <version>8.9</version>
                                    <fixVersion>9.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="30000">8h 20m</timespent>
                                <comments>
                            <comment id="17678415" author="dsmiley" created="Wed, 18 Jan 2023 22:46:53 +0000"  >&lt;p&gt;Wow; I didn&apos;t expect such a quick turn-around on my finding! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160; I look forward to seeing if this fixes what I saw. &#160;It&apos;ll take a bit... I need to see if I can run the full test suite in a normal way (not via smoketester.py) and then apply this patch to see if it goes away.&lt;/p&gt;</comment>
                            <comment id="17678433" author="mgibney" created="Thu, 19 Jan 2023 00:05:51 +0000"  >&lt;p&gt;Sure, thanks! There are some kinds of problems (and this may be one?) that mainly manifest under load and are thus basically impossible to reproduce when running a single test in isolation. I can sometimes reproduce such results more efficiently by running something else at the same time that soaks up threads/processors. Not to say that this would be a &lt;em&gt;replacement&lt;/em&gt; for running the full test suite, but it might be a shortcut to figuring out whether this patch makes a difference?&lt;/p&gt;</comment>
                            <comment id="17678576" author="janhoy" created="Thu, 19 Jan 2023 09:14:56 +0000"  >&lt;p&gt;Wow. This is an argument for not only using beefy machines for testing. We&apos;ve seen similar Jenkins test failures due to resource constraints, timeouts etc, but yea, it&apos;s hard to reproduce in a consistent manner. Thanks for fixing.&lt;/p&gt;</comment>
                            <comment id="17686706" author="jira-bot" created="Thu, 9 Feb 2023 18:53:29 +0000"  >&lt;p&gt;Commit e20fcf857a32c9c2559ba91cfc68f2ebf5ea09e0 in solr&apos;s branch refs/heads/main from Michael Gibney&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=e20fcf857a3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=e20fcf857a3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16628&quot; title=&quot;Occasional resource leak around XmlConfigFile parsing &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16628&quot;&gt;&lt;del&gt;SOLR-16628&lt;/del&gt;&lt;/a&gt;: Ensure that InputStreams are closed after Xml parsing (#1302)&lt;/p&gt;
</comment>
                            <comment id="17686707" author="jira-bot" created="Thu, 9 Feb 2023 18:55:28 +0000"  >&lt;p&gt;Commit aef81de712d717fce3a50dc8b18774405524f8fd in solr&apos;s branch refs/heads/branch_9x from Michael Gibney&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=aef81de712d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=aef81de712d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16628&quot; title=&quot;Occasional resource leak around XmlConfigFile parsing &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16628&quot;&gt;&lt;del&gt;SOLR-16628&lt;/del&gt;&lt;/a&gt;: Ensure that InputStreams are closed after Xml parsing (#1302)&lt;/p&gt;

&lt;p&gt;(cherry picked from commit e20fcf857a32c9c2559ba91cfc68f2ebf5ea09e0)&lt;/p&gt;</comment>
                            <comment id="17691372" author="jira-bot" created="Tue, 21 Feb 2023 04:54:12 +0000"  >&lt;p&gt;Commit aef81de712d717fce3a50dc8b18774405524f8fd in solr&apos;s branch refs/heads/jira/&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16636&quot; title=&quot;ZkStateReader.waitForState should not register a watch if state already matches predicate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16636&quot;&gt;&lt;del&gt;SOLR-16636&lt;/del&gt;&lt;/a&gt;_revert from Michael Gibney&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=aef81de712d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=aef81de712d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16628&quot; title=&quot;Occasional resource leak around XmlConfigFile parsing &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16628&quot;&gt;&lt;del&gt;SOLR-16628&lt;/del&gt;&lt;/a&gt;: Ensure that InputStreams are closed after Xml parsing (#1302)&lt;/p&gt;

&lt;p&gt;(cherry picked from commit e20fcf857a32c9c2559ba91cfc68f2ebf5ea09e0)&lt;/p&gt;</comment>
                            <comment id="17705552" author="houston" created="Mon, 27 Mar 2023 18:04:19 +0000"  >&lt;p&gt;Closing after the 9.2.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13372182">SOLR-15337</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13476182">SOLR-16336</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1f5e8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>