<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:02:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6227] ChaosMonkeySafeLeaderTest failures on jenkins</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6227</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;This is happening very frequently.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;1 tests failed.
REGRESSION:  org.apache.solr.cloud.ChaosMonkeySafeLeaderTest.testDistribSearch

Error Message:
shard1 is not consistent.  Got 143 from https:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:36610/xvv/collection1lastClient and got 142 from https://127.0.0.1:33168/xvv/collection1
&lt;/span&gt;
Stack Trace:
java.lang.AssertionError: shard1 is not consistent.  Got 143 from https:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:36610/xvv/collection1lastClient and got 142 from https://127.0.0.1:33168/xvv/collection1
&lt;/span&gt;        at __randomizedtesting.SeedInfo.seed([3C1FB6EADDDDFE71:BDF938F2AA829E4D]:0)
        at org.junit.Assert.fail(Assert.java:93)
        at org.apache.solr.cloud.AbstractFullDistribZkTestBase.checkShardConsistency(AbstractFullDistribZkTestBase.java:1139)
        at org.apache.solr.cloud.AbstractFullDistribZkTestBase.checkShardConsistency(AbstractFullDistribZkTestBase.java:1118)
        at org.apache.solr.cloud.ChaosMonkeySafeLeaderTest.doTest(ChaosMonkeySafeLeaderTest.java:150)
        at org.apache.solr.BaseDistributedSearchTestCase.testDistribSearch(BaseDistributedSearchTestCase.java:865)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12725757">SOLR-6227</key>
            <summary>ChaosMonkeySafeLeaderTest failures on jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalin">Shalin Shekhar Mangar</assignee>
                                    <reporter username="shalin">Shalin Shekhar Mangar</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Jul 2014 14:34:10 +0000</created>
                <updated>Mon, 9 May 2016 18:56:26 +0000</updated>
                            <resolved>Thu, 5 Feb 2015 06:44:08 +0000</resolved>
                                                    <fixVersion>5.0</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrCloud</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14053739" author="markrmiller@gmail.com" created="Mon, 7 Jul 2014 15:13:04 +0000"  >&lt;p&gt;Yeah, this started months ago now, though it&apos;s become more frequent since since I&apos;ve been away the past couple months.&lt;/p&gt;
</comment>
                            <comment id="14054109" author="shalinmangar" created="Mon, 7 Jul 2014 19:49:24 +0000"  >&lt;p&gt;I can reproduce it locally by setting -Dsolr.tests.cloud.cm.runlength to a high value.&lt;/p&gt;</comment>
                            <comment id="14054152" author="markrmiller@gmail.com" created="Mon, 7 Jul 2014 20:15:14 +0000"  >&lt;p&gt;I&apos;ve seen locally over that same period with no changes - probably 1 out of 10 or 1 out of 20 runs.&lt;/p&gt;

&lt;p&gt;1000 thousand things could be broken or off, no way to know without digging into the logs. After this much time, it&apos;s often multiple things. I have not had a chance to dig in yet, but eventually I will if no one else does.&lt;/p&gt;</comment>
                            <comment id="14054158" author="markrmiller@gmail.com" created="Mon, 7 Jul 2014 20:18:09 +0000"  >&lt;p&gt;When I start up my local jenkins machine again (it&apos;s been off while I&apos;ve been traveling), I will get some better logs (I have the logging tuned differently for CM tests) and attach them.&lt;/p&gt;</comment>
                            <comment id="14067650" author="shalinmangar" created="Sat, 19 Jul 2014 19:38:40 +0000"  >&lt;p&gt;I haven&apos;t seen this test fail ever since &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6235&quot; title=&quot;SyncSliceTest fails on jenkins with no live servers available error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6235&quot;&gt;&lt;del&gt;SOLR-6235&lt;/del&gt;&lt;/a&gt; was committed. It is possible that the underlying issue was the same in both fails. My local jenkins is chugging along nicely but I haven&apos;t been able to reproduce this. I&apos;ll keep this open for a couple of days more and then close if I still can&apos;t reproduce the failure.&lt;/p&gt;</comment>
                            <comment id="14067715" author="markrmiller@gmail.com" created="Sat, 19 Jul 2014 23:02:05 +0000"  >&lt;p&gt;I&apos;ve had my jenkins running all week as well (with some CM specific jobs as well), just have not checked up on them yet. I&apos;ll look and report back soon.&lt;/p&gt;</comment>
                            <comment id="14068287" author="shalinmangar" created="Mon, 21 Jul 2014 07:31:53 +0000"  >&lt;p&gt;I haven&apos;t seen the failure mentioned in the issue description but my jenkins found the following failure yesterday:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.AssertionError: expected:&amp;lt;0&amp;gt; but was:&amp;lt;1&amp;gt;
	at __randomizedtesting.SeedInfo.seed([2D7931A1F137DAA5:AC9FBFB98668BA99]:0)
	at org.junit.Assert.fail(Assert.java:93)
	at org.junit.Assert.failNotEquals(Assert.java:647)
	at org.junit.Assert.assertEquals(Assert.java:128)
	at org.junit.Assert.assertEquals(Assert.java:472)
	at org.junit.Assert.assertEquals(Assert.java:456)
	at org.apache.solr.cloud.ChaosMonkeySafeLeaderTest.doTest(ChaosMonkeySafeLeaderTest.java:141)
	at org.apache.solr.BaseDistributedSearchTestCase.testDistribSearch(BaseDistributedSearchTestCase.java:863)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14070340" author="markrmiller@gmail.com" created="Tue, 22 Jul 2014 14:59:20 +0000"  >&lt;p&gt;Yeah, that failure has been around - I get it occasionally. Just means there was a fail when you wouldn&apos;t expect it - we expect 0 to fail because we don&apos;t kill leaders - seems one can occasionally fail with:  org.apache.http.NoHttpResponseException: The target server failed to respond. It&apos;s not necessarily illegal behavior, it just shouldn&apos;t really happen.&lt;/p&gt;

&lt;p&gt;Anyway, a much less concerning issue. As far as the inconsistency, which is totally illegal, like your report, I no longer see in my local jenkins jobs. Fantastic. Always a scary fail.&lt;/p&gt;</comment>
                            <comment id="14306730" author="shalinmangar" created="Thu, 5 Feb 2015 06:28:39 +0000"  >&lt;p&gt;More failures from jenkins:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.AssertionError: The Monkey ran &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; over 20 seconds and no jetties were stopped - &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is worth investigating!
	at __randomizedtesting.SeedInfo.seed([3F5FA11431DFAF47:B70B9ECE9F23C2BF]:0)
	at org.junit.Assert.fail(Assert.java:93)
	at org.apache.solr.cloud.ChaosMonkey.stopTheMonkey(ChaosMonkey.java:537)
	at org.apache.solr.cloud.ChaosMonkeySafeLeaderTest.test(ChaosMonkeySafeLeaderTest.java:137)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I did investigate and it happens on nightly runs only and only when the shardCount is equal to sliceCount. In such cases, each slice has just one replica and ChaosMonkey has nothing to kill. I&apos;ll fix it by making sure that we create at least 1+sliceCount number of jetties so that there&apos;s always at least one node to kill.&lt;/p&gt;</comment>
                            <comment id="14306736" author="jira-bot" created="Thu, 5 Feb 2015 06:33:30 +0000"  >&lt;p&gt;Commit 1657487 from shalin@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1657487&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1657487&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6227&quot; title=&quot;ChaosMonkeySafeLeaderTest failures on jenkins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6227&quot;&gt;&lt;del&gt;SOLR-6227&lt;/del&gt;&lt;/a&gt;: Avoid spurious failures of ChaosMonkeySafeLeaderTest by ensuring there&apos;s at least one jetty to kill&lt;/p&gt;</comment>
                            <comment id="14306739" author="jira-bot" created="Thu, 5 Feb 2015 06:36:01 +0000"  >&lt;p&gt;Commit 1657488 from shalin@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1657488&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1657488&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6227&quot; title=&quot;ChaosMonkeySafeLeaderTest failures on jenkins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6227&quot;&gt;&lt;del&gt;SOLR-6227&lt;/del&gt;&lt;/a&gt;: Avoid spurious failures of ChaosMonkeySafeLeaderTest by ensuring there&apos;s at least one jetty to kill&lt;/p&gt;</comment>
                            <comment id="14306745" author="jira-bot" created="Thu, 5 Feb 2015 06:42:08 +0000"  >&lt;p&gt;Commit 1657489 from shalin@apache.org in branch &apos;dev/branches/lucene_solr_5_0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1657489&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1657489&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6227&quot; title=&quot;ChaosMonkeySafeLeaderTest failures on jenkins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6227&quot;&gt;&lt;del&gt;SOLR-6227&lt;/del&gt;&lt;/a&gt;: Avoid spurious failures of ChaosMonkeySafeLeaderTest by ensuring there&apos;s at least one jetty to kill&lt;/p&gt;</comment>
                            <comment id="14306747" author="shalinmangar" created="Thu, 5 Feb 2015 06:44:08 +0000"  >&lt;p&gt;I&apos;m going to close this long open issue here.&lt;/p&gt;</comment>
                            <comment id="14307441" author="markrmiller@gmail.com" created="Thu, 5 Feb 2015 15:46:42 +0000"  >&lt;p&gt;Cool, thanks Shalin.&lt;/p&gt;</comment>
                            <comment id="14332833" author="anshumg" created="Mon, 23 Feb 2015 05:02:10 +0000"  >&lt;p&gt;Bulk close after 5.0 release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12737140">SOLR-6442</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>403915</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xim7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>403958</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>