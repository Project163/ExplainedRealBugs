<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:52:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16528] Jaegertracer module must include okhttp3 dependency</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16528</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Trying to use the JaegerTracer module with 9.0. Setting up &lt;tt&gt;JAEGER_ENDPOINT=&lt;a href=&quot;http://jaeger:14268/api/traces&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jaeger:14268/api/traces&lt;/a&gt;&lt;/tt&gt; but then get exception&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2022-11-08 14:42:59.046 ERROR (main) [] o.a.s.c.SolrCore null =&amp;gt; java.lang.NoClassDefFoundError: okhttp3/Interceptor
&#160; &#160; at io.jaegertracing.thrift.internal.senders.ThriftSenderFactory.getSender(ThriftSenderFactory.java:20)
java.lang.NoClassDefFoundError: okhttp3/Interceptor
&#160; &#160; at io.jaegertracing.thrift.internal.senders.ThriftSenderFactory.getSender(ThriftSenderFactory.java:20) ~[?:?]
&#160; &#160; at io.jaegertracing.internal.senders.SenderResolver.getSenderFromFactory(SenderResolver.java:110) ~[?:?]
&#160; &#160; at io.jaegertracing.internal.senders.SenderResolver.resolve(SenderResolver.java:88) ~[?:?]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The plugin works with a local agent (JAEGER_AGENT_HOST=myhost), but not for pushing traces directly to the jaeger collector (or in our case OpenTelmetry Collector).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13499700">SOLR-16528</key>
            <summary>Jaegertracer module must include okhttp3 dependency</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="janhoy">Jan H&#248;ydahl</assignee>
                                    <reporter username="janhoy">Jan H&#248;ydahl</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Nov 2022 14:45:16 +0000</created>
                <updated>Mon, 27 Mar 2023 18:04:18 +0000</updated>
                            <resolved>Thu, 10 Nov 2022 18:28:07 +0000</resolved>
                                    <version>9.0</version>
                                    <fixVersion>9.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="600">10m</timespent>
                                <comments>
                            <comment id="17630752" author="dsmiley" created="Wed, 9 Nov 2022 04:58:49 +0000"  >&lt;p&gt;Interestingly, I am trying this tonight on Solr 9.1 (with the updated Jaeger, but got same with the previous Jaeger version) and I&apos;m getting a StackOverflow error.... Okhttp is loading okhttp3.internal.Util.kt which calls java.lang.ClassLoader.loadClass and then there is a series of java.* class loader related things looping until the StackOverflow.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        at java.lang.ClassLoader.loadClass(ClassLoader.java:522) ~[?:?]
        at java.lang.ClassLoader.defineClass1(Native Method) ~[?:?]
        at java.lang.ClassLoader.defineClass(ClassLoader.java:1017) ~[?:?]
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:174) ~[?:?]
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:550) ~[?:?]
        at java.net.URLClassLoader$1.run(URLClassLoader.java:458) ~[?:?]
        at java.net.URLClassLoader$1.run(URLClassLoader.java:452) ~[?:?]
        at java.security.AccessController.doPrivileged(Native Method) ~[?:?]
        at java.net.URLClassLoader.findClass(URLClassLoader.java:451) ~[?:?]
        at java.lang.ClassLoader.loadClass(ClassLoader.java:589) ~[?:?]
        at java.net.FactoryURLClassLoader.loadClass(URLClassLoader.java:899) ~[?:?]
        at java.lang.ClassLoader.loadClass(ClassLoader.java:522) ~[?:?]
        at okhttp3.internal.Util.&amp;lt;clinit&amp;gt;(Util.kt:604) ~[?:?]
        at okhttp3.internal.concurrent.TaskRunner.&amp;lt;clinit&amp;gt;(TaskRunner.kt:309) ~[?:?]
        at okhttp3.ConnectionPool.&amp;lt;init&amp;gt;(ConnectionPool.kt:41) ~[?:?]
        at okhttp3.ConnectionPool.&amp;lt;init&amp;gt;(ConnectionPool.kt:47) ~[?:?]
        at okhttp3.OkHttpClient$Builder.&amp;lt;init&amp;gt;(OkHttpClient.kt:471) ~[?:?]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17631838" author="jira-bot" created="Thu, 10 Nov 2022 18:16:34 +0000"  >&lt;p&gt;Commit c8ba7b3f7b1946cdd74a0f77b121010980debdc7 in solr&apos;s branch refs/heads/main from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=c8ba7b3f7b1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=c8ba7b3f7b1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16528&quot; title=&quot;Jaegertracer module must include okhttp3 dependency&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16528&quot;&gt;&lt;del&gt;SOLR-16528&lt;/del&gt;&lt;/a&gt;: Jaegertracer module must include okhttp3 dependency (#1166)&lt;/p&gt;
</comment>
                            <comment id="17631847" author="jira-bot" created="Thu, 10 Nov 2022 18:26:01 +0000"  >&lt;p&gt;Commit 2199265030511d6ccd9df231aa156893ada87525 in solr&apos;s branch refs/heads/branch_9x from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=21992650305&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=21992650305&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16528&quot; title=&quot;Jaegertracer module must include okhttp3 dependency&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16528&quot;&gt;&lt;del&gt;SOLR-16528&lt;/del&gt;&lt;/a&gt;: Jaegertracer module must include okhttp3 dependency (#1166)&lt;/p&gt;</comment>
                            <comment id="17631850" author="janhoy" created="Thu, 10 Nov 2022 18:29:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt; I see you posted this comment after you approved the PR. How could you test this on 9.1 when 9.1 does not include Okhttp? Can you re-test on branch_9x and report back any issues?&lt;/p&gt;</comment>
                            <comment id="17631853" author="jira-bot" created="Thu, 10 Nov 2022 18:35:02 +0000"  >&lt;p&gt;Commit 407be4ca7ec406b5a1370ff8ebd1fbfa7673e172 in solr&apos;s branch refs/heads/main from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=407be4ca7ec&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=407be4ca7ec&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16528&quot; title=&quot;Jaegertracer module must include okhttp3 dependency&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16528&quot;&gt;&lt;del&gt;SOLR-16528&lt;/del&gt;&lt;/a&gt;: Fix locfile&lt;/p&gt;</comment>
                            <comment id="17631867" author="dsmiley" created="Thu, 10 Nov 2022 19:02:15 +0000"  >&lt;p&gt;It does reproduce branch_9x sadly.  Here&apos;s my bash history:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 3181  export JAEGER_SAMPLER_TYPE=const
 3182  export JAEGER_SAMPLER_PARAM=1
 3183  export JAEGER_ENDPOINT=http://localhost:14268/api/traces
 3184  bin/solr start -f -c -Dsolr.modules=jaegertracer-configurator
 3185  bin/solr start -f -Dsolr.modules=jaegertracer-configurator
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;prior to that, I did &lt;tt&gt;gradlew dev&lt;/tt&gt; and I edited solr.xml to have the one-liner to use Jaeger tracing.  I&apos;m on macOS using Java 11.  I didn&apos;t have to actually run any Jaeger agent/server to show this error because it won&apos;t actually connect (obviously).&lt;/p&gt;

&lt;p&gt;We may want to reconsider bothering adding this dependency as we&apos;re about to deprecate the whole module.  I&apos;ve seen a CVE for okhttp that I had to triage at work and it was an awkward one; but take that with a grain of salt.&lt;/p&gt;</comment>
                            <comment id="17631868" author="dsmiley" created="Thu, 10 Nov 2022 19:03:17 +0000"  >&lt;p&gt;Oh, the SolrCloud aspect doesn&apos;t matter; I was trying both ways.&lt;/p&gt;</comment>
                            <comment id="17634718" author="janhoy" created="Wed, 16 Nov 2022 08:15:31 +0000"  >&lt;p&gt;I cannot reproduce this&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;branch_9x
...
openjdk version &quot;11.0.17&quot; 2022-10-18
...
2022-11-16 08:12:21.836 INFO &#160;(main) [] i.j.Configuration Initialized tracer=JaegerTracer(version=Java-1.8.1, serviceName=solr, reporter=RemoteReporter(sender=HttpSender(), closeEnqueueTimeout=1000), sampler=ConstSampler(decision=true, tags={sampler.type=const, sampler.param=true}), tags={hostname=MacBook-Pro.home, jaeger.version=Java-1.8.1, ip=192.168.1.187}, zipkinSharedRpcSpan=false, expandExceptionLogs=false, useTraceId128Bit=false)
...&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And I see traces coming in at my jaeger-collector.&lt;/p&gt;</comment>
                            <comment id="17705549" author="houston" created="Mon, 27 Mar 2023 18:04:18 +0000"  >&lt;p&gt;Closing after the 9.2.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1bntk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>