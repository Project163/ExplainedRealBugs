<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:50:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6029] CollapsingQParserPlugin throws ArrayIndexOutOfBoundsException if elevated doc has been deleted from a segment</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6029</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;CollapsingQParserPlugin misidentifies if a document is not found in a segment if the docid previously existed in a segment ie.... was deleted. &lt;/p&gt;

&lt;p&gt;Relevant code bit from CollapsingQParserPlugin needs to be changed from:&lt;br/&gt;
-if(doc != -1) {&lt;br/&gt;
+if((doc != -1) &amp;amp;&amp;amp; (doc != DocsEnum.NO_MORE_DOCS)) {&lt;/p&gt;

&lt;p&gt;What happens is if the doc is not found the returned value is DocsEnum.NO_MORE_DOCS. This would then get set in the fq bitSet array as the doc location causing an ArrayIndexOutOfBoundsException as the array is only as big as maxDocs. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12711066">SOLR-6029</key>
            <summary>CollapsingQParserPlugin throws ArrayIndexOutOfBoundsException if elevated doc has been deleted from a segment</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbernste">Joel Bernstein</assignee>
                                    <reporter username="gregharris73">Greg Harris</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Apr 2014 00:24:56 +0000</created>
                <updated>Tue, 8 Oct 2019 14:51:29 +0000</updated>
                            <resolved>Tue, 29 Apr 2014 04:58:36 +0000</resolved>
                                    <version>4.7.1</version>
                                    <fixVersion>4.8.1</fixVersion>
                    <fixVersion>4.9</fixVersion>
                                    <component>query parsers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13983786" author="gregharris73" created="Tue, 29 Apr 2014 00:26:04 +0000"  >&lt;p&gt;Patch with test for 4.7&lt;/p&gt;</comment>
                            <comment id="13983972" author="joel.bernstein" created="Tue, 29 Apr 2014 04:16:15 +0000"  >&lt;p&gt;Thanks Greg, this is a nasty bug.&lt;/p&gt;</comment>
                            <comment id="13983992" author="jira-bot" created="Tue, 29 Apr 2014 04:43:08 +0000"  >&lt;p&gt;Commit 1590865 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbernste&quot; class=&quot;user-hover&quot; rel=&quot;jbernste&quot;&gt;jbernste&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1590865&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1590865&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6029&quot; title=&quot;CollapsingQParserPlugin throws ArrayIndexOutOfBoundsException if elevated doc has been deleted from a segment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6029&quot;&gt;&lt;del&gt;SOLR-6029&lt;/del&gt;&lt;/a&gt;: CollapsingQParserPlugin throws ArrayIndexOutOfBoundsException if elevated doc has been deleted from a segment&lt;/p&gt;</comment>
                            <comment id="13983999" author="jira-bot" created="Tue, 29 Apr 2014 04:51:32 +0000"  >&lt;p&gt;Commit 1590866 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbernste&quot; class=&quot;user-hover&quot; rel=&quot;jbernste&quot;&gt;jbernste&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1590866&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1590866&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6029&quot; title=&quot;CollapsingQParserPlugin throws ArrayIndexOutOfBoundsException if elevated doc has been deleted from a segment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6029&quot;&gt;&lt;del&gt;SOLR-6029&lt;/del&gt;&lt;/a&gt;: CollapsingQParserPlugin throws ArrayIndexOutOfBoundsException if elevated doc has been deleted from a segment&lt;/p&gt;</comment>
                            <comment id="13984004" author="jira-bot" created="Tue, 29 Apr 2014 04:55:02 +0000"  >&lt;p&gt;Commit 1590867 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbernste&quot; class=&quot;user-hover&quot; rel=&quot;jbernste&quot;&gt;jbernste&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1590867&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1590867&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6029&quot; title=&quot;CollapsingQParserPlugin throws ArrayIndexOutOfBoundsException if elevated doc has been deleted from a segment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6029&quot;&gt;&lt;del&gt;SOLR-6029&lt;/del&gt;&lt;/a&gt;: Updated CHANGES.txt&lt;/p&gt;</comment>
                            <comment id="13984006" author="jira-bot" created="Tue, 29 Apr 2014 04:57:00 +0000"  >&lt;p&gt;Commit 1590868 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbernste&quot; class=&quot;user-hover&quot; rel=&quot;jbernste&quot;&gt;jbernste&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1590868&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1590868&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6029&quot; title=&quot;CollapsingQParserPlugin throws ArrayIndexOutOfBoundsException if elevated doc has been deleted from a segment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6029&quot;&gt;&lt;del&gt;SOLR-6029&lt;/del&gt;&lt;/a&gt;: Updated CHANGES.txt&lt;/p&gt;</comment>
                            <comment id="13984250" author="jira-bot" created="Tue, 29 Apr 2014 12:41:50 +0000"  >&lt;p&gt;Commit 1590965 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbernste&quot; class=&quot;user-hover&quot; rel=&quot;jbernste&quot;&gt;jbernste&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1590965&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1590965&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6029&quot; title=&quot;CollapsingQParserPlugin throws ArrayIndexOutOfBoundsException if elevated doc has been deleted from a segment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6029&quot;&gt;&lt;del&gt;SOLR-6029&lt;/del&gt;&lt;/a&gt;: Updated CHANGES.txt&lt;/p&gt;</comment>
                            <comment id="13984253" author="jira-bot" created="Tue, 29 Apr 2014 12:43:03 +0000"  >&lt;p&gt;Commit 1590966 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbernste&quot; class=&quot;user-hover&quot; rel=&quot;jbernste&quot;&gt;jbernste&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1590966&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1590966&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6029&quot; title=&quot;CollapsingQParserPlugin throws ArrayIndexOutOfBoundsException if elevated doc has been deleted from a segment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6029&quot;&gt;&lt;del&gt;SOLR-6029&lt;/del&gt;&lt;/a&gt;: Updated CHANGES.txt&lt;/p&gt;</comment>
                            <comment id="13990911" author="jira-bot" created="Tue, 6 May 2014 18:11:28 +0000"  >&lt;p&gt;Commit 1592821 from hossman@apache.org in branch &apos;dev/branches/lucene_solr_4_8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1592821&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1592821&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge back several &quot;low hanging&quot; bug fixes into the 4.8 branch...&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6029&quot; title=&quot;CollapsingQParserPlugin throws ArrayIndexOutOfBoundsException if elevated doc has been deleted from a segment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6029&quot;&gt;&lt;del&gt;SOLR-6029&lt;/del&gt;&lt;/a&gt;: r1590867&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6030&quot; title=&quot;Use System.nanoTime() instead of currentTimeInMills() in LRUCache.warm&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6030&quot;&gt;&lt;del&gt;SOLR-6030&lt;/del&gt;&lt;/a&gt;: r1591555&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6037&quot; title=&quot;Stats Component Reports Incorrect max/sum/stddev for date fields in Distributed Data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6037&quot;&gt;&lt;del&gt;SOLR-6037&lt;/del&gt;&lt;/a&gt;: r1591800&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6023&quot; title=&quot;NPE in /admin/field with no parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6023&quot;&gt;&lt;del&gt;SOLR-6023&lt;/del&gt;&lt;/a&gt;: r1592195&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5090&quot; title=&quot;NPE in DirectSpellChecker with alternativeTermCount and mm.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5090&quot;&gt;&lt;del&gt;SOLR-5090&lt;/del&gt;&lt;/a&gt;: r1592591&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6039&quot; title=&quot;debug=track causes debug=query info to be suppressed when no results found&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6039&quot;&gt;&lt;del&gt;SOLR-6039&lt;/del&gt;&lt;/a&gt;: r1592605&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5993&quot; title=&quot;ZkController can warn about shard leader conflict after conflict resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5993&quot;&gt;&lt;del&gt;SOLR-5993&lt;/del&gt;&lt;/a&gt;: r1588415&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5904&quot; title=&quot;ElectionContext can cancel an election when it should not if there was an exception while trying to register as the leader.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5904&quot;&gt;&lt;del&gt;SOLR-5904&lt;/del&gt;&lt;/a&gt;: r1587702&lt;/p&gt;</comment>
                            <comment id="13991112" author="jira-bot" created="Tue, 6 May 2014 20:51:26 +0000"  >&lt;p&gt;Commit 1592880 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbernste&quot; class=&quot;user-hover&quot; rel=&quot;jbernste&quot;&gt;jbernste&lt;/a&gt; in branch &apos;dev/branches/lucene_solr_4_8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1592880&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1592880&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6029&quot; title=&quot;CollapsingQParserPlugin throws ArrayIndexOutOfBoundsException if elevated doc has been deleted from a segment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6029&quot;&gt;&lt;del&gt;SOLR-6029&lt;/del&gt;&lt;/a&gt;: CollapsingQParserPlugin throws ArrayIndexOutOfBoundsException if elevated doc has been deleted from a segment&lt;/p&gt;</comment>
                            <comment id="14012034" author="jira-bot" created="Thu, 29 May 2014 03:57:10 +0000"  >&lt;p&gt;Commit 1598195 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mikemccand&quot; class=&quot;user-hover&quot; rel=&quot;mikemccand&quot;&gt;mikemccand&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1598195&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1598195&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6029&quot; title=&quot;CollapsingQParserPlugin throws ArrayIndexOutOfBoundsException if elevated doc has been deleted from a segment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6029&quot;&gt;&lt;del&gt;SOLR-6029&lt;/del&gt;&lt;/a&gt;: fix smoke test failure&lt;/p&gt;</comment>
                            <comment id="14012035" author="jira-bot" created="Thu, 29 May 2014 03:57:38 +0000"  >&lt;p&gt;Commit 1598196 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mikemccand&quot; class=&quot;user-hover&quot; rel=&quot;mikemccand&quot;&gt;mikemccand&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1598196&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1598196&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6029&quot; title=&quot;CollapsingQParserPlugin throws ArrayIndexOutOfBoundsException if elevated doc has been deleted from a segment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6029&quot;&gt;&lt;del&gt;SOLR-6029&lt;/del&gt;&lt;/a&gt;: fix smoke test failure&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12642373" name="SOLR-6029.patch" size="1803" author="gregharris73" created="Tue, 29 Apr 2014 00:26:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>389387</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1v2mf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>389632</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>