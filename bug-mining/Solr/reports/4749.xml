<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:48:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-15793] ref-guide jrubyPrepare fails due to gems trying to compile native code</title>
                <link>https://issues.apache.org/jira/browse/SOLR-15793</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;This popped up recently on both my local machine and jenkins...&lt;/p&gt;

&lt;p&gt;(snippet)&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Building native extensions. This could take a while...
ERROR:  Error installing /home/hossman/.gradle/caches/modules-2/files-2.1/rubygems/http_parser.rb/0.8.0/8aa1092bbc1f10fd9622224babf2b2a98d4d4b22/http_parser.rb-0.8.0.gem:
        ERROR: Failed to build gem native extension.

    current directory: /home/hossman/lucene/solr/solr/solr-ref-guide/build/.gems/gems/http_parser.rb-0.8.0/ext/ruby_http_parser
/opt/jdk/11/jdk-11.0.4+11/bin/java -cp :/home/hossman/.gradle/caches/modules-2/files-2.1/org.jruby/jruby-complete/9.2.9.0/8e44ce7a1417966d89957bd766a148601e28828b/jruby-complete-9.2.9.0.jar org.jruby.Main -r ./siteconf20211111-25245-1dvbe4a.rb extconf.rb
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by com.headius.backport9.modules.Modules (file:/home/hossman/.gradle/caches/modules-2/files-2.1/org.jruby/jruby-complete/9.2.9.0/8e44ce7a1417966d89957bd766a148601e28828b/jruby-complete-9.2.9.0.jar) to method sun.nio.ch.NativeThread.signal(long)
WARNING: Please consider reporting this to the maintainers of com.headius.backport9.modules.Modules
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
creating Makefile

current directory: /home/hossman/lucene/solr/solr/solr-ref-guide/build/.gems/gems/http_parser.rb-0.8.0/ext/ruby_http_parser
make &quot;DESTDIR=&quot; clean
Makefile:225: *** multiple target patterns.  Stop.

current directory: /home/hossman/lucene/solr/solr/solr-ref-guide/build/.gems/gems/http_parser.rb-0.8.0/ext/ruby_http_parser
make &quot;DESTDIR=&quot;
Makefile:225: *** multiple target patterns.  Stop.

make failed, exit code 2

Gem files will remain installed in /home/hossman/lucene/solr/solr/solr-ref-guide/build/.gems/gems/http_parser.rb-0.8.0 for inspection.
Results logged to /home/hossman/lucene/solr/solr/solr-ref-guide/build/.gems/extensions/universal-java-11/2.5.0/http_parser.rb-0.8.0/gem_make.out

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...it&apos;s very similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15520&quot; title=&quot;Refguide no longer builds on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15520&quot;&gt;&lt;del&gt;SOLR-15520&lt;/del&gt;&lt;/a&gt;, but isn&apos;t the result of any version changes made to our gem dependencies &amp;#8211; it seems like some transient gem dep changed, and now we&apos;re pulling in a gem that has native code which evidently can&apos;t compile under JRuby &lt;/p&gt;

&lt;p&gt;(I &lt;em&gt;think&lt;/em&gt; the Makefile error is becuase of &quot;paths&quot; that include the &apos;:&apos; character (because JRuby is trying to point them at &lt;tt&gt;classpath:&lt;/tt&gt; URIs)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13411349">SOLR-15793</key>
            <summary>ref-guide jrubyPrepare fails due to gems trying to compile native code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="epugh">Eric Pugh</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Nov 2021 19:19:00 +0000</created>
                <updated>Thu, 12 May 2022 00:26:59 +0000</updated>
                            <resolved>Fri, 12 Nov 2021 00:16:39 +0000</resolved>
                                                    <fixVersion>9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17442411" author="hossman" created="Thu, 11 Nov 2021 19:23:59 +0000"  >&lt;p&gt;Here&apos;s the full error...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; &amp;gt; Task :solr:solr-ref-guide:jrubyPrepare
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by com.headius.backport9.modules.Modules (file:/home/hossman/.gradle/caches/modules-2/files-2.1/org.jruby/jruby-complete/9.2.9.0/8e44ce7a1417966d89957bd766a148601e28828b/jruby-complete-9.2.9.0.jar) to method sun.nio.ch.NativeThread.signal(long)
WARNING: Please consider reporting this to the maintainers of com.headius.backport9.modules.Modules
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
Successfully installed ffi-1.15.4-java
Successfully installed rb-inotify-0.10.1
Successfully installed rb-fsevent-0.11.0
Successfully installed sass-listen-4.0.0
Successfully installed forwardable-extended-2.6.0
Successfully installed rexml-3.2.5
Successfully installed listen-3.7.0Ruby Sass has reached end-of-life and should no longer be used.* If you use Sass as a command-line tool, we recommend using Dart Sass, the new
&#160; primary implementation: https://sass-lang.com/install* If you use Sass as a plug-in for a Ruby web framework, we recommend using the
&#160; sassc gem: https://github.com/sass/sassc-ruby#readme* For more details, please refer to the Sass blog:
&#160; https://sass-lang.com/blog/posts/7828841Successfully installed sass-3.7.4
Building native extensions. This could take a while...
ERROR: &#160;Error installing /home/hossman/.gradle/caches/modules-2/files-2.1/rubygems/http_parser.rb/0.8.0/8aa1092bbc1f10fd9622224babf2b2a98d4d4b22/http_parser.rb-0.8.0.gem:
&#160; &#160; &#160; &#160; ERROR: Failed to build gem native extension.&#160; &#160; current directory: /home/hossman/lucene/solr/solr/solr-ref-guide/build/.gems/gems/http_parser.rb-0.8.0/ext/ruby_http_parser
/opt/jdk/11/jdk-11.0.4+11/bin/java -cp :/home/hossman/.gradle/caches/modules-2/files-2.1/org.jruby/jruby-complete/9.2.9.0/8e44ce7a1417966d89957bd766a148601e28828b/jruby-complete-9.2.9.0.jar org.jruby.Main -r ./siteconf20211111-25245-1dvbe4a.rb extconf.rb
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by com.headius.backport9.modules.Modules (file:/home/hossman/.gradle/caches/modules-2/files-2.1/org.jruby/jruby-complete/9.2.9.0/8e44ce7a1417966d89957bd766a148601e28828b/jruby-complete-9.2.9.0.jar) to method sun.nio.ch.NativeThread.signal(long)
WARNING: Please consider reporting this to the maintainers of com.headius.backport9.modules.Modules
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release
creating Makefilecurrent directory: /home/hossman/lucene/solr/solr/solr-ref-guide/build/.gems/gems/http_parser.rb-0.8.0/ext/ruby_http_parser
make &quot;DESTDIR=&quot; clean
Makefile:225: *** multiple target patterns. &#160;Stop.current directory: /home/hossman/lucene/solr/solr/solr-ref-guide/build/.gems/gems/http_parser.rb-0.8.0/ext/ruby_http_parser
make &quot;DESTDIR=&quot;
Makefile:225: *** multiple target patterns. &#160;Stop.make failed, exit code 2Gem files will remain installed in /home/hossman/lucene/solr/solr/solr-ref-guide/build/.gems/gems/http_parser.rb-0.8.0 for inspection.
Results logged to /home/hossman/lucene/solr/solr/solr-ref-guide/build/.gems/extensions/universal-java-11/2.5.0/http_parser.rb-0.8.0/gem_make.out
Successfully installed eventmachine-1.2.7-java
Successfully installed public_suffix-4.0.6
Successfully installed temple-0.8.2
Successfully installed asciidoctor-2.0.16
Successfully installed safe_yaml-1.0.5
Successfully installed rouge-3.26.1
Successfully installed pathutil-0.16.2
Successfully installed mercenary-0.3.6
Successfully installed liquid-4.0.3
Successfully installed kramdown-2.3.1
Successfully installed jekyll-watch-2.2.1
Successfully installed jekyll-sass-converter-1.5.2
Successfully installed em-websocket-0.5.3
Successfully installed colorator-1.1.0
Successfully installed addressable-2.8.0
Successfully installed concurrent-ruby-1.1.9
Successfully installed i18n-0.9.5
Successfully installed tilt-2.0.10
Successfully installed slim-4.1.0
Successfully installed jekyll-3.9.1
Successfully installed jekyll-asciidoc-3.0.0
29 gems installed&amp;gt; Task :solr:solr-ref-guide:jrubyPrepare FAILEDFAILURE: Build failed with an exception.* What went wrong:
Execution failed for task &apos;:solr:solr-ref-guide:jrubyPrepare&apos;.
&amp;gt; Process &apos;command &apos;/opt/jdk/11/jdk-11.0.4+11/bin/java&apos;&apos; finished with non-zero exit value 1* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.* Get more help at https://help.gradle.orgBUILD FAILED in 33s
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...I don&apos;t really understand any of jekyll/ruby/jruby/gradle-jruby to have much idea of what to try and do to &quot;fix&quot; this.&lt;/p&gt;

&lt;p&gt;I spent a little time trying to figure out if there is a way to force gems to ignore any native extensions and only use the &quot;pure ruby&quot; code ... but im not even clear whether all ruby gems have pure ruby implementations or not, let alone how to specify that in a dependency &amp;#8211; I found some forums suggesting a &lt;tt&gt;NORUBYEXT&lt;/tt&gt; env variable can help, but based on how JRuby installs gems I don&apos;t really see any way to set that.&lt;/p&gt;

&lt;p&gt;The safest thing to do would probably be to &quot;lock&quot; all transitive gem dependencies at whatever versions we were picking up a few days ago &amp;#8211; but i don&apos;t really understand gems/ruby enough to guess how to go about figuring out what those were?&lt;/p&gt;</comment>
                            <comment id="17442469" author="mdrob" created="Thu, 11 Nov 2021 22:33:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=epugh&quot; class=&quot;user-hover&quot; rel=&quot;epugh&quot;&gt;epugh&lt;/a&gt; found that adding &lt;tt&gt;gems &apos;rubygems:http_parser.rb:0.6.0&apos;&lt;/tt&gt; to line 80 makes it pass. It looks like it is kind of known that everything newer than 0.6.0 is broken with JRuby? See &lt;a href=&quot;https://github.com/tmm1/http_parser.rb/issues/72&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tmm1/http_parser.rb/issues/72&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17442510" author="epugh" created="Thu, 11 Nov 2021 23:54:32 +0000"  >&lt;p&gt;Normally you have a &lt;tt&gt;Gemfile.lock&lt;/tt&gt; that locks all the dependencies.   If this keeps happening, and we don&apos;t move to Antora I could look into this...&lt;/p&gt;</comment>
                            <comment id="17442514" author="jira-bot" created="Fri, 12 Nov 2021 00:16:28 +0000"  >&lt;p&gt;Commit 7646353f2b57db0b7130f14694565e65db2ec574 in solr&apos;s branch refs/heads/main from Eric Pugh&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=7646353&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=7646353&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15793&quot; title=&quot;ref-guide jrubyPrepare fails due to gems trying to compile native code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15793&quot;&gt;&lt;del&gt;SOLR-15793&lt;/del&gt;&lt;/a&gt;: ref-guide jrubyPrepare fails due to gems trying to compile native code (#412)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;pick a specific (older..  0.6.0) version of http_parser.rb that compiles on jruby&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17442605" author="dweiss" created="Fri, 12 Nov 2021 08:04:06 +0000"  >&lt;p&gt;That lock file should be there, if it&apos;s respected. It also prevents (well, sort of) adversarial code injected into transitive dependencies.&lt;/p&gt;</comment>
                            <comment id="17535735" author="janhoy" created="Thu, 12 May 2022 00:26:59 +0000"  >&lt;p&gt;Closing after the 9.0.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0wnug:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>