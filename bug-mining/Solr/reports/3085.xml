<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:16:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9444] Fix path usage for cloud backup/restore</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9444</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;As noted by Uwe on &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9242?focusedCommentId=15438925&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15438925&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SOLR-9242?focusedCommentId=15438925&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15438925&lt;/a&gt; the usage of URI#getPath is wrong. &lt;/p&gt;

&lt;p&gt;Creating a Jira to track this better. More details to follow&lt;/p&gt;</description>
                <environment></environment>
        <key id="13000400">SOLR-9444</key>
            <summary>Fix path usage for cloud backup/restore</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="uschindler">Uwe Schindler</assignee>
                                    <reporter username="varun">Varun Thacker</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Aug 2016 14:28:09 +0000</created>
                <updated>Thu, 21 Nov 2019 00:42:29 +0000</updated>
                            <resolved>Mon, 12 Sep 2016 11:55:50 +0000</resolved>
                                    <version>6.2</version>
                                    <fixVersion>6.2.1</fixVersion>
                    <fixVersion>6.3</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="15439163" author="hgadre" created="Fri, 26 Aug 2016 14:39:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=varun&quot; class=&quot;user-hover&quot; rel=&quot;varun&quot;&gt;varun&lt;/a&gt; Thanks for creating the JIRA. I will send out a patch later today.&lt;/p&gt;</comment>
                            <comment id="15439185" author="thetaphi" created="Fri, 26 Aug 2016 14:53:20 +0000"  >&lt;p&gt;I&apos;d suggest do let the first parameter of the createURI abstract method take URI (as basis URI), and then the String Path components. Then you can remove all code that just calls URI.getPath() to (incorrectly) to extract the path filesystem path (or whatever path) from the URI, misusing escaping. If you are Using the URI class from the begijning, use it everywhere.&lt;/p&gt;

&lt;p&gt;For pathes that &lt;b&gt;might be file system pathes&lt;/b&gt; (without an URI protocol), the config file parsing code should have a fallback catch clause like - or maybe using a regex that checks for a missing protocol (I assume the latter might be better):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; URI uri;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
 uri = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URI(stringFromConfigFile);
 &lt;span class=&quot;code-comment&quot;&gt;// a bit of hack:
&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!uri.isAbsolute)) &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URiSyntaxException(&lt;span class=&quot;code-quote&quot;&gt;&quot;use fallback&quot;&lt;/span&gt;);
} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (URISyntaxException use) {
 uri = Paths.get(stringFromConfigFile).toURI();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And this can be safely passes around. If you want to use this later and extend with other relative stuff (e.g. in createURI abstract method), use the above baseURI and append the other string parameters with &quot;resove&quot;. In general this could be done completely unspecific to the file system impl (outside repository impl classes).&lt;/p&gt;

&lt;p&gt;Inside FileSystemRepository you can then use &lt;tt&gt;Paths.get(URI)&lt;/tt&gt; to convert it to a file system instance (that would then even work with Java&apos;s native ZIPFS or others: &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/nio/file/Paths.html#get-java.net.URI-&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/8/docs/api/java/nio/file/Paths.html#get-java.net.URI-&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="15439193" author="varunthacker" created="Fri, 26 Aug 2016 14:58:29 +0000"  >&lt;p&gt;Quick patch which uses Paths.get() instead of URI.getPath. &lt;/p&gt;

&lt;p&gt;TestHdfsBackupRestoreCore will fail because with:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
39668 ERROR (OverseerThreadFactory-10-thread-3-processing-n:127.0.0.1:60156_solr) [n:127.0.0.1:60156_solr    ] o.a.s.c.OverseerCollectionMessageHandler Collection: hdfsbackuprestore operation: backup failed:java.nio.file.FileSystemNotFoundException: Provider &lt;span class=&quot;code-quote&quot;&gt;&quot;hdfs&quot;&lt;/span&gt; not installed
	at java.nio.file.Paths.get(Paths.java:147)
	at org.apache.solr.cloud.BackupCmd.call(BackupCmd.java:98)
	at org.apache.solr.cloud.OverseerCollectionMessageHandler.processMessage(OverseerCollectionMessageHandler.java:222)
	at org.apache.solr.cloud.OverseerTaskProcessor$Runner.run(OverseerTaskProcessor.java:463)
	at org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.lambda$execute$26(ExecutorUtil.java:229)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think thats related to &lt;a href=&quot;https://github.com/damiencarol/jsr203-hadoop&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/damiencarol/jsr203-hadoop&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="15439200" author="varunthacker" created="Fri, 26 Aug 2016 15:00:06 +0000"  >&lt;p&gt;I&apos;m going to take a look at this &lt;/p&gt;</comment>
                            <comment id="15439207" author="thetaphi" created="Fri, 26 Aug 2016 15:02:28 +0000"  >&lt;p&gt;I think the file system repository should only be used if the &quot;protocol&quot; is &quot;file&quot;.&lt;/p&gt;</comment>
                            <comment id="15439223" author="thetaphi" created="Fri, 26 Aug 2016 15:07:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;Quick patch which uses Paths.get() instead of URI.getPath.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The issue lies deeper in the API design of the backup infrastructure: see my above comment! If you use URI, then use it completely and avoid any conversion between strings and URIs. This is almost always a bug.&lt;/p&gt;

&lt;p&gt;As said before only accept strings when parsing config files, in any other case just pass URI class around. If you really need to convert to String (e.g. when it goes over wire), convert with URI.toAsciiString() and decrypt with new URI(...).&lt;/p&gt;

&lt;p&gt;The choose of the repository provider should then be done soley on URI#getScheme(). Only use java.nio.Path in FileSystemRepsitory but not for URI schemes where there is a better alternative (e.g. Hadoop, Zookeeper).&lt;/p&gt;</comment>
                            <comment id="15444718" author="githubbot" created="Mon, 29 Aug 2016 03:56:13 +0000"  >&lt;p&gt;GitHub user hgadre opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/74&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/74&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9444&quot; title=&quot;Fix path usage for cloud backup/restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9444&quot;&gt;&lt;del&gt;SOLR-9444&lt;/del&gt;&lt;/a&gt; Fix path usage for cloud backup/restore&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Refactored code using URI.getPath() API to use URI instance&lt;br/&gt;
      uniformly.&lt;/li&gt;
	&lt;li&gt;During serialization of URI instance, used toASCIIString() API&lt;br/&gt;
      to generate the appropriate String representation.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/hgadre/lucene-solr&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hgadre/lucene-solr&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9444&quot; title=&quot;Fix path usage for cloud backup/restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9444&quot;&gt;&lt;del&gt;SOLR-9444&lt;/del&gt;&lt;/a&gt;_fix&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/74.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/74.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #74&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 0acb659eacd7a7e6b76a2796bc9e75d5a815b439&lt;br/&gt;
Author: Hrishikesh Gadre &amp;lt;hgadre@cloudera.com&amp;gt;&lt;br/&gt;
Date:   2016-08-28T21:48:24Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9444&quot; title=&quot;Fix path usage for cloud backup/restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9444&quot;&gt;&lt;del&gt;SOLR-9444&lt;/del&gt;&lt;/a&gt; Fix path usage for cloud backup/restore&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Refactored code using URI.getPath() API to use URI instance&lt;br/&gt;
      uniformly.&lt;/li&gt;
	&lt;li&gt;During serialization of URI instance, used toASCIIString() API&lt;br/&gt;
      to generate the appropriate String representation.&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="15448044" author="hgadre" created="Tue, 30 Aug 2016 05:02:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=varun&quot; class=&quot;user-hover&quot; rel=&quot;varun&quot;&gt;varun&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt; Could you please review the PR ? I have tested on Linux as well as Windows...&lt;/p&gt;</comment>
                            <comment id="15448293" author="githubbot" created="Tue, 30 Aug 2016 07:14:13 +0000"  >&lt;p&gt;Github user uschindler commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/74#discussion_r76740913&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/74#discussion_r76740913&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: solr/core/src/java/org/apache/solr/core/backup/repository/LocalFileSystemRepository.java &amp;#8212;&lt;br/&gt;
    @@ -58,21 +59,28 @@ public void init(NamedList args) {&lt;br/&gt;
       }&lt;/p&gt;

&lt;p&gt;       @Override&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public URI createURI(String... pathComponents) {&lt;/li&gt;
	&lt;li&gt;Preconditions.checkArgument(pathComponents.length &amp;gt; 0);&lt;br/&gt;
    -&lt;/li&gt;
	&lt;li&gt;String basePath = Preconditions.checkNotNull(pathComponents&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;);&lt;/li&gt;
	&lt;li&gt;// Note the URI.getPath() invocation on Windows platform generates an invalid URI.&lt;/li&gt;
	&lt;li&gt;// Refer to &lt;a href=&quot;http://stackoverflow.com/questions/9834776/java-nio-file-path-issue&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/9834776/java-nio-file-path-issue&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;// Since the caller may have used this method to generate the string representation&lt;/li&gt;
	&lt;li&gt;// for the pathComponents, we implement a work-around specifically for Windows platform&lt;/li&gt;
	&lt;li&gt;// to remove the leading &apos;/&apos; character.&lt;/li&gt;
	&lt;li&gt;if (Constants.WINDOWS) {&lt;/li&gt;
	&lt;li&gt;basePath = basePath.replaceFirst(&quot;^/(.:/)&quot;, &quot;$1&quot;);&lt;br/&gt;
    +  public URI createURI(String location) {&lt;br/&gt;
    +    Preconditions.checkNotNull(location);&lt;br/&gt;
    +&lt;br/&gt;
    +    URI result = null;&lt;br/&gt;
    +    try {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Nice. This is exactly as I proposed. So people can use both URIs with a file: or just a plain path. URI.isAbsolute() returns false, if scheme (&quot;file:&quot;) is missing: &amp;lt;&lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/java/net/URI.html#isAbsolute(&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/7/docs/api/java/net/URI.html#isAbsolute(&lt;/a&gt;)&amp;gt; &quot;A URI is absolute if, and only if, it has a scheme component.&quot;&lt;/p&gt;</comment>
                            <comment id="15448302" author="thetaphi" created="Tue, 30 Aug 2016 07:17:59 +0000"  >&lt;p&gt;Hi,&lt;br/&gt;
this looks cool! I will try it out in a minute on my windows with whitespace in path.&lt;br/&gt;
This looks exactly as I proposed:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Only pass URI instances around instead of strings&lt;/li&gt;
	&lt;li&gt;Change createURI to take the base URI as URI&lt;/li&gt;
	&lt;li&gt;Add a new createURI that takes a single string and is responsible to create aplain RI from a string, which is repository specific&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Maybe rename the createURI that takes a baseURI and componenets to have a different name? E.g. resolveURI?&lt;/p&gt;</comment>
                            <comment id="15448306" author="thetaphi" created="Tue, 30 Aug 2016 07:19:37 +0000"  >&lt;p&gt;In the future, once the HDFS people created a working filesystem for Java 7, we may remove the HDFS special case, but for now its good to have. FYI: Using this new impl, it should be possible to create a backup in a zip file using the ZIP file system of Java 7+: &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/technotes/guides/io/fsp/zipfilesystemprovider.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oracle.com/javase/8/docs/technotes/guides/io/fsp/zipfilesystemprovider.html&lt;/a&gt; (see second example)&lt;/p&gt;</comment>
                            <comment id="15448315" author="varunthacker" created="Tue, 30 Aug 2016 07:24:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;will try it out in a minute on my windows with whitespace in path.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I was thinking of maybe adding this as part of &lt;tt&gt;TestLocalFSCloudBackupRestore#getBackupLocation&lt;/tt&gt; also?&lt;/p&gt;</comment>
                            <comment id="15448997" author="thetaphi" created="Tue, 30 Aug 2016 13:22:39 +0000"  >&lt;p&gt;Hi,&lt;br/&gt;
to me this looks fine. I agree, adding a separate test for the local fs that tests both variants to use the path (as URI or plain path) should be added, too.&lt;br/&gt;
On Windows with whitespace in file names I see no errors.&lt;/p&gt;

&lt;p&gt;It is currently only that some unrelated tests fail all the time, because &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; broke Hadoop on Windows. In general Jenkins is very unstable on master, no successful runs since days.&lt;/p&gt;</comment>
                            <comment id="15449012" author="noble.paul" created="Tue, 30 Aug 2016 13:28:12 +0000"  >&lt;p&gt;Which ticket exactly?&lt;/p&gt;</comment>
                            <comment id="15449119" author="thetaphi" created="Tue, 30 Aug 2016 14:13:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9460&quot; title=&quot;Testcase org.apache.solr.cloud.TestSolrCloudWithSecureImpersonation breaks on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9460&quot;&gt;&lt;del&gt;SOLR-9460&lt;/del&gt;&lt;/a&gt;, not sure which one caused this. But you made changes on the failing test!&lt;/p&gt;</comment>
                            <comment id="15449122" author="thetaphi" created="Tue, 30 Aug 2016 14:13:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9460&quot; title=&quot;Testcase org.apache.solr.cloud.TestSolrCloudWithSecureImpersonation breaks on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9460&quot;&gt;&lt;del&gt;SOLR-9460&lt;/del&gt;&lt;/a&gt;, not sure which one caused this. But you made changes on the failing test!&lt;/p&gt;</comment>
                            <comment id="15451142" author="hgadre" created="Wed, 31 Aug 2016 05:02:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=varun&quot; class=&quot;user-hover&quot; rel=&quot;varun&quot;&gt;varun&lt;/a&gt; Thanks for the reviews! Let me update the patch with following changes&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Rename createURI(URI...) method to resolveURI(...)&lt;/li&gt;
	&lt;li&gt;Add a test for verifying the whites-paces in the backup location&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15457052" author="hgadre" created="Fri, 2 Sep 2016 00:24:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=varun&quot; class=&quot;user-hover&quot; rel=&quot;varun&quot;&gt;varun&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt; I have updated the PR with above mentioned changes. Please take a look.&lt;/p&gt;</comment>
                            <comment id="15457741" author="githubbot" created="Fri, 2 Sep 2016 07:03:27 +0000"  >&lt;p&gt;Github user uschindler commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/74#discussion_r77301896&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/74#discussion_r77301896&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: solr/core/src/test/org/apache/solr/cloud/TestLocalFSCloudBackupRestore.java &amp;#8212;&lt;br/&gt;
    @@ -24,12 +24,20 @@&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;such file-system would be exposed via local file-system API.&lt;br/&gt;
      */&lt;br/&gt;
     public class TestLocalFSCloudBackupRestore extends AbstractCloudBackupRestoreTestCase {&lt;br/&gt;
    +  private static String backupLocation;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;       @BeforeClass&lt;br/&gt;
       public static void setupClass() throws Exception {&lt;br/&gt;
         configureCluster(NUM_SHARDS)// nodes&lt;br/&gt;
             .addConfig(&quot;conf1&quot;, TEST_PATH().resolve(&quot;configsets&quot;).resolve(&quot;cloud-minimal&quot;).resolve(&quot;conf&quot;))&lt;br/&gt;
             .configure();&lt;br/&gt;
    +&lt;br/&gt;
    +    boolean whitespacesInPath = random().nextBoolean();&lt;br/&gt;
    +    if (whitespacesInPath) {&lt;br/&gt;
    +      backupLocation = createTempDir(&quot;my backup&quot;).toFile().getAbsolutePath();&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    I&apos;d use `backupLocation = createTempDir(...).toAbsolutePath().toString();` to get rid of legacy `java.io.File`&lt;/p&gt;</comment>
                            <comment id="15457743" author="thetaphi" created="Fri, 2 Sep 2016 07:04:22 +0000"  >&lt;p&gt;Hi, looks fine to me! I can merge this later today. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=varun&quot; class=&quot;user-hover&quot; rel=&quot;varun&quot;&gt;varun&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="15457754" author="varunthacker" created="Fri, 2 Sep 2016 07:10:36 +0000"  >&lt;p&gt;Hi Uwe,&lt;/p&gt;

&lt;p&gt;Would you be committing this?&lt;/p&gt;</comment>
                            <comment id="15457763" author="thetaphi" created="Fri, 2 Sep 2016 07:14:15 +0000"  >&lt;p&gt;OK!&lt;/p&gt;</comment>
                            <comment id="15458356" author="thetaphi" created="Fri, 2 Sep 2016 12:13:54 +0000"  >&lt;p&gt;Here is the final patch. Committing now!&lt;/p&gt;</comment>
                            <comment id="15458359" author="jira-bot" created="Fri, 2 Sep 2016 12:15:34 +0000"  >&lt;p&gt;Commit e138462a82800be3811017062868051c14e560e6 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hgadre&quot; class=&quot;user-hover&quot; rel=&quot;hgadre&quot;&gt;hgadre&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=e138462&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=e138462&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9444&quot; title=&quot;Fix path usage for cloud backup/restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9444&quot;&gt;&lt;del&gt;SOLR-9444&lt;/del&gt;&lt;/a&gt; Fix path usage for cloud backup/restore&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Refactored code using URI.getPath() API to use URI instance&lt;br/&gt;
  uniformly.&lt;/li&gt;
	&lt;li&gt;During serialization of URI instance, used toASCIIString() API&lt;br/&gt;
  to generate the appropriate String representation.&lt;/li&gt;
	&lt;li&gt;Updated the unit test to use whitespaces in the backup directory path&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15458360" author="jira-bot" created="Fri, 2 Sep 2016 12:15:37 +0000"  >&lt;p&gt;Commit d9c0f2c6b91bd97d7e17a0b6abf16cb9d0f71b52 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=d9c0f2c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=d9c0f2c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9444&quot; title=&quot;Fix path usage for cloud backup/restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9444&quot;&gt;&lt;del&gt;SOLR-9444&lt;/del&gt;&lt;/a&gt;: Fix path usage for cloud backup/restore&lt;br/&gt;
Merge branch &apos;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9444&quot; title=&quot;Fix path usage for cloud backup/restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9444&quot;&gt;&lt;del&gt;SOLR-9444&lt;/del&gt;&lt;/a&gt;_fix&apos; of &lt;a href=&quot;https://github.com/hgadre/lucene-solr&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hgadre/lucene-solr&lt;/a&gt;&lt;br/&gt;
This closes #74&lt;/p&gt;</comment>
                            <comment id="15458361" author="jira-bot" created="Fri, 2 Sep 2016 12:15:40 +0000"  >&lt;p&gt;Commit d9c0f2c6b91bd97d7e17a0b6abf16cb9d0f71b52 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=d9c0f2c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=d9c0f2c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9444&quot; title=&quot;Fix path usage for cloud backup/restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9444&quot;&gt;&lt;del&gt;SOLR-9444&lt;/del&gt;&lt;/a&gt;: Fix path usage for cloud backup/restore&lt;br/&gt;
Merge branch &apos;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9444&quot; title=&quot;Fix path usage for cloud backup/restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9444&quot;&gt;&lt;del&gt;SOLR-9444&lt;/del&gt;&lt;/a&gt;_fix&apos; of &lt;a href=&quot;https://github.com/hgadre/lucene-solr&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hgadre/lucene-solr&lt;/a&gt;&lt;br/&gt;
This closes #74&lt;/p&gt;</comment>
                            <comment id="15458363" author="githubbot" created="Fri, 2 Sep 2016 12:16:19 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/74&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/74&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15458371" author="jira-bot" created="Fri, 2 Sep 2016 12:20:43 +0000"  >&lt;p&gt;Commit 83479443783e73e073362c35eb7e3ab3885be6a6 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=8347944&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=8347944&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9444&quot; title=&quot;Fix path usage for cloud backup/restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9444&quot;&gt;&lt;del&gt;SOLR-9444&lt;/del&gt;&lt;/a&gt;: Fix path usage for cloud backup/restore&lt;br/&gt;
Merge branch &apos;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9444&quot; title=&quot;Fix path usage for cloud backup/restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9444&quot;&gt;&lt;del&gt;SOLR-9444&lt;/del&gt;&lt;/a&gt;_fix&apos; of &lt;a href=&quot;https://github.com/hgadre/lucene-solr&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hgadre/lucene-solr&lt;/a&gt;&lt;br/&gt;
This closes #74&lt;/p&gt;</comment>
                            <comment id="15458372" author="jira-bot" created="Fri, 2 Sep 2016 12:20:46 +0000"  >&lt;p&gt;Commit 83479443783e73e073362c35eb7e3ab3885be6a6 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=8347944&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=8347944&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9444&quot; title=&quot;Fix path usage for cloud backup/restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9444&quot;&gt;&lt;del&gt;SOLR-9444&lt;/del&gt;&lt;/a&gt;: Fix path usage for cloud backup/restore&lt;br/&gt;
Merge branch &apos;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9444&quot; title=&quot;Fix path usage for cloud backup/restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9444&quot;&gt;&lt;del&gt;SOLR-9444&lt;/del&gt;&lt;/a&gt;_fix&apos; of &lt;a href=&quot;https://github.com/hgadre/lucene-solr&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hgadre/lucene-solr&lt;/a&gt;&lt;br/&gt;
This closes #74&lt;/p&gt;</comment>
                            <comment id="15482860" author="shalinmangar" created="Mon, 12 Sep 2016 02:48:15 +0000"  >&lt;p&gt;Re-opened to back-port to 6.2.1&lt;/p&gt;</comment>
                            <comment id="15483629" author="jira-bot" created="Mon, 12 Sep 2016 09:33:52 +0000"  >&lt;p&gt;Commit 9d3a2a0879be200cc3e4a4e3c2aa0f705ee08c12 in lucene-solr&apos;s branch refs/heads/branch_6_2 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9d3a2a0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9d3a2a0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9444&quot; title=&quot;Fix path usage for cloud backup/restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9444&quot;&gt;&lt;del&gt;SOLR-9444&lt;/del&gt;&lt;/a&gt;: Fix path usage for cloud backup/restore&lt;br/&gt;
Merge branch &apos;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9444&quot; title=&quot;Fix path usage for cloud backup/restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9444&quot;&gt;&lt;del&gt;SOLR-9444&lt;/del&gt;&lt;/a&gt;_fix&apos; of &lt;a href=&quot;https://github.com/hgadre/lucene-solr&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hgadre/lucene-solr&lt;/a&gt;&lt;br/&gt;
This closes #74&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 8347944)&lt;/p&gt;</comment>
                            <comment id="15483630" author="jira-bot" created="Mon, 12 Sep 2016 09:33:55 +0000"  >&lt;p&gt;Commit 9d3a2a0879be200cc3e4a4e3c2aa0f705ee08c12 in lucene-solr&apos;s branch refs/heads/branch_6_2 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9d3a2a0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9d3a2a0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9444&quot; title=&quot;Fix path usage for cloud backup/restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9444&quot;&gt;&lt;del&gt;SOLR-9444&lt;/del&gt;&lt;/a&gt;: Fix path usage for cloud backup/restore&lt;br/&gt;
Merge branch &apos;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9444&quot; title=&quot;Fix path usage for cloud backup/restore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9444&quot;&gt;&lt;del&gt;SOLR-9444&lt;/del&gt;&lt;/a&gt;_fix&apos; of &lt;a href=&quot;https://github.com/hgadre/lucene-solr&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hgadre/lucene-solr&lt;/a&gt;&lt;br/&gt;
This closes #74&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 8347944)&lt;/p&gt;</comment>
                            <comment id="15508548" author="shalinmangar" created="Wed, 21 Sep 2016 03:03:26 +0000"  >&lt;p&gt;Closing after 6.2.1 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12826807" name="SOLR-9444.patch" size="26859" author="uschindler" created="Fri, 2 Sep 2016 12:13:54 +0000"/>
                            <attachment id="12825670" name="SOLR-9444.patch" size="3703" author="varun" created="Fri, 26 Aug 2016 14:58:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32unz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>