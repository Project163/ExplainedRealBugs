<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:38:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-12248] Grouping in SolrCloud fails if indexed=&quot;false&quot; docValues=&quot;true&quot; and stored=&quot;false&quot;</title>
                <link>https://issues.apache.org/jira/browse/SOLR-12248</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;In SolrCloud &lt;em&gt;only&lt;/em&gt; (it works in stand-alone mode), a field defined as:&lt;br/&gt;
&amp;lt;field name=&quot;boolean_mvn_in_dvy_sn&quot; type=&quot;boolean&quot;  multiValued=&quot;false&quot;  indexed=&quot;false&quot;  docValues=&quot;true&quot;  stored=&quot;false&quot;  /&amp;gt;&lt;/p&gt;

&lt;p&gt;will fail with the following error:&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
org.apache.solr.schema.BoolField.toExternal(BoolField.java:131)&lt;br/&gt;
org.apache.solr.schema.BoolField.toObject(BoolField.java:142)&lt;br/&gt;
org.apache.solr.schema.BoolField.toObject(BoolField.java:51)&lt;br/&gt;
org.apache.solr.search.grouping.endresulttransformer.GroupedEndResultTransformer.transform(GroupedEndResultTransformer.java:72)&lt;br/&gt;
org.apache.solr.handler.component.QueryComponent.groupedFinishStage(QueryComponent.java:830)&lt;br/&gt;
org.apache.solr.handler.component.QueryComponent.finishStage(QueryComponent.java:793)&lt;br/&gt;
org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:435)&lt;br/&gt;
org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:173)&lt;br/&gt;
.&lt;br/&gt;
.&lt;/p&gt;



&lt;p&gt;curiously enough it succeeds with a field identically defined except for stored=&quot;true&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13153898">SOLR-12248</key>
            <summary>Grouping in SolrCloud fails if indexed=&quot;false&quot; docValues=&quot;true&quot; and stored=&quot;false&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ichattopadhyaya">Ishan Chattopadhyaya</assignee>
                                    <reporter username="erickerickson">Erick Erickson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Apr 2018 02:56:53 +0000</created>
                <updated>Sat, 8 Jun 2019 15:12:19 +0000</updated>
                            <resolved>Sun, 28 Apr 2019 17:35:57 +0000</resolved>
                                    <version>6.6.2</version>
                                    <fixVersion>8.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16678061" author="munendrasn" created="Wed, 7 Nov 2018 11:21:46 +0000"  >&lt;p&gt; &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12965116/12965116_SOLR-12248.patch&quot; title=&quot;SOLR-12248.patch attached to SOLR-12248&quot;&gt;SOLR-12248.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=erickerickson&quot; class=&quot;user-hover&quot; rel=&quot;erickerickson&quot;&gt;erickerickson&lt;/a&gt;&lt;br/&gt;
This is because in case of BoolField and StrField default createField is called. The method returns null when stored=false and indexed=false, &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
https:&lt;span class=&quot;code-comment&quot;&gt;//github.com/apache/lucene-solr/blob/master/solr/core/src/java/org/apache/solr/schema/FieldType.java#L269&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Hence, using createFields instead of createField as this handles docValues=true case. I&apos;m not sure when can creatdFields would return an empty list while doing grouping.&lt;/p&gt;</comment>
                            <comment id="16810685" author="ichattopadhyaya" created="Fri, 5 Apr 2019 10:27:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=munendrasn&quot; class=&quot;user-hover&quot; rel=&quot;munendrasn&quot;&gt;munendrasn&lt;/a&gt;, can you please add a unit test for this fix?&lt;/p&gt;</comment>
                            <comment id="16811807" author="munendrasn" created="Sun, 7 Apr 2019 09:00:43 +0000"  >&lt;p&gt; &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12965116/12965116_SOLR-12248.patch&quot; title=&quot;SOLR-12248.patch attached to SOLR-12248&quot;&gt;SOLR-12248.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;br/&gt;
This patch includes&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;support for grouping non-stored non-stored docValues enabled fields&lt;/li&gt;
	&lt;li&gt;handles case mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4647&quot; title=&quot;Grouping is broken on docvalues-only fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4647&quot;&gt;&lt;del&gt;SOLR-4647&lt;/del&gt;&lt;/a&gt;. I have included the test added in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4647&quot; title=&quot;Grouping is broken on docvalues-only fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4647&quot;&gt;&lt;del&gt;SOLR-4647&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;tests for non-stored non-stored docValues enabled fields&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Found one issue, &lt;br/&gt;
When group.format=simple or group.main=true, grouped response is not returned for group.query. I&apos;m not sure if this should be handled in issue or in different issue.&lt;/p&gt;</comment>
                            <comment id="16812530" author="erickerickson" created="Mon, 8 Apr 2019 15:51:36 +0000"  >&lt;p&gt;If you think this fix also fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4647&quot; title=&quot;Grouping is broken on docvalues-only fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4647&quot;&gt;&lt;del&gt;SOLR-4647&lt;/del&gt;&lt;/a&gt;,&#160;should both be closed when this is committed?&lt;/p&gt;</comment>
                            <comment id="16812558" author="munendrasn" created="Mon, 8 Apr 2019 16:17:26 +0000"  >&lt;p&gt;Yes&lt;/p&gt;</comment>
                            <comment id="16825917" author="ichattopadhyaya" created="Thu, 25 Apr 2019 09:54:11 +0000"  >&lt;p&gt;Thanks for the patch, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=munendrasn&quot; class=&quot;user-hover&quot; rel=&quot;munendrasn&quot;&gt;munendrasn&lt;/a&gt;.&lt;br/&gt;
Do you see any downside of using &lt;tt&gt;fieldType.toObject(schemaField, group.groupValue))&lt;/tt&gt; as compared to &lt;tt&gt;schemaField.createFields(group.groupValue.utf8ToString());&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="16826732" author="munendrasn" created="Fri, 26 Apr 2019 07:33:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ichattopadhyaya&quot; class=&quot;user-hover&quot; rel=&quot;ichattopadhyaya&quot;&gt;ichattopadhyaya&lt;/a&gt;&lt;br/&gt;
Initially, I had used &lt;tt&gt;fieldType.toObject(schemaField, group.groupValue))&lt;/tt&gt; but that didn&apos;t work in distributed mode. Either gave wrong results or failed with some Exception (Exception for trieField with message, &lt;b&gt;Invalid shift value in prefixCoded bytes (is encoded value really an INT?)&lt;/b&gt;)&lt;/p&gt;</comment>
                            <comment id="16828788" author="jira-bot" created="Sun, 28 Apr 2019 17:32:17 +0000"  >&lt;p&gt;Commit 4b49bd99ca20cee2263a3cd3c115c7d00b98f043 in lucene-solr&apos;s branch refs/heads/master from Ishan Chattopadhyaya&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=4b49bd9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=4b49bd9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12248&quot; title=&quot;Grouping in SolrCloud fails if indexed=&amp;quot;false&amp;quot; docValues=&amp;quot;true&amp;quot; and stored=&amp;quot;false&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12248&quot;&gt;&lt;del&gt;SOLR-12248&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4647&quot; title=&quot;Grouping is broken on docvalues-only fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4647&quot;&gt;&lt;del&gt;SOLR-4647&lt;/del&gt;&lt;/a&gt;: Grouping is broken on docValues-only fields&lt;/p&gt;</comment>
                            <comment id="16828790" author="jira-bot" created="Sun, 28 Apr 2019 17:34:58 +0000"  >&lt;p&gt;Commit a877632aaf86f5eeeba50201e7974f3329f5ccb9 in lucene-solr&apos;s branch refs/heads/branch_8x from Ishan Chattopadhyaya&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=a877632&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=a877632&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12248&quot; title=&quot;Grouping in SolrCloud fails if indexed=&amp;quot;false&amp;quot; docValues=&amp;quot;true&amp;quot; and stored=&amp;quot;false&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12248&quot;&gt;&lt;del&gt;SOLR-12248&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4647&quot; title=&quot;Grouping is broken on docvalues-only fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4647&quot;&gt;&lt;del&gt;SOLR-4647&lt;/del&gt;&lt;/a&gt;: Grouping is broken on docValues-only fields&lt;/p&gt;</comment>
                            <comment id="16828792" author="ichattopadhyaya" created="Sun, 28 Apr 2019 17:35:57 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=munendrasn&quot; class=&quot;user-hover&quot; rel=&quot;munendrasn&quot;&gt;munendrasn&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sstults&quot; class=&quot;user-hover&quot; rel=&quot;sstults&quot;&gt;sstults&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12639312">SOLR-4647</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12639312">SOLR-4647</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12965116" name="SOLR-12248.patch" size="17903" author="munendrasn" created="Sun, 7 Apr 2019 08:54:59 +0000"/>
                            <attachment id="12947220" name="SOLR-12248.patch" size="2239" author="munendrasn" created="Wed, 7 Nov 2018 11:16:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 29 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ssrz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>