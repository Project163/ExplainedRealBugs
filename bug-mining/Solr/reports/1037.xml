<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:30:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-3779] LineEntityProcessor processes only one document</title>
                <link>https://issues.apache.org/jira/browse/SOLR-3779</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;LineEntityProcessor processes only one document when combined with FileListEntityProcessor.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dataConfig&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dataSource type=&lt;span class=&quot;code-quote&quot;&gt;&quot;FileDataSource&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;fds&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;document&amp;gt;&lt;/span&gt;
       &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;entity name=&lt;span class=&quot;code-quote&quot;&gt;&quot;f&quot;&lt;/span&gt; processor=&lt;span class=&quot;code-quote&quot;&gt;&quot;FileListEntityProcessor&quot;&lt;/span&gt; fileName=&lt;span class=&quot;code-quote&quot;&gt;&quot;.*txt&quot;&lt;/span&gt; baseDir=&lt;span class=&quot;code-quote&quot;&gt;&quot;/Volumes/data/Documents&quot;&lt;/span&gt; recursive=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; rootEntity=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; dataSource=&lt;span class=&quot;code-quote&quot;&gt;&quot;null&quot;&lt;/span&gt; transformer=&lt;span class=&quot;code-quote&quot;&gt;&quot;TemplateTransformer&quot;&lt;/span&gt; &amp;gt;&lt;/span&gt;
             &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;entity onError=&lt;span class=&quot;code-quote&quot;&gt;&quot;skip&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;jc&quot;&lt;/span&gt;   processor=&lt;span class=&quot;code-quote&quot;&gt;&quot;LineEntityProcessor&quot;&lt;/span&gt; url=&lt;span class=&quot;code-quote&quot;&gt;&quot;${f.fileAbsolutePath}&quot;&lt;/span&gt; dataSource=&lt;span class=&quot;code-quote&quot;&gt;&quot;fds&quot;&lt;/span&gt;  rootEntity=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; transformer=&lt;span class=&quot;code-quote&quot;&gt;&quot;TemplateTransformer&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
          	  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;field column=&lt;span class=&quot;code-quote&quot;&gt;&quot;link&quot;&lt;/span&gt; template=&lt;span class=&quot;code-quote&quot;&gt;&quot;hello${f.fileAbsolutePath},${jc.rawLine}&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
          	  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;field column=&lt;span class=&quot;code-quote&quot;&gt;&quot;rawLine&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;rawLine&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
             &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/entity&amp;gt;&lt;/span&gt;          	  
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/entity&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/document&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dataConfig&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12605773">SOLR-3779</key>
            <summary>LineEntityProcessor processes only one document</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdyer">James Dyer</assignee>
                                    <reporter username="iorixxx">Ahmet Arslan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Aug 2012 19:16:25 +0000</created>
                <updated>Fri, 10 May 2013 10:33:38 +0000</updated>
                            <resolved>Fri, 14 Sep 2012 16:17:28 +0000</resolved>
                                    <version>4.0-BETA</version>
                                    <fixVersion>3.6.2</fixVersion>
                    <fixVersion>4.0</fixVersion>
                                    <component>contrib - DataImportHandler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13446274" author="iorixxx" created="Fri, 31 Aug 2012 19:19:18 +0000"  >&lt;p&gt;With this patch I was able to index lines of multiple files.&lt;/p&gt;</comment>
                            <comment id="13446323" author="jdyer" created="Fri, 31 Aug 2012 20:15:03 +0000"  >&lt;p&gt;Ahmet, thanks for reporting this and providing a fix!  I&apos;m pretty sure this was caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2382&quot; title=&quot;DIH Cache Improvements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2382&quot;&gt;&lt;del&gt;SOLR-2382&lt;/del&gt;&lt;/a&gt;, see item #6 in the description &quot;change the semantics of entity.destroy()&quot;.  And I do think your fix is correct:  just close the reader when it runs out of data so that the next time around it will open a new reader on the next file in the list.  LEP is the only EntityProcessor that depended on the old semantics of destroy().&lt;/p&gt;

&lt;p&gt;The disturbing thing here is that TestLineEntityProcessor passes, so clearly it is not testing the combination of FLEP/LEP correctly, even though the code comments indicate this was the intention.  Likely we need to replace this test with something in the spirit of the test included with &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3307&quot; title=&quot;DIH FileListEntityProcessor not multi-threading after applying patch SOLR-3011&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3307&quot;&gt;&lt;del&gt;SOLR-3307&lt;/del&gt;&lt;/a&gt;, or at least improve the mock-up LEP with something more realistic.  In any case, we&apos;ll need a unit test that actually fails prior to your patch and then passes with it applied...&lt;/p&gt;</comment>
                            <comment id="13449779" author="beinmysolo" created="Thu, 6 Sep 2012 16:27:07 +0000"  >&lt;p&gt;We&apos;ve noticed similar issues in 3.6.1 after upgrading from 3.5&lt;br/&gt;
Only the first file processed in a multi-file FileListEntityProcessor/LineEntityProcessor combination, &lt;br/&gt;
and with only the first value of a multi-valued entry listed in a nested SqlEntityProcessor.&lt;/p&gt;</comment>
                            <comment id="13455264" author="jdyer" created="Thu, 13 Sep 2012 20:48:18 +0000"  >&lt;p&gt;Here is a patch with a unit test.  I will commit this shortly as this needs to be fixed in 4.0. &lt;/p&gt;</comment>
                            <comment id="13455489" author="hossman" created="Fri, 14 Sep 2012 00:32:14 +0000"  >&lt;p&gt;James: should this be backported to the 3.6 branch for inclusions in a (probably) 3.6.2 as well?&lt;/p&gt;</comment>
                            <comment id="13455860" author="jdyer" created="Fri, 14 Sep 2012 15:21:06 +0000"  >&lt;p&gt;problem was introduced with 3.6, so fixing in 3.6 branch also.&lt;/p&gt;</comment>
                            <comment id="13455898" author="jdyer" created="Fri, 14 Sep 2012 16:17:28 +0000"  >&lt;p&gt;committed.  Thank you, Ahmet.&lt;/p&gt;

&lt;p&gt;Trunk: r1384816&lt;br/&gt;
4x: r1384828&lt;br/&gt;
3x: r1384834&lt;/p&gt;</comment>
                            <comment id="13610853" author="commit-tag-bot" created="Fri, 22 Mar 2013 16:39:52 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; James Dyer&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1384828&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1384828&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3779&quot; title=&quot;LineEntityProcessor processes only one document&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3779&quot;&gt;&lt;del&gt;SOLR-3779&lt;/del&gt;&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3791&quot; title=&quot;SortedMapBackedCache.java throws NullPointerException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3791&quot;&gt;&lt;del&gt;SOLR-3791&lt;/del&gt;&lt;/a&gt;: fix for DIH LineEntityProcessor &amp;amp; CachedSqlEntityProdessor&lt;/p&gt;</comment>
                            <comment id="13653981" author="thetaphi" created="Fri, 10 May 2013 10:33:38 +0000"  >&lt;p&gt;Closed after release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12545046" name="SOLR-3779.patch" size="4991" author="jdyer" created="Thu, 13 Sep 2012 20:48:18 +0000"/>
                            <attachment id="12543328" name="SOLR-3779.patch" size="978" author="iorixxx" created="Fri, 31 Aug 2012 19:19:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>243211</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03con:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17488</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>