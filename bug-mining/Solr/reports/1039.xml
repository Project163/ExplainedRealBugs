<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:30:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-3833] When a election is started because a leader went down, the new leader candidate should decline if the last state they published was not active.</title>
                <link>https://issues.apache.org/jira/browse/SOLR-3833</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;This is not critical I think - if they were not active, they should fail the sync round and give up anyway - but this should speed up getting to the right candidate.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12607460">SOLR-3833</key>
            <summary>When a election is started because a leader went down, the new leader candidate should decline if the last state they published was not active.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="markrmiller@gmail.com">Mark Miller</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Sep 2012 13:45:45 +0000</created>
                <updated>Mon, 9 May 2016 18:58:32 +0000</updated>
                            <resolved>Sat, 15 Sep 2012 04:14:35 +0000</resolved>
                                                    <fixVersion>4.0</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13455408" author="hossman" created="Thu, 13 Sep 2012 23:01:25 +0000"  >&lt;p&gt;assigning to mark to assess if this is a blocker for 4.0 or should be punted&lt;/p&gt;</comment>
                            <comment id="13494984" author="commit-tag-bot" created="Sun, 11 Nov 2012 20:28:02 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Mark Robert Miller&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1384937&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1384937&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3833&quot; title=&quot;When a election is started because a leader went down, the new leader candidate should decline if the last state they published was not active.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3833&quot;&gt;&lt;del&gt;SOLR-3833&lt;/del&gt;&lt;/a&gt;: When a election is started because a leader went down, the new leader candidate should decline if the last state they published was not active.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3836&quot; title=&quot;When doing peer sync, we should only count sync attempt that cannot reach the given host as success when the candidate leader is syncing with the replicas - not when replicas are syncing to the leader.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3836&quot;&gt;&lt;del&gt;SOLR-3836&lt;/del&gt;&lt;/a&gt;: When doing peer sync, we should only count sync attempts that cannot reach the given host as success when the candidate leader is syncing with the replicas - not when replicas are syncing to the leader.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3835&quot; title=&quot;In our leader election algorithm, if on connection loss we found we did not create our election node, we should retry, not throw an exception.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3835&quot;&gt;&lt;del&gt;SOLR-3835&lt;/del&gt;&lt;/a&gt;: In our leader election algorithm, if on connection loss we found we did not create our election node, we should retry, not throw an exception.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3834&quot; title=&quot;A new leader on cluster startup should also run the leader sync process in case there was a bad cluster shutdown.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3834&quot;&gt;&lt;del&gt;SOLR-3834&lt;/del&gt;&lt;/a&gt;: A new leader on cluster startup should also run the leader sync process in case there was a bad cluster shutdown.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3772&quot; title=&quot;On cluster startup, we should wait until we see all registered replicas before running the leader process - or if they all do not come up, N amount of time.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3772&quot;&gt;&lt;del&gt;SOLR-3772&lt;/del&gt;&lt;/a&gt;: On cluster startup, we should wait until we see all registered replicas before running the leader process - or if they all do not come up, N amount of time.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3756&quot; title=&quot;If we are elected the leader of a shard, but we fail to publish this for any reason, we should clean up and re trigger a leader election.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3756&quot;&gt;&lt;del&gt;SOLR-3756&lt;/del&gt;&lt;/a&gt;: If we are elected the leader of a shard, but we fail to publish this for any reason, we should clean up and re trigger a leader election.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3812&quot; title=&quot;ConnectionLoss during recovery can cause lost updates, leading to shard inconsistency.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3812&quot;&gt;&lt;del&gt;SOLR-3812&lt;/del&gt;&lt;/a&gt;: ConnectionLoss during recovery can cause lost updates, leading to shard inconsistency.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3813&quot; title=&quot;When a new leader syncs, we need to ask all shards to sync back, not just those that are active.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3813&quot;&gt;&lt;del&gt;SOLR-3813&lt;/del&gt;&lt;/a&gt;: When a new leader syncs, we need to ask all shards to sync back, not just those that are active.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3807&quot; title=&quot;Currently during recovery we pause for a number of seconds after waiting for the leader to see a recovering state so that any previous updates will have finished before our commit on the leader - we don&amp;#39;t need this wait for peersync.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3807&quot;&gt;&lt;del&gt;SOLR-3807&lt;/del&gt;&lt;/a&gt;: Currently during recovery we pause for a number of seconds after waiting for the leader to see a recovering state so that any previous updates will have finished before our commit on the leader - we don&apos;t need this wait for peersync.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3837&quot; title=&quot;When a leader is elected and asks replicas to sync back to him and that fails, we should ask those nodes to recovery asynchronously rather than synchronously.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3837&quot;&gt;&lt;del&gt;SOLR-3837&lt;/del&gt;&lt;/a&gt;: When a leader is elected and asks replicas to sync back to him and that fails, we should ask those nodes to recovery asynchronously rather than synchronously.&lt;/p&gt;
</comment>
                            <comment id="13610840" author="commit-tag-bot" created="Fri, 22 Mar 2013 16:39:10 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Mark Robert Miller&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1384937&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1384937&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3833&quot; title=&quot;When a election is started because a leader went down, the new leader candidate should decline if the last state they published was not active.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3833&quot;&gt;&lt;del&gt;SOLR-3833&lt;/del&gt;&lt;/a&gt;: When a election is started because a leader went down, the new leader candidate should decline if the last state they published was not active.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3836&quot; title=&quot;When doing peer sync, we should only count sync attempt that cannot reach the given host as success when the candidate leader is syncing with the replicas - not when replicas are syncing to the leader.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3836&quot;&gt;&lt;del&gt;SOLR-3836&lt;/del&gt;&lt;/a&gt;: When doing peer sync, we should only count sync attempts that cannot reach the given host as success when the candidate leader is syncing with the replicas - not when replicas are syncing to the leader.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3835&quot; title=&quot;In our leader election algorithm, if on connection loss we found we did not create our election node, we should retry, not throw an exception.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3835&quot;&gt;&lt;del&gt;SOLR-3835&lt;/del&gt;&lt;/a&gt;: In our leader election algorithm, if on connection loss we found we did not create our election node, we should retry, not throw an exception.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3834&quot; title=&quot;A new leader on cluster startup should also run the leader sync process in case there was a bad cluster shutdown.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3834&quot;&gt;&lt;del&gt;SOLR-3834&lt;/del&gt;&lt;/a&gt;: A new leader on cluster startup should also run the leader sync process in case there was a bad cluster shutdown.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3772&quot; title=&quot;On cluster startup, we should wait until we see all registered replicas before running the leader process - or if they all do not come up, N amount of time.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3772&quot;&gt;&lt;del&gt;SOLR-3772&lt;/del&gt;&lt;/a&gt;: On cluster startup, we should wait until we see all registered replicas before running the leader process - or if they all do not come up, N amount of time.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3756&quot; title=&quot;If we are elected the leader of a shard, but we fail to publish this for any reason, we should clean up and re trigger a leader election.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3756&quot;&gt;&lt;del&gt;SOLR-3756&lt;/del&gt;&lt;/a&gt;: If we are elected the leader of a shard, but we fail to publish this for any reason, we should clean up and re trigger a leader election.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3812&quot; title=&quot;ConnectionLoss during recovery can cause lost updates, leading to shard inconsistency.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3812&quot;&gt;&lt;del&gt;SOLR-3812&lt;/del&gt;&lt;/a&gt;: ConnectionLoss during recovery can cause lost updates, leading to shard inconsistency.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3813&quot; title=&quot;When a new leader syncs, we need to ask all shards to sync back, not just those that are active.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3813&quot;&gt;&lt;del&gt;SOLR-3813&lt;/del&gt;&lt;/a&gt;: When a new leader syncs, we need to ask all shards to sync back, not just those that are active.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3807&quot; title=&quot;Currently during recovery we pause for a number of seconds after waiting for the leader to see a recovering state so that any previous updates will have finished before our commit on the leader - we don&amp;#39;t need this wait for peersync.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3807&quot;&gt;&lt;del&gt;SOLR-3807&lt;/del&gt;&lt;/a&gt;: Currently during recovery we pause for a number of seconds after waiting for the leader to see a recovering state so that any previous updates will have finished before our commit on the leader - we don&apos;t need this wait for peersync.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3837&quot; title=&quot;When a leader is elected and asks replicas to sync back to him and that fails, we should ask those nodes to recovery asynchronously rather than synchronously.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3837&quot;&gt;&lt;del&gt;SOLR-3837&lt;/del&gt;&lt;/a&gt;: When a leader is elected and asks replicas to sync back to him and that fails, we should ask those nodes to recovery asynchronously rather than synchronously.&lt;/p&gt;</comment>
                            <comment id="13654290" author="thetaphi" created="Fri, 10 May 2013 10:34:40 +0000"  >&lt;p&gt;Closed after release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>243161</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03cdj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17438</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>