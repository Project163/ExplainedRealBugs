<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:18:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9846] Overseer is not always closed after being started.</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9846</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;We should interrupt it on close.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13027321">SOLR-9846</key>
            <summary>Overseer is not always closed after being started.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="markrmiller@gmail.com">Mark Miller</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Dec 2016 02:19:38 +0000</created>
                <updated>Sat, 8 Jun 2019 15:29:03 +0000</updated>
                            <resolved>Wed, 22 Feb 2017 17:23:46 +0000</resolved>
                                                    <fixVersion>6.5</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15749085" author="jira-bot" created="Wed, 14 Dec 2016 18:38:08 +0000"  >&lt;p&gt;Commit 7dec783b287ab554cc781622b4d6127e553fd2ae in lucene-solr&apos;s branch refs/heads/master from markrmiller&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7dec783&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7dec783&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9846&quot; title=&quot;Overseer is not always closed after being started.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9846&quot;&gt;&lt;del&gt;SOLR-9846&lt;/del&gt;&lt;/a&gt;: OverseerAutoReplicaFailoverThread can take too long to stop and leak out of unit tests.&lt;/p&gt;</comment>
                            <comment id="15750090" author="jira-bot" created="Thu, 15 Dec 2016 01:56:27 +0000"  >&lt;p&gt;Commit 89f0149feeb02545d902493d1cfae76a700692ad in lucene-solr&apos;s branch refs/heads/branch_6x from markrmiller&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=89f0149&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=89f0149&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9846&quot; title=&quot;Overseer is not always closed after being started.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9846&quot;&gt;&lt;del&gt;SOLR-9846&lt;/del&gt;&lt;/a&gt;: OverseerAutoReplicaFailoverThread can take too long to stop and leak out of unit tests.&lt;/p&gt;</comment>
                            <comment id="15783993" author="markrmiller@gmail.com" created="Wed, 28 Dec 2016 23:33:33 +0000"  >&lt;p&gt;I&apos;m still seeing this.&lt;/p&gt;</comment>
                            <comment id="15862942" author="jira-bot" created="Sun, 12 Feb 2017 19:58:14 +0000"  >&lt;p&gt;Commit b5c7bd1d10f3df8b2a622f3d76bee72f028cc483 in lucene-solr&apos;s branch refs/heads/master from markrmiller&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=b5c7bd1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=b5c7bd1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9846&quot; title=&quot;Overseer is not always closed after being started.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9846&quot;&gt;&lt;del&gt;SOLR-9846&lt;/del&gt;&lt;/a&gt;: Try and make sure Overseer is always closed in tests and it&apos;s threads are done when it exists close.&lt;/p&gt;</comment>
                            <comment id="15862943" author="jira-bot" created="Sun, 12 Feb 2017 19:59:11 +0000"  >&lt;p&gt;Commit 7da344011441824dd89a18d968661081f84f742c in lucene-solr&apos;s branch refs/heads/branch_6x from markrmiller&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7da3440&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7da3440&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9846&quot; title=&quot;Overseer is not always closed after being started.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9846&quot;&gt;&lt;del&gt;SOLR-9846&lt;/del&gt;&lt;/a&gt;: Try and make sure Overseer is always closed in tests and it&apos;s threads are done when it exists close.&lt;/p&gt;</comment>
                            <comment id="15862944" author="markrmiller@gmail.com" created="Sun, 12 Feb 2017 20:01:05 +0000"  >&lt;p&gt;Digging in, looks like somehow the Overseer may not have been getting closed in some tests. Added some tracking code to test Overseer is closed and made some small tweaks that may help address the problem. If not, the tracking should tell us more if this continues.&lt;/p&gt;</comment>
                            <comment id="15866187" author="jira-bot" created="Tue, 14 Feb 2017 17:28:34 +0000"  >&lt;p&gt;Commit a243befdbb4c011c33c27b1b864d4a202b401675 in lucene-solr&apos;s branch refs/heads/master from markrmiller&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a243bef&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a243bef&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9846&quot; title=&quot;Overseer is not always closed after being started.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9846&quot;&gt;&lt;del&gt;SOLR-9846&lt;/del&gt;&lt;/a&gt;: Track Overseer close better.&lt;/p&gt;</comment>
                            <comment id="15866195" author="jira-bot" created="Tue, 14 Feb 2017 17:31:13 +0000"  >&lt;p&gt;Commit 17f441e8e263ce29e2b1da0aa11506a9541e3d3a in lucene-solr&apos;s branch refs/heads/branch_6x from markrmiller&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=17f441e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=17f441e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9846&quot; title=&quot;Overseer is not always closed after being started.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9846&quot;&gt;&lt;del&gt;SOLR-9846&lt;/del&gt;&lt;/a&gt;: Track Overseer close better.&lt;/p&gt;</comment>
                            <comment id="15872909" author="jira-bot" created="Sat, 18 Feb 2017 02:23:13 +0000"  >&lt;p&gt;Commit ed05debb4e223e07aeeccdc0a802b8c2a514ba23 in lucene-solr&apos;s branch refs/heads/master from markrmiller&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=ed05deb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=ed05deb&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9846&quot; title=&quot;Overseer is not always closed after being started.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9846&quot;&gt;&lt;del&gt;SOLR-9846&lt;/del&gt;&lt;/a&gt;: Overseer is not always closed after being started.&lt;/p&gt;</comment>
                            <comment id="15873790" author="markrmiller@gmail.com" created="Sun, 19 Feb 2017 18:24:17 +0000"  >&lt;p&gt;Still can end up in a situation where leader election starts a new Overseer that is not closed.&lt;/p&gt;</comment>
                            <comment id="15873791" author="markrmiller@gmail.com" created="Sun, 19 Feb 2017 18:24:43 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4] ERROR   0.00s | StreamExpressionTest (suite) &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: ObjectTracker found 1 object(s) that were not released!!! [Overseer]
   [junit4]    &amp;gt; org.apache.solr.common.util.ObjectReleaseTracker$ObjectTrackerException
   [junit4]    &amp;gt; 	at org.apache.solr.common.util.ObjectReleaseTracker.track(ObjectReleaseTracker.java:42)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.Overseer.start(Overseer.java:523)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.OverseerElectionContext.runLeaderProcess(ElectionContext.java:748)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.LeaderElector.runIamLeaderProcess(LeaderElector.java:170)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:135)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.LeaderElector.access$200(LeaderElector.java:56)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.LeaderElector$ElectionWatcher.process(LeaderElector.java:348)
   [junit4]    &amp;gt; 	at org.apache.solr.common.cloud.SolrZkClient$3.lambda$process$0(SolrZkClient.java:268)
   [junit4]    &amp;gt; 	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
   [junit4]    &amp;gt; 	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
   [junit4]    &amp;gt; 	at org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.lambda$execute$0(ExecutorUtil.java:229)
   [junit4]    &amp;gt; 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
   [junit4]    &amp;gt; 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
   [junit4]    &amp;gt; 	at java.lang.Thread.run(Thread.java:745)
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([D0C5E99506097E9D]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.SolrTestCaseJ4.teardownTestCases(SolrTestCaseJ4.java:301)
   [junit4]    &amp;gt; 	at java.lang.Thread.run(Thread.java:745)Throwable #2: com.carrotsearch.randomizedtesting.ThreadLeakError: 1 thread leaked from SUITE scope at org.apache.solr.client.solrj.io.stream.StreamExpressionTest: 
   [junit4]    &amp;gt;    1) Thread[id=4039, name=OverseerHdfsCoreFailoverThread-97477342480957451-127.0.0.1:45975_solr-n_0000000003, state=TIMED_WAITING, group=Overseer Hdfs SolrCore Failover Thread.]
   [junit4]    &amp;gt;         at java.lang.Thread.sleep(Native Method)
   [junit4]    &amp;gt;         at org.apache.solr.cloud.OverseerAutoReplicaFailoverThread.run(OverseerAutoReplicaFailoverThread.java:139)
   [junit4]    &amp;gt;         at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15873859" author="jira-bot" created="Sun, 19 Feb 2017 22:02:46 +0000"  >&lt;p&gt;Commit b30b6c58f70b79e3b8055265d213693fbee56ff5 in lucene-solr&apos;s branch refs/heads/master from markrmiller&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=b30b6c5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=b30b6c5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9846&quot; title=&quot;Overseer is not always closed after being started.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9846&quot;&gt;&lt;del&gt;SOLR-9846&lt;/del&gt;&lt;/a&gt;: Don&apos;t run Overseer threads if CoreContainer is shutdown.&lt;/p&gt;</comment>
                            <comment id="15878773" author="jira-bot" created="Wed, 22 Feb 2017 17:23:17 +0000"  >&lt;p&gt;Commit 4de034a2931ed923de676e9cbefb21e4ca366601 in lucene-solr&apos;s branch refs/heads/branch_6x from markrmiller&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=4de034a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=4de034a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9846&quot; title=&quot;Overseer is not always closed after being started.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9846&quot;&gt;&lt;del&gt;SOLR-9846&lt;/del&gt;&lt;/a&gt;: Overseer is not always closed after being started.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Conflicts:&lt;/li&gt;
	&lt;li&gt;solr/CHANGES.txt&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="15878774" author="jira-bot" created="Wed, 22 Feb 2017 17:23:21 +0000"  >&lt;p&gt;Commit 20cac581713ee26af029aaa93e708eade65a2bd1 in lucene-solr&apos;s branch refs/heads/branch_6x from markrmiller&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=20cac58&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=20cac58&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9846&quot; title=&quot;Overseer is not always closed after being started.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9846&quot;&gt;&lt;del&gt;SOLR-9846&lt;/del&gt;&lt;/a&gt;: Don&apos;t run Overseer threads if CoreContainer is shutdown.&lt;/p&gt;</comment>
                            <comment id="16481624" author="mkhludnev" created="Sat, 19 May 2018 13:10:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/core/src/java/org/apache/solr/cloud/ElectionContext.java#L850&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/master/solr/core/src/java/org/apache/solr/cloud/ElectionContext.java#L850&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (overseer.getZkController() == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || overseer.getZkController().getCoreContainer() == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || !overseer.getZkController().getCoreContainer().isShutDown()) {
      overseer.start(id);
&#160; &#160; }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt;, is it really correct condition?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13027320">SOLR-9845</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13160523">SOLR-12377</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37gjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>