<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:52:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16527] RuleBasedAuthorizationPluginBase NPE</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16527</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I set up a SolrCloud with 2 nodes and enabled basic auth following the Solr guide (&lt;a href=&quot;https://solr.apache.org/guide/solr/latest/deployment-guide/basic-authentication-plugin.html#enable-basic-authentication&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://solr.apache.org/guide/solr/latest/deployment-guide/basic-authentication-plugin.html#enable-basic-authentication&lt;/a&gt;).&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR (qtp1527086220-49) [] o.a.s.h.RequestHandlerBase java.lang.NullPointerException =&amp;gt; java.lang.NullPointerException
at org.apache.solr.security.RuleBasedAuthorizationPluginBase.getPermissionNamesForRoles(RuleBasedAuthorizationPluginBase.java:123)
java.lang.NullPointerException: null
at org.apache.solr.security.RuleBasedAuthorizationPluginBase.getPermissionNamesForRoles(RuleBasedAuthorizationPluginBase.java:123) ~[?:?]
at org.apache.solr.handler.admin.SystemInfoHandler.getSecurityInfo(SystemInfoHandler.java:342) ~[?:?]
at org.apache.solr.handler.admin.SystemInfoHandler.handleRequestBody(SystemInfoHandler.java:153) ~[?:?]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Logs seen on the Solr node originating the request:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2022-11-04 09:26:46.251 INFO  (qtp1658512704-126) [] o.a.s.s.HttpSolrCall [admin] webapp=null path=/admin/info/system params={wt=javabin&amp;amp;version=2&amp;amp;_=1667579206203} status=0 QTime=1
2022-11-04 09:26:46.259 WARN  (qtp1658512704-81) [] o.a.s.h.a.AdminHandlersProxy Exception when fetching result from node localhost:6564_solr =&amp;gt; java.util.concurrent.ExecutionException: org.apache.solr.client.solrj.impl.BaseHttpSolrClient$RemoteSolrException: Error from server at http://localhost:6564/solr: java.lang.NullPointerException
at org.apache.solr.security.RuleBasedAuthorizationPluginBase.getPermissionNamesForRoles(RuleBasedAuthorizationPluginBase.java:126)
java.util.concurrent.ExecutionException: org.apache.solr.client.solrj.impl.BaseHttpSolrClient$RemoteSolrException: Error from server at http://localhost:6564/solr: java.lang.NullPointerException
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I believe the reason is the &apos;roles&apos; set is null on inter-node requests so this method will throw a NPE &lt;a href=&quot;https://github.com/apache/solr/blob/26195c82493422cb9d6d4bdf9d4452046e7b3f67/solr/core/src/java/org/apache/solr/security/RuleBasedAuthorizationPluginBase.java#L122&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/blob/26195c82493422cb9d6d4bdf9d4452046e7b3f67/solr/core/src/java/org/apache/solr/security/RuleBasedAuthorizationPluginBase.java#L122&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;It looks like this was introduced with following commit for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15776&quot; title=&quot;Make Admin UI play well with Authorization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15776&quot;&gt;&lt;del&gt;SOLR-15776&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://github.com/apache/solr/commit/a1406847ba256965e636e05b11e53c0ac696e2a9#diff-83579b1681fbe3ea47f7340796963b034594921405afb41c62d9415f52f5adcfR356&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/commit/a1406847ba256965e636e05b11e53c0ac696e2a9#diff-83579b1681fbe3ea47f7340796963b034594921405afb41c62d9415f52f5adcfR356&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13498775">SOLR-16527</key>
            <summary>RuleBasedAuthorizationPluginBase NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="krisden">Kevin Risden</assignee>
                                    <reporter username="stillalex">Alex Deparvu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Nov 2022 19:04:50 +0000</created>
                <updated>Fri, 17 Oct 2025 20:05:04 +0000</updated>
                            <resolved>Tue, 8 Nov 2022 01:19:14 +0000</resolved>
                                    <version>9.1</version>
                                    <fixVersion>9.1</fixVersion>
                    <fixVersion>10.0</fixVersion>
                                    <component>Authorization</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17629974" author="risdenk" created="Mon, 7 Nov 2022 19:20:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stillalex&quot; class=&quot;user-hover&quot; rel=&quot;stillalex&quot;&gt;stillalex&lt;/a&gt; I updated affects version to 9.1 - since &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15776&quot; title=&quot;Make Admin UI play well with Authorization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15776&quot;&gt;&lt;del&gt;SOLR-15776&lt;/del&gt;&lt;/a&gt; was only committed in 9.1.&lt;/p&gt;</comment>
                            <comment id="17629981" author="alex.parvulescu" created="Mon, 7 Nov 2022 19:25:56 +0000"  >&lt;p&gt;good catch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krisden&quot; class=&quot;user-hover&quot; rel=&quot;krisden&quot;&gt;krisden&lt;/a&gt; you are indeed correct.&lt;/p&gt;</comment>
                            <comment id="17630078" author="janhoy" created="Mon, 7 Nov 2022 23:00:14 +0000"  >&lt;p&gt;Hoping to be able to target 9.1 RC2 for this, as it is quite serious, affecting all Cloud BasicAuth setups.&#160;&lt;/p&gt;</comment>
                            <comment id="17630088" author="alex.parvulescu" created="Mon, 7 Nov 2022 23:52:44 +0000"  >&lt;p&gt;thanks for confirming &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=janhoy&quot; class=&quot;user-hover&quot; rel=&quot;janhoy&quot;&gt;janhoy&lt;/a&gt;. Is there anything else to do besides the PR to get this into the 9.1 RC2?&lt;/p&gt;</comment>
                            <comment id="17630107" author="jira-bot" created="Tue, 8 Nov 2022 00:54:06 +0000"  >&lt;p&gt;Commit f35e1a3ed2b092b14411b799fd6360c4993bf4a8 in solr&apos;s branch refs/heads/main from Alex&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=f35e1a3ed2b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=f35e1a3ed2b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16527&quot; title=&quot;RuleBasedAuthorizationPluginBase NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16527&quot;&gt;&lt;del&gt;SOLR-16527&lt;/del&gt;&lt;/a&gt; RuleBasedAuthorizationPluginBase NPE (#1164)&lt;/p&gt;

&lt;p&gt;Fixed NPE on RuleBasedAuthorizationPluginBase#getPermissionNamesForRoles for null set of roles&lt;/p&gt;</comment>
                            <comment id="17630109" author="jira-bot" created="Tue, 8 Nov 2022 00:57:34 +0000"  >&lt;p&gt;Commit b2ab5c1bb797959dc52358ea3069865393d5d359 in solr&apos;s branch refs/heads/branch_9x from Alex&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=b2ab5c1bb79&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=b2ab5c1bb79&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16527&quot; title=&quot;RuleBasedAuthorizationPluginBase NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16527&quot;&gt;&lt;del&gt;SOLR-16527&lt;/del&gt;&lt;/a&gt; RuleBasedAuthorizationPluginBase NPE (#1164)&lt;/p&gt;

&lt;p&gt;Fixed NPE on RuleBasedAuthorizationPluginBase#getPermissionNamesForRoles for null set of roles&lt;/p&gt;</comment>
                            <comment id="17630113" author="jira-bot" created="Tue, 8 Nov 2022 01:15:23 +0000"  >&lt;p&gt;Commit aa4f3d98ab19c201e7f3c74cd14c99174148616d in solr&apos;s branch refs/heads/branch_9_1 from Alex&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=aa4f3d98ab1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=aa4f3d98ab1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16527&quot; title=&quot;RuleBasedAuthorizationPluginBase NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16527&quot;&gt;&lt;del&gt;SOLR-16527&lt;/del&gt;&lt;/a&gt; RuleBasedAuthorizationPluginBase NPE (#1164)&lt;/p&gt;

&lt;p&gt;Fixed NPE on RuleBasedAuthorizationPluginBase#getPermissionNamesForRoles for null set of roles&lt;/p&gt;</comment>
                            <comment id="17630114" author="jira-bot" created="Tue, 8 Nov 2022 01:18:41 +0000"  >&lt;p&gt;Commit 2e6c7692981828c7da95de4691dd903dd558a576 in solr&apos;s branch refs/heads/main from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=2e6c7692981&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=2e6c7692981&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16527&quot; title=&quot;RuleBasedAuthorizationPluginBase NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16527&quot;&gt;&lt;del&gt;SOLR-16527&lt;/del&gt;&lt;/a&gt;: move changes to 9.1&lt;/p&gt;</comment>
                            <comment id="17630115" author="jira-bot" created="Tue, 8 Nov 2022 01:19:00 +0000"  >&lt;p&gt;Commit 70cb2da5fb2ae7957ba048bf37622db92c161aec in solr&apos;s branch refs/heads/branch_9x from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=70cb2da5fb2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=70cb2da5fb2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16527&quot; title=&quot;RuleBasedAuthorizationPluginBase NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16527&quot;&gt;&lt;del&gt;SOLR-16527&lt;/del&gt;&lt;/a&gt;: move changes to 9.1&lt;/p&gt;</comment>
                            <comment id="17630116" author="risdenk" created="Tue, 8 Nov 2022 01:19:14 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stillalex&quot; class=&quot;user-hover&quot; rel=&quot;stillalex&quot;&gt;stillalex&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="17630304" author="janhoy" created="Tue, 8 Nov 2022 09:25:54 +0000"  >&lt;p&gt;Thanks Alex and Kevin.&lt;/p&gt;

&lt;p&gt;PS: It&apos;s not necessary with a separate &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16527&quot; title=&quot;RuleBasedAuthorizationPluginBase NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16527&quot;&gt;&lt;del&gt;SOLR-16527&lt;/del&gt;&lt;/a&gt; CHANGES entry, as the feature (&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15776&quot; title=&quot;Make Admin UI play well with Authorization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15776&quot;&gt;&lt;del&gt;SOLR-15776&lt;/del&gt;&lt;/a&gt;) was introduced in the same version, i.e. this bug has never been released to users. We could fold the credit to Alex into the &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15776&quot; title=&quot;Make Admin UI play well with Authorization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15776&quot;&gt;&lt;del&gt;SOLR-15776&lt;/del&gt;&lt;/a&gt; line instead?&lt;/p&gt;</comment>
                            <comment id="17630535" author="risdenk" created="Tue, 8 Nov 2022 17:23:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=janhoy&quot; class=&quot;user-hover&quot; rel=&quot;janhoy&quot;&gt;janhoy&lt;/a&gt; yea technically true on changes.txt - it was just easier to merge as it was instead of making a whole bunch of changes entries across 3 branches (main, branch_9x, branch_9_1). I don&apos;t think it hurts anything to leave it separate.&lt;/p&gt;</comment>
                            <comment id="17630569" author="janhoy" created="Tue, 8 Nov 2022 19:00:07 +0000"  >&lt;p&gt;Sure, no prob for me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17656920" author="ishan" created="Tue, 10 Jan 2023 20:45:35 +0000"  >&lt;p&gt;Bulk closing 9.1 issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13410498">SOLR-15776</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 44 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1bi40:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>