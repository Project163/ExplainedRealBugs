<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:55:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16639] solr-exporter metrics node_thread_pool_completed_total occurs jq parse error</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16639</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;jq expr `select(.key | endswith(&quot;.completed&quot;))` matches &quot;&amp;#42;.tasks.completed&quot; too. But the format of &quot;&amp;#42;.tasks.completed&quot; metrics is like bellow:&lt;/p&gt;

&lt;p&gt;&quot;QUERY.httpShardHandler.threadPool.httpShardExecutor.tasks.completed&quot;:16,&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/solr/blob/bf490f16b5e1acbbd4b01ec3aa1e5b035096716a/solr/prometheus-exporter/conf/solr-exporter-config.xml#L541&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/blob/bf490f16b5e1acbbd4b01ec3aa1e5b035096716a/solr/prometheus-exporter/conf/solr-exporter-config.xml#L541&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So, $object.value.count jq expr occurs jq parse error. I will fix this problem to add `select(.value | type==&quot;object&quot;)` filter to jq expr.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Note:&lt;/p&gt;

&lt;p&gt;I uses solr-exporter with -z parameter (as SolrCloud mode)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13521899">SOLR-16639</key>
            <summary>solr-exporter metrics node_thread_pool_completed_total occurs jq parse error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="houston">Houston Putman</assignee>
                                    <reporter username="nminami">Naoto Minami</reporter>
                        <labels>
                            <label>SolrCloud</label>
                    </labels>
                <created>Sun, 29 Jan 2023 05:21:51 +0000</created>
                <updated>Fri, 17 Oct 2025 20:05:35 +0000</updated>
                            <resolved>Tue, 14 Feb 2023 17:54:56 +0000</resolved>
                                    <version>10.0</version>
                                    <fixVersion>9.2</fixVersion>
                                    <component>contrib - prometheus-exporter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="17681682" author="nminami" created="Sun, 29 Jan 2023 05:45:30 +0000"  >&lt;p&gt;solr-exporter error log&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ERROR - 2023-01-28 18:11:55.401; org.apache.solr.prometheus.scraper.SolrScraper; Error apply JSON query=(.metrics[&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.node&quot;&lt;/span&gt;] | to_entries | .[] | select((.key | contains(&lt;span class=&quot;code-quote&quot;&gt;&quot;.threadPool.&quot;&lt;/span&gt;))) | select((.key | endswith(&lt;span class=&quot;code-quote&quot;&gt;&quot;.completed&quot;&lt;/span&gt;))) as $object | $object.key | split(&lt;span class=&quot;code-quote&quot;&gt;&quot;.&quot;&lt;/span&gt;) as $key_items | $key_items | length as $label_len | $key_items[0] as $category | &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ($label_len &amp;gt;= 5) then $key_items[1] &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;&quot; end as $handler | &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ($label_len &amp;gt;= 5) then $key_items[3] &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; $key_items[2] end as $executor | $object.value.count as $value | {(&quot;&lt;/span&gt;name&lt;span class=&quot;code-quote&quot;&gt;&quot;): &quot;&lt;/span&gt;solr_metrics_node_thread_pool_completed_total&lt;span class=&quot;code-quote&quot;&gt;&quot;,(&quot;&lt;/span&gt;type&lt;span class=&quot;code-quote&quot;&gt;&quot;): &quot;&lt;/span&gt;COUNTER&lt;span class=&quot;code-quote&quot;&gt;&quot;,(&quot;&lt;/span&gt;help&lt;span class=&quot;code-quote&quot;&gt;&quot;): &quot;&lt;/span&gt;See following URL: https:&lt;span class=&quot;code-comment&quot;&gt;//solr.apache.org/guide/solr/latest/deployment-guide/metrics-reporting.html&lt;span class=&quot;code-quote&quot;&gt;&quot;,(&quot;&lt;/span&gt;label_names&lt;span class=&quot;code-quote&quot;&gt;&quot;): [(&quot;&lt;/span&gt;category&lt;span class=&quot;code-quote&quot;&gt;&quot;, &quot;&lt;/span&gt;handler&lt;span class=&quot;code-quote&quot;&gt;&quot;, &quot;&lt;/span&gt;executor&lt;span class=&quot;code-quote&quot;&gt;&quot;)],(&quot;&lt;/span&gt;label_values&lt;span class=&quot;code-quote&quot;&gt;&quot;): [($category, $handler, $executor)],(&quot;&lt;/span&gt;value&lt;span class=&quot;code-quote&quot;&gt;&quot;): $value}) to result =&amp;gt; net.thisptr.jackson.jq.exception.JsonQueryException: Cannot index number with string &quot;&lt;/span&gt;count&quot; &lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17688641" author="jira-bot" created="Tue, 14 Feb 2023 17:47:30 +0000"  >&lt;p&gt;Commit 8decf1d356c556007c5a5d425e6567a1cf55d3ab in solr&apos;s branch refs/heads/main from Naoto MINAMI&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=8decf1d356c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=8decf1d356c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16639&quot; title=&quot;solr-exporter metrics node_thread_pool_completed_total occurs jq parse error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16639&quot;&gt;&lt;del&gt;SOLR-16639&lt;/del&gt;&lt;/a&gt;: Fix jq parse error of solr-exporter metrics node_thread_pool_completed_total (#1317)&lt;/p&gt;
</comment>
                            <comment id="17688643" author="jira-bot" created="Tue, 14 Feb 2023 17:54:25 +0000"  >&lt;p&gt;Commit 3cf5e885f5c49c0b87de4e9396f94ad2b11c9c13 in solr&apos;s branch refs/heads/branch_9x from Naoto MINAMI&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=3cf5e885f5c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=3cf5e885f5c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16639&quot; title=&quot;solr-exporter metrics node_thread_pool_completed_total occurs jq parse error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16639&quot;&gt;&lt;del&gt;SOLR-16639&lt;/del&gt;&lt;/a&gt;: Fix jq parse error of solr-exporter metrics node_thread_pool_completed_total (#1317)&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 8decf1d356c556007c5a5d425e6567a1cf55d3ab)&lt;/p&gt;</comment>
                            <comment id="17688644" author="houston" created="Tue, 14 Feb 2023 17:54:56 +0000"  >&lt;p&gt;Thanks for finding this and making a fix &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nminami&quot; class=&quot;user-hover&quot; rel=&quot;nminami&quot;&gt;nminami&lt;/a&gt; !&lt;/p&gt;</comment>
                            <comment id="17691377" author="jira-bot" created="Tue, 21 Feb 2023 04:54:14 +0000"  >&lt;p&gt;Commit 3cf5e885f5c49c0b87de4e9396f94ad2b11c9c13 in solr&apos;s branch refs/heads/jira/&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16636&quot; title=&quot;ZkStateReader.waitForState should not register a watch if state already matches predicate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16636&quot;&gt;&lt;del&gt;SOLR-16636&lt;/del&gt;&lt;/a&gt;_revert from Naoto MINAMI&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=3cf5e885f5c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=3cf5e885f5c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16639&quot; title=&quot;solr-exporter metrics node_thread_pool_completed_total occurs jq parse error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16639&quot;&gt;&lt;del&gt;SOLR-16639&lt;/del&gt;&lt;/a&gt;: Fix jq parse error of solr-exporter metrics node_thread_pool_completed_total (#1317)&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 8decf1d356c556007c5a5d425e6567a1cf55d3ab)&lt;/p&gt;</comment>
                            <comment id="17705599" author="houston" created="Mon, 27 Mar 2023 18:04:23 +0000"  >&lt;p&gt;Closing after the 9.2.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1fgbc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>