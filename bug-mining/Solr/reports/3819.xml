<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:31:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-12061] NPE in V1 to V2 API Mapper when using substitutions</title>
                <link>https://issues.apache.org/jira/browse/SOLR-12061</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Reproducing master seed from &lt;a href=&quot;https://jenkins.thetaphi.de/job/Lucene-Solr-master-Windows/7204/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jenkins.thetaphi.de/job/Lucene-Solr-master-Windows/7204/&lt;/a&gt; (reproduces for me on LInux):&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4] Suite: org.apache.solr.client.solrj.request.TestV1toV2ApiMapper
   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=TestV1toV2ApiMapper -Dtests.method=testCommands -Dtests.seed=8BD251EC0EE042E0 -Dtests.slow=true -Dtests.locale=sk-SK -Dtests.timezone=America/Araguaina -Dtests.asserts=true -Dtests.file.encoding=Cp1252
   [junit4] ERROR   0.03s J0 | TestV1toV2ApiMapper.testCommands &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.RuntimeException: null value is not valid for name
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([8BD251EC0EE042E0:AAEE981464DAA284]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.request.V1toV2ApiMapper$ActionInfo.lambda$null$2(V1toV2ApiMapper.java:108)
   [junit4]    &amp;gt; 	at org.apache.solr.common.MapWriter.toMap(MapWriter.java:42)
   [junit4]    &amp;gt; 	at org.apache.solr.common.MapWriter$1.put(MapWriter.java:45)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.request.V1toV2ApiMapper$ActionInfo.lambda$serializeToV2Format$3(V1toV2ApiMapper.java:98)
   [junit4]    &amp;gt; 	at org.apache.solr.common.MapWriter.toMap(MapWriter.java:42)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.request.V1toV2ApiMapper$ActionInfo.convert(V1toV2ApiMapper.java:87)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.request.V1toV2ApiMapper.convert(V1toV2ApiMapper.java:137)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.request.TestV1toV2ApiMapper.testCommands(TestV1toV2ApiMapper.java:55)
   [junit4]    &amp;gt; 	at java.lang.Thread.run(Thread.java:748)
   [junit4]   2&amp;gt; NOTE: test params are: codec=Asserting(Lucene70): {}, docValues:{}, maxPointsInLeafNode=1930, maxMBSortInHeap=5.7539348379000055, sim=Asserting(org.apache.lucene.search.similarities.AssertingSimilarity@1313219), locale=sk-SK, timezone=America/Araguaina
   [junit4]   2&amp;gt; NOTE: Windows 10 10.0 x86/Oracle Corporation 1.8.0_144 (32-bit)/cpus=3,threads=1,free=103812072,total=282828800
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13142860">SOLR-12061</key>
            <summary>NPE in V1 to V2 API Mapper when using substitutions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tflobbe">Tomas Eduardo Fernandez Lobbe</assignee>
                                    <reporter username="sarowe">Steven Rowe</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Mar 2018 14:10:02 +0000</created>
                <updated>Wed, 2 Oct 2019 17:30:27 +0000</updated>
                            <resolved>Wed, 7 Mar 2018 19:01:58 +0000</resolved>
                                                    <fixVersion>7.3</fixVersion>
                    <fixVersion>8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16387855" author="steve_rowe" created="Tue, 6 Mar 2018 14:27:42 +0000"  >&lt;p&gt;&lt;tt&gt;git bisect&lt;/tt&gt; says commit &lt;tt&gt;c1a44251fe&lt;/tt&gt; on &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11960&quot; title=&quot;Add collection level properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11960&quot;&gt;&lt;del&gt;SOLR-11960&lt;/del&gt;&lt;/a&gt; is where this started happening.&lt;/p&gt;</comment>
                            <comment id="16388240" author="tomasflobbe" created="Tue, 6 Mar 2018 18:13:53 +0000"  >&lt;p&gt;It looks like I broke this test with the latest change I did in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11960&quot; title=&quot;Add collection level properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11960&quot;&gt;&lt;del&gt;SOLR-11960&lt;/del&gt;&lt;/a&gt;. I&apos;ll comment our the failing part until I have a definitive fix&lt;/p&gt;</comment>
                            <comment id="16388441" author="tomasflobbe" created="Tue, 6 Mar 2018 20:04:47 +0000"  >&lt;p&gt;I think this is actually a bug in the API Mapping code that was there before. I believe we need this change in &lt;tt&gt;V1toV2ApiMapper.serializeToV2Format&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
           &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; substitute = meta.getReverseParamSubstitute(key);
           &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; idx = template.variables.indexOf(substitute);
           &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (idx &amp;gt; -1) {
-            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; val = params.get(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.valueOf(substitute));
+            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; val = params.get(key);
             &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (val == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; value is not valid &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &quot;&lt;/span&gt; + key);
             list[idx] = val;
             &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16388745" author="tomasflobbe" created="Tue, 6 Mar 2018 23:52:59 +0000"  >&lt;p&gt;Does my change make sense to you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt;? You know this code better than I do&lt;/p&gt;</comment>
                            <comment id="16389136" author="noble.paul" created="Wed, 7 Mar 2018 06:56:29 +0000"  >&lt;p&gt;I don&apos;t think it is a fix. How can I reproduce this? I can fix it myself&lt;/p&gt;</comment>
                            <comment id="16389199" author="dweiss" created="Wed, 7 Mar 2018 07:47:49 +0000"  >&lt;p&gt;Steve listed the whole repro line, it&apos;s typically part of the failure message. The seed is embedded in exceptions.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
NOTE: reproduce with: ant test  -Dtestcase=TestV1toV2ApiMapper -Dtests.method=testCommands -Dtests.seed=8BD251EC0EE042E0 -Dtests.slow=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.locale=sk-SK -Dtests.timezone=America/Araguaina -Dtests.asserts=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.file.encoding=Cp1252
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16389456" author="noble.paul" created="Wed, 7 Mar 2018 12:00:39 +0000"  >&lt;p&gt;Of course I tried that. I could not reproduce it&lt;/p&gt;</comment>
                            <comment id="16389529" author="dweiss" created="Wed, 7 Mar 2018 13:12:36 +0000"  >&lt;p&gt;I can reproduce it on Linux and Windows. Same exception as reported by Steve.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
git checkout 4bdc99a465f830c5fe71abc2833327b9c27b221c
git clean -xfd .
cd solr/solrj
ant test  -Dtestcase=TestV1toV2ApiMapper -Dtests.method=testCommands -Dtests.seed=8BD251EC0EE042E0 -Dtests.slow=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.locale=sk-SK -Dtests.timezone=America/Araguaina -Dtests.asserts=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.file.encoding=Cp1252
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16389575" author="noble.paul" created="Wed, 7 Mar 2018 13:59:08 +0000"  >&lt;p&gt;sorry, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tflobbe&quot; class=&quot;user-hover&quot; rel=&quot;tflobbe&quot;&gt;tflobbe&lt;/a&gt;. This fix is right&lt;/p&gt;</comment>
                            <comment id="16389865" author="tomasflobbe" created="Wed, 7 Mar 2018 17:41:21 +0000"  >&lt;p&gt;Thanks. I&apos;ll commit this shortly&lt;/p&gt;</comment>
                            <comment id="16390035" author="jira-bot" created="Wed, 7 Mar 2018 18:59:28 +0000"  >&lt;p&gt;Commit 277dd050869d458a370fb7adb837a035e091b89f in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tflobbe&quot; class=&quot;user-hover&quot; rel=&quot;tflobbe&quot;&gt;tflobbe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=277dd05&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=277dd05&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12061&quot; title=&quot;NPE in V1 to V2 API Mapper when using substitutions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12061&quot;&gt;&lt;del&gt;SOLR-12061&lt;/del&gt;&lt;/a&gt;: Fix substitution bug in API V1 to V2 migration&lt;/p&gt;</comment>
                            <comment id="16390036" author="jira-bot" created="Wed, 7 Mar 2018 19:00:00 +0000"  >&lt;p&gt;Commit 132fa989bf36daab4e4613d4d464b8e562fcc02f in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tflobbe&quot; class=&quot;user-hover&quot; rel=&quot;tflobbe&quot;&gt;tflobbe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=132fa98&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=132fa98&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12061&quot; title=&quot;NPE in V1 to V2 API Mapper when using substitutions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12061&quot;&gt;&lt;del&gt;SOLR-12061&lt;/del&gt;&lt;/a&gt;: Fix substitution bug in API V1 to V2 migration&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13137311">SOLR-11960</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12913254" name="SOLR-12061.patch" size="5116" author="tflobbe" created="Tue, 6 Mar 2018 20:06:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 36 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qxcv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>