<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:46:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-5775] Disable constantly failing solr tests</title>
                <link>https://issues.apache.org/jira/browse/SOLR-5775</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Currently, solr tests are failing 90%+ of the time. We&apos;ve been through this before many times, the argument is always that someone is looking at the failures and knows which ones are bad.&lt;/p&gt;

&lt;p&gt;This argument is a lie. Nobody is watching these failures, or DistributedQueryComponentOptimizationTest would not have failed repeatedly for two straight days when the fix was trivial (I fixed this last night: &lt;a href=&quot;http://svn.apache.org/r1571930&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1571930&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;Its frustrating to me as a committer, solr tests &lt;b&gt;NEVER&lt;/b&gt; pass on my machine, no matter how many times I try. How can i possibly commit something without knowing i am making the situation even worse?&lt;/p&gt;

&lt;p&gt;This is all a big problem for developers, release managers, even users of the project. The test suite should pass.&lt;/p&gt;

&lt;p&gt;The old argument that &quot;solr tests are allowed to fail&quot; is no longer valid. I will disable all constantly failing tests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12697355">SOLR-5775</key>
            <summary>Disable constantly failing solr tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="11">Done</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Feb 2014 12:32:33 +0000</created>
                <updated>Fri, 30 Mar 2018 02:10:55 +0000</updated>
                            <resolved>Fri, 30 Mar 2018 02:09:56 +0000</resolved>
                                                                    <component>Build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="13912820" author="rcmuir" created="Wed, 26 Feb 2014 12:36:46 +0000"  >&lt;p&gt;Also a bad thing is that nobody is preventing the addition of such bad tests.&lt;/p&gt;

&lt;p&gt;I will be monitoring the situation closely from here on out. I will officially -1 any commits that add unreliable tests!&lt;/p&gt;</comment>
                            <comment id="13912823" author="thetaphi" created="Wed, 26 Feb 2014 12:40:05 +0000"  >&lt;p&gt;We should add the @BadApples annotation. Then everybody can run them and fix them, if he wants.&lt;/p&gt;</comment>
                            <comment id="13912825" author="mikemccand" created="Wed, 26 Feb 2014 12:41:35 +0000"  >&lt;p&gt;+1, intermittently failing tests are no better than no tests.&lt;/p&gt;

&lt;p&gt;I also really don&apos;t like that Solr test failures mask other failures, e.g. the simple missing javadocs recently in the facets package was undiscovered because Solr test failures prevented the build from getting to javadocs linting.&lt;/p&gt;</comment>
                            <comment id="13912835" author="dweiss" created="Wed, 26 Feb 2014 12:50:08 +0000"  >&lt;p&gt;Eh... I can feel the heated debate coming in again... My opinion has not changed &amp;#8211; I think a test failure should be a red flag exception, not a norm. And I believe tests that repeatedly fail should be disabled/ put into bad apples (with a JIRA issue marking the problem).&lt;/p&gt;</comment>
                            <comment id="13912838" author="jira-bot" created="Wed, 26 Feb 2014 12:55:23 +0000"  >&lt;p&gt;Commit 1572036 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rcmuir&quot; class=&quot;user-hover&quot; rel=&quot;rcmuir&quot;&gt;rcmuir&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1572036&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1572036&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5775&quot; title=&quot;Disable constantly failing solr tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5775&quot;&gt;&lt;del&gt;SOLR-5775&lt;/del&gt;&lt;/a&gt;: disable constantly failing solr tests&lt;/p&gt;</comment>
                            <comment id="13912840" author="jira-bot" created="Wed, 26 Feb 2014 12:55:57 +0000"  >&lt;p&gt;Commit 1572037 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rcmuir&quot; class=&quot;user-hover&quot; rel=&quot;rcmuir&quot;&gt;rcmuir&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1572037&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1572037&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5775&quot; title=&quot;Disable constantly failing solr tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5775&quot;&gt;&lt;del&gt;SOLR-5775&lt;/del&gt;&lt;/a&gt;: disable constantly failing solr tests&lt;/p&gt;</comment>
                            <comment id="13912856" author="jira-bot" created="Wed, 26 Feb 2014 13:07:41 +0000"  >&lt;p&gt;Commit 1572040 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rcmuir&quot; class=&quot;user-hover&quot; rel=&quot;rcmuir&quot;&gt;rcmuir&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1572040&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1572040&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5775&quot; title=&quot;Disable constantly failing solr tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5775&quot;&gt;&lt;del&gt;SOLR-5775&lt;/del&gt;&lt;/a&gt;: add badapple (fails locally constantly)&lt;/p&gt;</comment>
                            <comment id="13912857" author="shalinmangar" created="Wed, 26 Feb 2014 13:08:56 +0000"  >&lt;blockquote&gt;&lt;p&gt;Nobody is watching these failures, or DistributedQueryComponentOptimizationTest would not have failed repeatedly for two straight days when the fix was trivial (I fixed this last night: &lt;a href=&quot;http://svn.apache.org/r1571930&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1571930&lt;/a&gt;)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I am responsible for this. I saw this on policeman jenkins and replied on the list that I&apos;m looking at it. The fix may be trivial for you but it wasn&apos;t for me because I don&apos;t know enough about the codecs. Thank you for fixing it.&lt;/p&gt;</comment>
                            <comment id="13912863" author="rcmuir" created="Wed, 26 Feb 2014 13:13:09 +0000"  >&lt;p&gt;Shalin: I didn&apos;t mean to fingerpoint, i&apos;m sorry. I guess the combination of this, and lost coverage in lucene (e.g. javadocs checks not running), and the fact that &apos;ant test&apos; has not worked for me locally in months was enough for me to raise the issue.&lt;/p&gt;

&lt;p&gt;Honestly, its like 6 or 7 bad apples here. the situation seems fixable, but our &apos;steady state&apos; needs to be BUILD SUCCESSFUL.&lt;/p&gt;</comment>
                            <comment id="13912884" author="simonw" created="Wed, 26 Feb 2014 13:32:49 +0000"  >&lt;p&gt;I wrote a mail about this during building the RC for 4.7 and I share roberts concerns. I know that is hard to get distributed tests to pass but it should be our main objective to get things stable. I think it&apos;s mandatory for getting new contributors in as well as for existing contributors to develop code. For me as a RM it was a nightmare really to realize that a release build skips all the solr tests because if we would run them it would mean the RC would never happen at least on my machine that was the case when I enabled them. It&apos;s super important to have a build that passes otherwise you never know if you broke something. If we have a test that sometimes fails then try to fix it or try to catch the condition under that it is failing and let it pass so that we can see if there is a difference in the failure. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;..but our &apos;steady state&apos; needs to be BUILD SUCCESSFUL.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I could not agree more&lt;/p&gt;</comment>
                            <comment id="13912902" author="shalinmangar" created="Wed, 26 Feb 2014 13:48:14 +0000"  >&lt;p&gt;It&apos;s alright Robert. I agree that our steady state builds need to pass and we shouldn&apos;t release another version this way again. Things have got worse lately due to the SSL related timeout problems but there are other issues as well. I&apos;ll also try to figure out some of these failures.&lt;/p&gt;</comment>
                            <comment id="13912917" author="thetaphi" created="Wed, 26 Feb 2014 13:58:36 +0000"  >&lt;p&gt;FYI: If you want to fix those tests, you can use &lt;tt&gt;-Dtests.badapples=true&lt;/tt&gt; to run them. This is why Robert used this annotation instead of &lt;tt&gt;@Ignore&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="13912930" author="rcmuir" created="Wed, 26 Feb 2014 14:02:03 +0000"  >&lt;p&gt;I would actually like to enable solr tests for the smoketester as well. I think its really bad this is disabled, as there could be a bad problem in a release candidate and only manual verification really finds it. Lots of people smoketest on different machines and platforms and I think this has value.&lt;/p&gt;

&lt;p&gt;I know this all sounds like a high bar, but I think if we stay on top of this, it will make it much easier on everyone. In this case it really is just a few bad apples to fix!&lt;/p&gt;</comment>
                            <comment id="13912934" author="jira-bot" created="Wed, 26 Feb 2014 14:03:52 +0000"  >&lt;p&gt;Commit 1572054 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rcmuir&quot; class=&quot;user-hover&quot; rel=&quot;rcmuir&quot;&gt;rcmuir&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1572054&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1572054&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5775&quot; title=&quot;Disable constantly failing solr tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5775&quot;&gt;&lt;del&gt;SOLR-5775&lt;/del&gt;&lt;/a&gt;: enable solr tests in the smoketester&lt;/p&gt;</comment>
                            <comment id="13912936" author="jira-bot" created="Wed, 26 Feb 2014 14:04:31 +0000"  >&lt;p&gt;Commit 1572055 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rcmuir&quot; class=&quot;user-hover&quot; rel=&quot;rcmuir&quot;&gt;rcmuir&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1572055&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1572055&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5775&quot; title=&quot;Disable constantly failing solr tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5775&quot;&gt;&lt;del&gt;SOLR-5775&lt;/del&gt;&lt;/a&gt;: enable solr tests in the smoketester&lt;/p&gt;</comment>
                            <comment id="13912937" author="jira-bot" created="Wed, 26 Feb 2014 14:05:16 +0000"  >&lt;p&gt;Commit 1572056 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rcmuir&quot; class=&quot;user-hover&quot; rel=&quot;rcmuir&quot;&gt;rcmuir&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1572056&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1572056&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5775&quot; title=&quot;Disable constantly failing solr tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5775&quot;&gt;&lt;del&gt;SOLR-5775&lt;/del&gt;&lt;/a&gt;: fix outdated comment&lt;/p&gt;</comment>
                            <comment id="13912940" author="jira-bot" created="Wed, 26 Feb 2014 14:06:27 +0000"  >&lt;p&gt;Commit 1572058 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rcmuir&quot; class=&quot;user-hover&quot; rel=&quot;rcmuir&quot;&gt;rcmuir&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1572058&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1572058&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5775&quot; title=&quot;Disable constantly failing solr tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5775&quot;&gt;&lt;del&gt;SOLR-5775&lt;/del&gt;&lt;/a&gt;: remove outdated comment, also enable java6 tests&lt;/p&gt;</comment>
                            <comment id="13913033" author="markrmiller@gmail.com" created="Wed, 26 Feb 2014 15:42:23 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Currently, solr tests are failing 90%+ of the time. We&apos;ve been through this before many times, the argument is always that someone is looking at the failures and knows which ones are bad.
This argument is a lie. Nobody is watching these failures, or DistributedQueryComponentOptimizationTest would not have failed repeatedly for two straight days when the fix was trivial (I fixed this last night: http://svn.apache.org/r1571930)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I made an argument like that for release - because it&apos;s true. I read every email that comes in. The argument was that I had a handle on where things were for a release, not that I could personally jump on any failure right away. Everybody that works on Solr should help jump in if they are concerned.&lt;/p&gt;

&lt;p&gt;Anyway, I have not looked yet, but depending on what test coverage is lost, I would -1 the change.&lt;/p&gt;

&lt;p&gt;If the fix was trivial, why didn&apos;t &lt;b&gt;you&lt;/b&gt; just fix it? Who was supposed to fix it instead of you?&lt;/p&gt;</comment>
                            <comment id="13913037" author="markrmiller@gmail.com" created="Wed, 26 Feb 2014 15:43:30 +0000"  >&lt;blockquote&gt;&lt;p&gt;If the fix was trivial, why didn&apos;t you just fix it? Who was supposed to fix it instead of you?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s not a real question by the way - I know you did fix it. &lt;/p&gt;</comment>
                            <comment id="13913112" author="rcmuir" created="Wed, 26 Feb 2014 16:35:23 +0000"  >&lt;p&gt;I dont think any test coverage is lost. In an open source project, if nobody can reliably tell if a test failure is &quot;ok&quot; or not (except maybe a few people), then the test coverage is 0%. Furthermore, lucene&apos;s coverage is suffering because of these bad apples: the recent javadocs failures are not really recent at all, its just that jenkins was failing so much in solr tests that it never got that far.&lt;/p&gt;

&lt;p&gt;When a test fails consistently: I think it needs to be disabled. I can&apos;t safely commit anything to the solr codebase because the tests fail every time on my machine: and I know its not unique to me, jenkins is completely red.&lt;/p&gt;</comment>
                            <comment id="13913117" author="markrmiller@gmail.com" created="Wed, 26 Feb 2014 16:39:01 +0000"  >&lt;p&gt;Almost none of these even had a JIRA issue. -1 on a wholesale JIRA to ignore whatever tests one person want&apos;s to canvas. A failing test should get a JIRA issue that describes the fail and each addressed individually.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;the fact that &apos;ant test&apos; has not worked for me locally in months was enough for me to raise the issue.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You should have simply raised that months ago by filing a JIRA issue for each of the tests that were preventing you from getting a clean run, or emailing the list and saying I can&apos;t get a clean run, or whatever. I don&apos;t think it&apos;s okay if a dev cannot get a clean run, but devs have to communicate that - it&apos;s different for everyone. I&apos;ve gotten clean runs 90% of the time for months. Then we could have worked on the issue. Considering most of the current fails are around slow tests under SSL, if you had brought it up months ago, sounds like it only would have been a test or two to look at.&lt;/p&gt;</comment>
                            <comment id="13913120" author="markrmiller@gmail.com" created="Wed, 26 Feb 2014 16:40:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;I can&apos;t safely commit anything to the solr codebase because the tests fail every time on my machine:&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ignoring the test with your head or code is the same - just as not safe in both cases.&lt;/p&gt;</comment>
                            <comment id="13913121" author="mikemccand" created="Wed, 26 Feb 2014 16:41:26 +0000"  >&lt;blockquote&gt;&lt;p&gt;I read every email that comes in. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I really appreciate all the hard work you put into the tests, Mark, but this is not a scalable way to run an open source project.&lt;/p&gt;

&lt;p&gt;Precious few people can look at a Solr test failure and &quot;know&quot; that this failure is OK and that other one is not, nor that it&apos;s OK to release / it isn&apos;t, etc.&lt;/p&gt;

&lt;p&gt;New contributors trying out a change and running tests will see these failures and not know whether their changed caused them or not.&lt;/p&gt;

&lt;p&gt;Maybe you derive some value / progress out of seeing all these bad apple test failures, but net/net I think it&apos;s doing far more damage to the project than helping it.&lt;/p&gt;</comment>
                            <comment id="13913122" author="rcmuir" created="Wed, 26 Feb 2014 16:41:29 +0000"  >&lt;p&gt;I don&apos;t think the onus is on me here: Its on the committer not to break the build.&lt;/p&gt;

&lt;p&gt;As I said, jenkins is completely red. Its not my machine.&lt;/p&gt;</comment>
                            <comment id="13913126" author="markrmiller@gmail.com" created="Wed, 26 Feb 2014 16:44:28 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Precious few people can look at a Solr test failure and &quot;know&quot; that this failure is OK and that other one is not, nor that it&apos;s OK to release / it isn&apos;t, etc.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Disabling tests does &lt;b&gt;nothing&lt;/b&gt; to address that. It&apos;s like closing your eyes and saying &quot;everythings okay&quot;. If those tests didn&apos;t run, it would be silly to release. We could have no confidence in the system.&lt;/p&gt;

&lt;p&gt;If someone is concerned, they should help with the tests.&lt;/p&gt;</comment>
                            <comment id="13913134" author="rcmuir" created="Wed, 26 Feb 2014 16:49:42 +0000"  >&lt;p&gt;Disabling the 6 or 7 bad apples so that we have a reliable test suite that passes is a definite improvement.&lt;/p&gt;</comment>
                            <comment id="13913147" author="markrmiller@gmail.com" created="Wed, 26 Feb 2014 16:56:02 +0000"  >&lt;p&gt;Not really - it&apos;s mostly just hiding a problem that you fixed when made suppress SSL work properly. That was the correct solution.&lt;/p&gt;

&lt;p&gt;I would have gotten around to it sooner, but I&apos;ve been sick and catching up on work.&lt;/p&gt;</comment>
                            <comment id="13913149" author="mikemccand" created="Wed, 26 Feb 2014 16:57:08 +0000"  >&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Precious few people can look at a Solr test failure and &quot;know&quot; that this failure is OK and that other one is not, nor that it&apos;s OK to release / it isn&apos;t, etc.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Disabling tests does nothing to address that. It&apos;s like closing your eyes and saying &quot;everythings okay&quot;. If those tests didn&apos;t run, it would be silly to release. We could have no confidence in the system.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Well, at release time, the RM could run all the bad apple tests, have you look at those failures, and then you decide if they are the &quot;OK bad apple failures&quot; or not?&lt;/p&gt;

&lt;p&gt;Again, this is a poor way to run an open source project (that only Mark can say that failure is OK and that other one is not), but it would at least still be progress over what we now have.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If someone is concerned, they should help with the tests.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If someone is concerned, they should help out in whatever way they are able, including what Rob did here: it is progress if we all can trust Solr&apos;s test suite.  Then, if a failure does occur, we know it&apos;s a &quot;real&quot; failure and not a &quot;bad apple failure that only Mark can look at to decide if it&apos;s real or not&quot;.&lt;/p&gt;</comment>
                            <comment id="13913163" author="markrmiller@gmail.com" created="Wed, 26 Feb 2014 17:04:15 +0000"  >&lt;p&gt;I&apos;m certainly not the only one that knows. Not many others that look at Solr tests and know Solr well are vocal is all. People that only focus on Lucene or sub sections of Solr of course will have a harder time. Or people that don&apos;t follow JIRA and the commit mail list.&lt;/p&gt;

&lt;p&gt;Running some tests only at release is a terrible idea. It will be almost impossible to track down what caused a problem without faster feedback.&lt;/p&gt;

&lt;p&gt;It&apos;s not that I am the only one that can say if a failure is real or not - I simply appear to be the only one interested in looking closely. It&apos;s not rocket science.&lt;/p&gt;

&lt;p&gt;Real help is important, not lazy help. These are not hard problems, they just take time and I have very little assistance.&lt;/p&gt;</comment>
                            <comment id="13913176" author="dsmiley" created="Wed, 26 Feb 2014 17:11:13 +0000"  >&lt;p&gt;I propose that we use &amp;#64;BadApples for the tests that fail &quot;too frequently&quot; right now, that we have a JIRA issue for each bad-apple separately, and furthermore that after &quot;ant test&quot; returns SUCCESSFUL, that it give a line by line listing of &amp;#64;BadApples that were not executed, along with a one-liner instruction on how to run just those tests.&lt;/p&gt;</comment>
                            <comment id="13913183" author="thetaphi" created="Wed, 26 Feb 2014 17:16:05 +0000"  >&lt;p&gt;Mark Miller: What is the problem with leaving the tests marked as @BadApples like Robert did? You can still run them, by giving the extra sysprop &lt;tt&gt;-Dtests.badapples=true&lt;/tt&gt;. I agree with Robert and Mike and many others here, that running the tests and failing &lt;b&gt;all&lt;/b&gt; builds is not a good idea.&lt;/p&gt;</comment>
                            <comment id="13913199" author="markrmiller@gmail.com" created="Wed, 26 Feb 2014 17:29:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt; - can you do me a favor and run the tests locally and tell me which fail?&lt;/p&gt;</comment>
                            <comment id="13913207" author="thetaphi" created="Wed, 26 Feb 2014 17:36:41 +0000"  >&lt;p&gt;In Windows?&lt;/p&gt;</comment>
                            <comment id="13913214" author="markrmiller@gmail.com" created="Wed, 26 Feb 2014 17:44:27 +0000"  >&lt;p&gt;On any machine you have...just tell me which tests won&apos;t currently pass for you.&lt;/p&gt;</comment>
                            <comment id="13913232" author="thetaphi" created="Wed, 26 Feb 2014 17:54:02 +0000"  >&lt;p&gt;First run:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;org.apache.solr.cloud.ShardSplitTest.testDistribSearch&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13913237" author="markrmiller@gmail.com" created="Wed, 26 Feb 2014 17:59:36 +0000"  >&lt;p&gt;Thanks - yeah, that&apos;s a somewhat infrequent fail for everyone. Robert did not bad apple it.&lt;/p&gt;

&lt;p&gt;I can&apos;t recall if there is a JIRA issue for it. Probably not something I can easily help with because I don&apos;t know the shard split code at all yet.&lt;/p&gt;

&lt;p&gt;Let me know if you see any others.&lt;/p&gt;</comment>
                            <comment id="13913272" author="mikemccand" created="Wed, 26 Feb 2014 18:26:53 +0000"  >&lt;p&gt;My first run passed!&lt;/p&gt;

&lt;p&gt;But second run:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=OverseerRolesTest -Dtests.method=testDistribSearch -Dtests.seed=4C3C1DD55A3EC277 -Dtests.slow=true -Dtests.locale=el_CY -Dtests.timezone=PRT -Dtests.file.encoding=UTF-8
   [junit4] ERROR    197s J1 | OverseerRolesTest.testDistribSearch &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: com.carrotsearch.randomizedtesting.UncaughtExceptionError: Captured an uncaught exception in thread: Thread[id=1018, name=Overseer-91320293463687174-127.0.0.1:39402_-n_0000000007, state=RUNNABLE, group=Overseer collection creation process.]
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([4C3C1DD55A3EC277:CDDA93CD2D61A24B]:0)
   [junit4]    &amp;gt; Caused by: org.apache.solr.common.cloud.ZooKeeperException: 
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([4C3C1DD55A3EC277]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.OverseerCollectionProcessor.run(OverseerCollectionProcessor.java:213)
   [junit4]    &amp;gt; 	at java.lang.Thread.run(Thread.java:724)
   [junit4]    &amp;gt; Caused by: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode for /overseer/collection-queue-work/qn-0000000004
   [junit4]    &amp;gt; 	at org.apache.zookeeper.KeeperException.create(KeeperException.java:111)
   [junit4]    &amp;gt; 	at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)
   [junit4]    &amp;gt; 	at org.apache.zookeeper.ZooKeeper.getData(ZooKeeper.java:1151)
   [junit4]    &amp;gt; 	at org.apache.solr.common.cloud.SolrZkClient$7.execute(SolrZkClient.java:274)
   [junit4]    &amp;gt; 	at org.apache.solr.common.cloud.SolrZkClient$7.execute(SolrZkClient.java:271)
   [junit4]    &amp;gt; 	at org.apache.solr.common.cloud.ZkCmdExecutor.retryOperation(ZkCmdExecutor.java:73)
   [junit4]    &amp;gt; 	at org.apache.solr.common.cloud.SolrZkClient.getData(SolrZkClient.java:271)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.DistributedQueue.remove(DistributedQueue.java:192)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.OverseerCollectionProcessor.run(OverseerCollectionProcessor.java:204)
   [junit4]    &amp;gt; 	... 1 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13913286" author="shalinmangar" created="Wed, 26 Feb 2014 18:37:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;org.apache.solr.cloud.ShardSplitTest.testDistribSearch&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There is &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5309&quot; title=&quot;Investigate ShardSplitTest failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5309&quot;&gt;&lt;del&gt;SOLR-5309&lt;/del&gt;&lt;/a&gt; which has been on my plate for quite some time. It is really hard to reproduce but I have an idea about why it happens but I haven&apos;t been able to get to the root cause yet.&lt;/p&gt;</comment>
                            <comment id="13913288" author="markrmiller@gmail.com" created="Wed, 26 Feb 2014 18:38:54 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;My first run passed!
But second run:
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Hmm, I though Robert had bad appled that one. Must have been the other Overseer test.&lt;/p&gt;

&lt;p&gt;What you are seeing is two Overseers running at the same time. I&apos;m not happy at all with that implementation.&lt;/p&gt;

&lt;p&gt;What you are seeing is not a flakey test but a flakey implementation. &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5476&quot; title=&quot;Overseer Role for nodes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5476&quot;&gt;&lt;del&gt;SOLR-5476&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13913324" author="thetaphi" created="Wed, 26 Feb 2014 19:00:31 +0000"  >&lt;p&gt;For me the other Overseer test failed in a recent run:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;org.apache.solr.cloud.OverseerTest.testOverseerFailure&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Up to now, I had only one successful run!&lt;/p&gt;</comment>
                            <comment id="13913350" author="markrmiller@gmail.com" created="Wed, 26 Feb 2014 19:12:15 +0000"  >&lt;p&gt;That might be &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5596&quot; title=&quot;OverseerTest.testOverseerFailure - leader node already exists.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5596&quot;&gt;&lt;del&gt;SOLR-5596&lt;/del&gt;&lt;/a&gt;? Depends on the fail. To note: this is also not one that Robert badappled. It does fail occasionally - I&apos;ve recently been trying to raise some polls in it, but it&apos;s hard to tell if its that, or the mock implementations, or the real deal. It&apos;s been on my list to dig into, but has not gotten any priority yet.&lt;/p&gt;

&lt;p&gt;Sami did all the original work on the Overseer and these tests and I guess I&apos;ve kind of inherited them but I&apos;m still not fully up to speed on them.&lt;/p&gt;</comment>
                            <comment id="13913696" author="markrmiller@gmail.com" created="Wed, 26 Feb 2014 23:11:49 +0000"  >&lt;p&gt;Anyone following - reporting your failing tests would be useful.&lt;/p&gt;

&lt;p&gt;I&apos;m certainly open to @BadApple depending on the test.&lt;/p&gt;

&lt;p&gt;Some of them need to be fixed instead - the loss of coverage is easily worse than infrequent failing tests that can probably be addressed.&lt;/p&gt;

&lt;p&gt;Some of them, like the ShardSplitTest that is usually infrequent these days, should probably print out the JIRA issue in the fail.&lt;/p&gt;

&lt;p&gt;I&apos;m happy to discuss each of them and take some course of action individually. If people want to contribute towards that great, and thanks to everyone that has so far, but I can&apos;t allow wholesale disabling of tests.&lt;/p&gt;

&lt;p&gt;The ones Robert was looking at were not these infrequent fails though - they were more common fails due to both the performance of SSL and a bug in disabling it for tests. They are not really in the same category and those issues have working workarounds now.&lt;/p&gt;

</comment>
                            <comment id="13913714" author="markrmiller@gmail.com" created="Wed, 26 Feb 2014 23:19:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;They are not really in the same category and those issues&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The exception being: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5735&quot; title=&quot;ChaosMonkey test timeouts.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5735&quot;&gt;SOLR-5735&lt;/a&gt;. That could be a nasty issue and needs investigation asap.&lt;/p&gt;</comment>
                            <comment id="16420068" author="steve_rowe" created="Fri, 30 Mar 2018 02:09:56 +0000"  >&lt;p&gt;Resolving in favor of modern efforts at &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12037&quot; title=&quot;Reduce noise from flakey tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12037&quot;&gt;SOLR-12037&lt;/a&gt; (n&#233;e SOLR-12016) and &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12028&quot; title=&quot;BadApple and AwaitsFix annotations usage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12028&quot;&gt;&lt;del&gt;SOLR-12028&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="13141112">SOLR-12037</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13140766">SOLR-12028</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>375829</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 33 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1srhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>376125</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>