<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:55:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4702] Velocity templates not rendering spellcheck suggestions correctly</title>
                <link>https://issues.apache.org/jira/browse/SOLR-4702</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The spellcheck links, AKA &quot;Did you mean&quot;, aren&apos;t rendered correctly.&lt;/p&gt;

&lt;p&gt;Instead of just having the corrected words, they have some .toString gibberish because the object being serialized is too high up in the tree.&lt;/p&gt;

&lt;p&gt;This breaks both the link text displayed to the user, and the href used for the anchor tag.&lt;/p&gt;

&lt;p&gt;Example:&lt;br/&gt;
Search for &quot;electronicss OR monitor&quot; and you get:&lt;br/&gt;
Did you mean {collationQuery=electronics OR monitor,hits=14,misspellingsAndCorrections={electronicss=electronics,monitor=monitor}}?&lt;/p&gt;

&lt;p&gt;But you should just see:&lt;br/&gt;
Did you mean electronics OR monitor?   (with hyperlinked &quot;electronics OR monitor&quot;)&lt;/p&gt;

&lt;p&gt;The actual query submitted by those links is similarly broken.  Possibly the templates were developed before collation was added and/or enabled by default.&lt;/p&gt;

&lt;p&gt;To see this bug at all with the example configs and docs you&apos;ll need to have applied &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4680&quot; title=&quot;Spellcheck broken with default config&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4680&quot;&gt;&lt;del&gt;SOLR-4680&lt;/del&gt;&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4681&quot; title=&quot;Add spellcheck to default /select handler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4681&quot;&gt;&lt;del&gt;SOLR-4681&lt;/del&gt;&lt;/a&gt; against 4.2 or trunk.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12642144">SOLR-4702</key>
            <summary>Velocity templates not rendering spellcheck suggestions correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ehatcher">Erik Hatcher</assignee>
                                    <reporter username="mbennett">Mark Bennett</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Apr 2013 21:55:29 +0000</created>
                <updated>Mon, 9 May 2016 18:51:15 +0000</updated>
                            <resolved>Wed, 6 Aug 2014 01:28:23 +0000</resolved>
                                    <version>4.2</version>
                                    <fixVersion>4.3</fixVersion>
                    <fixVersion>4.10</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>contrib - Velocity</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13629449" author="mbennett" created="Thu, 11 Apr 2013 22:00:08 +0000"  >&lt;p&gt;Fixes &quot;Did you mean&quot; spellcheck logic to use proper collation elements.&lt;/p&gt;

&lt;p&gt;Also breaks out that logic into a new template did_you_mean.vm, and reformats the code to make it a bit easier to read.&lt;/p&gt;</comment>
                            <comment id="13630429" author="ehatcher" created="Fri, 12 Apr 2013 18:16:19 +0000"  >&lt;p&gt;Mark - here&apos;s an updated patch that simplifies a bit of the Velocity stuff, hopefully without breaking anything.&lt;/p&gt;</comment>
                            <comment id="13630433" author="ehatcher" created="Fri, 12 Apr 2013 18:17:57 +0000"  >&lt;p&gt;Ideally we&apos;d have tests that check that the example app works where we could codify expectations from the example app to make sure things like this don&apos;t break as components/internals change.  Thoughts on ways to go about that?  Selenium tests?  Or somehow do this with JUnit?   Do we still have tests that drive from the example configuration?&lt;/p&gt;</comment>
                            <comment id="13630466" author="ehatcher" created="Fri, 12 Apr 2013 18:44:09 +0000"  >&lt;p&gt;Here&apos;s an update that fixes the reference to the no longer used textSpell field type and uses text_general on the text field instead.  If the queryAnalyzerFieldType specified field type doesn&apos;t exist, it uses the WhitespaceAnalyzer so it still worked without an error.&lt;/p&gt;</comment>
                            <comment id="13630494" author="ehatcher" created="Fri, 12 Apr 2013 19:02:14 +0000"  >&lt;p&gt;Committed this to both 4x (r1467413) and trunk (r1467416).&lt;/p&gt;

&lt;p&gt;Mark - let me know if there&apos;s anything else needed here.&lt;/p&gt;</comment>
                            <comment id="13632118" author="mbennett" created="Mon, 15 Apr 2013 20:14:04 +0000"  >&lt;p&gt;Hi Erik,&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;

&lt;p&gt;Two options we might consider:&lt;br/&gt;
1: I didn&apos;t see a for loop, and in some cases there could be multiple collations?&lt;br/&gt;
2: When debugging, seeing the raw suggestions, prior to collation filtering, can be nice.  Though I&apos;m not sure if that&apos;s a good fit for these templates or not.  If we come back and add more options, maybe a &quot;showRawSpellingSuggestions=true|FALSE&quot; might be nice.&lt;/p&gt;</comment>
                            <comment id="14087073" author="jira-bot" created="Wed, 6 Aug 2014 01:17:08 +0000"  >&lt;p&gt;Commit 1616073 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ehatcher&quot; class=&quot;user-hover&quot; rel=&quot;ehatcher&quot;&gt;ehatcher&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1616073&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1616073&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4702&quot; title=&quot;Velocity templates not rendering spellcheck suggestions correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4702&quot;&gt;&lt;del&gt;SOLR-4702&lt;/del&gt;&lt;/a&gt;: Added support for multiple spellcheck collations to /browse UI.&lt;/p&gt;</comment>
                            <comment id="14087075" author="jira-bot" created="Wed, 6 Aug 2014 01:19:18 +0000"  >&lt;p&gt;Commit 1616074 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ehatcher&quot; class=&quot;user-hover&quot; rel=&quot;ehatcher&quot;&gt;ehatcher&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1616074&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1616074&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4702&quot; title=&quot;Velocity templates not rendering spellcheck suggestions correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4702&quot;&gt;&lt;del&gt;SOLR-4702&lt;/del&gt;&lt;/a&gt;: Added support for multiple spellcheck collations to /browse UI.&lt;/p&gt;</comment>
                            <comment id="14087085" author="ehatcher" created="Wed, 6 Aug 2014 01:27:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mbennett&quot; class=&quot;user-hover&quot; rel=&quot;mbennett&quot;&gt;mbennett&lt;/a&gt; - apologies for the delay on this.  The fix was committed earlier (for Solr 4.3), and I left this open to (eventually, heh) address your feedback after the commit.  I just committed an enhancement that shows all possible collation queries, along with their hit count; note that the counts are within the currently selected filters not globally.  Regarding the debugging, I recommend simply adding &amp;amp;wt=xml (or clicking the link in the footer) to get at the raw response suitable for developer-level debugging.  I also often simply put into the template $response... and $object.class kind of expressions directly into the template and refresh my browser to see gory details that help craft the templates.  We certainly could add more insight into the UI as you suggest, though under a new Jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12641149">SOLR-4680</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12578483" name="SOLR-4702.patch" size="2410" author="ehatcher" created="Fri, 12 Apr 2013 18:44:09 +0000"/>
                            <attachment id="12578471" name="SOLR-4702.patch" size="1395" author="ehatcher" created="Fri, 12 Apr 2013 18:16:19 +0000"/>
                            <attachment id="12578292" name="SOLR-4702.patch" size="1871" author="mbennett" created="Thu, 11 Apr 2013 22:00:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>322558</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1jni7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>322903</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>