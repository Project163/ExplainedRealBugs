<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:09:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-17149] Cannot backup/restore large collection.</title>
                <link>https://issues.apache.org/jira/browse/SOLR-17149</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;There is a regression introduced in version 9.4 with &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16879&quot; title=&quot;Throttle concurrent backups/restores per node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16879&quot;&gt;&lt;del&gt;SOLR-16879&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;We cannot backup collections with more than 10 shards per node. The thread pool is rejecting new tasks with following error:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SolrException: Could not backup all shards

Task org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor$$Lambda... rejected from org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor[Running, pool size = 5, active threads = 5, queued tasks = 5, completed tasks = 30]&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;tt&gt;expensiveExecutor&lt;/tt&gt; thread pool executor is &lt;a href=&quot;https://github.com/apache/solr/blob/releases/solr/9.4.1/solr/solrj/src/java/org/apache/solr/common/util/ExecutorUtil.java#L170-L174&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;created&lt;/a&gt; with 5 max threads and bounded queue of the same size (5), so the total number of tasks is limited to 10 and all the other tasks are immediately rejected.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13567467">SOLR-17149</key>
            <summary>Cannot backup/restore large collection.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gerlowskija">Jason Gerlowski</assignee>
                                    <reporter username="pierre.salagnac">Pierre Salagnac</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 5 Feb 2024 19:21:06 +0000</created>
                <updated>Tue, 10 Sep 2024 16:39:39 +0000</updated>
                            <resolved>Tue, 6 Feb 2024 16:04:30 +0000</resolved>
                                    <version>9.4</version>
                                    <fixVersion>9.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="7800">2h 10m</timespent>
                                <comments>
                            <comment id="17814856" author="jira-bot" created="Tue, 6 Feb 2024 15:08:56 +0000"  >&lt;p&gt;Commit c98a8f655ceca19ff641bbf675dad74b42df1264 in solr&apos;s branch refs/heads/main from Pierre Salagnac&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=c98a8f655ce&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=c98a8f655ce&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17149&quot; title=&quot;Cannot backup/restore large collection.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17149&quot;&gt;&lt;del&gt;SOLR-17149&lt;/del&gt;&lt;/a&gt;: Fix backup/restore for large collections. (#2243)&lt;/p&gt;

&lt;p&gt;9.4 introduced a new executor used for &quot;expensive&quot; operations, that&lt;br/&gt;
relied on a bounded queue.  This caused backup operations to fail on&lt;br/&gt;
collections large enough to hit this queue capacity.&lt;/p&gt;

&lt;p&gt;This commit fixes this problem by making the executor queue unbounded.&lt;/p&gt;

&lt;p&gt;---------&lt;/p&gt;

&lt;p&gt;Co-authored-by: Pierre Salagnac &amp;lt;psalagnac@salesforce.com&amp;gt;&lt;br/&gt;
Co-authored-by: Jason Gerlowski &amp;lt;gerlowskija@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17814865" author="jira-bot" created="Tue, 6 Feb 2024 15:26:04 +0000"  >&lt;p&gt;Commit 82a847f0f9af18d6eceee18743d636db7a879f3e in solr&apos;s branch refs/heads/branch_9x from Pierre Salagnac&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=82a847f0f9a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=82a847f0f9a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17149&quot; title=&quot;Cannot backup/restore large collection.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17149&quot;&gt;&lt;del&gt;SOLR-17149&lt;/del&gt;&lt;/a&gt;: Fix backup/restore for large collections. (#2243)&lt;/p&gt;

&lt;p&gt;9.4 introduced a new executor used for &quot;expensive&quot; operations, that&lt;br/&gt;
relied on a bounded queue.  This caused backup operations to fail on&lt;br/&gt;
collections large enough to hit this queue capacity.&lt;/p&gt;

&lt;p&gt;This commit fixes this problem by making the executor queue unbounded.&lt;/p&gt;

&lt;p&gt;---------&lt;/p&gt;

&lt;p&gt;Co-authored-by: Pierre Salagnac &amp;lt;psalagnac@salesforce.com&amp;gt;&lt;br/&gt;
Co-authored-by: Jason Gerlowski &amp;lt;gerlowskija@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17814880" author="jira-bot" created="Tue, 6 Feb 2024 15:57:19 +0000"  >&lt;p&gt;Commit 20982b0d96a12dcbbf1b16e58bbe3013a7a8bd79 in solr&apos;s branch refs/heads/branch_9_5 from Pierre Salagnac&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=20982b0d96a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=20982b0d96a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17149&quot; title=&quot;Cannot backup/restore large collection.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17149&quot;&gt;&lt;del&gt;SOLR-17149&lt;/del&gt;&lt;/a&gt;: Fix backup/restore for large collections. (#2243)&lt;/p&gt;

&lt;p&gt;9.4 introduced a new executor used for &quot;expensive&quot; operations, that&lt;br/&gt;
relied on a bounded queue.  This caused backup operations to fail on&lt;br/&gt;
collections large enough to hit this queue capacity.&lt;/p&gt;

&lt;p&gt;This commit fixes this problem by making the executor queue unbounded.&lt;/p&gt;

&lt;p&gt;---------&lt;/p&gt;

&lt;p&gt;Co-authored-by: Pierre Salagnac &amp;lt;psalagnac@salesforce.com&amp;gt;&lt;br/&gt;
Co-authored-by: Jason Gerlowski &amp;lt;gerlowskija@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17815018" author="jira-bot" created="Tue, 6 Feb 2024 22:24:12 +0000"  >&lt;p&gt;Commit c98a8f655ceca19ff641bbf675dad74b42df1264 in solr&apos;s branch refs/heads/jira/&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16858&quot; title=&quot;Allow KnnQParser to selectively apply filters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16858&quot;&gt;&lt;del&gt;SOLR-16858&lt;/del&gt;&lt;/a&gt; from Pierre Salagnac&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=c98a8f655ce&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=c98a8f655ce&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17149&quot; title=&quot;Cannot backup/restore large collection.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17149&quot;&gt;&lt;del&gt;SOLR-17149&lt;/del&gt;&lt;/a&gt;: Fix backup/restore for large collections. (#2243)&lt;/p&gt;

&lt;p&gt;9.4 introduced a new executor used for &quot;expensive&quot; operations, that&lt;br/&gt;
relied on a bounded queue.  This caused backup operations to fail on&lt;br/&gt;
collections large enough to hit this queue capacity.&lt;/p&gt;

&lt;p&gt;This commit fixes this problem by making the executor queue unbounded.&lt;/p&gt;

&lt;p&gt;---------&lt;/p&gt;

&lt;p&gt;Co-authored-by: Pierre Salagnac &amp;lt;psalagnac@salesforce.com&amp;gt;&lt;br/&gt;
Co-authored-by: Jason Gerlowski &amp;lt;gerlowskija@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17816744" author="gerlowskija" created="Mon, 12 Feb 2024 19:48:58 +0000"  >&lt;p&gt;Closing after the 9.5.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13542822">SOLR-16879</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1n85c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>