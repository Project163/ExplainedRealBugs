<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:22:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-10404] The &quot;fetch&quot; streaming expression should escape join values in generated query</title>
                <link>https://issues.apache.org/jira/browse/SOLR-10404</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The &quot;fetch&quot; streaming expression joins data from another collection.  Example:&lt;br/&gt;
&lt;tt&gt;expr=fetch(collection,search(...), on=&quot;fieldA=fieldB&quot;&lt;/tt&gt;&lt;br/&gt;
  Internally, it does this by building a Solr query that looks like  &lt;tt&gt;fieldB:(value1 value2 value3)&lt;/tt&gt;.  &lt;b&gt;But those values are not escaped&lt;/b&gt;; they should be.  See FetchStream.java line 233.  The ramification is that, for example, if a value contains a colon, then this isn&apos;t going to work.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13061157">SOLR-10404</key>
            <summary>The &quot;fetch&quot; streaming expression should escape join values in generated query</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dsmiley">David Smiley</assignee>
                                    <reporter username="dsmiley">David Smiley</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Apr 2017 15:22:48 +0000</created>
                <updated>Sat, 8 Jun 2019 15:30:03 +0000</updated>
                            <resolved>Wed, 5 Apr 2017 13:07:34 +0000</resolved>
                                    <version>6.5</version>
                                    <fixVersion>6.5.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15953730" author="dsmiley" created="Mon, 3 Apr 2017 16:20:33 +0000"  >&lt;p&gt;Here&apos;s a patch that fixes the issue. It also sizes some lists &amp;amp; buffers better, and it generates a query that won&apos;t thrash the queryCache.  I also ensured even the first value has a space before it to avoid a sneaky bug/trick to avoid the equivalent of a Solr query injection in the value.  I&apos;ve used that to &quot;hack&quot; known-Solr installations before &amp;#8211; exercise to the reader &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;   Granted in this case it would be exceptionally odd based on how I see the &quot;fetch&quot; feature being used.&lt;/p&gt;

&lt;p&gt;It would be nice to use the &quot;terms&quot; QParser but unfortunately there is no escaping mechanism for the delimiter &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Should the generated query include a collapse on the field?  Without it if multiple records have the value then the user might get multiple records for some values and no records back for others because &quot;rows&quot; is set.  If we don&apos;t want a collapse (usually needless overhead?) then we ought to throw an exception if the numFound exceeds the rows.&lt;/p&gt;

&lt;p&gt;IMO, StreamExpressionTest is too big &amp;#8211; it should be split up.  And add useful test utility methods to avoid mundane repetition... similar to Lucene&apos;s &lt;tt&gt;BaseTokenStreamTestCase&lt;/tt&gt; utility which is conceptually similar.&lt;/p&gt;</comment>
                            <comment id="15956798" author="jira-bot" created="Wed, 5 Apr 2017 12:57:00 +0000"  >&lt;p&gt;Commit cb9f151db4b5ad5c5f581b6b8cf2e5916ddb0f35 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=cb9f151&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=cb9f151&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10404&quot; title=&quot;The &amp;quot;fetch&amp;quot; streaming expression should escape join values in generated query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10404&quot;&gt;&lt;del&gt;SOLR-10404&lt;/del&gt;&lt;/a&gt;: fetch() streaming expression: escape values in generated query.&lt;/p&gt;</comment>
                            <comment id="15956804" author="jira-bot" created="Wed, 5 Apr 2017 13:00:00 +0000"  >&lt;p&gt;Commit 048705e0e47ac04b6914e73c7ec3cc8daa12f2e0 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=048705e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=048705e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10404&quot; title=&quot;The &amp;quot;fetch&amp;quot; streaming expression should escape join values in generated query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10404&quot;&gt;&lt;del&gt;SOLR-10404&lt;/del&gt;&lt;/a&gt;: fetch() streaming expression: escape values in generated query.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit cb9f151)&lt;/p&gt;</comment>
                            <comment id="15956815" author="jira-bot" created="Wed, 5 Apr 2017 13:04:19 +0000"  >&lt;p&gt;Commit 55eb30cc9d77196227d8e9d86aae77a55545f869 in lucene-solr&apos;s branch refs/heads/branch_6_5 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=55eb30c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=55eb30c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10404&quot; title=&quot;The &amp;quot;fetch&amp;quot; streaming expression should escape join values in generated query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10404&quot;&gt;&lt;del&gt;SOLR-10404&lt;/del&gt;&lt;/a&gt;: fetch() streaming expression: escape values in generated query.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 048705e)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13167268">SOLR-12505</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12861732" name="SOLR_10404.patch" size="4178" author="dsmiley" created="Mon, 3 Apr 2017 16:20:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3d4z3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>