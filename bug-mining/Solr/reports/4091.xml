<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:35:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-13060] Some Nightly HDFS tests never terminate on ASF Jenkins, triggering whole-job timeout, causing Jenkins to kill JVMs, causing dump files to be created that fill all disk space, causing failure of all following jobs on the same node</title>
                <link>https://issues.apache.org/jira/browse/SOLR-13060</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The 3 tests that are affected: &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;HdfsAutoAddReplicasIntegrationTest&lt;/li&gt;
	&lt;li&gt;HdfsCollectionsAPIDistributedZkTest&lt;/li&gt;
	&lt;li&gt;MoveReplicaHDFSTest&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Instances from the dev list:&lt;/p&gt;

&lt;p&gt;12/1:&#160;&lt;a href=&quot;https://lists.apache.org/thread.html/e04ad0f9113e15f77393ccc26e3505e3090783b1d61bd1c7ff03d33e@%3Cdev.lucene.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/e04ad0f9113e15f77393ccc26e3505e3090783b1d61bd1c7ff03d33e@%3Cdev.lucene.apache.org%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;12/5: &lt;a href=&quot;https://lists.apache.org/thread.html/d78c99255abfb5134803c2b77664c1a039d741f92d6e6fcbcc66cd14@%3Cdev.lucene.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/d78c99255abfb5134803c2b77664c1a039d741f92d6e6fcbcc66cd14@%3Cdev.lucene.apache.org%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;12/8: &lt;a href=&quot;https://lists.apache.org/thread.html/92ad03795ae60b1e94859d49c07740ca303f997ae2532e6f079acfb4@%3Cdev.lucene.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/92ad03795ae60b1e94859d49c07740ca303f997ae2532e6f079acfb4@%3Cdev.lucene.apache.org%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;12/8: &lt;a href=&quot;https://lists.apache.org/thread.html/26aace512bce0b51c4157e67ac3120f93a99905b40040bee26472097@%3Cdev.lucene.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/26aace512bce0b51c4157e67ac3120f93a99905b40040bee26472097@%3Cdev.lucene.apache.org%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;12/11: &lt;a href=&quot;https://lists.apache.org/thread.html/33558a8dd292fd966a7f476bf345b66905d99f7eb9779a4d17b7ec97@%3Cdev.lucene.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/33558a8dd292fd966a7f476bf345b66905d99f7eb9779a4d17b7ec97@%3Cdev.lucene.apache.org%3E&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13203875">SOLR-13060</key>
            <summary>Some Nightly HDFS tests never terminate on ASF Jenkins, triggering whole-job timeout, causing Jenkins to kill JVMs, causing dump files to be created that fill all disk space, causing failure of all following jobs on the same node</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="krisden">Kevin Risden</assignee>
                                    <reporter username="sarowe">Steven Rowe</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Dec 2018 02:14:07 +0000</created>
                <updated>Thu, 12 May 2022 00:26:28 +0000</updated>
                            <resolved>Mon, 25 Feb 2019 16:30:33 +0000</resolved>
                                                    <fixVersion>8.1</fixVersion>
                    <fixVersion>9.0</fixVersion>
                                    <component>Hadoop Integration</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16718400" author="steve_rowe" created="Wed, 12 Dec 2018 02:45:38 +0000"  >&lt;p&gt;Attaching a truncated (at 1/2 the lines) version of one of the JVMs&apos; &lt;tt&gt;.spill&lt;/tt&gt; files for one of these jobs. &#160;The full file exceeds the 60MB Jira attachment limit. &#160;The lines near the end of this truncated file look like the end of the full file, so I think (didn&apos;t check) that the remainder of the file is just a repetition of this, from the end of the truncated file:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;33700791 WARN  (org.apache.hadoop.hdfs.server.datanode.DataXceiverServer@726e0f26) [    ] o.a.h.h.s.d.DataNode 127.0.0.1:36261:DataXceiverServer: 
java.nio.channels.ClosedChannelException: null
        at sun.nio.ch.ServerSocketChannelImpl.accept(ServerSocketChannelImpl.java:235) ~[?:1.8.0_191]
        at sun.nio.ch.ServerSocketAdaptor.accept(ServerSocketAdaptor.java:100) ~[?:1.8.0_191]
        at org.apache.hadoop.hdfs.net.TcpPeerServer.accept(TcpPeerServer.java:141) ~[hadoop-hdfs-2.7.4.jar:?]
        at org.apache.hadoop.hdfs.server.datanode.DataXceiverServer.run(DataXceiverServer.java:135) [hadoop-hdfs-2.7.4.jar:?]
        at java.lang.Thread.run(Thread.java:748) [?:1.8.0_191]
33700793 WARN  (org.apache.hadoop.hdfs.server.datanode.DataXceiverServer@726e0f26) [    ] o.a.h.h.s.d.DataNode 127.0.0.1:36261:DataXceiverServer: 
java.nio.channels.ClosedChannelException: null
        at sun.nio.ch.ServerSocketChannelImpl.accept(ServerSocketChannelImpl.java:235) ~[?:1.8.0_191]
        at sun.nio.ch.ServerSocketAdaptor.accept(ServerSocketAdaptor.java:100) ~[?:1.8.0_191]
        at org.apache.hadoop.hdfs.net.TcpPeerServer.accept(TcpPeerServer.java:141) ~[hadoop-hdfs-2.7.4.jar:?]
        at org.apache.hadoop.hdfs.server.datanode.DataXceiverServer.run(DataXceiverServer.java:135) [hadoop-hdfs-2.7.4.jar:?]
        at java.lang.Thread.run(Thread.java:748) [?:1.8.0_191]
33700793 WARN  (org.apache.hadoop.hdfs.server.datanode.DataXceiverServer@726e0f26) [    ] o.a.h.h.s.d.DataNode 127.0.0.1:36261:DataXceiverServer: 
java.nio.channels.ClosedChannelException: null
        at sun.nio.ch.ServerSocketChannelImpl.accept(ServerSocketChannelImpl.java:235) ~[?:1.8.0_191]
        at sun.nio.ch.ServerSocketAdaptor.accept(ServerSocketAdaptor.java:100) ~[?:1.8.0_191]
        at org.apache.hadoop.hdfs.net.TcpPeerServer.accept(TcpPeerServer.java:141) ~[hadoop-hdfs-2.7.4.jar:?]
        at org.apache.hadoop.hdfs.server.datanode.DataXceiverServer.run(DataXceiverServer.java:135) [hadoop-hdfs-2.7.4.jar:?]
        at java.lang.Thread.run(Thread.java:748) [?:1.8.0_191]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16718403" author="jira-bot" created="Wed, 12 Dec 2018 02:50:17 +0000"  >&lt;p&gt;Commit bd104ffd48859f625c999856768b9f14bb6fe1f2 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=bd104ff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=bd104ff&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13060&quot; title=&quot;Some Nightly HDFS tests never terminate on ASF Jenkins, triggering whole-job timeout, causing Jenkins to kill JVMs, causing dump files to be created that fill all disk space, causing failure of all following jobs on the same node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13060&quot;&gt;&lt;del&gt;SOLR-13060&lt;/del&gt;&lt;/a&gt;: set suite timeout on non-terminating HDFS Nightly tests to one hour&lt;/p&gt;</comment>
                            <comment id="16718404" author="jira-bot" created="Wed, 12 Dec 2018 02:50:19 +0000"  >&lt;p&gt;Commit ec1bd0da2f784a39fbe5dc21d78349c41bfdaec2 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=ec1bd0d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=ec1bd0d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13060&quot; title=&quot;Some Nightly HDFS tests never terminate on ASF Jenkins, triggering whole-job timeout, causing Jenkins to kill JVMs, causing dump files to be created that fill all disk space, causing failure of all following jobs on the same node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13060&quot;&gt;&lt;del&gt;SOLR-13060&lt;/del&gt;&lt;/a&gt;: set suite timeout on non-terminating HDFS Nightly tests to one hour&lt;/p&gt;</comment>
                            <comment id="16718414" author="steve_rowe" created="Wed, 12 Dec 2018 02:58:29 +0000"  >&lt;p&gt;As I mentioned I would on the dev list, I&apos;ve committed suite timeouts (set to one hour) on these three tests.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman&quot; class=&quot;user-hover&quot; rel=&quot;hossman&quot;&gt;hossman&lt;/a&gt; wrote on the dev list:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;There was a logging change that miller made on master ~Nov29 (and &lt;br/&gt;
backported to 7x a few days later) that i just dialed down from INFO to &lt;br/&gt;
DEBUG ... was causing an INFO log message once a second from every solr &lt;br/&gt;
core, which can add up in long running tests.&lt;/p&gt;

&lt;p&gt;might explain the recent up tick...&lt;/p&gt;

&lt;p&gt;de65b45fca00445d5dde8f25ee5bc67f791a84f7&lt;br/&gt;
a61c9f2c22362692b47e4d38dd32953f3a7156d1&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;But the repeating log snippet in my previous comment is at WARN level, so I don&apos;t think ^^ applies (at least in the case of the one test I took this from)?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dawid.weiss&quot; class=&quot;user-hover&quot; rel=&quot;dawid.weiss&quot;&gt;dawid.weiss&lt;/a&gt; wrote on the dev list:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Unless the logging system is writing to raw io descriptors (or is&lt;br/&gt;
initialized earlier than test rules, which I don&apos;t think it should),&lt;br/&gt;
you could also use the:&lt;/p&gt;

&lt;p&gt;@TestRuleLimitSysouts.Limit(bytes = ....)&lt;/p&gt;

&lt;p&gt;to limit the amount of logs to a sensibly high limit.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Good info, I&apos;ll wait to do this until the problem resurfaces.&lt;/p&gt;</comment>
                            <comment id="16718585" author="dweiss" created="Wed, 12 Dec 2018 08:12:26 +0000"  >&lt;p&gt;I looked at TestRuleLimitSysouts again (it&apos;s been a while). It only triggers an error after the test completed (and successfully). So it&apos;s not going to interrupt/ stop a running test from dumping all the output it wants. Perhaps we should make an optional &quot;hard limit&quot; there so that tests that spill megabytes to sysouts are terminated earlier. This may not be always possible &amp;#8211; for example a logger will most likely catch an exception from the appender and just ignore it. &lt;/p&gt;

&lt;p&gt;Another crude workaround would be to not delegate sysouts to actual output after a certain hard limit (and still throw IOException in such a case). This would, in the worst case, wait until the test is over, but wouldn&apos;t fill the disk.&lt;/p&gt;</comment>
                            <comment id="16718613" author="dweiss" created="Wed, 12 Dec 2018 08:42:50 +0000"  >&lt;p&gt;There is also the &quot;SuppressSysoutChecks&quot; annotation which is used in a number of tests (and parent classes). I think we should remove this annotation entirely and just give each test a large hard limit. I recall people arguing they do have the need for gigabytes of logs from tests, but I&apos;d argue if the problem isn&apos;t captured in the first 20 gigs or so then the rest probably isn&apos;t that useful anyway...&lt;/p&gt;</comment>
                            <comment id="16718693" author="dweiss" created="Wed, 12 Dec 2018 09:47:14 +0000"  >&lt;p&gt;A tentative patch at hard limiting the output in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-8604&quot; title=&quot;Add TestRuleLimitSysouts tests, do some cleanup and add hard limit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-8604&quot;&gt;&lt;del&gt;LUCENE-8604&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16718713" author="jira-bot" created="Wed, 12 Dec 2018 10:01:57 +0000"  >&lt;p&gt;Commit ec1bd0da2f784a39fbe5dc21d78349c41bfdaec2 in lucene-solr&apos;s branch refs/heads/jira/http2 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=ec1bd0d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=ec1bd0d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13060&quot; title=&quot;Some Nightly HDFS tests never terminate on ASF Jenkins, triggering whole-job timeout, causing Jenkins to kill JVMs, causing dump files to be created that fill all disk space, causing failure of all following jobs on the same node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13060&quot;&gt;&lt;del&gt;SOLR-13060&lt;/del&gt;&lt;/a&gt;: set suite timeout on non-terminating HDFS Nightly tests to one hour&lt;/p&gt;</comment>
                            <comment id="16720256" author="steve_rowe" created="Thu, 13 Dec 2018 14:52:51 +0000"  >&lt;p&gt;Same thing happened again, AFAICT &lt;b&gt;after&lt;/b&gt; my suite timeout commit, on &lt;a href=&quot;https://builds.apache.org/job/Lucene-Solr-NightlyTests-master/1721/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Lucene-Solr-NightlyTests-master/1721/&lt;/a&gt;  - two test suites continued to print HEARTBEAT messages long after the hour (3600s) timeout I set on them.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dweiss&quot; class=&quot;user-hover&quot; rel=&quot;dweiss&quot;&gt;dweiss&lt;/a&gt; do you understand what&apos;s happening?&lt;/p&gt;

&lt;p&gt;From .../1721/consoleText:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Checking out Revision ef2f0cd88c6eb4b662aea06eaeb3b933288b23eb (refs/remotes/
origin/master)
[...]
   [junit4] HEARTBEAT J2 PID(17526@lucene1-us-west): 2018-12-13T05:07:17, stalled for 48000s at: MoveReplicaHDFSTest (suite)
   [junit4] HEARTBEAT J0 PID(17515@lucene1-us-west): 2018-12-13T05:07:17, stalled for 49652s at: HdfsCollectionsAPIDistributedZkTest (suite)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From &lt;tt&gt;git log&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;commit ef2f0cd88c6eb4b662aea06eaeb3b933288b23eb
Author: Jan H&#248;ydahl &amp;lt;janhoy@apache.org&amp;gt;
Date:   Wed Dec 12 11:33:32 2018 +0100
[...]
commit ec1bd0da2f784a39fbe5dc21d78349c41bfdaec2
Author: Steve Rowe &amp;lt;sarowe@apache.org&amp;gt;
Date:   Tue Dec 11 18:49:06 2018 -0800
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From &lt;tt&gt;MoveReplicaHDFSTest&lt;/tt&gt; and &lt;tt&gt;HdfsCollectionsAPIDistributedZkTest&lt;/tt&gt; at commit &lt;tt&gt;ef2f0c&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@ThreadLeakFilters(defaultFilters = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, filters = {
    BadHdfsThreadsFilter.class, &lt;span class=&quot;code-comment&quot;&gt;// hdfs currently leaks thread(s)
&lt;/span&gt;    MoveReplicaHDFSTest.ForkJoinThreadsFilter.class
})
@Nightly &lt;span class=&quot;code-comment&quot;&gt;// test is too &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; non nightly
&lt;/span&gt;@TimeoutSuite(millis = TimeUnits.HOUR)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MoveReplicaHDFSTest &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; MoveReplicaTest {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Slow
@Nightly
@ThreadLeakFilters(defaultFilters = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, filters = {
    BadHdfsThreadsFilter.class &lt;span class=&quot;code-comment&quot;&gt;// hdfs currently leaks thread(s)
&lt;/span&gt;})
@TimeoutSuite(millis = TimeUnits.HOUR)
&lt;span class=&quot;code-comment&quot;&gt;//commented 23-AUG-2018  @LuceneTestCase.BadApple(bugUrl=&lt;span class=&quot;code-quote&quot;&gt;&quot;https://issues.apache.org/jira/browse/SOLR-12028&quot;&lt;/span&gt;) // 12-Jun-2018
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;HdfsCollectionsAPIDistributedZkTest &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; CollectionsAPIDistributedZkTest {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16720307" author="dweiss" created="Thu, 13 Dec 2018 15:33:31 +0000"  >&lt;p&gt;Hi Steve. No, I don&apos;t have a clue. I&apos;ll download those event files and then I&apos;ll be able to tell you more.&lt;/p&gt;</comment>
                            <comment id="16720604" author="dweiss" created="Thu, 13 Dec 2018 21:02:15 +0000"  >&lt;p&gt;So my best guess is this: the suite didn&apos;t terminate due to a timeout because it completed (with a failure). There are numerous messages about threads that leaked the suite scope and many attempts to send interrupts to these threads. Fairly early on this happens as well:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[
 &lt;span class=&quot;code-quote&quot;&gt;&quot;APPEND_STDERR&quot;&lt;/span&gt;,
 {
  &lt;span class=&quot;code-quote&quot;&gt;&quot;chunk&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;177769 WARN  (org.apache.hadoop.hdfs.server.namenode.FSNamesystem$NameNodeResourceMonitor@6734d615) [    ] o.a.h.h.s.n.NameNodeResourceChecker Space available on volume &lt;span class=&quot;code-quote&quot;&gt;&apos;/dev/sdb1&apos;&lt;/span&gt; is 0, which is below the configured reserved amount 104857600%0A&quot;&lt;/span&gt;
 }
] 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The subsequent 31 gigs of logs is repetitive this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[
 &lt;span class=&quot;code-quote&quot;&gt;&quot;APPEND_STDERR&quot;&lt;/span&gt;,
 {
  &lt;span class=&quot;code-quote&quot;&gt;&quot;chunk&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;49851804 WARN  (org.apache.hadoop.hdfs.server.datanode.DataXceiverServer@2d347651) [    ] o.a.h.h.s.d.DataNode 127.0.0.1:42148:DataXceiverServer: %0Ajava.nio.channels.ClosedChannelException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;%0A%09at sun.nio.ch.ServerSocketChannelImpl.accept(ServerSocketChannelImpl.java:235) ~[?:1.8.0_191]%0A%09at sun.nio.ch.ServerSocketAdaptor.accept(ServerSocketAdaptor.java:100) ~[?:1.8.0_191]%0A%09at org.apache.hadoop.hdfs.net.TcpPeerServer.accept(TcpPeerServer.java:141) ~[hadoop-hdfs-2.7.4.jar:?]%0A%09at org.apache.hadoop.hdfs.server.datanode.DataXceiverServer.run(DataXceiverServer.java:135) [hadoop-hdfs-2.7.4.jar:?]%0A%09at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748) [?:1.8.0_191]%0A&quot;&lt;/span&gt;
 }
]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I am not sure why the JVM doesn&apos;t terminate eventually because forked process does halt() after all suites are processed. Without a stack trace it&apos;s impossible to tell where it got stuck or why... Lack of clean environment because of those thread leaks doesn&apos;t make the diagnosis easier. I&apos;ll take another look tomorrow, time permitting, but it&apos;s such a mess on border conditions (leaked unknown threads crossing test/ runner scope boundaries, 0 disk space, timeouts, 40 gig logs...) that any analysis is very time consuming, if at all possible.&lt;/p&gt;

&lt;p&gt;I think limiting the amount of sysouts will be a good start; the patch I posted a few days ago is pretty much ready, I&apos;ll commit it in over the weekend.&lt;/p&gt;
</comment>
                            <comment id="16722108" author="dweiss" created="Sat, 15 Dec 2018 11:01:15 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;. Just FYI: the upgrade of randomizedtesting does fix the suite timeout problem (I just tested it on by running &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13074&quot; title=&quot;MoveReplicaHDFSTest leaks threads, falls into an endless loop, logging like crazy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13074&quot;&gt;&lt;del&gt;SOLR-13074&lt;/del&gt;&lt;/a&gt; with a suite timeout of 10 seconds...). I think one hour is very generous  for the sysout loop in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13074&quot; title=&quot;MoveReplicaHDFSTest leaks threads, falls into an endless loop, logging like crazy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13074&quot;&gt;&lt;del&gt;SOLR-13074&lt;/del&gt;&lt;/a&gt;, so it&apos;ll be enough to fill the disk anyway. I&apos;ll work on truncating sysouts up to at most 1 gig, test it on that &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13074&quot; title=&quot;MoveReplicaHDFSTest leaks threads, falls into an endless loop, logging like crazy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13074&quot;&gt;&lt;del&gt;SOLR-13074&lt;/del&gt;&lt;/a&gt;, then maybe to fix the underlying cause of leaking threads. &lt;/p&gt;

&lt;p&gt;Until this is solved, I don&apos;t think it makes sense to run hdfs tests at all &amp;#8211; they will hang and fill up disk space on jenkins.&lt;/p&gt;</comment>
                            <comment id="16722134" author="joel.bernstein" created="Sat, 15 Dec 2018 12:35:51 +0000"  >&lt;p&gt;+1 for disabling these tests and not re-enabling until they work properly.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16722216" author="steve_rowe" created="Sat, 15 Dec 2018 16:40:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;Just FYI: the upgrade of randomizedtesting does fix the suite timeout problem (I just tested it on by running &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13074&quot; title=&quot;MoveReplicaHDFSTest leaks threads, falls into an endless loop, logging like crazy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13074&quot;&gt;&lt;del&gt;SOLR-13074&lt;/del&gt;&lt;/a&gt; with a suite timeout of 10 seconds...).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Awesome, thanks!&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think one hour is very generous for the sysout loop in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13074&quot; title=&quot;MoveReplicaHDFSTest leaks threads, falls into an endless loop, logging like crazy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13074&quot;&gt;&lt;del&gt;SOLR-13074&lt;/del&gt;&lt;/a&gt;, so it&apos;ll be enough to fill the disk anyway.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;All the examples I&apos;ve seen have HEARTBEAT messages runing for 40k-50k seconds, an order of magnitude higher, which is why I set it to an hour.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I&apos;ll work on truncating sysouts up to at most 1 gig, test it on that &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13074&quot; title=&quot;MoveReplicaHDFSTest leaks threads, falls into an endless loop, logging like crazy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13074&quot;&gt;&lt;del&gt;SOLR-13074&lt;/del&gt;&lt;/a&gt;, then maybe to fix the underlying cause of leaking threads.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Great!&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Until this is solved, I don&apos;t think it makes sense to run hdfs tests at all &#8211; they will hang and fill up disk space on jenkins.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1, I&apos;ll apply the &lt;tt&gt;@AwaitsFix&lt;/tt&gt; annotation.&lt;/p&gt;</comment>
                            <comment id="16722228" author="jira-bot" created="Sat, 15 Dec 2018 17:25:32 +0000"  >&lt;p&gt;Commit 459f05da0c85baf3e76286b22005e633a0b1144d in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=459f05d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=459f05d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13060&quot; title=&quot;Some Nightly HDFS tests never terminate on ASF Jenkins, triggering whole-job timeout, causing Jenkins to kill JVMs, causing dump files to be created that fill all disk space, causing failure of all following jobs on the same node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13060&quot;&gt;&lt;del&gt;SOLR-13060&lt;/del&gt;&lt;/a&gt;: Annotate never-terminating HDFS Nightly tests with AwaitsFix&lt;/p&gt;</comment>
                            <comment id="16722229" author="jira-bot" created="Sat, 15 Dec 2018 17:25:33 +0000"  >&lt;p&gt;Commit a62b5941b028cc56bf5c35ab9d9ea70b9edb9853 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a62b594&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a62b594&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13060&quot; title=&quot;Some Nightly HDFS tests never terminate on ASF Jenkins, triggering whole-job timeout, causing Jenkins to kill JVMs, causing dump files to be created that fill all disk space, causing failure of all following jobs on the same node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13060&quot;&gt;&lt;del&gt;SOLR-13060&lt;/del&gt;&lt;/a&gt;: Annotate never-terminating HDFS Nightly tests with AwaitsFix&lt;/p&gt;</comment>
                            <comment id="16722231" author="steve_rowe" created="Sat, 15 Dec 2018 17:30:20 +0000"  >&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Until this is solved, I don&apos;t think it makes sense to run hdfs tests at all &#8211; they will hang and fill up disk space on jenkins.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;+1, I&apos;ll apply the @AwaitsFix annotation.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;FYI I only applied the annotation to the three test suites mentioned in this issue&apos;s description, since in all 9 or so instances I&apos;ve seen, only those tests have displayed the problem.  (There are another 25 or so HDFS test suites that I did not annotate.)&lt;/p&gt;</comment>
                            <comment id="16730204" author="dweiss" created="Fri, 28 Dec 2018 11:45:42 +0000"  >&lt;p&gt;This is probably easy to fix... but not for me. The NPE problem here can be easily avoided by adding cloud config (this is a result of Mark&apos;s changes):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/compare/master...dweiss:SOLR-13060&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/compare/master...dweiss:SOLR-13060&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;this, however, results in further errors from tests, such as:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  2&amp;gt; 17471 ERROR (qtp1816967642-985) [n:127.0.0.1:37271_solr c:MoveReplicaHDFSTest_failed_coll_true s:shard2 r:core_node7 x:Mov
eReplicaHDFSTest_failed_coll_true_shard2_replica_n4] o.a.s.h.RequestHandlerBase org.apache.solr.common.SolrException: Error CRE
ATEing SolrCore &lt;span class=&quot;code-quote&quot;&gt;&apos;MoveReplicaHDFSTest_failed_coll_true_shard2_replica_n4&apos;&lt;/span&gt;: Unable to create core [MoveReplicaHDFSTest_failed_col
l_true_shard2_replica_n4] Caused by: Unrecognized lockType: &lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m guessing I initialize the collection wrong, because the cloud-hdfs config set has it right.... But I know too little about the subject of hdfs and Solr in cloud mode to fix it properly. All the tests that try to read this config set (cloud-hdfs) seem like they have no way of working (and are currently disabled, in one way or the other), so addressing it properly in one place should give an example to people like me on how to fix it elsewhere.&lt;/p&gt;

&lt;p&gt;I also can&apos;t run those tests in Windows at all. Hadoop home isn&apos;t properly initialized and I don&apos;t know whether it&apos;s a requirement to set it up properly manually &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
7680 ERROR (SUITE-MoveReplicaHDFSTest-seed#[8489A45D88EB8B8A]-worker) [    ] o.a.h.u.Shell Failed to locate the winutils binary in the hadoop binary path
java.io.IOException: Could not locate executable &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;\bin\winutils.exe in the Hadoop binaries.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16759117" author="risdenk" created="Sat, 2 Feb 2019 17:23:32 +0000"  >&lt;p&gt;I&apos;m curious if these issues still exist with Hadoop 3 which was just merged to master/8x in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9515&quot; title=&quot;Update to Hadoop 3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9515&quot;&gt;&lt;del&gt;SOLR-9515&lt;/del&gt;&lt;/a&gt;. I can take a look at the 3 annotated tests.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;MoveReplicaHDFSTest&lt;/li&gt;
	&lt;li&gt;HdfsCollectionsAPIDistributedZkTest&lt;/li&gt;
	&lt;li&gt;HdfsAutoAddReplicasIntegrationTest&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16759120" author="dweiss" created="Sat, 2 Feb 2019 17:26:10 +0000"  >&lt;p&gt;MoveReplicaHDFSTest is just plain broken to me at infrastructural level (how things are started up/ cleaned up).&lt;/p&gt;</comment>
                            <comment id="16759125" author="risdenk" created="Sat, 2 Feb 2019 17:36:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dweiss&quot; class=&quot;user-hover&quot; rel=&quot;dweiss&quot;&gt;dweiss&lt;/a&gt; - Thanks. Yea I commented about MoveReplicaHDFSTest in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13074&quot; title=&quot;MoveReplicaHDFSTest leaks threads, falls into an endless loop, logging like crazy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13074&quot;&gt;&lt;del&gt;SOLR-13074&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I see a bunch of &quot;namenode low on available disk space&quot; messages before failures for HdfsCollectionsAPIDistributedZkTest.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ant test&#160; -Dtestcase=HdfsCollectionsAPIDistributedZkTest -Dtests.seed=B6F9375F80C2F760 -Dtests.nightly=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.slow=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.awaitsfix=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.badapples=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.locale=en-SG -Dtests.timezone=America/Winnipeg -Dtests.asserts=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.file.encoding=UTF-8
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above fails for me repeatedly.&lt;/p&gt;</comment>
                            <comment id="16759130" author="risdenk" created="Sat, 2 Feb 2019 17:41:04 +0000"  >&lt;p&gt;Similar errors with HdfsAutoAddReplicasIntegrationTest.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ant test&#160; -Dtestcase=HdfsAutoAddReplicasIntegrationTest -Dtests.seed=BD8B35758F984DD8 -Dtests.nightly=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.slow=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.awaitsfix=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.badapples=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.locale=ar-QA -Dtests.timezone=Antarctica/Palmer -Dtests.asserts=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.file.encoding=UTF-8
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above also fails for me repeatedly.&lt;/p&gt;</comment>
                            <comment id="16759149" author="risdenk" created="Sat, 2 Feb 2019 19:27:37 +0000"  >&lt;p&gt;So I looked at this and the way the HDFS versions of the tests are written doesn&apos;t really make any sense. I have at least the HdfsCollectionsAPIDistributedZkTest test passing it looks like now (turns out it had some parts of MoveReplica in it???). HdfsAutoAddReplicasIntegrationTest is still a bit flaky but it does pass sometimes (might be a timing issue?).&#160;&lt;/p&gt;

&lt;p&gt;MoveReplicaHDFSTest I&apos;ll look at in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13074&quot; title=&quot;MoveReplicaHDFSTest leaks threads, falls into an endless loop, logging like crazy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13074&quot;&gt;&lt;del&gt;SOLR-13074&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16759162" author="risdenk" created="Sat, 2 Feb 2019 19:42:19 +0000"  >&lt;p&gt;Attached patch that tries to address the issues laid out here. Basically the HDFS* versions now just setup HDFS with the right configset.&lt;/p&gt;</comment>
                            <comment id="16759541" author="lucenesolrqa" created="Sun, 3 Feb 2019 21:10:47 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Prechecks &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; test4tests &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch appears to include 4 new or modified test files. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; master Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 36s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Patch Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 36s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 36s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Release audit (RAT) &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 36s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Check forbidden APIs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 36s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Validate source patterns &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 36s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Other Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 40m 53s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; core in the patch passed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 46m 49s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13060&quot; title=&quot;Some Nightly HDFS tests never terminate on ASF Jenkins, triggering whole-job timeout, causing Jenkins to kill JVMs, causing dump files to be created that fill all disk space, causing failure of all following jobs on the same node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13060&quot;&gt;&lt;del&gt;SOLR-13060&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12957397/SOLR-13060.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12957397/SOLR-13060.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  compile  javac  unit  ratsources  checkforbiddenapis  validatesourcepatterns  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux lucene1-us-west 4.4.0-137-generic #163~14.04.1-Ubuntu SMP Mon Sep 24 17:14:57 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-SOLR-Build/sourcedir/dev-tools/test-patch/lucene-solr-yetus-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 1a23ab0 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; version: Apache Ant(TM) version 1.9.3 compiled on July 24 2018 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 1.8.0_191 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Test Results &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/290/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/290/testReport/&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: solr/core U: solr/core &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/290/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/290/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.7.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16776411" author="risdenk" created="Sun, 24 Feb 2019 21:38:32 +0000"  >&lt;p&gt;Patch still looks good. Will rebase on master and run through tests again to double check. Planning to push this if things go well locally.&lt;/p&gt;</comment>
                            <comment id="16777072" author="jira-bot" created="Mon, 25 Feb 2019 16:29:16 +0000"  >&lt;p&gt;Commit 6a886b274d6cc24dd1b84a7379ee8a07ccae3ce8 in lucene-solr&apos;s branch refs/heads/master from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=6a886b2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=6a886b2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13060&quot; title=&quot;Some Nightly HDFS tests never terminate on ASF Jenkins, triggering whole-job timeout, causing Jenkins to kill JVMs, causing dump files to be created that fill all disk space, causing failure of all following jobs on the same node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13060&quot;&gt;&lt;del&gt;SOLR-13060&lt;/del&gt;&lt;/a&gt;: Improve HdfsAutoAddReplicasIntegrationTest and HdfsCollectionsAPIDistributedZkTest&lt;/p&gt;

&lt;p&gt;Signed-off-by: Kevin Risden &amp;lt;krisden@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="16777074" author="jira-bot" created="Mon, 25 Feb 2019 16:30:09 +0000"  >&lt;p&gt;Commit 129de3f5e9f45d79711853b087fce86358a63307 in lucene-solr&apos;s branch refs/heads/branch_8x from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=129de3f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=129de3f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13060&quot; title=&quot;Some Nightly HDFS tests never terminate on ASF Jenkins, triggering whole-job timeout, causing Jenkins to kill JVMs, causing dump files to be created that fill all disk space, causing failure of all following jobs on the same node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13060&quot;&gt;&lt;del&gt;SOLR-13060&lt;/del&gt;&lt;/a&gt;: Improve HdfsAutoAddReplicasIntegrationTest and HdfsCollectionsAPIDistributedZkTest&lt;/p&gt;

&lt;p&gt;Signed-off-by: Kevin Risden &amp;lt;krisden@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17535438" author="janhoy" created="Thu, 12 May 2022 00:26:28 +0000"  >&lt;p&gt;Closing after the 9.0.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12969838">SOLR-9111</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13191650">SOLR-12869</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13204639">SOLR-13074</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13203939">LUCENE-8604</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13222937">SOLR-13338</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12957397" name="SOLR-13060.patch" size="26803" author="krisden" created="Sat, 2 Feb 2019 19:41:27 +0000"/>
                            <attachment id="12951449" name="junit4-J0-20181210_065854_4175881849742830327151.spill.part1.gz" size="49797526" author="sarowe" created="Wed, 12 Dec 2018 02:42:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s01f9s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>