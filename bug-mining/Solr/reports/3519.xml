<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:25:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-10879] DELETEREPLICA and DELETENODE commands should prevent data loss when replicationFactor==1</title>
                <link>https://issues.apache.org/jira/browse/SOLR-10879</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;There should be some level of protection against inadvertent data loss when issuing these commands when replicationFactor is 1 - deleting a node or a replica in this case will be equivalent to completely deleting some shards.&lt;/p&gt;

&lt;p&gt;This is further complicated by the replica types - there could be still remaining replicas after the operation, but if they are all of PULL type then none of them will ever become a shard leader.&lt;/p&gt;

&lt;p&gt;We could require that  the command should fail in such case unless a boolean option &quot;force==true&quot; is specified.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13079430">SOLR-10879</key>
            <summary>DELETEREPLICA and DELETENODE commands should prevent data loss when replicationFactor==1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ab">Andrzej Bialecki</assignee>
                                    <reporter username="ab">Andrzej Bialecki</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Jun 2017 09:38:40 +0000</created>
                <updated>Sat, 8 Jun 2019 15:24:38 +0000</updated>
                            <resolved>Wed, 5 Jul 2017 07:29:23 +0000</resolved>
                                    <version>6.6</version>
                    <version>6.7</version>
                    <version>7.0</version>
                                    <fixVersion>7.0</fixVersion>
                    <fixVersion>8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16048118" author="tomasflobbe" created="Tue, 13 Jun 2017 17:10:03 +0000"  >&lt;p&gt;Isn&apos;t this what &lt;tt&gt;DeleteReplicaCmd#validateReplicaAvailability(...)&lt;/tt&gt; is doing?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (allReplicasForShard.size() == 1) {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SolrException(SolrException.ErrorCode.BAD_REQUEST, &lt;span class=&quot;code-quote&quot;&gt;&quot;There is only one replica available in shard/collection: &quot;&lt;/span&gt; +
                shard + &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; + collectionName + &lt;span class=&quot;code-quote&quot;&gt;&quot;. Cannot delete that.&quot;&lt;/span&gt;);
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16048136" author="tomasflobbe" created="Tue, 13 Jun 2017 17:25:25 +0000"  >&lt;p&gt;OK, I see that this validation is only done when you delete replicas by count, not if you delete replicas by name (which is what &lt;tt&gt;DeleteNodeCmd&lt;/tt&gt; does)&lt;/p&gt;</comment>
                            <comment id="16074070" author="jira-bot" created="Tue, 4 Jul 2017 20:42:58 +0000"  >&lt;p&gt;Commit cb23fa9b4efa5fc7c17f215f507901d459e9aa6f in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=cb23fa9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=cb23fa9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10879&quot; title=&quot;DELETEREPLICA and DELETENODE commands should prevent data loss when replicationFactor==1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10879&quot;&gt;&lt;del&gt;SOLR-10879&lt;/del&gt;&lt;/a&gt;: Make sure we don&apos;t lose single replicas when deleting a node.&lt;/p&gt;</comment>
                            <comment id="16074072" author="jira-bot" created="Tue, 4 Jul 2017 20:43:49 +0000"  >&lt;p&gt;Commit 30352e72505dd33901158bf8fc76aa98861ab8cc in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=30352e7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=30352e7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10879&quot; title=&quot;DELETEREPLICA and DELETENODE commands should prevent data loss when replicationFactor==1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10879&quot;&gt;&lt;del&gt;SOLR-10879&lt;/del&gt;&lt;/a&gt;: Make sure we don&apos;t lose single replicas when deleting a node.&lt;/p&gt;</comment>
                            <comment id="16074073" author="jira-bot" created="Tue, 4 Jul 2017 20:44:07 +0000"  >&lt;p&gt;Commit 0324da8289e148d627b9a45c3105bab6ed7573e6 in lucene-solr&apos;s branch refs/heads/branch_7_0 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=0324da8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=0324da8&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10879&quot; title=&quot;DELETEREPLICA and DELETENODE commands should prevent data loss when replicationFactor==1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10879&quot;&gt;&lt;del&gt;SOLR-10879&lt;/del&gt;&lt;/a&gt;: Make sure we don&apos;t lose single replicas when deleting a node.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3g7en:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>