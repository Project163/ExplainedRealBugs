<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:35:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4661] Index Version &amp; Gen look out of sync in replication UI when master searcher uses older commit then what is replicatable</title>
                <link>https://issues.apache.org/jira/browse/SOLR-4661</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;the ReplicationHandler (and the replication admin UI screen) report the index version &amp;amp; gen for the master based on what commit point is currently open for searching &amp;#8211; but this is not necessarily the most recent commit point available for replication.&lt;/p&gt;

&lt;p&gt;Thus, it can appear that a slave has &quot;gotten ahead&quot; of the master, if there are &quot;empty commits&quot; (because of reader reopening shotcuts) or commits using openSearcher=false.&lt;/p&gt;

&lt;p&gt;We need to add additional data to help make it clear there is no actual problem in this sitation.&lt;/p&gt;

&lt;p&gt;Summary of original bug report..&lt;/p&gt;

&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;Index and Gen number on Slave is higher than master. &lt;br/&gt;
If you apply commit on master with no pending docs then the commit time stamp and gen is incremented. When Slaves polls master for replication it see the index version difference and starts replicating but all files are skipped. &lt;/p&gt;

&lt;p&gt;On Admin UI (on Slaves) the version number displayed for master is old where as for slave is the latest which is higher than master.&lt;br/&gt;
Below is the response from master (/replication?command=details) where i see two different Version an Gen numbers. This creates confusion of having version out of sync, though its not. &lt;/p&gt;

&lt;p&gt;...&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment>&lt;p&gt;Solr 4.2 on Linux with JBoss 7.1.1, JDK 1.7&lt;/p&gt;</environment>
        <key id="12640130">SOLR-4661</key>
            <summary>Index Version &amp; Gen look out of sync in replication UI when master searcher uses older commit then what is replicatable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="abakle">Aditya</reporter>
                        <labels>
                            <label>gui</label>
                            <label>replication</label>
                            <label>web</label>
                    </labels>
                <created>Mon, 1 Apr 2013 16:33:32 +0000</created>
                <updated>Thu, 16 Feb 2017 15:55:35 +0000</updated>
                            <resolved>Wed, 17 Apr 2013 21:22:09 +0000</resolved>
                                    <version>4.2</version>
                                    <fixVersion>4.3</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>Admin UI</component>
                    <component>replication (java)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13618926" author="abakle" created="Mon, 1 Apr 2013 17:09:20 +0000"  >&lt;p&gt;Index and Gen version displayed on Admin UI (Slave)&lt;/p&gt;</comment>
                            <comment id="13619056" author="markrmiller@gmail.com" created="Mon, 1 Apr 2013 19:03:21 +0000"  >&lt;p&gt;Can you post your replication handler config?&lt;/p&gt;</comment>
                            <comment id="13619078" author="abakle" created="Mon, 1 Apr 2013 19:40:35 +0000"  >&lt;p&gt; &amp;lt;requestHandler name=&quot;/replication&quot; class=&quot;solr.ReplicationHandler&quot; &amp;gt;&lt;br/&gt;
      &amp;lt;lst name=&quot;master&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;str name=&quot;enable&quot;&amp;gt;${enable.master:false}&amp;lt;/str&amp;gt;&lt;br/&gt;
        &amp;lt;str name=&quot;replicateAfter&quot;&amp;gt;commit&amp;lt;/str&amp;gt;&lt;br/&gt;
        &amp;lt;str name=&quot;replicateAfter&quot;&amp;gt;startup&amp;lt;/str&amp;gt;&lt;br/&gt;
        &amp;lt;str name=&quot;confFiles&quot;&amp;gt;schema.xml&amp;lt;/str&amp;gt;&lt;br/&gt;
      &amp;lt;/lst&amp;gt;&lt;br/&gt;
      &amp;lt;lst name=&quot;slave&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;str name=&quot;enable&quot;&amp;gt;${enable.slave:false}&amp;lt;/str&amp;gt;&lt;br/&gt;
        &amp;lt;str name=&quot;masterUrl&quot;&amp;gt;&lt;a href=&quot;http://XX.XX.XX.XX/solr&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://XX.XX.XX.XX/solr&lt;/a&gt;&amp;lt;/str&amp;gt;&lt;br/&gt;
        &amp;lt;str name=&quot;pollInterval&quot;&amp;gt;00:05:00&amp;lt;/str&amp;gt;&lt;br/&gt;
      &amp;lt;/lst&amp;gt;&lt;br/&gt;
    &amp;lt;/requestHandler&amp;gt;&lt;/p&gt;</comment>
                            <comment id="13619394" author="erickerickson" created="Tue, 2 Apr 2013 01:05:47 +0000"  >&lt;p&gt;Is there any chance you started up the slave with the wrong environment variable so it thinks it&apos;s a master?&lt;/p&gt;

&lt;p&gt;Wild shot in the dark.&lt;/p&gt;</comment>
                            <comment id="13620037" author="abakle" created="Tue, 2 Apr 2013 17:40:38 +0000"  >&lt;p&gt;Double checked .. and everything looks good. Step to reproduce this issue is simple. Just apply commit on master without posting any documents. The next replication you will see the difference of Version and gen on Slave. I remember in Solr3.5 applying commit with no pending document will not increment the version and gen on master. &lt;/p&gt;


&lt;p&gt;From the Slave -----------&lt;br/&gt;
JVM&lt;br/&gt;
Runtime : Oracle Corporation Java HotSpot(TM) 64-Bit Server VM (1.7.0_09 23.5-b02)&lt;br/&gt;
Processors : 4&lt;br/&gt;
Args:&lt;br/&gt;
-Dlogging.configuration=&lt;a href=&quot;file:/opt/jboss/standalone/configuration/logging.properties&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/opt/jboss/standalone/configuration/logging.properties&lt;/a&gt;&lt;br/&gt;
-Dorg.jboss.boot.log.file=/opt/jboss/standalone/log/boot.log&lt;br/&gt;
-XX:+UseG1GC&lt;br/&gt;
-XX:+UnlockExperimentalVMOptions&lt;br/&gt;
-XX:MaxPermSize=256m&lt;br/&gt;
-Xmx3g&lt;br/&gt;
-Xms3g&lt;br/&gt;
-Djboss.server.default.config=standalone.xml&lt;br/&gt;
-Djava.awt.headless=true&lt;br/&gt;
-Djboss.modules.system.pkgs=org.jboss.byteman&lt;br/&gt;
-Dsolr.data.dir=/storage/solrdata/&lt;br/&gt;
-Denable.slave=true&lt;br/&gt;
-Denable.master=false&lt;br/&gt;
-Dsolr.solr.home=/opt/solr&lt;br/&gt;
-Dorg.jboss.resolver.warning=true&lt;br/&gt;
-Djava.net.preferIPv4Stack=true&lt;br/&gt;
-XX:+TieredCompilation&lt;br/&gt;
-XX:+UseCompressedOops&lt;br/&gt;
-D&lt;span class=&quot;error&quot;&gt;&amp;#91;Standalone&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="13620073" author="hossman" created="Tue, 2 Apr 2013 18:01:51 +0000"  >&lt;p&gt;Aditya: in your thread on the solr-user@lucene list, you posted some other examples of the generation being higher on the slave then on the master, and you also posted some short log files from both your master &amp;amp; slave, but the log files you posted don&apos;t seem to directly correspond to the snippets you posted from requesting /replication?command=details in any of your mails or in this issue (the generation numbers logged by SnapPuller on the slave don&apos;t match up)&lt;/p&gt;

&lt;p&gt;Can you please attach a zip file containing a single cohesive example of:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;a master solrconfig.xml&lt;/li&gt;
	&lt;li&gt;a slave solrconfig.xml (if different)&lt;/li&gt;
	&lt;li&gt;the log files for both the master and slave from JVM startup to jvm shutdown&lt;/li&gt;
	&lt;li&gt;any number of files containing the full response of getting the replication details form the master &amp;amp; slave &lt;em&gt;with&lt;/em&gt; the timestamp of when these files were generated.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The timestamps being crucial to helping us stitch together where in the flow of log messages you are seeing this inconsistency.&lt;/p&gt;

&lt;p&gt;If you are using bash, running two commands like this (one for master and one for slave) while solr is running should be suitable...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;while true; do date --utc &amp;amp;&amp;amp; curl -sS &quot;http://localhost:8983/solr/collection1/replication?command=details&amp;amp;indent=truewt=json&quot; &amp;amp;&amp;amp; echo &amp;amp;&amp;amp; echo &amp;amp;&amp;amp; sleep 2; done 2&amp;gt;&amp;amp;1 &amp;gt; slave_rep_details.txt
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13620137" author="hossman" created="Tue, 2 Apr 2013 19:02:22 +0000"  >&lt;blockquote&gt;&lt;p&gt;Step to reproduce this issue is simple. Just apply commit on master without posting any documents&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ah... ok, wait a minute - this looks promising.  in reviewing the logs you sent to solr-user@lucene i didn&apos;t notice that this &quot;empty commit&quot; was happening, but in attempting to reproduce i think i see what you&apos;re talking about.&lt;/p&gt;

&lt;p&gt;Steps i followed...&lt;/p&gt;


&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;1) took the Solr 4.2 example/solr dir and cloned it as &quot;master-home&quot;&lt;/p&gt;

&lt;p&gt;2) edited the /replication handler to match what you posted in this issue (but adjusted the replicaiton time to 30 seconds for a faster test)&lt;/p&gt;

&lt;p&gt;3) cloned &quot;master-home&quot; as &quot;slave-home&quot;&lt;/p&gt;

&lt;p&gt;4) ran two instances of Solr 4.2 using hte following commands...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java -Denable.master=true -Dmaster.port=8999 -Djetty.port=8999 -Dsolr.solr.home=/home/hossman/tmp/ave_version_higher/master-home -jar start.jar &amp;amp;&amp;gt; /home/hossman/tmp/slave_version_higher/master.log
java -Denable.slave=true -Dmaster.port=899-Djetty.port=9999 -Dsolr.solr.home=/home/hossman/tmp/slave_version_higher/slave-home -jar start.jar &amp;amp;&amp;gt; /home/hossman/tmp/slave_version_higher/slave.log
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;5) ran two scripts to monitor replication details using the following commands...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;while true; do date --utc &amp;amp;&amp;amp; curl -sS &quot;http://localhost:9999/solr/collection1/replication?command=details&amp;amp;indent=truewt=json&quot; &amp;amp;&amp;amp; echo &amp;amp;&amp;amp; echo &amp;amp;&amp;amp; sleep 2; done &amp;amp;&amp;gt; slave_rep_details.txt
while true; do date --utc &amp;amp;&amp;amp; curl -sS &quot;http://localhost:8999/solr/collection1/replication?command=details&amp;amp;indent=truewt=json&quot; &amp;amp;&amp;amp; echo &amp;amp;&amp;amp; echo &amp;amp;&amp;amp; sleep 2; done &amp;amp;&amp;gt; master_rep_details.txt
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;6) triggered an indexing of all the example docs on master, and waited for replication.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java -Durl=http://localhost:8999/solr/collection1/update -jar post.jar *.xml
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;7) triggered an explicit commit on master...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java -Durl=http://localhost:8999/solr/collection1/update -jar post.jar -
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;8) shutdown both servers and the scripts (Ctrl-C)&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ve attached the full logs and home dirs at the completion of this test, but as a summmary of the results...&lt;/p&gt;

&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;a) slave &amp;amp; master index files are identical except for segments.gen&lt;/p&gt;

&lt;p&gt;b) the master&apos;s replication details indicate that the current commit being used is &quot;indexVersion#1364927050819, generation#2&quot; but it&apos;s list of commits does not include this, it contains a single commit of &quot;indexVersion#1364927114002, generation#3&quot;&lt;/p&gt;

&lt;p&gt;c) the slave&apos;s replication details indicate that the current commit being used is &quot;indexVersion#1364927050819, generation#2&quot; and that this is the only commit it has locally.  The slave&apos;s information about hte master is consistent with what the master itself reports.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m not certain, but I believe this is just an optimization where the searcher is not re-opened when the currently opened &quot;commit&quot; is identical to the new commit &amp;#8211; this optimization is working on the master, but aparently not on the slave (maybe the slave can&apos;t tell that the commits are identical?)  &lt;/p&gt;

&lt;p&gt;FWIW: after running this test, i restarted the master and it&apos;s replication details were consistent with the list of commit points &amp;#8211; it was using generation #3.   &lt;br/&gt;
You can also observe the exact same behavior from master&apos;s replication details (current generation lower then the generation of any commit point) if you do a hard commit with openSearcher=false.  &lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;I think most of the behavior here makes sense &amp;#8211; the slave is replicating the commits from the master, even if the master isn&apos;t using them yet because it hasn&apos;t opened a new searcher.  The key questions i wonder about:&lt;/p&gt;

&lt;p&gt;1) why was segments.get different when i ran my experiment? is that normal?&lt;br/&gt;
2) Assuming i&apos;m correct about their being an optimization to not open a new searcher if the commits are identical, can we make this same optimization work on slaves in the case of replication?&lt;/p&gt;


</comment>
                            <comment id="13620148" author="markrmiller@gmail.com" created="Tue, 2 Apr 2013 19:14:30 +0000"  >&lt;p&gt;The slave will actually do a reload if conf files are being replicated - so it&apos;s sure to open a new searcher currently. They generally shouldn&apos;t change every time though. It&apos;s a surprise that the master wouldn&apos;t open a new searcher - not sure where that would get short circuited - would have to dig a little.&lt;/p&gt;</comment>
                            <comment id="13620174" author="hossman" created="Tue, 2 Apr 2013 19:40:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;Assuming i&apos;m correct about their being an optimization to not open a new searcher if the commits are identical,&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I did some more experimenting and confirmed i was wrong about this &amp;#8211; from Solr&apos;s perspective a new searcher is definitely getting opened and warmed.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure, but skimming the code I &lt;b&gt;think&lt;/b&gt; this discrepancy between the commit point in use and the commit point on disk may just be a result of using  DirectoryReader.openIfChanged in SolrCore.openNewSearcher ... i got lost a bit in the code, but is it possible the reader DirectoryReader is returning null because only the generation changed by the comment, but not any of the actual indexed data?&lt;/p&gt;</comment>
                            <comment id="13620195" author="markrmiller@gmail.com" created="Tue, 2 Apr 2013 19:53:40 +0000"  >&lt;p&gt;It seems possible:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-comment&quot;&gt;// If in fact no changes took place, &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;:
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (reader.getVersion() == segmentInfos.getVersion()) {
      reader.decRef();
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;version described as:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  /**
   * Version number when &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; IndexReader was opened.
   *
   * &amp;lt;p&amp;gt;This method
   * returns the version recorded in the commit that the
   * reader opened.  This version is advanced every time
   * a change is made with {@link IndexWriter}.&amp;lt;/p&amp;gt;
   */
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;version is incremented when:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  /** Call &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; before committing &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; changes have been made to the
   *  segments. */
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void changed() {
    version++;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13620360" author="hossman" created="Tue, 2 Apr 2013 22:33:31 +0000"  >&lt;p&gt;Some more (manual) experimentation (doing empty commits, or commits with openSearcher=false on the master, triggering slave replication to get the slave &quot;ahead&quot; and then doing subsequent changes on master &amp;amp; replicating again) seems to confirm that this situation doesn&apos;t cause any actual problem in replication &amp;#8211; just confusion when looking at the replication details.  &lt;/p&gt;

&lt;p&gt;we can add automated tests for this type of situation to future proof ourselves against the risk that something like this causes problems w/replication in the future, but let&apos;s do that in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4629&quot; title=&quot;Stronger standard replication testing.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4629&quot;&gt;&lt;del&gt;SOLR-4629&lt;/del&gt;&lt;/a&gt; ... i think the crux of this issue is really one of mitigating user confusion.&lt;/p&gt;

&lt;p&gt;I suggest we update the admin UI to de-emphasize the comparison of the slave(version+generation) to master(version+generation), and instead emphasize a comparison of the slave(version+generation) with the master(replicateableVersion+replicatableGeneration).&lt;/p&gt;

&lt;p&gt;replicatableGeneration is already available in the details, we should be able to add replicatableVersion easy enough.&lt;/p&gt;</comment>
                            <comment id="13621659" author="hossman" created="Thu, 4 Apr 2013 02:08:23 +0000"  >&lt;p&gt;Here&apos;s a patch that updates the Admin UI Replication screen to distinguish the difference between what is currently searchable on the master, and what is currently replicatable.&lt;/p&gt;

&lt;p&gt;differences are highlighted on the slave only if it differs from what is replicatable on the master (not what is searchable) so this should hopefully help reduce confusion.&lt;/p&gt;

&lt;p&gt;Concerns i still have with this patch...&lt;/p&gt;

&lt;p&gt;1) &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steffkes&quot; class=&quot;user-hover&quot; rel=&quot;steffkes&quot;&gt;steffkes&lt;/a&gt;: please ensure i didn&apos;t butcher the admin UI js too badly ... i think i&apos;ve covered all the edge cases.&lt;br/&gt;
2) &quot;Replicatable&quot; is not a word, but using &quot;Replicable&quot; doesn&apos;t have the right definition ... is there a different word we should use here, or should we just do our part to &lt;em&gt;make&lt;/em&gt; Replicatable a word?&lt;/p&gt;</comment>
                            <comment id="13621661" author="hossman" created="Thu, 4 Apr 2013 02:13:20 +0000"  >&lt;p&gt;update summary &amp;amp; description based on investigation&lt;/p&gt;</comment>
                            <comment id="13632958" author="hossman" created="Tue, 16 Apr 2013 16:17:11 +0000"  >&lt;p&gt;updated patch to trunk and switched terminology to &quot;replicable&quot; (the more i thought about it, the less i thought that the definition wasn&apos;t applicable)&lt;/p&gt;</comment>
                            <comment id="13633206" author="steffkes" created="Tue, 16 Apr 2013 19:06:51 +0000"  >&lt;p&gt;Updated Patch, includes changes from the replication page for the dashboard (were the same information also appear).&lt;/p&gt;

&lt;p&gt;Missing Information/Empty Versions are shown as &apos;-&apos; so it should be clear for everyone&lt;/p&gt;</comment>
                            <comment id="13634041" author="joel.bernstein" created="Wed, 17 Apr 2013 13:57:40 +0000"  >&lt;p&gt;I&apos;m concerned about the empty commits opening a new index searcher on the slave. In my testing I found that empty commits do not cause a new searcher to open on master, but do open a new searcher on the slave. This feels like a bug. I&apos;ll investigate further. Wondering what peoples thoughts are on this?&lt;/p&gt;</comment>
                            <comment id="13634372" author="hossman" created="Wed, 17 Apr 2013 20:15:34 +0000"  >&lt;p&gt;Joel: please note my earlier comments...&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I did some more experimenting and confirmed i was wrong about this &#8211; from Solr&apos;s perspective a new searcher is definitely getting opened and warmed.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;...you can clearly see in the logs that an &quot;empty&quot; commit causes a new Searcher to be opened in any situation &amp;#8211; but when it happens on the master the underlying call to &quot;DirectoryReader.openIfChanged&quot; recognizes that the commit point in the directory is identical.  On the slave side it may not recognize this because the physical directory itself can change (ie: index vs index.XXXXXXXX)&lt;/p&gt;

&lt;p&gt;Even if there is a bug here (or room for optimization on the slave side) we should track it separately since the crux of thies issue (the UI is comparing apples and oranges) would still be true &amp;#8211; notably in the case where someone may do an openSearcher=false commit on the master, creating a new replicable version for slaves w/o opening a new searcher on the master.&lt;/p&gt;
</comment>
                            <comment id="13634393" author="elyograg" created="Wed, 17 Apr 2013 20:35:30 +0000"  >&lt;p&gt;That assignment was done accidentally with keyboard shortcuts.  I tried to load a new URL in the Firefox tab by pressing Ctrl-L and typing the domain name, but apparently Jira&apos;s keyboard shortcuts take precedence over the browser.&lt;/p&gt;</comment>
                            <comment id="13634454" author="hossman" created="Wed, 17 Apr 2013 21:22:09 +0000"  >&lt;p&gt;Committed revision 1469073.&lt;br/&gt;
Committed revision 1469074.&lt;br/&gt;
Committed revision 1469076.&lt;/p&gt;</comment>
                            <comment id="13654211" author="thetaphi" created="Fri, 10 May 2013 10:34:24 +0000"  >&lt;p&gt;Closed after release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12638328">SOLR-4622</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12576399" name="IndexVersionSyncIssue.jpg" size="42322" author="abakle" created="Mon, 1 Apr 2013 17:09:20 +0000"/>
                            <attachment id="12578993" name="SOLR-4661.patch" size="13897" author="steffkes" created="Tue, 16 Apr 2013 19:06:51 +0000"/>
                            <attachment id="12578956" name="SOLR-4661.patch" size="9253" author="hossman" created="Tue, 16 Apr 2013 16:17:11 +0000"/>
                            <attachment id="12576908" name="SOLR-4661.patch" size="8563" author="hossman" created="Thu, 4 Apr 2013 02:08:23 +0000"/>
                            <attachment id="12576632" name="hoss_test.zip" size="350335" author="hossman" created="Tue, 2 Apr 2013 19:02:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>320593</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1jbd3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>320934</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>