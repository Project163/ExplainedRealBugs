<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:17:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9518] Kerberos Delegation Tokens doesn&apos;t work without a chrooted ZK</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9518</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Starting up Solr 6.2.0 (with delegation tokens enabled) that doesn&apos;t have a chrooted ZK, I see the following in the startup logs:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2016-09-15 07:08:22.453 ERROR (main) [   ] o.a.s.s.SolrDispatchFilter Could not start Solr. Check solr/home property and the logs
2016-09-15 07:08:22.477 ERROR (main) [   ] o.a.s.c.SolrCore &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;:java.lang.StringIndexOutOfBoundsException: &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; index out of range: -1
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.substring(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.java:1927)
        at org.apache.solr.security.KerberosPlugin.init(KerberosPlugin.java:138)
        at org.apache.solr.core.CoreContainer.initializeAuthenticationPlugin(CoreContainer.java:316)
        at org.apache.solr.core.CoreContainer.load(CoreContainer.java:442)
        at org.apache.solr.servlet.SolrDispatchFilter.createCoreContainer(SolrDispatchFilter.java:158)
        at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:134)
        at org.eclipse.jetty.servlet.FilterHolder.initialize(FilterHolder.java:137)
        at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:856)
        at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:348)
        at org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1379)
        at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1341)
        at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:772)
        at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:261)
        at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:517)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)
        at org.eclipse.jetty.deploy.bindings.StandardStarter.processBinding(StandardStarter.java:41)
        at org.eclipse.jetty.deploy.AppLifeCycle.runBindings(AppLifeCycle.java:188)
        at org.eclipse.jetty.deploy.DeploymentManager.requestAppGoal(DeploymentManager.java:499)
        at org.eclipse.jetty.deploy.DeploymentManager.addApp(DeploymentManager.java:147)
        at org.eclipse.jetty.deploy.providers.ScanningAppProvider.fileAdded(ScanningAppProvider.java:180)
at org.eclipse.jetty.deploy.providers.WebAppProvider.fileAdded(WebAppProvider.java:458)
at org.eclipse.jetty.deploy.providers.ScanningAppProvider$1.fileAdded(ScanningAppProvider.java:64)
at org.eclipse.jetty.util.Scanner.reportAddition(Scanner.java:610)
at org.eclipse.jetty.util.Scanner.reportDifferences(Scanner.java:529)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To me, it seems that adding a check for the presence of a chrooted ZK, and, calculating the relative ZK path only if it exists should suffice. I&apos;ll add a patch for this shortly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13005099">SOLR-9518</key>
            <summary>Kerberos Delegation Tokens doesn&apos;t work without a chrooted ZK</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="noble.paul">Noble Paul</assignee>
                                    <reporter username="ichattopadhyaya">Ishan Chattopadhyaya</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Sep 2016 07:46:29 +0000</created>
                <updated>Sat, 8 Jun 2019 15:34:08 +0000</updated>
                            <resolved>Fri, 28 Oct 2016 12:39:02 +0000</resolved>
                                                    <fixVersion>6.3</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15496778" author="ichattopadhyaya" created="Fri, 16 Sep 2016 16:44:15 +0000"  >&lt;p&gt;Here&apos;s a patch addressing the issue. I&apos;ll confirm that this works after a complete end-to-end testing.&lt;/p&gt;</comment>
                            <comment id="15503040" author="ichattopadhyaya" created="Mon, 19 Sep 2016 10:30:58 +0000"  >&lt;p&gt;Updating patch for master.&lt;/p&gt;</comment>
                            <comment id="15509506" author="ichattopadhyaya" created="Wed, 21 Sep 2016 10:29:37 +0000"  >&lt;p&gt;I tested this patch end to end for a ZK setup that doesn&apos;t use chroot and it works fine now.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gchanan&quot; class=&quot;user-hover&quot; rel=&quot;gchanan&quot;&gt;gchanan&lt;/a&gt;, can you please review?&lt;/p&gt;</comment>
                            <comment id="15522053" author="ichattopadhyaya" created="Mon, 26 Sep 2016 04:59:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt;, can you please review?&lt;/p&gt;</comment>
                            <comment id="15601245" author="jira-bot" created="Mon, 24 Oct 2016 07:36:58 +0000"  >&lt;p&gt;Commit 9b49c72dbc4d27a3160b34b5e38e095ca85daa6f in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9b49c72&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9b49c72&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9518&quot; title=&quot;Kerberos Delegation Tokens doesn&amp;#39;t work without a chrooted ZK&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9518&quot;&gt;&lt;del&gt;SOLR-9518&lt;/del&gt;&lt;/a&gt;: Kerberos Delegation Tokens don&apos;t work without a chrooted ZK&lt;/p&gt;</comment>
                            <comment id="15601696" author="ichattopadhyaya" created="Mon, 24 Oct 2016 11:24:36 +0000"  >&lt;p&gt;Thanks Noble. Here&apos;s the patch for branch_6x.&lt;/p&gt;</comment>
                            <comment id="15601821" author="jira-bot" created="Mon, 24 Oct 2016 12:22:51 +0000"  >&lt;p&gt;Commit a973ca1752fccecee8db7d2a7a09ded7159e4c58 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a973ca1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a973ca1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9518&quot; title=&quot;Kerberos Delegation Tokens doesn&amp;#39;t work without a chrooted ZK&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9518&quot;&gt;&lt;del&gt;SOLR-9518&lt;/del&gt;&lt;/a&gt;: Kerberos Delegation Tokens don&apos;t work without a chrooted ZK&lt;/p&gt;</comment>
                            <comment id="15608827" author="erickerickson" created="Wed, 26 Oct 2016 15:46:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ichattopadhyaya&quot; class=&quot;user-hover&quot; rel=&quot;ichattopadhyaya&quot;&gt;ichattopadhyaya&lt;/a&gt; can we close this ticket? The code&apos;s been committed....&lt;/p&gt;</comment>
                            <comment id="15650210" author="shalinmangar" created="Wed, 9 Nov 2016 08:37:08 +0000"  >&lt;p&gt;Closing after 6.3.0 release.&lt;/p&gt;</comment>
                            <comment id="16436121" author="varunthacker" created="Thu, 12 Apr 2018 18:41:16 +0000"  >&lt;p&gt;I&apos;m trying to understand what happened here with the commit.&lt;/p&gt;

&lt;p&gt;We ran into this issue in Solr 6.6. Looks like the commit made it to Solr 6.3 , but is missing in Solr 6.4 , 6.5 , 6.6 . Solr 7.0 onwards has it&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12834920" name="SOLR-9518-6x.patch" size="3713" author="ichattopadhyaya" created="Mon, 24 Oct 2016 11:24:36 +0000"/>
                            <attachment id="12830296" name="SOLR-9518.patch" size="3672" author="ichattopadhyaya" created="Mon, 26 Sep 2016 12:41:16 +0000"/>
                            <attachment id="12829175" name="SOLR-9518.patch" size="3097" author="ichattopadhyaya" created="Mon, 19 Sep 2016 10:30:58 +0000"/>
                            <attachment id="12828852" name="SOLR-9518.patch" size="3077" author="ichattopadhyaya" created="Fri, 16 Sep 2016 16:44:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 31 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33nmn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>