<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:25:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-11025] OverseerTest.testShardLeaderChange() failures</title>
                <link>https://issues.apache.org/jira/browse/SOLR-11025</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Non-reproducing Jenkins failure - this test hasn&apos;t failed in Jenkins in months, and suddenly several failures within days of each other:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://jenkins.thetaphi.de/job/Lucene-Solr-7.x-Linux/18/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jenkins.thetaphi.de/job/Lucene-Solr-7.x-Linux/18/&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Checking out Revision 986175915927ee2bbd971340f858601c86b3c676 (refs/remotes/origin/branch_7x)
[...]
   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=OverseerTest -Dtests.method=testShardLeaderChange -Dtests.seed=995C82D4739EF7D8 -Dtests.multiplier=3 -Dtests.slow=true -Dtests.locale=ru -Dtests.timezone=Asia/Calcutta -Dtests.asserts=true -Dtests.file.encoding=UTF-8
   [junit4] FAILURE  223s J2 | OverseerTest.testShardLeaderChange &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: Unexpected shard leader coll:collection1 shard:shard1 expected:&amp;lt;core1&amp;gt; but was:&amp;lt;null&amp;gt;
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([995C82D4739EF7D8:470F052369060229]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.OverseerTest.verifyShardLeader(OverseerTest.java:486)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.OverseerTest.testShardLeaderChange(OverseerTest.java:720)
[...]
   [junit4]   2&amp;gt; NOTE: test params are: codec=Asserting(Lucene70): {}, docValues:{}, maxPointsInLeafNode=892, maxMBSortInHeap=5.965872045375053, sim=RandomSimilarity(queryNorm=false): {}, locale=ru, timezone=Asia/Calcutta
   [junit4]   2&amp;gt; NOTE: Linux 4.10.0-21-generic i386/Oracle Corporation 1.8.0_131 (32-bit)/cpus=8,threads=1,free=96275160,total=293539840
   [junit4]   2&amp;gt; NOTE: All tests run in this JVM: [HardAutoCommitTest, SimplePostToolTest, TestSolrCoreSnapshots, ReplicationFactorTest, TestSolrCoreProperties, TestSha256AuthenticationProvider, TestExpandComponent, TestCloudRecovery, ConfigureRecoveryStrategyTest, TimeZoneUtilsTest, TestTolerantUpdateProcessorRandomCloud, TestExceedMaxTermLength, PrimitiveFieldTypeTest, SolrInfoBeanTest, FullSolrCloudDistribCmdsTest, UniqFieldsUpdateProcessorFactoryTest, TestReplicaProperties, SolrCloudReportersTest, UnloadDistributedZkTest, CleanupOldIndexTest, LeaderInitiatedRecoveryOnShardRestartTest, FastVectorHighlighterTest, TestOrdValues, MinimalSchemaTest, TestSubQueryTransformerCrossCore, ParsingFieldUpdateProcessorsTest, BufferStoreTest, TestLegacyFieldReuse, CollectionsAPISolrJTest, TestSchemalessBufferedUpdates, ConnectionManagerTest, MetricsConfigTest, TestPayloadScoreQParserPlugin, TermVectorComponentDistributedTest, TestLMJelinekMercerSimilarityFactory, TestFastWriter, MultiTermTest, HdfsBasicDistributedZk2Test, V2StandaloneTest, DocumentBuilderTest, TestMultiValuedNumericRangeQuery, AnalyticsMergeStrategyTest, TestNumericTokenStream, TestFieldCacheSort, TestSolrCloudWithSecureImpersonation, TestBlendedInfixSuggestions, ResponseLogComponentTest, CopyFieldTest, TestAuthenticationFramework, BlockJoinFacetDistribTest, TestFieldSortValues, TestJmxIntegration, SolrTestCaseJ4Test, BasicAuthIntegrationTest, URLClassifyProcessorTest, DateFieldTest, TestExactSharedStatsCache, TestFieldTypeCollectionResource, ExplicitHLLTest, ConjunctionSolrSpellCheckerTest, TestLeaderElectionWithEmptyReplica, TestReloadAndDeleteDocs, ClusterStateTest, TestSQLHandler, HdfsRecoverLeaseTest, QueryEqualityTest, UUIDUpdateProcessorFallbackTest, ClassificationUpdateProcessorFactoryTest, DistributedSuggestComponentTest, TestHalfAndHalfDocValues, ShowFileRequestHandlerTest, ExitableDirectoryReaderTest, TestInfoStreamLogging, TestLocalFSCloudBackupRestore, ChaosMonkeyNothingIsSafeWithPullReplicasTest, TestSort, NumericFieldsTest, DirectUpdateHandlerTest, SuggesterFSTTest, NodeMutatorTest, DateMathParserTest, DistribCursorPagingTest, CircularListTest, CloneFieldUpdateProcessorFactoryTest, OverseerCollectionConfigSetProcessorTest, DateRangeFieldTest, TestDFRSimilarityFactory, XsltUpdateRequestHandlerTest, TestConfigSetsAPI, CoreMergeIndexesAdminHandlerTest, TestSerializedLuceneMatchVersion, TestPrepRecovery, TestNoOpRegenerator, DistributedFacetPivotWhiteBoxTest, LeaderFailoverAfterPartitionTest, TestSolrFieldCacheBean, OverseerTest]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Following is the first of 4 failures from my Jenkins in the last 24 hours or so on branch_7_0 and branch_7x:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Checking out Revision 17245c2e5a93bca59572c09af78a6ad6045e75eb (refs/remotes/origin/branch_7x)
[...]
   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=OverseerTest -Dtests.method=testShardLeaderChange -Dtests.seed=F2D09FE89D52D09C -Dtests.slow=true -Dtests.locale=en-CA -Dtests.timezone=America/Indiana/Indianapolis -Dtests.asserts=true -Dtests.file.encoding=US-ASCII
   [junit4] FAILURE  221s J1  | OverseerTest.testShardLeaderChange &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: Unexpected shard leader coll:collection1 shard:shard1 expected:&amp;lt;core1&amp;gt; but was:&amp;lt;null&amp;gt;
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([F2D09FE89D52D09C:2C83181F87CA256D]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.OverseerTest.verifyShardLeader(OverseerTest.java:486)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.OverseerTest.testShardLeaderChange(OverseerTest.java:720)
[...]
   [junit4]   2&amp;gt; NOTE: test params are: codec=Lucene70, sim=RandomSimilarity(queryNorm=true): {}, locale=en-CA, timezone=America/Indiana/Indianapolis
   [junit4]   2&amp;gt; NOTE: Linux 4.1.0-custom2-amd64 amd64/Oracle Corporation 1.8.0_77 (64-bit)/cpus=16,threads=1,free=189800952,total=529006592
   [junit4]   2&amp;gt; NOTE: All tests run in this JVM: [TestExtendedDismaxParser, CopyFieldTest, TestBlobHandler, TestManagedSchema, LeaderFailoverAfterPartitionTest, SolrJmxReporterTest, PolyFieldTest, TestMinMaxOnMultiValuedField, SolrIndexConfigTest, TestSchemaSimilarityResource, AssignTest, TestSegmentSorting, HdfsRestartWhileUpdatingTest, CloneFieldUpdateProcessorFactoryTest, TestSQLHandler, TestLuceneMatchVersion, OverseerTest]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13085376">SOLR-11025</key>
            <summary>OverseerTest.testShardLeaderChange() failures</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dragonsinth">Scott Blum</assignee>
                                    <reporter username="sarowe">Steven Rowe</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Jul 2017 01:50:30 +0000</created>
                <updated>Sat, 8 Jun 2019 15:24:12 +0000</updated>
                            <resolved>Fri, 7 Jul 2017 20:00:21 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16077712" author="shalinmangar" created="Fri, 7 Jul 2017 06:58:08 +0000"  >&lt;p&gt;The only recent change related to Overseer is &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10983&quot; title=&quot;Fix DOWNNODE -&amp;gt; queue-work explosion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10983&quot;&gt;&lt;del&gt;SOLR-10983&lt;/del&gt;&lt;/a&gt; &amp;#8211; ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dragonsinth&quot; class=&quot;user-hover&quot; rel=&quot;dragonsinth&quot;&gt;dragonsinth&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16077749" author="dragonsinth" created="Fri, 7 Jul 2017 07:39:25 +0000"  >&lt;p&gt;Possible issue: the order or operations in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10983&quot; title=&quot;Fix DOWNNODE -&amp;gt; queue-work explosion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10983&quot;&gt;&lt;del&gt;SOLR-10983&lt;/del&gt;&lt;/a&gt; is to first remove the item from queue, then add it to queue-work, to avoid duplicating an item.  But perhaps there&apos;s a small chance of losing an update?  Would the other order be better?&lt;/p&gt;</comment>
                            <comment id="16077762" author="shalinmangar" created="Fri, 7 Jul 2017 07:54:59 +0000"  >&lt;p&gt;Yeah, I think the other is better. That is how it used to work i.e. add to work-queue first then remove from state update queue.&lt;/p&gt;</comment>
                            <comment id="16077777" author="dragonsinth" created="Fri, 7 Jul 2017 08:16:35 +0000"  >&lt;p&gt;Any way to test if this fixes the failure before we commit it to 3 branches?&lt;/p&gt;</comment>
                            <comment id="16077799" author="shalinmangar" created="Fri, 7 Jul 2017 08:27:39 +0000"  >&lt;p&gt;We can try beasting this test before/after the patch. &lt;tt&gt;ant test-help&lt;/tt&gt; is your friend.&lt;/p&gt;

&lt;p&gt;I&apos;m beasting on my box before the patch on master to see how easily this failure is reproduced.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ant beast -Dtests.dups=3 -Dbeast.iters=10 -Dtestcase=OverseerTest -Dtests.method=testShardLeaderChange -Dtests.multiplier=3 -Dtests.slow=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.locale=ru -Dtests.timezone=Asia/Calcutta -Dtests.asserts=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.file.encoding=UTF-8
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16077856" author="shalinmangar" created="Fri, 7 Jul 2017 09:25:57 +0000"  >&lt;p&gt;I ran upto 50 iterations but couldn&apos;t get the test to fail without the patch. I think we should commit this and let jenkins have a go. We&apos;ll know in a couple of days if it fixed the problem or not.&lt;/p&gt;</comment>
                            <comment id="16078440" author="dragonsinth" created="Fri, 7 Jul 2017 17:52:53 +0000"  >&lt;p&gt;Will committing to master be sufficient a test?  Or does it need to go on 7x and 7_0 immediately?&lt;/p&gt;</comment>
                            <comment id="16078463" author="erickerickson" created="Fri, 7 Jul 2017 18:04:56 +0000"  >&lt;p&gt;I wouldn&apos;t go to 7.0 quite yet, but master and 7x seem reasonable. &lt;/p&gt;

&lt;p&gt;I&apos;ll start a beasting run on my Pro with the current master code and see if I can get a failure too....&lt;/p&gt;</comment>
                            <comment id="16078485" author="steve_rowe" created="Fri, 7 Jul 2017 18:19:56 +0000"  >&lt;blockquote&gt;&lt;p&gt;Will committing to master be sufficient a test? Or does it need to go on 7x and 7_0 immediately?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I beasted 200 iterations of the whole suite on branch_7x unpatched (using Miller&apos;s beasting script), and there were 10 failures, all of which were of &lt;tt&gt;.testShardLeaderChange()&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I&apos;ve just kicked off another round with the patch applied to branch_7x, should take less than an hour.  I&apos;ll report back here when it&apos;s done.&lt;/p&gt;</comment>
                            <comment id="16078506" author="dragonsinth" created="Fri, 7 Jul 2017 18:40:13 +0000"  >&lt;p&gt;You da bomb &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16078543" author="steve_rowe" created="Fri, 7 Jul 2017 19:12:22 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;ve just kicked off another round with the patch applied to branch_7x&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There were 0 failures on the patched branch_7x out of 200 iterations.&lt;/p&gt;

&lt;p&gt;+1 to apply to master+branch_7x.&lt;/p&gt;</comment>
                            <comment id="16078599" author="jira-bot" created="Fri, 7 Jul 2017 19:56:23 +0000"  >&lt;p&gt;Commit cd2f635f0bd0b772480bd5d8515d2b443372bf09 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dragonsinth&quot; class=&quot;user-hover&quot; rel=&quot;dragonsinth&quot;&gt;dragonsinth&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=cd2f635&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=cd2f635&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11025&quot; title=&quot;OverseerTest.testShardLeaderChange() failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11025&quot;&gt;&lt;del&gt;SOLR-11025&lt;/del&gt;&lt;/a&gt;: fix OverseerTest.testShardLeaderChange() failures&lt;/p&gt;</comment>
                            <comment id="16078600" author="jira-bot" created="Fri, 7 Jul 2017 19:56:40 +0000"  >&lt;p&gt;Commit 5ba509dbd267d28f616d20c195b7fad70fc6064b in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dragonsinth&quot; class=&quot;user-hover&quot; rel=&quot;dragonsinth&quot;&gt;dragonsinth&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=5ba509d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=5ba509d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11025&quot; title=&quot;OverseerTest.testShardLeaderChange() failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11025&quot;&gt;&lt;del&gt;SOLR-11025&lt;/del&gt;&lt;/a&gt;: fix OverseerTest.testShardLeaderChange() failures&lt;/p&gt;</comment>
                            <comment id="16078601" author="jira-bot" created="Fri, 7 Jul 2017 19:56:56 +0000"  >&lt;p&gt;Commit 6cdc0060e5c3b93f0764d7e8e441fa21931fe60d in lucene-solr&apos;s branch refs/heads/branch_7_0 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dragonsinth&quot; class=&quot;user-hover&quot; rel=&quot;dragonsinth&quot;&gt;dragonsinth&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=6cdc006&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=6cdc006&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11025&quot; title=&quot;OverseerTest.testShardLeaderChange() failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11025&quot;&gt;&lt;del&gt;SOLR-11025&lt;/del&gt;&lt;/a&gt;: fix OverseerTest.testShardLeaderChange() failures&lt;/p&gt;</comment>
                            <comment id="16078603" author="dragonsinth" created="Fri, 7 Jul 2017 20:00:05 +0000"  >&lt;p&gt;Thanks guys!  I didn&apos;t bother adding an entry to CHANGES.txt, didn&apos;t seem relevant for user facing purposes.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12876046" name="SOLR-11025.patch" size="699" author="dragonsinth" created="Fri, 7 Jul 2017 08:16:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3h7zz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>