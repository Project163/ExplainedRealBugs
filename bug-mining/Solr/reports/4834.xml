<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:50:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16002] FilterQuery (`filter([some_query])`) can be double-cached when used in certain contexts</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16002</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;&lt;tt&gt;FilterQuery&lt;/tt&gt; (usually invoked by the &lt;tt&gt;filter(&lt;span class=&quot;error&quot;&gt;&amp;#91;inner_query&amp;#93;&lt;/span&gt;)&lt;/tt&gt; syntax in the Standard Query Parser), can be double-cached if it&apos;s used in certain contexts. The clearest case is if you specify &lt;tt&gt;fq=filter(field_s:value)&lt;/tt&gt;, this will hit the filterCache twice:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;once at the top/fq level, as a FilterQuery&lt;/li&gt;
	&lt;li&gt;once as the inner &lt;tt&gt;field_s:value&lt;/tt&gt; query, wrapped by the FilterQuery.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;This might seem like an anti-pattern, but there are cases where it&apos;s really practical to support this usage; namely, bundling main query and fqs into a single query (e.g., to use as the &quot;foreground query&quot; for SKG/relatedness ... but there are likely other cases). Without the ability to consult the cache for wrapped clauses, such a use case hits serious problems. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13427887">SOLR-16002</key>
            <summary>FilterQuery (`filter([some_query])`) can be double-cached when used in certain contexts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="magibney">Michael Gibney</assignee>
                                    <reporter username="magibney">Michael Gibney</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Feb 2022 22:24:29 +0000</created>
                <updated>Fri, 17 Oct 2025 20:04:46 +0000</updated>
                            <resolved>Tue, 29 Mar 2022 18:23:58 +0000</resolved>
                                    <version>10.0</version>
                                    <fixVersion>9.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="14400">4h</timespent>
                                <comments>
                            <comment id="17490553" author="mgibney" created="Thu, 10 Feb 2022 22:31:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/solr/pull/624&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR #624&lt;/a&gt; adds a fix and a test that demonstrates the problem.&lt;/p&gt;</comment>
                            <comment id="17490971" author="mgibney" created="Fri, 11 Feb 2022 15:09:12 +0000"  >&lt;p&gt;This is a really minor, straightforward change. I plan to merge it early next week, pending any feedback.&lt;/p&gt;</comment>
                            <comment id="17491816" author="mkhludnev" created="Mon, 14 Feb 2022 06:45:12 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="17514264" author="jira-bot" created="Tue, 29 Mar 2022 18:16:37 +0000"  >&lt;p&gt;Commit 534696cf0e83c8671a1d3ef31e2ba2e6a93d7ec0 in solr&apos;s branch refs/heads/main from Michael Gibney&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=534696c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=534696c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16002&quot; title=&quot;FilterQuery (`filter([some_query])`) can be double-cached when used in certain contexts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16002&quot;&gt;&lt;del&gt;SOLR-16002&lt;/del&gt;&lt;/a&gt;: Avoid redundant `FilterQuery` caching, e.g. via `filter($query)` syntax (#624)&lt;/p&gt;
</comment>
                            <comment id="17514269" author="jira-bot" created="Tue, 29 Mar 2022 18:22:37 +0000"  >&lt;p&gt;Commit f90af2aa0c522055abec4eac346c562afc38bd3a in solr&apos;s branch refs/heads/branch_9x from Michael Gibney&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=f90af2a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=f90af2a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16002&quot; title=&quot;FilterQuery (`filter([some_query])`) can be double-cached when used in certain contexts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16002&quot;&gt;&lt;del&gt;SOLR-16002&lt;/del&gt;&lt;/a&gt;: Avoid redundant `FilterQuery` caching, e.g. via `filter($query)` syntax (#624)&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 534696cf0e83c8671a1d3ef31e2ba2e6a93d7ec0)&lt;/p&gt;</comment>
                            <comment id="17656958" author="ishan" created="Tue, 10 Jan 2023 20:45:39 +0000"  >&lt;p&gt;Bulk closing 9.1 issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 44 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0zh4o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>