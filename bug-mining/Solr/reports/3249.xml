<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:19:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-10104] BlockDirectoryCache release hooks do not work with multiple directories</title>
                <link>https://issues.apache.org/jira/browse/SOLR-10104</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/5738c293f0c3f346b3e3e52c937183060d59cba1/solr/core/src/java/org/apache/solr/store/blockcache/BlockDirectoryCache.java#L53&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/5738c293f0c3f346b3e3e52c937183060d59cba1/solr/core/src/java/org/apache/solr/store/blockcache/BlockDirectoryCache.java#L53&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (releaseBlocks) {
      keysToRelease = Collections.newSetFromMap(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ConcurrentHashMap&amp;lt;BlockCacheKey,&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;&amp;gt;(1024, 0.75f, 512));
      blockCache.setOnRelease(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; OnRelease() {
        
        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void release(BlockCacheKey key) {
          keysToRelease.remove(key);
        }
      });
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If we&apos;re using the global block cache option and create multiple directories using the same factory, we will lose the release hook for the first directory. I think we can verify that by creating a server with multiple cores.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041473">SOLR-10104</key>
            <summary>BlockDirectoryCache release hooks do not work with multiple directories</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="mdrob">Mike Drob</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2017 20:16:44 +0000</created>
                <updated>Sat, 8 Jun 2019 15:32:43 +0000</updated>
                            <resolved>Tue, 14 Feb 2017 17:31:45 +0000</resolved>
                                    <version>6.4</version>
                                    <fixVersion>6.5</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                    <component>hdfs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15858490" author="markrmiller@gmail.com" created="Wed, 8 Feb 2017 20:18:29 +0000"  >&lt;p&gt;Great catch!&lt;/p&gt;</comment>
                            <comment id="15866189" author="jira-bot" created="Tue, 14 Feb 2017 17:28:37 +0000"  >&lt;p&gt;Commit a1f114f70f3800292c25be08213edf39b3e37f6a in lucene-solr&apos;s branch refs/heads/master from markrmiller&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a1f114f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a1f114f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10104&quot; title=&quot;BlockDirectoryCache release hooks do not work with multiple directories&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10104&quot;&gt;&lt;del&gt;SOLR-10104&lt;/del&gt;&lt;/a&gt;: BlockDirectoryCache release hooks do not work with multiple directories.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Conflicts:&lt;/li&gt;
	&lt;li&gt;solr/CHANGES.txt&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="15866196" author="jira-bot" created="Tue, 14 Feb 2017 17:31:16 +0000"  >&lt;p&gt;Commit 7f77f71201250c143c0438d5bb34a59ee964d41b in lucene-solr&apos;s branch refs/heads/branch_6x from markrmiller&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7f77f71&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7f77f71&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10104&quot; title=&quot;BlockDirectoryCache release hooks do not work with multiple directories&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10104&quot;&gt;&lt;del&gt;SOLR-10104&lt;/del&gt;&lt;/a&gt;: BlockDirectoryCache release hooks do not work with multiple directories.&lt;/p&gt;</comment>
                            <comment id="15866197" author="markrmiller@gmail.com" created="Tue, 14 Feb 2017 17:31:45 +0000"  >&lt;p&gt;Thanks Mike!&lt;/p&gt;</comment>
                            <comment id="15890129" author="yseeley@gmail.com" created="Wed, 1 Mar 2017 13:09:32 +0000"  >&lt;p&gt;Related, doesn&apos;t this now mean that removal listeners (set by setOnRelease) will grow without bound for a non-global BlockCache?&lt;br/&gt;
Is it important to continue supporting a non-global BlockCache?&lt;/p&gt;</comment>
                            <comment id="15890233" author="markrmiller@gmail.com" created="Wed, 1 Mar 2017 14:10:27 +0000"  >&lt;p&gt;I have been considering the non global cache a bug. Just kept it around for&lt;br/&gt;
Back compact mostly. And that global is kind of configured funky being in solrconfig.xml. &lt;/p&gt;</comment>
                            <comment id="15892234" author="mdrob" created="Thu, 2 Mar 2017 13:27:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;I have been considering the non global cache a bug. Just kept it around for&lt;br/&gt;
Back compact mostly. And that global is kind of configured funky being in solrconfig.xml.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I filed &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10222&quot; title=&quot;Remove per-core blockcache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10222&quot;&gt;&lt;del&gt;SOLR-10222&lt;/del&gt;&lt;/a&gt; for this&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12987185">SOLR-9284</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39t33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>