<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:50:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6037] Stats Component Reports Incorrect max/sum/stddev for date fields in Distributed Data</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6037</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When computing statistics using the statistics component, the value for max may be reported incorrectly if the maximum value does not lie in the first shard. &lt;/p&gt;

&lt;p&gt;This is where the problem is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;StatsValuesFactory.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void updateMinMax(Date min, Date max) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.min==&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.min.after(min)) {
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.min = min;
    }
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.max==&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.max.before(min)) {
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.max = max;
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Attached is a one-line patch which fixes this issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12711714">SOLR-6037</key>
            <summary>Stats Component Reports Incorrect max/sum/stddev for date fields in Distributed Data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="brett.lucey">Brett Lucey</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 May 2014 14:35:00 +0000</created>
                <updated>Mon, 9 May 2016 18:51:29 +0000</updated>
                            <resolved>Fri, 2 May 2014 01:02:21 +0000</resolved>
                                                    <fixVersion>4.8.1</fixVersion>
                    <fixVersion>4.9</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SearchComponents - other</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13987204" author="hossman" created="Fri, 2 May 2014 00:17:13 +0000"  >&lt;p&gt;Ugh... &lt;/p&gt;

&lt;p&gt;Brett: thanks for reporting this.  &lt;/p&gt;

&lt;p&gt;I&apos;ve updated your patch to account for the fact that min/max might be null coming back from a shard.  When updating the existing distributed stats test to also include date fields to trigger this problem, I uncovered another glitch in how the sum/stddev are computed (sum was inited to &quot;-1&quot; for some bizare reason) which is also fixed in this updated patch.&lt;/p&gt;</comment>
                            <comment id="13987206" author="hossman" created="Fri, 2 May 2014 00:17:55 +0000"  >&lt;p&gt;updating summary&lt;/p&gt;</comment>
                            <comment id="13987212" author="hossman" created="Fri, 2 May 2014 00:25:32 +0000"  >&lt;p&gt;updated patch with a bit more test coverage&lt;/p&gt;</comment>
                            <comment id="13987213" author="jira-bot" created="Fri, 2 May 2014 00:33:30 +0000"  >&lt;p&gt;Commit 1591800 from hossman@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1591800&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1591800&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6037&quot; title=&quot;Stats Component Reports Incorrect max/sum/stddev for date fields in Distributed Data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6037&quot;&gt;&lt;del&gt;SOLR-6037&lt;/del&gt;&lt;/a&gt;: Fixed incorrect max/sum/stddev for Date fields in StatsComponent&lt;/p&gt;</comment>
                            <comment id="13987227" author="jira-bot" created="Fri, 2 May 2014 00:59:08 +0000"  >&lt;p&gt;Commit 1591801 from hossman@apache.org in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1591801&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1591801&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6037&quot; title=&quot;Stats Component Reports Incorrect max/sum/stddev for date fields in Distributed Data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6037&quot;&gt;&lt;del&gt;SOLR-6037&lt;/del&gt;&lt;/a&gt;: Fixed incorrect max/sum/stddev for Date fields in StatsComponent (merge r1591800)&lt;/p&gt;</comment>
                            <comment id="13990913" author="jira-bot" created="Tue, 6 May 2014 18:11:29 +0000"  >&lt;p&gt;Commit 1592821 from hossman@apache.org in branch &apos;dev/branches/lucene_solr_4_8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1592821&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1592821&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge back several &quot;low hanging&quot; bug fixes into the 4.8 branch...&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6029&quot; title=&quot;CollapsingQParserPlugin throws ArrayIndexOutOfBoundsException if elevated doc has been deleted from a segment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6029&quot;&gt;&lt;del&gt;SOLR-6029&lt;/del&gt;&lt;/a&gt;: r1590867&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6030&quot; title=&quot;Use System.nanoTime() instead of currentTimeInMills() in LRUCache.warm&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6030&quot;&gt;&lt;del&gt;SOLR-6030&lt;/del&gt;&lt;/a&gt;: r1591555&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6037&quot; title=&quot;Stats Component Reports Incorrect max/sum/stddev for date fields in Distributed Data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6037&quot;&gt;&lt;del&gt;SOLR-6037&lt;/del&gt;&lt;/a&gt;: r1591800&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6023&quot; title=&quot;NPE in /admin/field with no parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6023&quot;&gt;&lt;del&gt;SOLR-6023&lt;/del&gt;&lt;/a&gt;: r1592195&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5090&quot; title=&quot;NPE in DirectSpellChecker with alternativeTermCount and mm.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5090&quot;&gt;&lt;del&gt;SOLR-5090&lt;/del&gt;&lt;/a&gt;: r1592591&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6039&quot; title=&quot;debug=track causes debug=query info to be suppressed when no results found&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6039&quot;&gt;&lt;del&gt;SOLR-6039&lt;/del&gt;&lt;/a&gt;: r1592605&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5993&quot; title=&quot;ZkController can warn about shard leader conflict after conflict resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5993&quot;&gt;&lt;del&gt;SOLR-5993&lt;/del&gt;&lt;/a&gt;: r1588415&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5904&quot; title=&quot;ElectionContext can cancel an election when it should not if there was an exception while trying to register as the leader.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5904&quot;&gt;&lt;del&gt;SOLR-5904&lt;/del&gt;&lt;/a&gt;: r1587702&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12642966" name="SOLR-6037.patch" size="2794" author="hossman" created="Fri, 2 May 2014 00:25:32 +0000"/>
                            <attachment id="12642964" name="SOLR-6037.patch" size="1959" author="hossman" created="Fri, 2 May 2014 00:17:13 +0000"/>
                            <attachment id="12642856" name="SOLR-6037.patch" size="1033" author="brett.lucey" created="Thu, 1 May 2014 14:40:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390035</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1v6kn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390273</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>