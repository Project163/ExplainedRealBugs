<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:40:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4327] SolrJ code review indicates potential for leaked HttpClient connections</title>
                <link>https://issues.apache.org/jira/browse/SOLR-4327</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The SolrJ HttpSolrServer implementation does not seem to handle errors properly and seems capable of leaking HttpClient connections.  See the request() method in org.apache.solr.client.solrj.impl.HttpSolrServer.  The issue is that exceptions thrown from within this method do not necessarily consume the stream when an exception is thrown.  There is a try/finally block which reads (in part):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (respBody != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; processor!=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
          respBody.close();
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable t) {} &lt;span class=&quot;code-comment&quot;&gt;// ignore
&lt;/span&gt;      }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But, in order to always guarantee consumption of the stream, it should include:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;method.abort();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="12628469">SOLR-4327</key>
            <summary>SolrJ code review indicates potential for leaked HttpClient connections</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="kwright@metacarta.com">Karl Wright</reporter>
                        <labels>
                    </labels>
                <created>Sun, 20 Jan 2013 14:53:15 +0000</created>
                <updated>Mon, 9 May 2016 18:44:23 +0000</updated>
                            <resolved>Sun, 13 Oct 2013 00:40:03 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.5.1</fixVersion>
                    <fixVersion>4.6</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>3</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="13793471" author="markrmiller@gmail.com" created="Sat, 12 Oct 2013 21:02:34 +0000"  >&lt;p&gt;Thanks Karl - this one missed my radar. I&apos;ll commit shortly.&lt;/p&gt;</comment>
                            <comment id="13793480" author="jira-bot" created="Sat, 12 Oct 2013 21:26:55 +0000"  >&lt;p&gt;Commit 1531596 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1531596&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1531596&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4327&quot; title=&quot;SolrJ code review indicates potential for leaked HttpClient connections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4327&quot;&gt;&lt;del&gt;SOLR-4327&lt;/del&gt;&lt;/a&gt;: HttpSolrServer can leak connections on errors.&lt;/p&gt;</comment>
                            <comment id="13793481" author="jira-bot" created="Sat, 12 Oct 2013 21:28:14 +0000"  >&lt;p&gt;Commit 1531597 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1531597&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1531597&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4327&quot; title=&quot;SolrJ code review indicates potential for leaked HttpClient connections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4327&quot;&gt;&lt;del&gt;SOLR-4327&lt;/del&gt;&lt;/a&gt;: HttpSolrServer can leak connections on errors.&lt;/p&gt;</comment>
                            <comment id="13793486" author="jira-bot" created="Sat, 12 Oct 2013 21:30:55 +0000"  >&lt;p&gt;Commit 1531598 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/lucene_solr_4_5&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1531598&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1531598&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4327&quot; title=&quot;SolrJ code review indicates potential for leaked HttpClient connections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4327&quot;&gt;&lt;del&gt;SOLR-4327&lt;/del&gt;&lt;/a&gt;: HttpSolrServer can leak connections on errors.&lt;/p&gt;</comment>
                            <comment id="13793542" author="markrmiller@gmail.com" created="Sun, 13 Oct 2013 00:40:03 +0000"  >&lt;p&gt;Thanks again Karl!&lt;/p&gt;</comment>
                            <comment id="13793721" author="olegk" created="Sun, 13 Oct 2013 17:34:42 +0000"  >&lt;p&gt;This is none of my business, but I think and catching and ignoring Throwables is an &lt;em&gt;exceptionally&lt;/em&gt; bad idea&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
    respBody.close();
} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable t) {} &lt;span class=&quot;code-comment&quot;&gt;// ignore&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;At the very least it should be&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
    respBody.close();
} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception ignore) {}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13794126" author="dsmiley" created="Mon, 14 Oct 2013 14:02:40 +0000"  >&lt;p&gt;+1 Oleg.  Mark, please change to catch Exception.&lt;/p&gt;</comment>
                            <comment id="13794135" author="markrmiller@gmail.com" created="Mon, 14 Oct 2013 14:12:43 +0000"  >&lt;p&gt;That change has nothing to do with this JIRA issue.&lt;/p&gt;</comment>
                            <comment id="13794615" author="markrmiller@gmail.com" created="Mon, 14 Oct 2013 23:17:39 +0000"  >&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4992&quot; title=&quot;Solr queries don&amp;#39;t propagate Java OutOfMemoryError back to the JVM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4992&quot;&gt;&lt;del&gt;SOLR-4992&lt;/del&gt;&lt;/a&gt; if you are interested in the catching Throwable issue.&lt;/p&gt;</comment>
                            <comment id="15084569" author="markrmiller@gmail.com" created="Wed, 6 Jan 2016 02:35:35 +0000"  >&lt;p&gt;My mistake for not taking the time to really dig into this one. This was a mistake to add, though it had no ill affect. I&apos;ve addressed it in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8451&quot; title=&quot;We should not call method.abort in HttpSolrClient and HttpSolrCall#remoteQuery should not close streams.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8451&quot;&gt;&lt;del&gt;SOLR-8451&lt;/del&gt;&lt;/a&gt; and added some connection reuse testing.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12923484">SOLR-8451</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12608175" name="SOLR-4327.patch" size="1227" author="markrmiller@gmail.com" created="Sat, 12 Oct 2013 21:16:39 +0000"/>
                            <attachment id="12608170" name="SOLR-4327.patch" size="1020" author="markrmiller@gmail.com" created="Sat, 12 Oct 2013 21:01:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>305691</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i191zj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>260956</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>