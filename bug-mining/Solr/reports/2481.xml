<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:05:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-7603] Scary non reproducible failure from UpdateRequestProcessorFactoryTest.testUpdateDistribChainSkipping</title>
                <link>https://issues.apache.org/jira/browse/SOLR-7603</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;jenkins nightly hit a very inexplicable error today...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Build: https://builds.apache.org/job/Lucene-Solr-NightlyTests-5.x/860/
At revision 1682097
Updating http://svn.apache.org/repos/asf/lucene/dev/branches/branch_5x at revision &apos;2015-05-27T14:50:50.016 -0400&apos;
[java-info] java version &quot;1.7.0_72&quot;
[java-info] Java(TM) SE Runtime Environment (1.7.0_72-b14, Oracle Corporation)
[java-info] Java HotSpot(TM) 64-Bit Server VM (24.72-b04, Oracle Corporation)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=UpdateRequestProcessorFactoryTest
-Dtests.method=testUpdateDistribChainSkipping -Dtests.seed=4ECABCCFD159BE21 -Dtests.multiplier=2
-Dtests.nightly=true -Dtests.slow=true -Dtests.linedocsfile=/x1/jenkins/lucene-data/enwiki.random.lines.txt
-Dtests.locale=mt_MT -Dtests.timezone=Etc/GMT0 -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1
   [junit4] FAILURE 0.01s J0 | UpdateRequestProcessorFactoryTest.testUpdateDistribChainSkipping &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError
   [junit4]    &amp;gt;        at __randomizedtesting.SeedInfo.seed([4ECABCCFD159BE21:3F2E4219A7B299ED]:0)
   [junit4]    &amp;gt;        at
org.apache.solr.update.processor.UpdateRequestProcessorFactoryTest.testUpdateDistribChainSkipping(UpdateRequestProcessorFactoryTest.java:111)
   [junit4]    &amp;gt;        at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;...the line in question is asserting that when executing a distributed update (ie: forwarded from another node), the LogUpdateProcessor is still part of the chain because it&apos;s got got the &quot;RunAlways&quot; annotation indicating it should always be included in the chain (everything before hte DistribUpdateProcessor is normally)&lt;/p&gt;

&lt;p&gt;There&apos;s really no explanation for why the LogUpdateProcessor wouldn&apos;t be found other then a code bug &amp;#8211; but in that case why doesn&apos;t the seed reproduce reliably?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12833221">SOLR-7603</key>
            <summary>Scary non reproducible failure from UpdateRequestProcessorFactoryTest.testUpdateDistribChainSkipping</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 May 2015 22:25:20 +0000</created>
                <updated>Thu, 24 Aug 2017 16:29:53 +0000</updated>
                            <resolved>Wed, 10 Jun 2015 17:19:28 +0000</resolved>
                                                    <fixVersion>5.3</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14561862" author="hossman" created="Wed, 27 May 2015 22:28:38 +0000"  >&lt;p&gt;full log from jenkins.&lt;/p&gt;

&lt;p&gt;for now, the only thing i can think of, is to add some more logging &amp;amp; assert details to the test to help us diagnose if it fails again.&lt;/p&gt;</comment>
                            <comment id="14561884" author="hossman" created="Wed, 27 May 2015 22:40:17 +0000"  >&lt;p&gt;fixed description - i was missunderstanding why the Log processor was expected by the test.&lt;/p&gt;</comment>
                            <comment id="14561992" author="jira-bot" created="Wed, 27 May 2015 23:36:18 +0000"  >&lt;p&gt;Commit 1682137 from hossman@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1682137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1682137&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7603&quot; title=&quot;Scary non reproducible failure from UpdateRequestProcessorFactoryTest.testUpdateDistribChainSkipping&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7603&quot;&gt;&lt;del&gt;SOLR-7603&lt;/del&gt;&lt;/a&gt;: more test verbosity to try and track this down in the future&lt;/p&gt;</comment>
                            <comment id="14561995" author="jira-bot" created="Wed, 27 May 2015 23:39:20 +0000"  >&lt;p&gt;Commit 1682138 from hossman@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1682138&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1682138&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7603&quot; title=&quot;Scary non reproducible failure from UpdateRequestProcessorFactoryTest.testUpdateDistribChainSkipping&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7603&quot;&gt;&lt;del&gt;SOLR-7603&lt;/del&gt;&lt;/a&gt;: more test verbosity to try and track this down in the future (merge r1682137)&lt;/p&gt;</comment>
                            <comment id="14565170" author="hossman" created="Fri, 29 May 2015 18:16:58 +0000"  >&lt;p&gt;This happened again last night with the new test assertions providing a bit more detail...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Date: Fri, 29 May 2015 09:42:29 +0000 (UTC)
Build: https://builds.apache.org/job/Lucene-Solr-NightlyTests-trunk/696/
Updating http://svn.apache.org/repos/asf/lucene/dev/trunk at revision &apos;2015-05-29T03:12:26.055 -0400&apos;
At revision 1682377

-print-java-info:
[java-info] java version &quot;1.8.0_25&quot;
[java-info] Java(TM) SE Runtime Environment (1.8.0_25-b17, Oracle Corporation)
[java-info] Java HotSpot(TM) 64-Bit Server VM (25.25-b02, Oracle Corporation)
[java-info] Test args: []

java.lang.AssertionError: distrib-chain-explicit expected LogUpdateProcessor in chain due to @RunAllways, but not
found: org.apache.solr.update.processor.DistributedUpdateProcessor@638c6e19,
org.apache.solr.update.processor.RemoveBlankFieldUpdateProcessorFactory$1@25bbdfcb,
org.apache.solr.update.processor.RunUpdateProcessor@473fea05, 
        at __randomizedtesting.SeedInfo.seed([3AF6852C6379681:724B9684B0DCB14D]:0)
        at org.junit.Assert.fail(Assert.java:93)
        at org.junit.Assert.assertTrue(Assert.java:43)
        at
org.apache.solr.update.processor.UpdateRequestProcessorFactoryTest.testUpdateDistribChainSkipping(UpdateRequestProcessorFactoryTest.java:127)

   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=UpdateRequestProcessorFactoryTest -Dtests.method=testUpdateDistribChainSkipping -Dtests.seed=3AF6852C6379681 -Dtests.multiplier=2 -Dtests.nightly=true -Dtests.slow=true -Dtests.linedocsfile=/x1/jenkins/lucene-data/enwiki.random.lines.txt -Dtests.locale=ru -Dtests.timezone=Asia/Baghdad -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1
   [junit4] FAILURE 0.03s J2 | UpdateRequestProcessorFactoryTest.testUpdateDistribChainSkipping &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: distrib-chain-explicit expected LogUpdateProcessor in chain due to @RunAllways, but not found: org.apache.solr.update.processor.DistributedUpdateProcessor@638c6e19, org.apache.solr.update.processor.RemoveBlankFieldUpdateProcessorFactory$1@25bbdfcb, org.apache.solr.update.processor.RunUpdateProcessor@473fea05, 
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([3AF6852C6379681:724B9684B0DCB14D]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.update.processor.UpdateRequestProcessorFactoryTest.testUpdateDistribChainSkipping(UpdateRequestProcessorFactoryTest.java:127)
   [junit4]    &amp;gt; 	at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(&lt;b&gt;EDIT&lt;/b&gt;: updated with reproduce line now that builds.apache.org is back up)&lt;/p&gt;

&lt;p&gt;I realy can&apos;t make heads or tails of why LogUpdateProcessor wouldn&apos;t be in that chain.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;FWIW: first incidence i can find of a failure from this assert is...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Date: Sat, 2 May 2015 17:14:16 +0000 (UTC)
Build: https://builds.apache.org/job/Lucene-Solr-NightlyTests-5.x/835/

   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=UpdateRequestProcessorFactoryTest -Dtests.method=testUpdateDistribChainSkipping -Dtests.seed=D82449739AD0D42D -Dtests.multiplier=2 -Dtests.nightly=true -Dtests.slow=true -Dtests.linedocsfile=/home/jenkins/lucene-data/enwiki.random.lines.txt -Dtests.locale=nl -Dtests.timezone=America/Denver -Dtests.asserts=true -Dtests.file.encoding=US-ASCII
   [junit4] FAILURE 0.01s J0 | UpdateRequestProcessorFactoryTest.testUpdateDistribChainSkipping &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError
   [junit4]    &amp;gt;        at __randomizedtesting.SeedInfo.seed([D82449739AD0D42D:A9C0B7A5EC3BF3E1]:0)
   [junit4]    &amp;gt;        at org.apache.solr.update.processor.UpdateRequestProcessorFactoryTest.testUpdateDistribChainSkipping(UpdateRequestProcessorFactoryTest.java:111)
   [junit4]    &amp;gt;        at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14565610" author="jira-bot" created="Fri, 29 May 2015 22:55:55 +0000"  >&lt;p&gt;Commit 1682564 from hossman@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1682564&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1682564&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7603&quot; title=&quot;Scary non reproducible failure from UpdateRequestProcessorFactoryTest.testUpdateDistribChainSkipping&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7603&quot;&gt;&lt;del&gt;SOLR-7603&lt;/del&gt;&lt;/a&gt;: more detail in asserts, and more asserts on the initial chain (before looking at the distributed version) to try and figure out WTF is going on here&lt;/p&gt;</comment>
                            <comment id="14565612" author="jira-bot" created="Fri, 29 May 2015 22:57:14 +0000"  >&lt;p&gt;Commit 1682565 from hossman@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1682565&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1682565&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7603&quot; title=&quot;Scary non reproducible failure from UpdateRequestProcessorFactoryTest.testUpdateDistribChainSkipping&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7603&quot;&gt;&lt;del&gt;SOLR-7603&lt;/del&gt;&lt;/a&gt;: more detail in asserts, and more asserts on the initial chain (before looking at the distributed version) to try and figure out WTF is going on here (merge r1682564)&lt;/p&gt;</comment>
                            <comment id="14565617" author="hossman" created="Fri, 29 May 2015 23:02:10 +0000"  >&lt;p&gt;TL;DR: still no clue, but added more logging/assert details to test&lt;/p&gt;

&lt;p&gt;i&apos;ve been beating my head against this and still can&apos;t make heads or tells of this failure &amp;#8211; the best guess i&apos;ve got is that the logic for &quot;pruning&quot; the distributed chain down (but including any &quot;RunAllways&quot; processors) is actually working fine, but perhaps there is some failure in the initial construction of the chain in the first place? (&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6892&quot; title=&quot;Improve the way update processors are used and make it simpler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6892&quot;&gt;&lt;del&gt;SOLR-6892&lt;/del&gt;&lt;/a&gt; recently modified the way the chains are initialized)&lt;/p&gt;

&lt;p&gt;So i&apos;ve added a hack to increase the log level for the duration of the test, as well as some more asserts regarding the state of the chain, and simplified the logic around how we assert properties of the distributed chain so it&apos;s a bit more straight forward an we can include a list of every proc in every assert.&lt;/p&gt;</comment>
                            <comment id="14565681" author="hossman" created="Sat, 30 May 2015 00:04:49 +0000"  >&lt;p&gt;TL;DR: fairly certain this is a (nightly only) test bug caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7408&quot; title=&quot;Let SolrCore be the only thing which registers/unregisters a config directory listener&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7408&quot;&gt;&lt;del&gt;SOLR-7408&lt;/del&gt;&lt;/a&gt;, working on fix&lt;/p&gt;

&lt;p&gt;On IRC Tim drew my attention to some behavior of the LogUpdateProcessorFactory that i had completely forgotten about...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; UpdateRequestProcessor getInstance(SolrQueryRequest req, SolrQueryResponse rsp, UpdateRequestProcessor next) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; LogUpdateProcessor.log.isInfoEnabled() ? &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LogUpdateProcessor(req, rsp, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;, next) : &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...in a nut shell: as an optimization, the factory doesn&apos;t produce a processor if it can tell from the current logging level that there is no point in using that processor.&lt;/p&gt;

&lt;p&gt;Tim&apos;s theory was that some of the recent MDC/logging related changes may be affecting hte log level used i nthe nightly tests &amp;#8211; but i&apos;m fairly certain the root cause is much more of a fluke...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7408&quot; title=&quot;Let SolrCore be the only thing which registers/unregisters a config directory listener&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7408&quot;&gt;&lt;del&gt;SOLR-7408&lt;/del&gt;&lt;/a&gt; introduced ConcurrentDeleteAndCreateCollectionTest in r1675274 on &quot;Apr 22 08:25:26 2015 UTC&quot; .. this is an &lt;tt&gt;@Nightly&lt;/tt&gt; test that has this bit of code in it...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    Logger.getLogger(&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.solr&quot;&lt;/span&gt;).setLevel(Level.WARN);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Which means if this test runs before UpdateRequestProcessorFactoryTest in the same JVM, the log level won&apos;t be low enough for the LogUpdateProcessor to ever be created.&lt;/p&gt;

&lt;p&gt;I&apos;ve confirmed that happeend in both of the very recent failures...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/Lucene-Solr-NightlyTests-trunk/696/consoleText&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Lucene-Solr-NightlyTests-trunk/696/consoleText&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]   2&amp;gt; NOTE: All tests run in this JVM: [NotRequiredUniqueKeyTest, ShardSplitTest, DeleteLastCustomShardedReplicaTest, RequestLoggingTest, TestReplicaProperties, TestCSVResponseWriter, TestShardHandlerFactory, QueryEqualityTest, TestAnalyzeInfixSuggestions, TestSystemIdResolver, InfoHandlerTest, TestLRUStatsCache, StatsComponentTest, CoreAdminRequestStatusTest, SoftAutoCommitTest, FacetPivotSmallTest, TestTrie, SimpleFacetsTest, TestExtendedDismaxParser, TestQueryUtils, TestDocSet, TestPerFieldSimilarity, SolrCoreCheckLockOnStartupTest, SearchHandlerTest, TestSchemaManager, DirectUpdateHandlerTest, HdfsChaosMonkeySafeLeaderTest, SpellCheckCollatorTest, SolrInfoMBeanTest, TestConfigOverlay, DistributedQueueTest, TestXIncludeConfig, TestSolrJ, OutputWriterTest, HdfsLockFactoryTest, TestLeaderElectionZkExpiry, TestBM25SimilarityFactory, AddSchemaFieldsUpdateProcessorFactoryTest, PathHierarchyTokenizerFactoryTest, DistributedFacetPivotSmallAdvancedTest, BinaryUpdateRequestHandlerTest, SOLR749Test, TestComplexPhraseQParserPlugin, TestRandomMergePolicy, CachingDirectoryFactoryTest, LeaderElectionTest, HdfsNNFailoverTest, TestManagedSchemaDynamicFieldResource, OverseerCollectionProcessorTest, TestQuerySenderNoQuery, SortByFunctionTest, TestNRTOpen, AddBlockUpdateTest, TestBinaryResponseWriter, AutoCommitTest, CloudExitableDirectoryReaderTest, TestExactSharedStatsCache, HighlighterMaxOffsetTest, TestDefaultSimilarityFactory, TestSchemaNameResource, TestAuthorizationFramework, TestSchemaSimilarityResource, TestCollationFieldDocValues, TestZkChroot, ConcurrentDeleteAndCreateCollectionTest, BufferStoreTest, TestRestoreCore, QueryResultKeyTest, TermVectorComponentDistributedTest, TestFieldTypeCollectionResource, TestSolrConfigHandlerConcurrent, MoreLikeThisHandlerTest, TestChildDocTransformer, CursorMarkTest, TestSimpleQParserPlugin, XsltUpdateRequestHandlerTest, TestSurroundQueryParser, OverseerTest, FullSolrCloudDistribCmdsTest, ZkSolrClientTest, TestRandomDVFaceting, ZkCLITest, TestDistributedSearch, TestDistributedGrouping, TestRecovery, TestRealTimeGet, TestStressReorder, TestJoin, TestReload, HardAutoCommitTest, TestRangeQuery, TestGroupingSearch, SolrCmdDistributorTest, PeerSyncTest, BadIndexSchemaTest, TestSort, TestFiltering, BasicFunctionalityTest, TestIndexSearcher, ShowFileRequestHandlerTest, CurrencyFieldOpenExchangeTest, DistributedQueryElevationComponentTest, SolrIndexSplitterTest, AnalysisAfterCoreReloadTest, SignatureUpdateProcessorFactoryTest, SuggesterFSTTest, CoreAdminHandlerTest, SolrRequestParserTest, TestFoldingMultitermQuery, DocValuesTest, SuggesterTest, SpatialFilterTest, PolyFieldTest, NoCacheHeaderTest, WordBreakSolrSpellCheckerTest, SchemaVersionSpecificBehaviorTest, TestPseudoReturnFields, FieldMutatingUpdateProcessorTest, TestAtomicUpdateErrorCases, DirectUpdateHandlerOptimizeTest, TestRemoteStreaming, TestSolrDeletionPolicy1, StandardRequestHandlerTest, TestWriterPerf, DirectSolrSpellCheckerTest, TestReversedWildcardFilterFactory, DocumentAnalysisRequestHandlerTest, TestQueryTypes, PrimitiveFieldTypeTest, TestOmitPositions, FileBasedSpellCheckerTest, XmlUpdateRequestHandlerTest, DocumentBuilderTest, TestValueSourceCache, TestIndexingPerformance, RequiredFieldsTest, FieldAnalysisRequestHandlerTest, TestSolrQueryParser, LoggingHandlerTest, RegexBoostProcessorTest, SolrPluginUtilsTest, TestCollationField, ReturnFieldsTest, UpdateRequestProcessorFactoryTest]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/Lucene-Solr-NightlyTests-5.x/860/consoleText&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Lucene-Solr-NightlyTests-5.x/860/consoleText&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]   2&amp;gt; NOTE: All tests run in this JVM: [TermVectorComponentTest, MBeansHandlerTest, TestSolrDeletionPolicy1, TestDocumentBuilder, HighlighterConfigTest, DistributedSpellCheckComponentTest, TestSchemaManager, EnumFieldTest, TestNRTOpen, TestStressLucene, TestJoin, AsyncMigrateRouteKeyTest, URLClassifyProcessorTest, TestBinaryField, SignatureUpdateProcessorFactoryTest, TestJmxMonitoredMap, TestIBSimilarityFactory, TestRandomFaceting, DistributedFacetPivotSmallTest, TestEmbeddedSolrServerConstructors, AnalyticsMergeStrategyTest, TestDFRSimilarityFactory, SuggesterWFSTTest, HdfsRecoveryZkTest, TestReRankQParserPlugin, DistributedExpandComponentTest, IndexBasedSpellCheckerTest, TestWordDelimiterFilterFactory, BufferStoreTest, QueryElevationComponentTest, TestJettySolrRunner, TestSweetSpotSimilarityFactory, DistribCursorPagingTest, TestArbitraryIndexDir, DistributedFacetPivotLargeTest, TestConfig, TestBadConfig, ConcurrentDeleteAndCreateCollectionTest, SolrCloudExampleTest, TestUniqueKeyFieldResource, TestExceedMaxTermLength, BlockCacheTest, SolrIndexConfigTest, CursorMarkTest, TestPhraseSuggestions, TestImplicitCoreProperties, TestSolr4Spatial, TestRawResponseWriter, TestFaceting, DateFieldTest, TestCryptoKeys, RuleEngineTest, OverseerStatusTest, PrimitiveFieldTypeTest, ExternalFileFieldSortTest, MultiThreadedOCPTest, RequestHandlersTest, TestRangeQuery, RulesTest, ShardSplitTest, TestCodecSupport, RecoveryAfterSoftCommitTest, CoreMergeIndexesAdminHandlerTest, LeaderElectionIntegrationTest, SchemaVersionSpecificBehaviorTest, MinimalSchemaTest, ParsingFieldUpdateProcessorsTest, ClusterStateTest, DateMathParserTest, DebugComponentTest, TestLazyCores, TestManagedSchemaDynamicFieldResource, ChaosMonkeyNothingIsSafeTest, SyncSliceTest, ZkNodePropsTest, TestMergePolicyConfig, TestCSVLoader, SolrRequestParserTest, BasicZkTest, TestFunctionQuery, ActionThrottleTest, BasicDistributedZkTest, ChaosMonkeySafeLeaderTest, OverseerTest, ClusterStateUpdateTest, TestZkChroot, TestRandomDVFaceting, ZkCLITest, TestDistributedSearch, ZkControllerTest, TestRealTimeGet, DistributedTermsComponentTest, TestCoreContainer, SolrCoreTest, PeerSyncTest, BadIndexSchemaTest, TestSort, BasicFunctionalityTest, DirectUpdateHandlerTest, HighlighterTest, SoftAutoCommitTest, ShowFileRequestHandlerTest, CurrencyFieldXmlFileTest, SimplePostToolTest, TestExtendedDismaxParser, SuggesterFSTTest, DocValuesTest, SuggesterTSTTest, PolyFieldTest, TestUpdate, TestAtomicUpdateErrorCases, DirectUpdateHandlerOptimizeTest, DefaultValueUpdateProcessorTest, SortByFunctionTest, TestRemoteStreaming, DocValuesMultiTest, DistanceFunctionTest, SolrInfoMBeanTest, XsltUpdateRequestHandlerTest, CacheHeaderTest, TestQueryUtils, StandardRequestHandlerTest, TestWriterPerf, TestReversedWildcardFilterFactory, DocumentAnalysisRequestHandlerTest, TestQueryTypes, TestOmitPositions, FileBasedSpellCheckerTest, TermsComponentTest, DocumentBuilderTest, TestValueSourceCache, PathHierarchyTokenizerFactoryTest, TestIndexingPerformance, RequiredFieldsTest, FieldAnalysisRequestHandlerTest, TestSolrQueryParser, FastVectorHighlighterTest, IndexSchemaRuntimeFieldTest, LoggingHandlerTest, SolrPluginUtilsTest, IndexSchemaTest, TestJmxIntegration, TestCollationField, UpdateRequestProcessorFactoryTest]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...ironically, one of the changes i recently made was to force the log level to DEBUG for the duration of the UpdateRequestProcessorFactoryTest so we&apos;d get full logs in the even of failure &amp;#8211; so i&apos;m pretty sure that will prevent the failure from ever happening again.  but what i plan to do as a more long term fix:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;fix ConcurrentDeleteAndCreateCollectionTest to reset the log level it munges&lt;/li&gt;
	&lt;li&gt;make UpdateRequestProcessorFactoryTest assert the neccessary log level needed for LogUpdateProcessor to future proof us on similar bugs&lt;/li&gt;
	&lt;li&gt;(eventually) remove the forced DEBUG that i just added to the test (once some time has gone by w/o any other failures just in case i&apos;m wrong)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14565735" author="jira-bot" created="Sat, 30 May 2015 00:56:19 +0000"  >&lt;p&gt;Commit 1682570 from hossman@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1682570&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1682570&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7603&quot; title=&quot;Scary non reproducible failure from UpdateRequestProcessorFactoryTest.testUpdateDistribChainSkipping&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7603&quot;&gt;&lt;del&gt;SOLR-7603&lt;/del&gt;&lt;/a&gt;: more test tweaks to protect ourselves from unexpected log levels in tests like the one introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7408&quot; title=&quot;Let SolrCore be the only thing which registers/unregisters a config directory listener&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7408&quot;&gt;&lt;del&gt;SOLR-7408&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14565737" author="jira-bot" created="Sat, 30 May 2015 00:59:39 +0000"  >&lt;p&gt;Commit 1682571 from hossman@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1682571&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1682571&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7603&quot; title=&quot;Scary non reproducible failure from UpdateRequestProcessorFactoryTest.testUpdateDistribChainSkipping&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7603&quot;&gt;&lt;del&gt;SOLR-7603&lt;/del&gt;&lt;/a&gt;: more test tweaks to protect ourselves from unexpected log levels in tests like the one introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7408&quot; title=&quot;Let SolrCore be the only thing which registers/unregisters a config directory listener&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7408&quot;&gt;&lt;del&gt;SOLR-7408&lt;/del&gt;&lt;/a&gt; (merge r1682570)&lt;/p&gt;</comment>
                            <comment id="14580808" author="jira-bot" created="Wed, 10 Jun 2015 17:03:05 +0000"  >&lt;p&gt;Commit 1684714 from hossman@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1684714&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1684714&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7603&quot; title=&quot;Scary non reproducible failure from UpdateRequestProcessorFactoryTest.testUpdateDistribChainSkipping&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7603&quot;&gt;&lt;del&gt;SOLR-7603&lt;/del&gt;&lt;/a&gt;: remove extra logging added to diagnose problem - failure hasn&apos;t reappeared since fix applied in r1682570&lt;/p&gt;</comment>
                            <comment id="14580839" author="jira-bot" created="Wed, 10 Jun 2015 17:19:04 +0000"  >&lt;p&gt;Commit 1684718 from hossman@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1684718&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1684718&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7603&quot; title=&quot;Scary non reproducible failure from UpdateRequestProcessorFactoryTest.testUpdateDistribChainSkipping&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7603&quot;&gt;&lt;del&gt;SOLR-7603&lt;/del&gt;&lt;/a&gt;: remove extra logging added to diagnose problem - failure hasn&apos;t reappeared since fix applied in r1682570 (merge r1684714)&lt;/p&gt;</comment>
                            <comment id="14713207" author="shalinmangar" created="Wed, 26 Aug 2015 13:06:04 +0000"  >&lt;p&gt;Bulk close for 5.3.0 release&lt;/p&gt;</comment>
                            <comment id="16139614" author="mkhludnev" created="Thu, 24 Aug 2017 06:25:20 +0000"  >&lt;p&gt;Does it related with recent?&lt;br/&gt;
&lt;a href=&quot;https://jenkins.thetaphi.de/job/Lucene-Solr-7.x-Linux/308/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jenkins.thetaphi.de/job/Lucene-Solr-7.x-Linux/308/&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;FAILED:  org.apache.solr.update.processor.UpdateRequestProcessorFactoryTest.testUpdateDistribChainSkipping&lt;/p&gt;

&lt;p&gt;Error Message:&lt;br/&gt;
Tests must be run with INFO level logging otherwise LogUpdateProcessor isn&apos;t used and can&apos;t be tested.&lt;/p&gt;

&lt;p&gt;Stack Trace:&lt;br/&gt;
java.lang.AssertionError: Tests must be run with INFO level logging otherwise LogUpdateProcessor isn&apos;t used and can&apos;t be tested.&lt;br/&gt;
        at __randomizedtesting.SeedInfo.seed(&lt;span class=&quot;error&quot;&gt;&amp;#91;CC8B32DFC6FE1FB8:BD6FCC09B0153874&amp;#93;&lt;/span&gt;:0)&lt;br/&gt;
        at org.junit.Assert.fail(Assert.java:93)&lt;br/&gt;
        at org.junit.Assert.assertTrue(Assert.java:43)&lt;br/&gt;
        at org.apache.solr.update.processor.UpdateRequestProcessorFactoryTest.testUpdateDistribChainSkipping(UpdateRequestProcessorFactoryTest.java:101)&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="16140264" author="hossman" created="Thu, 24 Aug 2017 16:29:53 +0000"  >&lt;blockquote&gt;&lt;p&gt;Does it related with recent?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s certainly related in that this jira (&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7603&quot; title=&quot;Scary non reproducible failure from UpdateRequestProcessorFactoryTest.testUpdateDistribChainSkipping&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7603&quot;&gt;&lt;del&gt;SOLR-7603&lt;/del&gt;&lt;/a&gt;) added the assert that fails w/ the message &quot;Tests must be run with INFO level logging...&quot; ... but that&apos;s just a safety guard, w/o that assert the test would still fail &amp;#8211; just in a confusing way.&lt;/p&gt;

&lt;p&gt;the root cause of the recent jenkins failure is still some other as yet unidentified (AFAIK) change to some code or tests that is somehow changing the logging level and breaking this test &amp;#8211; in a similar way to how &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7408&quot; title=&quot;Let SolrCore be the only thing which registers/unregisters a config directory listener&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7408&quot;&gt;&lt;del&gt;SOLR-7408&lt;/del&gt;&lt;/a&gt; broke it back in 2015 (which is why this assert was added as a safe guard)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12735709" name="SOLR-7603.consoleText.txt" size="630822" author="hossman" created="Wed, 27 May 2015 22:28:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2faaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>