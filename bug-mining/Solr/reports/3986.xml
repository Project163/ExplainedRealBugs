<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:33:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-12489] Restore collection does not respect user specified replicationFactor</title>
                <link>https://issues.apache.org/jira/browse/SOLR-12489</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When restoring a collection we can pass in the replicationFactor&#160;&lt;/p&gt;

&lt;p&gt;However while restoring the collection we don&apos;t make use of this&#160;param and end up using whatever&#160;is present&#160; as the nrtReplicas key in the state.json&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; numNrtReplicas = getInt(message, NRT_REPLICAS, backupCollectionState.getNumNrtReplicas(), 0);
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (numNrtReplicas == 0) {
  numNrtReplicas = getInt(message, REPLICATION_FACTOR, backupCollectionState.getReplicationFactor(), 0);
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The tests didn&apos;t catch this as the create collection call&#160;from SolrJ sets&#160;nrtReplicas = replicationFactor and then we never restore with a different replicationFactor&lt;/p&gt;</description>
                <environment></environment>
        <key id="13166096">SOLR-12489</key>
            <summary>Restore collection does not respect user specified replicationFactor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="varun">Varun Thacker</assignee>
                                    <reporter username="varun">Varun Thacker</reporter>
                        <labels>
                            <label>Backup/Restore</label>
                    </labels>
                <created>Thu, 14 Jun 2018 13:04:17 +0000</created>
                <updated>Thu, 21 Nov 2019 00:41:55 +0000</updated>
                            <resolved>Tue, 19 Jun 2018 14:48:13 +0000</resolved>
                                                    <fixVersion>7.5</fixVersion>
                    <fixVersion>8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16516995" author="varunthacker" created="Tue, 19 Jun 2018 12:09:27 +0000"  >&lt;p&gt;Patch where I&apos;ve beasted the backup/restore tests.&lt;/p&gt;

&lt;p&gt;Going to run all the tests and precommit before committing it&lt;/p&gt;</comment>
                            <comment id="16517185" author="varunthacker" created="Tue, 19 Jun 2018 14:48:13 +0000"  >&lt;p&gt;Committed it&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;master:&#160;3d20e89&lt;/p&gt;

&lt;p&gt;branch_7x :&#160;9430654&lt;/p&gt;</comment>
                            <comment id="16546910" author="steve_rowe" created="Tue, 17 Jul 2018 17:23:38 +0000"  >&lt;p&gt;Policeman Jenkins found a reproducing seed for two test failures &lt;a href=&quot;https://jenkins.thetaphi.de/job/Lucene-Solr-master-Linux/22467&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jenkins.thetaphi.de/job/Lucene-Solr-master-Linux/22467&lt;/a&gt;; &lt;tt&gt;git bisect&lt;/tt&gt; blames both on commit &lt;tt&gt;3d20e89&lt;/tt&gt; on this issue:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Checking out Revision ae3929c3ed4adad9fa2842b32e9a7fb28699fef7 (refs/remotes/origin/master)
[...]
   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=TestLocalFSCloudBackupRestore -Dtests.method=test -Dtests.seed=BC266A8BBC96BD8C -Dtests.multiplier=3 -Dtests.slow=true -Dtests.locale=es-BR -Dtests.timezone=Asia/Kolkata -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1
   [junit4] FAILURE 10.0s J0 | TestLocalFSCloudBackupRestore.test &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: expected:&amp;lt;COMPLETED&amp;gt; but was:&amp;lt;FAILED&amp;gt;
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([BC266A8BBC96BD8C:34725551126AD074]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.api.collections.AbstractCloudBackupRestoreTestCase.testBackupAndRestore(AbstractCloudBackupRestoreTestCase.java:327)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.api.collections.AbstractCloudBackupRestoreTestCase.test(AbstractCloudBackupRestoreTestCase.java:145)
   [junit4]    &amp;gt; 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
   [junit4]    &amp;gt; 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
   [junit4]    &amp;gt; 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
   [junit4]    &amp;gt; 	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
   [junit4]    &amp;gt; 	at java.base/java.lang.Thread.run(Thread.java:844)
[...]
   [junit4]   2&amp;gt; NOTE: test params are: codec=Asserting(Lucene70): {shard_s=FST50, id=PostingsFormat(name=MockRandom)}, docValues:{_version_=DocValuesFormat(name=Direct)}, maxPointsInLeafNode=1295, maxMBSortInHeap=5.038487185282289, sim=Asserting(org.apache.lucene.search.similarities.AssertingSimilarity@2ec58f02), locale=es-BR, timezone=Asia/Kolkata
   [junit4]   2&amp;gt; NOTE: Linux 4.15.0-24-generic amd64/Oracle Corporation 9.0.4 (64-bit)/cpus=8,threads=1,free=181310592,total=518979584
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=TestHdfsCloudBackupRestore -Dtests.method=test -Dtests.seed=BC266A8BBC96BD8C -Dtests.multiplier=3 -Dtests.slow=true -Dtests.locale=es-GT -Dtests.timezone=America/Phoenix -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1
   [junit4] FAILURE 11.0s J0 | TestHdfsCloudBackupRestore.test &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: expected:&amp;lt;COMPLETED&amp;gt; but was:&amp;lt;FAILED&amp;gt;
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([BC266A8BBC96BD8C:34725551126AD074]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.api.collections.AbstractCloudBackupRestoreTestCase.testBackupAndRestore(AbstractCloudBackupRestoreTestCase.java:327)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.api.collections.AbstractCloudBackupRestoreTestCase.test(AbstractCloudBackupRestoreTestCase.java:145)
   [junit4]    &amp;gt; 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
   [junit4]    &amp;gt; 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
   [junit4]    &amp;gt; 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
   [junit4]    &amp;gt; 	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
   [junit4]    &amp;gt; 	at java.base/java.lang.Thread.run(Thread.java:844)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16551107" author="varunthacker" created="Fri, 20 Jul 2018 18:29:34 +0000"  >&lt;p&gt;Thanks Steve! I&apos;ll look into it today&lt;/p&gt;</comment>
                            <comment id="16551809" author="jira-bot" created="Sat, 21 Jul 2018 20:05:17 +0000"  >&lt;p&gt;Commit 18c29b7303a96faeb125dee8a29b210539d23194 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=varun&quot; class=&quot;user-hover&quot; rel=&quot;varun&quot;&gt;varun&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=18c29b7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=18c29b7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12489&quot; title=&quot;Restore collection does not respect user specified replicationFactor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12489&quot;&gt;&lt;del&gt;SOLR-12489&lt;/del&gt;&lt;/a&gt;: Fix test failures&lt;/p&gt;</comment>
                            <comment id="16551817" author="varunthacker" created="Sat, 21 Jul 2018 20:17:25 +0000"  >&lt;p&gt;I beasted the patch 500 times and still hit 4 failures. But those seeds weren&apos;t reproducible and from my analysis it&apos;s because of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12291&quot; title=&quot;Async prematurely reports completed status that causes severe shard loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12291&quot;&gt;&lt;del&gt;SOLR-12291&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Committing the current patch as it fixes the other failures because of which this had been marked as a BadApple&lt;/p&gt;</comment>
                            <comment id="16551824" author="jira-bot" created="Sat, 21 Jul 2018 20:41:11 +0000"  >&lt;p&gt;Commit 73decd0ab97a2c1e59d0dfff0cb61b1d9e996fa2 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=varun&quot; class=&quot;user-hover&quot; rel=&quot;varun&quot;&gt;varun&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=73decd0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=73decd0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12489&quot; title=&quot;Restore collection does not respect user specified replicationFactor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12489&quot;&gt;&lt;del&gt;SOLR-12489&lt;/del&gt;&lt;/a&gt;: Fix test failures&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 18c29b7)&lt;/p&gt;</comment>
                            <comment id="16551828" author="jira-bot" created="Sat, 21 Jul 2018 20:55:50 +0000"  >&lt;p&gt;Commit 2826a9550bcabc38204fbb4237795b202fba3ab2 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=varun&quot; class=&quot;user-hover&quot; rel=&quot;varun&quot;&gt;varun&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=2826a95&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=2826a95&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12489&quot; title=&quot;Restore collection does not respect user specified replicationFactor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12489&quot;&gt;&lt;del&gt;SOLR-12489&lt;/del&gt;&lt;/a&gt;: remove unused imports&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13128760">SOLR-11823</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12928341" name="SOLR-12489.patch" size="18337" author="varun" created="Tue, 19 Jun 2018 12:09:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 17 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3uv07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>