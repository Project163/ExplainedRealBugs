<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:33:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4275] TrieTokenizer causes StringIOOBE when input is empty instead of returning no token</title>
                <link>https://issues.apache.org/jira/browse/SOLR-4275</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When you use the admin interface and select a trie field (e.g. tint) and enter nothing into the field, the tokenizer should normally return no tokens. TrieTokenizer instead gets and SIOOBE because read() into the charbuffer returns -1 (end of stream). This is used to initialize the string&apos;s length...&lt;/p&gt;

&lt;p&gt;The problem is mostly affecting the analysis request handler and query parsing, but while indexing the values, Solr uses NumericField and not the tokenizer directly. The solr admin UI has the additional problem that you get a strange exception if you fill in the number on the left, but leave the query (right empty).&lt;/p&gt;

&lt;p&gt;The fix is to modify the tokenizer to behave like a real tokenizer:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;correct the read loop to look like the one from KeywordTokenizer. The current loop is not guaranteed to work with unbuffered readers (Solr always uses StringReaders so this is no issue, but who knows)&lt;/li&gt;
	&lt;li&gt;if the resulting string is empty (total len == 0), set a boolean to false and make the incrementToken/close/end methods not delegate and return false.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12626205">SOLR-4275</key>
            <summary>TrieTokenizer causes StringIOOBE when input is empty instead of returning no token</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="uschindler">Uwe Schindler</assignee>
                                    <reporter username="uschindler">Uwe Schindler</reporter>
                        <labels>
                    </labels>
                <created>Sat, 5 Jan 2013 21:55:19 +0000</created>
                <updated>Mon, 9 May 2016 18:53:32 +0000</updated>
                            <resolved>Sat, 5 Jan 2013 22:20:59 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13545193" author="thetaphi" created="Sat, 5 Jan 2013 22:11:36 +0000"  >&lt;p&gt;Simle patch. It also corrects the read logic so it also works with unbuffered input readers.&lt;/p&gt;</comment>
                            <comment id="13545196" author="thetaphi" created="Sat, 5 Jan 2013 22:20:59 +0000"  >&lt;p&gt;Committed to 4.x and trunk.&lt;/p&gt;</comment>
                            <comment id="13545197" author="commit-tag-bot" created="Sat, 5 Jan 2013 22:22:30 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; Uwe Schindler&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1429401&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1429401&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4275&quot; title=&quot;TrieTokenizer causes StringIOOBE when input is empty instead of returning no token&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4275&quot;&gt;&lt;del&gt;SOLR-4275&lt;/del&gt;&lt;/a&gt;: Fix TrieTokenizer to no longer throw StringIndexOutOfBoundsException in admin UI / AnalysisRequestHandler when you enter no number to tokenize&lt;/p&gt;</comment>
                            <comment id="13545199" author="commit-tag-bot" created="Sat, 5 Jan 2013 22:26:27 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Uwe Schindler&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1429402&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1429402&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Merged revision(s) 1429401 from lucene/dev/trunk:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4275&quot; title=&quot;TrieTokenizer causes StringIOOBE when input is empty instead of returning no token&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4275&quot;&gt;&lt;del&gt;SOLR-4275&lt;/del&gt;&lt;/a&gt;: Fix TrieTokenizer to no longer throw StringIndexOutOfBoundsException in admin UI / AnalysisRequestHandler when you enter no number to tokenize&lt;/p&gt;</comment>
                            <comment id="13545208" author="commit-tag-bot" created="Sat, 5 Jan 2013 22:46:42 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; Uwe Schindler&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1429410&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1429410&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4275&quot; title=&quot;TrieTokenizer causes StringIOOBE when input is empty instead of returning no token&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4275&quot;&gt;&lt;del&gt;SOLR-4275&lt;/del&gt;&lt;/a&gt;: Add test&lt;/p&gt;</comment>
                            <comment id="13545209" author="commit-tag-bot" created="Sat, 5 Jan 2013 22:52:15 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Uwe Schindler&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1429411&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1429411&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Merged revision(s) 1429410 from lucene/dev/trunk:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4275&quot; title=&quot;TrieTokenizer causes StringIOOBE when input is empty instead of returning no token&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4275&quot;&gt;&lt;del&gt;SOLR-4275&lt;/del&gt;&lt;/a&gt;: Add test&lt;/p&gt;</comment>
                            <comment id="13545211" author="commit-tag-bot" created="Sat, 5 Jan 2013 23:00:22 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Robert Muir&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1429417&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1429417&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4275&quot; title=&quot;TrieTokenizer causes StringIOOBE when input is empty instead of returning no token&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4275&quot;&gt;&lt;del&gt;SOLR-4275&lt;/del&gt;&lt;/a&gt;: unbreak the build&lt;/p&gt;</comment>
                            <comment id="13545212" author="commit-tag-bot" created="Sat, 5 Jan 2013 23:06:33 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; Uwe Schindler&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1429419&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1429419&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4275&quot; title=&quot;TrieTokenizer causes StringIOOBE when input is empty instead of returning no token&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4275&quot;&gt;&lt;del&gt;SOLR-4275&lt;/del&gt;&lt;/a&gt;: Fix test. Sorry, the Solr build system did not recognize the test change without ant clean!?&lt;/p&gt;</comment>
                            <comment id="13545218" author="commit-tag-bot" created="Sat, 5 Jan 2013 23:19:10 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Uwe Schindler&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1429420&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1429420&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Merged revision(s) 1429419 from lucene/dev/trunk:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4275&quot; title=&quot;TrieTokenizer causes StringIOOBE when input is empty instead of returning no token&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4275&quot;&gt;&lt;del&gt;SOLR-4275&lt;/del&gt;&lt;/a&gt;: Fix test. Sorry, the Solr build system did not recognize the test change without ant clean!?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12563443" name="SOLR-4275.patch" size="3280" author="uschindler" created="Sat, 5 Jan 2013 22:11:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>302791</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 46 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i175gn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>249853</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>