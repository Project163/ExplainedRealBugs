<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:20:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-1794] Dataimport of CLOB fields fails when getCharacterStream() is defined in a superclass</title>
                <link>https://issues.apache.org/jira/browse/SOLR-1794</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When running Solr on WebLogic application server 10.3.2, the dataimport for CLOB fields are failing. Line 109 in FieldReaderDataSource.java illustrates the problem:&lt;/p&gt;

&lt;p&gt;Method m = clob.getClass().getDeclaredMethod(&quot;getCharacterStream&quot;);&lt;/p&gt;

&lt;p&gt;Since getDeclaredMethod instead of getMethod is used, the getCharacterStream() method will not be found if it is defined in a superclass of clob. This is exactly what&lt;br/&gt;
happens in e.g. WebLogic 10.3.2, since the object returned is a dynamically created wrapper class called Clob_oracle_sql_CLOB. This class does not define&lt;br/&gt;
getCharacterStream(), but it inherits from another class that does. This problem will also occur in other places where getDeclaredMethod used in conjunction with the CLOB&lt;br/&gt;
or BLOB datatypes.&lt;/p&gt;

&lt;p&gt;Stacktrace:&lt;/p&gt;

&lt;p&gt;org.apache.solr.handler.dataimport.DataImportHandlerException: Unable to get reader from clob Processing Document # 1&lt;br/&gt;
        at org.apache.solr.handler.dataimport.DataImportHandlerException.wrapAndThrow(DataImportHandlerException.java:72)&lt;br/&gt;
        at org.apache.solr.handler.dataimport.FieldReaderDataSource.readCharStream(FieldReaderDataSource.java:118)&lt;br/&gt;
        at org.apache.solr.handler.dataimport.ClobTransformer.readFromClob(ClobTransformer.java:69)&lt;br/&gt;
        at org.apache.solr.handler.dataimport.ClobTransformer.transformRow(ClobTransformer.java:61)&lt;br/&gt;
        at org.apache.solr.handler.dataimport.EntityProcessorWrapper.applyTransformer(EntityProcessorWrapper.java:195)&lt;br/&gt;
        at org.apache.solr.handler.dataimport.EntityProcessorWrapper.nextRow(EntityProcessorWrapper.java:241)&lt;br/&gt;
        at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:357)&lt;br/&gt;
        at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:383)&lt;br/&gt;
        at org.apache.solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.java:242)&lt;br/&gt;
        at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:180)&lt;br/&gt;
        at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:331)&lt;br/&gt;
        at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:389)&lt;br/&gt;
        at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:370)&lt;br/&gt;
Caused by: java.lang.NoSuchMethodException: weblogic.jdbc.wrapper.Clob_oracle_sql_CLOB.getCharacterStream()&lt;br/&gt;
        at java.lang.Class.getDeclaredMethod(Class.java:1937)&lt;br/&gt;
        at org.apache.solr.handler.dataimport.FieldReaderDataSource.readCharStream(FieldReaderDataSource.java:109)&lt;br/&gt;
        ... 11 more&lt;/p&gt;</description>
                <environment>&lt;p&gt;Oracle WebLogic 10.3.2&lt;/p&gt;</environment>
        <key id="12457395">SOLR-1794</key>
            <summary>Dataimport of CLOB fields fails when getCharacterStream() is defined in a superclass</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rcmuir">Robert Muir</assignee>
                                    <reporter username="gauslaabergem@yahoo.no">Gunnar Gauslaa Bergem</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Feb 2010 09:09:56 +0000</created>
                <updated>Wed, 30 Mar 2011 15:45:31 +0000</updated>
                            <resolved>Tue, 19 Oct 2010 15:05:26 +0000</resolved>
                                    <version>1.4</version>
                                    <fixVersion>3.1</fixVersion>
                    <fixVersion>4.0-ALPHA</fixVersion>
                                    <component>contrib - DataImportHandler</component>
                        <due></due>
                            <votes>9</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12857267" author="skytteren" created="Thu, 15 Apr 2010 10:47:45 +0000"  >&lt;p&gt;A fixed version of  org.apache.solr.handler.dataimport.FieldReaderDataSource &lt;br/&gt;
Change line 89 and 110 to use getMethod instead of getDeclaredMethod.&lt;/p&gt;

&lt;p&gt;This works for us on Weblogic 10.3.2.&lt;/p&gt;

&lt;p&gt;Since I cannot commit to the repository I hope that someone will update the file so we may upgrade without deploying our own version of this class.&lt;/p&gt;</comment>
                            <comment id="12922402" author="rcmuir" created="Tue, 19 Oct 2010 01:38:59 +0000"  >&lt;p&gt;I don&apos;t understand why reflection is being used here at all.&lt;/p&gt;

&lt;p&gt;getCharacterStream and getBinaryStream are both defined as public methods in the java.sql.Clob/Blob interfaces since java 1.4, so all the reflection and comments like:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;//Most of the JDBC drivers have getBinaryStream defined as public
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;make no sense to me... of course its public, it &lt;b&gt;must be&lt;/b&gt; !&lt;/p&gt;

&lt;p&gt;all tests patch with the reflection removed.&lt;/p&gt;</comment>
                            <comment id="12922532" author="thetaphi" created="Tue, 19 Oct 2010 12:10:17 +0000"  >&lt;p&gt;The method is defined as public in the JDBC API since at least Java 1.4, so why use reflection at all? I would simply remove the reflection as Robert did and resolve that issue.&lt;/p&gt;</comment>
                            <comment id="12922536" author="rcmuir" created="Tue, 19 Oct 2010 12:34:06 +0000"  >&lt;p&gt;Thanks for the review Uwe.&lt;/p&gt;

&lt;p&gt;I will commit the bugfix shortly unless there are objections.&lt;/p&gt;</comment>
                            <comment id="12922583" author="rcmuir" created="Tue, 19 Oct 2010 15:05:26 +0000"  >&lt;p&gt;Committed revision 1024256, 1024258 (3x).&lt;/p&gt;

&lt;p&gt;Thanks Gunnar!&lt;/p&gt;</comment>
                            <comment id="13013091" author="gsingers" created="Wed, 30 Mar 2011 15:45:31 +0000"  >&lt;p&gt;Bulk close for 3.1.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12441816" name="ASF.LICENSE.NOT.GRANTED--FieldReaderDataSource.java" size="4937" author="skytteren" created="Thu, 15 Apr 2010 10:47:45 +0000"/>
                            <attachment id="12457516" name="SOLR-1794.patch" size="2393" author="rcmuir" created="Tue, 19 Oct 2010 01:38:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5670</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03on3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19425</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>