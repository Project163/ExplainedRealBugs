<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:22:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-10500] custom json loading is wrong when there are multiple toplevel docs w/ child docs</title>
                <link>https://issues.apache.org/jira/browse/SOLR-10500</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Sending two parent docs with nested children in custom JSON leads to hijacking neighbor&apos;s children. As a workaround, every parent can be sent separately.   &lt;br/&gt;
Let me better describe the problem:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;curl &lt;span class=&quot;code-quote&quot;&gt;&apos;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr/my_collection/update/json/docs?split=/|/orgs&apos;&lt;/span&gt;\
&lt;/span&gt;    -H &lt;span class=&quot;code-quote&quot;&gt;&apos;Content-type:application/json&apos;&lt;/span&gt; -d &apos;[{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Joe Smith&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;phone&quot;&lt;/span&gt;: 876876687, &lt;span class=&quot;code-quote&quot;&gt;&quot;orgs&quot;&lt;/span&gt;: [
    {  &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Microsoft&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;city&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Seattle&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;zip&quot;&lt;/span&gt;: 98052 },
    {   &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Apple&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;city&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Cupertino&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;zip&quot;&lt;/span&gt;: 95014 }
  ]
 },
{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Frank Miller&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;phone&quot;&lt;/span&gt;: 1234556, &lt;span class=&quot;code-quote&quot;&gt;&quot;orgs&quot;&lt;/span&gt;: [
    {  &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Oracle&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;city&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Redwood&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;zip&quot;&lt;/span&gt;: 98052 },
    {   &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;HTC&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;city&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;San Francisco&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;zip&quot;&lt;/span&gt;: 95014 }
  ]
 }
] &apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;produces docs with accumulating children across parents&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Joe Smith&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;phone&quot;&lt;/span&gt;:876876687,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;_childDocuments_&quot;&lt;/span&gt;:[
    { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Microsoft&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;city&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Seattle&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;zip&quot;&lt;/span&gt;:98052},
    {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Apple&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;city&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Cupertino&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;zip&quot;&lt;/span&gt;:95014}]},
{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Frank Miller&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;phone&quot;&lt;/span&gt;:1234556,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;_childDocuments_&quot;&lt;/span&gt;:[
    { &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Microsoft&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;city&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Seattle&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;zip&quot;&lt;/span&gt;:98052},
    {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Apple&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;city&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Cupertino&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;zip&quot;&lt;/span&gt;:95014},
      {  &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Oracle&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;city&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Redwood&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;zip&quot;&lt;/span&gt;: 98052 },
    {   &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;HTC&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;city&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;San Francisco&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;zip&quot;&lt;/span&gt;: 95014 }]}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13064493">SOLR-10500</key>
            <summary>custom json loading is wrong when there are multiple toplevel docs w/ child docs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mkhl">Mikhail Khludnev</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Apr 2017 21:06:26 +0000</created>
                <updated>Sat, 8 Jun 2019 15:22:07 +0000</updated>
                            <resolved>Fri, 28 Apr 2017 08:18:59 +0000</resolved>
                                    <version>6.5</version>
                                    <fixVersion>6.6</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                    <component>update</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15971654" author="mkhludnev" created="Mon, 17 Apr 2017 21:13:26 +0000"  >&lt;p&gt;Attaching test extension to reproduce &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12863685/12863685_SOLR-10500-test.patch&quot; title=&quot;SOLR-10500-test.patch attached to SOLR-10500&quot;&gt;SOLR-10500-test.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;. Failure is exactly the same what I&apos;ve seen during a manual test today.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.AssertionError: expected:&amp;lt;2&amp;gt; but was:&amp;lt;4&amp;gt;
	at 
org.apache.solr.handler.JsonLoaderTest.testJsonDocFormat(JsonLoaderTest.java:446)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the line &lt;tt&gt;446&lt;/tt&gt; is &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        assertEquals(2, p.addCommands.get(i).solrDoc.getChildDocuments().size());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;both parent are expected to have 2 children, but one of them got two.&lt;/p&gt;</comment>
                            <comment id="15977020" author="alexey_suprun@epam.com" created="Thu, 20 Apr 2017 16:29:08 +0000"  >&lt;p&gt;Fixed the issue. The solution attached in 0001-&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10500&quot; title=&quot;custom json loading is wrong when there are multiple toplevel docs w/ child docs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10500&quot;&gt;&lt;del&gt;SOLR-10500&lt;/del&gt;&lt;/a&gt;-fixed-json-hierarchy-read.patch&lt;/p&gt;</comment>
                            <comment id="15977490" author="mkhludnev" created="Thu, 20 Apr 2017 20:50:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alexey_suprun%40epam.com&quot; class=&quot;user-hover&quot; rel=&quot;alexey_suprun@epam.com&quot;&gt;alexey_suprun@epam.com&lt;/a&gt;, thanks for the patch. I&apos;ll add asserts and commit it this week. &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt;, are you ok with the fix? &lt;/p&gt;</comment>
                            <comment id="15977957" author="noble.paul" created="Fri, 21 Apr 2017 02:20:36 +0000"  >&lt;p&gt;I&apos;ll be able to get to this on Monday only&lt;/p&gt;</comment>
                            <comment id="15980115" author="mkhludnev" created="Sat, 22 Apr 2017 20:14:32 +0000"  >&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12865080/12865080_SOLR-10500.patch&quot; title=&quot;SOLR-10500.patch attached to SOLR-10500&quot;&gt;SOLR-10500.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; also asserts nested values and encompasses &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alexey_suprun%40epam.com&quot; class=&quot;user-hover&quot; rel=&quot;alexey_suprun@epam.com&quot;&gt;alexey_suprun@epam.com&lt;/a&gt;&apos;s fix.&lt;/p&gt;</comment>
                            <comment id="15980729" author="noble.paul" created="Mon, 24 Apr 2017 05:08:28 +0000"  >&lt;p&gt;Don&apos;t commit this fix. This creates more objects than it should. We can&apos;t create new maps . I&apos;ll get to this is a couple of days&lt;/p&gt;</comment>
                            <comment id="15984268" author="noble.paul" created="Wed, 26 Apr 2017 06:55:47 +0000"  >&lt;p&gt;fixed&lt;/p&gt;</comment>
                            <comment id="15984529" author="mkhludnev" created="Wed, 26 Apr 2017 10:13:33 +0000"  >&lt;p&gt;I like it. Do you like me to commit or take care yourself?&lt;/p&gt;</comment>
                            <comment id="15984534" author="noble.paul" created="Wed, 26 Apr 2017 10:18:13 +0000"  >&lt;p&gt;Go ahead and commit it&lt;/p&gt;</comment>
                            <comment id="15986305" author="jira-bot" created="Thu, 27 Apr 2017 10:01:36 +0000"  >&lt;p&gt;Commit 61d02a47e205bbf6c18058853b93466e6cfbd51b in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkhludnev&quot; class=&quot;user-hover&quot; rel=&quot;mkhludnev&quot;&gt;mkhludnev&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=61d02a4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=61d02a4&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10500&quot; title=&quot;custom json loading is wrong when there are multiple toplevel docs w/ child docs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10500&quot;&gt;&lt;del&gt;SOLR-10500&lt;/del&gt;&lt;/a&gt;: fix many parents with nested children per /update/json/docs request&lt;/p&gt;</comment>
                            <comment id="15986312" author="jira-bot" created="Thu, 27 Apr 2017 10:07:12 +0000"  >&lt;p&gt;Commit 1791f6924a063867e04b53fc85bfbef0f26af2c7 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkhludnev&quot; class=&quot;user-hover&quot; rel=&quot;mkhludnev&quot;&gt;mkhludnev&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=1791f69&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=1791f69&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10500&quot; title=&quot;custom json loading is wrong when there are multiple toplevel docs w/ child docs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10500&quot;&gt;&lt;del&gt;SOLR-10500&lt;/del&gt;&lt;/a&gt;: fix many parents with nested children per /update/json/docs request&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12775860">SOLR-7123</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12864305" name="0001-SOLR-10500-fixed-json-hierarchy-read.patch" size="3984" author="alexey_suprun@epam.com" created="Thu, 20 Apr 2017 16:28:25 +0000"/>
                            <attachment id="12863685" name="SOLR-10500-test.patch" size="1579" author="mkhl" created="Mon, 17 Apr 2017 21:13:26 +0000"/>
                            <attachment id="12865080" name="SOLR-10500.patch" size="7561" author="noble.paul" created="Wed, 26 Apr 2017 06:55:47 +0000"/>
                            <attachment id="12864656" name="SOLR-10500.patch" size="8507" author="mkhl" created="Sat, 22 Apr 2017 20:14:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 29 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3dpj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>