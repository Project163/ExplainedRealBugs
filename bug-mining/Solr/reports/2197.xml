<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:59:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6796] distrib.singlePass does not return correct set of fields for multi-fl-parameter requests</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6796</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;If I pass distrib.singlePass in a request that also has two fl-parameters, in some cases, I will not get the expected set of fields back for the returned documents&lt;/p&gt;</description>
                <environment></environment>
        <key id="12757719">SOLR-6796</key>
            <summary>distrib.singlePass does not return correct set of fields for multi-fl-parameter requests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalin">Shalin Shekhar Mangar</assignee>
                                    <reporter username="steff1193">Per Steffensen</reporter>
                        <labels>
                            <label>distributed_search</label>
                            <label>search</label>
                    </labels>
                <created>Tue, 25 Nov 2014 15:28:33 +0000</created>
                <updated>Wed, 2 Oct 2019 17:24:23 +0000</updated>
                            <resolved>Tue, 2 Dec 2014 14:11:49 +0000</resolved>
                                    <version>4.10.2</version>
                    <version>5.0</version>
                                    <fixVersion>4.10.3</fixVersion>
                    <fixVersion>5.0</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>multicore</component>
                    <component>search</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14224680" author="steff1193" created="Tue, 25 Nov 2014 15:33:09 +0000"  >&lt;p&gt;Attached patch (branch_5x) that change an existing test to reveal the problem. Apply the patch and run &lt;tt&gt;TestDistributedSearch&lt;/tt&gt;&lt;br/&gt;
Probably not just want to commit the changed test after a fix of the problem, but maybe we want to add the test somewhere else. In my company we have an agreement that whenever we fix a bug, we also create a test that reveals it&lt;/p&gt;</comment>
                            <comment id="14224682" author="steff1193" created="Tue, 25 Nov 2014 15:34:01 +0000"  >&lt;p&gt;Attached an ugly fix to the problem. I believe it will not ruin other functionality - but I havnt run the entire test-suite with this patch&lt;/p&gt;</comment>
                            <comment id="14224780" author="steff1193" created="Tue, 25 Nov 2014 16:39:08 +0000"  >&lt;p&gt;Attached a less ugly fix to the problem. Again, havnt run the entire test-suite with this fix.&lt;/p&gt;</comment>
                            <comment id="14225874" author="steff1193" created="Wed, 26 Nov 2014 07:57:37 +0000"  >&lt;p&gt;Thanks for assigning yourself to this one &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;. Maybe you also want to take a look at &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6795&quot; title=&quot;distrib.singlePass returns score even though not asked for&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6795&quot;&gt;&lt;del&gt;SOLR-6795&lt;/del&gt;&lt;/a&gt;? &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6795&quot; title=&quot;distrib.singlePass returns score even though not asked for&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6795&quot;&gt;&lt;del&gt;SOLR-6795&lt;/del&gt;&lt;/a&gt; is ready for commit. Lets make this &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6796&quot; title=&quot;distrib.singlePass does not return correct set of fields for multi-fl-parameter requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6796&quot;&gt;&lt;del&gt;SOLR-6796&lt;/del&gt;&lt;/a&gt; about making distrib.singlePass work in every case. Believe the ugly patch will work in every case, but the &quot;less ugly&quot; patch will not. It will not work for e.g. &quot;val:sum(3,4)&quot;. I will provide a &quot;less ugly&quot; patch very soon that will work in every case.&lt;/p&gt;</comment>
                            <comment id="14225979" author="steff1193" created="Wed, 26 Nov 2014 10:01:26 +0000"  >&lt;p&gt;I believe this fix will make &lt;tt&gt;distrib.singlePass=true&lt;/tt&gt; work for any query (together with &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6795&quot; title=&quot;distrib.singlePass returns score even though not asked for&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6795&quot;&gt;&lt;del&gt;SOLR-6795&lt;/del&gt;&lt;/a&gt;). That is, you can turn on distrib.singlePass whenever you like, and have a response similar to a non-distributed request to a single core/shard containing the same data.&lt;br/&gt;
We have a version of Solr based on 4.4.0, with a lot of our own changes, and with &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5768&quot; title=&quot;Add a distrib.singlePass parameter to make EXECUTE_QUERY phase fetch all fields and skip GET_FIELDS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5768&quot;&gt;&lt;del&gt;SOLR-5768&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1880&quot; title=&quot;Performance: Distributed Search should skip GET_FIELDS stage if EXECUTE_QUERY stage gets all fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1880&quot;&gt;&lt;del&gt;SOLR-1880&lt;/del&gt;&lt;/a&gt; and parts of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5399&quot; title=&quot;Improve DebugComponent for distributed requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5399&quot;&gt;&lt;del&gt;SOLR-5399&lt;/del&gt;&lt;/a&gt; merged. With this fix, then entire 4.4.0 test-suite is green, when we make all queries issued across the test-suite run with &lt;tt&gt;distrib.singlePass=true&lt;/tt&gt;.&lt;br/&gt;
At least it fixes the particular problem that this &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6796&quot; title=&quot;distrib.singlePass does not return correct set of fields for multi-fl-parameter requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6796&quot;&gt;&lt;del&gt;SOLR-6796&lt;/del&gt;&lt;/a&gt; is about.&lt;/p&gt;</comment>
                            <comment id="14226909" author="shalinmangar" created="Wed, 26 Nov 2014 22:35:27 +0000"  >&lt;p&gt;Thanks Per. I&apos;ve assigned the other issue to myself too. I&apos;m travelling today and tomorrow but I will review and commit the fixes by the weekend.&lt;/p&gt;</comment>
                            <comment id="14226930" author="yseeley@gmail.com" created="Wed, 26 Nov 2014 22:45:11 +0000"  >&lt;p&gt;Both the original code and the patches seem more complex than needed....&lt;br/&gt;
why is it necessary to rebuild the fl parameter rather than just append another (it&apos;s multi-valued)?&lt;/p&gt;</comment>
                            <comment id="14227348" author="steff1193" created="Thu, 27 Nov 2014 07:28:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;Both the original code and the patches seem more complex than needed....&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree. I didnt want to spend much time making it less complex. Just wanted it to work. When I have brought cleaned up code in the past, I hasnt been appreciated much. Some times it has been rejected with an argument about creating another issue for cleanup. &lt;/p&gt;</comment>
                            <comment id="14227498" author="steff1193" created="Thu, 27 Nov 2014 10:42:33 +0000"  >&lt;p&gt;But ok, here is a fix that cleans up a little bit. Essentially using the FL&apos;s of the outer request. But we have to add id-field and score if not already in there&lt;br/&gt;
Besides the patch you should be able to delete &quot;import java.util.regex.Pattern&quot; as well&lt;/p&gt;

&lt;p&gt;Also passes 4.4.0+ test-suite running with distrib.singlePass all over&lt;/p&gt;</comment>
                            <comment id="14231325" author="steff1193" created="Tue, 2 Dec 2014 11:20:33 +0000"  >&lt;p&gt;Maybe I can convince you to take a look at &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6812&quot; title=&quot;distrib.singlePass does not work for expand-request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6812&quot;&gt;&lt;del&gt;SOLR-6812&lt;/del&gt;&lt;/a&gt; also, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;?&lt;br/&gt;
And maybe &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6813&quot; title=&quot;distrib.singlePass does not work for expand-request - start/rows included&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6813&quot;&gt;SOLR-6813&lt;/a&gt;? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I know I am pushing it now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14231445" author="shalinmangar" created="Tue, 2 Dec 2014 13:12:28 +0000"  >&lt;p&gt;Patch which combines the test and fix given by Per. I moved the test to DistributedQueryComponentOptimizationTest.&lt;/p&gt;

&lt;p&gt;I&apos;ll commit once the test suite passes.&lt;/p&gt;</comment>
                            <comment id="14231448" author="shalinmangar" created="Tue, 2 Dec 2014 13:13:44 +0000"  >&lt;p&gt;I&apos;ll take a look at &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6812&quot; title=&quot;distrib.singlePass does not work for expand-request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6812&quot;&gt;&lt;del&gt;SOLR-6812&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6813&quot; title=&quot;distrib.singlePass does not work for expand-request - start/rows included&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6813&quot;&gt;SOLR-6813&lt;/a&gt; too but I know very little about ExpandComponent so if things get too hairy, I&apos;ll probably defer to someone else.&lt;/p&gt;</comment>
                            <comment id="14231502" author="jira-bot" created="Tue, 2 Dec 2014 14:04:41 +0000"  >&lt;p&gt;Commit 1642873 from shalin@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1642873&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1642873&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6796&quot; title=&quot;distrib.singlePass does not return correct set of fields for multi-fl-parameter requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6796&quot;&gt;&lt;del&gt;SOLR-6796&lt;/del&gt;&lt;/a&gt;: distrib.singlePass does not return correct set of fields for multi-fl-parameter requests&lt;/p&gt;</comment>
                            <comment id="14231505" author="jira-bot" created="Tue, 2 Dec 2014 14:06:01 +0000"  >&lt;p&gt;Commit 1642874 from shalin@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1642874&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1642874&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6796&quot; title=&quot;distrib.singlePass does not return correct set of fields for multi-fl-parameter requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6796&quot;&gt;&lt;del&gt;SOLR-6796&lt;/del&gt;&lt;/a&gt;: distrib.singlePass does not return correct set of fields for multi-fl-parameter requests&lt;/p&gt;</comment>
                            <comment id="14231521" author="jira-bot" created="Tue, 2 Dec 2014 14:08:37 +0000"  >&lt;p&gt;Commit 1642876 from shalin@apache.org in branch &apos;dev/branches/lucene_solr_4_10&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1642876&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1642876&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6796&quot; title=&quot;distrib.singlePass does not return correct set of fields for multi-fl-parameter requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6796&quot;&gt;&lt;del&gt;SOLR-6796&lt;/del&gt;&lt;/a&gt;: distrib.singlePass does not return correct set of fields for multi-fl-parameter requests&lt;/p&gt;</comment>
                            <comment id="14231523" author="shalinmangar" created="Tue, 2 Dec 2014 14:11:49 +0000"  >&lt;p&gt;Thanks Per!&lt;/p&gt;</comment>
                            <comment id="14332553" author="anshumg" created="Mon, 23 Feb 2015 05:00:38 +0000"  >&lt;p&gt;Bulk close after 5.0 release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12696879">SOLR-5768</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12758865">SOLR-6812</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12758665">SOLR-6810</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12684643" name="SOLR-6796.patch" size="5008" author="shalin" created="Tue, 2 Dec 2014 13:12:28 +0000"/>
                            <attachment id="12684032" name="fix.patch" size="3417" author="steff1193" created="Thu, 27 Nov 2014 10:42:33 +0000"/>
                            <attachment id="12683816" name="fix.patch" size="2446" author="steff1193" created="Wed, 26 Nov 2014 10:01:26 +0000"/>
                            <attachment id="12683593" name="fix.patch" size="2461" author="steff1193" created="Tue, 25 Nov 2014 16:39:08 +0000"/>
                            <attachment id="12683577" name="fix.patch" size="2873" author="steff1193" created="Tue, 25 Nov 2014 15:34:01 +0000"/>
                            <attachment id="12683576" name="test_that_reveals_the_problem.patch" size="901" author="steff1193" created="Tue, 25 Nov 2014 15:33:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22rnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>