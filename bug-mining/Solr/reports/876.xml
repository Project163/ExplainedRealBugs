<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:27:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-3344] POM dependencies not all there yet for solr-test-framework</title>
                <link>https://issues.apache.org/jira/browse/SOLR-3344</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The pom for solr-test-framework does not mention jetty, so a test case that doesn&apos;t get jetty into it&apos;s classpath otherwise fails with:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NoClassDefFoundError: org/eclipse/jetty/server/SessionIdManager
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="12550361">SOLR-3344</key>
            <summary>POM dependencies not all there yet for solr-test-framework</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sarowe">Steven Rowe</assignee>
                                    <reporter username="bmargulies">Benson Margulies</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Apr 2012 11:47:42 +0000</created>
                <updated>Fri, 10 May 2013 10:38:38 +0000</updated>
                            <resolved>Tue, 10 Apr 2012 19:43:20 +0000</resolved>
                                    <version>4.0-ALPHA</version>
                                    <fixVersion>4.0-ALPHA</fixVersion>
                                    <component>Build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13250581" author="bmargulies" created="Tue, 10 Apr 2012 11:54:37 +0000"  >&lt;p&gt;Here&apos;s the fix.&lt;/p&gt;</comment>
                            <comment id="13250649" author="steve_rowe" created="Tue, 10 Apr 2012 13:41:56 +0000"  >&lt;p&gt;Benson, where are you seeing these failures?  Why hasn&apos;t Jenkins unearthed them?&lt;/p&gt;

&lt;p&gt;Why should Solr test-framework declare these dependencies at all?  That is, why can&apos;t modules with Jetty test dependencies simply declare the dependency there (with scope=test)?  This is already the case for the following Solr modules: solr-core, clustering, and dataimporthandler.&lt;/p&gt;

&lt;p&gt;If it does turn out that Solr test-framework is the right place for these dependencies, it doesn&apos;t require Jetty to compile, so at a minimum, I would argue that the default compile scope you&apos;ve used is inappropriate.  Maybe scope=runtime?&lt;/p&gt;</comment>
                            <comment id="13250716" author="bmargulies" created="Tue, 10 Apr 2012 15:08:50 +0000"  >&lt;p&gt;Here&apos;s how this plays out.&lt;/p&gt;

&lt;p&gt;In my very own project, not in the lucene tree anywhere, I wrote a test class that uses the base class for distributed tests. So I put the test-framework in as a &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt; dependency.&lt;/p&gt;

&lt;p&gt;It compiles fine, but gets NoClassDefFound for Jetty when I run it. Why? Well, jetty is listed as an &lt;b&gt;optional&lt;/b&gt; dependency of solr-core. So it is not transitive.&lt;/p&gt;

&lt;p&gt;I think that it&apos;s reasonable for the test framework jar to list it as a required dependency, since tests in there depend on it. However, there is an alternative (other than nothing): list it again as an optional dependency in test-framework, just to give people a hint, and/or change the javadoc for the BaseDistributedTestCase to note this requirement. &lt;/p&gt;
</comment>
                            <comment id="13250733" author="steve_rowe" created="Tue, 10 Apr 2012 15:23:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think that it&apos;s reasonable for the test framework jar to list it as a required dependency, since tests in there depend on it. However, there is an alternative (other than nothing): list it again as an optional dependency in test-framework, just to give people a hint, and/or change the javadoc for the BaseDistributedTestCase to note this requirement. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I assume you&apos;re referring to &lt;tt&gt;BaseDistributed*Search*TestCase&lt;/tt&gt;, which depends on solr-core&apos;s &lt;tt&gt;oas.client.solrj.embedded.JettySolrRunner&lt;/tt&gt;?&lt;/p&gt;

&lt;p&gt;I like the optional dependencies alternative better: add optional jetty dependencies to Solr test-framework, and change the javadoc for BaseDistributedSearchTestCase to note this requirement.&lt;/p&gt;</comment>
                            <comment id="13250753" author="steve_rowe" created="Tue, 10 Apr 2012 15:37:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;I like the optional dependencies alternative better: add optional jetty dependencies to Solr test-framework, and change the javadoc for BaseDistributedSearchTestCase to note this requirement.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thinking about this more, the rationale I would ordinarily use to justify making a dependency optional involves minimizing &lt;b&gt;runtime&lt;/b&gt; dependencies.  But the Solr test-framework is a test-only module, and requiring &lt;b&gt;test&lt;/b&gt; dependencies that won&apos;t be used by all consumers should not cause any undue hardship.&lt;/p&gt;

&lt;p&gt;So I&apos;ve changed my mind.  I&apos;ll put up a superset of your patch, Benson, that removes the dataimporthandler and clustering POMs&apos; jetty dependencies.  I&apos;ll leave solr-core&apos;s optional dependency as-is.&lt;/p&gt;</comment>
                            <comment id="13250757" author="bmargulies" created="Tue, 10 Apr 2012 15:40:32 +0000"  >&lt;p&gt;Thank you very much.&lt;/p&gt;</comment>
                            <comment id="13250909" author="steve_rowe" created="Tue, 10 Apr 2012 18:19:20 +0000"  >&lt;p&gt;Patch, adding 3 required Jetty dependencies to the Solr test-framework POM template, and removing those dependencies from the dataimporthandler and clustering POM templates.&lt;/p&gt;

&lt;p&gt;Tests all pass for me locally.&lt;/p&gt;

&lt;p&gt;Committing shortly.&lt;/p&gt;</comment>
                            <comment id="13250922" author="steve_rowe" created="Tue, 10 Apr 2012 18:25:08 +0000"  >&lt;p&gt;Committed to trunk: r1311905.&lt;/p&gt;</comment>
                            <comment id="13250957" author="steve_rowe" created="Tue, 10 Apr 2012 19:00:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;If it does turn out that Solr test-framework is the right place for these dependencies, it doesn&apos;t require Jetty to compile, so at a minimum, I would argue that the default compile scope you&apos;ve used is inappropriate. Maybe scope=runtime?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I forgot to incorporate this change - reopening to change Solr test-framework&apos;s Jetty dependencies&apos; scope from compile to runtime.&lt;/p&gt;</comment>
                            <comment id="13251001" author="steve_rowe" created="Tue, 10 Apr 2012 19:41:38 +0000"  >&lt;p&gt;Patch switching Solr test-framework&apos;s Jetty dependencies&apos; scope from compile to runtime.  All Solr tests pass.  Committing shortly.&lt;/p&gt;</comment>
                            <comment id="13251003" author="steve_rowe" created="Tue, 10 Apr 2012 19:43:20 +0000"  >&lt;p&gt;Committed compile-&amp;gt;runtime scope changes in r1311957.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12522096" name="0001-Add-jetty-deps.patch" size="1209" author="bmargulies" created="Tue, 10 Apr 2012 11:54:37 +0000"/>
                            <attachment id="12522158" name="SOLR-3344-runtime-scope.patch" size="792" author="sarowe" created="Tue, 10 Apr 2012 19:41:38 +0000"/>
                            <attachment id="12522144" name="SOLR-3344.patch" size="2843" author="sarowe" created="Tue, 10 Apr 2012 18:19:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>235226</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 33 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03f7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17899</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>