<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:33:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-12533] Collection creation fails if metrics are called during core creation</title>
                <link>https://issues.apache.org/jira/browse/SOLR-12533</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;There is a race condition in SorlCore&apos;s constructor:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the metrics.indexSize call implicitly creates a data/index folder for that core&lt;/li&gt;
	&lt;li&gt;if the data/index folder exists, no segments file will be created&lt;/li&gt;
	&lt;li&gt;the searcher won&apos;t start up if there are no segments file in the data/index folder&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This is probably the root cause for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2130&quot; title=&quot;Empty index directory causes FileNotFoundException error when starting in-memory SOLR server (RAMDirectory)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2130&quot;&gt;&lt;del&gt;SOLR-2130&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2801&quot; title=&quot;IndexNotFoundException thrown when the index directory has no segments file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2801&quot;&gt;&lt;del&gt;SOLR-2801&lt;/del&gt;&lt;/a&gt; as well.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13169537">SOLR-12533</key>
            <summary>Collection creation fails if metrics are called during core creation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gezapeti">G&#233;zapeti</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Jul 2018 13:58:51 +0000</created>
                <updated>Sat, 8 Jun 2019 15:00:32 +0000</updated>
                            <resolved>Wed, 4 Jul 2018 02:58:47 +0000</resolved>
                                    <version>7.0</version>
                                    <fixVersion>7.5</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="16529958" author="gezapeti" created="Mon, 2 Jul 2018 14:02:35 +0000"  >&lt;p&gt;We should initialize the metrics later to avoid this race condition.&lt;/p&gt;</comment>
                            <comment id="16530351" author="gezapeti" created="Mon, 2 Jul 2018 19:44:51 +0000"  >&lt;p&gt;I think the root cause is that the index core.getIndexSize() creates the data/index folder if it does no exists. This is a side effect which the getIndexSize() should no have. I&apos;ve refreshed the pull request with the new fix&lt;/p&gt;</comment>
                            <comment id="16530356" author="yseeley@gmail.com" created="Mon, 2 Jul 2018 19:48:36 +0000"  >&lt;p&gt;These changes look good to me.  I plan on committing after unit tests finish running.&lt;/p&gt;</comment>
                            <comment id="16532182" author="jira-bot" created="Wed, 4 Jul 2018 02:55:51 +0000"  >&lt;p&gt;Commit b7b6f242e8db06ef5a1ff441dfc8123fc811c121 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=b7b6f24&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=b7b6f24&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12533&quot; title=&quot;Collection creation fails if metrics are called during core creation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12533&quot;&gt;&lt;del&gt;SOLR-12533&lt;/del&gt;&lt;/a&gt;: getting index size shouldn&apos;t create directory (metrics race)&lt;/p&gt;</comment>
                            <comment id="16532183" author="jira-bot" created="Wed, 4 Jul 2018 02:58:06 +0000"  >&lt;p&gt;Commit 2e22a12f0e28add0335ea3c56c5236175a76604c in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=2e22a12&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=2e22a12&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12533&quot; title=&quot;Collection creation fails if metrics are called during core creation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12533&quot;&gt;&lt;del&gt;SOLR-12533&lt;/del&gt;&lt;/a&gt;: getting index size shouldn&apos;t create directory (metrics race)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vg8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>