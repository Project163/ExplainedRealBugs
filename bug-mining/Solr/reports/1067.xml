<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:30:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-3734] Forever loop in schema browser</title>
                <link>https://issues.apache.org/jira/browse/SOLR-3734</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When I start Solr with the attached conf directory, and hit the Schema Browser, the loading circle spins permanently. &lt;/p&gt;

&lt;p&gt;I don&apos;t know if the problem is in the UI or in Solr. The UI does not display the Ajax solr calls, and I don&apos;t have a debugging proxy.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12603686">SOLR-3734</key>
            <summary>Forever loop in schema browser</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="steffkes">Stefan Matheis</assignee>
                                    <reporter username="lancenorskog">Lance Norskog</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Aug 2012 05:22:13 +0000</created>
                <updated>Thu, 16 Feb 2017 15:55:20 +0000</updated>
                            <resolved>Mon, 1 Oct 2012 13:37:55 +0000</resolved>
                                                    <fixVersion>4.1</fixVersion>
                                    <component>Admin UI</component>
                    <component>Schema and Analysis</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13445820" author="steffkes" created="Fri, 31 Aug 2012 10:22:52 +0000"  >&lt;p&gt;The reason is pretty simple: in your schema, you have copyfield for a non-existing field defined:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;alphaNameSort: {
  type: &lt;span class=&quot;code-quote&quot;&gt;&quot;alphaOnlySort&quot;&lt;/span&gt;,
  flags: &lt;span class=&quot;code-quote&quot;&gt;&quot;IT-----O-----l&quot;&lt;/span&gt;,
  copyDests: [ ],
  copySources: [
    &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.solr.schema.SchemaField:name_def{type=textgen,properties=indexed,tokenized,stored}&quot;&lt;/span&gt;
  ]
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;from the schema.xml:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &amp;lt;!-- copy name to alphaNameSort, a field designed &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sorting by name --&amp;gt;
 &amp;lt;copyField source=&lt;span class=&quot;code-quote&quot;&gt;&quot;name_def&quot;&lt;/span&gt; dest=&lt;span class=&quot;code-quote&quot;&gt;&quot;alphaNameSort&quot;&lt;/span&gt;/&amp;gt;
 &amp;lt;copyField source=&lt;span class=&quot;code-quote&quot;&gt;&quot;name_en&quot;&lt;/span&gt; dest=&lt;span class=&quot;code-quote&quot;&gt;&quot;alphaNameSort_en&quot;&lt;/span&gt;/&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That is a case which the Schema-Browser is right now not able to handle correctly .. Perhaps we can/should collect such information/&quot;problems&quot; and display them to the user?&lt;/p&gt;</comment>
                            <comment id="13446358" author="lancenorskog" created="Fri, 31 Aug 2012 20:50:24 +0000"  >&lt;p&gt;If there is an exception or a timeout, the UI should show the problem.&lt;/p&gt;</comment>
                            <comment id="13447517" author="steffkes" created="Tue, 4 Sep 2012 07:00:12 +0000"  >&lt;p&gt;First Draft, just a quick hack.&lt;/p&gt;</comment>
                            <comment id="13449267" author="hossman" created="Wed, 5 Sep 2012 23:39:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;The reason is pretty simple: in your schema, you have copyfield for a non-existing field defined:&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;steffkes: i don&apos;t understand your comment.  those copyField&apos;s are legal, and the fields do exist, because there are dynamicField&apos;s that define them...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;dynamicField name=&quot;*_def&quot; type=&quot;textgen&quot; indexed=&quot;true&quot;/&amp;gt;
&amp;lt;dynamicField name=&quot;*_en&quot; type=&quot;text_en&quot; indexed=&quot;true&quot;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Is there a problem in the request handler the UI is using to get schema information, that it doesn&apos;t expose these source/dest fields if they xist because of dynamicField, or is the problem solely in the javascript code?&lt;/p&gt;

&lt;p&gt;(ie: can i help?)&lt;/p&gt;</comment>
                            <comment id="13449303" author="hossman" created="Thu, 6 Sep 2012 00:25:45 +0000"  >&lt;p&gt;watching the logs while using the UI, it seems that the crux of the info all comes from these two urls...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;INFO: [collection1] webapp=/solr path=/admin/luke params={numTerms=0&amp;amp;wt=json} status=0 QTime=10 
Sep 5, 2012 4:51:45 PM org.apache.solr.core.SolrCore execute
INFO: [collection1] webapp=/solr path=/admin/luke params={wt=json&amp;amp;show=schema} status=0 QTime=3 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ignoring for a moment that it seems absurd to me that the strings in the &quot;copyDests&quot; and &quot;copySources&quot; arrays are the &quot;toString&quot; of the SchemaField/CopyField objects, instead of just the field names: i &lt;b&gt;think&lt;/b&gt; the data in the response is correct.&lt;/p&gt;

&lt;p&gt;It seems, if i&apos;m understanding correctly, that the root problem is that the UI expects all copySources returned by show=schema to be real field names that were already by the previous numTerms=0 request - but this is not guaranteed, nor is it abnormal to have these copyFields based on dynamicFields.&lt;/p&gt;

&lt;p&gt;And if i&apos;m understanding correctly, all the UI is doing with this information is populating &quot;Copied from&quot; and &quot;Copied to&quot; lists, which then link to &quot;/schema-browser?field=foo&quot; (and maybe &quot;/schema-browser?dynamic-field=foo_*&quot; - but i didn&apos;t actually see any examples of that) to see details about those fields.  But the &quot;/schema-browser?field=foo&quot; URLs only seem to work if that field actaully exists in the luke?numTerms=0 response &amp;#8211; even if they are legal because of dynamicField.&lt;/p&gt;

&lt;p&gt;So, for example, this address_s URL doesn&apos;t work in the UI  using the example configs on trunk if you have no data indexed, but once you index the sample data it does start to work...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://localhost:8983/solr/#/collection1/schema-browser?field=address_s&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/#/collection1/schema-browser?field=address_s&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think the &quot;correct&quot; fixes would be...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;the UI should not freak out if a copySources or copyDest refers to a field or dynamic field pattern it doesn&apos;t know about.  it should list it in the display as usual and provide the appropriate ?field=foo or ?field=foo_* link (depending on wether the copySource contains a wildcard.&lt;/li&gt;
	&lt;li&gt;if someone clicks on one of those links, and there is no field data available about a field (because it isn&apos;t explicitly declared, nor does it exist in the index, so it&apos;s not returned by the luke?numTerms=0 request) then the UI should display a simple warning &quot;Field not found in index, no details available&quot; or something like that.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We can probably look into improving that second case in the future (so even if it&apos;s not in the index, and wasn&apos;t returned by the luke?numTerms-0 request, the UI should be able to ask luke for info about a field by name, and have luke response back with &quot;not currently in the index, but it is a legal field name because of dynamicField foo_*, and heres&apos; the fieldType and field flags&quot;)&lt;/p&gt;



</comment>
                            <comment id="13449318" author="hossman" created="Thu, 6 Sep 2012 00:48:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;Ignoring for a moment that it seems absurd to me that the strings in the &quot;copyDests&quot; and &quot;copySources&quot; arrays are the &quot;toString&quot; of the SchemaField/CopyField objects, instead of just the field names: i think the data in the response is correct.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;spun this off into &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3795&quot; title=&quot;/admin/luke?show=schema is returning raw toString of SchemaField and CopyField objects for &amp;quot;copyDests&amp;quot; and &amp;quot;copySources&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3795&quot;&gt;&lt;del&gt;SOLR-3795&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13449544" author="steffkes" created="Thu, 6 Sep 2012 09:59:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;It seems, if i&apos;m understanding correctly, that the root problem is that the UI expects all copySources returned by show=schema to be real field names that were already by the previous numTerms=0 request - but this is not guaranteed, nor is it abnormal to have these copyFields based on dynamicFields.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;steffkes 0 : hoss 1 :/ exactly what you said - didn&apos;t look close enough .. i&apos;ll rework the patch and try to get your two points in it!&lt;/p&gt;</comment>
                            <comment id="13456862" author="steffkes" created="Mon, 17 Sep 2012 07:48:47 +0000"  >&lt;p&gt;Next version .. &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;removing Legacy-Code for Handling CopyDests/CopySources&lt;/li&gt;
	&lt;li&gt;Introducing &lt;tt&gt;partial&lt;/tt&gt; Marker, used to display a info-box&lt;/li&gt;
	&lt;li&gt;Hiding all Informations which aren&apos;t available while in partial-state&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13462956" author="steffkes" created="Tue, 25 Sep 2012 16:51:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lancenorskog&quot; class=&quot;user-hover&quot; rel=&quot;lancenorskog&quot;&gt;lancenorskog&lt;/a&gt; would you mind having a look, if that works as expected?&lt;/p&gt;</comment>
                            <comment id="13464413" author="lancenorskog" created="Thu, 27 Sep 2012 04:19:43 +0000"  >&lt;p&gt;Hi-&lt;/p&gt;

&lt;p&gt;Yes, this works in branch_4x, using the schema I submitted. I do not have ability to test whether it handles exceptions well. When you are writing new analyzer components, it is helpful for the UI to say &quot;your code blew up&quot;.&lt;/p&gt;</comment>
                            <comment id="13466795" author="steffkes" created="Mon, 1 Oct 2012 13:37:56 +0000"  >&lt;p&gt;Committed revision 1392318. trunk&lt;br/&gt;
Committed revision 1392320. branch_4x&lt;/p&gt;</comment>
                            <comment id="13470962" author="steffkes" created="Sat, 6 Oct 2012 09:59:23 +0000"  >&lt;p&gt;Committed revision 1394980. lucene_solr_4_0&lt;/p&gt;</comment>
                            <comment id="13610720" author="commit-tag-bot" created="Fri, 22 Mar 2013 16:29:33 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Stefan Matheis&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1392320&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1392320&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3734&quot; title=&quot;Forever loop in schema browser&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3734&quot;&gt;&lt;del&gt;SOLR-3734&lt;/del&gt;&lt;/a&gt;: Improve Schema-Browser Handling for CopyField using dynamicField&apos;s (merge r1392318)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12606334">SOLR-3795</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12610696">SOLR-3917</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12545377" name="SOLR-3734.patch" size="5796" author="steffkes" created="Mon, 17 Sep 2012 07:48:47 +0000"/>
                            <attachment id="12543624" name="SOLR-3734.patch" size="3731" author="steffkes" created="Tue, 4 Sep 2012 07:00:12 +0000"/>
                            <attachment id="12541183" name="SOLR-3734_schema_browser_blocks_solr_conf_dir.zip" size="143096" author="lancenorskog" created="Thu, 16 Aug 2012 05:24:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>240459</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 35 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0115z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3954</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>