<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:44:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-2960] XPathEntityProcessor does not clear nulls from empty multi-valued fields</title>
                <link>https://issues.apache.org/jira/browse/SOLR-2960</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I can&apos;t confidently say I completeley understand all that these classes so boldy tackle (that is, XPathEntityProcessor and XPathRecordReader) , but there may be someone who does. Nonetheless, I think I&apos;ve got some or most of this right, and more likely there are more someones like that. So, I won&apos;t qualify everything I say with a maybe &amp;#8211; lets this be the refactoring of those. &lt;/p&gt;

&lt;p&gt;Whenever mapping an XML file into a Solr Index, within the XPathRecordReader, (used by the XPathEntityProcessor within the DataImportHandler), if (A) a field is perceived to be null and is multivalued, it is pushed a value of null (on top of any other values it previously had). Otherwise (B) for multivalued fields, any found value is pushed onto its existing list of values, and the field is marked as found within the frame (a.k.a record). &lt;/p&gt;

&lt;p&gt;In general, when the end-tag of a record is seen, (C) the XPathRecordReader clears all of the field&apos;s values which have been marked as found, as tidiness is a value and they are supposedly no longer useful. &lt;br/&gt;
However, suppose that for a given record and multivalued field, a value is never found (though it may have been found for other fields in the record), only (A) will have occurred, never will (B) have occurred, the field will never have been marked as found, and thus (C) never will have occurred for the field. &lt;/p&gt;

&lt;p&gt;So, the field will remain, with its list of nulls. &lt;br/&gt;
This list of nulls will grow until either the last record or a non-null value is seen. &lt;br/&gt;
And so, (1) an out-of-memory error may occur, given sufficiently many records and a mortal computer. &lt;br/&gt;
Moreover, (2), a transformer cannot reliably depend on the number of nulls in the field (and this information cannot be guaranteed to be determined by some other value). &lt;/p&gt;

&lt;p&gt;I will try to provide more information, if this seems an issue and if there doesn&apos;t seem to be an answer. &lt;br/&gt;
At this point, if I understand the problem correctly, it seems the answer is to &apos;mark&apos; those null fields, considering &apos;null&apos; and added value. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12534586">SOLR-2960</key>
            <summary>XPathEntityProcessor does not clear nulls from empty multi-valued fields</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdyer">James Dyer</assignee>
                                    <reporter username="mwatts">Michael Watts</reporter>
                        <labels>
                    </labels>
                <created>Sat, 10 Dec 2011 03:59:52 +0000</created>
                <updated>Sun, 16 Mar 2014 13:04:05 +0000</updated>
                            <resolved>Fri, 27 Dec 2013 21:18:04 +0000</resolved>
                                                    <fixVersion>4.7</fixVersion>
                                    <component>contrib - DataImportHandler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13166791" author="mwatts" created="Sat, 10 Dec 2011 04:35:41 +0000"  >&lt;p&gt;for branch_3x&lt;/p&gt;</comment>
                            <comment id="13237073" author="hossman" created="Fri, 23 Mar 2012 20:31:40 +0000"  >&lt;p&gt;Bulk changing fixVersion 3.6 to 4.0 for any open issues that are unassigned and have not been updated since March 19.&lt;/p&gt;

&lt;p&gt;Email spam suppressed for this bulk edit; search for hoss20120323nofix36 to identify all issues edited&lt;/p&gt;</comment>
                            <comment id="13412171" author="hossman" created="Wed, 11 Jul 2012 22:26:13 +0000"  >&lt;p&gt;bulk fixing the version info for 4.0-ALPHA and 4.0 all affected issues have &quot;hoss20120711-bulk-40-change&quot; in comment&lt;/p&gt;</comment>
                            <comment id="13429800" author="rcmuir" created="Tue, 7 Aug 2012 03:43:09 +0000"  >&lt;p&gt;rmuir20120906-bulk-40-change&lt;/p&gt;</comment>
                            <comment id="13451072" author="hossman" created="Fri, 7 Sep 2012 22:27:57 +0000"  >&lt;p&gt;removing fixVersion=4.0 since there is no evidence that anyone is currently working on this issue.  (this can certainly be revisited if volunteers step forward)&lt;/p&gt;

&lt;p&gt;but also assigning to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdyer&quot; class=&quot;user-hover&quot; rel=&quot;jdyer&quot;&gt;jdyer&lt;/a&gt; to triage (in spite of it&apos;s age, the patch still applies cleanly, but does not have any sort of test)&lt;/p&gt;</comment>
                            <comment id="13855801" author="jdyer" created="Mon, 23 Dec 2013 17:55:13 +0000"  >&lt;p&gt;Here is an update of Michael Watts patch for current Trunk and also a unit test.  I plan to commit this soon.&lt;/p&gt;</comment>
                            <comment id="13856349" author="jira-bot" created="Tue, 24 Dec 2013 15:14:01 +0000"  >&lt;p&gt;Commit 1553285 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdyer&quot; class=&quot;user-hover&quot; rel=&quot;jdyer&quot;&gt;jdyer&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1553285&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1553285&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2960&quot; title=&quot;XPathEntityProcessor does not clear nulls from empty multi-valued fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2960&quot;&gt;&lt;del&gt;SOLR-2960&lt;/del&gt;&lt;/a&gt;: XPathEntityProcessor was adding spurious nulls to multi-valued fields&lt;/p&gt;</comment>
                            <comment id="13856395" author="jira-bot" created="Tue, 24 Dec 2013 17:10:02 +0000"  >&lt;p&gt;Commit 1553305 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdyer&quot; class=&quot;user-hover&quot; rel=&quot;jdyer&quot;&gt;jdyer&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1553305&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1553305&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2960&quot; title=&quot;XPathEntityProcessor does not clear nulls from empty multi-valued fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2960&quot;&gt;&lt;del&gt;SOLR-2960&lt;/del&gt;&lt;/a&gt;: XPathEntityProcessor was adding spurious nulls to multi-valued fields&lt;/p&gt;</comment>
                            <comment id="13857741" author="jdyer" created="Fri, 27 Dec 2013 21:18:04 +0000"  >&lt;p&gt;Thanks, Michael.  I apologize it took so long to commit this!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12457176">SOLR-1790</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12620225" name="SOLR-2960.patch" size="10823" author="jdyer" created="Mon, 23 Dec 2013 17:55:13 +0000"/>
                            <attachment id="12506838" name="SOLR-2960.patch" size="2203" author="mwatts" created="Sat, 10 Dec 2011 04:35:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>220308</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 47 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03hjj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18275</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>