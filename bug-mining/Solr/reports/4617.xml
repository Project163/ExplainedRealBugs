<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:46:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-15047] &apos;collapse&apos; on numeric field treats all docs with &apos;0&apos; in collapse field as part of the null group</title>
                <link>https://issues.apache.org/jira/browse/SOLR-15047</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The CollapseQParser has some very, &lt;em&gt;very&lt;/em&gt;, old code/semantics in it that date back to when the &lt;tt&gt;FieldCache&lt;/tt&gt; was incapable of differentiating between a document that contained &apos;0&apos; in the field being un-inverted, and a document that didn&apos;t have any value in that field.&lt;/p&gt;

&lt;p&gt;This limitation does not exist in DocValues (nor has it existed for a long time) but as the DocValues API has evolved, and as the collapse code has been updated to take advantage of the newer APIs that make it obvious when a document has no value in a field, the collapse code still explicitly equates &quot;0&quot; in a numeric field with the &quot;null group&quot;&lt;/p&gt;

&lt;p&gt;We can/should fix this bug so that the behavior is sane.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Known workaround for this problem: (redundantly) index a &quot;string&quot; version of the field being collapsed on - but this is a poor substitute fro being able to efficiently collapse on numeric fields (which take up less space on disk and in the collapse data structures)&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13345986">SOLR-15047</key>
            <summary>&apos;collapse&apos; on numeric field treats all docs with &apos;0&apos; in collapse field as part of the null group</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Dec 2020 22:09:27 +0000</created>
                <updated>Thu, 12 May 2022 00:26:23 +0000</updated>
                            <resolved>Wed, 6 Jan 2021 18:04:25 +0000</resolved>
                                                    <fixVersion>8.8</fixVersion>
                    <fixVersion>9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17249348" author="hossman" created="Mon, 14 Dec 2020 22:10:22 +0000"  >&lt;p&gt;attaching trivial test patch demonstrating problem.&lt;/p&gt;</comment>
                            <comment id="17249444" author="hossman" created="Tue, 15 Dec 2020 02:28:16 +0000"  >&lt;p&gt;i started working on this, but am currently blocked trying to make sense of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15048&quot; title=&quot;collapse + query elevation behaves inconsistenty w/ &amp;#39;null group&amp;#39; docs depending on group head selector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15048&quot;&gt;&lt;del&gt;SOLR-15048&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17259287" author="hossman" created="Tue, 5 Jan 2021 23:37:32 +0000"  >&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15048&quot; title=&quot;collapse + query elevation behaves inconsistenty w/ &amp;#39;null group&amp;#39; docs depending on group head selector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15048&quot;&gt;&lt;del&gt;SOLR-15048&lt;/del&gt;&lt;/a&gt; fixed, fixing this now becomes straight forward, and we already have a pretty decent test in place (just needed to switch switch one of the group values to &apos;0&apos; to prove the test failed before these fixes, and passes again with the changes in place)&lt;/p&gt;</comment>
                            <comment id="17259887" author="jira-bot" created="Wed, 6 Jan 2021 17:07:52 +0000"  >&lt;p&gt;Commit 07071ca8e107d184f9dfc2a2271b5dcaaceda650 in lucene-solr&apos;s branch refs/heads/master from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=07071ca&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=07071ca&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15047&quot; title=&quot;&amp;#39;collapse&amp;#39; on numeric field treats all docs with &amp;#39;0&amp;#39; in collapse field as part of the null group&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15047&quot;&gt;&lt;del&gt;SOLR-15047&lt;/del&gt;&lt;/a&gt;: Fix collapse parser behavior when collapsing on numeric fields to differentiate &apos;0&apos; group from null group&lt;/p&gt;</comment>
                            <comment id="17259944" author="jira-bot" created="Wed, 6 Jan 2021 17:59:52 +0000"  >&lt;p&gt;Commit c3dfa68ff9189acd753430a1c61843cbd34a187c in lucene-solr&apos;s branch refs/heads/branch_8x from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=c3dfa68&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=c3dfa68&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15047&quot; title=&quot;&amp;#39;collapse&amp;#39; on numeric field treats all docs with &amp;#39;0&amp;#39; in collapse field as part of the null group&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15047&quot;&gt;&lt;del&gt;SOLR-15047&lt;/del&gt;&lt;/a&gt;: Fix collapse parser behavior when collapsing on numeric fields to differentiate &apos;0&apos; group from null group&lt;/p&gt;</comment>
                            <comment id="17535385" author="janhoy" created="Thu, 12 May 2022 00:26:23 +0000"  >&lt;p&gt;Closing after the 9.0.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13346015">SOLR-15048</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13351139">SOLR-15078</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13018206" name="SOLR-15047.patch" size="33369" author="hossman" created="Wed, 6 Jan 2021 00:26:55 +0000"/>
                            <attachment id="13018204" name="SOLR-15047.patch" size="31978" author="hossman" created="Tue, 5 Jan 2021 23:37:27 +0000"/>
                            <attachment id="13017096" name="SOLR-15047.patch" size="3579" author="hossman" created="Mon, 14 Dec 2020 22:10:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0liag:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>