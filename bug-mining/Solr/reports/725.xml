<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:23:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-2861] transaction log / realtime-get failures </title>
                <link>https://issues.apache.org/jira/browse/SOLR-2861</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;realtime-get or the transaction log fails sometimes&lt;/p&gt;</description>
                <environment></environment>
        <key id="12529174">SOLR-2861</key>
            <summary>transaction log / realtime-get failures </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="simonw">Simon Willnauer</assignee>
                                    <reporter username="yseeley@gmail.com">Yonik Seeley</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Oct 2011 00:24:57 +0000</created>
                <updated>Fri, 10 May 2013 10:40:47 +0000</updated>
                            <resolved>Tue, 8 Nov 2011 07:07:08 +0000</resolved>
                                    <version>4.0-ALPHA</version>
                                    <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13137784" author="yseeley@gmail.com" created="Fri, 28 Oct 2011 00:33:31 +0000"  >&lt;p&gt;Here&apos;s the output from one of the failed jenkins runs.  I have not been able to reproduce these EOF exceptions on my boxes.&lt;/p&gt;</comment>
                            <comment id="13137786" author="yseeley@gmail.com" created="Fri, 28 Oct 2011 00:42:47 +0000"  >&lt;p&gt;One failure I was able to reproduce after running for an hour was this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;SEVERE: java.lang.RuntimeException: java.lang.NullPointerException
        at org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:1140)
        at org.apache.solr.update.DirectUpdateHandler2.commit(DirectUpdateHandler2.j
ava:332)
        at org.apache.solr.update.processor.RunUpdateProcessor.processCommit(RunUpda
teProcessorFactory.java:84)
        at org.apache.solr.handler.XMLLoader.processUpdate(XMLLoader.java:158)
        at org.apache.solr.handler.XMLLoader.load(XMLLoader.java:78)
        at org.apache.solr.handler.ContentStreamHandlerBase.handleRequestBody(Conten
tStreamHandlerBase.java:58)
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBa
se.java:129)
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1453)
        at org.apache.solr.servlet.DirectSolrConnection.request(DirectSolrConnection
.java:131)
        at org.apache.solr.util.TestHarness.update(TestHarness.java:247)
        at org.apache.solr.util.TestHarness.checkUpdateStatus(TestHarness.java:295)
        at org.apache.solr.util.TestHarness.validateUpdate(TestHarness.java:265)
        at org.apache.solr.SolrTestCaseJ4.checkUpdateU(SolrTestCaseJ4.java:357)
        at org.apache.solr.SolrTestCaseJ4.assertU(SolrTestCaseJ4.java:336)
        at org.apache.solr.SolrTestCaseJ4.assertU(SolrTestCaseJ4.java:330)
        at org.apache.solr.search.TestRealTimeGet$1.run(TestRealTimeGet.java:212)
Caused by: java.lang.NullPointerException
        at org.apache.solr.core.SolrCore.getIndexDir(SolrCore.java:156)
        at org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:1104)
        ... 15 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;But this doesn&apos;t look related.&lt;/p&gt;</comment>
                            <comment id="13137793" author="yseeley@gmail.com" created="Fri, 28 Oct 2011 00:47:31 +0000"  >&lt;p&gt;The reason for the bug above looks relatively clear - the _searcher variable is being accessed without grabbing searcherLock, and that&apos;s a no-no.  SolrCore.getIndexDir() is buggy.  I&apos;ll fix.&lt;/p&gt;</comment>
                            <comment id="13138249" author="yseeley@gmail.com" created="Fri, 28 Oct 2011 12:03:01 +0000"  >&lt;p&gt;OK, I finally got an assertion failure after running all night.  Log attached.&lt;/p&gt;

&lt;p&gt;I&apos;ve still never seen a single EOF exception like jenkins sees... &lt;/p&gt;</comment>
                            <comment id="13138701" author="yseeley@gmail.com" created="Fri, 28 Oct 2011 20:00:36 +0000"  >&lt;p&gt;Thanks selckin!  Looks like you hit what I did (a test assert, but not an EOF exception).&lt;br/&gt;
How easy is it for you to reproduce?&lt;/p&gt;</comment>
                            <comment id="13139114" author="selckin" created="Sat, 29 Oct 2011 05:02:05 +0000"  >&lt;p&gt;hit that one in about 30min then swapped to running all tests&lt;/p&gt;</comment>
                            <comment id="13139264" author="yseeley@gmail.com" created="Sat, 29 Oct 2011 13:12:27 +0000"  >&lt;p&gt;Here are some selected lines from fail4.xml, with comments:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;316   TEST:WRITER7: adding id 30 val= 3 DONE
466   TEST:WRITER9: softCommit start
# Note: &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is only the start of softCommit in the test... it&apos;s &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; in Solr so only one thread can reopen the
# reader and create a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; searcher at a time.
3074  TEST:WRITER10: deleting id 30 val= 6 DONE
# At &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; point the delete command has returned (and in the test, we put -6 in the model as the value)
3592  VERBOSE:WRITER9: TLOG: preSoftCommit: prevMap=1355224018 &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; map=10577597
# Note: actual reopen happens here, in a &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; context.
3593  VERBOSE:WRITER9: added searcher  Searcher@6460029d main  to _searchers reader version= 1319870174085
3673  VERBOSE:READER7: TLOG: lookup: &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; id 30 in prevMap 10577597 got &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; lookupLog=/opt/code/lusolr/solr/build/solr-core/test/1/solrtest-TestRealTimeGet-1319870172806/tlog/tlog.0000000000000000002
3673  VERBOSE:READER7: RealTimeGet using searcher  Searcher@6460029d main
3677  TEST:READER7: ERROR, id= 30 foundVal= 3 model val= -6 realTime= &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
# We find the old value using the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; searcher!
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From this, it doesn&apos;t look like it&apos;s the transaction log, or realtime-get.&lt;br/&gt;
We can see that the doc was deleted, a new searcher was opened, and then it was used to do a lookup and got the old value.&lt;/p&gt;

&lt;p&gt;Brainstorming:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Bug in solr reopen code. This seems less likely since getSearcher() calls that result in a reopen are synchronized from the outside...  so races shouldn&apos;t be possible there.&lt;/li&gt;
	&lt;li&gt;Bug in lucene.  This is looking more likely now, but I can&apos;t yet reproduce it in a pure lucene test.  It could be a reopen concurrency bug (like the last were) or possibly a MultiFields &amp;amp; friends bug (see SolrIndexSearcher/getFirstMatch used to do the lookup by id)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13139484" author="yseeley@gmail.com" created="Sat, 29 Oct 2011 22:54:20 +0000"  >&lt;p&gt;Here&apos;s the fail5.xml analysis (more debugging prints this run):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2340  TEST:WRITER5: adding id 0 val= 7 DONE
2347  VERBOSE:WRITER3: commit reopen start: reopenWithWriter= &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; searcher= Searcher@1e9cd8db main{DirectoryReader(segments_4:1319924531747:nrt _3(4.0):C7/4 _2(4.0):C4/3),version=1319924531747} reader= DirectoryReader(segments_4:1319924531747:nrt _3(4.0):C7/4 _2(4.0):C4/3)

2438 TEST:WRITER6: deleting id 0 val= 8
2480 TEST:WRITER6: deleting id 0 val= 8 DONE

2491  VERBOSE:WRITER3: reopen DONE: searcher= Searcher@2aa937cd main{DirectoryReader(segments_4:1319924531751:nrt _4(4.0):C13/8),version=1319924531751} reader= DirectoryReader(segments_4:1319924531751:nrt _4(4.0):C13/8)

### Note that the delete happened sometime during (or right before or after) the reopen, so we don&lt;span class=&quot;code-quote&quot;&gt;&apos;t know &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; version 1319924531751 reflects the delete.  That&apos;&lt;/span&gt;s OK, because we are going to &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; another reopen next:

2516  VERBOSE:WRITER6: commit reopen start: reopenWithWriter= &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; searcher= Searcher@2aa937cd main{DirectoryReader(segments_4:1319924531751:nrt _4(4.0):C13/8),version=1319924531751} reader= DirectoryReader(segments_4:1319924531751:nrt _4(4.0):C13/8)
2518  VERBOSE:WRITER6: reopen DONE: searcher= Searcher@59c958af main{DirectoryReader(segments_4:1319924531751:nrt _4(4.0):C13/8),version=1319924531751} reader= DirectoryReader(segments_4:1319924531751:nrt _4(4.0):C13/8)

### OK... so the reopen didn&lt;span class=&quot;code-quote&quot;&gt;&apos;t change the reader.  That&apos;&lt;/span&gt;s OK, since there weren&apos;t necessarily any &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt;
    changes (i.e. the delete of 0 could be reflected in the previous reopen).

2529  VERBOSE:READER18: RealTimeGet using searcher  Searcher@59c958af main{DirectoryReader(segments_4:1319924531751:nrt _4(4.0):C13/8),version=1319924531751}
2531  TEST:READER18: ERROR, id= 0 foundVal= 7 model val= -8 realTime= &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;

#### Oops, we&apos;ve found the old value again somehow.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Starting to look more like a lucene bug - but still can&apos;t reproduce at that level.&lt;/p&gt;</comment>
                            <comment id="13139785" author="yseeley@gmail.com" created="Sun, 30 Oct 2011 21:39:15 +0000"  >&lt;p&gt;Update:  I think I may have found one logic bug in solr - a hard commit reopen can go back in time since it doesn&apos;t use the writer to repoen.  For example Thread1: commit()  Thread2: reopen(writer)  Thread1: reopen(without_writer).   That last reopen will reopen at the point of the commit, going back in time if updates happened in between.&lt;/p&gt;

&lt;p&gt;Now the bad news: I changed the test to only use soft commits, and still hit problems.  I also changed some of the prints to immediately proceed and follow the lucene API calls to try and further nail this down.  The log file was too large to attach, but here is the analysis:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;13628  TEST:WRITER21: adding id 4 val= 21
13779  VERBOSE:WRITER21: updateDocument id:4 Document&amp;lt;stored,indexed,indexOptions=DOCS_ONLY&amp;lt;id:4&amp;gt; stored,indexed,tokenized,omitNorms,indexOptions=DOCS_ONLY&amp;lt;val_l:21&amp;gt;&amp;gt; org.apache.solr.update.SolrIndexWriter@4ba76eff
13969  VERBOSE:WRITER21: updateDocument id:4 DONE

69276  VERBOSE:WRITER3: start reopen from Searcher@17db8f8e main{DirectoryReader(segments_4:1320005350742:nrt _4h(4.0):C18/17 _4i(4.0):C3/2 _4j(4.0):C1 _4k(4.0):C3/1 _4l(4.0):C6)} writer= org.apache.solr.update.SolrIndexWriter@4ba76eff
69293  VERBOSE:WRITER3: reopen result DirectoryReader(segments_4:1320005350743:nrt _4h(4.0):C18/17 _4i(4.0):C3/2 _4j(4.0):C1 _4k(4.0):C3/1 _4l(4.0):C6/1)

69349  TEST:WRITER2: deleting id 4 val= 22
69365  VERBOSE:WRITER2: deleteDocuments id:4 org.apache.solr.update.SolrIndexWriter@4ba76eff
69366  VERBOSE:WRITER9: start reopen from Searcher@256d6cf main{DirectoryReader(segments_4:1320005350743:nrt _4h(4.0):C18/17 _4i(4.0):C3/2 _4j(4.0):C1 _4k(4.0):C3/1 _4l(4.0):C6/1)} writer= org.apache.solr.update.SolrIndexWriter@4ba76eff
69367 VERBOSE:WRITER9: reopen result (&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)

69394  VERBOSE:WRITER2: deleteDocuments id:4 DONE

69424  VERBOSE:WRITER7: start reopen from Searcher@61c3e3fb main{DirectoryReader(segments_4:1320005350743:nrt _4h(4.0):C18/17 _4i(4.0):C3/2 _4j(4.0):C1 _4k(4.0):C3/1 _4l(4.0):C6/1)} writer= org.apache.solr.update.SolrIndexWriter@4ba76eff
69426  VERBOSE:WRITER7: reopen result (&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
T

69447  VERBOSE:READER14: RealTimeGet using searcher  Searcher@742136c6 main{DirectoryReader(segments_4:1320005350743:nrt _4h(4.0):C18/17 _4i(4.0):C3/2 _4j(4.0):C1 _4k(4.0):C3/1 _4l(4.0):C6/1)}
TEST:READER14: ERROR, id= 4 foundVal= 21 model val= -20 realTime= &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So as you can see, this looks much like anaylsis5 - a delete happened during the first reopen (hence may or may not be reflected in that reopen), and then there was another reopen which resulted in &quot;null&quot; (no changes).  But a lookup using the resulting reader finds the document which should be deleted.&lt;/p&gt;

&lt;p&gt;This is still looking like we have a lucene bug.&lt;/p&gt;</comment>
                            <comment id="13139790" author="yseeley@gmail.com" created="Sun, 30 Oct 2011 21:42:05 +0000"  >&lt;p&gt;Here&apos;s a patch with the debugging code I&apos;ve been using.  Notice the prints surrounding the lucene API calls for adding, deleting, and reopening.&lt;/p&gt;</comment>
                            <comment id="13139823" author="simonw" created="Sun, 30 Oct 2011 23:06:08 +0000"  >&lt;p&gt;tricky shit man! I think I found the issue! we only check the bufferedDeleteStream for changes in IW#nrtIsCurrent instead we should check the deleteQueue since there could be some deletes still in the queue but not yet applied to the delete stream. here is a diff though:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Index: java/org/apache/lucene/index/IndexWriter.java
===================================================================
--- java/org/apache/lucene/index/IndexWriter.java	(revision 1195214)
+++ java/org/apache/lucene/index/IndexWriter.java	(working copy)
@@ -4074,7 +4074,7 @@
   &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; nrtIsCurrent(SegmentInfos infos) {
     &lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;IW.nrtIsCurrent &quot;&lt;/span&gt; + (infos.version == segmentInfos.version &amp;amp;&amp;amp; !docWriter.anyChanges() &amp;amp;&amp;amp; !bufferedDeletesStream.any()));
&lt;/span&gt;     ensureOpen();
-    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; infos.version == segmentInfos.version &amp;amp;&amp;amp; !docWriter.anyChanges() &amp;amp;&amp;amp; !bufferedDeletesStream.any();
+    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; infos.version == segmentInfos.version &amp;amp;&amp;amp; !docWriter.anyChanges() &amp;amp;&amp;amp; !docWriter.deleteQueue.anyChanges();
   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;yonik, I didn&apos;t try this since I only looked at the code for a little while to figure out what could be the reason you see this. Can you verify?&lt;/p&gt;</comment>
                            <comment id="13139996" author="simonw" created="Mon, 31 Oct 2011 08:23:34 +0000"  >&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3546&quot; title=&quot;IW#nrtIsCurrent retruns true if changes are in del queue but not in bufferedDeleteStream yet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-3546&quot;&gt;&lt;del&gt;LUCENE-3546&lt;/del&gt;&lt;/a&gt; to track this problem further&lt;/p&gt;</comment>
                            <comment id="13140204" author="yseeley@gmail.com" created="Mon, 31 Oct 2011 14:56:19 +0000"  >&lt;p&gt;Thanks Simon - I&apos;ll see if I can reproduce a failure with infostream on.&lt;/p&gt;</comment>
                            <comment id="13140567" author="yseeley@gmail.com" created="Mon, 31 Oct 2011 21:18:11 +0000"  >&lt;p&gt;I haven&apos;t yet been able to reproduce with infostream on, but here&apos;s another failure w/ it off (again raw log file too big to attach)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;187551  VERBOSE:WRITER27: deleteDocuments id:25 org.apache.solr.update.SolrIndexWriter@10c789fb
187552  VERBOSE:WRITER0: start reopen from Searcher@5df9cdda main{DirectoryReader(segments_t:1320072235329:nrt _hz(4.0):C18/11 _hy(4.0):c1 _hw(4.0):c1 _i1(4.0):C12/6 _i3(4.0):c1 _i4(4.0):C3 _i5(4.0):c1)} writer= org.apache.solr.update.SolrIndexWriter@10c789fb
187553  VERBOSE:WRITER0: reopen result (&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
187554  VERBOSE:WRITER27: deleteDocuments id:25 DONE

187559  VERBOSE:WRITER4: start reopen from Searcher@5166b0df main{DirectoryReader(segments_t:1320072235329:nrt _hz(4.0):C18/11 _hy(4.0):c1 _hw(4.0):c1 _i1(4.0):C12/6 _i3(4.0):c1 _i4(4.0):C3 _i5(4.0):c1)} writer= org.apache.solr.update.SolrIndexWriter@10c789fb
187560  VERBOSE:WRITER4: reopen result (&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)

187891  VERBOSE:READER8: RealTimeGet using searcher  Searcher@642424ad main{DirectoryReader(segments_t:1320072235329:nrt _hz(4.0):C18/11 _hy(4.0):c1 _hw(4.0):c1 _i1(4.0):C12/6 _i3(4.0):c1 _i4(4.0):C3 _i5(4.0):c1)}
187892  TEST:READER8: ERROR, id= 25 foundVal= 9 model val= -10 realTime= &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Definitely a pattern developing here (same as the previous two)... a delete happens concurrently with a reopen (of course from prints alone, we can&apos;t tell if it was just before, during, or just after).  The reopen following that reopen should reflect the delete at least... but it doesn&apos;t.&lt;/p&gt;</comment>
                            <comment id="13140624" author="yseeley@gmail.com" created="Mon, 31 Oct 2011 22:17:14 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Update: I think I may have found one logic bug in solr - a hard commit reopen can go back in time since it doesn&apos;t use the writer to repoen. For example Thread1: commit() Thread2: reopen(writer) Thread1: reopen(without_writer). That last reopen will reopen at the point of the commit, going back in time if updates happened in between.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Actually, I don&apos;t think this is true.  AFAIK, once you call openIfChanged(reader,writer) it doesn&apos;t matter if future calls are just to openIfChanged(reader) since reopening an NRT reader will always result in another NRT reader?&lt;/p&gt;</comment>
                            <comment id="13140770" author="yseeley@gmail.com" created="Tue, 1 Nov 2011 01:23:38 +0000"  >&lt;p&gt;OK, it finally failed with the infostream set (see fail11.xml)!  Unfortunately, I&apos;m not sure if it will provide much (or any) info.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
46563  VERBOSE:WRITER7: start reopen from Searcher@5f159e0c main{DirectoryReader(segments_2:1320108281745:nrt _5p(4.0):C20/16 _5n(4.0):C7/5 _5q(4.0):C7/2 _5r(4.0):C7 _5s(4.0):C2)} writer= org.apache.solr.update.SolrIndexWriter@1de4eb5b
46686  VERBOSE:WRITER7: reopen result DirectoryReader(segments_2:1320108281747:nrt _5p(4.0):C20/16 _5n(4.0):C7/5 _5q(4.0):C7/3 _5r(4.0):C7/1 _5s(4.0):C2 _5t(4.0):C1)

46706  VERBOSE:WRITER11: deleteDocuments id:12 org.apache.solr.update.SolrIndexWriter@1de4eb5b
46707  VERBOSE:WRITER0: start reopen from Searcher@502c06b2 main{DirectoryReader(segments_2:1320108281747:nrt _5p(4.0):C20/16 _5n(4.0):C7/5 _5q(4.0):C7/3 _5r(4.0):C7/1 _5s(4.0):C2 _5t(4.0):C1)} writer= org.apache.solr.update.SolrIndexWriter@1de4eb5b
46708  VERBOSE:WRITER0: reopen result (&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
46709  VERBOSE:WRITER11: deleteDocuments id:12 DONE

46714  VERBOSE:WRITER12: start reopen from Searcher@7a6bb93c main{DirectoryReader(segments_2:1320108281747:nrt _5p(4.0):C20/16 _5n(4.0):C7/5 _5q(4.0):C7/3 _5r(4.0):C7/1 _5s(4.0):C2 _5t(4.0):C1)} writer= org.apache.solr.update.SolrIndexWriter@1de4eb5b
46715  VERBOSE:WRITER12: reopen result (&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)

46924  VERBOSE:READER1: RealTimeGet using searcher  Searcher@69ed2bbd main{DirectoryReader(segments_3:1320108281747:nrt _5p(4.0):C20/16 _5n(4.0):C7/5 _5q(4.0):C7/3 _5r(4.0):C7/1 _5s(4.0):C2 _5t(4.0):C1)}
46926  VERBOSE:READER1: ERROR, id= 12 foundVal= 30 model val= -31 realTime= &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It&apos;s the same story: the delete happened concurrently (or slightly before or after) the reopen.  Both that reopen, and the following reopen returned null, which is definitely a bug.&lt;/p&gt;</comment>
                            <comment id="13141118" author="simonw" created="Tue, 1 Nov 2011 12:55:41 +0000"  >&lt;p&gt;I reopened &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3546&quot; title=&quot;IW#nrtIsCurrent retruns true if changes are in del queue but not in bufferedDeleteStream yet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-3546&quot;&gt;&lt;del&gt;LUCENE-3546&lt;/del&gt;&lt;/a&gt; since the bug actually exists. see my comments on  &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3546&quot; title=&quot;IW#nrtIsCurrent retruns true if changes are in del queue but not in bufferedDeleteStream yet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-3546&quot;&gt;&lt;del&gt;LUCENE-3546&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13141141" author="mikemccand" created="Tue, 1 Nov 2011 13:00:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;once you call openIfChanged(reader,writer) it doesn&apos;t matter if future calls are just to openIfChanged(reader) since reopening an NRT reader will always result in another NRT reader?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s correct.&lt;/p&gt;</comment>
                            <comment id="13141222" author="yseeley@gmail.com" created="Tue, 1 Nov 2011 15:04:43 +0000"  >&lt;p&gt;Here&apos;s a run  (fail13) w/ mixed hard+soft commits after Simon&apos;s patch.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;14047  VERBOSE:WRITER5: start reopen without writer, reader= DirectoryReader(segments_6:1320156373422:nrt _y(4.0):C78/7 _n(4.0):c2/1 _x(4.0):c11/1 _w(4.0):c1)
14184  VERBOSE:WRITER14: updateDocument id:98 Document&amp;lt;stored,indexed,indexOptions=DOCS_ONLY&amp;lt;id:98&amp;gt; stored,indexed,tokenized,omitNorms,indexOptions=DOCS_ONLY&amp;lt;val_l:3&amp;gt;&amp;gt; org.apache.solr.update.SolrIndexWriter@43a4181c
14504  VERBOSE:WRITER14: updateDocument id:98 DONE
14523  VERBOSE:WRITER5: reopen result DirectoryReader(segments_6:1320156373425:nrt _y(4.0):C78/15 _n(4.0):c2/1 _x(4.0):c11/1 _w(4.0):c1 _z(4.0):C7)

### The update to id:98 may or may not be in the resulting reader above

14728  VERBOSE:WRITER8: start reopen from Searcher@28294f62 main{DirectoryReader(segments_6:1320156373425:nrt _y(4.0):C78/15 _n(4.0):c2/1 _x(4.0):c11/1 _w(4.0):c1 _z(4.0):C7)} writer= org.apache.solr.update.SolrIndexWriter@43a4181c
14729  VERBOSE:WRITER8: reopen result (&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)

### But &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; reopen shows no changes, so the update id:98 must be in reader 1320156373425

14920  VERBOSE:READER2: RealTimeGet using searcher  Searcher@79b0d33c main{DirectoryReader(segments_6:1320156373425:nrt _y(4.0):C78/15 _n(4.0):c2/1 _x(4.0):c11/1 _w(4.0):c1 _z(4.0):C7)}
14922  VERBOSE:READER2: ERROR, id= 98 foundVal= 2 model val= 3 realTime= &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;

### Since we got the old value, we either missed the whole update, or just the delete part of the update
(since the uniqueKey lookup stops at the first match, the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; document may be in the index, but we hit the old document first that wasn&apos;t marked as deleted)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13141265" author="simonw" created="Tue, 1 Nov 2011 16:00:38 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;#those two happen at the same time roughly
14728 VERBOSE:WRITER8: start reopen from Searcher@28294f62 main{DirectoryReader(segments_6:1320156373425:nrt _y(4.0):C78/15 _n(4.0):c2/1 _x(4.0):c11/1 _w(4.0):c1 _z(4.0):C7)} writer= org.apache.solr.update.SolrIndexWriter@43a4181c
14729 VERBOSE:WRITER8: reopen result (&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)

14733 VERBOSE:WRITER7: start reopen from Searcher@79b0d33c main{DirectoryReader(segments_6:1320156373425:nrt _y(4.0):C78/15 _n(4.0):c2/1 _x(4.0):c11/1 _w(4.0):c1 _z(4.0):C7)} writer= org.apache.solr.update.SolrIndexWriter@43a4181c

14920 VERBOSE:READER2: RealTimeGet using searcher  Searcher@79b0d33c main{DirectoryReader(segments_6:1320156373425:nrt _y(4.0):C78/15 _n(4.0):c2/1 _x(4.0):c11/1 _w(4.0):c1 _z(4.0):C7)}
14922 VERBOSE:READER2: ERROR, id= 98 foundVal= 2 model val= 3 realTime= &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;

# here were are done -- ie the doc should be in 1320156373429
14928 VERBOSE:WRITER7: reopen result DirectoryReader(segments_6:1320156373429:nrt _y(4.0):C78/18 _n(4.0):c2/1 _x(4.0):c11/1 _w(4.0):c1 _z(4.0):C7 _10(4.0):c5 _11(4.0):c2)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;as I said - we can not rely on the order these logs are printed - this doesn&apos;t seem like a bug in lucene no?&lt;/p&gt;

&lt;p&gt;simon&lt;/p&gt;</comment>
                            <comment id="13141287" author="yseeley@gmail.com" created="Tue, 1 Nov 2011 16:22:39 +0000"  >&lt;blockquote&gt;&lt;p&gt;as I said - we can not rely on the order these logs are printed&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think we can rely on that order, and have seen nothing to indicate otherwise.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;#those two happen at the same time roughly&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right, hence my comment &quot;The update to id:98 may or may not be in the resulting reader above&quot;&lt;br/&gt;
But then after the &lt;b&gt;next&lt;/b&gt; openIfChanged() should definitely reflect the update.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;this doesn&apos;t seem like a bug in lucene no?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It absolutely looks like a lucene bug.&lt;br/&gt;
But given that it seems to only happen with a mix of hard and soft commits, it should be easier to track down.  First guess: maybe DirectoryReader.applyDeletes is false when it should be true.&lt;/p&gt;</comment>
                            <comment id="13142073" author="simonw" created="Wed, 2 Nov 2011 11:55:48 +0000"  >&lt;p&gt;I opened &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3551&quot; title=&quot;Yet another race in IW#nrtIsCurrent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-3551&quot;&gt;&lt;del&gt;LUCENE-3551&lt;/del&gt;&lt;/a&gt; for yet another issue in IW#nrtIsCurrent. I ran TestRealtimeGet over 1k times (trunk settings) without a failure usually this doesn&apos;t survive more than 100. yonik can you try to confirm?&lt;/p&gt;</comment>
                            <comment id="13142237" author="yseeley@gmail.com" created="Wed, 2 Nov 2011 16:02:59 +0000"  >&lt;p&gt;I just got a failure, but I had turned off verbose and cranked up the iterations to try and detect failures faster.&lt;br/&gt;
I&apos;ll try and reproduce with verbose on again.&lt;/p&gt;</comment>
                            <comment id="13142374" author="yseeley@gmail.com" created="Wed, 2 Nov 2011 18:18:28 +0000"  >&lt;p&gt;OK, here&apos;s the latest failure.&lt;br/&gt;
I verified that I&apos;m up-to-date on trunk (as of 11am EST) and that the patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3551&quot; title=&quot;Yet another race in IW#nrtIsCurrent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-3551&quot;&gt;&lt;del&gt;LUCENE-3551&lt;/del&gt;&lt;/a&gt; is applied.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;12125  VERBOSE:WRITER3: updateDocument id:12 Document&amp;lt;stored,indexed,indexOptions=DOCS_ONLY&amp;lt;id:12&amp;gt; stored,indexed,tokenized,omitNorms,indexOptions=DOCS_ONLY&amp;lt;val_l:63&amp;gt;&amp;gt; org.apache.solr.update.SolrIndexWriter@62d337d3
12126  VERBOSE:WRITER3: updateDocument id:12 DONE

12920  VERBOSE:WRITER9: start reopen without writer, reader= DirectoryReader(segments_6:1320256147506:nrt _1t(4.0):C21/14 _1u(4.0):C14/11)
12984  VERBOSE:WRITER9: reopen result DirectoryReader(segments_6:1320256147507:nrt _1t(4.0):C21/14 _1u(4.0):C14/11)

13042  VERBOSE:WRITER7: deleteDocuments id:12 org.apache.solr.update.SolrIndexWriter@62d337d3
13043  VERBOSE:WRITER7: deleteDocuments id:12 DONE

13249  VERBOSE:WRITER3: start reopen from Searcher@56e20ef8 main{DirectoryReader(segments_6:1320256147507:nrt _1t(4.0):C21/14 _1u(4.0):C14/11)} writer= org.apache.solr.update.SolrIndexWriter@62d337d3
13250  VERBOSE:WRITER3: reopen result (&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)

13255  VERBOSE:READER3: RealTimeGet using searcher  Searcher@1344e858 main{DirectoryReader(segments_6:1320256147507:nrt _1t(4.0):C21/14 _1u(4.0):C14/11)}
13256  VERBOSE:READER3: ERROR, id= 12 foundVal= 63 model val= -64 realTime= &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I just realized that since this seems to be happening with a mix of soft and hard commits, it&apos;s probably a thread safety issue when updates concurrently happen with a commit and I should add prints before/after calling commit also.&lt;/p&gt;</comment>
                            <comment id="13142830" author="yseeley@gmail.com" created="Thu, 3 Nov 2011 04:37:15 +0000"  >&lt;p&gt;Here&apos;s a failure with prints for the commit and with info stream on.&lt;/p&gt;

&lt;p&gt;Key debug outout:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;27273  VERBOSE:WRITER1: start reopen from Searcher@71412b61 main{DirectoryReader(segments_5:1320282632962:nrt _z(4.0):C21/17 _10(4.0):C3/2 _11(4.0):C6/5 _14(4.0):C8/3 _13(4.0):C4/1 _15(4.0):C1 _16(4.0):C5/1 _18(4.0):C5)} writer= org.apache.solr.update.SolrIndexWriter@1badd463
27321  VERBOSE:WRITER9: deleteDocuments id:14 org.apache.solr.update.SolrIndexWriter@1badd463
27895  VERBOSE:WRITER9: deleteDocuments id:14 DONE
28120  VERBOSE:WRITER1: reopen result DirectoryReader(segments_5:1320282632968:nrt _17(4.0):C19/7 _16(4.0):C5/3 _18(4.0):C5/2 _1a(4.0):C6/1 _19(4.0):C2)

28124  VERBOSE:WRITER6: writer.commit() start writer= org.apache.solr.update.SolrIndexWriter@1badd463

28135  VERBOSE:WRITER4: start reopen from Searcher@c16c2c0 main{DirectoryReader(segments_5:1320282632968:nrt _17(4.0):C19/7 _16(4.0):C5/3 _18(4.0):C5/2 _1a(4.0):C6/1 _19(4.0):C2)} writer= org.apache.solr.update.SolrIndexWriter@1badd463
28136  VERBOSE:WRITER4: reopen result (&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)

28159  VERBOSE:READER2: RealTimeGet using searcher  Searcher@962e703 main{DirectoryReader(segments_5:1320282632968:nrt _17(4.0):C19/7 _16(4.0):C5/3 _18(4.0):C5/2 _1a(4.0):C6/1 _19(4.0):C2)}
28226  VERBOSE:READER2: ERROR, id= 14 foundVal= 17 model val= -18 realTime= &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;

28355  VERBOSE:WRITER6: writer.commit() end
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For this one, it looks like the reopen was concurrent with the delete, and another reopen was concurrent with the commit.  Given that we seem to be only seeing these issues now with a mix of hard &amp;amp; soft commits, I&apos;d guess that the issue is when the commit overlaps with a reopen.&lt;/p&gt;</comment>
                            <comment id="13143117" author="simonw" created="Thu, 3 Nov 2011 13:05:58 +0000"  >&lt;p&gt;Yonik, I isolated a testcase which fails very quickly. See &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3551&quot; title=&quot;Yet another race in IW#nrtIsCurrent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-3551&quot;&gt;&lt;del&gt;LUCENE-3551&lt;/del&gt;&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="13143194" author="yseeley@gmail.com" created="Thu, 3 Nov 2011 14:16:51 +0000"  >&lt;p&gt;Great!  Trying it out now...&lt;/p&gt;</comment>
                            <comment id="13144268" author="yseeley@gmail.com" created="Fri, 4 Nov 2011 19:32:22 +0000"  >&lt;p&gt;OK, 24 hours on my box w/o a fail!&lt;/p&gt;</comment>
                            <comment id="13144291" author="simonw" created="Fri, 4 Nov 2011 20:07:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;OK, 24 hours on my box w/o a fail!&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;awesome! I am going to commit &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3551&quot; title=&quot;Yet another race in IW#nrtIsCurrent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-3551&quot;&gt;&lt;del&gt;LUCENE-3551&lt;/del&gt;&lt;/a&gt; soon&lt;/p&gt;</comment>
                            <comment id="13146109" author="simonw" created="Tue, 8 Nov 2011 07:07:08 +0000"  >&lt;p&gt;this has been fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3551&quot; title=&quot;Yet another race in IW#nrtIsCurrent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-3551&quot;&gt;&lt;del&gt;LUCENE-3551&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12529456">LUCENE-3546</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12529724">LUCENE-3551</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12501284" name="TEST-org.apache.solr.search.TestRealTimeGet.xml" size="952497" author="yseeley@gmail.com" created="Fri, 28 Oct 2011 12:03:01 +0000"/>
                            <attachment id="12501712" name="fail11.xml" size="4659217" author="yseeley@gmail.com" created="Tue, 1 Nov 2011 01:23:38 +0000"/>
                            <attachment id="12501780" name="fail13_postfix.xml" size="1219026" author="yseeley@gmail.com" created="Tue, 1 Nov 2011 15:04:42 +0000"/>
                            <attachment id="12501998" name="fail16.xml" size="682841" author="yseeley@gmail.com" created="Wed, 2 Nov 2011 18:18:28 +0000"/>
                            <attachment id="12502098" name="fail17.xml" size="2011022" author="yseeley@gmail.com" created="Thu, 3 Nov 2011 04:37:15 +0000"/>
                            <attachment id="12501449" name="fail4.xml" size="380058" author="yseeley@gmail.com" created="Sat, 29 Oct 2011 12:55:03 +0000"/>
                            <attachment id="12501478" name="fail5.xml" size="250064" author="yseeley@gmail.com" created="Sat, 29 Oct 2011 22:50:49 +0000"/>
                            <attachment id="12501203" name="jenkins_output.txt" size="18611" author="yseeley@gmail.com" created="Fri, 28 Oct 2011 00:33:31 +0000"/>
                            <attachment id="12501533" name="solr_debug.patch" size="31144" author="yseeley@gmail.com" created="Sun, 30 Oct 2011 21:42:04 +0000"/>
                            <attachment id="12501289" name="trunk-0.txt" size="2555" author="selckin" created="Fri, 28 Oct 2011 13:00:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215034</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03i3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18367</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>