<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:20:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-10184] bin/solr fails to run on java9 due to unrecognized GC logging options</title>
                <link>https://issues.apache.org/jira/browse/SOLR-10184</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hossman@tray:~/lucene/dev/solr [master] $ bin/solr start -f
Java HotSpot(TM) 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.
Java HotSpot(TM) 64-Bit Server VM warning: Option UseParNewGC was deprecated in version 9.0 and will likely be removed in a future release.
Unrecognized VM option &apos;PrintHeapAtGC&apos;
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(untested) workaround is to override GC_LOG_OPTS in &lt;tt&gt;solr.in.sh&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13045001">SOLR-10184</key>
            <summary>bin/solr fails to run on java9 due to unrecognized GC logging options</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                            <label>java9</label>
                    </labels>
                <created>Tue, 21 Feb 2017 22:57:55 +0000</created>
                <updated>Sat, 8 Jun 2019 15:33:22 +0000</updated>
                            <resolved>Tue, 14 Mar 2017 17:47:08 +0000</resolved>
                                                    <fixVersion>6.5</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                    <component>scripts and tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15877794" author="thetaphi" created="Wed, 22 Feb 2017 08:53:55 +0000"  >&lt;p&gt;See &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8145092&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8145092&lt;/a&gt; about this. But this is work in progress, as far as I see. Maybe it changes until final release. But we should update all the start scripts to use the new &lt;tt&gt;-Xlog&lt;/tt&gt; options instead of the old ones, if Java 9 was detected.&lt;/p&gt;</comment>
                            <comment id="15877803" author="thetaphi" created="Wed, 22 Feb 2017 08:58:16 +0000"  >&lt;p&gt;The JEPs for this change are:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;http://openjdk.java.net/jeps/158&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://openjdk.java.net/jeps/158&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://openjdk.java.net/jeps/271&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://openjdk.java.net/jeps/271&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This allows to now centralice all logging to a single command line option.&lt;/p&gt;</comment>
                            <comment id="15877809" author="thetaphi" created="Wed, 22 Feb 2017 09:02:51 +0000"  >&lt;p&gt;Here is a short info how to transfer the old deprecated PrintGCDetails flags to new ones: &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8145180&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8145180&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15904091" author="hossman" created="Thu, 9 Mar 2017 23:55:43 +0000"  >&lt;p&gt;thanks for the links Uwe, JEP 158 is interesting.&lt;/p&gt;

&lt;p&gt;Between the GC logging options that have been removed, and how the unified logging now deals with multiple tags (gc, all, etc..) &amp;amp; output specifiers (stdout, stderr, for file) in a single &apos;-Xlog&apos; param; it doesn&apos;t look viable to have an &lt;em&gt;exact&lt;/em&gt; java9 equivilent for what the &lt;tt&gt;bin/solr&lt;/tt&gt; script currently does with &lt;tt&gt;SOLR_LOGS_DIR&lt;/tt&gt; &amp;amp; &lt;tt&gt;GC_LOG_OPTS&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;The attached patch attempts to support the same ideas as best as (i can see) possible under java9...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;if the user doesn&apos;t configure a &lt;tt&gt;GC_LOG_OPTS&lt;/tt&gt;, then we (still) use a (verbose) default value for this param via &apos;-Xlog:gc&amp;#42;&apos;&lt;/li&gt;
	&lt;li&gt;if the user configures a blank value for &lt;tt&gt;GC_LOG_OPTS&lt;/tt&gt;, we (still) leave the param blank&lt;/li&gt;
	&lt;li&gt;if the effective value of &lt;tt&gt;GC_LOG_OPTS&lt;/tt&gt; is non blank, then foreach param option specified in &lt;tt&gt;GC_LOG_OPTS&lt;/tt&gt;:
	&lt;ul&gt;
		&lt;li&gt;if it starts with &apos;-Xlog:gc&apos;, and does not include an output specifier, then:
		&lt;ul&gt;
			&lt;li&gt;add a &apos;file&apos; output specifier based on &lt;tt&gt;SOLR_LOGS_DIR&lt;/tt&gt; (to mimic the &apos;-Xloggc&apos; param we use w/ java8)&lt;/li&gt;
			&lt;li&gt;add &lt;tt&gt;time,uptime&lt;/tt&gt; decorators (to mimic the -XX params we use w/ java8)&lt;/li&gt;
			&lt;li&gt;add &lt;tt&gt;filecount=9,filesize=20000&lt;/tt&gt; output-options (to mimic the -XX params we use w/ java8)&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;(for simplicity, if the user wants to specify multiple JEP158 tags in the &apos;-Xlog&apos; param , then the tag list has to start with &quot;gc&quot; in order for us to add a file option &amp;#8211; otherwise we ignore it.  likewise if the user wants to specify their own decorators or output-options, then they must also specify their own output (file, or stdout, or stderr) specifier as well, since it must come first in the &apos;-Xlog&apos; format string)&lt;/p&gt;

&lt;p&gt;While fixing this, I also did some small cleanup in how the &lt;tt&gt;java -version&lt;/tt&gt; output is parsed.&lt;/p&gt;

&lt;p&gt;Would appreciate detailed review &amp;amp; manual testing from folks since this type of script work is hard to write automated tests for.&lt;/p&gt;</comment>
                            <comment id="15924648" author="jira-bot" created="Tue, 14 Mar 2017 17:35:01 +0000"  >&lt;p&gt;Commit 90fa23cad82a29a5553a350f70be358830acb74c in lucene-solr&apos;s branch refs/heads/branch_6x from Chris Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=90fa23c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=90fa23c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10184&quot; title=&quot;bin/solr fails to run on java9 due to unrecognized GC logging options&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10184&quot;&gt;&lt;del&gt;SOLR-10184&lt;/del&gt;&lt;/a&gt;: Fix bin/solr so it can run properly on java9&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 09bd8612ce82c2852542127eb24b887c7b332a0d)&lt;/p&gt;</comment>
                            <comment id="15924649" author="jira-bot" created="Tue, 14 Mar 2017 17:35:05 +0000"  >&lt;p&gt;Commit 09bd8612ce82c2852542127eb24b887c7b332a0d in lucene-solr&apos;s branch refs/heads/master from Chris Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=09bd861&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=09bd861&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10184&quot; title=&quot;bin/solr fails to run on java9 due to unrecognized GC logging options&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10184&quot;&gt;&lt;del&gt;SOLR-10184&lt;/del&gt;&lt;/a&gt;: Fix bin/solr so it can run properly on java9&lt;/p&gt;</comment>
                            <comment id="16062657" author="janhoy" created="Mon, 26 Jun 2017 08:09:06 +0000"  >&lt;p&gt;This issue did not fix &lt;tt&gt;solr.cmd&lt;/tt&gt; script, so running on Windows and Java9 will most likely break? Open a new Jira?&lt;/p&gt;</comment>
                            <comment id="16062679" author="thetaphi" created="Mon, 26 Jun 2017 08:23:14 +0000"  >&lt;p&gt;Yeah, that&apos;s right. Be also sure to test Java 9 build 175, which is the first release candidate. Without any &quot;ea&quot; strings in version anymore. Version is now just plain &quot;9&quot; without dots, nothing.&lt;/p&gt;</comment>
                            <comment id="16063347" author="hossman" created="Mon, 26 Jun 2017 16:24:22 +0000"  >&lt;blockquote&gt;&lt;p&gt;Open a new Jira?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;no. &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8689&quot; title=&quot;bin/solr.cmd does not start with recent Verona builds of Java 9 because of version parsing issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8689&quot;&gt;&lt;del&gt;SOLR-8689&lt;/del&gt;&lt;/a&gt; (already linked) tracks issues with solr.cmd on java9.  see comments there.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12940132">SOLR-8689</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12857132" name="SOLR-10184.patch" size="5545" author="hossman" created="Thu, 9 Mar 2017 23:55:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3aemv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>