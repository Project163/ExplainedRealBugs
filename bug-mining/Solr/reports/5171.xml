<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:09:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-17113] When backup fails unexpected json schema is returned</title>
                <link>https://issues.apache.org/jira/browse/SOLR-17113</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;After triggering backup with&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;curl &apos;localhost:8983/solr/core/replication?command=backup&amp;amp;repository=gcs_backup&apos;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I can watch its result with&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;curl &apos;http://localhost:8983/solr/core/replication?command=details&apos;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Which returns this json:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;{
    &quot;responseHeader&quot;: {
        &quot;status&quot;: 0,
        &quot;QTime&quot;: 3
    },
    &quot;status&quot;: &quot;OK&quot;,
    &quot;details&quot;: {
        // redacted
        &quot;backup&quot;: {
            &quot;startTime&quot;: &quot;2023-12-20T14:51:06.388847Z&quot;,
            &quot;fileCount&quot;: 594,
            &quot;indexFileCount&quot;: 594,
            &quot;status&quot;: &quot;success&quot;,
            &quot;snapshotCompletedAt&quot;: &quot;2023-12-20T17:14:32.257828Z&quot;,
            &quot;endTime&quot;: &quot;2023-12-20T17:14:32.257828Z&quot;,
            &quot;snapshotName&quot;: &quot;name&quot;,
            &quot;directoryName&quot;: &quot;dir&quot;
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notice that backup is an object. However when exception occurs this json is returned:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;{
    &quot;responseHeader&quot;:{
      &quot;status&quot;:0,
      &quot;QTime&quot;:1
    },
    &quot;status&quot;:&quot;OK&quot;,
    &quot;details&quot;:{
      //redacted
      &quot;backup&quot;:[&quot;exception&quot;,&quot;The specified bucket does not exist.&quot;]
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notice that backup is no longer an object. It became an array. I believe it was supposed to be an object as first element is key name (&quot;exception&quot;).&lt;br/&gt;
I believe bug is in this line:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/solr/blob/91a19404fc90929b70c8513a058cfb1d560496da/solr/core/src/java/org/apache/solr/handler/SnapShooter.java#L258-L259&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/blob/91a19404fc90929b70c8513a058cfb1d560496da/solr/core/src/java/org/apache/solr/handler/SnapShooter.java#L258-L259&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13564036">SOLR-17113</key>
            <summary>When backup fails unexpected json schema is returned</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gerlowskija">Jason Gerlowski</assignee>
                                    <reporter username="pciezkowski">Przemyslaw Ciezkowski</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Jan 2024 11:47:59 +0000</created>
                <updated>Fri, 17 Oct 2025 20:04:44 +0000</updated>
                            <resolved>Wed, 27 Mar 2024 02:32:43 +0000</resolved>
                                    <version>9.4</version>
                                    <fixVersion>9.6</fixVersion>
                    <fixVersion>10.0</fixVersion>
                                    <component>Backup/Restore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17823299" author="gerlowskija" created="Mon, 4 Mar 2024 19:17:40 +0000"  >&lt;p&gt;Thanks for the detailed writeup &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pciezkowski&quot; class=&quot;user-hover&quot; rel=&quot;pciezkowski&quot;&gt;pciezkowski&lt;/a&gt;!&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I believe bug is in this line: &lt;a href=&quot;https://github.com/apache/solr/blob/91a19404fc90929b70c8513a058cfb1d560496da/solr/core/src/java/org/apache/solr/handler/SnapShooter.java#L258-L259&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/blob/91a19404fc90929b70c8513a058cfb1d560496da/solr/core/src/java/org/apache/solr/handler/SnapShooter.java#L258-L259&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1, SnapShooter should use a &quot;SimpleOrderedMap&quot; in the exceptional case, as it does for the &quot;happy path&quot; case.&lt;/p&gt;

&lt;p&gt;Any chance you&apos;re able to open up a PR?  If so I&apos;m more than happy to review! &lt;/p&gt;</comment>
                            <comment id="17823564" author="JIRAUSER303754" created="Tue, 5 Mar 2024 11:04:27 +0000"  >&lt;p&gt;Created PR but without test case: &lt;a href=&quot;https://github.com/apache/solr/pull/2334&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/pull/2334&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17831134" author="jira-bot" created="Wed, 27 Mar 2024 02:21:43 +0000"  >&lt;p&gt;Commit 883fd6d941c3abc521d186757f49010f44736513 in solr&apos;s branch refs/heads/main from Przemyslaw Ciezkowski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=883fd6d941c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=883fd6d941c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17113&quot; title=&quot;When backup fails unexpected json schema is returned&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17113&quot;&gt;&lt;del&gt;SOLR-17113&lt;/del&gt;&lt;/a&gt;: fix backup response in case of exception (#2334)&lt;/p&gt;


&lt;p&gt;---------&lt;/p&gt;

&lt;p&gt;Co-authored-by: Przemyslaw Ciezkowski &amp;lt;pciezkowski@box.com&amp;gt;&lt;br/&gt;
Co-authored-by: Jason Gerlowski &amp;lt;gerlowskija@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17831136" author="jira-bot" created="Wed, 27 Mar 2024 02:31:52 +0000"  >&lt;p&gt;Commit a38b354c3cbe301259606353e6b59e48415ecbae in solr&apos;s branch refs/heads/branch_9x from Przemyslaw Ciezkowski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=a38b354c3cb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=a38b354c3cb&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17113&quot; title=&quot;When backup fails unexpected json schema is returned&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17113&quot;&gt;&lt;del&gt;SOLR-17113&lt;/del&gt;&lt;/a&gt;: fix backup response in case of exception (#2334)&lt;/p&gt;


&lt;p&gt;---------&lt;/p&gt;

&lt;p&gt;Co-authored-by: Przemyslaw Ciezkowski &amp;lt;pciezkowski@box.com&amp;gt;&lt;br/&gt;
Co-authored-by: Jason Gerlowski &amp;lt;gerlowskija@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17831138" author="gerlowskija" created="Wed, 27 Mar 2024 02:32:43 +0000"  >&lt;p&gt;Thanks for the report and PR &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pciezkowski&quot; class=&quot;user-hover&quot; rel=&quot;pciezkowski&quot;&gt;pciezkowski&lt;/a&gt;; merged this in for 9.6!&lt;/p&gt;</comment>
                            <comment id="17841705" author="gus_heck" created="Sun, 28 Apr 2024 19:22:37 +0000"  >&lt;p&gt;Closing after the 9.6.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 28 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1mmzc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>