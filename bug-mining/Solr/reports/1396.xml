<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:36:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4803] fix support for DEFAULT_DEFAULT_CORE_NAME</title>
                <link>https://issues.apache.org/jira/browse/SOLR-4803</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;As far as i can tell, the &quot;new solr.xml&quot; changes caused the following problems...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;DEFAULT_DEFAULT_CORE_NAME is not used at all in the &quot;new&quot; style solr.xml, but probably should be (at least in 4x)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;See also the mailing list thread &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;JENKINS&amp;#93;&lt;/span&gt; Lucene-Solr-SmokeRelease-4.x - Build # 69 - Failure&quot; where the lack of using DEFAULT_DEFAULT_CORE_NAME causes the smoke tester to fail on both 4x and trunk because many things assume collectionless URLs will work&lt;/p&gt;</description>
                <environment></environment>
        <key id="12646706">SOLR-4803</key>
            <summary>fix support for DEFAULT_DEFAULT_CORE_NAME</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 May 2013 22:41:05 +0000</created>
                <updated>Mon, 9 May 2016 18:53:36 +0000</updated>
                            <resolved>Thu, 9 May 2013 01:38:28 +0000</resolved>
                                    <version>4.3</version>
                                    <fixVersion>4.4</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13652452" author="hossman" created="Wed, 8 May 2013 22:46:13 +0000"  >&lt;p&gt;Patch i&apos;m currently manually testing...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;restores use of DEFAULT_DEFAULT_CORE_NAME with old style solr.xml when &apos;defaultCore&apos; is not specified.&lt;/li&gt;
	&lt;li&gt;uses DEFAULT_DEFAULT_CORE_NAME as unconfigurable default with new style solr.xml - the idea being that that way trivial single collection setups like the example, or people who copy the example will be easy to use, but if you want to start doing more complicated things, you should start being explicit about your core name in the URL.&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Index: solr/core/src/java/org/apache/solr/core/CoreContainer.java
===================================================================
--- solr/core/src/java/org/apache/solr/core/CoreContainer.java	(revision 1480486)
+++ solr/core/src/java/org/apache/solr/core/CoreContainer.java	(working copy)
@@ -281,7 +281,7 @@
     logging = JulWatcher.newRegisteredLogWatcher(cfg, loader);
 
     if (cfg instanceof ConfigSolrXmlOld) { //TODO: Remove for 5.0
-      String dcoreName = cfg.get(ConfigSolr.CfgProp.SOLR_CORES_DEFAULT_CORE_NAME, null);
+      String dcoreName = cfg.get(ConfigSolr.CfgProp.SOLR_CORES_DEFAULT_CORE_NAME, DEFAULT_DEFAULT_CORE_NAME);
       if (dcoreName != null &amp;amp;&amp;amp; !dcoreName.isEmpty()) {
         defaultCoreName = dcoreName;
       }
@@ -289,6 +289,7 @@
       adminPath = cfg.get(ConfigSolr.CfgProp.SOLR_ADMINPATH, &quot;/admin/cores&quot;);
     } else {
       adminPath = &quot;/admin/cores&quot;;
+      defaultCoreName = DEFAULT_DEFAULT_CORE_NAME;
     }
     zkHost = cfg.get(ConfigSolr.CfgProp.SOLR_ZKHOST, null);
     coreLoadThreads = cfg.getInt(ConfigSolr.CfgProp.SOLR_CORELOADTHREADS, CORE_LOAD_THREADS);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13652456" author="janhoy" created="Wed, 8 May 2013 22:51:11 +0000"  >&lt;p&gt;+1&lt;br/&gt;
Are we sensing a quick 4.3.1 here? This one and the sharedLib bug are both going to be causing failure and mailing list traffic for people upgrading.&lt;/p&gt;</comment>
                            <comment id="13652520" author="hossman" created="Wed, 8 May 2013 23:42:37 +0000"  >&lt;p&gt;Editing issue description &amp;#8211; my memory was faulty, and this previously mentioend problem is not really an issue...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;* DEFAULT_DEFAULT_CORE_NAME is not properly supported for the &quot;old&quot; style solr.xml if defaultCoreName=&quot;...&quot; is not
specified in the solr.xml
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That is not actually how defaultCoreName=&quot;...&quot; has ever worked, i was remembering incorrectly &amp;#8211; in the old style solr.xml, if you didn&apos;t have a defaultCoreName declared, you did not have a default core name (just like &quot;adminPath&quot;)&lt;/p&gt;

&lt;p&gt;I&apos;m scaling back my patch to only use DEFAULT_DEFAULT_CORE_NAME in the case of hte &quot;new style&quot; config, similar to how adminPath is hardcoded to &quot;/admin/cores&quot;.  (same reasons as mentioned before: this gets the 4x and trunk example and simple single core cases working again with simple URLs)&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Jan: as mentioned, my initial impressions about the impact of this bug were wrong, it really only affects the &quot;new style&quot; example on the 4x &amp;amp; trunk branchs, and doesn&apos;t seem to really affect anyone using existing &quot;old style&quot; solr.xml files.&lt;/p&gt;
</comment>
                            <comment id="13652542" author="hossman" created="Wed, 8 May 2013 23:59:28 +0000"  >&lt;p&gt;previously mentioned (simplified) patch that i intended to commit soon.&lt;/p&gt;</comment>
                            <comment id="13652613" author="jkrupan" created="Thu, 9 May 2013 01:06:15 +0000"  >&lt;p&gt;This is a branch_4x issue, but not a 4.3 issue - if it&apos;s the same problem I complained about. Default collection names are working for me in 4.3 for query and update requests.&lt;/p&gt;</comment>
                            <comment id="13652621" author="hossman" created="Thu, 9 May 2013 01:13:15 +0000"  >&lt;p&gt;Updated patch to correct a test assumption.&lt;/p&gt;

&lt;p&gt;Jack: please note the issue description &amp;#8211; this affects any use of solr with the new style solr.xml, ie &quot;core discovery&quot; mode.&lt;/p&gt;

&lt;p&gt;this is the default on the 4x branch example so it&apos;s very obvious, but core discovery mode was a feature included in 4.3 &amp;#8211; but the 4.3 example configs did not use it by default.&lt;/p&gt;</comment>
                            <comment id="13652623" author="hossman" created="Thu, 9 May 2013 01:14:10 +0000"  >&lt;p&gt;Sigh ... the &lt;em&gt;actual&lt;/em&gt; updated patch file this time.&lt;/p&gt;</comment>
                            <comment id="13652633" author="commit-tag-bot" created="Thu, 9 May 2013 01:20:52 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; hossman&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1480515&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1480515&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4803&quot; title=&quot;fix support for DEFAULT_DEFAULT_CORE_NAME&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4803&quot;&gt;&lt;del&gt;SOLR-4803&lt;/del&gt;&lt;/a&gt;: Fixed core discovery mode (ie: new style solr.xml) to treat &apos;collection1&apos; as the default core name&lt;/p&gt;</comment>
                            <comment id="13652648" author="commit-tag-bot" created="Thu, 9 May 2013 01:38:22 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; hossman&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1480517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1480517&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4803&quot; title=&quot;fix support for DEFAULT_DEFAULT_CORE_NAME&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4803&quot;&gt;&lt;del&gt;SOLR-4803&lt;/del&gt;&lt;/a&gt;: Fixed core discovery mode (ie: new style solr.xml) to treat &apos;collection1&apos; as the default core name (merge r1480515)&lt;/p&gt;</comment>
                            <comment id="13652649" author="hossman" created="Thu, 9 May 2013 01:38:28 +0000"  >&lt;p&gt;Committed revision 1480515.&lt;br/&gt;
Committed revision 1480517.&lt;/p&gt;</comment>
                            <comment id="13653151" author="markrmiller@gmail.com" created="Thu, 9 May 2013 20:30:00 +0000"  >&lt;p&gt;This is a 4.3 issue to some small degree - if you chose to use the new style solr.xml stuff, you had no option for a default core. This wouldn&apos;t have affected any upgraders though, and the new style solr.xml stuff has enough problems (you cant use the right data dir specification for solrcloud, core properties are not persisted - a problem for std Solr, broken SolrCloud, a lot of other little bugs) that I&apos;d say you should not use it in 4.3 and I can&apos;t see how it will be solid until 4.4. There has already been a lot of work and there is a fair amount more to come, and it&apos;s enough churn to make a backport scary - I think the only way is forward.&lt;/p&gt;

&lt;p&gt;What prompted finding this issue with the smoke tests was shifting the example to use the new style so that we are forced to make it solid ASAP. I&apos;ll be contributing some more fixes shortly myself.&lt;/p&gt;

&lt;p&gt;So this issue dones&apos;t really contribute to a 4.3.1 release IMO.&lt;/p&gt;</comment>
                            <comment id="13653402" author="janhoy" created="Fri, 10 May 2013 00:05:16 +0000"  >&lt;p&gt;Agree that this would not bite people upgrading, so it&apos;s not urgent. Perhaps a Good Thing&#8482; would be to add some errata info to &lt;a href=&quot;http://lucene.apache.org/solr/4_3_0/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://lucene.apache.org/solr/4_3_0/&lt;/a&gt; to warn against using the new solr.xml format until 4.4?&lt;/p&gt;</comment>
                            <comment id="13716843" author="steve_rowe" created="Tue, 23 Jul 2013 18:38:45 +0000"  >&lt;p&gt;Bulk close resolved 4.4 issues&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12646707">SOLR-4804</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12582408" name="SOLR-4803.patch" size="1349" author="hossman" created="Thu, 9 May 2013 01:14:10 +0000"/>
                            <attachment id="12582407" name="SOLR-4803.patch" size="657" author="hossman" created="Thu, 9 May 2013 01:13:15 +0000"/>
                            <attachment id="12582388" name="SOLR-4803.patch" size="657" author="hossman" created="Wed, 8 May 2013 23:59:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>327064</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kfjz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>327408</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>