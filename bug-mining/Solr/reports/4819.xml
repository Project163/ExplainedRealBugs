<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:50:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16009] Solr SQL does not return documents for &apos;AND&apos; operation on multi-valued field</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16009</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;SolrSQL fails if `AND` operation is performed on multi-valued field in Solr&lt;/p&gt;

&lt;p&gt;Data&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[{
        &lt;span class=&quot;code-quote&quot;&gt;&quot;name_s&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Foo&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;cities_ss&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;SFO&quot;&lt;/span&gt;,
          &lt;span class=&quot;code-quote&quot;&gt;&quot;NYC&quot;&lt;/span&gt;],
        &lt;span class=&quot;code-quote&quot;&gt;&quot;userid_i&quot;&lt;/span&gt;:1,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;},
      {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;name_s&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;Bar&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;cities_ss&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;SEA&quot;&lt;/span&gt;,
          &lt;span class=&quot;code-quote&quot;&gt;&quot;LA&quot;&lt;/span&gt;],
        &lt;span class=&quot;code-quote&quot;&gt;&quot;userid_i&quot;&lt;/span&gt;:2,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;2&quot;&lt;/span&gt;}] &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Sql query&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
select name_s, cities_ss FROM sql_test WHERE cities_ss IN (&lt;span class=&quot;code-quote&quot;&gt;&apos;SFO&apos;&lt;/span&gt;) AND cities_ss IN (&lt;span class=&quot;code-quote&quot;&gt;&apos;NYC&apos;&lt;/span&gt;) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above query returns no documents even though a match exists in Solr&lt;/p&gt;

&lt;p&gt;Similar query (below) returns no documents&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
select name_s, cities_ss FROM sql_test WHERE cities_ss=&lt;span class=&quot;code-quote&quot;&gt;&apos;SFO&apos;&lt;/span&gt; and cities_ss=&lt;span class=&quot;code-quote&quot;&gt;&apos;NYC&apos;&lt;/span&gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Multi-valued support in SQL is messy but it would be good to get support for this as filtering on multi-valued fields are quite common in Solr&lt;/p&gt;

&lt;p&gt;This is probably a bug in Calcite giving precedence to some default rules&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13428436">SOLR-16009</key>
            <summary>Solr SQL does not return documents for &apos;AND&apos; operation on multi-valued field</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thelabdude">Timothy Potter</assignee>
                                    <reporter username="kiranch">Kiran</reporter>
                        <labels>
                            <label>RobustSQL</label>
                    </labels>
                <created>Mon, 14 Feb 2022 22:35:09 +0000</created>
                <updated>Thu, 12 May 2022 00:35:14 +0000</updated>
                            <resolved>Thu, 3 Mar 2022 01:40:33 +0000</resolved>
                                    <version>8.11.1</version>
                                    <fixVersion>9.0</fixVersion>
                    <fixVersion>8.11.2</fixVersion>
                                    <component>Parallel SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="6000">1h 40m</timespent>
                                <comments>
                            <comment id="17500274" author="jira-bot" created="Wed, 2 Mar 2022 16:37:13 +0000"  >&lt;p&gt;Commit b7424bd1b33848b6732dd194607644f6baf1c90b in solr&apos;s branch refs/heads/main from Timothy Potter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=b7424bd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=b7424bd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16009&quot; title=&quot;Solr SQL does not return documents for &amp;#39;AND&amp;#39; operation on multi-valued field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16009&quot;&gt;&lt;del&gt;SOLR-16009&lt;/del&gt;&lt;/a&gt;: Disable Calcite simplify config setting (#715)&lt;/p&gt;

&lt;p&gt;Co-authored-by: Kiran Chitturi&lt;/p&gt;</comment>
                            <comment id="17500280" author="jira-bot" created="Wed, 2 Mar 2022 16:54:46 +0000"  >&lt;p&gt;Commit b296939a61b1adf5a0ba8fc1e2c40bd8352392b5 in solr&apos;s branch refs/heads/branch_9x from Timothy Potter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=b296939&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=b296939&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16009&quot; title=&quot;Solr SQL does not return documents for &amp;#39;AND&amp;#39; operation on multi-valued field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16009&quot;&gt;&lt;del&gt;SOLR-16009&lt;/del&gt;&lt;/a&gt;: Disable Calcite simplify config setting (#715) (#718)&lt;/p&gt;

&lt;p&gt;Co-authored-by: Kiran Chitturi&lt;/p&gt;</comment>
                            <comment id="17500303" author="jira-bot" created="Wed, 2 Mar 2022 17:32:19 +0000"  >&lt;p&gt;Commit 15eff8116edd8c5c61dc7a880a9f694e21ae7c94 in solr&apos;s branch refs/heads/branch_9_0 from Timothy Potter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=15eff81&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=15eff81&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16009&quot; title=&quot;Solr SQL does not return documents for &amp;#39;AND&amp;#39; operation on multi-valued field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16009&quot;&gt;&lt;del&gt;SOLR-16009&lt;/del&gt;&lt;/a&gt;: Disable Calcite simplify config setting (#719)&lt;/p&gt;

&lt;p&gt;Co-authored-by: Kiran Chitturi&lt;/p&gt;</comment>
                            <comment id="17500455" author="jira-bot" created="Thu, 3 Mar 2022 01:43:48 +0000"  >&lt;p&gt;Commit 07816fcbb93bbb276787b403a2f3b1fb86a6a67b in lucene-solr&apos;s branch refs/heads/branch_8_11 from Kiran Chitturi&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=07816fc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=07816fc&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16009&quot; title=&quot;Solr SQL does not return documents for &amp;#39;AND&amp;#39; operation on multi-valued field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16009&quot;&gt;&lt;del&gt;SOLR-16009&lt;/del&gt;&lt;/a&gt;: Disable Calcite simplify config setting&lt;/p&gt;

&lt;p&gt;Co-authored-by: kiran chitturi &amp;lt;kchitturi@apple.com&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17535587" author="janhoy" created="Thu, 12 May 2022 00:26:44 +0000"  >&lt;p&gt;Closing after the 9.0.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0zkio:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>