<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:21:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-10362] &quot;Memory Pool not found&quot; error when reporting JVM metrics</title>
                <link>https://issues.apache.org/jira/browse/SOLR-10362</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;These test failures are likely caused by a JVM bug. We should catch and work around it to be able report other existing metrics:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;https:&lt;span class=&quot;code-comment&quot;&gt;//jenkins.thetaphi.de/job/Lucene-Solr-6.x-Linux/3138/testReport/junit/org.apache.solr.handler.admin/MetricsHandlerTest/testCompact/
&lt;/span&gt;
java.lang.InternalError: Memory Pool not found
	at __randomizedtesting.SeedInfo.seed([8F4813A324434093:A1485FF45CBE4A6C]:0)
	at sun.management.MemoryPoolImpl.getUsage0(Native Method)
	at sun.management.MemoryPoolImpl.getUsage(MemoryPoolImpl.java:96)
	at com.codahale.metrics.jvm.MemoryUsageGaugeSet$18.getValue(MemoryUsageGaugeSet.java:177)
	at com.codahale.metrics.jvm.MemoryUsageGaugeSet$18.getValue(MemoryUsageGaugeSet.java:174)
	at org.apache.solr.util.stats.MetricUtils.convertGauge(MetricUtils.java:215)
	at org.apache.solr.util.stats.MetricUtils.lambda$toMaps$4(MetricUtils.java:142)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.TreeMap$KeySpliterator.forEachRemaining(TreeMap.java:2746)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.apache.solr.util.stats.MetricUtils.toMaps(MetricUtils.java:135)
	at org.apache.solr.util.stats.MetricUtils.toNamedList(MetricUtils.java:117)
	at org.apache.solr.handler.admin.MetricsHandler.handleRequestBody(MetricsHandler.java:85)
	at org.apache.solr.handler.admin.MetricsHandlerTest.testCompact(MetricsHandlerTest.java:160)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;See here for a possible explanation (thanks Hoss!): &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8025089&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8025089&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13059030">SOLR-10362</key>
            <summary>&quot;Memory Pool not found&quot; error when reporting JVM metrics</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ab">Andrzej Bialecki</assignee>
                                    <reporter username="ab">Andrzej Bialecki</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Mar 2017 20:41:47 +0000</created>
                <updated>Sat, 8 Jun 2019 15:30:11 +0000</updated>
                            <resolved>Mon, 27 Mar 2017 20:58:45 +0000</resolved>
                                    <version>6.5</version>
                    <version>7.0</version>
                                    <fixVersion>6.6</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                    <component>metrics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15943315" author="ab" created="Mon, 27 Mar 2017 14:03:22 +0000"  >&lt;p&gt;This happens when accessing a gauge implementation that is provided by metrics (&lt;tt&gt;MemoryUsageGaugeSet&lt;/tt&gt;), so we can catch this only in &lt;tt&gt;MetricUtils.convertGauge&lt;/tt&gt; - it would be better to catch this earlier but that would mean reimplementing the gauge set.&lt;/p&gt;</comment>
                            <comment id="15943349" author="ab" created="Mon, 27 Mar 2017 14:24:11 +0000"  >&lt;p&gt;Tentative workaround that catches the error and logs it. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt;, this may be worth mentioning to the Oracle guys since it happened in a JDK9 run.&lt;/p&gt;</comment>
                            <comment id="15943975" author="jira-bot" created="Mon, 27 Mar 2017 20:19:20 +0000"  >&lt;p&gt;Commit cb20eae1789442286f680f8dcfaf914394aed7a3 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=cb20eae&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=cb20eae&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10362&quot; title=&quot;&amp;quot;Memory Pool not found&amp;quot; error when reporting JVM metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10362&quot;&gt;&lt;del&gt;SOLR-10362&lt;/del&gt;&lt;/a&gt;: &quot;Memory Pool not found&quot; error when reporting JVM metrics.&lt;/p&gt;</comment>
                            <comment id="15944037" author="jira-bot" created="Mon, 27 Mar 2017 20:58:36 +0000"  >&lt;p&gt;Commit d010a9da75cdec1f7e4fd8a906e7ff2114aea33d in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=d010a9d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=d010a9d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10362&quot; title=&quot;&amp;quot;Memory Pool not found&amp;quot; error when reporting JVM metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10362&quot;&gt;&lt;del&gt;SOLR-10362&lt;/del&gt;&lt;/a&gt;: &quot;Memory Pool not found&quot; error when reporting JVM metrics.&lt;/p&gt;</comment>
                            <comment id="15944059" author="hossman" created="Mon, 27 Mar 2017 21:17:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;This happens when accessing a gauge implementation that is provided by metrics (MemoryUsageGaugeSet), so we can catch this only in MetricUtils.convertGauge - it would be better to catch this earlier but that would mean reimplementing the gauge set.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;tt&gt;InternalError&lt;/tt&gt; is a really broad scope of error to ignore/log just because we assume it must be this specific situation ... can we at least improve the catch block to check the name/class of the Gauge to confirm it is in fact part of the MemoryUsageGaugeSet &amp;#8211; and if not re-throw as is ?&lt;/p&gt;

&lt;p&gt;or at the very least: check that the &lt;tt&gt;InternalError&lt;/tt&gt; mentions &quot;Memory Pool&quot; ???&lt;/p&gt;</comment>
                            <comment id="15947115" author="jira-bot" created="Wed, 29 Mar 2017 13:26:23 +0000"  >&lt;p&gt;Commit 7c2e908fc2ad4089d1c36b820131641e6b696de7 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7c2e908&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7c2e908&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10362&quot; title=&quot;&amp;quot;Memory Pool not found&amp;quot; error when reporting JVM metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10362&quot;&gt;&lt;del&gt;SOLR-10362&lt;/del&gt;&lt;/a&gt; Be more specific when catching this exception.&lt;/p&gt;</comment>
                            <comment id="15947117" author="jira-bot" created="Wed, 29 Mar 2017 13:26:42 +0000"  >&lt;p&gt;Commit 30f7914c3b8ed990fcc0812f10de21722e96469f in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=30f7914&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=30f7914&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10362&quot; title=&quot;&amp;quot;Memory Pool not found&amp;quot; error when reporting JVM metrics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10362&quot;&gt;&lt;del&gt;SOLR-10362&lt;/del&gt;&lt;/a&gt; Be more specific when catching this exception.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12860665" name="SOLR-10362.patch" size="3653" author="ab" created="Mon, 27 Mar 2017 14:24:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 33 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3cruv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>