<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:53:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6213] StackOverflowException in Solr cloud&apos;s leader election</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6213</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;This is what&apos;s causing test hangs (at least on FreeBSD, &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-5786&quot; title=&quot;Unflushed/ truncated events file (hung testing subprocess)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-5786&quot;&gt;&lt;del&gt;LUCENE-5786&lt;/del&gt;&lt;/a&gt;), possibly on other machines too. The problem is stack overflow from looped calls in:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &amp;gt; org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:221)
  &amp;gt; org.apache.solr.cloud.ShardLeaderElectionContext.rejoinLeaderElection(ElectionContext.java:448)
  &amp;gt; org.apache.solr.cloud.ShardLeaderElectionContext.runLeaderProcess(ElectionContext.java:212)
  &amp;gt; org.apache.solr.cloud.LeaderElector.runIamLeaderProcess(LeaderElector.java:163)
  &amp;gt; org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:125)
  &amp;gt; org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:313)
  &amp;gt; org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:221)
  &amp;gt; org.apache.solr.cloud.ShardLeaderElectionContext.rejoinLeaderElection(ElectionContext.java:448)
  &amp;gt; org.apache.solr.cloud.ShardLeaderElectionContext.runLeaderProcess(ElectionContext.java:212)
  &amp;gt; org.apache.solr.cloud.LeaderElector.runIamLeaderProcess(LeaderElector.java:163)
  &amp;gt; org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:125)
  &amp;gt; org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:313)
  &amp;gt; org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:221)
  &amp;gt; org.apache.solr.cloud.ShardLeaderElectionContext.rejoinLeaderElection(ElectionContext.java:448)
  &amp;gt; org.apache.solr.cloud.ShardLeaderElectionContext.runLeaderProcess(ElectionContext.java:212)
  &amp;gt; org.apache.solr.cloud.LeaderElector.runIamLeaderProcess(LeaderElector.java:163)
  &amp;gt; org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:125)
  &amp;gt; org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:313)
  &amp;gt; org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:221)
  &amp;gt; org.apache.solr.cloud.ShardLeaderElectionContext.rejoinLeaderElection(ElectionContext.java:448)
  &amp;gt; org.apache.solr.cloud.ShardLeaderElectionContext.runLeaderProcess(ElectionContext.java:212)
  &amp;gt; org.apache.solr.cloud.LeaderElector.runIamLeaderProcess(LeaderElector.java:163)
  &amp;gt; org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:125)
  &amp;gt; org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:313)
  &amp;gt; org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:221)
  &amp;gt; org.apache.solr.cloud.ShardLeaderElectionContext.rejoinLeaderElection(ElectionContext.java:448)
  &amp;gt; org.apache.solr.cloud.ShardLeaderElectionContext.runLeaderProcess(ElectionContext.java:212)
  &amp;gt; org.apache.solr.cloud.LeaderElector.runIamLeaderProcess(LeaderElector.java:163)
  &amp;gt; org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:125)
  &amp;gt; org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:313)
  &amp;gt; org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:221)
  &amp;gt; org.apache.solr.cloud.ShardLeaderElectionContext.rejoinLeaderElection(ElectionContext.java:448)
  &amp;gt; org.apache.solr.cloud.ShardLeaderElectionContext.runLeaderProcess(ElectionContext.java:212)
  &amp;gt; org.apache.solr.cloud.LeaderElector.runIamLeaderProcess(LeaderElector.java:163)
  &amp;gt; org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:125)
  &amp;gt; org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:313)
  &amp;gt; org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:221)
  &amp;gt; org.apache.solr.cloud.ShardLeaderElectionContext.rejoinLeaderElection(ElectionContext.java:448)
  &amp;gt; org.apache.solr.cloud.ShardLeaderElectionContext.runLeaderProcess(ElectionContext.java:212)
  &amp;gt; org.apache.solr.cloud.LeaderElector.runIamLeaderProcess(LeaderElector.java:163)
  &amp;gt; org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:125)
  &amp;gt; org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:313)
  &amp;gt; org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:221)
  &amp;gt; org.apache.solr.cloud.ShardLeaderElectionContext.rejoinLeaderElection(ElectionContext.java:448)
  &amp;gt; org.apache.solr.cloud.ShardLeaderElectionContext.runLeaderProcess(ElectionContext.java:212)
  &amp;gt; org.apache.solr.cloud.LeaderElector.runIamLeaderProcess(LeaderElector.java:163)
  &amp;gt; org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:125)
  &amp;gt; org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:313)
  &amp;gt; org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:221)
  &amp;gt; org.apache.solr.cloud.ShardLeaderElectionContext.rejoinLeaderElection(ElectionContext.java:448)
  &amp;gt; org.apache.solr.cloud.ShardLeaderElectionContext.runLeaderProcess(ElectionContext.java:212)
  &amp;gt; org.apache.solr.cloud.LeaderElector.runIamLeaderProcess(LeaderElector.java:163)
  &amp;gt; org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:125)
  &amp;gt; org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:313)
  &amp;gt; org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:221)
  &amp;gt; org.apache.solr.cloud.ShardLeaderElectionContext.rejoinLeaderElection(ElectionContext.java:448)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;These routines attempt to log information to loggers, which in turn attempts to serialize messages back to the master (test process). When the stack is exhausted the serialization process fails and breaks the communication with the master test node.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12724383">SOLR-6213</key>
            <summary>StackOverflowException in Solr cloud&apos;s leader election</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dweiss">Dawid Weiss</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Jun 2014 06:52:17 +0000</created>
                <updated>Thu, 9 Oct 2025 13:51:39 +0000</updated>
                                            <version>4.10</version>
                    <version>6.0</version>
                                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="14047435" author="dweiss" created="Mon, 30 Jun 2014 06:54:16 +0000"  >&lt;p&gt;Note that stack overflows, much like running next to an OOM, is pretty much unfixable in Java since there&apos;s no control over the stack size and object allocation. Writing fully preallocated code is I think impossible (any call outside of the code requires a stack frame, so there&apos;d be no way to communicate with the outside world).&lt;/p&gt;</comment>
                            <comment id="14047523" author="jira-bot" created="Mon, 30 Jun 2014 10:26:28 +0000"  >&lt;p&gt;Commit 1606671 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dawidweiss&quot; class=&quot;user-hover&quot; rel=&quot;dawidweiss&quot;&gt;dawidweiss&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1606671&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1606671&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Temporarily disabling SSLMigrationTest; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6213&quot; title=&quot;StackOverflowException in Solr cloud&amp;#39;s leader election&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6213&quot;&gt;SOLR-6213&lt;/a&gt; it&apos;s hanging the build server.&lt;/p&gt;</comment>
                            <comment id="14047526" author="jira-bot" created="Mon, 30 Jun 2014 10:28:53 +0000"  >&lt;p&gt;Commit 1606673 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dawidweiss&quot; class=&quot;user-hover&quot; rel=&quot;dawidweiss&quot;&gt;dawidweiss&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1606673&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1606673&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Temporarily disabling SSLMigrationTest; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6213&quot; title=&quot;StackOverflowException in Solr cloud&amp;#39;s leader election&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6213&quot;&gt;SOLR-6213&lt;/a&gt; it&apos;s hanging the build server.&lt;/p&gt;</comment>
                            <comment id="14088850" author="shalinmangar" created="Thu, 7 Aug 2014 05:26:28 +0000"  >&lt;p&gt;More recent failures: &lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;a href=&quot;https://builds.apache.org/job/Lucene-Solr-Tests-4.x-Java7/2039/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Lucene-Solr-Tests-4.x-Java7/2039/&lt;/a&gt; (from &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6285&quot; title=&quot;StackOverflowError in SolrCloud test on jenkins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6285&quot;&gt;&lt;del&gt;SOLR-6285&lt;/del&gt;&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://jenkins.thetaphi.de/job/Lucene-Solr-4.x-Linux/10846/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.thetaphi.de/job/Lucene-Solr-4.x-Linux/10846/&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14089202" author="markrmiller@gmail.com" created="Thu, 7 Aug 2014 13:21:32 +0000"  >&lt;p&gt;This is pretty much a currently expected result / limitation of the system if no replica can become leader. They will keep retrying until stack overflow.&lt;/p&gt;</comment>
                            <comment id="14118728" author="erickerickson" created="Tue, 2 Sep 2014 20:55:39 +0000"  >&lt;p&gt;At least on a quick look the stack traces seem remarkably similar, accounting for the line number differences given 5692 is from 4.6.1.&lt;/p&gt;</comment>
                            <comment id="14541349" author="forest_soup" created="Wed, 13 May 2015 05:19:06 +0000"  >&lt;p&gt;Can we set a max re-try number instead of keep always trying until stack over flow?&lt;/p&gt;</comment>
                            <comment id="14541350" author="forest_soup" created="Wed, 13 May 2015 05:19:28 +0000"  >&lt;p&gt;I met the same issue within Solr 4.7.0.&lt;br/&gt;
Too many recursive calls with below lines:&lt;br/&gt;
at org.apache.solr.cloud.ShardLeaderElectionContext.rejoinLeaderElection(ElectionContext.java:399)&lt;br/&gt;
at org.apache.solr.cloud.ShardLeaderElectionContext.runLeaderProcess(ElectionContext.java:259)&lt;br/&gt;
at org.apache.solr.cloud.LeaderElector.runIamLeaderProcess(LeaderElector.java:164)&lt;br/&gt;
at org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:108)&lt;br/&gt;
at org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:289)&lt;br/&gt;
at org.apache.solr.cloud.ShardLeaderElectionContext.rejoinLeaderElection(ElectionContext.java:399)&lt;br/&gt;
at org.apache.solr.cloud.ShardLeaderElectionContext.runLeaderProcess(ElectionContext.java:259)&lt;br/&gt;
at org.apache.solr.cloud.LeaderElector.runIamLeaderProcess(LeaderElector.java:164)&lt;br/&gt;
at org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:108)&lt;br/&gt;
at org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:289)&lt;/p&gt;</comment>
                            <comment id="14541359" author="forest_soup" created="Wed, 13 May 2015 05:26:28 +0000"  >&lt;p&gt;The stackoverflow exception is in the attachment.&lt;/p&gt;</comment>
                            <comment id="14541958" author="markrmiller@gmail.com" created="Wed, 13 May 2015 14:06:57 +0000"  >&lt;p&gt; Of course it should be improved.&lt;/p&gt;</comment>
                            <comment id="17782248" author="alex.parvulescu" created="Thu, 2 Nov 2023 17:34:01 +0000"  >&lt;p&gt;adding to a very very old jira, but I just saw this on 9.2 upgrade, due to a zk issue. looks gone after a restart.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.lang.StackOverflowError
....
	at org.eclipse.jetty.client.HttpRequest.send(HttpRequest.java:807) ~[jetty-client-10.0.13.jar:10.0.13]
	at org.apache.solr.client.solrj.impl.Http2SolrClient.asyncRequest(Http2SolrClient.java:449) ~[solr-solrj-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.client.solrj.impl.LBHttp2SolrClient.doRequest(LBHttp2SolrClient.java:257) ~[solr-solrj-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.client.solrj.impl.LBHttp2SolrClient.asyncReq(LBHttp2SolrClient.java:220) ~[solr-solrj-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.handler.component.HttpShardHandler.submit(HttpShardHandler.java:167) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.update.PeerSync.requestVersions(PeerSync.java:346) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.update.PeerSync.sync(PeerSync.java:201) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.SyncStrategy.syncWithReplicas(SyncStrategy.java:216) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.SyncStrategy.syncReplicas(SyncStrategy.java:135) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.SyncStrategy.sync(SyncStrategy.java:112) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.ShardLeaderElectionContext.runLeaderProcess(ShardLeaderElectionContext.java:208) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.LeaderElector.runIamLeaderProcess(LeaderElector.java:175) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:135) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:315) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:218) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.ShardLeaderElectionContext.rejoinLeaderElection(ShardLeaderElectionContext.java:545) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.ShardLeaderElectionContext.runLeaderProcess(ShardLeaderElectionContext.java:262) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.LeaderElector.runIamLeaderProcess(LeaderElector.java:175) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:135) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:315) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:218) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.ShardLeaderElectionContext.rejoinLeaderElection(ShardLeaderElectionContext.java:545) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.ShardLeaderElectionContext.runLeaderProcess(ShardLeaderElectionContext.java:262) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.LeaderElector.runIamLeaderProcess(LeaderElector.java:175) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:135) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:315) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:218) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.ShardLeaderElectionContext.rejoinLeaderElection(ShardLeaderElectionContext.java:545) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.ShardLeaderElectionContext.runLeaderProcess(ShardLeaderElectionContext.java:262) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.LeaderElector.runIamLeaderProcess(LeaderElector.java:175) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:135) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:315) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:218) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
	at org.apache.solr.cloud.ShardLeaderElectionContext.rejoinLeaderElection(ShardLeaderElectionContext.java:545) ~[solr-core-9.2.1.jar:9.2.1 a4c64ab6a2a270ca69c28c706dabb2927ed8a7c2 - jsweeney - 2023-04-24 11:35:31]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the zk status was showing yellow:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Status: yellow
Errors:
Your ZK connection string (3 hosts) is different from the dynamic ensemble config (3 hosts). Solr does not currently support dynamic reconfiguration and will only be able to connect to the zk hosts in your connection string.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="18028782" author="gerlowskija" created="Thu, 9 Oct 2025 13:51:39 +0000"  >&lt;p&gt;Saw this recently in Solr 9.7 during a period of ZK misconfiguration.  The stacktrace looks a bit different, sharing below:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
o.a.s.c.LeaderElector Failed setting watch =&amp;gt; org.apache.zookeeper.KeeperException$NoAuthException: KeeperErrorCode = NoAuth &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /collections/collNameRedacted/leader_elect/shard1/election/7423158284677299411-core_node9-n_0000000118
  at org.apache.zookeeper.KeeperException.create(KeeperException.java:119)
org.apache.zookeeper.KeeperException$NoAuthException: KeeperErrorCode = NoAuth &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /collections/collNameRedacted/leader_elect/shard1/election/7423158284677299411-core_node9-n_0000000118
  at org.apache.zookeeper.KeeperException.create(KeeperException.java:119) ~[?:?]
  at org.apache.zookeeper.KeeperException.create(KeeperException.java:53) ~[?:?]
  at org.apache.zookeeper.ZooKeeper.getData(ZooKeeper.java:1972) ~[?:?]
  at org.apache.solr.common.cloud.SolrZkClient.lambda$getData$6(SolrZkClient.java:448) ~[?:?]
  at org.apache.solr.common.cloud.ZkCmdExecutor.retryOperation(ZkCmdExecutor.java:70) ~[?:?]
  at org.apache.solr.common.cloud.SolrZkClient.getData(SolrZkClient.java:448) ~[?:?]
  at org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:164) ~[?:?]
  at org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:164) ~[?:?]
  at org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:164) ~[?:?]
  .....&amp;lt;300-ish identical lines removed &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; brevity&amp;gt;
  at org.apache.solr.cloud.LeaderElector.checkIfIamLeader(LeaderElector.java:164) ~[?:?]
  at org.apache.solr.cloud.LeaderElector.joinElection(LeaderElector.java:311) ~[?:?]
  at org.apache.solr.cloud.ZkController.joinElection(ZkController.java:1597) ~[?:?]
  at org.apache.solr.cloud.ZkController.register(ZkController.java:1303) ~[?:?]
  at org.apache.solr.cloud.ZkController.register(ZkController.java:1237) ~[?:?]
  at org.apache.solr.core.ZkContainer.lambda$registerInZk$1(ZkContainer.java:218) ~[?:?]
  at org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.lambda$execute$1(ExecutorUtil.java:449) ~[?:?]
  at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[?:?]
  at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[?:?]
  at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(Unknown Source) [?:?]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The root-cause here seems hard to resolve: we probably need to keep retrying replica-registration for cases like transient network-issues, so that Solr can get healthy again on its own after the network issue resolves.  But there&apos;s a lot of room to tweak how the retries happen, to avoid a stackoverflow: looping instead of recursion, adding a backoff between retries after the first, say, 100 attempts, etc.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12693132">SOLR-5692</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12730054">SOLR-6285</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12732483" name="stackoverflow.txt" size="988839" author="forest_soup" created="Wed, 13 May 2015 05:26:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>402566</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xah3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>402633</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>