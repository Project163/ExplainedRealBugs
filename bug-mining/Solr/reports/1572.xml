<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:40:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-5345] OpenCloseCoreStressTest opens too many files (causing it to fail often)</title>
                <link>https://issues.apache.org/jira/browse/SOLR-5345</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Typically the symptom with jenkins is strange socket failures (because sockets are files too).&lt;/p&gt;

&lt;p&gt;On my machine though i got the nice too many open files from lucene because it just happened to fail that way.&lt;/p&gt;

&lt;p&gt;In addition to holding thousands of open files, this test creates 90 &lt;b&gt;megabytes&lt;/b&gt; of logging output!&lt;/p&gt;

&lt;p&gt;Can we tone down the test? I havent looked at all: but it doesn&apos;t seem necessary to have huge numbers of cores/indexes to test the functionality, we should be able to do this with relatively small numbers. &lt;/p&gt;

&lt;p&gt;Additionally i dont think its good to use random merge/IW buffering parameters here, we should set ones that won&apos;t make tons of files, force the use of compound file format, etc.&lt;/p&gt;

&lt;p&gt;The massive amounts of logging should be addressed too.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12673623">SOLR-5345</key>
            <summary>OpenCloseCoreStressTest opens too many files (causing it to fail often)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Sun, 13 Oct 2013 20:19:48 +0000</created>
                <updated>Mon, 9 May 2016 18:45:43 +0000</updated>
                            <resolved>Fri, 24 Jan 2014 17:33:22 +0000</resolved>
                                                    <fixVersion>4.7</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13793776" author="thetaphi" created="Sun, 13 Oct 2013 20:41:26 +0000"  >&lt;p&gt;Yeah, thanks. On Jenkins it fails less often than on my machine, because the number of open files for the Jenkins process was raised to something like 16,000 or more file handles. Which is horrible alltogether. We should really tone down &lt;b&gt;all&lt;/b&gt; those tests to use less than 1024 file handles, so anybody without tuned system settings can run tests!&lt;/p&gt;</comment>
                            <comment id="13793824" author="jira-bot" created="Sun, 13 Oct 2013 22:45:26 +0000"  >&lt;p&gt;Commit 1531766 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1531766&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1531766&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5345&quot; title=&quot;OpenCloseCoreStressTest opens too many files (causing it to fail often)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5345&quot;&gt;&lt;del&gt;SOLR-5345&lt;/del&gt;&lt;/a&gt;: A first pass toning down OpenCloseCoreStressTest&lt;/p&gt;</comment>
                            <comment id="13793830" author="jira-bot" created="Sun, 13 Oct 2013 22:53:39 +0000"  >&lt;p&gt;Commit 1531767 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1531767&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1531767&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5345&quot; title=&quot;OpenCloseCoreStressTest opens too many files (causing it to fail often)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5345&quot;&gt;&lt;del&gt;SOLR-5345&lt;/del&gt;&lt;/a&gt;: A first pass toning down OpenCloseCoreStressTest&lt;/p&gt;</comment>
                            <comment id="13793831" author="markrmiller@gmail.com" created="Sun, 13 Oct 2013 22:55:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;all those tests to use less than 1024 file handles&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think 1024 is a good goal for the std test run, but I think nightly tests should not be limited to a number that is so low with modern computers. &lt;/p&gt;</comment>
                            <comment id="13793835" author="rcmuir" created="Sun, 13 Oct 2013 23:07:53 +0000"  >&lt;p&gt;my computer is only 2 years old:&lt;/p&gt;

&lt;p&gt;% ulimit -n&lt;br/&gt;
256&lt;/p&gt;</comment>
                            <comment id="13793841" author="markrmiller@gmail.com" created="Sun, 13 Oct 2013 23:32:19 +0000"  >&lt;p&gt;OSX will sometimes still do that - kind of absurd and around for ages. These defaults have not changed much over the years.&lt;/p&gt;

&lt;p&gt;Is it reasonable to have a Lucene index that uses over 1024 file handles? Absolutely. Should our unit tests do the same in some run? Absolutely.&lt;/p&gt;</comment>
                            <comment id="13793845" author="rcmuir" created="Sun, 13 Oct 2013 23:45:41 +0000"  >&lt;p&gt;I don&apos;t understand what exactly what unit that would be testing.&lt;/p&gt;</comment>
                            <comment id="13793846" author="markrmiller@gmail.com" created="Sun, 13 Oct 2013 23:48:04 +0000"  >&lt;p&gt;I&apos;m loose with the word unit test - probably because we use Junit to write them. It&apos;s pretty obvious that we have tons of integration tests in addition to our unit tests though. Which makes sense, because we need both. We should test as much as we can.&lt;/p&gt;</comment>
                            <comment id="13794133" author="markrmiller@gmail.com" created="Mon, 14 Oct 2013 14:11:33 +0000"  >&lt;p&gt;Nightly runs can still be an issue. We probably need to clamp down on the merge factor, etc for that one.&lt;/p&gt;</comment>
                            <comment id="13881184" author="markrmiller@gmail.com" created="Fri, 24 Jan 2014 17:33:22 +0000"  >&lt;p&gt;I haven not seen this in a long time, including in nightly runs that I do.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>353246</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1owj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>353539</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>