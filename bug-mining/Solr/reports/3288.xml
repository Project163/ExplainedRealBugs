<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:20:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-10250] SolrCloudClient doesn&apos;t return &apos;adds&apos; in Response when &apos;versions&apos; is requested</title>
                <link>https://issues.apache.org/jira/browse/SOLR-10250</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;On our project we run Solr 4.2 but we&apos;re migrating to latest SolrCloud.&lt;br/&gt;
We use optimistic locking, and when we post new documents we directly ask the version with the &quot;versions&quot; parameter. The response is in a &quot;adds&quot; field.&lt;br/&gt;
I can&apos;t even find a doc explaining that but it works &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;With Solr 5 (we did a few tests some time ago), 6.2 and 6.4.1 the Solr response has these &quot;adds&quot; but they&apos;re lost by the SolrJ client when aggregating responses from different Shards.&lt;/p&gt;

&lt;p&gt;I have a patch that I&apos;ll propose via Github.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13049328">SOLR-10250</key>
            <summary>SolrCloudClient doesn&apos;t return &apos;adds&apos; in Response when &apos;versions&apos; is requested</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ichattopadhyaya">Ishan Chattopadhyaya</assignee>
                                    <reporter username="BorisNaguet">Boris Naguet</reporter>
                        <labels>
                            <label>locking</label>
                            <label>optimistic</label>
                    </labels>
                <created>Wed, 8 Mar 2017 17:36:09 +0000</created>
                <updated>Sat, 8 Jun 2019 15:34:32 +0000</updated>
                            <resolved>Mon, 13 Mar 2017 14:29:10 +0000</resolved>
                                    <version>6.4.1</version>
                                    <fixVersion>6.5</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                    <component>SolrJ</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15901632" author="githubbot" created="Wed, 8 Mar 2017 17:40:32 +0000"  >&lt;p&gt;GitHub user BorisNaguet opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/164&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/164&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10250&quot; title=&quot;SolrCloudClient doesn&amp;#39;t return &amp;#39;adds&amp;#39; in Response when &amp;#39;versions&amp;#39; is requested&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10250&quot;&gt;&lt;del&gt;SOLR-10250&lt;/del&gt;&lt;/a&gt;: SolrCloudClient doesn&apos;t return &apos;adds&apos; in Response when&apos; versions&apos; is requested&lt;/p&gt;

&lt;p&gt;    SolrCloudClient doesn&apos;t return &apos;adds&apos; in Response when&apos; versions&apos; is requested&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/BorisNaguet/lucene-solr&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/BorisNaguet/lucene-solr&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10250&quot; title=&quot;SolrCloudClient doesn&amp;#39;t return &amp;#39;adds&amp;#39; in Response when &amp;#39;versions&amp;#39; is requested&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10250&quot;&gt;&lt;del&gt;SOLR-10250&lt;/del&gt;&lt;/a&gt;-versions-adds&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/164.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/164.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #164&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 99bc8fa1c8ae6666996426afc9521e7604a1234c&lt;br/&gt;
Author: Boris Naguet &amp;lt;boris.naguet@worldline.com&amp;gt;&lt;br/&gt;
Date:   2017-03-08T17:37:46Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10250&quot; title=&quot;SolrCloudClient doesn&amp;#39;t return &amp;#39;adds&amp;#39; in Response when &amp;#39;versions&amp;#39; is requested&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10250&quot;&gt;&lt;del&gt;SOLR-10250&lt;/del&gt;&lt;/a&gt;: SolrCloudClient doesn&apos;t return &apos;adds&apos; in Response when&lt;br/&gt;
    &apos;versions&apos; is requested&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15901639" author="hossman" created="Wed, 8 Mar 2017 17:43:51 +0000"  >&lt;p&gt;linking to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8733&quot; title=&quot;versions=true on Optimistic Concurrency updates doesn&amp;#39;t work with in multi shard collections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8733&quot;&gt;SOLR-8733&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Note that SolrCloudClient agregating responses from multiple leaders is only part of the problem &amp;#8211; if an update is internally forwarded (either due ot updates being sent to nodes arbitrarily, or because of leader election while in transit) then the version# will also be missing.&lt;/p&gt;</comment>
                            <comment id="15901690" author="borisnaguet" created="Wed, 8 Mar 2017 18:09:34 +0000"  >&lt;p&gt;Thanks for feedback&lt;/p&gt;

&lt;p&gt;OK, I&apos;m currently using &lt;em&gt;.sendUpdatesOnlyToShardLeaders().sendDirectUpdatesToShardLeadersOnly()&lt;/em&gt; on SolrJ (though I&apos;m not sure about it) but there&apos;s still the leader election possibility...&lt;/p&gt;

&lt;p&gt;Any reason it&apos;s been opened for so long? &lt;br/&gt;
Not a widely used/recommanded usage?&lt;/p&gt;

&lt;p&gt;We&apos;re totally depending on that in our platform... but of course we can still make a &quot;GET after POST&quot; when it&apos;s not returned&lt;/p&gt;</comment>
                            <comment id="15901731" author="hossman" created="Wed, 8 Mar 2017 18:33:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;Thanks for feedback&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Boris: I&apos;m sorry, I wasn&apos;t giving you feedback on your patch &amp;#8211; i was just triaging/linking the issues, and wanted to make sure people reading them realized that just fixing SolrCloudClient is only part of the problem.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Any reason it&apos;s been opened for so long? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;just a question of people having time to dig into it and write up a patch ... it&apos;s probably not the sort of thing many people rely on, or if they do then (like you) they aren&apos;t using it with solr cloud &amp;#8211; or it was easier (for their purposes) to work around with an RTG then to dig into solr to help with a fix.&lt;/p&gt;</comment>
                            <comment id="15901842" author="erickerickson" created="Wed, 8 Mar 2017 19:32:10 +0000"  >&lt;p&gt;I try to encourage patches as they preserve the history in a single place that stays here forever. An external repo can always go away.&lt;/p&gt;</comment>
                            <comment id="15905261" author="borisnaguet" created="Fri, 10 Mar 2017 15:31:09 +0000"  >&lt;p&gt;Here is the patch (just thinking, what is the use of Github PR in this case?)&lt;/p&gt;</comment>
                            <comment id="15907530" author="ichattopadhyaya" created="Mon, 13 Mar 2017 14:14:21 +0000"  >&lt;p&gt;Updating the patch with support for &quot;deletes&quot; and &quot;deleteByQuery&quot; versions as well, apart from &quot;adds&quot;.&lt;/p&gt;</comment>
                            <comment id="15907546" author="jira-bot" created="Mon, 13 Mar 2017 14:23:37 +0000"  >&lt;p&gt;Commit ceffbf98445065220dcc9380e2731fd26a467f5d in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ichattopadhyaya&quot; class=&quot;user-hover&quot; rel=&quot;ichattopadhyaya&quot;&gt;ichattopadhyaya&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=ceffbf9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=ceffbf9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10250&quot; title=&quot;SolrCloudClient doesn&amp;#39;t return &amp;#39;adds&amp;#39; in Response when &amp;#39;versions&amp;#39; is requested&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10250&quot;&gt;&lt;del&gt;SOLR-10250&lt;/del&gt;&lt;/a&gt;: CloudSolrClient can now return versions for documents added or deleted when versions=true is passed&lt;/p&gt;</comment>
                            <comment id="15907549" author="jira-bot" created="Mon, 13 Mar 2017 14:24:22 +0000"  >&lt;p&gt;Commit 659882790ac4213036b45242b58fceb2f33f2b43 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ichattopadhyaya&quot; class=&quot;user-hover&quot; rel=&quot;ichattopadhyaya&quot;&gt;ichattopadhyaya&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=6598827&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=6598827&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10250&quot; title=&quot;SolrCloudClient doesn&amp;#39;t return &amp;#39;adds&amp;#39; in Response when &amp;#39;versions&amp;#39; is requested&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10250&quot;&gt;&lt;del&gt;SOLR-10250&lt;/del&gt;&lt;/a&gt;: CloudSolrClient can now return versions for documents added or deleted when versions=true is passed&lt;/p&gt;</comment>
                            <comment id="15907563" author="ichattopadhyaya" created="Mon, 13 Mar 2017 14:29:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;Note that SolrCloudClient agregating responses from multiple leaders is only part of the problem &#8211; if an update is internally forwarded (either due ot updates being sent to nodes arbitrarily, or because of leader election while in transit) then the version# will also be missing.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;These issues are still unresolved, and can be tackled as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8733&quot; title=&quot;versions=true on Optimistic Concurrency updates doesn&amp;#39;t work with in multi shard collections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8733&quot;&gt;SOLR-8733&lt;/a&gt;. This issue fixes the returning the versions part, whenever available.&lt;/p&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=BorisNaguet&quot; class=&quot;user-hover&quot; rel=&quot;BorisNaguet&quot;&gt;BorisNaguet&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="16207507" author="githubbot" created="Tue, 17 Oct 2017 11:21:02 +0000"  >&lt;p&gt;Github user BorisNaguet closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/164&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/164&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12943105">SOLR-8733</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12857688" name="SOLR-10250.patch" size="5550" author="ichattopadhyaya" created="Mon, 13 Mar 2017 14:14:21 +0000"/>
                            <attachment id="12857339" name="SOLR-10250.patch" size="5469" author="BorisNaguet" created="Fri, 10 Mar 2017 15:31:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3b4p3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>