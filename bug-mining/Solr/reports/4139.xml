<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:36:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-13255] LanguageIdentifierUpdateProcessor broken for documents sent with SolrJ/javabin</title>
                <link>https://issues.apache.org/jira/browse/SOLR-13255</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;7.7 changed the object type of string field values that are passed to UpdateRequestProcessor implementations from java.lang.String to ByteArrayUtf8CharSequence. &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12992&quot; title=&quot;Avoid creating Strings from BytesRef in ExportWriter &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12992&quot;&gt;&lt;del&gt;SOLR-12992&lt;/del&gt;&lt;/a&gt; was mentioned on solr-user as cause.&lt;/p&gt;

&lt;p&gt;The LangDetectLanguageIdentifierUpdateProcessor still expects String values, does not work for CharSequences, and logs warnings instead. For example:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2019-02-14 13:14:47.537 WARN  (qtp802600647-19) [   x:studio] o.a.s.u.p.LangDetectLanguageIdentifierUpdateProcessor Field name_tokenized not a String value, not including in detection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m not sure, but there could be further places where the changed type for string values needs to be handled. (Our custom UpdateRequestProcessor are broken as well since 7.7 and it would be great to have a proper upgrade note as part of the release notes)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13215919">SOLR-13255</key>
            <summary>LanguageIdentifierUpdateProcessor broken for documents sent with SolrJ/javabin</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="noble.paul">Noble Paul</assignee>
                                    <reporter username="ahubold">Andreas Hubold</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Feb 2019 09:01:28 +0000</created>
                <updated>Sat, 8 Jun 2019 14:57:51 +0000</updated>
                            <resolved>Wed, 20 Feb 2019 11:46:17 +0000</resolved>
                                    <version>7.7</version>
                                    <fixVersion>7.7.1</fixVersion>
                    <fixVersion>8.0</fixVersion>
                                    <component>contrib - LangId</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16769161" author="janhoy" created="Fri, 15 Feb 2019 10:10:13 +0000"  >&lt;p&gt;Attached a raw, not tested patch for langid for&#160;branch_7_7.&lt;/p&gt;

&lt;p&gt;Due to a refactor, the bug will be different in 8.x, probably it will just silently fail to detect any languages, since the list of String fields are determined through instanceof String. The patch for 8.x and master will thus need to fix SolrInputDocumentReader instead.&lt;/p&gt;

&lt;p&gt;I think that for 8.0 we should add an UPGRADE NOTE about this breaking change...&lt;/p&gt;</comment>
                            <comment id="16771196" author="gerlowskija" created="Mon, 18 Feb 2019 16:23:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;it would be great to have a proper upgrade note as part of the release notes&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ahubold&quot; class=&quot;user-hover&quot; rel=&quot;ahubold&quot;&gt;ahubold&lt;/a&gt;, I&apos;m working on &quot;Upgrade Notes&quot; for the next release of our ref-guide, and I wanted them to include this issue.  I included a short paragraph over on &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13256&quot; title=&quot;Ref Guide: Upgrade Notes for 7.7&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13256&quot;&gt;&lt;del&gt;SOLR-13256&lt;/del&gt;&lt;/a&gt;.  Since you mentioned you were interested in seeing this get documented, I wanted to give you a heads up.  Feel free to chime in over there about anything I got wrong or any suggestions you might have.&lt;/p&gt;</comment>
                            <comment id="16771458" author="noble.paul" created="Tue, 19 Feb 2019 00:52:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ahubold&quot; class=&quot;user-hover&quot; rel=&quot;ahubold&quot;&gt;ahubold&lt;/a&gt; do you have a test for this?&lt;/p&gt;</comment>
                            <comment id="16771728" author="ahubold" created="Tue, 19 Feb 2019 08:54:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gerlowskija&quot; class=&quot;user-hover&quot; rel=&quot;gerlowskija&quot;&gt;gerlowskija&lt;/a&gt; Thank you, Jason, looks good.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; No, I don&apos;t have a test I could share. But as soon as I have some time, I will try out your patch.&lt;/p&gt;</comment>
                            <comment id="16771797" author="romseygeek" created="Tue, 19 Feb 2019 10:20:46 +0000"  >&lt;p&gt;Can somebody clarify whether or not this is a blocker for 8.0?&lt;/p&gt;</comment>
                            <comment id="16771824" author="noble.paul" created="Tue, 19 Feb 2019 11:07:25 +0000"  >&lt;p&gt;Yes, this is a blocker for 8.0. There is a regression which makes URPs fail. &lt;/p&gt;</comment>
                            <comment id="16772653" author="noble.paul" created="Wed, 20 Feb 2019 06:19:30 +0000"  >&lt;p&gt;updated the testcase to test with CharSequence as well &lt;/p&gt;</comment>
                            <comment id="16772767" author="ahubold" created="Wed, 20 Feb 2019 08:46:35 +0000"  >&lt;p&gt;I tested &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt;&apos;s patch from yesterday and it solves our problems with UpdateRequestProcessors in our integration. Thanks!&lt;/p&gt;</comment>
                            <comment id="16772800" author="ichattopadhyaya" created="Wed, 20 Feb 2019 09:16:33 +0000"  >&lt;p&gt;I&apos;ll start 7.7.1 release process as soon as this is committed.&lt;/p&gt;</comment>
                            <comment id="16772917" author="jira-bot" created="Wed, 20 Feb 2019 11:19:38 +0000"  >&lt;p&gt;Commit a89b065c1f3cc4d8234d00e185034d0e594247e6 in lucene-solr&apos;s branch refs/heads/master from Noble Paul&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=a89b065&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=a89b065&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13255&quot; title=&quot;LanguageIdentifierUpdateProcessor broken for documents sent with SolrJ/javabin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13255&quot;&gt;&lt;del&gt;SOLR-13255&lt;/del&gt;&lt;/a&gt; : ClasscastException when URPs try to read a String field which returns a ByteArrayUTF8CHarSequence . This is a regression  in release 7.7&lt;/p&gt;</comment>
                            <comment id="16772919" author="jira-bot" created="Wed, 20 Feb 2019 11:21:57 +0000"  >&lt;p&gt;Commit 7a33ba3323d8d2cb7a8861817449f2cbe000ea03 in lucene-solr&apos;s branch refs/heads/branch_8x from Noble Paul&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=7a33ba3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=7a33ba3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13255&quot; title=&quot;LanguageIdentifierUpdateProcessor broken for documents sent with SolrJ/javabin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13255&quot;&gt;&lt;del&gt;SOLR-13255&lt;/del&gt;&lt;/a&gt; : ClasscastException when URPs try to read a String field which returns a ByteArrayUTF8CHarSequence . This is a regression  in release 7.7&lt;/p&gt;</comment>
                            <comment id="16772920" author="jira-bot" created="Wed, 20 Feb 2019 11:21:58 +0000"  >&lt;p&gt;Commit e636c47bf6dfde850442d3d041b7bd6276bfd838 in lucene-solr&apos;s branch refs/heads/branch_8x from Noble Paul&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=e636c47&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=e636c47&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13255&quot; title=&quot;LanguageIdentifierUpdateProcessor broken for documents sent with SolrJ/javabin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13255&quot;&gt;&lt;del&gt;SOLR-13255&lt;/del&gt;&lt;/a&gt; : ClasscastException when URPs try to read a String field which returns a ByteArrayUTF8CHarSequence . This is a regression  in release 7.7&lt;/p&gt;</comment>
                            <comment id="16772922" author="jira-bot" created="Wed, 20 Feb 2019 11:27:52 +0000"  >&lt;p&gt;Commit 29e9c8647b7cc6b2aa70452bf1c03c25302ae397 in lucene-solr&apos;s branch refs/heads/branch_8_0 from Noble Paul&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=29e9c86&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=29e9c86&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13255&quot; title=&quot;LanguageIdentifierUpdateProcessor broken for documents sent with SolrJ/javabin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13255&quot;&gt;&lt;del&gt;SOLR-13255&lt;/del&gt;&lt;/a&gt; : ClasscastException when URPs try to read a String field which returns a ByteArrayUTF8CHarSequence . This is a regression  in release 7.7&lt;/p&gt;</comment>
                            <comment id="16772931" author="jira-bot" created="Wed, 20 Feb 2019 11:44:24 +0000"  >&lt;p&gt;Commit 97c21f8417f22cc234234836e65f70b6fbe31451 in lucene-solr&apos;s branch refs/heads/branch_7x from Noble Paul&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=97c21f8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=97c21f8&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13255&quot; title=&quot;LanguageIdentifierUpdateProcessor broken for documents sent with SolrJ/javabin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13255&quot;&gt;&lt;del&gt;SOLR-13255&lt;/del&gt;&lt;/a&gt; : ClasscastException when URPs try to read a String field which returns a ByteArrayUTF8CHarSequence . This is a regression  in release 7.7&lt;/p&gt;</comment>
                            <comment id="16772932" author="jira-bot" created="Wed, 20 Feb 2019 11:44:25 +0000"  >&lt;p&gt;Commit f3ba6961de350a82a25e96e4f9d5333de66a9923 in lucene-solr&apos;s branch refs/heads/branch_7x from Noble Paul&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=f3ba696&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=f3ba696&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13255&quot; title=&quot;LanguageIdentifierUpdateProcessor broken for documents sent with SolrJ/javabin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13255&quot;&gt;&lt;del&gt;SOLR-13255&lt;/del&gt;&lt;/a&gt; : ClasscastException when URPs try to read a String field which returns a ByteArrayUTF8CHarSequence . This is a regression  in release 7.7&lt;/p&gt;</comment>
                            <comment id="16772934" author="jira-bot" created="Wed, 20 Feb 2019 11:45:39 +0000"  >&lt;p&gt;Commit 7f2ec0b46667a85b1b755b1f1b4a0c882b44b7ce in lucene-solr&apos;s branch refs/heads/branch_7_7 from Noble Paul&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=7f2ec0b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=7f2ec0b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13255&quot; title=&quot;LanguageIdentifierUpdateProcessor broken for documents sent with SolrJ/javabin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13255&quot;&gt;&lt;del&gt;SOLR-13255&lt;/del&gt;&lt;/a&gt; : ClasscastException when URPs try to read a String field which returns a ByteArrayUTF8CHarSequence . This is a regression  in release 7.7&lt;/p&gt;</comment>
                            <comment id="16772935" author="jira-bot" created="Wed, 20 Feb 2019 11:45:40 +0000"  >&lt;p&gt;Commit a1353b6a94fa4d02d397f8fc2965dc6ce82ed42a in lucene-solr&apos;s branch refs/heads/branch_7_7 from Noble Paul&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=a1353b6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=a1353b6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13255&quot; title=&quot;LanguageIdentifierUpdateProcessor broken for documents sent with SolrJ/javabin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13255&quot;&gt;&lt;del&gt;SOLR-13255&lt;/del&gt;&lt;/a&gt; : ClasscastException when URPs try to read a String field which returns a ByteArrayUTF8CHarSequence . This is a regression  in release 7.7&lt;/p&gt;</comment>
                            <comment id="16781929" author="gerlowskija" created="Fri, 1 Mar 2019 17:59:02 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ahubold&quot; class=&quot;user-hover&quot; rel=&quot;ahubold&quot;&gt;ahubold&lt;/a&gt;, have you had a chance to confirm whether 7.7.1 has fixed this issue for you?  I trust Noble&apos;s fix, but there was a report on the mailing list this morning about a similar ClassCastException on Solr 7.7.1 so I figured it was worth checking in to see if you&apos;d tried out the fix yet or had a chance to do so in the near future...&lt;/p&gt;</comment>
                            <comment id="16782847" author="ahubold" created="Sun, 3 Mar 2019 20:05:17 +0000"  >&lt;p&gt;I&apos;m sorry but I currently don&apos;t have time to test this, will get back as soon as I have time.  I&apos;ve tested successfully with the patch some time ago.&lt;/p&gt;</comment>
                            <comment id="16795167" author="ahubold" created="Mon, 18 Mar 2019 16:22:01 +0000"  >&lt;p&gt;Just for the record, I can confirm that 7.7.1 fixes the problem in our setup.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310360">
                    <name>Dependent</name>
                                            <outwardlinks description="Dependent">
                                        <issuelink>
            <issuekey id="13197964">SOLR-12983</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13222434">SOLR-13331</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13215752">SOLR-13249</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13215752">SOLR-13249</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12959373" name="SOLR-13255.patch" size="7998" author="noble.paul" created="Wed, 20 Feb 2019 06:18:52 +0000"/>
                            <attachment id="12959173" name="SOLR-13255.patch" size="3487" author="noble.paul" created="Mon, 18 Feb 2019 23:51:19 +0000"/>
                            <attachment id="12958850" name="SOLR-13255.patch" size="3182" author="janhoy" created="Fri, 15 Feb 2019 10:07:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 35 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi10hc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>