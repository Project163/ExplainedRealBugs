<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:30:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-3916] fl parsing is sensitive to newlines at the end of field names</title>
                <link>https://issues.apache.org/jira/browse/SOLR-3916</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;As reported by giovanni.bricconi on the user list, there is a bug in &quot;fl&quot; parsing that causes solr to get confused when a field name is followed by a newline character &amp;#8211; eg: in a requestHandler default like...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;!-- newlines showing using &quot;$&quot; --&amp;gt;$
&amp;lt;str name=&quot;fl&quot;&amp;gt;$
   sku,store_slug$  
&amp;lt;/str&amp;gt;$
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...this results in solr assuming it should use function parsing to evaluate the field name, which can cause missleading errors if the field name can&apos;t be used in a function (eg: &quot;can not use FieldCache on multivalued field: store_slug&quot;)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12610613">SOLR-3916</key>
            <summary>fl parsing is sensitive to newlines at the end of field names</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Oct 2012 18:47:42 +0000</created>
                <updated>Sun, 17 Jul 2016 15:43:14 +0000</updated>
                            <resolved>Fri, 5 Oct 2012 22:27:18 +0000</resolved>
                                    <version>4.0-BETA</version>
                                    <fixVersion>4.0</fixVersion>
                    <fixVersion>4.1</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13470559" author="yseeley@gmail.com" created="Fri, 5 Oct 2012 18:54:40 +0000"  >&lt;p&gt;A lot of things could be confused by this - I don&apos;t consider this as much a bug in &quot;fl&quot; parsing as I do a bug in default handling configured via XML.&lt;/p&gt;</comment>
                            <comment id="13470618" author="hossman" created="Fri, 5 Oct 2012 20:14:50 +0000"  >&lt;p&gt;blaming this on xml parsing doesn&apos;t really seem productive, espeicially since you can trivially reproduce the problem from a remote client (or even with the solr admin UI) if you accidentally cut/paste tab characters or newlines mixed in your list of fields.&lt;/p&gt;

&lt;p&gt;The fix is trivial: in some places the fl parser was naivly only checking character equality with &apos; &apos; instead of using Character.isWhitespace().  &lt;/p&gt;

&lt;p&gt;patch with tests attached, running all tests and precommit on my computer now for further vetting.&lt;/p&gt;</comment>
                            <comment id="13470652" author="yseeley@gmail.com" created="Fri, 5 Oct 2012 20:56:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;blaming this on xml parsing doesn&apos;t really seem productive&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;?&lt;/p&gt;

&lt;p&gt;I&apos;m suggesting this could be a much wider problem than just &quot;fl&quot;, which would seem to be a very productive line of conversation.&lt;/p&gt;

&lt;p&gt;In the context of grabbing defaults from XML, we should consider trimming whitespace in the process of generating those defaults (rather than later).&lt;br/&gt;
The only downside is if certain parameters could reasonably expect to want leading/trailing whitespace.  If we want to support that, we could introduce a new type called &amp;lt;verbatim&amp;gt; or something.&lt;/p&gt;</comment>
                            <comment id="13470703" author="hossman" created="Fri, 5 Oct 2012 21:56:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;In the context of grabbing defaults from XML, we should consider trimming whitespace in the process of generating those defaults (rather than later).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;...which can be pursued in another issue if you wish to do so.&lt;/p&gt;

&lt;p&gt;as i&apos;ve already said: this current bug is &lt;em&gt;not&lt;/em&gt; specific to getting defaults from the xml file, nor is it specific to leading/trailing whitespace that could be easily trimmed in a generic way.  Having a tab or newline or any whitespace character other then a simple &apos; &apos; between the names of fields in an &quot;fl&quot; string causes this annoying little bug &amp;#8211; regardless of whether it comes from xml config, or a remote client.&lt;/p&gt;

&lt;p&gt;If you look at the patch, you can see my point quite easily: when parsing the fl, ReturnFields is naively only treating the &apos; &apos; character as whitespace and not recognizing any other whitespace characters that might exist between field names.&lt;/p&gt;</comment>
                            <comment id="13470732" author="hossman" created="Fri, 5 Oct 2012 22:27:18 +0000"  >&lt;p&gt;Committed revision 1394836. - trunk&lt;br/&gt;
Committed revision 1394843. - 4x&lt;br/&gt;
Committed revision 1394844. - 4.0&lt;/p&gt;</comment>
                            <comment id="13471116" author="yseeley@gmail.com" created="Sat, 6 Oct 2012 23:58:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;If you look at the patch, you can see my point quite easily: when parsing the fl, ReturnFields is naively only treating the &apos; &apos; character as whitespace and not recognizing any other whitespace characters that might exist between field names.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I had looked at the patch, and still didn&apos;t consider not checking for other types of whitespace between fieldnames a bug since we never promised to support that.  If you look at the code that was used before ReturnFields, it also used a pattern that only split on comma or space.  The previous code did handle leading/trailing whitespace via using String.trim() first though.&lt;/p&gt;</comment>
                            <comment id="13610703" author="commit-tag-bot" created="Fri, 22 Mar 2013 16:28:10 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Chris M. Hostetter&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1394843&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1394843&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3916&quot; title=&quot;fl parsing is sensitive to newlines at the end of field names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3916&quot;&gt;&lt;del&gt;SOLR-3916&lt;/del&gt;&lt;/a&gt;: Fixed whitespace bug in parsing the fl param (merge r1394836)&lt;/p&gt;</comment>
                            <comment id="15381283" author="sstults" created="Sun, 17 Jul 2016 11:14:29 +0000"  >&lt;p&gt;Should there be a &lt;tt&gt;@Test&lt;/tt&gt; annotation on &lt;tt&gt;testWhitespace()&lt;/tt&gt;? I think some test runners might do introspection, but all of the other tests in that class use the annotation and was wondering if that was just an oversight or had specific meaning.&lt;/p&gt;</comment>
                            <comment id="15381397" author="erickerickson" created="Sun, 17 Jul 2016 15:43:14 +0000"  >&lt;p&gt;Scott:&lt;/p&gt;

&lt;p&gt;Whether or not the @Test annotation is used is pretty arbitrary, JUnit picks up any method that starts with &apos;test&apos; so this test gets run. Personally I prefer the annotation, but there&apos;s no standard....&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12548034" name="SOLR-3916.patch" size="4953" author="hossman" created="Fri, 5 Oct 2012 20:14:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244038</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 18 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05fgf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29601</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>