<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:08:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-8223] Take care not to accidentally swallow OOMErrors</title>
                <link>https://issues.apache.org/jira/browse/SOLR-8223</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;This was first noticed with 4.10.3, but it looks like it still applies to trunk. There are a few places in the code where we catch &lt;tt&gt;Throwable&lt;/tt&gt; and then don&apos;t check for OOM or rethrow it. This behaviour means that OOM kill scripts won&apos;t run, and the JVM can get into an undesirable state.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12909031">SOLR-8223</key>
            <summary>Take care not to accidentally swallow OOMErrors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cpoerschke">Christine Poerschke</assignee>
                                    <reporter username="mdrob">Mike Drob</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Oct 2015 20:54:25 +0000</created>
                <updated>Mon, 9 May 2016 18:52:45 +0000</updated>
                            <resolved>Fri, 6 Nov 2015 09:31:20 +0000</resolved>
                                    <version>4.10.3</version>
                                    <fixVersion>5.4</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14981258" author="mdrob" created="Thu, 29 Oct 2015 20:55:53 +0000"  >&lt;p&gt;Attaching a patch that fixes an instance in &lt;tt&gt;CoreContainer&lt;/tt&gt; and &lt;tt&gt;LIRThread&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14985609" author="cpoerschke" created="Mon, 2 Nov 2015 17:50:18 +0000"  >&lt;p&gt;Small change, looks reasonable to me.&lt;/p&gt;

&lt;p&gt;re: the &lt;tt&gt;CoreContainer&lt;/tt&gt; change being to &lt;tt&gt;RuntimeException&lt;/tt&gt; whereas the &lt;tt&gt;LeaderInitiatedRecoveryThread&lt;/tt&gt; change is to &lt;tt&gt;Exception&lt;/tt&gt; - just curious re: why the difference? The class hierarchy being &lt;tt&gt;Throwable -&amp;gt; Error -&amp;gt; VirtualMachineError -&amp;gt; OutOfMemoryError&lt;/tt&gt; and &lt;tt&gt;Throwable -&amp;gt; Exception -&amp;gt; RuntimeException&lt;/tt&gt; both changes will stop swallowing the OOMError but the CoreContainer will also stop catching non-RuntimeException Exceptions, so just curious re: the distinction.&lt;/p&gt;
</comment>
                            <comment id="14985647" author="mdrob" created="Mon, 2 Nov 2015 18:03:05 +0000"  >&lt;p&gt;In &lt;tt&gt;CoreContainer&lt;/tt&gt;, &lt;tt&gt;zkSys.registerInZk&lt;/tt&gt; doesn&apos;t declare any checked exceptions, so we can narrow the scope to catching only unchecked ones. This might help us notice API or compatibility changes in the future.&lt;/p&gt;

&lt;p&gt;In &lt;tt&gt;LeaderInitiatedRecoveryThread&lt;/tt&gt;, &lt;tt&gt;client.request&lt;/tt&gt; declares both &lt;tt&gt;SolrServerException&lt;/tt&gt; and &lt;tt&gt;IOException&lt;/tt&gt; so we still have to handle them in some way. The existing code did not make a distinction between those and &lt;tt&gt;RuntimeException&lt;/tt&gt;, so I made the minimal changes I could. It would have been reasonable to &lt;tt&gt;catch (IOException | SolrServerException | RuntimeException e)&lt;/tt&gt; but I didn&apos;t think of that at the time and I&apos;m not sure it really adds much value.&lt;/p&gt;</comment>
                            <comment id="14985842" author="cpoerschke" created="Mon, 2 Nov 2015 19:28:28 +0000"  >&lt;p&gt;Makes sense. Thanks for explaining.&lt;/p&gt;</comment>
                            <comment id="14989925" author="mdrob" created="Wed, 4 Nov 2015 17:07:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt; - do you think this is good to commit, or are there other changes you think it should have? I tried to figure out what kind of meaningful tests I could add, but couldn&apos;t come up with anything that was non-trivial and useful.&lt;/p&gt;</comment>
                            <comment id="14989937" author="cpoerschke" created="Wed, 4 Nov 2015 17:12:40 +0000"  >&lt;p&gt;I think this is good to commit. (Won&apos;t get to it today though.)&lt;/p&gt;</comment>
                            <comment id="14991992" author="jira-bot" created="Thu, 5 Nov 2015 17:03:51 +0000"  >&lt;p&gt;Commit 1712817 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1712817&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1712817&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8223&quot; title=&quot;Take care not to accidentally swallow OOMErrors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8223&quot;&gt;&lt;del&gt;SOLR-8223&lt;/del&gt;&lt;/a&gt;: Avoid accidentally swallowing OutOfMemoryError (in LeaderInitiatedRecoveryThread.java or CoreContainer.java)&lt;/p&gt;</comment>
                            <comment id="14992189" author="jira-bot" created="Thu, 5 Nov 2015 18:28:49 +0000"  >&lt;p&gt;Commit 1712842 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1712842&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1712842&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8223&quot; title=&quot;Take care not to accidentally swallow OOMErrors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8223&quot;&gt;&lt;del&gt;SOLR-8223&lt;/del&gt;&lt;/a&gt;: Avoid accidentally swallowing OutOfMemoryError (in LeaderInitiatedRecoveryThread.java or CoreContainer.java) (merge in revision 1712817 from trunk)&lt;/p&gt;</comment>
                            <comment id="14993423" author="cpoerschke" created="Fri, 6 Nov 2015 09:31:20 +0000"  >&lt;p&gt;Thanks Mike!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12769628" name="SOLR-8223.patch" size="2078" author="mdrob" created="Thu, 29 Oct 2015 20:55:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2npnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>