<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:09:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-2556] Spellcheck component not returned with numeric queries</title>
                <link>https://issues.apache.org/jira/browse/SOLR-2556</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The spell check component&apos;s output is not written when sending queries that &lt;br/&gt;
consist of numbers only. Clients depending on the availability of the &lt;br/&gt;
spellcheck output need to check if the output is actually there.&lt;/p&gt;


&lt;p&gt;See also:&lt;br/&gt;
&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/lucene-solr-user/201105.mbox/%3C201105301607.41956.markus.jelsma@openindex.io%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/lucene-solr-user/201105.mbox/%3C201105301607.41956.markus.jelsma@openindex.io%3E&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12508749">SOLR-2556</key>
            <summary>Spellcheck component not returned with numeric queries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdyer">James Dyer</assignee>
                                    <reporter username="markus17">Markus Jelsma</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 May 2011 19:59:15 +0000</created>
                <updated>Tue, 23 Feb 2016 10:40:22 +0000</updated>
                            <resolved>Thu, 3 Dec 2015 18:01:54 +0000</resolved>
                                    <version>3.1</version>
                                    <fixVersion>5.5</fixVersion>
                                    <component>spellchecker</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13106455" author="rcmuir" created="Fri, 16 Sep 2011 14:51:10 +0000"  >&lt;p&gt;3.4 -&amp;gt; 3.5&lt;/p&gt;</comment>
                            <comment id="13237038" author="hossman" created="Fri, 23 Mar 2012 20:31:30 +0000"  >&lt;p&gt;Bulk changing fixVersion 3.6 to 4.0 for any open issues that are unassigned and have not been updated since March 19.&lt;/p&gt;

&lt;p&gt;Email spam suppressed for this bulk edit; search for hoss20120323nofix36 to identify all issues edited&lt;/p&gt;</comment>
                            <comment id="13294757" author="hossman" created="Thu, 14 Jun 2012 01:13:22 +0000"  >&lt;p&gt;when i read this issue, i assumed it was simply a matter of the spellcheck response block not being included if there was no suggestions, but it&apos;s more subtle then that.&lt;/p&gt;

&lt;p&gt;These queries don&apos;t produce any spellcheck section in the response at all...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://localhost:8983/solr/spell?debugQuery=true&amp;amp;q=1&amp;amp;spellcheck=true&amp;amp;spellcheck.collate=true&amp;amp;spellcheck.build=true&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/spell?debugQuery=true&amp;amp;q=1&amp;amp;spellcheck=true&amp;amp;spellcheck.collate=true&amp;amp;spellcheck.build=true&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://localhost:8983/solr/spell?debugQuery=true&amp;amp;q=9999&amp;amp;spellcheck=true&amp;amp;spellcheck.collate=true&amp;amp;spellcheck.build=true&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/spell?debugQuery=true&amp;amp;q=9999&amp;amp;spellcheck=true&amp;amp;spellcheck.collate=true&amp;amp;spellcheck.build=true&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;But these queries do (even if that section contains no suggestions)....&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://localhost:8983/solr/spell?debugQuery=true&amp;amp;q=______&amp;amp;spellcheck=true&amp;amp;spellcheck.collate=true&amp;amp;spellcheck.build=true&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/spell?debugQuery=true&amp;amp;q=______&amp;amp;spellcheck=true&amp;amp;spellcheck.collate=true&amp;amp;spellcheck.build=true&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://localhost:8983/solr/spell?debugQuery=true&amp;amp;q=asfasdfasdfasdfasdf&amp;amp;spellcheck=true&amp;amp;spellcheck.collate=true&amp;amp;spellcheck.build=true&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/spell?debugQuery=true&amp;amp;q=asfasdfasdfasdfasdf&amp;amp;spellcheck=true&amp;amp;spellcheck.collate=true&amp;amp;spellcheck.build=true&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://localhost:8983/solr/spell?debugQuery=true&amp;amp;spellcheck.q=9999&amp;amp;q=9999&amp;amp;spellcheck=true&amp;amp;spellcheck.collate=true&amp;amp;spellcheck.build=true&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/spell?debugQuery=true&amp;amp;spellcheck.q=9999&amp;amp;q=9999&amp;amp;spellcheck=true&amp;amp;spellcheck.collate=true&amp;amp;spellcheck.build=true&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Note in particular that last one - using &quot;spellcheck.q=9999&quot; causes the empty section to appear, even if it&apos;s identical to &quot;q=9999&quot;&lt;/p&gt;

&lt;p&gt;Skimming the code, the problem seems to relate to the user of the &quot;queryConverter&quot;, and the fact that it&apos;s only used on the &quot;q&quot; param (a different code path is used on the &quot;spellcheck.q&quot; param) and what happens if no tokens are produced &amp;#8211; the &quot;spellcheck&quot; block is added to the response inside a conditional block that is only executed if there are tokens.&lt;/p&gt;

&lt;p&gt;It seems like it would be fairly easy to just move the code that adds the block to the response outside of the conditional &amp;#8211; but the fact that the two code paths produce different behavior makes me wonder if this isn&apos;t semi-intentional?  is the idea that &quot;your query converter produced no tokens, therefore we assume you don&apos;t want any spellcheck results?&quot;  should it be?&lt;/p&gt;

&lt;p&gt;(FWIW: there is a similar condition where no &quot;spellcheck&quot; response is generated if there are no dictionaries configured)&lt;/p&gt;</comment>
                            <comment id="13412182" author="hossman" created="Wed, 11 Jul 2012 22:26:14 +0000"  >&lt;p&gt;bulk fixing the version info for 4.0-ALPHA and 4.0 all affected issues have &quot;hoss20120711-bulk-40-change&quot; in comment&lt;/p&gt;</comment>
                            <comment id="13429835" author="rcmuir" created="Tue, 7 Aug 2012 03:43:28 +0000"  >&lt;p&gt;rmuir20120906-bulk-40-change&lt;/p&gt;</comment>
                            <comment id="13451053" author="hossman" created="Fri, 7 Sep 2012 22:13:02 +0000"  >&lt;p&gt;removing fixVersion=4.0 since there is no evidence that anyone is currently working on this issue.  (this can certainly be revisited if volunteers step forward)&lt;/p&gt;</comment>
                            <comment id="14582296" author="dsmiley" created="Thu, 11 Jun 2015 18:04:41 +0000"  >&lt;p&gt;I&apos;ve been investigating this oddity in an app I&apos;m working on and found this issue here.  I agree with Hoss&apos;s assessment &amp;#8211; I have the same conclusions.  If the current behavior is &quot;semi-intentional&quot;, it isn&apos;t clear it should be; we could ask about the wisdom to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdyer&quot; class=&quot;user-hover&quot; rel=&quot;jdyer&quot;&gt;jdyer&lt;/a&gt;?.  IMO, FWIW, this is a bug.  Other components, when enabled (e.g. facet=on), output something; it&apos;s disconcerting to see nothing from spellcheck from time to time, and makes client parsing code more error prone (didn&apos;t expect a null).  I may have time to fix this soon-ish.&lt;/p&gt;</comment>
                            <comment id="14582329" author="jdyer" created="Thu, 11 Jun 2015 18:24:34 +0000"  >&lt;p&gt;This looks like a bug to me.&lt;/p&gt;</comment>
                            <comment id="15036520" author="jdyer" created="Wed, 2 Dec 2015 20:12:38 +0000"  >&lt;p&gt;Here is a patch with just failing unit tests.&lt;/p&gt;

&lt;p&gt;I think the best way to fix this is to make SpellingQueryConverter more robust to recognize digits as terms subject to corrections / suggestions.&lt;/p&gt;

&lt;p&gt;I do think the complete absence of the spellcheck section on the response was probably by design.  If there are no terms in the query that can be corrected, it leaves it off altogether.&lt;/p&gt;</comment>
                            <comment id="15036671" author="jdyer" created="Wed, 2 Dec 2015 21:26:53 +0000"  >&lt;p&gt;Here is a patch the tests passing.  If everything checks out, I&apos;ll commit this tomorrow.&lt;/p&gt;</comment>
                            <comment id="15038006" author="jira-bot" created="Thu, 3 Dec 2015 16:11:45 +0000"  >&lt;p&gt;Commit 1717795 from jdyer@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1717795&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1717795&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2556&quot; title=&quot;Spellcheck component not returned with numeric queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2556&quot;&gt;&lt;del&gt;SOLR-2556&lt;/del&gt;&lt;/a&gt;: Fix SpellingQueryConverter to recognize terms consisting only of digits&lt;/p&gt;</comment>
                            <comment id="15038012" author="jira-bot" created="Thu, 3 Dec 2015 16:16:16 +0000"  >&lt;p&gt;Commit 1717796 from jdyer@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1717796&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1717796&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2556&quot; title=&quot;Spellcheck component not returned with numeric queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2556&quot;&gt;&lt;del&gt;SOLR-2556&lt;/del&gt;&lt;/a&gt;: Fix SpellingQueryConverter to recognize terms consisting only of digits&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12775397" name="SOLR-2556.patch" size="3258" author="jdyer" created="Wed, 2 Dec 2015 21:26:53 +0000"/>
                            <attachment id="12775379" name="SOLR-2556.patch" size="2516" author="jdyer" created="Wed, 2 Dec 2015 20:12:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4985</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 50 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03k1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18680</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>