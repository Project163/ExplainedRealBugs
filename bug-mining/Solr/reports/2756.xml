<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:10:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-8364] SpellCheckComponentTest occasionally fails</title>
                <link>https://issues.apache.org/jira/browse/SOLR-8364</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;This failure did not reproduce for me in Linux or Windows with the same seed.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Build: &lt;a href=&quot;http://jenkins.thetaphi.de/job/Lucene-Solr-trunk-Windows/5439/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.thetaphi.de/job/Lucene-Solr-trunk-Windows/5439/&lt;/a&gt;&lt;br/&gt;
: Java: 64bit/jdk1.8.0_66 -XX:-UseCompressedOops -XX:+UseConcMarkSweepGC&lt;br/&gt;
: &lt;br/&gt;
: 1 tests failed.&lt;br/&gt;
: FAILED:  org.apache.solr.handler.component.SpellCheckComponentTest.test&lt;br/&gt;
: &lt;br/&gt;
: Error Message:&lt;br/&gt;
: List size mismatch @ spellcheck/suggestions&lt;br/&gt;
: &lt;br/&gt;
: Stack Trace:&lt;br/&gt;
: java.lang.RuntimeException: List size mismatch @ spellcheck/suggestions&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="12918035">SOLR-8364</key>
            <summary>SpellCheckComponentTest occasionally fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdyer">James Dyer</assignee>
                                    <reporter username="jdyer">James Dyer</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Dec 2015 15:31:44 +0000</created>
                <updated>Tue, 1 Nov 2016 21:00:36 +0000</updated>
                            <resolved>Fri, 18 Dec 2015 15:30:50 +0000</resolved>
                                    <version>6.0</version>
                                    <fixVersion>5.5</fixVersion>
                                    <component>spellchecker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15037936" author="jdyer" created="Thu, 3 Dec 2015 15:32:18 +0000"  >&lt;p&gt;: Date: Wed, 2 Dec 2015 16:20:52 -0600&lt;br/&gt;
: From: &quot;Dyer, James&quot; &amp;lt;James.Dyer@ingramcontent.com&amp;gt;&lt;br/&gt;
: Reply-To: dev@lucene.apache.org&lt;br/&gt;
: To: &quot;dev@lucene.apache.org&quot; &amp;lt;dev@lucene.apache.org&amp;gt;&lt;br/&gt;
: Subject: RE: &lt;span class=&quot;error&quot;&gt;&amp;#91;JENKINS&amp;#93;&lt;/span&gt; Lucene-Solr-trunk-Windows (64bit/jdk1.8.0_66) - Build #&lt;br/&gt;
:      5439 - Failure!&lt;br/&gt;
: &lt;br/&gt;
: I&apos;m looking at this failure.  I cannot reproduce this on Linux using:&lt;br/&gt;
: &lt;br/&gt;
: ant test -Dtests.class=&quot;*.SpellCheckComponentTest&quot; -Dtests.seed=110D525A21D16B1:8944EAFF0CE17B49&lt;/p&gt;


&lt;p&gt;James - not sure if you noticed but assertJQ logs the entire response when &lt;br/&gt;
an assertion fails...&lt;/p&gt;

&lt;p&gt;   &lt;span class=&quot;error&quot;&gt;&amp;#91;junit4&amp;#93;&lt;/span&gt;   2&amp;gt;  expected=/spellcheck=={&apos;suggestions&apos;:[&apos;documemt&apos;,&lt;/p&gt;
{&apos;numFound&apos;:1,&apos;startOffset&apos;:0,&apos;endOffset&apos;:8,&apos;suggestion&apos;:[&apos;document&apos;]}
&lt;p&gt;]}&lt;br/&gt;
   &lt;span class=&quot;error&quot;&gt;&amp;#91;junit4&amp;#93;&lt;/span&gt;   2&amp;gt;  response = {&lt;br/&gt;
   &lt;span class=&quot;error&quot;&gt;&amp;#91;junit4&amp;#93;&lt;/span&gt;   2&amp;gt;   &quot;responseHeader&quot;:&lt;/p&gt;
{
   [junit4]   2&amp;gt;     &quot;status&quot;:0,
   [junit4]   2&amp;gt;     &quot;QTime&quot;:0}
&lt;p&gt;,&lt;br/&gt;
   &lt;span class=&quot;error&quot;&gt;&amp;#91;junit4&amp;#93;&lt;/span&gt;   2&amp;gt;   &quot;response&quot;:&lt;/p&gt;
{&quot;numFound&quot;:0,&quot;start&quot;:0,&quot;docs&quot;:[]
   [junit4]   2&amp;gt;   }
&lt;p&gt;,&lt;br/&gt;
   &lt;span class=&quot;error&quot;&gt;&amp;#91;junit4&amp;#93;&lt;/span&gt;   2&amp;gt;   &quot;spellcheck&quot;:{&lt;br/&gt;
   &lt;span class=&quot;error&quot;&gt;&amp;#91;junit4&amp;#93;&lt;/span&gt;   2&amp;gt;     &quot;suggestions&quot;:[]}}&lt;br/&gt;
   &lt;span class=&quot;error&quot;&gt;&amp;#91;junit4&amp;#93;&lt;/span&gt;   2&amp;gt;&lt;br/&gt;
   &lt;span class=&quot;error&quot;&gt;&amp;#91;junit4&amp;#93;&lt;/span&gt;   2&amp;gt;  request = q=documemt&amp;amp;qt=spellCheckCompRH&amp;amp;spellcheck=true&amp;amp;wt=xml&lt;/p&gt;

&lt;p&gt;...I haven&apos;t dug into the code being tested, or even the logs from &lt;br/&gt;
jenkins, but if it&apos;s rebuilding any spellcheck structures in a newSearcher &lt;br/&gt;
listener, then maybe that&apos;s slowing down opening the searcher so that when &lt;br/&gt;
the test is run the docs (and suggestions) aren&apos;t always visible yet?&lt;/p&gt;

&lt;p&gt;maybe try adding a waitSearcher=true to the commit() calls?  or switch to &lt;br/&gt;
some explicitly blocking client call to generate those spellcheck &lt;br/&gt;
structures/indexes?&lt;/p&gt;</comment>
                            <comment id="15041747" author="jdyer" created="Fri, 4 Dec 2015 16:47:38 +0000"  >&lt;p&gt;Ok, looking closely at the log, I see this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[junit4]   2&amp;gt; 1921118 WARN  (TEST-SpellCheckComponentTest.test-seed#[110D525A21D16B1]) [    ] o.a.s.c.SolrCore [collection1] PERFORMANCE WARNING: Overlapping onDeckSearchers=2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...which seems to say we can remedy this (as suggested) with &apos;waitSearcher=true&apos;.  But in digging through TestHarness, what it does is issue a &amp;lt;commit /&amp;gt; to the core, and then the &lt;a href=&quot;https://cwiki.apache.org/confluence/display/solr/Uploading+Data+with+Index+Handlers#UploadingDatawithIndexHandlers-XMLFormattedIndexUpdates&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;reference guide&lt;/a&gt; says that the default here for &apos;waitSearcher&apos; is already &apos;true&apos;.  So I am not so sure adding it would change anything?&lt;/p&gt;

&lt;p&gt;Perhaps we can instead remedy this by adding this to the test&apos;s solrconfig.xml?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;query&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;useColdSearcher&amp;gt;&lt;/span&gt;false&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/useColdSearcher&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;maxWarmingSearchers&amp;gt;&lt;/span&gt;1&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/maxWarmingSearchers&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/query&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15062662" author="jdyer" created="Thu, 17 Dec 2015 19:48:22 +0000"  >&lt;p&gt;This failure &lt;a href=&quot;http://jenkins.thetaphi.de/job/Lucene-Solr-trunk-MacOSX/2948/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Policeman #2948&lt;/a&gt; also had the warning about 2 on-deck searchers.&lt;/p&gt;</comment>
                            <comment id="15062675" author="jdyer" created="Thu, 17 Dec 2015 19:58:07 +0000"  >&lt;p&gt;Here&apos;s a patch that adds &quot;useColdSearcher=false/maxWarmingSearchers=1&quot; to the test&apos;s solrconfig.xml file.  &lt;/p&gt;

&lt;p&gt;Note that I had to copy/paste in the included solrconfig.snippet.randomindexconfig.xml so that I could also put these settings in this section. &lt;/p&gt;

&lt;p&gt;It doesn&apos;t look like doing this breaks anything, but I&apos;m not fully convinced it solves the problem either?&lt;/p&gt;</comment>
                            <comment id="15064083" author="jira-bot" created="Fri, 18 Dec 2015 15:28:08 +0000"  >&lt;p&gt;Commit 1720810 from jdyer@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1720810&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1720810&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8364&quot; title=&quot;SpellCheckComponentTest occasionally fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8364&quot;&gt;&lt;del&gt;SOLR-8364&lt;/del&gt;&lt;/a&gt;: fix test bug&lt;/p&gt;</comment>
                            <comment id="15064086" author="jira-bot" created="Fri, 18 Dec 2015 15:29:50 +0000"  >&lt;p&gt;Commit 1720812 from jdyer@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1720812&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1720812&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8364&quot; title=&quot;SpellCheckComponentTest occasionally fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8364&quot;&gt;&lt;del&gt;SOLR-8364&lt;/del&gt;&lt;/a&gt;: fix test bug&lt;/p&gt;</comment>
                            <comment id="15064091" author="jdyer" created="Fri, 18 Dec 2015 15:30:50 +0000"  >&lt;p&gt;I committed the patch.  I did not create CHANGES.txt entries as this is a test-only fix.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13017001">SOLR-9710</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12778324" name="SOLR-8364.patch" size="1355" author="jdyer" created="Thu, 17 Dec 2015 19:58:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 48 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2p913:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>