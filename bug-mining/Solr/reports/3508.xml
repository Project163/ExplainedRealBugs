<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:24:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-8689] bin/solr.cmd does not start with recent Verona builds of Java 9 because of version parsing issue</title>
                <link>https://issues.apache.org/jira/browse/SOLR-8689</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;At least on Windows, Solr 5.5 does not start with the shell script using a Verona-Java-9 JDK:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;*****************************************************
JAVA_HOME = C:\Program Files\Java\jdk-9
java version &quot;9-ea&quot;
Java(TM) SE Runtime Environment (build 9-ea+105-2016-02-11-003336.javare.4433.nc)
Java HotSpot(TM) 64-Bit Server VM (build 9-ea+105-2016-02-11-003336.javare.4433.nc, mixed mode)
*****************************************************
C:\Users\Uwe Schindler\Desktop\solr-5.5.0\bin&amp;gt;solr start
ERROR: Java 1.7 or later is required to run Solr. Current Java version is: 9-ea
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I don&apos;t know if this is better with Linux, but I assume the version parsing is broken (e.g., String#startsWith, interpret as floating point number,...)&lt;/p&gt;

&lt;p&gt;We should fix this before Java 9 gets released! The version numbering scheme changed completely: &lt;a href=&quot;http://openjdk.java.net/jeps/223&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://openjdk.java.net/jeps/223&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7&lt;/p&gt;</environment>
        <key id="12940132">SOLR-8689</key>
            <summary>bin/solr.cmd does not start with recent Verona builds of Java 9 because of version parsing issue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="uschindler">Uwe Schindler</assignee>
                                    <reporter username="uschindler">Uwe Schindler</reporter>
                        <labels>
                            <label>Java9</label>
                    </labels>
                <created>Thu, 18 Feb 2016 11:38:26 +0000</created>
                <updated>Mon, 17 May 2021 21:25:18 +0000</updated>
                            <resolved>Tue, 22 Aug 2017 09:02:07 +0000</resolved>
                                    <version>5.5</version>
                    <version>6.0</version>
                                    <fixVersion>6.6.1</fixVersion>
                    <fixVersion>7.0</fixVersion>
                    <fixVersion>7.1</fixVersion>
                    <fixVersion>8.0</fixVersion>
                                    <component>scripts and tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15924665" author="hossman" created="Tue, 14 Mar 2017 17:44:13 +0000"  >&lt;p&gt;I don&apos;t have a windows VM to use to work on this, but whoever picks it up might want to review the corollary fixes in &lt;tt&gt;bin/solr&lt;/tt&gt; over in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10184&quot; title=&quot;bin/solr fails to run on java9 due to unrecognized GC logging options&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10184&quot;&gt;&lt;del&gt;SOLR-10184&lt;/del&gt;&lt;/a&gt;: in particular this comment...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10184?focusedCommentId=15904091&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15904091&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SOLR-10184?focusedCommentId=15904091&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15904091&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;fix the version parsing to look at the entire number, and compare against entire float versions like &quot;1.8&quot;&lt;/li&gt;
	&lt;li&gt;fix gc log option defaults &amp;amp; how log file is added&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;bash changes that should be mimiced in windows cmd scripting...&lt;br/&gt;
&lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=09bd861&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=09bd861&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15926124" author="thetaphi" created="Wed, 15 Mar 2017 13:08:46 +0000"  >&lt;p&gt;Hi Hoss,&lt;/p&gt;

&lt;p&gt;I will quickly try to start it with Java 9 on my Windows machine.&lt;/p&gt;

&lt;p&gt;I plan to enable Java 9 EA builds on Policeman Jenkins Windows Slave, so we get better testing, too. Currently we only run Java 9 on Linux (mostly because of maintenance, which is hard with GUI based Windows Installers instead of automated unzipping of tar.gz and renaming install dirs...).&lt;/p&gt;</comment>
                            <comment id="15926142" author="thetaphi" created="Wed, 15 Mar 2017 13:17:30 +0000"  >&lt;p&gt;Current state with master:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\bin&amp;gt;java -version
java version &quot;9-ea&quot;
Java(TM) SE Runtime Environment (build 9-ea+159)
Java HotSpot(TM) 64-Bit Server VM (build 9-ea+159, mixed mode)

C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\bin&amp;gt;solr start

ERROR: Java 1.8 or later is required to run Solr. Current Java version is: 9-ea
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16063549" author="janhoy" created="Mon, 26 Jun 2017 18:18:11 +0000"  >&lt;p&gt;Important: This issue should also take care of the GC settings which were done for &lt;tt&gt;bin/solr&lt;/tt&gt; in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10184&quot; title=&quot;bin/solr fails to run on java9 due to unrecognized GC logging options&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10184&quot;&gt;&lt;del&gt;SOLR-10184&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16134514" author="thetaphi" created="Sun, 20 Aug 2017 17:51:35 +0000"  >&lt;p&gt;I am fixing this issue right now. I got the version parsing working. I will now add the GC settings (as Solr does not start because of the GC options).&lt;/p&gt;</comment>
                            <comment id="16134556" author="thetaphi" created="Sun, 20 Aug 2017 20:09:48 +0000"  >&lt;p&gt;I rewrote the WIndows startup script, but I stumbled on an issue with the Java 9 command line parser. I asked on the Hotspot Mailing List:&lt;br/&gt;
&lt;a href=&quot;http://mail.openjdk.java.net/pipermail/hotspot-dev/2017-August/027962.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail.openjdk.java.net/pipermail/hotspot-dev/2017-August/027962.html&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I am currently adapting Apache Solr&apos;s startup scripts for Java 9. Linux was already done at the beginning of this year and works perfectly, but Windows brings some problems. I already fixed version number parsing, but I stumbled on the following: In the Windows &quot;.cmd&quot; shell script it uses the following to enable Garbage collection logging to a separate file, if Java 9 is detected:&lt;br/&gt;
    set GC_LOG_OPTS=&quot;-Xlog:gc*:file=&lt;span class=&quot;error&quot;&gt;Unable to render embedded object: File (SOLR_LOGS_DIR) not found.&lt;/span&gt;\solr_gc.log:time,uptime:filecount=9,filesize=20000&quot;&lt;/p&gt;

&lt;p&gt;The problem is now that &quot;&lt;span class=&quot;error&quot;&gt;Unable to render embedded object: File (SOLR_LOGS_DIR) not found.&lt;/span&gt;&quot; is already expanded to an absolute Windows Path by the shell and therefore starts with &quot;C:\&quot;. The problem is now the colon, which breaks the log parsing. When Java 9 starts it exits with the following parsing error:&lt;br/&gt;
Invalid -Xlog option &apos;-Xlog:gc*:file=C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\server\logs\solr_gc.log:time,uptime:filecount=9,filesize=20000&apos;&lt;/p&gt;

&lt;p&gt;If I replace with a simple file name, without path/drive letter it works. How to escape the colon in the drive letter correctly, to me this looks like a bummer?&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="16134557" author="thetaphi" created="Sun, 20 Aug 2017 20:11:16 +0000"  >&lt;p&gt;Here my current patch, which breaks, because of the absolute path issue.&lt;/p&gt;</comment>
                            <comment id="16134558" author="thetaphi" created="Sun, 20 Aug 2017 20:12:16 +0000"  >&lt;p&gt;BTW, I set this as blocker, as we cannot release Solr 7 at the same time like Java 9 and it won&apos;t work.&lt;br/&gt;
If we cannot solve the logging issue, I will comment out the separate log file on windows...&lt;/p&gt;</comment>
                            <comment id="16134741" author="thetaphi" created="Mon, 21 Aug 2017 05:59:32 +0000"  >&lt;p&gt;Hi,&lt;br/&gt;
this variant works, although it looks crazy: The &lt;tt&gt;\&quot;&lt;/tt&gt; escaping is ignored by the shell of windows, so it is passed as-is to Java (because &quot;\&quot; is not a good escape char on windows, so this approach won&apos;t work on Linux, but there are not colons in filenames!)&lt;/p&gt;

&lt;p&gt;This patch does not do the same stuff like Linux, because we do not have easy regular expressions available in Windows. The GC_LOG_OPTS used as it was before the change on Java &amp;lt;= 8, but for Java 9 it is ignored. I have no better idea how to do this. IMHO, this is better than not working at all! I added documentation for this.&lt;/p&gt;

&lt;p&gt;Does anybody have a better idea or knows how to do the same magic regex replcaments like in the linux shell script? Is the current approach acceptable, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman&quot; class=&quot;user-hover&quot; rel=&quot;hossman&quot;&gt;hossman&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="16134787" author="thetaphi" created="Mon, 21 Aug 2017 06:36:37 +0000"  >&lt;p&gt;I reordered the checks. Java 9 is detected before IBM J9. Because IBM J9 for Java 9 will handle the command line options like Oracle. This goes in-line with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman&quot; class=&quot;user-hover&quot; rel=&quot;hossman&quot;&gt;hossman&lt;/a&gt;&apos;s UNIX shell script.&lt;/p&gt;

&lt;p&gt;I just noticed: JAVA_BUILD is not used anywhere, may I remove it? Because this wouldn&apos;t ever work with Java 9, as build numbers are handled by other means (no &quot;_&quot;). The UNIX shell script does not have any build version parsing, so I think it&apos;s a relict from former times.&lt;/p&gt;</comment>
                            <comment id="16135390" author="hossman" created="Mon, 21 Aug 2017 16:26:19 +0000"  >&lt;p&gt;My thoughts in no particular order &amp;#8211; w/o having looked at /understood the patch (i&apos;m not familar with most windows batch file syntax)...&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;BTW, I set this as blocker, as we cannot release Solr 7 at the same time like Java 9 and it won&apos;t work.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t think &quot;solr + windows + jdk9&quot; is an important enough use case to warrant holding up lucene/solr 7.  We can release note that solr.cmd startup script doesn&apos;t work in that permutation and focus on fixing later (if anyone is really hardcore about using solr + windows + jdk9 they can probably work around using the solr.cmd script)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The GC_LOG_OPTS used as it was before the change on Java &amp;lt;= 8, but for Java 9 it is ignored. I have no better idea how to do this. IMHO, this is better than not working at all! I added documentation for this.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;My personal opinion is that it would be better to continue to support things as best we can for existing solr users who may upgrade solr w/o caring about jdk9 at all &amp;#8211; ie: keep supporting/using GC_LOG_OPTS &amp;#8211; but in the special in the case where they use jdk9 &lt;em&gt;and&lt;/em&gt; try to specify a value for the GC_LOG_OPTS ... we should hard fail w/message that solr can&apos;t support GC_LOG_OPTS  when using jdk9.  &lt;/p&gt;

&lt;p&gt;I believe you said in your current patch you &quot;ignored&quot; GC_LOG_OPTS when using jdk9? ... i think that&apos;s a mistake, as existing solr users who may have already set GC_LOG_OPTS and then later upgrade to jdk9 will get confusing silently different behavior.  better to fail fast and be clear that they can&apos;t do that (unless/until we find a better solution)&lt;/p&gt;</comment>
                            <comment id="16135628" author="thetaphi" created="Mon, 21 Aug 2017 19:17:02 +0000"  >&lt;p&gt;Patch with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman&quot; class=&quot;user-hover&quot; rel=&quot;hossman&quot;&gt;hossman&lt;/a&gt;&apos;s suggestions. If somebody sets GC_LOG_OPTS on Java 9 it bails out. I also updated documentation in the solr.in.cmd file.&lt;/p&gt;

&lt;p&gt;I tested with:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Java 8u144: Works as usual, GC_LOG_OPTS is respected if explicitely set&lt;/li&gt;
	&lt;li&gt;Java 9b178: Works now by default; if you comment out the GC_LOG_OPTS it fails early. BTW, in the UNIX scripts it would also fail if somebody updates Java 8 to Java 9, because the logging options are incompatible. So we are consistent for users that have GC_LOG_OPTS configured and migrate.&lt;/li&gt;
	&lt;li&gt;IBM J9 (Java 8): Works as before&lt;/li&gt;
	&lt;li&gt;Java 7u90: Fails early&lt;/li&gt;
	&lt;li&gt;Java 6: Fails early&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think we should really commit this and maybe later improve this. It looks like I am the only active Solr committer that knows windows shell scripts a bit. IMHO, maybe we should switch to PowerShell, really! PowerShell is now installed on all supported Windows VMs, Windows 7 is out of service.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman&quot; class=&quot;user-hover&quot; rel=&quot;hossman&quot;&gt;hossman&lt;/a&gt;: Any complaints or do you trust me? The current state is much better than before and the added code is trivial. IMHO, we should really not release that without basic Java 9 support and some migration path. Java comes out on Sept 21 (for sure, I already booked my tickets to the party in Munich).&lt;/p&gt;</comment>
                            <comment id="16135636" author="thetaphi" created="Mon, 21 Aug 2017 19:21:29 +0000"  >&lt;p&gt;And BTW, it also works with whitespace in Solr&apos;s installation directory. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16135638" author="thetaphi" created="Mon, 21 Aug 2017 19:22:50 +0000"  >&lt;p&gt;FYI, here is the Java 9 output:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\bin&amp;gt;solr start -e techproducts -verbose
Using Solr root directory: C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr
Using Java: C:\Program Files\Java\jdk-9\bin\java
java version &quot;9&quot;
Java(TM) SE Runtime Environment (build 9+178)
Java HotSpot(TM) 64-Bit Server VM (build 9+178, mixed mode)

Running with
serverDir=C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\server,
exampleDir=C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\example
script=C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\bin\solr.cmd
Creating Solr home directory C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\example\techproducts\solr

Starting up Solr on port 8983 using command:
&quot;C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\bin\solr.cmd&quot; start -p 8983 -s &quot;C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\example\techproducts\solr&quot;

Using Solr root directory: C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr
Using Java: C:\Program Files\Java\jdk-9\bin\java
java version &quot;9&quot;
Java(TM) SE Runtime Environment (build 9+178)
Java HotSpot(TM) 64-Bit Server VM (build 9+178, mixed mode)

Starting Solr using the following settings:
    JAVA            = C:\Program Files\Java\jdk-9\bin\java
    SOLR_SERVER_DIR = C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\server
    SOLR_HOME       = C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\example\techproducts\solr
    SOLR_HOST       =
    SOLR_PORT       = 8983
    STOP_PORT       = 7983
    SOLR_JAVA_MEM   = -Xms512m -Xmx512m
    GC_TUNE         = -XX:NewRatio=3    -XX:SurvivorRatio=4    -XX:TargetSurvivorRatio=90    -XX:MaxTenuringThreshold=8    -XX:+UseConcMarkSweepGC    -XX:+UseParNewGC    -XX:ConcGCThreads=4 -XX:ParallelGCThreads=4    -XX:+CMSScavengeBeforeRemark    -XX:PretenureSizeThreshold=64m    -XX:+UseCMSInitiatingOccupancyOnly    -XX:CMSInitiatingOccupancyFraction=50    -XX:CMSMaxAbortablePrecleanTime=6000    -XX:+CMSParallelRemarkEnabled    -XX:+ParallelRefProcEnabled    -XX:-OmitStackTraceInFastThrow
    GC_LOG_OPTS     = &quot;-Xlog:gc*:file=\&quot;C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\example\techproducts\solr\..\logs\solr_gc.log\&quot;:time,uptime:filecount=9,filesize=20000&quot;
    SOLR_TIMEZONE   = UTC
    SOLR_OPTS       = -Xss256k

Java HotSpot(TM) 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.
Java HotSpot(TM) 64-Bit Server VM warning: Option UseParNewGC was deprecated in version 9.0 and will likely be removed in a future release.

Checking status of Solr at http://localhost:8983/solr ...
Waiting up to 30 to see Solr running on port 8983
Started Solr server on port 8983. Happy searching!

Solr is running on 8983 in standalone mode with status:
{
  &quot;solr_home&quot;:&quot;C:\\Users\\Uwe Schindler\\Projects\\lucene\\trunk-lusolr1\\solr\\example\\techproducts\\solr&quot;,
  &quot;version&quot;:&quot;8.0.0-SNAPSHOT a7f2c30b405cb5d131826cf6c9ea5fe8a7cc3d71 - Uwe Schindler - 2017-08-20 19:20:02&quot;,
  &quot;startTime&quot;:&quot;2017-08-21T19:21:56.240Z&quot;,
  &quot;uptime&quot;:&quot;0 days, 0 hours, 0 minutes, 3 seconds&quot;,
  &quot;memory&quot;:&quot;58.9 MB (%12) of 490.7 MB&quot;,
  &quot;baseUrl&quot;:&quot;http://localhost:8983/solr&quot;}

Copying configuration to new core instance directory:
C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\example\techproducts\solr\techproducts

Creating new core &apos;techproducts&apos; using command:
http://localhost:8983/solr/admin/cores?action=CREATE&amp;amp;name=techproducts&amp;amp;instanceDir=techproducts

{
  &quot;responseHeader&quot;:{
    &quot;status&quot;:0,
    &quot;QTime&quot;:2529},
  &quot;core&quot;:&quot;techproducts&quot;}


Indexing tech product example docs from C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\example\exampledocs
SimplePostTool version 5.0.0
Posting files to [base] url http://localhost:8983/solr/techproducts/update using content-type application/xml...
POSTing file gb18030-example.xml to [base]
POSTing file hd.xml to [base]
POSTing file ipod_other.xml to [base]
POSTing file ipod_video.xml to [base]
POSTing file manufacturers.xml to [base]
POSTing file mem.xml to [base]
POSTing file money.xml to [base]
POSTing file monitor.xml to [base]
POSTing file monitor2.xml to [base]
POSTing file mp500.xml to [base]
POSTing file sd500.xml to [base]
POSTing file solr.xml to [base]
POSTing file utf8-example.xml to [base]
POSTing file vidcard.xml to [base]
14 files indexed.
COMMITting Solr index changes to http://localhost:8983/solr/techproducts/update...
Time spent: 0:00:00.689

Solr techproducts example launched successfully. Direct your Web browser to http://localhost:8983/solr to visit the Solr Admin UI

C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\bin&amp;gt;solr stop -all
Stopping Solr process 17596 running on port 8983

Gewartet wird 0 Sekunden. Weiter mit beliebiger Taste...

C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\bin&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16135641" author="thetaphi" created="Mon, 21 Aug 2017 19:24:41 +0000"  >&lt;p&gt;I will test with latest Java 9 in a minute, but the recent builds did not change anymore.&lt;/p&gt;</comment>
                            <comment id="16135642" author="hossman" created="Mon, 21 Aug 2017 19:25:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;Hoss Man: Any complaints or do you trust me?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I trust you ... if you think it&apos;s ready, i believe you &amp;#8211; heavy commit and let&apos;s move on. &lt;br/&gt;
If you don&apos;t think it&apos;s ready then i say it shouldn&apos;t hold up the 7.0 release. &lt;/p&gt;</comment>
                            <comment id="16135647" author="thetaphi" created="Mon, 21 Aug 2017 19:28:44 +0000"  >&lt;p&gt;Latest build (build 181) of Java 9 - the official RC - also works:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\bin&amp;gt;solr start -verbose
Using Solr root directory: C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr
Using Java: C:\Program Files\Java\jdk-9\bin\java
java version &quot;9&quot;
Java(TM) SE Runtime Environment (build 9+181)
Java HotSpot(TM) 64-Bit Server VM (build 9+181, mixed mode)

Archiving 1 old GC log files to C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\server\logs\archived
Archiving 1 console log files to C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\server\logs\archived
Rotating solr logs, keeping a max of 9 generations
Starting Solr using the following settings:
    JAVA            = C:\Program Files\Java\jdk-9\bin\java
    SOLR_SERVER_DIR = C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\server
    SOLR_HOME       = C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\server\solr
    SOLR_HOST       =
    SOLR_PORT       = 8983
    STOP_PORT       = 7983
    SOLR_JAVA_MEM   = -Xms512m -Xmx512m
    GC_TUNE         = -XX:NewRatio=3    -XX:SurvivorRatio=4    -XX:TargetSurvivorRatio=90    -XX:MaxTenuringThreshold=8    -XX:+UseConcMarkSweepGC    -XX:+UseParNewGC    -XX:ConcGCThreads=4 -XX:ParallelGCThreads=4    -XX:+CMSScavengeBeforeRemark    -XX:PretenureSizeThreshold=64m    -XX:+UseCMSInitiatingOccupancyOnly    -XX:CMSInitiatingOccupancyFraction=50    -XX:CMSMaxAbortablePrecleanTime=6000    -XX:+CMSParallelRemarkEnabled    -XX:+ParallelRefProcEnabled    -XX:-OmitStackTraceInFastThrow
    GC_LOG_OPTS     = &quot;-Xlog:gc*:file=\&quot;C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\server\logs\solr_gc.log\&quot;:time,uptime:filecount=9,filesize=20000&quot;
    SOLR_TIMEZONE   = UTC
    SOLR_OPTS       = -Xss256k

Java HotSpot(TM) 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.
Java HotSpot(TM) 64-Bit Server VM warning: Option UseParNewGC was deprecated in version 9.0 and will likely be removed in a future release.
Waiting up to 30 to see Solr running on port 8983
Started Solr server on port 8983. Happy searching!

C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\bin&amp;gt;solr stop -all
Stopping Solr process 9572 running on port 8983

Gewartet wird 0 Sekunden. Weiter mit beliebiger Taste...

C:\Users\Uwe Schindler\Projects\lucene\trunk-lusolr1\solr\bin&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16135649" author="thetaphi" created="Mon, 21 Aug 2017 19:29:45 +0000"  >&lt;p&gt;OK, I will commit this a bit later.&lt;/p&gt;

&lt;p&gt;Maybe somebody has time to test it in addition to myself.&lt;/p&gt;</comment>
                            <comment id="16135758" author="jira-bot" created="Mon, 21 Aug 2017 20:31:18 +0000"  >&lt;p&gt;Commit 86f7d6779a8fee56e4497fde7d8936e916b00814 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=86f7d67&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=86f7d67&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8689&quot; title=&quot;bin/solr.cmd does not start with recent Verona builds of Java 9 because of version parsing issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8689&quot;&gt;&lt;del&gt;SOLR-8689&lt;/del&gt;&lt;/a&gt;: Fix bin/solr.cmd so it can run properly on Java 9&lt;/p&gt;</comment>
                            <comment id="16135760" author="jira-bot" created="Mon, 21 Aug 2017 20:32:14 +0000"  >&lt;p&gt;Commit 88d04b239f2321e026b774298febd0e478a8f155 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=88d04b2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=88d04b2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8689&quot; title=&quot;bin/solr.cmd does not start with recent Verona builds of Java 9 because of version parsing issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8689&quot;&gt;&lt;del&gt;SOLR-8689&lt;/del&gt;&lt;/a&gt;: Fix bin/solr.cmd so it can run properly on Java 9&lt;/p&gt;</comment>
                            <comment id="16135763" author="jira-bot" created="Mon, 21 Aug 2017 20:35:00 +0000"  >&lt;p&gt;Commit ef0f443d4cf002bc24576f1e72556fa06584365f in lucene-solr&apos;s branch refs/heads/branch_7_0 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=ef0f443&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=ef0f443&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8689&quot; title=&quot;bin/solr.cmd does not start with recent Verona builds of Java 9 because of version parsing issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8689&quot;&gt;&lt;del&gt;SOLR-8689&lt;/del&gt;&lt;/a&gt;: Fix bin/solr.cmd so it can run properly on Java 9&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Conflicts:&lt;/li&gt;
	&lt;li&gt;solr/CHANGES.txt&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="16135776" author="thetaphi" created="Mon, 21 Aug 2017 20:36:44 +0000"  >&lt;p&gt;I did some minor changes in the config.in files (updates in comments, because &quot;Java 8 and lower&quot; is no longer applicable, Solr is minimum Java 8).&lt;br/&gt;
I committed to master, 7.x and 7.0.&lt;/p&gt;

&lt;p&gt;If somebody wants this also in 6.6.1, please reopen!&lt;/p&gt;</comment>
                            <comment id="16135777" author="thetaphi" created="Mon, 21 Aug 2017 20:37:25 +0000"  >&lt;p&gt;I just noticed, the CHANGES.txt is out of sync, before release, somebody should update the 7.0 section so its identical everywhere.&lt;/p&gt;</comment>
                            <comment id="16136329" author="varunthacker" created="Tue, 22 Aug 2017 05:40:32 +0000"  >&lt;p&gt;Re-opening to backport to branch_6_6&lt;/p&gt;</comment>
                            <comment id="16136482" author="jira-bot" created="Tue, 22 Aug 2017 08:04:14 +0000"  >&lt;p&gt;Commit d30ae83426d7cf12784090b85ba611697165508d in lucene-solr&apos;s branch refs/heads/branch_6_6 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=d30ae83&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=d30ae83&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8689&quot; title=&quot;bin/solr.cmd does not start with recent Verona builds of Java 9 because of version parsing issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8689&quot;&gt;&lt;del&gt;SOLR-8689&lt;/del&gt;&lt;/a&gt;: Fix bin/solr.cmd so it can run properly on Java 9&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 86f7d67)&lt;/p&gt;</comment>
                            <comment id="16136528" author="varunthacker" created="Tue, 22 Aug 2017 09:01:16 +0000"  >&lt;p&gt;I used my colleagues windows machine to test the bin/solr.cmd script after the commit on branch_6_6 with Java 9&lt;/p&gt;

&lt;p&gt;it runs fine but I see a warning related to Jetty &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;F:\SOFTWARES\SOLR\Sources\lucene-solr\solr\bin&amp;gt;solr start -c -m 1g
Java HotSpot(TM) 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release.
Java HotSpot(TM) 64-Bit Server VM warning: Option UseParNewGC was deprecated in version 9.0 and will likely be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release.
Waiting up to 30 to see Solr running on port 8983
WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by org.eclipse.jetty.util.BufferUtil (file:/F:/SOFTWARES/SOLR/Sources/lucene-solr/solr/server/lib/jetty-util-9.3.14.v20161028.jar) to field java.nio.MappedByteBuffer.fd
WARNING: Please consider reporting &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; to the maintainers of org.eclipse.jetty.util.BufferUtil
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
Started Solr server on port 8983. Happy searching!
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16136533" author="varunthacker" created="Tue, 22 Aug 2017 09:02:07 +0000"  >&lt;p&gt;Thanks Uwe for tackling this. The fix will also be in 6.6.1 now&lt;/p&gt;</comment>
                            <comment id="16136564" author="thetaphi" created="Tue, 22 Aug 2017 09:27:16 +0000"  >&lt;p&gt;Hi Varun,&lt;br/&gt;
the warnings are:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The garbage collectors are deprecated. That&apos;s something we should investigate. Maybe it&apos;s time to switch to G1GC at some time by default.&lt;/li&gt;
	&lt;li&gt;The BufferUtils warning is caused by reflection of Jetty into JDK internals. On tests we don&apos;t see this, because we execute Java with --illegal-access=deny. By default, Java 9 allows illegal accesses. IMHO, we should maybe also deny illegal access in Solr by default through the startup scripts. Jetty can handle this, so it falls back to something that does not try to reflect into JDK internals.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think we should open a separate issue and hack the startup scripts of solr to pass &quot;--illegal-access=deny&quot; to the JVM. Interestingly, I don&apos;t see this warning on master and 7.x, but on 7.0 and 6.6, so maybe that&apos;s just an issue of older Jetty versions (9.3.14 vs. 9.3.20).&lt;/p&gt;</comment>
                            <comment id="16136566" author="thetaphi" created="Tue, 22 Aug 2017 09:34:34 +0000"  >&lt;p&gt;That warning is this issue: &lt;a href=&quot;https://github.com/eclipse/jetty.project/issues/1262&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/eclipse/jetty.project/issues/1262&lt;/a&gt; (fixed in Jetty 9.3.16), so it&apos;s fixed with Solr 7.1.&lt;/p&gt;</comment>
                            <comment id="16207473" author="shalinmangar" created="Tue, 17 Oct 2017 11:04:26 +0000"  >&lt;p&gt;Bulk close after 7.1.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13045001">SOLR-10184</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13378893">SOLR-15410</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12882952" name="SOLR-8689.patch" size="4734" author="uschindler" created="Mon, 21 Aug 2017 19:11:26 +0000"/>
                            <attachment id="12882824" name="SOLR-8689.patch" size="4224" author="uschindler" created="Mon, 21 Aug 2017 06:34:34 +0000"/>
                            <attachment id="12882820" name="SOLR-8689.patch" size="4224" author="uschindler" created="Mon, 21 Aug 2017 05:54:48 +0000"/>
                            <attachment id="12882799" name="SOLR-8689.patch" size="4220" author="uschindler" created="Sun, 20 Aug 2017 22:44:14 +0000"/>
                            <attachment id="12882795" name="SOLR-8689.patch" size="4382" author="uschindler" created="Sun, 20 Aug 2017 20:10:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2szzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>