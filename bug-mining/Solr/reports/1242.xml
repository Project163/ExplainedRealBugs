<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:34:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-3967] Mapping error: langid.enforceSchema option checks source field instead of target field</title>
                <link>https://issues.apache.org/jira/browse/SOLR-3967</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I use LangDetect update processor with a document that has &quot;body&quot; field. LangDetect should map this field to &quot;body_pl&quot;, &quot;body_en&quot; or &quot;body_nolang&quot;. My schema defines fields with language suffixes, but not &quot;body&quot; field. When the processor runs, I get error:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Unsuccessful field name mapping to body_nolang, field does not exist, skipping mapping.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I looked up source code and it seems there&apos;s an error in &lt;tt&gt;org.apache.solr.update.processor.LanguageIdentifierUpdateProcessor.process(SolrInputDocument)&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;          String mappedOutputField = getMappedField(fieldName, fieldLang);
          if(enforceSchema &amp;amp;&amp;amp; schema.getFieldOrNull(fieldName) == null) {
            log.warn(&quot;Unsuccessful field name mapping to {}, field does not exist, skipping mapping.&quot;, mappedOutputField, fieldName);
            mappedOutputField = fieldName;
          }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think it should check for &lt;tt&gt;schema.getFieldOrNull(mappedOutputField)&lt;/tt&gt; instead.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12612648">SOLR-3967</key>
            <summary>Mapping error: langid.enforceSchema option checks source field instead of target field</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="janhoy">Jan H&#248;ydahl</assignee>
                                    <reporter username="mmatela">Mateusz Matela</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Oct 2012 10:11:25 +0000</created>
                <updated>Mon, 9 May 2016 18:48:04 +0000</updated>
                            <resolved>Wed, 30 Jan 2013 09:53:05 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.2</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>contrib - LangId</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13490188" author="alexeyk" created="Sun, 4 Nov 2012 13:21:25 +0000"  >&lt;p&gt;Apparently it should check the mapped field&lt;/p&gt;</comment>
                            <comment id="13559215" author="janhoy" created="Mon, 21 Jan 2013 23:45:32 +0000"  >&lt;p&gt;Patch for trunk, including positive/negative test for enforceSchema option&lt;/p&gt;</comment>
                            <comment id="13561615" author="janhoy" created="Thu, 24 Jan 2013 13:25:51 +0000"  >&lt;p&gt;The patch moves the enforce logic to the getMappedField() method.&lt;/p&gt;

&lt;p&gt;I also fixed an issue where langid would fallback to original field instead of aborting in case mapped field does not exist. Will commit shortly if no objections.&lt;/p&gt;</comment>
                            <comment id="13566007" author="commit-tag-bot" created="Wed, 30 Jan 2013 00:28:11 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; Jan H&#248;ydahl&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1440226&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1440226&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3967&quot; title=&quot;Mapping error: langid.enforceSchema option checks source field instead of target field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3967&quot;&gt;&lt;del&gt;SOLR-3967&lt;/del&gt;&lt;/a&gt;: langid.enforceSchema option checks source field instead of target field&lt;/p&gt;</comment>
                            <comment id="13566329" author="commit-tag-bot" created="Wed, 30 Jan 2013 09:40:11 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Jan H&#248;ydahl&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1440319&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1440319&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3967&quot; title=&quot;Mapping error: langid.enforceSchema option checks source field instead of target field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3967&quot;&gt;&lt;del&gt;SOLR-3967&lt;/del&gt;&lt;/a&gt;: langid.enforceSchema option checks source field instead of target field (merge from trunk)&lt;/p&gt;</comment>
                            <comment id="13566333" author="janhoy" created="Wed, 30 Jan 2013 09:53:05 +0000"  >&lt;p&gt;This should now be fixed. Perhaps you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mmatela&quot; class=&quot;user-hover&quot; rel=&quot;mmatela&quot;&gt;mmatela&lt;/a&gt; would care to check out the code and verify if you&apos;re happy?&lt;/p&gt;</comment>
                            <comment id="13569777" author="mmatela" created="Sun, 3 Feb 2013 14:13:49 +0000"  >&lt;p&gt;Yes, the fix looks good. Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12565875" name="SOLR-3967.patch" size="5047" author="janhoy" created="Mon, 21 Jan 2013 23:45:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>249897</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 42 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0an13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>60004</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>