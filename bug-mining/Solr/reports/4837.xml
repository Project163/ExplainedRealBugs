<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:50:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16131] sql module cannot load Calcite driver</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16131</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;After adding the sql module, using -Dsolr.modules=sql from the command line on startup, sql queries throw the following error:&lt;/p&gt;

&lt;p&gt; Failed to load JDBC driver for &apos;org.apache.solr.handler.sql.CalciteSolrDriver&apos;&lt;/p&gt;

&lt;p&gt;This makes the sql module inoperable.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13436883">SOLR-16131</key>
            <summary>sql module cannot load Calcite driver</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="houston">Houston Putman</assignee>
                                    <reporter username="jbernste">Joel Bernstein</reporter>
                        <labels>
                    </labels>
                <created>Thu, 31 Mar 2022 12:24:15 +0000</created>
                <updated>Thu, 12 May 2022 00:35:08 +0000</updated>
                            <resolved>Mon, 4 Apr 2022 15:54:27 +0000</resolved>
                                    <version>9.0</version>
                                    <fixVersion>9.0</fixVersion>
                                    <component>Parallel SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="13200">3h 40m</timespent>
                                <comments>
                            <comment id="17515303" author="janhoy" created="Thu, 31 Mar 2022 12:29:08 +0000"  >&lt;p&gt;From my email comment:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I could reproduce the error&lt;br/&gt;
&amp;gt; Failed to load JDBC driver for &apos;org.apache.solr.handler.sql.CalciteSolrDriver&apos;&lt;/p&gt;

&lt;p&gt;And I see that JDBCStream uses a plain Class.forName(driverClassName); to fail early if the driver is wrong.&lt;/p&gt;

&lt;p&gt;The sql module is loaded:&lt;br/&gt;
&amp;gt; o.a.s.c.NodeConfig Added module sql. libPath=...solr-9.0.0/solr/packaging/build/solr-9.0.0/modules/sql/lib with 9 libs&lt;/p&gt;

&lt;p&gt;I wonder if we need to use SolrResourceLoader to load the class in order to find classes in sharedLib. But JDBCStream is in solrj while ResourceLoader is in core... Hmm&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="17515318" author="janhoy" created="Thu, 31 Mar 2022 13:09:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbernste&quot; class=&quot;user-hover&quot; rel=&quot;jbernste&quot;&gt;jbernste&lt;/a&gt; - in another email on the list you wrote&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I tried adding the module in the solr.in.sh and it can&apos;t find the SQLHandler after starting up. So the sql module appears to not be working.&#160;&lt;br/&gt;
&#160;&lt;br/&gt;
&quot;error&quot;:{ &quot;metadata&quot;:[ &quot;error-class&quot;,&quot;org.apache.solr.common.SolrException&quot;, &quot;root-error-class&quot;,&quot;java.lang.ClassNotFoundException&quot;], &quot;msg&quot;:&quot; Error loading class &apos;solr.SQLHandler&apos;&quot;,&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;How did you provoke that exception? Did you add the SOLR_MODULES env.variable to solr.in.sh?&#160;&lt;/p&gt;</comment>
                            <comment id="17515320" author="joel.bernstein" created="Thu, 31 Mar 2022 13:15:12 +0000"  >&lt;p&gt;It was added in solr.in.sh. This error appears to mean that the module didn&apos;t load.&lt;/p&gt;

&lt;p&gt;The command line -Dsolr.modules=sql  loaded the module, but cannot perform the dynamic class loading.&lt;/p&gt;
</comment>
                            <comment id="17515341" author="janhoy" created="Thu, 31 Mar 2022 13:47:05 +0000"  >&lt;p&gt;Was it added as env &lt;tt&gt;SOLR_MODULES=sql&lt;/tt&gt; ?&lt;/p&gt;

&lt;p&gt;What action did you do to see the ClassNotFoundException, and where did you see that error? In a log file, in the SQL panel of Admin UI? Is there a corresponding solr.log stacktrace?&lt;/p&gt;</comment>
                            <comment id="17515347" author="joel.bernstein" created="Thu, 31 Mar 2022 13:55:38 +0000"  >&lt;p&gt;This is from the solr log on the ClassNotFoundException on the calcite driver. This occurs when using the startup system prop: bin/solr start -c -Dsolr.modules=sql&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2022-03-31 00:46:59.442 INFO  (qtp1016633682-25) [c:test s:shard2 r:core_node3 x:test_shard2_replica_n1] o.a.s.c.S.Request webapp=/solr path=/sql params={stmt=select+id+from+test+limit+10&amp;amp;_=1648687013709} status=0 QTime=0
2022-03-31 00:46:59.442 ERROR (qtp1016633682-25) [c:test s:shard2 r:core_node3 x:test_shard2_replica_n1] o.a.s.c.s.i.s.ExceptionStream java.io.IOException: Failed to load JDBC driver &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.solr.handler.sql.CalciteSolrDriver&apos;&lt;/span&gt; =&amp;gt; java.io.IOException: Failed to load JDBC driver &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.solr.handler.sql.CalciteSolrDriver&apos;&lt;/span&gt;
	at org.apache.solr.client.solrj.io.stream.JDBCStream.open(JDBCStream.java:287)
java.io.IOException: Failed to load JDBC driver &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.solr.handler.sql.CalciteSolrDriver&apos;&lt;/span&gt;
	at org.apache.solr.client.solrj.io.stream.JDBCStream.open(JDBCStream.java:287) ~[?:?]
	at org.apache.solr.client.solrj.io.stream.ExceptionStream.open(ExceptionStream.java:49) ~[?:?]
	at org.apache.solr.handler.StreamHandler$TimerStream.open(StreamHandler.java:486) ~[?:?]
	at org.apache.solr.client.solrj.io.stream.TupleStream.writeMap(TupleStream.java:77) ~[?:?]
	at org.apache.solr.common.util.JsonTextWriter.writeMap(JsonTextWriter.java:168) ~[?:?]
	at org.apache.solr.common.util.TextWriter.writeMap(TextWriter.java:241) ~[?:?]
	at org.apache.solr.common.util.TextWriter.writeVal(TextWriter.java:85) ~[?:?]
	at org.apache.solr.response.TextResponseWriter.writeVal(TextResponseWriter.java:205) ~[?:?]
	at org.apache.solr.common.util.TextWriter.writeVal(TextWriter.java:45) ~[?:?]
	at org.apache.solr.common.util.JsonTextWriter.writeNamedListAsMapWithDups(JsonTextWriter.java:387) ~[?:?]
	at org.apache.solr.common.util.JsonTextWriter.writeNamedList(JsonTextWriter.java:295) ~[?:?]
	at org.apache.solr.response.JSONWriter.writeResponse(JSONWriter.java:77) ~[?:?]
	at org.apache.solr.response.JSONResponseWriter.write(JSONResponseWriter.java:63) ~[?:?]
	at org.apache.solr.response.QueryResponseWriterUtil.writeQueryResponse(QueryResponseWriterUtil.java:71) ~[?:?]
	at org.apache.solr.servlet.HttpSolrCall.writeResponse(HttpSolrCall.java:993) ~[?:?]
	at org.apache.solr.servlet.HttpSolrCall.call(HttpSolrCall.java:625) ~[?:?]
	at org.apache.solr.servlet.SolrDispatchFilter.dispatch(SolrDispatchFilter.java:234) ~[?:?]
	at org.apache.solr.servlet.SolrDispatchFilter.lambda$doFilter$0(SolrDispatchFilter.java:202) ~[?:?]
	at org.apache.solr.servlet.ServletUtils.traceHttpRequestExecution2(ServletUtils.java:257) ~[?:?]
	at org.apache.solr.servlet.ServletUtils.rateLimitRequest(ServletUtils.java:227) ~[?:?]
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:197) ~[?:?]
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:179) ~[?:?]
	at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:201) ~[jetty-servlet-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601) ~[jetty-servlet-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:548) ~[jetty-servlet-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:600) ~[jetty-security-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1624) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1434) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:501) ~[jetty-servlet-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1594) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1349) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:191) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.handler.InetAccessHandler.handle(InetAccessHandler.java:177) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:146) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.rewrite.handler.RewriteHandler.handle(RewriteHandler.java:322) ~[jetty-rewrite-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:763) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.Server.handle(Server.java:516) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:400) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:645) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:392) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:277) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311) ~[jetty-io-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:105) ~[jetty-io-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.io.ChannelEndPoint$1.run(ChannelEndPoint.java:104) ~[jetty-io-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:338) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:315) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:173) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:131) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:409) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:834) [?:?]
Caused by: java.lang.ClassNotFoundException: org.apache.solr.handler.sql.CalciteSolrDriver
	at java.net.URLClassLoader.findClass(URLClassLoader.java:471) ~[?:?]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:588) ~[?:?]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:521) ~[?:?]
	at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:538) ~[jetty-webapp-9.4.44.v20210927.jar:9.4.44.v20210927]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:521) ~[?:?]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName0(Native Method) ~[?:?]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:315) ~[?:?]
	at org.apache.solr.client.solrj.io.stream.JDBCStream.open(JDBCStream.java:283) ~[?:?]
	... 60 more

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17515353" author="joel.bernstein" created="Thu, 31 Mar 2022 14:00:57 +0000"  >&lt;p&gt;The error where it can&apos;t find the SQLHandler occurs when I start with the following line in the solr.in.sh:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
# The bundled plugins in the &lt;span class=&quot;code-quote&quot;&gt;&quot;modules&quot;&lt;/span&gt; folder can easily be enabled as a comma-separated list in SOLR_MODULES variable
SOLR_MODULES=sql
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In this scenario the logs say this:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2022-03-31 00:56:09.508 INFO  (qtp1016633682-25) [c:test s:shard1 r:core_node4 x:test_shard1_replica_n2] o.a.s.c.PluginBag Going to create a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; requestHandler with {type = requestHandler,name = /sql,class = solr.SQLHandler,attributes = {class=solr.SQLHandler, startup=lazy, useParams=_SQL, invariants={distrib=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;}, name=/sql},args = {startup=lazy, useParams=_SQL, invariants={distrib=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;}}} 
2022-03-31 00:56:09.512 ERROR (qtp1016633682-25) [c:test s:shard1 r:core_node4 x:test_shard1_replica_n2] o.a.s.s.HttpSolrCall org.apache.solr.common.SolrException:  Error loading class &lt;span class=&quot;code-quote&quot;&gt;&apos;solr.SQLHandler&apos;&lt;/span&gt; =&amp;gt; org.apache.solr.common.SolrException:  Error loading class &lt;span class=&quot;code-quote&quot;&gt;&apos;solr.SQLHandler&apos;&lt;/span&gt;
        at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:543)
org.apache.solr.common.SolrException:  Error loading class &lt;span class=&quot;code-quote&quot;&gt;&apos;solr.SQLHandler&apos;&lt;/span&gt;
        at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:543) ~[?:?]
        at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:464) ~[?:?]
        at org.apache.solr.core.SolrCore.createInstance(SolrCore.java:929) ~[?:?]
        at org.apache.solr.core.PluginBag$LazyPluginHolder.createInst(PluginBag.java:456) ~[?:?]
        at org.apache.solr.core.PluginBag$LazyPluginHolder.get(PluginBag.java:438) ~[?:?]
        at org.apache.solr.core.PluginBag.get(PluginBag.java:159) ~[?:?]
        at org.apache.solr.handler.RequestHandlerBase.getRequestHandler(RequestHandlerBase.java:297) ~[?:?]
        at org.apache.solr.core.SolrCore.getRequestHandler(SolrCore.java:1949) ~[?:?]
        at org.apache.solr.servlet.HttpSolrCall.extractHandlerFromURLPath(HttpSolrCall.java:436) ~[?:?]
        at org.apache.solr.servlet.HttpSolrCall.init(HttpSolrCall.java:332) ~[?:?]
        at org.apache.solr.servlet.HttpSolrCall.call(HttpSolrCall.java:554) ~[?:?]
        at org.apache.solr.servlet.SolrDispatchFilter.dispatch(SolrDispatchFilter.java:234) ~[?:?]
        at org.apache.solr.servlet.SolrDispatchFilter.lambda$doFilter$0(SolrDispatchFilter.java:202) ~[?:?]
        at org.apache.solr.servlet.ServletUtils.traceHttpRequestExecution2(ServletUtils.java:257) ~[?:?]
        at org.apache.solr.servlet.ServletUtils.rateLimitRequest(ServletUtils.java:227) ~[?:?]
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:197) ~[?:?]
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:179) ~[?:?]
        at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:201) ~[jetty-servlet-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601) ~[jetty-servlet-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:548) ~[jetty-servlet-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:600) ~[jetty-security-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1624) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1434) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:501) ~[jetty-servlet-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1594) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1349) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:191) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.InetAccessHandler.handle(InetAccessHandler.java:177) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:146) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.rewrite.handler.RewriteHandler.handle(RewriteHandler.java:322) ~[jetty-rewrite-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:763) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.Server.handle(Server.java:516) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:400) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:645) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:392) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:277) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311) ~[jetty-io-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:105) ~[jetty-io-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.io.ChannelEndPoint$1.run(ChannelEndPoint.java:104) ~[jetty-io-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:338) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:315) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:173) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:131) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:409) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:834) [?:?]
Caused by: java.lang.ClassNotFoundException: solr.SQLHandler
        at java.net.URLClassLoader.findClass(URLClassLoader.java:471) ~[?:?]
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:588) ~[?:?]
        at java.net.FactoryURLClassLoader.loadClass(URLClassLoader.java:899) ~[?:?]
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:521) ~[?:?]
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName0(Native Method) ~[?:?]
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:398) ~[?:?]
        at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:527) ~[?:?]
        ... 55 more

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="17515424" author="houston" created="Thu, 31 Mar 2022 16:17:50 +0000"  >&lt;p&gt;For your first issue (the calciteDriver class not being loaded) I&apos;m going down the rabbit hole and trying to figure out where the wrong classloader could have been used when creating The parent classes of the JDBCStream (likely the SQLHandler didn&apos;t get the correct classloader)&lt;/p&gt;</comment>
                            <comment id="17515425" author="houston" created="Thu, 31 Mar 2022 16:19:16 +0000"  >&lt;p&gt;Also for your second example could you upload all of the logs? there will be hints in there to see where it went wrong.&lt;/p&gt;</comment>
                            <comment id="17515428" author="joel.bernstein" created="Thu, 31 Mar 2022 16:25:53 +0000"  >&lt;p&gt;I&apos;m going down that rabbit hole as well. I haven&apos;t dug into the module class loading code yet to see how it&apos;s loading the classes, but it would seem to be a different classloader.  The CalciteJDBCStream extends the JDBCStream in this case which looks like there would have been two different class loaders involved in instantiating parent and child classes. Perhaps calling super.getClass().getClassLoader() and passing that into class.forName would solve the issue.&lt;/p&gt;

&lt;p&gt;Actually, that won&apos;t work. Super is the JDBCStream.&lt;/p&gt;

&lt;p&gt;Possibly adding a hook method in JDBCStream for getting the class loader is the way to go. Default it would return it&apos;s own class loader and the subclass would return its own class loader.&lt;/p&gt;
</comment>
                            <comment id="17515434" author="houston" created="Thu, 31 Mar 2022 16:50:17 +0000"  >&lt;p&gt;Ok I think I have an even simpler solution, just use the actual classes&apos; class loader. Will put up a PR now for you to test.&lt;/p&gt;</comment>
                            <comment id="17515445" author="joel.bernstein" created="Thu, 31 Mar 2022 17:13:12 +0000"  >&lt;p&gt;Sounds good.&lt;/p&gt;</comment>
                            <comment id="17515460" author="joel.bernstein" created="Thu, 31 Mar 2022 17:33:50 +0000"  >&lt;p&gt;I tried out the PR and got this error:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.sql.SQLException: No suitable driver
        at java.sql.DriverManager.getDriver(DriverManager.java:298) ~[java.sql:?]
        at org.apache.solr.client.solrj.io.stream.JDBCStream.open(JDBCStream.java:295) ~[?:?]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m wondering if we&apos;ve got some classes duplicated in the module and somewhere Solrj or core.&lt;/p&gt;

</comment>
                            <comment id="17515487" author="joel.bernstein" created="Thu, 31 Mar 2022 17:53:33 +0000"  >&lt;p&gt;This is still in solrj:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
joelbernstein@Joel Bernstein&apos;s MacBook Pro LW solr-10.0.0-SNAPSHOT % jar -tvf ./server/solr-webapp/webapp/WEB-INF/lib/solr-solrj-10.0.0-SNAPSHOT.jar | grep sql   
     0 Thu Mar 31 13:18:38 EDT 2022 org/apache/solr/client/solrj/io/sql/
 10840 Thu Mar 31 13:18:38 EDT 2022 org/apache/solr/client/solrj/io/sql/ConnectionImpl.class
 24424 Thu Mar 31 13:18:38 EDT 2022 org/apache/solr/client/solrj/io/sql/DatabaseMetaDataImpl.class
  4712 Thu Mar 31 13:18:38 EDT 2022 org/apache/solr/client/solrj/io/sql/DriverImpl.class
  9390 Thu Mar 31 13:18:38 EDT 2022 org/apache/solr/client/solrj/io/sql/PreparedStatementImpl.class
 29250 Thu Mar 31 13:18:38 EDT 2022 org/apache/solr/client/solrj/io/sql/ResultSetImpl.class
  5451 Thu Mar 31 13:18:38 EDT 2022 org/apache/solr/client/solrj/io/sql/ResultSetMetaDataImpl.class
 10905 Thu Mar 31 13:18:38 EDT 2022 org/apache/solr/client/solrj/io/sql/StatementImpl.class
   842 Thu Mar 31 13:18:40 EDT 2022 META-INF/services/java.sql.Driver

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;these are not duplicated in the module:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
joelbernstein@Joel Bernstein&apos;s MacBook Pro LW solr-10.0.0-SNAPSHOT % jar -tvf ./modules/sql/lib/solr-sql-10.0.0-SNAPSHOT.jar                       
     0 Thu Mar 31 13:19:20 EDT 2022 META-INF/
   553 Thu Mar 31 13:19:20 EDT 2022 META-INF/MANIFEST.MF
 12646 Thu Jan 20 11:02:50 EST 2022 META-INF/LICENSE.txt
 30303 Wed Jan 26 12:40:16 EST 2022 META-INF/NOTICE.txt
     0 Thu Mar 31 13:19:20 EDT 2022 org/
     0 Thu Mar 31 13:19:20 EDT 2022 org/apache/
     0 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/
     0 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/
     0 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/
  1680 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/CalciteJDBCStream$1.class
  2028 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/CalciteJDBCStream.class
  5401 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/CalciteSolrDriver.class
  3623 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/LimitStream.class
  2972 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SQLHandler$SqlHandlerStream.class
  6855 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SQLHandler.class
  8717 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrAggregate.class
  4261 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrEnumerator.class
  1217 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrFilter$1.class
  1110 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrFilter$AndClause.class
  6986 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrFilter$HavingTranslator.class
 19968 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrFilter$Translator.class
  4985 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrFilter.class
  1870 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrMethod.class
  4785 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrProject.class
  3765 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrRel$Implementor.class
   693 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrRel.class
  1265 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrRules$1.class
  2963 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrRules$RexToSolrTranslator.class
  2209 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrRules$SolrAggregateRule.class
  2276 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrRules$SolrConverterRule.class
  3939 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrRules$SolrFilterRule.class
  2010 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrRules$SolrProjectRule.class
  2452 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrRules$SolrSortRule.class
  1906 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrRules.class
 15054 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrSchema.class
  4876 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrSort.class
  1461 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrTable$1.class
  3726 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrTable$SolrQueryable.class
 35750 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrTable.class
  4499 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrTableScan.class
  1890 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrToEnumerableConverter$1.class
 10511 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrToEnumerableConverter.class
  1785 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/SolrToEnumerableConverterRule.class
     0 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/functions/
  4549 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/functions/ArrayContains.class
   703 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/functions/ArrayContainsAll.class
   703 Thu Mar 31 13:19:20 EDT 2022 org/apache/solr/handler/sql/functions/ArrayContainsAny.class

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="17515488" author="houston" created="Thu, 31 Mar 2022 17:55:33 +0000"  >&lt;p&gt;Yeah, but that is a completely separate jdbc driver so I don&apos;t think it should effect anything. I think I have a solution here that will still work with the jdbc stream if we add that back into the default streaming expressions in the future.&lt;/p&gt;</comment>
                            <comment id="17515490" author="joel.bernstein" created="Thu, 31 Mar 2022 17:56:42 +0000"  >&lt;p&gt;ok&lt;/p&gt;</comment>
                            <comment id="17515506" author="houston" created="Thu, 31 Mar 2022 18:46:03 +0000"  >&lt;p&gt;Ok basically the thread that calls the sql execute needs to have the calcite stuff on the thread classpath, since some very deep internal class requires that. I am not exactly sure how this should happen, but I added it in the inform() method and it works well enough... But I&apos;ll look into whether we can make it better&lt;/p&gt;</comment>
                            <comment id="17515518" author="joel.bernstein" created="Thu, 31 Mar 2022 19:02:41 +0000"  >&lt;p&gt;I&apos;m not quite understanding this. The thread that calls inform would be a different thread then executes the sql query. &lt;/p&gt;</comment>
                            <comment id="17515525" author="houston" created="Thu, 31 Mar 2022 19:08:33 +0000"  >&lt;p&gt;Apparently not? But I changed it to overall set the jetty thread&apos;s classloader to the solrResourceLoader for all Solr requests, so this should make it work for all plugins and modules?&lt;/p&gt;</comment>
                            <comment id="17515560" author="joel.bernstein" created="Thu, 31 Mar 2022 19:51:05 +0000"  >&lt;p&gt;That would in theory do the trick.&lt;/p&gt;</comment>
                            <comment id="17515917" author="joel.bernstein" created="Fri, 1 Apr 2022 13:23:40 +0000"  >&lt;p&gt;I&apos;ve tested the latest from PR 783 and have confirmed that sql is working with the command line startup prompts:&lt;/p&gt;

&lt;p&gt;bin/solr start -c -Dsolr.modules=sql&lt;/p&gt;</comment>
                            <comment id="17515926" author="joel.bernstein" created="Fri, 1 Apr 2022 13:40:58 +0000"  >&lt;p&gt;I have retested the solr.in.sh setup and found it still not working:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
# The bundled plugins in the &lt;span class=&quot;code-quote&quot;&gt;&quot;modules&quot;&lt;/span&gt; folder can easily be enabled as a comma-separated list in SOLR_MODULES variable
SOLR_MODULES=sql
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Same error:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.lang.ClassNotFoundException: solr.SQLHandler
	at java.net.URLClassLoader.findClass(URLClassLoader.java:471) ~[?:?]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:588) ~[?:?]
	at java.net.FactoryURLClassLoader.loadClass(URLClassLoader.java:899) ~[?:?]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:521) ~[?:?]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName0(Native Method) ~[?:?]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.forName(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:398) ~[?:?]
	at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:533) ~[?:?]
	... 55 more

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;




</comment>
                            <comment id="17515928" author="joel.bernstein" created="Fri, 1 Apr 2022 13:47:02 +0000"  >&lt;p&gt;My personal opinion is that -Dsolr.modules approach is nicer and we should consider using only this approach to add modules rather than editing files. Fewer things to maintain and test and command line options I believe will be the choice for most users.&lt;/p&gt;</comment>
                            <comment id="17515969" author="houston" created="Fri, 1 Apr 2022 15:34:22 +0000"  >&lt;p&gt;You don&apos;t have to edit solr.in.sh, it&apos;s just an environment variable, which is a much more standard way of enabling features in cloud services. So in the future we are actually trying to move forward in a way that all options are set via the solr.xml, system properties OR environment variables. Give users the choice.&lt;/p&gt;

&lt;p&gt;I also just tested the solr docker image, using &lt;tt&gt;--env SOLR_MODULES=sql&lt;/tt&gt; and it worked just fine. I think it&apos;s more an issue with how you are using solr.in.sh&lt;/p&gt;</comment>
                            <comment id="17516002" author="joel.bernstein" created="Fri, 1 Apr 2022 16:35:42 +0000"  >&lt;p&gt;It&apos;s possible that there is an issue with how I edited the solr.in.sh. I basically uncommented the example and changed it to sql though. Possibly the example format needs to be changed.&lt;/p&gt;</comment>
                            <comment id="17516065" author="janhoy" created="Fri, 1 Apr 2022 18:29:58 +0000"  >&lt;p&gt;Make sure you are editing the correct solr.in.sh file. When running ad-hoc locally it&apos;s the one in &amp;lt;unpack-dir&amp;gt;/bin but when installed with installer it is /etc/defaults/solr.in.sh.&lt;/p&gt;

&lt;p&gt;You can simply set it in your shell as well&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
export SOLR_MODULES=sql
bin/solr start -c&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;or&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SOLR_MODULES=sql bin/solr start -c &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17516910" author="jira-bot" created="Mon, 4 Apr 2022 15:46:19 +0000"  >&lt;p&gt;Commit b7bd00188e33330a693619a0ae9f7a54dc6d73ea in solr&apos;s branch refs/heads/main from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=b7bd00188e3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=b7bd00188e3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16131&quot; title=&quot;sql module cannot load Calcite driver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16131&quot;&gt;&lt;del&gt;SOLR-16131&lt;/del&gt;&lt;/a&gt;: Fix class loader for jdbcStream (#783)&lt;/p&gt;

&lt;p&gt;This sets the jetty thread&apos;s contextClassLoader to the Solr core&apos;s resourceLoader&apos;s classLoader for all Solr requests.&lt;/p&gt;</comment>
                            <comment id="17516912" author="jira-bot" created="Mon, 4 Apr 2022 15:50:07 +0000"  >&lt;p&gt;Commit 0415cd6eb97f3b54b9cfa482dde6e4cceb546f64 in solr&apos;s branch refs/heads/branch_9x from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=0415cd6eb97&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=0415cd6eb97&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16131&quot; title=&quot;sql module cannot load Calcite driver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16131&quot;&gt;&lt;del&gt;SOLR-16131&lt;/del&gt;&lt;/a&gt;: Fix class loader for jdbcStream (#783)&lt;/p&gt;

&lt;p&gt;This sets the jetty thread&apos;s contextClassLoader to the Solr core&apos;s resourceLoader&apos;s classLoader for all Solr requests.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit b7bd00188e33330a693619a0ae9f7a54dc6d73ea)&lt;/p&gt;</comment>
                            <comment id="17516916" author="jira-bot" created="Mon, 4 Apr 2022 15:53:49 +0000"  >&lt;p&gt;Commit 332485f92f3c1110efe14f0144a1ffdfc68d65e3 in solr&apos;s branch refs/heads/branch_9_0 from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=332485f92f3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=332485f92f3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16131&quot; title=&quot;sql module cannot load Calcite driver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16131&quot;&gt;&lt;del&gt;SOLR-16131&lt;/del&gt;&lt;/a&gt;: Fix class loader for jdbcStream (#783)&lt;/p&gt;

&lt;p&gt;This sets the jetty thread&apos;s contextClassLoader to the Solr core&apos;s resourceLoader&apos;s classLoader for all Solr requests.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit b7bd00188e33330a693619a0ae9f7a54dc6d73ea)&lt;/p&gt;</comment>
                            <comment id="17535439" author="janhoy" created="Thu, 12 May 2022 00:26:28 +0000"  >&lt;p&gt;Closing after the 9.0.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13421793">SOLR-15904</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z110cw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>