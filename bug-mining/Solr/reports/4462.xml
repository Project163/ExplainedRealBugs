<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:43:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-14223] PublicKeyHandler consumes a lot of entropy during tests</title>
                <link>https://issues.apache.org/jira/browse/SOLR-14223</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;After the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12354&quot; title=&quot;org.apache.solr.security.PKIAuthenticationPlugin does not check response code when retrieving remotePublicKey&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12354&quot;&gt;&lt;del&gt;SOLR-12354&lt;/del&gt;&lt;/a&gt; to eagerly create a &lt;tt&gt;PublicKeyHandler&lt;/tt&gt; for the CoreContainer, the creation of the underlying &lt;tt&gt;RSAKeyPair&lt;/tt&gt; uses &lt;tt&gt;SecureRandom&lt;/tt&gt; to generate primes. This eats up a lot of system entropy and can slow down tests significantly (I observed it adding 10s to an individual test).&lt;/p&gt;

&lt;p&gt;Similar to what we do for SSL config for tests, we can swap in a non blocking implementation of SecureRandom for the key pair generation to allow multiple tests to run better in parallel. Primality testing with BigInteger is also slow, so I&apos;m not sure how much total speedup we can get here, maybe it&apos;s worth checking if there are faster implementations out there in other libraries.&lt;/p&gt;

&lt;p&gt;In production cases, this also blocks creation of all cores. We should only create the Handler if necessary, i.e. if the existing authn/z tell us that they won&apos;t support internode requests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13281823">SOLR-14223</key>
            <summary>PublicKeyHandler consumes a lot of entropy during tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mdrob">Mike Drob</assignee>
                                    <reporter username="mdrob">Mike Drob</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Jan 2020 00:01:31 +0000</created>
                <updated>Fri, 6 Jan 2023 20:20:26 +0000</updated>
                            <resolved>Mon, 24 Feb 2020 20:07:33 +0000</resolved>
                                    <version>7.4</version>
                    <version>8.0</version>
                                    <fixVersion>9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="7200">2h</timespent>
                                <comments>
                            <comment id="17024777" author="mdrob" created="Tue, 28 Jan 2020 00:02:25 +0000"  >&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=varun&quot; class=&quot;user-hover&quot; rel=&quot;varun&quot;&gt;varun&lt;/a&gt; - Interested in your thoughts since you were active on the original issue.&lt;/p&gt;</comment>
                            <comment id="17031847" author="mdrob" created="Thu, 6 Feb 2020 18:27:58 +0000"  >&lt;p&gt;Based on &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rcmuir&quot; class=&quot;user-hover&quot; rel=&quot;rcmuir&quot;&gt;rcmuir&lt;/a&gt;&apos;s suggestions, we can read a key from disk instead of generating a new one each time in our tests - this has the advantage of skipping the entropy consumption and also the expensive primality testing. PR is ready for final review if anybody is interested in taking a look.&lt;/p&gt;</comment>
                            <comment id="17043804" author="jira-bot" created="Mon, 24 Feb 2020 20:07:28 +0000"  >&lt;p&gt;Commit 1770797387d761706c6d93253a3759d885f662c4 in lucene-solr&apos;s branch refs/heads/master from Mike&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=1770797&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=1770797&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14223&quot; title=&quot;PublicKeyHandler consumes a lot of entropy during tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14223&quot;&gt;&lt;del&gt;SOLR-14223&lt;/del&gt;&lt;/a&gt; Create RSAKeyPair from disk (#1217)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Create properties for PublicKeyHandler to read existing keys from disk&lt;/li&gt;
	&lt;li&gt;Move pregenerated keys from core/test-files to test-framework&lt;/li&gt;
	&lt;li&gt;Update tests to use existing keys instead of new keys each run&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17051522" author="jira-bot" created="Wed, 4 Mar 2020 18:50:39 +0000"  >&lt;p&gt;Commit dd9b9f2f7f26ecaec3e3bc1e8a0ddfc0f3e72aac in lucene-solr&apos;s branch refs/heads/master from Mike Drob&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=dd9b9f2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=dd9b9f2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14223&quot; title=&quot;PublicKeyHandler consumes a lot of entropy during tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14223&quot;&gt;&lt;del&gt;SOLR-14223&lt;/del&gt;&lt;/a&gt; Fix tests for windows&lt;/p&gt;</comment>
                            <comment id="17535680" author="janhoy" created="Thu, 12 May 2022 00:26:53 +0000"  >&lt;p&gt;Closing after the 9.0.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13517081">SOLR-16613</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0awoo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>