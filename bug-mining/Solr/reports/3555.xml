<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:25:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-2715] TestJMXSolrIntegration fails</title>
                <link>https://issues.apache.org/jira/browse/SOLR-2715</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Running the tests, this test fails (in a non-reproducible way). There might be some sort of timing issue here.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12519167">SOLR-2715</key>
            <summary>TestJMXSolrIntegration fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Aug 2011 18:19:46 +0000</created>
                <updated>Thu, 22 Feb 2018 18:30:34 +0000</updated>
                                            <version>3.4</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13086492" author="rcmuir" created="Wed, 17 Aug 2011 18:20:03 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    [junit] Testsuite: org.apache.solr.core.TestJmxIntegration
    [junit] Testcase: testJmxOnCoreReload(org.apache.solr.core.TestJmxIntegration):	FAILED
    [junit] Number of registered MBeans is not the same as info registry size expected:&amp;lt;56&amp;gt; but was:&amp;lt;50&amp;gt;
    [junit] junit.framework.AssertionFailedError: Number of registered MBeans is not the same as info registry size expected:&amp;lt;56&amp;gt; but was:&amp;lt;50&amp;gt;
    [junit] 	at org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1339)
    [junit] 	at org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1241)
    [junit] 	at org.apache.solr.core.TestJmxIntegration.testJmxOnCoreReload(TestJmxIntegration.java:137)
    [junit] 
    [junit] 
    [junit] Tests run: 3, Failures: 1, Errors: 0, Time elapsed: 2.158 sec
    [junit] 
    [junit] ------------- Standard Error -----------------
    [junit] NOTE: reproduce with: ant test -Dtestcase=TestJmxIntegration -Dtestmethod=testJmxOnCoreReload -Dtests.seed=-4e5812346ffee146:-268851c422fba7f6:-55d2921d6d3e0d8d
    [junit] NOTE: test params are: locale=ms, timezone=America/Recife
    [junit] NOTE: all tests run in this JVM:
    [junit] [MinimalSchemaTest, SolrInfoMBeanTest, TestArabicFilters, TestBrazilianStemFilterFactory, TestDelimitedPayloadTokenFilterFactory, TestGermanMinimalStemFilterFactory, TestGreekStemFilterFactory, TestHyphenatedWordsFilter, TestIndonesianStemFilterFactory, TestReversedWildcardFilterFactory, TestShingleFilterFactory, TestThaiWordFilterFactory, RequestHandlersTest, TestJmxIntegration]
    [junit] NOTE: Linux 2.6.38-10-generic amd64/Sun Microsystems Inc. 1.6.0_24 (64-bit)/cpus=8,threads=1,free=249053128,total=350289920
    [junit] ------------- ---------------- ---------------
    [junit] TEST org.apache.solr.core.TestJmxIntegration FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13086500" author="markrmiller@gmail.com" created="Wed, 17 Aug 2011 18:34:36 +0000"  >&lt;p&gt;I see this too - I think I put a pause in there once before to make it go away - but now I have this faster computer and I still see it sometimes. If I remember right, something from jmx is asyncly taking too long and the test assumes its not async.&lt;/p&gt;</comment>
                            <comment id="13114684" author="markrmiller@gmail.com" created="Mon, 26 Sep 2011 14:05:15 +0000"  >&lt;p&gt;I did put a pause, but it got refactored out - looks like it still needs one for some devs. Something going on here is async.&lt;/p&gt;</comment>
                            <comment id="13129764" author="steve_rowe" created="Tue, 18 Oct 2011 14:40:58 +0000"  >&lt;p&gt;This shows up regularly on Jenkins, both trunk and branch_3x, e.g. &lt;a href=&quot;https://builds.apache.org/job/Lucene-Solr-tests-only-trunk-java7/656/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Lucene-Solr-tests-only-trunk-java7/656/&lt;/a&gt;, &lt;a href=&quot;https://builds.apache.org/job/Lucene-Solr-tests-only-3.x/10891/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Lucene-Solr-tests-only-3.x/10891/&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13141918" author="rcmuir" created="Wed, 2 Nov 2011 04:42:09 +0000"  >&lt;p&gt;Also this test writes lucene indexes to /solr/core/src/test-files/solr/data.&lt;/p&gt;

&lt;p&gt;This folder is a &lt;b&gt;source folder&lt;/b&gt;, but is svn ignored, and not cleaned up by ant clean.&lt;/p&gt;

&lt;p&gt;The fact that it does this is extremely confusing if you change the index format.&lt;/p&gt;</comment>
                            <comment id="13264192" author="gbowyer@fastmail.co.uk" created="Sat, 28 Apr 2012 01:34:45 +0000"  >&lt;p&gt;Could this be down to the fork mode on the test, since the platform mbean server is shared across all tests and thus not reinitialised ?&lt;/p&gt;</comment>
                            <comment id="13725815" author="hossman" created="Wed, 31 Jul 2013 23:14:21 +0000"  >&lt;p&gt;Since i got sucked into looking at the JMX tests yesterday, i spent 24+ hours digging into this too see if i could resolve it as well.&lt;/p&gt;

&lt;p&gt;After re-working hte test to do an apples to apples test instead of comparing JMX with the infoRegistery (to decouple from the problems mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5095&quot; title=&quot;SolrCore.infoRegistry needs overhauled with some form of &amp;quot;namespacing&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5095&quot;&gt;SOLR-5095&lt;/a&gt;) i was still seeing extremely sporadic failures (off by one) from the this reload test.&lt;/p&gt;

&lt;p&gt;at first i thought perhaps this was a timing issue related to core reload blocking and updated the test accordingly &amp;#8211; but that didn&apos;t seem to have any effect.  Then i realized that there were some overlapping searchers happening in the test (not sure why exactly: no commits happening) and i realized that since we register searchers with multiple names (&quot;currentSearcher&quot; for general monitoring and &quot;Searcher@&amp;lt;id&amp;gt;&quot; for specific checks) that could cause a problem during the overlap period.  When i excluded them from the count, i couldn&apos;t reproduce those failures anymore, but i did start seeing InstanceNotFoundException exceptions when looking at caches &amp;#8211; which also makes sense in an onDeck searcher situation since it also re-registers the caches.&lt;/p&gt;

&lt;p&gt;So i &lt;b&gt;think&lt;/b&gt; this patch should get things to the point where the meat of the goal (ensuring everything is reregistered after core reload) is still testted, but we shoulnd&apos;t get sporadic failures.&lt;/p&gt;

&lt;p&gt;would appreciate if folks could let me know if they can get any failures from this patch...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ant test -Dtests.failfast=yes -Dtests.iters=10000 -Dtestcase=TestJmxIntegration -Dtests.method=testJmxOnCoreReload\*
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16099851" author="jira-bot" created="Tue, 25 Jul 2017 10:43:41 +0000"  >&lt;p&gt;Commit 10fc0d75d784a620822079f09783891f5931e4c9 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=10fc0d7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=10fc0d7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2715&quot; title=&quot;TestJMXSolrIntegration fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2715&quot;&gt;SOLR-2715&lt;/a&gt;: turn @Ignore into @AwaitsFix&lt;/p&gt;</comment>
                            <comment id="16099852" author="jira-bot" created="Tue, 25 Jul 2017 10:44:30 +0000"  >&lt;p&gt;Commit 12ae76b019f311ea7209d191fd1ec13c3091a400 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=12ae76b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=12ae76b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2715&quot; title=&quot;TestJMXSolrIntegration fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2715&quot;&gt;SOLR-2715&lt;/a&gt;: turn @Ignore into @AwaitsFix&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12660826">SOLR-5095</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12660792">SOLR-5094</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12755819">SOLR-6750</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12595297" name="SOLR-2715.patch" size="10944" author="hossman" created="Wed, 31 Jul 2013 23:14:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2269</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 17 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03j13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18516</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>