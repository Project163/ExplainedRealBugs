<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:53:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6211] TrieDateField doesn&apos;t default to omitNorms=true</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6211</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3140&quot; title=&quot;Make omitNorms default for all numeric field types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3140&quot;&gt;&lt;del&gt;SOLR-3140&lt;/del&gt;&lt;/a&gt;, omitNorms=true was made the default for all primitive fields. But this is not the case for TrieDateField - if the fieldType config for a TrieDateField has no omitNorms set, the fields will have norms.&lt;/p&gt;

&lt;p&gt;It definitely looks like it was intended for TrieDateField to default to omitNorms=true, because in the example schema.xml, omitNorms=true was removed from tdate.&lt;/p&gt;

&lt;p&gt;I think TrieDateField.init() just needs to call super.init() to fix this. Right now it is initializing its wrapped field, but not itself.&lt;/p&gt;

&lt;p&gt;There were some changes around this in trunk in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5936&quot; title=&quot;Deprecate non-Trie-based numeric (and date) field types in 4.x and remove them from 5.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5936&quot;&gt;&lt;del&gt;SOLR-5936&lt;/del&gt;&lt;/a&gt;, but I haven&apos;t tested to see if it&apos;s fixed there. It might have covered this bug up even further, as there is now a test in PrimitiveFieldTypeTest for this, but it uses the overridden TrieDateField.hasProperty() method, which is not the way that SchemaField actually accesses the field type properties.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12724341">SOLR-6211</key>
            <summary>TrieDateField doesn&apos;t default to omitNorms=true</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sarowe">Steven Rowe</assignee>
                                    <reporter username="michaelryan">Michael Ryan</reporter>
                        <labels>
                    </labels>
                <created>Sun, 29 Jun 2014 12:52:49 +0000</created>
                <updated>Wed, 7 Feb 2018 17:26:59 +0000</updated>
                            <resolved>Mon, 30 Jun 2014 13:54:39 +0000</resolved>
                                    <version>4.9</version>
                                    <fixVersion>4.10</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14047153" author="steve_rowe" created="Sun, 29 Jun 2014 16:26:38 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;This is only a problem on branch_4x, because on trunk, for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5936&quot; title=&quot;Deprecate non-Trie-based numeric (and date) field types in 4.x and remove them from 5.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5936&quot;&gt;&lt;del&gt;SOLR-5936&lt;/del&gt;&lt;/a&gt;, I added the following to &lt;tt&gt;TrieDateField&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Override
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; hasProperty(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; p) {
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; wrappedField.hasProperty(p);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think the above should be added to branch_4x &lt;tt&gt;TrieDateField&lt;/tt&gt; too, rather than calling &lt;tt&gt;super.init()&lt;/tt&gt; from &lt;tt&gt;init()&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;On trunk &lt;tt&gt;PrimitiveFieldTypeTest.testDefaultOmitNorms()&lt;/tt&gt; explicitly tests that &lt;tt&gt;TrieDateField&lt;/tt&gt; has the &lt;tt&gt;OMIT_NORMS&lt;/tt&gt; property under schema version 1.5, but not on branch_4x - we should add all Trie fields to that test on both branch_4x and trunk.&lt;/p&gt;

&lt;p&gt;I&apos;ll work up a patch.&lt;/p&gt;</comment>
                            <comment id="14047609" author="steve_rowe" created="Mon, 30 Jun 2014 12:28:15 +0000"  >&lt;p&gt;branch_4x patch adds overridden &lt;tt&gt;TrieDateField.hasProperty()&lt;/tt&gt; method, as mentioned in my previous comment.  Also adds overridden &lt;tt&gt;TrieDateField.isMultiValued()&lt;/tt&gt; method, which suffered the same problem (not forwarding calls to the wrapped implementation).&lt;/p&gt;

&lt;p&gt;Both patches add all Trie fields to &lt;tt&gt;PrimitiveFieldTypeTest.testDefaultOmitNorms()&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Committing shortly.&lt;/p&gt;</comment>
                            <comment id="14047660" author="jira-bot" created="Mon, 30 Jun 2014 13:43:26 +0000"  >&lt;p&gt;Commit 1606734 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1606734&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1606734&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6211&quot; title=&quot;TrieDateField doesn&amp;#39;t default to omitNorms=true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6211&quot;&gt;&lt;del&gt;SOLR-6211&lt;/del&gt;&lt;/a&gt;: TrieDateField doesn&apos;t default to omitNorms=true.&lt;/p&gt;</comment>
                            <comment id="14047669" author="jira-bot" created="Mon, 30 Jun 2014 13:52:55 +0000"  >&lt;p&gt;Commit 1606741 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1606741&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1606741&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6211&quot; title=&quot;TrieDateField doesn&amp;#39;t default to omitNorms=true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6211&quot;&gt;&lt;del&gt;SOLR-6211&lt;/del&gt;&lt;/a&gt;: TrieDateField doesn&apos;t default to omitNorms=true. (merged trunk r1606734)&lt;/p&gt;</comment>
                            <comment id="14047671" author="steve_rowe" created="Mon, 30 Jun 2014 13:54:39 +0000"  >&lt;p&gt;Committed to trunk and branch_4x.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12752814">SOLR-6704</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12543146">SOLR-3140</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12705494">SOLR-5936</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12653145" name="SOLR-6211-branch_4x.patch" size="4001" author="sarowe" created="Mon, 30 Jun 2014 12:28:15 +0000"/>
                            <attachment id="12653144" name="SOLR-6211-trunk.patch" size="1670" author="sarowe" created="Mon, 30 Jun 2014 12:28:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>402524</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xa7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>402591</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>