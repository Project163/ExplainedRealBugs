<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:35:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4605] Rollback does not work correctly.</title>
                <link>https://issues.apache.org/jira/browse/SOLR-4605</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;&lt;a href=&quot;http://lucene.472066.n3.nabble.com/Solr-4-1-4-2-SolrException-Error-opening-new-searcher-td4046543.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://lucene.472066.n3.nabble.com/Solr-4-1-4-2-SolrException-Error-opening-new-searcher-td4046543.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I wrote a simple test to reproduce a very similar stack trace to the above issue, where only some line numbers differences due to Solr 4.1 vs Solr 4.2.&lt;/p&gt;


&lt;p&gt;&lt;b&gt;Source of Exception&lt;/b&gt;&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://svn.apache.org/viewvc/lucene/dev/tags/lucene_solr_4_1_0/solr/core/src/java/org/apache/solr/core/SolrCore.java?view=markup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/lucene/dev/tags/lucene_solr_4_1_0/solr/core/src/java/org/apache/solr/core/SolrCore.java?view=markup&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://svn.apache.org/viewvc/lucene/dev/tags/lucene_solr_4_2_0/solr/core/src/java/org/apache/solr/core/SolrCore.java?view=markup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/lucene/dev/tags/lucene_solr_4_2_0/solr/core/src/java/org/apache/solr/core/SolrCore.java?view=markup&lt;/a&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 
&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SolrException(SolrException.ErrorCode.SERVER_ERROR, &lt;span class=&quot;code-quote&quot;&gt;&quot;Error opening &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; searcher&quot;&lt;/span&gt;, e);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;




&lt;p&gt;Any ideas as to why the following happens?  Any help would be very appreciated.&lt;/p&gt;




&lt;ul&gt;
	&lt;li&gt;&lt;b&gt;The test case:&lt;/b&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void documentCommitAndRollbackTest() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {

        &lt;span class=&quot;code-comment&quot;&gt;// Fix:  SolrException: Error opening &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; searcher
&lt;/span&gt;
        server.rollback();
        server.commit();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;



&lt;ul&gt;
	&lt;li&gt;&lt;b&gt;The similar stack trace (Which is repeated twice):&lt;/b&gt;
&lt;blockquote&gt;

&lt;p&gt;Mar 15, 2013 3:48:09 PM org.apache.solr.common.SolrException log&lt;br/&gt;
SEVERE: org.apache.solr.common.SolrException: Error opening new searcher&lt;br/&gt;
        at org.apache.solr.core.SolrCore.openNewSearcher(SolrCore.java:1415)&lt;br/&gt;
        at org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:1527)&lt;br/&gt;
        at org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:1304)&lt;br/&gt;
        at org.apache.solr.update.DirectUpdateHandler2.commit(DirectUpdateHandler2.java:570)&lt;br/&gt;
        at org.apache.solr.update.processor.RunUpdateProcessor.processCommit(RunUpdateProcessorFactory.java:95)&lt;br/&gt;
        at org.apache.solr.update.processor.UpdateRequestProcessor.processCommit(UpdateRequestProcessor.java:64)&lt;br/&gt;
        at org.apache.solr.update.processor.DistributedUpdateProcessor.processCommit(DistributedUpdateProcessor.java:1055)&lt;br/&gt;
        at org.apache.solr.update.processor.LogUpdateProcessor.processCommit(LogUpdateProcessorFactory.java:157)&lt;br/&gt;
        at org.apache.solr.handler.RequestHandlerUtils.handleCommit(RequestHandlerUtils.java:69)&lt;br/&gt;
        at org.apache.solr.handler.ContentStreamHandlerBase.handleRequestBody(ContentStreamHandlerBase.java:68)&lt;br/&gt;
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135)&lt;br/&gt;
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1797)&lt;br/&gt;
        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:637)&lt;br/&gt;
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:343)&lt;br/&gt;
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:141)&lt;br/&gt;
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)&lt;br/&gt;
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)&lt;br/&gt;
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)&lt;br/&gt;
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)&lt;br/&gt;
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)&lt;br/&gt;
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)&lt;br/&gt;
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)&lt;br/&gt;
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)&lt;br/&gt;
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)&lt;br/&gt;
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)&lt;br/&gt;
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)&lt;br/&gt;
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:722)&lt;br/&gt;
Caused by: org.apache.lucene.store.AlreadyClosedException: this IndexWriter is closed&lt;br/&gt;
        at org.apache.lucene.index.IndexWriter.ensureOpen(IndexWriter.java:583)&lt;br/&gt;
        at org.apache.lucene.index.IndexWriter.ensureOpen(IndexWriter.java:597)&lt;br/&gt;
        at org.apache.lucene.index.IndexWriter.nrtIsCurrent(IndexWriter.java:4143)&lt;br/&gt;
        at org.apache.lucene.index.StandardDirectoryReader.doOpenFromWriter(StandardDirectoryReader.java:266)&lt;br/&gt;
        at org.apache.lucene.index.StandardDirectoryReader.doOpenIfChanged(StandardDirectoryReader.java:245)&lt;br/&gt;
        at org.apache.lucene.index.StandardDirectoryReader.doOpenIfChanged(StandardDirectoryReader.java:235)&lt;br/&gt;
        at org.apache.lucene.index.DirectoryReader.openIfChanged(DirectoryReader.java:169)&lt;br/&gt;
        at org.apache.solr.core.SolrCore.openNewSearcher(SolrCore.java:1360)&lt;br/&gt;
        ... 29 more&lt;/p&gt;


&lt;/blockquote&gt;&lt;/li&gt;
&lt;/ul&gt;




&lt;ul&gt;
	&lt;li&gt;&lt;b&gt;The test class:&lt;/b&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; test;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.Serializable;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Date;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.List;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Locale;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.UUID;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; junit.framework.Assert;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.solr.client.solrj.SolrQuery;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.solr.client.solrj.beans.Field;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.solr.client.solrj.impl.BinaryRequestWriter;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.solr.client.solrj.impl.HttpSolrServer;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.solr.client.solrj.response.QueryResponse;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.solr.client.solrj.response.UpdateResponse;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.After;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.Before;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.Test;


&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;SolrJBeanTest {

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; HttpSolrServer server;

    &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; {

        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; url = &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/solr/collection1&quot;&lt;/span&gt;;
&lt;/span&gt;
        server = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HttpSolrServer(url);

         server.setRequestWriter(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BinaryRequestWriter());
&lt;span class=&quot;code-comment&quot;&gt;//         server.setParser(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; XMLResponseParser()); // binary parser is used by &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
&lt;/span&gt;
        server.setSoTimeout(5000); &lt;span class=&quot;code-comment&quot;&gt;// socket read timeout
&lt;/span&gt;        server.setConnectionTimeout(30000);
        server.setDefaultMaxConnectionsPerHost(100);
        server.setMaxTotalConnections(100);
        server.setFollowRedirects(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;); &lt;span class=&quot;code-comment&quot;&gt;// defaults to &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// allowCompression defaults to &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;.
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// Server side must support gzip or deflate &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; to have any effect.
&lt;/span&gt;        server.setAllowCompression(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        server.setMaxRetries(1); &lt;span class=&quot;code-comment&quot;&gt;// defaults to 0.  &amp;gt; 1 not recommended.
&lt;/span&gt;
    }

    @Before
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setUp() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {

        UpdateResponse updateResponse = server.deleteByQuery(&lt;span class=&quot;code-quote&quot;&gt;&quot;type_s:&quot;&lt;/span&gt; + &lt;span class=&quot;code-quote&quot;&gt;&quot;MyTestBean&quot;&lt;/span&gt;);
        Assert.assertEquals(0, updateResponse.getStatus());

        commit();

    }


    @After
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void tearDown() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {

        UpdateResponse updateResponse = server.deleteByQuery(&lt;span class=&quot;code-quote&quot;&gt;&quot;type_s:&quot;&lt;/span&gt; + &lt;span class=&quot;code-quote&quot;&gt;&quot;MyTestBean&quot;&lt;/span&gt;);
        Assert.assertEquals(0, updateResponse.getStatus());

        commit();

        List&amp;lt;MyTestBean&amp;gt; beans = getTestBeans();
        Assert.assertEquals(0, beans.size());

    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void commit() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        UpdateResponse updateResponseForCommit = server.commit();
        Assert.assertEquals(0, updateResponseForCommit.getStatus());
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void rollback() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        UpdateResponse updateResponseForCommit = server.rollback();
        Assert.assertEquals(0, updateResponseForCommit.getStatus());
    }


    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void documentCommitAndRollbackTest() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {

        &lt;span class=&quot;code-comment&quot;&gt;// Fix:  SolrException: Error opening &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; searcher
&lt;/span&gt;
        server.rollback();
        server.commit();
    }

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void addBeanTest() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {

        MyTestBean myTestBean = createTestBean(&lt;span class=&quot;code-quote&quot;&gt;&quot;addBeanTest&quot;&lt;/span&gt;);
        UpdateResponse updateResponse = server.addBean(myTestBean);
        Assert.assertEquals(0, updateResponse.getStatus());

        &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(1000);

        &lt;span class=&quot;code-comment&quot;&gt;// No Bean Found
&lt;/span&gt;        {
            MyTestBean myTestBeanStored = getTestBean(myTestBean.getId());
            Assert.assertNull(myTestBeanStored);
        }

        UpdateResponse updateResponseForCommit = server.commit();
        Assert.assertEquals(0, updateResponseForCommit.getStatus());

        &lt;span class=&quot;code-comment&quot;&gt;// Bean Found
&lt;/span&gt;        {
            MyTestBean myTestBeanStored = getTestBean(myTestBean.getId());
            Assert.assertNotNull(myTestBeanStored);

            Assert.assertEquals(myTestBean.getId(), myTestBeanStored.getId());
            Assert.assertEquals(myTestBean.getType(), myTestBeanStored.getType());
            Assert.assertEquals(myTestBean.getValue(), myTestBeanStored.getValue());
            Assert.assertEquals(myTestBean.getCreatedDate(), myTestBeanStored.getCreatedDate());

            Assert.assertEquals(-1L, myTestBean.get_version_().longValue());
            Assert.assertTrue(myTestBeanStored.get_version_() &amp;gt; 0);
        }

    }

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void addBeanWithRollbackTest() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {

        MyTestBean myTestBean = createTestBean(&lt;span class=&quot;code-quote&quot;&gt;&quot;addBeanTest&quot;&lt;/span&gt;);
        UpdateResponse updateResponse = server.addBean(myTestBean);
        Assert.assertEquals(0, updateResponse.getStatus());

        &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(1000);

        &lt;span class=&quot;code-comment&quot;&gt;// No Bean Found
&lt;/span&gt;        {
            MyTestBean myTestBeanStored = getTestBean(myTestBean.getId());
            Assert.assertNull(myTestBeanStored);
        }

        UpdateResponse updateResponseForCommit = server.rollback();
        Assert.assertEquals(0, updateResponseForCommit.getStatus());

        &lt;span class=&quot;code-comment&quot;&gt;// No Bean Found
&lt;/span&gt;        {
            MyTestBean myTestBeanStored = getTestBean(myTestBean.getId());
            Assert.assertNull(myTestBeanStored);
        }

    }


    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; MyTestBean createTestBean(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; value) {
        MyTestBean myTestBean = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MyTestBean();
        myTestBean.setId(UUID.randomUUID().toString().toLowerCase(Locale.ENGLISH));
        myTestBean.setType(&lt;span class=&quot;code-quote&quot;&gt;&quot;MyTestBean&quot;&lt;/span&gt;);
        myTestBean.setCreatedDate(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Date());
        myTestBean.setValue(value);
        myTestBean.set_version_(-1L);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; myTestBean;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;MyTestBean&amp;gt; getTestBeans() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; getTestBeans(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; MyTestBean getTestBean(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; id) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        List&amp;lt;MyTestBean&amp;gt; beans = getTestBeans(id, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (beans == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || beans.size() == 0) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; beans.get(0);
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;MyTestBean&amp;gt; getTestBeans(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; id, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; value) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {

        SolrQuery solrQuery = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SolrQuery();
        solrQuery.setQuery(&lt;span class=&quot;code-quote&quot;&gt;&quot;*:*&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (id != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            solrQuery.addFilterQuery(&lt;span class=&quot;code-quote&quot;&gt;&quot;id:&quot;&lt;/span&gt; + id);
        }
        solrQuery.addFilterQuery(&lt;span class=&quot;code-quote&quot;&gt;&quot;type_s:&quot;&lt;/span&gt; + &lt;span class=&quot;code-quote&quot;&gt;&quot;MyTestBean&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (value != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            solrQuery.addFilterQuery(&lt;span class=&quot;code-quote&quot;&gt;&quot;value:&quot;&lt;/span&gt; + value);
        }

        QueryResponse queryResponse = server.query(solrQuery);

        List&amp;lt;MyTestBean&amp;gt; beans = queryResponse.getBeans(MyTestBean.class);

        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; beans;

    }


    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MyTestBean &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Serializable {

        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; serialVersionUID = 1L;

        @Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;)
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; id;

        @Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;type_s&quot;&lt;/span&gt;)
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; type;

        @Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;value_s&quot;&lt;/span&gt;)
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; value;

        @Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;created_dt&quot;&lt;/span&gt;)
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Date createdDate;

        @Field(&lt;span class=&quot;code-quote&quot;&gt;&quot;_version_&quot;&lt;/span&gt;)
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; _version_;

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; MyTestBean() {

        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getId() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; id;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setId(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; id) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.id = id;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getType() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; type;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setType(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; type) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.type = type;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getValue() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; value;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setValue(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; value) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.value = value;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Date getCreatedDate() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; createdDate;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setCreatedDate(Date createdDate) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.createdDate = createdDate;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; get_version_() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; _version_;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void set_version_(&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; _version_) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;._version_ = _version_;
        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;MyTestBean [id=&quot;&lt;/span&gt; + id + &lt;span class=&quot;code-quote&quot;&gt;&quot;, type=&quot;&lt;/span&gt; + type + &lt;span class=&quot;code-quote&quot;&gt;&quot;, value=&quot;&lt;/span&gt; + value + &lt;span class=&quot;code-quote&quot;&gt;&quot;, createdDate=&quot;&lt;/span&gt; + createdDate
                    + &lt;span class=&quot;code-quote&quot;&gt;&quot;, _version_=&quot;&lt;/span&gt; + _version_ + &lt;span class=&quot;code-quote&quot;&gt;&quot;]&quot;&lt;/span&gt;;
        }

    }

}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>&lt;p&gt;Ubuntu 12.04.2 LTS&lt;/p&gt;</environment>
        <key id="12637483">SOLR-4605</key>
            <summary>Rollback does not work correctly.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="marks1900">Mark S</reporter>
                        <labels>
                            <label>solrj</label>
                    </labels>
                <created>Mon, 18 Mar 2013 04:52:54 +0000</created>
                <updated>Mon, 9 May 2016 18:49:13 +0000</updated>
                            <resolved>Tue, 19 Mar 2013 23:36:05 +0000</resolved>
                                    <version>4.1</version>
                    <version>4.2</version>
                                    <fixVersion>4.2.1</fixVersion>
                    <fixVersion>4.3</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13604900" author="markrmiller@gmail.com" created="Mon, 18 Mar 2013 06:35:02 +0000"  >&lt;p&gt;patch attatched&lt;/p&gt;</comment>
                            <comment id="13605182" author="commit-tag-bot" created="Mon, 18 Mar 2013 14:57:07 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; Mark Robert Miller&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1457784&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1457784&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4605&quot; title=&quot;Rollback does not work correctly.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4605&quot;&gt;&lt;del&gt;SOLR-4605&lt;/del&gt;&lt;/a&gt;: Rollback does not work correctly.&lt;/p&gt;</comment>
                            <comment id="13605230" author="commit-tag-bot" created="Mon, 18 Mar 2013 15:52:33 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Mark Robert Miller&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1457812&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1457812&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4605&quot; title=&quot;Rollback does not work correctly.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4605&quot;&gt;&lt;del&gt;SOLR-4605&lt;/del&gt;&lt;/a&gt;: Rollback does not work correctly.&lt;/p&gt;</comment>
                            <comment id="13606127" author="commit-tag-bot" created="Tue, 19 Mar 2013 07:05:37 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Mark Robert Miller&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1458156&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1458156&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4604&quot; title=&quot;UpdateLog#init is over called on SolrCore#reload&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4604&quot;&gt;&lt;del&gt;SOLR-4604&lt;/del&gt;&lt;/a&gt;: Move CHANGES entry.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4605&quot; title=&quot;Rollback does not work correctly.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4605&quot;&gt;&lt;del&gt;SOLR-4605&lt;/del&gt;&lt;/a&gt;: Move CHANGES entry.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4609&quot; title=&quot;The Collections API should only send the reload command to ACTIVE cores.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4609&quot;&gt;&lt;del&gt;SOLR-4609&lt;/del&gt;&lt;/a&gt;: Move CHANGES entry.&lt;/p&gt;</comment>
                            <comment id="13606132" author="commit-tag-bot" created="Tue, 19 Mar 2013 07:05:55 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; Mark Robert Miller&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1458155&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1458155&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4604&quot; title=&quot;UpdateLog#init is over called on SolrCore#reload&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4604&quot;&gt;&lt;del&gt;SOLR-4604&lt;/del&gt;&lt;/a&gt;: Move CHANGES entry.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4605&quot; title=&quot;Rollback does not work correctly.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4605&quot;&gt;&lt;del&gt;SOLR-4605&lt;/del&gt;&lt;/a&gt;: Move CHANGES entry.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4609&quot; title=&quot;The Collections API should only send the reload command to ACTIVE cores.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4609&quot;&gt;&lt;del&gt;SOLR-4609&lt;/del&gt;&lt;/a&gt;: Move CHANGES entry.&lt;/p&gt;</comment>
                            <comment id="13654209" author="thetaphi" created="Fri, 10 May 2013 10:34:24 +0000"  >&lt;p&gt;Closed after release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12643115">SOLR-4733</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12574117" name="SOLR-4605.patch" size="6053" author="markrmiller@gmail.com" created="Mon, 18 Mar 2013 06:35:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>317974</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1iv73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>318315</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>