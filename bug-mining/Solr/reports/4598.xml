<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:46:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-14993] Unable to download zookeeper files of 1byte in size</title>
                <link>https://issues.apache.org/jira/browse/SOLR-14993</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When downloading a file from Zookeeper using the Solrj client, files of size 1 byte are ignored.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13339599">SOLR-14993</key>
            <summary>Unable to download zookeeper files of 1byte in size</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="erickerickson">Erick Erickson</assignee>
                                    <reporter username="alsofr">Allen Sooredoo</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Nov 2020 20:45:45 +0000</created>
                <updated>Wed, 24 Feb 2021 01:51:27 +0000</updated>
                            <resolved>Sun, 22 Nov 2020 14:25:03 +0000</resolved>
                                    <version>8.5.1</version>
                                    <fixVersion>8.8</fixVersion>
                                    <component>SolrCloud</component>
                    <component>SolrJ</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17229230" author="erickerickson" created="Tue, 10 Nov 2020 13:56:39 +0000"  >&lt;p&gt;What&apos;s the use-case here? And do you have any idea why? Or steps to reproduce? Or even a test program?&lt;/p&gt;</comment>
                            <comment id="17229875" author="alsofr" created="Wed, 11 Nov 2020 09:48:13 +0000"  >&lt;p&gt;Hi,&lt;br/&gt;
 &#160;&lt;br/&gt;
 sorry about that, I wanted to do a very quick fix in github and link it here, but it turns out I need much more time to write all the tests and submit a proper&#160;PR.&lt;br/&gt;
 &#160;&lt;br/&gt;
 Use case:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I add to every configset a file called id.txt which contains&#160;the id of the configset (positive integer)&lt;/li&gt;
	&lt;li&gt;When I want to update it (to add new synonyms for instance), I first use `zkClient.downloadConfig(configSetName,&#160;directory)` (Solrj) to download the configset and check the id inside the file before proceeding.&lt;br/&gt;
 &#160;&lt;br/&gt;
 Issue:&lt;/li&gt;
	&lt;li&gt;If the id fits on 1 byte, the file is created but its content is not downloaded because of this check:
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;private&#160;static&#160;int&#160;copyDataDown(SolrZkClient&#160;zkClient, String&#160;zkPath, File&#160;file) throws&#160;IOException, KeeperException, InterruptedException {&lt;br/&gt;
 &lt;font color=&quot;#d73a49&quot;&gt;byte&lt;/font&gt;[] data =&#160;zkClient.getData(zkPath, null, null, true);&lt;br/&gt;
 if (data !=&#160;null&#160;&amp;amp;&amp;amp; data.length&#160;&amp;gt;&#160;1) { // There are apparently basically empty ZNodes.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/solrj/src/java/org/apache/solr/common/cloud/ZkMaintenanceUtils.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/master/solr/solrj/src/java/org/apache/solr/common/cloud/ZkMaintenanceUtils.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
 Changing it to `data.length &amp;gt; 0` would solve my problem, however I may need more time to test that this &quot;empty ZNodes&quot; issue doesn&apos;t reappear as a side effect. Do those &quot;empty ZNodes&quot; have a size of 1 byte? Why not 0?&lt;br/&gt;
 &#160;&lt;br/&gt;
 I&apos;m curious if the check &amp;gt; 1 (instead of the expected &amp;gt;0) is a typo or an actual fix to a know problem. Do you have more information about that?&lt;br/&gt;
 &#160;&lt;/p&gt;</comment>
                            <comment id="17229973" author="erickerickson" created="Wed, 11 Nov 2020 13:03:32 +0000"  >&lt;p&gt;Hmmm, that really doesn&apos;t look right, why &amp;gt; 1 IDK (and I wrote it. Siiiggggh). &amp;gt; 0 makes more sense. I&apos;ll deal with it. For this case, I&apos;ll grab it.&lt;/p&gt;

&lt;p&gt;Thanks for sleuthing!&lt;/p&gt;

&lt;p&gt;As a work around you could make your IDs bigger, a hack to be sure...&lt;/p&gt;</comment>
                            <comment id="17229979" author="alsofr" created="Wed, 11 Nov 2020 13:27:50 +0000"  >&lt;p&gt;Thanks a lot.&lt;/p&gt;

&lt;p&gt;My current hack is to add a space after the id inside the file ( &quot;1 &quot;). That solves the issue for small values.&lt;/p&gt;</comment>
                            <comment id="17236951" author="jira-bot" created="Sun, 22 Nov 2020 14:23:57 +0000"  >&lt;p&gt;Commit 77a205387f697ed8bf86af2623b111ec11c8ac95 in lucene-solr&apos;s branch refs/heads/master from Erick Erickson&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=77a2053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=77a2053&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14993&quot; title=&quot;Unable to download zookeeper files of 1byte in size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14993&quot;&gt;&lt;del&gt;SOLR-14993&lt;/del&gt;&lt;/a&gt;: Unable to download zookeeper files of 1byte in size&lt;/p&gt;</comment>
                            <comment id="17236952" author="jira-bot" created="Sun, 22 Nov 2020 14:24:15 +0000"  >&lt;p&gt;Commit 12900a1078751ff593175a1034bb2371b3bf4cd1 in lucene-solr&apos;s branch refs/heads/branch_8x from Erick Erickson&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=12900a1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=12900a1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14993&quot; title=&quot;Unable to download zookeeper files of 1byte in size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14993&quot;&gt;&lt;del&gt;SOLR-14993&lt;/del&gt;&lt;/a&gt;: Unable to download zookeeper files of 1byte in size&lt;/p&gt;</comment>
                            <comment id="17289487" author="alsofr" created="Wed, 24 Feb 2021 01:51:27 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;sorry about that, I wanted to do a very quick fix in github and link it&lt;br/&gt;
here, but it turns out I need much more time to write all the tests and&lt;br/&gt;
submit a proper PR.&lt;/p&gt;

&lt;p&gt;Use case:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I add to every configset a file called id.txt which contains the id of&lt;br/&gt;
the configset (positive integer)&lt;/li&gt;
	&lt;li&gt;When I want to update it (to add new synonyms for instance), I first use `&lt;br/&gt;
zkClient.downloadConfig(configSetName, directory)` (Solrj) to download the&lt;br/&gt;
configset and check the id inside the file before proceeding.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Issue:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;If the id fits on 1 byte, the file is created by its content is not&lt;br/&gt;
downloaded because of this check:&lt;br/&gt;
```&lt;br/&gt;
private static int copyDataDown(SolrZkClient zkClient, String zkPath, File&lt;br/&gt;
file) throws IOException, KeeperException, InterruptedException { byte[]&lt;br/&gt;
data = zkClient.getData(zkPath, null, null, true); if (data != null &amp;amp;&amp;amp; data.&lt;br/&gt;
length &amp;gt; 1) { // There are apparently basically empty ZNodes. ```&lt;br/&gt;
Changing it to `data.length &amp;gt; 0` would solve my problem, however I may need&lt;br/&gt;
more time to test that this &quot;empty ZNodes&quot; issue doesn&apos;t reappear as a side&lt;br/&gt;
effect.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;What do you think?&lt;/p&gt;

&lt;p&gt;&amp;#8211;&lt;br/&gt;
Allen Sooredoo&lt;br/&gt;
Master of Science (M.Sc.)&lt;/p&gt;

&lt;p&gt;freiheit.com technologies gmbh&lt;br/&gt;
Budapester Stra&#223;e 45&lt;br/&gt;
20359 Hamburg / Germany&lt;br/&gt;
fon +49 40 / 890584-316&lt;br/&gt;
Hamburg HRB 70814&lt;/p&gt;

&lt;p&gt;&lt;b&gt;+++ Hamburg/ Germany + Lisbon/ Portugal +++&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.freiheit.com&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.freiheit.com&lt;/a&gt;&lt;br/&gt;
Follow us on LinkedIn&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://www.linkedin.com/company/freiheit-com-technologies-gmbh&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.linkedin.com/company/freiheit-com-technologies-gmbh&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;E2BF 91E0 5B29 D9F6 AA3F CE24 3D52 C42B 7D04 8487&lt;br/&gt;
Gesch&#228;ftsf&#252;hrer: Claudia Dietze, Stefan Richter&lt;/p&gt;


</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kexs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>