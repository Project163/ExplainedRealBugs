<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:22:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-10264] ManagedSynonymFilterFactory does not parse multi-term synonyms</title>
                <link>https://issues.apache.org/jira/browse/SOLR-10264</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The parser that the &lt;tt&gt;ManagedSynonymFilterFactory&lt;/tt&gt; uses to parse the JSON resource into a synonym map does not parse multi-term synonyms in the expected way.&lt;/p&gt;

&lt;p&gt;If the synonym &lt;/p&gt;
{&quot;foo bar&quot;:&quot;baz&quot;}
&lt;p&gt; is added to the managed resource, the expected behavior is that the multi-term synonym &quot;foo bar&quot; will be mapped to the synonym &quot;baz&quot;.&lt;/p&gt;

&lt;p&gt;In the &lt;tt&gt;analyze&lt;/tt&gt; method of &lt;tt&gt;SynonymMap.Parser&lt;/tt&gt;, multiple origin terms are concatenated with a separating &lt;tt&gt;SynonymMap.WORD_SEPARATOR&lt;/tt&gt;, but the &lt;tt&gt;analyze&lt;/tt&gt; method is not used by the parser in the &lt;tt&gt;ManagedSynonymFilterFactory&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;As a workaround, multi-term synonyms can be uploaded separated by a null character, i.e., uploading &lt;/p&gt;
{&quot;foo\u0000bar&quot;:&quot;baz&quot;}
&lt;p&gt; works.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13050040">SOLR-10264</key>
            <summary>ManagedSynonymFilterFactory does not parse multi-term synonyms</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cpoerschke">Christine Poerschke</assignee>
                                    <reporter username="joergr">J&#246;rg Rathlev</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Mar 2017 13:20:13 +0000</created>
                <updated>Sat, 8 Jun 2019 15:32:11 +0000</updated>
                            <resolved>Fri, 7 Apr 2017 15:18:32 +0000</resolved>
                                    <version>6.4.2</version>
                                    <fixVersion>6.6</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                    <component>Schema and Analysis</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15905256" author="joergr" created="Fri, 10 Mar 2017 15:27:03 +0000"  >&lt;p&gt;I&apos;ve attached a patch that modifies the ManagedSynonymParser to call the parent class&apos;s analyze method on the mapped terms.&lt;/p&gt;</comment>
                            <comment id="15906976" author="tboeghk" created="Mon, 13 Mar 2017 08:00:21 +0000"  >&lt;p&gt;+1 on this one. To be a little more open for extension, it would be great if the inner classes of the `ManagedSynonymFilterFactory` would be `protected` instead of `private`. Then, a caching implementation would be straight forward and we&apos;d contribute that one as well.&lt;/p&gt;</comment>
                            <comment id="15907037" author="mkhludnev" created="Mon, 13 Mar 2017 09:01:31 +0000"  >&lt;p&gt;I&apos;m sorry, but the patch lacks a test.  &lt;/p&gt;</comment>
                            <comment id="15907132" author="tboeghk" created="Mon, 13 Mar 2017 10:25:48 +0000"  >&lt;p&gt;Yeah well, that&apos;s a way to cut down contributions. We&apos;ll contribute a test later ...&lt;/p&gt;</comment>
                            <comment id="15907153" author="cpoerschke" created="Mon, 13 Mar 2017 10:41:56 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joergr&quot; class=&quot;user-hover&quot; rel=&quot;joergr&quot;&gt;joergr&lt;/a&gt; - thanks for opening this ticket with initial patch. It&apos;s totally fine for an initial patch to have no test.&lt;/p&gt;

&lt;p&gt;From a quick look &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/core/src/test/org/apache/solr/rest/schema/analysis/TestManagedSynonymFilterFactory.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;TestManagedSynonymFilterFactory&lt;/a&gt; might be a good home for the test.&lt;/p&gt;</comment>
                            <comment id="15928455" author="cpoerschke" created="Thu, 16 Mar 2017 17:16:36 +0000"  >&lt;p&gt;Attaching partial (not yet multi-term) test changes.&lt;/p&gt;</comment>
                            <comment id="15933001" author="joergr" created="Mon, 20 Mar 2017 16:38:07 +0000"  >&lt;p&gt;Thank you, Christine, that almost-complete test case was very helpful!&lt;/p&gt;

&lt;p&gt;I&apos;ve attached an updated patch with a working test case for multi-term origins.&lt;/p&gt;

&lt;p&gt;Compared to Christine&apos;s test, I&apos;ve changed it so that the multi-term origin is in the indexed document, and the single-term synonym in the query, because multi-term origins in the query are problematic for unrelated reasons.&lt;/p&gt;</comment>
                            <comment id="15933023" author="steve_rowe" created="Mon, 20 Mar 2017 16:47:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;multi-term origins in the query are problematic for unrelated reasons.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;FYI I committed &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9185&quot; title=&quot;Solr&amp;#39;s edismax and &amp;quot;Lucene&amp;quot;/standard query parsers should optionally not split on whitespace before sending terms to analysis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9185&quot;&gt;&lt;del&gt;SOLR-9185&lt;/del&gt;&lt;/a&gt; last week. It adds the &lt;tt&gt;sow&lt;/tt&gt; (split-on-whitespace) param to the edismax and standard/&quot;Lucene&quot; query parsers, which when set to &lt;tt&gt;false&lt;/tt&gt; will allow query-time multi-term origins.&lt;/p&gt;</comment>
                            <comment id="15934501" author="cpoerschke" created="Tue, 21 Mar 2017 11:25:16 +0000"  >&lt;p&gt;Attaching patch with slightly revised test, key differences compared to J&#246;rg&apos;s patch:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;the document is &lt;em&gt;not&lt;/em&gt; re-added after the core reload&lt;/li&gt;
	&lt;li&gt;multi-term or single-term origin or synonym is randomly decided&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;sow&lt;/tt&gt; (split-on-whitespace) is set to false as Steve suggested&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;However, for some reason this error is being hit&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;o.a.s.h.RequestHandlerBase org.apache.solr.search.QueryParserConfigurationException: Field &lt;span class=&quot;code-quote&quot;&gt;&apos;text&apos;&lt;/span&gt;: autoGeneratePhraseQueries == &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; is disallowed when sow/splitOnWhitespace == &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which is quite unexpected since firstly &lt;tt&gt;schema-rest.xml&lt;/tt&gt; was changed to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;fieldType name=&lt;span class=&quot;code-quote&quot;&gt;&quot;managed_en&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.TextField&quot;&lt;/span&gt; autoGeneratePhraseQueries=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and secondly the test itself doesn&apos;t actually search on the &lt;tt&gt;text&lt;/tt&gt; field?&lt;/p&gt;</comment>
                            <comment id="15936906" author="cpoerschke" created="Wed, 22 Mar 2017 18:44:59 +0000"  >&lt;p&gt;Dug a little further re: the &lt;tt&gt;sow&lt;/tt&gt; (split-on-whitespace) error encountered as per above and found at &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/core/src/test-files/solr/collection1/conf/schema-rest.xml#L623&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;schema-rest.xml#L623&lt;/a&gt; &lt;tt&gt;&amp;lt;defaultSearchField&amp;gt;text&amp;lt;/defaultSearchField&amp;gt;&lt;/tt&gt; which would partly explain the consideration of the &lt;tt&gt;text&lt;/tt&gt; field though not fully since the search is asking for the &lt;tt&gt;managed_en_field&lt;/tt&gt; field, hmm.&lt;/p&gt;</comment>
                            <comment id="15940052" author="cpoerschke" created="Fri, 24 Mar 2017 09:34:47 +0000"  >&lt;p&gt;from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10348&quot; title=&quot;unexpected sow=false interaction with defaultSearchField&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10348&quot;&gt;&lt;del&gt;SOLR-10348&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;The query &lt;tt&gt;managed_en_field:happy test&lt;/tt&gt;, with default field = &lt;tt&gt;text&lt;/tt&gt;, is interpreted by the standard query parser (and Lucene classic query parser) as &lt;tt&gt;managed_en_field:happy text:test&lt;/tt&gt;. If you want &lt;tt&gt;test&lt;/tt&gt; to also be against &lt;tt&gt;managed_en_field&lt;/tt&gt;, you have to enclose both words in parens: &lt;tt&gt;managed_en_field:(happy test)&lt;/tt&gt;.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="15949488" author="cpoerschke" created="Thu, 30 Mar 2017 17:44:06 +0000"  >&lt;p&gt;Attaching final(&amp;#63;) patch, will commit early next week or so if no further comments or concerns.&lt;/p&gt;</comment>
                            <comment id="15960689" author="jira-bot" created="Fri, 7 Apr 2017 12:29:29 +0000"  >&lt;p&gt;Commit adabfdd9c2a50b4141f485655df0d048df21bd23 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=adabfdd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=adabfdd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10264&quot; title=&quot;ManagedSynonymFilterFactory does not parse multi-term synonyms&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10264&quot;&gt;&lt;del&gt;SOLR-10264&lt;/del&gt;&lt;/a&gt;: Fixes multi-term synonym parsing in ManagedSynonymFilterFactory.&lt;br/&gt;
(J&#246;rg Rathlev, Steve Rowe, Christine Poerschke)&lt;/p&gt;</comment>
                            <comment id="15960867" author="jira-bot" created="Fri, 7 Apr 2017 14:19:33 +0000"  >&lt;p&gt;Commit 3ac32eea3509495256c4b74a695e798f783d7434 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=3ac32ee&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=3ac32ee&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10264&quot; title=&quot;ManagedSynonymFilterFactory does not parse multi-term synonyms&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10264&quot;&gt;&lt;del&gt;SOLR-10264&lt;/del&gt;&lt;/a&gt;: Fixes multi-term synonym parsing in ManagedSynonymFilterFactory.&lt;br/&gt;
(J&#246;rg Rathlev, Steve Rowe, Christine Poerschke)&lt;/p&gt;</comment>
                            <comment id="15960950" author="cpoerschke" created="Fri, 7 Apr 2017 15:18:33 +0000"  >&lt;p&gt;Thanks J&#246;rg and Steve!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13058371">SOLR-10348</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12859136" name="SOLR-10264-test.patch" size="3913" author="cpoerschke" created="Thu, 16 Mar 2017 17:16:36 +0000"/>
                            <attachment id="12861287" name="SOLR-10264.patch" size="6891" author="cpoerschke" created="Thu, 30 Mar 2017 17:44:06 +0000"/>
                            <attachment id="12859735" name="SOLR-10264.patch" size="6887" author="cpoerschke" created="Tue, 21 Mar 2017 11:25:16 +0000"/>
                            <attachment id="12859589" name="SOLR-10264.patch" size="6441" author="joergr" created="Mon, 20 Mar 2017 16:38:07 +0000"/>
                            <attachment id="12857337" name="SOLR-10264.patch" size="2214" author="joergr" created="Fri, 10 Mar 2017 15:27:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3b8s7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>