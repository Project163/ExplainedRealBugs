<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:46:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-14514] json.facets: method:stream is incompatible with allBuckets:true</title>
                <link>https://issues.apache.org/jira/browse/SOLR-14514</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;&lt;tt&gt;FacetFieldProcessorByEnumTermsStream&lt;/tt&gt; has never supported &lt;tt&gt;allBuckets:true&lt;/tt&gt; but it also doesn&apos;t fail outright if &lt;tt&gt;allBuckets:true&lt;/tt&gt; is specified &amp;#8211; instead the bucket is silently missing from the response.&lt;/p&gt;

&lt;p&gt;Given how the &lt;tt&gt;method&lt;/tt&gt; option is only used as a suggestion, and the actuall processor can change based on hueristics about the request, this means that the behavior of combining &lt;tt&gt;allBuckets:true&lt;/tt&gt; with &lt;tt&gt;method:stream&lt;/tt&gt; can vary depending on the other options specified &amp;#8211; notably the &lt;tt&gt;sort&lt;/tt&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;% curl -sS -X POST http://localhost:8983/solr/techproducts/query -d &apos;omitHeader=true&amp;amp;rows=0&amp;amp;q=*:*&amp;amp;json.facet={
  x : {
    type : terms,
    method: stream,
    field : manu_id_s,
    allBuckets : true,
    limit : 2,
    } }&apos;
    
{
  &quot;response&quot;:{&quot;numFound&quot;:32,&quot;start&quot;:0,&quot;docs&quot;:[]
  },
  &quot;facets&quot;:{
    &quot;count&quot;:32,
    &quot;x&quot;:{
      &quot;allBuckets&quot;:{
        &quot;count&quot;:18},
      &quot;buckets&quot;:[{
          &quot;val&quot;:&quot;corsair&quot;,
          &quot;count&quot;:3},
        {
          &quot;val&quot;:&quot;belkin&quot;,
          &quot;count&quot;:2}]}}}


% curl -sS -X POST http://localhost:8983/solr/techproducts/query -d &apos;omitHeader=true&amp;amp;rows=0&amp;amp;q=*:*&amp;amp;json.facet={
  x : {
    type : terms,
    method: stream,
    field : manu_id_s,
    allBuckets : true,
    limit : 2,
    sort: &quot;index asc&quot;
    } }&apos;

{
  &quot;response&quot;:{&quot;numFound&quot;:32,&quot;start&quot;:0,&quot;docs&quot;:[]
  },
  &quot;facets&quot;:{
    &quot;count&quot;:32,
    &quot;x&quot;:{
      &quot;buckets&quot;:[{
          &quot;val&quot;:&quot;apple&quot;,
          &quot;count&quot;:1},
        {
          &quot;val&quot;:&quot;asus&quot;,
          &quot;count&quot;:1}]}}}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13307555">SOLR-14514</key>
            <summary>json.facets: method:stream is incompatible with allBuckets:true</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="munendrasn">Munendra S N</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 May 2020 21:43:26 +0000</created>
                <updated>Tue, 8 Jun 2021 08:00:36 +0000</updated>
                            <resolved>Thu, 7 Jan 2021 16:49:04 +0000</resolved>
                                                    <fixVersion>8.8</fixVersion>
                                    <component>Facet Module</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17156326" author="munendrasn" created="Sun, 12 Jul 2020 14:53:22 +0000"  >&lt;p&gt;While reproducing this, I realized that both &lt;tt&gt;numBuckets:true&lt;/tt&gt; and &lt;tt&gt;missing:true&lt;/tt&gt; doesn&apos;t work with method:stream. As method specified in the request is just a suggestion, should we consider(until actually adding support, if possible) not choosing stream method, when the request has any of allBuckets, numBuckets, missing enabled and also, update the documentation about this?&lt;/p&gt;</comment>
                            <comment id="17156828" author="hossman" created="Mon, 13 Jul 2020 16:25:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;should we consider(until actually adding support, if possible) not choosing stream method, when the request has any of allBuckets, numBuckets, missing enabled and also, update the documentation about this?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;yeah, if there is no straight forward way to support featureXX in processorYY, then the standard way to deal with this is for the facet request to recognize that and not use processorYY if/when featureXX is needed.&lt;/p&gt;</comment>
                            <comment id="17244413" author="munendrasn" created="Sat, 5 Dec 2020 06:42:28 +0000"  >&lt;p&gt; &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13016518/13016518_SOLR-14514.patch&quot; title=&quot;SOLR-14514.patch attached to SOLR-14514&quot;&gt;SOLR-14514.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;br/&gt;
In the current patch, FacetParser avoids picking stream/enum processor when any one of allBuckets, numBuckets, and missing is true. I have updated the documentation accordingly&lt;/p&gt;</comment>
                            <comment id="17260627" author="jira-bot" created="Thu, 7 Jan 2021 16:32:12 +0000"  >&lt;p&gt;Commit 6ff4a9b395a68d9b0d9e259537e3f5daf0278d51 in lucene-solr&apos;s branch refs/heads/master from Munendra S N&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=6ff4a9b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=6ff4a9b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14514&quot; title=&quot;json.facets: method:stream is incompatible with allBuckets:true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14514&quot;&gt;&lt;del&gt;SOLR-14514&lt;/del&gt;&lt;/a&gt;: add extra checks for picking &apos;stream&apos; method in JSON facet&lt;/p&gt;

&lt;p&gt;missing, allBuckets, and numBuckets is not supported with stream method.&lt;br/&gt;
So, avoiding picking stream method when any one of them is enabled even if&lt;br/&gt;
facet sort is &apos;index asc&apos;&lt;/p&gt;</comment>
                            <comment id="17260641" author="jira-bot" created="Thu, 7 Jan 2021 16:47:57 +0000"  >&lt;p&gt;Commit 0b95557f1aaf6029f4c0bda885cea4ffbeea71c3 in lucene-solr&apos;s branch refs/heads/branch_8x from Munendra S N&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=0b95557&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=0b95557&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14514&quot; title=&quot;json.facets: method:stream is incompatible with allBuckets:true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14514&quot;&gt;&lt;del&gt;SOLR-14514&lt;/del&gt;&lt;/a&gt;: add extra checks for picking &apos;stream&apos; method in JSON facet&lt;/p&gt;

&lt;p&gt;missing, allBuckets, and numBuckets is not supported with stream method.&lt;br/&gt;
So, avoiding picking stream method when any one of them is enabled even if&lt;br/&gt;
facet sort is &apos;index asc&apos;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13360609">SOLR-15191</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13382644">SOLR-15457</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13303512">SOLR-14467</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13016518" name="SOLR-14514.patch" size="16143" author="munendrasn" created="Sat, 5 Dec 2020 06:40:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 44 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0f6r4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>