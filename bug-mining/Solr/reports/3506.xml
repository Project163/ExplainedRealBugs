<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:24:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-11181] Deploying Maven artifacts (generate-maven-artifacts) pushes the same artifacts multiple times</title>
                <link>https://issues.apache.org/jira/browse/SOLR-11181</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When following the instructions in the README.maven file, and watching the wire traffic, the build system issues HTTP PUT operations for the same artifacts multiple times.   For example, issuing this command:&lt;/p&gt;

&lt;p&gt;      ant -Dm2.repository.id=my-repo-id \&lt;br/&gt;
          -Dm2.repository.url=&lt;a href=&quot;http://example.org/my/repo&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://example.org/my/repo&lt;/a&gt; \&lt;br/&gt;
          generate-maven-artifacts&lt;/p&gt;

&lt;p&gt;from the lucene/ directory will generate redundant puts.  For example:&lt;/p&gt;

&lt;p&gt;PUT /&amp;lt;path&amp;gt;/org/apache/lucene/lucene-core/&amp;lt;version&amp;gt;/lucene-core-4.10.4-fs.31-sources.jar &lt;br/&gt;
PUT /&amp;lt;path&amp;gt;/org/apache/lucene/lucene-core/&amp;lt;version&amp;gt;/lucene-core-4.10.4-fs.31-sources.jar.sha1 &lt;br/&gt;
PUT /&amp;lt;path&amp;gt;/org/apache/lucene/lucene-core/&amp;lt;version&amp;gt;/lucene-core-4.10.4-fs.31-sources.jar.md5&lt;br/&gt;
...&lt;br/&gt;
PUT /&amp;lt;path&amp;gt;/org/apache/lucene/lucene-core/&amp;lt;version&amp;gt;/lucene-core-4.10.4-fs.31-sources.jar &lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;The maven repo I am using does not allow the second PUT and, hence, the build fails.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13092005">SOLR-11181</key>
            <summary>Deploying Maven artifacts (generate-maven-artifacts) pushes the same artifacts multiple times</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sarowe">Steven Rowe</assignee>
                                    <reporter username="lmonson">Lynn Monson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Aug 2017 21:13:25 +0000</created>
                <updated>Sat, 8 Jun 2019 15:22:26 +0000</updated>
                            <resolved>Thu, 11 Jan 2018 20:21:15 +0000</resolved>
                                    <version>6.6</version>
                    <version>7.1</version>
                    <version>8.0</version>
                                    <fixVersion>7.1</fixVersion>
                    <fixVersion>8.0</fixVersion>
                                    <component>Build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16113491" author="lmonson" created="Thu, 3 Aug 2017 21:06:21 +0000"  >&lt;p&gt;This patch corrects the issue on master.&lt;/p&gt;

&lt;p&gt;The patch removes the manual attachment of -src and -javadoc resources when invoking m2-deploy of pom.xml files.  The -src and -javadoc resources are already deployed implicitly as part of the pom.xml deploy.  Including the resources explicity is redundant and causes the redunant PUT to the maven repository.&lt;/p&gt;</comment>
                            <comment id="16113520" author="steve_rowe" created="Thu, 3 Aug 2017 21:24:44 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lmonson&quot; class=&quot;user-hover&quot; rel=&quot;lmonson&quot;&gt;lmonson&lt;/a&gt;, great sleuthing!  I&apos;ll do a manual test run with your patch against the Apache snapshot repo before I commit, probably tomorrow.&lt;/p&gt;</comment>
                            <comment id="16120515" author="steve_rowe" created="Wed, 9 Aug 2017 19:30:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lmonson&quot; class=&quot;user-hover&quot; rel=&quot;lmonson&quot;&gt;lmonson&lt;/a&gt;, I ran the following with your patch applied to upload 8.0-SNAPSHOT artifacts to the Apache Snapshot Repository.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ant -Dm2.repository.id=apache.snapshots.https -Dm2.repository.url=https://repository.apache.org/content/repositories/snapshots generate-maven-artifacts
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can see the result for &lt;tt&gt;lucene-core&lt;/tt&gt; here (artifacts share the infix &lt;tt&gt;-8.0.0-20170809.185958-28.&lt;/tt&gt;): &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/lucene/lucene-core/8.0.0-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/lucene/lucene-core/8.0.0-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Unlike all previous runs, neither &lt;tt&gt;-sources&lt;/tt&gt; nor &lt;tt&gt;-javadoc&lt;/tt&gt; artifacts were uploaded when I used your patch.  This is not acceptable.  When you run with your patch, do these artifacts get uploaded?&lt;/p&gt;

&lt;p&gt;Next I&apos;ll try to reproduce the problem you&apos;re trying to solve with the unpatched build.&lt;/p&gt;</comment>
                            <comment id="16123953" author="steve_rowe" created="Fri, 11 Aug 2017 19:59:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;Next I&apos;ll try to reproduce the problem you&apos;re trying to solve with the unpatched build.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I didn&apos;t need to run the process on my own hardware and look at wire traffic, because the Jenkins log shows that the -sources and -javadoc jars are each uploaded twice (see log excerpt below).  I&apos;m not sure how to deal with this problem, since the project we use to upload artifacts (Maven Ant Tasks) has been discontinued, and the likely alternative (Aether Ant Tasks) has also been discontinued.  I&apos;m guessing we&apos;ll have to switch to Ivy for artifact upload in order to address this issue.  This likely will not be a small task.  Patches welcome!&lt;/p&gt;

&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/job/Lucene-Solr-Maven-master/2088/consoleText&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Lucene-Solr-Maven-master/2088/consoleText&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-dist-maven-src-java:
[artifact:install-provider] Installing provider: org.apache.maven.wagon:wagon-ssh:jar:1.0-beta-7:runtime
[artifact:install] [INFO] Installing /home/jenkins/jenkins-slave/workspace/Lucene-Solr-Maven-master/lucene/build/lucene.tgz.unpacked/lucene-8.0.0-SNAPSHOT/core/lucene-core-8.0.0-SNAPSHOT.jar to /home/jenkins/.m2/repository/org/apache/lucene/lucene-core/8.0.0-SNAPSHOT/lucene-core-8.0.0-SNAPSHOT.jar
[artifact:install] [INFO] Installing /home/jenkins/jenkins-slave/workspace/Lucene-Solr-Maven-master/lucene/build/core/lucene-core-8.0.0-SNAPSHOT-src.jar to /home/jenkins/.m2/repository/org/apache/lucene/lucene-core/8.0.0-SNAPSHOT/lucene-core-8.0.0-SNAPSHOT-sources.jar
[artifact:install] [INFO] Installing /home/jenkins/jenkins-slave/workspace/Lucene-Solr-Maven-master/lucene/build/core/lucene-core-8.0.0-SNAPSHOT-javadoc.jar to /home/jenkins/.m2/repository/org/apache/lucene/lucene-core/8.0.0-SNAPSHOT/lucene-core-8.0.0-SNAPSHOT-javadoc.jar
[artifact:deploy] Deploying to https://repository.apache.org/content/repositories/snapshots
[artifact:deploy] [INFO] Retrieving previous build number from apache.snapshots.https
[artifact:deploy] Uploading: org/apache/lucene/lucene-core/8.0.0-SNAPSHOT/lucene-core-8.0.0-20170810.172621-29.jar to repository apache.snapshots.https at https://repository.apache.org/content/repositories/snapshots
[artifact:deploy] Transferring 2708K from apache.snapshots.https
[artifact:deploy] Uploaded 2708K
[artifact:deploy] [INFO] Retrieving previous metadata from apache.snapshots.https
[artifact:deploy] [INFO] Uploading repository metadata for: &apos;snapshot org.apache.lucene:lucene-core:8.0.0-SNAPSHOT&apos;
[artifact:deploy] [INFO] Uploading project information for lucene-core 8.0.0-20170810.172621-29
[artifact:deploy] [INFO] Retrieving previous metadata from apache.snapshots.https
[artifact:deploy] [INFO] Uploading repository metadata for: &apos;artifact org.apache.lucene:lucene-core&apos;
[artifact:deploy] [INFO] Retrieving previous build number from apache.snapshots.https
[artifact:deploy] Uploading: org/apache/lucene/lucene-core/8.0.0-SNAPSHOT/lucene-core-8.0.0-20170810.172621-29-sources.jar to repository apache.snapshots.https at https://repository.apache.org/content/repositories/snapshots
[artifact:deploy] Transferring 1960K from apache.snapshots.https
[artifact:deploy] Uploaded 1960K
[artifact:deploy] [INFO] Retrieving previous build number from apache.snapshots.https
[artifact:deploy] Uploading: org/apache/lucene/lucene-core/8.0.0-SNAPSHOT/lucene-core-8.0.0-20170810.172621-29-javadoc.jar to repository apache.snapshots.https at https://repository.apache.org/content/repositories/snapshots
[artifact:deploy] Transferring 5041K from apache.snapshots.https
[artifact:deploy] Uploaded 5041K
[artifact:deploy] [INFO] Retrieving previous build number from apache.snapshots.https
[artifact:deploy] Uploading: org/apache/lucene/lucene-core/8.0.0-SNAPSHOT/lucene-core-8.0.0-20170810.172621-29-sources.jar to repository apache.snapshots.https at https://repository.apache.org/content/repositories/snapshots
[artifact:deploy] Transferring 1960K from apache.snapshots.https
[artifact:deploy] Uploaded 1960K
[artifact:deploy] [INFO] Retrieving previous build number from apache.snapshots.https
[artifact:deploy] Uploading: org/apache/lucene/lucene-core/8.0.0-SNAPSHOT/lucene-core-8.0.0-20170810.172621-29-javadoc.jar to repository apache.snapshots.https at https://repository.apache.org/content/repositories/snapshots
[artifact:deploy] Transferring 5041K from apache.snapshots.https
[artifact:deploy] Uploaded 5041K
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16126483" author="lmonson" created="Mon, 14 Aug 2017 22:01:34 +0000"  >&lt;p&gt;The plugins seem to behave very specifically based on the repository you are talking to as well as the ~/.m2/settings.xml file you have in place, even with -Dm2.xxx properties defined.  I am going to debug into the plugins themselves to see if I can get more insight from that.&lt;/p&gt;</comment>
                            <comment id="16126675" author="lmonson" created="Tue, 15 Aug 2017 00:30:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; I found the sequence in the maven ant tasks that, in combination with the common-build.xml tasks, cause a double upload.   There seems to be a simple workaround, if you are amenable to try it.  The workaround is to deploy first, then install locally instead of the other way round.  It&apos;s a simple patch to common-build.xml.&lt;/p&gt;

&lt;p&gt;If the workaround seems reasonable to you, I&apos;ll submit a patch for it.&lt;/p&gt;</comment>
                            <comment id="16126677" author="steve_rowe" created="Tue, 15 Aug 2017 00:37:28 +0000"  >&lt;blockquote&gt;&lt;p&gt;If the workaround seems reasonable to you, I&apos;ll submit a patch for it.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1, I&apos;ll give your patch a try.&lt;/p&gt;</comment>
                            <comment id="16135629" author="lmonson" created="Mon, 21 Aug 2017 19:17:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
I attached the alternate version of a patch for the problem. &lt;/p&gt;

&lt;p&gt;The patch reverses the order of the maven install and deploy tasks.  This prevents a double push to the repository, but will cause the local install to happen twice instead.&lt;/p&gt;</comment>
                            <comment id="16135716" author="steve_rowe" created="Mon, 21 Aug 2017 19:58:29 +0000"  >&lt;p&gt;I ran the build locally against &lt;tt&gt;repository.apache.org/snapshots&lt;/tt&gt; with your latest patch, and the &lt;tt&gt;-sources&lt;/tt&gt; and &lt;tt&gt;-javadoc&lt;/tt&gt; jars are sent to the repo.  You can see the result for lucene-core here (artifacts share the infix &lt;tt&gt;-8.0.0-20170821.193346-36.&lt;/tt&gt;): &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/lucene/lucene-core/8.0.0-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/lucene/lucene-core/8.0.0-SNAPSHOT/&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The patch reverses the order of the maven install and deploy tasks. This prevents a double push to the repository, but will cause the local install to happen twice instead.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think double local install is fine (better than double remote push anyway).  &lt;/p&gt;

&lt;p&gt;I&apos;ll commit your patch to master and branch_7x.&lt;/p&gt;</comment>
                            <comment id="16135723" author="jira-bot" created="Mon, 21 Aug 2017 20:02:16 +0000"  >&lt;p&gt;Commit b0bdb25d7522625fc829843e51e6313a8632925a in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=b0bdb25&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=b0bdb25&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11181&quot; title=&quot;Deploying Maven artifacts (generate-maven-artifacts) pushes the same artifacts multiple times&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11181&quot;&gt;&lt;del&gt;SOLR-11181&lt;/del&gt;&lt;/a&gt;: Switch order of maven artifact publishing procedure: deploy first instead of locally installing first, to workaround a double repository push of *-sources.jar and *-javadoc.jar files.&lt;/p&gt;</comment>
                            <comment id="16135724" author="jira-bot" created="Mon, 21 Aug 2017 20:02:18 +0000"  >&lt;p&gt;Commit 379ccd46c42ffcb92180492c1442d016f701ec28 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=379ccd4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=379ccd4&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11181&quot; title=&quot;Deploying Maven artifacts (generate-maven-artifacts) pushes the same artifacts multiple times&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11181&quot;&gt;&lt;del&gt;SOLR-11181&lt;/del&gt;&lt;/a&gt;: Switch order of maven artifact publishing procedure: deploy first instead of locally installing first, to workaround a double repository push of *-sources.jar and *-javadoc.jar files.&lt;/p&gt;</comment>
                            <comment id="16135729" author="jira-bot" created="Mon, 21 Aug 2017 20:06:07 +0000"  >&lt;p&gt;Commit 382ae015846123acfb05499af58cf24f80bd5164 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=382ae01&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=382ae01&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11181&quot; title=&quot;Deploying Maven artifacts (generate-maven-artifacts) pushes the same artifacts multiple times&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11181&quot;&gt;&lt;del&gt;SOLR-11181&lt;/del&gt;&lt;/a&gt;: changes entry&lt;/p&gt;</comment>
                            <comment id="16135730" author="jira-bot" created="Mon, 21 Aug 2017 20:06:09 +0000"  >&lt;p&gt;Commit 25bbd2512e8a8feb96382b83d7318410b3cf4f08 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=25bbd25&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=25bbd25&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11181&quot; title=&quot;Deploying Maven artifacts (generate-maven-artifacts) pushes the same artifacts multiple times&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11181&quot;&gt;&lt;del&gt;SOLR-11181&lt;/del&gt;&lt;/a&gt;: changes entry&lt;/p&gt;</comment>
                            <comment id="16135732" author="steve_rowe" created="Mon, 21 Aug 2017 20:06:46 +0000"  >&lt;p&gt;Committed.  Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lmonson&quot; class=&quot;user-hover&quot; rel=&quot;lmonson&quot;&gt;lmonson&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="16136990" author="lmonson" created="Tue, 22 Aug 2017 16:02:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; thanks to you for helping me out with this.&lt;/p&gt;</comment>
                            <comment id="16140044" author="steve_rowe" created="Thu, 24 Aug 2017 13:46:31 +0000"  >&lt;p&gt;Since I pushed this change, all Maven builds have failed on Jenkins, e.g. from &lt;a href=&quot;https://builds.apache.org/job/Lucene-Solr-Maven-master/2096/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Lucene-Solr-Maven-master/2096/&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-validate-maven-dependencies:
[artifact:dependencies] [INFO] snapshot org.apache.lucene:lucene-codecs:8.0.0-SNAPSHOT: checking for updates from sonatype.releases
[artifact:dependencies] Downloading: org/apache/lucene/lucene-codecs/8.0.0-SNAPSHOT/lucene-codecs-8.0.0-SNAPSHOT.pom from repository sonatype.releases at https://oss.sonatype.org/content/repositories/releases
[artifact:dependencies] Unable to locate resource in repository
[artifact:dependencies] [INFO] Unable to find resource &apos;org.apache.lucene:lucene-codecs:pom:8.0.0-SNAPSHOT&apos; in repository sonatype.releases (https://oss.sonatype.org/content/repositories/releases)
[artifact:dependencies] [INFO] snapshot org.apache.lucene:lucene-core:8.0.0-SNAPSHOT: checking for updates from sonatype.releases
[artifact:dependencies] Downloading: org/apache/lucene/lucene-core/8.0.0-SNAPSHOT/lucene-core-8.0.0-SNAPSHOT.pom from repository sonatype.releases at https://oss.sonatype.org/content/repositories/releases
[artifact:dependencies] Unable to locate resource in repository
[artifact:dependencies] [INFO] Unable to find resource &apos;org.apache.lucene:lucene-core:pom:8.0.0-SNAPSHOT&apos; in repository sonatype.releases (https://oss.sonatype.org/content/repositories/releases)
[artifact:dependencies] Downloading: org/apache/lucene/lucene-codecs/8.0.0-SNAPSHOT/lucene-codecs-8.0.0-SNAPSHOT.jar from repository sonatype.releases at https://oss.sonatype.org/content/repositories/releases
[artifact:dependencies] Unable to locate resource in repository
[artifact:dependencies] [INFO] Unable to find resource &apos;org.apache.lucene:lucene-codecs:jar:8.0.0-SNAPSHOT&apos; in repository sonatype.releases (https://oss.sonatype.org/content/repositories/releases)
[artifact:dependencies] Downloading: org/apache/lucene/lucene-core/8.0.0-SNAPSHOT/lucene-core-8.0.0-SNAPSHOT.jar from repository sonatype.releases at https://oss.sonatype.org/content/repositories/releases
[artifact:dependencies] Unable to locate resource in repository
[artifact:dependencies] [INFO] Unable to find resource &apos;org.apache.lucene:lucene-core:jar:8.0.0-SNAPSHOT&apos; in repository sonatype.releases (https://oss.sonatype.org/content/repositories/releases)
[artifact:dependencies] An error has occurred while processing the Maven artifact tasks.
[artifact:dependencies]  Diagnosis:
[artifact:dependencies] 
[artifact:dependencies] Unable to resolve artifact: Missing:
[artifact:dependencies] ----------
[artifact:dependencies] 1) org.apache.lucene:lucene-codecs:jar:8.0.0-SNAPSHOT
[artifact:dependencies] 
[artifact:dependencies]   Try downloading the file manually from the project website.
[artifact:dependencies] 
[artifact:dependencies]   Then, install it using the command: 
[artifact:dependencies]       mvn install:install-file -DgroupId=org.apache.lucene -DartifactId=lucene-codecs -Dversion=8.0.0-SNAPSHOT -Dpackaging=jar -Dfile=/path/to/file
[artifact:dependencies] 
[artifact:dependencies]   Alternatively, if you host your own repository you can deploy the file there: 
[artifact:dependencies]       mvn deploy:deploy-file -DgroupId=org.apache.lucene -DartifactId=lucene-codecs -Dversion=8.0.0-SNAPSHOT -Dpackaging=jar -Dfile=/path/to/file -Durl=[url] -DrepositoryId=[id]
[artifact:dependencies] 
[artifact:dependencies]   Path to dependency: 
[artifact:dependencies]   	1) org.apache.lucene:lucene-test-framework:jar:8.0.0-SNAPSHOT
[artifact:dependencies]   	2) org.apache.lucene:lucene-codecs:jar:8.0.0-SNAPSHOT
[artifact:dependencies] 
[artifact:dependencies] 2) org.apache.lucene:lucene-core:jar:8.0.0-SNAPSHOT
[artifact:dependencies] 
[artifact:dependencies]   Try downloading the file manually from the project website.
[artifact:dependencies] 
[artifact:dependencies]   Then, install it using the command: 
[artifact:dependencies]       mvn install:install-file -DgroupId=org.apache.lucene -DartifactId=lucene-core -Dversion=8.0.0-SNAPSHOT -Dpackaging=jar -Dfile=/path/to/file
[artifact:dependencies] 
[artifact:dependencies]   Alternatively, if you host your own repository you can deploy the file there: 
[artifact:dependencies]       mvn deploy:deploy-file -DgroupId=org.apache.lucene -DartifactId=lucene-core -Dversion=8.0.0-SNAPSHOT -Dpackaging=jar -Dfile=/path/to/file -Durl=[url] -DrepositoryId=[id]
[artifact:dependencies] 
[artifact:dependencies]   Path to dependency: 
[artifact:dependencies]   	1) org.apache.lucene:lucene-test-framework:jar:8.0.0-SNAPSHOT
[artifact:dependencies]   	2) org.apache.lucene:lucene-core:jar:8.0.0-SNAPSHOT
[artifact:dependencies] 
[artifact:dependencies] ----------
[artifact:dependencies] 2 required artifacts are missing.
[artifact:dependencies] 
[artifact:dependencies] for artifact: 
[artifact:dependencies]   org.apache.lucene:lucene-test-framework:jar:8.0.0-SNAPSHOT
[artifact:dependencies] 
[artifact:dependencies] from the specified remote repositories:
[artifact:dependencies]   central (http://repo1.maven.org/maven2),
[artifact:dependencies]   Nexus (http://repository.apache.org/snapshots),
[artifact:dependencies]   sonatype.releases (https://oss.sonatype.org/content/repositories/releases)
[artifact:dependencies] 
[artifact:dependencies] 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16140312" author="lmonson" created="Thu, 24 Aug 2017 16:59:42 +0000"  >&lt;p&gt;Was the patch ok?  Anything I can do to help?&lt;/p&gt;</comment>
                            <comment id="16140564" author="steve_rowe" created="Thu, 24 Aug 2017 19:30:24 +0000"  >&lt;blockquote&gt;&lt;p&gt;Was the patch ok?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, the patch was ok.&lt;/p&gt;

&lt;p&gt;The problem isn&apos;t with &lt;tt&gt;generate-maven-artifacts&lt;/tt&gt;, but rather with &lt;tt&gt;validate-maven-dependencies&lt;/tt&gt;.  Both these targets are run by Jenkins via the &lt;tt&gt;jenkins-maven-nightly&lt;/tt&gt; target.&lt;/p&gt;

&lt;p&gt;The problem is that &lt;tt&gt;validate-maven-dependencies&lt;/tt&gt; first removes all Lucene/Solr artifacts from the local Maven repository, and then attempts to resolve each artifact&apos;s dependencies from the local repository by disabling remote resolution.  Apparently because of the re-ordering of the &lt;tt&gt;artifact:deploy&lt;/tt&gt; and &lt;tt&gt;artifact:install&lt;/tt&gt; tasks (as a result of your patch), (some?) depended-on artifacts are no longer populated in the local repository.&lt;/p&gt;

&lt;p&gt;Since &lt;tt&gt;validate-maven-dependencies&lt;/tt&gt; needs only &lt;tt&gt;artifact:install&lt;/tt&gt;, and not &lt;tt&gt;artifact:deploy&lt;/tt&gt;, I&apos;m thinking we could add an &lt;tt&gt;m2-install&lt;/tt&gt; macro to be used instead.  I&apos;m not yet sure how &lt;tt&gt;m2-deploy&lt;/tt&gt; is called via &lt;tt&gt;validate-maven-dependencies&lt;/tt&gt; though.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Anything I can do to help?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If you&apos;re up for it, you could a) investigate whether &lt;tt&gt;generate-maven-artifacts&lt;/tt&gt; currently does any local repository installation (if not, that&apos;s a problem); and/or b) look into the feasibility of, and possibly implement, my above &lt;tt&gt;m2-install&lt;/tt&gt; idea.&lt;/p&gt;</comment>
                            <comment id="16156930" author="steve_rowe" created="Thu, 7 Sep 2017 13:08:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;Since &lt;tt&gt;validate-maven-dependencies&lt;/tt&gt; needs only &lt;tt&gt;artifact:install&lt;/tt&gt;, and not &lt;tt&gt;artifact:deploy&lt;/tt&gt;, I&apos;m thinking we could add an &lt;tt&gt;m2-install&lt;/tt&gt; macro to be used instead.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The attached patch &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12885814/12885814_SOLR-11181-fix-validate-maven-dependencies.patch&quot; title=&quot;SOLR-11181-fix-validate-maven-dependencies.patch attached to SOLR-11181&quot;&gt;SOLR-11181-fix-validate-maven-dependencies.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; does this, and works for me.  I&apos;ll commit shortly, and then we&apos;ll see in a day or so if Jenkins likes it too.&lt;/p&gt;</comment>
                            <comment id="16156943" author="jira-bot" created="Thu, 7 Sep 2017 13:24:56 +0000"  >&lt;p&gt;Commit 519a9fe5db566d9ff2de3d0269f51fda156d3f5d in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=519a9fe&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=519a9fe&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11181&quot; title=&quot;Deploying Maven artifacts (generate-maven-artifacts) pushes the same artifacts multiple times&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11181&quot;&gt;&lt;del&gt;SOLR-11181&lt;/del&gt;&lt;/a&gt;: fix validate-maven-dependencies&lt;/p&gt;</comment>
                            <comment id="16156944" author="jira-bot" created="Thu, 7 Sep 2017 13:24:58 +0000"  >&lt;p&gt;Commit 5324c7436c8ba578fa38d8e7fc8219abac154558 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=5324c74&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=5324c74&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11181&quot; title=&quot;Deploying Maven artifacts (generate-maven-artifacts) pushes the same artifacts multiple times&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11181&quot;&gt;&lt;del&gt;SOLR-11181&lt;/del&gt;&lt;/a&gt;: fix validate-maven-dependencies&lt;/p&gt;</comment>
                            <comment id="16159479" author="lmonson" created="Fri, 8 Sep 2017 22:48:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;  Thanks for putting in the patch.  I will validate on my end that it works with our repo as well.&lt;/p&gt;</comment>
                            <comment id="16322881" author="steve_rowe" created="Thu, 11 Jan 2018 20:21:15 +0000"  >&lt;p&gt;Resolving this old issue.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lmonson&quot; class=&quot;user-hover&quot; rel=&quot;lmonson&quot;&gt;lmonson&lt;/a&gt; please open a new issue if you run into further problems.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13130309">SOLR-11847</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12885814" name="SOLR-11181-fix-validate-maven-dependencies.patch" size="8847" author="sarowe" created="Thu, 7 Sep 2017 13:06:26 +0000"/>
                            <attachment id="12882953" name="SOLR-11181.patch" size="1302" author="lmonson" created="Mon, 21 Aug 2017 19:16:56 +0000"/>
                            <attachment id="12880305" name="SOLR-11181.patch" size="1824" author="lmonson" created="Thu, 3 Aug 2017 21:03:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 44 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3icdr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>