<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:05:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-7243] 4.10.3 SolrJ is throwing a SERVER_ERROR exception instead of BAD_REQUEST</title>
                <link>https://issues.apache.org/jira/browse/SOLR-7243</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;We found this problem while upgrading Solr from 4.4 to 4.10.3. Our integration test is similar to this Solr unit test,&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/trunk/solr/core/src/test/org/apache/solr/schema/TestCloudSchemaless.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/trunk/solr/core/src/test/org/apache/solr/schema/TestCloudSchemaless.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Specifically we test if the Solr server returns BAD_REQUEST when provided with incorrect input.The only difference is that it uses CloudSolrServer instead of HttpSolrServer. The CloudSolrServer always returns SERVER_ERROR error code. Please take a look&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/817303840fce547a1557e330e93e5a8ac0618f34/solr/solrj/src/java/org/apache/solr/client/solrj/impl/CloudSolrServer.java#L359&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/817303840fce547a1557e330e93e5a8ac0618f34/solr/solrj/src/java/org/apache/solr/client/solrj/impl/CloudSolrServer.java#L359&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think we can improve the error handling by checking if the first exception in the list is of type SolrException and if that is the case return the error code associated with that exception. If the first exception is not of type SolrException, then we can return SERVER_ERROR code. &lt;/p&gt;
</description>
                <environment></environment>
        <key id="12781912">SOLR-7243</key>
            <summary>4.10.3 SolrJ is throwing a SERVER_ERROR exception instead of BAD_REQUEST</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="elyograg">Shawn Heisey</assignee>
                                    <reporter username="hgadre">Hrishikesh Gadre</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Mar 2015 20:02:34 +0000</created>
                <updated>Mon, 9 May 2016 18:53:18 +0000</updated>
                            <resolved>Tue, 12 May 2015 23:25:37 +0000</resolved>
                                    <version>4.10.3</version>
                                    <fixVersion>5.2</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14361048" author="elyograg" created="Fri, 13 Mar 2015 20:32:39 +0000"  >&lt;p&gt;This looks reasonable to me.&lt;/p&gt;</comment>
                            <comment id="14378909" author="hgadre" created="Tue, 24 Mar 2015 23:20:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elyograg&quot; class=&quot;user-hover&quot; rel=&quot;elyograg&quot;&gt;elyograg&lt;/a&gt; A new patch against the trunk. &lt;/p&gt;

&lt;p&gt;Improved the error handling such that&lt;br/&gt;
1. error code corresponding to first exception is used (if possible) while throwing the RouteException.&lt;br/&gt;
2. Ensure that the SolrServerException does not gobble up the SolrException (which contains the actual error code). Note that as per the documentation, SolrServerException should be used only for communication / parsing issues associated with talking to SOLR. Hence it can not represent valid errors returned by the Solr server (since it does not have error-code associated with it).&lt;/p&gt;

&lt;p&gt;Also added a unit test to verify the changes.&lt;/p&gt;</comment>
                            <comment id="14378917" author="hgadre" created="Tue, 24 Mar 2015 23:25:23 +0000"  >&lt;p&gt;Accidentally uploaded old patch file. Please ignore it (although the comment is still valid).&lt;/p&gt;</comment>
                            <comment id="14378934" author="elyograg" created="Tue, 24 Mar 2015 23:40:42 +0000"  >&lt;p&gt;Initial comments, after a quick glance and before I have applied the patch and tried to digest it:&lt;/p&gt;

&lt;p&gt;In a couple of places, you are casting an exception to SolrException .. but in both cases, because of the way the code is written, you can already be assured that the exception &lt;b&gt;is&lt;/b&gt; a SolrException (or a derivative class).  Is a cast really necessary?&lt;/p&gt;</comment>
                            <comment id="14378939" author="hgadre" created="Tue, 24 Mar 2015 23:47:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elyograg&quot; class=&quot;user-hover&quot; rel=&quot;elyograg&quot;&gt;elyograg&lt;/a&gt; yeah good point. Let me fix this ASAP.&lt;/p&gt;</comment>
                            <comment id="14379058" author="hgadre" created="Wed, 25 Mar 2015 00:59:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elyograg&quot; class=&quot;user-hover&quot; rel=&quot;elyograg&quot;&gt;elyograg&lt;/a&gt; I removed the cast from one place (couldn&apos;t remove the other one since compiler complains. Note the method signature does not allow throwing generic Exceptions in that case).&lt;/p&gt;</comment>
                            <comment id="14493308" author="hgadre" created="Mon, 13 Apr 2015 23:54:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elyograg&quot; class=&quot;user-hover&quot; rel=&quot;elyograg&quot;&gt;elyograg&lt;/a&gt; Did you get a chance to review the patch? Please let me know if any feedback.&lt;/p&gt;</comment>
                            <comment id="14498005" author="elyograg" created="Thu, 16 Apr 2015 12:48:30 +0000"  >&lt;p&gt;I have not yet had a chance to look deeper.  $JOB and $REAL_LIFE get in the way. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14499223" author="elyograg" created="Fri, 17 Apr 2015 04:29:19 +0000"  >&lt;p&gt;Updated patch.  Still need to run tests and precommit.&lt;/p&gt;</comment>
                            <comment id="14501192" author="elyograg" created="Sat, 18 Apr 2015 09:02:08 +0000"  >&lt;p&gt;Tests and precommit on trunk passed.&lt;/p&gt;

&lt;p&gt;I think this is a good change, but I&apos;m curious what others think.&lt;/p&gt;</comment>
                            <comment id="14540378" author="hgadre" created="Tue, 12 May 2015 18:12:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elyograg&quot; class=&quot;user-hover&quot; rel=&quot;elyograg&quot;&gt;elyograg&lt;/a&gt; I don&apos;t see any negative response for this. Should we commit?&lt;/p&gt;</comment>
                            <comment id="14540801" author="jira-bot" created="Tue, 12 May 2015 21:32:16 +0000"  >&lt;p&gt;Commit 1679099 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elyograg&quot; class=&quot;user-hover&quot; rel=&quot;elyograg&quot;&gt;elyograg&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1679099&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1679099&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7243&quot; title=&quot;4.10.3 SolrJ is throwing a SERVER_ERROR exception instead of BAD_REQUEST&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7243&quot;&gt;&lt;del&gt;SOLR-7243&lt;/del&gt;&lt;/a&gt;: Return more informative error from CloudSolrServer when available.&lt;/p&gt;</comment>
                            <comment id="14540995" author="jira-bot" created="Tue, 12 May 2015 23:24:27 +0000"  >&lt;p&gt;Commit 1679122 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elyograg&quot; class=&quot;user-hover&quot; rel=&quot;elyograg&quot;&gt;elyograg&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1679122&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1679122&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7243&quot; title=&quot;4.10.3 SolrJ is throwing a SERVER_ERROR exception instead of BAD_REQUEST&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7243&quot;&gt;&lt;del&gt;SOLR-7243&lt;/del&gt;&lt;/a&gt;: Return more informative error from CloudSolrServer when available. (merge trunk r1679099)&lt;/p&gt;</comment>
                            <comment id="14540998" author="elyograg" created="Tue, 12 May 2015 23:25:37 +0000"  >&lt;p&gt;Tests and precommit are good.&lt;/p&gt;</comment>
                            <comment id="14586941" author="anshumg" created="Mon, 15 Jun 2015 21:44:53 +0000"  >&lt;p&gt;Bulk close for 5.2.0.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12726064" name="SOLR-7243.patch" size="3762" author="elyograg" created="Fri, 17 Apr 2015 04:29:19 +0000"/>
                            <attachment id="12707091" name="SOLR-7243.patch" size="3481" author="hgadre" created="Wed, 25 Mar 2015 00:59:22 +0000"/>
                            <attachment id="12707062" name="SOLR-7243.patch" size="3496" author="hgadre" created="Tue, 24 Mar 2015 23:25:23 +0000"/>
                            <attachment id="12707057" name="SOLR-7243.patch" size="1098" author="hgadre" created="Tue, 24 Mar 2015 23:20:46 +0000"/>
                            <attachment id="12704494" name="SOLR-7243.patch" size="1098" author="hgadre" created="Fri, 13 Mar 2015 20:07:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 23 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26r9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>