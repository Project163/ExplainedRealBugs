<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:04:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16916] JSON Query DSL doesn&apos;t work if defType isn&apos;t lucene</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16916</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;If the &lt;a href=&quot;https://solr.apache.org/guide/8_4/json-query-dsl.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JSON Query DSL&lt;/a&gt; is used (POSTing JSON), it requires that the default &quot;lucene&quot; query parser is used.  If for some reason defType is set, like in the defaults section of the request handler, then this doesn&apos;t work.  Internally, the JSON is rewritten to local-params syntax which requires the default parser, not another like edismax.&lt;/p&gt;

&lt;p&gt;This behavior broke in 7.2 when other parsers stopped processing local-params in the name of security.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13545745">SOLR-16916</key>
            <summary>JSON Query DSL doesn&apos;t work if defType isn&apos;t lucene</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dsmiley">David Smiley</assignee>
                                    <reporter username="dsmiley">David Smiley</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Aug 2023 17:49:47 +0000</created>
                <updated>Fri, 1 Dec 2023 16:01:01 +0000</updated>
                            <resolved>Fri, 25 Aug 2023 15:36:22 +0000</resolved>
                                    <version>7.2</version>
                                    <fixVersion>9.4</fixVersion>
                                    <component>query parsers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="7800">2h 10m</timespent>
                                <comments>
                            <comment id="17749980" author="dsmiley" created="Tue, 1 Aug 2023 18:19:46 +0000"  >&lt;p&gt;Suggested change:  RequestUtil.processParams, I added one line of code in this little snippet:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;query&quot;&lt;/span&gt;.equals(key)) {
          out = &lt;span class=&quot;code-quote&quot;&gt;&quot;q&quot;&lt;/span&gt;;
          isQuery = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
          newMap.put(QueryParsing.DEFTYPE, &lt;span class=&quot;code-quote&quot;&gt;&quot;lucene&quot;&lt;/span&gt;); &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; one processes &lt;span class=&quot;code-quote&quot;&gt;&quot;{!&quot;&lt;/span&gt; local-param syntax&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I didn&apos;t test that it actually works, although I&apos;m optimistic &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17758583" author="jira-bot" created="Thu, 24 Aug 2023 13:16:57 +0000"  >&lt;p&gt;Commit 04bfd236ad4703e34f5b263ba1b04257173fccb5 in solr&apos;s branch refs/heads/main from Jane Sandberg&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=04bfd236ad4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=04bfd236ad4&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16916&quot; title=&quot;JSON Query DSL doesn&amp;#39;t work if defType isn&amp;#39;t lucene&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16916&quot;&gt;&lt;del&gt;SOLR-16916&lt;/del&gt;&lt;/a&gt;: JSON boolean queries when solrconfig defType is set to edismax (#1827)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16916&quot; title=&quot;JSON Query DSL doesn&amp;#39;t work if defType isn&amp;#39;t lucene&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16916&quot;&gt;&lt;del&gt;SOLR-16916&lt;/del&gt;&lt;/a&gt;: Use of the JSON Query DSL should ignore the defType parameter&lt;br/&gt;
  (Christina Chortaria, Max Kadel, Ryan Laddusaw, Jane Sandberg, David Smiley)&lt;/p&gt;


&lt;p&gt;Co-authored-by: David Smiley &amp;lt;dsmiley@apache.org&amp;gt;&lt;br/&gt;
Co-authored-by: Jane Sandberg &amp;lt;sandbergja@users.noreply.github.com&amp;gt;&lt;br/&gt;
Co-authored-by: Ryan Laddusaw &amp;lt;rladdusaw@users.noreply.github.com&amp;gt;&lt;br/&gt;
Co-authored-by: Christina Chortaria &amp;lt;christinach@users.noreply.github.com&amp;gt;&lt;br/&gt;
Co-authored-by: Max Kadel &amp;lt;maxkadel@users.noreply.github.com&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17759078" author="jira-bot" created="Fri, 25 Aug 2023 15:20:57 +0000"  >&lt;p&gt;Commit 7d39f30defcb2221911affdd5323892f5236e2e0 in solr&apos;s branch refs/heads/branch_9x from Jane Sandberg&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=7d39f30defc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=7d39f30defc&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16916&quot; title=&quot;JSON Query DSL doesn&amp;#39;t work if defType isn&amp;#39;t lucene&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16916&quot;&gt;&lt;del&gt;SOLR-16916&lt;/del&gt;&lt;/a&gt;: JSON boolean queries when solrconfig defType is set to edismax (#1827)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16916&quot; title=&quot;JSON Query DSL doesn&amp;#39;t work if defType isn&amp;#39;t lucene&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16916&quot;&gt;&lt;del&gt;SOLR-16916&lt;/del&gt;&lt;/a&gt;: Use of the JSON Query DSL should ignore the defType parameter&lt;br/&gt;
  (Christina Chortaria, Max Kadel, Ryan Laddusaw, Jane Sandberg, David Smiley)&lt;/p&gt;


&lt;p&gt;Co-authored-by: David Smiley &amp;lt;dsmiley@apache.org&amp;gt;&lt;br/&gt;
Co-authored-by: Jane Sandberg &amp;lt;sandbergja@users.noreply.github.com&amp;gt;&lt;br/&gt;
Co-authored-by: Ryan Laddusaw &amp;lt;rladdusaw@users.noreply.github.com&amp;gt;&lt;br/&gt;
Co-authored-by: Christina Chortaria &amp;lt;christinach@users.noreply.github.com&amp;gt;&lt;br/&gt;
Co-authored-by: Max Kadel &amp;lt;maxkadel@users.noreply.github.com&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17759083" author="dsmiley" created="Fri, 25 Aug 2023 15:36:22 +0000"  >&lt;p&gt;Thanks for contributing everyone!&lt;/p&gt;</comment>
                            <comment id="17775482" author="alex.parvulescu" created="Sun, 15 Oct 2023 19:57:08 +0000"  >&lt;p&gt;Closing after the 9.4.0 release&lt;/p&gt;</comment>
                            <comment id="17779189" author="hossman" created="Tue, 24 Oct 2023 17:32:12 +0000"  >&lt;p&gt;I&apos;m not really clear what happened here ... or what was intended to happen here?&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The Jira description indicates it&apos;s a bug that &lt;tt&gt;defType&lt;/tt&gt; was ignored by the JSON Query DSL since 7.2 until this issue &quot;fixed&quot; it&lt;/li&gt;
	&lt;li&gt;The CHANGES entry suggests that &lt;tt&gt;defType&lt;/tt&gt; is now (starting with 9.4) being intentionally ignored by the Query DSL&lt;/li&gt;
	&lt;li&gt;Meanwhile the only test added by this Jira sets a default &lt;tt&gt;defType=edismax&lt;/tt&gt; as a request handler default ... butthen only seems to test that a &lt;tt&gt;lucene&lt;/tt&gt; query works &#8211; w/o testing any &lt;tt&gt;edismax&lt;/tt&gt; features?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Meanwhile, on the user mailing list, people are reporting that using &lt;tt&gt;defType=edismax&lt;/tt&gt; with the Query DSL worked just fine with Solr 9.1, but has broken in 9.4 (i&apos;m guessing/assuming by this change)...&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;so WTF?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;With 9.1.0&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hossman@slate:~/lucene/solr [j11] [tags/releases/solr/9.1.0] $ curl &apos;http://localhost:8983/solr/techproducts/query&apos; -d &apos;
{
    &quot;query&quot;: &quot;+all:belkin&quot;,
    &quot;fields&quot;: &quot;id compName_s&quot;,
    &quot;offset&quot;: 0,
    &quot;limit&quot;: 10,
    &quot;params&quot;: {
        &quot;defType&quot;: &quot;edismax&quot;,
        &quot;f.all.qf&quot;: &quot;id compName_s address_s&quot;
   }
}
&apos;
{
  &quot;responseHeader&quot;:{
    &quot;status&quot;:0,
    &quot;QTime&quot;:42,
    &quot;params&quot;:{
      &quot;json&quot;:&quot;\n{\n    \&quot;query\&quot;: \&quot;+all:belkin\&quot;,\n    \&quot;fields\&quot;: \&quot;id compName_s\&quot;,\n    \&quot;offset\&quot;: 0,\n    \&quot;limit\&quot;: 10,\n    \&quot;params\&quot;: {\n        \&quot;defType\&quot;: \&quot;edismax\&quot;,\n        \&quot;f.all.qf\&quot;: \&quot;id compName_s address_s\&quot;\n   }\n}\n&quot;}},
  &quot;response&quot;:{&quot;numFound&quot;:1,&quot;start&quot;:0,&quot;numFoundExact&quot;:true,&quot;docs&quot;:[
      {
        &quot;id&quot;:&quot;belkin&quot;,
        &quot;compName_s&quot;:&quot;Belkin&quot;}]
  }}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;With 9.4.0 ...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hossman@slate:~/lucene/solr [j11] [tags/releases/solr/9.4.0] $ curl &apos;http://localhost:8983/solr/techproducts/query&apos; -d &apos;
{          
    &quot;query&quot;: &quot;+all:belkin&quot;,
    &quot;fields&quot;: &quot;id compName_s&quot;,
    &quot;offset&quot;: 0,
    &quot;limit&quot;: 10,
    &quot;params&quot;: {
        &quot;defType&quot;: &quot;edismax&quot;,
        &quot;f.all.qf&quot;: &quot;id compName_s address_s&quot;
   }
}
&apos;
{
  &quot;responseHeader&quot;:{
    &quot;status&quot;:400,
    &quot;QTime&quot;:1,
    &quot;params&quot;:{
      &quot;json&quot;:&quot;\n{\n    \&quot;query\&quot;: \&quot;+all:belkin\&quot;,\n    \&quot;fields\&quot;: \&quot;id compName_s\&quot;,\n    \&quot;offset\&quot;: 0,\n    \&quot;limit\&quot;: 10,\n    \&quot;params\&quot;: {\n        \&quot;defType\&quot;: \&quot;edismax\&quot;,\n        \&quot;f.all.qf\&quot;: \&quot;id compName_s address_s\&quot;\n   }\n}\n&quot;
    }
  },
  &quot;error&quot;:{
    &quot;metadata&quot;:[&quot;error-class&quot;,&quot;org.apache.solr.common.SolrException&quot;,&quot;root-error-class&quot;,&quot;org.apache.solr.common.SolrException&quot;],
    &quot;msg&quot;:&quot;undefined field all&quot;,
    &quot;code&quot;:400
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;stack trace shows edismax is ignored in 9.4...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2023-10-24 17:21:58.312 ERROR (qtp1535026957-17) [ x:techproducts t:localhost-26] o.a.s.h.RequestHandlerBase Client exception =&amp;gt; org.apache.solr.common.SolrException: undefined field all
        at org.apache.solr.schema.IndexSchema.getDynamicFieldType(IndexSchema.java:1478)
org.apache.solr.common.SolrException: undefined field all
        at org.apache.solr.schema.IndexSchema.getDynamicFieldType(IndexSchema.java:1478) ~[?:?]
        at org.apache.solr.schema.IndexSchema$SolrQueryAnalyzer.getWrappedAnalyzer(IndexSchema.java:500) ~[?:?]
        at org.apache.lucene.analysis.DelegatingAnalyzerWrapper$DelegatingReuseStrategy.getReusableComponents(DelegatingAnalyzerWrapper.java:83) ~[?:?]
        at org.apache.lucene.analysis.Analyzer.tokenStream(Analyzer.java:184) ~[?:?]
        at org.apache.lucene.util.QueryBuilder.createFieldQuery(QueryBuilder.java:256) ~[?:?]
        at org.apache.solr.parser.SolrQueryParserBase.newFieldQuery(SolrQueryParserBase.java:527) ~[?:?]
        at org.apache.solr.parser.QueryParser.newFieldQuery(QueryParser.java:68) ~[?:?]
        at org.apache.solr.parser.SolrQueryParserBase.getFieldQuery(SolrQueryParserBase.java:1140) ~[?:?]
        at org.apache.solr.parser.SolrQueryParserBase.handleBareTokenQuery(SolrQueryParserBase.java:856) ~[?:?]
        at org.apache.solr.parser.QueryParser.Term(QueryParser.java:454) ~[?:?]
        at org.apache.solr.parser.QueryParser.Clause(QueryParser.java:293) ~[?:?]
        at org.apache.solr.parser.QueryParser.Query(QueryParser.java:173) ~[?:?]
        at org.apache.solr.parser.QueryParser.TopLevelQuery(QueryParser.java:143) ~[?:?]
        at org.apache.solr.parser.SolrQueryParserBase.parse(SolrQueryParserBase.java:274) ~[?:?]
        at org.apache.solr.search.LuceneQParser.parse(LuceneQParser.java:51) ~[?:?]
        at org.apache.solr.search.QParser.getQuery(QParser.java:188) ~[?:?]
        at org.apache.solr.handler.component.QueryComponent.prepare(QueryComponent.java:172) ~[?:?]
        at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:431) ~[?:?]
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:226) ~[?:?]
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:2901) ~[?:?]
        at org.apache.solr.servlet.HttpSolrCall.executeCoreRequest(HttpSolrCall.java:875) ~[?:?]
        at org.apache.solr.servlet.HttpSolrCall.call(HttpSolrCall.java:561) ~[?:?]
        at org.apache.solr.servlet.SolrDispatchFilter.dispatch(SolrDispatchFilter.java:262) ~[?:?]
        at org.apache.solr.servlet.SolrDispatchFilter.lambda$doFilter$0(SolrDispatchFilter.java:219) ~[?:?]
        at org.apache.solr.servlet.ServletUtils.traceHttpRequestExecution2(ServletUtils.java:246) ~[?:?]
        at org.apache.solr.servlet.ServletUtils.rateLimitRequest(ServletUtils.java:215) ~[?:?]
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:213) ~[?:?]
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:195) ~[?:?]
        at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:210) ~[jetty-servlet-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1635) ~[jetty-servlet-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:527) ~[jetty-servlet-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:131) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:598) ~[jetty-security-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:122) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:223) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1570) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:221) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1384) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:176) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:484) ~[jetty-servlet-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1543) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:174) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1306) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:129) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:149) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.handler.InetAccessHandler.handle(InetAccessHandler.java:228) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:141) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:122) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.rewrite.handler.RewriteHandler.handle(RewriteHandler.java:301) ~[jetty-rewrite-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:122) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:822) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:122) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.Server.handle(Server.java:563) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.HttpChannel$RequestDispatchable.dispatch(HttpChannel.java:1598) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:753) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:501) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:287) ~[jetty-server-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:314) ~[jetty-io-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:100) ~[jetty-io-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.io.SelectableChannelEndPoint$1.run(SelectableChannelEndPoint.java:53) ~[jetty-io-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:969) ~[jetty-util-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob(QueuedThreadPool.java:1194) ~[jetty-util-10.0.17.jar:10.0.17]
        at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1149) ~[jetty-util-10.0.17.jar:10.0.17]
        at java.lang.Thread.run(Thread.java:829) [?:?]

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17780097" author="dsmiley" created="Thu, 26 Oct 2023 21:09:36 +0000"  >&lt;p&gt;Created and linked &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17057&quot; title=&quot;JSON Query regression; defType doesn&amp;#39;t work in &amp;quot;params&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17057&quot;&gt;&lt;del&gt;SOLR-17057&lt;/del&gt;&lt;/a&gt; with reproducing test&lt;/p&gt;</comment>
                            <comment id="17780102" author="hossman" created="Thu, 26 Oct 2023 21:40:43 +0000"  >&lt;p&gt;Thanks David: but i&apos;m still really unclear about the core question(s) i asked...&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;... what was intended to happen here?&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;...&lt;/li&gt;
	&lt;li&gt;...&lt;/li&gt;
	&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;The Jira summary/description ie: &quot;JSON Query DSL doesn&apos;t work if defType isn&apos;t lucene&quot; as a description of a problem that&apos;s been &quot;Fixed&quot; seems to directly contradict the CHANGES entry: &quot;Use of the JSON Query DSL should ignore the defType parameter&quot;&lt;/p&gt;

&lt;p&gt;Was the goal here to intentionally &quot;ignore the defType parameter&quot; or to &quot;fix&quot; some behavior that &quot;broke in 7.2&quot; when people want to use &lt;tt&gt;edismax&lt;/tt&gt; with the JSON Query DSL?&#160;&lt;/p&gt;

&lt;p&gt;(As i mentioned, according to the user reports: using &lt;tt&gt;defTtype=edismax&lt;/tt&gt; with JSON Query DSL worked just fine until this issue &#8211; so AFAICT the test added by this Jira just demonstrates that the change committed causes the ed&lt;tt&gt;ismax&lt;/tt&gt; default to be ignored ... so i&apos;m not sure what bug this was trying to fix)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;d really like to clear this up so it&apos;s self documenting here in the Jira for anyone else who is confused by the new behavior and follows the same bread crumbs i did.&lt;/p&gt;</comment>
                            <comment id="17780118" author="dsmiley" created="Thu, 26 Oct 2023 23:00:28 +0000"  >&lt;p&gt;defType is the query parser to use for &quot;q&quot; (as we all know). &#160;But if the user uses the JSON Query DSL &lt;ins&gt;with JSON for the value of the query&lt;/ins&gt; (vs a String), then defType should either be ignored (what I did here) or maybe we consider it an error. &#160;Or let it be as it was but it&apos;s kind of a sneaky issue.&lt;/p&gt;

&lt;p&gt;For reference, the test here in TestJsonRequestWithEdismaxDefType posts the following JSON:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-json&quot;&gt;
{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;query&quot;&lt;/span&gt;:{
    &lt;span class=&quot;code-quote&quot;&gt;&quot;bool&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;should&quot;&lt;/span&gt;:[{&lt;span class=&quot;code-quote&quot;&gt;&quot;lucene&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;query&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;id:1&quot;&lt;/span&gt;}}, &lt;span class=&quot;code-quote&quot;&gt;&quot;id:2&quot;&lt;/span&gt;]}
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In the JSON Query DSL, &quot;query&quot; is an alias for &quot;q&quot;.  Its value is JSON (not a string) in this example but it may be a string.  The internal workings convert this JSON to a local-params based structure that must be parsed by the lucene query parser (not edismax or anything else).&lt;/p&gt;</comment>
                            <comment id="17780129" author="dsmiley" created="Fri, 27 Oct 2023 00:58:55 +0000"  >&lt;p&gt;Sigh; this may warrant a 9.4.1&lt;/p&gt;</comment>
                            <comment id="17792123" author="dweiss" created="Fri, 1 Dec 2023 16:01:01 +0000"  >&lt;p&gt;I just hit this one and it seems like a regression to me - everything worked up until 9.3.0. Queries are strings (in JSON requests), but the default query parser is switched to a different one in solrconfig.xml:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;defType&quot;&lt;/span&gt;&amp;gt;customParser&amp;lt;/str&amp;gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;After upgrading to 9.4.0, the server seems to ignore this parameter completely and fails to parse queries.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13555737">SOLR-17057</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13110042">SOLR-11501</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1jiv4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>