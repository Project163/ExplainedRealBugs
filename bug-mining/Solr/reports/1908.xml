<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:50:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6039] debug=track causes debug=query info to be suppressed when no results found</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6039</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Shamik Bandopadhyay noted on the mailing list that debugQuery=true wasn&apos;t returning info about how the query was being parsed in SolrCloud.&lt;/p&gt;

&lt;p&gt;Steps to reproduce...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;startup a simple 2 shard solr cluster using the example configs&lt;/li&gt;
	&lt;li&gt;Load this URL:
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;http://localhost:8983/solr/select?q=Foo&amp;amp;debug=query&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/select?q=Foo&amp;amp;debug=query&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;note that the debug=query causes a debug block including &quot;parsedquery&quot; showing &quot;title:foo&quot;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Load either of these URLs:
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;http://localhost:8983/solr/select?q=Foo&amp;amp;debug=query&amp;amp;debug=track&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/select?q=Foo&amp;amp;debug=query&amp;amp;debug=track&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;&lt;a href=&quot;http://localhost:8983/solr/select?q=Foo&amp;amp;debugQuery=true&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/select?q=Foo&amp;amp;debugQuery=true&lt;/a&gt; (legacy short hand option for enabling all debug options)&lt;/li&gt;
		&lt;li&gt;Note that the debug block exists, but &lt;b&gt;only&lt;/b&gt; includes the distributed &quot;track&quot; options - the query parsing debugging info is not available&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;index the sample data (java -jar post.jar *.xml)&lt;/li&gt;
	&lt;li&gt;Load either of these URLs:
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;http://localhost:8983/solr/select?q=Solr&amp;amp;debugQuery=true&amp;amp;fl=id&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/select?q=Solr&amp;amp;debugQuery=true&amp;amp;fl=id&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;&lt;a href=&quot;http://localhost:8983/solr/select?q=Solr&amp;amp;debug=query&amp;amp;debug=track&amp;amp;fl=id&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/select?q=Solr&amp;amp;debug=query&amp;amp;debug=track&amp;amp;fl=id&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;Note that now we have at least one matching doc, and the parsedquery info is included in the debug block along with the tracking info&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Load either of these URLs:
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;http://localhost:8983/solr/select?q=Solr&amp;amp;debug=query&amp;amp;debug=track&amp;amp;rows=0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/select?q=Solr&amp;amp;debug=query&amp;amp;debug=track&amp;amp;rows=0&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;&lt;a href=&quot;http://localhost:8983/solr/select?q=Solr&amp;amp;debug=query&amp;amp;debug=track&amp;amp;rows=0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/select?q=Solr&amp;amp;debug=query&amp;amp;debug=track&amp;amp;rows=0&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;Note: even though we have a matching doc, since rows=0 prevents it from being returned, the parsedquery debug info again no longer works - just the track debug info&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;

&lt;p&gt;The work around, for people who want don&apos;t care about the newer &quot;debug tracking&quot; and what the same debug information as pre-4.7, is to enumerate the debug options (ie: &lt;tt&gt;debug=query&amp;amp;debug=timing&amp;amp;debug=results&lt;/tt&gt;) instead of relying on the shorthand: &lt;tt&gt;debugQuery=true&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12711853">SOLR-6039</key>
            <summary>debug=track causes debug=query info to be suppressed when no results found</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tflobbe">Tomas Eduardo Fernandez Lobbe</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 May 2014 22:50:52 +0000</created>
                <updated>Mon, 9 May 2016 18:51:02 +0000</updated>
                            <resolved>Mon, 5 May 2014 19:00:36 +0000</resolved>
                                    <version>4.7</version>
                                    <fixVersion>4.8.1</fixVersion>
                    <fixVersion>4.9</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13987159" author="elyograg" created="Thu, 1 May 2014 23:18:50 +0000"  >&lt;p&gt;I had noticed this with a non-cloud distributed search on Solr 4.7.  It was causing problems when trying to figure out why a search wasn&apos;t returning results.  I sent the query directly to a shard to get the info, and put the problem in the mental category of &quot;Report it later when there&apos;s time.&quot;&lt;/p&gt;</comment>
                            <comment id="13987237" author="tomasflobbe" created="Fri, 2 May 2014 01:11:29 +0000"  >&lt;p&gt;I&apos;m looking into this issue. This patch would fix the problem described in the users list with the query explain, but not yet the with the timing. &lt;br/&gt;
I kind of see where the timing issue is too, but I&apos;m wondering if this is expected. Seems like the timing info should be merged in DebugComponent.finishStage(...), but as it is now, it would only consider the time spent in the phases with GET_DEBUG purpose. This purpose is only included in in the GET_FIELDS phase, we would not be considering time in parts of the request?&lt;br/&gt;
In addition, once it gets the timing information from the shards it adds it. I think it would be better if it get the max value instead? after all, the time in each phase will be the time the slowest shard took, right?&lt;/p&gt;</comment>
                            <comment id="13987923" author="tomasflobbe" created="Fri, 2 May 2014 17:12:38 +0000"  >&lt;p&gt;This patch adds the timing info in all phases. The times responded by shards are still being added&lt;/p&gt;</comment>
                            <comment id="13988325" author="hossman" created="Fri, 2 May 2014 22:05:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;This patch adds the timing info in all phases. The times responded by shards are still being added&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah ... i think for now it makes sense to just &quot;fix&quot; the bug relating ot wether the info comes back - but leave the definition the same as it&apos;s been and leave the question for wether the timing info should be &quot;merged&quot; differnetly for another issue (i can see different advantages to both sum vs max)&lt;/p&gt;

&lt;p&gt;I didnt&apos; fully understand the changes you made when skimming your patch &amp;#8211; but i did understand your test, and it looks good &amp;amp; fairly ccomprehensive and fills me with confidence that the fix is correct.  One thing i thing i noticed was still missing though is some testing of picking multiple options (ie: &quot;debug=query&amp;amp;debug=timing&quot;) so i&apos;ve added a randomized testing method that accounts for that case 9among other things)&lt;/p&gt;

</comment>
                            <comment id="13988329" author="tomasflobbe" created="Fri, 2 May 2014 22:10:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;i think for now it makes sense to just &quot;fix&quot; the bug relating ot wether the info comes back &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I agree now. When I started to think how to use max vs sum in some situations I saw the changes were not trivial, better to leave that for a different Jira. &lt;/p&gt;

&lt;p&gt;I was about to upload a new patch with some more changes and tests, please give me some time until I merge with your changes before committing.&lt;/p&gt;</comment>
                            <comment id="13988391" author="tomasflobbe" created="Fri, 2 May 2014 23:01:42 +0000"  >&lt;blockquote&gt;&lt;p&gt;I didnt&apos; fully understand the changes you made when skimming your patch&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Besides adding the query section when there are no &quot;GET_DEBUG_PURPOSE&quot; requests (that it&apos;s on on the GET_FIELDS phase), one thing that changes with the patch is that the shard requests for all phases will require &quot;debug=timing&quot; if timing is needed. Then after the final phase those times are added. &lt;br/&gt;
Before this change, the timing section didn&apos;t come back on queries with no docs (this is I think a previous than &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5399&quot; title=&quot;Improve DebugComponent for distributed requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5399&quot;&gt;&lt;del&gt;SOLR-5399&lt;/del&gt;&lt;/a&gt;), now it does. &lt;br/&gt;
Another implication with this change is that all shard requests will be considered, and not only the last phase (will now show higher times). As I say before, the times for all shard responses are being added, and because many of those requests are sent in parallel, this means that the timing displayed may be higher than the clock time of the request. I think this is useful information anyway and should be considered more as a metric of how much each component is taking in all the request. &lt;/p&gt;</comment>
                            <comment id="13989841" author="jira-bot" created="Mon, 5 May 2014 18:54:10 +0000"  >&lt;p&gt;Commit 1592605 from hossman@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1592605&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1592605&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6039&quot; title=&quot;debug=track causes debug=query info to be suppressed when no results found&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6039&quot;&gt;&lt;del&gt;SOLR-6039&lt;/del&gt;&lt;/a&gt;: fixed debug output when no results in response&lt;/p&gt;</comment>
                            <comment id="13989849" author="jira-bot" created="Mon, 5 May 2014 18:58:47 +0000"  >&lt;p&gt;Commit 1592609 from hossman@apache.org in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1592609&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1592609&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6039&quot; title=&quot;debug=track causes debug=query info to be suppressed when no results found&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6039&quot;&gt;&lt;del&gt;SOLR-6039&lt;/del&gt;&lt;/a&gt;: fixed debug output when no results in response (merge r1592605)&lt;/p&gt;</comment>
                            <comment id="13989850" author="hossman" created="Mon, 5 May 2014 19:00:36 +0000"  >&lt;p&gt;thanks Tomas&lt;/p&gt;

&lt;p&gt;I&apos;ll let jenkins hammer this for a day or so and then look into back-porting for 4.8.1&lt;/p&gt;</comment>
                            <comment id="13990916" author="jira-bot" created="Tue, 6 May 2014 18:11:31 +0000"  >&lt;p&gt;Commit 1592821 from hossman@apache.org in branch &apos;dev/branches/lucene_solr_4_8&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1592821&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1592821&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Merge back several &quot;low hanging&quot; bug fixes into the 4.8 branch...&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6029&quot; title=&quot;CollapsingQParserPlugin throws ArrayIndexOutOfBoundsException if elevated doc has been deleted from a segment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6029&quot;&gt;&lt;del&gt;SOLR-6029&lt;/del&gt;&lt;/a&gt;: r1590867&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6030&quot; title=&quot;Use System.nanoTime() instead of currentTimeInMills() in LRUCache.warm&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6030&quot;&gt;&lt;del&gt;SOLR-6030&lt;/del&gt;&lt;/a&gt;: r1591555&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6037&quot; title=&quot;Stats Component Reports Incorrect max/sum/stddev for date fields in Distributed Data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6037&quot;&gt;&lt;del&gt;SOLR-6037&lt;/del&gt;&lt;/a&gt;: r1591800&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6023&quot; title=&quot;NPE in /admin/field with no parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6023&quot;&gt;&lt;del&gt;SOLR-6023&lt;/del&gt;&lt;/a&gt;: r1592195&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5090&quot; title=&quot;NPE in DirectSpellChecker with alternativeTermCount and mm.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5090&quot;&gt;&lt;del&gt;SOLR-5090&lt;/del&gt;&lt;/a&gt;: r1592591&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6039&quot; title=&quot;debug=track causes debug=query info to be suppressed when no results found&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6039&quot;&gt;&lt;del&gt;SOLR-6039&lt;/del&gt;&lt;/a&gt;: r1592605&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5993&quot; title=&quot;ZkController can warn about shard leader conflict after conflict resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5993&quot;&gt;&lt;del&gt;SOLR-5993&lt;/del&gt;&lt;/a&gt;: r1588415&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5904&quot; title=&quot;ElectionContext can cancel an election when it should not if there was an exception while trying to register as the leader.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5904&quot;&gt;&lt;del&gt;SOLR-5904&lt;/del&gt;&lt;/a&gt;: r1587702&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12676267">SOLR-5399</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12643146" name="SOLR-6039.patch" size="18287" author="tflobbe" created="Fri, 2 May 2014 22:49:59 +0000"/>
                            <attachment id="12643139" name="SOLR-6039.patch" size="13362" author="hossman" created="Fri, 2 May 2014 22:05:40 +0000"/>
                            <attachment id="12643076" name="SOLR-6039.patch" size="9426" author="tflobbe" created="Fri, 2 May 2014 17:12:38 +0000"/>
                            <attachment id="12642978" name="SOLR-6039.patch" size="6650" author="tflobbe" created="Fri, 2 May 2014 01:11:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390173</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1v7f3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390410</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>