<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:22:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-2458] post.jar fails on non-XML updateHandlers</title>
                <link>https://issues.apache.org/jira/browse/SOLR-2458</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;SimplePostTool.java by default tries to issue a commit after posting.&lt;br/&gt;
Problem is that it does this by appending &quot;&amp;lt;commit/&amp;gt;&quot; to the stream.&lt;br/&gt;
This does not work when using non-XML requesthandler, such as CSV.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12503495">SOLR-2458</key>
            <summary>post.jar fails on non-XML updateHandlers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="janhoy">Jan H&#248;ydahl</assignee>
                                    <reporter username="janhoy">Jan H&#248;ydahl</reporter>
                        <labels>
                            <label>post.jar</label>
                    </labels>
                <created>Wed, 6 Apr 2011 09:28:44 +0000</created>
                <updated>Fri, 16 Sep 2011 14:48:49 +0000</updated>
                            <resolved>Sun, 26 Jun 2011 10:56:49 +0000</resolved>
                                                    <fixVersion>3.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13016314" author="janhoy" created="Wed, 6 Apr 2011 09:32:29 +0000"  >&lt;p&gt;Example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;lap:exampledocs janhoy$ java -Durl=http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr/update/csv -jar post.jar books.csv
&lt;/span&gt;SimplePostTool: version 1.3
SimplePostTool: POSTing files to http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr/update/csv..
&lt;/span&gt;SimplePostTool: POSTing file books.csv
SimplePostTool: COMMITting Solr index changes..
SimplePostTool: FATAL: Solr returned an error #400 undefined field &amp;lt;commit/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The commit should be sent in a different way, problem is how to know where and how to send the commit in case of non-standard URLs, such as &lt;a href=&quot;http://localhost:8983/solr/my/custom/updatehandler&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/my/custom/updatehandler&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13016326" author="thetaphi" created="Wed, 6 Apr 2011 10:06:52 +0000"  >&lt;p&gt;The commit could be snet at the end as a single xml document in a separate request if the content type of data is different.&lt;/p&gt;</comment>
                            <comment id="13016329" author="janhoy" created="Wed, 6 Apr 2011 10:15:40 +0000"  >&lt;p&gt;How would post.jar know the URL of the XmlUpdateRequestHandler?&lt;br/&gt;
A) We could assume .*/solr/update as 99% would not modify the defaults?&lt;br/&gt;
Or&lt;br/&gt;
B) Assume that all UpdateRequestHandlers support a GET parameter commit=true&lt;br/&gt;
In that case, we could append &quot;?commit=true&quot; to the given URL.&lt;br/&gt;
I know for a fact that &quot;/solr/update/csv?commit=true&quot; will work&lt;/p&gt;</comment>
                            <comment id="13016395" author="yseeley@gmail.com" created="Wed, 6 Apr 2011 14:45:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;Assume that all UpdateRequestHandlers support a GET parameter commit=true&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think we should assume this, and fix anything where it doesn&apos;t work.&lt;/p&gt;</comment>
                            <comment id="13016468" author="hossman" created="Wed, 6 Apr 2011 18:05:18 +0000"  >
&lt;p&gt;post.jar has hardcoded assumptions about what URL you want to hit and how it should behave &amp;#8211; if you want to change those assumptions there are documented params for changing it.  -Durl=... and -Dcommit=false.&lt;/p&gt;

&lt;p&gt;if you want to post to something that isn&apos;t the XmlRequestHandler, you should specify -Dcommit=false, and then you can follow that with an explicit execution to commit...&lt;/p&gt;

&lt;p&gt;java -Durl=... -jar post.jar *.cssv&lt;br/&gt;
java -jar post.jar&lt;/p&gt;

&lt;p&gt;part of the reason it works the way it does now is that when commit=true it POSTs a single commit at the end of multiple file POSTs, if we use the param based commit it would either need to specify commit on all of them, or keep track of the last one only add the param there.&lt;/p&gt;

&lt;p&gt;i don&apos;t object to changing post.jar to use a commit request param instead of sending the XML form, but this isn&apos;t a bug &amp;#8211; it&apos;s working as it was intended.&lt;/p&gt;</comment>
                            <comment id="13016471" author="yseeley@gmail.com" created="Wed, 6 Apr 2011 18:12:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;part of the reason it works the way it does now is that when commit=true it POSTs a single commit at the end of multiple file POSTs, if we use the param based commit it would either need to specify commit on all of them, or keep track of the last one only add the param there.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Although only adding a &quot;commit&quot; on the last update should be easy, we could also just do it via the URL.  I believe posting &quot;?commit=true&quot; to update handlers w/o a body works?&lt;/p&gt;</comment>
                            <comment id="13016527" author="janhoy" created="Wed, 6 Apr 2011 20:53:37 +0000"  >&lt;p&gt;It might not be a bug according to the original design intentions. But the first thing we tell users is to try out post.jar to post stuff, and now we&apos;ve even included csv and json examples for it. Then it&apos;s unnecessary to get the error &quot;Solr returned an error #400 undefined field &amp;lt;commit/&amp;gt;&quot; thrown in your face - the error does not even explain the problem.&lt;/p&gt;

&lt;p&gt;I&apos;ll try to assemble a first patch for this next week some time, adding a separate POST with ?commit=true after the last file is POSTed.&lt;/p&gt;</comment>
                            <comment id="13029286" author="janhoy" created="Thu, 5 May 2011 11:13:56 +0000"  >&lt;p&gt;The solution was simple. Change the commit() method to do ?commit=true instead of posting as &quot;&amp;lt;commit/&amp;gt;&quot;&lt;/p&gt;

&lt;p&gt;Also cleaned up dead meat, added a -Doptimize=yes option and accepts -h and --help in addition to -help&lt;/p&gt;</comment>
                            <comment id="13029293" author="janhoy" created="Thu, 5 May 2011 11:59:21 +0000"  >&lt;p&gt;This new patch bumps version number to 1.4 and adds examples to the help of how to post csv, json and pdf&lt;/p&gt;</comment>
                            <comment id="13030693" author="janhoy" created="Mon, 9 May 2011 11:50:24 +0000"  >&lt;p&gt;Anyone fancy testing this and consider for commit?&lt;/p&gt;</comment>
                            <comment id="13030721" author="markrmiller@gmail.com" created="Mon, 9 May 2011 13:09:56 +0000"  >&lt;p&gt;Hey Jan - putting this on my to-do list in the case that someone does not beat me to it. You have a variety of issues out there that I&apos;d like to get to I think - sorry for the delay. You have been a fantastic addition to the project.&lt;/p&gt;</comment>
                            <comment id="13033832" author="janhoy" created="Sun, 15 May 2011 22:02:59 +0000"  >&lt;p&gt;Marking fo 3.2 since patch is ready&lt;/p&gt;</comment>
                            <comment id="13043721" author="rcmuir" created="Fri, 3 Jun 2011 16:46:44 +0000"  >&lt;p&gt;Bulk move 3.2 -&amp;gt; 3.3&lt;/p&gt;</comment>
                            <comment id="13052407" author="janhoy" created="Tue, 21 Jun 2011 07:44:21 +0000"  >&lt;p&gt;Has anyone got around to inspecting this patch? I&apos;d like to get this into 3.3.&lt;/p&gt;</comment>
                            <comment id="13052766" author="hossman" created="Tue, 21 Jun 2011 18:58:10 +0000"  >&lt;p&gt;Jan: +1&lt;/p&gt;</comment>
                            <comment id="13055037" author="janhoy" created="Sun, 26 Jun 2011 09:06:18 +0000"  >&lt;p&gt;Attaching final patch which will be committed shortly. Added better error handling.&lt;/p&gt;</comment>
                            <comment id="13055048" author="janhoy" created="Sun, 26 Jun 2011 10:56:49 +0000"  >&lt;p&gt;Committed for trunk and 3.x&lt;/p&gt;</comment>
                            <comment id="13106193" author="rcmuir" created="Fri, 16 Sep 2011 14:48:49 +0000"  >&lt;p&gt;bulk close for 3.4&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12483839" name="SOLR-2458.patch" size="6050" author="janhoy" created="Sun, 26 Jun 2011 09:06:18 +0000"/>
                            <attachment id="12478269" name="SOLR-2458.patch" size="5543" author="janhoy" created="Thu, 5 May 2011 11:59:21 +0000"/>
                            <attachment id="12478268" name="SOLR-2458.patch" size="4579" author="janhoy" created="Thu, 5 May 2011 11:13:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5078</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03kmn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18775</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>