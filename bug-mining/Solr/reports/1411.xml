<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:36:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4849] Fix test failure due to not substituting in system properties</title>
                <link>https://issues.apache.org/jira/browse/SOLR-4849</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When we look at old-style solr.xml files, we try to test whether more than one core points to the same data dir. When constructing the paths, we need to substitute in any system-defined properties.&lt;/p&gt;

&lt;p&gt;This happens to work fine on a Mac (and unix in general?) but results in an illegal file name exception on Windows machines.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12648763">SOLR-4849</key>
            <summary>Fix test failure due to not substituting in system properties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="erickerickson">Erick Erickson</assignee>
                                    <reporter username="erickerickson">Erick Erickson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 May 2013 23:09:53 +0000</created>
                <updated>Mon, 9 May 2016 18:45:05 +0000</updated>
                            <resolved>Wed, 22 May 2013 21:33:06 +0000</resolved>
                                    <version>4.3</version>
                    <version>6.0</version>
                                    <fixVersion>4.4</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13663616" author="hossman" created="Wed, 22 May 2013 00:10:05 +0000"  >&lt;p&gt;Erick: dup of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4810&quot; title=&quot;Various SolrJ tests fail on windows because missing property expansion (on Linux, too - but causes no error)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4810&quot;&gt;&lt;del&gt;SOLR-4810&lt;/del&gt;&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="13663617" author="erickerickson" created="Wed, 22 May 2013 00:11:18 +0000"  >&lt;p&gt;Can some kind soul on a Windows machine try this patch (made on 4x)? These tests should fail first time, every time w/o this patch on a Windows box:&lt;/p&gt;

&lt;p&gt;org.apache.solr.client.solrj.request.TestCoreAdmin.testCustomUlogDir&lt;/p&gt;

&lt;p&gt;org.apache.solr.client.solrj.request.TestCoreAdmin.testErrorCases&lt;/p&gt;

&lt;p&gt;org.apache.solr.client.solrj.embedded.TestSolrProperties.testProperties&lt;/p&gt;

&lt;p&gt;with:&lt;br/&gt;
Caused by: java.io.IOException: The filename, directory name, or volume label syntax is incorrect&lt;/p&gt;


&lt;p&gt;And should this be back-ported to 4.3.1?&lt;/p&gt;</comment>
                            <comment id="13663618" author="erickerickson" created="Wed, 22 May 2013 00:14:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman_lucene%40fucit.org&quot; class=&quot;user-hover&quot; rel=&quot;hossman_lucene@fucit.org&quot;&gt;hossman_lucene@fucit.org&lt;/a&gt; Yep, since I just attached the patch here, I&apos;ll close 4810 and point it here. Thanks.&lt;/p&gt;

&lt;p&gt;I was wondering how it got magically linked....&lt;/p&gt;</comment>
                            <comment id="13663624" author="erickerickson" created="Wed, 22 May 2013 00:25:33 +0000"  >&lt;p&gt;All tests pass, so if nobody has the time/inclination I&apos;ll just check it in in the morning.&lt;/p&gt;</comment>
                            <comment id="13663747" author="elyograg" created="Wed, 22 May 2013 04:16:25 +0000"  >&lt;p&gt;Tests still fail on Windows, patch applied to branch_4x. &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[junit4:junit4] Tests with failures:
[junit4:junit4]   - org.apache.solr.client.solrj.request.TestCoreAdmin.testCustomUlogDir
[junit4:junit4]   - org.apache.solr.client.solrj.embedded.TestEmbeddedSolrServer.testGetCoreContainer
[junit4:junit4]   - org.apache.solr.client.solrj.request.TestCoreAdmin.testErrorCases
[junit4:junit4]   - org.apache.solr.client.solrj.embedded.TestEmbeddedSolrServer.testShutdown
[junit4:junit4]   - org.apache.solr.client.solrj.embedded.TestSolrProperties.testProperties
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[junit4:junit4]   2&amp;gt; NOTE: Windows 8 6.2 amd64/Oracle Corporation 1.7.0_21 (64-bit)/cpus=4,threads=1,free=254383696,total=306380800
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13663757" author="elyograg" created="Wed, 22 May 2013 04:37:32 +0000"  >&lt;p&gt;I ran the test again after &apos;svn up&apos; (which just added Robert&apos;s commit on &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-4992&quot; title=&quot;ArrayOutOfBoundsException in BooleanScorer2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-4992&quot;&gt;&lt;del&gt;LUCENE-4992&lt;/del&gt;&lt;/a&gt;) and now those tests are all good, I got a completely different failure:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;junit4:junit4&amp;#93;&lt;/span&gt; Tests with failures:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit4:junit4&amp;#93;&lt;/span&gt;   - org.apache.solr.cloud.ChaosMonkeyShardSplitTest.testDistribSearch&lt;/p&gt;

&lt;p&gt;I can&apos;t explain this.  I will do some additional runs.&lt;/p&gt;</comment>
                            <comment id="13663771" author="elyograg" created="Wed, 22 May 2013 04:57:37 +0000"  >&lt;p&gt;The confusion is now cleared up, it&apos;s definitely time for bed.&lt;/p&gt;

&lt;p&gt;The cloud test failure happened in solr/core, which meant that the other tests never even got run, because they are in solr/solrj.  On the next run, all core tests passed and the solrj tests once again failed.&lt;/p&gt;</comment>
                            <comment id="13664010" author="erickerickson" created="Wed, 22 May 2013 11:06:15 +0000"  >&lt;p&gt;Shawn:&lt;/p&gt;

&lt;p&gt;Thanks for testing, this is puzzling. If I may presume on your good nature, could try the new patch and send me the output? It&apos;s the same as the old, just prints out the offending data.&lt;/p&gt;

&lt;p&gt;BTW, in case you missed it (it took me quite a while to stumble over it) you can run the individual test suite by&lt;/p&gt;

&lt;p&gt;ant -Dtestcase=TestEmbeddedSolrServer test&lt;/p&gt;

&lt;p&gt;and an individual method in that file by &lt;/p&gt;

&lt;p&gt;ant -Dtestcase=TestEmbeddedSolrServer -Dtests.method=testShutdown  test&lt;/p&gt;

&lt;p&gt;and skip all the confusion...&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Erick&lt;/p&gt;</comment>
                            <comment id="13664170" author="steve_rowe" created="Wed, 22 May 2013 15:05:04 +0000"  >&lt;blockquote&gt;
&lt;p&gt;BTW, in case you missed it (it took me quite a while to stumble over it) you can run the individual test suite by&lt;/p&gt;

&lt;p&gt;ant -Dtestcase=TestEmbeddedSolrServer test&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right, and you can also run only the tests under solrj by first changing the current directory to the solrj directory: &lt;tt&gt;cd solr/solrj ; ant test&lt;/tt&gt;.  This works for all Lucene/Solr modules.&lt;/p&gt;</comment>
                            <comment id="13664233" author="elyograg" created="Wed, 22 May 2013 16:35:07 +0000"  >&lt;p&gt;Attached is the test output.  It&apos;s got MSDOS crlf line endings. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;This is on a Windows 7 system with Java 1.7u17, the runs from last night were on a Windows 8 system with 1.7u21.&lt;/p&gt;</comment>
                            <comment id="13664261" author="erickerickson" created="Wed, 22 May 2013 17:10:25 +0000"  >&lt;p&gt;One more time. If this doesn&apos;t work I&apos;ll bite the bullet and download a Windows VM to work with....&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Erick&lt;/p&gt;</comment>
                            <comment id="13664289" author="elyograg" created="Wed, 22 May 2013 17:29:49 +0000"  >&lt;p&gt;I think you&apos;ve nailed it this time.  The patch passes for me on both Linux and Windows, did two runs on each.&lt;/p&gt;</comment>
                            <comment id="13664432" author="erickerickson" created="Wed, 22 May 2013 19:18:57 +0000"  >&lt;p&gt;Many thanks, Shawn. I&apos;ll take out the nocommit and commit it this evening.&lt;/p&gt;</comment>
                            <comment id="13664490" author="commit-tag-bot" created="Wed, 22 May 2013 20:23:40 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; erick&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1485403&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1485403&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4849&quot; title=&quot;Fix test failure due to not substituting in system properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4849&quot;&gt;&lt;del&gt;SOLR-4849&lt;/del&gt;&lt;/a&gt;, test failures due to windows pathing issues&lt;/p&gt;</comment>
                            <comment id="13664551" author="commit-tag-bot" created="Wed, 22 May 2013 21:32:20 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; erick&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1485436&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1485436&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4849&quot; title=&quot;Fix test failure due to not substituting in system properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4849&quot;&gt;&lt;del&gt;SOLR-4849&lt;/del&gt;&lt;/a&gt;. Tests failing on Windows boxes&lt;/p&gt;</comment>
                            <comment id="13664553" author="erickerickson" created="Wed, 22 May 2013 21:33:06 +0000"  >&lt;p&gt;trunk: r-1485403&lt;br/&gt;
4x: r-1485436&lt;/p&gt;

&lt;p&gt;Thanks for testing Shawn!&lt;/p&gt;</comment>
                            <comment id="13716847" author="steve_rowe" created="Tue, 23 Jul 2013 18:38:45 +0000"  >&lt;p&gt;Bulk close resolved 4.4 issues&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12647178">SOLR-4810</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12584327" name="4849-testoutput.txt" size="33662" author="elyograg" created="Wed, 22 May 2013 16:35:07 +0000"/>
                            <attachment id="12584340" name="SOLR-4849.patch" size="4048" author="erickerickson" created="Wed, 22 May 2013 17:10:25 +0000"/>
                            <attachment id="12584288" name="SOLR-4849.patch" size="2894" author="erickerickson" created="Wed, 22 May 2013 11:06:15 +0000"/>
                            <attachment id="12584206" name="SOLR-4849.patch" size="2562" author="erickerickson" created="Wed, 22 May 2013 00:11:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>329093</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ks1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>329433</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>