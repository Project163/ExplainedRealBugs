<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:20:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9516] New UI doesn&apos;t work when Kerberos is enabled</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9516</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;It seems resources like &lt;a href=&quot;http://solr1:8983/solr/libs/chosen.jquery.js&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://solr1:8983/solr/libs/chosen.jquery.js&lt;/a&gt; encounter 403 error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2016-09-15 02:01:45.272 WARN  (qtp611437735-18) [   ] o.a.h.s.a.s.AuthenticationFilter Authentication exception: GSSException: Failure unspecified at GSS-API level (Mechanism level: Request is a replay (34))
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The old UI is fine.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13005056">SOLR-9516</key>
            <summary>New UI doesn&apos;t work when Kerberos is enabled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ichattopadhyaya">Ishan Chattopadhyaya</assignee>
                                    <reporter username="ichattopadhyaya">Ishan Chattopadhyaya</reporter>
                        <labels>
                            <label>javascript</label>
                            <label>newdev</label>
                            <label>security</label>
                    </labels>
                <created>Thu, 15 Sep 2016 02:08:43 +0000</created>
                <updated>Sat, 8 Jun 2019 15:28:54 +0000</updated>
                            <resolved>Wed, 15 Mar 2017 11:57:43 +0000</resolved>
                                                    <fixVersion>6.5</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                    <component>Admin UI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="15492079" author="ichattopadhyaya" created="Thu, 15 Sep 2016 02:09:53 +0000"  >&lt;p&gt;Here&apos;s a screenshot from Firefox&apos;s Web Console (Network tab) indicating the some of the resources that exhibited this problem.&lt;/p&gt;</comment>
                            <comment id="15540675" author="arafalov" created="Sun, 2 Oct 2016 17:14:47 +0000"  >&lt;p&gt;Which version of Solr is this reported against?&lt;/p&gt;</comment>
                            <comment id="15569094" author="loushang" created="Wed, 12 Oct 2016 15:52:47 +0000"  >&lt;p&gt;i get the same problem now. the solr version is 5.5.2 &lt;/p&gt;

&lt;p&gt;see the QQ20161012-0.png in the attachment&lt;/p&gt;</comment>
                            <comment id="15569832" author="arafalov" created="Wed, 12 Oct 2016 20:47:40 +0000"  >&lt;p&gt;Could you try that against Solr 6.2? Because there had been a large number of issues fixed both for UI and for various security components.&lt;/p&gt;</comment>
                            <comment id="15575614" author="ctargett" created="Fri, 14 Oct 2016 15:12:09 +0000"  >&lt;p&gt;I believe &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ichattopadhyaya&quot; class=&quot;user-hover&quot; rel=&quot;ichattopadhyaya&quot;&gt;ichattopadhyaya&lt;/a&gt;  was using 6.2 when he found the problem.&lt;/p&gt;</comment>
                            <comment id="15575623" author="loushang" created="Fri, 14 Oct 2016 15:14:24 +0000"  >&lt;p&gt;so you confirmed that this bug was not fixed in 6.2?&lt;/p&gt;</comment>
                            <comment id="15886401" author="ctargett" created="Mon, 27 Feb 2017 19:46:23 +0000"  >&lt;p&gt;If the plan is to remove the old Admin UI for Solr 7, then this needs to be considered a blocker for that.&lt;/p&gt;</comment>
                            <comment id="15886981" author="arafalov" created="Tue, 28 Feb 2017 01:10:22 +0000"  >&lt;p&gt;It would be a blocker if it worked in old UI and we had it replicated on the latest Solr. At the moment, we don&apos;t have either fact confirmed, nor do we have the replication instructions.&lt;/p&gt;

&lt;p&gt;I am not familiar with Kerberos setup, but if somebody provides replication instructions, I&apos;ll be happy to dig into it.&lt;/p&gt;</comment>
                            <comment id="15888054" author="ctargett" created="Tue, 28 Feb 2017 13:55:34 +0000"  >&lt;p&gt;Replication is pretty straightforward if you have Kerberos already in your env:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Setup Solr to use Kerberos authentication.&lt;/li&gt;
	&lt;li&gt;Try to use the admin UI. You can&apos;t, with the 403 errors as seen in previously attached screenshots.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The old Admin UI works fine.&lt;/p&gt;

&lt;p&gt;The rub here is that this requires setting up a Kerberos ticket server, etc., which really isn&apos;t the easiest thing in the world (I don&apos;t know how to do it, for example).&lt;/p&gt;

&lt;p&gt;Lucidworks has customers who have seen this, most recently using 6.4.1, so I can confirm it still exists in the latest Solr release. Ishan&apos;s initial report was against 6.2, so it&apos;s not just the latest; IMO we can assume it&apos;s all 6.x releases, and maybe even 5.5.2 per another reporter.&lt;/p&gt;

&lt;p&gt;There&apos;s a workaround for now - use the old UI - but if the old UI is removed, users with Kerberos auth will be unable to use the Admin UI. &lt;/p&gt;</comment>
                            <comment id="15889399" author="arafalov" created="Wed, 1 Mar 2017 02:52:03 +0000"  >&lt;p&gt;I am looking at: &lt;a href=&quot;https://cwiki.apache.org/confluence/display/solr/Kerberos+Authentication+Plugin&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/solr/Kerberos+Authentication+Plugin&lt;/a&gt;&lt;br/&gt;
It says:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In order for your browser to access the Solr Admin UI after enabling Kerberos authentication, it must be able to negotiate with the Kerberos authenticator service to allow you access. Each browser supports this differently, and some (like Chrome) do not support it at all. If you see 401 errors when trying to access the Solr Admin UI after enabling Kerberos authentication, it&apos;s likely your browser has not been configured properly to know how or where to negotiate the authentication request.&lt;/p&gt;

&lt;p&gt;Detailed information on how to set up your browser is beyond the scope of this documentation; please see your system administrators for Kerberos for details on how to configure your browser.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Are we - absolutely - sure that the exact same setup works with the old UI? Could we get full browser/network traces for a request made from old UI and from New UI? Preferably while the backend is actually running with full TRACE log.&lt;/p&gt;</comment>
                            <comment id="15889437" author="ichattopadhyaya" created="Wed, 1 Mar 2017 03:36:34 +0000"  >&lt;p&gt;I can confirm that the exact setup works fine with old UI, but doesn&apos;t work with new UI. I&apos;ll reproduce and &lt;b&gt;try to&lt;/b&gt; post logs. (When I saw this last time, I had no idea how to even copy logs)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sarkaramrit2%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;sarkaramrit2@gmail.com&quot;&gt;sarkaramrit2@gmail.com&lt;/a&gt;, would you have a chance to have a look at this issue, please? Given that you&apos;re actively working on the UI these days, and given my limited UI knowledge, I might need your help here.&lt;/p&gt;</comment>
                            <comment id="15895531" author="ichattopadhyaya" created="Sat, 4 Mar 2017 05:58:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;I am not familiar with Kerberos setup, but if somebody provides replication instructions, I&apos;ll be happy to dig into it.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/chatman/solr-kerberos-docker&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/chatman/solr-kerberos-docker&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15924775" author="sarkaramrit2@gmail.com" created="Tue, 14 Mar 2017 18:45:04 +0000"  >&lt;p&gt;Ishan, sorry I didn&apos;t respond earlier, didn&apos;t notice the mention.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://host:port/solr/libs&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://host:port/solr/libs&lt;/a&gt; was inaccessible as it was not listed in exclusion pattern for SolrDispatchFilter, hence it required authentication and UI failed to fetch the content from that path from webapp folder. Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctargett&quot; class=&quot;user-hover&quot; rel=&quot;ctargett&quot;&gt;ctargett&lt;/a&gt; for pin-pointing the above and suggesting the changes.&lt;/p&gt;

&lt;p&gt;We faced similar Kerberos 34 &lt;em&gt;Request is a Replay&lt;/em&gt; error for MBeans Request Handler:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr/[collection_name]/admin/mbeans?cat=CACHE&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and the changes listed below rectified that, not sure why it was broken and thus how it got fixed.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9516&quot; title=&quot;New UI doesn&amp;#39;t work when Kerberos is enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9516&quot;&gt;&lt;del&gt;SOLR-9516&lt;/del&gt;&lt;/a&gt;.patch uploaded with one line change in web.xml in webapp.&lt;/p&gt;</comment>
                            <comment id="15924793" author="ichattopadhyaya" created="Tue, 14 Mar 2017 18:53:16 +0000"  >&lt;p&gt;Amrit, I think it is fine to exclude the /solr/libs from being served through SDF (and hence leaving them unauthenticated), but that still doesn&apos;t explain why the authentication was failing for them. Excluding them from authentication makes sense due to performance reasons, but this is just a workaround to some other potential problem with SDF/Kerberos.&lt;/p&gt;

&lt;p&gt;If you&apos;re sure that other parts of UI also work fine (collections/core admin command buttons, zk/file tree etc.), then lets just commit the patch now and worry later as to why authentication wasn&apos;t working for /solr/lib endpoints (there could be some other problem with the way SDF works in certain cases).&lt;/p&gt;</comment>
                            <comment id="15924839" author="sarkaramrit2@gmail.com" created="Tue, 14 Mar 2017 19:19:39 +0000"  >&lt;p&gt;Ishan, all the buttons, commands, stats, tree, cloud, thread info, dashboard are working as expected positively.&lt;/p&gt;
</comment>
                            <comment id="15925974" author="jira-bot" created="Wed, 15 Mar 2017 11:55:25 +0000"  >&lt;p&gt;Commit 65c695b025ad0efb952494f767c1ec9fa44a4924 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ichattopadhyaya&quot; class=&quot;user-hover&quot; rel=&quot;ichattopadhyaya&quot;&gt;ichattopadhyaya&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=65c695b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=65c695b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9516&quot; title=&quot;New UI doesn&amp;#39;t work when Kerberos is enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9516&quot;&gt;&lt;del&gt;SOLR-9516&lt;/del&gt;&lt;/a&gt;: Fix: Admin UI (angular) didn&apos;t work with Kerberos&lt;/p&gt;</comment>
                            <comment id="15925976" author="jira-bot" created="Wed, 15 Mar 2017 11:56:04 +0000"  >&lt;p&gt;Commit 46de138214169e13162a74be46d8fedfd508d98a in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ichattopadhyaya&quot; class=&quot;user-hover&quot; rel=&quot;ichattopadhyaya&quot;&gt;ichattopadhyaya&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=46de138&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=46de138&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9516&quot; title=&quot;New UI doesn&amp;#39;t work when Kerberos is enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9516&quot;&gt;&lt;del&gt;SOLR-9516&lt;/del&gt;&lt;/a&gt;: Fix: Admin UI (angular) didn&apos;t work with Kerberos&lt;/p&gt;</comment>
                            <comment id="15925979" author="ichattopadhyaya" created="Wed, 15 Mar 2017 11:57:43 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctargett&quot; class=&quot;user-hover&quot; rel=&quot;ctargett&quot;&gt;ctargett&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sarkaramrit2%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;sarkaramrit2@gmail.com&quot;&gt;sarkaramrit2@gmail.com&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="15926794" author="varunthacker" created="Wed, 15 Mar 2017 19:18:59 +0000"  >&lt;p&gt;Hi Ishan,&lt;/p&gt;

&lt;p&gt;Small nit:&lt;/p&gt;

&lt;p&gt;Can we change the CHANGES entry from&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;SOLR-9516: Admin UI (angular) didn&apos;t work with Kerberos (Cassandra Targett, Amrit Sarkar via Ishan Chattopadhyaya)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to something like this? Just a suggestion based on what I learnt from &lt;a href=&quot;https://www.mail-archive.com/dev@lucene.apache.org/msg144137.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.mail-archive.com/dev@lucene.apache.org/msg144137.html&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;SOLR-9516: Admin UI now works with Kerberos (Cassandra Targett, Amrit Sarkar via Ishan Chattopadhyaya)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15926940" author="jira-bot" created="Wed, 15 Mar 2017 20:37:33 +0000"  >&lt;p&gt;Commit 2bce98b0c162c5d8a815bc3e2ec32ba6d08c62fa in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ichattopadhyaya&quot; class=&quot;user-hover&quot; rel=&quot;ichattopadhyaya&quot;&gt;ichattopadhyaya&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=2bce98b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=2bce98b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9516&quot; title=&quot;New UI doesn&amp;#39;t work when Kerberos is enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9516&quot;&gt;&lt;del&gt;SOLR-9516&lt;/del&gt;&lt;/a&gt;: Updating CHANGES.txt entry&lt;/p&gt;</comment>
                            <comment id="15926957" author="ichattopadhyaya" created="Wed, 15 Mar 2017 20:42:00 +0000"  >&lt;p&gt;Thanks Varun. Pushed to branch_6x as per commit c6a1aa20dc9f2e0bffcdb42cf01efff6466b1128.&lt;/p&gt;

&lt;p&gt;[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=c6a1aa20dc9f2e0bffcdb42cf01efff6466b1128&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=c6a1aa20dc9f2e0bffcdb42cf01efff6466b1128&lt;/a&gt; ]&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12832926" name="QQ20161012-0.png" size="1082415" author="loushang" created="Wed, 12 Oct 2016 16:00:29 +0000"/>
                            <attachment id="12858738" name="SOLR-9516.patch" size="451" author="sarkaramrit2@gmail.com" created="Tue, 14 Mar 2017 18:45:04 +0000"/>
                            <attachment id="12828573" name="Screenshot from 2016-09-15 07-36-29.png" size="71361" author="ichattopadhyaya" created="Thu, 15 Sep 2016 02:09:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 35 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33nd3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>