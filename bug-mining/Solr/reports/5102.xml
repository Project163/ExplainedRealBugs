<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:07:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16931] ReRankScaler explain breaks with debug=true and in distributed mode</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16931</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The ReRankScaler collects specific information for the explain when debugQuery is set to true. But the parameter &lt;b&gt;debug=true&lt;/b&gt; doesn&apos;t trigger the collection of this data which causes an NPE in the explain.&lt;/p&gt;

&lt;p&gt;The work around is to always use debugQuery=true until this ticket is resolved and released.&lt;/p&gt;

&lt;p&gt;It turned out that this ticket had two problems. The first one is described above. The second issue is that distributed explain is broken with the ReRankScaler.&lt;/p&gt;

&lt;p&gt;The reason for this is that in order to do proper explain for minMaxScaling you need to know the min and max score in the result set. This piece of state is maintained in the ReRankScaler itself which is inside of the ReRankQuery. But for this information to be populated the query must first be run. In distributed mode, explain is called in the second pass when the ids query is run so the state needed for the explain is not populated. The PR attached to this addresses this problem by doing a single pass distributed query if debugQuery is turned on and if reRank score scaling is applied. I&apos;ll add a distributed test for this as well.&lt;/p&gt;

&lt;p&gt;This change is very limited in scope because the single pass distributed is only switched on in the very specific case when debugQuery=true and reRankScaling is on. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13547258">SOLR-16931</key>
            <summary>ReRankScaler explain breaks with debug=true and in distributed mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10003">Resolved</resolution>
                                        <assignee username="jbernste">Joel Bernstein</assignee>
                                    <reporter username="jbernste">Joel Bernstein</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Aug 2023 13:11:16 +0000</created>
                <updated>Thu, 16 May 2024 19:38:22 +0000</updated>
                            <resolved>Tue, 19 Sep 2023 15:52:53 +0000</resolved>
                                    <version>9.3</version>
                                    <fixVersion>9.4</fixVersion>
                                    <component>reranker</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17765753" author="jira-bot" created="Fri, 15 Sep 2023 18:00:43 +0000"  >&lt;p&gt;Commit fc771d8f5218597de41be65aabc245d46ca1e638 in solr&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16931&quot; title=&quot;ReRankScaler explain breaks with debug=true and in distributed mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16931&quot;&gt;&lt;del&gt;SOLR-16931&lt;/del&gt;&lt;/a&gt; from Joel Bernstein&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=fc771d8f521&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=fc771d8f521&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16931&quot; title=&quot;ReRankScaler explain breaks with debug=true and in distributed mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16931&quot;&gt;&lt;del&gt;SOLR-16931&lt;/del&gt;&lt;/a&gt;: ReRankScaler explain only works when debugQuery=true, should also work with debug=query&lt;/p&gt;</comment>
                            <comment id="17766455" author="jira-bot" created="Mon, 18 Sep 2023 15:49:13 +0000"  >&lt;p&gt;Commit fc771d8f5218597de41be65aabc245d46ca1e638 in solr&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16931&quot; title=&quot;ReRankScaler explain breaks with debug=true and in distributed mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16931&quot;&gt;&lt;del&gt;SOLR-16931&lt;/del&gt;&lt;/a&gt; from Joel Bernstein&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=fc771d8f521&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=fc771d8f521&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16931&quot; title=&quot;ReRankScaler explain breaks with debug=true and in distributed mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16931&quot;&gt;&lt;del&gt;SOLR-16931&lt;/del&gt;&lt;/a&gt;: ReRankScaler explain only works when debugQuery=true, should also work with debug=query&lt;/p&gt;</comment>
                            <comment id="17766825" author="jira-bot" created="Tue, 19 Sep 2023 14:38:48 +0000"  >&lt;p&gt;Commit 1c2ebe23403dc2f3dfde3ac7f8cfb176256f3e72 in solr&apos;s branch refs/heads/main from Joel Bernstein&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=1c2ebe23403&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=1c2ebe23403&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16931&quot; title=&quot;ReRankScaler explain breaks with debug=true and in distributed mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16931&quot;&gt;&lt;del&gt;SOLR-16931&lt;/del&gt;&lt;/a&gt;: ReRankScaler explain breaks with debug=true and in distributed mode (#1936)&lt;/p&gt;
</comment>
                            <comment id="17766844" author="jira-bot" created="Tue, 19 Sep 2023 15:19:47 +0000"  >&lt;p&gt;Commit 3e9c9df8ddb488c7e6939a9fceaa9d048e24d54b in solr&apos;s branch refs/heads/branch_9x from Joel Bernstein&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=3e9c9df8ddb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=3e9c9df8ddb&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16931&quot; title=&quot;ReRankScaler explain breaks with debug=true and in distributed mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16931&quot;&gt;&lt;del&gt;SOLR-16931&lt;/del&gt;&lt;/a&gt;: ReRankScaler explain breaks with debug=true and in distributed mode (#1936) (#1937)&lt;/p&gt;
</comment>
                            <comment id="17766861" author="jira-bot" created="Tue, 19 Sep 2023 15:50:36 +0000"  >&lt;p&gt;Commit 5caacd37f7908a89817e599a7fda41ccc789ad7d in solr&apos;s branch refs/heads/main from Joel Bernstein&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=5caacd37f79&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=5caacd37f79&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16931&quot; title=&quot;ReRankScaler explain breaks with debug=true and in distributed mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16931&quot;&gt;&lt;del&gt;SOLR-16931&lt;/del&gt;&lt;/a&gt;: Update CHANGES.txt&lt;/p&gt;</comment>
                            <comment id="17766862" author="jira-bot" created="Tue, 19 Sep 2023 15:51:39 +0000"  >&lt;p&gt;Commit 290da4cd8bdf04cac3b287fbb13665db99f7fb2a in solr&apos;s branch refs/heads/branch_9x from Joel Bernstein&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=290da4cd8bd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=290da4cd8bd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16931&quot; title=&quot;ReRankScaler explain breaks with debug=true and in distributed mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16931&quot;&gt;&lt;del&gt;SOLR-16931&lt;/del&gt;&lt;/a&gt;: Update CHANGES.txt&lt;/p&gt;</comment>
                            <comment id="17775476" author="alex.parvulescu" created="Sun, 15 Oct 2023 19:57:07 +0000"  >&lt;p&gt;Closing after the 9.4.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13550244">SOLR-16972</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13550244">SOLR-16972</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13579574">SOLR-17296</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 4 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1jru8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>