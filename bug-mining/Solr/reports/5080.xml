<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:03:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16733] Solr fails to start on macOS with OpenJDK 20</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16733</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;EDIT (Summary): The ultimate cause of this issue is &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8308678&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;the OpenJDK bug detailed here&lt;/a&gt;, which has been fixed in Java 21 but will not be addressed in Java 20.&lt;/p&gt;

&lt;p&gt;Users may partially workaround the issue by disabling the JVM&apos;s Security Manager, which happens to invoke the faulty JDK API on Solr startup on Macs.  However doing so is not advisable as the Security Manager plays an important role in securing Solr, and Solr may use the faulty JDK API in other ways even with the Security Manager disabled.  It&apos;s the community&apos;s advice that Solr admins steer clear of Java 20 entirely, if running on Mac.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Solr failed to start on macOS (versions: 11, 12, 13; archs: x86_64, arm64) with OpenJDK 20. The following error was observed:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ solr-9.2.0/bin/solr start -f
*** [WARN] *** Your open file limit is currently 256.
&#160;It should be set to 65000 to avoid operational disruption.
&#160;If you no longer wish to see &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; warning, set SOLR_ULIMIT_CHECKS to &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; in your profile or solr.in.sh
*** [WARN] *** &#160;Your Max Processes Limit is currently 1392.
&#160;It should be set to 65000 to avoid operational disruption.
&#160;If you no longer wish to see &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; warning, set SOLR_ULIMIT_CHECKS to &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; in your profile or solr.in.sh
Java 20 detected. Enabled workaround &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; SOLR-16463
OpenJDK 64-Bit Server VM warning: -XX:+UseLargePages not supported in &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; VM
CompileCommand: exclude com/github/benmanes/caffeine/cache/BoundedLocalCache.put bool exclude = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
WARNING: A command line option has enabled the Security Manager
WARNING: The Security Manager is deprecated and will be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
2023-04-02 16:19:52.700 WARN &#160;(main) [] o.e.j.x.XmlConfiguration Unable to execute XmlConfiguration =&amp;gt; java.security.AccessControlException: access denied (&lt;span class=&quot;code-quote&quot;&gt;&quot;java.io.FilePermission&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;read&quot;&lt;/span&gt;)
&#160; &#160; at java.base/java.security.AccessControlContext.checkPermission(AccessControlContext.java:488)
java.security.AccessControlException: access denied (&lt;span class=&quot;code-quote&quot;&gt;&quot;java.io.FilePermission&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;read&quot;&lt;/span&gt;)
&#160; &#160; at java.security.AccessControlContext.checkPermission(AccessControlContext.java:488) ~[?:?]
&#160; &#160; at java.security.AccessController.checkPermission(AccessController.java:1071) ~[?:?]
&#160; &#160; at java.lang.&lt;span class=&quot;code-object&quot;&gt;SecurityManager&lt;/span&gt;.checkPermission(&lt;span class=&quot;code-object&quot;&gt;SecurityManager&lt;/span&gt;.java:411) ~[?:?]
&#160; &#160; at java.lang.&lt;span class=&quot;code-object&quot;&gt;SecurityManager&lt;/span&gt;.checkRead(&lt;span class=&quot;code-object&quot;&gt;SecurityManager&lt;/span&gt;.java:742) ~[?:?]
&#160; &#160; at sun.nio.fs.UnixPath.checkRead(UnixPath.java:788) ~[?:?]
&#160; &#160; at sun.nio.fs.UnixFileSystemProvider.newDirectoryStream(UnixFileSystemProvider.java:448) ~[?:?]
&#160; &#160; at sun.nio.fs.UnixPath.toRealPath(UnixPath.java:912) ~[?:?]
&#160; &#160; at org.eclipse.jetty.util.resource.PathResource.&amp;lt;init&amp;gt;(PathResource.java:226) ~[jetty-util-10.0.13.jar:10.0.13]
&#160; &#160; at org.eclipse.jetty.util.resource.Resource.newResource(Resource.java:204) ~[jetty-util-10.0.13.jar:10.0.13]
&#160; &#160; at org.eclipse.jetty.util.resource.Resource.newResource(Resource.java:178) ~[jetty-util-10.0.13.jar:10.0.13]
&#160; &#160; at org.eclipse.jetty.xml.XmlConfiguration.lambda$main$4(XmlConfiguration.java:1835) ~[jetty-xml-10.0.13.jar:10.0.13]
&#160; &#160; at java.security.AccessController.doPrivileged(AccessController.java:571) ~[?:?]
&#160; &#160; at org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:1818) ~[jetty-xml-10.0.13.jar:10.0.13]
&#160; &#160; at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[?:?]
&#160; &#160; at java.lang.reflect.Method.invoke(Method.java:578) ~[?:?]
&#160; &#160; at org.eclipse.jetty.start.Main.invokeMain(Main.java:229) ~[start.jar:10.0.13]
&#160; &#160; at org.eclipse.jetty.start.Main.start(Main.java:527) ~[start.jar:10.0.13]
&#160; &#160; at org.eclipse.jetty.start.Main.main(Main.java:76) ~[start.jar:10.0.13]
java.lang.reflect.InvocationTargetException
&#160; &#160; at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:119)
&#160; &#160; at java.base/java.lang.reflect.Method.invoke(Method.java:578)
&#160; &#160; at org.eclipse.jetty.start.Main.invokeMain(Main.java:229)
&#160; &#160; at org.eclipse.jetty.start.Main.start(Main.java:527)
&#160; &#160; at org.eclipse.jetty.start.Main.main(Main.java:76)
Caused by: java.security.AccessControlException: access denied (&lt;span class=&quot;code-quote&quot;&gt;&quot;java.io.FilePermission&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;read&quot;&lt;/span&gt;)
&#160; &#160; at java.base/java.security.AccessControlContext.checkPermission(AccessControlContext.java:488)
&#160; &#160; at java.base/java.security.AccessController.checkPermission(AccessController.java:1071)
&#160; &#160; at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;SecurityManager&lt;/span&gt;.checkPermission(&lt;span class=&quot;code-object&quot;&gt;SecurityManager&lt;/span&gt;.java:411)
&#160; &#160; at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;SecurityManager&lt;/span&gt;.checkRead(&lt;span class=&quot;code-object&quot;&gt;SecurityManager&lt;/span&gt;.java:742)
&#160; &#160; at java.base/sun.nio.fs.UnixPath.checkRead(UnixPath.java:788)
&#160; &#160; at java.base/sun.nio.fs.UnixFileSystemProvider.newDirectoryStream(UnixFileSystemProvider.java:448)
&#160; &#160; at java.base/sun.nio.fs.UnixPath.toRealPath(UnixPath.java:912)
&#160; &#160; at org.eclipse.jetty.util.resource.PathResource.&amp;lt;init&amp;gt;(PathResource.java:226)
&#160; &#160; at org.eclipse.jetty.util.resource.Resource.newResource(Resource.java:204)
&#160; &#160; at org.eclipse.jetty.util.resource.Resource.newResource(Resource.java:178)
&#160; &#160; at org.eclipse.jetty.xml.XmlConfiguration.lambda$main$4(XmlConfiguration.java:1835)
&#160; &#160; at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
&#160; &#160; at org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:1818)
&#160; &#160; at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
&#160; &#160; ... 4 more
java.lang.reflect.InvocationTargetException
&#160; &#160; at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:119)
&#160; &#160; at java.base/java.lang.reflect.Method.invoke(Method.java:578)
&#160; &#160; at org.eclipse.jetty.start.Main.invokeMain(Main.java:229)
&#160; &#160; at org.eclipse.jetty.start.Main.start(Main.java:527)
&#160; &#160; at org.eclipse.jetty.start.Main.main(Main.java:76)
Caused by: java.security.AccessControlException: access denied (&lt;span class=&quot;code-quote&quot;&gt;&quot;java.io.FilePermission&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;read&quot;&lt;/span&gt;)
&#160; &#160; at java.base/java.security.AccessControlContext.checkPermission(AccessControlContext.java:488)
&#160; &#160; at java.base/java.security.AccessController.checkPermission(AccessController.java:1071)
&#160; &#160; at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;SecurityManager&lt;/span&gt;.checkPermission(&lt;span class=&quot;code-object&quot;&gt;SecurityManager&lt;/span&gt;.java:411)
&#160; &#160; at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;SecurityManager&lt;/span&gt;.checkRead(&lt;span class=&quot;code-object&quot;&gt;SecurityManager&lt;/span&gt;.java:742)
&#160; &#160; at java.base/sun.nio.fs.UnixPath.checkRead(UnixPath.java:788)
&#160; &#160; at java.base/sun.nio.fs.UnixFileSystemProvider.newDirectoryStream(UnixFileSystemProvider.java:448)
&#160; &#160; at java.base/sun.nio.fs.UnixPath.toRealPath(UnixPath.java:912)
&#160; &#160; at org.eclipse.jetty.util.resource.PathResource.&amp;lt;init&amp;gt;(PathResource.java:226)
&#160; &#160; at org.eclipse.jetty.util.resource.Resource.newResource(Resource.java:204)
&#160; &#160; at org.eclipse.jetty.util.resource.Resource.newResource(Resource.java:178)
&#160; &#160; at org.eclipse.jetty.xml.XmlConfiguration.lambda$main$4(XmlConfiguration.java:1835)
&#160; &#160; at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
&#160; &#160; at org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:1818)
&#160; &#160; at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
&#160; &#160; ... 4 moreUsage: java -jar $JETTY_HOME/start.jar [options] [properties] [configs]
&#160; &#160; &#160; &#160;java -jar $JETTY_HOME/start.jar --help &#160;# &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; more information &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Note: the warnings on open file limit and max processes limit do not seem related; the error still remains after &lt;tt&gt;ulimit -n 65000&lt;/tt&gt; and &lt;tt&gt;ulimit -u 2088&lt;/tt&gt;. &lt;tt&gt;ulimit -u 2088&lt;/tt&gt; is macOS&apos;s hard limit.&lt;/p&gt;

&lt;p&gt;I have attached a full output log (&lt;tt&gt;solr.log&lt;/tt&gt;) with &lt;tt&gt;_JAVA_OPTIONS&lt;/tt&gt; set to &lt;tt&gt;-Djava.security.debug=access,failure,policy&lt;/tt&gt;. I was running that on x86_64 macOS 13.3 (Ventura). (Note: &lt;a href=&quot;https://github.com/apache/solr/commit/f7fe594cdadeadd1e0061075a55a529793e72462&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/commit/f7fe594cdadeadd1e0061075a55a529793e72462&lt;/a&gt; was applied.)&lt;/p&gt;

&lt;p&gt;A minimum reproducer:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Download and extract pre-built OpenJDK 20 binaries from &lt;a href=&quot;https://jdk.java.net/20/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jdk.java.net/20/&lt;/a&gt; (macOS&#8202;/&#8202;AArch64 or macOS&#8202;/&#8202;x64).&lt;/li&gt;
	&lt;li&gt;Download and extract Solr 9.2 binary release from &lt;a href=&quot;https://www.apache.org/dyn/closer.lua/solr/solr/9.2.0/solr-9.2.0.tgz?action=download&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/dyn/closer.lua/solr/solr/9.2.0/solr-9.2.0.tgz?action=download&lt;/a&gt; .&lt;/li&gt;
	&lt;li&gt;&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
export PATH=&lt;span class=&quot;code-quote&quot;&gt;&quot;$PWD/jdk-20.jdk/Contents/Home/bin:$PATH&quot;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;ol&gt;
	&lt;li&gt;&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
./solr-9.2.0/bin/solr start -f&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;ol&gt;
	&lt;li&gt;See error.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;This failure was observed while packaging OpenJDK 20 for Homebrew at &lt;a href=&quot;https://github.com/Homebrew/homebrew-core/pull/126319&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Homebrew/homebrew-core/pull/126319&lt;/a&gt; . At the time of testing, Solr 9.1.1 was used. So I believe this error occurred on earlier versions, too.&lt;/p&gt;

&lt;p&gt;Thank you! Please let me know if any additional information is needed.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;OS: macOS 13 (Ventura), on x86_64&lt;/p&gt;

&lt;p&gt;(Note: This issue occurred on all combinations of macOS {11, 12, 13} and {x86_64, arm64}. It is not reproducible on Linux.)&lt;/p&gt;

&lt;p&gt;Java:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ java -version
openjdk version &lt;span class=&quot;code-quote&quot;&gt;&quot;20&quot;&lt;/span&gt; 2023-03-21
OpenJDK &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Environment (build 20+36-2344)
OpenJDK 64-Bit Server VM (build 20+36-2344, mixed mode, sharing) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</environment>
        <key id="13531129">SOLR-16733</key>
            <summary>Solr fails to start on macOS with OpenJDK 20</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10003">Resolved</resolution>
                                        <assignee username="gerlowskija">Jason Gerlowski</assignee>
                                    <reporter username="zhongruoyu">Ruoyu Zhong</reporter>
                        <labels>
                    </labels>
                <created>Sun, 2 Apr 2023 16:47:25 +0000</created>
                <updated>Fri, 17 Oct 2025 20:05:37 +0000</updated>
                            <resolved>Thu, 24 Aug 2023 15:05:49 +0000</resolved>
                                    <version>9.2</version>
                                    <fixVersion>9.3</fixVersion>
                    <fixVersion>10.0</fixVersion>
                                    <component>cli</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="5400">1.5h</timespent>
                                <comments>
                            <comment id="17707720" author="elyograg" created="Sun, 2 Apr 2023 21:11:51 +0000"  >&lt;p&gt;Installed Oracle JDK 20 onto Ubuntu 20.04 Server using Oracle&apos;s x64 .deb package.&#160; And noted that it depends on 32-bit libc, which is annoying.&lt;/p&gt;

&lt;p&gt;Downloaded and extracted Solr 9.2.0.&lt;/p&gt;

&lt;p&gt;Started Solr with SOLR_JAVA_HOME set to the jdk 20 installed path.&#160; It started without any problem.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;
elyograg@bilbo:~/solr-9.2.0$ SOLR_JAVA_HOME=/usr/lib/jvm/jdk-20 bin/solr start
elyograg@bilbo:~/solr-9.2.0$ ps auxw | grep solr
elyograg &#160; 51062 73.7 &#160;8.3 3114464 673204 pts/0 &#160;Sl &#160; 15:03 &#160; 0:13 /usr/lib/jvm/jdk-20/bin/java -server -Xms512m -Xmx512m -XX:+UseG1GC -XX:+PerfDisableSharedMem -XX:+ParallelRefProcEnabled -XX:MaxGCPauseMillis=250 -XX:+UseLargePages -XX:+AlwaysPreTouch -XX:+ExplicitGCInvokesConcurrent -Xlog:gc*:file=/home/elyograg/solr-9.2.0/server/logs/solr_gc.log:time,uptime:filecount=9,filesize=20M -Dsolr.jetty.inetaccess.includes= -Dsolr.jetty.inetaccess.excludes= -Dsolr.log.dir=/home/elyograg/solr-9.2.0/server/logs -Djetty.port=8983 -DSTOP.PORT=7983 -DSTOP.KEY=solrrocks -Dhost=localhost -Duser.timezone=UTC -XX:-OmitStackTraceInFastThrow -XX:+CrashOnOutOfMemoryError -XX:ErrorFile=/home/elyograg/solr-9.2.0/server/logs/jvm_crash_%p.log -Djetty.home=/home/elyograg/solr-9.2.0/server -Dsolr.solr.home=/home/elyograg/solr-9.2.0/server/solr -Dsolr.install.dir=/home/elyograg/solr-9.2.0 -Dsolr.install.symDir=/home/elyograg/solr-9.2.0 -Dsolr.default.confdir=/home/elyograg/solr-9.2.0/server/solr/configsets/_default/conf -Xss256k -XX:CompileCommand=exclude,com.github.benmanes.caffeine.cache.BoundedLocalCache::put -Djava.security.manager -Djava.security.policy=/home/elyograg/solr-9.2.0/server/etc/security.policy -Djava.security.properties=/home/elyograg/solr-9.2.0/server/etc/security.properties -Dsolr.internal.network.permission=* -DdisableAdminUI=false -Dsolr.log.muteconsole -jar start.jar --module=http --module=requestlog --module=gzip
elyograg &#160; 51146 &#160;0.0 &#160;0.0 &#160; 6308 &#160; 660 pts/0 &#160; &#160;S+ &#160; 15:04 &#160; 0:00 grep --color=auto solr
 *** [WARN] *** Your open file limit is currently 1024.  
 It should be set to 65000 to avoid operational disruption. 
 If you no longer wish to see this warning, set SOLR_ULIMIT_CHECKS to false in your profile or solr.in.sh
*** [WARN] ***  Your Max Processes Limit is currently 31129. 
 It should be set to 65000 to avoid operational disruption. 
 If you no longer wish to see this warning, set SOLR_ULIMIT_CHECKS to false in your profile or solr.in.sh
Java 20 detected. Enabled workaround for SOLR-16463
Warning: Available entropy is low. As a result, use of the UUIDField, SSL, or any other features that require
RNG might not work properly. To check for the amount of available entropy, use &apos;cat /proc/sys/kernel/random/entropy_avail&apos;.

Waiting up to 180 seconds to see Solr running on port 8983 [\]  
Started Solr server on port 8983 (pid=51062). Happy searching!
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;
elyograg@bilbo:~/solr-9.2.0$ ps auxw | grep solr
elyograg   51062 73.7  8.3 3114464 673204 pts/0  Sl   15:03   0:13 /usr/lib/jvm/jdk-20/bin/java -server -Xms512m -Xmx512m -XX:+UseG1GC -XX:+PerfDisableSharedMem -XX:+ParallelRefProcEnabled -XX:MaxGCPauseMillis=250 -XX:+UseLargePages -XX:+AlwaysPreTouch -XX:+ExplicitGCInvokesConcurrent -Xlog:gc*:file=/home/elyograg/solr-9.2.0/server/logs/solr_gc.log:time,uptime:filecount=9,filesize=20M -Dsolr.jetty.inetaccess.includes= -Dsolr.jetty.inetaccess.excludes= -Dsolr.log.dir=/home/elyograg/solr-9.2.0/server/logs -Djetty.port=8983 -DSTOP.PORT=7983 -DSTOP.KEY=solrrocks -Dhost=localhost -Duser.timezone=UTC -XX:-OmitStackTraceInFastThrow -XX:+CrashOnOutOfMemoryError -XX:ErrorFile=/home/elyograg/solr-9.2.0/server/logs/jvm_crash_%p.log -Djetty.home=/home/elyograg/solr-9.2.0/server -Dsolr.solr.home=/home/elyograg/solr-9.2.0/server/solr -Dsolr.install.dir=/home/elyograg/solr-9.2.0 -Dsolr.install.symDir=/home/elyograg/solr-9.2.0 -Dsolr.default.confdir=/home/elyograg/solr-9.2.0/server/solr/configsets/_default/conf -Xss256k -XX:CompileCommand=exclude,com.github.benmanes.caffeine.cache.BoundedLocalCache::put -Djava.security.manager -Djava.security.policy=/home/elyograg/solr-9.2.0/server/etc/security.policy -Djava.security.properties=/home/elyograg/solr-9.2.0/server/etc/security.properties -Dsolr.internal.network.permission=* -DdisableAdminUI=false -Dsolr.log.muteconsole -jar start.jar --module=http --module=requestlog --module=gzip
elyograg   51146  0.0  0.0   6308   660 pts/0    S+   15:04   0:00 grep --color=auto solr
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Note that you should NOT run Solr as root, which is the only reason you would need the -f flag.&lt;/p&gt;

&lt;p&gt;I don&apos;t have a Mac available to test on.&lt;/p&gt;</comment>
                            <comment id="17707726" author="JIRAUSER299560" created="Sun, 2 Apr 2023 21:50:00 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elyograg&quot; class=&quot;user-hover&quot; rel=&quot;elyograg&quot;&gt;elyograg&lt;/a&gt; for your response.&lt;/p&gt;

&lt;p&gt;&amp;gt; Installed Oracle JDK 20 onto Ubuntu 20.04 Server using Oracle&apos;s x64 .deb package.&lt;/p&gt;

&lt;p&gt;I&apos;ve just tried this in a Ubuntu 22.04 Docker (with a non-root user) with OpenJDK 20. It seems that this error is indeed &lt;em&gt;not&lt;/em&gt; reproducible on Linux, and thus macOS-specific.&lt;/p&gt;

&lt;p&gt;&amp;gt; Note that you should NOT run Solr as root, which is the only reason you would need the -f flag.&lt;/p&gt;

&lt;p&gt;Perhaps you were referring to the &lt;tt&gt;-force&lt;/tt&gt; flag:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ sudo solr start
Password:
*** [WARN] *** Your open file limit is currently 256.
&#160;It should be set to 65000 to avoid operational disruption.
&#160;If you no longer wish to see &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; warning, set SOLR_ULIMIT_CHECKS to &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; in your profile or solr.in.sh
*** [WARN] *** &#160;Your Max Processes Limit is currently 1392.
&#160;It should be set to 65000 to avoid operational disruption.
&#160;If you no longer wish to see &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; warning, set SOLR_ULIMIT_CHECKS to &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; in your profile or solr.in.sh
WARNING: Starting Solr as the root user is a security risk and not considered best practice. Exiting.
&#160; &#160; &#160; &#160; &#160;Please consult the Reference Guide. To override &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; check, start with argument &lt;span class=&quot;code-quote&quot;&gt;&apos;-force&apos;&lt;/span&gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I was using the &lt;tt&gt;-f&lt;/tt&gt; flag to start Solr in foreground so we could immediately tell from the console what is going on.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ solr start --help
ERROR: --help is not supported by &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; script

Usage: solr start [-f] [-c] [-h hostname] [-p port] [-d directory] [-z zkHost] [-m memory] [-e example] [-s solr.solr.home] [-t solr.data.home] [-a &lt;span class=&quot;code-quote&quot;&gt;&quot;additional-options&quot;&lt;/span&gt;] [-V]

  -f            Start Solr in foreground; &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; starts Solr in the background
                  and sends stdout / stderr to solr-PORT-console.log

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If Solr is started without the &lt;tt&gt;-f&lt;/tt&gt; flag, the error is similar:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ solr-9.2.0/bin/solr start --help
$ SOLR_LOGS_DIR=/tmp/solr solr start &amp;amp;&amp;gt;/dev/&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;
[1] 8930
$ head -n10 /tmp/solr/solr-8983-console.log
OpenJDK 64-Bit Server VM warning: -XX:+UseLargePages not supported in &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; VM
CompileCommand: exclude com/github/benmanes/caffeine/cache/BoundedLocalCache.put bool exclude = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
WARNING: A command line option has enabled the Security Manager
WARNING: The Security Manager is deprecated and will be removed in a &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; release
ERROR StatusConsoleListener Could not create plugin of type &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.logging.log4j.core.appender.RollingRandomAccessFileAppender &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; element RollingRandomAccessFile: java.security.AccessControlException: access denied (&lt;span class=&quot;code-quote&quot;&gt;&quot;java.io.FilePermission&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;/tmp/solr&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;read&quot;&lt;/span&gt;)
&#160;java.security.AccessControlException: access denied (&lt;span class=&quot;code-quote&quot;&gt;&quot;java.io.FilePermission&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;/tmp/solr&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;read&quot;&lt;/span&gt;)
&#160; &#160; at java.base/java.security.AccessControlContext.checkPermission(AccessControlContext.java:488)
&#160; &#160; at java.base/java.security.AccessController.checkPermission(AccessController.java:1071)
&#160; &#160; at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;SecurityManager&lt;/span&gt;.checkPermission(&lt;span class=&quot;code-object&quot;&gt;SecurityManager&lt;/span&gt;.java:411)
&#160; &#160; at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;SecurityManager&lt;/span&gt;.checkRead(&lt;span class=&quot;code-object&quot;&gt;SecurityManager&lt;/span&gt;.java:742)
$ echo $JAVA_HOME
/tmp/jdk-20.jdk/Contents/Home
$ which java
/tmp/jdk-20.jdk/Contents/Home/bin/java
$ java -version
openjdk version &lt;span class=&quot;code-quote&quot;&gt;&quot;20&quot;&lt;/span&gt; 2023-03-21
OpenJDK &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Environment (build 20+36-2344)
OpenJDK 64-Bit Server VM (build 20+36-2344, mixed mode, sharing)
$ sw_vers
ProductName: &#160; &#160; &#160; &#160;macOS
ProductVersion: &#160; &#160; &#160; &#160;13.3
BuildVersion: &#160; &#160; &#160; &#160;22E252&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;For this run (without the &lt;tt&gt;-f&lt;/tt&gt; flag), I did notice that an &quot;access denied&quot; error occurred on the temporary &lt;tt&gt;SOLR_LOGS_DIR&lt;/tt&gt; that I set:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ grep denied /tmp/solr/solr-8983-console.log
ERROR StatusConsoleListener Could not create plugin of type &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.logging.log4j.core.appender.RollingRandomAccessFileAppender &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; element RollingRandomAccessFile: java.security.AccessControlException: access denied (&lt;span class=&quot;code-quote&quot;&gt;&quot;java.io.FilePermission&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;/tmp/solr&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;read&quot;&lt;/span&gt;)
&#160;java.security.AccessControlException: access denied (&lt;span class=&quot;code-quote&quot;&gt;&quot;java.io.FilePermission&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;/tmp/solr&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;read&quot;&lt;/span&gt;)
ERROR StatusConsoleListener Could not create plugin of type &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.logging.log4j.core.appender.RollingRandomAccessFileAppender &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; element RollingRandomAccessFile: java.security.AccessControlException: access denied (&lt;span class=&quot;code-quote&quot;&gt;&quot;java.io.FilePermission&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;/tmp/solr&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;read&quot;&lt;/span&gt;)
&#160;java.security.AccessControlException: access denied (&lt;span class=&quot;code-quote&quot;&gt;&quot;java.io.FilePermission&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;/tmp/solr&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;read&quot;&lt;/span&gt;)
Caused by: java.security.AccessControlException: access denied (&lt;span class=&quot;code-quote&quot;&gt;&quot;java.io.FilePermission&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;read&quot;&lt;/span&gt;)
Caused by: java.security.AccessControlException: access denied (&lt;span class=&quot;code-quote&quot;&gt;&quot;java.io.FilePermission&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;read&quot;&lt;/span&gt;) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Again I attach the full logs in SOLR_LOGS_DIR for your reference. They are: &lt;tt&gt;solr-8983-console.log&lt;/tt&gt; and &lt;tt&gt;solr_gc.log&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17707734" author="elyograg" created="Sun, 2 Apr 2023 23:21:59 +0000"  >&lt;blockquote&gt;&lt;p&gt;Perhaps you were referring to the &lt;tt&gt;-force&lt;/tt&gt; flag:&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;You&apos;re right!&#160;&#160; I have never started Solr in the foreground!&lt;/p&gt;</comment>
                            <comment id="17707735" author="elyograg" created="Sun, 2 Apr 2023 23:44:59 +0000"  >&lt;p&gt;The security manager policy that Solr 9.2.0 ships with adds the location specified by the solr.log.dir system property as a read/write path.&#160; In bin/solr, that property is correctly set to $SOLR_LOGS_DIR.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  permission java.io.FilePermission &lt;span class=&quot;code-quote&quot;&gt;&quot;${solr.log.dir}&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;read,write,delete,readlink&quot;&lt;/span&gt;;
&#160; permission java.io.FilePermission &lt;span class=&quot;code-quote&quot;&gt;&quot;${solr.log.dir}${/}-&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;read,write,delete,readlink&quot;&lt;/span&gt;; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Is /private/tmp/solr a symlink?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17707738" author="JIRAUSER299560" created="Sun, 2 Apr 2023 23:59:37 +0000"  >&lt;p&gt;&amp;gt; Is &lt;tt&gt;/private/tmp/solr&lt;/tt&gt; a symlink?&lt;/p&gt;

&lt;p&gt;Not really:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ realpath /&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;/tmp/solr
/&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;/tmp/solr
$ stat /&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;/tmp/solr
16777220 12890161123 drwxr-xr-x 6 ruoyu wheel 0 192 &lt;span class=&quot;code-quote&quot;&gt;&quot;Apr &#160;3 07:49:15 2023&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Apr &#160;3 07:49:10 2023&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Apr &#160;3 07:49:10 2023&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Apr &#160;3 07:47:51 2023&quot;&lt;/span&gt; 4096 0 0 /&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;/tmp/solr &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It is owned by user &lt;tt&gt;ruoyu&lt;/tt&gt; (also the user who started &lt;tt&gt;solr&lt;/tt&gt;), group &lt;tt&gt;wheel&lt;/tt&gt;, with permission bits &lt;tt&gt;0755&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;However, one point to note is that the &lt;tt&gt;SOLR_LOGS_DIR&lt;/tt&gt; I used above was set to &lt;tt&gt;/tmp/solr&lt;/tt&gt;. On macOS, &lt;tt&gt;/tmp&lt;/tt&gt; &lt;em&gt;is&lt;/em&gt; a symlink to &lt;tt&gt;/private/tmp&lt;/tt&gt;. So the &lt;tt&gt;/private/tmp/solr&lt;/tt&gt; directory was actually used.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ ls -l /tmp
lrwxr-xr-x@ 1 root &#160;wheel &#160;11 Mar 18 12:34 /tmp -&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;/tmp &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Symlinks aside, the error still occurs when &lt;tt&gt;SOLR_LOGS_DIR&lt;/tt&gt; is set to &lt;tt&gt;/Users/ruoyu/solr&lt;/tt&gt;, under user &lt;tt&gt;ruoyu&lt;/tt&gt;&apos;s home directory. So as far as I could tell it&apos;s probably not a problem with symlinks.&lt;/p&gt;</comment>
                            <comment id="17707757" author="elyograg" created="Mon, 3 Apr 2023 04:27:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;However, one point to note is that the &lt;tt&gt;SOLR_LOGS_DIR&lt;/tt&gt; I used above was set to &lt;tt&gt;/tmp/solr&lt;/tt&gt;. On macOS, &lt;tt&gt;/tmp&lt;/tt&gt; &lt;em&gt;is&lt;/em&gt; a symlink to &lt;tt&gt;/private/tmp&lt;/tt&gt;. So the &lt;tt&gt;/private/tmp/solr&lt;/tt&gt; directory was actually used.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;There is a problem when you configure Solr with directories involving a symlink.&#160; Since Solr 9.1, Solr uses a Java security manager, and it does NOT deal with symlinks very well.&#160; We fixed a problem in 9.2.0 with symlinks in the install directory, but the problem still exists for data and log directories.&lt;/p&gt;

&lt;p&gt;I can see in solr.log&apos;s info about the security policy that you actually configured solr to use /tmp/solr, not /private/tmp/solr.&#160; So the symlink path is what went into the security policy, but when Java checked the security, it checked the REAL path, and they don&apos;t match.&lt;/p&gt;

&lt;p&gt;I&apos;m working on a bit of an overhaul for bin/solr that will fix this.&lt;/p&gt;

&lt;p&gt;Are there other directories besides the logs dir that are configured to a location that has a symlink in it?&#160; That is probably what triggered the error after changing the logs dir to /Users/ruoyu/solr.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17708096" author="JIRAUSER299560" created="Mon, 3 Apr 2023 19:50:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;Are there other directories besides the logs dir that are configured to a location that has a symlink in it?&#160; That is probably what triggered the error after changing the logs dir to /Users/ruoyu/solr.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I do not think so; I use the Solr extracted from the binary tarball, and do not have any custom configurations other than &lt;tt&gt;SOLR_LOGS_DIR&lt;/tt&gt; (which was only added for demonstration). This error can still happen when I move the solr installation to my home directory &lt;tt&gt;/Users/ruoyu&lt;/tt&gt;.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ pwd
/Users/ruoyu

$ realpath &lt;span class=&quot;code-quote&quot;&gt;&quot;$PWD&quot;&lt;/span&gt;
/Users/ruoyu

$ echo $JAVA_HOME
/Users/ruoyu/jdk-20.jdk/Contents/Home

$ which java
/Users/ruoyu/jdk-20.jdk/Contents/Home/bin/java

$ java -version
Picked up _JAVA_OPTIONS: -Djava.security.debug=access,failure,policy
openjdk version &lt;span class=&quot;code-quote&quot;&gt;&quot;20&quot;&lt;/span&gt; 2023-03-21
OpenJDK &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Environment (build 20+36-2344)
OpenJDK 64-Bit Server VM (build 20+36-2344, mixed mode, sharing)

$ env | grep SOLR

$ solr-9.2.0/bin/solr start -f &amp;amp;&amp;gt;solr.log

$ grep denied solr.log
access: access denied (&lt;span class=&quot;code-quote&quot;&gt;&quot;java.io.FilePermission&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;read&quot;&lt;/span&gt;)
Caused by: java.security.AccessControlException: access denied (&lt;span class=&quot;code-quote&quot;&gt;&quot;java.io.FilePermission&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;read&quot;&lt;/span&gt;)
Caused by: java.security.AccessControlException: access denied (&lt;span class=&quot;code-quote&quot;&gt;&quot;java.io.FilePermission&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;read&quot;&lt;/span&gt;)
access: access denied (&lt;span class=&quot;code-quote&quot;&gt;&quot;java.lang.RuntimePermission&quot;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;createSecurityManager&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I noticed that several &quot;access denied&quot; errors were on the root directory.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17708589" author="risdenk" created="Tue, 4 Apr 2023 21:19:18 +0000"  >&lt;p&gt;I think this is a change in the JDK &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8295753&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.org/browse/JDK-8295753&lt;/a&gt; and &lt;a href=&quot;https://github.com/adoptium/jdk20u/commit/5b7e70645b311b7060da20cb7ca813df34834332&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/adoptium/jdk20u/commit/5b7e70645b311b7060da20cb7ca813df34834332&lt;/a&gt; - The above commit came in JDK 20 and affects real path which is used by Jetty - &lt;a href=&quot;https://github.com/eclipse/jetty.project/blob/jetty-10.0.x/jetty-util/src/main/java/org/eclipse/jetty/util/resource/PathResource.java#L226&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/eclipse/jetty.project/blob/jetty-10.0.x/jetty-util/src/main/java/org/eclipse/jetty/util/resource/PathResource.java#L226&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17725446" author="mkrio" created="Tue, 23 May 2023 14:56:30 +0000"  >&lt;p&gt;The observed behaviour is actually a followup of a broken fix to the mentioned JDK ticket. I filed a new bug report here: &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8308678&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.org/browse/JDK-8308678&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17729373" author="mkrio" created="Mon, 5 Jun 2023 16:21:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8308678&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.org/browse/JDK-8308678&lt;/a&gt; has been addressed. The fix will be available with JDK 21 which is the next LTS.&lt;/p&gt;</comment>
                            <comment id="17741691" author="houston" created="Mon, 10 Jul 2023 16:47:36 +0000"  >&lt;p&gt;I&apos;ve added a warning about MacOS and Java 20 to the Solr 9.3 release notes. &lt;a href=&quot;https://cwiki.apache.org/confluence/display/SOLR/ReleaseNote9_3_0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/SOLR/ReleaseNote9_3_0&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17756014" author="jira-bot" created="Fri, 18 Aug 2023 15:20:23 +0000"  >&lt;p&gt;Commit 4f550d324e4a912ad5668123ae3d44554574f416 in solr&apos;s branch refs/heads/main from Jason Gerlowski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=4f550d324e4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=4f550d324e4&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16733&quot; title=&quot;Solr fails to start on macOS with OpenJDK 20&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16733&quot;&gt;&lt;del&gt;SOLR-16733&lt;/del&gt;&lt;/a&gt;: Fail &apos;test&apos; tasks using JDK20 on Mac (#1832)&lt;/p&gt;

&lt;p&gt;Java 20 has a JDK bug that triggers on Mac systems and crashes Solr on&lt;br/&gt;
startup.  This affects deployments running on Mac as well as test runs,&lt;br/&gt;
which obviously need to start and stop Solr frequently.&lt;/p&gt;

&lt;p&gt;This commit adds some gradle logic to detect this combination (JDK20 w/&lt;br/&gt;
Mac) and fail the &apos;test&apos; task when present.&lt;/p&gt;</comment>
                            <comment id="17756021" author="jira-bot" created="Fri, 18 Aug 2023 15:33:21 +0000"  >&lt;p&gt;Commit 0f3a5327ab9328e0c1fb20afcc6a5a67ec8ab0ea in solr&apos;s branch refs/heads/branch_9x from Jason Gerlowski&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=0f3a5327ab9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=0f3a5327ab9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16733&quot; title=&quot;Solr fails to start on macOS with OpenJDK 20&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16733&quot;&gt;&lt;del&gt;SOLR-16733&lt;/del&gt;&lt;/a&gt;: Fail &apos;test&apos; tasks using JDK20 on Mac (#1832)&lt;/p&gt;

&lt;p&gt;Java 20 has a JDK bug that triggers on Mac systems and crashes Solr on&lt;br/&gt;
startup.  This affects deployments running on Mac as well as test runs,&lt;br/&gt;
which obviously need to start and stop Solr frequently.&lt;/p&gt;

&lt;p&gt;This commit adds some gradle logic to detect this combination (JDK20 w/&lt;br/&gt;
Mac) and fail the &apos;test&apos; task when present.&lt;/p&gt;</comment>
                            <comment id="17756025" author="gerlowskija" created="Fri, 18 Aug 2023 15:37:18 +0000"  >&lt;p&gt;The commits referenced in the two comments above (^^) work to detect the JDK20+Mac combination and abort test runs with a (hopefully helpful) message about the JDK20 issues and pointing them to this ticket.&lt;/p&gt;

&lt;p&gt;So between the release note warning added by Houston and this change to our builds to better flag the broken combination, we might&apos;ve done about all we can do here maybe?  Is there anything else we should do before closing this ticket out?&lt;/p&gt;</comment>
                            <comment id="17756035" author="risdenk" created="Fri, 18 Aug 2023 15:47:48 +0000"  >&lt;p&gt;Maybe highlight at the top of the description the JDK bug that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkrio&quot; class=&quot;user-hover&quot; rel=&quot;mkrio&quot;&gt;mkrio&lt;/a&gt; filed&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16733?focusedCommentId=17729373&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17729373&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SOLR-16733?focusedCommentId=17729373&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17729373&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17756039" author="gerlowskija" created="Fri, 18 Aug 2023 15:52:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;Maybe highlight at the top of the description&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Which description?  As the error message that you get from a &lt;tt&gt;./gradlew test&lt;/tt&gt;, or somewhere else?&lt;/p&gt;</comment>
                            <comment id="17756041" author="risdenk" created="Fri, 18 Aug 2023 16:02:11 +0000"  >&lt;p&gt;Sorry of the jira description since I think you were mentioning this jira in build/commit messages.&lt;/p&gt;</comment>
                            <comment id="17758624" author="gerlowskija" created="Thu, 24 Aug 2023 15:05:49 +0000"  >&lt;p&gt;Ah, ok.  I&apos;ve updated the issue description as Kevin suggested.&lt;/p&gt;

&lt;p&gt;With that done I&apos;m going to close this out.  Solr 9.2, etc. still have this problem when running JDK20 on Mac, but we&apos;ve flagged this in our release notes and done our best to surface the issue to developers as well via a gradle error.  We can reopen later if additional steps need to be taken.&lt;/p&gt;</comment>
                            <comment id="17758644" author="JIRAUSER299560" created="Thu, 24 Aug 2023 16:08:44 +0000"  >&lt;p&gt;Thanks for your time and efforts looking into this!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13056984" name="solr-8983-console.log" size="20059" author="zhongruoyu" created="Sun, 2 Apr 2023 21:50:11 +0000"/>
                            <attachment id="13056979" name="solr.log" size="557545" author="zhongruoyu" created="Sun, 2 Apr 2023 16:46:53 +0000"/>
                            <attachment id="13056983" name="solr_gc.log" size="3249" author="zhongruoyu" created="Sun, 2 Apr 2023 21:50:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 11 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1h14w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>