<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:34:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4504] CurrencyField treats docs w/o value the same as having a value of 0.0</title>
                <link>https://issues.apache.org/jira/browse/SOLR-4504</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;As noted by Gerald Blank on the mailing list, CurrencyField queries treat documents w/o any value the same as documents wit ha value of 0.0f.&lt;/p&gt;

&lt;p&gt;observe that using the example solr schema, with any number of docs indexed, this query matches all docs even though no docs have any values at all for hte specified field...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;http://localhost:8983/solr/select?q=hoss_c:[*%20TO%20*]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12634027">SOLR-4504</key>
            <summary>CurrencyField treats docs w/o value the same as having a value of 0.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Feb 2013 00:09:35 +0000</created>
                <updated>Mon, 9 May 2016 18:51:02 +0000</updated>
                            <resolved>Tue, 26 Feb 2013 18:19:30 +0000</resolved>
                                                    <fixVersion>4.2</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13586687" author="hossman" created="Tue, 26 Feb 2013 03:18:07 +0000"  >&lt;p&gt;The problem is that unlike a simple TrieField that uses FieldCacheRangeFilter (which knows about docs that have no value) CurrencyField needs to use a ValueSourceRangeFilter wrapped arround the CurrencyValueSource that computes the exchange rate.&lt;/p&gt;

&lt;p&gt;Attached patch fixes things by combining it with a FieldValueFilter and updates the existing range query test to include lots of docs with no field value.  This seemed to expose another bug in CurrencyValueSource where you could get an ArrayIndexOutOfBoundsException because the ord(doc) value of the currency for a doc w/o values would be negative, which i fixed with an short-circut delegating to amounts.exist(doc)&lt;/p&gt;

&lt;p&gt;(4.1 users, even those with docs missing the currency field, wouldn&apos;t ever get the ArrayIndexOutOfBoundsException because in 4.1 the FieldCache.DocTermsIndex used &quot;0&quot; &amp;#8211; instead of &quot;-1&quot; as it is returned by ord() now with the new DocValues APIs)&lt;/p&gt;</comment>
                            <comment id="13587308" author="commit-tag-bot" created="Tue, 26 Feb 2013 17:48:13 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; Chris M. Hostetter&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1450304&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1450304&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4504&quot; title=&quot;CurrencyField treats docs w/o value the same as having a value of 0.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4504&quot;&gt;&lt;del&gt;SOLR-4504&lt;/del&gt;&lt;/a&gt;: Fixed CurrencyField range queries to correctly exclude documents w/o values&lt;/p&gt;</comment>
                            <comment id="13587342" author="hossman" created="Tue, 26 Feb 2013 18:19:30 +0000"  >&lt;p&gt;Committed revision 1450304.&lt;br/&gt;
Committed revision 1450331.&lt;/p&gt;</comment>
                            <comment id="13587356" author="commit-tag-bot" created="Tue, 26 Feb 2013 18:28:11 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Chris M. Hostetter&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1450331&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1450331&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4504&quot; title=&quot;CurrencyField treats docs w/o value the same as having a value of 0.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4504&quot;&gt;&lt;del&gt;SOLR-4504&lt;/del&gt;&lt;/a&gt;: Fixed CurrencyField range queries to correctly exclude documents w/o values (merge r1450304)&lt;/p&gt;</comment>
                            <comment id="13654322" author="thetaphi" created="Fri, 10 May 2013 10:34:46 +0000"  >&lt;p&gt;Closed after release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12608957">SOLR-3886</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12570919" name="SOLR-4504.patch" size="6075" author="hossman" created="Tue, 26 Feb 2013 03:18:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314520</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1i9wn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314864</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>