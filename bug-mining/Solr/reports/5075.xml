<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:03:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16905] Java Security Manager rules don&apos;t inclue &quot;solr.allowPaths&quot; property</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16905</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Hi all,&lt;/p&gt;

&lt;p&gt;we&apos;ve upgraded from Solr 8.11 to Solr 9.2 which bricked our Solr Backup. Since Solr 8.6 we configure solr.allowPaths, because our backup destination is outside the Solr home directory. We do this using the solr.in.sh:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SOLR_OPTS=&lt;span class=&quot;code-quote&quot;&gt;&quot;$SOLR_OPTS -Dsolr.allowPaths=/opt/backup&quot;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Since Solr 9 we received the following error message, when trying to create a backup&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
curl -sk &lt;span class=&quot;code-quote&quot;&gt;&apos;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr/admin/collections?action=BACKUP&amp;amp;name=xyz&amp;amp;collection=xyz&amp;amp;location=/opt/backup&apos;&lt;/span&gt;
&lt;/span&gt;{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;responseHeader&quot;&lt;/span&gt;:{
    &lt;span class=&quot;code-quote&quot;&gt;&quot;status&quot;&lt;/span&gt;:500,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;QTime&quot;&lt;/span&gt;:0},
  &lt;span class=&quot;code-quote&quot;&gt;&quot;error&quot;&lt;/span&gt;:{
    &lt;span class=&quot;code-quote&quot;&gt;&quot;msg&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;access denied (\&quot;&lt;/span&gt;java.io.FilePermission\&lt;span class=&quot;code-quote&quot;&gt;&quot; \&quot;&lt;/span&gt;/opt/backup\&lt;span class=&quot;code-quote&quot;&gt;&quot; \&quot;&lt;/span&gt;read\&lt;span class=&quot;code-quote&quot;&gt;&quot;)&quot;&lt;/span&gt;,
...&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;After some debugging we discovered, that since Solr 9 the Java Security Manager is enabled by default. However it doesn&apos;t have a default rule to allow access to the path which is set using the &quot;solr.allowPaths&quot; property:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
grep allowPaths /opt/solr-9.2.1/server/etc/security.policy&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We disabled the Java Security Manager for now, but our guess is, that the security policy should be expanded by&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160; permission java.io.FilePermission &lt;span class=&quot;code-quote&quot;&gt;&quot;${solr.allowPaths}&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;read,write,delete,readlink&quot;&lt;/span&gt;;
&#160; permission java.io.FilePermission &lt;span class=&quot;code-quote&quot;&gt;&quot;${solr.allowPaths}${/}-&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;read,write,delete,readlink&quot;&lt;/span&gt;;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Cheers&lt;/p&gt;

&lt;p&gt;Dennis&lt;/p&gt;</description>
                <environment></environment>
        <key id="13544959">SOLR-16905</key>
            <summary>Java Security Manager rules don&apos;t inclue &quot;solr.allowPaths&quot; property</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="houston">Houston Putman</assignee>
                                    <reporter username="bprov">Babiel</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Jul 2023 12:51:38 +0000</created>
                <updated>Fri, 9 May 2025 13:56:36 +0000</updated>
                            <resolved>Fri, 28 Jul 2023 18:04:47 +0000</resolved>
                                    <version>9.2.1</version>
                                    <fixVersion>9.4</fixVersion>
                                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17747508" author="risdenk" created="Wed, 26 Jul 2023 13:23:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bprov&quot; class=&quot;user-hover&quot; rel=&quot;bprov&quot;&gt;bprov&lt;/a&gt; have you tried adding the suggested solr.allowPaths lines to security.policy when you enable the security manager? Did it fix the issue?&lt;/p&gt;</comment>
                            <comment id="17747547" author="elyograg" created="Wed, 26 Jul 2023 14:20:45 +0000"  >&lt;p&gt;The default solr.xml contains:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;allowPaths&quot;&lt;/span&gt;&amp;gt;${solr.allowPaths:}&amp;lt;/str&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I was taking care of a Solr 9.1.1 install using the solr.allowPaths system property.&#160; In the source code 9.1.1 tag, I am not seeing where &quot;allowPaths&quot; is added to the security manager, but it does work.&lt;/p&gt;

&lt;p&gt;When Solr is started with Java 17, a warning is printed during startup saying that the security manager has been deprecated and will no longer exist in a future version of Java.&#160; If they aren&apos;t going to provide a replacement for the functionality then Solr may need to stop using it.&lt;/p&gt;</comment>
                            <comment id="17747552" author="houston" created="Wed, 26 Jul 2023 14:29:31 +0000"  >&lt;p&gt;Good find, this should be incorporated into an integration test as well.&lt;/p&gt;</comment>
                            <comment id="17747598" author="elyograg" created="Wed, 26 Jul 2023 16:44:02 +0000"  >&lt;p&gt;Using a security manager makes Solr behave in unexpected ways that are not always easy to track down, and I would prefer to just rely on the operating system&apos;s built-in permission capability.&#160; So I have to say that I&apos;m not sad to see it go away in a Java version after 17.&lt;/p&gt;

&lt;p&gt;Technologies like selinux and apparmor are similarly frustrating.&#160; They&apos;re good ideas on paper, but in practice they cause major headaches.&lt;/p&gt;</comment>
                            <comment id="17747817" author="bprov" created="Thu, 27 Jul 2023 07:40:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krisden&quot; class=&quot;user-hover&quot; rel=&quot;krisden&quot;&gt;krisden&lt;/a&gt;&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;have you tried adding the suggested solr.allowPaths lines to security.policy when you enable the security manager? Did it fix the issue?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I just did, it works:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
grep allowPaths /opt/solr-9.2.1/server/etc/security.policy
&#160; permission java.io.FilePermission &lt;span class=&quot;code-quote&quot;&gt;&quot;${solr.allowPaths}&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;read,write,delete,readlink&quot;&lt;/span&gt;;
&#160; permission java.io.FilePermission &lt;span class=&quot;code-quote&quot;&gt;&quot;${solr.allowPaths}${/}-&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;read,write,delete,readlink&quot;&lt;/span&gt;;


ps aux | grep solr
[...]
-Djava.security.manager -Djava.security.policy=/opt/solr-9.2.1/server/etc/security.policy -Djava.security.properties=/opt/solr-9.2.1/server/etc/security.properties
[...]


curl -sk &lt;span class=&quot;code-quote&quot;&gt;&apos;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr/admin/collections?action=BACKUP&amp;amp;name=xxx_20230725145421&amp;amp;collection=xxx&amp;amp;location=file:///opt/backup/solr/xxx&amp;amp;async=20230725145421&apos;&lt;/span&gt;
&lt;/span&gt;{
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;responseHeader&quot;&lt;/span&gt;:{
&#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;status&quot;&lt;/span&gt;:0,
&#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;QTime&quot;&lt;/span&gt;:11},
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;requestid&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;20230725145421&quot;&lt;/span&gt;}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Removing entries from /opt/solr-9.2.1/server/etc/security.policy to check that it bricks&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
grep allowPaths /opt/solr-9.2.1/server/etc/security.policy


curl -sk &lt;span class=&quot;code-quote&quot;&gt;&apos;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr/admin/collections?action=BACKUP&amp;amp;name=xxx_20230725145422&amp;amp;collection=xxx&amp;amp;location=file:///opt/backup/solr/xxx&amp;amp;async=20230725145422&apos;&lt;/span&gt;
&lt;/span&gt;{
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;responseHeader&quot;&lt;/span&gt;:{
&#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;status&quot;&lt;/span&gt;:500,
&#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;QTime&quot;&lt;/span&gt;:9},
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;error&quot;&lt;/span&gt;:{
&#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;msg&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;access denied (\&quot;&lt;/span&gt;java.io.FilePermission\&lt;span class=&quot;code-quote&quot;&gt;&quot; \&quot;&lt;/span&gt;/opt/backup/solr/xxx\&lt;span class=&quot;code-quote&quot;&gt;&quot; \&quot;&lt;/span&gt;read\&lt;span class=&quot;code-quote&quot;&gt;&quot;)&quot;&lt;/span&gt;,&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It bricks without it.&lt;/p&gt;</comment>
                            <comment id="17748200" author="houston" created="Thu, 27 Jul 2023 15:00:48 +0000"  >&lt;p&gt;Thanks for testing it out. If you want to make a PR at &lt;a href=&quot;https://github.com/apache/solr&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr&lt;/a&gt;, I&apos;d be happy to see it through. If not, I can make the fix and credit you. Let me know which you prefer. Also what name do you want me to use for the Change log entry?&lt;/p&gt;</comment>
                            <comment id="17748651" author="bprov" created="Fri, 28 Jul 2023 15:17:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=houston&quot; class=&quot;user-hover&quot; rel=&quot;houston&quot;&gt;houston&lt;/a&gt;&#160; I created &lt;a href=&quot;https://github.com/apache/solr/pull/1811&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/pull/1811&lt;/a&gt; , &quot;./gradlew check&quot; took quite some time, 33 minutes...&lt;/p&gt;

&lt;p&gt;You simply can use my Github name daylicron, e.g. &quot;daylicron @ Babiel GmbH&quot; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17748695" author="jira-bot" created="Fri, 28 Jul 2023 17:59:49 +0000"  >&lt;p&gt;Commit 59057dabc13978fd8b4de4cdcd1df34c184d3139 in solr&apos;s branch refs/heads/main from Dennis W&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=59057dabc13&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=59057dabc13&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16905&quot; title=&quot;Java Security Manager rules don&amp;#39;t inclue &amp;quot;solr.allowPaths&amp;quot; property&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16905&quot;&gt;&lt;del&gt;SOLR-16905&lt;/del&gt;&lt;/a&gt;: Allow access to allowPaths in SecurityManager (#1811)&lt;/p&gt;

&lt;p&gt;Co-authored-by: Houston Putman &amp;lt;houston@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17748696" author="jira-bot" created="Fri, 28 Jul 2023 18:03:19 +0000"  >&lt;p&gt;Commit 3d564dbffea59e856e00dbe04553366a80db1e9f in solr&apos;s branch refs/heads/branch_9x from Dennis W&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=3d564dbffea&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=3d564dbffea&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16905&quot; title=&quot;Java Security Manager rules don&amp;#39;t inclue &amp;quot;solr.allowPaths&amp;quot; property&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16905&quot;&gt;&lt;del&gt;SOLR-16905&lt;/del&gt;&lt;/a&gt;: Allow access to allowPaths in SecurityManager (#1811)&lt;/p&gt;

&lt;p&gt;Co-authored-by: Houston Putman &amp;lt;houston@apache.org&amp;gt;&lt;br/&gt;
(cherry picked from commit 59057dabc13978fd8b4de4cdcd1df34c184d3139)&lt;/p&gt;</comment>
                            <comment id="17775443" author="alex.parvulescu" created="Sun, 15 Oct 2023 19:57:04 +0000"  >&lt;p&gt;Closing after the 9.4.0 release&lt;/p&gt;</comment>
                            <comment id="17950526" author="gjourdan" created="Fri, 9 May 2025 13:56:36 +0000"  >&lt;p&gt;Hello folks,&lt;/p&gt;

&lt;p&gt;According to Solr documentation, allowPaths can be a list of paths separated by a comma:&lt;/p&gt;

&lt;p&gt;&amp;gt; Solr will normally only access folders relative to &lt;tt&gt;$SOLR_HOME&lt;/tt&gt;, &lt;tt&gt;$SOLR_DATA_HOME&lt;/tt&gt; or &lt;tt&gt;coreRootDir&lt;/tt&gt;. If you need to e.g., create a core outside of these paths, you can explicitly allow the path with &lt;tt&gt;allowPaths&lt;/tt&gt;. It is a comma separated string of file system paths to allow. The special value of &lt;tt&gt;*&lt;/tt&gt; will allow any path on the system.&lt;/p&gt;

&lt;p&gt;However, when configuring it as such, the policy file doesn&apos;t work as in the policy file it&apos;s expecting one line per path.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Did I miss something or is this expected and the usage of the system property should be discouraged when there are multiple paths then?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            26 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1je0w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>