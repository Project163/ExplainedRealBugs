<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:54:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16635] Bad PublicKeyHandler configuration when using MiniSolrCloudCluster</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16635</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I changed some external test code to use Solr 9.1 and I started getting this exception when using MiniSolrCloudCluster:&#8232;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;14:55:25.477 [jetty-launcher-7-thread-1] ERROR org.apache.solr.servlet.CoreContainerProvider - Could not start Solr. Check solr/home property and the logs
14:55:25.498 [jetty-launcher-7-thread-1] ERROR org.apache.solr.core.SolrCore - null
java.lang.RuntimeException: Bad PublicKeyHandler configuration.
	at org.apache.solr.core.CoreContainer.&amp;lt;init&amp;gt;(CoreContainer.java:386)
	at org.apache.solr.core.CoreContainer.&amp;lt;init&amp;gt;(CoreContainer.java:363)
	at org.apache.solr.servlet.CoreContainerProvider.createCoreContainer(CoreContainerProvider.java:376)
	at org.apache.solr.servlet.CoreContainerProvider.init(CoreContainerProvider.java:226)
	at org.apache.solr.client.solrj.embedded.JettySolrRunner$1.lifeCycleStarted(JettySolrRunner.java:402)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.setStarted(AbstractLifeCycle.java:194)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:74)
	at org.apache.solr.client.solrj.embedded.JettySolrRunner.retryOnPortBindFailure(JettySolrRunner.java:614)
	at org.apache.solr.client.solrj.embedded.JettySolrRunner.start(JettySolrRunner.java:552)
	at org.apache.solr.client.solrj.embedded.JettySolrRunner.start(JettySolrRunner.java:523)
	at org.apache.solr.cloud.MiniSolrCloudCluster.startJettySolrRunner(MiniSolrCloudCluster.java:550)
	at org.apache.solr.cloud.MiniSolrCloudCluster.lambda$new$0(MiniSolrCloudCluster.java:355)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.lambda$execute$0(ExecutorUtil.java:271)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:829)
Caused by: java.net.MalformedURLException: no protocol: cryptokeys/priv_key512_pkcs8.pem
	at java.base/java.net.URL.&amp;lt;init&amp;gt;(URL.java:645)
	at java.base/java.net.URL.&amp;lt;init&amp;gt;(URL.java:541)
	at java.base/java.net.URL.&amp;lt;init&amp;gt;(URL.java:488)
	at org.apache.solr.security.PublicKeyHandler.createKeyPair(PublicKeyHandler.java:59)
	at org.apache.solr.security.PublicKeyHandler.&amp;lt;init&amp;gt;(PublicKeyHandler.java:42)
	at org.apache.solr.core.CoreContainer.&amp;lt;init&amp;gt;(CoreContainer.java:384)
	... 16 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I believe the issue may have been introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14223&quot; title=&quot;PublicKeyHandler consumes a lot of entropy during tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14223&quot;&gt;&lt;del&gt;SOLR-14223&lt;/del&gt;&lt;/a&gt;, in particular, &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/1217/files#diff-c3ed2e54e8d8f256575f36532ab4eec6d9e7424e0a6fd237cdbfcefa5fcbaeb0R116-R117&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this code&lt;/a&gt;. I believe we don&apos;t hit this in Solr because of &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/1217/files#diff-7cb8f3a46dbdb99ccfdcc1d07c4457167188e7366534a7e7e4a0b5aff93c1cc4R304-R305&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this code&lt;/a&gt;, so I&apos;m forced to do something like this in my external code, or at least do something like:&#8232;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.setProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;pkiHandlerPublicKeyPath&quot;&lt;/span&gt;, &quot;&quot;);
&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.setProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;pkiHandlerPrivateKeyPath&quot;&lt;/span&gt;, &quot;&quot;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which I doubt it&apos;s the intention. We can have &lt;tt&gt;MiniSolrCloudCluster&lt;/tt&gt; resolve the location of the crypto keys and use that in the default solr.xml string that it includes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13521188">SOLR-16635</key>
            <summary>Bad PublicKeyHandler configuration when using MiniSolrCloudCluster</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tflobbe">Tomas Eduardo Fernandez Lobbe</assignee>
                                    <reporter username="tflobbe">Tomas Eduardo Fernandez Lobbe</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jan 2023 23:42:57 +0000</created>
                <updated>Fri, 17 Oct 2025 20:05:14 +0000</updated>
                            <resolved>Mon, 30 Jan 2023 23:47:48 +0000</resolved>
                                    <version>9.0</version>
                    <version>9.1</version>
                    <version>10.0</version>
                                    <fixVersion>9.2</fixVersion>
                    <fixVersion>10.0</fixVersion>
                                    <component>test-framework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="17682302" author="jira-bot" created="Mon, 30 Jan 2023 23:16:59 +0000"  >&lt;p&gt;Commit be5ad010520a438f1274b995c844281d81bb8032 in solr&apos;s branch refs/heads/main from Tomas Eduardo Fernandez Lobbe&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=be5ad010520&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=be5ad010520&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16635&quot; title=&quot;Bad PublicKeyHandler configuration when using MiniSolrCloudCluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16635&quot;&gt;&lt;del&gt;SOLR-16635&lt;/del&gt;&lt;/a&gt;: Resolve crypto keys file path in MiniSolrCloudCluster (#1312)&lt;/p&gt;

&lt;p&gt;This eliminates the need to set the system properties `pkiHandlerPublicKeyPath` and `pkiHandlerPrivateKeyPath` before starting MiniSolrCloudCluster when using the Solr test framework.&lt;/p&gt;</comment>
                            <comment id="17682312" author="jira-bot" created="Mon, 30 Jan 2023 23:46:33 +0000"  >&lt;p&gt;Commit 94a0e3160213643aba52ab131e12959b6d675a9d in solr&apos;s branch refs/heads/branch_9x from Tomas Eduardo Fernandez Lobbe&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=94a0e316021&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=94a0e316021&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16635&quot; title=&quot;Bad PublicKeyHandler configuration when using MiniSolrCloudCluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16635&quot;&gt;&lt;del&gt;SOLR-16635&lt;/del&gt;&lt;/a&gt;: Resolve crypto keys file path in MiniSolrCloudCluster (#1312)&lt;/p&gt;

&lt;p&gt;This eliminates the need to set the system properties `pkiHandlerPublicKeyPath` and `pkiHandlerPrivateKeyPath` before starting MiniSolrCloudCluster when using the Solr test framework.&lt;/p&gt;</comment>
                            <comment id="17705490" author="houston" created="Mon, 27 Mar 2023 18:04:12 +0000"  >&lt;p&gt;Closing after the 9.2.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1fbyo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>