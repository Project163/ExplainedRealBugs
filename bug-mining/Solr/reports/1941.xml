<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:51:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6161] OutOfMemoryError Not Thrown in sendError</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6161</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;We need to handle the OOME thrown here. &lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/trunk/solr/core/src/java/org/apache/solr/servlet/SolrDispatchFilter.java#L436&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/trunk/solr/core/src/java/org/apache/solr/servlet/SolrDispatchFilter.java#L436&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I experienced this in my solr server logs. &lt;br/&gt;
ERROR org.apache.solr.servlet.SolrDispatchFilter: null:java.lang.RuntimeException: java.lang.OutOfMemoryError: Java heap space&lt;br/&gt;
    at org.apache.solr.servlet.SolrDispatchFilter.sendError(SolrDispatchFilter.java:775)&lt;br/&gt;
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:419)&lt;br/&gt;
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:187)&lt;br/&gt;
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)&lt;br/&gt;
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&lt;br/&gt;
    at org.apache.solr.servlet.ProxyUserFilter.doFilter(ProxyUserFilter.java:241)&lt;br/&gt;
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)&lt;br/&gt;
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&lt;br/&gt;
    at org.apache.solr.servlet.SolrHadoopAuthenticationFilter$2.doFilter(SolrHadoopAuthenticationFilter.java:143)&lt;br/&gt;
    at org.apache.hadoop.security.authentication.server.AuthenticationFilter.doFilter(AuthenticationFilter.java:384)&lt;br/&gt;
    at org.apache.solr.servlet.SolrHadoopAuthenticationFilter.doFilter(SolrHadoopAuthenticationFilter.java:148)&lt;br/&gt;
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)&lt;br/&gt;
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&lt;br/&gt;
    at org.apache.solr.servlet.HostnameFilter.doFilter(HostnameFilter.java:86)&lt;br/&gt;
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)&lt;br/&gt;
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&lt;br/&gt;
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)&lt;br/&gt;
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)&lt;br/&gt;
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)&lt;br/&gt;
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)&lt;br/&gt;
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)&lt;br/&gt;
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)&lt;br/&gt;
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)&lt;br/&gt;
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)&lt;br/&gt;
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)&lt;br/&gt;
    at java.lang.Thread.run(Thread.java:744)&lt;br/&gt;
Caused by: java.lang.OutOfMemoryError: Java heap space&lt;br/&gt;
    at org.apache.lucene.index.DocTermOrds.uninvert(DocTermOrds.java:279)&lt;br/&gt;
    at org.apache.solr.request.UnInvertedField.&amp;lt;init&amp;gt;(UnInvertedField.java:179)&lt;br/&gt;
    at org.apache.solr.request.UnInvertedField.getUnInvertedField(UnInvertedField.java:664)&lt;br/&gt;
    at org.apache.solr.request.SimpleFacets.getTermCounts(SimpleFacets.java:435)&lt;br/&gt;
    at org.apache.solr.handler.component.PivotFacetHelper.doPivots(PivotFacetHelper.java:147)&lt;br/&gt;
    at org.apache.solr.handler.component.PivotFacetHelper.process(PivotFacetHelper.java:90)&lt;br/&gt;
    at org.apache.solr.handler.component.FacetComponent.process(FacetComponent.java:85)&lt;br/&gt;
    at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:208)&lt;br/&gt;
    at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135)&lt;br/&gt;
    at org.apache.solr.core.SolrCore.execute(SolrCore.java:1947)&lt;br/&gt;
    at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:759)&lt;br/&gt;
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:398)&lt;br/&gt;
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:187)&lt;br/&gt;
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)&lt;br/&gt;
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&lt;br/&gt;
    at org.apache.solr.servlet.ProxyUserFilter.doFilter(ProxyUserFilter.java:241)&lt;br/&gt;
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)&lt;br/&gt;
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&lt;br/&gt;
    at org.apache.solr.servlet.SolrHadoopAuthenticationFilter$2.doFilter(SolrHadoopAuthenticationFilter.java:143)&lt;br/&gt;
    at org.apache.hadoop.security.authentication.server.AuthenticationFilter.doFilter(AuthenticationFilter.java:384)&lt;br/&gt;
    at org.apache.solr.servlet.SolrHadoopAuthenticationFilter.doFilter(SolrHadoopAuthenticationFilter.java:148)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12720671">SOLR-6161</key>
            <summary>OutOfMemoryError Not Thrown in sendError</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalin">Shalin Shekhar Mangar</assignee>
                                    <reporter username="mwc">Miklos Christine</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Jun 2014 19:48:02 +0000</created>
                <updated>Mon, 9 May 2016 18:54:24 +0000</updated>
                            <resolved>Sat, 14 Jun 2014 14:47:22 +0000</resolved>
                                                    <fixVersion>4.9</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14030549" author="shalinmangar" created="Fri, 13 Jun 2014 11:50:21 +0000"  >&lt;p&gt;Which version of Solr are you running? A bunch of these issues were solved in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4992&quot; title=&quot;Solr queries don&amp;#39;t propagate Java OutOfMemoryError back to the JVM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4992&quot;&gt;&lt;del&gt;SOLR-4992&lt;/del&gt;&lt;/a&gt; in Solr 4.7&lt;/p&gt;</comment>
                            <comment id="14030985" author="mwc" created="Fri, 13 Jun 2014 18:46:52 +0000"  >&lt;p&gt;I&apos;m using CDH5.0.1, which is based off of Solr 4.4.&lt;/p&gt;

&lt;p&gt;I reviewed the latest patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4992&quot; title=&quot;Solr queries don&amp;#39;t propagate Java OutOfMemoryError back to the JVM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4992&quot;&gt;&lt;del&gt;SOLR-4992&lt;/del&gt;&lt;/a&gt; and didn&apos;t see the exceptions being handled explicitly as done in other sections of the code.&lt;/p&gt;</comment>
                            <comment id="14030999" author="shalinmangar" created="Fri, 13 Jun 2014 18:54:31 +0000"  >&lt;p&gt;The OutOfMemoryError was wrapped in a RuntimeException which is why it was not thrown to the JVM. I have reviewed the solr code base, trying to find a place where a Throwable is wrapped in a RuntimeException but I could not find such a place. In any case, it doesn&apos;t harm us if we instance check the cause and throw if it was an OOM. I&apos;ll fix.&lt;/p&gt;</comment>
                            <comment id="14031583" author="jira-bot" created="Sat, 14 Jun 2014 14:46:13 +0000"  >&lt;p&gt;Commit 1602590 from shalin@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1602590&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1602590&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6161&quot; title=&quot;OutOfMemoryError Not Thrown in sendError&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6161&quot;&gt;&lt;del&gt;SOLR-6161&lt;/del&gt;&lt;/a&gt;: SolrDispatchFilter should throw java.lang.Error back even if wrapped in another exception&lt;/p&gt;</comment>
                            <comment id="14031584" author="jira-bot" created="Sat, 14 Jun 2014 14:46:42 +0000"  >&lt;p&gt;Commit 1602591 from shalin@apache.org in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1602591&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1602591&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6161&quot; title=&quot;OutOfMemoryError Not Thrown in sendError&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6161&quot;&gt;&lt;del&gt;SOLR-6161&lt;/del&gt;&lt;/a&gt;: SolrDispatchFilter should throw java.lang.Error back even if wrapped in another exception&lt;/p&gt;</comment>
                            <comment id="14031585" author="shalinmangar" created="Sat, 14 Jun 2014 14:47:22 +0000"  >&lt;p&gt;Thanks Miklos!&lt;/p&gt;</comment>
                            <comment id="14036601" author="markrmiller@gmail.com" created="Wed, 18 Jun 2014 22:56:31 +0000"  >&lt;p&gt;Seems like if we are going to do this, we should run up the full cause chain?&lt;/p&gt;</comment>
                            <comment id="14036944" author="jira-bot" created="Thu, 19 Jun 2014 04:32:52 +0000"  >&lt;p&gt;Commit 1603708 from shalin@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1603708&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1603708&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6161&quot; title=&quot;OutOfMemoryError Not Thrown in sendError&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6161&quot;&gt;&lt;del&gt;SOLR-6161&lt;/del&gt;&lt;/a&gt;: Walk the entire cause chain looking for an Error&lt;/p&gt;</comment>
                            <comment id="14036945" author="jira-bot" created="Thu, 19 Jun 2014 04:33:22 +0000"  >&lt;p&gt;Commit 1603709 from shalin@apache.org in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1603709&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1603709&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6161&quot; title=&quot;OutOfMemoryError Not Thrown in sendError&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6161&quot;&gt;&lt;del&gt;SOLR-6161&lt;/del&gt;&lt;/a&gt;: Walk the entire cause chain looking for an Error&lt;/p&gt;</comment>
                            <comment id="14036946" author="jira-bot" created="Thu, 19 Jun 2014 04:34:17 +0000"  >&lt;p&gt;Commit 1603710 from shalin@apache.org in branch &apos;dev/branches/lucene_solr_4_9&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1603710&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1603710&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6161&quot; title=&quot;OutOfMemoryError Not Thrown in sendError&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6161&quot;&gt;&lt;del&gt;SOLR-6161&lt;/del&gt;&lt;/a&gt;: Walk the entire cause chain looking for an Error&lt;/p&gt;</comment>
                            <comment id="14036947" author="shalinmangar" created="Thu, 19 Jun 2014 04:35:10 +0000"  >&lt;p&gt;Thanks for the review Mark. I should have done that in the first go.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>398870</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 22 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wo3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>398992</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>