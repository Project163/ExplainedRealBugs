<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:44:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-13203] RuntimeException causing a 500 response code for invalid user input</title>
                <link>https://issues.apache.org/jira/browse/SOLR-13203</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Requesting the following URL causes Solr to return an HTTP 500 error response:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;http://localhost:8983/solr/films/select?uf=fl=gen*,id&amp;amp;defType=edismax
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The error response seems to be caused by the following uncaught exception:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.RuntimeException: dynamic field name must start or end with *
at org.apache.solr.search.ExtendedDismaxQParser$DynamicField.&amp;lt;init&amp;gt;(ExtendedDismaxQParser.java:1610)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The DynamicField parser throws this RuntimeException to tell the user that the given query is invalid. Sadly, the exception is never caught, so it manifests as a 500 error instead of a 400 error.&lt;/p&gt;

&lt;p&gt;We found this issue and ~70 more like this using &lt;a href=&quot;https://www.diffblue.com/labs/?utm_source=solr-br&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Diffblue Microservices Testing&lt;/a&gt;. Find more information on this &lt;a href=&quot;https://www.diffblue.com/blog/2018/12/19/diffblue-microservice-testing-a-sneak-peek-at-our-early-product-and-results?utm_source=solr-br&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;fuzz testing campaign&lt;/a&gt;.&lt;/p&gt;</description>
                <environment>&lt;h1&gt;&lt;a name=&quot;Stepstoreproduce&quot;&gt;&lt;/a&gt;Steps to reproduce&lt;/h1&gt;

&lt;ul&gt;
	&lt;li&gt;Use a Linux machine.&lt;/li&gt;
	&lt;li&gt;Build commit &lt;tt&gt;ea2c8ba&lt;/tt&gt; of Solr as described in the section below.&lt;/li&gt;
	&lt;li&gt;Build the films collection as described below.&lt;/li&gt;
	&lt;li&gt;Start the server using the command &lt;tt&gt;./bin/solr start -f -p 8983 -s /tmp/home&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Request the URL given in the bug description.&lt;/li&gt;
&lt;/ul&gt;


&lt;h1&gt;&lt;a name=&quot;Compilingtheserver&quot;&gt;&lt;/a&gt;Compiling the server&lt;/h1&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;git clone https://github.com/apache/lucene-solr
cd lucene-solr
git checkout ea2c8ba
ant compile
cd solr
ant server
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;h1&gt;&lt;a name=&quot;Buildingthecollection&quot;&gt;&lt;/a&gt;Building the collection&lt;/h1&gt;

&lt;p&gt;We followed &lt;a href=&quot;http://lucene.apache.org/solr/guide/7_5/solr-tutorial.html#exercise-2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Exercise 2&lt;/a&gt; from the &lt;a href=&quot;http://lucene.apache.org/solr/guide/7_5/solr-tutorial.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Solr Tutorial&lt;/a&gt;. The attached file (&lt;tt&gt;home.zip&lt;/tt&gt;) gives the contents of folder &lt;tt&gt;/tmp/home&lt;/tt&gt; that you will obtain by following the steps below:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;mkdir -p /tmp/home
echo &apos;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&amp;gt;&amp;lt;solr&amp;gt;&amp;lt;/solr&amp;gt;&apos; &amp;gt; /tmp/home/solr.xml
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In one terminal start a Solr instance in foreground:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;./bin/solr start -f -p 8983 -s /tmp/home
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In another terminal, create a collection of movies, with no shards and no replication, and initialize it:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;bin/solr create -c films
curl -X POST -H &apos;Content-type:application/json&apos; --data-binary &apos;{&quot;add-field&quot;: {&quot;name&quot;:&quot;name&quot;, &quot;type&quot;:&quot;text_general&quot;, &quot;multiValued&quot;:false, &quot;stored&quot;:true}}&apos; http://localhost:8983/solr/films/schema
curl -X POST -H &apos;Content-type:application/json&apos; --data-binary &apos;{&quot;add-copy-field&quot; : {&quot;source&quot;:&quot;*&quot;,&quot;dest&quot;:&quot;_text_&quot;}}&apos; http://localhost:8983/solr/films/schema
./bin/post -c films example/films/films.json
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</environment>
        <key id="13213058">SOLR-13203</key>
            <summary>RuntimeException causing a 500 response code for invalid user input</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="munendrasn">Munendra S N</assignee>
                                    <reporter username="jkloos">Johannes Kloos</reporter>
                        <labels>
                            <label>diffblue</label>
                            <label>newdev</label>
                    </labels>
                <created>Thu, 31 Jan 2019 12:25:55 +0000</created>
                <updated>Wed, 15 Jul 2020 15:10:27 +0000</updated>
                            <resolved>Sun, 7 Jun 2020 12:19:56 +0000</resolved>
                                    <version>9.0</version>
                                    <fixVersion>8.6</fixVersion>
                                    <component>search</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                <comments>
                            <comment id="16757319" author="jkloos" created="Thu, 31 Jan 2019 14:55:59 +0000"  >&lt;p&gt;Going over our examples where a 500 status code was returned, I noticed that a number of other exceptions are also used to report invalid user input, but yield 500 errors. In particular, I think it would make sense to have the following exceptions give a 400 status code, at least in some cases:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;SOLRException&lt;/li&gt;
	&lt;li&gt;NumberFormatException&lt;/li&gt;
	&lt;li&gt;IllegalArgumentException&lt;/li&gt;
	&lt;li&gt;IOException&lt;/li&gt;
	&lt;li&gt;JSONParser.ParserException&lt;/li&gt;
	&lt;li&gt;UnsupportedCharsetExecption&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Additionally, I found one case of UnsupportedOperationException that should probably report a 400 instead of a 500. It is thrown at org.apache.lucene.search.Query.createWeight(Query.java:66).&lt;/p&gt;</comment>
                            <comment id="17127618" author="jira-bot" created="Sun, 7 Jun 2020 12:12:39 +0000"  >&lt;p&gt;Commit 291e358a3d7823082316bd0fa63642b9900adf27 in lucene-solr&apos;s branch refs/heads/master from mrsoong&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=291e358&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=291e358&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13203&quot; title=&quot;RuntimeException causing a 500 response code for invalid user input&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13203&quot;&gt;&lt;del&gt;SOLR-13203&lt;/del&gt;&lt;/a&gt;: return 400 on invalid dynamic field for edismax uf (#1502)&lt;/p&gt;
</comment>
                            <comment id="17127619" author="jira-bot" created="Sun, 7 Jun 2020 12:14:01 +0000"  >&lt;p&gt;Commit ef0309553a32c124cef0a67b962ef0b1ce0091b7 in lucene-solr&apos;s branch refs/heads/branch_8x from mrsoong&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=ef03095&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=ef03095&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13203&quot; title=&quot;RuntimeException causing a 500 response code for invalid user input&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13203&quot;&gt;&lt;del&gt;SOLR-13203&lt;/del&gt;&lt;/a&gt;: return 400 on invalid dynamic field for edismax uf (#1502)&lt;/p&gt;
</comment>
                            <comment id="17158356" author="broustant" created="Wed, 15 Jul 2020 15:10:27 +0000"  >&lt;p&gt;Closing after the 8.6.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12957094" name="home.zip" size="384713" author="jkloos" created="Thu, 31 Jan 2019 12:25:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 17 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi0ivk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>