<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:22:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-2631] PingRequestHandler can infinite loop if called with a qt that points to itsself</title>
                <link>https://issues.apache.org/jira/browse/SOLR-2631</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;We got a security report to private@lucene.apache.org, that Solr can infinite loop, use 100% CPU and stack overflow, if you execute the following HTTP request: &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;http://localhost:8983/solr/select?qt=/admin/ping&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/select?qt=/admin/ping&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://localhost:8983/solr/admin/ping?qt=/admin/ping&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/admin/ping?qt=/admin/ping&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The qt paramter instructs PingRequestHandler to call the given request handler. This leads to an infinite loop. This is not an security issue, but for an unprotected Solr server with unprotected /solr/select path this makes it stop working.&lt;/p&gt;

&lt;p&gt;The fix is to prevent infinite loop by disallowing calling itsself.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12512500">SOLR-2631</key>
            <summary>PingRequestHandler can infinite loop if called with a qt that points to itsself</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="uschindler">Uwe Schindler</assignee>
                                    <reporter username="uschindler">Uwe Schindler</reporter>
                        <labels>
                            <label>security</label>
                    </labels>
                <created>Fri, 1 Jul 2011 20:40:29 +0000</created>
                <updated>Thu, 16 Feb 2017 15:55:08 +0000</updated>
                            <resolved>Mon, 4 Jul 2011 16:33:03 +0000</resolved>
                                    <version>1.4</version>
                    <version>3.1</version>
                    <version>3.2</version>
                    <version>3.3</version>
                                    <fixVersion>3.4</fixVersion>
                    <fixVersion>4.0-ALPHA</fixVersion>
                                    <component>Admin UI</component>
                    <component>search</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13058785" author="thetaphi" created="Fri, 1 Jul 2011 20:41:59 +0000"  >&lt;p&gt;Edoardo Tosca, who reported the issue, gave the following workaround for solrconfig.xml to fix this by configuration:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Ok,&lt;br/&gt;
to solve the Ping problem you can add an invariant:&lt;br/&gt;
&amp;lt;lst name=&quot;defaults&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;str name=&quot;q&quot;&amp;gt;solrpingquery&amp;lt;/str&amp;gt;&lt;br/&gt;
      &amp;lt;str name=&quot;echoParams&quot;&amp;gt;all&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;/lst&amp;gt;&lt;br/&gt;
&amp;lt;lst name=&quot;invariants&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;str name=&quot;qt&quot;&amp;gt;search&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;/lst&amp;gt;&lt;/p&gt;

&lt;p&gt;in this case you avoid generating recursive calls to /admin/ping handler&lt;/p&gt;

&lt;p&gt;Edo&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="13058786" author="thetaphi" created="Fri, 1 Jul 2011 20:44:19 +0000"  >&lt;p&gt;This patch fixes the bug.&lt;/p&gt;

&lt;p&gt;Hoss said, we could also simply check the qt param but I decided to do the instanceof check: If the PingRequestHandler is registered multiple times in the solrconfig.xml (e.g. by different URI paths or different names), the infinite loop could still occur. The PingRequestHandler should generally disallow calling itsself.&lt;/p&gt;</comment>
                            <comment id="13059003" author="thetaphi" created="Sat, 2 Jul 2011 09:05:08 +0000"  >&lt;p&gt;Committed trunk revision: 1142179&lt;br/&gt;
Merged 3.x revision: 1142180&lt;/p&gt;

&lt;p&gt;Thanks Edoardo!&lt;/p&gt;</comment>
                            <comment id="13059094" author="hossman" created="Sat, 2 Jul 2011 18:36:14 +0000"  >&lt;p&gt;we shouldn&apos;t consider tis resolved until we also apply the &quot;work around&quot; provided by Edoardo to the example and test solrconfig.xml files as well.&lt;/p&gt;

&lt;p&gt;that way people who copy them in the future won&apos;t get any error at all.&lt;/p&gt;</comment>
                            <comment id="13059101" author="thetaphi" created="Sat, 2 Jul 2011 19:00:37 +0000"  >&lt;p&gt;Sorry, I don&apos;t understand what you want to say - please give details. With this fix there is no problem at all, so why change default configs?&lt;/p&gt;</comment>
                            <comment id="13059511" author="hossman" created="Mon, 4 Jul 2011 16:33:03 +0000"  >&lt;p&gt;Uwe, sorry for my brevity &amp;#8211; my point was that you had fixed the infinite loop by adding an sanity check that will throw an error, but the example &amp;amp; test configs should also be improved to demonstrate better practices when using the PingRequestHandler so people using them can never encounter the sanity checking you added.&lt;/p&gt;

&lt;p&gt;Committed revision 1142722. - trunk&lt;br/&gt;
Committed revision 1142730. - trunk stupid mistake&lt;br/&gt;
Committed revision 1142731. - 3x&lt;/p&gt;
</comment>
                            <comment id="13106203" author="rcmuir" created="Fri, 16 Sep 2011 14:48:50 +0000"  >&lt;p&gt;bulk close for 3.4&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12484925" name="SOLR-2631.patch" size="684" author="uschindler" created="Fri, 1 Jul 2011 20:44:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4916</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03jl3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18606</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>