<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:38:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-13415] java -jar post.jar fails under JDK 11 on master</title>
                <link>https://issues.apache.org/jira/browse/SOLR-13415</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Most every attempt to use post.jar fails, but the simplest is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java -jar post.jar -help
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This gives the response:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.NoClassDefFoundError: org/apache/solr/util/CLIO
    at org.apache.solr.util.SimplePostTool.info(SimplePostTool.java:735)
    at org.apache.solr.util.SimplePostTool.main(SimplePostTool.java:167)
Caused by: java.lang.ClassNotFoundException: org.apache.solr.util.CLIO
    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:583)
    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)
    at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:521)
    ... 2 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is true even though:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
jar -tvf solr-core-9.0.0-SNAPSHOT.jar | grep CLIO
   747 Fri Apr 19 10:40:04 PDT 2019 org/apache/solr/util/CLIO.class
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Using&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
openjdk version &lt;span class=&quot;code-quote&quot;&gt;&quot;11.0.2&quot;&lt;/span&gt; 2019-01-15
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13229306">SOLR-13415</key>
            <summary>java -jar post.jar fails under JDK 11 on master</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="uschindler">Uwe Schindler</assignee>
                                    <reporter username="erickerickson">Erick Erickson</reporter>
                        <labels>
                    </labels>
                <created>Sun, 21 Apr 2019 23:46:40 +0000</created>
                <updated>Thu, 12 May 2022 00:26:28 +0000</updated>
                            <resolved>Mon, 22 Apr 2019 18:19:13 +0000</resolved>
                                    <version>9.0</version>
                                    <fixVersion>9.0</fixVersion>
                                    <component>examples</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16822999" author="thetaphi" created="Mon, 22 Apr 2019 10:30:56 +0000"  >&lt;p&gt;Does this also happen in 8.x, if you use Java 11 to run post.jar?&lt;/p&gt;</comment>
                            <comment id="16823177" author="erickerickson" created="Mon, 22 Apr 2019 15:24:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt;&#160;8x appears to be fine. I tried this both compiling and running under both Java 8 and Java 11 on 8x without problems.&lt;/p&gt;</comment>
                            <comment id="16823287" author="thetaphi" created="Mon, 22 Apr 2019 17:50:23 +0000"  >&lt;p&gt;Hi, the issue comes from &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13322&quot; title=&quot;Enable checking for System.out references in Solr codebase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13322&quot;&gt;&lt;del&gt;SOLR-13322&lt;/del&gt;&lt;/a&gt;. It has nothing to do with Java 11:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;This is true even though:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
jar -tvf solr-core-9.0.0-SNAPSHOT.jar | grep CLIO
   747 Fri Apr 19 10:40:04 PDT 2019 org/apache/solr/util/CLIO.class
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;You are looking in the wrong JAR file. &lt;tt&gt;post.jar&lt;/tt&gt; must be able to run &quot;isolated&quot;. So it won&apos;t see any class outside its own JAR file.Unfortunately when we package post.jar in solr/build.xml, there is a hardcoded list of class files we add. &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13322&quot; title=&quot;Enable checking for System.out references in Solr codebase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13322&quot;&gt;&lt;del&gt;SOLR-13322&lt;/del&gt;&lt;/a&gt; adds CLIO (as a proxy to System.out for forbidden-apis), but it&apos;s not added there. &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13322&quot; title=&quot;Enable checking for System.out references in Solr codebase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13322&quot;&gt;&lt;del&gt;SOLR-13322&lt;/del&gt;&lt;/a&gt; was not cherry-picked into 8.x, so all is fine there.&lt;/p&gt;

&lt;p&gt;We don&apos;t see this issue in tests as we never test post.jar anywhere. Neither in smoke tester nor we have a testcase. To actually test it, we have to execute it in our own JVM, maybe as a separate ANT task like we have it for testing lock factories in Lucene.&lt;/p&gt;

&lt;p&gt;The fix is to extend this hardcoded list in Solr&apos;s build.xml:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;jar destfile=&lt;span class=&quot;code-quote&quot;&gt;&quot;${example}/exampledocs/post.jar&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;fileset dir=&lt;span class=&quot;code-quote&quot;&gt;&quot;${dest}/solr-core/classes/java&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
       &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;include name=&lt;span class=&quot;code-quote&quot;&gt;&quot;org/apache/solr/util/SimplePostTool*.class&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
       &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;include name=&lt;span class=&quot;code-quote&quot;&gt;&quot;org/apache/solr/util/RTimer.class&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
       &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;include name=&lt;span class=&quot;code-quote&quot;&gt;&quot;org/apache/solr/util/RTimer$*.class&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/fileset&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;manifest&amp;gt;&lt;/span&gt;
       &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;attribute name=&lt;span class=&quot;code-quote&quot;&gt;&quot;Main-Class&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.solr.util.SimplePostTool&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/manifest&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/jar&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="16823301" author="thetaphi" created="Mon, 22 Apr 2019 18:06:13 +0000"  >&lt;p&gt;Simple patch:  &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12966642/12966642_SOLR-13415.patch&quot; title=&quot;SOLR-13415.patch attached to SOLR-13415&quot;&gt;SOLR-13415.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;/p&gt;</comment>
                            <comment id="16823310" author="jira-bot" created="Mon, 22 Apr 2019 18:18:22 +0000"  >&lt;p&gt;Commit 377ac573dd6a6a83df2265101c6f2e6dd8d1d1e8 in lucene-solr&apos;s branch refs/heads/master from Uwe Schindler&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=377ac57&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=377ac57&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13415&quot; title=&quot;java -jar post.jar fails under JDK 11 on master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13415&quot;&gt;&lt;del&gt;SOLR-13415&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13322&quot; title=&quot;Enable checking for System.out references in Solr codebase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13322&quot;&gt;&lt;del&gt;SOLR-13322&lt;/del&gt;&lt;/a&gt;: Add CLIO.class file to post.jar&lt;/p&gt;</comment>
                            <comment id="16823312" author="thetaphi" created="Mon, 22 Apr 2019 18:19:13 +0000"  >&lt;p&gt;I just committed the fix without CHANGES entry as it&apos;s new in master and was never released.&lt;/p&gt;</comment>
                            <comment id="16823351" author="erickerickson" created="Mon, 22 Apr 2019 19:02:11 +0000"  >&lt;p&gt;Works for me, thanks Uwe!&lt;/p&gt;</comment>
                            <comment id="17535437" author="janhoy" created="Thu, 12 May 2022 00:26:28 +0000"  >&lt;p&gt;Closing after the 9.0.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13221503">SOLR-13322</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12966642" name="SOLR-13415.patch" size="563" author="uschindler" created="Mon, 22 Apr 2019 18:06:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0201s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>