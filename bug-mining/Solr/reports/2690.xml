<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:08:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-8203] Stop processing updates more quickly on shutdown</title>
                <link>https://issues.apache.org/jira/browse/SOLR-8203</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;As we discovered in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8129&quot; title=&quot;HdfsChaosMonkeyNothingIsSafeTest failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8129&quot;&gt;&lt;del&gt;SOLR-8129&lt;/del&gt;&lt;/a&gt;, existing update streams can continue to be processed for some time when the CoreContainer is being shut down.  If this node is the leader, updates can continue to flow to replicas over the existing streaming client (although new or idle clients won&apos;t be allowed to send anything).&lt;/p&gt;

&lt;p&gt;This can cause large reorders of updates and shard inconsistencies that we can&apos;t detect with the current PeerSync mechanism.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12907664">SOLR-8203</key>
            <summary>Stop processing updates more quickly on shutdown</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yseeley@gmail.com">Yonik Seeley</assignee>
                                    <reporter username="yseeley@gmail.com">Yonik Seeley</reporter>
                        <labels>
                    </labels>
                <created>Sat, 24 Oct 2015 16:44:03 +0000</created>
                <updated>Tue, 15 Dec 2015 13:55:24 +0000</updated>
                            <resolved>Mon, 2 Nov 2015 15:30:33 +0000</resolved>
                                                    <fixVersion>5.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14972842" author="yseeley@gmail.com" created="Sat, 24 Oct 2015 20:36:32 +0000"  >&lt;p&gt;Here&apos;s the patch I&apos;m currently testing with.&lt;br/&gt;
It only checks when in ZK mode... it was easier to add it in a single place, and shouldn&apos;t really matter in other modes.&lt;/p&gt;</comment>
                            <comment id="14973279" author="yseeley@gmail.com" created="Sun, 25 Oct 2015 15:00:43 +0000"  >&lt;p&gt;I looped the test overnight (adds only) and there were no shard inconsistency type fails.  Although there were plenty of other fails (50 in fact), this is the first time that there was no shard inconsistency.&lt;/p&gt;

&lt;p&gt;Mark has been testing &quot;interrupt the update executor on shutdown&quot; and that also looks like it fixes the issue.  That will also have the effect of stopping other operations more quickly (i.e. requests to other nodes that use that update executor), and in general it seems like a good thing to stop more quickly.  Should that be added here?&lt;/p&gt;</comment>
                            <comment id="14985341" author="jira-bot" created="Mon, 2 Nov 2015 14:58:29 +0000"  >&lt;p&gt;Commit 1712034 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1712034&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1712034&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8203&quot; title=&quot;Stop processing updates more quickly on shutdown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8203&quot;&gt;&lt;del&gt;SOLR-8203&lt;/del&gt;&lt;/a&gt;: reject updates if core container is shutting down&lt;/p&gt;</comment>
                            <comment id="14985345" author="jira-bot" created="Mon, 2 Nov 2015 14:59:24 +0000"  >&lt;p&gt;Commit 1712035 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1712035&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1712035&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8203&quot; title=&quot;Stop processing updates more quickly on shutdown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8203&quot;&gt;&lt;del&gt;SOLR-8203&lt;/del&gt;&lt;/a&gt;: reject updates if core container is shutting down&lt;/p&gt;</comment>
                            <comment id="14985350" author="jira-bot" created="Mon, 2 Nov 2015 15:01:54 +0000"  >&lt;p&gt;Commit 1712036 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1712036&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1712036&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8203&quot; title=&quot;Stop processing updates more quickly on shutdown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8203&quot;&gt;&lt;del&gt;SOLR-8203&lt;/del&gt;&lt;/a&gt;: reject updates if core container is shutting down&lt;/p&gt;</comment>
                            <comment id="14985612" author="markrmiller@gmail.com" created="Mon, 2 Nov 2015 17:53:49 +0000"  >&lt;blockquote&gt;&lt;p&gt;Should that be added here?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1 - I think we should do this too. We can add some doc around the fact that the update executor should not do any disk IO. Technically, it&apos;s probably fine since it lives the length of the container, but I think it&apos;s best to avoid it for proper shutdown.&lt;/p&gt;</comment>
                            <comment id="14985716" author="jira-bot" created="Mon, 2 Nov 2015 18:41:03 +0000"  >&lt;p&gt;Commit 1712111 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1712111&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1712111&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8203&quot; title=&quot;Stop processing updates more quickly on shutdown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8203&quot;&gt;&lt;del&gt;SOLR-8203&lt;/del&gt;&lt;/a&gt;: use shutdownNow on updateExecutor&lt;/p&gt;</comment>
                            <comment id="14985721" author="jira-bot" created="Mon, 2 Nov 2015 18:43:14 +0000"  >&lt;p&gt;Commit 1712112 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1712112&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1712112&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8203&quot; title=&quot;Stop processing updates more quickly on shutdown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8203&quot;&gt;&lt;del&gt;SOLR-8203&lt;/del&gt;&lt;/a&gt;: use shutdownNow on updateExecutor&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12736076">SOLR-6406</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12902452">SOLR-8129</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12768554" name="SOLR-8203.patch" size="796" author="yseeley@gmail.com" created="Sat, 24 Oct 2015 20:36:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nhaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>