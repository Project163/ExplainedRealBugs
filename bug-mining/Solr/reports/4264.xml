<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:39:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-11263] Payload function throws NPE for undefined fields</title>
                <link>https://issues.apache.org/jira/browse/SOLR-11263</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;With an undefined field used with the payload function query, there&apos;s an NPE thrown. Maybe we should throw a meaningful message instead.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13096302">SOLR-11263</key>
            <summary>Payload function throws NPE for undefined fields</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ichattopadhyaya">Ishan Chattopadhyaya</reporter>
                        <labels>
                    </labels>
                <created>Sun, 20 Aug 2017 17:01:26 +0000</created>
                <updated>Wed, 10 Jul 2019 05:25:30 +0000</updated>
                            <resolved>Wed, 10 Jul 2019 05:25:30 +0000</resolved>
                                    <version>6.6</version>
                                    <fixVersion>7.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16859704" author="munendrasn" created="Mon, 10 Jun 2019 05:04:54 +0000"  >&lt;p&gt; &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12971282/12971282_SOLR-11263.patch&quot; title=&quot;SOLR-11263.patch attached to SOLR-11263&quot;&gt;SOLR-11263.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ichattopadhyaya&quot; class=&quot;user-hover&quot; rel=&quot;ichattopadhyaya&quot;&gt;ichattopadhyaya&lt;/a&gt;&lt;br/&gt;
In the master, NPE is not thrown on undefined fields. This change was done in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11610&quot; title=&quot;Use PayloadDecoder instead of PayloadScoringSimilarityWrapper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11610&quot;&gt;&lt;del&gt;SOLR-11610&lt;/del&gt;&lt;/a&gt;. I have attached a test to verify this&lt;/p&gt;

&lt;p&gt;While writing a test, I observed that&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;there is no check on minimum number of args required for a function query. So, if  user passes &lt;b&gt;payload()&lt;/b&gt; without any args, NPE is thrown. Few of these cases were handled in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11883&quot; title=&quot;NPE on missing nested query in QueryValueSource&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11883&quot;&gt;&lt;del&gt;SOLR-11883&lt;/del&gt;&lt;/a&gt;. Problem is that parseArg() in FunctionQParser could return null and only few function queries handles the null returned by parseArg(). I will raise separate issue for the args validation&lt;/li&gt;
	&lt;li&gt;Other function queries like docfreq, tf doesn&apos;t fail on undefined field(This behavior is present from the beginning) whereas payload fails on undefined field&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16881734" author="jira-bot" created="Wed, 10 Jul 2019 05:12:14 +0000"  >&lt;p&gt;Commit 8322ea55f4f227c06948142909f35b162c607ff8 in lucene-solr&apos;s branch refs/heads/master from Munendra S N&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=8322ea5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=8322ea5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11263&quot; title=&quot;Payload function throws NPE for undefined fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11263&quot;&gt;&lt;del&gt;SOLR-11263&lt;/del&gt;&lt;/a&gt;: add test for payload func with undefined field&lt;/p&gt;

&lt;p&gt;Payload func with undefined used to throw NPE. In &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11610&quot; title=&quot;Use PayloadDecoder instead of PayloadScoringSimilarityWrapper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11610&quot;&gt;&lt;del&gt;SOLR-11610&lt;/del&gt;&lt;/a&gt;, this&lt;br/&gt;
was fixed to return proper error but there are no tests to verify&lt;br/&gt;
changed the behavior.&lt;br/&gt;
This add simple test to verify error code and error message&lt;/p&gt;</comment>
                            <comment id="16881741" author="jira-bot" created="Wed, 10 Jul 2019 05:23:26 +0000"  >&lt;p&gt;Commit 0752c07c1c65c8f1ce1c90e1c6f694e9a9509c64 in lucene-solr&apos;s branch refs/heads/branch_8x from Munendra S N&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=0752c07&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=0752c07&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11263&quot; title=&quot;Payload function throws NPE for undefined fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11263&quot;&gt;&lt;del&gt;SOLR-11263&lt;/del&gt;&lt;/a&gt;: add test for payload func with undefined field&lt;/p&gt;

&lt;p&gt;Payload func with undefined used to throw NPE. In &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11610&quot; title=&quot;Use PayloadDecoder instead of PayloadScoringSimilarityWrapper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11610&quot;&gt;&lt;del&gt;SOLR-11610&lt;/del&gt;&lt;/a&gt;, this&lt;br/&gt;
was fixed to return proper error but there are no tests to verify&lt;br/&gt;
changed the behavior.&lt;br/&gt;
This add simple test to verify error code and error message&lt;/p&gt;</comment>
                            <comment id="16881744" author="munendrasn" created="Wed, 10 Jul 2019 05:25:30 +0000"  >&lt;p&gt;I have added simple test to verify the NPE fix. Setting the fix version as 7.2 since this issue actually got fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11610&quot; title=&quot;Use PayloadDecoder instead of PayloadScoringSimilarityWrapper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11610&quot;&gt;&lt;del&gt;SOLR-11610&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12971282" name="SOLR-11263.patch" size="784" author="munendrasn" created="Mon, 10 Jun 2019 04:55:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3j2hr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>