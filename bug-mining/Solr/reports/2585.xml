<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:06:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-7855] OverseerCollectionProcessor: separate general task management from collection message handling</title>
                <link>https://issues.apache.org/jira/browse/SOLR-7855</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;While working on &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7789&quot; title=&quot;Introduce a ConfigSet management API at /admin/configs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7789&quot;&gt;&lt;del&gt;SOLR-7789&lt;/del&gt;&lt;/a&gt;, I realized it would be easier if I split up the OverseerCollectionProcessor into two parts:&lt;/p&gt;

&lt;p&gt;1) General handling of tasks (work queues, etc)&lt;br/&gt;
2) Processing a collection handler request&lt;/p&gt;

&lt;p&gt;I haven&apos;t decided whether the ConfigSet should have its own processor, i.e. OverseerConfigSetProcessor or reuse at least the thread for the OverseerCollectionProcessor, but in either case this refactoring will be helpful.  That is, if the ConfigSet processing has its own processing, I can reuse the general handling of tasks part.  If the ConfigSet processing reuses the OverseerCollectionProcessing thread, I won&apos;t complicate the implementation with ConfigSet operations.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12850725">SOLR-7855</key>
            <summary>OverseerCollectionProcessor: separate general task management from collection message handling</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gchanan">Gregory Chanan</assignee>
                                    <reporter username="gchanan">Gregory Chanan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Jul 2015 23:57:16 +0000</created>
                <updated>Mon, 9 May 2016 18:50:29 +0000</updated>
                            <resolved>Mon, 10 Aug 2015 04:05:17 +0000</resolved>
                                                    <fixVersion>5.4</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14652791" author="gchanan" created="Mon, 3 Aug 2015 23:36:39 +0000"  >&lt;p&gt;Here&apos;s a patch.  Review request: &lt;a href=&quot;https://reviews.apache.org/r/37057/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/37057/&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Splits up the OverseerCollectionProcessor as follows:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Defines an interface OverseerMessageHandler for handling messages sent to the overseer queues&lt;/li&gt;
	&lt;li&gt;OverseerCollectionMessageHandler handles collection related messages (i.e. this is just the message handling code from the old OverseerCollectionProcessor code)&lt;/li&gt;
	&lt;li&gt;OverseerProcessor is the task management related code from the old OverseerCollectionProcessor&lt;/li&gt;
	&lt;li&gt;OverseerProcessor.OverseerMessageHandlerSelector is an interface for selecting an OverseerMessageHandler for an incoming message.  This would allows us to handle multiple types of message (e.g. Collection / ConfigSet) with the same OverseerProcessor&lt;/li&gt;
	&lt;li&gt;OverseerCollectionProcessor is now just an OverseerProcessor with an OverseerMessageHandlerSelector that always selects an OverseerCollectionMessageHandler for processing.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;One complication is with prioritizeOverseerNodes, which doesn&apos;t really fit into this new model or the existing model (it doesn&apos;t really have anything to do directly with collections AFAICT, though the CollectionProcessor handles messages about it).  This should probably be moved somewhere else and is a pain because both the OverseerProcessor (before running the task loop) and the CollectionMessageHandler (to respond to ADDROLE ops) call it.  For now I moved the code to an OverseerNodePrioritizer that is passed into both those objects, though I&apos;m open for suggestions there.&lt;/p&gt;

&lt;p&gt;Otherwise, just some renaming of imports from OverseerCollectionProcessor to OverseerCollectionMessageHandler.&lt;/p&gt;

&lt;p&gt;I was originally going to put all the new classes in the cloud.overseer package but there are some package-level info that is needed and for some reason, all the overseer related code isn&apos;t there.  I&apos;m okay with moving everything there if that&apos;s what we want to do.&lt;/p&gt;

&lt;p&gt;This patch should have no effect on end users.&lt;/p&gt;</comment>
                            <comment id="14652973" author="gchanan" created="Tue, 4 Aug 2015 02:34:05 +0000"  >&lt;p&gt;v2 of the patch, only minor changes mainly around renaming imports for tests.&lt;/p&gt;</comment>
                            <comment id="14653857" author="markrmiller@gmail.com" created="Tue, 4 Aug 2015 16:01:50 +0000"  >&lt;p&gt;+1, looks good to me.&lt;/p&gt;

&lt;p&gt;Minor suggestions:&lt;/p&gt;

&lt;p&gt;Assign.java - remove unused imports rather than refactor&lt;br/&gt;
OverseerProcessor - new file, remove unused imports&lt;br/&gt;
OvrseerCollectionMessageHandler -new file, remove unused imports&lt;/p&gt;

&lt;p&gt;OverseeerMessageHandlerSelector - add light class doc&lt;br/&gt;
OverseerCollectionProcessor - add light class doc&lt;br/&gt;
OverseerProcessor - add light class doc&lt;/p&gt;</comment>
                            <comment id="14653905" author="markrmiller@gmail.com" created="Tue, 4 Aug 2015 16:22:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;(it doesn&apos;t really have anything to do directly with collections AFAICT, though the CollectionProcessor handles messages about it). &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Seems like someone was lazy when they added it. Don&apos;t know what to tell you now. At least it&apos;s more isolated with this patch.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;package-level info &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We can open that up and add internal comment notes or something if you think that makes sense. A lot of this is probably fairly arbitrary when compared to the rest of the code.&lt;/p&gt;

&lt;p&gt;A lot of cloud code has already kind of cluttered up random packages as it was added for various easy at the time reasons - moving towards something nicer makes sense to me.&lt;/p&gt;</comment>
                            <comment id="14654439" author="gchanan" created="Tue, 4 Aug 2015 22:09:39 +0000"  >&lt;p&gt;Thanks for the feedback Mark.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;A lot of cloud code has already kind of cluttered up random packages as it was added for various easy at the time reasons - moving towards something nicer makes sense to me.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think the question is whether we move all the overseer related code to the cloud.overseer package or not.  Now seemed like a good time because we are moving around a bunch of code anyway (which complicates the history to a certain extent).  So if we can do it at one time, that&apos;s ideal.  I&apos;ll investigate how feasible that is.&lt;/p&gt;</comment>
                            <comment id="14654542" author="markrmiller@gmail.com" created="Tue, 4 Aug 2015 23:47:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think the question is whether we move all the overseer related code to the cloud.overseer package or not. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think it goes without saying this is how it should be. We have a bunch of Overseer* classes in a cloud package instead of an existing cloud.overseer package.&lt;/p&gt;

&lt;p&gt;To be more specific on my complaint (a lot of which I&apos;m am the cause of), a bunch of classes are jammed in the core and cloud packages that could surely be broken up into packages in a more useful fashion. The CollectionsOverseerProcesser is just one example where little thought was used. Seems like a good thing to fix this in this case.&lt;/p&gt;</comment>
                            <comment id="14654545" author="gchanan" created="Tue, 4 Aug 2015 23:51:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think it goes without saying this is how it should be&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I should have said the question is &quot;for this patch&quot; &amp;#8211; I agree with how things should be.&lt;/p&gt;</comment>
                            <comment id="14654589" author="markrmiller@gmail.com" created="Wed, 5 Aug 2015 00:33:28 +0000"  >&lt;p&gt;Then why not just move it since the patch adds even more Overseer* classes in an odd spot?&lt;/p&gt;

&lt;p&gt;Either way, but seems like a gimme to me.&lt;/p&gt;</comment>
                            <comment id="14654648" author="markrmiller@gmail.com" created="Wed, 5 Aug 2015 01:29:54 +0000"  >&lt;p&gt;Actually, skip it. I&apos;ll make another issue and move all the overseer classes to the proper package.&lt;/p&gt;</comment>
                            <comment id="14659300" author="gchanan" created="Thu, 6 Aug 2015 01:17:20 +0000"  >&lt;p&gt;Here&apos;s a version with Mark&apos;s comments addressed and rebased to trunk (there were some changes to OverseerCollectionProcessor).  I&apos;ll commit this soon unless I hear objections.&lt;/p&gt;

&lt;p&gt;I spent some time moving the packages, but I got stuck at the ZkController.  Let&apos;s move that discussion to the linked jira.&lt;/p&gt;</comment>
                            <comment id="14659545" author="jira-bot" created="Thu, 6 Aug 2015 06:07:34 +0000"  >&lt;p&gt;Commit 1694406 from gchanan@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1694406&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1694406&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7855&quot; title=&quot;OverseerCollectionProcessor: separate general task management from collection message handling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7855&quot;&gt;&lt;del&gt;SOLR-7855&lt;/del&gt;&lt;/a&gt;: OverseerCollectionProcessor: separate general task management from collection message handling&lt;/p&gt;</comment>
                            <comment id="14659546" author="gchanan" created="Thu, 6 Aug 2015 06:08:15 +0000"  >&lt;p&gt;Committed to trunk.  I tried to merge to branch_5x, but &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7766&quot; title=&quot;support creation of a coreless collection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7766&quot;&gt;&lt;del&gt;SOLR-7766&lt;/del&gt;&lt;/a&gt; not being there causes a bunch of conflicts.  Going to wait until that is committed before proceeding.&lt;/p&gt;</comment>
                            <comment id="14663117" author="andyetitmoves" created="Sat, 8 Aug 2015 19:00:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gchanan&quot; class=&quot;user-hover&quot; rel=&quot;gchanan&quot;&gt;gchanan&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7766&quot; title=&quot;support creation of a coreless collection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7766&quot;&gt;&lt;del&gt;SOLR-7766&lt;/del&gt;&lt;/a&gt; is now done, any plans to commit this soon to branch_5x? Trying to avoid conflicts with &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7859&quot; title=&quot;Clamp down on use of System.currentTimeMillis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7859&quot;&gt;&lt;del&gt;SOLR-7859&lt;/del&gt;&lt;/a&gt;..&lt;/p&gt;</comment>
                            <comment id="14679531" author="jira-bot" created="Mon, 10 Aug 2015 04:03:17 +0000"  >&lt;p&gt;Commit 1694952 from gchanan@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1694952&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1694952&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7855&quot; title=&quot;OverseerCollectionProcessor: separate general task management from collection message handling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7855&quot;&gt;&lt;del&gt;SOLR-7855&lt;/del&gt;&lt;/a&gt;: OverseerCollectionProcessor: separate general task management from collection message handling&lt;/p&gt;</comment>
                            <comment id="14679533" author="gchanan" created="Mon, 10 Aug 2015 04:05:17 +0000"  >&lt;p&gt;Committed to trunk and 5.4.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12851556">SOLR-7872</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12844818">SOLR-7789</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12748974" name="SOLR-7855.patch" size="312535" author="gchanan" created="Thu, 6 Aug 2015 01:17:20 +0000"/>
                            <attachment id="12748593" name="SOLR-7855.patch" size="308078" author="gchanan" created="Tue, 4 Aug 2015 02:34:05 +0000"/>
                            <attachment id="12748561" name="SOLR-7855.patch" size="290711" author="gchanan" created="Mon, 3 Aug 2015 23:36:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2i7bb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>