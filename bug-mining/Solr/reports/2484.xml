<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:05:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-7118] ChaosMonkeyNothingIsSafeTest fails with too many update fails</title>
                <link>https://issues.apache.org/jira/browse/SOLR-7118</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;There are frequent failures on both trunk and branch_5x with the following message:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.AssertionError: There were too many update fails - we expect it can happen, but shouldn&apos;t easily
	at __randomizedtesting.SeedInfo.seed([786DB0FD42626C16:F98B3EE5353D0C2A]:0)
	at org.junit.Assert.fail(Assert.java:93)
	at org.junit.Assert.assertTrue(Assert.java:43)
	at org.junit.Assert.assertFalse(Assert.java:68)
	at org.apache.solr.cloud.ChaosMonkeyNothingIsSafeTest.doTest(ChaosMonkeyNothingIsSafeTest.java:224)
	at org.apache.solr.BaseDistributedSearchTestCase.testDistribSearch(BaseDistributedSearchTestCase.java:878)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12775368">SOLR-7118</key>
            <summary>ChaosMonkeyNothingIsSafeTest fails with too many update fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="shalin">Shalin Shekhar Mangar</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Feb 2015 13:23:20 +0000</created>
                <updated>Mon, 9 May 2016 18:58:22 +0000</updated>
                            <resolved>Fri, 29 May 2015 14:34:04 +0000</resolved>
                                    <version>5.0</version>
                                    <fixVersion>5.3</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrCloud</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14322774" author="shalinmangar" created="Mon, 16 Feb 2015 13:53:03 +0000"  >&lt;p&gt;A few of the latest failures:&lt;br/&gt;
&lt;a href=&quot;http://jenkins.thetaphi.de/job/Lucene-Solr-5.0-Linux/151/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.thetaphi.de/job/Lucene-Solr-5.0-Linux/151/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://jenkins.thetaphi.de/job/Lucene-Solr-5.x-Windows/4375/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.thetaphi.de/job/Lucene-Solr-5.x-Windows/4375/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://jenkins.thetaphi.de/job/Lucene-Solr-5.x-MacOSX/1902/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.thetaphi.de/job/Lucene-Solr-5.x-MacOSX/1902/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14322897" author="markrmiller@gmail.com" created="Mon, 16 Feb 2015 15:41:10 +0000"  >&lt;p&gt;Looks like they are due to: org.apache.solr.common.SolrException: Not enough nodes to handle the request&lt;/p&gt;</comment>
                            <comment id="14322914" author="shalinmangar" created="Mon, 16 Feb 2015 15:50:25 +0000"  >&lt;p&gt;Yeah, I see many request failing due to stale state and then &quot;Not enough nodes to handle the request&quot;. I don&apos;t think we should mark node(s) as zombies if we exceed max retries on stale state.&lt;/p&gt;</comment>
                            <comment id="14323789" author="shalinmangar" created="Tue, 17 Feb 2015 07:53:04 +0000"  >&lt;p&gt;Some of the failures have the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;14999 T100 C3 P57272 oasc.SolrException.log ERROR org.apache.solr.common.SolrException: ERROR: [doc=ft1-17] unknown field &lt;span class=&quot;code-quote&quot;&gt;&apos;a_i1&apos;&lt;/span&gt;
		at org.apache.solr.update.DocumentBuilder.toDocument(DocumentBuilder.java:183)
		at org.apache.solr.update.AddUpdateCommand.getLuceneDocument(AddUpdateCommand.java:78)
		at org.apache.solr.update.DirectUpdateHandler2.addDoc0(DirectUpdateHandler2.java:237)
		at org.apache.solr.update.DirectUpdateHandler2.addDoc(DirectUpdateHandler2.java:163)
		at org.apache.solr.update.processor.RunUpdateProcessor.processAdd(RunUpdateProcessorFactory.java:69)
		at org.apache.solr.update.proce
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I don&apos;t know when it started happening but it looks like this test never adds a document at all? It happens because the test has a FullThrottleStopableIndexingThread class which extends StopableIndexingThread but the field i1 in StopableIndexingThread is private and the class actually ends up picking AbstractFullDistribZkTestBase.i1 instead.&lt;/p&gt;</comment>
                            <comment id="14323909" author="shalinmangar" created="Tue, 17 Feb 2015 08:17:32 +0000"  >&lt;ol&gt;
	&lt;li&gt;Make sure the test has at least 1 jetty to kill (similar to the fix we did to ChaosMonkeySafeLeaderTest)&lt;/li&gt;
	&lt;li&gt;Make StopableIndexThread&apos;s static fields package private so that they are visible to the sub-class&lt;/li&gt;
	&lt;li&gt;Changed a few log lines from System.err to log.info&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14323917" author="jira-bot" created="Tue, 17 Feb 2015 08:21:24 +0000"  >&lt;p&gt;Commit 1660313 from shalin@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1660313&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1660313&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7118&quot; title=&quot;ChaosMonkeyNothingIsSafeTest fails with too many update fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7118&quot;&gt;&lt;del&gt;SOLR-7118&lt;/del&gt;&lt;/a&gt;: Use the right schema fields to avoid spurious failures and other misc fixes&lt;/p&gt;</comment>
                            <comment id="14323920" author="jira-bot" created="Tue, 17 Feb 2015 08:23:56 +0000"  >&lt;p&gt;Commit 1660314 from shalin@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1660314&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1660314&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7118&quot; title=&quot;ChaosMonkeyNothingIsSafeTest fails with too many update fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7118&quot;&gt;&lt;del&gt;SOLR-7118&lt;/del&gt;&lt;/a&gt;: Use the right schema fields to avoid spurious failures and other misc fixes&lt;/p&gt;</comment>
                            <comment id="14324212" author="markrmiller@gmail.com" created="Tue, 17 Feb 2015 14:14:55 +0000"  >&lt;p&gt;But this test doesn&apos;t need at least one replica to kill like the safe leader test. It will kill leaders.&lt;/p&gt;</comment>
                            <comment id="14324304" author="shalinmangar" created="Tue, 17 Feb 2015 15:27:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;But this test doesn&apos;t need at least one replica to kill like the safe leader test. It will kill leaders.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Look at ChaosMonkey.getRandomJetty() which calls checkIfKillIsLegal. If the number of active shards in a slice is less than 2 then ChaosMonkey doesn&apos;t kill a node at all.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I don&apos;t know when it started happening but it looks like this test never adds a document at all?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Answering myself, actually the FullThrottleStopableIndexingThread is only used sometimes so the test does work but not always.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Yeah, I see many request failing due to stale state and then &quot;Not enough nodes to handle the request&quot;. I don&apos;t think we should mark node(s) as zombies if we exceed max retries on stale state.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This idea of mine was wrong. The node isn&apos;t being marked as a zombie i.e. it has nothing to do with LbHttpSolrClient. There&apos;s something else at play here. Still digging.&lt;/p&gt;</comment>
                            <comment id="14324726" author="shalinmangar" created="Tue, 17 Feb 2015 19:20:10 +0000"  >&lt;p&gt;Okay, here&apos;s what&apos;s happening at &lt;a href=&quot;http://jenkins.thetaphi.de/job/Lucene-Solr-5.0-Linux/151/consoleText&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.thetaphi.de/job/Lucene-Solr-5.0-Linux/151/consoleText&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;collection has numShards=1 and replicationFactor=2&lt;/li&gt;
	&lt;li&gt;collection1 has stateFormat=2 so CloudSolrClient will cache cluster state and update when the server returns a stale state error&lt;/li&gt;
	&lt;li&gt;ChaosMonkey kills the leader when state version = 7&lt;/li&gt;
	&lt;li&gt;The leader publishes itself as down and unsets the leader flag. Overseer writes new state(s) and new state version = 9&lt;/li&gt;
	&lt;li&gt;A Query request returns stale state error. CloudSolrClient evicts cached state and retries after refreshing+caching the state from ZK
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   [junit4]   2&amp;gt; 1646950 T8921 oascsi.CloudSolrClient.requestWithRetryOnStaleState ERROR Request to collection collection1 failed due to (510) org.apache.solr.client.solrj.impl.HttpSolrClient$RemoteSolrException: Error from server at http:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:38608/collection1: STATE STALE: collection1:7valid : &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, retry? 0
&lt;/span&gt;   [junit4]   2&amp;gt; 1646951 T8921 oascsi.CloudSolrClient.requestWithRetryOnStaleState WARN Re-trying request to  collection(s) collection1 after stale state error from server.
   [junit4]   2&amp;gt; 1646954 T8903 C3533 P38608 oasc.SolrCore.execute [collection1] webapp= path=/select params={q=to+come&amp;amp;_stateVer_=collection1:9&amp;amp;wt=javabin&amp;amp;version=2} hits=0 status=0 QTime=1 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;An indexing request comes in but there is no leader in the cached state. Every subsequent indexing request will continue to fail until the cache entry expires i.e. 60 seconds
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   [junit4]   2&amp;gt; 1647581 T8920 oascsi.CloudSolrClient.requestWithRetryOnStaleState ERROR Request to collection collection1 failed due to (510) org.apache.solr.common.SolrException: Not enough nodes to handle the request, retry? 0
   [junit4]   2&amp;gt; 1647582 T8920 oascsi.CloudSolrClient.requestWithRetryOnStaleState WARN Re-trying request to  collection(s) collection1 after stale state error from server.
   [junit4]   2&amp;gt; 1647583 T8920 oascsi.CloudSolrClient.requestWithRetryOnStaleState ERROR Request to collection collection1 failed due to (510) org.apache.solr.common.SolrException: Not enough nodes to handle the request, retry? 1
   [junit4]   2&amp;gt; 1647583 T8920 oascsi.CloudSolrClient.requestWithRetryOnStaleState WARN Re-trying request to  collection(s) collection1 after stale state error from server.
   [junit4]   2&amp;gt; 1647584 T8920 oascsi.CloudSolrClient.requestWithRetryOnStaleState ERROR Request to collection collection1 failed due to (510) org.apache.solr.common.SolrException: Not enough nodes to handle the request, retry? 2
   [junit4]   2&amp;gt; 1647584 T8920 oascsi.CloudSolrClient.requestWithRetryOnStaleState WARN Re-trying request to  collection(s) collection1 after stale state error from server.
   [junit4]   2&amp;gt; 1647585 T8920 oascsi.CloudSolrClient.requestWithRetryOnStaleState ERROR Request to collection collection1 failed due to (510) org.apache.solr.common.SolrException: Not enough nodes to handle the request, retry? 3
   [junit4]   2&amp;gt; 1647585 T8920 oascsi.CloudSolrClient.requestWithRetryOnStaleState WARN Re-trying request to  collection(s) collection1 after stale state error from server.
   [junit4]   2&amp;gt; 1647586 T8920 oascsi.CloudSolrClient.requestWithRetryOnStaleState ERROR Request to collection collection1 failed due to (510) org.apache.solr.common.SolrException: Not enough nodes to handle the request, retry? 4
   [junit4]   2&amp;gt; 1647587 T8920 oascsi.CloudSolrClient.requestWithRetryOnStaleState WARN Re-trying request to  collection(s) collection1 after stale state error from server.
   [junit4]   2&amp;gt; 1647588 T8920 oascsi.CloudSolrClient.requestWithRetryOnStaleState ERROR Request to collection collection1 failed due to (510) org.apache.solr.common.SolrException: Not enough nodes to handle the request, retry? 5
   [junit4]   2&amp;gt; REQUEST FAILED &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; id=0-107
   [junit4]   2&amp;gt; org.apache.solr.client.solrj.SolrServerException: org.apache.solr.common.SolrException: Not enough nodes to handle the request
   [junit4]   2&amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:873)
   [junit4]   2&amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:866)
   [junit4]   2&amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:866)
   [junit4]   2&amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:866)
   [junit4]   2&amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:866)
   [junit4]   2&amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:866)
   [junit4]   2&amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:738)
   [junit4]   2&amp;gt; 	at org.apache.solr.client.solrj.request.AbstractUpdateRequest.process(AbstractUpdateRequest.java:124)
   [junit4]   2&amp;gt; 	at org.apache.solr.cloud.StopableIndexingThread.indexDoc(StopableIndexingThread.java:174)
   [junit4]   2&amp;gt; 	at org.apache.solr.cloud.StopableIndexingThread.indexr(StopableIndexingThread.java:158)
   [junit4]   2&amp;gt; 	at org.apache.solr.cloud.StopableIndexingThread.run(StopableIndexingThread.java:103)
   [junit4]   2&amp;gt; Caused by: org.apache.solr.common.SolrException: Not enough nodes to handle the request
   [junit4]   2&amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.sendRequest(CloudSolrClient.java:1002)
   [junit4]   2&amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:795)
   [junit4]   2&amp;gt; 	... 10 more
   [junit4]   2&amp;gt; ROOT CAUSE &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; id=0-107
   [junit4]   2&amp;gt; org.apache.solr.common.SolrException: Not enough nodes to handle the request
   [junit4]   2&amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.sendRequest(CloudSolrClient.java:1002)
   [junit4]   2&amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:795)
   [junit4]   2&amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:866)
   [junit4]   2&amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:866)
   [junit4]   2&amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:866)
   [junit4]   2&amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:866)
   [junit4]   2&amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:866)
   [junit4]   2&amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:738)
   [junit4]   2&amp;gt; 	at org.apache.solr.client.solrj.request.AbstractUpdateRequest.process(AbstractUpdateRequest.java:124)
   [junit4]   2&amp;gt; 	at org.apache.solr.cloud.StopableIndexingThread.indexDoc(StopableIndexingThread.java:174)
   [junit4]   2&amp;gt; 	at org.apache.solr.cloud.StopableIndexingThread.indexr(StopableIndexingThread.java:158)
   [junit4]   2&amp;gt; 	at org.apache.solr.cloud.StopableIndexingThread.run(StopableIndexingThread.java:103)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14325641" author="shalinmangar" created="Wed, 18 Feb 2015 09:27:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;An indexing request comes in but there is no leader in the cached state. Every subsequent indexing request will continue to fail until the cache entry expires i.e. 60 seconds&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Reading the code again I realized that when this condition happens, the cached state is evicted. So, the above statement isn&apos;t true. What&apos;s really happening here is that in the time it takes for leader election, many updates are rejected (as they should be) and the test fails saying too many updates failed. &lt;/p&gt;

&lt;p&gt;From the logs,&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The leader election process logs the following at time=1646937:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[junit4]   2&amp;gt; 1646937 T8923 oasc.ShardLeaderElectionContext.runLeaderProcess I may be the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; leader - &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; and sync
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Then it goes to sleep for 2500 ms to wait for ongoing updates to finish (see ShardLeaderElectionContext.runLeaderProcess)&lt;/li&gt;
	&lt;li&gt;By the time it wakes up at time=1649437, the monkey is finished and the test is being teared down
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[junit4]   2&amp;gt; 1648644 T8922 oasc.ChaosMonkey.monkeyLog monkey: finished
   [junit4]   2&amp;gt; 1648645 T8922 oasc.ChaosMonkey.monkeyLog monkey: I ran &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 7.931sec. I stopped 1 and I started 0. I also expired 0 and caused 0 connection losses
   [junit4]   2&amp;gt; added docs:123 with 24 fails deletes:44
   [junit4]   2&amp;gt; num searches done:3 with 0 fails
   [junit4]   2&amp;gt; ASYNC  NEW_CORE C3537 name=collection1 org.apache.solr.core.SolrCore@1f81ebc url=http:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:38608/collection1 node=127.0.0.1:38608_ C3537_STATE=coll:collection1 core:collection1 props:{core=collection1, base_url=http://127.0.0.1:38608, node_name=127.0.0.1:38608_, state=active}
&lt;/span&gt;   [junit4]   2&amp;gt; 1649437 T8923 C3537 P38608 oasc.SyncStrategy.sync Sync replicas to http:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:38608/collection1/&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;In summary, there is no bug, just another spurious failure because the test is tolerant of an arbitrary number of failures.&lt;/p&gt;</comment>
                            <comment id="14326139" author="markrmiller@gmail.com" created="Wed, 18 Feb 2015 16:27:38 +0000"  >&lt;blockquote&gt;&lt;p&gt;In summary, there is no bug, just another spurious failure because the test is tolerant of an arbitrary number of failures.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The point of that failure is to alert us that we are seeing more failures than before. It&apos;s an arbitrary threshold that at one time was enough to cover the failures we see.&lt;/p&gt;

&lt;p&gt;We don&apos;t want that test to keep passing when all of sudden 90% of the updates fail. We want to know why all of a sudden there are more failures. If it&apos;s reasonable why things changed (is it?), then the threshold can be raised.&lt;/p&gt;
</comment>
                            <comment id="14326233" author="shalinmangar" created="Wed, 18 Feb 2015 17:33:04 +0000"  >&lt;blockquote&gt;
&lt;p&gt;The point of that failure is to alert us that we are seeing more failures than before. It&apos;s an arbitrary threshold that at one time was enough to cover the failures we see.&lt;/p&gt;

&lt;p&gt;We don&apos;t want that test to keep passing when all of sudden 90% of the updates fail. We want to know why all of a sudden there are more failures. If it&apos;s reasonable why things changed (is it?), then the threshold can be raised.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No, I totally get why the test is written like that. The failures due to the full throttle test do not count towards the indexing failures so I don&apos;t see why things should have changed. I&apos;ll add this issue number to the failure message for easier tracking.&lt;/p&gt;

&lt;p&gt;I&apos;d love to find a better way to test this, though I can&apos;t think of one right now. Chasing such false negatives wastes too much time and energy.&lt;/p&gt;</comment>
                            <comment id="14326264" author="markrmiller@gmail.com" created="Wed, 18 Feb 2015 17:56:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;The failures due to the full throttle test &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I have some other improvements for this test in the issue around a down shard still being able to elect a leader. Not sure if they overlap. There are a couple problems (like the concurrent solr server shutting down the http connection pool early sometimes). I&apos;ll try and pull them out eventually.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Chasing such false negatives wastes too much time and energy.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s part of making this test good unfortunately. You don&apos;t get good complicated tests without a lot of effort. And this is a very complicated integration test. Given the low effort that has gone into these tests, there is still a lot of time and energy that they will suck before they are good. They are the most critical tests we have in SolrCloud and also some of the least mature.&lt;/p&gt;</comment>
                            <comment id="14386051" author="andyetitmoves" created="Mon, 30 Mar 2015 00:37:10 +0000"  >&lt;p&gt;This seems to be occurring all the more frequently since the Jenkins hardware update &amp;#8211; perhaps due to more updates being pushed through during election time, or because of generally more test runs happening every day..&lt;/p&gt;</comment>
                            <comment id="14512679" author="markrmiller@gmail.com" created="Sat, 25 Apr 2015 19:59:28 +0000"  >&lt;p&gt;I&apos;m just going to raise it for now.&lt;/p&gt;</comment>
                            <comment id="14512680" author="jira-bot" created="Sat, 25 Apr 2015 20:01:23 +0000"  >&lt;p&gt;Commit 1676062 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1676062&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1676062&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7118&quot; title=&quot;ChaosMonkeyNothingIsSafeTest fails with too many update fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7118&quot;&gt;&lt;del&gt;SOLR-7118&lt;/del&gt;&lt;/a&gt;: Raise fail tolerance.&lt;/p&gt;</comment>
                            <comment id="14512682" author="jira-bot" created="Sat, 25 Apr 2015 20:07:54 +0000"  >&lt;p&gt;Commit 1676063 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1676063&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1676063&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7118&quot; title=&quot;ChaosMonkeyNothingIsSafeTest fails with too many update fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7118&quot;&gt;&lt;del&gt;SOLR-7118&lt;/del&gt;&lt;/a&gt;: Raise fail tolerance.&lt;/p&gt;</comment>
                            <comment id="14561241" author="markrmiller@gmail.com" created="Wed, 27 May 2015 16:41:23 +0000"  >&lt;p&gt;Saw another errant fail on jenkins cluster - much, much rarer at least - going to raise again.&lt;/p&gt;</comment>
                            <comment id="14564881" author="jira-bot" created="Fri, 29 May 2015 14:22:25 +0000"  >&lt;p&gt;Commit 1682483 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1682483&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1682483&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7118&quot; title=&quot;ChaosMonkeyNothingIsSafeTest fails with too many update fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7118&quot;&gt;&lt;del&gt;SOLR-7118&lt;/del&gt;&lt;/a&gt;: Raise fail tolerance.&lt;/p&gt;</comment>
                            <comment id="14564883" author="jira-bot" created="Fri, 29 May 2015 14:23:32 +0000"  >&lt;p&gt;Commit 1682485 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1682485&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1682485&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7118&quot; title=&quot;ChaosMonkeyNothingIsSafeTest fails with too many update fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7118&quot;&gt;&lt;del&gt;SOLR-7118&lt;/del&gt;&lt;/a&gt;: Raise fail tolerance.&lt;/p&gt;</comment>
                            <comment id="14713174" author="shalinmangar" created="Wed, 26 Aug 2015 13:05:59 +0000"  >&lt;p&gt;Bulk close for 5.3.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12699219" name="SOLR-7118.patch" size="2806" author="shalin" created="Tue, 17 Feb 2015 08:17:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25ogv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>