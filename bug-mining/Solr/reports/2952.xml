<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:13:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9036] Solr slave is doing full replication (entire index) of index after master restart</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9036</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;This was first described in the following email:&lt;br/&gt;
&lt;a href=&quot;https://mail-archives.apache.org/mod_mbox/lucene-solr-user/201604.mbox/%3CCAFgNfOYN+xmpXwZwbjUzDDEUz7TJqHqktek6q7u8xgStqY3hRQ@mail.gmail.com%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://mail-archives.apache.org/mod_mbox/lucene-solr-user/201604.mbox/%3CCAFgNfOYN+xmpXwZwbjUzDDEUz7TJqHqktek6q7u8xgStqY3hRQ@mail.gmail.com%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I tried Solr 5.3.1 and Solr 6 and I can reproduce the problem. If the master comes back online before the next polling interval then the slave finds itself in sync with the master but if the master is down for at least one polling interval then the slave pulls the entire full index from the master even if the index has not changed on the master.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12962275">SOLR-9036</key>
            <summary>Solr slave is doing full replication (entire index) of index after master restart</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalin">Shalin Shekhar Mangar</assignee>
                                    <reporter username="shalin">Shalin Shekhar Mangar</reporter>
                        <labels>
                            <label>impact-high</label>
                    </labels>
                <created>Mon, 25 Apr 2016 15:19:57 +0000</created>
                <updated>Wed, 2 Oct 2019 17:24:10 +0000</updated>
                            <resolved>Tue, 4 Oct 2016 02:27:26 +0000</resolved>
                                    <version>5.3.1</version>
                    <version>6.0</version>
                                    <fixVersion>5.5.2</fixVersion>
                    <fixVersion>5.6</fixVersion>
                    <fixVersion>6.0.1</fixVersion>
                    <fixVersion>6.1</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                    <component>replication (java)</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="15257032" author="shalinmangar" created="Mon, 25 Apr 2016 20:54:06 +0000"  >&lt;p&gt;This was caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7134&quot; title=&quot;Replication can still cause index corruption.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7134&quot;&gt;&lt;del&gt;SOLR-7134&lt;/del&gt;&lt;/a&gt; where any previous replication failure forces a full replication regardless of whether we are in SolrCloud mode or the cause of the last failure.&lt;/p&gt;</comment>
                            <comment id="15272338" author="shalinmangar" created="Thu, 5 May 2016 13:45:55 +0000"  >&lt;p&gt;Trivial patch to track replication success only in SolrCloud mode.&lt;/p&gt;</comment>
                            <comment id="15272470" author="markrmiller@gmail.com" created="Thu, 5 May 2016 14:50:59 +0000"  >&lt;p&gt;Might be nice to add a little test, but +1 on patch.&lt;/p&gt;</comment>
                            <comment id="15272479" author="shalinmangar" created="Thu, 5 May 2016 14:57:16 +0000"  >&lt;p&gt;Patch with a test that asserts that the slave downloads the index successfully only once&lt;/p&gt;</comment>
                            <comment id="15272483" author="shalinmangar" created="Thu, 5 May 2016 14:58:49 +0000"  >&lt;p&gt;Last patch had a comment in the test which was copied over from another test and made no sense. This patch removes it. I think this is ready.&lt;/p&gt;</comment>
                            <comment id="15272512" author="jira-bot" created="Thu, 5 May 2016 15:30:31 +0000"  >&lt;p&gt;Commit 51b131950de0357fc64e0e951b887eb30a704cd1 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=51b1319&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=51b1319&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9036&quot; title=&quot;Solr slave is doing full replication (entire index) of index after master restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9036&quot;&gt;&lt;del&gt;SOLR-9036&lt;/del&gt;&lt;/a&gt;: Solr slave is doing full replication (entire index) of index after master restart&lt;/p&gt;</comment>
                            <comment id="15272514" author="jira-bot" created="Thu, 5 May 2016 15:31:12 +0000"  >&lt;p&gt;Commit 855d57bf10cc69037135242dd9911579b2046e84 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=855d57b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=855d57b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9036&quot; title=&quot;Solr slave is doing full replication (entire index) of index after master restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9036&quot;&gt;&lt;del&gt;SOLR-9036&lt;/del&gt;&lt;/a&gt;: Solr slave is doing full replication (entire index) of index after master restart&lt;br/&gt;
(cherry picked from commit 51b1319)&lt;/p&gt;</comment>
                            <comment id="15272532" author="shalinmangar" created="Thu, 5 May 2016 15:46:05 +0000"  >&lt;p&gt;Thanks Mark!&lt;/p&gt;</comment>
                            <comment id="15273070" author="shalinmangar" created="Thu, 5 May 2016 20:55:55 +0000"  >&lt;p&gt;Re-opening because the new test added here fails often on slow machines.&lt;/p&gt;</comment>
                            <comment id="15273077" author="jira-bot" created="Thu, 5 May 2016 20:57:22 +0000"  >&lt;p&gt;Commit 1dd877545fad0eae7be43fec109bceb4617fb6a4 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=1dd8775&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=1dd8775&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9036&quot; title=&quot;Solr slave is doing full replication (entire index) of index after master restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9036&quot;&gt;&lt;del&gt;SOLR-9036&lt;/del&gt;&lt;/a&gt;: Disable doTestIndexFetchOnMasterRestart&lt;/p&gt;</comment>
                            <comment id="15273079" author="jira-bot" created="Thu, 5 May 2016 20:57:57 +0000"  >&lt;p&gt;Commit a6f9c8e171b8f48d5ced9c74b41f875aef567634 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a6f9c8e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a6f9c8e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9036&quot; title=&quot;Solr slave is doing full replication (entire index) of index after master restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9036&quot;&gt;&lt;del&gt;SOLR-9036&lt;/del&gt;&lt;/a&gt;: Disable doTestIndexFetchOnMasterRestart&lt;br/&gt;
(cherry picked from commit 1dd8775)&lt;/p&gt;</comment>
                            <comment id="15294287" author="jira-bot" created="Fri, 20 May 2016 21:36:51 +0000"  >&lt;p&gt;Commit 93a33e0892e2ad3c8f73755d4ba10da72ff9c11a in lucene-solr&apos;s branch refs/heads/branch_6_0 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=93a33e0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=93a33e0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9036&quot; title=&quot;Solr slave is doing full replication (entire index) of index after master restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9036&quot;&gt;&lt;del&gt;SOLR-9036&lt;/del&gt;&lt;/a&gt;: Solr slave is doing full replication (entire index) of index after master restart&lt;br/&gt;
(cherry picked from commit 51b1319)&lt;/p&gt;</comment>
                            <comment id="15336954" author="steve_rowe" created="Fri, 17 Jun 2016 21:04:23 +0000"  >&lt;p&gt;Backporting to 5.6 and 5.5.2.&lt;/p&gt;</comment>
                            <comment id="15336958" author="jira-bot" created="Fri, 17 Jun 2016 21:08:05 +0000"  >&lt;p&gt;Commit 669b9cd00378cf14279ba81563b33807d3b68624 in lucene-solr&apos;s branch refs/heads/branch_5_5 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=669b9cd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=669b9cd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9036&quot; title=&quot;Solr slave is doing full replication (entire index) of index after master restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9036&quot;&gt;&lt;del&gt;SOLR-9036&lt;/del&gt;&lt;/a&gt;: Solr slave is doing full replication (entire index) of index after master restart&lt;br/&gt;
(cherry picked from commit 51b1319)&lt;/p&gt;</comment>
                            <comment id="15336960" author="jira-bot" created="Fri, 17 Jun 2016 21:08:06 +0000"  >&lt;p&gt;Commit 912c3da3eb7fa6d84b38357cd77c9727a24ef598 in lucene-solr&apos;s branch refs/heads/branch_5x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=912c3da&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=912c3da&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9036&quot; title=&quot;Solr slave is doing full replication (entire index) of index after master restart&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9036&quot;&gt;&lt;del&gt;SOLR-9036&lt;/del&gt;&lt;/a&gt;: Solr slave is doing full replication (entire index) of index after master restart&lt;br/&gt;
(cherry picked from commit 51b1319)&lt;/p&gt;</comment>
                            <comment id="15539623" author="arafalov" created="Sun, 2 Oct 2016 03:12:13 +0000"  >&lt;p&gt;The work here seems to be all done. Safe to close?&lt;/p&gt;</comment>
                            <comment id="15544108" author="shalinmangar" created="Tue, 4 Oct 2016 02:27:27 +0000"  >&lt;p&gt;The fix has been released. I&apos;ll open another issue to fix the test which is currently disabled.&lt;/p&gt;</comment>
                            <comment id="15544142" author="praste" created="Tue, 4 Oct 2016 02:44:36 +0000"  >&lt;p&gt;Does fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9446&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;SOLR-9446&lt;/a&gt; helps in this situation as well?&lt;/p&gt;</comment>
                            <comment id="15544167" author="shalinmangar" created="Tue, 4 Oct 2016 02:57:53 +0000"  >&lt;p&gt;I don&apos;t see how it would. This bug affected master-slave (non-solr cloud) replication only.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13150732">SOLR-12201</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12776611">SOLR-7134</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12802437" name="SOLR-9036.patch" size="5068" author="shalin" created="Thu, 5 May 2016 14:58:49 +0000"/>
                            <attachment id="12802436" name="SOLR-9036.patch" size="5202" author="shalin" created="Thu, 5 May 2016 14:57:16 +0000"/>
                            <attachment id="12802413" name="SOLR-9036.patch" size="981" author="shalin" created="Thu, 5 May 2016 13:45:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 7 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2wp27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>