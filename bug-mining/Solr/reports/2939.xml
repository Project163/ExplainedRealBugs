<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:13:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9028] fix bugs in (add sanity checks for) SSL clientAuth testing</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9028</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>
&lt;p&gt;While looking into &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8970&quot; title=&quot;SSLTestConfig behaves really stupid if keystore can&amp;#39;t be found&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8970&quot;&gt;&lt;del&gt;SOLR-8970&lt;/del&gt;&lt;/a&gt; i realized there was a whole heap of problems with how clientAuth was being handled in tests.  Notably: it wasn&apos;t actaully being used when the randomization selects it (aparently due to a copy/paste mistake in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7166&quot; title=&quot;Clean up SolrJettyRunner constructors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7166&quot;&gt;&lt;del&gt;SOLR-7166&lt;/del&gt;&lt;/a&gt;).  But there are few other misc issues (improper usage of sysprops overrides for tests, missuage of keystore/truststore in test clients, etc..)&lt;/p&gt;

&lt;p&gt;I&apos;m working up a patch to fix all of this, and add some much needed tests to &lt;b&gt;explicitly&lt;/b&gt; verify both SSL and clientAuth that will include some &quot;false positive&quot; verifications, and some &quot;test the test&quot; checks.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12961299">SOLR-9028</key>
            <summary>fix bugs in (add sanity checks for) SSL clientAuth testing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Apr 2016 21:31:54 +0000</created>
                <updated>Wed, 18 Dec 2019 00:47:39 +0000</updated>
                            <resolved>Fri, 20 May 2016 19:57:59 +0000</resolved>
                                                    <fixVersion>6.0.1</fixVersion>
                    <fixVersion>6.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15252795" author="hossman" created="Thu, 21 Apr 2016 21:36:32 +0000"  >
&lt;p&gt;Here&apos;s my current in progress patch (summary of chagnes below).  Feedback on the changes/tests or suggestions for additional tests i haven&apos;t thought of yet would be appreciated.&lt;/p&gt;

&lt;p&gt;In particular: I would really love it if someone on OSX could run the new and improved TestMiniSolrCloudClusterSSL and let me know if it passes for you &amp;#8211; clientAuth randomization in SolrTestCaseJ4 has been completley disabled on OSX for a long time due to some consistent failures that no one ever got to the bottom of, and I&apos;m wondering if it was a JVM bug that&apos;s still a problem with modern JVMs and/or if my changes to SSLTestConfig resolved whatever the underlying problem is (if not, i have another avenue to explore - see nocommit in SolrTestCaseJ4)&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;In this patch...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;SSLConfig
	&lt;ul&gt;
		&lt;li&gt;jdocs that clientAuth and all other settings are ignored unless useSSL is true&lt;/li&gt;
		&lt;li&gt;fix createContextFactory to pay attention to clientAuth setting &amp;amp; only use trustStore when it&apos;s set&lt;/li&gt;
		&lt;li&gt;fix Boolean.getBoolean usage&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;SSLTestConfig
	&lt;ul&gt;
		&lt;li&gt;some refacotring &amp;amp; jdocs&lt;/li&gt;
		&lt;li&gt;fix bug when building test &lt;b&gt;client&lt;/b&gt; SSL Context
		&lt;ul&gt;
			&lt;li&gt;trust store &amp;amp; keystore have to be swapped from clients perspective&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;SolrTestCaseJ4
	&lt;ul&gt;
		&lt;li&gt;make clientAuth randomization more likely&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;TestMiniSolrCloudClusterSSL
	&lt;ul&gt;
		&lt;li&gt;don&apos;t rely on random sslConfig, test explicit SSL scenerios w/distinct test clusters&lt;/li&gt;
		&lt;li&gt;add sanity check asserts of things like baseURL when we expect to be using SSL&lt;/li&gt;
		&lt;li&gt;assert no false positives when requiring clientAuth by doing a HEAD request from a client w/o any client certs&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15253315" author="steve_rowe" created="Fri, 22 Apr 2016 04:14:38 +0000"  >&lt;p&gt;Fails for me on OS X 10.11.4, &lt;tt&gt;os.x.failure.txt&lt;/tt&gt; is test output.  &lt;tt&gt;java -version&lt;/tt&gt; says:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java version &quot;1.8.0_77&quot;
Java(TM) SE Runtime Environment (build 1.8.0_77-b03)
Java HotSpot(TM) 64-Bit Server VM (build 25.77-b03, mixed mode)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15254844" author="hossman" created="Fri, 22 Apr 2016 22:46:16 +0000"  >
&lt;blockquote&gt;&lt;p&gt;Fails for me on OS X 10.11.4 ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks steve,&lt;/p&gt;

&lt;p&gt;The failure you&apos;re seeing seems to jive with what was reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3854&quot; title=&quot;SolrCloud does not work with https&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3854&quot;&gt;&lt;del&gt;SOLR-3854&lt;/del&gt;&lt;/a&gt; when the choice was made to explicitly disable all clientAuth testing on OSX &amp;#8211; it would be nice to get to the bottom of that, and i have some theories (see nocommits still in patch) but i&apos;m not going to stress out about it too much just yet.&lt;/p&gt;

&lt;p&gt;Here&apos;s an update patch that resolves most of the nocommits in TestMiniSolrCloudClusterSSL.&lt;/p&gt;

&lt;p&gt;I still need to review &amp;amp; sanity check one expected failure case in that class, and I want to write another &quot;test the test&quot; class that &lt;em&gt;does&lt;/em&gt; rely on SolrTestCaseJ4&apos;s randomization logic to initialize a SSLTestConfig, but then spot checks that the clients/servers created by SolrTestCaseJ4/MiniSolrCloudCluster match the expectations based on whats in SSLTestConfig.&lt;/p&gt;</comment>
                            <comment id="15257284" author="hossman" created="Mon, 25 Apr 2016 23:57:22 +0000"  >&lt;p&gt;my latest patch...&lt;/p&gt;


&lt;ul&gt;
	&lt;li&gt;refactored TestMiniSolrCloudClusterSSL so i could easily write a new TestSSLRandomization
	&lt;ul&gt;
		&lt;li&gt;this new &quot;test the test test&quot; checks all the same stuff as TestMiniSolrCloudClusterSSL against the SolrTestCaseJ4 randomized SSLTestConfig&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;refactored some overly complex code in SSLTestConfig&lt;/li&gt;
	&lt;li&gt;added notes &amp;amp; assumes regarding newly spun off &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9039&quot; title=&quot;Get to the bottom of why clientAuth (SSL certificate) testing on OSX doesn&amp;#39;t work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9039&quot;&gt;SOLR-9039&lt;/a&gt; (Mac OS X clientAuth testing issue)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;...putting this issue on the backburner until i can get to the bottom of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9040&quot; title=&quot;bin/solr SSL support for client-&amp;gt;server communcation (as well as default SSL behavior in &amp;#39;new HttpSolrClient(String)&amp;#39;) broken on master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9040&quot;&gt;&lt;del&gt;SOLR-9040&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15258617" author="hossman" created="Tue, 26 Apr 2016 18:23:44 +0000"  >&lt;p&gt;Updated patch that builds off the existing test work to include a new checks specifically for the bug in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9040&quot; title=&quot;bin/solr SSL support for client-&amp;gt;server communcation (as well as default SSL behavior in &amp;#39;new HttpSolrClient(String)&amp;#39;) broken on master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9040&quot;&gt;&lt;del&gt;SOLR-9040&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;With only this patch, testSslAndNoClientAuth &amp;amp; testSslAndClientAuth now both fail &amp;#8211; if you layer the patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9040&quot; title=&quot;bin/solr SSL support for client-&amp;gt;server communcation (as well as default SSL behavior in &amp;#39;new HttpSolrClient(String)&amp;#39;) broken on master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9040&quot;&gt;&lt;del&gt;SOLR-9040&lt;/del&gt;&lt;/a&gt; on top, testSslAndClientAuth still fails.  Looking into that now.&lt;/p&gt;</comment>
                            <comment id="15260974" author="hossman" created="Wed, 27 Apr 2016 21:20:01 +0000"  >
&lt;p&gt;Working on &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9040&quot; title=&quot;bin/solr SSL support for client-&amp;gt;server communcation (as well as default SSL behavior in &amp;#39;new HttpSolrClient(String)&amp;#39;) broken on master&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9040&quot;&gt;&lt;del&gt;SOLR-9040&lt;/del&gt;&lt;/a&gt; helped me discover some stuff about when/how exactly the JVM reads in the &lt;tt&gt;javax.net.ssl.*&lt;/tt&gt; sys props to build the default &lt;tt&gt;SSLContext&lt;/tt&gt; &amp;#8211; notably: it&apos;s a singleton, so we can&apos;t change the sysprops after startup and expect it to do what is expected.  (And there doesn&apos;t appear to be ably convinience classes/methods for loading a &quot;custom&quot; &lt;tt&gt;SSLContext&lt;/tt&gt; that obeys those properties by default unless/until you override them)&lt;/p&gt;

&lt;p&gt;In this updated patch, I&apos;ve added test code to preserve the &lt;tt&gt;SSLContext.getDefault()&lt;/tt&gt; on test class init, and use &lt;tt&gt;SSLContext.setDefaul()&lt;/tt&gt; during testing to &lt;em&gt;mimic&lt;/em&gt; the effects of how the JVM should behave if the corisponding &lt;tt&gt;javax.net.ssl.*&lt;/tt&gt; properties had been set. (then restore the preserved default in an &lt;tt&gt;@After&lt;/tt&gt; method)&lt;/p&gt;

&lt;p&gt;This seems to be working well.&lt;/p&gt;

&lt;p&gt;I briefly considered eliminating all of the explicit modifications of HttpCiientUtil&apos;s HttpClientBuilder / SchemaRegistryProvider in these tests, so we were always mimicing how a solrj code will behave by default when these props are set, but ultimately I think the current mix of both styles of getting an SSLContext are better &amp;#8211; it helps us test both the &quot;solrj client expects to use standard javax sys properties&quot; approach, and the &quot;solrj client code explicitly using HttpCiientUtil to say &apos;use these options for ssl&apos;&quot; approach.&lt;/p&gt;

&lt;p&gt;There&apos;s still a handful of nocommits, that fall into two categories:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;I want to cleanup some of the SSLTestConfig methods that only exist in master and have weird side effects (introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4509&quot; title=&quot;Move to non deprecated HttpClient impl classes to remove stale connection check on every request and move connection lifecycle management towards the client.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4509&quot;&gt;&lt;del&gt;SOLR-4509&lt;/del&gt;&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;I think it might makes sense to promote the the SSLContext.getDefault/setDefault preservation to SolrTestCaseJ4 ... but i&apos;m not 100% certain yet.  Need to think it through more.&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="15261470" author="hossman" created="Thu, 28 Apr 2016 03:18:05 +0000"  >&lt;p&gt;Updated patch...&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I want to cleanup some of the SSLTestConfig methods that only exist in master and have weird side effects (introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4509&quot; title=&quot;Move to non deprecated HttpClient impl classes to remove stale connection check on every request and move connection lifecycle management towards the client.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4509&quot;&gt;&lt;del&gt;SOLR-4509&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;done.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think it might makes sense to promote the the SSLContext.getDefault/setDefault preservation to SolrTestCaseJ4 ... but i&apos;m not 100% certain yet. Need to think it through more.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I decided this is probably not a good idea &amp;#8211; no reason to add to the number of things SolrTestCaseJ4 is doing automagically w/o a need for it.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;I think this is basically ready ... I&apos;m going to hammer on tests w/it for a bit.&lt;/p&gt;</comment>
                            <comment id="15262532" author="steve_rowe" created="Thu, 28 Apr 2016 17:04:30 +0000"  >&lt;p&gt;Rerunning on OS X, when I apply the latest patch on master and run &lt;tt&gt;ant -Dtestcase=TestMiniSolrCloudClusterSSL test&lt;/tt&gt;, I get &lt;tt&gt;BUILD SUCCESSFUL&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15262643" author="steve_rowe" created="Thu, 28 Apr 2016 18:05:03 +0000"  >&lt;p&gt;On OS X from &lt;tt&gt;solr/&lt;/tt&gt;, &lt;tt&gt;ant test&lt;/tt&gt; passes for me with the latest patch on master.  I also ran the other new test &lt;tt&gt;TestSSLRandomization&lt;/tt&gt; by itself, and it passed.&lt;/p&gt;</comment>
                            <comment id="15262906" author="jira-bot" created="Thu, 28 Apr 2016 20:18:12 +0000"  >&lt;p&gt;Commit 791d1e73933a88ef78a06a529d5dcb2fd9e01807 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman_lucene%40fucit.org&quot; class=&quot;user-hover&quot; rel=&quot;hossman_lucene@fucit.org&quot;&gt;hossman_lucene@fucit.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=791d1e7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=791d1e7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9028&quot; title=&quot;fix bugs in (add sanity checks for) SSL clientAuth testing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9028&quot;&gt;&lt;del&gt;SOLR-9028&lt;/del&gt;&lt;/a&gt;: Fixed some test related bugs preventing SSL + ClientAuth from ever being tested&lt;/p&gt;</comment>
                            <comment id="15262910" author="hossman" created="Thu, 28 Apr 2016 20:20:57 +0000"  >&lt;p&gt;Note: one small diff between the last patch and this commit is that in the patch i had cranked up the odds of randomizing the trySslClientAuth boolean in in SolrTestCaseJ4 ... i dialed that back down to the existing odds before committing.&lt;/p&gt;

&lt;p&gt;Working on backport now ... some significant changes in the HttpClient config stuff between 6x and master due to  &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4509&quot; title=&quot;Move to non deprecated HttpClient impl classes to remove stale connection check on every request and move connection lifecycle management towards the client.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4509&quot;&gt;&lt;del&gt;SOLR-4509&lt;/del&gt;&lt;/a&gt;, so this won&apos;t be trivial.&lt;/p&gt;</comment>
                            <comment id="15263218" author="steve_rowe" created="Thu, 28 Apr 2016 23:09:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;Working on backport now ... some significant changes in the HttpClient config stuff between 6x and master due to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4509&quot; title=&quot;Move to non deprecated HttpClient impl classes to remove stale connection check on every request and move connection lifecycle management towards the client.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4509&quot;&gt;&lt;del&gt;SOLR-4509&lt;/del&gt;&lt;/a&gt;, so this won&apos;t be trivial.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Maybe &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4509&quot; title=&quot;Move to non deprecated HttpClient impl classes to remove stale connection check on every request and move connection lifecycle management towards the client.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4509&quot;&gt;&lt;del&gt;SOLR-4509&lt;/del&gt;&lt;/a&gt; will be backported to 6.x?  If so, couldn&apos;t backporting this issue wait for that?&lt;/p&gt;</comment>
                            <comment id="15264331" author="jira-bot" created="Fri, 29 Apr 2016 16:55:22 +0000"  >&lt;p&gt;Commit 48f2b2a3bbfacd5d2a6d2b395ab573305e8c6612 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman_lucene%40fucit.org&quot; class=&quot;user-hover&quot; rel=&quot;hossman_lucene@fucit.org&quot;&gt;hossman_lucene@fucit.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=48f2b2a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=48f2b2a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9028&quot; title=&quot;fix bugs in (add sanity checks for) SSL clientAuth testing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9028&quot;&gt;&lt;del&gt;SOLR-9028&lt;/del&gt;&lt;/a&gt;: relax the SSLHandshakeException expectation - in some platforms/java# diff IOExceptions are thrown&lt;/p&gt;</comment>
                            <comment id="15264374" author="jira-bot" created="Fri, 29 Apr 2016 17:24:50 +0000"  >&lt;p&gt;Commit 7aecf344b15fb7f1a3136198ca590efd9eec7164 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman_lucene%40fucit.org&quot; class=&quot;user-hover&quot; rel=&quot;hossman_lucene@fucit.org&quot;&gt;hossman_lucene@fucit.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7aecf34&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7aecf34&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9028&quot; title=&quot;fix bugs in (add sanity checks for) SSL clientAuth testing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9028&quot;&gt;&lt;del&gt;SOLR-9028&lt;/del&gt;&lt;/a&gt;: Fixed some test related bugs preventing SSL + ClientAuth from ever being tested&lt;br/&gt;
(cherry picked from commit 791d1e7)&lt;/p&gt;

&lt;p&gt;Conflicts:&lt;br/&gt;
	solr/core/src/test/org/apache/solr/cloud/SSLMigrationTest.java&lt;br/&gt;
	solr/solrj/src/java/org/apache/solr/client/solrj/impl/HttpClientUtil.java&lt;br/&gt;
	solr/test-framework/src/java/org/apache/solr/SolrTestCaseJ4.java&lt;br/&gt;
	solr/test-framework/src/java/org/apache/solr/util/SSLTestConfig.java&lt;/p&gt;</comment>
                            <comment id="15264382" author="hossman" created="Fri, 29 Apr 2016 17:26:39 +0000"  >&lt;blockquote&gt;&lt;p&gt;Maybe &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4509&quot; title=&quot;Move to non deprecated HttpClient impl classes to remove stale connection check on every request and move connection lifecycle management towards the client.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4509&quot;&gt;&lt;del&gt;SOLR-4509&lt;/del&gt;&lt;/a&gt; will be backported to 6.x? If so, couldn&apos;t backporting this issue wait for that?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That doesn&apos;t seem likely - it involves a lot of incompatible changes to the solrj level client APIs (completely eliminated HttpConfigurer for the new Builder stuff).&lt;/p&gt;

&lt;p&gt;I&apos;ve already got the 6x changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9028&quot; title=&quot;fix bugs in (add sanity checks for) SSL clientAuth testing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9028&quot;&gt;&lt;del&gt;SOLR-9028&lt;/del&gt;&lt;/a&gt; ready (just hammering tests locally) so i&apos;d rather go ahead and commit so we have the tests in place &amp;#8211; if &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4509&quot; title=&quot;Move to non deprecated HttpClient impl classes to remove stale connection check on every request and move connection lifecycle management towards the client.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4509&quot;&gt;&lt;del&gt;SOLR-4509&lt;/del&gt;&lt;/a&gt; does get backported it should be fairly easy to just revert the 6x commits for this issue &amp;amp; re-merge the master commits. (I&apos;ll make a note to that effect in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4509&quot; title=&quot;Move to non deprecated HttpClient impl classes to remove stale connection check on every request and move connection lifecycle management towards the client.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4509&quot;&gt;&lt;del&gt;SOLR-4509&lt;/del&gt;&lt;/a&gt; once i commit)&lt;/p&gt;</comment>
                            <comment id="15265617" author="jira-bot" created="Sun, 1 May 2016 05:35:01 +0000"  >&lt;p&gt;Commit 8e8f6c1fa8b40dc6a7385551a79fdcdd240f5427 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman_lucene%40fucit.org&quot; class=&quot;user-hover&quot; rel=&quot;hossman_lucene@fucit.org&quot;&gt;hossman_lucene@fucit.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=8e8f6c1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=8e8f6c1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9028&quot; title=&quot;fix bugs in (add sanity checks for) SSL clientAuth testing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9028&quot;&gt;&lt;del&gt;SOLR-9028&lt;/del&gt;&lt;/a&gt;: Fix 2 SSL test related bugs...&lt;/p&gt;

&lt;p&gt;1) SolrTestCaseJ4 should always reset the HttpClientConfigurer in afterClass, regardless of wether ssl was used&lt;br/&gt;
   (when SSL is not used, the active configurer explicitly excludes SSL)&lt;br/&gt;
2) HttpClientUtilTest.testSSLSystemProperties made no sense as written.  setSSLSystemProperties() didn&apos;t have any&lt;br/&gt;
   effect on what was being tested, even if it was useful it would only have affected what keystore/truststore were&lt;br/&gt;
   used, not wether HTTPS was supported or not.&lt;/p&gt;</comment>
                            <comment id="15294030" author="steve_rowe" created="Fri, 20 May 2016 19:31:29 +0000"  >&lt;p&gt;Reopening to backport to 6.0.1.&lt;/p&gt;</comment>
                            <comment id="15294036" author="steve_rowe" created="Fri, 20 May 2016 19:34:40 +0000"  >&lt;p&gt;Since &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8097&quot; title=&quot;Implement a builder pattern for constructing a Solrj client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8097&quot;&gt;&lt;del&gt;SOLR-8097&lt;/del&gt;&lt;/a&gt; will land in 6.1, I had to modify the 7aecf344b15fb7f1a3136198ca590efd9eec7164 commit under this issue when backporting to branch_6_0 to remove calls to &lt;tt&gt;SolrTestCaseJ4.getHttpSolrClient()&lt;/tt&gt; - see attached patch.&lt;/p&gt;</comment>
                            <comment id="15294069" author="jira-bot" created="Fri, 20 May 2016 19:57:47 +0000"  >&lt;p&gt;Commit 9645d4213292121d2f011f5440684ea25d7beaa3 in lucene-solr&apos;s branch refs/heads/branch_6_0 from Chris Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9645d42&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9645d42&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9028&quot; title=&quot;fix bugs in (add sanity checks for) SSL clientAuth testing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9028&quot;&gt;&lt;del&gt;SOLR-9028&lt;/del&gt;&lt;/a&gt;: Fixed some test related bugs preventing SSL + ClientAuth from ever being tested&lt;br/&gt;
(cherry picked from commit 791d1e7)&lt;/p&gt;

&lt;p&gt;Conflicts:&lt;br/&gt;
	solr/core/src/test/org/apache/solr/cloud/SSLMigrationTest.java&lt;br/&gt;
	solr/solrj/src/java/org/apache/solr/client/solrj/impl/HttpClientUtil.java&lt;br/&gt;
	solr/test-framework/src/java/org/apache/solr/SolrTestCaseJ4.java&lt;br/&gt;
	solr/test-framework/src/java/org/apache/solr/util/SSLTestConfig.java&lt;/p&gt;

&lt;p&gt;Conflicts:&lt;br/&gt;
	solr/core/src/test/org/apache/solr/cloud/TestMiniSolrCloudClusterSSL.java&lt;/p&gt;

&lt;p&gt;For branch_6_0: Since &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8097&quot; title=&quot;Implement a builder pattern for constructing a Solrj client&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8097&quot;&gt;&lt;del&gt;SOLR-8097&lt;/del&gt;&lt;/a&gt; will land in 6.1, remove calls in TestMiniSolrCloudClusterSSL to SolrTestCaseJ4.getHttpSolrClient().&lt;/p&gt;</comment>
                            <comment id="15294071" author="jira-bot" created="Fri, 20 May 2016 19:57:50 +0000"  >&lt;p&gt;Commit fdd8d17af4e78ebb65159d74c5cb7a7d46bc2f80 in lucene-solr&apos;s branch refs/heads/branch_6_0 from Chris Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=fdd8d17&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=fdd8d17&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9028&quot; title=&quot;fix bugs in (add sanity checks for) SSL clientAuth testing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9028&quot;&gt;&lt;del&gt;SOLR-9028&lt;/del&gt;&lt;/a&gt;: Fix 2 SSL test related bugs...&lt;/p&gt;

&lt;p&gt;1) SolrTestCaseJ4 should always reset the HttpClientConfigurer in afterClass, regardless of wether ssl was used&lt;br/&gt;
   (when SSL is not used, the active configurer explicitly excludes SSL)&lt;br/&gt;
2) HttpClientUtilTest.testSSLSystemProperties made no sense as written.  setSSLSystemProperties() didn&apos;t have any&lt;br/&gt;
   effect on what was being tested, even if it was useful it would only have affected what keystore/truststore were&lt;br/&gt;
   used, not wether HTTPS was supported or not.&lt;/p&gt;</comment>
                            <comment id="15305394" author="steve_rowe" created="Sat, 28 May 2016 13:38:32 +0000"  >&lt;p&gt;Bulk close issues included in the 6.0.1 release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12957928">SOLR-8970</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12962427">SOLR-9040</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12962407">SOLR-9039</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12964732">SOLR-9061</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12964735">SOLR-9062</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12805285" name="SOLR-9028-branch_6_0-remove-httpclient-builder-method.patch" size="4709" author="sarowe" created="Fri, 20 May 2016 19:34:40 +0000"/>
                            <attachment id="12801172" name="SOLR-9028.patch" size="37028" author="hossman" created="Thu, 28 Apr 2016 03:18:05 +0000"/>
                            <attachment id="12801117" name="SOLR-9028.patch" size="34338" author="hossman" created="Wed, 27 Apr 2016 21:20:01 +0000"/>
                            <attachment id="12800840" name="SOLR-9028.patch" size="33322" author="hossman" created="Tue, 26 Apr 2016 18:23:44 +0000"/>
                            <attachment id="12800671" name="SOLR-9028.patch" size="30334" author="hossman" created="Mon, 25 Apr 2016 23:57:22 +0000"/>
                            <attachment id="12800326" name="SOLR-9028.patch" size="26429" author="hossman" created="Fri, 22 Apr 2016 22:46:16 +0000"/>
                            <attachment id="12800092" name="SOLR-9028.patch" size="22128" author="hossman" created="Thu, 21 Apr 2016 21:36:32 +0000"/>
                            <attachment id="12800170" name="os.x.failure.txt" size="198520" author="sarowe" created="Fri, 22 Apr 2016 04:14:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2wj5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>