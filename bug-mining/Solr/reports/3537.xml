<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:25:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-11045] The new replica created by MoveReplica will have to have same name and coreName as the old one in case of HDFS</title>
                <link>https://issues.apache.org/jira/browse/SOLR-11045</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Currently, if the node contains a replica ( the replica being moved ) go down, then we call moveReplica command for it. That replica will only be removed from states.json. So If that node come back, we will have 2 replicas point to the same dataDir in HDFS.&lt;/p&gt;

&lt;p&gt;So if moveReplica can maintain the same name and coreName for the new replica, we can reuse &lt;tt&gt;CloudUtil.checkSharedFSFailoverReplaced()&lt;/tt&gt; to clean the old one.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13086211">SOLR-11045</key>
            <summary>The new replica created by MoveReplica will have to have same name and coreName as the old one in case of HDFS</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="caomanhdat">Cao Manh Dat</assignee>
                                    <reporter username="caomanhdat">Cao Manh Dat</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Jul 2017 10:38:39 +0000</created>
                <updated>Wed, 2 Oct 2019 17:24:46 +0000</updated>
                            <resolved>Thu, 13 Jul 2017 06:44:10 +0000</resolved>
                                                    <fixVersion>7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16083606" author="caomanhdat" created="Wed, 12 Jul 2017 07:54:45 +0000"  >&lt;p&gt;A patch for this ticket. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt; can you take a look?&lt;/p&gt;</comment>
                            <comment id="16083717" author="shalinmangar" created="Wed, 12 Jul 2017 09:39:14 +0000"  >&lt;p&gt;Thanks Dat. A few comments:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;minor nit &amp;#8211; the replica being checked for sharedFS in CloudUtil.checkSharedFSFailoverReplaced is different from the core descriptor being passed to the method. In reality it does not matter because today either all replicas are in shared FS or none but if it ever changes then this could be a tricky bug to find.&lt;/li&gt;
	&lt;li&gt;In MoveReplicaHDFSTest, the &lt;tt&gt;assertNotSame(replica.getNodeName(), newReplica.getNodeName());&lt;/tt&gt; is not correct. &lt;tt&gt;assertNotSame&lt;/tt&gt; checks for object reference equality.&lt;/li&gt;
	&lt;li&gt;The test should not extend MoveReplicaTest because then the super class&apos;s test() method is also executed as part of this test. Extend SolrCloudTestCase directly.&lt;/li&gt;
	&lt;li&gt;The test should assertTrue on the result of &lt;tt&gt;ClusterStateUtil.waitForAllActiveAndLiveReplicas(zkStateReader, 120000);&lt;/tt&gt; call otherwise a timeout is counted as success. On a local run I saw it hang for 2 minutes and yet the test succeeded.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="16083809" author="caomanhdat" created="Wed, 12 Jul 2017 10:59:54 +0000"  >&lt;p&gt;Thank &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;, this patch fix all problems mentioned.&lt;/p&gt;</comment>
                            <comment id="16083817" author="shalinmangar" created="Wed, 12 Jul 2017 11:10:15 +0000"  >&lt;p&gt;+1 LGTM&lt;/p&gt;</comment>
                            <comment id="16085266" author="jira-bot" created="Thu, 13 Jul 2017 06:43:31 +0000"  >&lt;p&gt;Commit 22ec456b0cc214295d2e15828636311ad973cdd7 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=caomanhdat&quot; class=&quot;user-hover&quot; rel=&quot;caomanhdat&quot;&gt;caomanhdat&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=22ec456&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=22ec456&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11045&quot; title=&quot;The new replica created by MoveReplica will have to have same name and coreName as the old one in case of HDFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11045&quot;&gt;&lt;del&gt;SOLR-11045&lt;/del&gt;&lt;/a&gt;: The new replica created by MoveReplica will have to have same name and coreName as the old one in case of HDFS&lt;/p&gt;</comment>
                            <comment id="16085270" author="jira-bot" created="Thu, 13 Jul 2017 06:44:33 +0000"  >&lt;p&gt;Commit fc20ed399c2e88843087ef8f0c35146ba414c410 in lucene-solr&apos;s branch refs/heads/branch_7_0 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=caomanhdat&quot; class=&quot;user-hover&quot; rel=&quot;caomanhdat&quot;&gt;caomanhdat&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=fc20ed3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=fc20ed3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11045&quot; title=&quot;The new replica created by MoveReplica will have to have same name and coreName as the old one in case of HDFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11045&quot;&gt;&lt;del&gt;SOLR-11045&lt;/del&gt;&lt;/a&gt;: The new replica created by MoveReplica will have to have same name and coreName as the old one in case of HDFS&lt;/p&gt;</comment>
                            <comment id="16085273" author="jira-bot" created="Thu, 13 Jul 2017 06:45:22 +0000"  >&lt;p&gt;Commit 0f93c470ab0f609e872ec99f0be214b8d3c4241b in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=caomanhdat&quot; class=&quot;user-hover&quot; rel=&quot;caomanhdat&quot;&gt;caomanhdat&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=0f93c47&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=0f93c47&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11045&quot; title=&quot;The new replica created by MoveReplica will have to have same name and coreName as the old one in case of HDFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11045&quot;&gt;&lt;del&gt;SOLR-11045&lt;/del&gt;&lt;/a&gt;: The new replica created by MoveReplica will have to have same name and coreName as the old one in case of HDFS&lt;/p&gt;</comment>
                            <comment id="16086087" author="jira-bot" created="Thu, 13 Jul 2017 17:48:05 +0000"  >&lt;p&gt;Commit 93cbe2adfca7a4cf5a93c3aac6228aa5d5663b8d in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=93cbe2a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=93cbe2a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11045&quot; title=&quot;The new replica created by MoveReplica will have to have same name and coreName as the old one in case of HDFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11045&quot;&gt;&lt;del&gt;SOLR-11045&lt;/del&gt;&lt;/a&gt;: Fix precommit failure&lt;/p&gt;</comment>
                            <comment id="16086091" author="jira-bot" created="Thu, 13 Jul 2017 17:49:52 +0000"  >&lt;p&gt;Commit 7a8b6c32463f88911cd8225d35b25e44876b399f in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7a8b6c3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7a8b6c3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11045&quot; title=&quot;The new replica created by MoveReplica will have to have same name and coreName as the old one in case of HDFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11045&quot;&gt;&lt;del&gt;SOLR-11045&lt;/del&gt;&lt;/a&gt;: Fix precommit failure&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 93cbe2a)&lt;/p&gt;</comment>
                            <comment id="16086095" author="jira-bot" created="Thu, 13 Jul 2017 17:50:38 +0000"  >&lt;p&gt;Commit 8ddf0c2089262a131ae268b2a057bede57ffeb9e in lucene-solr&apos;s branch refs/heads/branch_7_0 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=8ddf0c2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=8ddf0c2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11045&quot; title=&quot;The new replica created by MoveReplica will have to have same name and coreName as the old one in case of HDFS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11045&quot;&gt;&lt;del&gt;SOLR-11045&lt;/del&gt;&lt;/a&gt;: Fix precommit failure&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 93cbe2a)&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 7a8b6c3)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13060699">SOLR-10397</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12876830" name="SOLR-11045.patch" size="10944" author="caomanhdat" created="Wed, 12 Jul 2017 12:42:11 +0000"/>
                            <attachment id="12876817" name="SOLR-11045.patch" size="9613" author="caomanhdat" created="Wed, 12 Jul 2017 10:59:19 +0000"/>
                            <attachment id="12876780" name="SOLR-11045.patch" size="8765" author="caomanhdat" created="Wed, 12 Jul 2017 07:54:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 18 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hd4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>