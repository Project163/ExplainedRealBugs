<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:46:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-15071] Bug on LTR when using solr 8.6.3 - index out of bounds DisiPriorityQueue.add(DisiPriorityQueue.java:102)</title>
                <link>https://issues.apache.org/jira/browse/SOLR-15071</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Hello,&lt;br/&gt;
We are trying to update Solr from 8.3.1 to 8.6.3. On Solr 8.3.1 we are&lt;br/&gt;
using LTR in production using a MultipleAdditiveTrees model. On Solr 8.6.3&lt;br/&gt;
we receive an error when we try to compute some SolrFeatures. We didn&apos;t&lt;br/&gt;
find any pattern of the queries that fail.&lt;br/&gt;
Example:&lt;br/&gt;
We have the following query raw parameters:&lt;br/&gt;
q=lg cx 4k oled 120 hz -&amp;gt; just of many examples&lt;br/&gt;
term_dq=lg cx 4k oled 120 hz&lt;br/&gt;
rq={!ltr model=model reRankDocs=1000 store=feature_store&lt;br/&gt;
efi.term=${term_dq}}&lt;br/&gt;
defType=edismax,&lt;br/&gt;
mm=2&amp;lt;75%&lt;br/&gt;
The features are something like this:&lt;br/&gt;
{&lt;br/&gt;
 &quot;name&quot;:&quot;similarity_query_fileld_1&quot;,&lt;br/&gt;
 &quot;class&quot;:&quot;org.apache.solr.ltr.feature.SolrFeature&quot;,&lt;br/&gt;
 &quot;params&quot;:{&quot;q&quot;:&quot;&lt;/p&gt;
{!dismax qf=query_field_1 mm=1}
&lt;p&gt;${term}&quot;},&lt;br/&gt;
 &quot;store&quot;:&quot;feature_store&quot;&lt;br/&gt;
},&lt;br/&gt;
{&lt;br/&gt;
 &quot;name&quot;:&quot;similarity_query_field_2&quot;,&lt;br/&gt;
 &quot;class&quot;:&quot;org.apache.solr.ltr.feature.SolrFeature&quot;,&lt;br/&gt;
 &quot;params&quot;:{&quot;q&quot;:&quot;&lt;/p&gt;
{!dismax qf=query_field_2 mm=5}
&lt;p&gt;${term}&quot;},&lt;br/&gt;
 &quot;store&quot;:&quot;feature_store&quot;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;We are testing ~6300 production queries and for about 1% of them we receive&lt;br/&gt;
that following error message:&lt;br/&gt;
&quot;metadata&quot;:[&lt;br/&gt;
 &quot;error-class&quot;,&quot;org.apache.solr.common.SolrException&quot;,&lt;br/&gt;
 &quot;root-error-class&quot;,&quot;java.lang.ArrayIndexOutOfBoundsException&quot;],&lt;br/&gt;
 &quot;msg&quot;:&quot;java.lang.ArrayIndexOutOfBoundsException: Index 2 out of bounds&lt;br/&gt;
for length 2&quot;,&lt;/p&gt;

&lt;p&gt;The stacktrace is :&lt;br/&gt;
org.apache.solr.common.SolrException:&lt;br/&gt;
java.lang.ArrayIndexOutOfBoundsException: Index 2 out of bounds for length 2&lt;br/&gt;
at org.apache.solr.search.ReRankCollector.topDocs(ReRankCollector.java:154)&lt;br/&gt;
at&lt;br/&gt;
org.apache.solr.search.SolrIndexSearcher.getDocListNC(SolrIndexSearcher.java:159&lt;br/&gt;
9)&lt;br/&gt;
at&lt;br/&gt;
org.apache.solr.search.SolrIndexSearcher.getDocListC(SolrIndexSearcher.java:1413&lt;br/&gt;
)&lt;br/&gt;
at&lt;br/&gt;
org.apache.solr.search.SolrIndexSearcher.search(SolrIndexSearcher.java:596)&lt;br/&gt;
at&lt;br/&gt;
org.apache.solr.handler.component.QueryComponent.doProcessUngroupedSearch(QueryC&lt;br/&gt;
omponent.java:1513)&lt;br/&gt;
at&lt;br/&gt;
org.apache.solr.handler.component.QueryComponent.process(QueryComponent.java:403&lt;br/&gt;
)&lt;br/&gt;
at&lt;br/&gt;
org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.&lt;br/&gt;
java:360)&lt;br/&gt;
at&lt;br/&gt;
org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java&lt;br/&gt;
:214)&lt;br/&gt;
at org.apache.solr.core.SolrCore.execute(SolrCore.java:2627)&lt;br/&gt;
at org.apache.solr.servlet.HttpSolrCall.execute(HttpSolrCall.java:795)&lt;br/&gt;
at org.apache.solr.servlet.HttpSolrCall.call(HttpSolrCall.java:568)&lt;br/&gt;
at&lt;br/&gt;
org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:415)&lt;br/&gt;
at&lt;br/&gt;
org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:345)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.jav&lt;br/&gt;
a:1596)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:545)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:590)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235&lt;br/&gt;
)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:161&lt;br/&gt;
0)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233&lt;br/&gt;
)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:130&lt;br/&gt;
0)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188)&lt;br/&gt;
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:485)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1580&lt;br/&gt;
)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1215&lt;br/&gt;
)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerC&lt;br/&gt;
ollection.java:221)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.server.handler.InetAccessHandler.handle(InetAccessHandler.java&lt;br/&gt;
:177)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java&lt;br/&gt;
:146)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.rewrite.handler.RewriteHandler.handle(RewriteHandler.java:322)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)&lt;br/&gt;
at org.eclipse.jetty.server.Server.handle(Server.java:500)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:383)&lt;br/&gt;
at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:547)&lt;br/&gt;
at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:375)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:273)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnectio&lt;br/&gt;
n.java:311)&lt;br/&gt;
at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)&lt;br/&gt;
at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:117)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.jav&lt;br/&gt;
a:336)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.j&lt;br/&gt;
ava:313)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.&lt;br/&gt;
java:171)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:12&lt;br/&gt;
9)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(Reserved&lt;br/&gt;
ThreadExecutor.java:375)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:806)&lt;br/&gt;
at&lt;br/&gt;
org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:&lt;br/&gt;
938)&lt;br/&gt;
at java.base/java.lang.Thread.run(Thread.java:834)&lt;br/&gt;
Caused by: java.lang.ArrayIndexOutOfBoundsException: Index 2 out of bounds&lt;br/&gt;
for length 2&lt;br/&gt;
at&lt;br/&gt;
org.apache.lucene.search.DisiPriorityQueue.add(DisiPriorityQueue.java:102)&lt;br/&gt;
at&lt;br/&gt;
org.apache.lucene.search.MinShouldMatchSumScorer.advanceTail(MinShouldMatchSumSc&lt;br/&gt;
orer.java:246)&lt;br/&gt;
at&lt;br/&gt;
org.apache.lucene.search.MinShouldMatchSumScorer.updateFreq(MinShouldMatchSumSco&lt;br/&gt;
rer.java:312)&lt;br/&gt;
at&lt;br/&gt;
org.apache.lucene.search.MinShouldMatchSumScorer.score(MinShouldMatchSumScorer.j&lt;br/&gt;
ava:320)&lt;br/&gt;
at&lt;br/&gt;
org.apache.solr.ltr.feature.SolrFeature$SolrFeatureWeight$SolrFeatureScorer.scor&lt;br/&gt;
e(SolrFeature.java:242)&lt;br/&gt;
at&lt;br/&gt;
org.apache.solr.ltr.LTRScoringQuery$ModelWeight$ModelScorer$SparseModelScorer.sc&lt;br/&gt;
ore(LTRScoringQuery.java:595)&lt;br/&gt;
at&lt;br/&gt;
org.apache.solr.ltr.LTRScoringQuery$ModelWeight$ModelScorer.score(LTRScoringQuer&lt;br/&gt;
y.java:540)&lt;br/&gt;
at org.apache.solr.ltr.LTRRescorer.scoreFeatures(LTRRescorer.java:183)&lt;br/&gt;
at org.apache.solr.ltr.LTRRescorer.rescore(LTRRescorer.java:122)&lt;br/&gt;
at org.apache.solr.search.ReRankCollector.topDocs(ReRankCollector.java:119)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Based on &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt;&#160;suggestions we detailed the following:&lt;/p&gt;

&lt;p&gt;Reproducibility: We can reproduce the same queries on multiple runs, with the same error.&lt;/p&gt;


&lt;p&gt;Data as a factor: Our setup is single-sharded, so we can&apos;t investigate further on this.&lt;/p&gt;


&lt;p&gt;Feature vs. Model: We&apos;ve also tried a dummy LinearModel with only two features and the problem still occurs.&lt;/p&gt;


&lt;p&gt;Identification of the troublesome feature(s): We&apos;ve narrowed our model to only two features and the problem always occurs (for some queries, not all) when we have a feature with a mm=1 and a feature with a mm&amp;gt;=3. The problem also occurs when we only do feature extraction and the problem seems to always occur on the feature with the bigger mm. The errors seem to be related to the size of the head DisiPriorityQueue created here: &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/branch_8_6/lucene/core/src/java/org/apache/lucene/search/MinShouldMatchSumScorer.java#L107&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/branch_8_6/lucene/core/src/java/org/apache/lucene/search/MinShouldMatchSumScorer.java#L107&lt;/a&gt; as the error changes as we change the mm for the second feature:&lt;/p&gt;

&lt;p&gt;1 feature with mm=1 and one with mm=3 -&amp;gt; Index 4 out of bounds for length 4&lt;br/&gt;
1 feature with mm=1 and one with mm=5 -&amp;gt; Index 2 out of bounds for length 2&lt;/p&gt;

&lt;p&gt;You can find below the dummy feature-store.&lt;/p&gt;

&lt;p&gt;[&lt;br/&gt;
 {&lt;br/&gt;
 &quot;store&quot;: &quot;dummystore&quot;,&lt;br/&gt;
 &quot;name&quot;: &quot;similarity_name_mm_1&quot;,&lt;br/&gt;
 &quot;class&quot;: &quot;org.apache.solr.ltr.feature.SolrFeature&quot;,&lt;br/&gt;
 &quot;params&quot;: &lt;/p&gt;
{
 &quot;q&quot;: &quot;\{!dismax qf=name mm=1}
&lt;p&gt;${term}&quot;&lt;br/&gt;
 }&lt;br/&gt;
 },&lt;br/&gt;
 {&lt;br/&gt;
 &quot;store&quot;: &quot;dummystore&quot;,&lt;br/&gt;
 &quot;name&quot;: &quot;similarity_names_mm_3&quot;,&lt;br/&gt;
 &quot;class&quot;: &quot;org.apache.solr.ltr.feature.SolrFeature&quot;,&lt;br/&gt;
 &quot;params&quot;: &lt;/p&gt;
{
 &quot;q&quot;: &quot;\{!dismax qf=name mm=3}
&lt;p&gt;${term}&quot;&lt;br/&gt;
 }&lt;br/&gt;
 }&lt;br/&gt;
]&lt;/p&gt;

&lt;p&gt;The problem starts occuring in Solr 8.6.0, as we tried multiple versions &amp;lt; 8.6 and &amp;gt;= 8.6 and the problem started on 8.6.0 and we tend to believe it&apos;s because of the following changes: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14364&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SOLR-14364&lt;/a&gt; as they&apos;re the only major changes related to LTR which were introduced in Solr 8.6.0.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13350690">SOLR-15071</key>
            <summary>Bug on LTR when using solr 8.6.3 - index out of bounds DisiPriorityQueue.add(DisiPriorityQueue.java:102)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cpoerschke">Christine Poerschke</assignee>
                                    <reporter username="florin.babes">Florin Babes</reporter>
                        <labels>
                            <label>ltr</label>
                    </labels>
                <created>Wed, 6 Jan 2021 15:46:27 +0000</created>
                <updated>Thu, 12 May 2022 00:26:46 +0000</updated>
                            <resolved>Mon, 25 Jan 2021 17:52:22 +0000</resolved>
                                    <version>8.6</version>
                    <version>8.7</version>
                                    <fixVersion>8.8</fixVersion>
                    <fixVersion>9.0</fixVersion>
                                    <component>contrib - LTR</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4200">1h 10m</timespent>
                                <comments>
                            <comment id="17259985" author="cpoerschke" created="Wed, 6 Jan 2021 18:55:01 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=florin.babes&quot; class=&quot;user-hover&quot; rel=&quot;florin.babes&quot;&gt;florin.babes&lt;/a&gt; for creating this ticket as a continuation of the Solr user mailing list thread!&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;... We&apos;ve narrowed our model to only two features and the problem always occurs (for some queries, not all) when we have a feature with a mm=1 and a feature with a mm&amp;gt;=3. The problem also occurs when we only do feature extraction and the problem seems to always occur on the feature with the bigger mm. The errors seem to be related to the size of the head DisiPriorityQueue created here: &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/branch_8_6/lucene/core/src/java/org/apache/lucene/search/MinShouldMatchSumScorer.java#L107&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/branch_8_6/lucene/core/src/java/org/apache/lucene/search/MinShouldMatchSumScorer.java#L107&lt;/a&gt; as the error changes as we change the mm for the second feature: ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That really helps narrow things down, great. Thinking out aloud about possible further investigative steps:&lt;/p&gt;

&lt;p&gt;The problem also happening during feature extraction should makes it easier to build a reproducible test case e.g. with the techproducts example used in the Solr Reference Guide &lt;a href=&quot;https://lucene.apache.org/solr/guide/8_6/learning-to-rank.html#quick-start-with-ltr&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lucene.apache.org/solr/guide/8_6/learning-to-rank.html#quick-start-with-ltr&lt;/a&gt; i.e. given the documents in the techproducts example, is it possible to craft the dummy feature-store and choose mm values and queries that cause the same error?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;...&lt;br/&gt;
We have the following query raw parameters:&lt;br/&gt;
q=lg cx 4k oled 120 hz -&amp;gt; just of many examples&lt;br/&gt;
term_dq=lg cx 4k oled 120 hz&lt;br/&gt;
rq={!ltr model=model reRankDocs=1000 store=feature_store&lt;br/&gt;
efi.term=${term_dq}}&lt;br/&gt;
...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You mention that the problem occurs for some queries but not all and that it seems to always occur for the bigger mm. Could the queries or the &lt;tt&gt;mm&lt;/tt&gt; be adjusted to &apos;ensure&apos; that the problem occurs? Specifically&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;if we have (say) &lt;tt&gt;lg cx 4k oled 120 hz&lt;/tt&gt; then that&apos;s 6 terms and so would mm=7 then &apos;guarantee&apos; hitting of the error?&lt;/li&gt;
	&lt;li&gt;might stopword removal be a factor e.g. if &lt;tt&gt;lg cx 4k oled 120 hz&lt;/tt&gt; is pruned to (say) &lt;tt&gt;lg cx 4k oled hz&lt;/tt&gt; then with only 5 terms left could mm&amp;gt;=6 ever work?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Not having used &lt;tt&gt;mm&lt;/tt&gt; myself I had to lookup &lt;a href=&quot;https://lucene.apache.org/solr/guide/8_6/the-dismax-query-parser.html#mm-minimum-should-match-parameter&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lucene.apache.org/solr/guide/8_6/the-dismax-query-parser.html#mm-minimum-should-match-parameter&lt;/a&gt; to learn a little about it and I also noticed &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.6.3/solr/solrj/src/java/org/apache/solr/common/params/DisMaxParams.java#L45-L48&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.6.3/solr/solrj/src/java/org/apache/solr/common/params/DisMaxParams.java#L45-L48&lt;/a&gt; as sounding promising i.e. if &lt;tt&gt;mm.autoRelax=true&lt;/tt&gt; was used would that avoid the errors?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/**
   * If set to &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, will &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; to reduce MM &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; tokens are removed from some clauses but not all
   */
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; MM_AUTORELAX = &lt;span class=&quot;code-quote&quot;&gt;&quot;mm.autoRelax&quot;&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If the error can be reproduced with the techproducts example included in the 8.6.3 release itself then a next step could be to build Solr locally &amp;#8211; &lt;a href=&quot;https://github.com/apache/lucene-solr/tree/master#building-solr&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/tree/master#building-solr&lt;/a&gt; &amp;#8211; and using the techproducts in the locally built Solr the code behaviour could be examined more closely to figure out exactly what&apos;s going on and how it might be fixed. Does that kind of make sense?&lt;/p&gt;</comment>
                            <comment id="17260716" author="cpoerschke" created="Thu, 7 Jan 2021 18:35:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;... we tend to believe it&apos;s because of the following changes: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14364&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SOLR-14364&lt;/a&gt; as they&apos;re the only major changes related to LTR which were introduced in Solr 8.6.0. ...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, that&apos;s a plausible hypothesis. &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14364&quot; title=&quot;LTR SolrFeature fq improvements, like PostFilters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14364&quot;&gt;&lt;del&gt;SOLR-14364&lt;/del&gt;&lt;/a&gt; (which supersedes &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=slivotov&quot; class=&quot;user-hover&quot; rel=&quot;slivotov&quot;&gt;slivotov&lt;/a&gt;&apos;s &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12698&quot; title=&quot;SolrFeature: no-fq optimisation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12698&quot;&gt;&lt;del&gt;SOLR-12698&lt;/del&gt;&lt;/a&gt;) relates to the &quot;no fq&quot; scenario and the SolrFeature features above don&apos;t have an fq query, so that fits the picture. It&apos;s imaginable that the LTR feature computation code makes assumptions which are no longer met in certain scenarios after the change. The hypothesis could be tested further e.g.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;via the addition of some sort of &lt;tt&gt;fq&lt;/tt&gt; in the SolrFeature parameters, perhaps &lt;tt&gt;&amp;#42;:&amp;#42;&lt;/tt&gt; would be suitable or otherwise an actual &lt;tt&gt;fq&lt;/tt&gt;.&lt;/li&gt;
	&lt;li&gt;within a locally built Solr, observing the error behaviour after the changes but not in the commits before then.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17262458" author="florin.babes" created="Mon, 11 Jan 2021 07:44:25 +0000"  >&lt;p&gt;Thanks for the hints &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt;.&#160;&lt;/p&gt;

&lt;p&gt;We&apos;ve managed to reproduce the issue using the techproducts example and indexing some of our documents.&#160;&lt;/p&gt;

&lt;p&gt;The mm.autoRelax didn&apos;t help, same error. Same with using fq in features.&#160;&lt;/p&gt;

&lt;p&gt;We tried to debug the issue using intellij remote debug and we found the following difference. In 8.6.3 is called this method&#160;org/apache/lucene/search/MinShouldMatchSumScorer.java:updateFreq and is not called in 8.5.2. We&apos;ve tried to find the main cause but without succes.&#160;&lt;/p&gt;

&lt;p&gt;The above method leads here&#160;org/apache/lucene/search/DisiPriorityQueue.java:add and at this line&#160;heap&lt;span class=&quot;error&quot;&gt;&amp;#91;size&amp;#93;&lt;/span&gt; = entry; the exception is triggered. It looks like the heap is not initialized with enough space for all terms.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17262657" author="dizzu333" created="Mon, 11 Jan 2021 14:03:54 +0000"  >&lt;p&gt;Maybe someone who recently went through the code related to this could help us identify the issue?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;, if you have the time, could you also take a look at this bug and maybe help us identify the issue? It would be very appreciated. Thank you!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Here are the exact reproduction steps we are using to trigger the bug (files:&#160;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13018526/13018526_featurestore%2Bmodel%2Bsample_documents.zip&quot; title=&quot;featurestore+model+sample_documents.zip attached to SOLR-15071&quot;&gt;featurestore+model+sample_documents.zip&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&#160;):&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;start and index techproducts&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;tt&gt;&lt;b&gt;$ /opt/solr/bin/solr -e techproducts -Dsolr.ltr.enabled=true&lt;/b&gt;&lt;/tt&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;upload feature store&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;&lt;tt&gt;$ curl -XPUT &apos;http://localhost:8983/solr/techproducts/schema/feature-store&apos; --data-binary &quot;@./feature-store.minimal.json&quot; -H &apos;Content-type:application/json&apos;&lt;/tt&gt;&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;upload model&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;&lt;tt&gt;$ curl -XPUT &apos;http://localhost:8983/solr/techproducts/schema/model-store&apos; --data-binary &quot;@./model.minimal.json&quot; -H &apos;Content-type:application/json&apos;&lt;/tt&gt;&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;index sample documents&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;&lt;tt&gt;$ curl -XPOST &apos;http://localhost:8983/solr/techproducts/update?wt=json&amp;amp;commitWithin=1&amp;amp;overwrite=true&apos; --data-binary &quot;@./sample_documents.json&quot; -H &apos;Content-type:application/json&apos;&lt;/tt&gt;&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;query for &#8216;husa cu tastatura tableta 10 inch&#8217;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;&lt;tt&gt;$ curl -XGET &apos;http://localhost:8983/solr/techproducts/select?fl=id%2C%5Bfeatures%20store%3Ddev_2020_08_26%20efi.term%3D&quot;husa%20cu%20tastatura%20tableta%2010%20inch&quot;%5D&amp;amp;q=husa%20cu%20tastatura%20tableta%2010%20inch&amp;amp;rows=500&lt;/tt&gt;&lt;/b&gt;&lt;/p&gt;</comment>
                            <comment id="17262684" author="cpoerschke" created="Mon, 11 Jan 2021 14:37:02 +0000"  >&lt;p&gt;Great to hear the issue is reproducible with the techproducts example and the addition of some of your documents.&lt;/p&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dizzu333&quot; class=&quot;user-hover&quot; rel=&quot;dizzu333&quot;&gt;dizzu333&lt;/a&gt; for sharing the exact steps and the files to work with!&lt;/p&gt;

&lt;p&gt;I see that there are 10,000 documents and would be curious if reducing that somehow would lead us to further insights. Either indexing fewer documents or indexing all the 10,000 documents but excluding them from the search e.g. via &lt;tt&gt;fq=id:(123 OR 456 OR 789)&lt;/tt&gt; clauses. Perhaps you&apos;ve already tried that, I see there&apos;s &lt;tt&gt;rows=500&lt;/tt&gt; on the query rather than the default &lt;tt&gt;rows=10&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="17262764" author="dizzu333" created="Mon, 11 Jan 2021 16:32:44 +0000"  >&lt;p&gt;At first I thought I&apos;ve managed to reproduce it with even a single document:&#160;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&lt;b&gt;curl -XGET &apos;http://localhost:8983/solr/techproducts/select?fl=id%2C%5Bfeatures%20store%3Ddev_2020_08_26%20efi.term%3D%22husa%20cu%20tastatura%20tableta%2010%20inch%22%5D&amp;amp;q=husa%20cu%20tastat&lt;/b&gt;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&lt;b&gt;ura%20tableta%2010%20inch&amp;amp;fq=id:934521240&apos;&lt;/b&gt;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;And it worked, even after a restart (so no caches involved, I believe).&lt;/p&gt;

&lt;p&gt;&lt;del&gt;To sum up, the problem occurs when trying to extract a feature with the following params:&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;&lt;b&gt;&lt;tt&gt;&quot;q&quot;: &quot;{!dismax qf=name mm=3}${term}&quot;&lt;/tt&gt;&lt;/b&gt;&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;from the document with these fields:&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;-*{{&lt;/p&gt;
{ &quot;id&quot;:&quot;934521240&quot;, &quot;name&quot;:&quot;tableta magnetica abc quercetti&quot;&#160;}
&lt;p&gt;}}*-&lt;/p&gt;

&lt;p&gt;&lt;del&gt;where $term is:&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;&lt;b&gt;&lt;tt&gt;husa cu tastatura tableta 10 inch&lt;/tt&gt;&lt;/b&gt;&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;But if I try adding only this document, or this document and another subset of the sample documents in the index, (&lt;em&gt;and this is the weird part&lt;/em&gt;) the problem no longer occurs. So the problem seems to occur even with only one document returned in the request (fq=id:X), but only if other (&lt;em&gt;which ones?!&lt;/em&gt;) documents are present, which logically makes me believe the request also touches some other documents, even though it shouldn&apos;t.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17262916" author="cpoerschke" created="Mon, 11 Jan 2021 20:10:55 +0000"  >&lt;p&gt;Well, this is a truely interesting bug! I think I&apos;ve figured out what the issue is and how it got broken and how to fix it. Easy fix but with long explanation to go with it, will continue after dinner &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17262947" author="cpoerschke" created="Mon, 11 Jan 2021 21:44:26 +0000"  >&lt;ul&gt;
	&lt;li&gt;The &lt;tt&gt;freq &amp;gt;= minShouldMatch&lt;/tt&gt; assertion in the &lt;tt&gt;updateFreq&lt;/tt&gt; method fails.
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.7.0/lucene/core/src/java/org/apache/lucene/search/MinShouldMatchSumScorer.java#L303&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.7.0/lucene/core/src/java/org/apache/lucene/search/MinShouldMatchSumScorer.java#L303&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;This is because in the &lt;tt&gt;setDocAndFreq&lt;/tt&gt; method the &lt;tt&gt;freq&lt;/tt&gt; is re-computed and somehow that doesn&apos;t quite work out.
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.7.0/lucene/core/src/java/org/apache/lucene/search/MinShouldMatchSumScorer.java#L263&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.7.0/lucene/core/src/java/org/apache/lucene/search/MinShouldMatchSumScorer.java#L263&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;setDocAndFreq&lt;/tt&gt; is called by the &lt;tt&gt;TwoPhaseIterator&lt;/tt&gt; methods.
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.7.0/lucene/core/src/java/org/apache/lucene/search/MinShouldMatchSumScorer.java#L135&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.7.0/lucene/core/src/java/org/apache/lucene/search/MinShouldMatchSumScorer.java#L135&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;twoPhaseIterator()&lt;/tt&gt; is an optional &lt;tt&gt;Scorer&lt;/tt&gt; method, it defaults to &lt;tt&gt;null&lt;/tt&gt; i.e. two-phase iteration is not supported.
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.7.0/lucene/core/src/java/org/apache/lucene/search/Scorer.java#L74-L91&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.7.0/lucene/core/src/java/org/apache/lucene/search/Scorer.java#L74-L91&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;With the &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14378&quot; title=&quot;factor out a (contrib/ltr) FilterFeatureScorer class&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14378&quot;&gt;&lt;del&gt;SOLR-14378&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14364&quot; title=&quot;LTR SolrFeature fq improvements, like PostFilters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14364&quot;&gt;&lt;del&gt;SOLR-14364&lt;/del&gt;&lt;/a&gt; changes the &lt;tt&gt;SolrFeatureScorer&lt;/tt&gt; inadvertently claimed to potentially have two-phase iteration support when it does not have it.
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.7.0/solr/contrib/ltr/src/java/org/apache/solr/ltr/feature/SolrFeature.java#L233&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.7.0/solr/contrib/ltr/src/java/org/apache/solr/ltr/feature/SolrFeature.java#L233&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Proposed fix: &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/2196&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/2196&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17263214" author="dizzu333" created="Tue, 12 Jan 2021 10:08:09 +0000"  >&lt;p&gt;Thank you for your help, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt;. I&apos;ve compiled and tested with your fix and everything is ok now.&lt;/p&gt;</comment>
                            <comment id="17263283" author="florin.babes" created="Tue, 12 Jan 2021 12:02:39 +0000"  >&lt;p&gt;Thanks for your help &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="17263564" author="dsmiley" created="Tue, 12 Jan 2021 18:00:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;the SolrFeatureScorer inadvertently claimed to potentially have two-phase iteration support when it does not have it&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Can you elaborate on that... why does SFS not (potentially) have two-phase iterator support?  Looking at the code, it seems it simply delegates to the Scorer it wraps, so if that Scorer supports it, shouldn&apos;t SFS likewise?  The only thing I can think of that would cause this to be false would be if SFS did some sort of filtering, but I don&apos;t see it.&lt;/p&gt;

&lt;p&gt;A real unit test would be ideal.  Are there obstacles make this difficult?&lt;/p&gt;</comment>
                            <comment id="17263587" author="cpoerschke" created="Tue, 12 Jan 2021 18:39:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;... why does SFS not (potentially) have two-phase iterator support? Looking at the code, it seems it simply delegates to the Scorer it wraps, ...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, that&apos;s what I meant by &quot;potentially&quot; i.e. if the wrapped scorer supports it then SFS claims to support it too. If the wrapped scorer does not support it then SFS also does not support it.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;... if that Scorer supports it, shouldn&apos;t SFS likewise? ...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;In principle yes but &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/2196#issuecomment-758599976&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;observationally&lt;/a&gt; in &lt;tt&gt;MinShouldMatchSumScorer&lt;/tt&gt; at least after the use of the two-phase iterator the &lt;tt&gt;score&lt;/tt&gt; method can no longer be called. Haven&apos;t yet looked further into the exact details.&lt;/p&gt;

&lt;p&gt;Prior to 8.6 i.e. &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.5.2/solr/contrib/ltr/src/java/org/apache/solr/ltr/feature/SolrFeature.java#L269-L294&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.5.2/solr/contrib/ltr/src/java/org/apache/solr/ltr/feature/SolrFeature.java#L269-L294&lt;/a&gt; SFS did not have two-phase iterator support. I would suggest to scope of this ticket here to &lt;em&gt;re-instate the non-support&lt;/em&gt; of two-phase iteration and the &lt;em&gt;addition of two-phase support&lt;/em&gt; would be a separate future enhancement.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;... A real unit test would be ideal. Are there obstacles make this difficult?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree. &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.7.0/solr/contrib/ltr/src/test/org/apache/solr/ltr/feature/TestEdisMaxSolrFeature.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.7.0/solr/contrib/ltr/src/test/org/apache/solr/ltr/feature/TestEdisMaxSolrFeature.java&lt;/a&gt; is an existing test that could be extended or a new test similar to it could be created. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=florin.babes&quot; class=&quot;user-hover&quot; rel=&quot;florin.babes&quot;&gt;florin.babes&lt;/a&gt; and/or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dizzu333&quot; class=&quot;user-hover&quot; rel=&quot;dizzu333&quot;&gt;dizzu333&lt;/a&gt; would you be interested in having a go at that?&lt;/p&gt;</comment>
                            <comment id="17264219" author="florin.babes" created="Wed, 13 Jan 2021 15:40:19 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt;, I will try to create a test for that issue.&#160;I will try to finish it next week because tomorrow I will go on vacation for a few days.&lt;/p&gt;</comment>
                            <comment id="17264619" author="florin.babes" created="Thu, 14 Jan 2021 06:09:35 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt;. I&apos;ve created a test to reproduce the issue here &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/2201&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/2201&lt;/a&gt;&#160;.&lt;/p&gt;</comment>
                            <comment id="17264773" author="jira-bot" created="Thu, 14 Jan 2021 10:44:49 +0000"  >&lt;p&gt;Commit f285f02c8968c30a149ba3c3462a42403fd4d069 in lucene-solr&apos;s branch refs/heads/master from Florin Babes&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=f285f02&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=f285f02&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15071&quot; title=&quot;Bug on LTR when using solr 8.6.3 - index out of bounds DisiPriorityQueue.add(DisiPriorityQueue.java:102)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15071&quot;&gt;&lt;del&gt;SOLR-15071&lt;/del&gt;&lt;/a&gt;: add TestEdisMaxSolrFeature.testEdisMaxSolrFeatureCustomMM() test case (#2201)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;add test case for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15071&quot; title=&quot;Bug on LTR when using solr 8.6.3 - index out of bounds DisiPriorityQueue.add(DisiPriorityQueue.java:102)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15071&quot;&gt;&lt;del&gt;SOLR-15071&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;add temporary @Ignore to be removed when the fix is committed&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Co-authored-by: Florin Babes &amp;lt;florin.babes@emag.ro&amp;gt;&lt;br/&gt;
Co-authored-by: Christine Poerschke &amp;lt;cpoerschke@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17264774" author="jira-bot" created="Thu, 14 Jan 2021 10:44:50 +0000"  >&lt;p&gt;Commit f285f02c8968c30a149ba3c3462a42403fd4d069 in lucene-solr&apos;s branch refs/heads/master from Florin Babes&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=f285f02&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=f285f02&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15071&quot; title=&quot;Bug on LTR when using solr 8.6.3 - index out of bounds DisiPriorityQueue.add(DisiPriorityQueue.java:102)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15071&quot;&gt;&lt;del&gt;SOLR-15071&lt;/del&gt;&lt;/a&gt;: add TestEdisMaxSolrFeature.testEdisMaxSolrFeatureCustomMM() test case (#2201)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;add test case for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15071&quot; title=&quot;Bug on LTR when using solr 8.6.3 - index out of bounds DisiPriorityQueue.add(DisiPriorityQueue.java:102)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15071&quot;&gt;&lt;del&gt;SOLR-15071&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;add temporary @Ignore to be removed when the fix is committed&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Co-authored-by: Florin Babes &amp;lt;florin.babes@emag.ro&amp;gt;&lt;br/&gt;
Co-authored-by: Christine Poerschke &amp;lt;cpoerschke@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17264968" author="jira-bot" created="Thu, 14 Jan 2021 15:44:40 +0000"  >&lt;p&gt;Commit ed89eae3e7ad6f952ebda0d22f5aeb268894aa5d in lucene-solr&apos;s branch refs/heads/branch_8x from Florin Babes&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=ed89eae&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=ed89eae&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15071&quot; title=&quot;Bug on LTR when using solr 8.6.3 - index out of bounds DisiPriorityQueue.add(DisiPriorityQueue.java:102)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15071&quot;&gt;&lt;del&gt;SOLR-15071&lt;/del&gt;&lt;/a&gt;: add TestEdisMaxSolrFeature.testEdisMaxSolrFeatureCustomMM() test case (#2201)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;add test case for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15071&quot; title=&quot;Bug on LTR when using solr 8.6.3 - index out of bounds DisiPriorityQueue.add(DisiPriorityQueue.java:102)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15071&quot;&gt;&lt;del&gt;SOLR-15071&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;add temporary @Ignore to be removed when the fix is committed&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Co-authored-by: Florin Babes &amp;lt;florin.babes@emag.ro&amp;gt;&lt;br/&gt;
Co-authored-by: Christine Poerschke &amp;lt;cpoerschke@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17264969" author="jira-bot" created="Thu, 14 Jan 2021 15:44:41 +0000"  >&lt;p&gt;Commit ed89eae3e7ad6f952ebda0d22f5aeb268894aa5d in lucene-solr&apos;s branch refs/heads/branch_8x from Florin Babes&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=ed89eae&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=ed89eae&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15071&quot; title=&quot;Bug on LTR when using solr 8.6.3 - index out of bounds DisiPriorityQueue.add(DisiPriorityQueue.java:102)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15071&quot;&gt;&lt;del&gt;SOLR-15071&lt;/del&gt;&lt;/a&gt;: add TestEdisMaxSolrFeature.testEdisMaxSolrFeatureCustomMM() test case (#2201)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;add test case for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15071&quot; title=&quot;Bug on LTR when using solr 8.6.3 - index out of bounds DisiPriorityQueue.add(DisiPriorityQueue.java:102)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15071&quot;&gt;&lt;del&gt;SOLR-15071&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;add temporary @Ignore to be removed when the fix is committed&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Co-authored-by: Florin Babes &amp;lt;florin.babes@emag.ro&amp;gt;&lt;br/&gt;
Co-authored-by: Christine Poerschke &amp;lt;cpoerschke@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17270126" author="jira-bot" created="Fri, 22 Jan 2021 13:35:25 +0000"  >&lt;p&gt;Commit 32e95ddb3f2542fbe2cb116ac58453182149f07b in lucene-solr&apos;s branch refs/heads/master from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=32e95dd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=32e95dd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15071&quot; title=&quot;Bug on LTR when using solr 8.6.3 - index out of bounds DisiPriorityQueue.add(DisiPriorityQueue.java:102)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15071&quot;&gt;&lt;del&gt;SOLR-15071&lt;/del&gt;&lt;/a&gt;: Fix ArrayIndexOutOfBoundsException in contrib/ltr SolrFeatureScorer (#2196)&lt;/p&gt;
</comment>
                            <comment id="17270163" author="jira-bot" created="Fri, 22 Jan 2021 14:18:51 +0000"  >&lt;p&gt;Commit db95a292725c480b71e9ec8c05a54b60d32d55f6 in lucene-solr&apos;s branch refs/heads/branch_8x from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=db95a29&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=db95a29&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15071&quot; title=&quot;Bug on LTR when using solr 8.6.3 - index out of bounds DisiPriorityQueue.add(DisiPriorityQueue.java:102)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15071&quot;&gt;&lt;del&gt;SOLR-15071&lt;/del&gt;&lt;/a&gt;: Fix ArrayIndexOutOfBoundsException in contrib/ltr SolrFeatureScorer (#2196)&lt;/p&gt;
</comment>
                            <comment id="17270174" author="jira-bot" created="Fri, 22 Jan 2021 14:30:05 +0000"  >&lt;p&gt;Commit e2e375c397701b6bd3d5c55f7e48bc3dc465f9ee in lucene-solr&apos;s branch refs/heads/branch_8_8 from Florin Babes&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=e2e375c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=e2e375c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15071&quot; title=&quot;Bug on LTR when using solr 8.6.3 - index out of bounds DisiPriorityQueue.add(DisiPriorityQueue.java:102)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15071&quot;&gt;&lt;del&gt;SOLR-15071&lt;/del&gt;&lt;/a&gt;: add TestEdisMaxSolrFeature.testEdisMaxSolrFeatureCustomMM() test case (#2201)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;add test case for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15071&quot; title=&quot;Bug on LTR when using solr 8.6.3 - index out of bounds DisiPriorityQueue.add(DisiPriorityQueue.java:102)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15071&quot;&gt;&lt;del&gt;SOLR-15071&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;add temporary @Ignore to be removed when the fix is committed&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Co-authored-by: Florin Babes &amp;lt;florin.babes@emag.ro&amp;gt;&lt;br/&gt;
Co-authored-by: Christine Poerschke &amp;lt;cpoerschke@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17270175" author="jira-bot" created="Fri, 22 Jan 2021 14:30:07 +0000"  >&lt;p&gt;Commit e2e375c397701b6bd3d5c55f7e48bc3dc465f9ee in lucene-solr&apos;s branch refs/heads/branch_8_8 from Florin Babes&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=e2e375c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=e2e375c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15071&quot; title=&quot;Bug on LTR when using solr 8.6.3 - index out of bounds DisiPriorityQueue.add(DisiPriorityQueue.java:102)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15071&quot;&gt;&lt;del&gt;SOLR-15071&lt;/del&gt;&lt;/a&gt;: add TestEdisMaxSolrFeature.testEdisMaxSolrFeatureCustomMM() test case (#2201)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;add test case for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15071&quot; title=&quot;Bug on LTR when using solr 8.6.3 - index out of bounds DisiPriorityQueue.add(DisiPriorityQueue.java:102)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15071&quot;&gt;&lt;del&gt;SOLR-15071&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;add temporary @Ignore to be removed when the fix is committed&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Co-authored-by: Florin Babes &amp;lt;florin.babes@emag.ro&amp;gt;&lt;br/&gt;
Co-authored-by: Christine Poerschke &amp;lt;cpoerschke@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17270176" author="jira-bot" created="Fri, 22 Jan 2021 14:30:09 +0000"  >&lt;p&gt;Commit 3046bcf608fb6bdd6fe8fcd5fd7213103e802c9d in lucene-solr&apos;s branch refs/heads/branch_8_8 from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=3046bcf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=3046bcf&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15071&quot; title=&quot;Bug on LTR when using solr 8.6.3 - index out of bounds DisiPriorityQueue.add(DisiPriorityQueue.java:102)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15071&quot;&gt;&lt;del&gt;SOLR-15071&lt;/del&gt;&lt;/a&gt;: Fix ArrayIndexOutOfBoundsException in contrib/ltr SolrFeatureScorer (#2196)&lt;/p&gt;
</comment>
                            <comment id="17270197" author="cpoerschke" created="Fri, 22 Jan 2021 15:04:57 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt; for the PR reviews!&lt;/p&gt;

&lt;p&gt;As per above the changes have been committed to master, branch_8x and branch_8_8 branches.&lt;/p&gt;

&lt;p&gt; I&apos;ll keep this ticket open until it&apos;s known if the fix will be included in 8.8.0 or not. If not then the CHANGES.txt entry will need to be moved out of the 8.8.0 section and the &quot;Fix Version&quot; attributes of the JIRA be updated here.&lt;/p&gt;</comment>
                            <comment id="17271572" author="cpoerschke" created="Mon, 25 Jan 2021 17:52:22 +0000"  >&lt;p&gt;Thanks everyone!&lt;/p&gt;</comment>
                            <comment id="17535603" author="janhoy" created="Thu, 12 May 2022 00:26:46 +0000"  >&lt;p&gt;Closing after the 9.0.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13425000">SOLR-15958</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13294080">SOLR-14364</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13295815">SOLR-14378</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13018526" name="featurestore+model+sample_documents.zip" size="242919" author="dizzu333" created="Mon, 11 Jan 2021 14:02:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mbhs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>