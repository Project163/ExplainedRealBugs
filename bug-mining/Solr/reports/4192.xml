<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:38:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-13413] jetty IdleTimeout bugs with Http2SolrClient, cause sprious timeouts on intranode requests</title>
                <link>https://issues.apache.org/jira/browse/SOLR-13413</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;There is evidence in some recent jenkins failures that we may have some manor of bug in our http2 client/server code that can cause intra-node query requests to stall / timeout non-reproducibly.&lt;/p&gt;

&lt;p&gt;In at least one known case, forcing the jetty &amp;amp; SolrClients used in the test to use http1.1, seems to prevent these test failures.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13228973">SOLR-13413</key>
            <summary>jetty IdleTimeout bugs with Http2SolrClient, cause sprious timeouts on intranode requests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="caomanhdat">Cao Manh Dat</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Apr 2019 23:37:08 +0000</created>
                <updated>Tue, 4 Aug 2020 13:30:45 +0000</updated>
                            <resolved>Tue, 18 Jun 2019 10:26:37 +0000</resolved>
                                    <version>8.0</version>
                                    <fixVersion>8.2</fixVersion>
                    <fixVersion>9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16821564" author="hossman" created="Thu, 18 Apr 2019 23:39:34 +0000"  >
&lt;p&gt;Here&apos;s the backstory which lead me to this hypothosis...&lt;/p&gt;


&lt;p&gt;I&apos;ve been investigating jenkins failures in TestDistributedStatsComponentCardinality &amp;#8211; which don&apos;t reproduce reliably &amp;#8211; that manifest as request timeout during intranode communication.&lt;/p&gt;

&lt;p&gt;(Side note: the failures manifest as response vs control comparisons assertion failures, due to some weird oddity in the way intranode timeouts get propogated back to the original client &amp;#8211; evidently as &quot;successful&quot; responsess w/status=200)&lt;/p&gt;

&lt;p&gt;Example from a recent jenkins failure to clarify exactly what these failures look like...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
   [junit4]   2&amp;gt; 2030123 ERROR (qtp1670559074-38749) [    x:collection1] o.a.s.h.RequestHandlerBase org.apache.solr.client.solrj.impl.BaseHttpSolrCl
ient$RemoteSolrException: Error from server at null: parsing error
   [junit4]   2&amp;gt;        at org.apache.solr.client.solrj.impl.Http2SolrClient.processErrorsAndResponse(Http2SolrClient.java:689)
   [junit4]   2&amp;gt;        at org.apache.solr.client.solrj.impl.Http2SolrClient.request(Http2SolrClient.java:400)
   [junit4]   2&amp;gt;        at org.apache.solr.client.solrj.impl.Http2SolrClient.request(Http2SolrClient.java:739)
   [junit4]   2&amp;gt;        at org.apache.solr.client.solrj.impl.LBSolrClient.doRequest(LBSolrClient.java:368)
   [junit4]   2&amp;gt;        at org.apache.solr.client.solrj.impl.LBSolrClient.request(LBSolrClient.java:296)
   [junit4]   2&amp;gt;        at org.apache.solr.handler.component.HttpShardHandlerFactory.makeLoadBalancedRequest(HttpShardHandlerFactory.java:308)
   [junit4]   2&amp;gt;        at org.apache.solr.handler.component.HttpShardHandler.lambda$submit$0(HttpShardHandler.java:190)
   [junit4]   2&amp;gt;        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
   [junit4]   2&amp;gt;        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
   [junit4]   2&amp;gt;        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
   [junit4]   2&amp;gt;        at com.codahale.metrics.InstrumentedExecutorService$InstrumentedRunnable.run(InstrumentedExecutorService.java:176)
   [junit4]   2&amp;gt;        at org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.lambda$execute$0(ExecutorUtil.java:209)
   [junit4]   2&amp;gt;        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
   [junit4]   2&amp;gt;        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
   [junit4]   2&amp;gt;        at java.base/java.lang.Thread.run(Thread.java:834)
   [junit4]   2&amp;gt; Caused by: org.apache.solr.common.SolrException: parsing error
   [junit4]   2&amp;gt;        at org.apache.solr.client.solrj.impl.BinaryResponseParser.processResponse(BinaryResponseParser.java:52)
   [junit4]   2&amp;gt;        at org.apache.solr.client.solrj.impl.Http2SolrClient.processErrorsAndResponse(Http2SolrClient.java:687)
   [junit4]   2&amp;gt;        ... 14 more
   [junit4]   2&amp;gt; Caused by: java.io.IOException: java.util.concurrent.TimeoutException: idle_timeout
   [junit4]   2&amp;gt;        at org.eclipse.jetty.client.util.InputStreamResponseListener$Input.toIOException(InputStreamResponseListener.java:345)
   [junit4]   2&amp;gt;        at org.eclipse.jetty.client.util.InputStreamResponseListener$Input.read(InputStreamResponseListener.java:313)
   [junit4]   2&amp;gt;        at org.apache.solr.common.util.FastInputStream.readWrappedStream(FastInputStream.java:90)
   [junit4]   2&amp;gt;        at org.apache.solr.common.util.FastInputStream.refill(FastInputStream.java:99)
   [junit4]   2&amp;gt;        at org.apache.solr.common.util.FastInputStream.readByte(FastInputStream.java:217)
   [junit4]   2&amp;gt;        at org.apache.solr.common.util.JavaBinCodec._init(JavaBinCodec.java:208)
   [junit4]   2&amp;gt;        at org.apache.solr.common.util.JavaBinCodec.initRead(JavaBinCodec.java:199)
   [junit4]   2&amp;gt;        at org.apache.solr.common.util.JavaBinCodec.unmarshal(JavaBinCodec.java:192)
   [junit4]   2&amp;gt;        at org.apache.solr.client.solrj.impl.BinaryResponseParser.processResponse(BinaryResponseParser.java:50)
   [junit4]   2&amp;gt;        ... 15 more
   [junit4]   2&amp;gt; Caused by: java.util.concurrent.TimeoutException: idle_timeout
   [junit4]   2&amp;gt;        at org.eclipse.jetty.http2.client.http.HttpConnectionOverHTTP2.onIdleTimeout(HttpConnectionOverHTTP2.java:126)
   [junit4]   2&amp;gt;        at org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2$SessionListenerPromise.onIdleTimeout(HttpClientTransportOverHTTP2.java:243)
   [junit4]   2&amp;gt;        at org.eclipse.jetty.http2.HTTP2Session.notifyIdleTimeout(HTTP2Session.java:1166)
   [junit4]   2&amp;gt;        at org.eclipse.jetty.http2.HTTP2Session.onIdleTimeout(HTTP2Session.java:1004)
   [junit4]   2&amp;gt;        at org.eclipse.jetty.http2.HTTP2Connection.onIdleExpired(HTTP2Connection.java:151)
   [junit4]   2&amp;gt;        at org.eclipse.jetty.io.AbstractEndPoint.onIdleExpired(AbstractEndPoint.java:401)
   [junit4]   2&amp;gt;        at org.eclipse.jetty.io.IdleTimeout.checkIdleTimeout(IdleTimeout.java:166)
   [junit4]   2&amp;gt;        at org.eclipse.jetty.io.IdleTimeout$1.run(IdleTimeout.java:50)
   [junit4]   2&amp;gt;        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
   [junit4]   2&amp;gt;        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
   [junit4]   2&amp;gt;        at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
   [junit4]   2&amp;gt;        ... 3 more
   [junit4]   2&amp;gt; 
   [junit4]   2&amp;gt; 2030123 INFO  (qtp1670559074-38749) [    x:collection1] o.a.s.c.S.Request [collection1]  webapp=/_pq/go path=/select params={q=id_i1:[4381+TO+9885]&amp;amp;shards=http://127.0.0.1:43827/_pq/go/collection1|[ff01::213]:33332/_pq/go&amp;amp;stats=true&amp;amp;rows=0&amp;amp;wt=javabin&amp;amp;version=2&amp;amp;stats.field={!cardinality%3D0.3431016784329878+key%3Dlow_int_i}int_i&amp;amp;stats.field={!cardinality%3D0.3431016784329878+key%3Dlow_int_i_prehashed_l+hllPreHashed%3Dtrue}int_i_prehashed_l&amp;amp;stats.field={!cardinality%3D0.8431016784329878+key%3Dhigh_int_i}int_i&amp;amp;stats.field={!cardinality%3D0.8431016784329878+key%3Dhigh_int_i_prehashed_l+hllPreHashed%3Dtrue}int_i_prehashed_l&amp;amp;stats.field={!cardinality%3D0.3431016784329878+key%3Dlow_long_l}long_l&amp;amp;stats.field={!cardinality%3D0.3431016784329878+key%3Dlow_long_l_prehashed_l+hllPreHashed%3Dtrue}long_l_prehashed_l&amp;amp;stats.field={!cardinality%3D0.8431016784329878+key%3Dhigh_long_l}long_l&amp;amp;stats.field={!cardinality%3D0.8431016784329878+key%3Dhigh_long_l_prehashed_l+hllPreHashed%3Dtrue}long_l_prehashed_l&amp;amp;stats.field={!cardinality%3D0.3431016784329878+key%3Dlow_string_s}string_s&amp;amp;stats.field={!cardinality%3D0.3431016784329878+key%3Dlow_string_s_prehashed_l+hllPreHashed%3Dtrue}string_s_prehashed_l&amp;amp;stats.field={!cardinality%3D0.8431016784329878+key%3Dhigh_string_s}string_s&amp;amp;stats.field={!cardinality%3D0.8431016784329878+key%3Dhigh_string_s_prehashed_l+hllPreHashed%3Dtrue}string_s_prehashed_l} status=200 QTime=15019
   [junit4]   2&amp;gt; 2030123 WARN  (qtp1670559074-38749) [    x:collection1] o.a.s.c.S.SlowRequest slow: [collection1]  webapp=/_pq/go path=/select params={q=id_i1:[4381+TO+9885]&amp;amp;shards=http://127.0.0.1:43827/_pq/go/collection1|[ff01::213]:33332/_pq/go&amp;amp;stats=true&amp;amp;rows=0&amp;amp;wt=javabin&amp;amp;version=2&amp;amp;stats.field={!cardinality%3D0.3431016784329878+key%3Dlow_int_i}int_i&amp;amp;stats.field={!cardinality%3D0.3431016784329878+key%3Dlow_int_i_prehashed_l+hllPreHashed%3Dtrue}int_i_prehashed_l&amp;amp;stats.field={!cardinality%3D0.8431016784329878+key%3Dhigh_int_i}int_i&amp;amp;stats.field={!cardinality%3D0.8431016784329878+key%3Dhigh_int_i_prehashed_l+hllPreHashed%3Dtrue}int_i_prehashed_l&amp;amp;stats.field={!cardinality%3D0.3431016784329878+key%3Dlow_long_l}long_l&amp;amp;stats.field={!cardinality%3D0.3431016784329878+key%3Dlow_long_l_prehashed_l+hllPreHashed%3Dtrue}long_l_prehashed_l&amp;amp;stats.field={!cardinality%3D0.8431016784329878+key%3Dhigh_long_l}long_l&amp;amp;stats.field={!cardinality%3D0.8431016784329878+key%3Dhigh_long_l_prehashed_l+hllPreHashed%3Dtrue}long_l_prehashed_l&amp;amp;stats.field={!cardinality%3D0.3431016784329878+key%3Dlow_string_s}string_s&amp;amp;stats.field={!cardinality%3D0.3431016784329878+key%3Dlow_string_s_prehashed_l+hllPreHashed%3Dtrue}string_s_prehashed_l&amp;amp;stats.field={!cardinality%3D0.8431016784329878+key%3Dhigh_string_s}string_s&amp;amp;stats.field={!cardinality%3D0.8431016784329878+key%3Dhigh_string_s_prehashed_l+hllPreHashed%3Dtrue}string_s_prehashed_l} status=200 QTime=15019
   [junit4]   2&amp;gt; 2030124 ERROR (TEST-TestDistributedStatsComponentCardinality.test-seed#[6C9B73533DC6E7BC]) [    ] o.a.s.BaseDistributedSearchTestCase Mismatched responses:
   [junit4]   2&amp;gt; {responseHeader={status=200,QTime=15019},error={metadata={error-class=org.apache.solr.client.solrj.impl.BaseHttpSolrClient$RemoteSolrException,root-error-class=java.util.concurrent.TimeoutException},msg=Error from server at null: parsing error,code=200}}
   [junit4]   2&amp;gt; {responseHeader={status=0,QTime=9},response={numFound=5505,start=0,docs=[]},stats={stats_fields={low_int_i={cardinality=5468},low_int_i_prehashed_l={cardinality=5560},high_int_i={cardinality=5505},high_int_i_prehashed_l={cardinality=5505},low_long_l={cardinality=5560},low_long_l_prehashed_l={cardinality=5560},high_long_l={cardinality=5505},high_long_l_prehashed_l={cardinality=5505},low_string_s={cardinality=5509},low_string_s_prehashed_l={cardinality=5509},high_string_s={cardinality=5505},high_string_s_prehashed_l={cardinality=5505}}}}
   [junit4]   2&amp;gt; 2030124 INFO  (TEST-TestDistributedStatsComponentCardinality.test-seed#[6C9B73533DC6E7BC]) [    ] o.a.s.SolrTestCaseJ4 ###Ending test

... test goes through shutdown...

  [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=TestDistributedStatsComponentCardinality -Dtests.method=test -Dtests.seed=6C9B73533DC6E7BC -Dtests.multiplier=3 -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=ug-CN -Dtests.timezone=Asia/Dushanbe -Dtests.asserts=true -Dtests.file.encoding=US-ASCII
   [junit4] FAILURE 37.1s J1 | TestDistributedStatsComponentCardinality.test &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: junit.framework.AssertionFailedError: .responseHeader.status:200!=0
   [junit4]    &amp;gt;        at __randomizedtesting.SeedInfo.seed([6C9B73533DC6E7BC:E4CF4C89933A8A44]:0)
   [junit4]    &amp;gt;        at junit.framework.Assert.fail(Assert.java:57)
   [junit4]    &amp;gt;        at org.apache.solr.BaseDistributedSearchTestCase.compareSolrResponses(BaseDistributedSearchTestCase.java:999)
   [junit4]    &amp;gt;        at org.apache.solr.BaseDistributedSearchTestCase.compareResponses(BaseDistributedSearchTestCase.java:1026)
   [junit4]    &amp;gt;        at org.apache.solr.BaseDistributedSearchTestCase.query(BaseDistributedSearchTestCase.java:680)
   [junit4]    &amp;gt;        at org.apache.solr.BaseDistributedSearchTestCase.query(BaseDistributedSearchTestCase.java:643)
   [junit4]    &amp;gt;        at org.apache.solr.handler.component.TestDistributedStatsComponentCardinality.test(TestDistributedStatsComponentCardinality.java:192)
   [junit4]    &amp;gt;        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
   [junit4]    &amp;gt;        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
   [junit4]    &amp;gt;        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
   [junit4]    &amp;gt;        at java.base/java.lang.reflect.Method.invoke(Method.java:566)
   [junit4]    &amp;gt;        at org.apache.solr.BaseDistributedSearchTestCase$ShardsRepeatRule$ShardsFixedStatement.callStatement(BaseDistributedSearchTestCase.java:1082)
   [junit4]    &amp;gt;        at org.apache.solr.BaseDistributedSearchTestCase$ShardsRepeatRule$ShardsStatement.evaluate(BaseDistributedSearchTestCase.java:1054)
   [junit4]    &amp;gt;        at java.base/java.lang.Thread.run(Thread.java:834)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Things to Note:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;the odd status=200 which propogates back to the client&lt;/li&gt;
	&lt;li&gt;the QTime=15019&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Now I should mention for those not familiar with this test:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;TestDistributedStatsComponentCardinality extends BaseDistributedSearchTestCase&lt;/li&gt;
	&lt;li&gt;it builds a large multi-shard collection
	&lt;ul&gt;
		&lt;li&gt;which BaseDistributedSearchTestCase duplicates into a single core control collection&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;it hammers the collections with many randomixed complex stats+cardinality (oie: HLL) requests
	&lt;ul&gt;
		&lt;li&gt;which BaseDistributedSearchTestCase compares against the results from the single core control collection&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;the HLL requests have to do a lot of processing on each node, and send a lot of serialized data back to the coordinator node.&lt;/li&gt;
	&lt;li&gt;Even when a given seed does reproduce with a similar &lt;em&gt;looking&lt;/em&gt; failure, the logs invariably show that the failure came from a completely differnet request&lt;/li&gt;
&lt;/ol&gt;



&lt;p&gt;At first I speculated that for some seeds/randomized values, we might be getting randomized requests where some of the cardinality+accuracy params were complex enough that the HLL computation could take too long to compute on a jenkins machine (or would create an abnormally large response body) and would exceed the low socketTimeout values used by the test scaffolding &amp;#8211; but even when I reduced the complexity of the requests, and/or increased the socket timeouts, the non-reproducible failures still seemed to happen just as frequently / unpredictibly.&lt;/p&gt;

&lt;p&gt;That got me looking back at failures like the one above (or more specifically: similar failures I encountered locally on my machine) and got me noting exactly which randomly generated req/params were causing the timeout/failures.   Re-running those reproduce lines over and over and looking for the exact same randomly generated query that that was so &quot;slow&quot; it caused failures in the first run, would typically only take a few ms in subsequent runs.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;At that point something &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krisden&quot; class=&quot;user-hover&quot; rel=&quot;krisden&quot;&gt;krisden&lt;/a&gt; mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13389&quot; title=&quot;rectify discrepencies in socket (and connect) timeout values used throughout the code and tests - probably helping to reduce TimeoutExceptions in tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13389&quot;&gt;SOLR-13389&lt;/a&gt; popped into my head...&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;This is just conjecture, but I think there might be some weirdness with the HTTP2 handling of sockets compared to HTTP 1.1. I just have that hunch based on some of the errors I&apos;ve seen.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That lead me to experimenting w/the attached nocommit_TestDistributedStatsComponentCardinality_trivial-no-http2.patch &amp;#8211; which forces all &lt;tt&gt;client&amp;lt;&amp;#45;&amp;gt;(node&amp;lt;&amp;#45;&amp;gt;node)&lt;/tt&gt; communication to use http1.1 &amp;#8211; which seemed to &quot;fix&quot; these types of failures.&lt;/p&gt;

&lt;p&gt;For example, this is failing seed I encountered on my local machine while beasting with tests.multiplier=2 tests.nightly=true ...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ant test  -Dtestcase=TestDistributedStatsComponentCardinality -Dtests.method=test -Dtests.seed=423C6CB5EC79E8B7 -Dtests.multiplier=2 -Dtests.nightly=true -Dtests.slow=true -Dtests.badapples=true -Dtests.locale=zh-Hans -Dtests.timezone=Africa/Abidjan -Dtests.asserts=true -Dtests.file.encoding=UTF-8
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...w/master unpatched, beasting this full reproduce line is almost garunteed to fail in the first 1-2 rounds (although which query it gets to &amp;#8211; in it&apos;s random sequence &amp;#8211; that times out &amp;amp; triggers the failure is different every time).  But with the attached patch applied, I can beast 30+ runs of this seed w/o seeing any problems.&lt;/p&gt;

&lt;p&gt;This seems like a strong indication that something fishy is going on in the HTTP2 code?&lt;/p&gt;</comment>
                            <comment id="16822971" author="jira-bot" created="Mon, 22 Apr 2019 09:40:42 +0000"  >&lt;p&gt;Commit c5339888749200a95e4177ff6ec9413ab83861e5 in lucene-solr&apos;s branch refs/heads/master from Cao Manh Dat&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=c533988&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=c533988&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13413&quot; title=&quot;jetty IdleTimeout bugs with Http2SolrClient, cause sprious timeouts on intranode requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13413&quot;&gt;&lt;del&gt;SOLR-13413&lt;/del&gt;&lt;/a&gt;: Adding debug log for HttpConnection&lt;/p&gt;</comment>
                            <comment id="16836259" author="caomanhdat" created="Thu, 9 May 2019 10:06:53 +0000"  >&lt;p&gt;The problem is solved by &lt;a href=&quot;https://github.com/eclipse/jetty.project/issues/3605&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/eclipse/jetty.project/issues/3605&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16836386" author="risdenk" created="Thu, 9 May 2019 13:37:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=caomanhdat&quot; class=&quot;user-hover&quot; rel=&quot;caomanhdat&quot;&gt;caomanhdat&lt;/a&gt; - thanks for tracking this down!&lt;/p&gt;</comment>
                            <comment id="16837273" author="gus_heck" created="Fri, 10 May 2019 13:19:10 +0000"  >&lt;p&gt;I&apos;ve seen this timeout in client logs so this is a real bug in the system, existing in 8.0.&lt;/p&gt;</comment>
                            <comment id="16855944" author="hossman" created="Tue, 4 Jun 2019 17:45:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=caomanhdat&quot; class=&quot;user-hover&quot; rel=&quot;caomanhdat&quot;&gt;caomanhdat&lt;/a&gt;: do you have a grasp on which version of jetty will have this fix and/or when it will be publicly available?&lt;/p&gt;

&lt;p&gt;is there any work around we can do in solr code in the meantime? (it seemed pretty low level based on the jetty commit, but i figured i&apos;d ask)&lt;/p&gt;</comment>
                            <comment id="16855950" author="caomanhdat" created="Tue, 4 Jun 2019 17:57:26 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman&quot; class=&quot;user-hover&quot; rel=&quot;hossman&quot;&gt;hossman&lt;/a&gt;, the next release version 9.4.19 will contain the fix. But I&apos;m not sure when it will be released. &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;is there any work around we can do in solr code in the meantime? &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I can only come up with the idea of moving Jetty classes (around 5,6 classes) with fixes and use them in Solr.&lt;/p&gt;</comment>
                            <comment id="16862229" author="risdenk" created="Wed, 12 Jun 2019 15:50:33 +0000"  >&lt;p&gt;Looks like Jetty 9.4.19 was just released:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/eclipse/jetty.project/releases/tag/jetty-9.4.19.v20190610&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/eclipse/jetty.project/releases/tag/jetty-9.4.19.v20190610&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16863900" author="caomanhdat" created="Fri, 14 Jun 2019 09:53:38 +0000"  >&lt;p&gt;Attached a patch to upgrade the transport http2 module to 9.4.19 (which contains the fix). The tests passed + the Hoss&apos;s command for running the failed test also passed.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman&quot; class=&quot;user-hover&quot; rel=&quot;hossman&quot;&gt;hossman&lt;/a&gt; I&apos;m planning to commit this patch to branch_8x and master also to see the result of Jenkins run. Does that make sense?&lt;/p&gt;</comment>
                            <comment id="16863902" author="jira-bot" created="Fri, 14 Jun 2019 09:56:16 +0000"  >&lt;p&gt;Commit f26388d034fe5eadca7416aa63b509b8db2c7688 in lucene-solr&apos;s branch refs/heads/branch_8_1 from Cao Manh Dat&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=f26388d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=f26388d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13413&quot; title=&quot;jetty IdleTimeout bugs with Http2SolrClient, cause sprious timeouts on intranode requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13413&quot;&gt;&lt;del&gt;SOLR-13413&lt;/del&gt;&lt;/a&gt;: IdleTimeout with Http2SolrClient&lt;/p&gt;</comment>
                            <comment id="16868671" author="dsmiley" created="Thu, 20 Jun 2019 16:20:21 +0000"  >&lt;p&gt;I think this broke precommit because you forgot the sha1 for the jar&lt;/p&gt;</comment>
                            <comment id="16872533" author="ivera" created="Tue, 25 Jun 2019 16:58:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=caomanhdat&quot; class=&quot;user-hover&quot; rel=&quot;caomanhdat&quot;&gt;caomanhdat&lt;/a&gt; yes currently the branch 8.1 is broken due to a missing sha1.&lt;/p&gt;</comment>
                            <comment id="16872946" author="jira-bot" created="Wed, 26 Jun 2019 05:52:29 +0000"  >&lt;p&gt;Commit af487d9205a18a2bcbf95e0b750fe7286f875767 in lucene-solr&apos;s branch refs/heads/branch_8_1 from Cao Manh Dat&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=af487d9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=af487d9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13413&quot; title=&quot;jetty IdleTimeout bugs with Http2SolrClient, cause sprious timeouts on intranode requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13413&quot;&gt;&lt;del&gt;SOLR-13413&lt;/del&gt;&lt;/a&gt;: Add missing sha files&lt;/p&gt;</comment>
                            <comment id="16873213" author="caomanhdat" created="Wed, 26 Jun 2019 10:52:52 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ivera&quot; class=&quot;user-hover&quot; rel=&quot;ivera&quot;&gt;ivera&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16893607" author="ivera" created="Fri, 26 Jul 2019 08:56:29 +0000"  >&lt;p&gt;Closing after the 8.2.0 release&lt;/p&gt;</comment>
                            <comment id="17170796" author="ctargett" created="Tue, 4 Aug 2020 13:30:45 +0000"  >&lt;p&gt;Removed 8.1.2 version since there was never an 8.1.2 and it&apos;s confusing.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13239076">SOLR-13541</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13222937">SOLR-13338</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12971793" name="SOLR-13413.patch" size="834" author="caomanhdat" created="Fri, 14 Jun 2019 09:52:02 +0000"/>
                            <attachment id="12966420" name="nocommit_TestDistributedStatsComponentCardinality_trivial-no-http2.patch" size="1758" author="hossman" created="Thu, 18 Apr 2019 23:39:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z01y1c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>