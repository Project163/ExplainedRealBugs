<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:02:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6693] Start script for windows fails with 32bit JRE</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6693</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;&lt;b&gt;Reproduce:&lt;/b&gt;&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Install JRE8 from www.java.com (typically &lt;tt&gt;C:\Program Files (x86)\Java\jre1.8.0_25&lt;/tt&gt;)&lt;/li&gt;
	&lt;li&gt;Run the command &lt;tt&gt;bin\solr start -V&lt;/tt&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The result is:&lt;br/&gt;
&lt;tt&gt;\Java\jre1.8.0_25\bin\java was unexpected at this time.&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Reason&lt;/b&gt;&lt;br/&gt;
This comes from bad quoting of the &lt;tt&gt;%SOLR%&lt;/tt&gt; variable. I think it&apos;s because of the parenthesis that it freaks out. I think the same would apply for a 32-bit JDK because of the (x86) in the path, but I have not tested.&lt;/p&gt;

&lt;p&gt;Tip: You can remove the line &lt;tt&gt;@ECHO OFF&lt;/tt&gt; at the top to see exactly which is the offending line&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Solution&lt;/b&gt;&lt;br/&gt;
Quoting the lines where %JAVA% is printed, e.g. instead of&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  @echo Using Java: %JAVA%
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;then use&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  @echo &quot;Using Java: %JAVA%&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is needed several places.&lt;/p&gt;</description>
                <environment>&lt;p&gt;WINDOWS 8.1&lt;/p&gt;</environment>
        <key id="12752516">SOLR-6693</key>
            <summary>Start script for windows fails with 32bit JRE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sarowe">Steven Rowe</assignee>
                                    <reporter username="janhoy">Jan H&#248;ydahl</reporter>
                        <labels>
                            <label>bin\solr.cmd</label>
                    </labels>
                <created>Mon, 3 Nov 2014 20:21:17 +0000</created>
                <updated>Mon, 9 May 2016 18:49:46 +0000</updated>
                            <resolved>Thu, 26 Feb 2015 23:06:44 +0000</resolved>
                                    <version>4.10.2</version>
                                    <fixVersion>4.10.4</fixVersion>
                    <fixVersion>5.0</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>scripts and tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="14195096" author="janhoy" created="Mon, 3 Nov 2014 21:13:16 +0000"  >&lt;p&gt;After fixing the echo problems, the next hurdle occurs:&lt;br/&gt;
&lt;tt&gt;Java 1.7 or later is required to run Solr.&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Even if I have Java8 (32bit). After some debugging, I found that the syntax &lt;tt&gt;-version:x.y&lt;/tt&gt; does not work on 32-bit java for Windows, it prints the error even if you have the right version.&lt;/p&gt;

&lt;p&gt;So the question then is, should the script enforce 64bit Java and print a more useful message if not found? Or is there a way to fix the version testing under 32-bit Java on Windows? It would perhaps be good to print a warning for 32-bit Java since you should use 64bit if possible&lt;/p&gt;</comment>
                            <comment id="14195893" author="dancollins" created="Tue, 4 Nov 2014 08:51:28 +0000"  >&lt;p&gt;Jan, quoting issue aside, the &lt;tt&gt;-version&lt;/tt&gt; syntax does seem to work in Windows even for 32-bit JVMs?&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;C:\Users\dcollins53&amp;gt;&quot;C:\Program Files (x86)\Java\jre1.8.0_20\bin\java&quot; -version:1.8 -version
java version &quot;1.8.0_20&quot;
Java(TM) SE Runtime Environment (build 1.8.0_20-b26)
Java HotSpot(TM) Client VM (build 25.20-b23, mixed mode)

C:\Users\dcollins53&amp;gt;&quot;C:\Program Files\Java\jre1.8.0_20\bin\java&quot; -version:1.8 -version
java version &quot;1.8.0_20&quot;
Java(TM) SE Runtime Environment (build 1.8.0_20-b26)
Java HotSpot(TM) 64-Bit Server VM (build 25.20-b23, mixed mode)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I confess I don&apos;t have any Java 7 JVMs any more, but Java 8 32-bit does seem to be printing the right output.  Whether the &lt;tt&gt;solr.cmd&lt;/tt&gt; script is handling it correctly, I haven&apos;t checked, but it should be possible to get that to work.&lt;/p&gt;</comment>
                            <comment id="14196029" author="janhoy" created="Tue, 4 Nov 2014 11:53:30 +0000"  >&lt;p&gt;On my windows 8.1 (running in VmWare on my Mac) I get&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;C:\&amp;gt;&quot;C:\Program Files (x86)\Java\jdk1.8.0_25\bin\java&quot; -version:1.8 -version
Error: Unable to locate JRE meeting specification &quot;1.8&quot;
C:\&amp;gt;&quot;C:\Program Files (x86)\Java\jdk1.8.0_25\jre\bin\java.exe&quot; -version:1.8 -version
Error: Unable to locate JRE meeting specification &quot;1.8&quot;
C:\&amp;gt;echo %JAVA_HOME%
&quot;C:\Program Files (x86)\Java\jdk1.8.0_25\jre&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14196087" author="dancollins" created="Tue, 4 Nov 2014 13:24:07 +0000"  >&lt;p&gt;Strange, I&apos;m on Windows 7, and with a slightly older Java8 VM, but I can&apos;t see why any of those things would affect the results.&lt;br/&gt;
I confess my usual resolution to any oddities with Java VMs on Windows is to uninstall and re-install the JVM (often twice!) which usually seems to &quot;deal&quot; with it... Its not pretty or scientific but it seems to help.&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14196107" author="janhoy" created="Tue, 4 Nov 2014 13:49:02 +0000"  >&lt;p&gt;On the same Windows, this works with 64bit Java&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;C:\&amp;gt;&quot;C:\Program Files\Java\jdk1.8.0\bin\java&quot; -version:1.8 -version
java version &quot;1.8.0_20&quot;
Java(TM) SE Runtime Environment (build 1.8.0_20-b26)
Java HotSpot(TM) 64-Bit Server VM (build 25.20-b23, mixed mode)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14196964" author="janhoy" created="Tue, 4 Nov 2014 22:22:06 +0000"  >&lt;p&gt;After uninstalling all Javas and reinstalling only JDK 32-bit, the version command works. Must be some Win registry mess? Btw. Do any of you know what the C:\Windows\System32\java.exe file is? Is it placed there by Oracle installer?&lt;/p&gt;</comment>
                            <comment id="14196977" author="markrmiller@gmail.com" created="Tue, 4 Nov 2014 22:28:47 +0000"  >&lt;p&gt;On a bit of reading, I believe it&apos;s part of the windows jdk/jre install and that it acts like /bin/java might - it will be found on the path and it looks in the registry to launch the configured java executable.&lt;/p&gt;</comment>
                            <comment id="14196984" author="markrmiller@gmail.com" created="Tue, 4 Nov 2014 22:30:05 +0000"  >&lt;p&gt;&lt;a href=&quot;http://mindprod.com/jgloss/javaexe.html#MULTIPLES&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mindprod.com/jgloss/javaexe.html#MULTIPLES&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14197967" author="dancollins" created="Wed, 5 Nov 2014 09:13:08 +0000"  >&lt;p&gt;Yeah, I was half-joking and half-serious when I suggested JVM re-install.&lt;br/&gt;
Windows JVM installs always seem somewhat prone to needing a re-install from time to time, The &lt;tt&gt;C:\Windows\System32\java.exe&lt;/tt&gt; always seems to favour the &quot;last&quot; JVM you installed as well, so if you have (for example) a Java 7 and Java 8 JVM installed, and then you update your Java 7 JVM, that becomes the new &quot;default&quot;. You have to re-update Java 8 to update that magic version of &lt;tt&gt;java.exe&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;It always makes me glad to get back to Linux every time I have to use Windows, at least there applications get installed into directories, if they are on your path (or I explicitly run them), they get used, if they aren&apos;t, they don&apos;t.  It makes so much more sense that way &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14200043" author="janhoy" created="Thu, 6 Nov 2014 10:07:06 +0000"  >&lt;p&gt;First patch&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Fixes &lt;tt&gt;echo&lt;/tt&gt; print of variable containing unsafe chars like &lt;tt&gt;)&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Detects Java version, JRE/JDK and 32/64bit&lt;/li&gt;
	&lt;li&gt;Prints warning if 32 bit or if no support for &lt;tt&gt;-server&lt;/tt&gt; arg&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;All in all, this patch lets Windows users test Solr even if they only have a 32bit JRE installed, but the warnings will urge them to choose another JVM for production.&lt;/p&gt;</comment>
                            <comment id="14206246" author="janhoy" created="Tue, 11 Nov 2014 10:24:05 +0000"  >&lt;p&gt;Experiencing a weird behavior on a Windows where I have several JVMs installed. When calling e.g. &lt;tt&gt;&quot;C:\Program Files\Java\jdk1.6.0_45\bin\java.exe&quot; -version:1.8 -version&lt;/tt&gt; it somehow finds my 1.8 install and uses that. Shell output:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;C:\&amp;gt;&quot;C:\Program Files\Java\jdk1.6.0_45\bin\java.exe&quot; -version
java version &quot;1.6.0_45&quot;
Java(TM) SE Runtime Environment (build 1.6.0_45-b06)
Java HotSpot(TM) 64-Bit Server VM (build 20.45-b01, mixed mode)

C:\&amp;gt;&quot;C:\Program Files\Java\jdk1.6.0_45\bin\java.exe&quot; -version:1.7 -version
java version &quot;1.7.0_71&quot;
Java(TM) SE Runtime Environment (build 1.7.0_71-b14)
Java HotSpot(TM) 64-Bit Server VM (build 24.71-b01, mixed mode)

C:\&amp;gt;&quot;C:\Program Files\Java\jdk1.6.0_45\bin\java.exe&quot; -version:1.7+ -version
java version &quot;1.8.0_25&quot;
Java(TM) SE Runtime Environment (build 1.8.0_25-b18)
Java HotSpot(TM) 64-Bit Server VM (build 25.25-b02, mixed mode)

C:\&amp;gt;&quot;C:\Program Files\Java\jdk1.6.0_45\bin\java.exe&quot; -version:1.8 -version
java version &quot;1.8.0_25&quot;
Java(TM) SE Runtime Environment (build 1.8.0_25-b18)
Java HotSpot(TM) 64-Bit Server VM (build 25.25-b02, mixed mode)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So the &lt;tt&gt;-version:x.y&lt;/tt&gt; flag cannot be used to detect the version of that particular executable. Cannot reproduce this behavior on my Mac, probably because there is no central registry listing all installed Javas. So we have a few choices for Windows:&lt;/p&gt;

&lt;p&gt;A) Do not require JAVA_HOME to be set, but instead try simply calling &lt;tt&gt;java -version:1.7+&lt;/tt&gt; when starting Solr&lt;br/&gt;
B) Use JAVA_HOME and parse Java version from the -version output&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="14206293" author="jmlucjav" created="Tue, 11 Nov 2014 11:07:15 +0000"  >&lt;p&gt;I never install the JRE in my dev hosts, what I do is: install the jdk, copy the jdk dir to another place A, set JAVA_HOME pointing to A, then uninstall the jdk, this way I have several &apos;clean&apos; jdks I can use by changing JAVA_HOME and PATH, nothing in the registry (well, only browser plugin related stuff but this is another matter).&lt;/p&gt;

&lt;p&gt;With this setup of mine, the  -version:x.y syntax does not work, seems it specifically looks for a JRE:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java -version
java version &lt;span class=&quot;code-quote&quot;&gt;&quot;1.7.0_60&quot;&lt;/span&gt;
Java(TM) SE &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Environment (build 1.7.0_60-b19)
Java HotSpot(TM) 64-Bit Server VM (build 24.60-b09, mixed mode)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java -version:1.7+
Error: Unable to locate JRE meeting specification &lt;span class=&quot;code-quote&quot;&gt;&quot;1.7+&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;so if possible I would avoid using &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-version:x.y &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14206304" author="janhoy" created="Tue, 11 Nov 2014 11:16:14 +0000"  >&lt;p&gt;Proposed logic: If JAVA_HOME is set, check its version by string parsing and fail if wrong ver. If no JAVA_HOME then simply attempt &lt;tt&gt;java -version:1.7+&lt;/tt&gt; and if ok, start Solr with that option.&lt;/p&gt;</comment>
                            <comment id="14206308" author="jmlucjav" created="Tue, 11 Nov 2014 11:22:33 +0000"  >&lt;p&gt;sounds good to me&lt;/p&gt;</comment>
                            <comment id="14230544" author="thelabdude" created="Mon, 1 Dec 2014 22:07:23 +0000"  >&lt;p&gt;I&apos;ve added Java version parsing to the script to determine if specific JVM flags should be enabled, but I think we can re-use this approach to solve this issue (with a little refactoring). I can do the work, but I don&apos;t have a 32-bit windows environment to test with.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@REM Add Java version specific flags &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; needed
set JAVAVER=
set JAVA_MAJOR=
set JAVA_BUILD=0

&lt;span class=&quot;code-quote&quot;&gt;&quot;%JAVA%&quot;&lt;/span&gt; -version 2&amp;gt;&amp;amp;1 | findstr /i &lt;span class=&quot;code-quote&quot;&gt;&quot;version&quot;&lt;/span&gt; &amp;gt; javavers
set /p JAVAVEROUT=&amp;lt;javavers
del javavers
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /f &lt;span class=&quot;code-quote&quot;&gt;&quot;tokens=3&quot;&lt;/span&gt; %%g in (&lt;span class=&quot;code-quote&quot;&gt;&quot;!JAVAVEROUT!&quot;&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; (
  set JAVAVER=%%g
  set JAVAVER=!JAVAVER:&quot;=!
  &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /f &lt;span class=&quot;code-quote&quot;&gt;&quot;delims=_ tokens=1-3&quot;&lt;/span&gt; %%v in (&lt;span class=&quot;code-quote&quot;&gt;&quot;!JAVAVER!&quot;&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; (
    set JAVA_MAJOR=!JAVAVER:~0,3!
    set /a JAVA_BUILD=%%w
  )
)
IF &lt;span class=&quot;code-quote&quot;&gt;&quot;!JAVA_MAJOR!&quot;&lt;/span&gt;==&lt;span class=&quot;code-quote&quot;&gt;&quot;1.7&quot;&lt;/span&gt; (
  set &lt;span class=&quot;code-quote&quot;&gt;&quot;GC_TUNE=%GC_TUNE% -XX:CMSFullGCsBeforeCompaction=1 -XX:CMSTriggerPermRatio=80&quot;&lt;/span&gt;
  IF !JAVA_BUILD! GEQ 40 (
    IF !JAVA_BUILD! LEQ 51 (
      set &lt;span class=&quot;code-quote&quot;&gt;&quot;GC_TUNE=!GC_TUNE! -XX:-UseSuperWord&quot;&lt;/span&gt;
      @echo WARNING: Java version !JAVAVER! has known bugs with Lucene and requires the -XX:-UseSuperWord flag. Please consider upgrading your JVM.
    )
  )
)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14305203" author="chrish619" created="Wed, 4 Feb 2015 15:04:51 +0000"  >&lt;p&gt;Occurs in Windows 7, 32bit jre (or jdk), e.g. &lt;tt&gt;C:\Program Files (x86)\Java\jdk1.7.0_60&lt;/tt&gt;;&lt;/p&gt;

&lt;p&gt;It actually comes from proper escaping/encapsulation of parentheses within variables, and the nested IF&apos;s ():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;IF &lt;span class=&quot;code-quote&quot;&gt;&quot;%verbose%&quot;&lt;/span&gt;==&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; (
  @echo Using Solr root directory: %SOLR_TIP%
  @echo Using Java: %JAVA%

  &lt;span class=&quot;code-quote&quot;&gt;&quot;%JAVA%&quot;&lt;/span&gt; -version
)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A parenthesis in either %SOLR_TIP% or %JAVA% would break this code. However:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;IF &lt;span class=&quot;code-quote&quot;&gt;&quot;%verbose%&quot;&lt;/span&gt;==&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; (
  @echo Using Solr root directory: &lt;span class=&quot;code-quote&quot;&gt;&quot;%SOLR_TIP%&quot;&lt;/span&gt;
  @echo Using Java: &lt;span class=&quot;code-quote&quot;&gt;&quot;%JAVA%&quot;&lt;/span&gt;

  &lt;span class=&quot;code-quote&quot;&gt;&quot;%JAVA%&quot;&lt;/span&gt; -version
)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Does work..&lt;/p&gt;

&lt;p&gt;Also in this:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&quot;%JAVA_HOME%&quot;\bin\java -version&lt;/tt&gt; does not work in the version check, (returns help --?) however:&lt;br/&gt;
&lt;tt&gt;&quot;%JAVA_HOME%\bin\java&quot; -version&lt;/tt&gt; does.&lt;/p&gt;</comment>
                            <comment id="14305242" author="chrish619" created="Wed, 4 Feb 2015 15:20:10 +0000"  >&lt;p&gt;Attached new solr.cmd:&lt;/p&gt;

&lt;p&gt;This fixes the problems as per my previous comment:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;JRE in parenthesis directory&lt;/li&gt;
	&lt;li&gt;&quot;%JAVA_HOME%&quot;\bin\java version info&lt;/li&gt;
	&lt;li&gt;Solr in parenthesis directory&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;No requirement for JRE/JDK in 64bit environment: Program Files (x86) &lt;em&gt;is&lt;/em&gt; supported&lt;/p&gt;</comment>
                            <comment id="14305659" author="janhoy" created="Wed, 4 Feb 2015 18:21:04 +0000"  >&lt;p&gt;Thanks for the patch. Which version of Solr is it for?&lt;/p&gt;</comment>
                            <comment id="14305669" author="chrish619" created="Wed, 4 Feb 2015 18:24:19 +0000"  >&lt;p&gt;Ah, sorry... Forgot to mention.. This is for the current release of Solr... 4.10.3&lt;/p&gt;</comment>
                            <comment id="14305681" author="thelabdude" created="Wed, 4 Feb 2015 18:33:43 +0000"  >&lt;p&gt;We should get this into 5.0 ... I can migrate the patch for the solr.cmd in 5.0 unless you&apos;re going to pick it up &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=janhoy&quot; class=&quot;user-hover&quot; rel=&quot;janhoy&quot;&gt;janhoy&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14305826" author="janhoy" created="Wed, 4 Feb 2015 19:44:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt;, feel free!&lt;/p&gt;</comment>
                            <comment id="14307952" author="thelabdude" created="Thu, 5 Feb 2015 20:43:43 +0000"  >&lt;p&gt;Here&apos;s a patch for trunk that incorporates &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=janhoy&quot; class=&quot;user-hover&quot; rel=&quot;janhoy&quot;&gt;janhoy&lt;/a&gt;&apos;s patch from Nov-06 (sorry I overlooked that previously and there was some very good stuff in it) and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chrish619&quot; class=&quot;user-hover&quot; rel=&quot;chrish619&quot;&gt;chrish619&lt;/a&gt;&apos;s patch from earlier this week. It also fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7047&quot; title=&quot;solr.cmd fails if Solr installation path contains parenthesis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7047&quot;&gt;&lt;del&gt;SOLR-7047&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;We would like to get this into the 5.0 release, but I&apos;m not comfortable doing that without someone else trying this patch out in their environment. I tested with a JRE installed in &lt;tt&gt;c:\Program Files (x86)\Java\jre7&lt;/tt&gt; and solr installed in: &lt;tt&gt;c:\solr (5.0)&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Please review / try this out ASAP and let me know if there are any other issues.&lt;/p&gt;</comment>
                            <comment id="14308010" author="janhoy" created="Thu, 5 Feb 2015 21:14:05 +0000"  >&lt;p&gt;Thanks for bringing this forward, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Have not tested the patch, but please do not use the &lt;tt&gt;resolve_java_version&lt;/tt&gt; function from my earlier patch. As noted in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6693?focusedCommentId=14206246&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14206246&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this comment&lt;/a&gt; it will not test whether your specific Java is a certain version, but use the registry to see if it finds ANY Java in the system satisfying the requirements.&lt;/p&gt;

&lt;p&gt;So I propose you continue using the &lt;tt&gt;java -version&lt;/tt&gt; string parsing you started on, perhaps extending it a bit.&lt;/p&gt;</comment>
                            <comment id="14308082" author="thelabdude" created="Thu, 5 Feb 2015 22:04:33 +0000"  >&lt;p&gt;Thanks for the heads-up on the issues with &lt;tt&gt;resolve_java_version&lt;/tt&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=janhoy&quot; class=&quot;user-hover&quot; rel=&quot;janhoy&quot;&gt;janhoy&lt;/a&gt; ... From what I can tell, the best approach is to use my java -version string parsing as you suggested, but still use some of your -d64 and -server checking. Cooking up a new patch now ...&lt;/p&gt;</comment>
                            <comment id="14309287" author="thelabdude" created="Fri, 6 Feb 2015 15:18:11 +0000"  >&lt;p&gt;Updated patch that does the following:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Uses basic parsing of the output from java -version to determine the version; this addresses the issue Jan found about Windows using whatever from the registry&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Verifies java.exe exists in %JAVA_HOME%\bin&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Warns user if -server or -d64 are not supported (great addition from Jan)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Works with spaces and parens in Java and Solr paths&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;When I backport this to branch5x, I&apos;ll have to update the script to verify Java 7 instead of 8 ... Please give this a good review / test as we need to cut 5.0 ASAP.&lt;/p&gt;</comment>
                            <comment id="14312326" author="jira-bot" created="Mon, 9 Feb 2015 15:07:22 +0000"  >&lt;p&gt;Commit 1658423 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1658423&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1658423&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6693&quot; title=&quot;Start script for windows fails with 32bit JRE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6693&quot;&gt;&lt;del&gt;SOLR-6693&lt;/del&gt;&lt;/a&gt;: bin\solr.cmd doesn&apos;t support 32-bit JRE/JDK running on Windows due to parenthesis in JAVA_HOME&lt;/p&gt;</comment>
                            <comment id="14312338" author="jira-bot" created="Mon, 9 Feb 2015 15:12:29 +0000"  >&lt;p&gt;Commit 1658426 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1658426&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1658426&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6693&quot; title=&quot;Start script for windows fails with 32bit JRE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6693&quot;&gt;&lt;del&gt;SOLR-6693&lt;/del&gt;&lt;/a&gt;: bin\solr.cmd doesn&apos;t support 32-bit JRE/JDK running on Windows due to parenthesis in JAVA_HOME&lt;/p&gt;</comment>
                            <comment id="14312339" author="jira-bot" created="Mon, 9 Feb 2015 15:15:02 +0000"  >&lt;p&gt;Commit 1658428 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; in branch &apos;dev/branches/lucene_solr_5_0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1658428&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1658428&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6693&quot; title=&quot;Start script for windows fails with 32bit JRE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6693&quot;&gt;&lt;del&gt;SOLR-6693&lt;/del&gt;&lt;/a&gt;: bin\solr.cmd doesn&apos;t support 32-bit JRE/JDK running on Windows due to parenthesis in JAVA_HOME&lt;/p&gt;</comment>
                            <comment id="14332575" author="anshumg" created="Mon, 23 Feb 2015 05:00:45 +0000"  >&lt;p&gt;Bulk close after 5.0 release.&lt;/p&gt;</comment>
                            <comment id="14339355" author="steve_rowe" created="Thu, 26 Feb 2015 22:56:07 +0000"  >&lt;p&gt;Reopening to backport to 4.10.4&lt;/p&gt;</comment>
                            <comment id="14339371" author="steve_rowe" created="Thu, 26 Feb 2015 23:04:04 +0000"  >&lt;p&gt;Backported patch.&lt;/p&gt;

&lt;p&gt;I tested on Win 7 with 32-bit Oracle JDK 1.7.0_72.  Without this patch, &lt;tt&gt;bin\solr start&lt;/tt&gt; fails for me on the lucene_solr_4_10 branch in the same way as in the issue description.&lt;/p&gt;

&lt;p&gt;With this patch, under both 32-bit 1.7.0_72 and 64-bit 1.7.0_25, the following worked for me:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;bin\solr start&lt;/tt&gt; / &lt;tt&gt;bin\solr stop -all&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;bin\solr start&lt;/tt&gt; / &lt;tt&gt;bin\solr stop -p 8983&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;bin\solr start&lt;/tt&gt; / &lt;tt&gt;bin\solr start&lt;/tt&gt;    (appropriate error printed)&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;bin\solr start&lt;/tt&gt; / &lt;tt&gt;bin\solr -i&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Committing shortly.&lt;/p&gt;</comment>
                            <comment id="14339376" author="steve_rowe" created="Thu, 26 Feb 2015 23:06:44 +0000"  >&lt;p&gt;Committed to lucene_solr_4_10.&lt;/p&gt;</comment>
                            <comment id="14339379" author="jira-bot" created="Thu, 26 Feb 2015 23:08:36 +0000"  >&lt;p&gt;Commit 1662596 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; in branch &apos;dev/branches/lucene_solr_4_10&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1662596&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1662596&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6693&quot; title=&quot;Start script for windows fails with 32bit JRE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6693&quot;&gt;&lt;del&gt;SOLR-6693&lt;/del&gt;&lt;/a&gt;: bin\solr.cmd doesn&apos;t support 32-bit JRE/JDK running on Windows due to parenthesis in JAVA_HOME (merged branch_5x r1658426)&lt;/p&gt;</comment>
                            <comment id="14348909" author="mikemccand" created="Thu, 5 Mar 2015 15:36:27 +0000"  >&lt;p&gt;Bulk close for 4.10.4 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12770513">SOLR-7047</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12701194" name="SOLR-6693-lucene_solr_4_10.patch" size="12488" author="sarowe" created="Thu, 26 Feb 2015 23:04:04 +0000"/>
                            <attachment id="12697035" name="SOLR-6693.patch" size="12189" author="thelabdude" created="Fri, 6 Feb 2015 15:18:11 +0000"/>
                            <attachment id="12696857" name="SOLR-6693.patch" size="9541" author="thelabdude" created="Thu, 5 Feb 2015 20:43:43 +0000"/>
                            <attachment id="12679820" name="SOLR-6693.patch" size="4870" author="janhoy" created="Thu, 6 Nov 2014 10:07:06 +0000"/>
                            <attachment id="12696478" name="solr.cmd" size="31340" author="chrish619" created="Wed, 4 Feb 2015 15:20:10 +0000"/>
                            <attachment id="12696482" name="solr.cmd.patch" size="8826" author="chrish619" created="Wed, 4 Feb 2015 15:27:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21wqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>