<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:09:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-14892] shards.info with shards.tolerant can yield an empty key</title>
                <link>https://issues.apache.org/jira/browse/SOLR-14892</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When using shards.tolerant=true and shards.info=true when a shard isn&apos;t available (and maybe other circumstances), the shards.info section of the response may have an empty-string key child with a value that is ambiguous as to which shard(s) couldn&apos;t be reached.&lt;/p&gt;

&lt;p&gt;This problem can be revealed by modifying org.apache.solr.cloud.TestDownShardTolerantSearch#searchingShouldFailWithoutTolerantSearchSetToTrue to add shards.info and then examine the response in a debugger.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13329053">SOLR-14892</key>
            <summary>shards.info with shards.tolerant can yield an empty key</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dsmiley">David Smiley</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Sep 2020 18:44:28 +0000</created>
                <updated>Sun, 28 Apr 2024 19:22:43 +0000</updated>
                            <resolved>Thu, 21 Mar 2024 03:10:04 +0000</resolved>
                                                    <fixVersion>9.6</fixVersion>
                                    <component>search</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="8400">2h 20m</timespent>
                                <comments>
                            <comment id="17201038" author="dsmiley" created="Wed, 23 Sep 2020 18:49:03 +0000"  >&lt;p&gt;I chased this down to org.apache.solr.handler.component.HttpShardHandler#createSliceShardsStr which when given an empty list, returns an empty string. It should probably return null.  But using  But null has ripple effects in many places which assume non-null values and maybe were written without shards.tolerant in mind. Lets say it remains an empty string. SearchHandler.handleRequestBody loops over &quot;sreq.actualShards&quot; which can yield that empty string. I hoped simply &quot;continue&quot;-ing this loop on this occurrence may help but it led to some other mystery. The code involved in general here is awfully messy.&lt;/p&gt;</comment>
                            <comment id="17410468" author="matmarie" created="Mon, 6 Sep 2021 08:32:13 +0000"  >&lt;p&gt;Moreover, when there are more than one unavailable shard, that empty value is reported multiple times.&lt;br/&gt;
 As a consequence we have duplicate keys, which confuses JSON parsers.&lt;/p&gt;</comment>
                            <comment id="17821040" author="matmarie" created="Tue, 27 Feb 2024 07:56:02 +0000"  >&lt;p&gt;I updated my (years old) PR&lt;/p&gt;</comment>
                            <comment id="17829356" author="jira-bot" created="Thu, 21 Mar 2024 03:00:47 +0000"  >&lt;p&gt;Commit b04c9202bf19e477482c11170e4ecf70fc93608e in solr&apos;s branch refs/heads/main from mariemat&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=b04c9202bf1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=b04c9202bf1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14892&quot; title=&quot;shards.info with shards.tolerant can yield an empty key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14892&quot;&gt;&lt;del&gt;SOLR-14892&lt;/del&gt;&lt;/a&gt;: shards.info with shards.tolerant can yield an empty key (#286)&lt;/p&gt;

&lt;p&gt;Improvement / work-around for a bug.&lt;/p&gt;

&lt;p&gt;Co-authored-by: Mathieu Marie &amp;lt;mmarie@salesforce.com&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17829357" author="jira-bot" created="Thu, 21 Mar 2024 03:05:38 +0000"  >&lt;p&gt;Commit c331b6955867950dd3386ae1221d05f96ed7502c in solr&apos;s branch refs/heads/branch_9x from mariemat&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=c331b695586&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=c331b695586&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14892&quot; title=&quot;shards.info with shards.tolerant can yield an empty key&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14892&quot;&gt;&lt;del&gt;SOLR-14892&lt;/del&gt;&lt;/a&gt;: shards.info with shards.tolerant can yield an empty key (#286)&lt;/p&gt;

&lt;p&gt;Improvement / work-around for a bug.&lt;/p&gt;

&lt;p&gt;Co-authored-by: Mathieu Marie &amp;lt;mmarie@salesforce.com&amp;gt;&lt;br/&gt;
(cherry picked from commit b04c9202bf19e477482c11170e4ecf70fc93608e)&lt;/p&gt;</comment>
                            <comment id="17829361" author="dsmiley" created="Thu, 21 Mar 2024 03:10:04 +0000"  >&lt;p&gt;Thanks for contributing Mathieu!&lt;/p&gt;</comment>
                            <comment id="17841748" author="gus_heck" created="Sun, 28 Apr 2024 19:22:43 +0000"  >&lt;p&gt;Closing after the 9.6.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13012028" name="solr14892.png" size="207688" author="dsmiley" created="Wed, 23 Sep 2020 18:46:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 28 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0iuvc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>