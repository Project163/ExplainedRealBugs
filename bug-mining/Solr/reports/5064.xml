<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:01:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-15819] spurious failures from TestCircuitBreaker.testResponseWithCBTiming</title>
                <link>https://issues.apache.org/jira/browse/SOLR-15819</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;As seen in both jenkins runs and locally on my machine, &lt;tt&gt;TestCircuitBreaker.testResponseWithCBTiming&lt;/tt&gt; can fail in non-reproducible ways due to &quot;Circuit Breakers tripped Memory Circuit Breaker triggered as JVM heap usage values are greater than allocated threshold.Seen JVM heap memory usage 424442256 and allocated threshold 402653184&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13413723">SOLR-15819</key>
            <summary>spurious failures from TestCircuitBreaker.testResponseWithCBTiming</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="epugh">Eric Pugh</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Nov 2021 19:12:32 +0000</created>
                <updated>Fri, 17 Oct 2025 20:05:07 +0000</updated>
                            <resolved>Thu, 6 Jul 2023 16:27:13 +0000</resolved>
                                                    <fixVersion>9.3</fixVersion>
                    <fixVersion>10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17448785" author="hossman" created="Wed, 24 Nov 2021 19:21:25 +0000"  >&lt;p&gt;I am not very familiar with how the circut breakers work, or how this test is designed, but the first thing that jumps out at me when glancing at the test is that i see no reason why &lt;tt&gt;testResponseWithCBTiming&lt;/tt&gt; should even need/want a memory based breaker in effect.&lt;/p&gt;

&lt;p&gt;I see the test establishes some &lt;tt&gt;MockCircuitBreaker&lt;/tt&gt; and &lt;tt&gt;FakeMemoryPressureCircuitBreaker&lt;/tt&gt; classes that are used in test methods where they attempt to test memory based protection &amp;#8211; but there is also an &lt;tt&gt;@After&lt;/tt&gt; method to clean these up (allthough i&apos;m not clear why this after method uses different code then a similar looking &lt;tt&gt;removeAllExistingCircuitBreakers()&lt;/tt&gt; helper method that some test methods use...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  @After
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void after() {
    h.getCore().getCircuitBreakerManager().deregisterAll();
  }
&lt;span class=&quot;code-comment&quot;&gt;//...
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void removeAllExistingCircuitBreakers() {
    List&amp;lt;CircuitBreaker&amp;gt; registeredCircuitBreakers = h.getCore().getCircuitBreakerManager().getRegisteredCircuitBreakers();

    registeredCircuitBreakers.clear();
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I suspect the root cause of these spurious failures  is that the &lt;tt&gt;solrconfig-memory-circuitbreaker.xml&lt;/tt&gt; used by the test defines a &quot;real&quot; (i think?) memory circut breaker...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  &amp;lt;circuitBreaker class=&quot;solr.CircuitBreakerManager&quot; enabled=&quot;true&quot;&amp;gt;
    &amp;lt;str name=&quot;memEnabled&quot;&amp;gt;true&amp;lt;/str&amp;gt;
    &amp;lt;str name=&quot;memThreshold&quot;&amp;gt;75&amp;lt;/str&amp;gt;
    &amp;lt;str name=&quot;cpuEnabled&quot;&amp;gt;true&amp;lt;/str&amp;gt;
    &amp;lt;str name=&quot;cpuThreshold&quot;&amp;gt;75&amp;lt;/str&amp;gt;
  &amp;lt;/circuitBreaker&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...so if &lt;tt&gt;TestCircuitBreaker.testResponseWithCBTiming&lt;/tt&gt; is the first test run, and if &lt;b&gt;lots&lt;/b&gt; of tests have run in that JVM making the memory usage high, then that breaker will trip long before either of the above methods have been called by any other test code to &lt;tt&gt;deregisterAll();&lt;/tt&gt; or &lt;tt&gt;.clear();&lt;/tt&gt; those breakers.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=atris&quot; class=&quot;user-hover&quot; rel=&quot;atris&quot;&gt;atris&lt;/a&gt; - can you please take a look at this?&lt;/p&gt;</comment>
                            <comment id="17448787" author="hossman" created="Wed, 24 Nov 2021 19:24:36 +0000"  >&lt;p&gt;Sample failure from a recent jenkins run...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.solr.util.TestCircuitBreaker &amp;gt; testResponseWithCBTiming FAILED
    java.lang.RuntimeException: Exception during query
        at __randomizedtesting.SeedInfo.seed([4229D84A41A9B403:AAF575A8B241AE23]:0)
        at org.apache.solr.SolrTestCaseJ4.assertQ(SolrTestCaseJ4.java:1009)
        at org.apache.solr.SolrTestCaseJ4.assertQ(SolrTestCaseJ4.java:971)
        at org.apache.solr.util.TestCircuitBreaker.testResponseWithCBTiming(TestCircuitBreaker.java:247)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:566)
        at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1754)
        at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:942)
        at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:978)
        at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:992)
        at com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:57)
        at org.junit.rules.RunRules.evaluate(RunRules.java:20)
        at org.apache.lucene.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:44)
        at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
        at org.apache.lucene.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:45)
        at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
        at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
        at org.junit.rules.RunRules.evaluate(RunRules.java:20)
        at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
        at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:370)
        at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:819)
        at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:470)
        at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:951)
        at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:836)
        at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:887)
        at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:898)
        at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
        at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
        at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
        at com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:57)
        at org.junit.rules.RunRules.evaluate(RunRules.java:20)
        at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
        at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
        at org.apache.lucene.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:38)
        at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
        at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40)
        at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
        at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
        at org.apache.lucene.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53)
        at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:43)
        at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:44)
        at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:60)
        at org.apache.lucene.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:47)
        at org.junit.rules.RunRules.evaluate(RunRules.java:20)
        at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
        at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:370)
        at com.carrotsearch.randomizedtesting.ThreadLeakControl.lambda$forkTimeoutingTask$0(ThreadLeakControl.java:826)
        at java.base/java.lang.Thread.run(Thread.java:834)

        Caused by:
        org.apache.solr.common.SolrException: Circuit Breakers tripped Memory Circuit Breaker triggered as JVM heap usage values are greater than allocated threshold.Seen JVM heap memory usage 424442256 and allocated threshold 402653184
            at app//org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:323)
            at app//org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:214)
            at app//org.apache.solr.core.SolrCore.execute(SolrCore.java:2639)
            at app//org.apache.solr.util.TestHarness.query(TestHarness.java:346)
            at app//org.apache.solr.util.TestHarness.query(TestHarness.java:327)
            at app//org.apache.solr.SolrTestCaseJ4.assertQ(SolrTestCaseJ4.java:985)
            ... 48 more

  2&amp;gt; 1950458 INFO  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.a.s.SolrTestCase Setting &apos;solr.default.confdir&apos; system property to test-framework derived value of &apos;/home/jenkins/jenkins-slave/workspace/Solr/Solr-Check-main/solr/server/solr/configsets/_default/conf&apos;
  2&amp;gt; 1950458 INFO  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.a.s.SolrTestCaseJ4 SecureRandom sanity checks: test.solr.allowed.securerandom=null &amp;amp; java.security.egd=file:/dev/./urandom
  2&amp;gt; 1950459 INFO  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.a.s.u.ErrorLogMuter Closing ErrorLogMuter-regex-549 after mutting 0 log messages
  2&amp;gt; 1950459 INFO  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.a.s.u.ErrorLogMuter Creating ErrorLogMuter-regex-550 for ERROR logs matching regex: ignore_exception
  2&amp;gt; 1950460 INFO  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.a.s.SolrTestCaseJ4 Created dataDir: /home/jenkins/jenkins-slave/workspace/Solr/Solr-Check-main/solr/core/build/tmp/tests-tmp/solr.util.TestCircuitBreaker_4229D84A41A9B403-001/data-dir-228-001
  2&amp;gt; 1950460 INFO  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.a.s.SolrTestCaseJ4 Using PointFields (NUMERIC_POINTS_SYSPROP=true) w/NUMERIC_DOCVALUES_SYSPROP=true
  2&amp;gt; 1950461 INFO  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.a.s.SolrTestCaseJ4 Randomized ssl (true) and clientAuth (false) via: @org.apache.solr.util.RandomizeSSL(reason=&quot;&quot;, value=0.0/0.0, ssl=0.0/0.0, clientAuth=0.0/0.0)
  2&amp;gt; 1950461 INFO  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.a.s.SolrTestCaseJ4 ####initCore
  2&amp;gt; 1950465 INFO  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.a.s.c.SolrResourceLoader Added 2 libs to classloader, from paths: [/home/jenkins/jenkins-slave/workspace/Solr/Solr-Check-main/solr/core/build/resources/test/solr/collection1/lib, /home/jenkins/jenkins-slave/workspace/Solr/Solr-Check-
main/solr/core/build/resources/test/solr/collection1/lib/classes]
  2&amp;gt; 1950476 INFO  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.a.s.c.SolrConfig Using Lucene MatchVersion: 9.0.0
  2&amp;gt; 1950476 WARN  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.a.s.c.SolrConfig solrconfig.xml: &amp;lt;boolTofilterOptimizer&amp;gt; is currently not implemented and has no effect.
  2&amp;gt; 1950479 INFO  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.a.s.s.IndexSchema Schema name=test
  2&amp;gt; 1950485 INFO  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.a.s.s.IndexSchema Loaded schema test/1.0 with uniqueid field id
  2&amp;gt; 1951259 WARN  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.e.j.u.s.S.config Trusting all certificates configured for Client@617bcf2e[provider=null,keyStore=null,trustStore=null]
  2&amp;gt; 1951259 WARN  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.e.j.u.s.S.config No Client EndPointIdentificationAlgorithm configured for Client@617bcf2e[provider=null,keyStore=null,trustStore=null]
  2&amp;gt; 1951261 WARN  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.e.j.u.s.S.config Trusting all certificates configured for Client@f9f658f[provider=null,keyStore=null,trustStore=null]
  2&amp;gt; 1951261 WARN  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.e.j.u.s.S.config No Client EndPointIdentificationAlgorithm configured for Client@f9f658f[provider=null,keyStore=null,trustStore=null]
  2&amp;gt; 1951263 WARN  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.a.s.c.CoreContainer Not all security plugins configured!  authentication=disabled authorization=disabled.  Solr is only as secure as you make it. Consider configuring authentication/authorization before exposing Solr to users interna
l or external.  See https://s.apache.org/solrsecurity for more info
  2&amp;gt; 1951277 INFO  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.a.s.m.r.SolrJmxReporter JMX monitoring for &apos;solr.node&apos; (registry &apos;solr.node&apos;) enabled at server: com.sun.jmx.mbeanserver.JmxMBeanServer@32e16297
  2&amp;gt; 1951283 INFO  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.a.s.m.r.SolrJmxReporter JMX monitoring for &apos;solr.jvm&apos; (registry &apos;solr.jvm&apos;) enabled at server: com.sun.jmx.mbeanserver.JmxMBeanServer@32e16297
  2&amp;gt; 1951283 INFO  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.a.s.m.r.SolrJmxReporter JMX monitoring for &apos;solr.jetty&apos; (registry &apos;solr.jetty&apos;) enabled at server: com.sun.jmx.mbeanserver.JmxMBeanServer@32e16297
  2&amp;gt; 1951284 INFO  (coreLoadExecutor-17379-thread-1) [] o.a.s.c.TransientSolrCoreCacheDefault Allocating transient core cache for max 2147483647 cores with initial capacity of 1024
  2&amp;gt; 1951287 INFO  (coreLoadExecutor-17379-thread-1) [ x:collection1] o.a.s.c.SolrResourceLoader Added 2 libs to classloader, from paths: [/home/jenkins/jenkins-slave/workspace/Solr/Solr-Check-main/solr/core/build/resources/test/solr/collection1/lib, /home/jenkins/jenkins-slave/workspace/Solr/Solr-Check-main/solr/
core/build/resources/test/solr/collection1/lib/classes]
  2&amp;gt; 1951299 INFO  (coreLoadExecutor-17379-thread-1) [ x:collection1] o.a.s.c.SolrConfig Using Lucene MatchVersion: 9.0.0
  2&amp;gt; 1951299 WARN  (coreLoadExecutor-17379-thread-1) [ x:collection1] o.a.s.c.SolrConfig solrconfig.xml: &amp;lt;boolTofilterOptimizer&amp;gt; is currently not implemented and has no effect.
  2&amp;gt; 1951303 INFO  (coreLoadExecutor-17379-thread-1) [ x:collection1] o.a.s.s.IndexSchema Schema name=test
  2&amp;gt; 1951308 INFO  (coreLoadExecutor-17379-thread-1) [ x:collection1] o.a.s.s.IndexSchema Loaded schema test/1.0 with uniqueid field id
  2&amp;gt; 1951315 INFO  (coreLoadExecutor-17379-thread-1) [ x:collection1] o.a.s.c.CoreContainer Creating SolrCore &apos;collection1&apos; using configuration from instancedir /home/jenkins/jenkins-slave/workspace/Solr/Solr-Check-main/solr/core/build/resources/test/solr/collection1, trusted=true
  2&amp;gt; 1951315 INFO  (coreLoadExecutor-17379-thread-1) [ x:collection1] o.a.s.m.r.SolrJmxReporter JMX monitoring for &apos;solr.core.collection1&apos; (registry &apos;solr.core.collection1&apos;) enabled at server: com.sun.jmx.mbeanserver.JmxMBeanServer@32e16297
  2&amp;gt; 1951315 INFO  (coreLoadExecutor-17379-thread-1) [ x:collection1] o.a.s.c.SolrCore [[collection1] ] Opening new SolrCore at [/home/jenkins/jenkins-slave/workspace/Solr/Solr-Check-main/solr/core/build/resources/test/solr/collection1], dataDir=[/home/jenkins/jenkins-slave/workspace/Solr/Solr-Check-main/solr/core
/build/tmp/tests-tmp/solr.util.TestCircuitBreaker_4229D84A41A9B403-001/data-dir-228-001/]
  2&amp;gt; 1951316 INFO  (coreLoadExecutor-17379-thread-1) [ x:collection1] o.a.s.u.RandomMergePolicy RandomMergePolicy wrapping class org.apache.lucene.index.TieredMergePolicy: [TieredMergePolicy: maxMergeAtOnce=19, maxMergedSegmentMB=40.8876953125, floorSegmentMB=0.4853515625, forceMergeDeletesPctAllowed=6.14008859683
6664, segmentsPerTier=44.0, maxCFSSegmentSizeMB=8.796093022207999E12, noCFSRatio=1.0, deletesPctAllowed=35.346987048354926
  2&amp;gt; 1951346 INFO  (coreLoadExecutor-17379-thread-1) [ x:collection1] o.a.s.u.CommitTracker Hard AutoCommit: disabled
  2&amp;gt; 1951346 INFO  (coreLoadExecutor-17379-thread-1) [ x:collection1] o.a.s.u.CommitTracker Soft AutoCommit: disabled
  2&amp;gt; 1951346 INFO  (coreLoadExecutor-17379-thread-1) [ x:collection1] o.a.s.u.RandomMergePolicy RandomMergePolicy wrapping class org.apache.lucene.index.LogByteSizeMergePolicy: [LogByteSizeMergePolicy: minMergeSize=1677721, mergeFactor=38, maxMergeSize=2147483648, maxMergeSizeForForcedMerge=9223372036854775807, ca
librateSizeByDeletes=false, maxMergeDocs=2147483647, maxCFSSegmentSizeMB=8.796093022207999E12, noCFSRatio=0.5505420790605812]
  2&amp;gt; 1951347 WARN  (coreLoadExecutor-17379-thread-1) [ x:collection1] o.a.s.r.ManagedResourceStorage Cannot write to config directory /home/jenkins/jenkins-slave/workspace/Solr/Solr-Check-main/solr/core/build/resources/test/solr/collection1/conf ; switching to use InMemory storage instead.
  2&amp;gt; 1951347 INFO  (coreLoadExecutor-17379-thread-1) [ x:collection1] o.a.s.h.ReplicationHandler Commits will be reserved for 10000 ms
  2&amp;gt; 1951348 INFO  (searcherExecutor-17381-thread-1-processing-collection1) [ x:collection1] o.a.s.c.SolrCore [collection1]  Registered new searcher autowarm time: 0 ms
  2&amp;gt; 1951348 INFO  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [] o.a.s.SolrTestCaseJ4 ####initCore end
  2&amp;gt; 1951349 INFO  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [ x:collection1] o.a.s.u.p.LogUpdateProcessorFactory [collection1]  webapp=null path=null params={}{add=[1]} 0 0
...
  2&amp;gt; 1951495 INFO  (searcherExecutor-17381-thread-1-processing-collection1) [ x:collection1] o.a.s.c.SolrCore [collection1]  Registered new searcher autowarm time: 0 ms
  2&amp;gt; 1951496 INFO  (SUITE-TestCircuitBreaker-seed#[4229D84A41A9B403]-worker) [ x:collection1] o.a.s.u.p.LogUpdateProcessorFactory [collection1]  webapp=null path=null params={}{commit=} 0 4
  2&amp;gt; 1951500 INFO  (TEST-TestCircuitBreaker.testResponseWithCBTiming-seed#[4229D84A41A9B403]) [] o.a.s.SolrTestCaseJ4 ###Starting testResponseWithCBTiming
  2&amp;gt; 1951501 INFO  (TEST-TestCircuitBreaker.testResponseWithCBTiming-seed#[4229D84A41A9B403]) [] o.a.s.c.S.Request [collection1]  webapp=null path=null params={q=*:*&amp;amp;wt=xml&amp;amp;debugQuery=true} status=503 QTime=0
  2&amp;gt; 1951501 ERROR (TEST-TestCircuitBreaker.testResponseWithCBTiming-seed#[4229D84A41A9B403]) [] o.a.s.SolrTestCaseJ4 REQUEST FAILED: q=*:*&amp;amp;wt=xml&amp;amp;debugQuery=true
  2&amp;gt;           =&amp;gt; org.apache.solr.common.SolrException: Circuit Breakers tripped Memory Circuit Breaker triggered as JVM heap usage values are greater than allocated threshold.Seen JVM heap memory usage 424442256 and allocated threshold 402653184
  2&amp;gt; 
  2&amp;gt; org.apache.solr.common.SolrException: Circuit Breakers tripped Memory Circuit Breaker triggered as JVM heap usage values are greater than allocated threshold.Seen JVM heap memory usage 424442256 and allocated threshold 402653184
...
  2&amp;gt; NOTE: reproduce with: gradlew test --tests TestCircuitBreaker.testResponseWithCBTiming -Dtests.seed=4229D84A41A9B403 -Dtests.multiplier=2 -Dtests.slow=true -Dtests.locale=en-MO -Dtests.timezone=Etc/GMT+7 -Dtests.asserts=true -Dtests.file.encoding=UTF-8

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17739706" author="alex.parvulescu" created="Mon, 3 Jul 2023 18:04:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman&quot; class=&quot;user-hover&quot; rel=&quot;hossman&quot;&gt;hossman&lt;/a&gt; I took a look at this failing test and I agree with this analysis. I went a step further and send a message to the dev list to propose removing the test, as I don&apos;t see the usefulness in its current form. &lt;a href=&quot;https://lists.apache.org/thread/xhsrr6ksc5y11t29zz60oglw8ymkrwtf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread/xhsrr6ksc5y11t29zz60oglw8ymkrwtf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We could consider adding a benchmark comparing CB with non-CB setup to compare perf numbers, if this was in fact the intention behind the test.&lt;/p&gt;</comment>
                            <comment id="17739919" author="epugh" created="Tue, 4 Jul 2023 13:12:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stillalex&quot; class=&quot;user-hover&quot; rel=&quot;stillalex&quot;&gt;stillalex&lt;/a&gt;from my perspective, anything is better then the status quo!   I love the idea of adding new benchmarks to our perf testing setup.   The current tests are a bit of a mish mash between traditional unit tests, integration tests, and performance tests &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.   Migrating perf oriented tests over to our benchmarking setup might also help more folks start to USE the benchmarking suite of tests &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.   &lt;/p&gt;</comment>
                            <comment id="17740301" author="alex.parvulescu" created="Wed, 5 Jul 2023 19:20:30 +0000"  >&lt;p&gt;thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=epugh&quot; class=&quot;user-hover&quot; rel=&quot;epugh&quot;&gt;epugh&lt;/a&gt; for your thoughts. we could start a wishlist of areas to benchmark anyone could contribute to if they are interested.&lt;br/&gt;
Opened PR to remove the test &lt;a href=&quot;https://github.com/apache/solr/pull/1756&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/pull/1756&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17740691" author="jira-bot" created="Thu, 6 Jul 2023 16:25:47 +0000"  >&lt;p&gt;Commit fb2a06bf363677e25b971d1cc1ee6c2ebcddaabf in solr&apos;s branch refs/heads/main from Alex Deparvu&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=fb2a06bf363&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=fb2a06bf363&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15819&quot; title=&quot;spurious failures from TestCircuitBreaker.testResponseWithCBTiming&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15819&quot;&gt;&lt;del&gt;SOLR-15819&lt;/del&gt;&lt;/a&gt; spurious failures from TestCircuitBreaker.testResponseWithCBTiming (#1756)&lt;/p&gt;
</comment>
                            <comment id="17740692" author="jira-bot" created="Thu, 6 Jul 2023 16:26:26 +0000"  >&lt;p&gt;Commit bd48416d2bc44a15b9cc3d2d8147e351b37a534e in solr&apos;s branch refs/heads/branch_9x from Alex Deparvu&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=bd48416d2bc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=bd48416d2bc&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15819&quot; title=&quot;spurious failures from TestCircuitBreaker.testResponseWithCBTiming&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15819&quot;&gt;&lt;del&gt;SOLR-15819&lt;/del&gt;&lt;/a&gt; spurious failures from TestCircuitBreaker.testResponseWithCBTiming (#1756)&lt;/p&gt;
</comment>
                            <comment id="17740693" author="epugh" created="Thu, 6 Jul 2023 16:27:14 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stillalex&quot; class=&quot;user-hover&quot; rel=&quot;stillalex&quot;&gt;stillalex&lt;/a&gt; for the fix!&lt;/p&gt;</comment>
                            <comment id="17745803" author="houston" created="Fri, 21 Jul 2023 20:40:40 +0000"  >&lt;p&gt;Closing after the 9.3.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13548979">SOLR-16954</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 16 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0x2hc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>