<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:34:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-12776] Setting of TMP in solr.cmd causes invisibility of Solr to JDK tools</title>
                <link>https://issues.apache.org/jira/browse/SOLR-12776</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;(issue firstly discussed in here: &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/lucene-solr-user/201809.mbox/%3C20180916154315.0922A29C@centrum.cz%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/lucene-solr-user/201809.mbox/%3C20180916154315.0922A29C@centrum.cz%3E&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;Please notice the following lines added (among others) to &quot;solr.cmd&quot; by commit &lt;a href=&quot;https://github.com/apache/lucene-solr/commit/b36c68b16e67ae701cefce052a4fdbaac88fb65c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/commit/b36c68b16e67ae701cefce052a4fdbaac88fb65c&lt;/a&gt; for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6833&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SOLR-6833&lt;/a&gt; about 4 years ago (v5.0):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
set TMP=!SOLR_HOME:%EXAMPLE_DIR%=!
IF NOT &lt;span class=&quot;code-quote&quot;&gt;&quot;%TMP%&quot;&lt;/span&gt;==&lt;span class=&quot;code-quote&quot;&gt;&quot;%SOLR_HOME%&quot;&lt;/span&gt; (
&#160; set &lt;span class=&quot;code-quote&quot;&gt;&quot;SOLR_LOGS_DIR=%SOLR_HOME%\..\logs&quot;&lt;/span&gt;
&#160; set &lt;span class=&quot;code-quote&quot;&gt;&quot;LOG4J_CONFIG=file:%EXAMPLE_DIR%\resources\log4j.properties&quot;&lt;/span&gt;
)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Apparently, the new variable &quot;TMP&quot; is just a temporary one, but by coincidence, this variable is also important for JVM. As this system variable tells where the &quot;hsperfdata_&amp;lt;username&amp;gt;&quot; directory for storing applications&apos; monitoring data should be located. And if this is changed, JDK tools like JVisualVM, jps and others won&apos;t locally see the given Java application, because they search in a different default location.&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;Proposedsolution&quot;&gt;&lt;/a&gt;Proposed solution&lt;/h3&gt;

&lt;p&gt;A working solution seems to be just to &lt;b&gt;rename the TMP variable&lt;/b&gt; to for example TMP1 as in the attached &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12939876/12939876_simple-rename-fix.patch&quot; title=&quot;simple-rename-fix.patch attached to SOLR-12776&quot;&gt;simple-rename-fix.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;. Maybe even a simple &quot;==&quot; comparison of SOLR_HOME and EXAMPLE_DIR could (should?) be made, but I don&apos;t have enough time to study and test this scenario.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows. Tested with Java 8u152 and Solr 6.3.0.&lt;/p&gt;</environment>
        <key id="13185368">SOLR-12776</key>
            <summary>Setting of TMP in solr.cmd causes invisibility of Solr to JDK tools</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="erickerickson">Erick Erickson</assignee>
                                    <reporter username="pbodnar">Petr Bodnar</reporter>
                        <labels>
                    </labels>
                <created>Sun, 16 Sep 2018 13:37:28 +0000</created>
                <updated>Sat, 8 Jun 2019 15:02:43 +0000</updated>
                            <resolved>Mon, 24 Sep 2018 04:47:42 +0000</resolved>
                                    <version>5.0</version>
                                    <fixVersion>7.6</fixVersion>
                    <fixVersion>8.0</fixVersion>
                                    <component>scripts and tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16625183" author="erickerickson" created="Sun, 23 Sep 2018 17:18:46 +0000"  >&lt;p&gt;Very slightly modified, uses TMP_SOLR_HOME rather than TMP1. I&apos;ll probably check this in later today&lt;/p&gt;

&lt;p&gt;One thing I&apos;m unsure about given my unfamiliarity with Windows scripting, This assignment (This wasn&apos;t changed by the patch BTW, it just looks odd)&lt;/p&gt;

&lt;p&gt;set TMP_SOLR_HOME=exclamation_pointSOLR_HOME:%EXAMPLE_DIR%=exclamation_point&lt;/p&gt;

&lt;p&gt;What&apos;s the meaning of the equals sign after the last percent sign? the &lt;tt&gt;%=!&lt;/tt&gt;&#160;at the end that I cannot get to render and have better things to do than fight the editor this morning.&lt;/p&gt;

&lt;p&gt;Petr:&#160;&lt;/p&gt;

&lt;p&gt;For future reference, the convention is just to label the patch with the&#160;Jira number and a &quot;.patch&quot; extension. If multiple copies are uploaded with the same name, they&apos;re all kept and the newest one is in blue with the rest gray. No big deal, just FYI.&lt;/p&gt;</comment>
                            <comment id="16625286" author="erickerickson" created="Sun, 23 Sep 2018 23:05:37 +0000"  >&lt;p&gt;Final patch with CHANGES.txt&lt;/p&gt;</comment>
                            <comment id="16625372" author="jira-bot" created="Mon, 24 Sep 2018 04:46:38 +0000"  >&lt;p&gt;Commit 95cc6f4f765f0e1f78e5199868089df1ffec91e9 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cp.erickson%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;cp.erickson@gmail.com&quot;&gt;cp.erickson@gmail.com&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=95cc6f4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=95cc6f4&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12776&quot; title=&quot;Setting of TMP in solr.cmd causes invisibility of Solr to JDK tools&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12776&quot;&gt;&lt;del&gt;SOLR-12776&lt;/del&gt;&lt;/a&gt;: Setting of TMP in solr.cmd causes invisibility of Solr to JDK tools&lt;/p&gt;</comment>
                            <comment id="16625374" author="jira-bot" created="Mon, 24 Sep 2018 04:47:09 +0000"  >&lt;p&gt;Commit fb25dd5d11156bf3045b4670726d7794bda49d69 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cp.erickson%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;cp.erickson@gmail.com&quot;&gt;cp.erickson@gmail.com&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=fb25dd5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=fb25dd5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12776&quot; title=&quot;Setting of TMP in solr.cmd causes invisibility of Solr to JDK tools&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12776&quot;&gt;&lt;del&gt;SOLR-12776&lt;/del&gt;&lt;/a&gt;: Setting of TMP in solr.cmd causes invisibility of Solr to JDK tools&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 95cc6f4f765f0e1f78e5199868089df1ffec91e9)&lt;/p&gt;</comment>
                            <comment id="16625375" author="erickerickson" created="Mon, 24 Sep 2018 04:47:42 +0000"  >&lt;p&gt;Thanks Petr!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12940984" name="SOLR-12776.patch" size="999" author="erickerickson" created="Sun, 23 Sep 2018 23:05:28 +0000"/>
                            <attachment id="12940983" name="SOLR-12776.patch" size="999" author="erickerickson" created="Sun, 23 Sep 2018 23:02:05 +0000"/>
                            <attachment id="12940972" name="SOLR-12776.patch" size="510" author="erickerickson" created="Sun, 23 Sep 2018 17:05:23 +0000"/>
                            <attachment id="12939876" name="simple-rename-fix.patch" size="486" author="pbodnar" created="Sun, 16 Sep 2018 13:35:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3y4yv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>