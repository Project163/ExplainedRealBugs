<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:17:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9716] RecoveryStrategy send prep recovery cmd without setting request time out</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9716</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Currently, RecoveryStrategy sends prep recovery cmd without setting request time out. But this can be long running request, so if we have network partition in the middle of the request. Recovering core will stay down forever.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13017229">SOLR-9716</key>
            <summary>RecoveryStrategy send prep recovery cmd without setting request time out</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalin">Shalin Shekhar Mangar</assignee>
                                    <reporter username="caomanhdat">Cao Manh Dat</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Nov 2016 13:26:08 +0000</created>
                <updated>Wed, 2 Oct 2019 17:24:53 +0000</updated>
                            <resolved>Sat, 5 Nov 2016 16:51:07 +0000</resolved>
                                                    <fixVersion>6.4</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15631186" author="caomanhdat" created="Thu, 3 Nov 2016 01:47:28 +0000"  >&lt;p&gt;Initial solution for this issue without tests. This patch is tested on solr-jepsen (&lt;a href=&quot;https://github.com/LucidWorks/jepsen/tree/solr-jepsen&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/LucidWorks/jepsen/tree/solr-jepsen&lt;/a&gt;) and passed.&lt;/p&gt;

&lt;p&gt;This is a critical issue, it can cause a replica being down forever so I think we can commit this patch first and create another issue for creating an unit test for this ticket.&lt;/p&gt;</comment>
                            <comment id="15632129" author="caomanhdat" created="Thu, 3 Nov 2016 09:01:23 +0000"  >&lt;p&gt;Updated patch included a test. &lt;/p&gt;

&lt;p&gt;In this patch I introduced a new class called ChaosHttpSolrClient, in which randomly wait forever ( in case of PREPRECOVERY request ) if socketTimeOut is not set.&lt;/p&gt;</comment>
                            <comment id="15632789" author="caomanhdat" created="Thu, 3 Nov 2016 13:59:35 +0000"  >&lt;p&gt;Cleaner test based on TestInjection.&lt;/p&gt;</comment>
                            <comment id="15634980" author="caomanhdat" created="Fri, 4 Nov 2016 02:23:21 +0000"  >&lt;p&gt;Updated patch, modified TestInjection.injectPrepRecoveryOpPauseForever() to make sure that it won&apos;t continuous pause all the times. If not, the test will be failed some time because of timeout waiting for the collection to be active.&lt;/p&gt;</comment>
                            <comment id="15637059" author="shalinmangar" created="Fri, 4 Nov 2016 17:18:17 +0000"  >&lt;p&gt;Thanks Dat. This looks good. Earlier the read timeout was effectively infinite so I think we should probably wait for more than a minute. I&apos;ll bump this up to 5 minutes and commit this patch.&lt;/p&gt;</comment>
                            <comment id="15638334" author="caomanhdat" created="Sat, 5 Nov 2016 01:55:28 +0000"  >&lt;p&gt;That would be great!&lt;/p&gt;</comment>
                            <comment id="15638800" author="shalinmangar" created="Sat, 5 Nov 2016 06:43:01 +0000"  >&lt;p&gt;The earlier patches did not break the loop after a successful call. This patch fixes it and increases the max wait to 300 seconds. I&apos;ll commit after running tests and precommit.&lt;/p&gt;</comment>
                            <comment id="15638857" author="jira-bot" created="Sat, 5 Nov 2016 07:16:48 +0000"  >&lt;p&gt;Commit 1f1990d8be9fbbe0d95a10f3be1dffccec969a32 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=1f1990d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=1f1990d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9716&quot; title=&quot;RecoveryStrategy send prep recovery cmd without setting request time out&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9716&quot;&gt;&lt;del&gt;SOLR-9716&lt;/del&gt;&lt;/a&gt;: RecoveryStrategy sends prep recovery command without setting read time out which can cause replica recovery to hang indefinitely on network partitions&lt;/p&gt;</comment>
                            <comment id="15639995" author="jira-bot" created="Sat, 5 Nov 2016 16:50:34 +0000"  >&lt;p&gt;Commit 9a8030171cfaf529e5de0edae0a5ceddb871d3ff in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9a80301&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9a80301&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9716&quot; title=&quot;RecoveryStrategy send prep recovery cmd without setting request time out&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9716&quot;&gt;&lt;del&gt;SOLR-9716&lt;/del&gt;&lt;/a&gt;: RecoveryStrategy sends prep recovery command without setting read time out which can cause replica recovery to hang indefinitely on network partitions&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 1f1990d)&lt;/p&gt;</comment>
                            <comment id="15640000" author="shalinmangar" created="Sat, 5 Nov 2016 16:51:07 +0000"  >&lt;p&gt;Thanks Dat!&lt;/p&gt;</comment>
                            <comment id="15644683" author="jira-bot" created="Mon, 7 Nov 2016 16:50:25 +0000"  >&lt;p&gt;Commit 1f1990d8be9fbbe0d95a10f3be1dffccec969a32 in lucene-solr&apos;s branch refs/heads/apiv2 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=1f1990d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=1f1990d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9716&quot; title=&quot;RecoveryStrategy send prep recovery cmd without setting request time out&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9716&quot;&gt;&lt;del&gt;SOLR-9716&lt;/del&gt;&lt;/a&gt;: RecoveryStrategy sends prep recovery command without setting read time out which can cause replica recovery to hang indefinitely on network partitions&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13080867">SOLR-10914</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12837398" name="SOLR-9716.patch" size="8082" author="shalin" created="Sat, 5 Nov 2016 06:43:01 +0000"/>
                            <attachment id="12837018" name="SOLR-9716.patch" size="8051" author="caomanhdat" created="Fri, 4 Nov 2016 02:23:21 +0000"/>
                            <attachment id="12836808" name="SOLR-9716.patch" size="7224" author="caomanhdat" created="Thu, 3 Nov 2016 13:59:35 +0000"/>
                            <attachment id="12836763" name="SOLR-9716.patch" size="9462" author="caomanhdat" created="Thu, 3 Nov 2016 09:01:23 +0000"/>
                            <attachment id="12836702" name="SOLR-9716.patch" size="2974" author="caomanhdat" created="Thu, 3 Nov 2016 01:47:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35q9b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>