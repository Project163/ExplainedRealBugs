<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:59:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6604] distributed expand=true&amp;fl=key NPE fix, expand=true&amp;distrib.singlePass=true consideration</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6604</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;select?expand=true&amp;amp;fl=key hits NPE in ExpandComponent.handleResponse when the responses of the EXECUTE_QUERY contain no expanded element despite the requests&apos; purpose including PURPOSE_GET_FIELDS&lt;/p&gt;

&lt;p&gt;select?expand=true&amp;amp;distrib.singlePass=true works but relies on other preceding components triggering a GET_FIELDS stage&lt;/p&gt;</description>
                <environment></environment>
        <key id="12746742">SOLR-6604</key>
            <summary>distributed expand=true&amp;fl=key NPE fix, expand=true&amp;distrib.singlePass=true consideration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalin">Shalin Shekhar Mangar</assignee>
                                    <reporter username="cpoerschke">Christine Poerschke</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Oct 2014 16:05:00 +0000</created>
                <updated>Mon, 9 May 2016 18:58:37 +0000</updated>
                            <resolved>Sat, 13 Dec 2014 00:14:27 +0000</resolved>
                                                    <fixVersion>5.0</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14163655" author="githubbot" created="Wed, 8 Oct 2014 16:05:28 +0000"  >&lt;p&gt;GitHub user cpoerschke opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/98&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/98&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    distributed expand=true&amp;amp;fl=key NPE fix, expand=true&amp;amp;distrib.singlePass=true consideration&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/i#browse/SOLR-6604&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/i#browse/SOLR-6604&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    scenario:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;select?expand=true&amp;amp;fl=key hit NPE in ExpandComponent.handleResponse when the responses of the EXECUTE_QUERY contained no expanded element despite the requests&apos; purpose including PURPOSE_GET_FIELDS&lt;/li&gt;
	&lt;li&gt;select?expand=true&amp;amp;distrib.singlePass=true worked but relied on other preceding components triggering a GET_FIELDS stage&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    changes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;add TestExpandComponent and DistributedExpandComponentTest test cases&lt;/li&gt;
	&lt;li&gt;change code to fix NPE&lt;/li&gt;
	&lt;li&gt;change code to avoid distrib.singlePass reliance on other components&lt;/li&gt;
	&lt;li&gt;tweak test cases to randomly alternate between docValues=false and docValues=true collapse fields&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/bloomberg/lucene-solr&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/bloomberg/lucene-solr&lt;/a&gt; trunk-collapse-expand&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/98.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/98.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #98&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit c7c79f24230e3f6470e3ee58c9e58346dc1b043b&lt;br/&gt;
Author: Christine Poerschke &amp;lt;cpoerschke@bloomberg.net&amp;gt;&lt;br/&gt;
Date:   2014-09-08T10:06:41Z&lt;/p&gt;

&lt;p&gt;    solr: distributed select?expand=true&amp;amp;fl=key NPE fix, select?expand=true&amp;amp;distrib.singlePass=true consideration&lt;/p&gt;

&lt;p&gt;    scenario:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;select?expand=true&amp;amp;fl=key hit NPE in ExpandComponent.handleResponse when the responses of the EXECUTE_QUERY contained no expanded element despite the requests&apos; purpose including PURPOSE_GET_FIELDS&lt;/li&gt;
	&lt;li&gt;select?expand=true&amp;amp;distrib.singlePass=true worked but relied on other preceding components triggering a GET_FIELDS stage&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    changes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;add TestExpandComponent and DistributedExpandComponentTest test cases&lt;/li&gt;
	&lt;li&gt;change code to fix NPE&lt;/li&gt;
	&lt;li&gt;change code to avoid distrib.singlePass reliance on other components&lt;/li&gt;
	&lt;li&gt;tweak test cases to randomly alternate between docValues=false and docValues=true collapse fields&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="14163667" author="cpoerschke" created="Wed, 8 Oct 2014 16:11:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6604&quot; title=&quot;distributed expand=true&amp;amp;fl=key NPE fix, expand=true&amp;amp;distrib.singlePass=true consideration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6604&quot;&gt;&lt;del&gt;SOLR-6604&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6510&quot; title=&quot;select?collapse=... - fix NPE in Collapsing(FieldValue|Score)Collector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6510&quot;&gt;&lt;del&gt;SOLR-6510&lt;/del&gt;&lt;/a&gt; proposed patches share the same one-line solr/core/src/test-files/solr/collection1/conf/schema11.xml change (but the github pull requests are independent of each other).&lt;/p&gt;</comment>
                            <comment id="14231838" author="cpoerschke" created="Tue, 2 Dec 2014 18:02:25 +0000"  >&lt;p&gt;Linking &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6604&quot; title=&quot;distributed expand=true&amp;amp;fl=key NPE fix, expand=true&amp;amp;distrib.singlePass=true consideration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6604&quot;&gt;&lt;del&gt;SOLR-6604&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6812&quot; title=&quot;distrib.singlePass does not work for expand-request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6812&quot;&gt;&lt;del&gt;SOLR-6812&lt;/del&gt;&lt;/a&gt; which both concern distrib.singlePass and expand.&lt;/p&gt;</comment>
                            <comment id="14244839" author="shalinmangar" created="Fri, 12 Dec 2014 21:46:54 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt;, I combined my patch on &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6812&quot; title=&quot;distrib.singlePass does not work for expand-request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6812&quot;&gt;&lt;del&gt;SOLR-6812&lt;/del&gt;&lt;/a&gt; and your patch which is attached here. I used the modifyRequest method to enable expansion selectively on the shard requests. The rest of the patch is the same as yours.&lt;/p&gt;</comment>
                            <comment id="14245013" author="jira-bot" created="Sat, 13 Dec 2014 00:05:05 +0000"  >&lt;p&gt;Commit 1645098 from shalin@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1645098&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1645098&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6604&quot; title=&quot;distributed expand=true&amp;amp;fl=key NPE fix, expand=true&amp;amp;distrib.singlePass=true consideration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6604&quot;&gt;&lt;del&gt;SOLR-6604&lt;/del&gt;&lt;/a&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6812&quot; title=&quot;distrib.singlePass does not work for expand-request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6812&quot;&gt;&lt;del&gt;SOLR-6812&lt;/del&gt;&lt;/a&gt;: Fix NPE with distrib.singlePass=true and expand component. Increased test coverage of expand component with docValues.&lt;/p&gt;

&lt;p&gt;This closes #98.&lt;/p&gt;</comment>
                            <comment id="14245027" author="jira-bot" created="Sat, 13 Dec 2014 00:13:17 +0000"  >&lt;p&gt;Commit 1645099 from shalin@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1645099&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1645099&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6604&quot; title=&quot;distributed expand=true&amp;amp;fl=key NPE fix, expand=true&amp;amp;distrib.singlePass=true consideration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6604&quot;&gt;&lt;del&gt;SOLR-6604&lt;/del&gt;&lt;/a&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6812&quot; title=&quot;distrib.singlePass does not work for expand-request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6812&quot;&gt;&lt;del&gt;SOLR-6812&lt;/del&gt;&lt;/a&gt;: Fix NPE with distrib.singlePass=true and expand component. Increased test coverage of expand component with docValues.&lt;/p&gt;

&lt;p&gt;This closes #98.&lt;/p&gt;</comment>
                            <comment id="14245030" author="shalinmangar" created="Sat, 13 Dec 2014 00:14:27 +0000"  >&lt;p&gt;Thanks Christine!&lt;/p&gt;</comment>
                            <comment id="14245036" author="githubbot" created="Sat, 13 Dec 2014 00:21:19 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/98&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/98&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14332764" author="anshumg" created="Mon, 23 Feb 2015 05:01:47 +0000"  >&lt;p&gt;Bulk close after 5.0 release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12741094">SOLR-6510</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12758865">SOLR-6812</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12686955" name="SOLR-6604.patch" size="18425" author="shalin" created="Fri, 12 Dec 2014 21:46:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20xuf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>