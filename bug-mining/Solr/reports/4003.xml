<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:34:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-12222] TestDistributedSearch failure: &quot;Expected to find shardAddress in the up shard info&quot;</title>
                <link>https://issues.apache.org/jira/browse/SOLR-12222</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;This is a pretty common failure of this test. Here is an example from a recent Jenkins failure&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Build: https://jenkins.thetaphi.de/job/Lucene-Solr-7.x-Linux/1630/
Java: 64bit/jdk-10 -XX:+UseCompressedOops -XX:+UseParallelGC

1 tests failed.
FAILED:  org.apache.solr.TestDistributedSearch.test

Error Message:
Expected to find shardAddress in the up shard info: {error=org.apache.solr.client.solrj.SolrServerException: Time allowed to handle this request exceeded,trace=org.apache.solr.client.solrj.SolrServerException: Time allowed to handle this request exceeded  at org.apache.solr.client.solrj.impl.LBHttpSolrClient.request(LBHttpSolrClient.java:460)  at org.apache.solr.handler.component.HttpShardHandlerFactory.makeLoadBalancedRequest(HttpShardHandlerFactory.java:273)  at org.apache.solr.handler.component.HttpShardHandler.lambda$submit$0(HttpShardHandler.java:175)  at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)  at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:514)  at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)  at com.codahale.metrics.InstrumentedExecutorService$InstrumentedRunnable.run(InstrumentedExecutorService.java:176)  at org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.lambda$execute$0(ExecutorUtil.java:192)  at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1135)  at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)  at java.base/java.lang.Thread.run(Thread.java:844) ,time=1}

Stack Trace:
java.lang.AssertionError: Expected to find shardAddress in the up shard info: {error=org.apache.solr.client.solrj.SolrServerException: Time allowed to handle this request exceeded,trace=org.apache.solr.client.solrj.SolrServerException: Time allowed to handle this request exceeded
        at org.apache.solr.client.solrj.impl.LBHttpSolrClient.request(LBHttpSolrClient.java:460)
        at org.apache.solr.handler.component.HttpShardHandlerFactory.makeLoadBalancedRequest(HttpShardHandlerFactory.java:273)
        at org.apache.solr.handler.component.HttpShardHandler.lambda$submit$0(HttpShardHandler.java:175)
        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:514)
        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
        at com.codahale.metrics.InstrumentedExecutorService$InstrumentedRunnable.run(InstrumentedExecutorService.java:176)
        at org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.lambda$execute$0(ExecutorUtil.java:192)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1135)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
        at java.base/java.lang.Thread.run(Thread.java:844)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13152169">SOLR-12222</key>
            <summary>TestDistributedSearch failure: &quot;Expected to find shardAddress in the up shard info&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tflobbe">Tomas Eduardo Fernandez Lobbe</assignee>
                                    <reporter username="tflobbe">Tomas Eduardo Fernandez Lobbe</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Apr 2018 03:39:34 +0000</created>
                <updated>Sat, 8 Jun 2019 15:12:03 +0000</updated>
                            <resolved>Tue, 7 Aug 2018 00:01:39 +0000</resolved>
                                                    <fixVersion>7.5</fixVersion>
                    <fixVersion>8.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16438078" author="tomasflobbe" created="Fri, 13 Apr 2018 23:21:50 +0000"  >&lt;p&gt;This seems to be the cases where the &quot;time allowed&quot; is checked inside &lt;tt&gt;LBHttpSolrClient.request&lt;/tt&gt;. I think we can just correct the test. See patch attached.&lt;/p&gt;</comment>
                            <comment id="16570942" author="jira-bot" created="Tue, 7 Aug 2018 00:00:31 +0000"  >&lt;p&gt;Commit 896fd0ebd55aaafa51222aa9200e16f2dbb093e4 in lucene-solr&apos;s branch refs/heads/master from Tomas Fernandez Lobbe&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=896fd0e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=896fd0e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12222&quot; title=&quot;TestDistributedSearch failure: &amp;quot;Expected to find shardAddress in the up shard info&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12222&quot;&gt;&lt;del&gt;SOLR-12222&lt;/del&gt;&lt;/a&gt;: Improve TestDistributedSearch search&lt;/p&gt;

&lt;p&gt;Consider the case when the distributed requests fails with timeAllowed before it reaches the shards&lt;/p&gt;</comment>
                            <comment id="16570943" author="jira-bot" created="Tue, 7 Aug 2018 00:01:00 +0000"  >&lt;p&gt;Commit 2fb11404d7aecdc6fddbb0763bf14a6958eb6cc3 in lucene-solr&apos;s branch refs/heads/branch_7x from Tomas Fernandez Lobbe&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=2fb1140&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=2fb1140&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12222&quot; title=&quot;TestDistributedSearch failure: &amp;quot;Expected to find shardAddress in the up shard info&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12222&quot;&gt;&lt;del&gt;SOLR-12222&lt;/del&gt;&lt;/a&gt;: Improve TestDistributedSearch search&lt;/p&gt;

&lt;p&gt;Consider the case when the distributed requests fails with timeAllowed before it reaches the shards&lt;/p&gt;</comment>
                            <comment id="16580387" author="tomasflobbe" created="Tue, 14 Aug 2018 20:20:34 +0000"  >&lt;p&gt;I haven&apos;t seen any failures of &lt;tt&gt;TestDistributedSearch.test&lt;/tt&gt; since this commit and all the recent failures I can see in Jenkins are related to this same problem. I&apos;ll remove the &lt;tt&gt;@BadApple&lt;/tt&gt; annotation (CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=erickerickson&quot; class=&quot;user-hover&quot; rel=&quot;erickerickson&quot;&gt;erickerickson&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="16580394" author="jira-bot" created="Tue, 14 Aug 2018 20:25:36 +0000"  >&lt;p&gt;Commit bff7a3bbb188fe08a9a24711bd7b3c54e32d36e8 in lucene-solr&apos;s branch refs/heads/master from Tomas Fernandez Lobbe&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=bff7a3b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=bff7a3b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12222&quot; title=&quot;TestDistributedSearch failure: &amp;quot;Expected to find shardAddress in the up shard info&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12222&quot;&gt;&lt;del&gt;SOLR-12222&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12028&quot; title=&quot;BadApple and AwaitsFix annotations usage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12028&quot;&gt;&lt;del&gt;SOLR-12028&lt;/del&gt;&lt;/a&gt;: Remove @BaddApple annotation from TestDistributedSearch&lt;/p&gt;

&lt;p&gt;This test hasn&apos;t failed since the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12222&quot; title=&quot;TestDistributedSearch failure: &amp;quot;Expected to find shardAddress in the up shard info&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12222&quot;&gt;&lt;del&gt;SOLR-12222&lt;/del&gt;&lt;/a&gt; were committed&lt;/p&gt;</comment>
                            <comment id="16580396" author="jira-bot" created="Tue, 14 Aug 2018 20:25:40 +0000"  >&lt;p&gt;Commit bff7a3bbb188fe08a9a24711bd7b3c54e32d36e8 in lucene-solr&apos;s branch refs/heads/master from Tomas Fernandez Lobbe&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=bff7a3b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=bff7a3b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12222&quot; title=&quot;TestDistributedSearch failure: &amp;quot;Expected to find shardAddress in the up shard info&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12222&quot;&gt;&lt;del&gt;SOLR-12222&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12028&quot; title=&quot;BadApple and AwaitsFix annotations usage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12028&quot;&gt;&lt;del&gt;SOLR-12028&lt;/del&gt;&lt;/a&gt;: Remove @BaddApple annotation from TestDistributedSearch&lt;/p&gt;

&lt;p&gt;This test hasn&apos;t failed since the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12222&quot; title=&quot;TestDistributedSearch failure: &amp;quot;Expected to find shardAddress in the up shard info&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12222&quot;&gt;&lt;del&gt;SOLR-12222&lt;/del&gt;&lt;/a&gt; were committed&lt;/p&gt;</comment>
                            <comment id="16580399" author="jira-bot" created="Tue, 14 Aug 2018 20:27:24 +0000"  >&lt;p&gt;Commit 6db3d9fdd0e955bf496ac7903d0093b16a7be593 in lucene-solr&apos;s branch refs/heads/branch_7x from Tomas Fernandez Lobbe&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=6db3d9f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=6db3d9f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12222&quot; title=&quot;TestDistributedSearch failure: &amp;quot;Expected to find shardAddress in the up shard info&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12222&quot;&gt;&lt;del&gt;SOLR-12222&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12028&quot; title=&quot;BadApple and AwaitsFix annotations usage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12028&quot;&gt;&lt;del&gt;SOLR-12028&lt;/del&gt;&lt;/a&gt;: Remove @BaddApple annotation from TestDistributedSearch&lt;/p&gt;

&lt;p&gt;This test hasn&apos;t failed since the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12222&quot; title=&quot;TestDistributedSearch failure: &amp;quot;Expected to find shardAddress in the up shard info&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12222&quot;&gt;&lt;del&gt;SOLR-12222&lt;/del&gt;&lt;/a&gt; were committed&lt;/p&gt;</comment>
                            <comment id="16580401" author="jira-bot" created="Tue, 14 Aug 2018 20:27:28 +0000"  >&lt;p&gt;Commit 6db3d9fdd0e955bf496ac7903d0093b16a7be593 in lucene-solr&apos;s branch refs/heads/branch_7x from Tomas Fernandez Lobbe&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=6db3d9f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=6db3d9f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12222&quot; title=&quot;TestDistributedSearch failure: &amp;quot;Expected to find shardAddress in the up shard info&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12222&quot;&gt;&lt;del&gt;SOLR-12222&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12028&quot; title=&quot;BadApple and AwaitsFix annotations usage&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12028&quot;&gt;&lt;del&gt;SOLR-12028&lt;/del&gt;&lt;/a&gt;: Remove @BaddApple annotation from TestDistributedSearch&lt;/p&gt;

&lt;p&gt;This test hasn&apos;t failed since the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12222&quot; title=&quot;TestDistributedSearch failure: &amp;quot;Expected to find shardAddress in the up shard info&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12222&quot;&gt;&lt;del&gt;SOLR-12222&lt;/del&gt;&lt;/a&gt; were committed&lt;/p&gt;</comment>
                            <comment id="16580452" author="erickerickson" created="Tue, 14 Aug 2018 21:27:37 +0000"  >&lt;p&gt;Great, thanks! I&apos;ll pick up tests that don&apos;t fail and un-BadApple them, but not for 4-5 weeks so any time you think something is fixed, feel free...&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12919032" name="SOLR-12222.patch" size="1963" author="tflobbe" created="Fri, 13 Apr 2018 23:20:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 14 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3si7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>