<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:52:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16473] Race condition in shard split when a sub-shard is put in recovery state</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16473</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;There is a race condition in shard splits code when a sub-shard is put in RECOVERY state and the remaining replicas are added. The problem is that the code does not wait to ensure the sub-shard state is indeed changed to RECOVERY.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andyvuong&quot; class=&quot;user-hover&quot; rel=&quot;andyvuong&quot;&gt;andyvuong&lt;/a&gt; reproduced the bug by adding some artificial delay, and this race condition seems to be the root cause of indexing holes.&lt;/p&gt;

&lt;p&gt;The fix is to wait for the RECOVERY state.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13487038">SOLR-16473</key>
            <summary>Race condition in shard split when a sub-shard is put in recovery state</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="broustant">Bruno Roustant</assignee>
                                    <reporter username="broustant">Bruno Roustant</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Oct 2022 09:42:32 +0000</created>
                <updated>Mon, 27 Mar 2023 18:04:23 +0000</updated>
                            <resolved>Tue, 6 Dec 2022 13:17:26 +0000</resolved>
                                                    <fixVersion>9.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="17643460" author="jira-bot" created="Mon, 5 Dec 2022 17:03:19 +0000"  >&lt;p&gt;Commit 4519c1fcb050c4b2bbcb21e3c2583455fbfdb3a2 in solr&apos;s branch refs/heads/main from Bruno Roustant&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=4519c1fcb05&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=4519c1fcb05&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16473&quot; title=&quot;Race condition in shard split when a sub-shard is put in recovery state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16473&quot;&gt;&lt;del&gt;SOLR-16473&lt;/del&gt;&lt;/a&gt;: Fix race condition in shard split when a sub-shard is put in recovery state.&lt;/p&gt;

&lt;p&gt;Co-authored-by: Andy Vuong &amp;lt;a.vuong@salesforce.com&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17644119" author="jira-bot" created="Wed, 7 Dec 2022 03:43:26 +0000"  >&lt;p&gt;Commit 4519c1fcb050c4b2bbcb21e3c2583455fbfdb3a2 in solr&apos;s branch refs/heads/jira/SOLR_16575_createnodeset_in_splitshard from Bruno Roustant&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=4519c1fcb05&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=4519c1fcb05&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16473&quot; title=&quot;Race condition in shard split when a sub-shard is put in recovery state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16473&quot;&gt;&lt;del&gt;SOLR-16473&lt;/del&gt;&lt;/a&gt;: Fix race condition in shard split when a sub-shard is put in recovery state.&lt;/p&gt;

&lt;p&gt;Co-authored-by: Andy Vuong &amp;lt;a.vuong@salesforce.com&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17651612" author="jira-bot" created="Fri, 23 Dec 2022 11:12:38 +0000"  >&lt;p&gt;Commit 6d68598cce17f691f020b4e99b1a9f775bb71b7f in solr&apos;s branch refs/heads/branch_9x from Bruno Roustant&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=6d68598cce1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=6d68598cce1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16473&quot; title=&quot;Race condition in shard split when a sub-shard is put in recovery state&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16473&quot;&gt;&lt;del&gt;SOLR-16473&lt;/del&gt;&lt;/a&gt;: Fix race condition in shard split when a sub-shard is put in recovery state.&lt;/p&gt;

&lt;p&gt;Co-authored-by: Andy Vuong &amp;lt;a.vuong@salesforce.com&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17705598" author="houston" created="Mon, 27 Mar 2023 18:04:23 +0000"  >&lt;p&gt;Closing after the 9.2.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z19hs0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>