<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:59:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6784] Problems with BBoxField</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6784</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6183&quot; title=&quot;Add spatial BBoxField using BBoxSpatialStrategy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6183&quot;&gt;&lt;del&gt;SOLR-6183&lt;/del&gt;&lt;/a&gt; introduced the new BBoxField type which allows the indexing of geospatial areas. However, upon trying it out I found numerous problems.&lt;/p&gt;

&lt;p&gt;First off, as described already by me in &lt;a href=&quot;https://mail-archives.apache.org/mod_mbox/lucene-solr-user/201411.mbox/%3C5471C611.9030708%40gmx.net%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;the solr-user mailing list&lt;/a&gt; and by David Smiley in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6781&quot; title=&quot;BBoxField doesn&amp;#39;t support dynamic fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6781&quot;&gt;&lt;del&gt;SOLR-6781&lt;/del&gt;&lt;/a&gt;, indexing doesn&apos;t work with dynamic fields.&lt;/p&gt;

&lt;p&gt;However, the problems continue after that: when searching, for some reason it seems the &lt;tt&gt;score&lt;/tt&gt; local parameter is necessary for filters on BBoxField fields to work. (Even for &lt;tt&gt;fq&lt;/tt&gt; parameters, where a score makes of course no sense at all.) Otherwise, you get an unhelpful exception like this one:&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at org.apache.solr.schema.BBoxField.getValueSourceFromSpatialArgs(BBoxField.java:114)&lt;br/&gt;
	at org.apache.solr.schema.BBoxField.getValueSourceFromSpatialArgs(BBoxField.java:34)&lt;br/&gt;
	at org.apache.solr.schema.AbstractSpatialFieldType.getQueryFromSpatialArgs(AbstractSpatialFieldType.java:269)&lt;br/&gt;
	at org.apache.solr.schema.AbstractSpatialFieldType.createSpatialQuery(AbstractSpatialFieldType.java:223)&lt;br/&gt;
	at org.apache.solr.search.SpatialFilterQParser.parse(SpatialFilterQParser.java:82)&lt;br/&gt;
	at org.apache.solr.search.QParser.getQuery(QParser.java:141)&lt;br/&gt;
	at org.apache.solr.handler.component.QueryComponent.prepare(QueryComponent.java:194)&lt;br/&gt;
	at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:197)&lt;br/&gt;
	at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135)&lt;br/&gt;
	at org.apache.solr.core.SolrCore.execute(SolrCore.java:1967)&lt;br/&gt;
	at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:777)&lt;br/&gt;
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:418)&lt;br/&gt;
	at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:207)&lt;br/&gt;
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1419)&lt;br/&gt;
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455)&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)&lt;br/&gt;
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:557)&lt;br/&gt;
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1075)&lt;br/&gt;
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:384)&lt;br/&gt;
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1009)&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)&lt;br/&gt;
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)&lt;br/&gt;
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)&lt;br/&gt;
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)&lt;br/&gt;
	at org.eclipse.jetty.server.Server.handle(Server.java:368)&lt;br/&gt;
	at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:489)&lt;br/&gt;
	at org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:53)&lt;br/&gt;
	at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:942)&lt;br/&gt;
	at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:1004)&lt;br/&gt;
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:640)&lt;br/&gt;
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)&lt;br/&gt;
	at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)&lt;br/&gt;
	at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)&lt;br/&gt;
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)&lt;br/&gt;
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:745)&lt;/p&gt;

&lt;p&gt;This is true for both the &lt;tt&gt;!field&lt;/tt&gt; and the &lt;tt&gt;!bbox&lt;/tt&gt; query parser - even though the latter doesn&apos;t even allow the &lt;tt&gt;score&lt;/tt&gt; parameter normally. Using the range syntax for filtering on BBoxField fields is not possible at all, as far as I can see, since there is no way to pass a &lt;tt&gt;score&lt;/tt&gt; parameter.&lt;/p&gt;

&lt;p&gt;If you use a wrong value for &lt;tt&gt;score&lt;/tt&gt;, you get the following error message (sic!):&lt;/p&gt;

&lt;p&gt;&apos;score&apos; local-param must be one of &apos;none&apos;, &apos;distance&apos;, or &apos;recipDistance&apos;&lt;/p&gt;

&lt;p&gt;Finally, only three of the four operators seem to work. When trying the &lt;tt&gt;DisjointTo&lt;/tt&gt; (copied verbatim from the wiki page) operator, I got the following exception:&lt;/p&gt;

&lt;p&gt;java.lang.IllegalArgumentException: Unknown Operation: DisjointTo&lt;/p&gt;</description>
                <environment></environment>
        <key id="12757401">SOLR-6784</key>
            <summary>Problems with BBoxField</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dsmiley">David Smiley</assignee>
                                    <reporter username="drunken monkey">Thomas Seidl</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Nov 2014 13:41:20 +0000</created>
                <updated>Mon, 23 Feb 2015 05:01:34 +0000</updated>
                            <resolved>Tue, 25 Nov 2014 18:57:49 +0000</resolved>
                                    <version>4.10.2</version>
                                    <fixVersion>4.10.3</fixVersion>
                    <fixVersion>5.0</fixVersion>
                                    <component>spatial</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14223017" author="dsmiley" created="Mon, 24 Nov 2014 14:27:31 +0000"  >&lt;p&gt;Woops, &quot;DisjointTo&quot; should have been &lt;tt&gt;Disjoint&lt;/tt&gt;!  I&apos;ll fix the ref guide.&lt;/p&gt;

&lt;p&gt;The other problem pertaining to &apos;score&apos; being required is a simple bug I&apos;ll fix.  And the error message for a wrong &apos;score&apos; value isn&apos;t appropriate for this field... I&apos;ll fix that.&lt;/p&gt;</comment>
                            <comment id="14224633" author="dsmiley" created="Tue, 25 Nov 2014 14:53:00 +0000"  >&lt;p&gt;Fixed, and with a good deal more testing around this.  Includes helpful error message dependent on the spatial field type.&lt;br/&gt;
I&apos;ll commit later.&lt;/p&gt;</comment>
                            <comment id="14224987" author="jira-bot" created="Tue, 25 Nov 2014 18:49:12 +0000"  >&lt;p&gt;Commit 1641670 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1641670&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1641670&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6784&quot; title=&quot;Problems with BBoxField&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6784&quot;&gt;&lt;del&gt;SOLR-6784&lt;/del&gt;&lt;/a&gt;: BBoxField&apos;s &apos;score&apos; mode should have been optional.&lt;/p&gt;</comment>
                            <comment id="14224991" author="jira-bot" created="Tue, 25 Nov 2014 18:53:13 +0000"  >&lt;p&gt;Commit 1641673 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1641673&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1641673&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6784&quot; title=&quot;Problems with BBoxField&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6784&quot;&gt;&lt;del&gt;SOLR-6784&lt;/del&gt;&lt;/a&gt;: BBoxField&apos;s &apos;score&apos; mode should have been optional.&lt;/p&gt;</comment>
                            <comment id="14225003" author="jira-bot" created="Tue, 25 Nov 2014 18:57:35 +0000"  >&lt;p&gt;Commit 1641674 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt; in branch &apos;dev/branches/lucene_solr_4_10&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1641674&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1641674&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6784&quot; title=&quot;Problems with BBoxField&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6784&quot;&gt;&lt;del&gt;SOLR-6784&lt;/del&gt;&lt;/a&gt;: BBoxField&apos;s &apos;score&apos; mode should have been optional.&lt;/p&gt;</comment>
                            <comment id="14332722" author="anshumg" created="Mon, 23 Feb 2015 05:01:34 +0000"  >&lt;p&gt;Bulk close after 5.0 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12683564" name="SOLR-6784__Bugfix-_BBoxField_didn_t_support_score=none.patch" size="10181" author="dsmiley" created="Tue, 25 Nov 2014 14:53:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22pqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>