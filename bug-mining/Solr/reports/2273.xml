<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:01:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6937] In schemaless mode ,replace spaces and special characters in field names with underscore</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6937</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Assuming spaces in field names are still bad, we should automatically convert them to not have spaces.  For instance, I indexed Citibike public data set which has: &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&quot;tripduration&quot;,&quot;starttime&quot;,&quot;stoptime&quot;,&quot;start station id&quot;,&quot;start station name&quot;,&quot;start station latitude&quot;,&quot;start station longitude&quot;,&quot;end station id&quot;,&quot;end station name&quot;,&quot;end station latitude&quot;,&quot;end station longitude&quot;,&quot;bikeid&quot;,&quot;usertype&quot;,&quot;birth year&quot;,&quot;gender&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;My vote would be to replace spaces w/ underscores.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12765931">SOLR-6937</key>
            <summary>In schemaless mode ,replace spaces and special characters in field names with underscore</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="noble.paul">Noble Paul</assignee>
                                    <reporter username="gsingers">Grant Ingersoll</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Jan 2015 03:02:37 +0000</created>
                <updated>Mon, 9 May 2016 18:53:49 +0000</updated>
                            <resolved>Wed, 14 Jan 2015 08:08:44 +0000</resolved>
                                                    <fixVersion>5.0</fixVersion>
                    <fixVersion>5.1</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>Schema and Analysis</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14270662" author="hossman" created="Fri, 9 Jan 2015 06:56:15 +0000"  >&lt;blockquote&gt;&lt;p&gt;My vote would be to replace spaces w/ underscores.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Could probably be solved with a ~6 line subclass of FieldMutatingUpdateProcessor&lt;/p&gt;</comment>
                            <comment id="14273713" author="ehatcher" created="Mon, 12 Jan 2015 15:56:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman_lucene%40fucit.org&quot; class=&quot;user-hover&quot; rel=&quot;hossman_lucene@fucit.org&quot;&gt;hossman_lucene@fucit.org&lt;/a&gt;, I tried this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;NormalizeFieldNameUpdateProcessorFactory &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; FieldMutatingUpdateProcessorFactory {
  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; UpdateRequestProcessor getInstance(SolrQueryRequest req, SolrQueryResponse rsp, UpdateRequestProcessor next) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FieldMutatingUpdateProcessor(getSelector(), next) {
      @Override
      &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; SolrInputField mutate(SolrInputField src) {
        src.setName(src.getName().replace(&lt;span class=&quot;code-quote&quot;&gt;&apos; &apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;_&apos;&lt;/span&gt;));
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; src;
      }
   };
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And got this error: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;lst name=&lt;span class=&quot;code-quote&quot;&gt;&quot;error&quot;&lt;/span&gt;&amp;gt;&amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;msg&quot;&lt;/span&gt;&amp;gt;mutate returned field with different name: field with spaces =&amp;amp;gt; field_with_spaces&amp;lt;/str&amp;gt;&amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;trace&quot;&lt;/span&gt;&amp;gt;org.apache.solr.common.SolrException: mutate returned field with different name: field with spaces =&amp;amp;gt; field_with_spaces...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Are there problems that would result when changing the name of a field in FieldMutatingUpdateProcessor?&lt;/p&gt;</comment>
                            <comment id="14273823" author="hossman" created="Mon, 12 Jan 2015 17:41:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;Are there problems that would result when changing the name of a field in FieldMutatingUpdateProcessor?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;i suspect i put that in as a sanity check to protect the the surface area of the API &amp;#8211; i don&apos;t know if relaxing that will cause problems, or if it&apos;s just something that&apos;s there because the ramifications of allowing it aren&apos;t really well tested in the rest of the FieldMutating code paths.&lt;/p&gt;

&lt;p&gt;in particular: what does it mean? should the old field name be removed? should the corisponding field:value pair be rmeoved, but other instances of that field:value2 be left in (ie: what if the mutator renames one instance of the field but not another?)&lt;/p&gt;

&lt;p&gt;easiest thing would probably be to implement field renaming it as a complete one-off special UpdateProcessor w/o using hte FieldMutating framework (ie: no config, just something barebones for use in schemaless that can maybe later be re-parented in the class hierarchy to support more config options)&lt;/p&gt;</comment>
                            <comment id="14275208" author="noble.paul" created="Tue, 13 Jan 2015 13:53:51 +0000"  >&lt;p&gt;A new URP called FieldNameMutatingUpdateProcessorFactory&lt;br/&gt;
example configuration to replace spaces  with underscores&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;processor class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.FieldNameMutatingUpdateProcessorFactory&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;pattern&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;\s&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/str&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;replacement&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;_&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/str&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/processor&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;no test cases yet&lt;/p&gt;</comment>
                            <comment id="14275348" author="ehatcher" created="Tue, 13 Jan 2015 15:14:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt;] - looks good!   The pattern should be expanded to include all the funky/problematic/illegal characters before committing, but in general +1.&lt;/p&gt;</comment>
                            <comment id="14275357" author="noble.paul" created="Tue, 13 Jan 2015 15:17:19 +0000"  >&lt;p&gt;The only catch is , if there are multiple patterns  to match you need multiple &lt;tt&gt;&amp;lt;processor&amp;gt;&lt;/tt&gt; tags . I hope it is OK&lt;/p&gt;</comment>
                            <comment id="14275418" author="gsingers" created="Tue, 13 Jan 2015 15:46:21 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14276525" author="noble.paul" created="Wed, 14 Jan 2015 05:56:15 +0000"  >&lt;p&gt;with tests &lt;br/&gt;
and now replaces all non word chars except hyphen &lt;tt&gt;-&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="14276627" author="jira-bot" created="Wed, 14 Jan 2015 08:02:45 +0000"  >&lt;p&gt;Commit 1651587 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1651587&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1651587&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6937&quot; title=&quot;In schemaless mode ,replace spaces and special characters in field names with underscore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6937&quot;&gt;&lt;del&gt;SOLR-6937&lt;/del&gt;&lt;/a&gt; In schemaless mode ,replace spaces and special characters with underscore&lt;/p&gt;</comment>
                            <comment id="14276630" author="jira-bot" created="Wed, 14 Jan 2015 08:05:45 +0000"  >&lt;p&gt;Commit 1651588 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1651588&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1651588&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6937&quot; title=&quot;In schemaless mode ,replace spaces and special characters in field names with underscore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6937&quot;&gt;&lt;del&gt;SOLR-6937&lt;/del&gt;&lt;/a&gt; In schemaless mode ,replace spaces and special characters with underscore&lt;/p&gt;</comment>
                            <comment id="14276631" author="jira-bot" created="Wed, 14 Jan 2015 08:08:14 +0000"  >&lt;p&gt;Commit 1651589 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/branches/lucene_solr_5_0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1651589&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1651589&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6937&quot; title=&quot;In schemaless mode ,replace spaces and special characters in field names with underscore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6937&quot;&gt;&lt;del&gt;SOLR-6937&lt;/del&gt;&lt;/a&gt; In schemaless mode ,replace spaces and special characters with underscore&lt;/p&gt;</comment>
                            <comment id="14276883" author="jira-bot" created="Wed, 14 Jan 2015 12:56:43 +0000"  >&lt;p&gt;Commit 1651646 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1651646&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1651646&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6937&quot; title=&quot;In schemaless mode ,replace spaces and special characters in field names with underscore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6937&quot;&gt;&lt;del&gt;SOLR-6937&lt;/del&gt;&lt;/a&gt; don&apos;t replace periods&lt;/p&gt;</comment>
                            <comment id="14276884" author="jira-bot" created="Wed, 14 Jan 2015 12:58:27 +0000"  >&lt;p&gt;Commit 1651647 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1651647&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1651647&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6937&quot; title=&quot;In schemaless mode ,replace spaces and special characters in field names with underscore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6937&quot;&gt;&lt;del&gt;SOLR-6937&lt;/del&gt;&lt;/a&gt; don&apos;t replace periods&lt;/p&gt;</comment>
                            <comment id="14276885" author="jira-bot" created="Wed, 14 Jan 2015 13:00:02 +0000"  >&lt;p&gt;Commit 1651648 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/branches/lucene_solr_5_0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1651648&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1651648&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6937&quot; title=&quot;In schemaless mode ,replace spaces and special characters in field names with underscore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6937&quot;&gt;&lt;del&gt;SOLR-6937&lt;/del&gt;&lt;/a&gt; don&apos;t replace periods&lt;/p&gt;</comment>
                            <comment id="14281470" author="jira-bot" created="Sat, 17 Jan 2015 18:10:35 +0000"  >&lt;p&gt;Commit 1652651 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/branches/lucene_solr_5_0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1652651&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1652651&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;reverting &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6937&quot; title=&quot;In schemaless mode ,replace spaces and special characters in field names with underscore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6937&quot;&gt;&lt;del&gt;SOLR-6937&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14282426" author="jira-bot" created="Mon, 19 Jan 2015 11:44:01 +0000"  >&lt;p&gt;Commit 1652967 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/branches/lucene_solr_5_0&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1652967&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1652967&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6937&quot; title=&quot;In schemaless mode ,replace spaces and special characters in field names with underscore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6937&quot;&gt;&lt;del&gt;SOLR-6937&lt;/del&gt;&lt;/a&gt; In schemaless mode ,replace spaces and special characters with underscore, This impacts usability so ,it is voted to be in 5.0&lt;/p&gt;</comment>
                            <comment id="14332675" author="anshumg" created="Mon, 23 Feb 2015 05:01:16 +0000"  >&lt;p&gt;Bulk close after 5.0 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12692162" name="SOLR-6937.patch" size="9077" author="noble.paul" created="Wed, 14 Jan 2015 05:56:15 +0000"/>
                            <attachment id="12691946" name="SOLR-6937.patch" size="5367" author="noble.paul" created="Tue, 13 Jan 2015 13:53:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i243vz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>