<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:42:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-14099] @LogLevel annotation not properly reseting after end of test (causes LoggingHandlerTest.testLogLevelHandlerOutput failures)</title>
                <link>https://issues.apache.org/jira/browse/SOLR-14099</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;We&apos;ve seen a recent uptick in jenkins failures from &lt;tt&gt;LoggingHandlerTest.testLogLevelHandlerOutput&lt;/tt&gt; that indicate the @LogLevel usage in other tests that have run earlier in the same JVM are &lt;em&gt;NOT&lt;/em&gt; properly being reset when those tests complete.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13274816">SOLR-14099</key>
            <summary>@LogLevel annotation not properly reseting after end of test (causes LoggingHandlerTest.testLogLevelHandlerOutput failures)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Dec 2019 18:26:31 +0000</created>
                <updated>Tue, 24 Mar 2020 12:46:52 +0000</updated>
                            <resolved>Tue, 17 Dec 2019 22:11:37 +0000</resolved>
                                                    <fixVersion>8.5</fixVersion>
                    <fixVersion>9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16997534" author="hossman" created="Mon, 16 Dec 2019 18:34:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13662&quot; title=&quot;Package manager CLI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13662&quot;&gt;&lt;del&gt;SOLR-13662&lt;/del&gt;&lt;/a&gt; added &lt;tt&gt;@LogLevel(&quot;org.apache=INFO&quot;)&lt;/tt&gt; to &lt;tt&gt;PackageManagerCLITest&lt;/tt&gt; and since that time, we&apos;ve seen a big uptick in failures from &lt;tt&gt;LoggingHandlerTest.testLogLevelHandlerOutput&lt;/tt&gt; which tries to assert that the level of the &lt;tt&gt;&quot;org.apache&quot;&lt;/tt&gt; handler (in default solr operation) should be reported as &lt;tt&gt;null&lt;/tt&gt; ...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=LoggingHandlerTest -Dtests.method=testLogLevelHandlerOutput -Dtests.seed=AF55E044D1AF1B63 -Dtests.multiplier=2 -Dtests.slow=true -Dtests.locale=en-BZ -Dtests.timezone=US/Mountain -Dtests.asserts=true -Dtests.file.encoding=UTF-8
   [junit4] ERROR   0.16s J1 | LoggingHandlerTest.testLogLevelHandlerOutput &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.RuntimeException: Exception during query
   [junit4]    &amp;gt;        at __randomizedtesting.SeedInfo.seed([AF55E044D1AF1B63:340EA5CC8C1EA59A]:0)
   [junit4]    &amp;gt;        at org.apache.solr.SolrTestCaseJ4.assertQ(SolrTestCaseJ4.java:1002)
   [junit4]    &amp;gt;        at org.apache.solr.handler.admin.LoggingHandlerTest.testLogLevelHandlerOutput(LoggingHandlerTest.java:55)
   [junit4]    &amp;gt;        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
   [junit4]    &amp;gt;        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
   [junit4]    &amp;gt;        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
   [junit4]    &amp;gt;        at java.base/java.lang.reflect.Method.invoke(Method.java:566)
   [junit4]    &amp;gt;        at java.base/java.lang.Thread.run(Thread.java:834)
   [junit4]    &amp;gt; Caused by: java.lang.RuntimeException: REQUEST FAILED: xpath=//arr[@name=&apos;loggers&apos;]/lst/str[.=&apos;org.apache&apos;]/../null[@name=&apos;level&apos;]
   [junit4]    &amp;gt;        xml response was: &amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
...
&amp;lt;lst&amp;gt;&amp;lt;str name=&quot;name&quot;&amp;gt;org.apache&amp;lt;/str&amp;gt;&amp;lt;str name=&quot;level&quot;&amp;gt;INFO&amp;lt;/str&amp;gt;&amp;lt;bool name=&quot;set&quot;&amp;gt;true&amp;lt;/bool&amp;gt;&amp;lt;/lst&amp;gt;
...

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...the only commonality in all of these jenkins failures is that &lt;tt&gt;PackageManagerCLITest&lt;/tt&gt; had previously run in the same JVM.&lt;/p&gt;

&lt;p&gt;This is trivially to reproduce locally when that &lt;tt&gt;@LogLevel(&quot;org.apache=INFO&quot;)&lt;/tt&gt; annotation is in place when &lt;tt&gt;PackageManagerCLITest&lt;/tt&gt; ...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hossman@slate:~/lucene/alt_dev/solr/core [j11] [master] $ git rev-parse HEAD
b5a2cfba4fd9d9443eaf07e4c93540aaed1c3634
hossman@slate:~/lucene/alt_dev/solr/core [j11] [master] $ ant test -Dtests.jvms=1 -Dtests.multiplier=3 -Dtests.nightly=true &apos;-Dtests.class=*PackageManagerCLITest|*LoggingHandlerTest&apos; -Dtests.seed=4E701C1576F92787
...
   [junit4] Tests with failures [seed: 4E701C1576F92787]:
   [junit4]   - org.apache.solr.handler.admin.LoggingHandlerTest.testLogLevelHandlerOutput
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...but both tests pass just fine if the annotation is removed&lt;/p&gt;

&lt;p&gt;Something is clearly wrong with &lt;tt&gt;@LogLevel&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16997548" author="risdenk" created="Mon, 16 Dec 2019 18:50:27 +0000"  >&lt;p&gt;This also explains a lot of the conversation in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14096&quot; title=&quot;DistribPackageStore attempts to create filestore in read-only directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14096&quot;&gt;&lt;del&gt;SOLR-14096&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16997554" author="hossman" created="Mon, 16 Dec 2019 19:03:07 +0000"  >&lt;p&gt;I don&apos;t understand teh root bug yet, but i&apos;m attaching a patch that at least works around the bug in LoggingHandlerTest.&lt;/p&gt;

&lt;p&gt;Unless there are any objections, i&apos;ll commit and backport this ASAP to all affected branches aand then try to figure out the actual bug.&lt;/p&gt;</comment>
                            <comment id="16997559" author="dweiss" created="Mon, 16 Dec 2019 19:05:40 +0000"  >&lt;p&gt;Yes, this seems to be it. &lt;/p&gt;</comment>
                            <comment id="16997566" author="jira-bot" created="Mon, 16 Dec 2019 19:13:22 +0000"  >&lt;p&gt;Commit e6b5da5c12c37dce6f3d767bbafb75b28795ab2f in lucene-solr&apos;s branch refs/heads/master from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=e6b5da5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=e6b5da5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14099&quot; title=&quot;@LogLevel annotation not properly reseting after end of test (causes LoggingHandlerTest.testLogLevelHandlerOutput failures)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14099&quot;&gt;&lt;del&gt;SOLR-14099&lt;/del&gt;&lt;/a&gt;: work around @LogLevel bug in LoggingHandlerTest&lt;/p&gt;</comment>
                            <comment id="16997594" author="jira-bot" created="Mon, 16 Dec 2019 19:50:07 +0000"  >&lt;p&gt;Commit ede8755d444131174976d5983205623df42fff93 in lucene-solr&apos;s branch refs/heads/branch_8_4 from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=ede8755&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=ede8755&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14099&quot; title=&quot;@LogLevel annotation not properly reseting after end of test (causes LoggingHandlerTest.testLogLevelHandlerOutput failures)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14099&quot;&gt;&lt;del&gt;SOLR-14099&lt;/del&gt;&lt;/a&gt;: work around @LogLevel bug in LoggingHandlerTest&lt;/p&gt;

&lt;p&gt;(cherry picked from commit e6b5da5c12c37dce6f3d767bbafb75b28795ab2f)&lt;/p&gt;</comment>
                            <comment id="16997596" author="jira-bot" created="Mon, 16 Dec 2019 19:50:09 +0000"  >&lt;p&gt;Commit be1e6b457b60dc12d94c338944a5ced7103c3f63 in lucene-solr&apos;s branch refs/heads/branch_8x from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=be1e6b4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=be1e6b4&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14099&quot; title=&quot;@LogLevel annotation not properly reseting after end of test (causes LoggingHandlerTest.testLogLevelHandlerOutput failures)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14099&quot;&gt;&lt;del&gt;SOLR-14099&lt;/del&gt;&lt;/a&gt;: work around @LogLevel bug in LoggingHandlerTest&lt;/p&gt;

&lt;p&gt;(cherry picked from commit e6b5da5c12c37dce6f3d767bbafb75b28795ab2f)&lt;/p&gt;</comment>
                            <comment id="16997777" author="hossman" created="Tue, 17 Dec 2019 01:47:17 +0000"  >&lt;p&gt;updated patch:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;additions to TestLogLevelAnnotations demonstrating the bug in isolation&lt;/li&gt;
	&lt;li&gt;fix in LogLevel&lt;/li&gt;
	&lt;li&gt;ndo hackish changes in LoggingHandlerTest and make the test a bit more solid in general
	&lt;ul&gt;
		&lt;li&gt;less sketchy assumptions&lt;/li&gt;
		&lt;li&gt;don&apos;t muck with the log level of &lt;tt&gt;&quot;org.apache.solr.SolrTestCaseJ4&quot;&lt;/tt&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16998154" author="jira-bot" created="Tue, 17 Dec 2019 12:39:31 +0000"  >&lt;p&gt;Commit e6b5da5c12c37dce6f3d767bbafb75b28795ab2f in lucene-solr&apos;s branch refs/heads/gradle-master from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=e6b5da5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=e6b5da5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14099&quot; title=&quot;@LogLevel annotation not properly reseting after end of test (causes LoggingHandlerTest.testLogLevelHandlerOutput failures)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14099&quot;&gt;&lt;del&gt;SOLR-14099&lt;/del&gt;&lt;/a&gt;: work around @LogLevel bug in LoggingHandlerTest&lt;/p&gt;</comment>
                            <comment id="16998384" author="hossman" created="Tue, 17 Dec 2019 16:47:49 +0000"  >&lt;p&gt;updated patch, resolve final nocommit and fix lingering unused imports&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;All tests pass.&lt;/p&gt;</comment>
                            <comment id="16998485" author="lucenesolrqa" created="Tue, 17 Dec 2019 18:52:25 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Prechecks &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; test4tests &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch appears to include 2 new or modified test files. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; master Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m  9s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Patch Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 11s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 11s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Release audit (RAT) &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m  5s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Check forbidden APIs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m  2s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Validate source patterns &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m  2s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Other Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 46m 28s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; core in the patch passed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m 21s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; test-framework in the patch passed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 51m  2s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14099&quot; title=&quot;@LogLevel annotation not properly reseting after end of test (causes LoggingHandlerTest.testLogLevelHandlerOutput failures)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14099&quot;&gt;&lt;del&gt;SOLR-14099&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12989032/SOLR-14099.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12989032/SOLR-14099.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  compile  javac  unit  ratsources  checkforbiddenapis  validatesourcepatterns  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux lucene1-us-west 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-SOLR-Build/sourcedir/dev-tools/test-patch/lucene-solr-yetus-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 33e44b2fd69 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; version: Apache Ant(TM) version 1.10.5 compiled on March 28 2019 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LTS &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Test Results &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/631/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/631/testReport/&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: solr/core solr/test-framework U: solr &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/631/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/631/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.7.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16998625" author="jira-bot" created="Tue, 17 Dec 2019 21:58:59 +0000"  >&lt;p&gt;Commit cc4262a8ec37b2420e1d80a392c5e8019f43e24c in lucene-solr&apos;s branch refs/heads/master from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=cc4262a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=cc4262a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14099&quot; title=&quot;@LogLevel annotation not properly reseting after end of test (causes LoggingHandlerTest.testLogLevelHandlerOutput failures)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14099&quot;&gt;&lt;del&gt;SOLR-14099&lt;/del&gt;&lt;/a&gt;: Fixed @LogLevel annotation in test-framework to correctly &apos;unset&apos; Loggers after test&lt;/p&gt;</comment>
                            <comment id="16998633" author="jira-bot" created="Tue, 17 Dec 2019 22:11:20 +0000"  >&lt;p&gt;Commit d1fa6e1e023cae780bb0eeffe81fefb9c5e2b129 in lucene-solr&apos;s branch refs/heads/branch_8x from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=d1fa6e1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=d1fa6e1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14099&quot; title=&quot;@LogLevel annotation not properly reseting after end of test (causes LoggingHandlerTest.testLogLevelHandlerOutput failures)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14099&quot;&gt;&lt;del&gt;SOLR-14099&lt;/del&gt;&lt;/a&gt;: Fixed @LogLevel annotation in test-framework to correctly &apos;unset&apos; Loggers after test&lt;/p&gt;

&lt;p&gt;(cherry picked from commit cc4262a8ec37b2420e1d80a392c5e8019f43e24c)&lt;/p&gt;</comment>
                            <comment id="16998929" author="dweiss" created="Wed, 18 Dec 2019 08:26:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman&quot; class=&quot;user-hover&quot; rel=&quot;hossman&quot;&gt;hossman&lt;/a&gt; Chris - shouldn&apos;t this be moved into BeforeClass block?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
+  /** 
+   * We don&apos;t want a hardocded assumption here because it may change based on how the user runs the test.
+   */
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Level DEFAULT_LOG_LEVEL = LogManager.getRootLogger().getLevel();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;A static class initializer will be invoked once (per JVM) whereas a BeforeClass block runs before each test class (even if it&apos;s in a shared superclass).&lt;/p&gt;

&lt;p&gt;Don&apos;t know what the intention is here but my gut feeling is that this should be moved inside the initialization block.&lt;/p&gt;
</comment>
                            <comment id="16998954" author="jira-bot" created="Wed, 18 Dec 2019 08:52:17 +0000"  >&lt;p&gt;Commit cc4262a8ec37b2420e1d80a392c5e8019f43e24c in lucene-solr&apos;s branch refs/heads/gradle-master from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=cc4262a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=cc4262a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14099&quot; title=&quot;@LogLevel annotation not properly reseting after end of test (causes LoggingHandlerTest.testLogLevelHandlerOutput failures)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14099&quot;&gt;&lt;del&gt;SOLR-14099&lt;/del&gt;&lt;/a&gt;: Fixed @LogLevel annotation in test-framework to correctly &apos;unset&apos; Loggers after test&lt;/p&gt;</comment>
                            <comment id="16999350" author="hossman" created="Wed, 18 Dec 2019 17:01:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;... shouldn&apos;t this be moved into BeforeClass block?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;As the test is written write now it could be &#8211; but then it would run &lt;em&gt;after&lt;/em&gt; the logic in &lt;tt&gt;@BeforeClass&lt;/tt&gt; methods of superclasses &#8211; like &lt;tt&gt;SolrTestCaseJ4&lt;/tt&gt; where a &lt;tt&gt;@BeforeClass&lt;/tt&gt; method parses &amp;amp; executres the &lt;tt&gt;@LogLevel&lt;/tt&gt; annotation on this test class and mucks with the Loggers&lt;/p&gt;

&lt;p&gt;By making this static final i was trying to avoid that and capture the original default logging level as early as possible, before there is any chance that the &lt;tt&gt;LogLevel&lt;/tt&gt; annotation logic invoked by &lt;tt&gt;SolrTestCaseJ4&lt;/tt&gt; ... ie: exactly your point about it only being invoked once per JVM, ... that&apos;s what i wanted.&lt;/p&gt;

&lt;p&gt;An earlier iteration of this test that i never shared was trying to capture the &quot;DEFAULT&quot; levels of multiple packages before the annotation was run, and ran into that exact problem &#8211; hence I used &lt;tt&gt;static final&lt;/tt&gt; vars. The current test only cares about capture the DEFAULT level of the &quot;root&quot; logger so it&apos;s less of an issue because the LogLevel annotation doesn&apos;t &lt;em&gt;intentionally&lt;/em&gt; muck with the root logger, but it still seemed prudent not to do this in a &lt;tt&gt;@BeforeClass&lt;/tt&gt; to prevent any risk of &quot;contamination&quot; if the Annotation logic is ever broken in the future so that it &lt;em&gt;unintentinally&lt;/em&gt; changes the root logger.&lt;/p&gt;

&lt;p&gt;make sense?&lt;/p&gt;</comment>
                            <comment id="16999409" author="dweiss" created="Wed, 18 Dec 2019 18:13:59 +0000"  >&lt;p&gt;Thanks Chris.&lt;/p&gt;</comment>
                            <comment id="16999591" author="jira-bot" created="Wed, 18 Dec 2019 23:38:24 +0000"  >&lt;p&gt;Commit d30f90e34963f63c07df53df82960f927ab20a8e in lucene-solr&apos;s branch refs/heads/master from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=d30f90e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=d30f90e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14099&quot; title=&quot;@LogLevel annotation not properly reseting after end of test (causes LoggingHandlerTest.testLogLevelHandlerOutput failures)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14099&quot;&gt;&lt;del&gt;SOLR-14099&lt;/del&gt;&lt;/a&gt;: expanded comment on static final variable based on followup questions in Jira from Dawid&lt;/p&gt;</comment>
                            <comment id="16999597" author="jira-bot" created="Wed, 18 Dec 2019 23:49:37 +0000"  >&lt;p&gt;Commit f0714517e4384f5256f8d75185e1539bd0c177e9 in lucene-solr&apos;s branch refs/heads/branch_8x from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=f071451&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=f071451&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14099&quot; title=&quot;@LogLevel annotation not properly reseting after end of test (causes LoggingHandlerTest.testLogLevelHandlerOutput failures)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14099&quot;&gt;&lt;del&gt;SOLR-14099&lt;/del&gt;&lt;/a&gt;: expanded comment on static final variable based on followup questions in Jira from Dawid&lt;/p&gt;

&lt;p&gt;(cherry picked from commit d30f90e34963f63c07df53df82960f927ab20a8e)&lt;/p&gt;</comment>
                            <comment id="17065743" author="romseygeek" created="Tue, 24 Mar 2020 12:46:52 +0000"  >&lt;p&gt;Bulk close for 8.5.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13274761">SOLR-14096</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13247759">SOLR-13662</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12989032" name="SOLR-14099.patch" size="14888" author="hossman" created="Tue, 17 Dec 2019 16:47:31 +0000"/>
                            <attachment id="12988962" name="SOLR-14099.patch" size="15008" author="hossman" created="Tue, 17 Dec 2019 01:45:32 +0000"/>
                            <attachment id="12988949" name="SOLR-14099_test_workaround.patch" size="1263" author="hossman" created="Mon, 16 Dec 2019 19:02:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z09q6g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>