<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:18:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9878] Code smell in if statement</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9878</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;In recent code snapshot (Github mirror&apos;s commit id: c8542b2bd0470af9f8d64bb8133f31828b342604 as today), there is an illogical condition that can be a code smell or a potential bug:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ReversedWildcardFilterFactory fac = leadingWildcards.get(fieldType);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fac != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || leadingWildcards.containsKey(fac)) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; fac;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3492&quot; title=&quot;Caching of ReversedWildcardFilterFactory in SolrQueryParser looks broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3492&quot;&gt;&lt;del&gt;SOLR-3492&lt;/del&gt;&lt;/a&gt;, it said there was a fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4093&quot; title=&quot;localParams syntax for standard query parser&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4093&quot;&gt;&lt;del&gt;SOLR-4093&lt;/del&gt;&lt;/a&gt;. However, the fix still has an issue as above: containsKey will always have null in this if statement. The second condition could be unnecessary. Does leadingWildcards allow a null object as a key? If so, it will return null that might cause NPE in some other locations.&lt;/p&gt;

&lt;p&gt;Patch could be just like in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3492&quot; title=&quot;Caching of ReversedWildcardFilterFactory in SolrQueryParser looks broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3492&quot;&gt;&lt;del&gt;SOLR-3492&lt;/del&gt;&lt;/a&gt;?:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (fac != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13029228">SOLR-9878</key>
            <summary>Code smell in if statement</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lifove">JC</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Dec 2016 19:08:08 +0000</created>
                <updated>Sat, 8 Jun 2019 15:31:57 +0000</updated>
                            <resolved>Wed, 21 Dec 2016 12:04:38 +0000</resolved>
                                                    <fixVersion>6.4</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15762753" author="tomasflobbe" created="Tue, 20 Dec 2016 00:29:37 +0000"  >&lt;p&gt;Yes, that doesn&apos;t look right. Also, &lt;tt&gt;leadingWildcards&lt;/tt&gt; is defined as:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Map&amp;lt;FieldType, ReversedWildcardFilterFactory&amp;gt; leadingWildcards;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;there is no way to have a ReversedWildcardFilterFactory as key&lt;/p&gt;</comment>
                            <comment id="15765037" author="mkhludnev" created="Tue, 20 Dec 2016 19:30:45 +0000"  >&lt;p&gt;what about &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12844115/12844115_SOLR-9878.patch&quot; title=&quot;SOLR-9878.patch attached to SOLR-9878&quot;&gt;SOLR-9878.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;? this fixes caching of nulls. &lt;/p&gt;</comment>
                            <comment id="15765293" author="jira-bot" created="Tue, 20 Dec 2016 21:29:04 +0000"  >&lt;p&gt;Commit f1e636f5611abea66efed896a95eebbb6d765300 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkhludnev&quot; class=&quot;user-hover&quot; rel=&quot;mkhludnev&quot;&gt;mkhludnev&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=f1e636f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=f1e636f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9878&quot; title=&quot;Code smell in if statement&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9878&quot;&gt;&lt;del&gt;SOLR-9878&lt;/del&gt;&lt;/a&gt;: fix ReversedWildcardFilterFactory caching in query parser&lt;/p&gt;</comment>
                            <comment id="15765346" author="jira-bot" created="Tue, 20 Dec 2016 21:50:58 +0000"  >&lt;p&gt;Commit 1e22dd25bf20844c71648c39028c48d2a9aa4e58 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkhludnev&quot; class=&quot;user-hover&quot; rel=&quot;mkhludnev&quot;&gt;mkhludnev&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=1e22dd2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=1e22dd2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9878&quot; title=&quot;Code smell in if statement&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9878&quot;&gt;&lt;del&gt;SOLR-9878&lt;/del&gt;&lt;/a&gt;: fix ReversedWildcardFilterFactory caching in query parser&lt;/p&gt;</comment>
                            <comment id="15765487" author="lifove" created="Tue, 20 Dec 2016 22:54:01 +0000"  >&lt;p&gt;I&apos;m wondering why the second condition, &quot;|| leadingWildcards.containsKey(fieldType)&quot; still required.&lt;br/&gt;
The second condition can be reached only when fac is null. Can leadingWildcards.get(fieldType) have null when leadingWildcards.containsKey(fieldType) is true? If yes, this method will return null in this case. (Is this intended?) Since I don&apos;t have domain knowledge about this project, I just wanted to confirm this. If no, the second condition might not be necessary since when fac is null,  leadingWildcards.containsKey(fieldType) is always false. It&apos;s quite confusing.&lt;/p&gt;</comment>
                            <comment id="15766287" author="mkhludnev" created="Wed, 21 Dec 2016 06:44:07 +0000"  >&lt;p&gt;when a fieldType doesn&apos;t have RWFF it&apos;s cached as null value and isn&apos;t checked anymore. I agree it&apos;s not obvious and probably over-engineered, but I decided to fix as is. You can check the test which demonstrate this invariant. &lt;br/&gt;
Thanks for reporting.    &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12823869">SOLR-7466</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12844115" name="SOLR-9878.patch" size="4044" author="mkhl" created="Tue, 20 Dec 2016 19:30:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37sbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>