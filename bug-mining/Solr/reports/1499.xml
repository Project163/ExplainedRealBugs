<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:38:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-5135] Deleting a collection should be extra aggressive in the face of failures.</title>
                <link>https://issues.apache.org/jira/browse/SOLR-5135</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Until Zk is the source of truth for the cluster, zk and local node states can get out of whack in certain situations - as a result, sometimes you cannot clean out all of the remnants of a collection to recreate it. For example, if the collection is listed in zk under /collections, but is not in clusterstate.json, you cannot remove or create the collection again due to a early exception in the collection removal chain.&lt;/p&gt;

&lt;p&gt;I think we should probably still return the error - but also delete as much as we can.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12663091">SOLR-5135</key>
            <summary>Deleting a collection should be extra aggressive in the face of failures.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="markrmiller@gmail.com">Mark Miller</reporter>
                        <labels>
                    </labels>
                <created>Sun, 11 Aug 2013 16:39:28 +0000</created>
                <updated>Fri, 19 May 2017 21:44:06 +0000</updated>
                            <resolved>Fri, 16 Aug 2013 18:34:24 +0000</resolved>
                                                    <fixVersion>4.5</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13736374" author="markrmiller@gmail.com" created="Sun, 11 Aug 2013 18:44:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;or create the collection again due&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Seems you can actually create it again - we check existence vs the clusterstate.json rather than the /collections node - we should still remove the remnants though.&lt;/p&gt;</comment>
                            <comment id="13736413" author="markrmiller@gmail.com" created="Sun, 11 Aug 2013 20:39:51 +0000"  >&lt;p&gt;Attached patch adds an attempt to remove the /collections zk node in a finally after trying to remove all of the cores.&lt;/p&gt;</comment>
                            <comment id="13739643" author="jira-bot" created="Wed, 14 Aug 2013 13:11:15 +0000"  >&lt;p&gt;Commit 1513864 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1513864&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1513864&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5135&quot; title=&quot;Deleting a collection should be extra aggressive in the face of failures.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5135&quot;&gt;&lt;del&gt;SOLR-5135&lt;/del&gt;&lt;/a&gt;: Harden Collection API deletion of /collections/$collection ZooKeeper node&lt;/p&gt;</comment>
                            <comment id="13739649" author="jira-bot" created="Wed, 14 Aug 2013 13:14:17 +0000"  >&lt;p&gt;Commit 1513866 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1513866&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1513866&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5135&quot; title=&quot;Deleting a collection should be extra aggressive in the face of failures.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5135&quot;&gt;&lt;del&gt;SOLR-5135&lt;/del&gt;&lt;/a&gt;: Harden Collection API deletion of /collections/$collection ZooKeeper node&lt;/p&gt;</comment>
                            <comment id="13787017" author="jpountz" created="Sat, 5 Oct 2013 10:18:45 +0000"  >&lt;p&gt;4.5 release -&amp;gt; bulk close&lt;/p&gt;</comment>
                            <comment id="13791786" author="ibelakov" created="Thu, 10 Oct 2013 18:00:09 +0000"  >&lt;p&gt;Is there any sort of a workaround for pre 4.5 versions--is there any manual way to clean up a partially deleted collection that is listed in zk under /collections, but is not in clusterstate.json?&lt;/p&gt;</comment>
                            <comment id="13791806" author="markrmiller@gmail.com" created="Thu, 10 Oct 2013 18:21:22 +0000"  >&lt;p&gt;Sure, just remove the /collection/&lt;/p&gt;
{name}
&lt;p&gt; node manually. You can use the zk cmd line tools, the zkcli tool, or a graphical tool (I like the zk eclipse plugin).&lt;/p&gt;</comment>
                            <comment id="13791829" author="ibelakov" created="Thu, 10 Oct 2013 18:43:08 +0000"  >&lt;p&gt;Used the rmr command from the command line, worked like a charm. Thank you, Mark!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13073578">SOLR-10720</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12597373" name="SOLR-5135.patch" size="9260" author="markrmiller@gmail.com" created="Sun, 11 Aug 2013 20:39:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>343092</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 6 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1n62f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>343396</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>