<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:29:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-11458] Bugs in MoveReplicaCmd handling of failures</title>
                <link>https://issues.apache.org/jira/browse/SOLR-11458</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Spin-off from &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11449&quot; title=&quot;MoveReplicaCmd mistakenly calls registerCollectionStateWatcher instead of unregisterCollectionStateWatcher&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11449&quot;&gt;&lt;del&gt;SOLR-11449&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;There&apos;s a section of code in moveNormalReplica that ensures that we don&apos;t lose a shard leader during move. There&apos;s no corresponding protection in moveHdfsReplica, which means that moving a replica that is also a shard leader may potentially lead to data loss (eg. when replicationFactor=1).&lt;br/&gt;
Also, there&apos;s no rollback strategy when moveHdfsReplica partially fails, unlike in moveNormalReplica where the code simply skips deleting the original replica - it seems that the code should attempt to restore the original replica in this case? When RF=1 and such failure occurs then not restoring the original replica means lost shard.&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="13108260">SOLR-11458</key>
            <summary>Bugs in MoveReplicaCmd handling of failures</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ab">Andrzej Bialecki</assignee>
                                    <reporter username="ab">Andrzej Bialecki</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Oct 2017 10:49:01 +0000</created>
                <updated>Sat, 8 Jun 2019 15:13:42 +0000</updated>
                            <resolved>Wed, 6 Dec 2017 14:34:52 +0000</resolved>
                                    <version>7.0</version>
                    <version>7.0.1</version>
                    <version>7.1</version>
                    <version>8.0</version>
                                    <fixVersion>7.2</fixVersion>
                    <fixVersion>8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16251192" author="jira-bot" created="Tue, 14 Nov 2017 10:17:27 +0000"  >&lt;p&gt;Commit 7c54b2b116d6ee0012c598373fed1b93af74caf6 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7c54b2b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7c54b2b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11458&quot; title=&quot;Bugs in MoveReplicaCmd handling of failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11458&quot;&gt;&lt;del&gt;SOLR-11458&lt;/del&gt;&lt;/a&gt;: Improve this test to show the failure to be fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11458&quot; title=&quot;Bugs in MoveReplicaCmd handling of failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11458&quot;&gt;&lt;del&gt;SOLR-11458&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16251193" author="jira-bot" created="Tue, 14 Nov 2017 10:17:29 +0000"  >&lt;p&gt;Commit 7c54b2b116d6ee0012c598373fed1b93af74caf6 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7c54b2b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7c54b2b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11458&quot; title=&quot;Bugs in MoveReplicaCmd handling of failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11458&quot;&gt;&lt;del&gt;SOLR-11458&lt;/del&gt;&lt;/a&gt;: Improve this test to show the failure to be fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11458&quot; title=&quot;Bugs in MoveReplicaCmd handling of failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11458&quot;&gt;&lt;del&gt;SOLR-11458&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16272262" author="caomanhdat" created="Thu, 30 Nov 2017 07:15:50 +0000"  >&lt;p&gt;This bug relates to HDFS lease recovery. When tlog files of a replica (core_node7 in this case) get deleted and get recovered when a new collection of the same name gets created.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; : for newly created core, should we skip lease recovery??&lt;/p&gt;</comment>
                            <comment id="16278563" author="jira-bot" created="Tue, 5 Dec 2017 13:46:19 +0000"  >&lt;p&gt;Commit 41644bdcdcc0734115ce08ec24d6b408e1f8cf28 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=41644bd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=41644bd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11458&quot; title=&quot;Bugs in MoveReplicaCmd handling of failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11458&quot;&gt;&lt;del&gt;SOLR-11458&lt;/del&gt;&lt;/a&gt;: Improve error handling in MoveReplicaCmd to avoid potential loss of data.&lt;/p&gt;</comment>
                            <comment id="16278852" author="ab" created="Tue, 5 Dec 2017 16:55:38 +0000"  >&lt;p&gt;Final patch.&lt;/p&gt;</comment>
                            <comment id="16279139" author="jira-bot" created="Tue, 5 Dec 2017 20:22:14 +0000"  >&lt;p&gt;Commit f2887272d7bd89a453be0697399e5df79cb3a68b in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=f288727&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=f288727&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11458&quot; title=&quot;Bugs in MoveReplicaCmd handling of failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11458&quot;&gt;&lt;del&gt;SOLR-11458&lt;/del&gt;&lt;/a&gt;: Improve error handling in MoveReplicaCmd to avoid potential loss of data.&lt;/p&gt;</comment>
                            <comment id="16280144" author="jpountz" created="Wed, 6 Dec 2017 13:01:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt; I see some commits from yesterday. Is it good to mark as resolved or is there more to do?&lt;/p&gt;</comment>
                            <comment id="16280194" author="shalinmangar" created="Wed, 6 Dec 2017 13:44:49 +0000"  >&lt;p&gt;+1 LGTM&lt;/p&gt;</comment>
                            <comment id="16280256" author="jira-bot" created="Wed, 6 Dec 2017 14:48:17 +0000"  >&lt;p&gt;Commit 5df352f6c13a516f014d8a5fd5205964ea35f310 in lucene-solr&apos;s branch refs/heads/branch_7_2 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=5df352f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=5df352f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11458&quot; title=&quot;Bugs in MoveReplicaCmd handling of failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11458&quot;&gt;&lt;del&gt;SOLR-11458&lt;/del&gt;&lt;/a&gt;: Improve error handling in MoveReplicaCmd to avoid potential loss of data.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13119580">SOLR-11661</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12900720" name="SOLR-11458.diff" size="46909" author="ab" created="Tue, 5 Dec 2017 17:44:46 +0000"/>
                            <attachment id="12900705" name="SOLR-11458.diff" size="46276" author="ab" created="Tue, 5 Dec 2017 16:55:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3l2sv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>