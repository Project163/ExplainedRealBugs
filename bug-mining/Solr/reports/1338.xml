<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:35:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4634] Fix test bugs in Javascript tests to work with Java 8&apos;s Mozilla-Rhino-replacement &quot;Nashorn&quot;</title>
                <link>https://issues.apache.org/jira/browse/SOLR-4634</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;the new Java 8 builds have replaced &quot;Mozilla Rhino&quot; JavaScript engine with &quot;Nashorn&quot; (&lt;a href=&quot;http://openjdk.java.net/projects/nashorn/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://openjdk.java.net/projects/nashorn/&lt;/a&gt;). The tests assume that a specific java type is returned, which is not guaranteed and Rhino-specific. Instead it should only cast to java.lang.Number and not to a specific type. The reason for the difference: Javascript is typeless, it only knows numbers, but not double/integer/...&lt;/p&gt;

&lt;p&gt;The other bug is not explainable to me, I think its some other problem. Il will fix the first one.&lt;/p&gt;


&lt;p&gt;The following tests fail, mostly with &quot;java.lang.Integer cannot be casted to java.lang.Double&quot;:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;org.apache.solr.update.processor.ScriptEngineTest.testEvalText&lt;/li&gt;
	&lt;li&gt;org.apache.solr.update.processor.ScriptEngineTest.testPut&lt;/li&gt;
	&lt;li&gt;org.apache.solr.update.processor.ScriptEngineTest.testEvalReader&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Those fail with some assert problem (method not found, I think the javascript is bogus):&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;org.apache.solr.update.processor.StatelessScriptUpdateProcessorFactoryTest.testSingleScript&lt;/li&gt;
	&lt;li&gt;org.apache.solr.update.processor.StatelessScriptUpdateProcessorFactoryTest.testMultipleScripts&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12638616">SOLR-4634</key>
            <summary>Fix test bugs in Javascript tests to work with Java 8&apos;s Mozilla-Rhino-replacement &quot;Nashorn&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="uschindler">Uwe Schindler</assignee>
                                    <reporter username="uschindler">Uwe Schindler</reporter>
                        <labels>
                            <label>Java8</label>
                    </labels>
                <created>Fri, 22 Mar 2013 23:50:39 +0000</created>
                <updated>Sun, 23 Feb 2014 12:04:00 +0000</updated>
                            <resolved>Sat, 23 Mar 2013 00:55:47 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13611491" author="thetaphi" created="Sat, 23 Mar 2013 00:48:31 +0000"  >&lt;p&gt;This patch fixes both issues and another tye error in DIH:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The fix was to cast to Number and not expect a specific number type&lt;/li&gt;
	&lt;li&gt;In DIH there was a wrong String type expected&lt;/li&gt;
	&lt;li&gt;the problem with assertNotNull not found was a preexisting bug in the script: It tried to call a static method (Assert.assertNotNull) on an instance, which is not allowed by &quot;corect&quot; javascript. I fixed this by directly using org.junit.Assert.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13611494" author="thetaphi" created="Sat, 23 Mar 2013 00:55:47 +0000"  >&lt;p&gt;Committed to 4.x and trunk.&lt;/p&gt;</comment>
                            <comment id="13611506" author="markrmiller@gmail.com" created="Sat, 23 Mar 2013 01:14:15 +0000"  >&lt;p&gt;Thanks Uwe!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12575142" name="SOLR-4634.patch" size="7454" author="uschindler" created="Sat, 23 Mar 2013 00:48:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>319092</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 35 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1j23j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>319433</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>