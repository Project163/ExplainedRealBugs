<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:49:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-8319] NPE when creating pivot</title>
                <link>https://issues.apache.org/jira/browse/SOLR-8319</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I get a NPE, the trace is shown at the end.&lt;/p&gt;

&lt;p&gt;The problem seems to be this line in the getSubset method:&lt;br/&gt;
      Query query = ft.getFieldQuery(null, field, pivotValue);&lt;/p&gt;

&lt;p&gt;Which takes a value from the index and then analyses it to create a query. I believe the problem is that when my analysis process is applied twice it results in a null query. OK this might be seen as my issue because of dodgy analysis, I thought it might be because I have the wrong order with LengthFilterFactory before EnglishPossessiveFilterFactory and KStemFilterFactory, i.e.:&lt;br/&gt;
                &amp;lt;filter class=&quot;solr.LengthFilterFactory&quot; min=&quot;3&quot; max=&quot;32&quot;/&amp;gt;&lt;br/&gt;
                &amp;lt;filter class=&quot;solr.EnglishPossessiveFilterFactory&quot;/&amp;gt;&lt;br/&gt;
                &amp;lt;filter class=&quot;solr.KStemFilterFactory&quot;/&amp;gt; &lt;/p&gt;

&lt;p&gt;So that &quot;cat&apos;s&quot; -&amp;gt; &quot;cat&quot; -&amp;gt; &quot;&quot;, however any filter order I tried still resulted in a NPE, and perhaps there is a viable case where parsing a term twice results in a null query.&lt;/p&gt;

&lt;p&gt;The thing is I don&apos;t see why when the query term comes from the index it has to undergo any analysis. If the term is from the index can it not simply be created using a TermQuery, which I would imagine would also be faster. I altered the &quot;getFieldQuery&quot; line above to the following and that has fixed my NPE issue.&lt;/p&gt;

&lt;p&gt;      Query query = new TermQuery(new Term(field.getName(), pivotValue));&lt;/p&gt;

&lt;p&gt;So far this hasn&apos;t caused any other issues but perhaps that is due to my use of Solr, rather than actually fixing an issue. &lt;/p&gt;



&lt;p&gt;o.a.s.c.SolrCore java.lang.NullPointerException&lt;br/&gt;
        at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:936)&lt;br/&gt;
        at org.apache.solr.util.ConcurrentLRUCache.get(ConcurrentLRUCache.java:91)&lt;br/&gt;
        at org.apache.solr.search.FastLRUCache.get(FastLRUCache.java:130)&lt;br/&gt;
        at org.apache.solr.search.SolrIndexSearcher.getDocSet(SolrIndexSearcher.java:1296)&lt;br/&gt;
        at org.apache.solr.handler.component.PivotFacetProcessor.getSubset(PivotFacetProcessor.java:375)&lt;br/&gt;
        at org.apache.solr.handler.component.PivotFacetProcessor.doPivots(PivotFacetProcessor.java:305)&lt;br/&gt;
        at org.apache.solr.handler.component.PivotFacetProcessor.processSingle(PivotFacetProcessor.java:228)&lt;br/&gt;
        at org.apache.solr.handler.component.PivotFacetProcessor.process(PivotFacetProcessor.java:170)&lt;br/&gt;
        at org.apache.solr.handler.component.FacetComponent.process(FacetComponent.java:262)&lt;br/&gt;
        at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:277)&lt;br/&gt;
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:143)&lt;br/&gt;
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:2068)&lt;br/&gt;
        at org.apache.solr.servlet.HttpSolrCall.execute(HttpSolrCall.java:669)&lt;br/&gt;
        at org.apache.solr.servlet.HttpSolrCall.call(HttpSolrCall.java:462)&lt;br/&gt;
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:214)&lt;br/&gt;
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:179)&lt;br/&gt;
        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652)&lt;br/&gt;
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:585)&lt;br/&gt;
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)&lt;br/&gt;
        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:577)&lt;br/&gt;
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:223)&lt;br/&gt;
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1127)&lt;br/&gt;
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)&lt;br/&gt;
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)&lt;br/&gt;
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1061)&lt;br/&gt;
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)&lt;br/&gt;
        at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:215)&lt;br/&gt;
        at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:110)&lt;br/&gt;
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)&lt;br/&gt;
        at org.eclipse.jetty.server.Server.handle(Server.java:499)&lt;br/&gt;
        at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:310)&lt;br/&gt;
        at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:257)&lt;br/&gt;
        at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540)&lt;br/&gt;
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:635)&lt;br/&gt;
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:555)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12914695">SOLR-8319</key>
            <summary>NPE when creating pivot</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="houston">Houston Putman</assignee>
                                    <reporter username="neilireson">Neil Ireson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Nov 2015 01:04:31 +0000</created>
                <updated>Fri, 1 Apr 2022 15:54:33 +0000</updated>
                            <resolved>Fri, 10 Dec 2021 16:50:26 +0000</resolved>
                                                    <fixVersion>9.0</fixVersion>
                    <fixVersion>8.11.1</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>7</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17079974" author="igiguere" created="Thu, 9 Apr 2020 20:15:49 +0000"  >&lt;p&gt;Finding &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8921&quot; title=&quot;Potential NPE in pivot facet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8921&quot;&gt;&lt;del&gt;SOLR-8921&lt;/del&gt;&lt;/a&gt; resolved gave me hope, I must admit !&lt;/p&gt;

&lt;p&gt;However, on code from Solr tag 8.5.0, I found that the suggested fix in the description :&lt;br/&gt;
org.apache.solr.handler.component.PivotFacetProcessor.getSubset(DocSet, SchemaField, String)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Query query = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TermQuery(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Term(field.getName(), pivotValue));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Causes NPE in org.apache.solr.handler.component.DistributedFacetPivotLargeTest, line 527 (in the test for date-time)&lt;br/&gt;
Possibly because range query works better for date-time values ?&lt;/p&gt;

&lt;p&gt;Existing code in org.apache.solr.handler.component.PivotFacetProcessor.getSubset(DocSet, SchemaField, String)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Query query = ft.getFieldQuery(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, field, pivotValue);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Calls a method which will try to create a range query (for exact match).  Seems enough to save DistributedFacetPivotLargeTest.&lt;/p&gt;

&lt;p&gt;Besides my comment on &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8921&quot; title=&quot;Potential NPE in pivot facet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8921&quot;&gt;&lt;del&gt;SOLR-8921&lt;/del&gt;&lt;/a&gt;, regarding stopwords, I haven&apos;t found any other explanation for the NPE.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8921?focusedCommentId=16657331&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16657331&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SOLR-8921?focusedCommentId=16657331&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16657331&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Personally, for now, I&apos;m still applying the patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8921&quot; title=&quot;Potential NPE in pivot facet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8921&quot;&gt;&lt;del&gt;SOLR-8921&lt;/del&gt;&lt;/a&gt; ... Not because I had something to do with it, but because it doesn&apos;t break anything, including  org.apache.solr.handler.component.DistributedFacetPivotLargeTest &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17087774" author="igiguere" created="Mon, 20 Apr 2020 14:20:28 +0000"  >&lt;p&gt;Patch attached, based on master.  Please read previous comment for details.&lt;/p&gt;</comment>
                            <comment id="17158575" author="ybviavoo" created="Wed, 15 Jul 2020 17:48:46 +0000"  >&lt;p&gt;Solr: 6.6.2&lt;br/&gt;
 Hello guys just to add to the topic. First I would like to thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=igiguere&quot; class=&quot;user-hover&quot; rel=&quot;igiguere&quot;&gt;igiguere&lt;/a&gt;. I have now some hope of fixing this issue myself by patching it if necessary. I have the same problem as reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8921&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SOLR-8921&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;Our system use distributed Solr and our application use faceting on text fields. Faceting on them can return a lot of terms so we used a limit of 50. After testing multiple requests I noticed that playing on facet.limit allowed me to get back values and not a NPE. So I read back again the doc on faceting and google a lot until I found : &lt;a href=&quot;https://stackoverflow.com/a/36779784&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/a/36779784&lt;/a&gt; &lt;br/&gt;
 As sugested in the post, I added over-request parameters &lt;a href=&quot;https://lucene.apache.org/solr/guide/6_6/faceting.html#Faceting-Over-RequestParameters&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lucene.apache.org/solr/guide/6_6/faceting.html#Faceting-Over-RequestParameters&lt;/a&gt; and it is working correctly now. I do not undestand why It has an effect on my request :/ this topic is a bit complicated for me.&lt;br/&gt;
 I hope it can help to bring some light on the problem.&lt;/p&gt;</comment>
                            <comment id="17274551" author="igiguere" created="Fri, 29 Jan 2021 16:21:36 +0000"  >&lt;p&gt;The PR (937) in the linked issue &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13209&quot; title=&quot;NullPointerException from call in org.apache.solr.search.SolrIndexSearcher.getDocSet&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13209&quot;&gt;&lt;del&gt;SOLR-13209&lt;/del&gt;&lt;/a&gt; suggest throwing a SolrException from SolrIndexSearcher.getDocSet(Query), which is certainly more elegant than an NPE.&lt;/p&gt;

&lt;p&gt;I applied PR 937, on Solr 8.7.0, to see if I would get a SolrException for the facet request. I which case, I would have caught the exception, somewhere in the fact pivot processing (we shouldn&apos;t send an error message as a response for a valid facet pivot query).&lt;/p&gt;

&lt;p&gt;But my facet pivot request still ends with NPE. The request goes through SolrIndexSearcher.numDocs(Query, DocSet) and SolrIndexSearcher.getPositiveDocSet(Query) :&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Error from server at null: java.lang.NullPointerException at java.base/java.util.concurrent.ConcurrentHashMap.get(Unknown Source) at org.apache.solr.util.ConcurrentLFUCache.get(ConcurrentLFUCache.java:163) at org.apache.solr.search.LFUCache.get(LFUCache.java:198) at org.apache.solr.search.SolrIndexSearcher.getPositiveDocSet(SolrIndexSearcher.java:846) at org.apache.solr.search.SolrIndexSearcher.numDocs(SolrIndexSearcher.java:2069) at org.apache.solr.handler.component.PivotFacetProcessor.getSubsetSize(PivotFacetProcessor.java:355) at org.apache.solr.handler.component.PivotFacetProcessor.processSingle(PivotFacetProcessor.java:218) at org.apache.solr.handler.component.PivotFacetProcessor.process(PivotFacetProcessor.java:166) at org.apache.solr.handler.component.FacetComponent.process(FacetComponent.java:280) at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:360) at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:214) at org.apache.solr.core.SolrCore.execute(SolrCore.java:2627) at org.apache.solr.servlet.HttpSolrCall.execute(HttpSolrCall.java:795) at org.apache.solr.servlet.HttpSolrCall.call(HttpSolrCall.java:568) at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:415) at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:345)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The fact is, in a facet pivot request, the user has no actual control on the Query that ends up in methods of SolrIndexSearcher. The queries are generated from the facet field content. Checking for null, as in the attached patch, may be the only thing we can do.&lt;/p&gt;

&lt;p&gt;It is strange, however, that setting a value for facet.limit will return results... or an NPE, depending on the value. &lt;br/&gt;
From my experiments, a facet.limit value of -1 returns all results, other values return partial results, but only up to a point, after that, it&apos;s NPE.&lt;br/&gt;
facet.limit value: &lt;br/&gt;
-1 = all results&lt;br/&gt;
0 = no results&lt;br/&gt;
Other value = partial results OR NPE&lt;br/&gt;
1 = 1 result&lt;br/&gt;
2 = 2 results&lt;br/&gt;
3 = 3 results&lt;br/&gt;
4 = NPE&lt;/p&gt;

&lt;p&gt;So... Whatever happens when facet.limit=-1 is handled properly, but for values greater than (what ?) are not.&lt;br/&gt;
Default value for facet.limit is 100.  So, it&apos;s not even handling it&apos;s own default correctly.&lt;/p&gt;</comment>
                            <comment id="17275256" author="houston" created="Fri, 29 Jan 2021 18:43:06 +0000"  >&lt;p&gt;I have done just a bit of digging, but the reason why a null query is returned is because the stop word itself contains no tokens, and &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/lucene/core/src/java/org/apache/lucene/util/QueryBuilder.java#L343&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a query with no tokens gets returned as null&lt;/a&gt;. The default &lt;tt&gt;FieldType.getFieldQuery&lt;/tt&gt; is not used, because &lt;tt&gt;TextField.getFieldQuery&lt;/tt&gt; overrides it. This is the method that eventually (through other methods) calls the null-returning &lt;tt&gt;QueryBuilder.createFieldQuery&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I agree that doing analyzation of a single token is not necessary and can generally be skipped. I think it makes sense to add a method to &lt;tt&gt;FieldType&lt;/tt&gt; that does a non-analyzed field search. From what I can tell, this would only be different from the &lt;tt&gt;FieldType.getFieldQuery&lt;/tt&gt; implementation for &lt;tt&gt;TextField&lt;/tt&gt;. But going through and doing the changes, I noticed that there was a TODO: in another place for this exact use case.&lt;/p&gt;

&lt;p&gt;I think it would also be good to check for null, but I think this is a useful method to have anyways. And after this change there shouldn&apos;t be a code path to return null from that method. I&apos;ll put up a patch with my proposal. &lt;/p&gt;</comment>
                            <comment id="17275262" author="houston" created="Fri, 29 Jan 2021 18:53:54 +0000"  >&lt;p&gt;The reason for the NPE on different values of &lt;tt&gt;facet.limit&lt;/tt&gt; is because of refinements. This logic is only called whenever refinements need to be made for pivot facet results. Refinements are made because the first-pass in getting facet results does not get exact results. It will ask for the top n terms from each shard. If limit=n and the top n terms all have results from all shards, then no refinement is needed, because the top n terms all have exact results. If some of the top n terms are not included in some shard results, then refinement requests have to be sent to those shards to get exact results.&lt;/p&gt;

&lt;p&gt;When limit = -1, then no refinements are done because it asks for all results from every shard.&lt;br/&gt;
When limit &amp;lt;= 3, then the stopword values are not close-enough to the top 3 to need refinements.&lt;br/&gt;
When limit &amp;gt;= 4, then the stopwords are close enough to being selected for the results that they need to be refined.&lt;/p&gt;</comment>
                            <comment id="17275656" author="dsmiley" created="Sat, 30 Jan 2021 15:00:55 +0000"  >&lt;p&gt;Is this basically fall-out from the fact that a QParser.parse is allowed to return null instead of a Query?  A great many NPEs have been caused over the years and still happen today because of this.  I&apos;d prefer in 9.0 forward we change the contract to insist non-null.  Depending on the particular parser, either MatchAllDocs or MatchNoDocs is appropriate.&lt;/p&gt;</comment>
                            <comment id="17276653" author="houston" created="Mon, 1 Feb 2021 21:07:34 +0000"  >&lt;p&gt;The query isn&apos;t coming from QParser.parse. Instead QueryBuilder.createFieldQuery is explicitly returning a null Query in a few code paths, such as when there are no tokens contained within a field search value. This is hit when a stopword is provided as a value.&lt;/p&gt;</comment>
                            <comment id="17440660" author="igiguere" created="Mon, 8 Nov 2021 18:36:02 +0000"  >&lt;p&gt;Thank you for your PR, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=houston&quot; class=&quot;user-hover&quot; rel=&quot;houston&quot;&gt;houston&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I tried it on the Solr 8.10.1 code base.  &lt;br/&gt;
Your PR uses the new method FieldType.getFieldTermQuery(QParser, SchemaField, String in PivotFacetProcessor.getSubsetSize(DocSet base, SchemaField field, String pivotValue). &lt;br/&gt;
The new method  should also be used in method PivotFacetProcessor.getSubset(DocSet, SchemaField, String) (at line ~373).&lt;/p&gt;


&lt;p&gt;Otherwise, +1 on your solution.&lt;/p&gt;</comment>
                            <comment id="17448265" author="igiguere" created="Tue, 23 Nov 2021 21:37:46 +0000"  >&lt;p&gt;New patch is a copy of &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=houston&quot; class=&quot;user-hover&quot; rel=&quot;houston&quot;&gt;houston&lt;/a&gt;&apos;s PR 2273, plus the modification mentionned in my previous comment, plus unit tests.&lt;/p&gt;

&lt;p&gt;I had doubts, momentarily, but I double-checked on my instance, and it works.&lt;/p&gt;</comment>
                            <comment id="17454836" author="houston" created="Tue, 7 Dec 2021 20:41:22 +0000"  >&lt;p&gt;Thanks for the extended patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=igiguere&quot; class=&quot;user-hover&quot; rel=&quot;igiguere&quot;&gt;igiguere&lt;/a&gt;! Always love to see new tests included. In the future, use the same name for all new patches (it will highlight the most recent one, and store the old ones), it makes it easier to understand which patches were actually used.&lt;/p&gt;

&lt;p&gt;Also I am having issues applying your patch. Did you develop on branch_8x (or 8_11) or main? If you were using an older branch, could you try migrating the patch to apache/solr main then uploading? We generally do development on the main branch, then deal with back-porting when necessary.&lt;/p&gt;</comment>
                            <comment id="17454838" author="houston" created="Tue, 7 Dec 2021 20:46:20 +0000"  >&lt;p&gt;Actually ignore me on the patch, figured out how to apply it!&lt;/p&gt;</comment>
                            <comment id="17454856" author="houston" created="Tue, 7 Dec 2021 22:00:47 +0000"  >&lt;p&gt;Ok, so I&apos;ve updated the patch with some small changes. I think this is good to go. Will probably commit later this week. and then likely backport for 8.11.1 (will think about this more)&lt;/p&gt;</comment>
                            <comment id="17455932" author="houston" created="Wed, 8 Dec 2021 18:57:01 +0000"  >&lt;p&gt;I&apos;ve added a changelog entry as well as tests for TermsQProcessor, which uses this new FieldType method and before did not have tests (as far as I can tell).&lt;/p&gt;</comment>
                            <comment id="17456671" author="jira-bot" created="Thu, 9 Dec 2021 18:42:40 +0000"  >&lt;p&gt;Commit 841cbe0b9403c62214c8ead55a31dc5a9119e1e0 in solr&apos;s branch refs/heads/main from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=841cbe0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=841cbe0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8319&quot; title=&quot;NPE when creating pivot&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8319&quot;&gt;&lt;del&gt;SOLR-8319&lt;/del&gt;&lt;/a&gt;: Fix NPE in pivot facets, add non-Analyzed query method in FieldType&lt;/p&gt;

&lt;p&gt;Co-authored-by: Isabelle Giguere &amp;lt;igiguere@opentext.com&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17457260" author="jira-bot" created="Fri, 10 Dec 2021 16:43:45 +0000"  >&lt;p&gt;Commit 20799e737f2ac56e2ff5976e48a8c199a6b42220 in lucene-solr&apos;s branch refs/heads/branch_8_11 from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=20799e7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=20799e7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8319&quot; title=&quot;NPE when creating pivot&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8319&quot;&gt;&lt;del&gt;SOLR-8319&lt;/del&gt;&lt;/a&gt;: Fix NPE in pivot facets, add non-Analyzed query method in FieldType&lt;/p&gt;

&lt;p&gt;Co-authored-by: Isabelle Giguere &amp;lt;igiguere@opentext.com&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17457261" author="jira-bot" created="Fri, 10 Dec 2021 16:49:28 +0000"  >&lt;p&gt;Commit 82f9d473b9e6a9a3a0d423f6cea382517343802d in solr&apos;s branch refs/heads/main from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=82f9d47&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=82f9d47&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8319&quot; title=&quot;NPE when creating pivot&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8319&quot;&gt;&lt;del&gt;SOLR-8319&lt;/del&gt;&lt;/a&gt;: Fix cluster usage in FacetPivot2CollectionsTest&lt;/p&gt;</comment>
                            <comment id="17460760" author="janhoy" created="Thu, 16 Dec 2021 14:14:56 +0000"  >&lt;p&gt;Closing after the 8.11.1 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12954712">SOLR-8921</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13437272">SOLR-16139</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13213147">SOLR-13209</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13036507" name="SOLR-8319-1.patch" size="45166" author="igiguere" created="Tue, 23 Nov 2021 21:34:23 +0000"/>
                            <attachment id="13037092" name="SOLR-8319-2.patch" size="46824" author="houston" created="Tue, 7 Dec 2021 21:59:34 +0000"/>
                            <attachment id="13037147" name="SOLR-8319-3.patch" size="52499" author="houston" created="Wed, 8 Dec 2021 18:56:07 +0000"/>
                            <attachment id="13000569" name="SOLR-8319.patch" size="37795" author="igiguere" created="Mon, 20 Apr 2020 14:19:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 47 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2oofj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>