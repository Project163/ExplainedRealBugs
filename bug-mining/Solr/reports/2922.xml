<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:12:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-8946] bin/post script stdin detection is faulty</title>
                <link>https://issues.apache.org/jira/browse/SOLR-8946</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Summary:  I think the &lt;tt&gt;post&lt;/tt&gt; bash script tries to detect stdin the wrong way.&lt;/p&gt;

&lt;p&gt;If I run &quot;post -h&quot; I see some examples, to include this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;echo &lt;span class=&quot;code-quote&quot;&gt;&apos;{commit: {}}&apos;&lt;/span&gt; | bin/post -c my_collection -type application/json -out yes -d
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However if I try it, Solr returns this error: &lt;tt&gt;Cannot parse provided JSON: JSON Parse Error: char=&amp;lt;,position=0 BEFORE=&apos;&amp;lt;&apos; AFTER=&apos;add/&amp;gt;&apos;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;I see that &lt;tt&gt;post&lt;/tt&gt; is sending an &lt;tt&gt;&amp;lt;add /&amp;gt;&lt;/tt&gt; in certain cases, but it&apos;s not supposed to when the mode is stdin.  Looking closer, it appears to be because of this line:&lt;br/&gt;
&lt;tt&gt;if [[ -s /dev/stdin ]]; then&lt;/tt&gt;&lt;br/&gt;
If I change it to this (which I figured out after googling around; I&apos;m no bash expert!):&lt;br/&gt;
&lt;tt&gt;if [[ ! -t 0 ]]; then&lt;/tt&gt;&lt;br/&gt;
Apparently &apos;0&apos; represents stdin.  It works for me.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; might you take a look?  I&apos;d be happy to add a formal patch &amp;amp; commit for this trivial change but it really needs other eyes.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu&lt;/p&gt;</environment>
        <key id="12956219">SOLR-8946</key>
            <summary>bin/post script stdin detection is faulty</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dsmiley">David Smiley</assignee>
                                    <reporter username="dsmiley">David Smiley</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Apr 2016 17:40:56 +0000</created>
                <updated>Sat, 25 Jun 2016 20:33:47 +0000</updated>
                            <resolved>Fri, 17 Jun 2016 20:17:16 +0000</resolved>
                                    <version>6.0</version>
                                    <fixVersion>5.5.2</fixVersion>
                    <fixVersion>5.6</fixVersion>
                    <fixVersion>6.0.1</fixVersion>
                    <fixVersion>6.1</fixVersion>
                                    <component>SimplePostTool</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15227043" author="andyetitmoves" created="Tue, 5 Apr 2016 20:07:52 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15239942" author="dsmiley" created="Wed, 13 Apr 2016 20:05:44 +0000"  >&lt;p&gt;Here&apos;s a patch, and I also moved the automatic &lt;tt&gt;&amp;lt;add/&amp;gt;&lt;/tt&gt; params addition to only occur for the &quot;args&quot; mode.  It was being added for stdin mode too which was weird.&lt;/p&gt;

&lt;p&gt;AFAICT the former /dev/stdin check worked on Mac OS X / Darwin, but failed on Ubuntu/Debian.  I have no idea how, say, Fedora/CentOS would fair.  I would appreciate it if someone give it a shot.  I did some playing around with bin/post and I think this works and the correct use of &lt;tt&gt;&amp;lt;add/&amp;gt;&lt;/tt&gt; is an improvement too.  It would be nice to get this into Solr 5.5.1.&lt;/p&gt;</comment>
                            <comment id="15243946" author="jira-bot" created="Sat, 16 Apr 2016 02:07:06 +0000"  >&lt;p&gt;Commit 7833f7f69af4d143178b53879c53563a4bbc0cee in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7833f7f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=7833f7f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8946&quot; title=&quot;bin/post script stdin detection is faulty&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8946&quot;&gt;&lt;del&gt;SOLR-8946&lt;/del&gt;&lt;/a&gt;: fix bin/post stdin detection. faulty on Ubuntu; maybe others&lt;/p&gt;</comment>
                            <comment id="15243947" author="jira-bot" created="Sat, 16 Apr 2016 02:08:05 +0000"  >&lt;p&gt;Commit e1a5665feeafd6cd891edff392e885aef648dbf5 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=e1a5665&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=e1a5665&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8946&quot; title=&quot;bin/post script stdin detection is faulty&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8946&quot;&gt;&lt;del&gt;SOLR-8946&lt;/del&gt;&lt;/a&gt;: fix bin/post stdin detection. faulty on Ubuntu; maybe others&lt;br/&gt;
(cherry picked from commit 7833f7f)&lt;/p&gt;</comment>
                            <comment id="15293291" author="steve_rowe" created="Fri, 20 May 2016 12:40:56 +0000"  >&lt;p&gt;Reopening to backport to 6.0.1.&lt;/p&gt;</comment>
                            <comment id="15293292" author="jira-bot" created="Fri, 20 May 2016 12:41:11 +0000"  >&lt;p&gt;Commit b119ad60a1d0a58ae4e7a6be54dc3b119bd484b0 in lucene-solr&apos;s branch refs/heads/branch_6_0 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=b119ad6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=b119ad6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8946&quot; title=&quot;bin/post script stdin detection is faulty&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8946&quot;&gt;&lt;del&gt;SOLR-8946&lt;/del&gt;&lt;/a&gt;: fix bin/post stdin detection. faulty on Ubuntu; maybe others&lt;br/&gt;
(cherry picked from commit 7833f7f)&lt;/p&gt;</comment>
                            <comment id="15305392" author="steve_rowe" created="Sat, 28 May 2016 13:38:32 +0000"  >&lt;p&gt;Bulk close issues included in the 6.0.1 release.&lt;/p&gt;</comment>
                            <comment id="15336845" author="jira-bot" created="Fri, 17 Jun 2016 20:16:40 +0000"  >&lt;p&gt;Commit 060902366027239832f532db4250f0d337c1cb96 in lucene-solr&apos;s branch refs/heads/branch_5_5 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=0609023&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=0609023&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8946&quot; title=&quot;bin/post script stdin detection is faulty&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8946&quot;&gt;&lt;del&gt;SOLR-8946&lt;/del&gt;&lt;/a&gt;: fix bin/post stdin detection. faulty on Ubuntu; maybe others&lt;br/&gt;
(cherry picked from commit 7833f7f)&lt;/p&gt;</comment>
                            <comment id="15336846" author="jira-bot" created="Fri, 17 Jun 2016 20:16:41 +0000"  >&lt;p&gt;Commit 0b4a81eaae07a9e271c74f59f586075d3ee00ca1 in lucene-solr&apos;s branch refs/heads/branch_5x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=0b4a81e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=0b4a81e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8946&quot; title=&quot;bin/post script stdin detection is faulty&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8946&quot;&gt;&lt;del&gt;SOLR-8946&lt;/del&gt;&lt;/a&gt;: fix bin/post stdin detection. faulty on Ubuntu; maybe others&lt;br/&gt;
(cherry picked from commit 7833f7f)&lt;/p&gt;</comment>
                            <comment id="15336847" author="steve_rowe" created="Fri, 17 Jun 2016 20:16:51 +0000"  >&lt;p&gt;Reopening to backport to 5.6 and 5.5.2.&lt;/p&gt;</comment>
                            <comment id="15349786" author="steve_rowe" created="Sat, 25 Jun 2016 20:33:47 +0000"  >&lt;p&gt;Bulk close issues released with 5.5.2.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12798562" name="SOLR_8946.patch" size="1144" author="dsmiley" created="Wed, 13 Apr 2016 20:05:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 21 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vo9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>