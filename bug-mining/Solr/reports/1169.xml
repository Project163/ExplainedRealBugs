<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:32:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4205] Clover runs on ASF Jenkins idle dead without a test or any thread running in main() loop waiting for file descriptor</title>
                <link>https://issues.apache.org/jira/browse/SOLR-4205</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I had to kill ASF Jenkins Clover builds two times after several 10 hours of inactivity in a random Solr test. I requested a stack trace before killing the only running JVM (clover runs with one JVM only, because clover does not like multiple processes writing the same clover metrics file).&lt;/p&gt;

&lt;p&gt;In both cases (4.x and trunk) the stack trace was looking identical after sending kill -3...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/Lucene-Solr-Clover-trunk/76/consoleFull&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Lucene-Solr-Clover-trunk/76/consoleFull&lt;/a&gt; (yesterday):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[junit4:junit4] HEARTBEAT J0 PID(81884@lucene.zones.apache.org): 2012-12-16T13:01:00, stalled for 28447s at: TestFunctionQuery.testBooleanFunctions
[junit4:junit4] HEARTBEAT J0 PID(81884@lucene.zones.apache.org): 2012-12-16T13:02:00, stalled for 28507s at: TestFunctionQuery.testBooleanFunctions
[junit4:junit4] HEARTBEAT J0 PID(81884@lucene.zones.apache.org): 2012-12-16T13:03:00, stalled for 28567s at: TestFunctionQuery.testBooleanFunctions
[junit4:junit4] JVM J0: stdout was not empty, see: /usr/home/hudson/hudson-slave/workspace/Lucene-Solr-Clover-trunk/solr/build/solr-core/test/temp/junit4-J0-20121216_044733_583.sysout
[junit4:junit4] &amp;gt;&amp;gt;&amp;gt; JVM J0: stdout (verbatim) ----
[junit4:junit4] 2012-12-16 13:03:49
[junit4:junit4] Full thread dump OpenJDK 64-Bit Server VM (20.0-b12 mixed mode):
[junit4:junit4] 
[junit4:junit4] &quot;searcherExecutor-2577-thread-1&quot; prio=5 tid=0x000000085eb67000 nid=0x61c105b waiting on condition [0x00007ffff0b0d000]
[junit4:junit4]    java.lang.Thread.State: WAITING (parking)
[junit4:junit4] 	at sun.misc.Unsafe.park(Native Method)
[junit4:junit4] 	- parking to wait for  &amp;lt;0x00000008178c9c40&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
[junit4:junit4] 	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
[junit4:junit4] 	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)
[junit4:junit4] 	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:386)
[junit4:junit4] 	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
[junit4:junit4] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
[junit4:junit4] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
[junit4:junit4] 	at java.lang.Thread.run(Thread.java:679)
[junit4:junit4] 
[junit4:junit4] &quot;RMI TCP Accept-0&quot; daemon prio=5 tid=0x0000000840ce2800 nid=0x61c0aa2 runnable [0x00007ffff9496000]
[junit4:junit4]    java.lang.Thread.State: RUNNABLE
[junit4:junit4] 	at java.net.PlainSocketImpl.socketAccept(Native Method)
[junit4:junit4] 	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:375)
[junit4:junit4] 	at java.net.ServerSocket.implAccept(ServerSocket.java:470)
[junit4:junit4] 	at java.net.ServerSocket.accept(ServerSocket.java:438)
[junit4:junit4] 	at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:387)
[junit4:junit4] 	at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:359)
[junit4:junit4] 	at java.lang.Thread.run(Thread.java:679)
[junit4:junit4] 
[junit4:junit4] &quot;RMI Scheduler(0)&quot; daemon prio=5 tid=0x0000000840ce1000 nid=0x61c0969 waiting on condition [0x00007ffff0f11000]
[junit4:junit4]    java.lang.Thread.State: WAITING (parking)
[junit4:junit4] 	at sun.misc.Unsafe.park(Native Method)
[junit4:junit4] 	- parking to wait for  &amp;lt;0x0000000814f12f88&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
[junit4:junit4] 	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
[junit4:junit4] 	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)
[junit4:junit4] 	at java.util.concurrent.DelayQueue.take(DelayQueue.java:189)
[junit4:junit4] 	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:688)
[junit4:junit4] 	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:681)
[junit4:junit4] 	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
[junit4:junit4] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
[junit4:junit4] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
[junit4:junit4] 	at java.lang.Thread.run(Thread.java:679)
[junit4:junit4] 
[junit4:junit4] &quot;GC Daemon&quot; daemon prio=5 tid=0x0000000840ce0000 nid=0x61c0949 in Object.wait() [0x00007ffff6d6f000]
[junit4:junit4]    java.lang.Thread.State: TIMED_WAITING (on object monitor)
[junit4:junit4] 	at java.lang.Object.wait(Native Method)
[junit4:junit4] 	at sun.misc.GC$Daemon.run(GC.java:117)
[junit4:junit4] 	- locked &amp;lt;0x0000000814f1c428&amp;gt; (a sun.misc.GC$LatencyLock)
[junit4:junit4] 
[junit4:junit4] &quot;RMI Reaper&quot; prio=5 tid=0x0000000840cdf800 nid=0x61c0947 in Object.wait() [0x00007ffff7577000]
[junit4:junit4]    java.lang.Thread.State: WAITING (on object monitor)
[junit4:junit4] 	at java.lang.Object.wait(Native Method)
[junit4:junit4] 	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:133)
[junit4:junit4] 	- locked &amp;lt;0x0000000814f1ad08&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)
[junit4:junit4] 	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:149)
[junit4:junit4] 	at sun.rmi.transport.ObjectTable$Reaper.run(ObjectTable.java:350)
[junit4:junit4] 	at java.lang.Thread.run(Thread.java:679)
[junit4:junit4] 
[junit4:junit4] &quot;RMI TCP Accept-0&quot; daemon prio=5 tid=0x0000000840cde800 nid=0x61c0936 runnable [0x00007ffff6e70000]
[junit4:junit4]    java.lang.Thread.State: RUNNABLE
[junit4:junit4] 	at java.net.PlainSocketImpl.socketAccept(Native Method)
[junit4:junit4] 	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:375)
[junit4:junit4] 	at java.net.ServerSocket.implAccept(ServerSocket.java:470)
[junit4:junit4] 	at java.net.ServerSocket.accept(ServerSocket.java:438)
[junit4:junit4] 	at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:387)
[junit4:junit4] 	at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:359)
[junit4:junit4] 	at java.lang.Thread.run(Thread.java:679)
[junit4:junit4] 
[junit4:junit4] &quot;RMI TCP Accept-0&quot; daemon prio=5 tid=0x0000000840cde000 nid=0x61c0934 runnable [0x00007ffff494b000]
[junit4:junit4]    java.lang.Thread.State: RUNNABLE
[junit4:junit4] 	at java.net.PlainSocketImpl.socketAccept(Native Method)
[junit4:junit4] 	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:375)
[junit4:junit4] 	at java.net.ServerSocket.implAccept(ServerSocket.java:470)
[junit4:junit4] 	at java.net.ServerSocket.accept(ServerSocket.java:438)
[junit4:junit4] 	at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:387)
[junit4:junit4] 	at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:359)
[junit4:junit4] 	at java.lang.Thread.run(Thread.java:679)
[junit4:junit4] 
[junit4:junit4] &quot;TimeLimitedCollector timer thread&quot; daemon prio=5 tid=0x0000000848e69800 nid=0x61c096d waiting on condition [0x00007ffff3a3c000]
[junit4:junit4]    java.lang.Thread.State: TIMED_WAITING (sleeping)
[junit4:junit4] 	at java.lang.Thread.sleep(Native Method)
[junit4:junit4] 	at org.apache.lucene.search.TimeLimitingCollector$TimerThread.run(TimeLimitingCollector.java:267)
[junit4:junit4] 
[junit4:junit4] &quot;metrics-meter-tick-thread-2&quot; daemon prio=5 tid=0x000000084c8c6800 nid=0x61c087d runnable [0x00007ffffdfe1000]
[junit4:junit4]    java.lang.Thread.State: TIMED_WAITING (parking)
[junit4:junit4] 	at sun.misc.Unsafe.park(Native Method)
[junit4:junit4] 	- parking to wait for  &amp;lt;0x0000000811568070&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
[junit4:junit4] 	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
[junit4:junit4] 	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2081)
[junit4:junit4] 	at java.util.concurrent.DelayQueue.take(DelayQueue.java:193)
[junit4:junit4] 	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:688)
[junit4:junit4] 	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:681)
[junit4:junit4] 	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
[junit4:junit4] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
[junit4:junit4] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
[junit4:junit4] 	at java.lang.Thread.run(Thread.java:679)
[junit4:junit4] 
[junit4:junit4] &quot;metrics-meter-tick-thread-1&quot; daemon prio=5 tid=0x000000084c8c5000 nid=0x61c087b runnable [0x00007ffffe1e3000]
[junit4:junit4]    java.lang.Thread.State: TIMED_WAITING (parking)
[junit4:junit4] 	at sun.misc.Unsafe.park(Native Method)
[junit4:junit4] 	- parking to wait for  &amp;lt;0x0000000811568070&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
[junit4:junit4] 	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
[junit4:junit4] 	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2081)
[junit4:junit4] 	at java.util.concurrent.DelayQueue.take(DelayQueue.java:193)
[junit4:junit4] 	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:688)
[junit4:junit4] 	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:681)
[junit4:junit4] 	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
[junit4:junit4] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
[junit4:junit4] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
[junit4:junit4] 	at java.lang.Thread.run(Thread.java:679)
[junit4:junit4] 
[junit4:junit4] &quot;Low Memory Detector&quot; daemon prio=5 tid=0x00000008011c4800 nid=0x61c0876 runnable [0x0000000000000000]
[junit4:junit4]    java.lang.Thread.State: RUNNABLE
[junit4:junit4] 
[junit4:junit4] &quot;C2 CompilerThread1&quot; daemon prio=5 tid=0x00000008011c3800 nid=0x61c0875 waiting on condition [0x0000000000000000]
[junit4:junit4]    java.lang.Thread.State: RUNNABLE
[junit4:junit4] 
[junit4:junit4] &quot;C2 CompilerThread0&quot; daemon prio=5 tid=0x00000008011c3000 nid=0x61c0874 waiting on condition [0x0000000000000000]
[junit4:junit4]    java.lang.Thread.State: RUNNABLE
[junit4:junit4] 
[junit4:junit4] &quot;Signal Dispatcher&quot; daemon prio=5 tid=0x00000008011c2000 nid=0x61c0873 waiting on condition [0x0000000000000000]
[junit4:junit4]    java.lang.Thread.State: RUNNABLE
[junit4:junit4] 
[junit4:junit4] &quot;Finalizer&quot; daemon prio=5 tid=0x00000008011c1800 nid=0x61c0872 in Object.wait() [0x00007ffffebed000]
[junit4:junit4]    java.lang.Thread.State: WAITING (on object monitor)
[junit4:junit4] 	at java.lang.Object.wait(Native Method)
[junit4:junit4] 	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:133)
[junit4:junit4] 	- locked &amp;lt;0x0000000810cec8f8&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)
[junit4:junit4] 	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:149)
[junit4:junit4] 	at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:177)
[junit4:junit4] 
[junit4:junit4] &quot;Reference Handler&quot; daemon prio=5 tid=0x00000008011c0800 nid=0x61c0871 in Object.wait() [0x00007ffffecee000]
[junit4:junit4]    java.lang.Thread.State: WAITING (on object monitor)
[junit4:junit4] 	at java.lang.Object.wait(Native Method)
[junit4:junit4] 	at java.lang.Object.wait(Object.java:502)
[junit4:junit4] 	at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:133)
[junit4:junit4] 	- locked &amp;lt;0x0000000810ce8b80&amp;gt; (a java.lang.ref.Reference$Lock)
[junit4:junit4] 
[junit4:junit4] &quot;main&quot; prio=5 tid=0x00000008011c0000 nid=0x61c0672 runnable [0x00007fffffbfd000]
[junit4:junit4]    java.lang.Thread.State: RUNNABLE
[junit4:junit4] 	at java.io.FileInputStream.readBytes(Native Method)
[junit4:junit4] 	at java.io.FileInputStream.read(FileInputStream.java:236)
[junit4:junit4] 	at java.io.BufferedInputStream.read1(BufferedInputStream.java:273)
[junit4:junit4] 	at java.io.BufferedInputStream.read(BufferedInputStream.java:334)
[junit4:junit4] 	- locked &amp;lt;0x0000000810ce22e0&amp;gt; (a java.io.BufferedInputStream)
[junit4:junit4] 	at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:282)
[junit4:junit4] 	at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:324)
[junit4:junit4] 	at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:176)
[junit4:junit4] 	- locked &amp;lt;0x0000000810ce22c8&amp;gt; (a java.io.InputStreamReader)
[junit4:junit4] 	at java.io.InputStreamReader.read(InputStreamReader.java:184)
[junit4:junit4] 	at java.io.BufferedReader.fill(BufferedReader.java:153)
[junit4:junit4] 	at java.io.BufferedReader.readLine(BufferedReader.java:316)
[junit4:junit4] 	- locked &amp;lt;0x0000000810ce22c8&amp;gt; (a java.io.InputStreamReader)
[junit4:junit4] 	at java.io.BufferedReader.readLine(BufferedReader.java:379)
[junit4:junit4] 	at com.carrotsearch.ant.tasks.junit4.slave.StdInLineIterator.computeNext(StdInLineIterator.java:31)
[junit4:junit4] 	at com.carrotsearch.ant.tasks.junit4.slave.StdInLineIterator.computeNext(StdInLineIterator.java:13)
[junit4:junit4] 	at com.carrotsearch.ant.tasks.junit4.dependencies.com.google.common.collect.AbstractIterator.tryToComputeNext(AbstractIterator.java:141)
[junit4:junit4] 	at com.carrotsearch.ant.tasks.junit4.dependencies.com.google.common.collect.AbstractIterator.hasNext(AbstractIterator.java:136)
[junit4:junit4] 	at com.carrotsearch.ant.tasks.junit4.dependencies.com.google.common.collect.Iterators$5.hasNext(Iterators.java:539)
[junit4:junit4] 	at com.carrotsearch.ant.tasks.junit4.slave.SlaveMain.execute(SlaveMain.java:150)
[junit4:junit4] 	at com.carrotsearch.ant.tasks.junit4.slave.SlaveMain.main(SlaveMain.java:255)
[junit4:junit4] 	at com.carrotsearch.ant.tasks.junit4.slave.SlaveMainSafe.main(SlaveMainSafe.java:12)
[junit4:junit4] 
[junit4:junit4] &quot;VM Thread&quot; prio=5 tid=0x000000080121e800 nid=0x61c0870 runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#0 (ParallelGC)&quot; prio=5 tid=0x0000000801215800 nid=0x61c0863 runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#1 (ParallelGC)&quot; prio=5 tid=0x0000000801216800 nid=0x61c0864 runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#2 (ParallelGC)&quot; prio=5 tid=0x0000000801217000 nid=0x61c0865 runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#3 (ParallelGC)&quot; prio=5 tid=0x0000000801217800 nid=0x61c0866 runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#4 (ParallelGC)&quot; prio=5 tid=0x0000000801218000 nid=0x61c0867 runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#5 (ParallelGC)&quot; prio=5 tid=0x0000000801219000 nid=0x61c0868 runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#6 (ParallelGC)&quot; prio=5 tid=0x0000000801219800 nid=0x61c0869 runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#7 (ParallelGC)&quot; prio=5 tid=0x000000080121a000 nid=0x61c086a runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#8 (ParallelGC)&quot; prio=5 tid=0x000000080121a800 nid=0x61c086b runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#9 (ParallelGC)&quot; prio=5 tid=0x000000080121b800 nid=0x61c086c runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#10 (ParallelGC)&quot; prio=5 tid=0x000000080121c000 nid=0x61c086d runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#11 (ParallelGC)&quot; prio=5 tid=0x000000080121c800 nid=0x61c086e runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#12 (ParallelGC)&quot; prio=5 tid=0x000000080121d000 nid=0x61c086f runnable 
[junit4:junit4] 
[junit4:junit4] &quot;VM Periodic Task Thread&quot; prio=5 tid=0x000000080121f000 nid=0x61c0877 waiting on condition 
[junit4:junit4] 
[junit4:junit4] JNI global references: 1183
[junit4:junit4] 
[junit4:junit4] Heap
[junit4:junit4]  PSYoungGen      total 212224K, used 110789K [0x0000000830220000, 0x000000083d1c0000, 0x0000000840220000)
[junit4:junit4]   eden space 211840K, 52% used [0x0000000830220000,0x0000000836e516f0,0x000000083d100000)
[junit4:junit4]   from space 384K, 0% used [0x000000083d160000,0x000000083d160000,0x000000083d1c0000)
[junit4:junit4]   to   space 384K, 0% used [0x000000083d100000,0x000000083d100000,0x000000083d160000)
[junit4:junit4]  PSOldGen        total 524288K, used 127127K [0x0000000810220000, 0x0000000830220000, 0x0000000830220000)
[junit4:junit4]   object space 524288K, 24% used [0x0000000810220000,0x0000000817e45ef0,0x0000000830220000)
[junit4:junit4]  PSPermGen       total 83968K, used 83967K [0x000000080b020000, 0x0000000810220000, 0x0000000810220000)
[junit4:junit4]   object space 83968K, 99% used [0x000000080b020000,0x000000081021fd98,0x0000000810220000)
[junit4:junit4] &amp;lt;&amp;lt;&amp;lt; JVM J0: EOF ----
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/Lucene-Solr-Clover-4.x/77/consoleFull&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Lucene-Solr-Clover-4.x/77/consoleFull&lt;/a&gt; (today):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[junit4:junit4] HEARTBEAT J0 PID(2916@lucene.zones.apache.org): 2012-12-16T22:11:23, stalled for 13809s at: QueryEqualityTest (suite)
[junit4:junit4] HEARTBEAT J0 PID(2916@lucene.zones.apache.org): 2012-12-16T22:12:23, stalled for 13869s at: QueryEqualityTest (suite)
[junit4:junit4] HEARTBEAT J0 PID(2916@lucene.zones.apache.org): 2012-12-16T22:13:23, stalled for 13929s at: QueryEqualityTest (suite)
[junit4:junit4] HEARTBEAT J0 PID(2916@lucene.zones.apache.org): 2012-12-16T22:14:23, stalled for 13989s at: QueryEqualityTest (suite)
[junit4:junit4] JVM J0: stdout was not empty, see: /usr/home/hudson/hudson-slave/workspace/Lucene-Solr-Clover-4.x/solr/build/solr-core/test/temp/junit4-J0-20121216_175857_638.sysout
[junit4:junit4] &amp;gt;&amp;gt;&amp;gt; JVM J0: stdout (verbatim) ----
[junit4:junit4] 2012-12-16 22:14:25
[junit4:junit4] Full thread dump OpenJDK 64-Bit Server VM (20.0-b12 mixed mode):
[junit4:junit4] 
[junit4:junit4] &quot;TimeLimitedCollector timer thread&quot; daemon prio=5 tid=0x00000008460dc800 nid=0x61c9fa3 waiting on condition [0x00007ffffd8da000]
[junit4:junit4]    java.lang.Thread.State: TIMED_WAITING (sleeping)
[junit4:junit4] 	at java.lang.Thread.sleep(Native Method)
[junit4:junit4] 	at org.apache.lucene.search.TimeLimitingCollector$TimerThread.run(TimeLimitingCollector.java:267)
[junit4:junit4] 
[junit4:junit4] &quot;metrics-meter-tick-thread-2&quot; daemon prio=5 tid=0x000000084b749800 nid=0x61c9f96 runnable [0x00007ffffe0e2000]
[junit4:junit4]    java.lang.Thread.State: TIMED_WAITING (parking)
[junit4:junit4] 	at sun.misc.Unsafe.park(Native Method)
[junit4:junit4] 	- parking to wait for  &amp;lt;0x0000000810dd3f20&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
[junit4:junit4] 	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
[junit4:junit4] 	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2081)
[junit4:junit4] 	at java.util.concurrent.DelayQueue.take(DelayQueue.java:193)
[junit4:junit4] 	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:688)
[junit4:junit4] 	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:681)
[junit4:junit4] 	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
[junit4:junit4] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
[junit4:junit4] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
[junit4:junit4] 	at java.lang.Thread.run(Thread.java:679)
[junit4:junit4] 
[junit4:junit4] &quot;metrics-meter-tick-thread-1&quot; daemon prio=5 tid=0x000000084b749000 nid=0x61c9f95 runnable [0x00007ffffe1e3000]
[junit4:junit4]    java.lang.Thread.State: TIMED_WAITING (parking)
[junit4:junit4] 	at sun.misc.Unsafe.park(Native Method)
[junit4:junit4] 	- parking to wait for  &amp;lt;0x0000000810dd3f20&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
[junit4:junit4] 	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)
[junit4:junit4] 	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2081)
[junit4:junit4] 	at java.util.concurrent.DelayQueue.take(DelayQueue.java:193)
[junit4:junit4] 	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:688)
[junit4:junit4] 	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:681)
[junit4:junit4] 	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)
[junit4:junit4] 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)
[junit4:junit4] 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
[junit4:junit4] 	at java.lang.Thread.run(Thread.java:679)
[junit4:junit4] 
[junit4:junit4] &quot;Low Memory Detector&quot; daemon prio=5 tid=0x00000008011c4800 nid=0x61c9f90 runnable [0x0000000000000000]
[junit4:junit4]    java.lang.Thread.State: RUNNABLE
[junit4:junit4] 
[junit4:junit4] &quot;C2 CompilerThread1&quot; daemon prio=5 tid=0x00000008011c3800 nid=0x61c9f8f waiting on condition [0x0000000000000000]
[junit4:junit4]    java.lang.Thread.State: RUNNABLE
[junit4:junit4] 
[junit4:junit4] &quot;C2 CompilerThread0&quot; daemon prio=5 tid=0x00000008011c3000 nid=0x61c9f8e waiting on condition [0x0000000000000000]
[junit4:junit4]    java.lang.Thread.State: RUNNABLE
[junit4:junit4] 
[junit4:junit4] &quot;Signal Dispatcher&quot; daemon prio=5 tid=0x00000008011c2000 nid=0x61c9f8d waiting on condition [0x0000000000000000]
[junit4:junit4]    java.lang.Thread.State: RUNNABLE
[junit4:junit4] 
[junit4:junit4] &quot;Finalizer&quot; daemon prio=5 tid=0x00000008011c1800 nid=0x61c9f8c in Object.wait() [0x00007ffffebed000]
[junit4:junit4]    java.lang.Thread.State: WAITING (on object monitor)
[junit4:junit4] 	at java.lang.Object.wait(Native Method)
[junit4:junit4] 	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:133)
[junit4:junit4] 	- locked &amp;lt;0x00000008109642d8&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)
[junit4:junit4] 	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:149)
[junit4:junit4] 	at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:177)
[junit4:junit4] 
[junit4:junit4] &quot;Reference Handler&quot; daemon prio=5 tid=0x00000008011c0800 nid=0x61c9f8b in Object.wait() [0x00007ffffecee000]
[junit4:junit4]    java.lang.Thread.State: WAITING (on object monitor)
[junit4:junit4] 	at java.lang.Object.wait(Native Method)
[junit4:junit4] 	at java.lang.Object.wait(Object.java:502)
[junit4:junit4] 	at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:133)
[junit4:junit4] 	- locked &amp;lt;0x0000000810967160&amp;gt; (a java.lang.ref.Reference$Lock)
[junit4:junit4] 
[junit4:junit4] &quot;main&quot; prio=5 tid=0x00000008011c0000 nid=0x61c9d83 runnable [0x00007fffffbfd000]
[junit4:junit4]    java.lang.Thread.State: RUNNABLE
[junit4:junit4] 	at java.io.FileInputStream.readBytes(Native Method)
[junit4:junit4] 	at java.io.FileInputStream.read(FileInputStream.java:236)
[junit4:junit4] 	at java.io.BufferedInputStream.read1(BufferedInputStream.java:273)
[junit4:junit4] 	at java.io.BufferedInputStream.read(BufferedInputStream.java:334)
[junit4:junit4] 	- locked &amp;lt;0x000000081098f1f8&amp;gt; (a java.io.BufferedInputStream)
[junit4:junit4] 	at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:282)
[junit4:junit4] 	at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:324)
[junit4:junit4] 	at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:176)
[junit4:junit4] 	- locked &amp;lt;0x000000081098f1e0&amp;gt; (a java.io.InputStreamReader)
[junit4:junit4] 	at java.io.InputStreamReader.read(InputStreamReader.java:184)
[junit4:junit4] 	at java.io.BufferedReader.fill(BufferedReader.java:153)
[junit4:junit4] 	at java.io.BufferedReader.readLine(BufferedReader.java:316)
[junit4:junit4] 	- locked &amp;lt;0x000000081098f1e0&amp;gt; (a java.io.InputStreamReader)
[junit4:junit4] 	at java.io.BufferedReader.readLine(BufferedReader.java:379)
[junit4:junit4] 	at com.carrotsearch.ant.tasks.junit4.slave.StdInLineIterator.computeNext(StdInLineIterator.java:31)
[junit4:junit4] 	at com.carrotsearch.ant.tasks.junit4.slave.StdInLineIterator.computeNext(StdInLineIterator.java:13)
[junit4:junit4] 	at com.carrotsearch.ant.tasks.junit4.dependencies.com.google.common.collect.AbstractIterator.tryToComputeNext(AbstractIterator.java:141)
[junit4:junit4] 	at com.carrotsearch.ant.tasks.junit4.dependencies.com.google.common.collect.AbstractIterator.hasNext(AbstractIterator.java:136)
[junit4:junit4] 	at com.carrotsearch.ant.tasks.junit4.dependencies.com.google.common.collect.Iterators$5.hasNext(Iterators.java:539)
[junit4:junit4] 	at com.carrotsearch.ant.tasks.junit4.slave.SlaveMain.execute(SlaveMain.java:150)
[junit4:junit4] 	at com.carrotsearch.ant.tasks.junit4.slave.SlaveMain.main(SlaveMain.java:255)
[junit4:junit4] 	at com.carrotsearch.ant.tasks.junit4.slave.SlaveMainSafe.main(SlaveMainSafe.java:12)
[junit4:junit4] 
[junit4:junit4] &quot;VM Thread&quot; prio=5 tid=0x000000080121e800 nid=0x61c9f8a runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#0 (ParallelGC)&quot; prio=5 tid=0x0000000801215800 nid=0x61c9f7d runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#1 (ParallelGC)&quot; prio=5 tid=0x0000000801216800 nid=0x61c9f7e runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#2 (ParallelGC)&quot; prio=5 tid=0x0000000801217000 nid=0x61c9f7f runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#3 (ParallelGC)&quot; prio=5 tid=0x0000000801217800 nid=0x61c9f80 runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#4 (ParallelGC)&quot; prio=5 tid=0x0000000801218000 nid=0x61c9f81 runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#5 (ParallelGC)&quot; prio=5 tid=0x0000000801219000 nid=0x61c9f82 runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#6 (ParallelGC)&quot; prio=5 tid=0x0000000801219800 nid=0x61c9f83 runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#7 (ParallelGC)&quot; prio=5 tid=0x000000080121a000 nid=0x61c9f84 runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#8 (ParallelGC)&quot; prio=5 tid=0x000000080121a800 nid=0x61c9f85 runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#9 (ParallelGC)&quot; prio=5 tid=0x000000080121b800 nid=0x61c9f86 runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#10 (ParallelGC)&quot; prio=5 tid=0x000000080121c000 nid=0x61c9f87 runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#11 (ParallelGC)&quot; prio=5 tid=0x000000080121c800 nid=0x61c9f88 runnable 
[junit4:junit4] 
[junit4:junit4] &quot;GC task thread#12 (ParallelGC)&quot; prio=5 tid=0x000000080121d000 nid=0x61c9f89 runnable 
[junit4:junit4] 
[junit4:junit4] &quot;VM Periodic Task Thread&quot; prio=5 tid=0x000000080121f000 nid=0x61c9f91 waiting on condition 
[junit4:junit4] 
[junit4:junit4] JNI global references: 1271
[junit4:junit4] 
[junit4:junit4] Heap
[junit4:junit4]  PSYoungGen      total 229120K, used 170968K [0x0000000830220000, 0x000000083eb60000, 0x0000000840220000)
[junit4:junit4]   eden space 228992K, 74% used [0x0000000830220000,0x000000083a8fe360,0x000000083e1c0000)
[junit4:junit4]   from space 128K, 75% used [0x000000083eb40000,0x000000083eb58000,0x000000083eb60000)
[junit4:junit4]   to   space 384K, 0% used [0x000000083eaa0000,0x000000083eaa0000,0x000000083eb00000)
[junit4:junit4]  PSOldGen        total 524288K, used 179710K [0x0000000810220000, 0x0000000830220000, 0x0000000830220000)
[junit4:junit4]   object space 524288K, 34% used [0x0000000810220000,0x000000081b19fa98,0x0000000830220000)
[junit4:junit4]  PSPermGen       total 83968K, used 83967K [0x000000080b020000, 0x0000000810220000, 0x0000000810220000)
[junit4:junit4]   object space 83968K, 99% used [0x000000080b020000,0x000000081021fc68,0x0000000810220000)
[junit4:junit4] &amp;lt;&amp;lt;&amp;lt; JVM J0: EOF ----
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To me it looks like there is something wrong with the test runner. In other cases this totally-hanging threads were caused by permgen-errors, but nothing like this in the logs. It looks like the slave is waiting forever to get some messages from the master or vice versa.&lt;/p&gt;

&lt;p&gt;You can imitate clover tests on ASF Jenkins by running:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ANT_OPTS=&quot;-Xmx1536M&quot; ant -Dtests.jettyConnector=Socket jenkins-clover
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(the ANT_OPTS are just for the generate-clover-task using lots of memory - totally unrelated. This is just needed after the tests ran successfully). jenkins-clover calls run-clover task which automatically gives more memory to the child JVMs, so maybe this is related and needs more memory. You can find that in the main common-build.xml file, where you will find a property definition if=&quot;run.clover&quot; giving more heap and code cache to childs:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;condition property=&lt;span class=&quot;code-quote&quot;&gt;&quot;tests.heapsize&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;768M&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;isset property=&lt;span class=&quot;code-quote&quot;&gt;&quot;run.clover&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/condition&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;tests.heapsize&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;512M&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
  
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;condition property=&lt;span class=&quot;code-quote&quot;&gt;&quot;tests.clover.args&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;-XX:ReservedCodeCacheSize=128m&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;isset property=&lt;span class=&quot;code-quote&quot;&gt;&quot;run.clover&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/condition&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;tests.clover.args&quot;&lt;/span&gt; value=&quot;&quot;/&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(maybe tweak that if Solr needs more memory - Lucene clover passes fine).&lt;/p&gt;

&lt;p&gt;I disabled clover tests for now.&lt;/p&gt;</description>
                <environment>&lt;p&gt;FreeBSD Jenkins&lt;/p&gt;</environment>
        <key id="12624212">SOLR-4205</key>
            <summary>Clover runs on ASF Jenkins idle dead without a test or any thread running in main() loop waiting for file descriptor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="dweiss">Dawid Weiss</assignee>
                                    <reporter username="uschindler">Uwe Schindler</reporter>
                        <labels>
                    </labels>
                <created>Sun, 16 Dec 2012 22:35:17 +0000</created>
                <updated>Mon, 9 May 2016 18:44:41 +0000</updated>
                            <resolved>Wed, 2 Jan 2013 08:18:06 +0000</resolved>
                                                    <fixVersion>4.1</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13533735" author="dweiss" created="Mon, 17 Dec 2012 08:58:39 +0000"  >&lt;p&gt;This definitely looks like a bug in the runner although I have no idea how to reproduce this or what may be causing it. The symptoms are: truncated events file:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[
  &lt;span class=&quot;code-quote&quot;&gt;&quot;SUITE_FAILURE&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and the main test thread gone. This is very weird.&lt;/p&gt;</comment>
                            <comment id="13533737" author="thetaphi" created="Mon, 17 Dec 2012 09:01:34 +0000"  >&lt;p&gt;Do you flush the event file?&lt;/p&gt;</comment>
                            <comment id="13533738" author="dweiss" created="Mon, 17 Dec 2012 09:13:11 +0000"  >&lt;p&gt;Sure.&lt;/p&gt;</comment>
                            <comment id="13533820" author="dweiss" created="Mon, 17 Dec 2012 10:29:46 +0000"  >&lt;p&gt;I pushed yet another minor release (it&apos;s damn hard to test against third party libraries with ivy...) &amp;#8211; 2.0.7. It just contains an explicit flush but I don&apos;t think this will make a difference. &lt;/p&gt;

&lt;p&gt;Uwe, could you upgrade the ivy files and enable the build again? we&apos;ll see if this helps or changes the behavior anyhow. I&apos;m busy for the rest of the day but I&apos;ll take a look at the results in the evening.&lt;/p&gt;</comment>
                            <comment id="13533822" author="thetaphi" created="Mon, 17 Dec 2012 10:38:04 +0000"  >&lt;p&gt;Updated in trunk revision: 1422836, 4.x revision: 1422837&lt;/p&gt;</comment>
                            <comment id="13533823" author="commit-tag-bot" created="Mon, 17 Dec 2012 10:38:12 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; Uwe Schindler&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1422836&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1422836&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4205&quot; title=&quot;Clover runs on ASF Jenkins idle dead without a test or any thread running in main() loop waiting for file descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4205&quot;&gt;&lt;del&gt;SOLR-4205&lt;/del&gt;&lt;/a&gt;: Update randomized-testing framework to 2.0.7&lt;/p&gt;</comment>
                            <comment id="13533826" author="thetaphi" created="Mon, 17 Dec 2012 10:40:24 +0000"  >&lt;p&gt;I triggered a new trunk clover build.&lt;/p&gt;</comment>
                            <comment id="13533827" author="commit-tag-bot" created="Mon, 17 Dec 2012 10:42:25 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Uwe Schindler&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1422837&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1422837&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Merged revision(s) 1422836 from lucene/dev/trunk:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4205&quot; title=&quot;Clover runs on ASF Jenkins idle dead without a test or any thread running in main() loop waiting for file descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4205&quot;&gt;&lt;del&gt;SOLR-4205&lt;/del&gt;&lt;/a&gt;: Update randomized-testing framework to 2.0.7&lt;/p&gt;</comment>
                            <comment id="13534282" author="dweiss" created="Mon, 17 Dec 2012 20:39:52 +0000"  >&lt;p&gt;There is definitely a bug &amp;#8211; something I don&apos;t fully comprehend at the moment. It seems it may be related to running in very low-memory conditions (permgen exhausted, memory exhausted). I&apos;ll keep digging but I have some urgent stuff to do &amp;#8211; can we increase permgen limits, at least temporarily, on nightlies and clover builds?&lt;/p&gt;</comment>
                            <comment id="13534284" author="thetaphi" created="Mon, 17 Dec 2012 20:43:34 +0000"  >&lt;p&gt;I will look into this!&lt;/p&gt;</comment>
                            <comment id="13534550" author="commit-tag-bot" created="Tue, 18 Dec 2012 02:26:56 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; Steven Rowe&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1423252&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1423252&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4205&quot; title=&quot;Clover runs on ASF Jenkins idle dead without a test or any thread running in main() loop waiting for file descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4205&quot;&gt;&lt;del&gt;SOLR-4205&lt;/del&gt;&lt;/a&gt;: Maven configuration: upgrade randomizedtesting-runner to v2.0.7&lt;/p&gt;</comment>
                            <comment id="13534551" author="commit-tag-bot" created="Tue, 18 Dec 2012 02:30:44 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Steven Rowe&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1423253&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1423253&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4205&quot; title=&quot;Clover runs on ASF Jenkins idle dead without a test or any thread running in main() loop waiting for file descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4205&quot;&gt;&lt;del&gt;SOLR-4205&lt;/del&gt;&lt;/a&gt;: Maven configuration: upgrade randomizedtesting-runner to v2.0.7 (merge trunk r1423252)&lt;/p&gt;</comment>
                            <comment id="13534728" author="dweiss" created="Tue, 18 Dec 2012 07:28:10 +0000"  >&lt;p&gt;Thanks Steve, although 2.0.7 doesn&apos;t seem to solve the hang-on-OOM issue &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13534799" author="commit-tag-bot" created="Tue, 18 Dec 2012 10:07:09 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; Uwe Schindler&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1423389&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1423389&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4205&quot; title=&quot;Clover runs on ASF Jenkins idle dead without a test or any thread running in main() loop waiting for file descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4205&quot;&gt;&lt;del&gt;SOLR-4205&lt;/del&gt;&lt;/a&gt;: Add permgen space for Clover runs and raise memory for nightly jenkins builds, too.&lt;/p&gt;</comment>
                            <comment id="13534801" author="commit-tag-bot" created="Tue, 18 Dec 2012 10:10:48 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Uwe Schindler&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1423390&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1423390&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Merged revision(s) 1423389 from lucene/dev/trunk:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4205&quot; title=&quot;Clover runs on ASF Jenkins idle dead without a test or any thread running in main() loop waiting for file descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4205&quot;&gt;&lt;del&gt;SOLR-4205&lt;/del&gt;&lt;/a&gt;: Add permgen space for Clover runs and raise memory for nightly jenkins builds, too.&lt;/p&gt;</comment>
                            <comment id="13534804" author="thetaphi" created="Tue, 18 Dec 2012 10:13:27 +0000"  >&lt;p&gt;I committed a permgen memory increase to both nightly and clover tasks (for jenkins).&lt;/p&gt;

&lt;p&gt;The issue in Clover may not be resolveable without raising permgen, but the nightly builds hanging is more crazy. It looks like the testDistributedSearch start way too many jetty instances that don&apos;t clean up enough their classloaders. Please note: -Dtests.nightly and -Dtests.multiplier=3 was set, i changed the multiplier to 2, too (in the jenkins config).&lt;/p&gt;

&lt;p&gt;Maybe change the nightly/multiplier effect for BaseDistributedTestCase? Mark? If we can handle this, I would like the remove the hack for the nightly runs again!&lt;/p&gt;</comment>
                            <comment id="13534866" author="thetaphi" created="Tue, 18 Dec 2012 12:58:16 +0000"  >&lt;p&gt;The latest jenkins-nightly build succeeded. jenkins-clover is currently running...&lt;/p&gt;</comment>
                            <comment id="13534974" author="thetaphi" created="Tue, 18 Dec 2012 15:38:13 +0000"  >&lt;p&gt;With the raised permgen also clover build succeeded. Most interinesting: The coverage get back to 80%. I assume the change to SocketConnector in Jetty is causing this, making the tests on FreeBSD succeed and so raising the coverage instead of timing out. I assume testDistributedSearch tests almost every single line of code &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Mark: We should at least work on making testDistributesSearch in the nightly builds with a multiplicator of 3 does not OOM. I would like to revert the changes in &quot;jenkins nightly&quot; task because they are nox cross-JVM portable.&lt;/p&gt;</comment>
                            <comment id="13534990" author="markrmiller@gmail.com" created="Tue, 18 Dec 2012 15:55:37 +0000"  >&lt;p&gt;I think it succeeded for a few reasons:&lt;/p&gt;

&lt;p&gt;1. We switched back to using the socket connector on freebsd - some runs started to pass, but many, especially nightly and maven ones, still failed.&lt;/p&gt;

&lt;p&gt;2. I broke up the basic zk test that was using so much perm space into 2 tests and took out the atLeasts that may have been making it make a more cores than could be handled.&lt;/p&gt;

&lt;p&gt;3. I stopped trying to do work arounds for black hole and added timeouts for pretty much every call we do (still no timeouts in prod, but tests override to add timeouts). This is part of the make tests work with blackhole issue I opened.&lt;/p&gt;

&lt;p&gt;Between the 3, we are getting closer. It&apos;s un-lodged some new fails though, so there is still some work to do, but we are getting there.&lt;/p&gt;</comment>
                            <comment id="13534994" author="thetaphi" created="Tue, 18 Dec 2012 15:58:12 +0000"  >&lt;p&gt;When did you commit that? Because the new runs for clover and nightly were passing after my commit raising permgen, so should I revert that to try out?&lt;/p&gt;</comment>
                            <comment id="13535011" author="markrmiller@gmail.com" created="Tue, 18 Dec 2012 16:15:59 +0000"  >&lt;p&gt;#2 I committed like yesterday. #3 might have been the day before.&lt;/p&gt;

&lt;p&gt;Probably worth trying at the lower perm gen to see if we should reduce the test anymore.&lt;/p&gt;</comment>
                            <comment id="13535076" author="thetaphi" created="Tue, 18 Dec 2012 17:24:41 +0000"  >&lt;p&gt;The last failing run was last night, so I think we should maybe run the test suite locally with -Dtests.nightly and -Dtests.multiplicator=3 first before reverting parts of my commit. Thanks in any case!&lt;/p&gt;</comment>
                            <comment id="13535082" author="markrmiller@gmail.com" created="Tue, 18 Dec 2012 17:33:05 +0000"  >&lt;p&gt;That&apos;s weird - I don&apos;t think there is anything in the test that looks at the multiplier (since I changed it)...so not sure how that would still matter.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;we should maybe run the test suite locally with -Dtests.nightly and -Dtests.multiplicator=3 first &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That actually passed for me a few days ago on my dev machine when I tried, so I don&apos;t think I can learn much on my machine.&lt;/p&gt;</comment>
                            <comment id="13535086" author="markrmiller@gmail.com" created="Tue, 18 Dec 2012 17:35:38 +0000"  >&lt;p&gt;Are you sure the failure yesterday was a permgen one?&lt;/p&gt;</comment>
                            <comment id="13535087" author="thetaphi" created="Tue, 18 Dec 2012 17:38:35 +0000"  >&lt;p&gt;Yes! The Nightly one was a permgen failure: &lt;a href=&quot;https://builds.apache.org/job/Lucene-Solr-NightlyTests-4.x/124/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Lucene-Solr-NightlyTests-4.x/124/console&lt;/a&gt;&lt;br/&gt;
Maybe the size of permgen is different on different platforms.&lt;/p&gt;

&lt;p&gt;I have no idea if your patches were already committed, this one ran yesterday at 16:00 UTC, but took until this morning hanging after permgen &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; - I killed it this morning.&lt;/p&gt;

&lt;p&gt;Did you run &lt;b&gt;all&lt;/b&gt; tests or only a selection. Permgen issues mostly happen when a test run does not allow GC to unload all classes, so it only happens when running all tests.&lt;/p&gt;</comment>
                            <comment id="13535109" author="markrmiller@gmail.com" created="Tue, 18 Dec 2012 18:01:32 +0000"  >&lt;p&gt;Okay - 16:00 UTC looks like 11am EST? I suck at timezones. If that is the case, I did not commit till 12:49 pm EST.&lt;/p&gt;</comment>
                            <comment id="13535192" author="commit-tag-bot" created="Tue, 18 Dec 2012 19:30:52 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; Uwe Schindler&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1423587&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1423587&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4205&quot; title=&quot;Clover runs on ASF Jenkins idle dead without a test or any thread running in main() loop waiting for file descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4205&quot;&gt;&lt;del&gt;SOLR-4205&lt;/del&gt;&lt;/a&gt;: Give jenkins-nightly another try with default mem settings.&lt;/p&gt;</comment>
                            <comment id="13535194" author="thetaphi" created="Tue, 18 Dec 2012 19:32:04 +0000"  >&lt;p&gt;I reverted the nightly memory settings from build.xml and give it another try. The multiplier on jenkins is still set to 2 instead of 3. If this passes, I will reconfigure Jenkins, too.&lt;/p&gt;

&lt;p&gt;Clover tests should run with more permgen, because it was always very critical (clover annotated classes are much larger). But clover is already very JVM specific, because it also needs more bytecode/assembler cache settings and stuff like that.&lt;/p&gt;</comment>
                            <comment id="13535199" author="commit-tag-bot" created="Tue, 18 Dec 2012 19:36:32 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Uwe Schindler&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1423590&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1423590&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Merged revision(s) 1423587 from lucene/dev/trunk:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4205&quot; title=&quot;Clover runs on ASF Jenkins idle dead without a test or any thread running in main() loop waiting for file descriptor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4205&quot;&gt;&lt;del&gt;SOLR-4205&lt;/del&gt;&lt;/a&gt;: Give jenkins-nightly another try with default mem settings.&lt;/p&gt;</comment>
                            <comment id="13541351" author="dweiss" created="Mon, 31 Dec 2012 11:52:25 +0000"  >&lt;p&gt;I said it&apos;d be difficult to make anything sensible under low-memory conditions, didn&apos;t I? Even hotspot goes wild. Try it:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.LinkedList;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CodeOom {
  &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; LinkedList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]&amp;gt; ohMy = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LinkedList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]&amp;gt;(); 

  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void oomInCode() {
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; stringLength = 1024 * 1024 * 5;
    &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;) {
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
          ohMy.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; [stringLength]);
      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (OutOfMemoryError e) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (stringLength &amp;lt; 100) {
          &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; e;
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
          stringLength /= 2;
        }
      }
    }
  }
  
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CodeOom().oomInCode();
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable t) {
      &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt;.getRuntime().halt(&lt;span class=&quot;code-comment&quot;&gt;/* anything != 0, 1, etc. */&lt;/span&gt; 5);
    }
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This should terminate with exit code 5. So it does, normally. But not when there&apos;s no memory. See for yourself:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;dweiss@ophelia:~/tmp$ java -cp . CodeOom; echo $?
1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13542051" author="dweiss" created="Wed, 2 Jan 2013 08:18:06 +0000"  >&lt;p&gt;I can&apos;t guarantee it&apos;ll be fine but it should be better... we&apos;ll see.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12625646">LUCENE-4650</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>298970</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i15xjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242735</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>