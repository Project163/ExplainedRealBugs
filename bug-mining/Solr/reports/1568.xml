<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:40:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-5325] zk connection loss causes overseer leader loss</title>
                <link>https://issues.apache.org/jira/browse/SOLR-5325</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The problem we saw was that when the solr overseer leader experienced temporary zk connectivity problems it stopped processing overseer queue events.&lt;/p&gt;

&lt;p&gt;This first happened when quorum within the external zk ensemble was lost due to too many zookeepers being stopped (similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5199&quot; title=&quot;Restarting zookeeper makes the overseer stop processing queue events&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5199&quot;&gt;&lt;del&gt;SOLR-5199&lt;/del&gt;&lt;/a&gt;). The second time it happened when there was a sufficient number of zookeepers but they were holding zookeeper leadership elections and thus refused connections (the elections were taking several seconds, we were using the default zookeeper.cnxTimeout=5s value and it was hit for one ensemble member).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12673042">SOLR-5325</key>
            <summary>zk connection loss causes overseer leader loss</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="cpoerschke">Christine Poerschke</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Oct 2013 16:23:15 +0000</created>
                <updated>Mon, 9 May 2016 18:43:58 +0000</updated>
                            <resolved>Sun, 13 Oct 2013 14:26:55 +0000</resolved>
                                    <version>4.3</version>
                    <version>4.4</version>
                    <version>4.5</version>
                                    <fixVersion>4.5.1</fixVersion>
                    <fixVersion>4.6</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="13790581" author="cpoerschke" created="Wed, 9 Oct 2013 16:27:39 +0000"  >&lt;p&gt;Attaching Overseer.java patch for solr 4.4.0, OverseerCollectionProcessor.java could be changed in similar way.&lt;/p&gt;</comment>
                            <comment id="13792274" author="markrmiller@gmail.com" created="Fri, 11 Oct 2013 02:35:35 +0000"  >&lt;p&gt;Thanks guys - I&apos;ll try and get this in quickly as it would be a great to fix it for 4.5.1.&lt;/p&gt;</comment>
                            <comment id="13792314" author="markrmiller@gmail.com" created="Fri, 11 Oct 2013 03:56:42 +0000"  >&lt;p&gt;Quick first pass patch.&lt;/p&gt;</comment>
                            <comment id="13792329" author="markrmiller@gmail.com" created="Fri, 11 Oct 2013 04:38:45 +0000"  >&lt;p&gt;New patch: A fix to the OverseerCollectionProcessor fix and some more random testing that attempts to catch this - it doesn&apos;t seem to yet though.&lt;/p&gt;</comment>
                            <comment id="13792661" author="jira-bot" created="Fri, 11 Oct 2013 14:34:50 +0000"  >&lt;p&gt;Commit 1531313 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1531313&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1531313&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5325&quot; title=&quot;zk connection loss causes overseer leader loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5325&quot;&gt;&lt;del&gt;SOLR-5325&lt;/del&gt;&lt;/a&gt;: ZooKeeper connection loss can cause the Overseer to stop processing commands.&lt;/p&gt;</comment>
                            <comment id="13792663" author="jira-bot" created="Fri, 11 Oct 2013 14:37:07 +0000"  >&lt;p&gt;Commit 1531315 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1531315&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1531315&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5325&quot; title=&quot;zk connection loss causes overseer leader loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5325&quot;&gt;&lt;del&gt;SOLR-5325&lt;/del&gt;&lt;/a&gt;: ZooKeeper connection loss can cause the Overseer to stop processing commands.&lt;/p&gt;</comment>
                            <comment id="13792671" author="markrmiller@gmail.com" created="Fri, 11 Oct 2013 14:50:20 +0000"  >&lt;p&gt;Added some more testing that I thought would catch it, but it has not yet on my system. Still poking around a bit.&lt;/p&gt;

&lt;p&gt;Anyway, I&apos;ve committed the fix.&lt;/p&gt;</comment>
                            <comment id="13792684" author="markrmiller@gmail.com" created="Fri, 11 Oct 2013 15:05:39 +0000"  >&lt;p&gt;I&apos;m still kind of surprised this would happen - we should be retrying on connectionloss up to an expiration - which would make us the leader no longer. Perhaps the length of retrying can be a little short or something. And perhaps that is part of why it is more difficult for me to reproduce in a test.&lt;/p&gt;</comment>
                            <comment id="13792688" author="jira-bot" created="Fri, 11 Oct 2013 15:08:15 +0000"  >&lt;p&gt;Commit 1531323 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1531323&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1531323&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5325&quot; title=&quot;zk connection loss causes overseer leader loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5325&quot;&gt;&lt;del&gt;SOLR-5325&lt;/del&gt;&lt;/a&gt;: raise retry padding a bit&lt;/p&gt;</comment>
                            <comment id="13792689" author="jira-bot" created="Fri, 11 Oct 2013 15:10:13 +0000"  >&lt;p&gt;Commit 1531324 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1531324&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1531324&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5325&quot; title=&quot;zk connection loss causes overseer leader loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5325&quot;&gt;&lt;del&gt;SOLR-5325&lt;/del&gt;&lt;/a&gt;: raise retry padding a bit&lt;/p&gt;</comment>
                            <comment id="13792694" author="jira-bot" created="Fri, 11 Oct 2013 15:12:54 +0000"  >&lt;p&gt;Commit 1531325 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/lucene_solr_4_5&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1531325&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1531325&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5325&quot; title=&quot;zk connection loss causes overseer leader loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5325&quot;&gt;&lt;del&gt;SOLR-5325&lt;/del&gt;&lt;/a&gt;: ZooKeeper connection loss can cause the Overseer to stop processing commands.&lt;/p&gt;</comment>
                            <comment id="13792695" author="jira-bot" created="Fri, 11 Oct 2013 15:13:42 +0000"  >&lt;p&gt;Commit 1531327 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/lucene_solr_4_5&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1531327&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1531327&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5325&quot; title=&quot;zk connection loss causes overseer leader loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5325&quot;&gt;&lt;del&gt;SOLR-5325&lt;/del&gt;&lt;/a&gt;: raise retry padding a bit&lt;/p&gt;</comment>
                            <comment id="13793666" author="markrmiller@gmail.com" created="Sun, 13 Oct 2013 14:26:31 +0000"  >&lt;p&gt;I think that the reason that this is hard to catch in a test is that we try and do retries on connectionloss up to the expiration time - there must be some case where we were still getting a connectionloss and no expiration though. This issue should handle that case for this particular bit of code, but as an overall precautionary measure, I have also bumped up the retries just a bit to try and ensure they are going beyond the session timeout.&lt;/p&gt;</comment>
                            <comment id="13793667" author="markrmiller@gmail.com" created="Sun, 13 Oct 2013 14:26:55 +0000"  >&lt;p&gt;Thanks Christine!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12666000">SOLR-5199</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12666000">SOLR-5199</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12607947" name="SOLR-5325.patch" size="11046" author="markrmiller@gmail.com" created="Fri, 11 Oct 2013 04:38:45 +0000"/>
                            <attachment id="12607944" name="SOLR-5325.patch" size="7492" author="markrmiller@gmail.com" created="Fri, 11 Oct 2013 03:56:42 +0000"/>
                            <attachment id="12607595" name="SOLR-5325.patch" size="14104" author="cpoerschke" created="Wed, 9 Oct 2013 16:27:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>352665</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 6 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1osxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>352952</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>