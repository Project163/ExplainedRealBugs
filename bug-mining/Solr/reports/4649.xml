<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:47:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-13034] RealTimeGetComponent#toSolrInputDocument should materialize LazyFields</title>
                <link>https://issues.apache.org/jira/browse/SOLR-13034</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Edited for toSolrInputDocument instead of toSolrDoc...&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;As I was working on &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12638&quot; title=&quot;Support atomic updates of nested/child documents for nested-enabled schema&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12638&quot;&gt;&lt;del&gt;SOLR-12638&lt;/del&gt;&lt;/a&gt;, I noticed RealTimgeGetComponent#toSolrDoc does not resolve lazy fields. &lt;br/&gt;
 This behavior is cause by the use of transformers which use SolrDocumentFetcher, which caused exceptions to be thrown when said input documents were written to the transaction log(TransactionLog:100).&lt;br/&gt;
 IMO, These fields ought to be resolved by the RealTimgeGetComponent#toSolrDoc method, which takes a Document as an input(which may contain LazyFields) and returns a SolrInputDocument representation of said SolrDocument.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13201833">SOLR-13034</key>
            <summary>RealTimeGetComponent#toSolrInputDocument should materialize LazyFields</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dsmiley">David Smiley</assignee>
                                    <reporter username="moshebla">mosh</reporter>
                        <labels>
                            <label>RealTimeGet</label>
                    </labels>
                <created>Sun, 2 Dec 2018 06:15:40 +0000</created>
                <updated>Wed, 23 Jun 2021 13:42:48 +0000</updated>
                            <resolved>Thu, 25 Feb 2021 22:06:10 +0000</resolved>
                                                    <fixVersion>8.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                <comments>
                            <comment id="17257100" author="dsmiley" created="Thu, 31 Dec 2020 21:15:18 +0000"  >&lt;p&gt;Is there a test showing this issue?  Or can you show how to provoke it in an existing test with a modification, or a new test?&lt;/p&gt;</comment>
                            <comment id="17286188" author="dsmiley" created="Wed, 17 Feb 2021 22:58:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=moshebla&quot; class=&quot;user-hover&quot; rel=&quot;moshebla&quot;&gt;moshebla&lt;/a&gt; are you sure the issue was with &lt;tt&gt;toSolrDoc&lt;/tt&gt; and not &lt;tt&gt;toSolrInputDocument&lt;/tt&gt;?  On one hand it seems you really did mean what you said because you refer to the one accepting a Lucene &lt;tt&gt;Document&lt;/tt&gt;.  However, &lt;tt&gt;toSolrDoc&lt;/tt&gt; protects against the possibility of LazyField values via the call to materialize(...), and was doing so before you even filed this issue (I checked via git history carefully).  It did this starting in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10286&quot; title=&quot;Declare a field as &amp;quot;large&amp;quot;, don&amp;#39;t keep value in the document cache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10286&quot;&gt;&lt;del&gt;SOLR-10286&lt;/del&gt;&lt;/a&gt;.  Maybe you were using an older Solr release?&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;toSolrInputDocument&lt;/tt&gt; does not have this protection, and is vulnerable to what you describe.  If I were to replace where you said one with the other, it would match a bug I&apos;ve been able to reproduce that was reported by a user.  Consequently, I&apos;m tempted to edit this issue accordingly, instead of filing a new issue.  WDYT?&lt;/p&gt;</comment>
                            <comment id="17291234" author="jira-bot" created="Thu, 25 Feb 2021 21:29:57 +0000"  >&lt;p&gt;Commit 62971c4f990437e3ba4a5f4a2e980a058c2c01f1 in lucene-solr&apos;s branch refs/heads/master from David Smiley&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=62971c4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=62971c4&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13034&quot; title=&quot;RealTimeGetComponent#toSolrInputDocument should materialize LazyFields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13034&quot;&gt;&lt;del&gt;SOLR-13034&lt;/del&gt;&lt;/a&gt;: RTG sometimes didn&apos;t materialize LazyField (#2408)&lt;/p&gt;

&lt;p&gt;Partial (AKA Atomic) updates could encounter &quot;LazyField&quot; instances in the document&lt;br/&gt;
cache and not know hot to deal with them when writing the updated doc to the update log.&lt;/p&gt;</comment>
                            <comment id="17291239" author="jira-bot" created="Thu, 25 Feb 2021 21:45:41 +0000"  >&lt;p&gt;Commit 112e398d97d77f89bd2d114e569572d77536c290 in lucene-solr&apos;s branch refs/heads/branch_8x from David Smiley&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=112e398&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=112e398&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13034&quot; title=&quot;RealTimeGetComponent#toSolrInputDocument should materialize LazyFields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13034&quot;&gt;&lt;del&gt;SOLR-13034&lt;/del&gt;&lt;/a&gt;: RTG sometimes didn&apos;t materialize LazyField (#2408)&lt;/p&gt;

&lt;p&gt;Partial (AKA Atomic) updates could encounter &quot;LazyField&quot; instances in the document&lt;br/&gt;
cache and not know hot to deal with them when writing the updated doc to the update log.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 62971c4f990437e3ba4a5f4a2e980a058c2c01f1)&lt;/p&gt;</comment>
                            <comment id="17291259" author="dsmiley" created="Thu, 25 Feb 2021 22:06:10 +0000"  >&lt;p&gt;Note: the work-around is simply to disable enableLazyFieldLoading&lt;/p&gt;</comment>
                            <comment id="17368193" author="mayya" created="Wed, 23 Jun 2021 13:42:48 +0000"  >&lt;p&gt;Closing after the 8.9.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13360616">SOLR-15192</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13177593">SOLR-12638</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s012u0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>