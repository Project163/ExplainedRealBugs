<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:35:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4358] SolrJ, by preventing multi-part post, loses key information about file name that Tika needs</title>
                <link>https://issues.apache.org/jira/browse/SOLR-4358</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;SolrJ accepts a ContentStream, which has a name field.  Within HttpSolrServer.java, if SolrJ makes the decision to use multipart posts, this filename is transmitted as part of the form boundary information.  However, if SolrJ chooses not to use multipart post, the filename information is lost.&lt;/p&gt;

&lt;p&gt;This information is used by SolrCell (Tika) to make decisions about content extraction, so it is very important that it makes it into Solr in one way or another.  Either SolrJ should set appropriate equivalent headers to send the filename automatically, or it should force multipart posts when this information is present.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12629273">SOLR-4358</key>
            <summary>SolrJ, by preventing multi-part post, loses key information about file name that Tika needs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ryantxu">Ryan McKinley</assignee>
                                    <reporter username="kwright@metacarta.com">Karl Wright</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Jan 2013 14:28:13 +0000</created>
                <updated>Mon, 9 May 2016 18:49:07 +0000</updated>
                            <resolved>Fri, 19 Apr 2013 20:29:31 +0000</resolved>
                                    <version>4.0</version>
                                    <fixVersion>4.4</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>clients - java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13564225" author="janhoy" created="Mon, 28 Jan 2013 11:54:35 +0000"  >&lt;p&gt;SolrCell will use resource.name request param as filename hint. The application using SolrJ can set this. Not sure if SolrJ really should be closesly tied to SolrCell params, SolrCell being a contrib module..&lt;/p&gt;</comment>
                            <comment id="13564230" author="kwright@metacarta.com" created="Mon, 28 Jan 2013 12:25:46 +0000"  >&lt;p&gt;My point is independent of SolrCell.  If anything in Solr were to care about the filename in a multipart post, then if SolrJ is making the decision to use standard POST vs multipart, it should also take care to eliminate any resulting differences in the Solr environment.  If SolrJ gives the user control over the posting method, then I don&apos;t care if SolrJ tries to fix this or not.&lt;/p&gt;</comment>
                            <comment id="13571134" author="kwright@metacarta.com" created="Tue, 5 Feb 2013 08:12:06 +0000"  >&lt;p&gt;Here&apos;s a patch that does essentially what I think is wanted.&lt;/p&gt;</comment>
                            <comment id="13633189" author="ryantxu" created="Tue, 16 Apr 2013 18:59:31 +0000"  >&lt;p&gt;updated patch to allow get/set useMultiPartPost&lt;/p&gt;</comment>
                            <comment id="13633200" author="ryantxu" created="Tue, 16 Apr 2013 19:03:22 +0000"  >&lt;p&gt;Manifold Connectors uses Solrj and should be able to force multipart requests&lt;/p&gt;</comment>
                            <comment id="13633232" author="ryantxu" created="Tue, 16 Apr 2013 19:29:32 +0000"  >&lt;p&gt;added to trunk and 4x&lt;/p&gt;</comment>
                            <comment id="13633512" author="hossman" created="Tue, 16 Apr 2013 22:48:35 +0000"  >&lt;p&gt;As noted by Uwe on the dev list, the changes committed for this issue seem ot have caused various test failures, as well as sending ChaosMonkeySafeLeader into an infinite loop(?!)&lt;/p&gt;

&lt;p&gt;Re-opening to investigate - likely need to roll back these changes if we can&apos;t get to the bottom of things right away&lt;/p&gt;</comment>
                            <comment id="13633516" author="ryantxu" created="Tue, 16 Apr 2013 22:50:56 +0000"  >&lt;p&gt;sorry... digging now...&lt;/p&gt;</comment>
                            <comment id="13633522" author="thetaphi" created="Tue, 16 Apr 2013 22:57:03 +0000"  >&lt;p&gt;I stopped Jenkins builds until this is fixed/reverted, because the Windows Jenkins machine needed to be killed hard because ChaosMonkeySafeLeaderTest was eating all virtual CPUs available, making it impossible to shut down the virtual machine or stop tests other than hitting the virtual PowerOff button &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Under Linux, only kill -9 stops ChaosMonkey.&lt;/p&gt;</comment>
                            <comment id="13633556" author="ryantxu" created="Tue, 16 Apr 2013 23:33:21 +0000"  >&lt;p&gt;reverted in trunk &amp;amp; 4.x&lt;/p&gt;

&lt;p&gt;I can&apos;t figure out what is causing the problem though... will keep digging.&lt;/p&gt;

</comment>
                            <comment id="13633558" author="thetaphi" created="Tue, 16 Apr 2013 23:35:46 +0000"  >&lt;p&gt;Thanks, I reenabled Jenkins builds.&lt;/p&gt;</comment>
                            <comment id="13633887" author="kwright@metacarta.com" created="Wed, 17 Apr 2013 08:12:07 +0000"  >&lt;p&gt;Diff of additional changes I needed to include in order to get multipart post working again&lt;/p&gt;</comment>
                            <comment id="13635736" author="ryantxu" created="Thu, 18 Apr 2013 21:50:39 +0000"  >&lt;p&gt;Here is an updated patch.&lt;/p&gt;

&lt;p&gt;It adds &apos;setUseMultipart(true)&apos; into the random test configs.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;BUT&lt;/b&gt; it seems to have issues with ZK distributed search.  I don&apos;t know if that is just a test/environmet issue on my side or a real issue.  But I get this failure:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Tests with failures:
 -org.apache.solr.cloud.CollectionsAPIDistributedZkTest.testDistribSearch

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="13635745" author="kwright@metacarta.com" created="Thu, 18 Apr 2013 21:56:22 +0000"  >&lt;p&gt;Why would SolrCloud be affected at all by an HttpSolrServer.java change?&lt;/p&gt;</comment>
                            <comment id="13636032" author="ryantxu" created="Fri, 19 Apr 2013 04:08:17 +0000"  >&lt;p&gt;SolrCloud/Distributed search uses HttpSolrServer for internal communication &amp;#8211; so something must be fishy.&lt;/p&gt;

&lt;p&gt;It is not clear to me how the tests are failing &amp;#8211; just that they are.&lt;/p&gt;</comment>
                            <comment id="13636159" author="kwright@metacarta.com" created="Fri, 19 Apr 2013 07:27:23 +0000"  >&lt;p&gt;Ok - looking into it.&lt;/p&gt;</comment>
                            <comment id="13636166" author="kwright@metacarta.com" created="Fri, 19 Apr 2013 07:52:05 +0000"  >&lt;p&gt;The test that fails for me is:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[junit4:junit4] Tests with failures:
[junit4:junit4]   - org.apache.solr.cloud.AliasIntegrationTest.testDistribSearch

[junit4:junit4]   - org.apache.solr.cloud.AliasIntegrationTest (suite)
[junit4:junit4]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This on branch_4x.  Perhaps the test was renamed on trunk?  Anyhow, the failure looks suspiciously like I tripped over a local disk error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  2&amp;gt; Creating dataDir: C:\wip\solr\branch_4x\solr\build\solr-core\test\J0\.\solrtest-AliasIntegrationTest-1366356503950
  2&amp;gt; !!!! WARNING: best effort to remove C:\wip\solr\branch_4x\solr\build\solr-core\test\J0\.\org.apache.solr.cloud.AliasIntegrationTest-1366356503947\jetty1\index\org.apache.lucene.store.RAMDirectory@1f24a78 lockFactory=org.apache.lucene.store.NativeFSLockFactory@15b0c83-write.lock FAILED !!!!!
  2&amp;gt; !!!! WARNING: best effort to remove C:\wip\solr\branch_4x\solr\build\solr-core\test\J0\.\org.apache.solr.cloud.AliasIntegrationTest-1366356503947\jetty1\index FAILED !!!!!
  2&amp;gt; !!!! WARNING: best effort to remove C:\wip\solr\branch_4x\solr\build\solr-core\test\J0\.\org.apache.solr.cloud.AliasIntegrationTest-1366356503947\jetty1 FAILED !!!!!
  2&amp;gt; !!!! WARNING: best effort to remove C:\wip\solr\branch_4x\solr\build\solr-core\test\J0\.\org.apache.solr.cloud.AliasIntegrationTest-1366356503947 FAILED !!!!!
  2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=AliasIntegrationTest -Dtests.method=testDistribSearch -Dtests.seed=964155E88FA3F7F -Dtests.slow=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.locale=en_PH -Dtests.timezone=Etc/GMT0 -Dtests.file.encoding=Cp1252
[03:28:23.944] ERROR   53.9s | AliasIntegrationTest.testDistribSearch &amp;lt;&amp;lt;&amp;lt;
   &amp;gt; Throwable #1: org.apache.solr.client.solrj.impl.HttpSolrServer$RemoteSolrException: Server at http:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:56486/_hfw/testalias returned non ok status:500, message:Server Error
&lt;/span&gt;   &amp;gt; 	at __randomizedtesting.SeedInfo.seed([964155E88FA3F7F:88829B46FFA55F43]:0)
   &amp;gt; 	at org.apache.solr.client.solrj.impl.HttpSolrServer.request(HttpSolrServer.java:385)
   &amp;gt; 	at org.apache.solr.client.solrj.impl.HttpSolrServer.request(HttpSolrServer.java:180)
   &amp;gt; 	at org.apache.solr.client.solrj.request.AbstractUpdateRequest.process(AbstractUpdateRequest.java:117)
   &amp;gt; 	at org.apache.solr.client.solrj.SolrServer.add(SolrServer.java:116)
   &amp;gt; 	at org.apache.solr.client.solrj.SolrServer.add(SolrServer.java:102)
   &amp;gt; 	at org.apache.solr.cloud.AliasIntegrationTest.doTest(AliasIntegrationTest.java:213)
   &amp;gt; 	at org.apache.solr.BaseDistributedSearchTestCase.testDistribSearch(BaseDistributedSearchTestCase.java:806)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;On repeat, the test succeeded.  Obviously something random about the SolrCloud tests in general, I think.  So I will rerun until I&apos;m satisfied no test fails repeatably.&lt;/p&gt;</comment>
                            <comment id="13636184" author="kwright@metacarta.com" created="Fri, 19 Apr 2013 08:33:42 +0000"  >&lt;p&gt;Ok, I found one that fails repeatably - but it seems to fail not due to HttpSolrServer but due to problems shutting down threads.&lt;/p&gt;

&lt;p&gt;This is how to repeat it:&lt;/p&gt;

&lt;p&gt;ant test  -Dtestcase=BasicDistributedZk2Test -Dtests.seed=398C285200313054 -Dtests.slow=true -Dtests.locale=uk_UA -Dtests.timezone=Africa/Kigali -Dtests.file.encoding=Cp1252&lt;/p&gt;

&lt;p&gt;The error it gets is this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[junit4:junit4]   2&amp;gt; Creating dataDir: C:\wip\solr\branch_4x\solr\build\solr-cor
e\test\J0\.\solrtest-BasicDistributedZk2Test-1366359983221
[junit4:junit4]   2&amp;gt; !!!! WARNING: best effort to remove C:\wip\solr\branch_4x\s
olr\build\solr-core\test\J0\.\org.apache.solr.cloud.BasicDistributedZk2Test-1366
359983220\jetty2\index\org.apache.lucene.store.RAMDirectory@10c6406 lockFactory=
org.apache.lucene.store.NativeFSLockFactory@2573a8-write.lock FAILED !!!!!
[junit4:junit4]   2&amp;gt; !!!! WARNING: best effort to remove C:\wip\solr\branch_4x\s
olr\build\solr-core\test\J0\.\org.apache.solr.cloud.BasicDistributedZk2Test-1366
359983220\jetty2\index FAILED !!!!!
[junit4:junit4]   2&amp;gt; !!!! WARNING: best effort to remove C:\wip\solr\branch_4x\s
olr\build\solr-core\test\J0\.\org.apache.solr.cloud.BasicDistributedZk2Test-1366
359983220\jetty2 FAILED !!!!!
[junit4:junit4]   2&amp;gt; !!!! WARNING: best effort to remove C:\wip\solr\branch_4x\s
olr\build\solr-core\test\J0\.\org.apache.solr.cloud.BasicDistributedZk2Test-1366
359983220 FAILED !!!!!
[junit4:junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=BasicDistributed
Zk2Test -Dtests.method=testDistribSearch -Dtests.seed=398C285200313054 -Dtests.s
low=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.locale=uk_UA -Dtests.timezone=Africa/Kigali -Dtests.file.encodi
ng=Cp1252
[junit4:junit4] ERROR   57.2s | BasicDistributedZk2Test.testDistribSearch &amp;lt;&amp;lt;&amp;lt;
[junit4:junit4]    &amp;gt; Throwable #1: org.apache.solr.client.solrj.impl.HttpSolrSer
ver$RemoteSolrException: Server at http:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:59625/onenodecollectioncore
&lt;/span&gt;returned non ok status:500, message:Server Error
[junit4:junit4]    &amp;gt;    at __randomizedtesting.SeedInfo.seed([398C285200313054:B
86AA64A776E5068]:0)
[junit4:junit4]    &amp;gt;    at org.apache.solr.client.solrj.impl.HttpSolrServer.requ
est(HttpSolrServer.java:385)
[junit4:junit4]    &amp;gt;    at org.apache.solr.client.solrj.impl.HttpSolrServer.requ
est(HttpSolrServer.java:180)
[junit4:junit4]    &amp;gt;    at org.apache.solr.client.solrj.request.AbstractUpdateRe
quest.process(AbstractUpdateRequest.java:117)
[junit4:junit4]    &amp;gt;    at org.apache.solr.client.solrj.SolrServer.add(SolrServe
r.java:116)
[junit4:junit4]    &amp;gt;    at org.apache.solr.client.solrj.SolrServer.add(SolrServe
r.java:102)
[junit4:junit4]    &amp;gt;    at org.apache.solr.cloud.BasicDistributedZk2Test.testNod
eWithoutCollectionForwarding(BasicDistributedZk2Test.java:197)
[junit4:junit4]    &amp;gt;    at org.apache.solr.cloud.BasicDistributedZk2Test.doTest(
BasicDistributedZk2Test.java:89)
[junit4:junit4]    &amp;gt;    at org.apache.solr.BaseDistributedSearchTestCase.testDis
tribSearch(BaseDistributedSearchTestCase.java:806)
[junit4:junit4]    &amp;gt;    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:619)
[junit4:junit4]   1&amp;gt; INFO  - 2013-04-19 04:27:20.374; org.apache.solr.SolrTestCa
seJ4; ###deleteCore
[junit4:junit4] HEARTBEAT J0 PID(14064@acromantula): 2013-04-19T04:28:30, stalle
d &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 69.7s at: BasicDistributedZk2Test.testDistribSearch
[junit4:junit4]   1&amp;gt; ERROR - 2013-04-19 04:29:21.383; org.apache.solr.SolrTestCa
seJ4; ERROR: SolrIndexSearcher opens=10 closes=8
[junit4:junit4]   2&amp;gt; 178598 T9 ccr.ThreadLeakControl.checkThreadLeaks WARNING Wi
ll linger awaiting termination of 1 leaked thread(s).
[junit4:junit4] HEARTBEAT J0 PID(14064@acromantula): 2013-04-19T04:29:30, stalle
d &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;  130s at: BasicDistributedZk2Test.testDistribSearch
[junit4:junit4]   2&amp;gt; 198601 T9 ccr.ThreadLeakControl.checkThreadLeaks SEVERE 1 t
hread leaked from SUITE scope at org.apache.solr.cloud.BasicDistributedZk2Test:

[junit4:junit4]   2&amp;gt;       1) &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[id=71, name=searcherExecutor-25-thread-1, s
tate=WAITING, group=TGRP-BasicDistributedZk2Test]
[junit4:junit4]   2&amp;gt;            at sun.misc.Unsafe.park(Native Method)
[junit4:junit4]   2&amp;gt;            at java.util.concurrent.locks.LockSupport.park(L
ockSupport.java:158)
[junit4:junit4]   2&amp;gt;            at java.util.concurrent.locks.AbstractQueuedSync
hronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)
[junit4:junit4]   2&amp;gt;            at java.util.concurrent.LinkedBlockingQueue.take
(LinkedBlockingQueue.java:399)
[junit4:junit4]   2&amp;gt;            at java.util.concurrent.ThreadPoolExecutor.getTa
sk(ThreadPoolExecutor.java:947)
[junit4:junit4]   2&amp;gt;            at java.util.concurrent.ThreadPoolExecutor$Worke
r.run(ThreadPoolExecutor.java:907)
[junit4:junit4]   2&amp;gt;            at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:619)
[junit4:junit4]   2&amp;gt; 198601 T9 ccr.ThreadLeakControl.tryToInterruptAll Starting
to interrupt leaked threads:
[junit4:junit4]   2&amp;gt;       1) &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[id=71, name=searcherExecutor-25-thread-1, s
tate=WAITING, group=TGRP-BasicDistributedZk2Test]
[junit4:junit4]   2&amp;gt; 201602 T9 ccr.ThreadLeakControl.tryToInterruptAll SEVERE Th
ere are still zombie threads that couldn&apos;t be terminated:
[junit4:junit4]   2&amp;gt;       1) &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[id=71, name=searcherExecutor-25-thread-1, s
tate=WAITING, group=TGRP-BasicDistributedZk2Test]
[junit4:junit4]   2&amp;gt;            at sun.misc.Unsafe.park(Native Method)
[junit4:junit4]   2&amp;gt;            at java.util.concurrent.locks.LockSupport.park(L
ockSupport.java:158)
[junit4:junit4]   2&amp;gt;            at java.util.concurrent.locks.AbstractQueuedSync
hronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)
[junit4:junit4]   2&amp;gt;            at java.util.concurrent.LinkedBlockingQueue.take
(LinkedBlockingQueue.java:399)
[junit4:junit4]   2&amp;gt;            at java.util.concurrent.ThreadPoolExecutor.getTa
sk(ThreadPoolExecutor.java:947)
[junit4:junit4]   2&amp;gt;            at java.util.concurrent.ThreadPoolExecutor$Worke
r.run(ThreadPoolExecutor.java:907)
[junit4:junit4]   2&amp;gt;            at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:619)
[junit4:junit4]   2&amp;gt; NOTE: test params are: codec=Lucene42: {}, docValues:{}, si
m=DefaultSimilarity, locale=uk_UA, timezone=Africa/Kigali
[junit4:junit4]   2&amp;gt; NOTE: Windows Vista 6.0 x86/Sun Microsystems Inc. 1.6.0_21
(32-bit)/cpus=2,threads=2,free=8746296,total=33193984
[junit4:junit4]   2&amp;gt; NOTE: All tests run in &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; JVM: [BasicDistributedZk2Test]
[junit4:junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=BasicDistributed
Zk2Test -Dtests.seed=398C285200313054 -Dtests.slow=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dtests.locale=uk_UA -Dt
ests.timezone=Africa/Kigali -Dtests.file.encoding=Cp1252
[junit4:junit4] ERROR   0.00s | BasicDistributedZk2Test (suite) &amp;lt;&amp;lt;&amp;lt;
[junit4:junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: ERROR: SolrIndexSea
rcher opens=10 closes=8
[junit4:junit4]    &amp;gt;    at __randomizedtesting.SeedInfo.seed([398C285200313054]:
0)
[junit4:junit4]    &amp;gt;    at org.apache.solr.SolrTestCaseJ4.endTrackingSearchers(S
olrTestCaseJ4.java:252)
[junit4:junit4]    &amp;gt;    at org.apache.solr.SolrTestCaseJ4.afterClass(SolrTestCas
eJ4.java:101)
[junit4:junit4]    &amp;gt;    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:619)Throwable #2: co
m.carrotsearch.randomizedtesting.ThreadLeakError: 1 thread leaked from SUITE sco
pe at org.apache.solr.cloud.BasicDistributedZk2Test:
[junit4:junit4]    &amp;gt;    1) &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[id=71, name=searcherExecutor-25-thread-1, stat
e=WAITING, group=TGRP-BasicDistributedZk2Test]
[junit4:junit4]    &amp;gt;         at sun.misc.Unsafe.park(Native Method)
[junit4:junit4]    &amp;gt;         at java.util.concurrent.locks.LockSupport.park(Lock
Support.java:158)
[junit4:junit4]    &amp;gt;         at java.util.concurrent.locks.AbstractQueuedSynchro
nizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)
[junit4:junit4]    &amp;gt;         at java.util.concurrent.LinkedBlockingQueue.take(Li
nkedBlockingQueue.java:399)
[junit4:junit4]    &amp;gt;         at java.util.concurrent.ThreadPoolExecutor.getTask(
ThreadPoolExecutor.java:947)
[junit4:junit4]    &amp;gt;         at java.util.concurrent.ThreadPoolExecutor$Worker.r
un(ThreadPoolExecutor.java:907)
[junit4:junit4]    &amp;gt;         at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:619)
[junit4:junit4]    &amp;gt;    at __randomizedtesting.SeedInfo.seed([398C285200313054]:
0)Throwable #3: com.carrotsearch.randomizedtesting.ThreadLeakError: There are st
ill zombie threads that couldn&apos;t be terminated:
[junit4:junit4]    &amp;gt;    1) &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;[id=71, name=searcherExecutor-25-thread-1, stat
e=WAITING, group=TGRP-BasicDistributedZk2Test]
[junit4:junit4]    &amp;gt;         at sun.misc.Unsafe.park(Native Method)
[junit4:junit4]    &amp;gt;         at java.util.concurrent.locks.LockSupport.park(Lock
Support.java:158)
[junit4:junit4]    &amp;gt;         at java.util.concurrent.locks.AbstractQueuedSynchro
nizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)
[junit4:junit4]    &amp;gt;         at java.util.concurrent.LinkedBlockingQueue.take(Li
nkedBlockingQueue.java:399)
[junit4:junit4]    &amp;gt;         at java.util.concurrent.ThreadPoolExecutor.getTask(
ThreadPoolExecutor.java:947)
[junit4:junit4]    &amp;gt;         at java.util.concurrent.ThreadPoolExecutor$Worker.r
un(ThreadPoolExecutor.java:907)
[junit4:junit4]    &amp;gt;         at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:619)
[junit4:junit4]    &amp;gt;    at __randomizedtesting.SeedInfo.seed([398C285200313054]:
0)
[junit4:junit4] Completed in 203.91s, 1 test, 1 failure, 3 errors &amp;lt;&amp;lt;&amp;lt; FAILURES!
[junit4:junit4]
[junit4:junit4]
[junit4:junit4] Tests with failures:
[junit4:junit4]   - org.apache.solr.cloud.BasicDistributedZk2Test.testDistribSea
rch
[junit4:junit4]   - org.apache.solr.cloud.BasicDistributedZk2Test (suite)
[junit4:junit4]
[junit4:junit4]
[junit4:junit4] JVM J0:     1.55 ..   206.98 =   205.43s
[junit4:junit4] Execution time total: 3 minutes 27 seconds
[junit4:junit4] Tests summary: 1 suite, 1 test, 3 suite-level errors, 1 error

BUILD FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I don&apos;t think this is related to the patch for this ticket, but to be sure I&apos;ll peel the patch out and try it again.&lt;/p&gt;</comment>
                            <comment id="13636290" author="kwright@metacarta.com" created="Fri, 19 Apr 2013 11:32:30 +0000"  >&lt;p&gt;Yup, test fails even with patch removed.  So it&apos;s not the patch.&lt;/p&gt;</comment>
                            <comment id="13636572" author="ryantxu" created="Fri, 19 Apr 2013 16:34:32 +0000"  >&lt;p&gt;this just passed on my local trunk checkout...  I will commit and make sure jenkins is happy with trunk.&lt;/p&gt;

&lt;p&gt;If it is, I will merge to 4.x&lt;/p&gt;</comment>
                            <comment id="13636575" author="commit-tag-bot" created="Fri, 19 Apr 2013 16:35:28 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; ryan&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1469946&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1469946&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4358&quot; title=&quot;SolrJ, by preventing multi-part post, loses key information about file name that Tika needs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4358&quot;&gt;&lt;del&gt;SOLR-4358&lt;/del&gt;&lt;/a&gt;: HttpSolrServer now supports forcing multipart requests&lt;/p&gt;</comment>
                            <comment id="13636842" author="commit-tag-bot" created="Fri, 19 Apr 2013 20:28:24 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; ryan&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1470023&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1470023&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4358&quot; title=&quot;SolrJ, by preventing multi-part post, loses key information about file name that Tika needs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4358&quot;&gt;&lt;del&gt;SOLR-4358&lt;/del&gt;&lt;/a&gt;: HttpSolrServer now supports forcing multipart requests&lt;br/&gt;
........&lt;br/&gt;
Merged revision(s) 1469946 from lucene/dev/trunk:&lt;/p&gt;</comment>
                            <comment id="13636844" author="ryantxu" created="Fri, 19 Apr 2013 20:29:31 +0000"  >&lt;p&gt;just added to trunk and 4.x&lt;/p&gt;

&lt;p&gt;I&apos;ll keep an eye on jenkins and hope this does not cause failures&lt;/p&gt;</comment>
                            <comment id="13641504" author="kwright@metacarta.com" created="Thu, 25 Apr 2013 06:53:46 +0000"  >&lt;p&gt;Has this ticket fix been pulled up into the latest RC for Solr 4.3?&lt;/p&gt;</comment>
                            <comment id="13644597" author="elyograg" created="Mon, 29 Apr 2013 16:00:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwright%40metacarta.com&quot; class=&quot;user-hover&quot; rel=&quot;kwright@metacarta.com&quot;&gt;kwright@metacarta.com&lt;/a&gt; It has been committed into trunk (5.0) and branch_4x (4.4).  The commits happened on April 19th, which is after the 4.3 branch was created.&lt;/p&gt;

&lt;p&gt;I thought I remembered a discussion on a vote thread for 4.3 about a fix for a multi-part mime issue that went into one of the later release candidates, but now I can&apos;t find it, so it must have happened only in my mind.  I double-checked the 4.3 code branch and this is NOT included.&lt;/p&gt;

&lt;p&gt;I believe that it&apos;s now too late to get it into 4.3.  You have the option of building branch_4x if you need the fix now.&lt;/p&gt;</comment>
                            <comment id="13650611" author="kamaci" created="Tue, 7 May 2013 08:45:02 +0000"  >&lt;p&gt;This has been committed into 4.3 (&lt;a href=&quot;http://lucene.apache.org/solr/4_3_0/changes/Changes.html#4.3.0.new_features&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://lucene.apache.org/solr/4_3_0/changes/Changes.html#4.3.0.new_features&lt;/a&gt;) We can change fix version/s of this issue.&lt;/p&gt;</comment>
                            <comment id="13650885" author="elyograg" created="Tue, 7 May 2013 14:38:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kamaci&quot; class=&quot;user-hover&quot; rel=&quot;kamaci&quot;&gt;kamaci&lt;/a&gt; I&apos;ve checked the 4.3.0 source and this patch did not make it in there.&lt;/p&gt;

&lt;p&gt;Looking through the commit history and the issue notes, what happened is this: An initial patch was created and committed on April 16th.  That commit included the entry in CHANGES.txt.  It was quickly discovered that this didn&apos;t fix the issue, so the code change was reverted - but the entry in CHANGES.txt got left behind.  The 4.3 code branch was created on April 17th.  On April 19th, the true fix for this issue was committed to trunk and the 4x branch.&lt;/p&gt;

&lt;p&gt;The CHANGES.txt for 4.3.0 is unfortunately wrong - the fix is NOT in 4.3.&lt;/p&gt;</comment>
                            <comment id="13716834" author="steve_rowe" created="Tue, 23 Jul 2013 18:38:43 +0000"  >&lt;p&gt;Bulk close resolved 4.4 issues&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12642796">CONNECTORS-674</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12630028">CONNECTORS-630</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12579432" name="SOLR-4358.patch" size="4664" author="ryantxu" created="Thu, 18 Apr 2013 21:50:39 +0000"/>
                            <attachment id="12578986" name="SOLR-4358.patch" size="3933" author="ryantxu" created="Tue, 16 Apr 2013 18:59:31 +0000"/>
                            <attachment id="12567975" name="SOLR-4358.patch" size="3116" author="kwright@metacarta.com" created="Tue, 5 Feb 2013 08:12:06 +0000"/>
                            <attachment id="12579109" name="additional_changes.diff" size="2799" author="kwright@metacarta.com" created="Wed, 17 Apr 2013 08:12:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>309315</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1elbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>293383</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>