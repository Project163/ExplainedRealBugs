<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:17:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9740] Parameter substitution (MacroExpander) Map expand issue</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9740</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  @Test
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testMap() {
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]&amp;gt; request = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]&amp;gt;();
    request.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;fq&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {&lt;span class=&quot;code-quote&quot;&gt;&quot;${one_ref}&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;two&quot;&lt;/span&gt;});
    request.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;one_ref&quot;&lt;/span&gt;,&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {&lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;});
    Map expanded = MacroExpander.expand(request);
    assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;, ((&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[])expanded.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;fq&quot;&lt;/span&gt;))[0]);
    assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;two&quot;&lt;/span&gt;, ((&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]) expanded.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;fq&quot;&lt;/span&gt;))[1]);
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;fails with `java.lang.ArrayIndexOutOfBoundsException` because the resultant `expanded` structure only has a single &quot;fq&quot; value of &quot;one&quot;.  &quot;two&quot; got eaten.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13019389">SOLR-9740</key>
            <summary>Parameter substitution (MacroExpander) Map expand issue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yseeley@gmail.com">Yonik Seeley</assignee>
                                    <reporter username="ehatcher">Erik Hatcher</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Nov 2016 22:23:26 +0000</created>
                <updated>Sat, 8 Jun 2019 15:33:17 +0000</updated>
                            <resolved>Tue, 8 Nov 2016 23:13:07 +0000</resolved>
                                    <version>6.0.1</version>
                                    <fixVersion>6.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15648978" author="ehatcher" created="Tue, 8 Nov 2016 22:25:53 +0000"  >&lt;p&gt;this seems like a critical bug - we&apos;re seeing it eat fq&apos;s for real, when we&apos;re doing a &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;amp;fq=range_field:[${lower} TO ${upper}]&amp;amp;fq=category:value&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; type of request.&lt;/p&gt;</comment>
                            <comment id="15649016" author="yseeley@gmail.com" created="Tue, 8 Nov 2016 22:39:36 +0000"  >&lt;p&gt;Yikes!  I&apos;ll take a look...&lt;/p&gt;</comment>
                            <comment id="15649060" author="yseeley@gmail.com" created="Tue, 8 Nov 2016 22:52:47 +0000"  >&lt;p&gt;Yeah, so the bug causes all non-templated values after the first templated value would be dropped in a multi-valued argument.&lt;/p&gt;

&lt;p&gt;Here&apos;s a patch + test.  I&apos;ll commit shortly.&lt;/p&gt;</comment>
                            <comment id="15649122" author="jira-bot" created="Tue, 8 Nov 2016 23:10:11 +0000"  >&lt;p&gt;Commit 11840469d9716b3fdb0303645475db2b8def1522 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=1184046&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=1184046&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9740&quot; title=&quot;Parameter substitution (MacroExpander) Map expand issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9740&quot;&gt;&lt;del&gt;SOLR-9740&lt;/del&gt;&lt;/a&gt;: fix macro expansion of multi-valued parameters&lt;/p&gt;</comment>
                            <comment id="15649125" author="jira-bot" created="Tue, 8 Nov 2016 23:10:46 +0000"  >&lt;p&gt;Commit 768b7ff8f582b14d787563703eb3bd65388d9fac in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=768b7ff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=768b7ff&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9740&quot; title=&quot;Parameter substitution (MacroExpander) Map expand issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9740&quot;&gt;&lt;del&gt;SOLR-9740&lt;/del&gt;&lt;/a&gt;: fix macro expansion of multi-valued parameters&lt;/p&gt;</comment>
                            <comment id="15650934" author="ehatcher" created="Wed, 9 Nov 2016 13:30:49 +0000"  >&lt;p&gt;Thanks for the quick fix, Yonik!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12838068" name="SOLR-9740.patch" size="1621" author="yseeley@gmail.com" created="Tue, 8 Nov 2016 22:52:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i363lb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>