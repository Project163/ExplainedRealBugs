<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:56:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6507] various bugs using localparams with stats.field </title>
                <link>https://issues.apache.org/jira/browse/SOLR-6507</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;StatsComponent has two different code paths for dealing with param parsing depending on wether it&apos;s a single node request of a distributed request, which results in two very differnet looking bugs (but in my opinion have the same root cause: bogus local param parsing):&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;the documented local params for stats.field don&apos;t work on distributed stats requests at all&lt;/li&gt;
	&lt;li&gt;per field &quot;calcdistinct&quot; doesn&apos;t work if localparms are used on single node request&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12740917">SOLR-6507</key>
            <summary>various bugs using localparams with stats.field </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Sep 2014 00:05:35 +0000</created>
                <updated>Mon, 9 May 2016 18:53:37 +0000</updated>
                            <resolved>Mon, 15 Sep 2014 22:22:28 +0000</resolved>
                                                    <fixVersion>5.0</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14130897" author="hossman" created="Fri, 12 Sep 2014 00:06:25 +0000"  >
&lt;p&gt;The attached patch has some quick and dirty tests demonstraitng these problems as well as my porposed fix.  &lt;/p&gt;

&lt;p&gt;Rather then slap a bandaid on this i did a pretty serious overhaul of the way the code in StatsComponent is laid out.  This not only fixes the bug by consolidating the param parsing logic into a single place, it helps ensure param descrepencies like won&apos;t pop up as we add features (by consolidating the param parsing logic into a single place), and it moves the direction i want to move for features like &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6354&quot; title=&quot;Support stats over functions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6354&quot;&gt;&lt;del&gt;SOLR-6354&lt;/del&gt;&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6351&quot; title=&quot;Let Stats Hang off of Pivots (via &amp;#39;tag&amp;#39;)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6351&quot;&gt;&lt;del&gt;SOLR-6351&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;StatsInfo is now used for both for both distributed &amp;amp; local requests
	&lt;ul&gt;
		&lt;li&gt;still one instance per request&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;SimpleFacets has been renamed/refactored into &quot;StatsField&quot;
	&lt;ul&gt;
		&lt;li&gt;now only models a single &quot;stats.field&quot; param (no more &quot;iterating&quot; local state variables)&lt;/li&gt;
		&lt;li&gt;API is now a lot more locked down and easier to understand (in my opinion)&lt;/li&gt;
		&lt;li&gt;code that dealt with multiple &quot;stats.field&quot; params bubbled up to either StatsInfo or the process() method of StatsComponent&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;

&lt;p&gt;There&apos;s still plenty of nocommits &amp;#8211; mostly dealing with javadocs and more robust tests, but i think this is a good start in the right direction.&lt;/p&gt;

</comment>
                            <comment id="14134324" author="hossman" created="Mon, 15 Sep 2014 18:58:09 +0000"  >&lt;p&gt;Not as many remaining test &amp;amp; code changes as i anticipated &amp;#8211; My recollection of how per-field overrides worked in facets when the &quot;key&quot; local param is used was totally wrong ... which simplified the logic &amp;amp; test permutations needed.&lt;/p&gt;

&lt;p&gt;Updated pach for trunk with javadocs.  Hoping to commit &amp;amp; backport later today (or early tomorow) &amp;#8211; the backport changes should be fairly straight forward since this change didn&apos;t require any modifications to the DovValuesStast class (nor should any changes be required to UnInvertedField on 4x)&lt;/p&gt;
</comment>
                            <comment id="14134474" author="jira-bot" created="Mon, 15 Sep 2014 21:00:34 +0000"  >&lt;p&gt;Commit 1625163 from hossman@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1625163&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1625163&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6507&quot; title=&quot;various bugs using localparams with stats.field &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6507&quot;&gt;&lt;del&gt;SOLR-6507&lt;/del&gt;&lt;/a&gt;: Fixed several bugs involving stats.field used with local params&lt;/p&gt;</comment>
                            <comment id="14134567" author="jira-bot" created="Mon, 15 Sep 2014 22:04:02 +0000"  >&lt;p&gt;Commit 1625172 from hossman@apache.org in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1625172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1625172&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6507&quot; title=&quot;various bugs using localparams with stats.field &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6507&quot;&gt;&lt;del&gt;SOLR-6507&lt;/del&gt;&lt;/a&gt;: Fixed several bugs involving stats.field used with local params (merge r1625163)&lt;/p&gt;</comment>
                            <comment id="14134594" author="hossman" created="Mon, 15 Sep 2014 22:22:28 +0000"  >&lt;p&gt;committed to trunk &amp;amp; backported to 4.x&lt;/p&gt;

&lt;p&gt;given the amount of code churn involved here, i&apos;m not really comfortable backporting to branch_4_10 ... not until this code gets smoked out a bit more (we&apos;ll see what happens with the timing of a 4.10.1 release - but for now i&apos;m erring on the side of caution)&lt;/p&gt;</comment>
                            <comment id="14332955" author="anshumg" created="Mon, 23 Feb 2015 05:02:48 +0000"  >&lt;p&gt;Bulk close after 5.0 release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12732989">SOLR-6351</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12732992">SOLR-6354</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12668827" name="SOLR-6507.patch" size="25755" author="hossman" created="Mon, 15 Sep 2014 18:58:09 +0000"/>
                            <attachment id="12668201" name="SOLR-6507.patch" size="21637" author="hossman" created="Fri, 12 Sep 2014 00:06:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zy87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>