<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:39:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-13532] Unable to start core recovery due to timeout in ping request</title>
                <link>https://issues.apache.org/jira/browse/SOLR-13532</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Discovered following issue with the core recovery:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Core recovery is not being initialized and throwing following exception message :
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2019-06-07 00:53:12.436 INFO&#160; (recoveryExecutor-4-thread-1-processing-n:&amp;lt;solr_ip&amp;gt;:8983_solr x:&amp;lt;collection_name&amp;gt;_shard41_replica_n2777 c:&amp;lt;collection_name&amp;gt; s:shard41 r:core_node2778) x:&amp;lt;collection_name&amp;gt;_shard41_replica_n2777 o.a.s.c.RecoveryStrategy Failed to connect leader http:&lt;span class=&quot;code-comment&quot;&gt;//&amp;lt;solr_ip&amp;gt;:8983/solr on recovery, &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; again&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Above error occurs&#160;when ping request takes time more than a timeout period which is hard-coded to one second in solr source code. However In a general production setting it is common to have ping time more than one second, hence, the core recovery never starts and exception is thrown.&lt;/li&gt;
	&lt;li&gt;Also the other major concern is that this exception is logged as an info message, hence it is very difficult to identify the error if info logging is not enabled.&lt;/li&gt;
	&lt;li&gt;Please refer to following code snippet from the &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/core/src/java/org/apache/solr/cloud/RecoveryStrategy.java#L789-L803&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;source code&lt;/a&gt;&#160;to understand the above issue.&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (HttpSolrClient httpSolrClient = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HttpSolrClient.Builder(leaderReplica.getCoreUrl())
          .withSocketTimeout(1000)
          .withConnectionTimeout(1000)
          .withHttpClient(cc.getUpdateShardHandler().getRecoveryOnlyHttpClient())
          .build()) {
        SolrPingResponse resp = httpSolrClient.ping();
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; leaderReplica;
      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException e) {
        log.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Failed to connect leader {} on recovery, &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; again&quot;&lt;/span&gt;, leaderReplica.getBaseUrl());
        &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(500);
      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (e.getCause() &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; IOException) {
          log.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Failed to connect leader {} on recovery, &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; again&quot;&lt;/span&gt;, leaderReplica.getBaseUrl());
          &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(500);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; leaderReplica;
        }
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above issue will have&#160;high impact in production level clusters, since&#160;cores not being able to recover&#160;may lead to data loss.&lt;/p&gt;

&lt;p&gt;Following improvements would be really helpful:&lt;br/&gt;
 1. The &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/core/src/java/org/apache/solr/cloud/RecoveryStrategy.java#L790-L791&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;timeout for ping request&lt;/a&gt; in &lt;b&gt;RecoveryStrategy.java&lt;/b&gt;&#160;should be configurable and the defaults set to high values like 15seconds.&lt;br/&gt;
 2. The exception message in &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/core/src/java/org/apache/solr/cloud/RecoveryStrategy.java#L797&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;line 797&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/core/src/java/org/apache/solr/cloud/RecoveryStrategy.java#L801&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;line 801&lt;/a&gt; in &lt;b&gt;RecoveryStrategy.java&lt;/b&gt; should be logged as &lt;b&gt;error&lt;/b&gt; messages instead of &lt;b&gt;info&lt;/b&gt; messages&lt;/p&gt;</description>
                <environment></environment>
        <key id="13238331">SOLR-13532</key>
            <summary>Unable to start core recovery due to timeout in ping request</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="surilshah">Suril Shah</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Jun 2019 00:31:58 +0000</created>
                <updated>Mon, 16 Sep 2019 00:23:23 +0000</updated>
                            <resolved>Thu, 11 Jul 2019 23:46:41 +0000</resolved>
                                    <version>7.6</version>
                                    <fixVersion>8.2</fixVersion>
                    <fixVersion>8.3</fixVersion>
                    <fixVersion>9.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="7200">2h</timespent>
                                <comments>
                            <comment id="16859330" author="gus_heck" created="Sat, 8 Jun 2019 23:36:18 +0000"  >&lt;p&gt;Hard coded timeouts are a general problem in several areas. I opened &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13457&quot; title=&quot;Managing Timeout values in Solr&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13457&quot;&gt;SOLR-13457&lt;/a&gt; a little while ago to track these sorts of problems.&lt;/p&gt;</comment>
                            <comment id="16862794" author="surilshah" created="Thu, 13 Jun 2019 07:39:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gus_heck&quot; class=&quot;user-hover&quot; rel=&quot;gus_heck&quot;&gt;gus_heck&lt;/a&gt;: We can atleast increase the timeout values to 15000 ms as a temporary fix for this particular issue because 1000 ms is really bad as recoveries won&apos;t happen if a ping from the leader is not obtained in 1000 ms which could happen because of many reasons, like network issues, low commit times, etc.&lt;br/&gt;
Let me know your thoughts on this.&lt;/p&gt;</comment>
                            <comment id="16868245" author="dsmiley" created="Thu, 20 Jun 2019 04:09:19 +0000"  >&lt;p&gt;Git blame shows &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=caomanhdat&quot; class=&quot;user-hover&quot; rel=&quot;caomanhdat&quot;&gt;caomanhdat&lt;/a&gt; but it may predate him. WDYT Dat?&lt;/p&gt;</comment>
                            <comment id="16868432" author="caomanhdat" created="Thu, 20 Jun 2019 10:32:12 +0000"  >&lt;p&gt;+1 for your changes &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=surilshah&quot; class=&quot;user-hover&quot; rel=&quot;surilshah&quot;&gt;surilshah&lt;/a&gt;. That totally makes sense to me. Would you like to upload a patch?&lt;/p&gt;</comment>
                            <comment id="16868807" author="surilshah" created="Thu, 20 Jun 2019 17:55:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=caomanhdat&quot; class=&quot;user-hover&quot; rel=&quot;caomanhdat&quot;&gt;caomanhdat&lt;/a&gt;: I will send in a patch today.&lt;/p&gt;</comment>
                            <comment id="16870873" author="surilshah" created="Mon, 24 Jun 2019 07:12:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=caomanhdat&quot; class=&quot;user-hover&quot; rel=&quot;caomanhdat&quot;&gt;caomanhdat&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;: I have sent in the patch that we had decided upon till we come to a permanent solution for this issue. I sent in 3 PRs:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;PR for the master branch: &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/736&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/736&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;PR for branch_8x: &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/737&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/737&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;PR for branch_7x: &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/736&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/736&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Could you please review the above 3 PRs.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
 Suril&lt;/p&gt;</comment>
                            <comment id="16878180" author="hossman" created="Wed, 3 Jul 2019 21:41:04 +0000"  >&lt;p&gt;My first impression on seeing this patch was that I &lt;em&gt;really&lt;/em&gt; dislike the idea of &quot;fixing&quot; a hardcoded timeout by changing it to a &lt;em&gt;different&lt;/em&gt; hardcoded timeout &#8211; I would really much rather we use the existing &lt;tt&gt;solr.xml&lt;/tt&gt; configured timeouts for this sort of thing.&lt;/p&gt;

&lt;p&gt;So then I went poking around the code to refresh my memory about how/where the SO &amp;amp; CONNECT timeouts config options for intranode requests get populated in the code to propose an alternative patch that uses them, and realized that we already have an &lt;tt&gt;UpdateShardHandler.getRecoveryOnlyHttpClient()&lt;/tt&gt; method that returns an HttpClient pre-configured with the correct timeout values ... and then I realized that this is already used in the code in question via &lt;tt&gt;withHttpClient(...)&lt;/tt&gt;...&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-comment&quot;&gt;// existing, pre-patch, code in RecoveryStrategy
&lt;/span&gt;      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (HttpSolrClient httpSolrClient = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HttpSolrClient.Builder(leaderReplica.getCoreUrl())
          .withSocketTimeout(1000)
          .withConnectionTimeout(1000)
          .withHttpClient(cc.getUpdateShardHandler().getRecoveryOnlyHttpClient())
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This &lt;tt&gt;UpdateShardHandler.getRecoveryOnlyHttpClient()&lt;/tt&gt; concept, and that corresponding &lt;tt&gt;withHttpClient()&lt;/tt&gt; call, was introduced &lt;b&gt;after&lt;/b&gt; the original recovery code was written (with those hardcoed timeouts) ... In theory if we just remove the &lt;tt&gt;withSocketTimeout&lt;/tt&gt; and &lt;tt&gt;withConnectionTimeout&lt;/tt&gt; completely from this class, then the cluster&apos;s &lt;tt&gt;solr.xml&lt;/tt&gt; configuration options should start getting used.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;But then I dug deeper and discovered that the way HttpSolrClient &amp;amp; it&apos;s Builder works is really silly and frustrating and causes the hardcoded values &lt;tt&gt;SolrClientBuilder.connectionTimeoutMillis = 15000&lt;/tt&gt; and &lt;tt&gt;SolrClientBuilder.socketTimeoutMillis = 120000&lt;/tt&gt; to get used at the request level, even when &lt;tt&gt;withHttpClient&lt;/tt&gt; has been called to set an &lt;tt&gt;HttpClient&lt;/tt&gt; that already has the settings we want ... basically defeating a huge part of the value in &lt;tt&gt;withHttpClient&lt;/tt&gt; ... even using values of &lt;tt&gt;null&lt;/tt&gt; or &lt;tt&gt;-1&lt;/tt&gt; won&apos;t work, because of other nonsensical ways that &quot;default&quot; values come into play&lt;/p&gt;

&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13605&quot; title=&quot;HttpSolrClient.Builder.withHttpClient() is useless for the purpose of setting client scoped so/connect timeouts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13605&quot;&gt;&lt;del&gt;SOLR-13605&lt;/del&gt;&lt;/a&gt; to track the silliness in &lt;tt&gt;HttpClient.Builder&lt;/tt&gt; &#8211; it&apos;s a bigger issue then just fixing this ping/recovery problem, and will require more careful consideration.&lt;/p&gt;

&lt;p&gt;As much as it pains me to say this: I think that for now, for the purpose of fixing the bug in this jira, we should just remove the &lt;tt&gt;withSocketTimeout(&lt;/tt&gt; and &lt;tt&gt;withConnectionTimeout()&lt;/tt&gt; calls completely, and defer to the (pre-existing) hardcoded defaults in &lt;tt&gt;SolrClientBuilder&lt;/tt&gt; ... at least that way we&apos;re reducing the number of hardcoded defaults in the code, and if/when &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13605&quot; title=&quot;HttpSolrClient.Builder.withHttpClient() is useless for the purpose of setting client scoped so/connect timeouts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13605&quot;&gt;&lt;del&gt;SOLR-13605&lt;/del&gt;&lt;/a&gt; get&apos;s fixed, the &lt;tt&gt;solr.xml&lt;/tt&gt; settings should take affect.&lt;/p&gt;

&lt;p&gt;The other alternative to this would be to update the &lt;tt&gt;RecoveryStrategy&lt;/tt&gt; code to use something like &lt;tt&gt;cc.getConfig().getUpdateShardHandlerConfig()&lt;/tt&gt; and then use &lt;tt&gt;UpdateShardHandlerConfig.getDistributedSocketTimeout()&lt;/tt&gt; and &lt;tt&gt;UpdateShardHandlerConfig.getDistributedConnectionTimeout()&lt;/tt&gt; to pass as the inputs to &lt;tt&gt;SolrHttpClient.Builder&lt;/tt&gt; ... that seemed really silly and redundent when it first occured to me, but the more i think about it the more it&apos;s probably not that bad as a work around for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13605&quot; title=&quot;HttpSolrClient.Builder.withHttpClient() is useless for the purpose of setting client scoped so/connect timeouts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13605&quot;&gt;&lt;del&gt;SOLR-13605&lt;/del&gt;&lt;/a&gt; until it&apos;s fixed.&lt;/p&gt;

&lt;p&gt;What do folks think?&lt;/p&gt;</comment>
                            <comment id="16878210" author="hossman" created="Wed, 3 Jul 2019 22:41:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;The other alternative to this would be to update the &lt;tt&gt;RecoveryStrategy&lt;/tt&gt; code to use something like &lt;tt&gt;cc.getConfig().getUpdateShardHandlerConfig()&lt;/tt&gt; ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Here&apos;s a variant of Suril&apos;s patch along those lines, with some refactoring to put the logic into a helper method.&lt;/p&gt;

&lt;p&gt;I don&apos;t love it &amp;#8211; but i don&apos;t hate it either.&lt;/p&gt;

&lt;p&gt;I&apos;m still running tests to make sure i didn&apos;t break anything, but in the meantime what do folks think? ... can anyone see any problems with this approach?&lt;/p&gt;

&lt;p&gt;(&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=surilshah&quot; class=&quot;user-hover&quot; rel=&quot;surilshah&quot;&gt;surilshah&lt;/a&gt;: does this patch &amp;#8211; and the usage of the solr.xml configures values instead of hardcoded magic constants &amp;#8211; solvethe problems you&apos;re seeing?)&lt;/p&gt;</comment>
                            <comment id="16878732" author="lucenesolrqa" created="Thu, 4 Jul 2019 15:10:23 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Prechecks &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; test4tests &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; The patch doesn&apos;t appear to include any new or modified tests. Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; master Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  3m 26s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Patch Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  3m  5s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  3m  5s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Release audit (RAT) &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  3m  5s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Check forbidden APIs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  3m  5s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Validate source patterns &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  3m  5s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Other Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 58m 51s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; core in the patch passed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 70m 30s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13532&quot; title=&quot;Unable to start core recovery due to timeout in ping request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13532&quot;&gt;&lt;del&gt;SOLR-13532&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12973620/SOLR-13532.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12973620/SOLR-13532.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  compile  javac  unit  ratsources  checkforbiddenapis  validatesourcepatterns  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux lucene2-us-west.apache.org 4.4.0-112-generic #135-Ubuntu SMP Fri Jan 19 11:48:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-SOLR-Build/sourcedir/dev-tools/test-patch/lucene-solr-yetus-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 5bf6cf2 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; version: Apache Ant(TM) version 1.9.6 compiled on July 20 2018 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LTS &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Test Results &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/479/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/479/testReport/&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: solr/core U: solr/core &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/479/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/479/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.7.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16881552" author="surilshah" created="Tue, 9 Jul 2019 21:09:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman&quot; class=&quot;user-hover&quot; rel=&quot;hossman&quot;&gt;hossman&lt;/a&gt;: This solution works as long as the timeout values would be configurable and if for now&#160;if you say that the default values for Socket Timeout would be &lt;b&gt;120000&lt;/b&gt;&#160;and Connection Timeout would be&#160;&lt;b&gt;15000&lt;/b&gt;. That would work and solve the recovery issue.&lt;/p&gt;</comment>
                            <comment id="16881673" author="caomanhdat" created="Wed, 10 Jul 2019 02:34:03 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman&quot; class=&quot;user-hover&quot; rel=&quot;hossman&quot;&gt;hossman&lt;/a&gt; for very carefully take a look at this problem. I think the general idea to remove all hard configured timeout is a good thing to do.&lt;br/&gt;
+1 for commit.&lt;/p&gt;</comment>
                            <comment id="16883328" author="jira-bot" created="Thu, 11 Jul 2019 21:04:58 +0000"  >&lt;p&gt;Commit f85a78c44185c6cb620866a1ab37510757392ed0 in lucene-solr&apos;s branch refs/heads/master from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=f85a78c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=f85a78c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13532&quot; title=&quot;Unable to start core recovery due to timeout in ping request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13532&quot;&gt;&lt;del&gt;SOLR-13532&lt;/del&gt;&lt;/a&gt;: Fix http timeout and error logging bugs in RecoveryStrategy&lt;/p&gt;</comment>
                            <comment id="16883367" author="jira-bot" created="Thu, 11 Jul 2019 22:19:08 +0000"  >&lt;p&gt;Commit 4f2d7c2ecdb7156c39a56e18d96d3f94b30222e1 in lucene-solr&apos;s branch refs/heads/branch_8x from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=4f2d7c2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=4f2d7c2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13532&quot; title=&quot;Unable to start core recovery due to timeout in ping request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13532&quot;&gt;&lt;del&gt;SOLR-13532&lt;/del&gt;&lt;/a&gt;: Fix http timeout and error logging bugs in RecoveryStrategy&lt;/p&gt;

&lt;p&gt;(cherry picked from commit f85a78c44185c6cb620866a1ab37510757392ed0)&lt;/p&gt;</comment>
                            <comment id="16883407" author="jira-bot" created="Thu, 11 Jul 2019 23:42:10 +0000"  >&lt;p&gt;Commit d84454af7a47c48cd0af7c952c7c7b3e9bd4dcd2 in lucene-solr&apos;s branch refs/heads/branch_8_2 from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=d84454a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=d84454a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13532&quot; title=&quot;Unable to start core recovery due to timeout in ping request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13532&quot;&gt;&lt;del&gt;SOLR-13532&lt;/del&gt;&lt;/a&gt;: Fix http timeout and error logging bugs in RecoveryStrategy&lt;/p&gt;

&lt;p&gt;(cherry picked from commit f85a78c44185c6cb620866a1ab37510757392ed0)&lt;/p&gt;</comment>
                            <comment id="16883411" author="hossman" created="Thu, 11 Jul 2019 23:46:41 +0000"  >&lt;p&gt;Thanks Suril!&lt;/p&gt;</comment>
                            <comment id="16883475" author="jira-bot" created="Fri, 12 Jul 2019 02:25:42 +0000"  >&lt;p&gt;Commit f85a78c44185c6cb620866a1ab37510757392ed0 in lucene-solr&apos;s branch refs/heads/jira/&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13565&quot; title=&quot;Node level runtime libs loaded from remote urls&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13565&quot;&gt;&lt;del&gt;SOLR-13565&lt;/del&gt;&lt;/a&gt; from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=f85a78c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=f85a78c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13532&quot; title=&quot;Unable to start core recovery due to timeout in ping request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13532&quot;&gt;&lt;del&gt;SOLR-13532&lt;/del&gt;&lt;/a&gt;: Fix http timeout and error logging bugs in RecoveryStrategy&lt;/p&gt;</comment>
                            <comment id="16893578" author="ivera" created="Fri, 26 Jul 2019 08:56:21 +0000"  >&lt;p&gt;Closing after the 8.2.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13232493">SOLR-13457</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12973620" name="SOLR-13532.patch" size="4409" author="hossman" created="Wed, 3 Jul 2019 22:40:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 16 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z03jm8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>