<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:53:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6157] ReplicationFactorTest hangs</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6157</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;See: &lt;a href=&quot;http://jenkins.thetaphi.de/job/Lucene-Solr-trunk-Linux/10517/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.thetaphi.de/job/Lucene-Solr-trunk-Linux/10517/&lt;/a&gt;&lt;br/&gt;
You can download all logs from there.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12720350">SOLR-6157</key>
            <summary>ReplicationFactorTest hangs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thelabdude">Timothy Potter</assignee>
                                    <reporter username="uschindler">Uwe Schindler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Jun 2014 14:21:27 +0000</created>
                <updated>Mon, 23 Feb 2015 05:01:11 +0000</updated>
                            <resolved>Mon, 13 Oct 2014 20:11:25 +0000</resolved>
                                                    <fixVersion>5.0</fixVersion>
                                    <component>replication (java)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14026643" author="thetaphi" created="Tue, 10 Jun 2014 16:31:49 +0000"  >&lt;p&gt;Next one is also hanging: &lt;a href=&quot;http://jenkins.thetaphi.de/job/Lucene-Solr-trunk-Linux/10518/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.thetaphi.de/job/Lucene-Solr-trunk-Linux/10518/console&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14026648" author="jira-bot" created="Tue, 10 Jun 2014 16:39:49 +0000"  >&lt;p&gt;Commit 1601678 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1601678&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1601678&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6157&quot; title=&quot;ReplicationFactorTest hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6157&quot;&gt;&lt;del&gt;SOLR-6157&lt;/del&gt;&lt;/a&gt;: Disable test that hangs indefinitely&lt;/p&gt;</comment>
                            <comment id="14026650" author="jira-bot" created="Tue, 10 Jun 2014 16:40:44 +0000"  >&lt;p&gt;Commit 1601679 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1601679&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1601679&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6157&quot; title=&quot;ReplicationFactorTest hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6157&quot;&gt;&lt;del&gt;SOLR-6157&lt;/del&gt;&lt;/a&gt;: Disable test that hangs indefinitely&lt;/p&gt;</comment>
                            <comment id="14026690" author="thelabdude" created="Tue, 10 Jun 2014 17:11:56 +0000"  >&lt;p&gt;Nothing special about this test so not sure why it would hang ... seems like a problem in the test framework itself.&lt;/p&gt;</comment>
                            <comment id="14026969" author="dweiss" created="Tue, 10 Jun 2014 20:42:25 +0000"  >&lt;p&gt;The test framework has been pretty well tested and seems to be working fine. The timeout is set to an incredibly large value because Solr tests take so long. If you let it run until the timeout expires, you will get a stack trace of where each thread was. &lt;/p&gt;

&lt;p&gt;Uwe, could you send a signal to the hung process next time you see one? Then JVM logs will contain it and I can recover relevant stack traces.&lt;/p&gt;</comment>
                            <comment id="14026971" author="dweiss" created="Tue, 10 Jun 2014 20:46:31 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@TimeoutSuite(millis = 2 * TimeUnits.HOUR)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So those tests went beyond the timeout...? Looks like JVM problems with halt(), regardless of what actually caused the stall. Uwe, if you see it next time, try to capture the stack trace (see if the JVM is responding to it at all).&lt;/p&gt;</comment>
                            <comment id="14027833" author="thetaphi" created="Wed, 11 Jun 2014 14:50:31 +0000"  >&lt;p&gt;Hi Dawid,&lt;br/&gt;
I disabled the test with @AwaitsFix, so it will no longer hang on Jenkins. Maybe I try to reproduce this locally, passing -Dtests.slow=true (the problem with this test is: its also marked as @Slow, so the normal user would never run it. And nightly it hangs a lot of times....).&lt;br/&gt;
Maybe the test just does too many iterations or has too large indexes (I am not sure why it takes so long!). We may tone it down.&lt;/p&gt;</comment>
                            <comment id="14032620" author="jira-bot" created="Mon, 16 Jun 2014 16:44:17 +0000"  >&lt;p&gt;Commit 1602924 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1602924&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1602924&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6157&quot; title=&quot;ReplicationFactorTest hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6157&quot;&gt;&lt;del&gt;SOLR-6157&lt;/del&gt;&lt;/a&gt;: Added some logging and re-opened the socket proxy to try to figure out why this test is hanging; reenabling temporarily to see if these changes help diagnose the cause of the hang.&lt;/p&gt;</comment>
                            <comment id="14032631" author="thelabdude" created="Mon, 16 Jun 2014 16:52:22 +0000"  >&lt;p&gt;I&apos;ll keep an eye on this and if it hangs again, I&apos;ll re-disable it with the @AwaitsFix annotation.&lt;/p&gt;

&lt;p&gt;I should mention that this test does not do very much work at all (not doing too many iterations) and only indexes a few docs (tiny indexes). The only thing exotic it does is to use the SocketProxy class to introduce network partitions between the leader and replicas. I did fix one place where the proxy was closed but never re-opened so that might cause a hang during shutdown.&lt;/p&gt;</comment>
                            <comment id="14035713" author="thelabdude" created="Wed, 18 Jun 2014 14:09:09 +0000"  >&lt;p&gt;It&apos;s been running on trunk for a couple of days now without a hang or failure. I think it may be resolved &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Will backport to branch_4x and 4.9 release branch tomorrow (Thursday) if no hangs / failures today.&lt;/p&gt;</comment>
                            <comment id="14039104" author="jira-bot" created="Fri, 20 Jun 2014 18:00:35 +0000"  >&lt;p&gt;Commit 1604223 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1604223&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1604223&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6157&quot; title=&quot;ReplicationFactorTest hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6157&quot;&gt;&lt;del&gt;SOLR-6157&lt;/del&gt;&lt;/a&gt;: Fix hanging unit test.&lt;/p&gt;</comment>
                            <comment id="14039108" author="thelabdude" created="Fri, 20 Jun 2014 18:03:05 +0000"  >&lt;p&gt;Haven&apos;t seen a test hang since committing the previous changes, so marking this one resolved for now.&lt;/p&gt;</comment>
                            <comment id="14040903" author="thelabdude" created="Mon, 23 Jun 2014 16:08:25 +0000"  >&lt;p&gt;This occurred again:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://jenkins.thetaphi.de/job/Lucene-Solr-trunk-Linux/10613/consoleFull&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.thetaphi.de/job/Lucene-Solr-trunk-Linux/10613/consoleFull&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14040925" author="shalinmangar" created="Mon, 23 Jun 2014 16:25:52 +0000"  >&lt;p&gt;This might be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-5786&quot; title=&quot;Unflushed/ truncated events file (hung testing subprocess)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-5786&quot;&gt;&lt;del&gt;LUCENE-5786&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14040926" author="jira-bot" created="Mon, 23 Jun 2014 16:26:10 +0000"  >&lt;p&gt;Commit 1604868 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1604868&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1604868&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6157&quot; title=&quot;ReplicationFactorTest hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6157&quot;&gt;&lt;del&gt;SOLR-6157&lt;/del&gt;&lt;/a&gt;: Hang occurred again, somewhere in tearDown ... changing the code to close the socket proxies after super.tearDown, if that doesn&apos;t work, I&apos;ll add the AwaitsFix back to the code to ignore this test.&lt;/p&gt;</comment>
                            <comment id="14041925" author="dweiss" created="Tue, 24 Jun 2014 09:51:06 +0000"  >&lt;p&gt;The hangs on Jenkins (FreeBSD) may be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-5786&quot; title=&quot;Unflushed/ truncated events file (hung testing subprocess)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-5786&quot;&gt;&lt;del&gt;LUCENE-5786&lt;/del&gt;&lt;/a&gt;. I&apos;ve updated RR and hopefully fixed this; let&apos;s see if it hangs again.&lt;/p&gt;</comment>
                            <comment id="14048956" author="jira-bot" created="Tue, 1 Jul 2014 15:16:37 +0000"  >&lt;p&gt;Commit 1607110 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1607110&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1607110&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6157&quot; title=&quot;ReplicationFactorTest hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6157&quot;&gt;&lt;del&gt;SOLR-6157&lt;/del&gt;&lt;/a&gt;: Refactor the ensureAllReplicasAreActive method into base class and ensure the ClusterState is updated to address intermittent test failures on Jenkins.&lt;/p&gt;</comment>
                            <comment id="14050321" author="jira-bot" created="Wed, 2 Jul 2014 16:57:41 +0000"  >&lt;p&gt;Commit 1607420 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1607420&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1607420&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6157&quot; title=&quot;ReplicationFactorTest hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6157&quot;&gt;&lt;del&gt;SOLR-6157&lt;/del&gt;&lt;/a&gt;: Disable this test for now as it is still hanging on Jenkins.&lt;/p&gt;</comment>
                            <comment id="14163612" author="jira-bot" created="Wed, 8 Oct 2014 15:23:45 +0000"  >&lt;p&gt;Commit 1630140 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1630140&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1630140&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6157&quot; title=&quot;ReplicationFactorTest hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6157&quot;&gt;&lt;del&gt;SOLR-6157&lt;/del&gt;&lt;/a&gt;: re-enable this test to see if it runs consistently on Jenkins (beast passed 20/20)&lt;/p&gt;</comment>
                            <comment id="14165437" author="jira-bot" created="Thu, 9 Oct 2014 17:54:53 +0000"  >&lt;p&gt;Commit 1630542 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1630542&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1630542&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6157&quot; title=&quot;ReplicationFactorTest hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6157&quot;&gt;&lt;del&gt;SOLR-6157&lt;/del&gt;&lt;/a&gt;: re-enable this test on branch_5x as it seems to be passing consistently now on trunk&lt;/p&gt;</comment>
                            <comment id="14169874" author="thelabdude" created="Mon, 13 Oct 2014 20:11:25 +0000"  >&lt;p&gt;looks to be resolved in branch_5x and trunk&lt;/p&gt;</comment>
                            <comment id="14332659" author="anshumg" created="Mon, 23 Feb 2015 05:01:11 +0000"  >&lt;p&gt;Bulk close after 5.0 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>398549</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wm5j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>398674</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>