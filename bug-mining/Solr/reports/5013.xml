<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:56:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16681] Replacing uniqueKey field via fl doesn&apos;t work in distributed since 9.0 (Not Fixed)</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16681</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;User reported a use case which were working before 9 but not anymore.&#160;&lt;/p&gt;

&lt;p&gt;The point is to logically replace a field (hereby it&apos;s &lt;tt&gt;id&lt;/tt&gt; &lt;del&gt;but it might behave same for any other&lt;/del&gt;)&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;fl=old_id:id,id:new_id&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;I&apos;d say it&apos;s a kind of &lt;tt&gt;$mv new_id id&lt;/tt&gt;. I&apos;ve made a simple &lt;a href=&quot;https://github.com/apache/solr/pull/1384&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;reproducer&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;it fails with&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 - org.apache.solr.cloud.TestCloudPseudoReturnFields.test_mv_fl (:solr:core) 
[7597|https:&lt;span class=&quot;code-comment&quot;&gt;//github.com/apache/solr/actions/runs/4276380498/jobs/7444431149#step:4:7598] Test output: /tmp/src/solr/solr/core/build/test-results/test/outputs/OUTPUT-org.apache.solr.cloud.TestCloudPseudoReturnFields.txt 
&lt;/span&gt;[7598|https:&lt;span class=&quot;code-comment&quot;&gt;//github.com/apache/solr/actions/runs/4276380498/jobs/7444431149#step:4:7599] Reproduce with: gradlew :solr:core:test --tests &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.solr.cloud.TestCloudPseudoReturnFields.test_mv_fl&quot;&lt;/span&gt; -Ptests.jvms=96 &lt;span class=&quot;code-quote&quot;&gt;&quot;-Ptests.jvmargs=-XX:TieredStopAtLevel=1 -XX:+UseParallelGC -XX:ActiveProcessorCount=1 -XX:ReservedCodeCacheSize=120m&quot;&lt;/span&gt; -Ptests.seed=4CCEBE424880B511 -Ptests.file.encoding=US-ASCII&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;. &lt;a href=&quot;https://github.com/mkhludnev/solr/tree/SOLR-16681-proves-work-before&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Then I applied it&lt;/a&gt; to revision preceding &lt;a href=&quot;https://github.com/mkhludnev/solr/commit/6ff81312607dd5d33f87dc52aed9d52938dc6883#diff-e72c1360a9b0097bcc01e269a94045ce5af1fdc93ae3021ca7e8d1b26d46bdcb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SOLR-9376&lt;/a&gt; and test passed. &#160;For me it seems like:&lt;/p&gt;

&lt;p&gt;&#160;- Solr behaved like described before, but it does not after &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9376&quot; title=&quot;RawValueTransformerFactory ([json] &amp;amp; [xml]) don&amp;#39;t work in SolrCloud&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9376&quot;&gt;&lt;del&gt;SOLR-9376&lt;/del&gt;&lt;/a&gt;.&#160;&#160;&lt;/p&gt;

&lt;p&gt;&#160;- Should we reproduce this behavior or we can suggest a workaround?&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13526164">SOLR-16681</key>
            <summary>Replacing uniqueKey field via fl doesn&apos;t work in distributed since 9.0 (Not Fixed)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mkhl">Mikhail Khludnev</assignee>
                                    <reporter username="mkhl">Mikhail Khludnev</reporter>
                        <labels>
                    </labels>
                <created>Sat, 25 Feb 2023 11:29:41 +0000</created>
                <updated>Mon, 27 Mar 2023 18:07:29 +0000</updated>
                            <resolved>Wed, 8 Mar 2023 13:10:36 +0000</resolved>
                                                    <fixVersion>9.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="17693464" author="mkhludnev" created="Sat, 25 Feb 2023 12:32:10 +0000"  >&lt;p&gt;I&apos;ve found some ResultTransformer renaming fields, can&apos;t we use it as workaround?&#160;&#160;&lt;/p&gt;</comment>
                            <comment id="17693591" author="mkhludnev" created="Sun, 26 Feb 2023 06:49:09 +0000"  >&lt;p&gt;Despite initial test can&apos;t really reproduce the problem, I see really weird behavior. It&apos;s &lt;tt&gt;main&lt;/tt&gt; build locally.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13055828/13055828_image-2023-02-26-09-48-31-974.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13055829/13055829_image-2023-02-26-09-48-59-323.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17693717" author="mkhludnev" created="Sun, 26 Feb 2023 21:34:28 +0000"  >&lt;p&gt;The issue seems specific to uniqueKey renaming. With this &lt;tt&gt;fl&lt;/tt&gt; QueryComponent doesn&apos;t recognize &lt;a href=&quot;https://github.com/apache/solr/blob/main/solr/core/src/java/org/apache/solr/handler/component/QueryComponent.java#L1277&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;uniqueKey renaming&lt;/a&gt;, and &lt;a href=&quot;https://github.com/apache/solr/blob/main/solr/core/src/java/org/apache/solr/handler/component/QueryComponent.java#L1327&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;can&apos;t merge results&lt;/a&gt; yielding empty page. I looked into SolrReturnFields source, but couldn&apos;t realize how to handle it.&#160; &#160;&lt;/p&gt;</comment>
                            <comment id="17695069" author="ichattopadhyaya" created="Wed, 1 Mar 2023 13:14:06 +0000"  >&lt;p&gt;FYI &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman%40fucit.org&quot; class=&quot;user-hover&quot; rel=&quot;hossman@fucit.org&quot;&gt;hossman@fucit.org&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=magibney&quot; class=&quot;user-hover&quot; rel=&quot;magibney&quot;&gt;magibney&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17695871" author="mkhludnev" created="Thu, 2 Mar 2023 19:12:20 +0000"  >&lt;p&gt;I think &lt;a href=&quot;https://github.com/apache/solr/pull/1384&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/pull/1384&lt;/a&gt; is ready.&lt;/p&gt;

&lt;p&gt;Remaining doubts are:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;is it fine to piggyback on those tests or it&apos;s worth to bring up a new one?&lt;/li&gt;
	&lt;li&gt;I&apos;m sure there&apos;s a better wording in exception message. Which one?&lt;/li&gt;
	&lt;li&gt;I feel like it&apos;s really hard to explain in documentation especially giving that it&apos;s something which doesn&apos;t work. I think exception is explicit enough.&#160;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I wish put it into 9.2 as is.&lt;/p&gt;</comment>
                            <comment id="17697792" author="jira-bot" created="Wed, 8 Mar 2023 09:11:55 +0000"  >&lt;p&gt;Commit 3baf1804df7b2b6f50ff151eba518b3e7f1e70cf in solr&apos;s branch refs/heads/main from Mikhail Khludnev&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=3baf1804df7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=3baf1804df7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16681&quot; title=&quot;Replacing uniqueKey field via fl doesn&amp;#39;t work in distributed since 9.0 (Not Fixed)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16681&quot;&gt;&lt;del&gt;SOLR-16681&lt;/del&gt;&lt;/a&gt;: Throw exception when attempting to replace uniqueKey via fl in distributed request (#1384)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;fl=newid-&amp;gt;id seems doesn&apos;t work in cloud&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17697808" author="jira-bot" created="Wed, 8 Mar 2023 09:41:14 +0000"  >&lt;p&gt;Commit 491fcee5f9f683586ccdf6b87a1a603a46400b04 in solr&apos;s branch refs/heads/branch_9x from Mikhail Khludnev&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=491fcee5f9f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=491fcee5f9f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16681&quot; title=&quot;Replacing uniqueKey field via fl doesn&amp;#39;t work in distributed since 9.0 (Not Fixed)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16681&quot;&gt;&lt;del&gt;SOLR-16681&lt;/del&gt;&lt;/a&gt;: Throw exception when attempting to replace uniqueKey via fl in distributed request (#1384) (#1439)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;fl=newid-&amp;gt;id seems doesn&apos;t work in cloud&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17697889" author="mkhludnev" created="Wed, 8 Mar 2023 13:10:36 +0000"  >&lt;p&gt;Pardon, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rajinimaski&quot; class=&quot;user-hover&quot; rel=&quot;rajinimaski&quot;&gt;rajinimaski&lt;/a&gt; I have no solution for the original problem. Starting from 9.2 it will just throw explicit exception.&#160;&lt;/p&gt;</comment>
                            <comment id="17705629" author="houston" created="Mon, 27 Mar 2023 18:04:26 +0000"  >&lt;p&gt;Closing after the 9.2.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="12994695">SOLR-9376</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13055828" name="image-2023-02-26-09-48-31-974.png" size="38480" author="mkhl" created="Sun, 26 Feb 2023 06:48:32 +0000"/>
                            <attachment id="13055829" name="image-2023-02-26-09-48-59-323.png" size="42965" author="mkhl" created="Sun, 26 Feb 2023 06:49:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1g6js:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>