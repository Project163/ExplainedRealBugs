<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:46:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-14939] JSON facets: range faceting to support cache=false parameter</title>
                <link>https://issues.apache.org/jira/browse/SOLR-14939</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The &lt;tt&gt;cache&lt;/tt&gt; parameter, if set to &lt;tt&gt;false&lt;/tt&gt;, is intended to support non-caching of the search results: &lt;a href=&quot;https://lucene.apache.org/solr/guide/8_6/common-query-parameters.html#cache-parameter&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lucene.apache.org/solr/guide/8_6/common-query-parameters.html#cache-parameter&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Based on inspection of&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
curl &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr/admin/metrics?prefix=CACHE.searcher.filterCache&quot;&lt;/span&gt; &lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;metrics before and after a search we can see that range JSON facet queries currently do not support a &lt;tt&gt;cache=false&lt;/tt&gt; parameter.&lt;/p&gt;

&lt;p&gt;Using the &lt;tt&gt;techproducts&lt;/tt&gt; example collection as an illustration, if a 1 MONTH &lt;tt&gt;gap&lt;/tt&gt; value is used then 12 &lt;tt&gt;filterCache&lt;/tt&gt; entries are added for a one year &lt;tt&gt;start/end&lt;/tt&gt; time range.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
curl &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr/techproducts/query?q=*:*&amp;amp;rows=0&amp;amp;cache=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt; -d &apos;json.facet={
&lt;/span&gt;  manufacturedate_dt_ranges : {
    type : range,
    field : manufacturedate_dt,
    mincount : 1,
    gap : &lt;span class=&quot;code-quote&quot;&gt;&quot;%2B1MONTH&quot;&lt;/span&gt;,
    start : &lt;span class=&quot;code-quote&quot;&gt;&quot;2005-01-01T00:00:00.000Z&quot;&lt;/span&gt;,
    end   : &lt;span class=&quot;code-quote&quot;&gt;&quot;2005-12-31T23:59:59.999Z&quot;&lt;/span&gt;,
  }
}&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Similarly, if a 1 DAY &lt;tt&gt;gap&lt;/tt&gt; value is used then 365 &lt;tt&gt;filterCache&lt;/tt&gt; entries are added for a one year &lt;tt&gt;start/end&lt;/tt&gt; time range and if a 1 HOUR &lt;tt&gt;gap&lt;/tt&gt; value were to be used that would equate to 365 x 24 = 8,760 entries. This means that a single search potentially displaces many or all existing &lt;tt&gt;filterCache&lt;/tt&gt; entries.&lt;/p&gt;

&lt;p&gt;This ticket proposes to support the &lt;tt&gt;cache&lt;/tt&gt; parameter for JSON range facet queries:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;the current and default behaviour would remain &lt;tt&gt;cache=true&lt;/tt&gt; and&lt;/li&gt;
	&lt;li&gt;via &lt;tt&gt;cache=false&lt;/tt&gt; users would be able run an &apos;uncommon&apos; search with many range buckets without impact on the &apos;common&apos; searches with fewer range buckets.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13335759">SOLR-14939</key>
            <summary>JSON facets: range faceting to support cache=false parameter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cpoerschke">Christine Poerschke</assignee>
                                    <reporter username="cpoerschke">Christine Poerschke</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Oct 2020 11:49:29 +0000</created>
                <updated>Thu, 12 May 2022 00:26:21 +0000</updated>
                            <resolved>Wed, 16 Dec 2020 18:37:32 +0000</resolved>
                                                    <fixVersion>8.8</fixVersion>
                    <fixVersion>9.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17219868" author="joel.bernstein" created="Fri, 23 Oct 2020 18:43:48 +0000"  >&lt;p&gt;Interesting, I would not have suspected that range facets would have this effect.&lt;/p&gt;</comment>
                            <comment id="17250491" author="jira-bot" created="Wed, 16 Dec 2020 17:42:43 +0000"  >&lt;p&gt;Commit 0b5003cfed5187286ac49fa56d5aafe15165101d in lucene-solr&apos;s branch refs/heads/master from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=0b5003c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=0b5003c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14939&quot; title=&quot;JSON facets: range faceting to support cache=false parameter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14939&quot;&gt;&lt;del&gt;SOLR-14939&lt;/del&gt;&lt;/a&gt;: JSON range faceting to support cache=false parameter (#1992)&lt;/p&gt;
</comment>
                            <comment id="17250508" author="jira-bot" created="Wed, 16 Dec 2020 18:05:08 +0000"  >&lt;p&gt;Commit f9dc67017c8dbc590ce94b9135a7b6985447f8cf in lucene-solr&apos;s branch refs/heads/branch_8x from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=f9dc670&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=f9dc670&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14939&quot; title=&quot;JSON facets: range faceting to support cache=false parameter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14939&quot;&gt;&lt;del&gt;SOLR-14939&lt;/del&gt;&lt;/a&gt;: JSON range faceting to support cache=false parameter (#1992)&lt;/p&gt;

&lt;p&gt;Resolved Conflicts:&lt;br/&gt;
	solr/CHANGES.txt&lt;/p&gt;</comment>
                            <comment id="17250528" author="cpoerschke" created="Wed, 16 Dec 2020 18:37:32 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mdrob&quot; class=&quot;user-hover&quot; rel=&quot;mdrob&quot;&gt;mdrob&lt;/a&gt; for the code review input!&lt;/p&gt;</comment>
                            <comment id="17535368" author="janhoy" created="Thu, 12 May 2022 00:26:21 +0000"  >&lt;p&gt;Closing after the 9.0.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0jra0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>