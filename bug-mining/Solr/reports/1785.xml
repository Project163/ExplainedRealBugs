<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:46:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-5652] Heisenbug in DistribCursorPagingTest: &quot;walk already seen ...&quot;</title>
                <link>https://issues.apache.org/jira/browse/SOLR-5652</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Several times now, Uwe&apos;s jenkins has encountered a &quot;walk already seen ...&quot; assertion failure from DistribCursorPagingTest that I&apos;ve been unable to fathom, let alone reproduce (although sarowe was able to trigger a similar, non-reproducible seed, failure on his machine)&lt;/p&gt;

&lt;p&gt;Using this as a tracking issue to try and make sense of it.&lt;/p&gt;

&lt;p&gt;Summary of things noticed so far:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;So far only seen on &lt;a href=&quot;http://jenkins.thetaphi.de&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.thetaphi.de&lt;/a&gt; &amp;amp; sarowe&apos;s mac&lt;/li&gt;
	&lt;li&gt;So far seen on MacOSX and Linux&lt;/li&gt;
	&lt;li&gt;So far seen on branch 4x and trunk&lt;/li&gt;
	&lt;li&gt;So far seen on Java6, Java7, and Java8&lt;/li&gt;
	&lt;li&gt;fails occured in first block of randomized testing:
	&lt;ul&gt;
		&lt;li&gt;we&apos;ve indexed a small number of randomized docs&lt;/li&gt;
		&lt;li&gt;we&apos;re explicitly looping over every field and sorting in both directions&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;fails were sorting on one of the &quot;&amp;#42;_dv_last&quot; or &quot;&amp;#42;_dv_first&quot; fields (docValues=true, either sortMissingLast=true OR sortMissingFirst=true)
	&lt;ul&gt;
		&lt;li&gt;for desc sorts, sort on same field asc has worked fine just before this (fields are in arbitrary order, but &quot;asc&quot; always tried before &quot;desc&quot;)&lt;/li&gt;
		&lt;li&gt;sorting on some other random fields has sometimes been tried before this and worked&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;(specifics of each failure seen in the wild recorded in comments)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12690076">SOLR-5652</key>
            <summary>Heisenbug in DistribCursorPagingTest: &quot;walk already seen ...&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Jan 2014 18:08:31 +0000</created>
                <updated>Sun, 16 Mar 2014 13:04:18 +0000</updated>
                            <resolved>Sat, 15 Feb 2014 22:26:28 +0000</resolved>
                                                    <fixVersion>4.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13877675" author="hossman" created="Tue, 21 Jan 2014 18:08:56 +0000"  >&lt;p&gt;&lt;a href=&quot;http://jenkins.thetaphi.de/job/Lucene-Solr-4.x-MacOSX/1200/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.thetaphi.de/job/Lucene-Solr-4.x-MacOSX/1200/&lt;/a&gt;&lt;br/&gt;
Revision: 1558588&lt;br/&gt;
Using Java: 64bit/jdk1.6.0 -XX:-UseCompressedOops -XX:+UseParallelGC&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=DistribCursorPagingTest -Dtests.method=testDistribSearch -Dtests.seed=B7F9EFE0FC392581 -Dtests.slow=true -Dtests.locale=es_MX -Dtests.timezone=America/Tortola -Dtests.file.encoding=ISO-8859-1
   [junit4] FAILURE 29.3s | DistribCursorPagingTest.testDistribSearch &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: walk already seen: 39
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([B7F9EFE0FC392581:361F61F88B6645BD]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.DistribCursorPagingTest.assertFullWalkNoDups(DistribCursorPagingTest.java:628)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.DistribCursorPagingTest.doRandomSortsOnLargeIndex(DistribCursorPagingTest.java:465)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.DistribCursorPagingTest.doTest(DistribCursorPagingTest.java:86)
   [junit4]    &amp;gt; 	at org.apache.solr.BaseDistributedSearchTestCase.testDistribSearch(BaseDistributedSearchTestCase.java:867)
   [junit4]    &amp;gt; 	at java.lang.Thread.run(Thread.java:695)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After this I made teh following commits to tryand help track down the bug, in the hopes it would uncover some shard out of sync problems (which is the only explanation i could think of)...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1558939&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1558939&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/r1558945&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1558945&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13877683" author="hossman" created="Tue, 21 Jan 2014 18:18:11 +0000"  >&lt;p&gt;&lt;a href=&quot;http://jenkins.thetaphi.de/job/Lucene-Solr-4.x-MacOSX/1217/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.thetaphi.de/job/Lucene-Solr-4.x-MacOSX/1217/&lt;/a&gt;&lt;br/&gt;
Revision: 1559847&lt;br/&gt;
Using Java: 64bit/jdk1.7.0 -XX:+UseCompressedOops -XX:+UseSerialGC&lt;/p&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=DistribCursorPagingTest -Dtests.method=testDistribSearch -Dtests.seed=F09D8E3EF23506C2 -Dtests.slow=true -Dtests.locale=sr_RS -Dtests.timezone=Australia/Tasmania -Dtests.file.encoding=UTF-8
   [junit4] FAILURE 21.5s | DistribCursorPagingTest.testDistribSearch &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: walk already seen: 93, don&apos;t know why; q=id:93 gives: {responseHeader={status=0,QTime=7},response={numFound=1,start=0,maxScore=4.555348,docs=[SolrDocument{id=93, long=5077, long_last=5077, long_first=5077, long_dv_last=5077, long_dv_first=5077, float=-3.6574272E8, float_last=-3.6574272E8, float_first=-3.6574272E8, float_dv_last=-3.6574272E8, float_dv_first=-3.6574272E8, double=-1.3713607226255326E9, double_last=-1.3713607226255326E9, double_first=-1.3713607226255326E9, double_dv_last=-1.3713607226255326E9, double_dv_first=-1.3713607226255326E9, str=&#732;&#762;&#693;, str_last=&#732;&#762;&#693;, str_first=&#732;&#762;&#693;, str_dv_last=&#732;&#762;&#693;, str_dv_first=&#732;&#762;&#693;, bin=LfuliMaoJJG5866cs8lYmtS89ZDH2owXyi2QPp9kw6zpPlrrT4UAZw==, bin_last=LfuliMaoJJG5866cs8lYmtS89ZDH2owXyi2QPp9kw6zpPlrrT4UAZw==, bin_first=LfuliMaoJJG5866cs8lYmtS89ZDH2owXyi2QPp9kw6zpPlrrT4UAZw==, bin_dv_last=LfuliMaoJJG5866cs8lYmtS89ZDH2owXyi2QPp9kw6zpPlrrT4UAZw==, bin_dv_first=LfuliMaoJJG5866cs8lYmtS89ZDH2owXyi2QPp9kw6zpPlrrT4UAZw==, _version_=1457794677110472704}]}}
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([F09D8E3EF23506C2:717B0026856A66FE]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.DistribCursorPagingTest.assertFullWalkNoDups(DistribCursorPagingTest.java:636)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.DistribCursorPagingTest.doRandomSortsOnLargeIndex(DistribCursorPagingTest.java:465)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.DistribCursorPagingTest.doTest(DistribCursorPagingTest.java:86)
   [junit4]    &amp;gt; 	at org.apache.solr.BaseDistributedSearchTestCase.testDistribSearch(BaseDistributedSearchTestCase.java:867)
   [junit4]    &amp;gt; 	at java.lang.Thread.run(Thread.java:744)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;One thing that jumps out at me here is that in this failure the doc in question (93) doesn&apos;t have a value for the int_dv_last field being sorted on - no concrete info on whether that was true in the first failure as well.&lt;/p&gt;

&lt;p&gt;The next steps I can think of:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;get the explicit sort criteria into the assertion failure so it&apos;s easier to verify w/o digging through the logs&lt;/li&gt;
	&lt;li&gt;add more logging so every time a doc is seen in one of these cursor walks, we log it&apos;s sort value &amp;#8211; i&apos;m still not convinced this problem isn&apos;t a general shard inconsistency problem&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="13877913" author="hossman" created="Tue, 21 Jan 2014 22:07:53 +0000"  >&lt;p&gt;Full logs from the two builds that have failed so far&lt;/p&gt;</comment>
                            <comment id="13877914" author="thetaphi" created="Tue, 21 Jan 2014 22:08:32 +0000"  >&lt;p&gt;Heisenbug on Policeman Jenkins &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13878011" author="jira-bot" created="Tue, 21 Jan 2014 23:32:44 +0000"  >&lt;p&gt;Commit 1560219 from hossman@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1560219&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1560219&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5652&quot; title=&quot;Heisenbug in DistribCursorPagingTest: &amp;quot;walk already seen ...&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5652&quot;&gt;&lt;del&gt;SOLR-5652&lt;/del&gt;&lt;/a&gt;: Make test more deterministicly random, and increase logging to try and track down strange test failure&lt;/p&gt;</comment>
                            <comment id="13878017" author="jira-bot" created="Tue, 21 Jan 2014 23:41:16 +0000"  >&lt;p&gt;Commit 1560220 from hossman@apache.org in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1560220&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1560220&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5652&quot; title=&quot;Heisenbug in DistribCursorPagingTest: &amp;quot;walk already seen ...&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5652&quot;&gt;&lt;del&gt;SOLR-5652&lt;/del&gt;&lt;/a&gt;: Make test more deterministicly random, and increase logging to try and track down strange test failure (merge r1560219)&lt;/p&gt;</comment>
                            <comment id="13878020" author="hossman" created="Tue, 21 Jan 2014 23:42:49 +0000"  >
&lt;blockquote&gt;&lt;p&gt;The next steps I can think of: ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Done.&lt;/p&gt;

&lt;p&gt;It also occurred to me that even though the test is just looping over the all the sort fields, and even though the requests are &lt;b&gt;suppose&lt;/b&gt; to be completely independent of each other; the ordering of the sort fields &lt;em&gt;was&lt;/em&gt; based on a Map iteration &amp;#8211; which might explain why the seeds don&apos;t reproduce for other people on other OSs/JVMs (presuming that there is a bug in the code itself, and that bug is dependent on some past behavior).  So in addition to the extra logging i mentioned wanting to add, the code that gets the list of all sort field names now explicitly sorts those names, then shuffles them using the tests &lt;tt&gt;random()&lt;/tt&gt; ... so hopefully the failures will now be more easy to reproduce.&lt;/p&gt;</comment>
                            <comment id="13880191" author="steve_rowe" created="Thu, 23 Jan 2014 18:31:19 +0000"  >&lt;p&gt;On OS X Mavericks with Apple Java 1.6.0_65 on branch_4x I ran &lt;tt&gt;ant -Dtestcase=DistribCursorPaginTest&lt;/tt&gt; in &lt;tt&gt;solr/core/&lt;/tt&gt; in a bash loop to try to find failures with reproducible seeds.  Out of a little over 400 trials, 5 failed.&lt;/p&gt;

&lt;p&gt;Below is the repro line from one I picked at random (trial #129) to attempt to reproduce.  I&apos;ve re-run it six times, and the failure reproduced the first time, but the test succeeded each of the following five times.  (I tried a seventh time, but performed &lt;tt&gt;ant clean&lt;/tt&gt; at the top-level directory first, and it still didn&apos;t reproduce.) &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ant test  -Dtestcase=DistribCursorPagingTest -Dtests.method=testDistribSearch -Dtests.seed=55FB0127DC22CD98 -Dtests.slow=true -Dtests.locale=en_AU -Dtests.timezone=Atlantic/Madeira -Dtests.file.encoding=US-ASCII
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m attaching the test log (&lt;tt&gt;129.log&lt;/tt&gt;) from the original failure with the above seed.&lt;/p&gt;</comment>
                            <comment id="13880371" author="hossman" created="Thu, 23 Jan 2014 21:20:10 +0000"  >&lt;p&gt;updating description based on variables seen in sarowe&apos;s failure&lt;/p&gt;</comment>
                            <comment id="13880639" author="steve_rowe" created="Fri, 24 Jan 2014 02:16:41 +0000"  >&lt;p&gt;I tried reproducing the other four seeds I found by running each of them ten times, but they all passed.&lt;/p&gt;

&lt;p&gt;Here&apos;s the output of &lt;tt&gt;egrep &apos;Throwable|SOLR&amp;#45;5652: [&amp;#94;(]&apos;&lt;/tt&gt; over the other four failed trials&apos; log files:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;25.log:   [junit4]   2&amp;gt; 19647 T10 oasc.DistribCursorPagingTest.doRandomSortsOnLargeIndex SOLR-5652: Begining Loop over smallish num of docs
25.log:   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: ({params(q=*%3A*&amp;amp;fl=id%2Cint_dv_last&amp;amp;rows=50&amp;amp;sort=int_dv_last+desc%2C+id+desc),defaults(cursorMark=AoIGycP9Cl8B)}) walk already seen: 53, don&apos;t know why; q=id:53 gives: {responseHeader={status=0,QTime=7},response={numFound=1,start=0,maxScore=4.3672957,docs=[SolrDocument{id=53, long=-1762578138619777716, long_last=-1762578138619777716, long_first=-1762578138619777716, long_dv_last=-1762578138619777716, long_dv_first=-1762578138619777716, float=7.8670176E8, float_last=7.8670176E8, float_first=7.8670176E8, float_dv_last=7.8670176E8, float_dv_first=7.8670176E8, double=-5.708345229626098E8, double_last=-5.708345229626098E8, double_first=-5.708345229626098E8, double_dv_last=-5.708345229626098E8, double_dv_first=-5.708345229626098E8, str=&#12373;&#12362;&#12428;&#12435;, str_last=&#12373;&#12362;&#12428;&#12435;, str_first=&#12373;&#12362;&#12428;&#12435;, str_dv_last=&#12373;&#12362;&#12428;&#12435;, str_dv_first=&#12373;&#12362;&#12428;&#12435;, bin=O69Ees9vzo65vMxdlD794IAfqQgcvHEy+6USZ9bEELcM4PnS, bin_last=O69Ees9vzo65vMxdlD794IAfqQgcvHEy+6USZ9bEELcM4PnS, bin_first=O69Ees9vzo65vMxdlD794IAfqQgcvHEy+6USZ9bEELcM4PnS, bin_dv_last=O69Ees9vzo65vMxdlD794IAfqQgcvHEy+6USZ9bEELcM4PnS, bin_dv_first=O69Ees9vzo65vMxdlD794IAfqQgcvHEy+6USZ9bEELcM4PnS, _version_=1457993135883812864}]}}
330.log:   [junit4]   2&amp;gt; 19366 T10 oasc.DistribCursorPagingTest.doRandomSortsOnLargeIndex SOLR-5652: Begining Loop over smallish num of docs
330.log:   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: ({params(q=*%3A*&amp;amp;fl=id%2Cdouble_dv_first&amp;amp;rows=33&amp;amp;sort=double_dv_first+desc%2C+id+desc),defaults(cursorMark=AoIFP6OxOxOxOxRRAQ%3D%3D)}) walk already seen: 53, don&apos;t know why; q=id:53 gives: {responseHeader={status=0,QTime=6},response={numFound=1,start=0,maxScore=4.5409594,docs=[SolrDocument{id=53, int=1280166143, int_last=1280166143, int_first=1280166143, int_dv_last=1280166143, int_dv_first=1280166143, long=-9052102457621824595, long_last=-9052102457621824595, long_first=-9052102457621824595, long_dv_last=-9052102457621824595, long_dv_first=-9052102457621824595, float=3.0276464E8, float_last=3.0276464E8, float_first=3.0276464E8, float_dv_last=3.0276464E8, float_dv_first=3.0276464E8, str=&#10185;&#10193;, str_last=&#10185;&#10193;, str_first=&#10185;&#10193;, str_dv_last=&#10185;&#10193;, str_dv_first=&#10185;&#10193;, bin=rS4=, bin_last=rS4=, bin_first=rS4=, bin_dv_last=rS4=, bin_dv_first=rS4=, _version_=1458022773190295552}]}}
358.log:   [junit4]   2&amp;gt; 20392 T10 oasc.DistribCursorPagingTest.doRandomSortsOnLargeIndex SOLR-5652: Begining Loop over smallish num of docs
358.log:   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: ({params(q=*%3A*&amp;amp;fl=id%2Cdouble_dv_last&amp;amp;rows=26&amp;amp;sort=double_dv_last+asc%2C+id+asc),defaults(cursorMark=AoIFQcxu1GR52DdbBQ%3D%3D)}) walk already seen: 53, don&apos;t know why; q=id:53 gives: {responseHeader={status=0,QTime=6},response={numFound=1,start=0,maxScore=4.713572,docs=[SolrDocument{id=53, int=326151412, int_last=326151412, int_first=326151412, int_dv_last=326151412, int_dv_first=326151412, long=2982275399264847435, long_last=2982275399264847435, long_first=2982275399264847435, long_dv_last=2982275399264847435, long_dv_first=2982275399264847435, float=-4.07416768E8, float_last=-4.07416768E8, float_first=-4.07416768E8, float_dv_last=-4.07416768E8, float_dv_first=-4.07416768E8, str=s, str_last=s, str_first=s, str_dv_last=s, str_dv_first=s, bin=XR3Lrq5HZ64ra30SYdaN4EkoTS0jNYojEq+1McIN6T4QD136dLnbj4v/fp1VK+lN, bin_last=XR3Lrq5HZ64ra30SYdaN4EkoTS0jNYojEq+1McIN6T4QD136dLnbj4v/fp1VK+lN, bin_first=XR3Lrq5HZ64ra30SYdaN4EkoTS0jNYojEq+1McIN6T4QD136dLnbj4v/fp1VK+lN, bin_dv_last=XR3Lrq5HZ64ra30SYdaN4EkoTS0jNYojEq+1McIN6T4QD136dLnbj4v/fp1VK+lN, bin_dv_first=XR3Lrq5HZ64ra30SYdaN4EkoTS0jNYojEq+1McIN6T4QD136dLnbj4v/fp1VK+lN, _version_=1458025403210792960}]}}
372.log:   [junit4]   2&amp;gt; 20889 T10 oasc.DistribCursorPagingTest.doRandomSortsOnLargeIndex SOLR-5652: Begining Loop over smallish num of docs
372.log:   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: ({params(q=*%3A*&amp;amp;fl=id%2Cstr_dv_last&amp;amp;rows=18&amp;amp;sort=str_dv_last+desc%2C+id+desc),defaults(cursorMark=AoIgSg%3D%3D)}) walk already seen: 45, don&apos;t know why; q=id:45 gives: {responseHeader={status=0,QTime=10},response={numFound=1,start=0,maxScore=4.8394523,docs=[SolrDocument{id=45, int=55600073, int_last=55600073, int_first=55600073, int_dv_last=55600073, int_dv_first=55600073, long=-5726302924934473981, long_last=-5726302924934473981, long_first=-5726302924934473981, long_dv_last=-5726302924934473981, long_dv_first=-5726302924934473981, float=4.3000288E8, float_last=4.3000288E8, float_first=4.3000288E8, float_dv_last=4.3000288E8, float_dv_first=4.3000288E8, double=-6.3097894268989615E7, double_last=-6.3097894268989615E7, double_first=-6.3097894268989615E7, double_dv_last=-6.3097894268989615E7, double_dv_first=-6.3097894268989615E7, bin=TMQSu87+U6mLrws1ot/s491jlIrAp1SdDMSIc/wF8H7JW8Uvk9/Z216erOE8JFucgFQ=, bin_last=TMQSu87+U6mLrws1ot/s491jlIrAp1SdDMSIc/wF8H7JW8Uvk9/Z216erOE8JFucgFQ=, bin_first=TMQSu87+U6mLrws1ot/s491jlIrAp1SdDMSIc/wF8H7JW8Uvk9/Z216erOE8JFucgFQ=, bin_dv_last=TMQSu87+U6mLrws1ot/s491jlIrAp1SdDMSIc/wF8H7JW8Uvk9/Z216erOE8JFucgFQ=, bin_dv_first=TMQSu87+U6mLrws1ot/s491jlIrAp1SdDMSIc/wF8H7JW8Uvk9/Z216erOE8JFucgFQ=, _version_=1458026742612492288}]}}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The trial #358 failure has sort=double_dv_last+&lt;b&gt;asc&lt;/b&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;One thing that jumps out at me here is that in this failure the doc in question (93) doesn&apos;t have a value for the int_dv_last field being sorted on&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is also true for all of the above failures, and for the failure in the attached &lt;tt&gt;129.log&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="13880659" author="steve_rowe" created="Fri, 24 Jan 2014 02:35:41 +0000"  >&lt;p&gt;In the trial #129 failure, the second (failing) page is sorted wrong - the sort field is long_dv_first, but multiple docs with missing values (including the &quot;walk already seen&quot; doc: id=53) are not sorted first.  Below is the output of &lt;tt&gt;egrep &apos;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5652&quot; title=&quot;Heisenbug in DistribCursorPagingTest: &amp;quot;walk already seen ...&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5652&quot;&gt;&lt;del&gt;SOLR-5652&lt;/del&gt;&lt;/a&gt;: [&amp;#94;(]|id=53&apos;&lt;/tt&gt; over &lt;tt&gt;129.log&lt;/tt&gt; - note that the first page has the id=53 doc sorted properly:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]   2&amp;gt; 21647 T10 oasc.DistribCursorPagingTest.assertFullWalkNoDups SOLR-5652: ({params(q=*%3A*&amp;amp;fl=id%2Clong_dv_first&amp;amp;rows=24&amp;amp;sort=long_dv_first+desc%2C+id+desc),defaults(cursorMark=*)}) gave us these docs: {id=53}; {id=25, long_dv_first=9028609258260341288}; {id=1, long_dv_first=8079898934015269594}; {id=21, long_dv_first=7851701882515113803}; {id=62, long_dv_first=7838548354468740764}; {id=15, long_dv_first=7703783121293450688}; {id=77, long_dv_first=7259374194906229471}; {id=59, long_dv_first=7109412730326436803}; {id=29, long_dv_first=6983226518504627711}; {id=69, long_dv_first=6894002903936490262}; {id=108, long_dv_first=6425678483825374576}; {id=48, long_dv_first=6162850160620829991}; {id=18, long_dv_first=6050872288145443429}; {id=10, long_dv_first=5639159091440117036}; {id=49, long_dv_first=5585109074321704897}; {id=121, long_dv_first=5564641483351446975}; {id=73, long_dv_first=5557697725656376716}; {id=124, long_dv_first=5515795054987553907}; {id=91, long_dv_first=5446634527267601359}; {id=66, long_dv_first=5412453097925579481}; {id=57, long_dv_first=5391575838257268802}; {id=67, long_dv_first=5285225733925278855}; {id=76, long_dv_first=5196111855800982134}; {id=118, long_dv_first=4962434967015612730}; 
   [junit4]   2&amp;gt; 21673 T10 oasc.DistribCursorPagingTest.assertFullWalkNoDups SOLR-5652: ({params(q=*%3A*&amp;amp;fl=id%2Clong_dv_first&amp;amp;rows=24&amp;amp;sort=long_dv_first+desc%2C+id+desc),defaults(cursorMark=AoJ%2FvAJZAg%3D%3D)}) gave us these docs: {id=94, long_dv_first=5064}; {id=74, long_dv_first=5045}; {id=100, long_dv_first=5038}; {id=95, long_dv_first=5024}; {id=71, long_dv_first=5010}; {id=117}; {id=53}; {id=46}; {id=99, long_dv_first=-57033495908952210}; {id=84, long_dv_first=-369682029177105515}; {id=51, long_dv_first=-571619284359424369}; {id=33, long_dv_first=-777789016127771765}; {id=89, long_dv_first=-827568794981027330}; {id=27, long_dv_first=-874200373569477439}; {id=32, long_dv_first=-897758339419136464}; {id=37, long_dv_first=-1097686452252701951}; {id=20, long_dv_first=-1142352694920116441}; {id=60, long_dv_first=-1237791953129111727}; {id=78, long_dv_first=-1381169508523349434}; {id=58, long_dv_first=-1427953974149921646}; {id=104, long_dv_first=-1433781337878484605}; {id=8, long_dv_first=-1778050783003838576}; {id=55, long_dv_first=-1879894088937473264}; {id=38, long_dv_first=-1955827817437289663}; 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13880735" author="steve_rowe" created="Fri, 24 Jan 2014 05:40:05 +0000"  >&lt;p&gt;Uh, the trial #129 failure isn&apos;t just sorted wrong on the second page, the whole thing is sorted wrong: all the missing-value docs should be on the first page.  On the second page, the three missing value docs are sorted as if they had the value 0.&lt;/p&gt;

&lt;p&gt;The same thing happened on trial #25 - on the second page, missing value doc id=53 is sorted as if its int_dv_last value were zero, rather than missing, and then it shows up again as the final doc on the third page, where it belongs:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]   2&amp;gt; 19917 T10 oasc.DistribCursorPagingTest.assertFullWalkNoDups SOLR-5652: ({params(q=*%3A*&amp;amp;fl=id%2Cint_dv_last&amp;amp;rows=50&amp;amp;sort=int_dv_last+desc%2C+id+desc),defaults(cursorMark=*)}) gave us these docs: {id=115, int_dv_last=2091290595}; {id=113, int_dv_last=2037908394}; {id=41, int_dv_last=2010364276}; {id=55, int_dv_last=1998540267}; {id=61, int_dv_last=1928174044}; {id=10, int_dv_last=1926002179}; {id=6, int_dv_last=1860315269}; {id=68, int_dv_last=1813333298}; {id=72, int_dv_last=1788709893}; {id=94, int_dv_last=1775138667}; {id=103, int_dv_last=1759722924}; {id=19, int_dv_last=1708818408}; {id=62, int_dv_last=1702707874}; {id=95, int_dv_last=1575599582}; {id=18, int_dv_last=1539900646}; {id=3, int_dv_last=1534894477}; {id=16, int_dv_last=1513487396}; {id=122, int_dv_last=1512368828}; {id=91, int_dv_last=1490726417}; {id=100, int_dv_last=1369044665}; {id=129, int_dv_last=1366930639}; {id=2, int_dv_last=1335797630}; {id=12, int_dv_last=1311171495}; {id=17, int_dv_last=1197587669}; {id=71, int_dv_last=1075041470}; {id=14, int_dv_last=1062057736}; {id=87, int_dv_last=1062050843}; {id=98, int_dv_last=1026760294}; {id=32, int_dv_last=987606417}; {id=48, int_dv_last=971706716}; {id=25, int_dv_last=860420389}; {id=58, int_dv_last=844256726}; {id=120, int_dv_last=784821778}; {id=26, int_dv_last=778495105}; {id=89, int_dv_last=759861936}; {id=42, int_dv_last=731134129}; {id=38, int_dv_last=507728088}; {id=66, int_dv_last=504369368}; {id=88, int_dv_last=461655530}; {id=127, int_dv_last=443109475}; {id=28, int_dv_last=395812574}; {id=76, int_dv_last=390559531}; {id=27, int_dv_last=388277668}; {id=128, int_dv_last=312954617}; {id=101, int_dv_last=288358140}; {id=36, int_dv_last=262776063}; {id=8, int_dv_last=258137179}; {id=49, int_dv_last=203957872}; {id=104, int_dv_last=193961933}; {id=70, int_dv_last=177134041}; 
   [junit4]   2&amp;gt; 19936 T10 oasc.DistribCursorPagingTest.assertFullWalkNoDups SOLR-5652: ({params(q=*%3A*&amp;amp;fl=id%2Cint_dv_last&amp;amp;rows=50&amp;amp;sort=int_dv_last+desc%2C+id+desc),defaults(cursorMark=AoJZndujBVYE)}) gave us these docs: {id=4, int_dv_last=159428848}; {id=109, int_dv_last=146424475}; {id=82, int_dv_last=118282228}; {id=54, int_dv_last=85706438}; {id=5, int_dv_last=53954157}; {id=90, int_dv_last=34653341}; {id=125, int_dv_last=22280683}; {id=74, int_dv_last=49}; {id=84, int_dv_last=47}; {id=44, int_dv_last=45}; {id=40, int_dv_last=40}; {id=126, int_dv_last=39}; {id=79, int_dv_last=38}; {id=96, int_dv_last=36}; {id=77, int_dv_last=29}; {id=124, int_dv_last=26}; {id=52, int_dv_last=26}; {id=99, int_dv_last=24}; {id=51, int_dv_last=22}; {id=92, int_dv_last=20}; {id=53}; {id=86, int_dv_last=-27969262}; {id=63, int_dv_last=-64632197}; {id=111, int_dv_last=-65674043}; {id=78, int_dv_last=-92357840}; {id=69, int_dv_last=-128203234}; {id=118, int_dv_last=-174163156}; {id=56, int_dv_last=-213598056}; {id=64, int_dv_last=-250673657}; {id=116, int_dv_last=-349965047}; {id=73, int_dv_last=-363194086}; {id=112, int_dv_last=-365330802}; {id=97, int_dv_last=-378023587}; {id=20, int_dv_last=-425200925}; {id=22, int_dv_last=-447702352}; {id=110, int_dv_last=-457782308}; {id=50, int_dv_last=-458057913}; {id=65, int_dv_last=-464626829}; {id=43, int_dv_last=-479019126}; {id=81, int_dv_last=-490373572}; {id=46, int_dv_last=-491310745}; {id=35, int_dv_last=-524855567}; {id=93, int_dv_last=-562980068}; {id=102, int_dv_last=-603711742}; {id=106, int_dv_last=-664725432}; {id=37, int_dv_last=-861444535}; {id=30, int_dv_last=-872755266}; {id=108, int_dv_last=-905452841}; {id=85, int_dv_last=-908362401}; {id=31, int_dv_last=-909902582}; 
   [junit4]   2&amp;gt; 19950 T10 oasc.DistribCursorPagingTest.assertFullWalkNoDups SOLR-5652: ({params(q=*%3A*&amp;amp;fl=id%2Cint_dv_last&amp;amp;rows=50&amp;amp;sort=int_dv_last+desc%2C+id+desc),defaults(cursorMark=AoIGycP9Cl8B)}) gave us these docs: {id=39, int_dv_last=-1040495703}; {id=83, int_dv_last=-1098867850}; {id=60, int_dv_last=-1130244120}; {id=75, int_dv_last=-1241745669}; {id=9, int_dv_last=-1248082530}; {id=29, int_dv_last=-1263869241}; {id=121, int_dv_last=-1269818264}; {id=67, int_dv_last=-1368223478}; {id=24, int_dv_last=-1402120260}; {id=117, int_dv_last=-1432445507}; {id=21, int_dv_last=-1445804798}; {id=13, int_dv_last=-1448419734}; {id=114, int_dv_last=-1450149432}; {id=57, int_dv_last=-1455879499}; {id=45, int_dv_last=-1465395474}; {id=123, int_dv_last=-1507457930}; {id=1, int_dv_last=-1563035961}; {id=105, int_dv_last=-1615487083}; {id=34, int_dv_last=-1656779776}; {id=23, int_dv_last=-1734132255}; {id=15, int_dv_last=-1745083413}; {id=33, int_dv_last=-1755075260}; {id=107, int_dv_last=-1819329253}; {id=47, int_dv_last=-1835223018}; {id=119, int_dv_last=-1860312074}; {id=80, int_dv_last=-1875371069}; {id=7, int_dv_last=-1884862947}; {id=59, int_dv_last=-1963096931}; {id=11, int_dv_last=-1978568913}; {id=53}; 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="13880750" author="steve_rowe" created="Fri, 24 Jan 2014 06:12:51 +0000"  >&lt;p&gt;I see the same pattern (missing value docvalue sorting as if it had a value of zero, or zero-length in the string case) in all the other failed trials:&lt;/p&gt;

&lt;p&gt;trial #330: sort=double_dv_first+desc; missing value doc id=53 is the first doc on page one, and is also given as one of six missing value docs at the zero position on page three.&lt;/p&gt;

&lt;p&gt;trial #358: sort=double_dv_last+asc; missing value doc id=53 is given as one of five missing value docs at the zero position on page three, and then again as the last doc on page seven. &lt;/p&gt;

&lt;p&gt;trial #372: sort=str_dv_last+desc; missing value doc id=45 is mentioned on two different pages, and missing str_dv_last value docs are sorted at the same position as, and interleaved with, zero-length value docs.  I&apos;ve attached the full log for this one (&lt;tt&gt;372.log&lt;/tt&gt;).&lt;/p&gt;</comment>
                            <comment id="13881173" author="steve_rowe" created="Fri, 24 Jan 2014 17:23:02 +0000"  >&lt;p&gt;I ran branch_4x DistribCursorPagingTest 1000 times in a bash loop overnight on Linux using Oracle Java 1.6.0_45 - no failures. &lt;/p&gt;</comment>
                            <comment id="13881432" author="steve_rowe" created="Fri, 24 Jan 2014 21:18:42 +0000"  >&lt;p&gt;It looks to me like there are two problems here: 1) the same doc is showing up on different pages when deep paging; and 2) missing docvalue docs are sorted incorrectly.&lt;/p&gt;

&lt;p&gt;I can easily find examples of problem #2 in logs of non-failing trials, e.g. from trial #91 - when sort=long_dv_first+asc, missing value docs id=19, id=32 and id=37 are sorted as if they had the value 0, on the second page, when they should be sorted first on the first page:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]   2&amp;gt; 19554 T10 oasc.DistribCursorPagingTest.assertFullWalkNoDups SOLR-5652: ({params(q=*%3A*&amp;amp;fl=id%2Clong_dv_first&amp;amp;rows=31&amp;amp;sort=long_dv_first+asc%2C+id+asc),defaults(cursorMark=*)}) gave us these docs: {id=49, long_dv_first=-8979994988935574161}; {id=92, long_dv_first=-8755571709855874971}; {id=84, long_dv_first=-8574119732015592678}; {id=56, long_dv_first=-8572499504943249879}; {id=91, long_dv_first=-8203042523619772390}; {id=75, long_dv_first=-8115138008435097864}; {id=85, long_dv_first=-7569390009163464752}; {id=58, long_dv_first=-7543350239050885008}; {id=45, long_dv_first=-7525477648502620266}; {id=80, long_dv_first=-7520859819773031357}; {id=20, long_dv_first=-7124229734364778199}; {id=64, long_dv_first=-6830701259982220043}; {id=60, long_dv_first=-6805829375857154103}; {id=2, long_dv_first=-6659642971458854219}; {id=72, long_dv_first=-6436183300694469323}; {id=41, long_dv_first=-6013357013156317440}; {id=16, long_dv_first=-5909224636078497253}; {id=90, long_dv_first=-5891044973987397315}; {id=21, long_dv_first=-5139637696689790888}; {id=95, long_dv_first=-4964664340542583607}; {id=25, long_dv_first=-4953002351284696779}; {id=101, long_dv_first=-4409331376874778593}; {id=40, long_dv_first=-4123215048596655849}; {id=4, long_dv_first=-3899694572079828547}; {id=94, long_dv_first=-3621827719107024030}; {id=29, long_dv_first=-3602538116122488005}; {id=54, long_dv_first=-3286165773326701533}; {id=5, long_dv_first=-3144094377585650477}; {id=22, long_dv_first=-3050916496497308906}; {id=71, long_dv_first=-2534895618188255748}; {id=48, long_dv_first=-2165485763197155213}; 
   [junit4]   2&amp;gt; 19567 T10 oasc.DistribCursorPagingTest.assertFullWalkNoDups SOLR-5652: ({params(q=*%3A*&amp;amp;fl=id%2Clong_dv_first&amp;amp;rows=31&amp;amp;sort=long_dv_first+asc%2C+id+asc),defaults(cursorMark=AoIH4fKmK%2B53yHNQAw%3D%3D)}) gave us these docs: {id=76, long_dv_first=-1932456939352186404}; {id=68, long_dv_first=-1878698959726559452}; {id=88, long_dv_first=-1623167100548405744}; {id=83, long_dv_first=-1589461579047178358}; {id=13, long_dv_first=-1411021277082593064}; {id=74, long_dv_first=-1013366478463336966}; {id=17, long_dv_first=-946883306115055217}; {id=99, long_dv_first=-663522491219747257}; {id=42, long_dv_first=-92189538677577379}; {id=19}; {id=32}; {id=37}; {id=82, long_dv_first=5004}; {id=97, long_dv_first=5006}; {id=24, long_dv_first=5012}; {id=11, long_dv_first=5013}; {id=87, long_dv_first=5035}; {id=33, long_dv_first=5037}; {id=10, long_dv_first=5048}; {id=34, long_dv_first=5051}; {id=28, long_dv_first=5067}; {id=3, long_dv_first=5073}; {id=43, long_dv_first=5076}; {id=23, long_dv_first=5083}; {id=89, long_dv_first=5087}; {id=8, long_dv_first=58919190259123570}; {id=51, long_dv_first=225066202121560643}; {id=67, long_dv_first=844890816756093941}; {id=6, long_dv_first=1032728410845862227}; {id=36, long_dv_first=1141671958716920319}; {id=96, long_dv_first=1226886190401658912};
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;TestDistributedMissingSort does not test sorting by docvalue - I&apos;ll work on adding docvalue tests there.&lt;/p&gt;</comment>
                            <comment id="13882122" author="steve_rowe" created="Sun, 26 Jan 2014 00:17:38 +0000"  >&lt;p&gt;Uwe&apos;s Jenkins found a &quot;walk already seen&quot; &lt;b&gt;Linux&lt;/b&gt; failure on branch_4x using Oracle 1.8.0-ea-b124 JVM: &lt;a href=&quot;http://jenkins.thetaphi.de/job/Lucene-Solr-4.x-Linux/9136/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.thetaphi.de/job/Lucene-Solr-4.x-Linux/9136/&lt;/a&gt; - a missing value str_dv doc (id=2) appears at both the first &lt;b&gt;and&lt;/b&gt; last positions and pages:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]   2&amp;gt; 414765 T2177 oasc.DistribCursorPagingTest.assertFullWalkNoDups SOLR-5652: ({params(q=*%3A*&amp;amp;fl=id%2Cstr_dv_last&amp;amp;rows=41&amp;amp;sort=str_dv_last+asc%2C+id+asc),defaults(cursorMark=*)}) gave us these docs: {id=2}; {id=3, str_dv_last=}; {id=9, str_dv_last=}; {id=18, str_dv_last=}; {id=35, str_dv_last=}; {id=41}; {id=43, str_dv_last=}; {id=46, str_dv_last=}; {id=48, str_dv_last=}; {id=51, str_dv_last=}; {id=55}; {id=80, str_dv_last=}; {id=125, str_dv_last=}; {id=117, str_dv_last=u}xPe}; {id=11, str_dv_last=CVLjZ-k U}; {id=104, str_dv_last=g}; {id=66, str_dv_last=h}; {id=27, str_dv_last=j}; {id=120, str_dv_last=l}; {id=128, str_dv_last=o}; {id=19, str_dv_last=q}; {id=76, str_dv_last=t}; {id=42, str_dv_last=x}; {id=92, str_dv_last=y}; {id=40, str_dv_last=z}; {id=6, str_dv_last=???????????}; {id=82, str_dv_last=????}; {id=1, str_dv_last=??}; {id=103, str_dv_last=???????}; {id=15, str_dv_last=???????????????????}; {id=81, str_dv_last=??????????}; {id=29, str_dv_last=?}; {id=98, str_dv_last=????????????????}; {id=78, str_dv_last=????????????}; {id=72, str_dv_last=??????????????}; {id=73, str_dv_last=???????????????????}; {id=33, str_dv_last=???????????}; {id=121, str_dv_last=????????????????}; {id=97, str_dv_last=??}; {id=47, str_dv_last=??????????????}; {id=32, str_dv_last=????????????}; 
   [junit4]   2&amp;gt; 414781 T2177 oasc.DistribCursorPagingTest.assertFullWalkNoDups SOLR-5652: ({params(q=*%3A*&amp;amp;fl=id%2Cstr_dv_last&amp;amp;rows=41&amp;amp;sort=str_dv_last+asc%2C+id+asc),defaults(cursorMark=AoI%2FBeC%2FpeC8neC9teC%2Bu%2BC9nOC%2FhuC%2BgeC8geC9ruC%2BgeC9s%2BC%2Bl1AC)}) gave us these docs: {id=106, str_dv_last=??????}; {id=54, str_dv_last=??????}; {id=94, str_dv_last=????}; {id=63, str_dv_last=????????????????????}; {id=88, str_dv_last=??}; {id=24, str_dv_last=??}; {id=17, str_dv_last=????????}; {id=99, str_dv_last=??????????}; {id=7, str_dv_last=?????????????????}; {id=50, str_dv_last=?????????????}; {id=85, str_dv_last=????????????}; {id=77, str_dv_last=??}; {id=102, str_dv_last=?}; {id=89, str_dv_last=??????????????}; {id=8, str_dv_last=????????}; {id=74, str_dv_last=?????????????????}; {id=60, str_dv_last=????????????????}; {id=67, str_dv_last=?????}; {id=109, str_dv_last=????????????????}; {id=118, str_dv_last=???????????}; {id=112, str_dv_last=?}; {id=56, str_dv_last=???}; {id=5, str_dv_last=????????}; {id=95, str_dv_last=???????????????????}; {id=22, str_dv_last=??????????}; {id=31, str_dv_last=???????????????}; {id=16, str_dv_last=?}; {id=52, str_dv_last=???????????}; {id=57, str_dv_last=????????????????????}; {id=113, str_dv_last=???????????}; {id=91, str_dv_last=??}; {id=34, str_dv_last=??????}; {id=39, str_dv_last=?????????}; {id=59, str_dv_last=?????}; {id=61, str_dv_last=???????}; {id=44, str_dv_last=?????????????????}; {id=69, str_dv_last=????????????}; {id=119, str_dv_last=???????}; {id=12, str_dv_last=??????}; {id=90, str_dv_last=????}; {id=123, str_dv_last=???????????????????}; 
   [junit4]   2&amp;gt; 414795 T2177 oasc.DistribCursorPagingTest.assertFullWalkNoDups SOLR-5652: ({params(q=*%3A*&amp;amp;fl=id%2Cstr_dv_last&amp;amp;rows=41&amp;amp;sort=str_dv_last+asc%2C+id+asc),defaults(cursorMark=AoI%2FGuOEm%2BOEpOOEjuOEoeOEmeOEpuOEo%2BOEmeOEh%2BOEneOEjeOEheOErOOEguOEoeOElOOEluOEpeOEgVsH)}) gave us these docs: {id=68, str_dv_last=??????????????}; {id=96, str_dv_last=?????????????}; {id=45, str_dv_last=????????}; {id=38, str_dv_last=??????????}; {id=110, str_dv_last=???????????????}; {id=20, str_dv_last=??????}; {id=129, str_dv_last=??????????????????}; {id=75, str_dv_last=???????}; {id=79, str_dv_last=????}; {id=62, str_dv_last=?????????}; {id=30, str_dv_last=??????????????????}; {id=111, str_dv_last=???????????}; {id=28, str_dv_last=????????}; {id=105, str_dv_last=??????????????}; {id=100, str_dv_last=?}; {id=37, str_dv_last=??????}; {id=115, str_dv_last=???????????????}; {id=107, str_dv_last=?????????????}; {id=49, str_dv_last=??}; {id=93, str_dv_last=???????????????}; {id=65, str_dv_last=??????}; {id=25, str_dv_last=????????}; {id=14, str_dv_last=????????}; {id=83, str_dv_last=???????????????????}; {id=124, str_dv_last=????????????????}; {id=114, str_dv_last=???????????????????}; {id=71, str_dv_last=??????????????????}; {id=108, str_dv_last=???????????????}; {id=36, str_dv_last=?????????????????}; {id=86, str_dv_last=??????????}; {id=122, str_dv_last=?????????}; {id=84, str_dv_last=?????????}; {id=127, str_dv_last=???????????}; {id=70, str_dv_last=?????????????}; {id=13, str_dv_last=????}; {id=10, str_dv_last=?????}; {id=64, str_dv_last=????}; {id=26, str_dv_last=???????????}; {id=58, str_dv_last=??????????????????}; {id=4, str_dv_last=?????????????????}; {id=101, str_dv_last=??????????}; 
   [junit4]   2&amp;gt; 414805 T2177 oasc.DistribCursorPagingTest.assertFullWalkNoDups SOLR-5652: ({params(q=*%3A*&amp;amp;fl=id%2Cstr_dv_last&amp;amp;rows=41&amp;amp;sort=str_dv_last+asc%2C+id+asc),defaults(cursorMark=AoI%2FCfCdhojwnYSm8J2Es%2FCdhKvwnYWo8J2FqfCdhYfwnYaE8J2HpPCdhqJVBg%3D%3D)}) gave us these docs: {id=87, str_dv_last=??}; {id=116, str_dv_last=?????}; {id=23, str_dv_last=???????????}; {id=53, str_dv_last=??????}; {id=126, str_dv_last=???????????????}; {id=21, str_dv_last=???????????}; 
   [junit4]   2&amp;gt; 414813 T2177 oasc.DistribCursorPagingTest.assertFullWalkNoDups SOLR-5652: ({params(q=*%3A*&amp;amp;fl=id%2Cstr_dv_last&amp;amp;rows=41&amp;amp;sort=str_dv_last+asc%2C+id+asc),defaults(cursorMark=AoI%2FDfSEm7v0jba69IqEqvSFmYX0hram9IeujPSLqIX0ibic9IeajfSAlKX0hZqwVQE%3D)}) gave us these docs: {id=2}; 
   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: ({params(q=*%3A*&amp;amp;fl=id%2Cstr_dv_last&amp;amp;rows=41&amp;amp;sort=str_dv_last+asc%2C+id+asc),defaults(cursorMark=AoI%2FDfSEm7v0jba69IqEqvSFmYX0hram9IeujPSLqIX0ibic9IeajfSAlKX0hZqwVQE%3D)}) walk already seen: 2, don&apos;t know why; q=id:2 gives: {responseHeader={status=0,QTime=5},response={numFound=1,start=0,maxScore=4.3672957,docs=[SolrDocument{id=2, int=-1269312747, int_last=-1269312747, int_first=-1269312747, int_dv_last=-1269312747, int_dv_first=-1269312747, long=-7073619055149191639, long_last=-7073619055149191639, long_first=-7073619055149191639, long_dv_last=-7073619055149191639, long_dv_first=-7073619055149191639, float=-5.1121048E7, float_last=-5.1121048E7, float_first=-5.1121048E7, float_dv_last=-5.1121048E7, float_dv_first=-5.1121048E7, double=1.209537768077775E9, double_last=1.209537768077775E9, double_first=1.209537768077775E9, double_dv_last=1.209537768077775E9, double_dv_first=1.209537768077775E9, _version_=1458244495980101632}]}}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also, I found a &lt;b&gt;trunk&lt;/b&gt; failure on OS X using Oracle 1.7.0_25 JVM - one failure out of 875 trials:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;797.log:   [junit4]   2&amp;gt; 33038 T10 oasc.DistribCursorPagingTest.doRandomSortsOnLargeIndex SOLR-5652: Begining Loop over smallish num of docs
797.log:   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: ({params(q=*%3A*&amp;amp;fl=id%2Clong_dv_last&amp;amp;rows=41&amp;amp;sort=long_dv_last+asc%2C+id+asc),defaults(cursorMark=AoIHQPUmIuYgRStcBA%3D%3D)}) walk already seen: 94, don&apos;t know why; q=id:94 gives: {responseHeader={status=0,QTime=8},response={numFound=1,start=0,maxScore=4.650658,docs=[SolrDocument{id=94, int=-1526187839, int_last=-1526187839, int_first=-1526187839, int_dv_last=-1526187839, int_dv_first=-1526187839, float=-4.343064E8, float_last=-4.343064E8, float_first=-4.343064E8, float_dv_last=-4.343064E8, float_dv_first=-4.343064E8, double=2.4889970242543688E8, double_last=2.4889970242543688E8, double_first=2.4889970242543688E8, double_dv_last=2.4889970242543688E8, double_dv_first=2.4889970242543688E8, str=&#4247;&#4200;&#4112;&#4127;&#4096;&#4246;&#4120;&#4117;&#4201;&#4123;&#4194;&#4167;&#4227;, str_last=&#4247;&#4200;&#4112;&#4127;&#4096;&#4246;&#4120;&#4117;&#4201;&#4123;&#4194;&#4167;&#4227;, str_first=&#4247;&#4200;&#4112;&#4127;&#4096;&#4246;&#4120;&#4117;&#4201;&#4123;&#4194;&#4167;&#4227;, str_dv_last=&#4247;&#4200;&#4112;&#4127;&#4096;&#4246;&#4120;&#4117;&#4201;&#4123;&#4194;&#4167;&#4227;, str_dv_first=&#4247;&#4200;&#4112;&#4127;&#4096;&#4246;&#4120;&#4117;&#4201;&#4123;&#4194;&#4167;&#4227;, bin=1OWONkZ+pQ9N1WTd+bro5Ubqx8FFEGtqPDSD, bin_last=1OWONkZ+pQ9N1WTd+bro5Ubqx8FFEGtqPDSD, bin_first=1OWONkZ+pQ9N1WTd+bro5Ubqx8FFEGtqPDSD, bin_dv_last=1OWONkZ+pQ9N1WTd+bro5Ubqx8FFEGtqPDSD, bin_dv_first=1OWONkZ+pQ9N1WTd+bro5Ubqx8FFEGtqPDSD, _version_=1458175223436148736}]}}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also, I ran 1000 trials on Win7 on branch_4x using Oracle 1.6.0_45 JVM, and saw 0 failures.&lt;/p&gt;</comment>
                            <comment id="13882838" author="steve_rowe" created="Mon, 27 Jan 2014 14:29:20 +0000"  >&lt;p&gt;Updated summary&lt;/p&gt;</comment>
                            <comment id="13882958" author="steve_rowe" created="Mon, 27 Jan 2014 16:57:05 +0000"  >&lt;blockquote&gt;&lt;p&gt;It looks to me like there are two problems here: 1) the same doc is showing up on different pages when deep paging; and 2) missing docvalue docs are sorted incorrectly.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think I understand problem #2: non-multi-valued numeric and string fields are created (by TrieField&apos;s and StrField&apos;s createFields() methods) as NumericDocValuesField-s and SortedDocValuesField-s, respectively, and these require each doc to have a value, which apparently defaults to zero for NumericDocValuesField-s and the empty string for SortedDocValueField-s.&lt;/p&gt;

&lt;p&gt;Here are the declarations for the field types that have this problem in DistribCursorPagingTest (from schema-sorts.xml):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;fieldtype name=&lt;span class=&quot;code-quote&quot;&gt;&quot;str_dv_last&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.StrField&quot;&lt;/span&gt; stored=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; indexed=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; docValues=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; sortMissingLast=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;fieldtype name=&lt;span class=&quot;code-quote&quot;&gt;&quot;str_dv_first&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.StrField&quot;&lt;/span&gt; stored=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; indexed=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; docValues=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; sortMissingFirst=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;fieldtype name=&lt;span class=&quot;code-quote&quot;&gt;&quot;int_dv_last&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.TrieIntField&quot;&lt;/span&gt; stored=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; indexed=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; docValues=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; sortMissingLast=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;fieldtype name=&lt;span class=&quot;code-quote&quot;&gt;&quot;int_dv_first&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.TrieIntField&quot;&lt;/span&gt; stored=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; indexed=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; docValues=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; sortMissingFirst=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;fieldtype name=&lt;span class=&quot;code-quote&quot;&gt;&quot;long_dv_last&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.TrieLongField&quot;&lt;/span&gt; stored=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; indexed=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; docValues=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; sortMissingLast=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;fieldtype name=&lt;span class=&quot;code-quote&quot;&gt;&quot;long_dv_first&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.TrieLongField&quot;&lt;/span&gt; stored=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; indexed=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; docValues=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; sortMissingFirst=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;fieldtype name=&lt;span class=&quot;code-quote&quot;&gt;&quot;float_dv_last&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.TrieFloatField&quot;&lt;/span&gt; stored=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; indexed=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; docValues=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; sortMissingLast=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;fieldtype name=&lt;span class=&quot;code-quote&quot;&gt;&quot;float_dv_first&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.TrieFloatField&quot;&lt;/span&gt; stored=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; indexed=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; docValues=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; sortMissingFirst=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;fieldtype name=&lt;span class=&quot;code-quote&quot;&gt;&quot;double_dv_last&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.TrieDoubleField&quot;&lt;/span&gt; stored=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; indexed=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; docValues=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; sortMissingLast=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;fieldtype name=&lt;span class=&quot;code-quote&quot;&gt;&quot;double_dv_first&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.TrieDoubleField&quot;&lt;/span&gt; stored=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; indexed=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; docValues=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; sortMissingFirst=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think that the above declarations should by disallowed by Solr, because they contain docValues=&quot;true&quot; + sortMissing&amp;lt;Last|First&amp;gt;=&quot;true&quot;; the user is asking for a particular sorting behavior for missing values, when there never will be missing values.&lt;/p&gt;

&lt;p&gt;Also, the Solr Ref Guide &lt;a href=&quot;https://cwiki.apache.org/confluence/display/solr/DocValues&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;says&lt;/a&gt; about docvalue fields &quot;If this type is used, the field must be either required or have a default value, meaning every document must have a value for this field.&quot;  However, neither the above field types nor the fields using them are required or have a default specified.  Maybe this should be enforced by schema parsing?&lt;/p&gt;</comment>
                            <comment id="13882976" author="yseeley@gmail.com" created="Mon, 27 Jan 2014 17:16:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;NumericDocValuesField-s and SortedDocValuesField-s, respectively, and these require each doc to have a value, &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Although that used to be true, it should no longer be the case: &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-5178&quot; title=&quot;doc values should expose missing values (or allow configurable defaults)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-5178&quot;&gt;&lt;del&gt;LUCENE-5178&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Now.... one thing that does look a little fishy to me that might cause a problem is how things like IntComparator deals with missing values...&lt;br/&gt;
it simply substitutes in MAX_INT or MIN_INT when the value is missing.&lt;/p&gt;

&lt;p&gt;If the tests here are generating random values, you might try taking out MAX_&amp;lt;numeric_type&amp;gt;, MIN_&amp;lt;numeric_type&amp;gt; and see if it makes a difference?&lt;/p&gt;</comment>
                            <comment id="13883023" author="hossman" created="Mon, 27 Jan 2014 18:02:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;Although that used to be true, it should no longer be the case: &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-5178&quot; title=&quot;doc values should expose missing values (or allow configurable defaults)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-5178&quot;&gt;&lt;del&gt;LUCENE-5178&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right, see also: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5165&quot; title=&quot;Remove required default from DocValues fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5165&quot;&gt;&lt;del&gt;SOLR-5165&lt;/del&gt;&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5222&quot; title=&quot;Sorting on dynamic fields using DocValues sorts empty values always first&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5222&quot;&gt;&lt;del&gt;SOLR-5222&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;On IRC, i drew sarowe&apos;s attention to these issues and DocValuesMissingTest and he pointed out that DocValuesMissingTest uses the following...&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;@SuppressCodecs({&quot;Lucene40&quot;, &quot;Lucene41&quot;, &quot;Lucene42&quot;}) // old formats cannot represent missing values&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;...so this may be the smoking gun to explain what&apos;s going wrong here, since we don&apos;t do anything like this in the cursor tests. (yet ... i&apos;m going to fix that now)&lt;/p&gt;</comment>
                            <comment id="13883044" author="hossman" created="Mon, 27 Jan 2014 18:20:13 +0000"  >&lt;p&gt;To clarify one thing: steve mentioned that it seems like there are two problems...&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;It looks to me like there are two problems here: 1) the same doc is showing up on different pages when deep paging; and 2) missing docvalue docs are sorted incorrectly.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;As far as #2 goes, now that we log every doc on every page, i can confirm that when i try some of these failed seeds (for example steves #129 log), i also see the incorrect ordering even though the test passes for me &amp;#8211; so #2 is almost certainly the codec issue.&lt;/p&gt;

&lt;p&gt;that still leaves the question about #1, and what it isn&apos;t completely reproducible &amp;#8211; but that may just be an artifact of #2 (ie: if these codecs have non-deterministic behavior when trying to access &quot;missing&quot; values, there could be arbitrary data in a reused bytebuffer)&lt;/p&gt;</comment>
                            <comment id="13883048" author="hossman" created="Mon, 27 Jan 2014 18:22:45 +0000"  >&lt;blockquote&gt;&lt;p&gt;Also, the Solr Ref Guide says about docvalue fields...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;fixed.&lt;/p&gt;</comment>
                            <comment id="13883311" author="hossman" created="Mon, 27 Jan 2014 21:09:31 +0000"  >&lt;p&gt;rather then just use SupressCodec in this test, here&apos;s a patch that checks to see if the codec supports docvalues with sort missing, and if not then it skips those fields &amp;#8211; but the other fields are still checked.&lt;/p&gt;

&lt;p&gt;you can see it working by comparing the logs messages (showing the fields tested) between things like...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ant test -Dtestcase=DistribCursorPagingTest -Dtests.codec=Lucene40
   vs
ant test -Dtestcase=DistribCursorPagingTest -Dtests.codec=Lucene45
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Before i commit this though, i really want to add an explicit sanity checking that the docs are in the expected order so we can see a definitive and consistent fail from the problem this tries to prevent ... i&apos;m going to work on that this afternoon.&lt;/p&gt;

&lt;p&gt;(I also want to docValue fields to the test schema that don&apos;t use either sortMissingLast &lt;em&gt;or&lt;/em&gt; sortMissingFirst, and just rely on the default behavior ... not sure why i didn&apos;t think to include that in the first place)&lt;/p&gt;</comment>
                            <comment id="13883317" author="rcmuir" created="Mon, 27 Jan 2014 21:17:32 +0000"  >&lt;blockquote&gt;
&lt;p&gt;On IRC, i drew sarowe&apos;s attention to these issues and DocValuesMissingTest and he pointed out that DocValuesMissingTest uses the following...&lt;/p&gt;

&lt;p&gt;    @SuppressCodecs(&lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {&amp;quot;Lucene40&amp;quot;, &amp;quot;Lucene41&amp;quot;, &amp;quot;Lucene42&amp;quot;}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;) // old formats cannot represent missing values&lt;/p&gt;

&lt;p&gt;...so this may be the smoking gun to explain what&apos;s going wrong here, since we don&apos;t do anything like this in the cursor tests. (yet ... i&apos;m going to fix that now)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Dammit, I feel pretty terrible. You guys have been debugging this thing for a long time, and I&apos;ve been trying to stay up to date on the issue, but not once did I even think about this...&lt;/p&gt;
</comment>
                            <comment id="13883402" author="steve_rowe" created="Mon, 27 Jan 2014 22:04:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;rather then just use SupressCodec in this test, here&apos;s a patch that checks to see if the codec supports docvalues with sort missing, and if not then it skips those fields &#8211; but the other fields are still checked.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1, looks good, though on trunk &quot;Lucene3x&quot; and &quot;Appending&quot; can be removed from the blacklist in LTC.defaultCodecSupportsMissingDocValues().  I see these elsewhere on trunk (Solr tests only), though, so maybe they&apos;re not just vestiges?&lt;/p&gt;</comment>
                            <comment id="13883538" author="hossman" created="Tue, 28 Jan 2014 00:02:20 +0000"  >&lt;p&gt;Ok, this new patch has the following...&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;new &lt;tt&gt;&amp;#42;_dv&lt;/tt&gt; fields in the schema for all the various types w/o using any of the sort missing options&lt;/li&gt;
	&lt;li&gt;tweaked the simple testing in both the single node and distrib test so that:
	&lt;ul&gt;
		&lt;li&gt;one doc is missing an int value&lt;/li&gt;
		&lt;li&gt;we randomly pick either &quot;int&quot; or &quot;int_dv&quot; as a field to use in explicit sorts
		&lt;ul&gt;
			&lt;li&gt;currently a nocommit in place to force this to be &quot;int_dv&quot;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
		&lt;li&gt;we explicitly sort on all 3 &quot;missing&quot; sub-variants (&quot;&quot;, &quot;_first&quot;, &quot;_last&quot;) and check the doc order exactly matches our expectations&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;includes everything from &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5652&quot; title=&quot;Heisenbug in DistribCursorPagingTest: &amp;quot;walk already seen ...&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5652&quot;&gt;&lt;del&gt;SOLR-5652&lt;/del&gt;&lt;/a&gt;.codec.skip.dv.patch...
	&lt;ul&gt;
		&lt;li&gt;...but there is a nocommit bypassing hte codec check so docvalues are always used.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;With this patch, and these nocommits, it&apos;s pretty trivial to reliably reproduce failing seeds that pop up when running...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ant test  -Dtests.class=\*Cursor\* -Dtests.codec=Lucene40
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...and likewise, my limted testing so far hasn&apos;t seen any failures when running this patch with Lucene45 codec...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ant test  -Dtests.class=\*Cursor\* -Dtests.codec=Lucene45
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13883578" author="hossman" created="Tue, 28 Jan 2014 00:52:48 +0000"  >&lt;p&gt;patch i think is commitable - same as &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5652&quot; title=&quot;Heisenbug in DistribCursorPagingTest: &amp;quot;walk already seen ...&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5652&quot;&gt;&lt;del&gt;SOLR-5652&lt;/del&gt;&lt;/a&gt;.nocommit.patch but with the nocommits removed, and the (in hindsight) obvious change needed to my new &quot;intsort&quot; field ranomization so that when the codec&apos;s docvalues support can&apos;t handle missing values, we use the non-docvalues version of that field for the explicit checks of &amp;#42;_last and &amp;#42;_first sorting&lt;/p&gt;

&lt;p&gt;I&apos;m currently bash loop hammering on this patch &amp;#8211; would appreciate it if others could try the same.&lt;/p&gt;</comment>
                            <comment id="13884375" author="hossman" created="Tue, 28 Jan 2014 18:11:46 +0000"  >&lt;p&gt;Using my patch, my laptop hammered out 154 iterations of all the cursor tests last night before encountering a failure &amp;#8211; but this smells like it might be a completely different bug.&lt;/p&gt;

&lt;p&gt;In particular:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;the sort is &quot;bin_dv desc&quot; &amp;#8211; note that sort missing last/first isn&apos;t used&lt;/li&gt;
	&lt;li&gt;the &quot;bin_dv asc&quot; sort works fine, and produces the exact reverse sort of as &quot;bin_dv desc&quot; &amp;#8211; except that with the desc sort, after the last doc (id=5) is returned, the next cursor call generates a response consisting of that last doc again.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Details...&lt;/p&gt;

&lt;p&gt;trunk 1561765M&lt;br/&gt;
heres the seed (which doesn&apos;t reproduce for me) and failure details...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=DistribCursorPagingTest -Dtests.method=testDistribSearch -Dtests.seed=A98D5436D5ABD5E2 -Dtests.slow=true -Dtests.locale=lt_LT -Dtests.timezone=IET -Dtests.file.encoding=ISO-8859-1
   [junit4] FAILURE 30.8s J0 | DistribCursorPagingTest.testDistribSearch &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: ({params(q=*%3A*&amp;amp;fl=id%2Cbin_dv&amp;amp;rows=30&amp;amp;sort=bin_dv+desc%2C+id+desc),defaults(cursorMark=AoIgRQ%3D%3D)}) walk already seen: 5, don&apos;t know why; q=id:5 gives: {responseHeader={status=0,QTime=10},response={numFound=1,start=0,maxScore=4.8607297,docs=[SolrDocument{id=5, int=472194186, int_last=472194186, int_first=472194186, int_dv=472194186, int_dv_last=472194186, int_dv_first=472194186, long=9045528501943660239, long_last=9045528501943660239, long_first=9045528501943660239, long_dv=9045528501943660239, long_dv_last=9045528501943660239, long_dv_first=9045528501943660239, double=-1.0261364741663126E9, double_last=-1.0261364741663126E9, double_first=-1.0261364741663126E9, double_dv=-1.0261364741663126E9, double_dv_last=-1.0261364741663126E9, double_dv_first=-1.0261364741663126E9, str=&#68415;, str_last=&#68415;, str_first=&#68415;, str_dv=&#68415;, str_dv_last=&#68415;, str_dv_first=&#68415;, _version_=1458455185121607680}]}}
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([A98D5436D5ABD5E2:286BDA2EA2F4B5DE]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.DistribCursorPagingTest.assertFullWalkNoDups(DistribCursorPagingTest.java:760)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.DistribCursorPagingTest.doRandomSortsOnLargeIndex(DistribCursorPagingTest.java:542)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.DistribCursorPagingTest.doTest(DistribCursorPagingTest.java:91)
   [junit4]    &amp;gt; 	at org.apache.solr.BaseDistributedSearchTestCase.testDistribSearch(BaseDistributedSearchTestCase.java:867)
   [junit4]    &amp;gt; 	at java.lang.Thread.run(Thread.java:724)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;m going to go ahead and commit &amp;amp; backport the patch since we know it&apos;s needed for the sortMissing docvalues stuff &amp;#8211; but in the meantime, if anyone can help brainstorm possible causes for this slightly new variant that would certainly be helpful&lt;/p&gt;</comment>
                            <comment id="13884377" author="steve_rowe" created="Tue, 28 Jan 2014 18:13:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;m currently bash loop hammering on this patch &#8211; would appreciate it if others could try the same.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I applied the patch to branch_4x and ran 1200 iterations of &lt;tt&gt;ant -Dtests.class=&amp;#42;Cursor&amp;#42; test&lt;/tt&gt; using Apple JVM 1.6.0_65 on OS X Mavericks.  Zero failures.&lt;/p&gt;</comment>
                            <comment id="13884439" author="jira-bot" created="Tue, 28 Jan 2014 19:03:37 +0000"  >&lt;p&gt;Commit 1562155 from hossman@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1562155&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1562155&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5652&quot; title=&quot;Heisenbug in DistribCursorPagingTest: &amp;quot;walk already seen ...&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5652&quot;&gt;&lt;del&gt;SOLR-5652&lt;/del&gt;&lt;/a&gt;: test fixes: add &apos;plain&apos; docvalue field variants to schema, and check codecs for support of missing docValues before trying to sort on them&lt;/p&gt;</comment>
                            <comment id="13884450" author="jira-bot" created="Tue, 28 Jan 2014 19:12:05 +0000"  >&lt;p&gt;Commit 1562160 from hossman@apache.org in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1562160&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1562160&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5652&quot; title=&quot;Heisenbug in DistribCursorPagingTest: &amp;quot;walk already seen ...&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5652&quot;&gt;&lt;del&gt;SOLR-5652&lt;/del&gt;&lt;/a&gt;: test fixes: add &apos;plain&apos; docvalue field variants to schema, and check codecs for support of missing docValues before trying to sort on them (merge r1562155)&lt;/p&gt;</comment>
                            <comment id="13895834" author="steve_rowe" created="Sun, 9 Feb 2014 05:36:15 +0000"  >&lt;p&gt;I&apos;ve attached a log from another failure (trunk, Linux, trial #90), with a complex sort with &lt;tt&gt;str_dv&lt;/tt&gt; as the primary, where the &quot;walk already seen&quot; doc is missing its &lt;tt&gt;str_dv&lt;/tt&gt; value, and the codec is Lucene40.&lt;/p&gt;

&lt;p&gt;Hoss&apos;s &lt;tt&gt;bin_dv&lt;/tt&gt; sort failure was on a doc missing its &lt;tt&gt;bin_dv&lt;/tt&gt; value, and the codec is Lucene42.&lt;/p&gt;

&lt;p&gt;I&apos;m pretty sure both these failures are evidence of another test bug. &lt;/p&gt;

&lt;p&gt;Hoss set up the full walk tests to skip sorting on &lt;tt&gt;dv_first&lt;/tt&gt; and &lt;tt&gt;dv_last&lt;/tt&gt; fields when the codec doesn&apos;t support missing docvalues, but &lt;tt&gt;dv&lt;/tt&gt; fields should not be sorted on in that case either, since they too may have missing values (and in both the above cases, that&apos;s what caused the failures).&lt;/p&gt;

&lt;p&gt;I&apos;ve attached another patch that also skips sorting on &lt;tt&gt;dv&lt;/tt&gt; fields.&lt;/p&gt;</comment>
                            <comment id="13896104" author="steve_rowe" created="Sun, 9 Feb 2014 23:18:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;ve attached another patch that also skips sorting on dv fields.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;On Linux, on trunk with this patch, I ran 1000 trials of &lt;tt&gt;ant -Dtests.class=&amp;#42;Cursor&amp;#42; test&lt;/tt&gt; in a bash loop (well, three concurrent bash loops), and there were no failures.  I&apos;d call this one licked.&lt;/p&gt;</comment>
                            <comment id="13896992" author="jira-bot" created="Mon, 10 Feb 2014 20:55:14 +0000"  >&lt;p&gt;Commit 1566741 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1566741&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1566741&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5652&quot; title=&quot;Heisenbug in DistribCursorPagingTest: &amp;quot;walk already seen ...&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5652&quot;&gt;&lt;del&gt;SOLR-5652&lt;/del&gt;&lt;/a&gt;: in cursor tests, don&apos;t sort on &apos;plain&apos; docvalue fields (i.e., those using standard Lucene sorting for missing values) when the codec doesn&apos;t support missing docvalues.&lt;/p&gt;</comment>
                            <comment id="13896996" author="jira-bot" created="Mon, 10 Feb 2014 20:59:49 +0000"  >&lt;p&gt;Commit 1566742 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1566742&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1566742&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5652&quot; title=&quot;Heisenbug in DistribCursorPagingTest: &amp;quot;walk already seen ...&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5652&quot;&gt;&lt;del&gt;SOLR-5652&lt;/del&gt;&lt;/a&gt;: in cursor tests, don&apos;t sort on &apos;plain&apos; docvalue fields (i.e., those using standard Lucene sorting for missing values) when the codec doesn&apos;t support missing docvalues. (merged trunk r1566741)&lt;/p&gt;</comment>
                            <comment id="13897001" author="steve_rowe" created="Mon, 10 Feb 2014 21:02:22 +0000"  >&lt;p&gt;I committed my patch to also skip sorting on &lt;tt&gt;&amp;#42;_dv&lt;/tt&gt; fields when the codec doesn&apos;t support missing docvalues, to trunk and branch_4x.&lt;/p&gt;

&lt;p&gt;Resolving, as I think we have now addressed all of the missing-docvalues-related failures we&apos;ve seen.&lt;/p&gt;</comment>
                            <comment id="13897030" author="hossman" created="Mon, 10 Feb 2014 21:22:22 +0000"  >&lt;blockquote&gt;&lt;p&gt;I committed my patch to also skip sorting on *_dv fields when the codec doesn&apos;t support missing docvalues, to trunk and branch_4x.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;thanks steve.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Resolving, as I think we have now addressed all of the missing-docvalues-related failures we&apos;ve seen.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I actually want to keep this one open a bit ... give it another week or two, and assuming no more failures i want to dial back on some of the extra logging we added here to be less verbose in the non-failure case.&lt;/p&gt;</comment>
                            <comment id="13897043" author="steve_rowe" created="Mon, 10 Feb 2014 21:29:48 +0000"  >&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Resolving, as I think we have now addressed all of the missing-docvalues-related failures we&apos;ve seen.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I actually want to keep this one open a bit ... give it another week or two, and assuming no more failures i want to dial back on some of the extra logging we added here to be less verbose in the non-failure case.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sure, makes sense.&lt;/p&gt;</comment>
                            <comment id="13902544" author="jira-bot" created="Sat, 15 Feb 2014 21:58:59 +0000"  >&lt;p&gt;Commit 1568690 from hossman@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1568690&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1568690&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5652&quot; title=&quot;Heisenbug in DistribCursorPagingTest: &amp;quot;walk already seen ...&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5652&quot;&gt;&lt;del&gt;SOLR-5652&lt;/del&gt;&lt;/a&gt;: remove doc details logging now that we&apos;ve identified hte original codec problem with the test&lt;/p&gt;</comment>
                            <comment id="13902546" author="jira-bot" created="Sat, 15 Feb 2014 22:06:57 +0000"  >&lt;p&gt;Commit 1568694 from hossman@apache.org in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1568694&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1568694&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5652&quot; title=&quot;Heisenbug in DistribCursorPagingTest: &amp;quot;walk already seen ...&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5652&quot;&gt;&lt;del&gt;SOLR-5652&lt;/del&gt;&lt;/a&gt;: remove doc details logging now that we&apos;ve identified hte original codec problem with the test (merge r1568690)&lt;/p&gt;</comment>
                            <comment id="13902551" author="hossman" created="Sat, 15 Feb 2014 22:26:29 +0000"  >&lt;p&gt;ok ... &lt;b&gt;now&lt;/b&gt; i&apos;m comfortable calling this done.&lt;/p&gt;

&lt;p&gt;thanks everybody who helped figure this out.&lt;/p&gt;</comment>
                            <comment id="13902555" author="thetaphi" created="Sat, 15 Feb 2014 22:35:08 +0000"  >&lt;p&gt;Thanks to you for committing the fix!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12691389">SOLR-5671</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12679856">SOLR-5463</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12624863" name="129.log" size="808697" author="sarowe" created="Thu, 23 Jan 2014 18:31:19 +0000"/>
                            <attachment id="12624996" name="372.log" size="729604" author="sarowe" created="Fri, 24 Jan 2014 06:12:51 +0000"/>
                            <attachment id="12627849" name="SOLR-5652-dont-sort-on-any-dv-fields-when-codec-doesnt-support-missing-dvs.patch" size="1408" author="sarowe" created="Sun, 9 Feb 2014 05:36:15 +0000"/>
                            <attachment id="12625439" name="SOLR-5652.codec.skip.dv.patch" size="6311" author="hossman" created="Mon, 27 Jan 2014 21:09:31 +0000"/>
                            <attachment id="12625476" name="SOLR-5652.nocommit.patch" size="24884" author="hossman" created="Tue, 28 Jan 2014 00:02:20 +0000"/>
                            <attachment id="12625488" name="SOLR-5652.patch" size="24975" author="hossman" created="Tue, 28 Jan 2014 00:52:48 +0000"/>
                            <attachment id="12625613" name="bin_dv.post-patch.log.txt" size="3159003" author="hossman" created="Tue, 28 Jan 2014 18:11:46 +0000"/>
                            <attachment id="12624198" name="jenkins.thetaphi.de_Lucene-Solr-4.x-MacOSX_1200.log.txt" size="1599293" author="hossman" created="Tue, 21 Jan 2014 22:07:53 +0000"/>
                            <attachment id="12624199" name="jenkins.thetaphi.de_Lucene-Solr-4.x-MacOSX_1217.log.txt" size="1196912" author="hossman" created="Tue, 21 Jan 2014 22:07:53 +0000"/>
                            <attachment id="12627848" name="str_dv.post-patch.log.txt" size="6915577" author="sarowe" created="Sun, 9 Feb 2014 05:36:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369033</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 40 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1rlu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369338</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>