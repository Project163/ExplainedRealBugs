<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:26:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-10803] Mark all Trie/LegacyNumeric based fields @deprecated in Solr7</title>
                <link>https://issues.apache.org/jira/browse/SOLR-10803</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;If we want to be able to remove support for legacy numerics from Solr in 8.0, we need to forbid the use of Trie*Field in indices that are created on or after 7.0.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;At a minimum, we can mark them deprecated and plan to remove them in 8.0, so the usual compatibility rules will apply.&lt;/p&gt;

&lt;p&gt;at a later date we can (in theory) provide a conversion tool &amp;#8211; or convert automatically &amp;#8211; to point fields&lt;/p&gt;</description>
                <environment></environment>
        <key id="13076858">SOLR-10803</key>
            <summary>Mark all Trie/LegacyNumeric based fields @deprecated in Solr7</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sarowe">Steven Rowe</assignee>
                                    <reporter username="jpountz">Adrien Grand</reporter>
                        <labels>
                            <label>numeric-tries-to-points</label>
                    </labels>
                <created>Fri, 2 Jun 2017 13:33:50 +0000</created>
                <updated>Sat, 8 Jun 2019 15:21:19 +0000</updated>
                            <resolved>Fri, 4 Aug 2017 23:55:24 +0000</resolved>
                                                    <fixVersion>7.0</fixVersion>
                    <fixVersion>7.1</fixVersion>
                    <fixVersion>8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16034693" author="jpountz" created="Fri, 2 Jun 2017 13:35:51 +0000"  >&lt;p&gt;I put the blocker priority since I think it is a better experience if all 7.x indices can be used with Solr 8, but there is also the possibility of just removing Trie*Field in 8.0 and refusing to open any index that would make use of those fields, even if they were created in 7.x.&lt;/p&gt;</comment>
                            <comment id="16034720" author="thetaphi" created="Fri, 2 Jun 2017 13:54:15 +0000"  >&lt;p&gt;That&apos;s a good idea. Disallow to create new indexes with trie fields. Maybe also similar stuff to prevent FieldCache usage?&lt;/p&gt;</comment>
                            <comment id="16034775" author="jpountz" created="Fri, 2 Jun 2017 14:23:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;Maybe also similar stuff to prevent FieldCache usage?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1 that would be great! Then we could remove FieldCache too in 8.0.&lt;/p&gt;</comment>
                            <comment id="16034822" author="thetaphi" created="Fri, 2 Jun 2017 15:00:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;FieldCache&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;d suggest to also enable DocValues by default for all string/numeric/date fields, unless explicitly disabled. I have seen that Solr 7 allows to merge non-docvalues segments to ones with docvalues using uninverter with a special mergepolicy. IMHO, this merge policy should be the default, just printing a line of information to the logs, so users know that their index segments are updated and this may temporarily require more ram. When using an index created with 7.x  (maybe using the new metadata added by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jpountz&quot; class=&quot;user-hover&quot; rel=&quot;jpountz&quot;&gt;jpountz&lt;/a&gt; recently) and something tries to access FieldCache (e.g. for sorting or facetting or functions), it should fail the query.&lt;/p&gt;

&lt;p&gt;In addition, the merge policy could also be used to convert Trie* to Point* values by first uninverting (if no docvalues on trie) and redindexing the fields during merging... (not sure how to do this, but should work somehow).&lt;/p&gt;</comment>
                            <comment id="16035800" author="hossman" created="Sat, 3 Jun 2017 04:42:48 +0000"  >
&lt;p&gt;Quick side digressions...&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Maybe also similar stuff to prevent FieldCache usage? ... I have seen that Solr 7 allows to merge non-docvalues segments to ones with docvalues using uninverter with a special mergepolicy. ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That feels like a &lt;em&gt;very&lt;/em&gt; orthoginal idea (or 2?) that should really be discussed in their own Jiras since they are broader in scope then just Trie vs Point.  (I&apos;m not familar enough with what would be involved to even create the jira)&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;I&apos;d suggest to also enable DocValues by default for all string/numeric/date fields, unless explicitly disabled.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I like this idea &amp;#8211; but it&apos;s definitely orthoginal to the topic at hand.&lt;/p&gt;

&lt;p&gt;I&apos;ve spun that off into &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10808&quot; title=&quot;Enable DocValues by default for primitive and sorting fields, unless explicitly disabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10808&quot;&gt;&lt;del&gt;SOLR-10808&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;hr /&gt;

&lt;blockquote&gt;&lt;p&gt;I put the blocker priority since I think it is a better experience if all 7.x indices can be used with Solr 8, but there is also the possibility of just removing Trie*Field in 8.0 and refusing to open any index that would make use of those fields, even if they were created in 7.x.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Coincidently, sarowe &amp;amp; cassandra &amp;amp; I were just talking yesterday about our concerns that beyond &quot;known gaps&quot; in terms of Solr features that work with Trie fields but not (yet) Point fields (ex:  &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9989&quot; title=&quot;Add support for PointFields in FacetModule (JSON Facets)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9989&quot;&gt;&lt;del&gt;SOLR-9989&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10503&quot; title=&quot;CurrencyField should be changed from TrieLongField to LongPointField for underlying raw-polyfield&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10503&quot;&gt;&lt;del&gt;SOLR-10503&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9985&quot; title=&quot;LukeRequestHandler doesn&#8217;t populate docFreq for PointFields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9985&quot;&gt;SOLR-9985&lt;/a&gt;, etc...) a larger concern as we move towards 7.0 is that test coverage of PointFields in Solr is currently pretty shallow.  We don&apos;t really have a very good idea of what does/doesn&apos;t work with PointFields, which is disconcerting for pushing them as the &quot;default&quot; (or &quot;recommended&quot;) numeric types in Solr &amp;#8211; let alone forbiding the use of (new) Trie fields as suggested here.&lt;/p&gt;

&lt;p&gt;Which is why I&apos;ve started working on &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10807&quot; title=&quot; Randomize PointFields in all tests unless explicit reason not to&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10807&quot;&gt;&lt;del&gt;SOLR-10807&lt;/del&gt;&lt;/a&gt; &amp;#8211; the current aim is a quick and dirty way to help identify all of the potentially problematic areas as quickly as possible, by forcing every test to use PointFields instead of TrieFields.  See comments in that Jira for details, but the nutshell is: at this point it&apos;s hard to guess how many features/test might fail if we cut over to PointFields &amp;#8211; because a big portion of our tests are using/expecting the &apos;id&apos; field to be numeric, and before we can even get to the meat of the test, using a Point based numeric as the &apos;id&apos; field causes all sorts of problems because they don&apos;t have any &apos;Terms&apos; for updateDocument/deleteDocument&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In addition, the merge policy could also be used to convert Trie* to Point* values by first uninverting (if no docvalues on trie) and redindexing the fields during merging... (not sure how to do this, but should work somehow).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If we think it&apos;s viable to create a MergePolicy (Wrapper) that could convert Trie fields to Point fields, then my straw many suggestion would be that in 7.x we only discourage Trie fields, but not ban them completely &amp;#8211; with some strongly worded warnings that Trie Fields will be completely removed in 8.0, and any index that uses them will require manual upgrade using a special converstion tool.&lt;/p&gt;

&lt;p&gt;As things stand today, even if that MergePolicy/tool doesn&apos;t yet exist when 7.0 comes out, I&apos;d rather say &quot;7.x indexes using Trie fields &lt;b&gt;MAY&lt;/b&gt; require reindexing in 8.0, pending possible development of a tool to upgrade Trie fields to Point fields&quot; then ban Trie fields outright.&lt;/p&gt;

&lt;p&gt;(Hell: As things stand today, even if we were confident it would be &lt;em&gt;impossible&lt;/em&gt; to create such a tool/mergepolicy, I&apos;d still rather say &quot;7.x indexes using Trie fields will &lt;b&gt;REQUIRE&lt;/b&gt; reindexing in 8.0&quot; then to change the default configsets in 7.0 to use Points, let alone ban new Trie fields)&lt;/p&gt;


</comment>
                            <comment id="16069435" author="tomasflobbe" created="Fri, 30 Jun 2017 04:02:56 +0000"  >&lt;blockquote&gt;&lt;p&gt;Maybe also similar stuff to prevent FieldCache usage?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10982&quot; title=&quot;Deprecate FieldCache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10982&quot;&gt;SOLR-10982&lt;/a&gt;. Feel free to comment there.&lt;/p&gt;</comment>
                            <comment id="16078292" author="yseeley@gmail.com" created="Fri, 7 Jul 2017 16:01:48 +0000"  >&lt;p&gt;Seems like &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10760&quot; title=&quot;Remove trie field types and fields from example schemas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10760&quot;&gt;&lt;del&gt;SOLR-10760&lt;/del&gt;&lt;/a&gt; should be sufficient to have people use point fields by default.&lt;/p&gt;</comment>
                            <comment id="16078736" author="hossman" created="Fri, 7 Jul 2017 21:38:52 +0000"  >&lt;blockquote&gt;&lt;p&gt;Seems like &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10760&quot; title=&quot;Remove trie field types and fields from example schemas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10760&quot;&gt;&lt;del&gt;SOLR-10760&lt;/del&gt;&lt;/a&gt; should be sufficient to have people use point fields by default.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That doesn&apos;t address the broader scope of concerns uwe &amp;amp; adrien expressed about what happens to people who already use Trie fields (or add them to collections they create with solr7) when solr8 comes around.&lt;/p&gt;

&lt;p&gt;(Assuming &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10760&quot; title=&quot;Remove trie field types and fields from example schemas&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10760&quot;&gt;&lt;del&gt;SOLR-10760&lt;/del&gt;&lt;/a&gt; makes it into 7.0) Perhaps this issue should be renamed/reclassified as &quot;Mark all Trie/LegacyNumeric based fields &amp;#64;deprecated in Solr7&quot; &amp;#8211; At which point the existing checks in SolrResourceLoader will log a warning and we&apos;ll be free to remove them in solr8&lt;/p&gt;</comment>
                            <comment id="16094008" author="hossman" created="Thu, 20 Jul 2017 00:34:33 +0000"  >&lt;p&gt;since i haven&apos;t seen any objections, i&apos;ve updated the summary/description.&lt;/p&gt;</comment>
                            <comment id="16094019" author="hossman" created="Thu, 20 Jul 2017 00:45:46 +0000"  >&lt;p&gt;we can&apos;t actually do this until we have a non-LegacyIntField/LegacyNumericUtils version of EnumField.  setting &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11023&quot; title=&quot;Need SortedNumerics/Points version of EnumField&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11023&quot;&gt;&lt;del&gt;SOLR-11023&lt;/del&gt;&lt;/a&gt; as a blocker.&lt;/p&gt;</comment>
                            <comment id="16095111" author="hossman" created="Thu, 20 Jul 2017 18:06:45 +0000"  >&lt;p&gt;Bulk editing 27 jiras matching the following JQL query to include the &quot;numeric-tries-to-points label...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;(issue in linkedIssues(SOLR-10807) OR issue in linkedIssues(SOLR-8396) OR issue in linkedIssues(SOLR-9995)) AND project = SOLR AND status != CLOSED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;these 27 jiras can be identified by searching for the comment string &quot;20170720hossbulkeditlabel&quot;&lt;/p&gt;

&lt;p&gt;email notification is being suppressed.&lt;/p&gt;</comment>
                            <comment id="16115130" author="steve_rowe" created="Fri, 4 Aug 2017 23:53:58 +0000"  >&lt;p&gt;Patch deprecating all Trie-related classes.&lt;/p&gt;

&lt;p&gt;Committing shortly.&lt;/p&gt;</comment>
                            <comment id="16115132" author="jira-bot" created="Fri, 4 Aug 2017 23:55:12 +0000"  >&lt;p&gt;Commit 6aeae1c0a87d587cec94622fc582510745db4cec in lucene-solr&apos;s branch refs/heads/branch_7_0 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=6aeae1c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=6aeae1c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10803&quot; title=&quot;Mark all Trie/LegacyNumeric based fields @deprecated in Solr7&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10803&quot;&gt;&lt;del&gt;SOLR-10803&lt;/del&gt;&lt;/a&gt;: Mark all Trie/LegacyNumeric based fields @deprecated in Solr7.&lt;/p&gt;</comment>
                            <comment id="16115133" author="jira-bot" created="Fri, 4 Aug 2017 23:55:15 +0000"  >&lt;p&gt;Commit 0278603e980e00d316e8354230609fc66deb17e0 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=0278603&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=0278603&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10803&quot; title=&quot;Mark all Trie/LegacyNumeric based fields @deprecated in Solr7&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10803&quot;&gt;&lt;del&gt;SOLR-10803&lt;/del&gt;&lt;/a&gt;: Mark all Trie/LegacyNumeric based fields @deprecated in Solr7.&lt;/p&gt;</comment>
                            <comment id="16115134" author="jira-bot" created="Fri, 4 Aug 2017 23:55:17 +0000"  >&lt;p&gt;Commit f962effd128345c60d4f0cbe41e00d5baa5fdbbb in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=f962eff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=f962eff&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10803&quot; title=&quot;Mark all Trie/LegacyNumeric based fields @deprecated in Solr7&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10803&quot;&gt;&lt;del&gt;SOLR-10803&lt;/del&gt;&lt;/a&gt;: Mark all Trie/LegacyNumeric based fields @deprecated in Solr7.&lt;/p&gt;</comment>
                            <comment id="16207462" author="shalinmangar" created="Tue, 17 Oct 2017 11:04:21 +0000"  >&lt;p&gt;Bulk close after 7.1.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13085359">SOLR-11023</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13075295">SOLR-10760</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13077048">SOLR-10807</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13077049">SOLR-10808</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13081222">SOLR-10926</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12880500" name="SOLR-10803.patch" size="12021" author="sarowe" created="Fri, 4 Aug 2017 23:53:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ft6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>