<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:05:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-7508] SolrParams.toMultiMap() does not handle arrays</title>
                <link>https://issues.apache.org/jira/browse/SOLR-7508</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Following JUnit test to show what I mean:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ModifiableSolrParams params = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ModifiableSolrParams();
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] paramValues = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] { &lt;span class=&quot;code-quote&quot;&gt;&quot;title:junit&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;author:john&quot;&lt;/span&gt; };
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; paramName = &lt;span class=&quot;code-quote&quot;&gt;&quot;fq&quot;&lt;/span&gt;;
params.add(paramName, paramValues);
NamedList&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; namedList = params.toNamedList();
assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;parameter values are not equal&quot;&lt;/span&gt;, paramValues, namedList.get(paramName));
Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]&amp;gt; multiMap = SolrParams.toMultiMap(namedList);
assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;Expected &quot;&lt;/span&gt; + paramValues.length + &lt;span class=&quot;code-quote&quot;&gt;&quot; values&quot;&lt;/span&gt;, paramValues.length, multiMap.get(paramName).length);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The first &lt;tt&gt;assertEquals()&lt;/tt&gt; will run fine, while the last one triggers the error. Suddenly the length of the array is &quot;1&quot; and it&apos;s value of &lt;tt&gt;fq&lt;/tt&gt; is like &lt;tt&gt;[Ljava.lang.String;@6f09c9c0&lt;/tt&gt;. Looking into the code I see that the toMultiMap() method does not even look for arrays.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12828005">SOLR-7508</key>
            <summary>SolrParams.toMultiMap() does not handle arrays</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="noble.paul">Noble Paul</assignee>
                                    <reporter username="thosch">Thomas Scheffler</reporter>
                        <labels>
                            <label>easyfix</label>
                            <label>easytest</label>
                    </labels>
                <created>Thu, 7 May 2015 12:38:41 +0000</created>
                <updated>Fri, 15 May 2015 05:54:37 +0000</updated>
                            <resolved>Fri, 15 May 2015 05:54:37 +0000</resolved>
                                    <version>5.0</version>
                    <version>5.1</version>
                                                    <component>SolrJ</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14532566" author="thosch" created="Thu, 7 May 2015 12:57:11 +0000"  >&lt;p&gt;proposed fix:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;SolrParams.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]&amp;gt; toMultiMap(NamedList params) {
    HashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]&amp;gt; map = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&amp;gt;();
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i=0; i&amp;lt;params.size(); i++) {
      &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name = params.getName(i);
      &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; val = params.getVal(i);
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (val &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]){
        MultiMapSolrParams.addParam(name,(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[])val,map);
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
        MultiMapSolrParams.addParam(name,val.toString(),map);
      }
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; map;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14534454" author="noble.paul" created="Fri, 8 May 2015 13:04:11 +0000"  >&lt;p&gt;A patch would be helpful&lt;/p&gt;</comment>
                            <comment id="14541706" author="thosch" created="Wed, 13 May 2015 10:35:27 +0000"  >&lt;p&gt;Provided patch to fix the issue.&lt;/p&gt;</comment>
                            <comment id="14544968" author="jira-bot" created="Fri, 15 May 2015 05:51:31 +0000"  >&lt;p&gt;Commit 1679494 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1679494&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1679494&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7508&quot; title=&quot;SolrParams.toMultiMap() does not handle arrays&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7508&quot;&gt;&lt;del&gt;SOLR-7508&lt;/del&gt;&lt;/a&gt;: SolrParams.toMultiMap() does not handle arrays&lt;/p&gt;</comment>
                            <comment id="14544970" author="jira-bot" created="Fri, 15 May 2015 05:54:27 +0000"  >&lt;p&gt;Commit 1679495 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1679495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1679495&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7508&quot; title=&quot;SolrParams.toMultiMap() does not handle arrays&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7508&quot;&gt;&lt;del&gt;SOLR-7508&lt;/del&gt;&lt;/a&gt;: SolrParams.toMultiMap() does not handle arrays&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12732526" name="SOLRJ-7508.patch" size="792" author="thosch" created="Wed, 13 May 2015 10:35:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 27 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ef5j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>