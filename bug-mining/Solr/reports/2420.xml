<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:03:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-7401] NPE when concurrently creating and deleting collections</title>
                <link>https://issues.apache.org/jira/browse/SOLR-7401</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I&apos;ve hit this when multiple tests run against the same Solr server. Some tests create a collection, do some stuff and then delete it, but there are two tests which create+delete a collection, and then assert it doesn&apos;t exist by searching it (expecting to hit an exception). While I think this isn&apos;t the best way to assert a collection doesn&apos;t exist (I intend to change this assert to use a LIST command), it did surface this concurrency bug.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NullPointerException
	at java.util.ArrayList.addAll(ArrayList.java:577)
	at org.apache.solr.servlet.SolrDispatchFilter.getSlicesForCollections(SolrDispatchFilter.java:731)
	at org.apache.solr.servlet.SolrDispatchFilter.getRemotCoreUrl(SolrDispatchFilter.java:669)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem is that getSlicesForCollections may get a CollectionRef whose collection value may be &lt;tt&gt;null&lt;/tt&gt;, therefore attempting to add &lt;tt&gt;null&lt;/tt&gt; to the list. I reproduced in a test, and fixed the bug.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12821150">SOLR-7401</key>
            <summary>NPE when concurrently creating and deleting collections</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shaie">Shai Erera</assignee>
                                    <reporter username="shaie">Shai Erera</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Apr 2015 13:15:03 +0000</created>
                <updated>Mon, 9 May 2016 18:45:31 +0000</updated>
                            <resolved>Wed, 15 Apr 2015 15:23:44 +0000</resolved>
                                                    <fixVersion>5.2</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14496164" author="shaie" created="Wed, 15 Apr 2015 13:28:22 +0000"  >&lt;p&gt;Patch adds a test and fixes the bug. Without the fix, the test fails pretty consistently.&lt;/p&gt;</comment>
                            <comment id="14496218" author="shalinmangar" created="Wed, 15 Apr 2015 14:12:59 +0000"  >&lt;p&gt;+1 LGTM&lt;/p&gt;</comment>
                            <comment id="14496298" author="jira-bot" created="Wed, 15 Apr 2015 15:05:07 +0000"  >&lt;p&gt;Commit 1673813 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shaie&quot; class=&quot;user-hover&quot; rel=&quot;shaie&quot;&gt;shaie&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1673813&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1673813&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7401&quot; title=&quot;NPE when concurrently creating and deleting collections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7401&quot;&gt;&lt;del&gt;SOLR-7401&lt;/del&gt;&lt;/a&gt;: fixed NPE when concurrently creating and deleting collections&lt;/p&gt;</comment>
                            <comment id="14496325" author="jira-bot" created="Wed, 15 Apr 2015 15:16:26 +0000"  >&lt;p&gt;Commit 1673823 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shaie&quot; class=&quot;user-hover&quot; rel=&quot;shaie&quot;&gt;shaie&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1673823&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1673823&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7401&quot; title=&quot;NPE when concurrently creating and deleting collections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7401&quot;&gt;&lt;del&gt;SOLR-7401&lt;/del&gt;&lt;/a&gt;: fixed NPE when concurrently creating and deleting collections&lt;/p&gt;</comment>
                            <comment id="14496336" author="shaie" created="Wed, 15 Apr 2015 15:23:44 +0000"  >&lt;p&gt;Committed to trunk and 5x.&lt;/p&gt;</comment>
                            <comment id="14496565" author="jira-bot" created="Wed, 15 Apr 2015 17:33:49 +0000"  >&lt;p&gt;Commit 1673888 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shaie&quot; class=&quot;user-hover&quot; rel=&quot;shaie&quot;&gt;shaie&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1673888&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1673888&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7401&quot; title=&quot;NPE when concurrently creating and deleting collections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7401&quot;&gt;&lt;del&gt;SOLR-7401&lt;/del&gt;&lt;/a&gt;: fix copy/paste bug&lt;/p&gt;</comment>
                            <comment id="14496570" author="jira-bot" created="Wed, 15 Apr 2015 17:37:43 +0000"  >&lt;p&gt;Commit 1673890 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shaie&quot; class=&quot;user-hover&quot; rel=&quot;shaie&quot;&gt;shaie&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1673890&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1673890&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7401&quot; title=&quot;NPE when concurrently creating and deleting collections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7401&quot;&gt;&lt;del&gt;SOLR-7401&lt;/del&gt;&lt;/a&gt;: fix copy/paste bug&lt;/p&gt;</comment>
                            <comment id="14586864" author="anshumg" created="Mon, 15 Jun 2015 21:43:37 +0000"  >&lt;p&gt;Bulk close for 5.2.0.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12725570" name="SOLR-7401.patch" size="9022" author="shaie" created="Wed, 15 Apr 2015 13:28:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 23 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2da5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>