<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:23:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-10360] Solr HDFS snapshot export fails due to FileNotFoundException error</title>
                <link>https://issues.apache.org/jira/browse/SOLR-10360</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The Solr snapshot export command (implemented in the snapshotscli.sh) uses Hadoop distcp tool to copy the Solr index files to the desired location. When the cluster is configured with MR1 framework (instead of YARN), this command fails with following error,&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Err:With failures, global counters are inaccurate; consider running with -i
Copy failed: java.io.FileNotFoundException: File does not exist: /user/systest/ /backups/mysnap/copylistings/shard1
	at org.apache.hadoop.hdfs.server.namenode.INodeFile.valueOf(INodeFile.java:66)
	at org.apache.hadoop.hdfs.server.namenode.INodeFile.valueOf(INodeFile.java:56)
	at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getBlockLocationsInt(FSNamesystem.java:2007)
	at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getBlockLocations(FSNamesystem.java:1977)
	at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getBlockLocations(FSNamesystem.java:1890)
	at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.getBlockLocations(NameNodeRpcServer.java:572)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;During investigation I found that an extra space in the distcp command was causing this failure. For example,&lt;/p&gt;

&lt;p&gt;This command fails with the error mentioned above,&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hadoop distcp -f  &apos; /backups/mysnap/copylistings/shard1&apos; /backups/mysnap/snapshot.shard1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Removing the space from the copylisting directory path fixes this issue.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hadoop distcp -f  &apos;/backups/mysnap/copylistings/shard1&apos; /backups/mysnap/snapshot.shard1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;SOLR deployed along with a HADOOP cluster (HDFS +M/R 1).&lt;/p&gt;</environment>
        <key id="13058985">SOLR-10360</key>
            <summary>Solr HDFS snapshot export fails due to FileNotFoundException error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="hgadre">Hrishikesh Gadre</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Mar 2017 18:45:46 +0000</created>
                <updated>Sat, 8 Jun 2019 15:32:36 +0000</updated>
                            <resolved>Wed, 31 May 2017 18:25:32 +0000</resolved>
                                    <version>6.3</version>
                                    <fixVersion>6.7</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15940964" author="githubbot" created="Fri, 24 Mar 2017 19:09:16 +0000"  >&lt;p&gt;GitHub user hgadre opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/173&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/173&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10360&quot; title=&quot;Solr HDFS snapshot export fails due to FileNotFoundException error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10360&quot;&gt;&lt;del&gt;SOLR-10360&lt;/del&gt;&lt;/a&gt; Remove an extra space from Hadoop distcp cmd used by Sol&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;r backup/restore&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/hgadre/lucene-solr&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hgadre/lucene-solr&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10360&quot; title=&quot;Solr HDFS snapshot export fails due to FileNotFoundException error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10360&quot;&gt;&lt;del&gt;SOLR-10360&lt;/del&gt;&lt;/a&gt;_fix&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/173.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/173.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #173&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit ae9c60094e3007e3bac42a222f47c296abf8adae&lt;br/&gt;
Author: Hrishikesh Gadre &amp;lt;hgadre@cloudera.com&amp;gt;&lt;br/&gt;
Date:   2017-03-24T18:47:56Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10360&quot; title=&quot;Solr HDFS snapshot export fails due to FileNotFoundException error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10360&quot;&gt;&lt;del&gt;SOLR-10360&lt;/del&gt;&lt;/a&gt; Remove an extra space from Hadoop distcp cmd used by Solr backup/restore&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16031632" author="jira-bot" created="Wed, 31 May 2017 18:24:27 +0000"  >&lt;p&gt;Commit 872b0dba2d383255ffc020a2b429e395d9817175 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mark.miller%40oblivion.ch&quot; class=&quot;user-hover&quot; rel=&quot;mark.miller@oblivion.ch&quot;&gt;mark.miller@oblivion.ch&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=872b0db&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=872b0db&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10360&quot; title=&quot;Solr HDFS snapshot export fails due to FileNotFoundException error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10360&quot;&gt;&lt;del&gt;SOLR-10360&lt;/del&gt;&lt;/a&gt;: Solr HDFS snapshot export fails due to FileNotFoundException error when using MR1 instead of yarn.&lt;/p&gt;

&lt;p&gt;This closes #173&lt;/p&gt;</comment>
                            <comment id="16031635" author="jira-bot" created="Wed, 31 May 2017 18:24:59 +0000"  >&lt;p&gt;Commit 499291a94f7a92fd01459274e8104b5fd038c100 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mark.miller%40oblivion.ch&quot; class=&quot;user-hover&quot; rel=&quot;mark.miller@oblivion.ch&quot;&gt;mark.miller@oblivion.ch&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=499291a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=499291a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10360&quot; title=&quot;Solr HDFS snapshot export fails due to FileNotFoundException error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10360&quot;&gt;&lt;del&gt;SOLR-10360&lt;/del&gt;&lt;/a&gt;: Solr HDFS snapshot export fails due to FileNotFoundException error when using MR1 instead of yarn.&lt;/p&gt;

&lt;p&gt;This closes #173&lt;/p&gt;</comment>
                            <comment id="16031637" author="markrmiller@gmail.com" created="Wed, 31 May 2017 18:25:32 +0000"  >&lt;p&gt;Thanks Hrishikesh!&lt;/p&gt;</comment>
                            <comment id="16031638" author="githubbot" created="Wed, 31 May 2017 18:26:00 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/173&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/173&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3crkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>