<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:43:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-14226] SolrStream reports AuthN/AuthZ failures (401|403) as IOException w/o details</title>
                <link>https://issues.apache.org/jira/browse/SOLR-14226</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;If you try to use the SolrJ &lt;tt&gt;SolrStream&lt;/tt&gt; class to making a streaming expression request to a solr node, any authentication or authorization failures will be swallowed and a eneric &quot;IOException&quot; will be thrown.&lt;/p&gt;

&lt;p&gt;(evidently due to a pars error trying to read the body of the response w/o consulting the HTTP status?)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13282030">SOLR-14226</key>
            <summary>SolrStream reports AuthN/AuthZ failures (401|403) as IOException w/o details</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Jan 2020 18:36:16 +0000</created>
                <updated>Wed, 27 May 2020 18:04:28 +0000</updated>
                                                                            <component>SolrJ</component>
                    <component>streaming expressions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17025365" author="hossman" created="Tue, 28 Jan 2020 18:38:00 +0000"  >&lt;p&gt;From a test i&apos;m in the process of trying to write...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testEchoStreamFail() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; SolrStream solrStream = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SolrStream(solrUrl,
                                                 params(&lt;span class=&quot;code-quote&quot;&gt;&quot;qt&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;/stream&quot;&lt;/span&gt;, 
                                                        &lt;span class=&quot;code-quote&quot;&gt;&quot;expr&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;echo(hello world)&quot;&lt;/span&gt;));
    solrStream.setCredentials(&lt;span class=&quot;code-quote&quot;&gt;&quot;bogus_user&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;bogus_pass&quot;&lt;/span&gt;);
    SolrException e = expectThrows(SolrException.class, () -&amp;gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; List&amp;lt;Tuple&amp;gt; ignored = getTuples(solrStream);
      });
    assertEquals(401, e.code());
  }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]    &amp;gt; Throwable #1: junit.framework.AssertionFailedError: Unexpected exception type, expected SolrException but got java.io.IOException: --&amp;gt; http://127.0.0.1:35337/solr/collection_x: An exception has occurred on the server, refer to server log for details.
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([F7287DED4A9F66CA:B866576F16986894]:0)
   [junit4]    &amp;gt; 	at org.apache.lucene.util.LuceneTestCase.expectThrows(LuceneTestCase.java:2752)
   [junit4]    &amp;gt; 	at org.apache.lucene.util.LuceneTestCase.expectThrows(LuceneTestCase.java:2740)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.io.stream.CloudAuthStreamTest.testEchoStreamFail(CloudAuthStreamTest.java:208)
   [junit4]    &amp;gt; 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
   [junit4]    &amp;gt; 	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
   [junit4]    &amp;gt; 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
   [junit4]    &amp;gt; 	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
   [junit4]    &amp;gt; 	at java.base/java.lang.Thread.run(Thread.java:834)
   [junit4]    &amp;gt; Caused by: java.io.IOException: --&amp;gt; http://127.0.0.1:35337/solr/collection_x: An exception has occurred on the server, refer to server log for details.
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.io.stream.SolrStream.read(SolrStream.java:232)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.io.stream.CloudAuthStreamTest.getTuples(CloudAuthStreamTest.java:221)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.io.stream.CloudAuthStreamTest.lambda$testEchoStreamFail$3(CloudAuthStreamTest.java:209)
   [junit4]    &amp;gt; 	at org.apache.lucene.util.LuceneTestCase._expectThrows(LuceneTestCase.java:2870)
   [junit4]    &amp;gt; 	at org.apache.lucene.util.LuceneTestCase.expectThrows(LuceneTestCase.java:2745)
   [junit4]    &amp;gt; 	... 41 more
   [junit4]    &amp;gt; Caused by: org.noggit.JSONParser$ParseException: JSON Parse Error: char=&amp;lt;,position=0 AFTER=&apos;&amp;lt;&apos; BEFORE=&apos;html&amp;gt; &amp;lt;head&amp;gt; &amp;lt;meta http-equiv=&quot;Content-&apos;
   [junit4]    &amp;gt; 	at org.noggit.JSONParser.err(JSONParser.java:452)
   [junit4]    &amp;gt; 	at org.noggit.JSONParser.handleNonDoubleQuoteString(JSONParser.java:819)
   [junit4]    &amp;gt; 	at org.noggit.JSONParser.next(JSONParser.java:1026)
   [junit4]    &amp;gt; 	at org.noggit.JSONParser.nextEvent(JSONParser.java:1073)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.io.stream.JSONTupleStream.expect(JSONTupleStream.java:98)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.io.stream.JSONTupleStream.advanceToDocs(JSONTupleStream.java:180)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.io.stream.JSONTupleStream.next(JSONTupleStream.java:78)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.io.stream.SolrStream.read(SolrStream.java:201)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17026831" author="jira-bot" created="Thu, 30 Jan 2020 17:03:59 +0000"  >&lt;p&gt;Commit 517438e356d272565ee0e33e08d0ec58f8f6cd39 in lucene-solr&apos;s branch refs/heads/master from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=517438e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=517438e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;New /stream test cases showing authn+authz edge cases in cloud mode&lt;/p&gt;

&lt;p&gt;This triggers various places in the Streaming Expressions code that use background threads&lt;br/&gt;
to confirm that the expected credentails (or lack of) are propogarded along.&lt;/p&gt;

&lt;p&gt;Test currently has comments + workarounds for 2 known client issues:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14226&quot; title=&quot;SolrStream reports AuthN/AuthZ failures (401|403) as IOException w/o details&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14226&quot;&gt;SOLR-14226&lt;/a&gt;: SolrStream reports AuthN/AuthZ failures (401|403) as IOException w/o details&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14222&quot; title=&quot;CloudSolrClient converts (update) 403 error to 500 error &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14222&quot;&gt;&lt;del&gt;SOLR-14222&lt;/del&gt;&lt;/a&gt;: CloudSolrClient converts (update) 403 error to 500 error&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17026880" author="jira-bot" created="Thu, 30 Jan 2020 17:45:42 +0000"  >&lt;p&gt;Commit b2d8b784a305ab06199b1e6c2ebea2025c4863eb in lucene-solr&apos;s branch refs/heads/branch_8x from Chris M. Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=b2d8b78&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=b2d8b78&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;New /stream test cases showing authn+authz edge cases in cloud mode&lt;/p&gt;

&lt;p&gt;This triggers various places in the Streaming Expressions code that use background threads&lt;br/&gt;
to confirm that the expected credentails (or lack of) are propogarded along.&lt;/p&gt;

&lt;p&gt;Test currently has comments + workarounds for 2 known client issues:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14226&quot; title=&quot;SolrStream reports AuthN/AuthZ failures (401|403) as IOException w/o details&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14226&quot;&gt;SOLR-14226&lt;/a&gt;: SolrStream reports AuthN/AuthZ failures (401|403) as IOException w/o details&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14222&quot; title=&quot;CloudSolrClient converts (update) 403 error to 500 error &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14222&quot;&gt;&lt;del&gt;SOLR-14222&lt;/del&gt;&lt;/a&gt;: CloudSolrClient converts (update) 403 error to 500 error&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;(cherry picked from commit 517438e356d272565ee0e33e08d0ec58f8f6cd39)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0axyo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>