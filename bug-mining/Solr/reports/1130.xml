<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:32:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4117] IO error while trying to get the size of the Directory</title>
                <link>https://issues.apache.org/jira/browse/SOLR-4117</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4032&quot; title=&quot;Files larger than an internal buffer size fail to replicate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4032&quot;&gt;&lt;del&gt;SOLR-4032&lt;/del&gt;&lt;/a&gt; fixed we see other issues when randomly taking down nodes (nicely via tomcat restart) while indexing a few million web pages from Hadoop. We do make sure that at least one node is up for a shard but due to recovery issues it may not be live.&lt;/p&gt;

&lt;p&gt;One node seems to work but generates IO errors in the log and ZookeeperExeption in the GUI. In the GUI we only see:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SolrCore Initialization Failures

    openindex_f: org.apache.solr.common.cloud.ZooKeeperException:org.apache.solr.common.cloud.ZooKeeperException: 

Please check your logs &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; more information
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and in the log we only see the following exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2012-11-28 11:47:26,652 ERROR [solr.handler.ReplicationHandler] - [http-8080-exec-28] - : IO error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; trying to get the size of the Directory:org.apache.lucene.store.NoSuchDirectoryException: directory &lt;span class=&quot;code-quote&quot;&gt;&apos;/opt/solr/cores/shard_f/data/index&apos;&lt;/span&gt; does not exist
        at org.apache.lucene.store.FSDirectory.listAll(FSDirectory.java:217)
        at org.apache.lucene.store.FSDirectory.listAll(FSDirectory.java:240)
        at org.apache.lucene.store.NRTCachingDirectory.listAll(NRTCachingDirectory.java:132)
        at org.apache.solr.core.DirectoryFactory.sizeOfDirectory(DirectoryFactory.java:146)
        at org.apache.solr.handler.ReplicationHandler.getIndexSize(ReplicationHandler.java:472)
        at org.apache.solr.handler.ReplicationHandler.getReplicationDetails(ReplicationHandler.java:568)
        at org.apache.solr.handler.ReplicationHandler.handleRequestBody(ReplicationHandler.java:213)
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:144)
        at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.handleRequest(RequestHandlers.java:240)
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1830)
        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:476)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:276)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:889)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:744)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:2274)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;5.0.0.2012.11.28.10.42.06&lt;br/&gt;
Debian Squeeze, Tomcat 6, Sun Java 6, 10 nodes, 10 shards, rep. factor 2.&lt;/p&gt;</environment>
        <key id="12617967">SOLR-4117</key>
            <summary>IO error while trying to get the size of the Directory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="markus17">Markus Jelsma</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Nov 2012 11:49:32 +0000</created>
                <updated>Mon, 9 May 2016 18:51:45 +0000</updated>
                            <resolved>Mon, 10 Dec 2012 23:56:41 +0000</resolved>
                                    <version>6.0</version>
                                    <fixVersion>4.1</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13505391" author="markus17" created="Wed, 28 Nov 2012 12:12:18 +0000"  >&lt;p&gt;This issue is the same as reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4032&quot; title=&quot;Files larger than an internal buffer size fail to replicate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4032&quot;&gt;&lt;del&gt;SOLR-4032&lt;/del&gt;&lt;/a&gt;. It does not resolve itself, as it did before in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4032&quot; title=&quot;Files larger than an internal buffer size fail to replicate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4032&quot;&gt;&lt;del&gt;SOLR-4032&lt;/del&gt;&lt;/a&gt;, when reloading a core or restarting the servlet container. The Zookeeper exception in the GUI is gone after restart so it&apos;s likely not related.&lt;/p&gt;

&lt;p&gt;edit: the index.properties file in both cores point to the correct index.LARGE_NUMBER directory but NRTDir tries ./data/index regardless.&lt;/p&gt;</comment>
                            <comment id="13505507" author="markus17" created="Wed, 28 Nov 2012 14:51:56 +0000"  >&lt;p&gt;I have another node now logging the same exception for a core that has 0 docs which is not the leader but clusterstate says the node is active and does not attempt recovery. To my surprise it has two index.NUMBER directories of different sizes and index.properties points to the largest directory.&lt;/p&gt;

&lt;p&gt;The node won&apos;t come back up properly. Search and indexing works but accessing the GUI is impossible:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2012-11-28 14:50:00,026 ERROR [solr.servlet.SolrDispatchFilter] - [http-8080-exec-6] - : &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;:org.apache.solr.common.SolrException: Error handling &lt;span class=&quot;code-quote&quot;&gt;&apos;status&apos;&lt;/span&gt; action 
        at org.apache.solr.handler.admin.CoreAdminHandler.handleStatusAction(CoreAdminHandler.java:724)
        at org.apache.solr.handler.admin.CoreAdminHandler.handleRequestBody(CoreAdminHandler.java:157)
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:144)
        at org.apache.solr.servlet.SolrDispatchFilter.handleAdminRequest(SolrDispatchFilter.java:372)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:181)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:889)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:744)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:2274)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)
Caused by: org.apache.solr.common.SolrException: java.util.concurrent.RejectedExecutionException
        at org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:1674)
        at org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:1330)
        at org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:1265)
        at org.apache.solr.handler.admin.CoreAdminHandler.getCoreStatus(CoreAdminHandler.java:996)
        at org.apache.solr.handler.admin.CoreAdminHandler.handleStatusAction(CoreAdminHandler.java:710)
        ... 18 more
Caused by: java.util.concurrent.RejectedExecutionException
        at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:1768)
        at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:767)
        at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:658)
        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:92)
        at java.util.concurrent.Executors$DelegatedExecutorService.submit(Executors.java:603)
        at org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:1605)
        ... 22 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="13505530" author="eksdev" created="Wed, 28 Nov 2012 15:19:14 +0000"  >&lt;p&gt;fwiw, we &lt;b&gt;think&lt;/b&gt; we observed the following problem in simple master slave setup with NRTCachingDirectory... I am not sure it has something to do with issue, because ewe did not see this exception, anyhow   &lt;/p&gt;

&lt;p&gt;on replication, slave gets the index from master and works fine, then on:&lt;br/&gt;
1. graceful restart, the world looks fine &lt;br/&gt;
2. kill -9 or such, solr does not start because an index gets corrupt (should actually not happen)&lt;/p&gt;

&lt;p&gt;We speculate that solr now does replication directly to Directory implementation and does not ensure that replicated files get fsck-ed completely after replication. As far as I remember, replication was going to /temp (disk) and than moving files if all went ok. Working under assumption that everything is already persisted. Maybe this invariant does not hold any more and some explicit fsck is needed for caching directories? &lt;/p&gt;

&lt;p&gt;I might be completely wrong, we just observed symptoms in not really debug-friendly environment&lt;/p&gt;

&lt;p&gt;Here Exception after  &quot;hard&quot; restart:&lt;/p&gt;

&lt;p&gt;Caused by: org.apache.solr.common.SolrException: Error opening new searcher&lt;br/&gt;
   at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:804)&lt;br/&gt;
   at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:618)&lt;br/&gt;
   at org.apache.solr.core.CoreContainer.createFromLocal(CoreContainer.java:973)&lt;br/&gt;
   at org.apache.solr.core.CoreContainer.create(CoreContainer.java:1003)&lt;br/&gt;
   ... 10 more&lt;br/&gt;
Caused by: org.apache.solr.common.SolrException: Error opening new searcher&lt;br/&gt;
   at org.apache.solr.core.SolrCore.openNewSearcher(SolrCore.java:1441)&lt;br/&gt;
   at org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:1553)&lt;br/&gt;
   at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:779)&lt;br/&gt;
   ... 13 more&lt;br/&gt;
Caused by: java.io.FileNotFoundException: ...\core0\data\index\segments_1 (The system cannot find the file specified)&lt;br/&gt;
   at java.io.RandomAccessFile.open(Native Method)&lt;br/&gt;
   at java.io.RandomAccessFile.&amp;lt;init&amp;gt;(RandomAccessFile.java:233)&lt;br/&gt;
   at org.apache.lucene.store.MMapDirectory.openInput(MMapDirectory.java:222)&lt;br/&gt;
   at org.apache.lucene.store.NRTCachingDirectory.openInput(NRTCachingDirectory.java:232)&lt;br/&gt;
   at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:281)&lt;br/&gt;
   at org.apache.lucene.index.StandardDirectoryReader$1.doBody(StandardDirectoryReader.java:56)&lt;br/&gt;
   at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:668)&lt;br/&gt;
   at org.apache.lucene.index.StandardDirectoryReader.open(StandardDirectoryReader.java:52)&lt;br/&gt;
   at org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:87)&lt;br/&gt;
   at org.apache.solr.core.StandardIndexReaderFactory.newReader(StandardIndexReaderFactory.java:34)&lt;br/&gt;
   at org.apache.solr.search.SolrIndexSearcher.&amp;lt;init&amp;gt;(SolrIndexSearcher.java:120)&lt;br/&gt;
   at org.apache.solr.core.SolrCore.openNewSearcher(SolrCore.java:1417)&lt;br/&gt;
....&lt;/p&gt;
</comment>
                            <comment id="13505542" author="markrmiller@gmail.com" created="Wed, 28 Nov 2012 15:29:35 +0000"  >&lt;p&gt;Do you mean fsync rather than fsck (isnt that a file system check?)&lt;/p&gt;

&lt;p&gt;That did change in that we are now using the Directory&apos;s sync method - but it &lt;b&gt;should&lt;/b&gt; still work the same as before...&lt;/p&gt;

&lt;p&gt;2 should not happen though - so we should dig in. I&apos;m guessing it&apos;s not related to this issue, but we will see.&lt;/p&gt;</comment>
                            <comment id="13505555" author="eksdev" created="Wed, 28 Nov 2012 15:36:15 +0000"  >&lt;p&gt;fsync of course, fsck was intended for my terminal window &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                            <comment id="13505581" author="markrmiller@gmail.com" created="Wed, 28 Nov 2012 15:53:35 +0000"  >&lt;p&gt;Markus, I&apos;m about to commit a fix to this issue - but I doubt it&apos;s the same as the issue you then mention in a comment.&lt;/p&gt;</comment>
                            <comment id="13505584" author="commit-tag-bot" created="Wed, 28 Nov 2012 15:56:13 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; Mark Robert Miller&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1414773&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1414773&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4117&quot; title=&quot;IO error while trying to get the size of the Directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4117&quot;&gt;&lt;del&gt;SOLR-4117&lt;/del&gt;&lt;/a&gt;: Retrieving the size of the index may use the wrong index dir if you are replicating.&lt;/p&gt;
</comment>
                            <comment id="13505594" author="commit-tag-bot" created="Wed, 28 Nov 2012 16:02:12 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Mark Robert Miller&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1414774&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1414774&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4117&quot; title=&quot;IO error while trying to get the size of the Directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4117&quot;&gt;&lt;del&gt;SOLR-4117&lt;/del&gt;&lt;/a&gt;: Retrieving the size of the index may use the wrong index dir if you are replicating.&lt;/p&gt;
</comment>
                            <comment id="13505600" author="markus17" created="Wed, 28 Nov 2012 16:07:45 +0000"  >&lt;p&gt;Likely indeed. I&apos;ll check on this issue tomorrow and try to reproduce the other one, will open new issue if i can.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13508735" author="markus17" created="Mon, 3 Dec 2012 13:50:13 +0000"  >&lt;p&gt;For some reason we&apos;re seeing this again on a node with today&apos;s trunk check out:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2012-12-03 13:46:46,300 ERROR [handler.admin.CoreAdminHandler] - [http-8080-exec-10] - : IO error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; trying to get the size of the Directory:org.apache.lucene.store.NoSuchDirectoryException: directory &lt;span class=&quot;code-quote&quot;&gt;&apos;/opt/solr/cores/core_b/data/index&apos;&lt;/span&gt; does not exist
        at org.apache.lucene.store.FSDirectory.listAll(FSDirectory.java:217)
        at org.apache.lucene.store.FSDirectory.listAll(FSDirectory.java:240)
        at org.apache.lucene.store.NRTCachingDirectory.listAll(NRTCachingDirectory.java:132)
        at org.apache.solr.core.DirectoryFactory.sizeOfDirectory(DirectoryFactory.java:146)
        at org.apache.solr.handler.admin.CoreAdminHandler.getIndexSize(CoreAdminHandler.java:1020)
        at org.apache.solr.handler.admin.CoreAdminHandler.getCoreStatus(CoreAdminHandler.java:1000)
        at org.apache.solr.handler.admin.CoreAdminHandler.handleStatusAction(CoreAdminHandler.java:711)
        at org.apache.solr.handler.admin.CoreAdminHandler.handleRequestBody(CoreAdminHandler.java:158)
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:144)
        at org.apache.solr.servlet.SolrDispatchFilter.handleAdminRequest(SolrDispatchFilter.java:372)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:181)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:889)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:744)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:2274)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13527194" author="markrmiller@gmail.com" created="Sat, 8 Dec 2012 17:01:17 +0000"  >&lt;p&gt;Thanks Markus - another race around updating to the new index and looking for the size of the index. I&apos;ll fix this.&lt;/p&gt;</comment>
                            <comment id="13527214" author="markrmiller@gmail.com" created="Sat, 8 Dec 2012 17:57:03 +0000"  >&lt;p&gt;Here is a patch that does 2 things:&lt;/p&gt;

&lt;p&gt;If we find the directory and see a file listed, but then get a file not found trying to access it (it was removed out from under us), just return a 0 size&lt;/p&gt;

&lt;p&gt;Also, if we can&apos;t find the directory at all, try using the newIndexDir.&lt;/p&gt;</comment>
                            <comment id="13527221" author="commit-tag-bot" created="Sat, 8 Dec 2012 18:20:08 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; Mark Robert Miller&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1418725&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1418725&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4117&quot; title=&quot;IO error while trying to get the size of the Directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4117&quot;&gt;&lt;del&gt;SOLR-4117&lt;/del&gt;&lt;/a&gt;: harden size of directory code&lt;/p&gt;
</comment>
                            <comment id="13527222" author="elyograg" created="Sat, 8 Dec 2012 18:28:38 +0000"  >&lt;p&gt;Mark, it seems like this is also likely to resolve &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4135&quot; title=&quot;java.lang.IllegalArgumentException when getting index size in replication handler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4135&quot;&gt;&lt;del&gt;SOLR-4135&lt;/del&gt;&lt;/a&gt;.  Can you look into that?&lt;/p&gt;

&lt;p&gt;I was seeing another issue in my log that Yonik thought might be tied to the disappearing file issue.  If I continue to get that after this patch, I will open another issue.&lt;/p&gt;</comment>
                            <comment id="13530636" author="hossman" created="Thu, 13 Dec 2012 03:22:46 +0000"  >&lt;p&gt;I think all of the changes in r1418725 got merged to 4x as part of r1420992...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1420992&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1420992&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(or in any event: attempting to merge r1418725 into 4x as of r1421071 is a No-Op)&lt;/p&gt;</comment>
                            <comment id="13610492" author="commit-tag-bot" created="Fri, 22 Mar 2013 16:13:16 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Mark Robert Miller&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1414774&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1414774&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4117&quot; title=&quot;IO error while trying to get the size of the Directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4117&quot;&gt;&lt;del&gt;SOLR-4117&lt;/del&gt;&lt;/a&gt;: Retrieving the size of the index may use the wrong index dir if you are replicating.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                            <outwardlinks description="contains">
                                        <issuelink>
            <issuekey id="12618445">SOLR-4135</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12614766">SOLR-4032</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12614767">SOLR-4033</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12618445">SOLR-4135</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12617965">SOLR-4116</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12560038" name="SOLR-4117.patch" size="1509" author="markrmiller@gmail.com" created="Sat, 8 Dec 2012 17:57:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292565</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 35 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0s933:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>162948</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>