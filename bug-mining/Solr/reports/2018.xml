<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:55:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6294] The JsonLoader should accept a single doc without wrapping in an array</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6294</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;This is the multi document input command&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;curl http://localhost:8983/solr/update/json -H &apos;Content-type:application/json&apos; -d &apos;
[
 {&quot;id&quot; : &quot;TestDoc1&quot;, &quot;title&quot; : &quot;test1&quot;},
]&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The following also should be a valid update command for a single doc&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;curl http://localhost:8983/solr/update/json -H &apos;Content-type:application/json&apos; -d &apos;
 {&quot;id&quot; : &quot;TestDoc1&quot;, &quot;title&quot; : &quot;test1&quot;},
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12730468">SOLR-6294</key>
            <summary>The JsonLoader should accept a single doc without wrapping in an array</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="noble.paul">Noble Paul</assignee>
                                    <reporter username="noble.paul">Noble Paul</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Jul 2014 12:24:11 +0000</created>
                <updated>Thu, 21 Nov 2019 00:42:10 +0000</updated>
                            <resolved>Sat, 2 Aug 2014 19:10:04 +0000</resolved>
                                                                    <component>update</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                                                            <comments>
                            <comment id="14077837" author="hossman" created="Tue, 29 Jul 2014 15:38:14 +0000"  >&lt;p&gt;that would make a sending a single json object ambiguous: does it represent a solr document to add, or does it represent a set of update commands?&lt;/p&gt;

&lt;p&gt;is this a single document containing 1 boolean field, or is this a command to do a commit?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{ &lt;span class=&quot;code-quote&quot;&gt;&quot;commit&quot;&lt;/span&gt;:&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14077851" author="noble.paul" created="Tue, 29 Jul 2014 15:45:34 +0000"  >&lt;p&gt;There are 2 options here&lt;/p&gt;

&lt;p&gt;pass an extra request param like single=true (or something else)&lt;br/&gt;
or&lt;br/&gt;
just read the first key and check if they are one of &quot;add&quot;, &quot;commit&quot;, &quot;delete&quot;, &quot;optimize&quot; . If not it is a single doc&lt;/p&gt;

</comment>
                            <comment id="14077864" author="hossman" created="Tue, 29 Jul 2014 15:51:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;pass an extra request param like single=true (or something else)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+0&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;just read the first key and check if they are one of &quot;add&quot;, &quot;commit&quot;, &quot;delete&quot;, &quot;optimize&quot; . If not it is a single doc&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;-1 ... that&apos;s a time bomb waiting to go off for any user who might someday have a doc with &quot;add&quot; as a fieldname, or for any use who might have &lt;em&gt;any&lt;/em&gt; field name in their doc that we might later introduce as a new command name.&lt;/p&gt;</comment>
                            <comment id="14078086" author="yseeley@gmail.com" created="Tue, 29 Jul 2014 18:05:54 +0000"  >&lt;p&gt;For more history see &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2496&quot; title=&quot;JSON Update Handler doesn&amp;#39;t handle multiple docs properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2496&quot;&gt;&lt;del&gt;SOLR-2496&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;pass an extra request param like single=true (or something else)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Is that really easier than putting the doc in an array?&lt;/p&gt;</comment>
                            <comment id="14078093" author="hossman" created="Tue, 29 Jul 2014 18:08:30 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is that really easier than putting the doc in an array?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I guess it would at least be something you could configure as a handler default, for when you want to setup a handler that can take either a single document or a list of documents, but not arbitrary commands.&lt;/p&gt;</comment>
                            <comment id="14078097" author="noble.paul" created="Tue, 29 Jul 2014 18:12:12 +0000"  >&lt;p&gt;It&apos;s not a big deal if you control how the json is created. Imagine someone piping the output of another program to solr .in that case user will have to do some coding to put those square brackets at the beginning and end&lt;/p&gt;</comment>
                            <comment id="14078137" author="thelabdude" created="Tue, 29 Jul 2014 18:32:08 +0000"  >&lt;p&gt;Maybe we just leave it as-is (require the wrapping [ ]) and improve the error message as right now, this is what you get back from Solr when you add a single JSON document:&lt;/p&gt;

&lt;p&gt;curl &lt;a href=&quot;http://localhost:8983/solr/gettingstarted/update?commit=true&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/gettingstarted/update?commit=true&lt;/a&gt; -X POST -H &apos;Content-Type: application/json&apos; \&lt;br/&gt;
 -d &apos;{&lt;br/&gt;
&quot;id&quot;:&quot;foo&quot;,&lt;br/&gt;
&quot;POST_ID&quot;:&quot;354-20160&quot;,&lt;br/&gt;
...&lt;br/&gt;
}&apos;&lt;/p&gt;

&lt;p&gt;{&quot;responseHeader&quot;:&lt;/p&gt;
{&quot;status&quot;:400,&quot;QTime&quot;:0}
&lt;p&gt;,&quot;error&quot;:{&quot;msg&quot;:&quot;Unknown command: id &lt;span class=&quot;error&quot;&gt;&amp;#91;6&amp;#93;&lt;/span&gt;&quot;,&quot;code&quot;:400}}&lt;/p&gt;

&lt;p&gt;So at the very least, we need to give the user an idea of how to move forward w/o having to post to the mailing list or search the docs.&lt;/p&gt;</comment>
                            <comment id="14078154" author="gsingers" created="Tue, 29 Jul 2014 18:43:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is that really easier than putting the doc in an array?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If you&apos;re data already is written out in JSON and you just want to get started by throwing it into Solr in your first few minutes of trying it out, it could be.  Just one more thing to have to deal with, I guess, but obviously not a show stopper by any stretch.&lt;/p&gt;</comment>
                            <comment id="14078157" author="steve_rowe" created="Tue, 29 Jul 2014 18:49:05 +0000"  >&lt;p&gt;&quot;add&quot;, &quot;commit&quot; and &quot;optimize&quot; expect as their value an array of objects or an object.&lt;/p&gt;

&lt;p&gt;&quot;delete&quot; can take a scalar id, or an array of id scalars, or an object with a query or &quot;id&quot;+id scalar and optional params (whew).&lt;/p&gt;

&lt;p&gt;&quot;rollback&quot; takes no value (I think this may be a parsing bug - does JSON accept a value-less key?)&lt;/p&gt;

&lt;p&gt;By contrast, a document (with the exception of nested docs) will always have flat &quot;key&quot;:scalar or &quot;key&quot;:array-of-scalar structure. &lt;/p&gt;

&lt;p&gt;So with the exception of &quot;delete&quot;, I think it should possible to detect commands versus fields based exclusively on value types.  Maybe just have a documented exception that &quot;delete&quot; field names are disallowed in single document mode?&lt;/p&gt;</comment>
                            <comment id="14078168" author="yseeley@gmail.com" created="Tue, 29 Jul 2014 18:59:22 +0000"  >&lt;blockquote&gt;&lt;p&gt;&quot;add&quot;, &quot;commit&quot; and &quot;optimize&quot; expect as their value an array of objects or an object. &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt; By contrast, a document (with the exception of nested docs) will always have flat &quot;key&quot;:scalar or &quot;key&quot;:array-of-scalar structure.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not a doc with partial/atomic updates.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&quot;rollback&quot; takes no value (I think this may be a parsing bug - does JSON accept a value-less key?)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No, it&apos;s not valid JSON.  Are you sure it&apos;s currently accepted?&lt;/p&gt;</comment>
                            <comment id="14078170" author="hossman" created="Tue, 29 Jul 2014 19:00:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;By contrast, a document (with the exception of nested docs) will always have flat ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;...the exception that complicates the rule.&lt;/p&gt;

&lt;p&gt;Hueristics would just lead us down a rabbit hole of complexity with no good way out.  &lt;/p&gt;

&lt;p&gt;the idea of a &quot;json.command&quot; (or something like that) request param seems like it solves all of the suggested usecases.  &lt;/p&gt;

&lt;p&gt;we can always add an &quot;/update/json/single&quot; or something to the sample configs if people find even that burdensome ... we can also change the default value of the new request param (and thus, the default behavior) in 5.0 so that by default we assume everything is a doc, and you have to send &quot;json.command=true&quot; if you want your top level braces to be interpreted as starting a set of commands.&lt;/p&gt;</comment>
                            <comment id="14078190" author="noble.paul" created="Tue, 29 Jul 2014 19:11:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;we can always add an &quot;/update/json/single&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;or /update/json/doc Yes, I was about to suggest this .This is a better idea. And I should be able to keep pumping docs after docs in a single stream&lt;/p&gt;

&lt;p&gt;The point is,  I rarely find json embedded in square brackets in the wild . And it is burdensome for users to edit large json to add square brackets in the beginning and end&lt;/p&gt;</comment>
                            <comment id="14078206" author="steve_rowe" created="Tue, 29 Jul 2014 19:19:04 +0000"  >&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&quot;rollback&quot; takes no value (I think this may be a parsing bug - does JSON accept a value-less key?)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No, it&apos;s not valid JSON. Are you sure it&apos;s currently accepted?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m wrong, I misread the source - actually &quot;rollback&quot; requires its value to be an empty object (&lt;tt&gt;JsonLoader.parseRollback()&lt;/tt&gt;).&lt;/p&gt;</comment>
                            <comment id="14078207" author="yseeley@gmail.com" created="Tue, 29 Jul 2014 19:20:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;The point is, I rarely find json embedded in square brackets in the wild &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t think anyone is disagreeing about that (in the absence of other concerns).  The question is what to do about it.&lt;/p&gt;

&lt;p&gt;Maybe we should think about adding a new REST endpoint via restlet?&lt;/p&gt;</comment>
                            <comment id="14078217" author="noble.paul" created="Tue, 29 Jul 2014 19:23:57 +0000"  >&lt;p&gt;Another suggestion is to use  http PUT for adding docs and POST for commands&lt;/p&gt;</comment>
                            <comment id="14078220" author="steve_rowe" created="Tue, 29 Jul 2014 19:25:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;or /update/json/doc&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;and/or just &lt;tt&gt;/update/doc&lt;/tt&gt;, with content-type routing like current &lt;tt&gt;/update&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="14078231" author="noble.paul" created="Tue, 29 Jul 2014 19:35:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;and/or just /update/doc, with content-type routing like current /update &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I feel having that extra type info in the uri helps rather than as an http header  i. Isn&apos;t it nice to have /update/json than  /update -H &apos;Content-type:application/json&apos;&lt;/p&gt;</comment>
                            <comment id="14078241" author="steve_rowe" created="Tue, 29 Jul 2014 19:42:28 +0000"  >&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;and/or just /update/doc, with content-type routing like current /update&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I feel having that extra type info in the uri helps rather than as an http header i. Isn&apos;t it nice to have /update/json than /update -H &apos;Content-type:application/json&apos;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree, &lt;tt&gt;/update/json/doc&lt;/tt&gt; is quicker to type in on the command line.&lt;/p&gt;</comment>
                            <comment id="14078290" author="yseeley@gmail.com" created="Tue, 29 Jul 2014 20:16:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;Isn&apos;t it nice to have /update/json than /update -H &apos;Content-type:application/json&apos;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree.  Of course making it simpler on the command line (i.e. avoid having to set the content type header) requires ignoring the content-type sent by curl.  I&apos;m for that... but not sure what others may think.  Some people get aggravated when I&apos;ve ignored standards in favor of usability in the past.&lt;/p&gt;</comment>
                            <comment id="14078914" author="noble.paul" created="Wed, 30 Jul 2014 05:24:14 +0000"  >&lt;p&gt;OK , So I&apos;m going with the &lt;tt&gt;update/json/doc&lt;/tt&gt; option where you can just put one or more docs &lt;/p&gt;</comment>
                            <comment id="14078985" author="varunthacker" created="Wed, 30 Jul 2014 06:36:05 +0000"  >&lt;p&gt;Currently this is the behaviour -&lt;/p&gt;

&lt;p&gt;Request:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;curl http://localhost:8983/solr/update/json?commit=true -d &apos;
[
 {&quot;id&quot; : &quot;1&quot;, &quot;title&quot; : &quot;test&quot;}
]&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Response:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;response&amp;gt;
&amp;lt;lst name=&quot;responseHeader&quot;&amp;gt;&amp;lt;int name=&quot;status&quot;&amp;gt;0&amp;lt;/int&amp;gt;&amp;lt;int name=&quot;QTime&quot;&amp;gt;1&amp;lt;/int&amp;gt;&amp;lt;/lst&amp;gt;
&amp;lt;/response&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;No document gets added. Confused as to why the response gave a status=0 and did not add the document.&lt;/p&gt;


&lt;p&gt;But adding the content header type leads to document add - &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;curl http://localhost:8983/solr/update/json?commit=true -H &apos;Content-type:application/json&apos; -d &apos;
[
 {&quot;id&quot; : &quot;1&quot;, &quot;title&quot; : &quot;test&quot;}
]&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;So the content type header gets respected currently.&lt;/p&gt;</comment>
                            <comment id="14079239" author="yseeley@gmail.com" created="Wed, 30 Jul 2014 12:32:49 +0000"  >&lt;blockquote&gt;&lt;p&gt;No document gets added.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Lovely. (sarcasm) &lt;br/&gt;
It&apos;s treating the body as key/value query parameters (i.e. respecting the content-type that curl puts in there by default).&lt;br/&gt;
You can see this in the log where the whole body is treated as a key without a value:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;19602 [qtp316753575-14] INFO  org.apache.solr.update.processor.LogUpdateProcessor  &#8211; [collection1] webapp=/solr path=/update/json params={commit=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;
[
 {&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;title&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt;}
]=} {commit=} 0 6
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14079376" author="noble.paul" created="Wed, 30 Jul 2014 15:25:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=varun&quot; class=&quot;user-hover&quot; rel=&quot;varun&quot;&gt;varun&lt;/a&gt;  Please open annother bug and we should fix it&lt;/p&gt;</comment>
                            <comment id="14079792" author="gsingers" created="Wed, 30 Jul 2014 19:10:58 +0000"  >&lt;p&gt;I really don&apos;t like having separate APIs for one doc vs. multiple docs.  How about deprecating the existing approach in favor a new one that properly captures commands, single docs, and multiple docs and is clean for users?  &lt;/p&gt;

&lt;p&gt;The whole point of stuff like this is to make it easier for people first coming to Solr to not have to think about all the gotchas and just get their data in.  Ease of use has to be all about the user&apos;s data and their questions for it, not about idiosyncrasies in API design to workaround previous approaches.&lt;/p&gt;</comment>
                            <comment id="14079975" author="hossman" created="Wed, 30 Jul 2014 21:04:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;I really don&apos;t like having separate APIs for one doc vs. multiple docs...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t think anyone suggested that?&lt;/p&gt;

&lt;p&gt;what was suggested was a new request param (i suggested &lt;tt&gt;json.command=true|false&lt;/tt&gt;), that would indicate when a top level JSON object should be interpreted as a set of commands, or as a single document.&lt;/p&gt;

&lt;p&gt;if this request param exists, then a new sample configuration could be supplied (noble suggested &lt;tt&gt;/update/json/doc&lt;/tt&gt; - i would suggest &lt;tt&gt;/update/json/docs&lt;/tt&gt; (plural) might be better) which could have a &lt;tt&gt;&amp;lt;lst name=&quot;defaults&quot;/&amp;gt;&lt;/tt&gt; block setting &lt;tt&gt;json.command=true&lt;/tt&gt; ... which would mean you could send &lt;b&gt;either&lt;/b&gt; one doc or multiple docs to that endpoint, and they would just plain work. if you use &lt;tt&gt;/update&lt;/tt&gt; or &lt;tt&gt;/update/json&lt;/tt&gt; then for backcompat reasons, a top level JSON object would be interpreted as a list of commands &amp;#8211; but you could override that with &lt;tt&gt;json.command=true&lt;/tt&gt; in the request.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;How about deprecating the existing approach in favor a new one that properly captures commands, single docs, and multiple docs and is clean for users? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not sure i understand what you are proposing? .. there are only 3 &quot;top level&quot; constructs we could have in a valid JSON document: arrays, objects, and literals &amp;#8211; if you want both top level objects / top level arrays to be interpreted as a doc / list of docs that doesn&apos;t leave much to put commands (only the most trivial command could be specified by a top level string/number primitive.&lt;/p&gt;

&lt;p&gt;If folks feel like sending single documents should be the &quot;default&quot; and commands should be considered abnormal (a sentiment i generally agree with, particularly since most basic commands can already be sent as request params) then i already made a suggestion to how to move forward with that goal:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;we can also change the default value of the new request param (and thus, the default behavior) in 5.0 so that by default we assume everything is a doc, and you have to send &quot;json.command=true&quot; if you want your top level braces to be interpreted as starting a set of commands.&lt;/p&gt;&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;blockquote&gt;&lt;p&gt;Ease of use has to be all about the user&apos;s data and their questions for it, not about idiosyncrasies in API design to workaround previous approaches.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Nothing in the suggestion Noble and i coalesced towards has anything to do with &quot;working around&quot; the existing API &amp;#8211; it&apos;s about ensuring that as the API evolves to be more freindly towards new users, we don&apos;t alienate existing users by breaking their shit if we don&apos;t have to, and giving them an easy way to edit their config to make their shit keep working if we change the default behavior.&lt;/p&gt;</comment>
                            <comment id="14080481" author="noble.paul" created="Thu, 31 Jul 2014 04:37:48 +0000"  >&lt;p&gt;Hoss more or less summed up what I was proposing&lt;/p&gt;

&lt;p&gt; key points&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;The current json object format should not be broken.&lt;/li&gt;
	&lt;li&gt;The &lt;tt&gt;/update/json/docs&lt;/tt&gt; or &lt;tt&gt;/update/json/doc&lt;/tt&gt;  (Plural is better because it accepts many) is a shorthand for &lt;tt&gt;/update/json?json.command=false&lt;/tt&gt; . Actually users are free to create clean http endpoints by adding a &lt;tt&gt;&amp;lt;requestHandler&amp;gt;&lt;/tt&gt; entry in solrconfig.xml with the params added to &lt;tt&gt;defaults&lt;/tt&gt; . In this case we are adding this ourselves. This is why I created &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6302&quot; title=&quot;Add implicit update request handlers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6302&quot;&gt;&lt;del&gt;SOLR-6302&lt;/del&gt;&lt;/a&gt; also . We should not make our solrconfig.xml ugly by adding stuff which everyone needs and no one should modify (other than experts)&lt;/li&gt;
&lt;/ul&gt;


&lt;blockquote&gt;&lt;p&gt;we can also change the default value of the new request param (and thus, the default behavior) in 5.0&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I don&apos;t think we will ever be able to change that default without screwing a lot of users .  &lt;/p&gt;</comment>
                            <comment id="14080732" author="noble.paul" created="Thu, 31 Jul 2014 10:48:26 +0000"  >&lt;p&gt;Fix for both the tickets &lt;/p&gt;

&lt;p&gt;It is OK if we want to split them&lt;/p&gt;</comment>
                            <comment id="14080742" author="noble.paul" created="Thu, 31 Jul 2014 10:53:59 +0000"  >&lt;p&gt;I shall go ahead and commit it soon, if there are no objections&lt;/p&gt;</comment>
                            <comment id="14083659" author="jira-bot" created="Sat, 2 Aug 2014 18:41:14 +0000"  >&lt;p&gt;Commit 1615345 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1615345&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1615345&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6294&quot; title=&quot;The JsonLoader should accept a single doc without wrapping in an array&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6294&quot;&gt;&lt;del&gt;SOLR-6294&lt;/del&gt;&lt;/a&gt; ,&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6302&quot; title=&quot;Add implicit update request handlers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6302&quot;&gt;&lt;del&gt;SOLR-6302&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14083669" author="jira-bot" created="Sat, 2 Aug 2014 19:10:19 +0000"  >&lt;p&gt;Commit 1615347 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1615347&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1615347&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6294&quot; title=&quot;The JsonLoader should accept a single doc without wrapping in an array&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6294&quot;&gt;&lt;del&gt;SOLR-6294&lt;/del&gt;&lt;/a&gt; ,&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6302&quot; title=&quot;Add implicit update request handlers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6302&quot;&gt;&lt;del&gt;SOLR-6302&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12658903" name="SOLR-6294-6304.patch" size="33547" author="noble.paul" created="Thu, 31 Jul 2014 10:48:26 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12730808">SOLR-6302</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>408541</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 16 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1yanr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>408539</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>