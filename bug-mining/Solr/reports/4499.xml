<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:44:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-14471] base replica selection strategy not applied to &quot;last place&quot; shards.preference matches</title>
                <link>https://issues.apache.org/jira/browse/SOLR-14471</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When &lt;tt&gt;shards.preferences&lt;/tt&gt; is specified, all inherently equivalent groups of replicas should fall back to being sorted by the &lt;tt&gt;replica.base&lt;/tt&gt; strategy (either random or some variant of &quot;stable&quot;). This currently works for every group of &quot;equivalent&quot; replicas, with the exception of &quot;last place&quot; matches.&lt;/p&gt;

&lt;p&gt;This is easy to overlook, because usually it&apos;s the &quot;first place&quot; matches that will be selected for the purpose of actually executing distributed requests; but it&apos;s still a bug, and is especially problematic when &quot;last place matches&quot; == &quot;first place matches&quot; &#8211; e.g. when&#160;&lt;tt&gt;shards.preference&lt;/tt&gt; specified matches &lt;em&gt;all&lt;/em&gt; available replicas.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13304187">SOLR-14471</key>
            <summary>base replica selection strategy not applied to &quot;last place&quot; shards.preference matches</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tflobbe">Tomas Eduardo Fernandez Lobbe</assignee>
                                    <reporter username="magibney">Michael Gibney</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 May 2020 18:58:42 +0000</created>
                <updated>Wed, 27 May 2020 18:04:51 +0000</updated>
                            <resolved>Sat, 16 May 2020 21:45:27 +0000</resolved>
                                    <version>8.3</version>
                    <version>9.0</version>
                                    <fixVersion>8.5.2</fixVersion>
                    <fixVersion>8.6</fixVersion>
                    <fixVersion>9.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17104776" author="mgibney" created="Mon, 11 May 2020 19:21:01 +0000"  >&lt;p&gt;Fix (and test illustrating the problem) at &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/1507&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR #1507&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17106581" author="mgibney" created="Wed, 13 May 2020 18:58:46 +0000"  >&lt;p&gt;A couple of reports of this bug in the wild have recently surfaced on the solr-user list; basically, for some replica configurations and shards.preference settings, routing (e.g., load balancing) of internal requests is not working properly. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tflobbe&quot; class=&quot;user-hover&quot; rel=&quot;tflobbe&quot;&gt;tflobbe&lt;/a&gt;, would you be able to take a look, when you have a chance?&lt;/p&gt;</comment>
                            <comment id="17106882" author="tomasflobbe" created="Thu, 14 May 2020 04:33:40 +0000"  >&lt;p&gt;Thanks Michael. PR looks good to me.&lt;/p&gt;</comment>
                            <comment id="17107859" author="mgibney" created="Fri, 15 May 2020 02:31:39 +0000"  >&lt;p&gt;Thanks for the feedback, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tflobbe&quot; class=&quot;user-hover&quot; rel=&quot;tflobbe&quot;&gt;tflobbe&lt;/a&gt;. Is this something you&apos;d be willing to commit, and/or would it make sense to loop anyone else in on this? Please let me know if there&apos;s anything else I can do to help.&lt;/p&gt;</comment>
                            <comment id="17107929" author="jira-bot" created="Fri, 15 May 2020 04:31:51 +0000"  >&lt;p&gt;Commit 54dca800a9432a72b93723d40fa4abc9a8e11f14 in lucene-solr&apos;s branch refs/heads/master from Michael Gibney&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=54dca80&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=54dca80&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14471&quot; title=&quot;base replica selection strategy not applied to &amp;quot;last place&amp;quot; shards.preference matches&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14471&quot;&gt;&lt;del&gt;SOLR-14471&lt;/del&gt;&lt;/a&gt;: Fix last-place replica after shards.preference rules  (#1507)&lt;/p&gt;

&lt;p&gt;Properly apply base replica ordering to last-place shards.preference matches&lt;/p&gt;</comment>
                            <comment id="17107931" author="jira-bot" created="Fri, 15 May 2020 04:35:56 +0000"  >&lt;p&gt;Commit 4e564079fb2a160624bb30bec5caf9992d6717bb in lucene-solr&apos;s branch refs/heads/master from Tomas Eduardo Fernandez Lobbe&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=4e56407&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=4e56407&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14471&quot; title=&quot;base replica selection strategy not applied to &amp;quot;last place&amp;quot; shards.preference matches&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14471&quot;&gt;&lt;del&gt;SOLR-14471&lt;/del&gt;&lt;/a&gt;: Add CHANGES entry&lt;/p&gt;</comment>
                            <comment id="17107937" author="jira-bot" created="Fri, 15 May 2020 04:47:49 +0000"  >&lt;p&gt;Commit 43631e126e93308d034a2babd51765230f96f5e3 in lucene-solr&apos;s branch refs/heads/branch_8x from Michael Gibney&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=43631e1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=43631e1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14471&quot; title=&quot;base replica selection strategy not applied to &amp;quot;last place&amp;quot; shards.preference matches&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14471&quot;&gt;&lt;del&gt;SOLR-14471&lt;/del&gt;&lt;/a&gt;: Fix last-place replica after shards.preference rules  (#1507)&lt;/p&gt;

&lt;p&gt;Properly apply base replica ordering to last-place shards.preference matches&lt;/p&gt;</comment>
                            <comment id="17107938" author="jira-bot" created="Fri, 15 May 2020 04:47:51 +0000"  >&lt;p&gt;Commit abaf16ea1bb2301e5b555f0bf1ea9d3bd7012761 in lucene-solr&apos;s branch refs/heads/branch_8x from Tomas Eduardo Fernandez Lobbe&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=abaf16e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=abaf16e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14471&quot; title=&quot;base replica selection strategy not applied to &amp;quot;last place&amp;quot; shards.preference matches&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14471&quot;&gt;&lt;del&gt;SOLR-14471&lt;/del&gt;&lt;/a&gt;: Add CHANGES entry&lt;/p&gt;</comment>
                            <comment id="17107942" author="tomasflobbe" created="Fri, 15 May 2020 04:52:08 +0000"  >&lt;p&gt;Merged. Thanks Michael!&lt;/p&gt;</comment>
                            <comment id="17108269" author="mgibney" created="Fri, 15 May 2020 13:17:12 +0000"  >&lt;p&gt;Great! Thanks, Tomas!&lt;/p&gt;</comment>
                            <comment id="17108698" author="tomasflobbe" created="Fri, 15 May 2020 22:02:13 +0000"  >&lt;p&gt;We can backport this to 8.5.2&lt;/p&gt;</comment>
                            <comment id="17109232" author="jira-bot" created="Sat, 16 May 2020 21:44:34 +0000"  >&lt;p&gt;Commit 6677d5f1fd0ee63dc7f681e770923e74081f176c in lucene-solr&apos;s branch refs/heads/branch_8_5 from Michael Gibney&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=6677d5f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=6677d5f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14471&quot; title=&quot;base replica selection strategy not applied to &amp;quot;last place&amp;quot; shards.preference matches&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14471&quot;&gt;&lt;del&gt;SOLR-14471&lt;/del&gt;&lt;/a&gt;: Fix last-place replica after shards.preference rules  (#1507)&lt;/p&gt;

&lt;p&gt;Properly apply base replica ordering to last-place shards.preference matches&lt;/p&gt;</comment>
                            <comment id="17109233" author="jira-bot" created="Sat, 16 May 2020 21:44:36 +0000"  >&lt;p&gt;Commit 384dadd9141cec3f848d8c416315dc2384749814 in lucene-solr&apos;s branch refs/heads/branch_8_5 from Tomas Eduardo Fernandez Lobbe&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=384dadd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=384dadd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14471&quot; title=&quot;base replica selection strategy not applied to &amp;quot;last place&amp;quot; shards.preference matches&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14471&quot;&gt;&lt;del&gt;SOLR-14471&lt;/del&gt;&lt;/a&gt;: CHANGES entry for 8.5.2&lt;/p&gt;</comment>
                            <comment id="17117964" author="tomasflobbe" created="Wed, 27 May 2020 17:59:27 +0000"  >&lt;p&gt;Closing after the 8.5.2 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0elyw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>