<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:06:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-7664] Solrj client throws ParseException(&quot;Illegal content type&quot;) when server returns &quot;other http error&quot; (here 413) with BinaryResponseParser</title>
                <link>https://issues.apache.org/jira/browse/SOLR-7664</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;We have a program that uses Solrj to index data. For some (irrelevant) reason, the server sometimes returns &quot;413 FULL Head&quot; with no Content-Type header. When that happens, the Solrj library fails. &lt;/p&gt;

&lt;p&gt;In HttpSolrClient.executeMethod, two things happen:&lt;/p&gt;

&lt;p&gt;If there is no processor, then a RemoteSolrException is thrown, which is good. Ref &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/lucene_solr_5_2_0/solr/solrj/src/java/org/apache/solr/client/solrj/impl/HttpSolrClient.java#L493&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/lucene_solr_5_2_0/solr/solrj/src/java/org/apache/solr/client/solrj/impl/HttpSolrClient.java#L493&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;However, when there is a processor, the code tries to call ContentType.parse() with the returned ContentType, which is null. This method throws a ParseException(&quot;Illegal content type&quot;), which propagates to the client. The cause of the error is very much hidden now. Ref &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/lucene_solr_5_2_0/solr/solrj/src/java/org/apache/solr/client/solrj/impl/HttpSolrClient.java#L513&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/lucene_solr_5_2_0/solr/solrj/src/java/org/apache/solr/client/solrj/impl/HttpSolrClient.java#L513&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;It would be nice if the client would throw a RemoteSolrException in this case, too.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12837087">SOLR-7664</key>
            <summary>Solrj client throws ParseException(&quot;Illegal content type&quot;) when server returns &quot;other http error&quot; (here 413) with BinaryResponseParser</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andyetitmoves">Ramkumar Aiyengar</assignee>
                                    <reporter username="elygre">Eirik Lygre</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Jun 2015 09:21:21 +0000</created>
                <updated>Wed, 26 Aug 2015 13:06:03 +0000</updated>
                            <resolved>Tue, 23 Jun 2015 21:43:34 +0000</resolved>
                                    <version>5.2</version>
                                    <fixVersion>5.3</fixVersion>
                                    <component>SolrJ</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14581711" author="elygre" created="Thu, 11 Jun 2015 09:23:50 +0000"  >&lt;p&gt;See also &lt;a href=&quot;http://codingtricks.fidibuy.com/participant/join/54fce329b760506d5d9e7db3/Spring-Data-Solr-cannot-handle-long-queries&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://codingtricks.fidibuy.com/participant/join/54fce329b760506d5d9e7db3/Spring-Data-Solr-cannot-handle-long-queries&lt;/a&gt; for another user who experienced the same problem.&lt;/p&gt;</comment>
                            <comment id="14582048" author="shalinmangar" created="Thu, 11 Jun 2015 15:13:02 +0000"  >&lt;p&gt;Interesting, I have seen the same error on our Jenkins box but haven&apos;t ever been able to reproduce e.g. &lt;a href=&quot;https://builds.apache.org/job/Lucene-Solr-NightlyTests-trunk/708/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Lucene-Solr-NightlyTests-trunk/708/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Do you know why your program is sending a large URI or request headers?&lt;/p&gt;</comment>
                            <comment id="14582246" author="hossman" created="Thu, 11 Jun 2015 17:14:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;Do you know why your program is sending a large URI or request headers?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We should probably keep this issue focused on propagating the correct error code, and spin off  discussion/diagnosing when/why a 413 is returned ino a distinct issue.  (the first should be a fairly easy fix, the later could take a while) &lt;/p&gt;</comment>
                            <comment id="14587188" author="hossman" created="Tue, 16 Jun 2015 00:06:22 +0000"  >&lt;p&gt;Ram seems to have identified the cause of the 413 in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7681&quot; title=&quot;HttpSolrClient fails with a confusing error when a GET request is too big&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7681&quot;&gt;SOLR-7681&lt;/a&gt;, so please keep discussion here focused on fixing the client to better propogate the specifics of the error.&lt;/p&gt;</comment>
                            <comment id="14590139" author="andyetitmoves" created="Wed, 17 Jun 2015 17:29:20 +0000"  >&lt;p&gt;One line patch to fix this issue. I am no expert with this code, so opinions welcome, but doesn&apos;t look like this could do any harm..&lt;/p&gt;</comment>
                            <comment id="14598425" author="jira-bot" created="Tue, 23 Jun 2015 21:40:23 +0000"  >&lt;p&gt;Commit 1687135 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andyetitmoves&quot; class=&quot;user-hover&quot; rel=&quot;andyetitmoves&quot;&gt;andyetitmoves&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1687135&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1687135&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7664&quot; title=&quot;Solrj client throws ParseException(&amp;quot;Illegal content type&amp;quot;) when server returns &amp;quot;other http error&amp;quot; (here 413) with BinaryResponseParser&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7664&quot;&gt;&lt;del&gt;SOLR-7664&lt;/del&gt;&lt;/a&gt;: Throw correct exception (RemoteSolrException) on receiving a HTTP 413&lt;/p&gt;</comment>
                            <comment id="14598428" author="jira-bot" created="Tue, 23 Jun 2015 21:42:07 +0000"  >&lt;p&gt;Commit 1687137 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andyetitmoves&quot; class=&quot;user-hover&quot; rel=&quot;andyetitmoves&quot;&gt;andyetitmoves&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1687137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1687137&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7664&quot; title=&quot;Solrj client throws ParseException(&amp;quot;Illegal content type&amp;quot;) when server returns &amp;quot;other http error&amp;quot; (here 413) with BinaryResponseParser&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7664&quot;&gt;&lt;del&gt;SOLR-7664&lt;/del&gt;&lt;/a&gt;: Throw correct exception (RemoteSolrException) on receiving a HTTP 413&lt;/p&gt;</comment>
                            <comment id="14598431" author="andyetitmoves" created="Tue, 23 Jun 2015 21:43:34 +0000"  >&lt;p&gt;Thanks Eirik!&lt;/p&gt;</comment>
                            <comment id="14713199" author="shalinmangar" created="Wed, 26 Aug 2015 13:06:03 +0000"  >&lt;p&gt;Bulk close for 5.3.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12837726">SOLR-7681</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12740155" name="SOLR-7664.patch" size="703" author="andyetitmoves" created="Wed, 17 Jun 2015 17:29:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fx73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>