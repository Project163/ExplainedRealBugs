<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:06:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-7697] Schema API doesn&apos;t take class or luceneMatchVersion attributes into account for the analyzer when adding a new field type</title>
                <link>https://issues.apache.org/jira/browse/SOLR-7697</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I&apos;ve noticed that in schema.xml can be defined field types like the following :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &amp;lt;fieldType name=&lt;span class=&quot;code-quote&quot;&gt;&quot;nametext&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.TextField&quot;&lt;/span&gt;&amp;gt;
      &amp;lt;analyzer class=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.lucene.analysis.core.WhitespaceAnalyzer&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;/fieldType&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The current add-field-type update operation from Schema API doesn&apos;t take into account the class (and the luceneMatchVersion - see FieldTypePluginLoader.java) for the field type analyzer definition, but only their type.&lt;/p&gt;

&lt;p&gt;See FieldTypeXmlAdapter.java&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Element createAnalyzerElement(Document doc, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; type, Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;,?&amp;gt; json) {
    Element analyzer = doc.createElement(&lt;span class=&quot;code-quote&quot;&gt;&quot;analyzer&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (type != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
      analyzer.setAttribute(&lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;, type);
      .....
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If the change would be made, the add-field-type request would look like this :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;curl -X POST -H &lt;span class=&quot;code-quote&quot;&gt;&apos;Content-type:application/json&apos;&lt;/span&gt; --data-binary &apos;{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;add-field-type&quot;&lt;/span&gt;: {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;nametext&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;class&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;solr.TextField&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;analyzer&quot;&lt;/span&gt;: {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;class&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.lucene.analysis.core.WhitespaceAnalyzer&quot;&lt;/span&gt;
    }
  }
}&apos; http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr/gettingstarted/schema&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12838681">SOLR-7697</key>
            <summary>Schema API doesn&apos;t take class or luceneMatchVersion attributes into account for the analyzer when adding a new field type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sarowe">Steven Rowe</assignee>
                                    <reporter username="mariusneo">Marius Grama</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Jun 2015 05:24:29 +0000</created>
                <updated>Mon, 9 May 2016 18:51:28 +0000</updated>
                            <resolved>Thu, 18 Jun 2015 22:13:57 +0000</resolved>
                                    <version>5.2</version>
                                    <fixVersion>5.3</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>Schema and Analysis</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14591306" author="mariusneo" created="Thu, 18 Jun 2015 05:55:00 +0000"  >&lt;p&gt;Here is a patch along with a unit test for the reported issue.&lt;/p&gt;</comment>
                            <comment id="14592446" author="steve_rowe" created="Thu, 18 Jun 2015 20:23:55 +0000"  >&lt;p&gt;Thanks Marius.&lt;/p&gt;

&lt;p&gt;I&apos;m attaching a modified patch:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Specifying an analyzer class on a field type is mutually exclusive of specification of char filters, a tokenizer, and filters - I modified &lt;tt&gt;FieldTypeXmlAdaptor.createAnalyzerElement()&lt;/tt&gt; to throw exceptions for requests that improperly mix these, and added a test confirming that to &lt;tt&gt;TestBulkSchemaAPI&lt;/tt&gt;.&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;FieldType.getAnalyzerProperties()&lt;/tt&gt; wasn&apos;t outputting &lt;tt&gt;luceneMatchVersion&lt;/tt&gt;, so although field type addition/modification was properly accepting specification of &lt;tt&gt;luceneMatchVersion&lt;/tt&gt; when an analyzer class was specified, serialization wasn&apos;t preserving the information.  I fixed it, and added a test that the round-tripping works to &lt;tt&gt;TestBulkSchemaAPI&lt;/tt&gt;.&lt;/li&gt;
	&lt;li&gt;Your patch moved some imports around in &lt;tt&gt;FieldTypeXmlAdaptor&lt;/tt&gt; but didn&apos;t otherwise change them.  In general, don&apos;t reorder imports unless they&apos;re completely unordered or you change them significantly.  You may have to change a setting in your IDE to address this.  (I put them back in my patch.)&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I think it&apos;s ready to go - I&apos;ll commit shortly.&lt;/p&gt;</comment>
                            <comment id="14592543" author="mariusneo" created="Thu, 18 Jun 2015 21:29:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; I just had a look over your patch. It is definitely an improvement to my initial version. FieldTypeXmlAdapter provides now meaningful exception messages.&lt;/p&gt;

&lt;p&gt;It looks good to me.&lt;/p&gt;</comment>
                            <comment id="14592628" author="jira-bot" created="Thu, 18 Jun 2015 22:07:33 +0000"  >&lt;p&gt;Commit 1686327 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1686327&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1686327&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7697&quot; title=&quot;Schema API doesn&amp;#39;t take class or luceneMatchVersion attributes into account for the analyzer when adding a new field type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7697&quot;&gt;&lt;del&gt;SOLR-7697&lt;/del&gt;&lt;/a&gt;: Schema API doesn&apos;t take class or luceneMatchVersion attributes into account for the analyzer when adding a new field type.&lt;/p&gt;</comment>
                            <comment id="14592636" author="jira-bot" created="Thu, 18 Jun 2015 22:11:50 +0000"  >&lt;p&gt;Commit 1686329 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1686329&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1686329&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7697&quot; title=&quot;Schema API doesn&amp;#39;t take class or luceneMatchVersion attributes into account for the analyzer when adding a new field type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7697&quot;&gt;&lt;del&gt;SOLR-7697&lt;/del&gt;&lt;/a&gt;: Schema API doesn&apos;t take class or luceneMatchVersion attributes into account for the analyzer when adding a new field type. (merged trunk r1686327)&lt;/p&gt;</comment>
                            <comment id="14592638" author="steve_rowe" created="Thu, 18 Jun 2015 22:13:57 +0000"  >&lt;p&gt;Committed to trunk and branch_5x.&lt;/p&gt;

&lt;p&gt;Thanks Marius!&lt;/p&gt;</comment>
                            <comment id="14713288" author="shalinmangar" created="Wed, 26 Aug 2015 13:06:19 +0000"  >&lt;p&gt;Bulk close for 5.3.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12778755">SOLR-7182</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12740483" name="SOLR-7697.patch" size="10631" author="sarowe" created="Thu, 18 Jun 2015 20:23:55 +0000"/>
                            <attachment id="12740305" name="SOLR-7697.patch" size="4382" author="mariusneo" created="Thu, 18 Jun 2015 05:55:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g6un:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>