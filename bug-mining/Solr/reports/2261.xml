<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:00:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6959] SimplePostTool reports incorrect base url for PDFs</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6959</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;blockquote&gt;
&lt;p&gt;$ java -Dc=techproducts -Dauto -Dcommit=no -jar post.jar solr-word.pdf&lt;br/&gt;
SimplePostTool version 1.5&lt;br/&gt;
Posting files to base url &lt;a href=&quot;http://localhost:8983/solr/techproducts/update&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/techproducts/update&lt;/a&gt;..&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This command will &lt;b&gt;not&lt;/b&gt; post to &lt;b&gt;/update&lt;/b&gt;, it will post to &lt;b&gt;/update/extract&lt;/b&gt;. This should be reported correspondingly.&lt;/p&gt;

&lt;p&gt;From the server log:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;127.0.0.1 -  -  [11/Jan/2015:17:17:10 +0000] &quot;POST /solr/techproducts/update/extract?resource.name=....&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It would make sense for that message to be after the auto-mode determination just before the actual POST.&lt;/p&gt;

&lt;p&gt;Also, what&apos;s with two dots after the url? If it is &lt;em&gt;etc&lt;/em&gt;, it should probably be three dots.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12766720">SOLR-6959</key>
            <summary>SimplePostTool reports incorrect base url for PDFs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ehatcher">Erik Hatcher</assignee>
                                    <reporter username="arafalov">Alexandre Rafalovitch</reporter>
                        <labels>
                            <label>tools</label>
                    </labels>
                <created>Sun, 11 Jan 2015 17:25:27 +0000</created>
                <updated>Mon, 9 May 2016 18:58:01 +0000</updated>
                            <resolved>Mon, 12 Jan 2015 00:37:39 +0000</resolved>
                                    <version>4.10.3</version>
                                    <fixVersion>5.0</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>scripts and tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14272996" author="arafalov" created="Sun, 11 Jan 2015 18:16:45 +0000"  >&lt;p&gt;Also, at least the parameters passed with -Dparams are shown in that log message. The PDF code adds some parameters internally (like literal.id). Should they be shown as well? They are very long though (full file path).&lt;/p&gt;</comment>
                            <comment id="14273002" author="ehatcher" created="Sun, 11 Jan 2015 18:33:59 +0000"  >&lt;p&gt;The url to post files to is determined on a per-file basis, which could be a directory of files where .xml files go to /update and .pdf files go to /update/extract.   The logging message does qualify that it is the &quot;base&quot; URL.&lt;/p&gt;

&lt;p&gt;Would you want the URL logged for &lt;b&gt;every&lt;/b&gt; file?&lt;/p&gt;</comment>
                            <comment id="14273012" author="arafalov" created="Sun, 11 Jan 2015 18:55:18 +0000"  >&lt;p&gt;This is a very interesting and educational question. The fact that the &lt;b&gt;/update&lt;/b&gt; is a &lt;b&gt;base&lt;/b&gt; is not well explained anywhere. I just run the test&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;java -Durl=&lt;a href=&quot;http://localhost:8983/solr/techproducts/update2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/techproducts/update2&lt;/a&gt; -Dauto -jar post.jar *&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;And it did do &lt;b&gt;POST /solr/techproducts/update2/extract&lt;/b&gt; for the PDF file. Not what I expected somehow.&lt;/p&gt;

&lt;p&gt;My main concern is reducing the magic through a better message. If somebody posted a file and something unexpected happened, they would troubleshoot it by following the &lt;em&gt;request handler&lt;/em&gt; and it&apos;s parameters as one of the steps. But we don&apos;t tell them here which request handler it is. We give only one piece of information here that just happen to also be a valid &lt;em&gt;request handler&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;They could pick that information up from the log file I guess if they had access to it and knew what to look for. But it would be easier if the tool was more clear about it, as it does not know exactly what happened.&lt;/p&gt;

&lt;p&gt;What if we add something like this to the message:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;POSTing file books.csv (text/csv) to [base]&lt;br/&gt;
POSTing file solr-word.pdf (application/pdf) to [base]/extract&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Where the word [base] is just that - the word.&lt;/p&gt;

&lt;p&gt;This could also clarify a bit the situation with the fact that XML, CSV, and JSON go to the same handler, yet we have - slightly confusingly - request handlers for both CSV and JSON in the solrconfig.xml.&lt;/p&gt;

&lt;p&gt;The help message for the tool needs to be improved as well. It says &lt;b&gt;solr-update-url&lt;/b&gt; and nothing about base and suffixes.&lt;/p&gt;</comment>
                            <comment id="14273113" author="jira-bot" created="Mon, 12 Jan 2015 00:33:48 +0000"  >&lt;p&gt;Commit 1651015 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ehatcher&quot; class=&quot;user-hover&quot; rel=&quot;ehatcher&quot;&gt;ehatcher&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1651015&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1651015&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6959&quot; title=&quot;SimplePostTool reports incorrect base url for PDFs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6959&quot;&gt;&lt;del&gt;SOLR-6959&lt;/del&gt;&lt;/a&gt;: Elaborate on URLs being POSTed to&lt;/p&gt;</comment>
                            <comment id="14273114" author="jira-bot" created="Mon, 12 Jan 2015 00:34:38 +0000"  >&lt;p&gt;Commit 1651016 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ehatcher&quot; class=&quot;user-hover&quot; rel=&quot;ehatcher&quot;&gt;ehatcher&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1651016&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1651016&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6959&quot; title=&quot;SimplePostTool reports incorrect base url for PDFs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6959&quot;&gt;&lt;del&gt;SOLR-6959&lt;/del&gt;&lt;/a&gt;: Elaborate on URLs being POSTed to (merged from trunk r1651013)&lt;/p&gt;</comment>
                            <comment id="14273115" author="ehatcher" created="Mon, 12 Jan 2015 00:37:39 +0000"  >&lt;p&gt;I improved the output like &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arafalov&quot; class=&quot;user-hover&quot; rel=&quot;arafalov&quot;&gt;arafalov&lt;/a&gt; proposed.&lt;/p&gt;</comment>
                            <comment id="14273119" author="ehatcher" created="Mon, 12 Jan 2015 00:43:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;This could also clarify a bit the situation with the fact that XML, CSV, and JSON go to the same handler, yet we have - slightly confusingly - request handlers for both CSV and JSON in the solrconfig.xml&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Well, if someone is using post.jar, chances are he/she isn&apos;t aware of the additional handlers that you mention so there wouldn&apos;t be any confusion I don&apos;t think.  Those handlers are just there for backwards compatibility (or for aesthetics, if one likes to post to, say, /update/csv).   I don&apos;t think we need to do anything different here.&lt;/p&gt;</comment>
                            <comment id="14273121" author="arafalov" created="Mon, 12 Jan 2015 00:49:06 +0000"  >&lt;p&gt;Actually, these days, these two handlers are commented out in the source code and are instead hard-coded as an implicit handler.  Causing confusion of their own (&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6938&quot; title=&quot;Implicit configuration of Update handlers does not match previous explicit one&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6938&quot;&gt;&lt;del&gt;SOLR-6938&lt;/del&gt;&lt;/a&gt;). FWIW.&lt;/p&gt;</comment>
                            <comment id="14273133" author="arafalov" created="Mon, 12 Jan 2015 01:11:00 +0000"  >&lt;p&gt;Looks good. Except this now uncovers a little wrinkle:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;$ java -Dc=techproducts -jar post.jar hd.xml&lt;br/&gt;
SimplePostTool version 1.5&lt;br/&gt;
Posting files to [base] url &lt;a href=&quot;http://localhost:8983/solr/techproducts/update&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/techproducts/update&lt;/a&gt; using content-type application/xml...&lt;br/&gt;
POSTing file hd.xml to [base]&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;vs.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;$ java -Dc=techproducts -Dauto -jar post.jar hd.xml&lt;br/&gt;
SimplePostTool version 1.5&lt;br/&gt;
Posting files to [base] url &lt;a href=&quot;http://localhost:8983/solr/techproducts/update&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/techproducts/update&lt;/a&gt;...&lt;br/&gt;
Entering auto mode. File endings considered are xml,json,csv,pdf,doc,docx,ppt,pptx,xls,xlsx,odt,odp,ods,ott,otp,ots,rtf,htm,html,txt,log&lt;br/&gt;
POSTing file hd.xml (text/xml) to [base]&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Is there a reason we are using different content types for the same XML file with and without &lt;b&gt;-Dauto&lt;/b&gt;?&lt;/p&gt;</comment>
                            <comment id="14273170" author="jira-bot" created="Mon, 12 Jan 2015 02:36:31 +0000"  >&lt;p&gt;Commit 1651027 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ehatcher&quot; class=&quot;user-hover&quot; rel=&quot;ehatcher&quot;&gt;ehatcher&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1651027&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1651027&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6959&quot; title=&quot;SimplePostTool reports incorrect base url for PDFs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6959&quot;&gt;&lt;del&gt;SOLR-6959&lt;/del&gt;&lt;/a&gt;: standardize XML content-type&lt;/p&gt;</comment>
                            <comment id="14273171" author="jira-bot" created="Mon, 12 Jan 2015 02:37:27 +0000"  >&lt;p&gt;Commit 1651028 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ehatcher&quot; class=&quot;user-hover&quot; rel=&quot;ehatcher&quot;&gt;ehatcher&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1651028&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1651028&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6959&quot; title=&quot;SimplePostTool reports incorrect base url for PDFs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6959&quot;&gt;&lt;del&gt;SOLR-6959&lt;/del&gt;&lt;/a&gt;: standardize XML content-type (merged from trunk r1651027)&lt;/p&gt;</comment>
                            <comment id="14273174" author="ehatcher" created="Mon, 12 Jan 2015 02:38:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;Except this now uncovers a little wrinkle...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;ok, ok!  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  dang you&apos;re thorough, and thanks for that seriously.  aligned to &quot;application/xml&quot;.  no (good) reason they were different.&lt;/p&gt;</comment>
                            <comment id="14273176" author="arafalov" created="Mon, 12 Jan 2015 02:42:49 +0000"  >&lt;p&gt;This output is in my book&apos;s current draft. You bet I don&apos;t want to explain why two different invocations do different things. Unless they actually do different things. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14332654" author="anshumg" created="Mon, 23 Feb 2015 05:01:10 +0000"  >&lt;p&gt;Bulk close after 5.0 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i248mn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>