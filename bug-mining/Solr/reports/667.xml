<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:22:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-2535] REGRESSION: in Solr 3.x and trunk the admin/file handler fails to show directory listings</title>
                <link>https://issues.apache.org/jira/browse/SOLR-2535</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;In Solr 1.4.1, going to the path solr/admin/file I see an XML-formatted listing of the conf directory, like:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;response&amp;gt;
&amp;lt;lst name=&quot;responseHeader&quot;&amp;gt;&amp;lt;int name=&quot;status&quot;&amp;gt;0&amp;lt;/int&amp;gt;&amp;lt;int name=&quot;QTime&quot;&amp;gt;1&amp;lt;/int&amp;gt;&amp;lt;/lst&amp;gt;
&amp;lt;lst name=&quot;files&quot;&amp;gt;
  &amp;lt;lst name=&quot;elevate.xml&quot;&amp;gt;&amp;lt;long name=&quot;size&quot;&amp;gt;1274&amp;lt;/long&amp;gt;&amp;lt;date name=&quot;modified&quot;&amp;gt;2011-03-06T20:42:54Z&amp;lt;/date&amp;gt;&amp;lt;/lst&amp;gt;
  ...
&amp;lt;/lst&amp;gt;
&amp;lt;/response&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I can list the xslt sub-dir using solr/admin/files?file=/xslt&lt;/p&gt;


&lt;p&gt;In Solr 3.1.0, both of these fail with a 500 error:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;HTTP ERROR 500

Problem accessing /solr/admin/file/. Reason:

    did not find a CONTENT object

java.io.IOException: did not find a CONTENT object
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Looking at the code in class ShowFileRequestHandler, it seem like 3.1.0 should still handle directory listings if not file name is given, or if the file is a directory, so I am filing this as a bug.&lt;/p&gt;</description>
                <environment>&lt;p&gt;java 1.6, jetty&lt;/p&gt;</environment>
        <key id="12507990">SOLR-2535</key>
            <summary>REGRESSION: in Solr 3.x and trunk the admin/file handler fails to show directory listings</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="erickerickson">Erick Erickson</assignee>
                                    <reporter username="pwolanin">Peter Wolanin</reporter>
                        <labels>
                    </labels>
                <created>Sat, 21 May 2011 22:52:16 +0000</created>
                <updated>Fri, 16 Sep 2011 14:48:53 +0000</updated>
                            <resolved>Thu, 14 Jul 2011 17:04:04 +0000</resolved>
                                    <version>3.1</version>
                    <version>3.2</version>
                    <version>4.0-ALPHA</version>
                                    <fixVersion>3.4</fixVersion>
                    <fixVersion>4.0-ALPHA</fixVersion>
                                    <component>SearchComponents - other</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13042836" author="steffkes" created="Thu, 2 Jun 2011 15:50:40 +0000"  >&lt;p&gt;Same for trunk&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ svn info
Path: .
URL: https:&lt;span class=&quot;code-comment&quot;&gt;//svn.apache.org/repos/asf/lucene/dev/trunk/solr
&lt;/span&gt;Repository Root: https:&lt;span class=&quot;code-comment&quot;&gt;//svn.apache.org/repos/asf
&lt;/span&gt;Repository UUID: 13f79535-47bb-0310-9956-ffa450edef68
Revision: 1130610
Node Kind: directory
Schedule: normal
Last Changed Author: rmuir
Last Changed Rev: 1130527
Last Changed Date: 2011-06-02 14:58:22 +0200 (Thu, 02 Jun 2011)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Stacktrace:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;INFO: [] webapp=/solr path=/admin/file params={} status=0 QTime=7
Jun 2, 2011 5:49:29 PM org.apache.solr.common.SolrException log
SEVERE: java.io.IOException: did not find a CONTENT object
        at org.apache.solr.response.RawResponseWriter.write(RawResponseWriter.java:113)
        at org.apache.solr.servlet.SolrDispatchFilter.writeResponse(SolrDispatchFilter.java:333)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:261)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399)
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
        at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
        at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
        at org.mortbay.jetty.Server.handle(Server.java:326)
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
        at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928)
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549)
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
        at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:228)
        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13043816" author="rcmuir" created="Fri, 3 Jun 2011 16:47:13 +0000"  >&lt;p&gt;Bulk move 3.2 -&amp;gt; 3.3&lt;/p&gt;</comment>
                            <comment id="13046122" author="pwolanin" created="Wed, 8 Jun 2011 18:26:43 +0000"  >&lt;p&gt;This ought to be a trivial fix, so I hope we can get it in 3.1.1, or is 3.3 going to be the next minor version?&lt;/p&gt;</comment>
                            <comment id="13047396" author="dsmiley" created="Fri, 10 Jun 2011 19:45:41 +0000"  >&lt;p&gt;The attached patch fixes this bug and adds new tests for a directory listing and getting a file. This bug was triggered with the introduction of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2263&quot; title=&quot;RawResponseWriter should properly stream binary as well as textual files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2263&quot;&gt;&lt;del&gt;SOLR-2263&lt;/del&gt;&lt;/a&gt; in which RawResponseWriter was changed to implement BinaryQueryResponseWriter. This wasn&apos;t a problem in and of itself, but the SolrDispatchFilter checks if a response writer is the binary variant and if so calls the write(OutputStream...) variant. But the responses from ShowFileRequestHandler that list directory contents are incompatible with the RawResponseWriter if RawResponseWriter&apos;s write(OutputStream...) method is uses, instead of a character based stream. The solution was to move the defaulting of the &quot;raw&quot; response type from ShowFileRequestHandler.init() into into a condition within handleRequestBody() where it knows the response is a file.&lt;/p&gt;</comment>
                            <comment id="13047411" author="pwolanin" created="Fri, 10 Jun 2011 20:04:44 +0000"  >&lt;p&gt;Thanks for the patch.  Is every thing in there related to this bug?  Some of it looks like other cleanup.&lt;/p&gt;</comment>
                            <comment id="13047420" author="dsmiley" created="Fri, 10 Jun 2011 20:10:08 +0000"  >&lt;p&gt;The relayout of import statements in SolrDisptatchFilter.java is inadvertent.&lt;br/&gt;
The QueryRequest.java one-liner was a null-check that I felt was an improvement so that I didn&apos;t have to pass in an empty params list to QueryRequest&apos;s constructor.&lt;/p&gt;</comment>
                            <comment id="13047999" author="pwolanin" created="Sat, 11 Jun 2011 22:45:24 +0000"  >&lt;p&gt;Quick test works  - patched the 3.2 source and rebuilding the directory and subdirctory listings work as expected.&lt;/p&gt;

&lt;p&gt;The patch I used is the same as David&apos;s but just re-rolled without the changes to SolrDisptatchFilter.java&lt;/p&gt;


&lt;p&gt;I&apos;m trying to attach it, but jira is throwing a stack trace.&lt;/p&gt;</comment>
                            <comment id="13048002" author="steve_rowe" created="Sat, 11 Jun 2011 22:51:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;m trying to attach it, but jira is throwing a stack trace.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I mentioned this problem on #asfinfra an hour or so ago - medthomas has tracked down the problem, to the ASF JIRA plugin needing to be updated for the just-upgraded JIRA instance, and he&apos;s working on fixing the problem.&lt;/p&gt;</comment>
                            <comment id="13051626" author="pwolanin" created="Sun, 19 Jun 2011 02:26:26 +0000"  >&lt;p&gt;Here&apos;s the patch I used.  As before, it&apos;s just David&apos;s with the extra changes omitted.&lt;/p&gt;</comment>
                            <comment id="13062155" author="erickerickson" created="Fri, 8 Jul 2011 20:22:14 +0000"  >&lt;p&gt;OK, I&apos;ve applied the patch to both 3x and trunk and it looks good. If nobody objects I&apos;ll commit this Monday.&lt;/p&gt;</comment>
                            <comment id="13062162" author="simonw" created="Fri, 8 Jul 2011 20:31:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;OK, I&apos;ve applied the patch to both 3x and trunk and it looks good. If nobody objects I&apos;ll commit this Monday.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;don&apos;t wait too long, no need to wait until monday.&lt;/p&gt;
</comment>
                            <comment id="13062180" author="yseeley@gmail.com" created="Fri, 8 Jul 2011 21:03:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;don&apos;t wait too long, no need to wait until monday.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1, commit it now!&lt;/p&gt;

&lt;p&gt;Esp for a bug fix, unless one thinks there is something likely controversial about it, or one is unsure about something and is thus requesting feedback.&lt;/p&gt;</comment>
                            <comment id="13064552" author="markrmiller@gmail.com" created="Wed, 13 Jul 2011 13:48:56 +0000"  >&lt;blockquote&gt;&lt;p&gt;If nobody objects I&apos;ll commit this Monday.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13064559" author="erickerickson" created="Wed, 13 Jul 2011 13:55:27 +0000"  >&lt;p&gt;I&apos;m just waiting for the recent code reorganization to get back to 3x to make this easier on myself, especially the merge step. I could have two patches, but it seems like the code reorg is hard enough as it is, making additional changes in the underlying 3x code base would just add useless complexity.&lt;/p&gt;

&lt;p&gt;But I&apos;m willing to be convinced otherwise.&lt;/p&gt;</comment>
                            <comment id="13064561" author="steve_rowe" created="Wed, 13 Jul 2011 13:58:59 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;m just waiting for the recent code reorganization to get back to 3x&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m working on it!  Hopefully finished today or tomorrow.&lt;/p&gt;</comment>
                            <comment id="13064568" author="erickerickson" created="Wed, 13 Jul 2011 14:07:07 +0000"  >&lt;p&gt;No problem, man! I&apos;m just happy &lt;b&gt;you&apos;re&lt;/b&gt; doing the work on the reorg instead of me....&lt;/p&gt;</comment>
                            <comment id="13065241" author="erickerickson" created="Thu, 14 Jul 2011 13:16:12 +0000"  >&lt;p&gt;Patch to reflect relocated code.&lt;/p&gt;</comment>
                            <comment id="13065389" author="erickerickson" created="Thu, 14 Jul 2011 17:04:04 +0000"  >&lt;p&gt;trunk rev:      1146685&lt;br/&gt;
branch 3x rev:  1146806&lt;/p&gt;

&lt;p&gt;Thanks David and Peter!&lt;/p&gt;</comment>
                            <comment id="13065436" author="steve_rowe" created="Thu, 14 Jul 2011 18:23:08 +0000"  >&lt;p&gt;Jenkins is reporting that branch_3x &lt;tt&gt;solr/src/test&lt;/tt&gt; compilation is failing after this issue was committed.&lt;/p&gt;

&lt;p&gt;I&apos;ve opened &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2653&quot; title=&quot;SolrJettyTestBase has the wrong package&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2653&quot;&gt;&lt;del&gt;SOLR-2653&lt;/del&gt;&lt;/a&gt; to address the problem.&lt;/p&gt;</comment>
                            <comment id="13106222" author="rcmuir" created="Fri, 16 Sep 2011 14:48:53 +0000"  >&lt;p&gt;bulk close for 3.4&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12486434" name="SOLR-2535-post-SOLR-2452.patch" size="7402" author="erickerickson" created="Thu, 14 Jul 2011 13:16:12 +0000"/>
                            <attachment id="12483071" name="SOLR-2535.patch" size="7357" author="pwolanin" created="Sun, 19 Jun 2011 02:26:25 +0000"/>
                            <attachment id="12482090" name="SOLR-2535_fix_admin_file_handler_for_directory_listings.patch" size="9921" author="dsmiley" created="Fri, 10 Jun 2011 19:45:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5005</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 10 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03k67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18701</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>