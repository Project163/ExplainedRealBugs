<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:30:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4020] SolrJ 4.0.0 not serializing multilple filter queries correctly</title>
                <link>https://issues.apache.org/jira/browse/SOLR-4020</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Using multiple filter queries in a solrQuery causes an exception with the following details.&lt;/p&gt;

&lt;p&gt;org.apache.solr.common.SolrException: org.apache.lucene.queryparser.classic.ParseException: Cannot parse &apos;[Ljava.lang.String;@1ec278b5&apos;: Encountered &quot;&amp;lt;EOF&amp;gt;&quot; at line 1, column 28.&lt;br/&gt;
Was expecting one of:&lt;br/&gt;
    &quot;TO&quot; ...&lt;br/&gt;
    &amp;lt;RANGE_QUOTED&amp;gt; ...&lt;br/&gt;
    &amp;lt;RANGE_GOOP&amp;gt; ...&lt;/p&gt;

&lt;p&gt;The issues come up when using addFilterQuery() in the following manner:&lt;/p&gt;

&lt;p&gt;solrQuery.addFilterQuery(&quot;&lt;/p&gt;
{!field f=facet_state}CA&quot;);&lt;br/&gt;
solrQuery.addFilterQuery(&quot;{!field f=facet_city}Test City&quot;);&lt;br/&gt;
&lt;br/&gt;
or using it in the following way&lt;br/&gt;
&lt;br/&gt;
solrQuery.setFilterQueries(&quot;{!field f=facet_state}
&lt;p&gt;CA&quot;, &quot;&lt;/p&gt;
{!field f=facet_city}Test City&quot;);&lt;br/&gt;
solrQuery.addFilterQuery(&quot;{!field f=facet_state}CA&quot;, &quot;{!field f=facet_city}
&lt;p&gt;Test City&quot;);&lt;/p&gt;

&lt;p&gt;even if solrQuery.add() is used the issue still comes up&lt;/p&gt;

&lt;p&gt;solrQuery.add(&quot;fq&quot;, &quot;your first filter&quot;);&lt;br/&gt;
solrQuery.add(&quot;fq&quot;, &quot;your second filter&quot;);&lt;/p&gt;

&lt;p&gt;In any case having multiple filter queries causes the issue.&lt;/p&gt;

&lt;p&gt;It seems that SolrJ is serializing a String[] instead of the separate String values. ModifiableSolrParams.java add() might be a good place to start the investigations.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12614204">SOLR-4020</key>
            <summary>SolrJ 4.0.0 not serializing multilple filter queries correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="hossman">Chris M. Hostetter</assignee>
                                    <reporter username="indikat">Indika Tantrigoda</reporter>
                        <labels>
                            <label>solrclient</label>
                            <label>solrj</label>
                    </labels>
                <created>Wed, 31 Oct 2012 16:53:59 +0000</created>
                <updated>Fri, 22 Mar 2013 16:21:15 +0000</updated>
                            <resolved>Thu, 1 Nov 2012 18:46:02 +0000</resolved>
                                                                    <component>clients - java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13488164" author="hossman" created="Wed, 31 Oct 2012 19:56:56 +0000"  >&lt;p&gt;Indika: There is something subtle going on here that i can&apos;t make sense of.&lt;/p&gt;

&lt;p&gt;I tried to write a test that would demonstrate the problem you are seeing, and i couldn&apos;t get it to fail..&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/viewvc/lucene/dev/branches/branch_4x/solr/solrj/src/test/org/apache/solr/client/solrj/SolrExampleTests.java?r1=1404319&amp;amp;r2=1404318&amp;amp;pathrev=1404319&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/viewvc/lucene/dev/branches/branch_4x/solr/solrj/src/test/org/apache/solr/client/solrj/SolrExampleTests.java?r1=1404319&amp;amp;r2=1404318&amp;amp;pathrev=1404319&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;...can you please post a more complete (ie: runnable) example of SolrJ client code that demonstrates this problem for you when running the 4.0 example jetty &amp;amp; solr configs (or attach the solr configs/schema you are using) as well as the full stack trace of the error you get.&lt;/p&gt;</comment>
                            <comment id="13488502" author="indikat" created="Thu, 1 Nov 2012 06:28:57 +0000"  >&lt;p&gt;Hoss: Thanks for the response. I compared the test with my implementation and I&apos;ve used &lt;br/&gt;
SolrParams solrParams = SolrParams.toSolrParams(solrQuery.toNamedList());&lt;br/&gt;
QueryResponse queryResponse = solrServer.query(solrParams);&lt;/p&gt;

&lt;p&gt;instead of directly parsing the solrQuery to solrServer.query() //solrServer.query(solrQuery);&lt;/p&gt;

&lt;p&gt;Let me know if you are able to recreate the issue with this information.&lt;/p&gt;</comment>
                            <comment id="13488919" author="hossman" created="Thu, 1 Nov 2012 18:45:05 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I&apos;ve used &lt;br/&gt;
SolrParams solrParams = SolrParams.toSolrParams(solrQuery.toNamedList()); &lt;br/&gt;
QueryResponse queryResponse = solrServer.query(solrParams);&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Well for starters: there&apos;s absolutely no reason for you to do that.&lt;/p&gt;

&lt;p&gt;If you want to build up some SolrParams and then call solrServer.query(SolrParams) - just construct a ModifiableSolrParams instance directly and pass it to that method &amp;#8211; it&apos;s just a convinience method for building up a SolrQuery object for you.&lt;/p&gt;

&lt;p&gt;If you want to build up a SolrQuery object and then pass it to SolrServer, that&apos;s what solrServer.request(SolrQuery) is for.&lt;/p&gt;

&lt;p&gt;There&apos;s no reason for converting to a NamedList&lt;/p&gt;</comment>
                            <comment id="13488922" author="hossman" created="Thu, 1 Nov 2012 18:45:45 +0000"  >&lt;p&gt;now that we understand the crux of the problem, it looks like this is a dup of another issue&lt;/p&gt;</comment>
                            <comment id="13610612" author="commit-tag-bot" created="Fri, 22 Mar 2013 16:21:15 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Chris M. Hostetter&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1404319&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1404319&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;More tests, written to try and demonstrate &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4020&quot; title=&quot;SolrJ 4.0.0 not serializing multilple filter queries correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4020&quot;&gt;&lt;del&gt;SOLR-4020&lt;/del&gt;&lt;/a&gt; (merge r1404318)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12443656">SOLR-1666</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>253436</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 35 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0dni7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>77737</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>