<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:15:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9430] Locale in &lt;propertyWriter in DIH is looked up based on Locale displayName (language tag &quot;en-US&quot; or legacy name &quot;en_US&quot; does not work, English works)</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9430</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;having a DIH with DB datasource and propertyWriter such as:&lt;/p&gt;

&lt;p&gt; &amp;lt;propertyWriter dateFormat=&quot;yyyy-MM-dd HH:mm:ss.SSSSSS&quot; type=&quot;SimplePropertiesWriter&quot; locale=&quot;en_US&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;does not work with locale in form en_US as mentioned in documentation; &lt;br/&gt;
Locale is being looked up by Locale.getDisplayName() which returns human readable representation as opposed to Locale.toLanguageTag, which returns form such as en-US.&lt;/p&gt;

&lt;p&gt;Propertywirter with locale in this form works:&lt;br/&gt;
 &amp;lt;propertyWriter dateFormat=&quot;yyyy-MM-dd HH:mm:ss.SSSSSS&quot; type=&quot;SimplePropertiesWriter&quot; locale=&quot;Slovak&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;Problematic line code:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/branch_6_1/solr/contrib/dataimporthandler/src/java/org/apache/solr/handler/dataimport/SimplePropertiesWriter.java#L95&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/branch_6_1/solr/contrib/dataimporthandler/src/java/org/apache/solr/handler/dataimport/SimplePropertiesWriter.java#L95&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;all&lt;/p&gt;</environment>
        <key id="12999196">SOLR-9430</key>
            <summary>Locale in &lt;propertyWriter in DIH is looked up based on Locale displayName (language tag &quot;en-US&quot; or legacy name &quot;en_US&quot; does not work, English works)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="uschindler">Uwe Schindler</assignee>
                                    <reporter username="bs76">Boris Steiner</reporter>
                        <labels>
                            <label>DIH</label>
                            <label>SimpePropertiesWriter</label>
                            <label>locale</label>
                            <label>propertyWriter</label>
                    </labels>
                <created>Tue, 23 Aug 2016 12:07:00 +0000</created>
                <updated>Sat, 8 Jun 2019 15:37:13 +0000</updated>
                            <resolved>Mon, 12 Sep 2016 11:57:38 +0000</resolved>
                                    <version>6.1</version>
                                    <fixVersion>6.2.1</fixVersion>
                    <fixVersion>6.3</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                    <component>contrib - DataImportHandler</component>
                    <component>update</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="15432695" author="thetaphi" created="Tue, 23 Aug 2016 12:16:08 +0000"  >&lt;p&gt;You should have to use the language tag, the old Display name is just for backwards compatibility and was removed in latest Lucene versions. Unfortunately this part of Solr still uses the old and buggy code.&lt;/p&gt;

&lt;p&gt;There is an other issue where all uses of Solr was transformed to use language tags (&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-6978&quot; title=&quot;Make LuceneTestCase use language tags instead of parsing locales by hand&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-6978&quot;&gt;&lt;del&gt;LUCENE-6978&lt;/del&gt;&lt;/a&gt;), but this one seems to be missing. I will take the issue and fix it like the other places.&lt;/p&gt;

&lt;p&gt;Please keep in mind, that using &quot;en_US&quot; is no longer supported in Solr, you have to use &quot;en-US&quot; since Lucene/Solr 5.5.&lt;/p&gt;
</comment>
                            <comment id="15433087" author="bs76" created="Tue, 23 Aug 2016 15:58:50 +0000"  >&lt;p&gt;Cool, thanks&lt;/p&gt;</comment>
                            <comment id="15438748" author="thetaphi" created="Fri, 26 Aug 2016 10:04:29 +0000"  >&lt;p&gt;Here is a patch, handling this in the same way like elsewhere in DIH. This code primarily accepts language tags, but for backwards compatibility also old-style locale names (toString) and display names.&lt;/p&gt;</comment>
                            <comment id="15438755" author="thetaphi" created="Fri, 26 Aug 2016 10:09:18 +0000"  >&lt;p&gt;The documentation team (hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctargett&quot; class=&quot;user-hover&quot; rel=&quot;ctargett&quot;&gt;ctargett&lt;/a&gt;) should review Solr&apos;s Confluence Wiki for wrong locales. From 5.5 on, all Locales anywhere in config files should use the standardized &quot;language tag&quot; format (see &lt;a href=&quot;https://tools.ietf.org/html/bcp47&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tools.ietf.org/html/bcp47&lt;/a&gt;), although the old format is still supported, but &quot;deprecated&quot;. We should at least fix the examples.&lt;/p&gt;</comment>
                            <comment id="15438763" author="thetaphi" created="Fri, 26 Aug 2016 10:18:05 +0000"  >&lt;p&gt;Better patch that does not violate forbiddenapis and is consistent with other Solr code.&lt;/p&gt;</comment>
                            <comment id="15440847" author="jira-bot" created="Sat, 27 Aug 2016 06:39:02 +0000"  >&lt;p&gt;Commit e99d9706741edb27b5ba373ad6fd84150a076705 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=e99d970&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=e99d970&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9430&quot; title=&quot;Locale in &amp;lt;propertyWriter in DIH is looked up based on Locale displayName (language tag &amp;quot;en-US&amp;quot; or legacy name &amp;quot;en_US&amp;quot; does not work, English works)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9430&quot;&gt;&lt;del&gt;SOLR-9430&lt;/del&gt;&lt;/a&gt;: Fix locale lookup in DIH &amp;lt;propertyWriter/&amp;gt; to use BCP47 language tags to be consistent with other places in Solr. Language names still work for backwards compatibility&lt;/p&gt;</comment>
                            <comment id="15440849" author="jira-bot" created="Sat, 27 Aug 2016 06:40:00 +0000"  >&lt;p&gt;Commit 545ce387143bec3f598c1f2465afaa9aae12607d in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thetaphi&quot; class=&quot;user-hover&quot; rel=&quot;thetaphi&quot;&gt;thetaphi&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=545ce38&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=545ce38&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9430&quot; title=&quot;Locale in &amp;lt;propertyWriter in DIH is looked up based on Locale displayName (language tag &amp;quot;en-US&amp;quot; or legacy name &amp;quot;en_US&amp;quot; does not work, English works)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9430&quot;&gt;&lt;del&gt;SOLR-9430&lt;/del&gt;&lt;/a&gt;: Fix locale lookup in DIH &amp;lt;propertyWriter/&amp;gt; to use BCP47 language tags to be consistent with other places in Solr. Language names still work for backwards compatibility&lt;/p&gt;</comment>
                            <comment id="15482803" author="shalinmangar" created="Mon, 12 Sep 2016 02:13:16 +0000"  >&lt;p&gt;Re-opened to back-port to 6.2.1&lt;/p&gt;</comment>
                            <comment id="15508545" author="shalinmangar" created="Wed, 21 Sep 2016 03:03:25 +0000"  >&lt;p&gt;Closing after 6.2.1 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12931452">LUCENE-6978</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12825645" name="SOLR-9430.patch" size="2729" author="uschindler" created="Fri, 26 Aug 2016 10:18:05 +0000"/>
                            <attachment id="12825643" name="SOLR-9430.patch" size="1975" author="uschindler" created="Fri, 26 Aug 2016 10:04:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32n8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>