<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:43:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-13264] IndexSizeTrigger aboveOp / belowOp properties not in valid properties</title>
                <link>https://issues.apache.org/jira/browse/SOLR-13264</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Steps to reproduce:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
./bin/solr start -cloud -noprompt

./bin/solr create -c demo -d _default -shards 1 -replicationFactor 1

curl &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8983/solr/admin/autoscaling&quot;&lt;/span&gt; -d&apos;
&lt;/span&gt;{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;set-trigger&quot;&lt;/span&gt; : {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;index_size_trigger&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;event&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;indexSize&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;aboveDocs&quot;&lt;/span&gt; : 12345,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;aboveOp&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;SPLITSHARD&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;enabled&quot;&lt;/span&gt; : &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;actions&quot;&lt;/span&gt; : [
      {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;compute_plan&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;class&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;solr.ComputePlanAction&quot;&lt;/span&gt;
      }
    ]
  }
}
&apos;

./bin/solr stop -all
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;tt&gt;aboveOp&lt;/tt&gt; is documented on &lt;a href=&quot;https://lucene.apache.org/solr/guide/7_6/solrcloud-autoscaling-triggers.html#index-size-trigger&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lucene.apache.org/solr/guide/7_6/solrcloud-autoscaling-triggers.html#index-size-trigger&lt;/a&gt; and logically should be accepted (even though it is actually the default) but unexpectedly an error message is returned &lt;tt&gt;&quot;Error validating trigger config index_size_trigger: TriggerValidationException{name=index_size_trigger, details=&apos;{aboveOp=unknown property}&apos;}&quot;&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;From a quick look it seems that in the &lt;tt&gt;IndexSizeTrigger&lt;/tt&gt; constructor additional values need to be passed to the &lt;tt&gt;TriggerUtils.validProperties&lt;/tt&gt; method i.e. aboveOp, belowOp and maybe others too i.e. aboveSize/belowSize/etc. Illustrative patch to follow. Thank you.&lt;/p&gt;


</description>
                <environment></environment>
        <key id="13217029">SOLR-13264</key>
            <summary>IndexSizeTrigger aboveOp / belowOp properties not in valid properties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ab">Andrzej Bialecki</assignee>
                                    <reporter username="cpoerschke">Christine Poerschke</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Feb 2019 21:30:56 +0000</created>
                <updated>Wed, 15 Jul 2020 15:10:39 +0000</updated>
                            <resolved>Mon, 16 Mar 2020 10:36:21 +0000</resolved>
                                                    <fixVersion>8.6</fixVersion>
                                    <component>AutoScaling</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16775557" author="cpoerschke" created="Fri, 22 Feb 2019 20:07:51 +0000"  >&lt;p&gt;Attached revised patch which includes a &lt;tt&gt;IndexSizeTriggerTest.testValidProperties&lt;/tt&gt; test. The test or the code change is currently incomplete i.e. it fails like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: Invalid _PROP constants: [__bytes__, __docs__, violationType, aboveSize, belowSize]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt; - would you perhaps have any thoughts on this ticket?&lt;/p&gt;</comment>
                            <comment id="17057728" author="lochri" created="Thu, 12 Mar 2020 09:02:58 +0000"  >&lt;p&gt;This is where the problem is, it looks like the belowOp and aboveOp are not being added to the validProperties:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; IndexSizeTrigger(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) {
 &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(TriggerEventType.INDEXSIZE, name);
 TriggerUtils.validProperties(validProperties,
 ABOVE_BYTES_PROP, ABOVE_DOCS_PROP, BELOW_BYTES_PROP, BELOW_DOCS_PROP, COLLECTIONS_PROP);
 }&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Without being able to define the Op the trigger is not usable at all.&lt;/p&gt;

&lt;p&gt;I am currently working with 7.4 looking to update to 8.x&lt;/p&gt;</comment>
                            <comment id="17060106" author="ab" created="Mon, 16 Mar 2020 10:36:21 +0000"  >&lt;p&gt;Thanks Christine!&lt;/p&gt;

&lt;p&gt;Christof: this didn&apos;t make it to 8.5, which is now being released, but it will be available in 8.6. The change is straightforward so it should be easy to apply this to 7x.&lt;/p&gt;</comment>
                            <comment id="17158372" author="broustant" created="Wed, 15 Jul 2020 15:10:39 +0000"  >&lt;p&gt;Closing after the 8.6.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12959842" name="SOLR-13264.patch" size="2995" author="cpoerschke" created="Fri, 22 Feb 2019 20:04:24 +0000"/>
                            <attachment id="12959500" name="SOLR-13264.patch" size="856" author="cpoerschke" created="Wed, 20 Feb 2019 21:32:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 17 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi17a0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>