<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:08:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-8249] OverseerTest failures</title>
                <link>https://issues.apache.org/jira/browse/SOLR-8249</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;&lt;a href=&quot;http://jenkins.thetaphi.de/job/Lucene-Solr-trunk-Windows/5377/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.thetaphi.de/job/Lucene-Solr-trunk-Windows/5377/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7989&quot; title=&quot;After a new leader is elected it, it should ensure it&amp;#39;s state is ACTIVE if it has already registered with ZK.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7989&quot;&gt;&lt;del&gt;SOLR-7989&lt;/del&gt;&lt;/a&gt; . &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ichattopadhyaya&quot; class=&quot;user-hover&quot; rel=&quot;ichattopadhyaya&quot;&gt;ichattopadhyaya&lt;/a&gt; we need to fix the testcase&lt;/p&gt;</description>
                <environment></environment>
        <key id="12911165">SOLR-8249</key>
            <summary>OverseerTest failures</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sarowe">Steven Rowe</assignee>
                                    <reporter username="noble.paul">Noble Paul</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Nov 2015 18:34:03 +0000</created>
                <updated>Tue, 15 Dec 2015 13:55:18 +0000</updated>
                            <resolved>Tue, 10 Nov 2015 15:32:15 +0000</resolved>
                                                    <fixVersion>5.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14994425" author="ichattopadhyaya" created="Fri, 6 Nov 2015 21:04:34 +0000"  >&lt;p&gt;The OverseerTest&apos;s testOverseerStatsReset() method sets up Zk, overseer, lets an election happen and at the end of it counts the number of STATE messages sent.&lt;/p&gt;

&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7989&quot; title=&quot;After a new leader is elected it, it should ensure it&amp;#39;s state is ACTIVE if it has already registered with ZK.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7989&quot;&gt;&lt;del&gt;SOLR-7989&lt;/del&gt;&lt;/a&gt;, one extra STATE message is passed in if the replica chosen as the leader was not active. This breaks the test at Jenkins. However, I was not able to reproduce it when I was testing before &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7989&quot; title=&quot;After a new leader is elected it, it should ensure it&amp;#39;s state is ACTIVE if it has already registered with ZK.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7989&quot;&gt;&lt;del&gt;SOLR-7989&lt;/del&gt;&lt;/a&gt; was committed; the reason might be either (a) the replica was active, and hence no extra STATE message was sent, or (b) the assert for STATE messages is being done before the leader election is happening (timing issue).&lt;/p&gt;

&lt;p&gt;I propose that we change the test in the following two ways: (a) before the asserts, wait a while for leader election to have happened. (b) instead of checking for number of STATE messages, we can check for number of LEADER messages.&lt;/p&gt;</comment>
                            <comment id="14994426" author="ichattopadhyaya" created="Fri, 6 Nov 2015 21:06:08 +0000"  >&lt;p&gt;I&apos;m testing this patch to see if it works.&lt;/p&gt;</comment>
                            <comment id="14994437" author="hossman" created="Fri, 6 Nov 2015 21:13:52 +0000"  >&lt;p&gt;these seeds were both failing on trunk pretty reliably for me...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ant test  -Dtestcase=OverseerTest -Dtests.method=testOverseerStatsReset -Dtests.seed=7771E2C402B621D6 -Dtests.slow=true -Dtests.locale=en_AU -Dtests.timezone=Brazil/DeNoronha -Dtests.asserts=true -Dtests.file.encoding=Cp1252

ant test  -Dtestcase=OverseerTest -Dtests.method=testOverseerStatsReset -Dtests.seed=B3178102A7C387E9 -Dtests.multiplier=3 -Dtests.slow=true -Dtests.locale=cy_GB -Dtests.timezone=ECT -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;...with ishan&apos;s patch they both passed for me at least once.  beasting 100 random seeds now.&lt;/p&gt;</comment>
                            <comment id="14994531" author="ichattopadhyaya" created="Fri, 6 Nov 2015 21:58:03 +0000"  >&lt;p&gt;Thanks Hoss.&lt;br/&gt;
My 150 iteration beasting seems to be fine with that patch.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ant beast -Dbeast.iters=150 -Dtestcase=OverseerTest -Dtests.method=testOverseerStatsReset
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If Hoss&apos; beasting passes too, then &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; can you please review / commit this fix?&lt;br/&gt;
Sorry for the trouble!&lt;/p&gt;</comment>
                            <comment id="14994561" author="hossman" created="Fri, 6 Nov 2015 22:17:09 +0000"  >&lt;p&gt;Ok ... beasting both of those seeds 100 times each + 100 random seeds has passed for me.&lt;/p&gt;

&lt;p&gt;But looking at the actual patch i&apos;m really not a fan of this approach &amp;#8211; a blanket &quot;sleep 5 seconds&quot; seems like a really poor solution to the problem.&lt;/p&gt;

&lt;p&gt;If there is no way to &quot;watch&quot; the overseer stats then i think a spin loop with an X second timeout would be a far better solution then a single long sleep...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// psuedo-code
&lt;/span&gt;checkForLeaderStatMaxWaitTime = getCurrentTIme() + X;
&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (getCurrentTIme() &amp;lt; checkForLeaderStatMaxWaitTime) {
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (0 &amp;lt; overseer.getStats().getSuccessCount(OverseerAction.LEADER.toLower())) {
    &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
  }
  sleep(Y); &lt;span class=&quot;code-comment&quot;&gt;// where Y is much less then X
&lt;/span&gt;}
assertEquals(1, (overseer.getStats().getSuccessCount(OverseerAction.LEADER.toLower())));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14994983" author="ichattopadhyaya" created="Sat, 7 Nov 2015 03:23:22 +0000"  >&lt;p&gt;Thanks Hoss. Thanks makes sense, much neater.&lt;br/&gt;
Updated the patch.&lt;/p&gt;</comment>
                            <comment id="14995648" author="jira-bot" created="Sun, 8 Nov 2015 14:42:33 +0000"  >&lt;p&gt;Commit 1713231 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1713231&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1713231&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8249&quot; title=&quot;OverseerTest failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8249&quot;&gt;&lt;del&gt;SOLR-8249&lt;/del&gt;&lt;/a&gt;: Addressing the test failures due to Leader election changes&lt;/p&gt;</comment>
                            <comment id="14995650" author="jira-bot" created="Sun, 8 Nov 2015 14:43:49 +0000"  >&lt;p&gt;Commit 1713232 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1713232&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1713232&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8249&quot; title=&quot;OverseerTest failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8249&quot;&gt;&lt;del&gt;SOLR-8249&lt;/del&gt;&lt;/a&gt;: Addressing the test failures due to Leader election changes&lt;/p&gt;</comment>
                            <comment id="14995672" author="jira-bot" created="Sun, 8 Nov 2015 15:21:51 +0000"  >&lt;p&gt;Commit 1713234 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1713234&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1713234&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8249&quot; title=&quot;OverseerTest failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8249&quot;&gt;&lt;del&gt;SOLR-8249&lt;/del&gt;&lt;/a&gt;: Addressing the test failures due to Leader election changes&lt;/p&gt;</comment>
                            <comment id="14995673" author="jira-bot" created="Sun, 8 Nov 2015 15:22:39 +0000"  >&lt;p&gt;Commit 1713235 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1713235&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1713235&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8249&quot; title=&quot;OverseerTest failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8249&quot;&gt;&lt;del&gt;SOLR-8249&lt;/del&gt;&lt;/a&gt;: Addressing the test failures due to Leader election changes&lt;/p&gt;</comment>
                            <comment id="14995755" author="ichattopadhyaya" created="Sun, 8 Nov 2015 19:07:26 +0000"  >&lt;p&gt;I thought the last patch (which tested for stats on LEADER operation instead of STATE) would fix the failures. However, this is still failing at Steve&apos;s jenkins: &lt;a href=&quot;http://jenkins.sarowe.net/job/Lucene-Solr-tests-trunk/3627/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.sarowe.net/job/Lucene-Solr-tests-trunk/3627/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Here&apos;s the relevant log from that test:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]   2&amp;gt; 200957 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[6F0C5F964D692279]) [    ] o.a.s.c.OverseerAutoReplicaFailoverThread Starting OverseerAutoReplicaFailoverThread autoReplicaFailoverWorkLoopDelay=10000 autoReplicaFailoverWaitAfterExpiration=30000 autoReplicaFailoverBadNodeExpiration=60000
   [junit4]   2&amp;gt; 200957 INFO  (zkCallback-279-thread-2) [    ] o.a.s.c.c.ZkStateReader A live node change: WatchedEvent state:SyncConnected type:NodeChildrenChanged path:/live_nodes, has occurred - updating... (live nodes size: 0)
   [junit4]   2&amp;gt; 200971 INFO  (OverseerCollectionConfigSetProcessor-94830728503164930-127.0.0.1:50527_solr-n_0000000000) [    ] o.a.s.c.OverseerTaskProcessor Process current queue of overseer operations
   [junit4]   2&amp;gt; 201010 INFO  (OverseerStateUpdate-94830728503164930-127.0.0.1:50527_solr-n_0000000000) [    ] o.a.s.c.Overseer Starting to work on the main queue
   [junit4]   2&amp;gt; 201012 INFO  (OverseerStateUpdate-94830728503164930-127.0.0.1:50527_solr-n_0000000000) [    ] o.a.s.c.Overseer processMessage: queueSize: 1, message = {
   [junit4]   2&amp;gt;   &quot;operation&quot;:&quot;state&quot;,
   [junit4]   2&amp;gt;   &quot;state&quot;:&quot;recovering&quot;,
   [junit4]   2&amp;gt;   &quot;node_name&quot;:&quot;node1&quot;,
   [junit4]   2&amp;gt;   &quot;core&quot;:&quot;core1&quot;,
   [junit4]   2&amp;gt;   &quot;core_node_name&quot;:&quot;core_node1&quot;,
   [junit4]   2&amp;gt;   &quot;collection&quot;:&quot;collection1&quot;,
   [junit4]   2&amp;gt;   &quot;numShards&quot;:&quot;1&quot;,
   [junit4]   2&amp;gt;   &quot;base_url&quot;:&quot;http://node1/solr/&quot;} current state version: 0
   [junit4]   2&amp;gt; 201012 INFO  (OverseerStateUpdate-94830728503164930-127.0.0.1:50527_solr-n_0000000000) [    ] o.a.s.c.o.ReplicaMutator Update state numShards=1 message={
   [junit4]   2&amp;gt;   &quot;operation&quot;:&quot;state&quot;,
   [junit4]   2&amp;gt;   &quot;state&quot;:&quot;recovering&quot;,
   [junit4]   2&amp;gt;   &quot;node_name&quot;:&quot;node1&quot;,
   [junit4]   2&amp;gt;   &quot;core&quot;:&quot;core1&quot;,
   [junit4]   2&amp;gt;   &quot;core_node_name&quot;:&quot;core_node1&quot;,
   [junit4]   2&amp;gt;   &quot;collection&quot;:&quot;collection1&quot;,
   [junit4]   2&amp;gt;   &quot;numShards&quot;:&quot;1&quot;,
   [junit4]   2&amp;gt;   &quot;base_url&quot;:&quot;http://node1/solr/&quot;}
   [junit4]   2&amp;gt; 201012 INFO  (OverseerStateUpdate-94830728503164930-127.0.0.1:50527_solr-n_0000000000) [    ] o.a.s.c.o.ClusterStateMutator building a new cName: collection1
   [junit4]   2&amp;gt; 201013 INFO  (OverseerStateUpdate-94830728503164930-127.0.0.1:50527_solr-n_0000000000) [    ] o.a.s.c.o.ReplicaMutator Assigning new node to shard shard=shard1
   [junit4]   2&amp;gt; 201013 INFO  (zkCallback-278-thread-1) [    ] o.a.s.c.c.ZkStateReader A cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:/clusterstate.json, has occurred - updating... (live nodes size: 1)
   [junit4]   2&amp;gt; 201013 INFO  (zkCallback-279-thread-2) [    ] o.a.s.c.c.ZkStateReader A cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:/clusterstate.json, has occurred - updating... (live nodes size: 1)
   [junit4]   2&amp;gt; 201481 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[6F0C5F964D692279]) [    ] o.a.s.c.c.SolrZkClient makePath: /collections/collection1/leader_elect/shard1/election
   [junit4]   2&amp;gt; 201481 INFO  (zkCallback-278-thread-1) [    ] o.a.s.c.c.ZkStateReader A collections change: WatchedEvent state:SyncConnected type:NodeChildrenChanged path:/collections, has occurred - updating...
   [junit4]   2&amp;gt; 201481 INFO  (zkCallback-279-thread-2) [    ] o.a.s.c.c.ZkStateReader A collections change: WatchedEvent state:SyncConnected type:NodeChildrenChanged path:/collections, has occurred - updating...
   [junit4]   2&amp;gt; 201483 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[6F0C5F964D692279]) [    ] o.a.s.c.LeaderElector Joined leadership election with path: /collections/collection1/leader_elect/shard1/election/94830728503164931-node1_core1-n_0000000000
   [junit4]   2&amp;gt; 201483 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[6F0C5F964D692279]) [    ] o.a.s.c.c.SolrZkClient makePath: /collections/collection1/leaders/shard1
   [junit4]   2&amp;gt; 201484 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[6F0C5F964D692279]) [    ] o.a.s.c.ShardLeaderElectionContextBase Creating leader registration node
   [junit4]   2&amp;gt; 201486 INFO  (OverseerStateUpdate-94830728503164930-127.0.0.1:50527_solr-n_0000000000) [    ] o.a.s.c.Overseer processMessage: queueSize: 1, message = {
   [junit4]   2&amp;gt;   &quot;operation&quot;:&quot;state&quot;,
   [junit4]   2&amp;gt;   &quot;state&quot;:&quot;active&quot;,
   [junit4]   2&amp;gt;   &quot;shard&quot;:&quot;shard1&quot;,
   [junit4]   2&amp;gt;   &quot;collection&quot;:&quot;collection1&quot;,
   [junit4]   2&amp;gt;   &quot;base_url&quot;:&quot;http://node1/solr/&quot;,
   [junit4]   2&amp;gt;   &quot;node_name&quot;:&quot;node1&quot;,
   [junit4]   2&amp;gt;   &quot;core_node_name&quot;:&quot;core_node1&quot;,
   [junit4]   2&amp;gt;   &quot;core&quot;:&quot;core1&quot;} current state version: 1
   [junit4]   2&amp;gt; 201487 INFO  (OverseerStateUpdate-94830728503164930-127.0.0.1:50527_solr-n_0000000000) [    ] o.a.s.c.o.ReplicaMutator Update state numShards=null message={
   [junit4]   2&amp;gt;   &quot;operation&quot;:&quot;state&quot;,
   [junit4]   2&amp;gt;   &quot;state&quot;:&quot;active&quot;,
   [junit4]   2&amp;gt;   &quot;shard&quot;:&quot;shard1&quot;,
   [junit4]   2&amp;gt;   &quot;collection&quot;:&quot;collection1&quot;,
   [junit4]   2&amp;gt;   &quot;base_url&quot;:&quot;http://node1/solr/&quot;,
   [junit4]   2&amp;gt;   &quot;node_name&quot;:&quot;node1&quot;,
   [junit4]   2&amp;gt;   &quot;core_node_name&quot;:&quot;core_node1&quot;,
   [junit4]   2&amp;gt;   &quot;core&quot;:&quot;core1&quot;}
   [junit4]   2&amp;gt; 201488 INFO  (OverseerStateUpdate-94830728503164930-127.0.0.1:50527_solr-n_0000000000) [    ] o.a.s.c.Overseer processMessage: queueSize: 1, message = {
   [junit4]   2&amp;gt;   &quot;operation&quot;:&quot;leader&quot;,
   [junit4]   2&amp;gt;   &quot;shard&quot;:&quot;shard1&quot;,
   [junit4]   2&amp;gt;   &quot;collection&quot;:&quot;collection1&quot;,
   [junit4]   2&amp;gt;   &quot;base_url&quot;:&quot;http://node1/solr/&quot;,
   [junit4]   2&amp;gt;   &quot;core&quot;:&quot;core1&quot;} current state version: 1
   [junit4]   2&amp;gt; 201489 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[6F0C5F964D692279]) [    ] o.a.s.c.Overseer Overseer (id=94830728503164930-127.0.0.1:50527_solr-n_0000000000) closing
   [junit4]   2&amp;gt; 201489 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[6F0C5F964D692279]) [    ] o.a.s.c.ElectionContext Canceling election /overseer_elect/election/94830728503164930-127.0.0.1:50527_solr-n_0000000000
   [junit4]   2&amp;gt; 201490 INFO  (OverseerStateUpdate-94830728503164930-127.0.0.1:50527_solr-n_0000000000) [    ] o.a.s.c.Overseer Overseer Loop exiting : 127.0.0.1:50527_solr
   [junit4]   2&amp;gt; 201491 INFO  (OverseerExitThread) [    ] o.a.s.c.Overseer I&apos;m exiting , but I&apos;m still the leader
   [junit4]   2&amp;gt; 201491 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[6F0C5F964D692279]) [    ] o.a.s.c.LeaderElector Joined leadership election with path: /overseer_elect/election/94830728503164930-127.0.0.1:50527_solr-n_0000000001
   [junit4]   2&amp;gt; 201492 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[6F0C5F964D692279]) [    ] o.a.s.c.OverseerElectionContext I am going to be the leader 127.0.0.1:50527_solr
   [junit4]   2&amp;gt; 201492 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[6F0C5F964D692279]) [    ] o.a.s.c.c.SolrZkClient makePath: /overseer_elect/leader
   [junit4]   2&amp;gt; 201492 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[6F0C5F964D692279]) [    ] o.a.s.c.Overseer Overseer (id=94830728503164930-127.0.0.1:50527_solr-n_0000000001) starting
   [junit4]   2&amp;gt; 201494 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[6F0C5F964D692279]) [    ] o.a.s.c.OverseerAutoReplicaFailoverThread Starting OverseerAutoReplicaFailoverThread autoReplicaFailoverWorkLoopDelay=10000 autoReplicaFailoverWaitAfterExpiration=30000 autoReplicaFailoverBadNodeExpiration=60000
   [junit4]   2&amp;gt; 201538 INFO  (OverseerStateUpdate-94830728503164930-127.0.0.1:50527_solr-n_0000000001) [    ] o.a.s.c.Overseer Starting to work on the main queue
   [junit4]   2&amp;gt; 201541 INFO  (OverseerStateUpdate-94830728503164930-127.0.0.1:50527_solr-n_0000000001) [    ] o.a.s.c.Overseer processMessage: workQueueSize: 2, message = {
   [junit4]   2&amp;gt;   &quot;operation&quot;:&quot;state&quot;,
   [junit4]   2&amp;gt;   &quot;state&quot;:&quot;active&quot;,
   [junit4]   2&amp;gt;   &quot;shard&quot;:&quot;shard1&quot;,
   [junit4]   2&amp;gt;   &quot;collection&quot;:&quot;collection1&quot;,
   [junit4]   2&amp;gt;   &quot;base_url&quot;:&quot;http://node1/solr/&quot;,
   [junit4]   2&amp;gt;   &quot;node_name&quot;:&quot;node1&quot;,
   [junit4]   2&amp;gt;   &quot;core_node_name&quot;:&quot;core_node1&quot;,
   [junit4]   2&amp;gt;   &quot;core&quot;:&quot;core1&quot;}
   [junit4]   2&amp;gt; 201541 INFO  (OverseerStateUpdate-94830728503164930-127.0.0.1:50527_solr-n_0000000001) [    ] o.a.s.c.o.ReplicaMutator Update state numShards=null message={
   [junit4]   2&amp;gt;   &quot;operation&quot;:&quot;state&quot;,
   [junit4]   2&amp;gt;   &quot;state&quot;:&quot;active&quot;,
   [junit4]   2&amp;gt;   &quot;shard&quot;:&quot;shard1&quot;,
   [junit4]   2&amp;gt;   &quot;collection&quot;:&quot;collection1&quot;,
   [junit4]   2&amp;gt;   &quot;base_url&quot;:&quot;http://node1/solr/&quot;,
   [junit4]   2&amp;gt;   &quot;node_name&quot;:&quot;node1&quot;,
   [junit4]   2&amp;gt;   &quot;core_node_name&quot;:&quot;core_node1&quot;,
   [junit4]   2&amp;gt;   &quot;core&quot;:&quot;core1&quot;}
   [junit4]   2&amp;gt; 201541 INFO  (zkCallback-279-thread-2) [    ] o.a.s.c.c.ZkStateReader A cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:/clusterstate.json, has occurred - updating... (live nodes size: 1)
   [junit4]   2&amp;gt; 201541 INFO  (zkCallback-278-thread-1) [    ] o.a.s.c.c.ZkStateReader A cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:/clusterstate.json, has occurred - updating... (live nodes size: 1)
   [junit4]   2&amp;gt; 201542 INFO  (OverseerStateUpdate-94830728503164930-127.0.0.1:50527_solr-n_0000000001) [    ] o.a.s.c.Overseer processMessage: workQueueSize: 2, message = {
   [junit4]   2&amp;gt;   &quot;operation&quot;:&quot;leader&quot;,
   [junit4]   2&amp;gt;   &quot;shard&quot;:&quot;shard1&quot;,
   [junit4]   2&amp;gt;   &quot;collection&quot;:&quot;collection1&quot;,
   [junit4]   2&amp;gt;   &quot;base_url&quot;:&quot;http://node1/solr/&quot;,
   [junit4]   2&amp;gt;   &quot;core&quot;:&quot;core1&quot;}
   [junit4]   2&amp;gt; 201542 INFO  (zkCallback-279-thread-2) [    ] o.a.s.c.c.ZkStateReader A cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:/clusterstate.json, has occurred - updating... (live nodes size: 1)
   [junit4]   2&amp;gt; 201542 INFO  (OverseerCollectionConfigSetProcessor-94830728503164930-127.0.0.1:50527_solr-n_0000000001) [    ] o.a.s.c.OverseerTaskProcessor Process current queue of overseer operations
   [junit4]   2&amp;gt; 201543 INFO  (zkCallback-278-thread-1) [    ] o.a.s.c.c.ZkStateReader A cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:/clusterstate.json, has occurred - updating... (live nodes size: 1)
   [junit4]   2&amp;gt; 201551 INFO  (zkCallback-278-thread-1) [    ] o.a.s.c.c.ZkStateReader A live node change: WatchedEvent state:SyncConnected type:NodeChildrenChanged path:/live_nodes, has occurred - updating... (live nodes size: 1)
   [junit4]   2&amp;gt; 201551 INFO  (zkCallback-279-thread-2) [    ] o.a.s.c.c.ZkStateReader A live node change: WatchedEvent state:SyncConnected type:NodeChildrenChanged path:/live_nodes, has occurred - updating... (live nodes size: 1)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This failed because there was a second leader election (or maybe the overseer queue messages from the first leader election was reprocessed after the overseer was shutdown) between the two asserts. I have not been able to reproduce it myself, but Steve&apos;s jenkins is a very fast machine.&lt;/p&gt;

&lt;p&gt;Now, I am thinking of changing tack, and switching back to testing for STATE message stats. The problem was initially that because there was a RECOVERING STATE message passed in, the leader election sent in an extra ACTIVE message (owing to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7989&quot; title=&quot;After a new leader is elected it, it should ensure it&amp;#39;s state is ACTIVE if it has already registered with ZK.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7989&quot;&gt;&lt;del&gt;SOLR-7989&lt;/del&gt;&lt;/a&gt;). However, if we send in ACTIVE instead of RECOVERING, there won&apos;t be another STATE message sent in during leader election (even if there is a second leader election). This, I think will fix the test. Attaching the patch for this.&lt;/p&gt;

&lt;p&gt;I&apos;ll seek Steve&apos;s help and beast it on his machine to be sure.&lt;/p&gt;</comment>
                            <comment id="14995772" author="ichattopadhyaya" created="Sun, 8 Nov 2015 19:39:17 +0000"  >&lt;p&gt;If someone has any other idea how should I go about changing this test &lt;tt&gt;OverseerTest.testOverseerStatsReset()&lt;/tt&gt; so as to make it work even after the &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7989&quot; title=&quot;After a new leader is elected it, it should ensure it&amp;#39;s state is ACTIVE if it has already registered with ZK.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7989&quot;&gt;&lt;del&gt;SOLR-7989&lt;/del&gt;&lt;/a&gt; fix, it is most welcome.&lt;/p&gt;</comment>
                            <comment id="14996065" author="steve_rowe" created="Mon, 9 Nov 2015 05:49:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ichattopadhyaya&quot; class=&quot;user-hover&quot; rel=&quot;ichattopadhyaya&quot;&gt;ichattopadhyaya&lt;/a&gt;, I beasted your latest patch against trunk with random seeds, then beasted with the failing seed that was found. I&apos;m attaching test output from a fixed seed - here&apos;s the cmdline I used:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ant beast -Dbeast.iters=100 -Dtests.iters=1 -Dtests.dups=10 -Dtestcase=OverseerTest -Dtests.seed=9D49703E5BEE447B 2&amp;gt;&amp;amp;1 | tee ../../test.output
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There was a failure on round 6.&lt;/p&gt;

&lt;p&gt;I separately beasted unpatched trunk with random seeds and it too had a failure, but that&apos;s expected, since my Jenkins has been seeing failures.&lt;/p&gt;</comment>
                            <comment id="14996096" author="ichattopadhyaya" created="Mon, 9 Nov 2015 06:33:27 +0000"  >&lt;p&gt;Thanks Steve! It seems an unrelated test from the same suite failed in your beast.&lt;br/&gt;
The failing test is testExternalClusterStateChangeBehavior(), which has nothing to do the &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7989&quot; title=&quot;After a new leader is elected it, it should ensure it&amp;#39;s state is ACTIVE if it has already registered with ZK.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7989&quot;&gt;&lt;del&gt;SOLR-7989&lt;/del&gt;&lt;/a&gt; changes. The reason why I think the test failed is because some STATE  messages were sent to the overseer queue and the state of the replica is tested without waiting sufficiently for the messages to have been processed. I&apos;ll raise a different patch to fix this.&lt;/p&gt;

&lt;p&gt;Meanwhile, Steve, is it please possible to re-run the beast by adding the test method too? &lt;tt&gt;-Dtests.method=testOverseerStatsReset&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="14996991" author="steve_rowe" created="Mon, 9 Nov 2015 17:49:09 +0000"  >&lt;p&gt;I&apos;ve been running the following, over 5000 iterations each for patched and unpatched trunk, and only had one failure on unpatched - I&apos;ll include the log below.  Here&apos;s the cmdline I&apos;m using:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;(for a in {1..1000} ; do ant test -Dtestcase=OverseerTest -Dtests.method=testOverseerStatsReset -Dtests.dups=10 -Dtests.jvms=10 ; done) 2&amp;gt;&amp;amp;1 | tee ../../test.output
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here&apos;s the failure from unpatched trunk:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4] Suite: org.apache.solr.cloud.OverseerTest
   [junit4]   2&amp;gt; Creating dataDir: /home/sarowe/svn/lucene/dev/trunk/solr/build/solr-core/test/J3/temp/solr.cloud.OverseerTest_D0EFDBDB7BF104A-001/init-core-data-001
   [junit4]   2&amp;gt; 0    INFO  (SUITE-OverseerTest-seed#[D0EFDBDB7BF104A]-worker) [    ] o.a.s.SolrTestCaseJ4 Randomized ssl (false) and clientAuth (true)
   [junit4]   2&amp;gt; 69   INFO  (SUITE-OverseerTest-seed#[D0EFDBDB7BF104A]-worker) [    ] o.a.s.SolrTestCaseJ4 ####initCore
   [junit4]   2&amp;gt; 72   INFO  (SUITE-OverseerTest-seed#[D0EFDBDB7BF104A]-worker) [    ] o.a.s.SolrTestCaseJ4 ####initCore end
   [junit4]   2&amp;gt; 83   INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.SolrTestCaseJ4 ###Starting testOverseerStatsReset
   [junit4]   2&amp;gt; 92   INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.ZkTestServer STARTING ZK TEST SERVER
   [junit4]   2&amp;gt; 105  INFO  (Thread-1) [    ] o.a.s.c.ZkTestServer client port:0.0.0.0/0.0.0.0:0
   [junit4]   2&amp;gt; 106  INFO  (Thread-1) [    ] o.a.s.c.ZkTestServer Starting server
   [junit4]   2&amp;gt; 194  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.ZkTestServer start zk server on port:36981
   [junit4]   2&amp;gt; 213  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient Using default ZkCredentialsProvider
   [junit4]   2&amp;gt; 245  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.ConnectionManager Waiting for client to connect to ZooKeeper
   [junit4]   2&amp;gt; 384  INFO  (zkCallback-1-thread-1) [    ] o.a.s.c.c.ConnectionManager Watcher org.apache.solr.common.cloud.ConnectionManager@121063b4 name:ZooKeeperConnection Watcher:127.0.0.1:36981 got event WatchedEvent state:SyncConnected type:None path:null path:null type:None
   [junit4]   2&amp;gt; 385  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.ConnectionManager Client is connected to ZooKeeper
   [junit4]   2&amp;gt; 386  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient Using default ZkACLProvider
   [junit4]   2&amp;gt; 414  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient Using default ZkCredentialsProvider
   [junit4]   2&amp;gt; 415  WARN  (NIOServerCxn.Factory:0.0.0.0/0.0.0.0:0) [    ] o.a.z.s.NIOServerCnxn caught end of stream exception
   [junit4]   2&amp;gt; EndOfStreamException: Unable to read additional data from client sessionid 0x150ed0c2d8d0000, likely client has closed socket
   [junit4]   2&amp;gt; 	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:228)
   [junit4]   2&amp;gt; 	at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:208)
   [junit4]   2&amp;gt; 	at java.lang.Thread.run(Thread.java:745)
   [junit4]   2&amp;gt; 454  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.ConnectionManager Waiting for client to connect to ZooKeeper
   [junit4]   2&amp;gt; 457  INFO  (zkCallback-2-thread-1) [    ] o.a.s.c.c.ConnectionManager Watcher org.apache.solr.common.cloud.ConnectionManager@4c1e7367 name:ZooKeeperConnection Watcher:127.0.0.1:36981 got event WatchedEvent state:SyncConnected type:None path:null path:null type:None
   [junit4]   2&amp;gt; 457  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.ConnectionManager Client is connected to ZooKeeper
   [junit4]   2&amp;gt; 457  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient Using default ZkACLProvider
   [junit4]   2&amp;gt; 458  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient makePath: /solr
   [junit4]   2&amp;gt; 467  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient Using default ZkCredentialsProvider
   [junit4]   2&amp;gt; 468  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.ConnectionManager Waiting for client to connect to ZooKeeper
   [junit4]   2&amp;gt; 470  INFO  (zkCallback-3-thread-1) [    ] o.a.s.c.c.ConnectionManager Watcher org.apache.solr.common.cloud.ConnectionManager@485ae506 name:ZooKeeperConnection Watcher:127.0.0.1:36981/solr got event WatchedEvent state:SyncConnected type:None path:null path:null type:None
   [junit4]   2&amp;gt; 470  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.ConnectionManager Client is connected to ZooKeeper
   [junit4]   2&amp;gt; 470  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient Using default ZkACLProvider
   [junit4]   2&amp;gt; 488  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient makePath: /live_nodes
   [junit4]   2&amp;gt; 496  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient makePath: /collections
   [junit4]   2&amp;gt; 498  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient makePath: /aliases.json
   [junit4]   2&amp;gt; 500  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient makePath: /clusterstate.json
   [junit4]   2&amp;gt; 503  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient makePath: /security.json
   [junit4]   2&amp;gt; 509  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.ZkStateReader Updating cluster state from ZooKeeper... 
   [junit4]   2&amp;gt; 534  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient Using default ZkCredentialsProvider
   [junit4]   2&amp;gt; 541  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.ConnectionManager Waiting for client to connect to ZooKeeper
   [junit4]   2&amp;gt; 545  INFO  (zkCallback-4-thread-1) [    ] o.a.s.c.c.ConnectionManager Watcher org.apache.solr.common.cloud.ConnectionManager@3e920eb0 name:ZooKeeperConnection Watcher:127.0.0.1:36981/solr got event WatchedEvent state:SyncConnected type:None path:null path:null type:None
   [junit4]   2&amp;gt; 547  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.ConnectionManager Client is connected to ZooKeeper
   [junit4]   2&amp;gt; 547  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient Using default ZkACLProvider
   [junit4]   2&amp;gt; 550  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.ZkStateReader Updating cluster state from ZooKeeper... 
   [junit4]   2&amp;gt; 552  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient makePath: /live_nodes/node1
   [junit4]   2&amp;gt; 557  INFO  (zkCallback-4-thread-1) [    ] o.a.s.c.c.ZkStateReader A live node change: WatchedEvent state:SyncConnected type:NodeChildrenChanged path:/live_nodes, has occurred - updating... (live nodes size: 0)
   [junit4]   2&amp;gt; 561  INFO  (zkCallback-3-thread-1) [    ] o.a.s.c.c.ZkStateReader A live node change: WatchedEvent state:SyncConnected type:NodeChildrenChanged path:/live_nodes, has occurred - updating... (live nodes size: 0)
   [junit4]   2&amp;gt; 767  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.u.UpdateShardHandler Creating UpdateShardHandler HTTP client with params: socketTimeout=600000&amp;amp;connTimeout=60000&amp;amp;retry=true
   [junit4]   2&amp;gt; 846  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient makePath: /overseer_elect
   [junit4]   2&amp;gt; 850  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient makePath: /overseer_elect/election
   [junit4]   2&amp;gt; 858  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.Overseer Overseer (id=null) closing
   [junit4]   2&amp;gt; 862  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.LeaderElector Joined leadership election with path: /overseer_elect/election/94836228734386178-127.0.0.1:36981_solr-n_0000000000
   [junit4]   2&amp;gt; 877  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.OverseerElectionContext I am going to be the leader 127.0.0.1:36981_solr
   [junit4]   2&amp;gt; 881  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient makePath: /overseer_elect/leader
   [junit4]   2&amp;gt; 885  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.Overseer Overseer (id=94836228734386178-127.0.0.1:36981_solr-n_0000000000) starting
   [junit4]   2&amp;gt; 908  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient makePath: /overseer/queue
   [junit4]   2&amp;gt; 912  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient makePath: /overseer/queue-work
   [junit4]   2&amp;gt; 929  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient makePath: /overseer/collection-map-failure
   [junit4]   2&amp;gt; 932  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient makePath: /overseer/collection-map-running
   [junit4]   2&amp;gt; 935  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient makePath: /overseer/collection-map-completed
   [junit4]   2&amp;gt; 944  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient makePath: /overseer/collection-queue-work
   [junit4]   2&amp;gt; 965  INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.OverseerAutoReplicaFailoverThread Starting OverseerAutoReplicaFailoverThread autoReplicaFailoverWorkLoopDelay=10000 autoReplicaFailoverWaitAfterExpiration=30000 autoReplicaFailoverBadNodeExpiration=60000
   [junit4]   2&amp;gt; 1062 INFO  (OverseerCollectionConfigSetProcessor-94836228734386178-127.0.0.1:36981_solr-n_0000000000) [    ] o.a.s.c.OverseerTaskProcessor Process current queue of overseer operations
   [junit4]   2&amp;gt; 1079 INFO  (OverseerStateUpdate-94836228734386178-127.0.0.1:36981_solr-n_0000000000) [    ] o.a.s.c.Overseer Starting to work on the main queue
   [junit4]   2&amp;gt; 1087 INFO  (OverseerStateUpdate-94836228734386178-127.0.0.1:36981_solr-n_0000000000) [    ] o.a.s.c.Overseer processMessage: queueSize: 1, message = {
   [junit4]   2&amp;gt;   &quot;operation&quot;:&quot;state&quot;,
   [junit4]   2&amp;gt;   &quot;state&quot;:&quot;recovering&quot;,
   [junit4]   2&amp;gt;   &quot;node_name&quot;:&quot;node1&quot;,
   [junit4]   2&amp;gt;   &quot;core&quot;:&quot;core1&quot;,
   [junit4]   2&amp;gt;   &quot;core_node_name&quot;:&quot;core_node1&quot;,
   [junit4]   2&amp;gt;   &quot;collection&quot;:&quot;collection1&quot;,
   [junit4]   2&amp;gt;   &quot;numShards&quot;:&quot;1&quot;,
   [junit4]   2&amp;gt;   &quot;base_url&quot;:&quot;http://node1/solr/&quot;} current state version: 0
   [junit4]   2&amp;gt; 1094 INFO  (OverseerStateUpdate-94836228734386178-127.0.0.1:36981_solr-n_0000000000) [    ] o.a.s.c.o.ReplicaMutator Update state numShards=1 message={
   [junit4]   2&amp;gt;   &quot;operation&quot;:&quot;state&quot;,
   [junit4]   2&amp;gt;   &quot;state&quot;:&quot;recovering&quot;,
   [junit4]   2&amp;gt;   &quot;node_name&quot;:&quot;node1&quot;,
   [junit4]   2&amp;gt;   &quot;core&quot;:&quot;core1&quot;,
   [junit4]   2&amp;gt;   &quot;core_node_name&quot;:&quot;core_node1&quot;,
   [junit4]   2&amp;gt;   &quot;collection&quot;:&quot;collection1&quot;,
   [junit4]   2&amp;gt;   &quot;numShards&quot;:&quot;1&quot;,
   [junit4]   2&amp;gt;   &quot;base_url&quot;:&quot;http://node1/solr/&quot;}
   [junit4]   2&amp;gt; 1095 INFO  (OverseerStateUpdate-94836228734386178-127.0.0.1:36981_solr-n_0000000000) [    ] o.a.s.c.o.ClusterStateMutator building a new cName: collection1
   [junit4]   2&amp;gt; 1102 INFO  (OverseerStateUpdate-94836228734386178-127.0.0.1:36981_solr-n_0000000000) [    ] o.a.s.c.o.ReplicaMutator Assigning new node to shard shard=shard1
   [junit4]   2&amp;gt; 1107 INFO  (zkCallback-4-thread-1) [    ] o.a.s.c.c.ZkStateReader A cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:/clusterstate.json, has occurred - updating... (live nodes size: 1)
   [junit4]   2&amp;gt; 1107 INFO  (zkCallback-3-thread-1) [    ] o.a.s.c.c.ZkStateReader A cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:/clusterstate.json, has occurred - updating... (live nodes size: 1)
   [junit4]   2&amp;gt; 1578 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient makePath: /collections/collection1/leader_elect/shard1/election
   [junit4]   2&amp;gt; 1599 INFO  (zkCallback-3-thread-1) [    ] o.a.s.c.c.ZkStateReader A collections change: WatchedEvent state:SyncConnected type:NodeChildrenChanged path:/collections, has occurred - updating...
   [junit4]   2&amp;gt; 1599 INFO  (zkCallback-4-thread-1) [    ] o.a.s.c.c.ZkStateReader A collections change: WatchedEvent state:SyncConnected type:NodeChildrenChanged path:/collections, has occurred - updating...
   [junit4]   2&amp;gt; 1607 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.LeaderElector Joined leadership election with path: /collections/collection1/leader_elect/shard1/election/94836228734386179-node1_core1-n_0000000000
   [junit4]   2&amp;gt; 1611 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient makePath: /collections/collection1/leaders/shard1
   [junit4]   2&amp;gt; 1616 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.ShardLeaderElectionContextBase Creating leader registration node
   [junit4]   2&amp;gt; 1628 INFO  (OverseerStateUpdate-94836228734386178-127.0.0.1:36981_solr-n_0000000000) [    ] o.a.s.c.Overseer processMessage: queueSize: 1, message = {
   [junit4]   2&amp;gt;   &quot;operation&quot;:&quot;state&quot;,
   [junit4]   2&amp;gt;   &quot;state&quot;:&quot;active&quot;,
   [junit4]   2&amp;gt;   &quot;shard&quot;:&quot;shard1&quot;,
   [junit4]   2&amp;gt;   &quot;collection&quot;:&quot;collection1&quot;,
   [junit4]   2&amp;gt;   &quot;base_url&quot;:&quot;http://node1/solr/&quot;,
   [junit4]   2&amp;gt;   &quot;node_name&quot;:&quot;node1&quot;,
   [junit4]   2&amp;gt;   &quot;core_node_name&quot;:&quot;core_node1&quot;,
   [junit4]   2&amp;gt;   &quot;core&quot;:&quot;core1&quot;} current state version: 1
   [junit4]   2&amp;gt; 1629 INFO  (OverseerStateUpdate-94836228734386178-127.0.0.1:36981_solr-n_0000000000) [    ] o.a.s.c.o.ReplicaMutator Update state numShards=null message={
   [junit4]   2&amp;gt;   &quot;operation&quot;:&quot;state&quot;,
   [junit4]   2&amp;gt;   &quot;state&quot;:&quot;active&quot;,
   [junit4]   2&amp;gt;   &quot;shard&quot;:&quot;shard1&quot;,
   [junit4]   2&amp;gt;   &quot;collection&quot;:&quot;collection1&quot;,
   [junit4]   2&amp;gt;   &quot;base_url&quot;:&quot;http://node1/solr/&quot;,
   [junit4]   2&amp;gt;   &quot;node_name&quot;:&quot;node1&quot;,
   [junit4]   2&amp;gt;   &quot;core_node_name&quot;:&quot;core_node1&quot;,
   [junit4]   2&amp;gt;   &quot;core&quot;:&quot;core1&quot;}
   [junit4]   2&amp;gt; 1646 INFO  (OverseerStateUpdate-94836228734386178-127.0.0.1:36981_solr-n_0000000000) [    ] o.a.s.c.Overseer processMessage: queueSize: 1, message = {
   [junit4]   2&amp;gt;   &quot;operation&quot;:&quot;leader&quot;,
   [junit4]   2&amp;gt;   &quot;shard&quot;:&quot;shard1&quot;,
   [junit4]   2&amp;gt;   &quot;collection&quot;:&quot;collection1&quot;,
   [junit4]   2&amp;gt;   &quot;base_url&quot;:&quot;http://node1/solr/&quot;,
   [junit4]   2&amp;gt;   &quot;core&quot;:&quot;core1&quot;} current state version: 1
   [junit4]   2&amp;gt; 1665 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.Overseer Overseer (id=94836228734386178-127.0.0.1:36981_solr-n_0000000000) closing
   [junit4]   2&amp;gt; 1666 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.ElectionContext Canceling election /overseer_elect/election/94836228734386178-127.0.0.1:36981_solr-n_0000000000
   [junit4]   2&amp;gt; 1675 INFO  (OverseerStateUpdate-94836228734386178-127.0.0.1:36981_solr-n_0000000000) [    ] o.a.s.c.Overseer Overseer Loop exiting : 127.0.0.1:36981_solr
   [junit4]   2&amp;gt; 1676 INFO  (zkCallback-3-thread-1) [    ] o.a.s.c.c.ZkStateReader A cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:/clusterstate.json, has occurred - updating... (live nodes size: 1)
   [junit4]   2&amp;gt; 1677 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.LeaderElector Joined leadership election with path: /overseer_elect/election/94836228734386178-127.0.0.1:36981_solr-n_0000000001
   [junit4]   2&amp;gt; 1677 INFO  (zkCallback-4-thread-1) [    ] o.a.s.c.c.ZkStateReader A cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:/clusterstate.json, has occurred - updating... (live nodes size: 1)
   [junit4]   2&amp;gt; 1682 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.OverseerElectionContext I am going to be the leader 127.0.0.1:36981_solr
   [junit4]   2&amp;gt; 1683 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.c.SolrZkClient makePath: /overseer_elect/leader
   [junit4]   2&amp;gt; 1683 INFO  (OverseerExitThread) [    ] o.a.s.c.Overseer I&apos;m exiting , but I&apos;m still the leader
   [junit4]   2&amp;gt; 1686 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.Overseer Overseer (id=94836228734386178-127.0.0.1:36981_solr-n_0000000001) starting
   [junit4]   2&amp;gt; 1705 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.OverseerAutoReplicaFailoverThread Starting OverseerAutoReplicaFailoverThread autoReplicaFailoverWorkLoopDelay=10000 autoReplicaFailoverWaitAfterExpiration=30000 autoReplicaFailoverBadNodeExpiration=60000
   [junit4]   2&amp;gt; 1705 INFO  (OverseerCollectionConfigSetProcessor-94836228734386178-127.0.0.1:36981_solr-n_0000000001) [    ] o.a.s.c.OverseerTaskProcessor Process current queue of overseer operations
   [junit4]   2&amp;gt; 1706 INFO  (OverseerStateUpdate-94836228734386178-127.0.0.1:36981_solr-n_0000000001) [    ] o.a.s.c.Overseer Starting to work on the main queue
   [junit4]   2&amp;gt; 1708 INFO  (OverseerStateUpdate-94836228734386178-127.0.0.1:36981_solr-n_0000000001) [    ] o.a.s.c.Overseer processMessage: workQueueSize: 2, message = {
   [junit4]   2&amp;gt;   &quot;operation&quot;:&quot;state&quot;,
   [junit4]   2&amp;gt;   &quot;state&quot;:&quot;active&quot;,
   [junit4]   2&amp;gt;   &quot;shard&quot;:&quot;shard1&quot;,
   [junit4]   2&amp;gt;   &quot;collection&quot;:&quot;collection1&quot;,
   [junit4]   2&amp;gt;   &quot;base_url&quot;:&quot;http://node1/solr/&quot;,
   [junit4]   2&amp;gt;   &quot;node_name&quot;:&quot;node1&quot;,
   [junit4]   2&amp;gt;   &quot;core_node_name&quot;:&quot;core_node1&quot;,
   [junit4]   2&amp;gt;   &quot;core&quot;:&quot;core1&quot;}
   [junit4]   2&amp;gt; 1709 INFO  (OverseerStateUpdate-94836228734386178-127.0.0.1:36981_solr-n_0000000001) [    ] o.a.s.c.o.ReplicaMutator Update state numShards=null message={
   [junit4]   2&amp;gt;   &quot;operation&quot;:&quot;state&quot;,
   [junit4]   2&amp;gt;   &quot;state&quot;:&quot;active&quot;,
   [junit4]   2&amp;gt;   &quot;shard&quot;:&quot;shard1&quot;,
   [junit4]   2&amp;gt;   &quot;collection&quot;:&quot;collection1&quot;,
   [junit4]   2&amp;gt;   &quot;base_url&quot;:&quot;http://node1/solr/&quot;,
   [junit4]   2&amp;gt;   &quot;node_name&quot;:&quot;node1&quot;,
   [junit4]   2&amp;gt;   &quot;core_node_name&quot;:&quot;core_node1&quot;,
   [junit4]   2&amp;gt;   &quot;core&quot;:&quot;core1&quot;}
   [junit4]   2&amp;gt; 1709 INFO  (zkCallback-3-thread-1) [    ] o.a.s.c.c.ZkStateReader A cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:/clusterstate.json, has occurred - updating... (live nodes size: 1)
   [junit4]   2&amp;gt; 1709 INFO  (zkCallback-4-thread-1) [    ] o.a.s.c.c.ZkStateReader A cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:/clusterstate.json, has occurred - updating... (live nodes size: 1)
   [junit4]   2&amp;gt; 1711 INFO  (OverseerStateUpdate-94836228734386178-127.0.0.1:36981_solr-n_0000000001) [    ] o.a.s.c.Overseer processMessage: workQueueSize: 2, message = {
   [junit4]   2&amp;gt;   &quot;operation&quot;:&quot;leader&quot;,
   [junit4]   2&amp;gt;   &quot;shard&quot;:&quot;shard1&quot;,
   [junit4]   2&amp;gt;   &quot;collection&quot;:&quot;collection1&quot;,
   [junit4]   2&amp;gt;   &quot;base_url&quot;:&quot;http://node1/solr/&quot;,
   [junit4]   2&amp;gt;   &quot;core&quot;:&quot;core1&quot;}
   [junit4]   2&amp;gt; 1712 INFO  (zkCallback-3-thread-1) [    ] o.a.s.c.c.ZkStateReader A cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:/clusterstate.json, has occurred - updating... (live nodes size: 1)
   [junit4]   2&amp;gt; 1747 INFO  (zkCallback-3-thread-1) [    ] o.a.s.c.c.ZkStateReader A live node change: WatchedEvent state:SyncConnected type:NodeChildrenChanged path:/live_nodes, has occurred - updating... (live nodes size: 1)
   [junit4]   2&amp;gt; 1758 INFO  (zkCallback-4-thread-2) [    ] o.a.s.c.c.ZkStateReader A cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:/clusterstate.json, has occurred - updating... (live nodes size: 1)
   [junit4]   2&amp;gt; 1759 WARN  (zkCallback-4-thread-2) [    ] o.a.s.c.c.ZkStateReader ZooKeeper watch triggered, but Solr cannot talk to ZK
   [junit4]   2&amp;gt; 1762 ERROR (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]-EventThread) [    ] o.a.z.ClientCnxn Error while calling watcher 
   [junit4]   2&amp;gt; java.util.concurrent.RejectedExecutionException: Task org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor$1@28ba4cca rejected from org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor@6db8d7b9[Shutting down, pool size = 2, active threads = 0, queued tasks = 0, completed tasks = 7]
   [junit4]   2&amp;gt; 	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2047)
   [junit4]   2&amp;gt; 	at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823)
   [junit4]   2&amp;gt; 	at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1369)
   [junit4]   2&amp;gt; 	at org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.execute(ExecutorUtil.java:214)
   [junit4]   2&amp;gt; 	at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)
   [junit4]   2&amp;gt; 	at org.apache.solr.common.cloud.SolrZkClient$3.process(SolrZkClient.java:266)
   [junit4]   2&amp;gt; 	at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:522)
   [junit4]   2&amp;gt; 	at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:498)
   [junit4]   2&amp;gt; 1772 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.ZkTestServer connecting to 127.0.0.1:36981 36981
   [junit4]   2&amp;gt; 1896 INFO  (Thread-1) [    ] o.a.s.c.ZkTestServer connecting to 127.0.0.1:36981 36981
   [junit4]   2&amp;gt; 1905 WARN  (Thread-1) [    ] o.a.s.c.ZkTestServer Watch limit violations: 
   [junit4]   2&amp;gt; Maximum concurrent create/delete watches above limit:
   [junit4]   2&amp;gt; 
   [junit4]   2&amp;gt; 	2	/solr/aliases.json
   [junit4]   2&amp;gt; 
   [junit4]   2&amp;gt; Maximum concurrent data watches above limit:
   [junit4]   2&amp;gt; 
   [junit4]   2&amp;gt; 	2	/solr/clusterstate.json
   [junit4]   2&amp;gt; 
   [junit4]   2&amp;gt; Maximum concurrent children watches above limit:
   [junit4]   2&amp;gt; 
   [junit4]   2&amp;gt; 	2	/solr/live_nodes
   [junit4]   2&amp;gt; 	2	/solr/collections
   [junit4]   2&amp;gt; 	2	/solr/overseer/collection-queue-work
   [junit4]   2&amp;gt; 
   [junit4]   2&amp;gt; 1905 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.SolrTestCaseJ4 ###Ending testOverseerStatsReset
   [junit4]   2&amp;gt; 1916 INFO  (TEST-OverseerTest.testOverseerStatsReset-seed#[D0EFDBDB7BF104A]) [    ] o.a.s.c.Overseer Overseer (id=94836228734386178-127.0.0.1:36981_solr-n_0000000001) closing
   [junit4]   2&amp;gt; 1916 INFO  (OverseerStateUpdate-94836228734386178-127.0.0.1:36981_solr-n_0000000001) [    ] o.a.s.c.Overseer Overseer Loop exiting : 127.0.0.1:36981_solr
   [junit4]   2&amp;gt; 1917 ERROR (OverseerExitThread) [    ] o.a.s.c.Overseer could not read the data
   [junit4]   2&amp;gt; org.apache.zookeeper.KeeperException$SessionExpiredException: KeeperErrorCode = Session expired for /overseer_elect/leader
   [junit4]   2&amp;gt; 	at org.apache.zookeeper.KeeperException.create(KeeperException.java:127)
   [junit4]   2&amp;gt; 	at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)
   [junit4]   2&amp;gt; 	at org.apache.zookeeper.ZooKeeper.getData(ZooKeeper.java:1155)
   [junit4]   2&amp;gt; 	at org.apache.solr.common.cloud.SolrZkClient$7.execute(SolrZkClient.java:353)
   [junit4]   2&amp;gt; 	at org.apache.solr.common.cloud.SolrZkClient$7.execute(SolrZkClient.java:350)
   [junit4]   2&amp;gt; 	at org.apache.solr.common.cloud.ZkCmdExecutor.retryOperation(ZkCmdExecutor.java:61)
   [junit4]   2&amp;gt; 	at org.apache.solr.common.cloud.SolrZkClient.getData(SolrZkClient.java:350)
   [junit4]   2&amp;gt; 	at org.apache.solr.cloud.Overseer$ClusterStateUpdater.checkIfIamStillLeader(Overseer.java:304)
   [junit4]   2&amp;gt; 	at org.apache.solr.cloud.Overseer$ClusterStateUpdater.access$300(Overseer.java:87)
   [junit4]   2&amp;gt; 	at org.apache.solr.cloud.Overseer$ClusterStateUpdater$2.run(Overseer.java:265)
   [junit4]   2&amp;gt; NOTE: download the large Jenkins line-docs file by running &apos;ant get-jenkins-line-docs&apos; in the lucene directory.
   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=OverseerTest -Dtests.method=testOverseerStatsReset -Dtests.seed=D0EFDBDB7BF104A -Dtests.slow=true -Dtests.linedocsfile=/home/jenkins/lucene-data/enwiki.random.lines.txt -Dtests.locale=en_IN -Dtests.timezone=Antarctica/McMurdo -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1
   [junit4] FAILURE 1.85s J3  | OverseerTest.testOverseerStatsReset &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: expected:&amp;lt;0&amp;gt; but was:&amp;lt;1&amp;gt;
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([D0EFDBDB7BF104A:A65A1A812265B344]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.OverseerTest.testOverseerStatsReset(OverseerTest.java:741)
   [junit4]    &amp;gt; 	at java.lang.Thread.run(Thread.java:745)
   [junit4]   2&amp;gt; 4921 INFO  (SUITE-OverseerTest-seed#[D0EFDBDB7BF104A]-worker) [    ] o.a.s.SolrTestCaseJ4 ###deleteCore
   [junit4]   2&amp;gt; NOTE: leaving temporary files on disk at: /home/sarowe/svn/lucene/dev/trunk/solr/build/solr-core/test/J3/temp/solr.cloud.OverseerTest_D0EFDBDB7BF104A-001
   [junit4]   2&amp;gt; NOTE: test params are: codec=DummyCompressingStoredFields(storedFieldsFormat=CompressingStoredFieldsFormat(compressionMode=DUMMY, chunkSize=1, maxDocsPerChunk=860, blockSize=7), termVectorsFormat=CompressingTermVectorsFormat(compressionMode=DUMMY, chunkSize=1, blockSize=7)), sim=RandomSimilarityProvider(queryNorm=false,coord=yes): {}, locale=en_IN, timezone=Antarctica/McMurdo
   [junit4]   2&amp;gt; NOTE: Linux 4.1.0-custom2-amd64 amd64/Oracle Corporation 1.8.0_45 (64-bit)/cpus=16,threads=1,free=423825696,total=514850816
   [junit4]   2&amp;gt; NOTE: All tests run in this JVM: [OverseerTest]
   [junit4] Completed [1/10] on J3 in 6.32s, 1 test, 1 failure &amp;lt;&amp;lt;&amp;lt; FAILURES!
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I don&apos;t understand why this test fails so frequently when run with other Solr tests, but then so rarely fails when run in isolation - note that unlike standard Solr tests, only one test is being run per JVM with the way I&apos;m running it.&lt;/p&gt;</comment>
                            <comment id="14998440" author="ichattopadhyaya" created="Tue, 10 Nov 2015 11:38:20 +0000"  >&lt;p&gt;Seems like the test stopped failing at Steve&apos;s Jenkins.&lt;br/&gt;
&lt;a href=&quot;http://jenkins.sarowe.net/job/Beast-patched-Solr-core-trunk/12/#showFailuresLink&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.sarowe.net/job/Beast-patched-Solr-core-trunk/12/#showFailuresLink&lt;/a&gt;&lt;br/&gt;
I think we&apos;re good to commit the last patch.&lt;/p&gt;

&lt;p&gt;Will take a look at the &lt;tt&gt;testExternalClusterStateChangeBehavior&lt;/tt&gt; test as to why that is failing. I think it is unrelated to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7989&quot; title=&quot;After a new leader is elected it, it should ensure it&amp;#39;s state is ACTIVE if it has already registered with ZK.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7989&quot;&gt;&lt;del&gt;SOLR-7989&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14998611" author="steve_rowe" created="Tue, 10 Nov 2015 13:55:22 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think we&apos;re good to commit the last patch.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;I ran the whole solr-core test suite (the only scenario where I was regularly seeing failures on my box) 25 times with Ishan&apos;s latest patch.  The failure rate without the patch was quite a bit higher even after the r1713235 commit on this issue: 7/13 runs on the 5.x/Java8 job, and 3/11 runs on the trunk job.&lt;/p&gt;</comment>
                            <comment id="14998733" author="steve_rowe" created="Tue, 10 Nov 2015 15:20:09 +0000"  >&lt;p&gt;Reopening to apply Ishan&apos;s latest patch.&lt;/p&gt;</comment>
                            <comment id="14998741" author="jira-bot" created="Tue, 10 Nov 2015 15:28:31 +0000"  >&lt;p&gt;Commit 1713669 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1713669&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1713669&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8249&quot; title=&quot;OverseerTest failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8249&quot;&gt;&lt;del&gt;SOLR-8249&lt;/del&gt;&lt;/a&gt;: Address OverseerTest.testOverseerStatsReset() failures by switching back from testing for stats on the LEADER operation to testing STATE message stats&lt;/p&gt;</comment>
                            <comment id="14998746" author="jira-bot" created="Tue, 10 Nov 2015 15:31:40 +0000"  >&lt;p&gt;Commit 1713670 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1713670&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1713670&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8249&quot; title=&quot;OverseerTest failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8249&quot;&gt;&lt;del&gt;SOLR-8249&lt;/del&gt;&lt;/a&gt;: Address OverseerTest.testOverseerStatsReset() failures by switching back from testing for stats on the LEADER operation to testing STATE message stats (merged trunk r1713669)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12771240" name="SOLR-8249.patch" size="1567" author="ichattopadhyaya" created="Sun, 8 Nov 2015 19:07:26 +0000"/>
                            <attachment id="12771235" name="SOLR-8249.patch" size="649" author="ichattopadhyaya" created="Sun, 8 Nov 2015 15:17:51 +0000"/>
                            <attachment id="12771163" name="SOLR-8249.patch" size="1469" author="ichattopadhyaya" created="Sat, 7 Nov 2015 03:23:22 +0000"/>
                            <attachment id="12771112" name="SOLR-8249.patch" size="1144" author="ichattopadhyaya" created="Fri, 6 Nov 2015 21:06:08 +0000"/>
                            <attachment id="12771290" name="test.output" size="483879" author="sarowe" created="Mon, 9 Nov 2015 05:49:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2o2qf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>