<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:48:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-15549] Old SolrJ implementations (8.x) are incompatible with 9.0 Clouds</title>
                <link>https://issues.apache.org/jira/browse/SOLR-15549</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The &lt;tt&gt;ZkStateReader&lt;/tt&gt; in 8.x (and previous versions) checks that a &lt;tt&gt;/clusterstate.json&lt;/tt&gt; node exists in the ZK ChRoot, to ensure that the ChRoot hosts a Solr Cloud. However, starting in 9.0, &lt;tt&gt;/clusterstate.json&lt;/tt&gt; has been removed, and it is auto-deleted if a user tries to create one.&lt;/p&gt;

&lt;p&gt;That means that the ZkStateReader from SolrJ 8.x will error when trying to connect with a Solr 9 cloud, with the message:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Cannot connect to cluster at localhost:2181/: cluster not found/not ready&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The solution, is to have the ZK State Reader check both &lt;tt&gt;/clusterstate.json&lt;/tt&gt; and &lt;tt&gt;/collections&lt;/tt&gt; and only error if both are missing.&#160; &lt;tt&gt;/clusterstate.json&lt;/tt&gt; is long-deprecated in 8.x anyways, so adding this additional check is good practice in general.&lt;/p&gt;

&lt;p&gt;While it would be nice for every user to use the same SolrJ version as the version they are running for Solr, it can be difficult in practice, especially when upgrading major Solr versions. It would be preferable to support at least version + 1 clouds in SolrJ, for the purpose of upgrades.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13390151">SOLR-15549</key>
            <summary>Old SolrJ implementations (8.x) are incompatible with 9.0 Clouds</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="houston">Houston Putman</assignee>
                                    <reporter username="houston">Houston Putman</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Jul 2021 19:25:48 +0000</created>
                <updated>Tue, 28 Sep 2021 20:27:27 +0000</updated>
                            <resolved>Tue, 20 Jul 2021 19:39:01 +0000</resolved>
                                    <version>8.0</version>
                                    <fixVersion>8.10</fixVersion>
                                    <component>SolrJ</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                <comments>
                            <comment id="17383417" author="houston" created="Mon, 19 Jul 2021 15:58:31 +0000"  >&lt;p&gt;I should note the difference between the PR for &lt;tt&gt;branch_8x&lt;/tt&gt; and &lt;tt&gt;main&lt;/tt&gt;.&lt;/p&gt;


&lt;h2&gt;&lt;a name=&quot;%7B%7Bbranch8x%7D%7D&quot;&gt;&lt;/a&gt;&lt;tt&gt;branch_8x&lt;/tt&gt;&lt;/h2&gt;

&lt;p&gt;This changes the check in &lt;tt&gt;ZkStateReader&lt;/tt&gt; from just checking for &lt;tt&gt;/clusterstate.json&lt;/tt&gt; to looking for either &lt;tt&gt;/clusterstate.json&lt;/tt&gt; or &lt;tt&gt;/collections&lt;/tt&gt;. This will allow for users to use the 8.10 SolrJ APIs for 9.x Clouds.&lt;/p&gt;

&lt;h2&gt;&lt;a name=&quot;%7B%7Bmain%7D%7D&quot;&gt;&lt;/a&gt;&lt;tt&gt;main&lt;/tt&gt;&lt;/h2&gt;

&lt;p&gt;This adds a better error message in &lt;tt&gt;ZkStateReader&lt;/tt&gt;, that lets the user know why the ZK Node is not hosting a SolrCloud, i.e. which ZNode is missing (usually &lt;tt&gt;/aliases.json&lt;/tt&gt;). The implementation here had already been improved to not checking for individual paths, but capturing &lt;tt&gt;KeeperException.NoNodeExceptions&lt;/tt&gt; and turning them into more user-usuably &lt;tt&gt;SolrExceptions&lt;/tt&gt; . I also am using this PR to forward-port the ChangeLog entry.&lt;/p&gt;</comment>
                            <comment id="17384398" author="jira-bot" created="Tue, 20 Jul 2021 16:47:38 +0000"  >&lt;p&gt;Commit 97ce67383d8d2b00c5ea4a0cdb7b7437c0470301 in lucene-solr&apos;s branch refs/heads/branch_8x from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=97ce673&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=97ce673&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15549&quot; title=&quot;Old SolrJ implementations (8.x) are incompatible with 9.0 Clouds&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15549&quot;&gt;&lt;del&gt;SOLR-15549&lt;/del&gt;&lt;/a&gt;: Add support for Solr 9.0 clouds in ZkStateReader (#2533)&lt;/p&gt;
</comment>
                            <comment id="17384450" author="jira-bot" created="Tue, 20 Jul 2021 19:38:57 +0000"  >&lt;p&gt;Commit 122c88a0748769432ef62cc3fb94c2226dd67aa7 in solr&apos;s branch refs/heads/main from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=122c88a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=122c88a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15549&quot; title=&quot;Old SolrJ implementations (8.x) are incompatible with 9.0 Clouds&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15549&quot;&gt;&lt;del&gt;SOLR-15549&lt;/del&gt;&lt;/a&gt;: Better error message for missing ZK nodes in ZkStateReader. (#224)&lt;/p&gt;

&lt;p&gt;Also added upgrade notes for SolrJ compatibility with 9.0 Clouds.&lt;/p&gt;</comment>
                            <comment id="17384451" author="houston" created="Tue, 20 Jul 2021 19:39:01 +0000"  >&lt;p&gt;SolrJ 8.10 is now compatible with 9.x Clouds.&lt;/p&gt;

&lt;p&gt;Upgrade notes have been added to the 9.0 Ref Guide so that users upgrading will know that they first have to upgrade their clients to use SolrJ 8.10&lt;/p&gt;</comment>
                            <comment id="17421766" author="thelabdude" created="Tue, 28 Sep 2021 20:23:22 +0000"  >&lt;p&gt;Closing after the 8.10.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0t18g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>