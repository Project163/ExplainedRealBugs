<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:41:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-13207] AIOOBE in calculateMinShouldMatch</title>
                <link>https://issues.apache.org/jira/browse/SOLR-13207</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Requesting the following URL causes Solr to return an HTTP 500 error response:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;http://localhost:8983/solr/films/select?mm=%3C&amp;amp;defType=edismax&amp;amp;q=fq=field(id,1)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The error response seems to be caused by the following uncaught exception:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.ArrayIndexOutOfBoundsException: 0
at org.apache.solr.util.SolrPluginUtils.calculateMinShouldMatch(SolrPluginUtils.java:683)
at org.apache.solr.util.SolrPluginUtils.setMinShouldMatch(SolrPluginUtils.java:641)
at org.apache.solr.util.SolrPluginUtils.setMinShouldMatch(SolrPluginUtils.java:660)
at org.apache.solr.search.ExtendedDismaxQParser.parseOriginalQuery(ExtendedDismaxQParser.java:415)
at org.apache.solr.search.ExtendedDismaxQParser.parse(ExtendedDismaxQParser.java:173)
at org.apache.solr.search.QParser.getQuery(QParser.java:173)
at org.apache.solr.handler.component.QueryComponent.prepare(QueryComponent.java:158)
at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:272)
at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:199)
at org.apache.solr.core.SolrCore.execute(SolrCore.java:2559)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The mm parameter is given as &#8216;&amp;lt;&#8217;. It is (after some string mangling) split into sub-strings separated by &#8216;&amp;lt;&#8217;, putattively giving the left-hand and right-hand argument of the operator. In the example, there are no such arguments, so the resulting array &#8220;parts&#8221; is empty (cf. String.split documentation). But we immediately try to access parts&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;, leading to an AIOOBE.&lt;/p&gt;

&lt;p&gt;To set up an environment to reproduce this bug, follow the description in the &#8216;Environment&#8217; field.&lt;/p&gt;

&lt;p&gt;We automatically found this issue and ~70 more like this using &lt;a href=&quot;https://www.diffblue.com/labs/?utm_source=solr-br&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Diffblue Microservices Testing&lt;/a&gt;. Find more information on this &lt;a href=&quot;https://www.diffblue.com/blog/2018/12/19/diffblue-microservice-testing-a-sneak-peek-at-our-early-product-and-results?utm_source=solr-br&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;fuzz testing campaign&lt;/a&gt;.&lt;/p&gt;</description>
                <environment>&lt;h1&gt;&lt;a name=&quot;Stepstoreproduce&quot;&gt;&lt;/a&gt;Steps to reproduce&lt;/h1&gt;

&lt;ul&gt;
	&lt;li&gt;Use a Linux machine.&lt;/li&gt;
	&lt;li&gt;Build commit &lt;tt&gt;ea2c8ba&lt;/tt&gt; of Solr as described in the section below.&lt;/li&gt;
	&lt;li&gt;Build the films collection as described below.&lt;/li&gt;
	&lt;li&gt;Start the server using the command &lt;tt&gt;./bin/solr start -f -p 8983 -s /tmp/home&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Request the URL given in the bug description.&lt;/li&gt;
&lt;/ul&gt;


&lt;h1&gt;&lt;a name=&quot;Compilingtheserver&quot;&gt;&lt;/a&gt;Compiling the server&lt;/h1&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;git clone https://github.com/apache/lucene-solr
cd lucene-solr
git checkout ea2c8ba
ant compile
cd solr
ant server
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;h1&gt;&lt;a name=&quot;Buildingthecollectionandreproducingthebug&quot;&gt;&lt;/a&gt;Building the collection and reproducing the bug&lt;/h1&gt;

&lt;p&gt;We followed &lt;a href=&quot;http://lucene.apache.org/solr/guide/7_5/solr-tutorial.html#exercise-2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Exercise 2&lt;/a&gt; from the &lt;a href=&quot;http://lucene.apache.org/solr/guide/7_5/solr-tutorial.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Solr Tutorial&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;mkdir -p /tmp/home
echo &apos;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&amp;gt;&amp;lt;solr&amp;gt;&amp;lt;/solr&amp;gt;&apos; &amp;gt; /tmp/home/solr.xml
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In one terminal start a Solr instance in foreground:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;./bin/solr start -f -p 8983 -s /tmp/home
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In another terminal, create a collection of movies, with no shards and no replication, and initialize it:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;bin/solr create -c films
curl -X POST -H &apos;Content-type:application/json&apos; --data-binary &apos;{&quot;add-field&quot;: {&quot;name&quot;:&quot;name&quot;, &quot;type&quot;:&quot;text_general&quot;, &quot;multiValued&quot;:false, &quot;stored&quot;:true}}&apos; http://localhost:8983/solr/films/schema
curl -X POST -H &apos;Content-type:application/json&apos; --data-binary &apos;{&quot;add-copy-field&quot; : {&quot;source&quot;:&quot;*&quot;,&quot;dest&quot;:&quot;_text_&quot;}}&apos; http://localhost:8983/solr/films/schema
./bin/post -c films example/films/films.json
curl -v &#8220;URL_BUG&#8221;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Please check the issue description below to find the &#8220;URL_BUG&#8221; that will allow you to reproduce the issue reported.&lt;/p&gt;</environment>
        <key id="13213093">SOLR-13207</key>
            <summary>AIOOBE in calculateMinShouldMatch</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jkloos">Johannes Kloos</reporter>
                        <labels>
                            <label>diffblue</label>
                            <label>newdev</label>
                    </labels>
                <created>Thu, 31 Jan 2019 14:22:46 +0000</created>
                <updated>Sun, 29 Dec 2019 20:51:59 +0000</updated>
                            <resolved>Mon, 4 Nov 2019 18:23:04 +0000</resolved>
                                                    <fixVersion>8.4</fixVersion>
                    <fixVersion>9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="9000">2.5h</timespent>
                                <comments>
                            <comment id="16965006" author="jira-bot" created="Fri, 1 Nov 2019 17:41:10 +0000"  >&lt;p&gt;Commit b17d630e509adc9e62b07c599583558e715a869f in lucene-solr&apos;s branch refs/heads/master from Chris Hennick&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=b17d630&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=b17d630&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13207&quot; title=&quot;AIOOBE in calculateMinShouldMatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13207&quot;&gt;&lt;del&gt;SOLR-13207&lt;/del&gt;&lt;/a&gt;: Handle query errors in calculateMinShouldMatch (#978)&lt;/p&gt;

&lt;p&gt;Traps error that arises when the &amp;lt; operator is used at the end of a query field.&lt;br/&gt;
Also handles NumberFormatException when the operand isn&apos;t a number.&lt;/p&gt;</comment>
                            <comment id="16965018" author="jira-bot" created="Fri, 1 Nov 2019 18:12:03 +0000"  >&lt;p&gt;Commit 543d0b79aa9d028bb79485b14648a12beca9b8aa in lucene-solr&apos;s branch refs/heads/branch_8x from Chris Hennick&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=543d0b7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=543d0b7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13207&quot; title=&quot;AIOOBE in calculateMinShouldMatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13207&quot;&gt;&lt;del&gt;SOLR-13207&lt;/del&gt;&lt;/a&gt;: Handle query errors in calculateMinShouldMatch (#978)&lt;/p&gt;

&lt;p&gt;Traps error that arises when the &amp;lt; operator is used at the end of a query field.&lt;br/&gt;
Also handles NumberFormatException when the operand isn&apos;t a number.&lt;/p&gt;</comment>
                            <comment id="16965101" author="tomasflobbe" created="Fri, 1 Nov 2019 21:23:25 +0000"  >&lt;p&gt;There are Jenkins failures. I&apos;m taking a look&lt;/p&gt;</comment>
                            <comment id="16965137" author="jira-bot" created="Fri, 1 Nov 2019 22:53:50 +0000"  >&lt;p&gt;Commit 5c6a299eff9950d7a2640c8efd2496795ad7156d in lucene-solr&apos;s branch refs/heads/master from Tomas Eduardo Fernandez Lobbe&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=5c6a299&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=5c6a299&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13207&quot; title=&quot;AIOOBE in calculateMinShouldMatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13207&quot;&gt;&lt;del&gt;SOLR-13207&lt;/del&gt;&lt;/a&gt;: Fix tests&lt;/p&gt;</comment>
                            <comment id="16965141" author="jira-bot" created="Fri, 1 Nov 2019 23:05:19 +0000"  >&lt;p&gt;Commit 332f1d7741cf33f5aa0fc41ed02a1f62f1ea8830 in lucene-solr&apos;s branch refs/heads/branch_8x from Tomas Eduardo Fernandez Lobbe&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=332f1d7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=332f1d7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13207&quot; title=&quot;AIOOBE in calculateMinShouldMatch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13207&quot;&gt;&lt;del&gt;SOLR-13207&lt;/del&gt;&lt;/a&gt;: Fix tests&lt;/p&gt;</comment>
                            <comment id="17005030" author="jpountz" created="Sun, 29 Dec 2019 20:51:59 +0000"  >&lt;p&gt;Closing after the 8.4.0 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 46 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi0j3c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>