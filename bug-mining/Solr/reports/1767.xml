<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:45:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-5704] solr.xml coreNodeDirectory is ignored when creating new cores via REST(ish) apis</title>
                <link>https://issues.apache.org/jira/browse/SOLR-5704</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;&quot;New style&quot; core.properties auto-configuration works correctly at startup when &lt;tt&gt;${coreRootDirectory&lt;/tt&gt;} is specified in &lt;tt&gt;${solr.home}/solr.xml&lt;/tt&gt;, however it does not work if a core is later created dynamically via either (indirectly) the collection API or (directly) the core API.&lt;/p&gt;

&lt;p&gt;Core creation is always attempted in &lt;tt&gt;${solr.home&lt;/tt&gt;}.&lt;/p&gt;</description>
                <environment>&lt;p&gt;x86_64 Linux&lt;br/&gt;
x86_64 Sun Java 7_u21&lt;/p&gt;</environment>
        <key id="12693820">SOLR-5704</key>
            <summary>solr.xml coreNodeDirectory is ignored when creating new cores via REST(ish) apis</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="romseygeek">Alan Woodward</assignee>
                                    <reporter username="jsipprell">Jesse Sipprell</reporter>
                        <labels>
                            <label>solr.xml</label>
                    </labels>
                <created>Fri, 7 Feb 2014 05:16:38 +0000</created>
                <updated>Mon, 9 May 2016 18:45:07 +0000</updated>
                            <resolved>Mon, 10 Feb 2014 12:49:09 +0000</resolved>
                                    <version>4.6.1</version>
                                    <fixVersion>4.7</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13894206" author="jsipprell" created="Fri, 7 Feb 2014 05:27:06 +0000"  >&lt;p&gt;The following is the common solr.xml we use on all 4.6.1 nodes with path and hostname redactions for security reasons:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;solr&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;adminHandler&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;${adminHandler:org.apache.solr.handler.admin.CoreAdminHandler}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/str&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;int name=&lt;span class=&quot;code-quote&quot;&gt;&quot;coreLoadThreads&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;${coreLoadThreads:3}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/int&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;coreRootDirectory&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;${coreRootDirectory:/data/solr/cores/}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/str&amp;gt;&lt;/span&gt; &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- usually solrHome  --&amp;gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;managementPath&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;${managementPath:admin}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/str&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;sharedLib&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;${sharedLib:lib}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/str&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;shareSchema&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;${shareSchema:false}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/str&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- transientCacheSize is ignored for everything but transient cores. --&amp;gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;int name=&lt;span class=&quot;code-quote&quot;&gt;&quot;transientCacheSize&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;${transientCacheSize:2147483647}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/int&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;solrcloud&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;int name=&lt;span class=&quot;code-quote&quot;&gt;&quot;distribUpdateConnTimeout&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;${distribUpdTimeout:30000}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/int&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;int name=&lt;span class=&quot;code-quote&quot;&gt;&quot;distribUpdateSoTimeout&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;${distribUpdateTimeout:15000}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/int&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;int name=&lt;span class=&quot;code-quote&quot;&gt;&quot;leaderVoteWait&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;${leaderVoteWait:30000}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/int&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;host&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;${host:a-fully-qualified-hostname.mcclatchyinteractive.com}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/str&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;hostContext&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;${hostContext:solr}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/str&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;int name=&lt;span class=&quot;code-quote&quot;&gt;&quot;hostPort&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;${jetty.port:8983}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/int&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;int name=&lt;span class=&quot;code-quote&quot;&gt;&quot;zkClientTimeout&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;${zkClientTimeout:15000}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/int&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;zkHost&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;${zkHost:a,zk,cluster,host,port,namespace,list}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/str&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;bool name=&lt;span class=&quot;code-quote&quot;&gt;&quot;genericCoreNodeNames&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;${genericCoreNodeNames:true}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/bool&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/solrcloud&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/solr&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13895318" author="erickerickson" created="Sat, 8 Feb 2014 00:41:13 +0000"  >&lt;p&gt;Alan is picking this up, but a tangential thing....&lt;/p&gt;

&lt;p&gt;The transientCacheSize is completely out of what we had in mind when&lt;br/&gt;
the code was put together. You&apos;ll effectively never age out any transient&lt;br/&gt;
cores. Is that intentional?&lt;/p&gt;
</comment>
                            <comment id="13895687" author="jsipprell" created="Sat, 8 Feb 2014 19:02:31 +0000"  >&lt;p&gt;The &lt;tt&gt;solr.xml&lt;/tt&gt; I posted was initially just copy-and-pasted from some site that documented it (which also suggested that these values not be altered). The only values we have changed are &lt;tt&gt;coreRootDirectory&lt;/tt&gt;, &lt;tt&gt;host&lt;/tt&gt;, &lt;tt&gt;zkHost&lt;/tt&gt; and (I think) &lt;tt&gt;zkClientTimeout&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;We don&apos;t use transient cores so the value isn&apos;t terribly relevant to us. In fact, we use configuration management systems to manage core directories and core.properties files in a totally different location separate from &lt;tt&gt;solr.home&lt;/tt&gt; and &lt;tt&gt;solr.xml&lt;/tt&gt;. The only reason this (the problem discussed in this ticket) is an issue for us is because it makes it impossible to perform dynamic shardsplitting as the user we run Solr as doesn&apos;t have write access to &lt;tt&gt;solr.home&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Jesse&lt;/p&gt;</comment>
                            <comment id="13896040" author="romseygeek" created="Sun, 9 Feb 2014 21:01:15 +0000"  >&lt;p&gt;So the problem here is that when a CoreDescriptor gets a relative instance dir, it always resolves that against solr home.  This patch updates it to check for a coreRootDirectory first.&lt;/p&gt;</comment>
                            <comment id="13896118" author="jsipprell" created="Mon, 10 Feb 2014 00:04:05 +0000"  >&lt;p&gt;I&apos;ve tested out the attached patch and it seems to work as expected; at least with SPLITSHARD.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Jesse&lt;/p&gt;</comment>
                            <comment id="13896417" author="romseygeek" created="Mon, 10 Feb 2014 11:38:25 +0000"  >&lt;p&gt;Updated patch, fixing a couple of test fails due to TestHarness creating a ConfigSolr object with a null resource loader.&lt;/p&gt;</comment>
                            <comment id="13896448" author="jira-bot" created="Mon, 10 Feb 2014 12:45:05 +0000"  >&lt;p&gt;Commit 1566598 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=romseygeek&quot; class=&quot;user-hover&quot; rel=&quot;romseygeek&quot;&gt;romseygeek&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1566598&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1566598&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5704&quot; title=&quot;solr.xml coreNodeDirectory is ignored when creating new cores via REST(ish) apis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5704&quot;&gt;&lt;del&gt;SOLR-5704&lt;/del&gt;&lt;/a&gt;: new cores should be created under coreRootDirectory&lt;/p&gt;</comment>
                            <comment id="13896450" author="jira-bot" created="Mon, 10 Feb 2014 12:47:45 +0000"  >&lt;p&gt;Commit 1566600 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=romseygeek&quot; class=&quot;user-hover&quot; rel=&quot;romseygeek&quot;&gt;romseygeek&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1566600&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1566600&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5704&quot; title=&quot;solr.xml coreNodeDirectory is ignored when creating new cores via REST(ish) apis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5704&quot;&gt;&lt;del&gt;SOLR-5704&lt;/del&gt;&lt;/a&gt;: new cores should be created under coreRootDirectory&lt;/p&gt;</comment>
                            <comment id="13896452" author="romseygeek" created="Mon, 10 Feb 2014 12:49:09 +0000"  >&lt;p&gt;Thanks Jesse!&lt;/p&gt;</comment>
                            <comment id="13896715" author="erickerickson" created="Mon, 10 Feb 2014 16:02:03 +0000"  >&lt;p&gt;Thanks guys!&lt;/p&gt;</comment>
                            <comment id="14089432" author="elyograg" created="Thu, 7 Aug 2014 16:51:06 +0000"  >&lt;p&gt;A user on IRC is running 4.9.0 and claims that new cores are created in the solr home rather than the configured coreRootDirectory, so on restart they are not being discovered.  I&apos;m doing what I can to be sure there are no jars from a previous version hanging around.&lt;/p&gt;</comment>
                            <comment id="14089528" author="elyograg" created="Thu, 7 Aug 2014 17:58:44 +0000"  >&lt;p&gt;Looks like a new issue.  I&apos;ll get that filed.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;11:53 &amp;lt; _sp0k_&amp;gt; It indeed is reading coreRootDirectory, but due to missing
                trailer collection directory is created wrong. e.g.
                coreRootDirectory=/usr/local/solr/cores, collection directory
                created by API would be -
                /usr/local/solr/cores${collection}_shard_replica where it
                should be /usr/local/solr/cores/${collection}_shard_replica
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12627963" name="SOLR-5704.patch" size="7615" author="romseygeek" created="Mon, 10 Feb 2014 11:38:25 +0000"/>
                            <attachment id="12627891" name="SOLR-5704.patch" size="3578" author="romseygeek" created="Sun, 9 Feb 2014 21:01:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>372329</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1s5zz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>372633</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>