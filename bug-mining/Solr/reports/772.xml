<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:25:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-2280] commitWithin ignored for a delete query</title>
                <link>https://issues.apache.org/jira/browse/SOLR-2280</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The commitWithin option on an UpdateRequest is only honored for requests containing new documents.  It does not, for example, work with a delete query.  The following doesn&apos;t work as expected:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;UpdateRequest request = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UpdateRequest();
request.deleteById(&lt;span class=&quot;code-quote&quot;&gt;&quot;id123&quot;&lt;/span&gt;);
request.setCommitWithin(1000);
solrServer.request(request);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In my opinion, the commitWithin attribute should be  permitted on the &amp;lt;delete/&amp;gt; xml tag as well as &amp;lt;add/&amp;gt;.  Such a change would go in XMLLoader.java and its would have some ramifications elsewhere too.  Once this is done, then UpdateRequest.getXml() can be updated to generate the right XML.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12492868">SOLR-2280</key>
            <summary>commitWithin ignored for a delete query</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juangrande">Juan Grande</assignee>
                                    <reporter username="dsmiley">David Smiley</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Dec 2010 19:00:53 +0000</created>
                <updated>Fri, 10 May 2013 10:39:40 +0000</updated>
                            <resolved>Tue, 24 Jan 2012 15:41:12 +0000</resolved>
                                                    <fixVersion>3.6</fixVersion>
                    <fixVersion>4.0-ALPHA</fixVersion>
                                    <component>clients - java</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="12969874" author="yseeley@gmail.com" created="Thu, 9 Dec 2010 19:09:44 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13038560" author="janhoy" created="Tue, 24 May 2011 13:49:48 +0000"  >&lt;p&gt;+1 I have client side code explicitly working around this bug, would be nice with a fix in 3.2&lt;/p&gt;</comment>
                            <comment id="13043697" author="rcmuir" created="Fri, 3 Jun 2011 16:46:34 +0000"  >&lt;p&gt;Bulk move 3.2 -&amp;gt; 3.3&lt;/p&gt;</comment>
                            <comment id="13097264" author="juangrande" created="Mon, 5 Sep 2011 19:13:02 +0000"  >&lt;p&gt;I&apos;m submitting a patch that implements commitWithin on deletes. The patch is for the 3x branch.&lt;/p&gt;

&lt;p&gt;Two things should be noted:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The commit is fired even if the delete doesn&apos;t really delete any document.&lt;/li&gt;
	&lt;li&gt;When using the BinaryUpdateRequestHandler the params of the UpdateRequest are loaded when parsing the docs. If the request doesn&apos;t include a docs list, then the params aren&apos;t loaded. I added a workaround for this, but &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1164&quot; title=&quot;BinaryUpdateRequestHandler and JavaBinUpdateRequestCodec do not maintain order of the commands as serialized in the binary format&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1164&quot;&gt;SOLR-1164&lt;/a&gt; should solve this problem definitely.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13106368" author="rcmuir" created="Fri, 16 Sep 2011 14:50:46 +0000"  >&lt;p&gt;3.4 -&amp;gt; 3.5&lt;/p&gt;</comment>
                            <comment id="13149959" author="janhoy" created="Mon, 14 Nov 2011 21:42:44 +0000"  >&lt;p&gt;Juan, would you care uploading a new patch which applies cleanly to 3.x (or trunk)? This looks like a nice addition to the other commitWithin improvements in 3.x.&lt;/p&gt;

&lt;p&gt;Also, could you find a way to test commitWithin without adding 20 seconds of waitForCommit() to the test time? Waits in the tests have also proven unreliable..&lt;/p&gt;</comment>
                            <comment id="13151394" author="juangrande" created="Wed, 16 Nov 2011 18:16:52 +0000"  >&lt;p&gt;Hi Jan,&lt;/p&gt;

&lt;p&gt;I&apos;m working on it, I will upload a new patch shortly. I&apos;ll update the tests to use the same approach as in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2565&quot; title=&quot;Prevent IW#close and cut over to IW#commit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2565&quot;&gt;&lt;del&gt;SOLR-2565&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13156945" author="juangrande" created="Fri, 25 Nov 2011 00:41:59 +0000"  >&lt;p&gt;Here&apos;s the new patch, it applies to 3x branch.&lt;/p&gt;</comment>
                            <comment id="13159757" author="janhoy" created="Wed, 30 Nov 2011 02:34:33 +0000"  >&lt;p&gt;Here&apos;s a patch for trunk (&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2280&quot; title=&quot;commitWithin ignored for a delete query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2280&quot;&gt;&lt;del&gt;SOLR-2280&lt;/del&gt;&lt;/a&gt;.patch). I&apos;ve also tested and slightly updated the 3x patch, and named it &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2280&quot; title=&quot;commitWithin ignored for a delete query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2280&quot;&gt;&lt;del&gt;SOLR-2280&lt;/del&gt;&lt;/a&gt;-3x.patch.&lt;/p&gt;

&lt;p&gt;PS: Juan - we normally create patches using &quot;project&quot; as root, not solr/.&lt;/p&gt;

&lt;p&gt;Test coverage is good. One or two more eyes on it and I think it&apos;s ready for commit.&lt;/p&gt;</comment>
                            <comment id="13159994" author="janhoy" created="Wed, 30 Nov 2011 12:12:25 +0000"  >&lt;p&gt;I also plan to add in support for the convenience methods deleteById(String id, int commitWithinMs) etc in SolrJ the same way as for adds.&lt;/p&gt;</comment>
                            <comment id="13160080" author="janhoy" created="Wed, 30 Nov 2011 15:10:02 +0000"  >&lt;p&gt;New patches which adds new commitWithin capable SolrJ methods for deleteBy*()&lt;/p&gt;</comment>
                            <comment id="13177627" author="juangrande" created="Fri, 30 Dec 2011 12:42:40 +0000"  >&lt;p&gt;Hi Jan, is there something else that I can do to keep this patch moving on?&lt;/p&gt;</comment>
                            <comment id="13186987" author="janhoy" created="Mon, 16 Jan 2012 16:01:00 +0000"  >&lt;p&gt;New patch against trunk.&lt;/p&gt;

&lt;p&gt;Added support for commitWithin as request parameter on deletes for XML and JSON loaders. Tested ok.&lt;/p&gt;

&lt;p&gt;Think this is getting close. Any other comments? Would like to get this into 3x soon.&lt;/p&gt;</comment>
                            <comment id="13192209" author="janhoy" created="Tue, 24 Jan 2012 15:23:25 +0000"  >&lt;p&gt;Final patches, backported to 3x&lt;/p&gt;</comment>
                            <comment id="13192220" author="janhoy" created="Tue, 24 Jan 2012 15:41:12 +0000"  >&lt;p&gt;Fixed on trunk and 3x&lt;/p&gt;</comment>
                            <comment id="13234052" author="huangfox" created="Wed, 21 Mar 2012 03:16:46 +0000"  >&lt;p&gt;I create a method deleteById(String id , int commitWithinMs) in solrJ(solr3.5),&lt;br/&gt;
 but committing is affected by solrconfig.xml(&amp;lt;maxTime&amp;gt;60000&amp;lt;/maxTime&amp;gt;)  &lt;br/&gt;
&amp;#8211;&lt;br/&gt;
Add the document is valid .&lt;/p&gt;</comment>
                            <comment id="13234166" author="janhoy" created="Wed, 21 Mar 2012 06:45:15 +0000"  >&lt;p&gt;Hi huangfox. Please ask questions on the solr-user mailing list, not here. See &lt;a href=&quot;http://wiki.apache.org/solr/UsingMailingLists&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wiki.apache.org/solr/UsingMailingLists&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12511677" name="SOLR-2280-3x.patch" size="31323" author="janhoy" created="Tue, 24 Jan 2012 15:23:25 +0000"/>
                            <attachment id="12505624" name="SOLR-2280-3x.patch" size="28550" author="janhoy" created="Wed, 30 Nov 2011 15:10:02 +0000"/>
                            <attachment id="12505567" name="SOLR-2280-3x.patch" size="25355" author="janhoy" created="Wed, 30 Nov 2011 02:34:33 +0000"/>
                            <attachment id="12511678" name="SOLR-2280.patch" size="28942" author="janhoy" created="Tue, 24 Jan 2012 15:23:25 +0000"/>
                            <attachment id="12510717" name="SOLR-2280.patch" size="28948" author="janhoy" created="Mon, 16 Jan 2012 16:01:00 +0000"/>
                            <attachment id="12505625" name="SOLR-2280.patch" size="28061" author="janhoy" created="Wed, 30 Nov 2011 15:10:02 +0000"/>
                            <attachment id="12505568" name="SOLR-2280.patch" size="24866" author="janhoy" created="Wed, 30 Nov 2011 02:34:33 +0000"/>
                            <attachment id="12505046" name="SOLR-2280.patch" size="24657" author="juangrande" created="Fri, 25 Nov 2011 00:41:59 +0000"/>
                            <attachment id="12493056" name="SOLR-2280.patch" size="25028" author="juangrande" created="Mon, 5 Sep 2011 19:13:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5238</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 35 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03lpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18951</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>