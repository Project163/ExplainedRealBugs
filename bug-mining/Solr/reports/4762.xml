<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:48:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-15833] Exists query does not work for SRPT</title>
                <link>https://issues.apache.org/jira/browse/SOLR-15833</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;@@ -172,6 +173,8 @@ public class TestSolr4Spatial extends SolrTestCaseJ4 {
     checkHits(fieldName, &quot;0,0&quot;, 100, DistanceUtils.EARTH_MEAN_RADIUS_KM, 0);//doesn&apos;t error
   }

+  @Test public void testExistsQuery() { assertQ(req(&quot;q&quot;, fieldName + &quot;:*&quot;, &quot;fl&quot;, &quot;id,&quot; + fieldName)); }
+
   private void checkHits(String fieldName, String pt, double distKM, double sphereRadius, int count, int ... docIds) throws ParseException {
     checkHits(fieldName, true, pt, distKM, sphereRadius, count, docIds);
   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This test passes against 8.5.0 release and fails when running 8.6.3.&lt;/p&gt;

&lt;p&gt;I initially suspected &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11746&quot; title=&quot;numeric fields need better error handling for prefix/wildcard syntax -- consider uniform support for &amp;quot;foo:* == foo:[* TO *]&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11746&quot;&gt;&lt;del&gt;SOLR-11746&lt;/del&gt;&lt;/a&gt;, but that doesn&apos;t line up with the release info, unless some of that revert/recommit stuff came in later.&lt;/p&gt;

&lt;p&gt;This error happens because the &lt;tt&gt;exists&lt;/tt&gt; query for spatial types gets turned into a range query with inclusive null bounds, which then causes the bounding box parsing to fail. And generating the exception incidentally fails because we try to pass a null argument to String.contains!&lt;/p&gt;

&lt;p&gt;Some options for solving this:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;See null bounds when creating our shape and return a new shape that matches everything&lt;/li&gt;
	&lt;li&gt;Go back to using a prefix query&lt;/li&gt;
	&lt;li&gt;Find some other extra &quot;clever&quot; data like norms that the field leaves around&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We might also need to check additional fields for this same behavior.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13415344">SOLR-15833</key>
            <summary>Exists query does not work for SRPT</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mdrob">Mike Drob</assignee>
                                    <reporter username="mdrob">Mike Drob</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Dec 2021 21:03:27 +0000</created>
                <updated>Tue, 4 Jan 2022 08:22:43 +0000</updated>
                            <resolved>Tue, 7 Dec 2021 15:49:54 +0000</resolved>
                                    <version>8.6.3</version>
                                    <fixVersion>9.0</fixVersion>
                    <fixVersion>8.11.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="17453209" author="mdrob" created="Fri, 3 Dec 2021 21:23:44 +0000"  >&lt;p&gt;git bisect points to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14859&quot; title=&quot;[* TO *] queries on DateRange fields miss results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14859&quot;&gt;&lt;del&gt;SOLR-14859&lt;/del&gt;&lt;/a&gt; as the culprit, cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gerlowskija&quot; class=&quot;user-hover&quot; rel=&quot;gerlowskija&quot;&gt;gerlowskija&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17453210" author="mdrob" created="Fri, 3 Dec 2021 21:25:19 +0000"  >&lt;p&gt;Houston suggested to me that on AbstractSpatialFieldType we can do:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  @Override
  protected Query getSpecializedExistenceQuery(QParser parser, SchemaField field) {
    PrefixQuery query = new PrefixQuery(new Term(field.getName(), &quot;&quot;));
    query.setRewriteMethod(field.getType().getRewriteMethod(parser, field));
    return query;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17454282" author="jira-bot" created="Mon, 6 Dec 2021 23:02:53 +0000"  >&lt;p&gt;Commit 0287458f836e3b7ea4b2401538b29f3d2e9b6cf4 in solr&apos;s branch refs/heads/main from Mike Drob&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=0287458&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=0287458&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15833&quot; title=&quot;Exists query does not work for SRPT&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15833&quot;&gt;&lt;del&gt;SOLR-15833&lt;/del&gt;&lt;/a&gt; Spatial types should work with exists query (#446)&lt;/p&gt;

&lt;p&gt;Co-Authored-By: Houston Putman &amp;lt;houston@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17454722" author="jira-bot" created="Tue, 7 Dec 2021 15:49:58 +0000"  >&lt;p&gt;Commit 187fc9c1b0054d92f9c842cfe4b8d8cb2fbd5a4b in lucene-solr&apos;s branch refs/heads/branch_8_11 from Mike Drob&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=187fc9c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=187fc9c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15833&quot; title=&quot;Exists query does not work for SRPT&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15833&quot;&gt;&lt;del&gt;SOLR-15833&lt;/del&gt;&lt;/a&gt; Spatial types should work with exists query (#2624)&lt;/p&gt;

&lt;p&gt;Co-Authored-By: Houston Putman &amp;lt;houston@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17460759" author="janhoy" created="Thu, 16 Dec 2021 14:14:56 +0000"  >&lt;p&gt;Closing after the 8.11.1 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 47 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0xcgw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>