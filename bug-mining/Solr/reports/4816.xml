<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:50:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-15870] Test TestCollectionAPI fails frequently</title>
                <link>https://issues.apache.org/jira/browse/SOLR-15870</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Sample failure&lt;/p&gt;

&lt;p&gt;Build: &lt;a href=&quot;https://ci-builds.apache.org/job/Solr/job/Solr-Check-main/2376/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Solr/job/Solr-Check-main/2376/&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
1 tests failed.
FAILED: &#160;org.apache.solr.cloud.api.collections.TestCollectionAPI.test

Error Message:
java.lang.AssertionError: collection health should not be GREEN

Stack Trace:
java.lang.AssertionError: collection health should not be GREEN
	at __randomizedtesting.SeedInfo.seed([2761A750818CC788:AF35988A2F70AA70]:0)
	at org.junit.Assert.fail(Assert.java:89)
	at org.junit.Assert.assertTrue(Assert.java:42)
	at org.junit.Assert.assertFalse(Assert.java:65)
	at org.apache.solr.cloud.api.collections.TestCollectionAPI.clusterStatusWithCollectionHealthState(TestCollectionAPI.java:362)
	at org.apache.solr.cloud.api.collections.TestCollectionAPI.test(TestCollectionAPI.java:96)
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also see graph at &lt;a href=&quot;http://fucit.org/solr-jenkins-reports/history-trend-of-recent-failures.html#series/org.apache.solr.cloud.api.collections.TestCollectionAPI.test&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://fucit.org/solr-jenkins-reports/history-trend-of-recent-failures.html#series/org.apache.solr.cloud.api.collections.TestCollectionAPI.test&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Ping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13419110">SOLR-15870</key>
            <summary>Test TestCollectionAPI fails frequently</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="janhoy">Jan H&#248;ydahl</assignee>
                                    <reporter username="janhoy">Jan H&#248;ydahl</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Dec 2021 01:06:08 +0000</created>
                <updated>Thu, 12 May 2022 00:35:14 +0000</updated>
                            <resolved>Mon, 28 Feb 2022 16:41:25 +0000</resolved>
                                    <version>9.0</version>
                                    <fixVersion>9.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17464198" author="janhoy" created="Thu, 23 Dec 2021 01:07:58 +0000"  >&lt;p&gt;Seems to stem from &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15300&quot; title=&quot;Shard &amp;quot;state&amp;quot; flag is confusing and of limited value to outside consumers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15300&quot;&gt;&lt;del&gt;SOLR-15300&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17479718" author="janhoy" created="Thu, 20 Jan 2022 22:16:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt; I think the problem with this test is here &lt;a href=&quot;https://github.com/apache/solr/blob/main/solr/core/src/test/org/apache/solr/cloud/api/collections/TestCollectionAPI.java#L356:L362&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/blob/main/solr/core/src/test/org/apache/solr/cloud/api/collections/TestCollectionAPI.java#L356:L362&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Random Jetty is killed&lt;/li&gt;
	&lt;li&gt;Wait for that node to be gone from liveNodes (ZK watch?)&lt;/li&gt;
	&lt;li&gt;Immediately request CLUSTERSTATUS and expect it to be not GREEN&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I think this is timing related. The ephemeral live_nodes znode will be gone really quickly, and the watch will fire. But it will take some time until the Overseer has detected it and mutated the CLUSTERSTATE JSON.&lt;/p&gt;

&lt;p&gt;I&apos;m going to attempt a &lt;tt&gt;zkStateReader.waitForState()&lt;/tt&gt; here to guard against this. Have a test that seems to work...&lt;/p&gt;</comment>
                            <comment id="17479757" author="jira-bot" created="Fri, 21 Jan 2022 00:34:19 +0000"  >&lt;p&gt;Commit d82682da27a1563adea1bd5669c1e26814ea1100 in solr&apos;s branch refs/heads/main from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=d82682d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=d82682d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15870&quot; title=&quot;Test TestCollectionAPI fails frequently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15870&quot;&gt;&lt;del&gt;SOLR-15870&lt;/del&gt;&lt;/a&gt; Test TestCollectionAPI fails frequently (#551)&lt;/p&gt;
</comment>
                            <comment id="17479759" author="jira-bot" created="Fri, 21 Jan 2022 00:39:24 +0000"  >&lt;p&gt;Commit 921b763dc75453f4fac577f35214a5c06531f34e in solr&apos;s branch refs/heads/branch_9x from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=921b763&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=921b763&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15870&quot; title=&quot;Test TestCollectionAPI fails frequently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15870&quot;&gt;&lt;del&gt;SOLR-15870&lt;/del&gt;&lt;/a&gt; Test TestCollectionAPI fails frequently (#551)&lt;/p&gt;

&lt;p&gt;(cherry picked from commit d82682da27a1563adea1bd5669c1e26814ea1100)&lt;/p&gt;</comment>
                            <comment id="17479760" author="jira-bot" created="Fri, 21 Jan 2022 00:43:40 +0000"  >&lt;p&gt;Commit 637360ee2f67da145c2403ea1a59c1b7a8f9a6e6 in solr&apos;s branch refs/heads/branch_9_0 from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=637360e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=637360e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15870&quot; title=&quot;Test TestCollectionAPI fails frequently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15870&quot;&gt;&lt;del&gt;SOLR-15870&lt;/del&gt;&lt;/a&gt; Test TestCollectionAPI fails frequently (#551)&lt;/p&gt;

&lt;p&gt;(cherry picked from commit d82682da27a1563adea1bd5669c1e26814ea1100)&lt;/p&gt;</comment>
                            <comment id="17479994" author="jira-bot" created="Fri, 21 Jan 2022 10:51:21 +0000"  >&lt;p&gt;Commit 6fe6e508ac53cda8006460f142ee1727220bc566 in solr&apos;s branch refs/heads/main from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=6fe6e50&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=6fe6e50&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15870&quot; title=&quot;Test TestCollectionAPI fails frequently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15870&quot;&gt;&lt;del&gt;SOLR-15870&lt;/del&gt;&lt;/a&gt; Check for any replica in collection down, instead of only for shard1&lt;/p&gt;</comment>
                            <comment id="17479995" author="janhoy" created="Fri, 21 Jan 2022 10:51:57 +0000"  >&lt;p&gt;Re-opening to tweak the test further.&lt;/p&gt;</comment>
                            <comment id="17480100" author="jira-bot" created="Fri, 21 Jan 2022 14:22:46 +0000"  >&lt;p&gt;Commit 50ab2ffa0a89ef8f57bc5675d02a2f2f787b87af in solr&apos;s branch refs/heads/branch_9x from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=50ab2ff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=50ab2ff&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15870&quot; title=&quot;Test TestCollectionAPI fails frequently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15870&quot;&gt;&lt;del&gt;SOLR-15870&lt;/del&gt;&lt;/a&gt; Check for any replica in collection down, instead of only for shard1&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 6fe6e508ac53cda8006460f142ee1727220bc566)&lt;/p&gt;</comment>
                            <comment id="17480105" author="jira-bot" created="Fri, 21 Jan 2022 14:29:18 +0000"  >&lt;p&gt;Commit 60d207d1b11c907a1de54558a3e4b4b2db4af150 in solr&apos;s branch refs/heads/branch_9_0 from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=60d207d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=60d207d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15870&quot; title=&quot;Test TestCollectionAPI fails frequently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15870&quot;&gt;&lt;del&gt;SOLR-15870&lt;/del&gt;&lt;/a&gt; Check for any replica in collection down, instead of only for shard1&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 6fe6e508ac53cda8006460f142ee1727220bc566)&lt;/p&gt;</comment>
                            <comment id="17480154" author="janhoy" created="Fri, 21 Jan 2022 16:04:43 +0000"  >&lt;p&gt;Trying to close this again, crossing fingers. Looks good in jenkins so far&lt;/p&gt;</comment>
                            <comment id="17481019" author="jira-bot" created="Mon, 24 Jan 2022 11:30:36 +0000"  >&lt;p&gt;Commit d82682da27a1563adea1bd5669c1e26814ea1100 in solr&apos;s branch refs/heads/jira/SOLR15715 from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=d82682d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=d82682d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15870&quot; title=&quot;Test TestCollectionAPI fails frequently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15870&quot;&gt;&lt;del&gt;SOLR-15870&lt;/del&gt;&lt;/a&gt; Test TestCollectionAPI fails frequently (#551)&lt;/p&gt;
</comment>
                            <comment id="17481020" author="jira-bot" created="Mon, 24 Jan 2022 11:30:36 +0000"  >&lt;p&gt;Commit 6fe6e508ac53cda8006460f142ee1727220bc566 in solr&apos;s branch refs/heads/jira/SOLR15715 from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=6fe6e50&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=6fe6e50&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15870&quot; title=&quot;Test TestCollectionAPI fails frequently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15870&quot;&gt;&lt;del&gt;SOLR-15870&lt;/del&gt;&lt;/a&gt; Check for any replica in collection down, instead of only for shard1&lt;/p&gt;</comment>
                            <comment id="17494772" author="houston" created="Fri, 18 Feb 2022 18:28:38 +0000"  >&lt;p&gt;Unfortunately this is still failing roughly 10% of runs.&lt;/p&gt;</comment>
                            <comment id="17494842" author="janhoy" created="Fri, 18 Feb 2022 23:15:03 +0000"  >&lt;p&gt;Yea, perhaps time to BadApple it, unless it is a symptom of a real bug...&lt;/p&gt;</comment>
                            <comment id="17497075" author="houston" created="Wed, 23 Feb 2022 23:55:09 +0000"  >&lt;p&gt;Ok I noticed all of the failures I have looked at have failed with SSL enabled. It also makes sense why I can&apos;t reproduce this locally (we don&apos;t allow SSL in the tests on OSX).&lt;/p&gt;

&lt;p&gt;For now let&apos;s try supressing SSL on the test.&lt;/p&gt;</comment>
                            <comment id="17497079" author="houston" created="Wed, 23 Feb 2022 23:58:41 +0000"  >&lt;p&gt;Ok so apparently the 5 failures I looked at initially weren&apos;t representative of the whole. It also fails without SSL enabled.&lt;/p&gt;</comment>
                            <comment id="17497705" author="houston" created="Thu, 24 Feb 2022 20:10:48 +0000"  >&lt;p&gt;I have found the source of the issue. We have a SolrClient that is used during the entirety of the &lt;tt&gt;clusterStatusWithCollectionHealthState()&lt;/tt&gt; method. In the middle of this method we restart a Jetty Server. The SolrClient caches connections, and sometimes does not evict the stale connection to the jetty from before it restarted, thus it gets an HTTP exception when trying to connect to that jetty server.&lt;/p&gt;

&lt;p&gt;The fix for the test is to limit the &lt;tt&gt;validateAfterInactivity&lt;/tt&gt; option (in &lt;tt&gt;HttpClientUtil.java&lt;/tt&gt;) to be 500 ms instead of 3000 ms. I&apos;m not sure this is a change we want to make across the whole of SolrJ. We can instead just set that property in the unit test, but it may be useful to lower the default. I&apos;m open to opinions here &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=janhoy&quot; class=&quot;user-hover&quot; rel=&quot;janhoy&quot;&gt;janhoy&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17498981" author="jira-bot" created="Mon, 28 Feb 2022 15:54:57 +0000"  >&lt;p&gt;Commit c57345b1293ba1a623a53415e4adc93104d99e9c in solr&apos;s branch refs/heads/main from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=c57345b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=c57345b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15870&quot; title=&quot;Test TestCollectionAPI fails frequently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15870&quot;&gt;&lt;del&gt;SOLR-15870&lt;/del&gt;&lt;/a&gt;: Fix TestCollectionAPI HTTP error&lt;/p&gt;

&lt;p&gt;The error occured because the test was using a single client&lt;br/&gt;
to issue Admin commands before and after a server was restarted.&lt;br/&gt;
The HTTP Client caches connections, and didn&apos;t evict the expired&lt;br/&gt;
connection to the server after it restarted. SolrJ does not attempt to&lt;br/&gt;
retry Admin calls, therefore the test failed whenever the stale&lt;br/&gt;
connection was used.&lt;/p&gt;</comment>
                            <comment id="17498991" author="jira-bot" created="Mon, 28 Feb 2022 16:02:43 +0000"  >&lt;p&gt;Commit 4fbbd8a5e6e051d0e078c0f42f2343d8a7afcbc3 in solr&apos;s branch refs/heads/main from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=4fbbd8a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=4fbbd8a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15870&quot; title=&quot;Test TestCollectionAPI fails frequently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15870&quot;&gt;&lt;del&gt;SOLR-15870&lt;/del&gt;&lt;/a&gt;: Fix imports for precommit&lt;/p&gt;</comment>
                            <comment id="17499000" author="jira-bot" created="Mon, 28 Feb 2022 16:10:56 +0000"  >&lt;p&gt;Commit 36fd50cd09a9006cc23b88066e21a4bee66a7f52 in solr&apos;s branch refs/heads/branch_9x from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=36fd50c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=36fd50c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15870&quot; title=&quot;Test TestCollectionAPI fails frequently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15870&quot;&gt;&lt;del&gt;SOLR-15870&lt;/del&gt;&lt;/a&gt;: Fix TestCollectionAPI HTTP error&lt;/p&gt;

&lt;p&gt;The error occured because the test was using a single client&lt;br/&gt;
to issue Admin commands before and after a server was restarted.&lt;br/&gt;
The HTTP Client caches connections, and didn&apos;t evict the expired&lt;br/&gt;
connection to the server after it restarted. SolrJ does not attempt to&lt;br/&gt;
retry Admin calls, therefore the test failed whenever the stale&lt;br/&gt;
connection was used.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit c57345b1293ba1a623a53415e4adc93104d99e9c)&lt;/p&gt;</comment>
                            <comment id="17499004" author="jira-bot" created="Mon, 28 Feb 2022 16:18:38 +0000"  >&lt;p&gt;Commit 69d2c32487250cef05a2537569656428932ddc66 in solr&apos;s branch refs/heads/branch_9_0 from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=69d2c32&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=69d2c32&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15870&quot; title=&quot;Test TestCollectionAPI fails frequently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15870&quot;&gt;&lt;del&gt;SOLR-15870&lt;/del&gt;&lt;/a&gt;: Fix TestCollectionAPI HTTP error&lt;/p&gt;

&lt;p&gt;The error occured because the test was using a single client&lt;br/&gt;
to issue Admin commands before and after a server was restarted.&lt;br/&gt;
The HTTP Client caches connections, and didn&apos;t evict the expired&lt;br/&gt;
connection to the server after it restarted. SolrJ does not attempt to&lt;br/&gt;
retry Admin calls, therefore the test failed whenever the stale&lt;br/&gt;
connection was used.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit c57345b1293ba1a623a53415e4adc93104d99e9c)&lt;/p&gt;</comment>
                            <comment id="17499027" author="houston" created="Mon, 28 Feb 2022 16:41:25 +0000"  >&lt;p&gt;Instead of changing the validateAfterInactivity for the SolrJ client, we instead just create a new client for the test after starting the server. The SolrJ client is mainly used for querying/updating which are likely not affected by this issue due to retries.&lt;/p&gt;</comment>
                            <comment id="17535302" author="janhoy" created="Thu, 12 May 2022 00:26:15 +0000"  >&lt;p&gt;Closing after the 9.0.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13368356">SOLR-15300</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0xz7c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>