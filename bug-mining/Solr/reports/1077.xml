<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:30:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-3920] CloudSolrServer doesn&apos;t allow to index multiple collections with one instance of server</title>
                <link>https://issues.apache.org/jira/browse/SOLR-3920</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;With one instance of CloudSolrServer I can&apos;t add documents to multiple collections, for example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void shouldSendToSecondCore() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
	&lt;span class=&quot;code-comment&quot;&gt;//given
&lt;/span&gt;	&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
		CloudSolrServer server = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CloudSolrServer(&lt;span class=&quot;code-quote&quot;&gt;&quot;localhost:9983&quot;&lt;/span&gt;);
		UpdateRequest commit1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UpdateRequest();
		commit1.setAction(ACTION.COMMIT, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
		commit1.setParam(&lt;span class=&quot;code-quote&quot;&gt;&quot;collection&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;collection1&quot;&lt;/span&gt;);
		&lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; commit is bug&apos;s cause
&lt;/span&gt;		commit1.process(server);
		
		SolrInputDocument doc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SolrInputDocument();
		doc.addField(&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;);
		doc.addField(&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;);
		
		UpdateRequest update2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UpdateRequest();
		update2.setParam(&lt;span class=&quot;code-quote&quot;&gt;&quot;collection&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;collection2&quot;&lt;/span&gt;);
		update2.add(doc);
		update2.process(server);
		
		UpdateRequest commit2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UpdateRequest();
		commit2.setAction(ACTION.COMMIT, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
		commit2.setParam(&lt;span class=&quot;code-quote&quot;&gt;&quot;collection&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;collection2&quot;&lt;/span&gt;);
		commit2.process(server);

		SolrQuery q1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SolrQuery(&lt;span class=&quot;code-quote&quot;&gt;&quot;id:id&quot;&lt;/span&gt;);
		q1.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;collection&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;collection1&quot;&lt;/span&gt;);
		SolrQuery q2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SolrQuery(&lt;span class=&quot;code-quote&quot;&gt;&quot;id:id&quot;&lt;/span&gt;);
		q2.set(&lt;span class=&quot;code-quote&quot;&gt;&quot;collection&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;collection2&quot;&lt;/span&gt;);
		
		&lt;span class=&quot;code-comment&quot;&gt;//when
&lt;/span&gt;		QueryResponse resp1 = server.query(q1);
		QueryResponse resp2 = server.query(q2);
		
		&lt;span class=&quot;code-comment&quot;&gt;//then
&lt;/span&gt;		Assert.assertEquals(0L, resp1.getResults().getNumFound());
		Assert.assertEquals(1L, resp2.getResults().getNumFound());
	} &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
		CloudSolrServer server1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CloudSolrServer(&lt;span class=&quot;code-quote&quot;&gt;&quot;localhost:9983&quot;&lt;/span&gt;);
		server1.setDefaultCollection(&lt;span class=&quot;code-quote&quot;&gt;&quot;collection1&quot;&lt;/span&gt;);
		server1.deleteByQuery(&lt;span class=&quot;code-quote&quot;&gt;&quot;id:id&quot;&lt;/span&gt;);
		server1.commit(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
		
		CloudSolrServer server2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CloudSolrServer(&lt;span class=&quot;code-quote&quot;&gt;&quot;localhost:9983&quot;&lt;/span&gt;);
		server2.setDefaultCollection(&lt;span class=&quot;code-quote&quot;&gt;&quot;collection2&quot;&lt;/span&gt;);
		server2.deleteByQuery(&lt;span class=&quot;code-quote&quot;&gt;&quot;id:id&quot;&lt;/span&gt;);
		server2.commit(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Second update goes to first collection.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12610826">SOLR-3920</key>
            <summary>CloudSolrServer doesn&apos;t allow to index multiple collections with one instance of server</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="gsobczyk">Grzegorz Sobczyk</reporter>
                        <labels>
                            <label>4.0.1_Candidate</label>
                    </labels>
                <created>Mon, 8 Oct 2012 13:03:29 +0000</created>
                <updated>Mon, 9 May 2016 18:57:04 +0000</updated>
                            <resolved>Fri, 26 Oct 2012 01:02:27 +0000</resolved>
                                    <version>4.0-BETA</version>
                                    <fixVersion>4.1</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13471597" author="markrmiller@gmail.com" created="Mon, 8 Oct 2012 14:44:30 +0000"  >&lt;p&gt;You can set the default collection (a method on the CloudSolrServer) or set the collection per update call (collection param).&lt;/p&gt;</comment>
                            <comment id="13471847" author="gsobczyk" created="Mon, 8 Oct 2012 20:54:07 +0000"  >&lt;p&gt;I&apos;m sorry - pasted wrong example &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
I wrote test and replaced previous code with it.&lt;/p&gt;</comment>
                            <comment id="13471864" author="markrmiller@gmail.com" created="Mon, 8 Oct 2012 21:08:48 +0000"  >&lt;p&gt;Hmm...I wonder if it&apos;s the caching that was put in...&lt;/p&gt;

&lt;p&gt;I&apos;ll try working your test into our unit tests.&lt;/p&gt;</comment>
                            <comment id="13483783" author="markrmiller@gmail.com" created="Thu, 25 Oct 2012 00:54:06 +0000"  >&lt;p&gt;I started hitting this rarely in a test while working on another issue - I added to the test so that it would catch a problem here. Fix coming soon.&lt;/p&gt;</comment>
                            <comment id="13484556" author="markrmiller@gmail.com" created="Thu, 25 Oct 2012 22:53:51 +0000"  >&lt;p&gt;Yeah, the caching is whack if you change up the collection list.&lt;/p&gt;

&lt;p&gt;I&apos;ve got a test and fix.&lt;/p&gt;</comment>
                            <comment id="13484626" author="markrmiller@gmail.com" created="Fri, 26 Oct 2012 01:02:27 +0000"  >&lt;p&gt;committed to 4X and 5X&lt;/p&gt;</comment>
                            <comment id="14094096" author="sergez" created="Tue, 12 Aug 2014 14:29:34 +0000"  >&lt;p&gt;Is there a way to do the same with REST method call running SolrCloud? In other words, to pass a collection_name into a URL for update, in a way like this:&lt;br/&gt;
&lt;a href=&quot;http://localhost:8983/solr/MyCollectionName/update?&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/MyCollectionName/update?&lt;/a&gt; bla-bla-bla.....    &lt;/p&gt;

&lt;p&gt;Thank you very much!&lt;/p&gt;</comment>
                            <comment id="14094177" author="erickerickson" created="Tue, 12 Aug 2014 15:38:39 +0000"  >&lt;p&gt;Please raise questions like this on the Solr user&apos;s list, the JIRAs are&lt;br/&gt;
for discussing code changes rather than answering user-level&lt;br/&gt;
questions.&lt;/p&gt;

&lt;p&gt;Especially please refrain from adding to closed JIRAs.&lt;/p&gt;

&lt;p&gt;Of course you can do what you ask. You&apos;ve used the correct &lt;br/&gt;
syntax already. Did you even try it before posting the question?&lt;/p&gt;</comment>
                            <comment id="14094376" author="sergez" created="Tue, 12 Aug 2014 17:42:06 +0000"  >&lt;p&gt;Sorry, I will, definitely.&lt;/p&gt;

&lt;p&gt;And for the subject - of course I did but got no success... That exactly the reason I asked the question...&lt;/p&gt;

&lt;p&gt;Could you please provide the correct syntax ( URL ) to update specific collection ? I&apos;ll close this issue instantly then.&lt;/p&gt;</comment>
                            <comment id="14094381" author="erickerickson" created="Tue, 12 Aug 2014 17:45:18 +0000"  >&lt;p&gt;Try &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://localhost:8983/solr/collection1/update?stream.body=&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/collection1/update?stream.body=&lt;/a&gt;&amp;lt;commit/&amp;gt;&lt;/p&gt;

&lt;p&gt;That should at least successfully get to your server, tail the log and you should see&lt;br/&gt;
it come through.&lt;/p&gt;</comment>
                            <comment id="14094506" author="sergez" created="Tue, 12 Aug 2014 18:54:57 +0000"  >&lt;p&gt;It seems to work.&lt;/p&gt;

&lt;p&gt;Thanks a lot!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12615167">SOLR-4046</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12550897" name="SOLR-3920.patch" size="8921" author="markrmiller@gmail.com" created="Fri, 26 Oct 2012 00:28:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245543</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i06bjj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34803</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>