<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:13:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9034] Atomic updates not work with CopyField</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9034</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Atomic updates does not work when CopyField has docValues enabled.  Below is the sample schema&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;   &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;field name=&lt;span class=&quot;code-quote&quot;&gt;&quot;single_i_dvn&quot;&lt;/span&gt; multiValued=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;int&quot;&lt;/span&gt;    indexed=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; stored=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;field name=&lt;span class=&quot;code-quote&quot;&gt;&quot;single_d_dvn&quot;&lt;/span&gt; multiValued=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;double&quot;&lt;/span&gt; indexed=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; stored=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;field name=&lt;span class=&quot;code-quote&quot;&gt;&quot;single_s_dvn&quot;&lt;/span&gt; multiValued=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt; indexed=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; stored=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;field name=&lt;span class=&quot;code-quote&quot;&gt;&quot;copy_single_i_dvn&quot;&lt;/span&gt; multiValued=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;int&quot;&lt;/span&gt;    docValues=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; indexed=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; stored=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; useDocValuesAsStored=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;field name=&lt;span class=&quot;code-quote&quot;&gt;&quot;copy_single_d_dvn&quot;&lt;/span&gt; multiValued=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;double&quot;&lt;/span&gt; docValues=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; indexed=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; stored=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; useDocValuesAsStored=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;field name=&lt;span class=&quot;code-quote&quot;&gt;&quot;copy_single_s_dvn&quot;&lt;/span&gt; multiValued=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;string&quot;&lt;/span&gt; docValues=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; indexed=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; stored=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; useDocValuesAsStored=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Below is the exception&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.lang.IllegalArgumentException: DocValuesField
 &quot;copy_single_i_dvn&quot; appears more than once in this document 
(only one value is allowed per field)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12962110">SOLR-9034</key>
            <summary>Atomic updates not work with CopyField</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yseeley@gmail.com">Yonik Seeley</assignee>
                                    <reporter username="mrkarthik">Karthik Ramachandran</reporter>
                        <labels>
                            <label>atomicupdate</label>
                    </labels>
                <created>Sun, 24 Apr 2016 21:55:30 +0000</created>
                <updated>Sat, 25 Jun 2016 20:33:46 +0000</updated>
                            <resolved>Mon, 20 Jun 2016 16:15:55 +0000</resolved>
                                    <version>5.5</version>
                                    <fixVersion>5.5.2</fixVersion>
                    <fixVersion>5.6</fixVersion>
                    <fixVersion>6.0.1</fixVersion>
                    <fixVersion>6.1</fixVersion>
                                    <component>Server</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>11</watches>
                                                                                                                <comments>
                            <comment id="15255762" author="kramachandran@commvault.com" created="Mon, 25 Apr 2016 00:44:15 +0000"  >&lt;p&gt;Can someone review the change?  It would good if this fix makes it to 5.5.1&lt;/p&gt;</comment>
                            <comment id="15257082" author="ichattopadhyaya" created="Mon, 25 Apr 2016 21:22:09 +0000"  >&lt;p&gt;Thanks for the patch, I am reviewing it.&lt;/p&gt;</comment>
                            <comment id="15257091" author="yseeley@gmail.com" created="Mon, 25 Apr 2016 21:31:57 +0000"  >&lt;p&gt;We should also make sure that we have tests for both retrieval cases (transaction log and index). &lt;/p&gt;</comment>
                            <comment id="15258412" author="yseeley@gmail.com" created="Tue, 26 Apr 2016 16:45:58 +0000"  >&lt;p&gt;Updated patch... the test modification should improve coverage for the retrieval-from-tlog case.&lt;/p&gt;</comment>
                            <comment id="15258493" author="ichattopadhyaya" created="Tue, 26 Apr 2016 17:19:10 +0000"  >&lt;p&gt;Updating the patch to move the logic of filtering the list of nonstored DV fields that are copy targets to the SolrIndexSearcher so that the list is computed once and used again and again. The logic for filtering, as in Karthik&apos;s original patch, seems like a good idea in order to solve the issue, since such a filtering happens for stored fields that are copy field targets. This patch retains the tests from Yonik&apos;s previous patch.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kramachandran%40commvault.com&quot; class=&quot;user-hover&quot; rel=&quot;kramachandran@commvault.com&quot;&gt;kramachandran@commvault.com&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;, please review.&lt;/p&gt;</comment>
                            <comment id="15258825" author="kramachandran@commvault.com" created="Tue, 26 Apr 2016 20:04:58 +0000"  >&lt;p&gt;Changes looks good.&lt;/p&gt;</comment>
                            <comment id="15262826" author="jira-bot" created="Thu, 28 Apr 2016 19:52:54 +0000"  >&lt;p&gt;Commit c897917c718eef75d66c5d0006f409d5c95260c7 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=c897917&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=c897917&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9034&quot; title=&quot;Atomic updates not work with CopyField&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9034&quot;&gt;&lt;del&gt;SOLR-9034&lt;/del&gt;&lt;/a&gt;: fix atomic updates for copyField w/ docValues&lt;/p&gt;</comment>
                            <comment id="15262830" author="jira-bot" created="Thu, 28 Apr 2016 19:53:44 +0000"  >&lt;p&gt;Commit 21aea6f606f81b1b4c45fa41501f33744f2b887a in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=21aea6f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=21aea6f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9034&quot; title=&quot;Atomic updates not work with CopyField&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9034&quot;&gt;&lt;del&gt;SOLR-9034&lt;/del&gt;&lt;/a&gt;: fix atomic updates for copyField w/ docValues&lt;/p&gt;</comment>
                            <comment id="15262832" author="yseeley@gmail.com" created="Thu, 28 Apr 2016 19:54:20 +0000"  >&lt;p&gt;Committed.  Thanks!&lt;/p&gt;</comment>
                            <comment id="15277188" author="przemosz" created="Mon, 9 May 2016 22:19:13 +0000"  >&lt;p&gt;Yonik,&lt;/p&gt;

&lt;p&gt;I was fighting SOLR 5.5 useDocValuesAsStored/copyField issue on our company&apos;s SOLR installation, and sufficient fix seems to be simple:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;solr/core/src/java/org/apache/solr/handler/component/RealTimeGetComponent.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  -       searcher.decorateDocValueFields(sid, docid, searcher.getNonStoredDVs(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;));
  +       searcher.decorateDocValueFields(sid, docid, searcher.getNonStoredDVs(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;getNonStoredDVs(false) returns all non-stored docValues fields, getNonStoredDVs(true) returns only non-stored docValues fields used as stored, either explicitly or implicitly (in schema 1.6). Doesn&apos;t masking &quot;implicitly use all docvalues as stored, configured or not&quot;  behavior with copyField target detection defeats whole purpose of choosing docValues/stored behavior?&lt;/p&gt;</comment>
                            <comment id="15293989" author="steve_rowe" created="Fri, 20 May 2016 19:05:59 +0000"  >&lt;p&gt;Reopening to backport to 6.0.1.&lt;/p&gt;</comment>
                            <comment id="15293990" author="jira-bot" created="Fri, 20 May 2016 19:06:26 +0000"  >&lt;p&gt;Commit be59da0b42df01a2e4b6c6fa8d8d6bf50fb3d690 in lucene-solr&apos;s branch refs/heads/branch_6_0 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=be59da0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=be59da0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9034&quot; title=&quot;Atomic updates not work with CopyField&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9034&quot;&gt;&lt;del&gt;SOLR-9034&lt;/del&gt;&lt;/a&gt;: fix atomic updates for copyField w/ docValues&lt;/p&gt;</comment>
                            <comment id="15294000" author="jira-bot" created="Fri, 20 May 2016 19:14:12 +0000"  >&lt;p&gt;Commit ed028a75dde0cc2cfe577027f60a5634aa5e7c13 in lucene-solr&apos;s branch refs/heads/branch_6_0 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=ed028a7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=ed028a7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9034&quot; title=&quot;Atomic updates not work with CopyField&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9034&quot;&gt;&lt;del&gt;SOLR-9034&lt;/del&gt;&lt;/a&gt;: branch_6_0: move CHANGES entry from under 5.5.1 to under 6.0.1&lt;/p&gt;</comment>
                            <comment id="15294007" author="dragonsinth" created="Fri, 20 May 2016 19:19:04 +0000"  >&lt;p&gt;Did this make 5.5.1?&lt;/p&gt;</comment>
                            <comment id="15305352" author="steve_rowe" created="Sat, 28 May 2016 13:38:21 +0000"  >&lt;p&gt;Bulk close issues included in the 6.0.1 release.&lt;/p&gt;</comment>
                            <comment id="15323293" author="dragonsinth" created="Thu, 9 Jun 2016 20:37:00 +0000"  >&lt;p&gt;Should probably backport to 5.5.2, 5.6&lt;/p&gt;</comment>
                            <comment id="15329998" author="steve_rowe" created="Tue, 14 Jun 2016 17:40:40 +0000"  >&lt;p&gt;Reopening to backport to 5.6 and 5.5.2.&lt;/p&gt;</comment>
                            <comment id="15330259" author="steve_rowe" created="Tue, 14 Jun 2016 19:34:09 +0000"  >&lt;p&gt;Here are the 5.6 and 5.5.2 commits, since the ASF bot doesn&apos;t seem to be working:&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;branch_5x: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9034&quot; title=&quot;Atomic updates not work with CopyField&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9034&quot;&gt;&lt;del&gt;SOLR-9034&lt;/del&gt;&lt;/a&gt;: fix atomic updates for copyField w/ docValues&lt;br/&gt;
Commit: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/lucene-solr/commit/5f91aa95&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/lucene-solr/commit/5f91aa95&lt;/a&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;branch_5_5: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9034&quot; title=&quot;Atomic updates not work with CopyField&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9034&quot;&gt;&lt;del&gt;SOLR-9034&lt;/del&gt;&lt;/a&gt;: fix atomic updates for copyField w/ docValues&lt;br/&gt;
Commit: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/lucene-solr/commit/7777599d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/lucene-solr/commit/7777599d&lt;/a&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;branch_5_5: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9034&quot; title=&quot;Atomic updates not work with CopyField&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9034&quot;&gt;&lt;del&gt;SOLR-9034&lt;/del&gt;&lt;/a&gt;: Add 5.5.2 CHANGES entry&lt;br/&gt;
Commit: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/lucene-solr/commit/6f06e56c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/lucene-solr/commit/6f06e56c&lt;/a&gt;&lt;/p&gt;
&lt;hr /&gt;</comment>
                            <comment id="15338217" author="steve_rowe" created="Sat, 18 Jun 2016 21:55:53 +0000"  >&lt;p&gt;My Jenkins found a reproducing &lt;tt&gt;TestNRTOpen.testSharedCores()&lt;/tt&gt; failure on branch_5_5, and &lt;tt&gt;git bisect&lt;/tt&gt; points the finger at this issue - the seed doesn&apos;t reproduce for me on master, branch_6x, branch_6_1 or branch_6_0 though:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Checking out Revision c6b9ac065571718e7e92174fa7e2a927583012fa (refs/remotes/origin/branch_5_5)
[...]
   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=TestNRTOpen -Dtests.method=testSharedCores -Dtests.seed=7C31F56A2C49EB56 -Dtests.slow=true -Dtests.linedocsfile=/home/jenkins/lucene-data/enwiki.random.lines.txt -Dtests.locale=ar-LB -Dtests.timezone=Asia/Magadan -Dtests.asserts=true -Dtests.file.encoding=UTF-8
   [junit4] FAILURE 0.21s J5  | TestNRTOpen.testSharedCores &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([7C31F56A2C49EB56:9A32BF25A4BFC659]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.core.TestNRTOpen.testSharedCores(TestNRTOpen.java:117)
   [junit4]    &amp;gt; 	at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15339649" author="steve_rowe" created="Mon, 20 Jun 2016 14:58:29 +0000"  >&lt;p&gt;Another reproducing branch_5_5 seed for &lt;tt&gt;TestNRTOpen.testSharedCores()&lt;/tt&gt; &lt;a href=&quot;http://jenkins.thetaphi.de/job/Lucene-Solr-5.5-Linux/310/consoleText&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jenkins.thetaphi.de/job/Lucene-Solr-5.5-Linux/310/consoleText&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Checking out Revision c6b9ac065571718e7e92174fa7e2a927583012fa (refs/remotes/origin/branch_5_5)
[...]
   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=TestNRTOpen -Dtests.method=testSharedCores -Dtests.seed=A2B2DA22BF73E3AF -Dtests.multiplier=3 -Dtests.slow=true -Dtests.locale=es-HN -Dtests.timezone=Libya -Dtests.asserts=true -Dtests.file.encoding=UTF-8
   [junit4] FAILURE 0.49s J1 | TestNRTOpen.testSharedCores &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: expected:&amp;lt;3&amp;gt; but was:&amp;lt;1&amp;gt;
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([A2B2DA22BF73E3AF:44B1906D3785CEA0]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.core.TestNRTOpen.testSharedCores(TestNRTOpen.java:116)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But this seed continues to fail even when I rollback to the commit prior to this issue&apos;s branch_5_5 commit.  Also, when I run the test on my box the failure point and cause are different - this is on branch_5_5 at the &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9034&quot; title=&quot;Atomic updates not work with CopyField&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9034&quot;&gt;&lt;del&gt;SOLR-9034&lt;/del&gt;&lt;/a&gt; commit point on branch_5_5 (7777599):&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=TestNRTOpen -Dtests.method=testSharedCores -Dtests.seed=A2B2DA22BF73E3AF -Dtests.multiplier=3 -Dtests.slow=true -Dtests.linedocsfile=/home/jenkins/lucene-data/enwiki.random.lines.txt -Dtests.locale=es-HN -Dtests.timezone=Libya -Dtests.asserts=true -Dtests.file.encoding=UTF-8
   [junit4] FAILURE 0.27s | TestNRTOpen.testSharedCores &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.AssertionError: expected:&amp;lt;[org.apache.lucene.index.SegmentCoreReaders@6cda66e6, org.apache.lucene.index.SegmentCoreReaders@37203df2, org.apache.lucene.index.SegmentCoreReaders@49f95cf6]&amp;gt; but was:&amp;lt;[org.apache.lucene.index.SegmentCoreReaders@345238b3]&amp;gt;
   [junit4]    &amp;gt;        at __randomizedtesting.SeedInfo.seed([A2B2DA22BF73E3AF:44B1906D3785CEA0]:0)
   [junit4]    &amp;gt;        at org.apache.solr.core.TestNRTOpen.testSharedCores(TestNRTOpen.java:124)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So it looks like the other seed succeeds earlier than the &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9034&quot; title=&quot;Atomic updates not work with CopyField&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9034&quot;&gt;&lt;del&gt;SOLR-9034&lt;/del&gt;&lt;/a&gt; commit for indirect reasons.  I&apos;ll poke around some more.&lt;/p&gt;</comment>
                            <comment id="15339822" author="steve_rowe" created="Mon, 20 Jun 2016 16:15:55 +0000"  >&lt;p&gt;I&apos;ve opened &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9229&quot; title=&quot;TestNRTOpen.testSharedCores() failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9229&quot;&gt;&lt;del&gt;SOLR-9229&lt;/del&gt;&lt;/a&gt; for the &lt;tt&gt;TestNRTOpen.testSharedCores()&lt;/tt&gt; failures, and since they don&apos;t seem to be directly related to this issue - more likely &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8621&quot; title=&quot;solrconfig.xml: deprecate/replace &amp;lt;mergePolicy&amp;gt; with &amp;lt;mergePolicyFactory&amp;gt;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8621&quot;&gt;&lt;del&gt;SOLR-8621&lt;/del&gt;&lt;/a&gt; is the cause - I&apos;m resolving this issue.&lt;/p&gt;</comment>
                            <comment id="15349780" author="steve_rowe" created="Sat, 25 Jun 2016 20:33:46 +0000"  >&lt;p&gt;Bulk close issues released with 5.5.2.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12800826" name="SOLR-9034.patch" size="10561" author="ichattopadhyaya" created="Tue, 26 Apr 2016 17:19:10 +0000"/>
                            <attachment id="12800817" name="SOLR-9034.patch" size="9236" author="yseeley@gmail.com" created="Tue, 26 Apr 2016 16:45:58 +0000"/>
                            <attachment id="12800434" name="SOLR-9034.patch" size="9599" author="mrkarthik" created="Sun, 24 Apr 2016 22:57:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 21 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2wo1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>