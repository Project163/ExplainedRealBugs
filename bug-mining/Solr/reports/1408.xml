<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:36:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4751] The replication problem of the file in a subdirectory.</title>
                <link>https://issues.apache.org/jira/browse/SOLR-4751</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When set lang/stopwords_ja.txt to confFiles in replication settings,&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;requestHandler name=&lt;span class=&quot;code-quote&quot;&gt;&quot;/replication&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.ReplicationHandler&quot;&lt;/span&gt; &amp;gt;&lt;/span&gt;
       &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;lst name=&lt;span class=&quot;code-quote&quot;&gt;&quot;master&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;replicateAfter&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;commit&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/str&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;replicateAfter&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;startup&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/str&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;confFiles&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;schema.xml,stopwords.txt,lang/stopwords_ja.txt&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/str&amp;gt;&lt;/span&gt;
       &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/lst&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/requestHandler&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Only stopwords_ja.txt exists in solr/collection1/conf/lang directory on slave node.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12644060">SOLR-4751</key>
            <summary>The replication problem of the file in a subdirectory.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="koji">Koji Sekiguchi</assignee>
                                    <reporter username="minoru">Minoru Osuka</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Apr 2013 06:51:31 +0000</created>
                <updated>Mon, 9 May 2016 18:57:26 +0000</updated>
                            <resolved>Fri, 17 May 2013 01:59:50 +0000</resolved>
                                    <version>4.2.1</version>
                                    <fixVersion>4.3.1</fixVersion>
                    <fixVersion>4.4</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>replication (java)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13646470" author="koji" created="Wed, 1 May 2013 09:02:10 +0000"  >&lt;p&gt;Hi Osuka-san, would you elaborate the problem a little more, please?&lt;/p&gt;</comment>
                            <comment id="13646658" author="minoru" created="Wed, 1 May 2013 15:45:42 +0000"  >&lt;p&gt;Hi Sekiguchi-san,&lt;/p&gt;



&lt;p&gt;Please see following code,&lt;br/&gt;
core/src/java/org/apache/solr/handler/SnapPuller.java&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void copyTmpConfFiles2Conf(File tmpconfDir) {
    File confDir = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(solrCore.getResourceLoader().getConfigDir());
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (File file : tmpconfDir.listFiles()) {
      File oldFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(confDir, file.getName());
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (oldFile.exists()) {
        File backupFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(confDir, oldFile.getName() + &lt;span class=&quot;code-quote&quot;&gt;&quot;.&quot;&lt;/span&gt; + getDateAsStr(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Date(oldFile.lastModified())));
        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; status = oldFile.renameTo(backupFile);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!status) {
          &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SolrException(SolrException.ErrorCode.SERVER_ERROR,
                  &lt;span class=&quot;code-quote&quot;&gt;&quot;Unable to rename: &quot;&lt;/span&gt; + oldFile + &lt;span class=&quot;code-quote&quot;&gt;&quot; to: &quot;&lt;/span&gt; + backupFile);
        }
      }
      &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; status = file.renameTo(oldFile);
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (status) {
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SolrException(SolrException.ErrorCode.SERVER_ERROR,
                &lt;span class=&quot;code-quote&quot;&gt;&quot;Unable to rename: &quot;&lt;/span&gt; + file + &lt;span class=&quot;code-quote&quot;&gt;&quot; to: &quot;&lt;/span&gt; + oldFile);
      }
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This code does not assume subdirectory exists in conf directory.&lt;br/&gt;
Only the files specified by confFiles exists in temporary directory. All files are not gathered in lang directory in temporary directory.&lt;br/&gt;
This code will rename incomplete lang directory to conf directory.&lt;br/&gt;
Need to find files recursively.&lt;/p&gt;</comment>
                            <comment id="13651578" author="koji" created="Wed, 8 May 2013 03:02:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;Need to find files recursively.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The other day, I talked Osuka-san and I got the problem. It&apos;ve come into being there since 3.6 as subdirectory (lang/) was created under conf directory.&lt;/p&gt;

&lt;p&gt;Although it&apos;d better to have test cases for replication, but as I don&apos;t have time and the patch looks simple, I&apos;d like to commit in a few days if no one objects.&lt;/p&gt;

&lt;p&gt;Meanwhile, updates of the patch are welcome. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13654405" author="commit-tag-bot" created="Fri, 10 May 2013 12:07:32 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; koji&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1480988&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1480988&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4751&quot; title=&quot;The replication problem of the file in a subdirectory.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4751&quot;&gt;&lt;del&gt;SOLR-4751&lt;/del&gt;&lt;/a&gt;: fix replication problem of files in sub directory of conf&lt;/p&gt;</comment>
                            <comment id="13654455" author="commit-tag-bot" created="Fri, 10 May 2013 13:11:01 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; koji&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1481004&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1481004&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4751&quot; title=&quot;The replication problem of the file in a subdirectory.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4751&quot;&gt;&lt;del&gt;SOLR-4751&lt;/del&gt;&lt;/a&gt;: fix replication problem of files in sub directory of conf&lt;/p&gt;</comment>
                            <comment id="13654460" author="commit-tag-bot" created="Fri, 10 May 2013 13:29:32 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;lucene_solr_4_3 commit&amp;#93;&lt;/span&gt; koji&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1481008&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1481008&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4751&quot; title=&quot;The replication problem of the file in a subdirectory.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4751&quot;&gt;&lt;del&gt;SOLR-4751&lt;/del&gt;&lt;/a&gt;: fix replication problem of files in sub directory of conf&lt;/p&gt;</comment>
                            <comment id="13654461" author="koji" created="Fri, 10 May 2013 13:31:47 +0000"  >&lt;p&gt;I committed the patch on trunk, branch_4x and 4.3.&lt;/p&gt;

&lt;p&gt;Osuka-san, can you check one of them and see that your fix can solve the problem?&lt;/p&gt;</comment>
                            <comment id="13654515" author="commit-tag-bot" created="Fri, 10 May 2013 14:35:14 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; markrmiller&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1481030&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1481030&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4751&quot; title=&quot;The replication problem of the file in a subdirectory.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4751&quot;&gt;&lt;del&gt;SOLR-4751&lt;/del&gt;&lt;/a&gt;: revert for now&lt;/p&gt;</comment>
                            <comment id="13654516" author="commit-tag-bot" created="Fri, 10 May 2013 14:36:14 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; markrmiller&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1481031&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1481031&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4751&quot; title=&quot;The replication problem of the file in a subdirectory.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4751&quot;&gt;&lt;del&gt;SOLR-4751&lt;/del&gt;&lt;/a&gt;: revert for now&lt;/p&gt;</comment>
                            <comment id="13654517" author="markrmiller@gmail.com" created="Fri, 10 May 2013 14:36:41 +0000"  >&lt;p&gt;Seems a test fail is exposing an issue with this. I&apos;ve reverted this for the moment.&lt;/p&gt;</comment>
                            <comment id="13654556" author="koji" created="Fri, 10 May 2013 15:48:05 +0000"  >&lt;p&gt;Sorry for the inconvenience.&lt;/p&gt;

&lt;p&gt;I&apos;ll contact the reporter and see if we can fix the tests.&lt;/p&gt;</comment>
                            <comment id="13654597" author="commit-tag-bot" created="Fri, 10 May 2013 16:53:32 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;lucene_solr_4_3 commit&amp;#93;&lt;/span&gt; koji&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1481094&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1481094&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;revert &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4751&quot; title=&quot;The replication problem of the file in a subdirectory.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4751&quot;&gt;&lt;del&gt;SOLR-4751&lt;/del&gt;&lt;/a&gt; change&lt;/p&gt;</comment>
                            <comment id="13655849" author="minoru" created="Mon, 13 May 2013 08:47:58 +0000"  >&lt;p&gt;Sorry for the inconvenience.&lt;/p&gt;

&lt;p&gt;I&apos;ll modify test code.&lt;/p&gt;</comment>
                            <comment id="13659423" author="minoru" created="Thu, 16 May 2013 10:48:02 +0000"  >&lt;p&gt;When the directory of a renaming place did not exist, it modified so that a directory will be created. &lt;/p&gt;

&lt;p&gt;The test code was satisfactory. &lt;br/&gt;
Ran ant test -Dtestcase=TestReplicationHandler&lt;/p&gt;</comment>
                            <comment id="13660197" author="koji" created="Fri, 17 May 2013 00:27:24 +0000"  >&lt;p&gt;Looks good! I&apos;ll commit shortly.&lt;/p&gt;</comment>
                            <comment id="13660258" author="koji" created="Fri, 17 May 2013 01:59:50 +0000"  >&lt;p&gt;Committed on trunk, branch_4x and lucene_solr_4_3. Thanks!&lt;/p&gt;</comment>
                            <comment id="13660264" author="minoru" created="Fri, 17 May 2013 02:04:12 +0000"  >&lt;p&gt;Sekiguchi-san,&lt;/p&gt;

&lt;p&gt;Thank you so much for your help!&lt;/p&gt;</comment>
                            <comment id="13686923" author="shalinmangar" created="Tue, 18 Jun 2013 16:52:39 +0000"  >&lt;p&gt;Bulk close after 4.3.1 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12583464" name="SOLR-4751.patch" size="2666" author="minoru" created="Thu, 16 May 2013 10:48:02 +0000"/>
                            <attachment id="12579989" name="SOLR-4751.patch" size="1669" author="minoru" created="Tue, 23 Apr 2013 06:52:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>324427</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1jz0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>324772</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>