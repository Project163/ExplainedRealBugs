<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:51:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16302] Backup restore silently skips config restore if config with same name already exists (in cloud mode)</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16302</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;We have tested this only in cloud mode.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;We have noticed when a backup is restored that contains a config with the same name as one that already exists in solr, the config restore is silently skipped (also when the configs are different but share the same name). I would expect that at least a warning appears in the logs when this happens. We saw that this happens with backups from local repositories as well as gcs repository (possibly others too).&lt;/p&gt;

&lt;p&gt;Steps to reproduce the issue:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Start&#160; solr in cloud mode&lt;/li&gt;
	&lt;li&gt;Upload a config (any config, we tried with the default one)&lt;/li&gt;
	&lt;li&gt;Create a collection with the config&lt;/li&gt;
	&lt;li&gt;Create a backup&lt;/li&gt;
	&lt;li&gt;Delete collection in UI&lt;/li&gt;
	&lt;li&gt;Change the config either in backup or in solr (we added an additional comment)&lt;/li&gt;
	&lt;li&gt;&#160;Restore collection&lt;/li&gt;
	&lt;li&gt;Have a look that after restore the old solr config has remained and the restored collection is using it. At the same time, the config from the backup has been ignored and no warning was produced whatsoever.&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="13472427">SOLR-16302</key>
            <summary>Backup restore silently skips config restore if config with same name already exists (in cloud mode)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="krisden">Kevin Risden</assignee>
                                    <reporter username="almoser">Albert Moser</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Jul 2022 09:03:41 +0000</created>
                <updated>Fri, 17 Oct 2025 20:05:22 +0000</updated>
                            <resolved>Fri, 14 Oct 2022 20:24:26 +0000</resolved>
                                    <version>9.0</version>
                    <version>9.1</version>
                                    <fixVersion>9.2</fixVersion>
                    <fixVersion>10.0</fixVersion>
                                    <component>Backup/Restore</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                <comments>
                            <comment id="17602436" author="gerlowskija" created="Fri, 9 Sep 2022 16:10:05 +0000"  >&lt;p&gt;I think a WARN message here would definitely be prudent.&lt;/p&gt;

&lt;p&gt;It might even be worth adding some sort of flag to the restore API, to govern whether Solr uses the existing ZK config, or overwrite it upon restoring.  Of course, overwriting the config in ZK is probably a bad idea if the config is used by multiple collections, or if the collection being restored pre-existed the RESTORE call.  So maybe it&apos;s just better to stick with a WARN message here.&lt;/p&gt;

&lt;p&gt;Looking at the code, it looks like we log out an &lt;a href=&quot;https://github.com/apache/solr/blob/db23d7d48d5ef2cf84ff8f8de38209698db172d4/solr/core/src/java/org/apache/solr/cloud/api/collections/RestoreCmd.java#L323&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;INFO message&lt;/a&gt; already, but nothing super helpful.  Any chance you&apos;re up for suggesting some improved wording in a PR, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=almoser&quot; class=&quot;user-hover&quot; rel=&quot;almoser&quot;&gt;almoser&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="17603946" author="JIRAUSER292980" created="Wed, 14 Sep 2022 08:01:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gerlowskija&quot; class=&quot;user-hover&quot; rel=&quot;gerlowskija&quot;&gt;gerlowskija&lt;/a&gt; I created a PR with the change &lt;a href=&quot;https://github.com/apache/solr/pull/1009&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/pull/1009&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17617960" author="jira-bot" created="Fri, 14 Oct 2022 20:20:15 +0000"  >&lt;p&gt;Commit 6d398124c180e9a17653ba481f79b8cafbd68821 in solr&apos;s branch refs/heads/main from Albert Moser&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=6d398124c18&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=6d398124c18&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16302&quot; title=&quot;Backup restore silently skips config restore if config with same name already exists (in cloud mode)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16302&quot;&gt;&lt;del&gt;SOLR-16302&lt;/del&gt;&lt;/a&gt;: WARN when restoring backup if ConfigSet with same name already exists (#1009)&lt;/p&gt;

&lt;p&gt;Co-authored-by: Christine Poerschke &amp;lt;cpoerschke@apache.org&amp;gt;&lt;br/&gt;
Co-authored-by: Kevin Risden &amp;lt;krisden@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17617962" author="jira-bot" created="Fri, 14 Oct 2022 20:24:17 +0000"  >&lt;p&gt;Commit 5718e7aea221d7d8c92ae14cb756e3993a63ad74 in solr&apos;s branch refs/heads/branch_9x from Albert Moser&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=5718e7aea22&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=5718e7aea22&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16302&quot; title=&quot;Backup restore silently skips config restore if config with same name already exists (in cloud mode)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16302&quot;&gt;&lt;del&gt;SOLR-16302&lt;/del&gt;&lt;/a&gt;: WARN when restoring backup if ConfigSet with same name already exists (#1009)&lt;/p&gt;

&lt;p&gt;Co-authored-by: Christine Poerschke &amp;lt;cpoerschke@apache.org&amp;gt;&lt;br/&gt;
Co-authored-by: Kevin Risden &amp;lt;krisden@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17617963" author="risdenk" created="Fri, 14 Oct 2022 20:24:26 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=almoser&quot; class=&quot;user-hover&quot; rel=&quot;almoser&quot;&gt;almoser&lt;/a&gt; this will be in Solr 9.2&lt;/p&gt;</comment>
                            <comment id="17705508" author="houston" created="Mon, 27 Mar 2023 18:04:14 +0000"  >&lt;p&gt;Closing after the 9.2.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z170a0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>