<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:37:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4935] persisting solr.xml preserves extraneous values like &quot;wt=json&quot; in &lt;core&gt; tags when creating cores via the admin handler</title>
                <link>https://issues.apache.org/jira/browse/SOLR-4935</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I&apos;ll be soooo happy when we stop supporting persistence.&lt;/p&gt;

&lt;p&gt;Two problems&lt;br/&gt;
1&amp;gt; if instanceDir is not specified on the create, it&apos;s not persisted. And subsequent starts of Solr will fail.&lt;br/&gt;
2&amp;gt; extraneous params are specified, made worse by SolrJ adding some stuff on the create request like wt=javabin etc.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12653427">SOLR-4935</key>
            <summary>persisting solr.xml preserves extraneous values like &quot;wt=json&quot; in &lt;core&gt; tags when creating cores via the admin handler</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="erickerickson">Erick Erickson</assignee>
                                    <reporter username="erickerickson">Erick Erickson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Jun 2013 12:29:37 +0000</created>
                <updated>Mon, 9 May 2016 18:46:44 +0000</updated>
                            <resolved>Fri, 21 Jun 2013 19:45:19 +0000</resolved>
                                    <version>4.4</version>
                    <version>6.0</version>
                                    <fixVersion>4.4</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13686668" author="erickerickson" created="Tue, 18 Jun 2013 13:00:59 +0000"  >&lt;p&gt;Very preliminary patch, haven&apos;t run full test suite on it yet, but it fixes this problem in my test case.&lt;/p&gt;</comment>
                            <comment id="13686717" author="erickerickson" created="Tue, 18 Jun 2013 13:41:59 +0000"  >&lt;p&gt;Might fix the problem with not preserving the instance dir if it&apos;s not specified in the create admin action&lt;/p&gt;</comment>
                            <comment id="13686825" author="erickerickson" created="Tue, 18 Jun 2013 15:27:25 +0000"  >&lt;p&gt;BTW, I&apos;m running tests now and I plan to commit this tonight. I want to give Al the chance to run it and be sure it cures what he&apos;s seeing.&lt;/p&gt;

&lt;p&gt;But I&apos;m confident this is better than the current behavior, so if he doesn&apos;t get a chance today I&apos;ll just check it in regardless and we can open new JIRAs if it&apos;s not complete yet.&lt;/p&gt;</comment>
                            <comment id="13686831" author="elyograg" created="Tue, 18 Jun 2013 15:32:20 +0000"  >&lt;p&gt;What exactly happens if you don&apos;t include instanceDir?  Does it just use solr.solr.home, or does it use the name of the core as instanceDir?  If it&apos;s the name of the core, then IMHO the inferred value should be explicitly persisted on RENAME/SWAP.&lt;/p&gt;

&lt;p&gt;This will definitely be a lot better with core discovery.&lt;/p&gt;</comment>
                            <comment id="13686876" author="erickerickson" created="Tue, 18 Jun 2013 16:13:50 +0000"  >&lt;p&gt;bq: What exactly happens if you don&apos;t include instanceDir&lt;/p&gt;

&lt;p&gt;it defaults to the name of the core, pretty much as you&apos;d expect. For instance if I specify name=eoe, the instance dir is eoe/, relative to solr home.&lt;/p&gt;

&lt;p&gt;The problem is that the core loading isn&apos;t smart enough to do the same default behavior if the instanceDir isn&apos;t specified in the &amp;lt;core&amp;gt; tag. One could easily argue that it &lt;em&gt;should&lt;/em&gt; be assuming the name is specified, but I&apos;m not all that interested in changing functionality there and dealing with other places such a change might affect things when it&apos;s all going away...&lt;/p&gt;

&lt;p&gt;But good point, I&apos;ll add a test with the following steps&lt;br/&gt;
1&amp;gt; create 2 cores&lt;br/&gt;
2&amp;gt; check persistence is good&lt;br/&gt;
3&amp;gt; swap one of the new cores with another core&lt;br/&gt;
4&amp;gt; insure persistence is good&lt;br/&gt;
5&amp;gt; rename the other core&lt;br/&gt;
6&amp;gt; insure that persistence is good&lt;/p&gt;

&lt;p&gt;It&apos;s &lt;em&gt;probably&lt;/em&gt; OK, but there&apos;s no test that I know of that actually tries this kind of stuff...&lt;/p&gt;


</comment>
                            <comment id="13687246" author="alwold" created="Tue, 18 Jun 2013 21:49:12 +0000"  >&lt;p&gt;After applying the patch to branch_4x, everything seems to be working well for me. I&apos;ll continue to test with this and update if I see any more problems.&lt;/p&gt;</comment>
                            <comment id="13690531" author="erickerickson" created="Fri, 21 Jun 2013 18:04:19 +0000"  >&lt;p&gt;Final patch, about to commit. Additional tests flushed out another problem or two with creating a new core then renaming it.&lt;/p&gt;

&lt;p&gt;Many thanks Al!&lt;/p&gt;</comment>
                            <comment id="13690532" author="commit-tag-bot" created="Fri, 21 Jun 2013 18:05:17 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; erick&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1495528&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1495528&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4935&quot; title=&quot;persisting solr.xml preserves extraneous values like &amp;quot;wt=json&amp;quot; in &amp;lt;core&amp;gt; tags when creating cores via the admin handler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4935&quot;&gt;&lt;del&gt;SOLR-4935&lt;/del&gt;&lt;/a&gt; additional improvements for persisting solr.xml when manipulating cores&lt;/p&gt;</comment>
                            <comment id="13690642" author="commit-tag-bot" created="Fri, 21 Jun 2013 19:44:33 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; erick&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1495563&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1495563&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4935&quot; title=&quot;persisting solr.xml preserves extraneous values like &amp;quot;wt=json&amp;quot; in &amp;lt;core&amp;gt; tags when creating cores via the admin handler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4935&quot;&gt;&lt;del&gt;SOLR-4935&lt;/del&gt;&lt;/a&gt; additional improvements for persisting solr.xml when manipulating cores&lt;/p&gt;</comment>
                            <comment id="13690644" author="erickerickson" created="Fri, 21 Jun 2013 19:45:19 +0000"  >&lt;p&gt;Done as far as I know.&lt;/p&gt;</comment>
                            <comment id="13690814" author="commit-tag-bot" created="Fri, 21 Jun 2013 22:17:30 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; erick&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1495621&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1495621&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;test fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4935&quot; title=&quot;persisting solr.xml preserves extraneous values like &amp;quot;wt=json&amp;quot; in &amp;lt;core&amp;gt; tags when creating cores via the admin handler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4935&quot;&gt;&lt;del&gt;SOLR-4935&lt;/del&gt;&lt;/a&gt;, path separator issue&lt;/p&gt;</comment>
                            <comment id="13690817" author="erickerickson" created="Fri, 21 Jun 2013 22:19:32 +0000"  >&lt;p&gt;Test fails on windows b/c of file separator differences. Apply this patch last.&lt;/p&gt;</comment>
                            <comment id="13690819" author="commit-tag-bot" created="Fri, 21 Jun 2013 22:19:46 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; erick&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1495623&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1495623&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;test fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4935&quot; title=&quot;persisting solr.xml preserves extraneous values like &amp;quot;wt=json&amp;quot; in &amp;lt;core&amp;gt; tags when creating cores via the admin handler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4935&quot;&gt;&lt;del&gt;SOLR-4935&lt;/del&gt;&lt;/a&gt;, path separator issue&lt;/p&gt;</comment>
                            <comment id="13691042" author="commit-tag-bot" created="Sat, 22 Jun 2013 04:23:37 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; erick&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1495661&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1495661&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;test fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4935&quot; title=&quot;persisting solr.xml preserves extraneous values like &amp;quot;wt=json&amp;quot; in &amp;lt;core&amp;gt; tags when creating cores via the admin handler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4935&quot;&gt;&lt;del&gt;SOLR-4935&lt;/del&gt;&lt;/a&gt;, path separator issue (second)&lt;/p&gt;</comment>
                            <comment id="13691045" author="erickerickson" created="Sat, 22 Jun 2013 04:26:46 +0000"  >&lt;p&gt;Another file separator variant. Both test-fix patches need to be applied to pass on windows.&lt;/p&gt;</comment>
                            <comment id="13691047" author="commit-tag-bot" created="Sat, 22 Jun 2013 04:27:37 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; erick&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1495662&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1495662&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;test fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4935&quot; title=&quot;persisting solr.xml preserves extraneous values like &amp;quot;wt=json&amp;quot; in &amp;lt;core&amp;gt; tags when creating cores via the admin handler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4935&quot;&gt;&lt;del&gt;SOLR-4935&lt;/del&gt;&lt;/a&gt;, path separator issue (second)&lt;/p&gt;</comment>
                            <comment id="13716832" author="steve_rowe" created="Tue, 23 Jul 2013 18:38:43 +0000"  >&lt;p&gt;Bulk close resolved 4.4 issues&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12589174" name="SOLR-4935-test-fix.patch" size="1324" author="erickerickson" created="Fri, 21 Jun 2013 22:19:32 +0000"/>
                            <attachment id="12589233" name="SOLR-4935-test-fix2.patch" size="818" author="erickerickson" created="Sat, 22 Jun 2013 04:26:46 +0000"/>
                            <attachment id="12589113" name="SOLR-4935.patch" size="12031" author="erickerickson" created="Fri, 21 Jun 2013 18:04:19 +0000"/>
                            <attachment id="12588358" name="SOLR-4935.patch" size="4023" author="erickerickson" created="Tue, 18 Jun 2013 13:41:59 +0000"/>
                            <attachment id="12588342" name="SOLR-4935.patch" size="2144" author="erickerickson" created="Tue, 18 Jun 2013 13:00:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>333705</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lkdz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>334033</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>