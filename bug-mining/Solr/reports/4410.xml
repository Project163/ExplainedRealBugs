<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:42:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-14122] SimUtils incorrectly converts v2 to v1 request params</title>
                <link>https://issues.apache.org/jira/browse/SOLR-14122</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;As reported by Li Cao on the mailing list:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I am using solr 8.3.0 in cloud mode. I have collection level autoscaling policy and the collection name is &#8220;entity&#8221;. But when I run autoscaling simulation all the steps failed with this message:&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&quot;error&quot;:{&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;exception&quot;:&quot;java.io.IOException: java.util.concurrent.ExecutionException: org.apache.solr.common.SolrException: org.apache.solr.common.SolrException: Could not find collection : entity/shards&quot;,&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;suggestion&quot;:{&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;type&quot;:&quot;repair&quot;,&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;operation&quot;:{&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;method&quot;:&quot;POST&quot;,&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;path&quot;:&quot;/c/entity/shards&quot;,&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;command&quot;:{&quot;add-replica&quot;:{&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;shard&quot;:&quot;shard2&quot;,&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;node&quot;:&quot;my_node:8983_solr&quot;,&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;type&quot;:&quot;TLOG&quot;}}}},&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;replicaInfo&quot;:null}}},&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The simulation package internally uses v1 APIs but the requests created by the autoscaling framework may use v2 APIs. The utility class &lt;tt&gt;SimUtils&lt;/tt&gt; converts v2 request parameters to v1 parameters, without actually using the apispec or v2 Api handlers (as that would mean adding more complexity to the simulator, and only tangentially related to the autoscaling).&lt;/p&gt;

&lt;p&gt;There&apos;s a bug in this utility when converting the path of the request - V2 apispec uses &lt;tt&gt;/c/{collection}/shards&lt;/tt&gt; when manipulating shards and replicas - unlike V1 which uniformly uses &lt;tt&gt;/collections&lt;/tt&gt;. The utility class doesn&apos;t account for this path difference and creates invalid collection names.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13275541">SOLR-14122</key>
            <summary>SimUtils incorrectly converts v2 to v1 request params</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ab">Andrzej Bialecki</assignee>
                                    <reporter username="ab">Andrzej Bialecki</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Dec 2019 16:06:28 +0000</created>
                <updated>Tue, 24 Mar 2020 12:46:46 +0000</updated>
                            <resolved>Thu, 2 Jan 2020 13:36:24 +0000</resolved>
                                    <version>8.3</version>
                                    <fixVersion>8.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17006793" author="jira-bot" created="Thu, 2 Jan 2020 12:55:02 +0000"  >&lt;p&gt;Commit 38b9af21f1d84a0583741d1e023e843acf16c823 in lucene-solr&apos;s branch refs/heads/master from Andrzej Bialecki&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=38b9af2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=38b9af2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14122&quot; title=&quot;SimUtils incorrectly converts v2 to v1 request params&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14122&quot;&gt;&lt;del&gt;SOLR-14122&lt;/del&gt;&lt;/a&gt;: SimUtils converts v2 to v1 request params incorrectly.&lt;/p&gt;</comment>
                            <comment id="17006800" author="jira-bot" created="Thu, 2 Jan 2020 13:03:35 +0000"  >&lt;p&gt;Commit 15d5e6662c3fcee6d19979b7c2ff49a28610aca3 in lucene-solr&apos;s branch refs/heads/master from Andrzej Bialecki&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=15d5e66&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=15d5e66&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14122&quot; title=&quot;SimUtils incorrectly converts v2 to v1 request params&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14122&quot;&gt;&lt;del&gt;SOLR-14122&lt;/del&gt;&lt;/a&gt;: add unit test.&lt;/p&gt;</comment>
                            <comment id="17006805" author="jira-bot" created="Thu, 2 Jan 2020 13:26:22 +0000"  >&lt;p&gt;Commit 22386a1f127c03cff4506571b9a77062ea5dec08 in lucene-solr&apos;s branch refs/heads/branch_8x from Andrzej Bialecki&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=22386a1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=22386a1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14122&quot; title=&quot;SimUtils incorrectly converts v2 to v1 request params&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14122&quot;&gt;&lt;del&gt;SOLR-14122&lt;/del&gt;&lt;/a&gt;: SimUtils converts v2 to v1 request params incorrectly.&lt;/p&gt;</comment>
                            <comment id="17007375" author="jira-bot" created="Fri, 3 Jan 2020 10:03:12 +0000"  >&lt;p&gt;Commit 38b9af21f1d84a0583741d1e023e843acf16c823 in lucene-solr&apos;s branch refs/heads/gradle-master from Andrzej Bialecki&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=38b9af2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=38b9af2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14122&quot; title=&quot;SimUtils incorrectly converts v2 to v1 request params&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14122&quot;&gt;&lt;del&gt;SOLR-14122&lt;/del&gt;&lt;/a&gt;: SimUtils converts v2 to v1 request params incorrectly.&lt;/p&gt;</comment>
                            <comment id="17007376" author="jira-bot" created="Fri, 3 Jan 2020 10:03:15 +0000"  >&lt;p&gt;Commit 15d5e6662c3fcee6d19979b7c2ff49a28610aca3 in lucene-solr&apos;s branch refs/heads/gradle-master from Andrzej Bialecki&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=15d5e66&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=15d5e66&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14122&quot; title=&quot;SimUtils incorrectly converts v2 to v1 request params&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14122&quot;&gt;&lt;del&gt;SOLR-14122&lt;/del&gt;&lt;/a&gt;: add unit test.&lt;/p&gt;</comment>
                            <comment id="17065735" author="romseygeek" created="Tue, 24 Mar 2020 12:46:46 +0000"  >&lt;p&gt;Bulk close for 8.5.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z09unk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>