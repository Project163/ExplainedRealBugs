<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:12:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-17726] CloudMLTQParser fails to use copyFields due to RealTime Get</title>
                <link>https://issues.apache.org/jira/browse/SOLR-17726</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When using CloudMLTQParser (the default MLT parser in SolrCloud), fields that are populated exclusively via copyField are not taken into account when constructing the MoreLikeThis query.&lt;/p&gt;

&lt;p&gt;This happens because CloudMLTQParser relies on a RealTime Get (`/get`) request to retrieve the source document by ID, and the document returned by RealTime Get does not include fields generated via copyField (i.e. are not part of the original SolrIDocument).&lt;/p&gt;

&lt;p&gt;As a result, even if the copyField target is stored and has proper termVectors configured, CloudMLTQParser skips the field silently, and the MLT query ends up empty.&lt;br/&gt;
&#160;&lt;br/&gt;
This behavior differs from SimpleMLTQParser (used in Solr standalone), which does not rely on RealTimeGet but instead extracts the stored field content and re-applies the analysis chain dynamically.&lt;br/&gt;
&#160;&lt;br/&gt;
&lt;b&gt;STEPS TO REPRODUCE&lt;/b&gt;&lt;br/&gt;
1. Define these fields in the schema.xml:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;field name=&lt;span class=&quot;code-quote&quot;&gt;&quot;description&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;text_general&quot;&lt;/span&gt; indexed=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt; stored=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;/&amp;gt;
&amp;lt;field name=&lt;span class=&quot;code-quote&quot;&gt;&quot;descriptionMLT&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;text_general_mlt&quot;&lt;/span&gt; indexed=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt; stored=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt; termVectors=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;/&amp;gt;

&amp;lt;copyField source=&lt;span class=&quot;code-quote&quot;&gt;&quot;description&quot;&lt;/span&gt; dest=&lt;span class=&quot;code-quote&quot;&gt;&quot;descriptionMLT&quot;&lt;/span&gt;/&amp;gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;2. Index a document that sets only the &lt;tt&gt;description&lt;/tt&gt; field. The &lt;tt&gt;descriptionMLT&lt;/tt&gt; field is expected to be populated automatically via the configured copyField directive.&lt;br/&gt;
3. ** Run an MLT query:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/select?q={!mlt qf=descriptionMLT}doc_id &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;4. The resulting parsed query will be empty:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;parsedquery&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;+() -documentId:32000&quot;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If the same document is reindexed explicitly setting &lt;tt&gt;descriptionMLT&lt;/tt&gt;, the MLT query works.&lt;br/&gt;
&#160;&lt;br/&gt;
&#160;&lt;br/&gt;
&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13613938">SOLR-17726</key>
            <summary>CloudMLTQParser fails to use copyFields due to RealTime Get</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ilariapet">ilariapet</reporter>
                        <labels>
                            <label>morelikethis</label>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 2 Apr 2025 11:34:13 +0000</created>
                <updated>Thu, 24 Jul 2025 22:50:51 +0000</updated>
                            <resolved>Mon, 14 Jul 2025 06:59:13 +0000</resolved>
                                    <version>9.8.1</version>
                                    <fixVersion>9.9</fixVersion>
                                    <component>MoreLikeThis</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="17986841" author="jira-bot" created="Mon, 30 Jun 2025 08:30:55 +0000"  >&lt;p&gt;Commit d249593e5affaa9795bc7c9c6e2218e31203eee4 in solr&apos;s branch refs/heads/main from Ilaria Petreti&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=d249593e5af&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=d249593e5af&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17726&quot; title=&quot;CloudMLTQParser fails to use copyFields due to RealTime Get&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17726&quot;&gt;&lt;del&gt;SOLR-17726&lt;/del&gt;&lt;/a&gt; Fix CloudMLTQParser to support copyField in qf (#3328)&lt;/p&gt;

&lt;p&gt;using copy field source for more like this + tests&lt;br/&gt;
---------&lt;/p&gt;

&lt;p&gt;Co-authored-by: Alessandro Benedetti &amp;lt;a.benedetti@sease.io&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17986869" author="jira-bot" created="Mon, 30 Jun 2025 09:53:22 +0000"  >&lt;p&gt;Commit c790b54104ab38fb5b297bc43ffcd223e7eaf5f9 in solr&apos;s branch refs/heads/branch_9x from Ilaria Petreti&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=c790b54104a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=c790b54104a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17726&quot; title=&quot;CloudMLTQParser fails to use copyFields due to RealTime Get&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17726&quot;&gt;&lt;del&gt;SOLR-17726&lt;/del&gt;&lt;/a&gt; Fix CloudMLTQParser to support copyField in qf (#3328)&lt;/p&gt;

&lt;p&gt;using copy field source for more like this + tests&lt;br/&gt;
---------&lt;/p&gt;

&lt;p&gt;Co-authored-by: Alessandro Benedetti &amp;lt;a.benedetti@sease.io&amp;gt;&lt;br/&gt;
(cherry picked from commit d249593e5affaa9795bc7c9c6e2218e31203eee4)&lt;/p&gt;</comment>
                            <comment id="17986936" author="jira-bot" created="Mon, 30 Jun 2025 12:46:51 +0000"  >&lt;p&gt;Commit d249593e5affaa9795bc7c9c6e2218e31203eee4 in solr&apos;s branch refs/heads/fix-native-access-warning from Ilaria Petreti&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=d249593e5af&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=d249593e5af&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17726&quot; title=&quot;CloudMLTQParser fails to use copyFields due to RealTime Get&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17726&quot;&gt;&lt;del&gt;SOLR-17726&lt;/del&gt;&lt;/a&gt; Fix CloudMLTQParser to support copyField in qf (#3328)&lt;/p&gt;

&lt;p&gt;using copy field source for more like this + tests&lt;br/&gt;
---------&lt;/p&gt;

&lt;p&gt;Co-authored-by: Alessandro Benedetti &amp;lt;a.benedetti@sease.io&amp;gt;&lt;/p&gt;</comment>
                            <comment id="18009716" author="houston" created="Thu, 24 Jul 2025 22:50:51 +0000"  >&lt;p&gt;Closing after the 9.9.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1v4x4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>