<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:02:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-7046] NullPointerException when group.function uses query() function</title>
                <link>https://issues.apache.org/jira/browse/SOLR-7046</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When you attempt to group by function using the query() function, it results in an NullPointerException.&lt;/p&gt;

&lt;p&gt;Using the example webapp loaded with the hd.xml file in exampledocs, you can recreate by issuing the following query:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://localhost:8983/solr/select/?q=*:*&amp;amp;group=true&amp;amp;group.func=ceil(query(&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/select/?q=*:*&amp;amp;group=true&amp;amp;group.func=ceil(query(&lt;/a&gt;&lt;/p&gt;
{!type=edismax%20v=$q}
&lt;p&gt;))&lt;/p&gt;

&lt;p&gt;This appears to be due to a small bug in the following file:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Grouping.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void prepare() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
      Map context = ValueSource.newContext(searcher);
      groupBy.createWeight(context, searcher);
      actualGroupsToFind = getMax(offset, numGroups, maxDoc);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The variable context is always null because it&apos;s scope is local to this function, but it gets passed on to another function later.&lt;/p&gt;

&lt;p&gt;The patch is simply removing the Map qualifier from the instantiation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12770480">SOLR-7046</key>
            <summary>NullPointerException when group.function uses query() function</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="erickerickson">Erick Erickson</assignee>
                                    <reporter username="jimtronic">Jim Musil</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Jan 2015 21:23:44 +0000</created>
                <updated>Mon, 9 May 2016 18:55:45 +0000</updated>
                            <resolved>Thu, 29 Jan 2015 06:26:34 +0000</resolved>
                                    <version>4.10.3</version>
                                    <fixVersion>5.1</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>search</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14295346" author="erickerickson" created="Wed, 28 Jan 2015 16:22:29 +0000"  >&lt;p&gt;This seems very straightforward, as Jim says just a bug with a trivial fix.&lt;br/&gt;
Absent objections I&apos;ll commit this Real Soon Now.&lt;/p&gt;</comment>
                            <comment id="14296393" author="erickerickson" created="Thu, 29 Jan 2015 05:21:42 +0000"  >&lt;p&gt;Same patch with CHANGES.txt&lt;/p&gt;</comment>
                            <comment id="14296394" author="jira-bot" created="Thu, 29 Jan 2015 05:22:06 +0000"  >&lt;p&gt;Commit 1655525 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=erickoerickson&quot; class=&quot;user-hover&quot; rel=&quot;erickoerickson&quot;&gt;erickoerickson&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1655525&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1655525&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7046&quot; title=&quot;NullPointerException when group.function uses query() function&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7046&quot;&gt;&lt;del&gt;SOLR-7046&lt;/del&gt;&lt;/a&gt;: NullPointerException when group.function uses query() function&lt;/p&gt;</comment>
                            <comment id="14296442" author="jira-bot" created="Thu, 29 Jan 2015 06:26:12 +0000"  >&lt;p&gt;Commit 1655535 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=erickoerickson&quot; class=&quot;user-hover&quot; rel=&quot;erickoerickson&quot;&gt;erickoerickson&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1655535&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1655535&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7046&quot; title=&quot;NullPointerException when group.function uses query() function&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7046&quot;&gt;&lt;del&gt;SOLR-7046&lt;/del&gt;&lt;/a&gt;: NullPointerException when group.function uses query() function&lt;/p&gt;</comment>
                            <comment id="14296443" author="erickerickson" created="Thu, 29 Jan 2015 06:26:34 +0000"  >&lt;p&gt;Thanks Jim!&lt;/p&gt;</comment>
                            <comment id="14495335" author="thelabdude" created="Wed, 15 Apr 2015 00:30:39 +0000"  >&lt;p&gt;Bulk close after 5.1 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12695189" name="SOLR-7046.patch" size="1079" author="erickerickson" created="Thu, 29 Jan 2015 05:21:42 +0000"/>
                            <attachment id="12694854" name="SOLR-7046.patch" size="589" author="jimtronic" created="Tue, 27 Jan 2015 21:26:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24v4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>