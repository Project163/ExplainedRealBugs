<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:05:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-220] Solr returns &quot;HTTP status code=1&quot; in some case</title>
                <link>https://issues.apache.org/jira/browse/SOLR-220</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;If I request the following on solr example:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://localhost:8080/solr/select?q=ipod%3Bzzz+asc&amp;amp;version=2.2&amp;amp;start=0&amp;amp;rows=10&amp;amp;indent=on&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/solr/select?q=ipod%3Bzzz+asc&amp;amp;version=2.2&amp;amp;start=0&amp;amp;rows=10&amp;amp;indent=on&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I got an exception as I expected because zzz isn&apos;t undefined, but HTTP status code is 1. I expected 400 in this case.&lt;br/&gt;
The reason of this is because IndexSchema.getField() method throws SolrException(1,&quot;&quot;) and QueryParsing.parseSort() doesn&apos;t catch it:&lt;/p&gt;

&lt;p&gt;        // getField could throw an exception if the name isn&apos;t found&lt;br/&gt;
    	SchemaField f = schema.getField(part);	// &amp;lt;=== makes HTTP status code=1&lt;br/&gt;
        if (f == null || !f.indexed())&lt;/p&gt;
{
          throw new SolrException( 400, &quot;can not sort on unindexed field: &quot;+part );
        }

&lt;p&gt;There seems to be a couple of ways to solve this problem:&lt;/p&gt;

&lt;p&gt;1. IndexSchema.getField() method throws SolrException(400,&quot;&quot;)&lt;br/&gt;
2. IndexSchema.getField() method doesn&apos;t throw the exception but returns null&lt;br/&gt;
3. The caller catches the exception and re-throws SolrException(400,&quot;&quot;)&lt;br/&gt;
4. The caller catches the exception and re-throws SolrException(400,&quot;&quot;,cause) that wraps the cause exception&lt;/p&gt;

&lt;p&gt;I think either #3 or #4 will be acceptable. The attached patch is #3 for sort on undefined field.&lt;/p&gt;

&lt;p&gt;Other than QueryParsing.parseSort(), IndexSchema.getField() is called by the following class/methos:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;CSVLoader.prepareFields()&lt;/li&gt;
	&lt;li&gt;JSONWriter.writeDoc()&lt;/li&gt;
	&lt;li&gt;SimpleFacets.getTermCounts()&lt;/li&gt;
	&lt;li&gt;QueryParsing.parseValSource()&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;m not sure these methods require same patch. Any thoughts?&lt;/p&gt;

&lt;p&gt;regards,&lt;/p&gt;</description>
                <environment></environment>
        <key id="12368270">SOLR-220</key>
            <summary>Solr returns &quot;HTTP status code=1&quot; in some case</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ryantxu">Ryan McKinley</assignee>
                                    <reporter username="koji">Koji Sekiguchi</reporter>
                        <labels>
                    </labels>
                <created>Sun, 29 Apr 2007 00:07:35 +0000</created>
                <updated>Thu, 5 Jul 2018 21:17:47 +0000</updated>
                            <resolved>Sun, 29 Apr 2007 21:02:46 +0000</resolved>
                                                                    <component>search</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12492527" author="koji" created="Sun, 29 Apr 2007 00:11:26 +0000"  >&lt;p&gt;the patch for &quot;sort on undefined field&quot;&lt;/p&gt;</comment>
                            <comment id="12492531" author="ryantxu" created="Sun, 29 Apr 2007 00:29:41 +0000"  >&lt;p&gt;I just checked in a much smaller patch that at least won&apos;t throw a status code=&quot;1&quot;&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc/lucene/solr/trunk/src/java/org/apache/solr/schema/IndexSchema.java?r1=533449&amp;amp;r2=533448&amp;amp;pathrev=533449&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/lucene/solr/trunk/src/java/org/apache/solr/schema/IndexSchema.java?r1=533449&amp;amp;r2=533448&amp;amp;pathrev=533449&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We should probably use your patch so that it has a nice context specific error, rather then the general &quot;undefined field&quot;&lt;/p&gt;

&lt;p&gt;As an aside, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-204&quot; title=&quot;Let solrconfig.xml configure the SolrDispatchFilter to handle /select&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-204&quot;&gt;&lt;del&gt;SOLR-204&lt;/del&gt;&lt;/a&gt; will make the request dispatcher the default /select handler.  This catches invalid error codes and returns a 500.&lt;/p&gt;

&lt;p&gt;thanks&lt;/p&gt;
</comment>
                            <comment id="12492601" author="ryantxu" created="Sun, 29 Apr 2007 21:02:46 +0000"  >&lt;p&gt;fixed in rev 533560&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12356469" name="QueryParsing.patch" size="775" author="koji" created="Sun, 29 Apr 2007 00:11:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7368</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 31 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03y4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20963</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>