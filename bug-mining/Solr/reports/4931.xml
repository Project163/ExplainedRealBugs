<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:51:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16463] Serious crash on JDK17+ due to JIT on caffeinecache</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16463</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Solr 9+ under JDK 17+ may crash frequently, during JVM Hotspot optimization of caffeine cache class.&lt;/p&gt;

&lt;p&gt;This is due to a JDK bug (&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8285835)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.org/browse/JDK-8285835&lt;/a&gt;), but may not be fixed soon in JDK17, so we should make a workaround to protect our users. The bug is also reported in caffeine project (&lt;a href=&quot;https://github.com/ben-manes/caffeine/issues/797&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ben-manes/caffeine/issues/797&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;So there are a few possible ways to avoid this&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Run Solr 9 on JDK 11&lt;/li&gt;
	&lt;li&gt;Do not use caffeine cache, find some replacement&lt;/li&gt;
	&lt;li&gt;Caffeine cache releases a new version that do not suffer the issue, and solr uses that&lt;/li&gt;
	&lt;li&gt;Instruct JDK to not optimize that class, using JDK option&#160;&lt;br/&gt;
&lt;tt&gt;-XX:CompileCommand=exclude,com.github.benmanes.caffeine.cache.BoundedLocalCache::put&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;See users list for examples of this issue seen in the wild: &lt;a href=&quot;https://lists.apache.org/thread/wg7qtkddd1t5h08okj7gm9qbrpdf0ox6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread/wg7qtkddd1t5h08okj7gm9qbrpdf0ox6&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Docker users can set SOLR_OPTS with the JDK option above. Patching the official Dockerfile to include this may be the least intrusive fix short-term. We should also document the issue on website and perhaps docker hub to provide users with a workaround.&lt;/p&gt;

&lt;p&gt;For 9.1 we can hardcode the JDK flag in bin/solr.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13486296">SOLR-16463</key>
            <summary>Serious crash on JDK17+ due to JIT on caffeinecache</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="janhoy">Jan H&#248;ydahl</assignee>
                                    <reporter username="janhoy">Jan H&#248;ydahl</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Oct 2022 09:25:56 +0000</created>
                <updated>Thu, 28 Sep 2023 13:35:29 +0000</updated>
                            <resolved>Thu, 20 Oct 2022 08:03:37 +0000</resolved>
                                    <version>9.0</version>
                                    <fixVersion>9.1</fixVersion>
                                    <component>Docker</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>14</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="16200">4.5h</timespent>
                                <comments>
                            <comment id="17620124" author="janhoy" created="Wed, 19 Oct 2022 09:03:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=uschindler&quot; class=&quot;user-hover&quot; rel=&quot;uschindler&quot;&gt;uschindler&lt;/a&gt; have you heard anything new regarding the JDK bug? Did they reproduce it?&lt;/p&gt;

&lt;p&gt;On our users list (see link in description) there are several users experiencing the bug in production, if the JDK guys need more failure samples.&lt;/p&gt;</comment>
                            <comment id="17620136" author="thetaphi" created="Wed, 19 Oct 2022 09:20:32 +0000"  >&lt;p&gt;In the above thread I found no exact java stack trace. If someone would post the whole hserr file it would be more helpful.&lt;br/&gt;
The lucene issue was only found in the Lucene&apos;s Facet module (not used by Solr), but as the error may happen in similar loops on DocIdSetIterators, it is likely that Solr is also affected. I&apos;d really like to get a &lt;b&gt;full&lt;/b&gt; hserr.pid by all those people reporting on mailing list.&lt;/p&gt;

&lt;p&gt;The bug will be fixed hopefully in 20, unfortunately not in 19 (otherwise a 19 docker image with Lucene 9.4 would have been a good choice and helpful for the new mmap api if it also enables preview mode).&lt;/p&gt;

&lt;p&gt;About the bug: The cause is known and they can easily reproduce it.&lt;/p&gt;</comment>
                            <comment id="17620148" author="thetaphi" created="Wed, 19 Oct 2022 09:38:57 +0000"  >&lt;p&gt;Hi based on some hserr.pid files I can see this:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Current CompileTask:&lt;br/&gt;
C2: 916724 18311 ! 4 com.github.benmanes.caffeine.cache.BoundedLocalCache::put (731 bytes)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So it looks like Caffeine is affected, not Lucene in this case. Lucene was only affected in Facet module. I will check the method in Caffeine and figure out if it looks similar and contains loops.&lt;/p&gt;</comment>
                            <comment id="17620151" author="thetaphi" created="Wed, 19 Oct 2022 09:39:49 +0000"  >&lt;p&gt;Could you open bug report of Caffeine and also refer to this issue and also the JDK bug?&lt;/p&gt;</comment>
                            <comment id="17620156" author="thetaphi" created="Wed, 19 Oct 2022 09:43:10 +0000"  >&lt;p&gt;This method is affected: &lt;a href=&quot;https://github.com/ben-manes/caffeine/blob/4ac6eb5591a1d325c2786fc335688cf6f20c228a/caffeine/src/main/java/com/github/benmanes/caffeine/cache/BoundedLocalCache.java#L2208-L2317&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ben-manes/caffeine/blob/4ac6eb5591a1d325c2786fc335688cf6f20c228a/caffeine/src/main/java/com/github/benmanes/caffeine/cache/BoundedLocalCache.java#L2208-L2317&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17620163" author="thetaphi" created="Wed, 19 Oct 2022 09:52:11 +0000"  >&lt;p&gt;Instead of creating a custom docker image, you could do the following as fallback. Just use JDK 17 and add the following to the Java startup command line:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;-XX:CompileCommand=exclude,com.github.benmanes.caffeine.cache.BoundedLocalCache::put&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;This will prevent that the problematic method is compiled. Maybe just update the Docker image and add this command line option. It may make the cache a bit slower, but I don&apos;t thing this has much effect, because the method does not seem to be &quot;hot&quot;, otherwise the bug would happen after latest 5 minutes runtime of Solr.&lt;/p&gt;</comment>
                            <comment id="17620166" author="thetaphi" created="Wed, 19 Oct 2022 09:53:24 +0000"  >&lt;p&gt;You can also tell this the affceted people on the mailing list. I am not part of Solr User mailing list (too much traffic), so it would be good to tell them this.&lt;/p&gt;</comment>
                            <comment id="17620182" author="janhoy" created="Wed, 19 Oct 2022 10:30:25 +0000"  >&lt;p&gt;Sent a mail to the users list about this, hopefully someone can try out your workaround in prod.&lt;/p&gt;

&lt;p&gt;Also reported to caffeine project in &lt;a href=&quot;https://github.com/ben-manes/caffeine/issues/797&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ben-manes/caffeine/issues/797&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17620188" author="janhoy" created="Wed, 19 Oct 2022 10:45:34 +0000"  >&lt;p&gt;Created another PR &lt;a href=&quot;https://github.com/apache/solr-docker/pull/11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr-docker/pull/11&lt;/a&gt; with the alternative workaround.&lt;/p&gt;</comment>
                            <comment id="17620399" author="janhoy" created="Wed, 19 Oct 2022 14:55:14 +0000"  >&lt;p&gt;For 9.1 I created a PR to hardcode the workaround in bin/solr, see &lt;a href=&quot;https://github.com/apache/solr/pull/1090&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/pull/1090&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ichattopadhyaya&quot; class=&quot;user-hover&quot; rel=&quot;ichattopadhyaya&quot;&gt;ichattopadhyaya&lt;/a&gt; can this make it to the Solr9.1 release so it works for all users and we don&apos;t need to patch Dockerfile?&lt;/p&gt;</comment>
                            <comment id="17620486" author="dsmiley" created="Wed, 19 Oct 2022 18:05:24 +0000"  >&lt;p&gt;I really hope this bug gets fixed in 17.  I fear we&apos;ll be just doing expensive wack-a-mole until then, disabling methods that tickle the bug.&lt;/p&gt;</comment>
                            <comment id="17620491" author="ctargett" created="Wed, 19 Oct 2022 18:21:31 +0000"  >&lt;p&gt;I understand the workaround is simpler in a lot of ways, but it&apos;s for 9.1 so anyone currently deploying or who wants to deploy 9.0 from a Docker image will still have to customize their Dockerfile to get around it (or come up with some other process that operates on every deploy).&lt;/p&gt;

&lt;p&gt;Until we are sure the bug is fixed, why wouldn&apos;t we just use JDK 11 as the base image instead of hoping we don&apos;t find anything else?&lt;/p&gt;</comment>
                            <comment id="17620596" author="janhoy" created="Wed, 19 Oct 2022 20:57:52 +0000"  >&lt;p&gt;David, there is a risk of wack-a-mole for sure, we still don&apos;t know if there are other parts of the code with similar problems, that would manifest once this is in. I also hope that the fix will be backported to JDK17, I cannot see how they could not backport it...&lt;/p&gt;

&lt;p&gt;Cassandra - if we commit the fix for 9.0 Dockerfile, existing users of solr:9.0.0 image will get the fix simply by re-pulling. Other users can apply the fix manually or choose JDK11. After we commit that fix, if we see reports of problems in other parts of the code, we can either continuing plugging each one in new updates, or we can throw in the towel and downgrade 9.0 Dockerfile to jdk11...&lt;/p&gt;

&lt;p&gt;Right now I&apos;m trying to see our options and get momentum so we can make some decisions.&lt;/p&gt;</comment>
                            <comment id="17620626" author="thetaphi" created="Wed, 19 Oct 2022 22:09:59 +0000"  >&lt;p&gt;Thanks, Jan. This is exactly my own opinion on the situation. In general the appoach here is fine. If you have many reports with same issue in some method, we can always use the workaround (just make sure that &lt;b&gt;whole&lt;/b&gt; hs_err.pid is posted; people tend to only report the crash, but forget that we are no C coders but Java coders and we need Java function names not arbitrary C++ code stack traces and SIGXXX codes or compilation ther stack dumps). For this issue excluding this method will for sure disable the bug for that compilation unit. Others could still exist, but we would have some instances of reports on them. More data would be good, but posted hserr files all have same information by different users and JVM versions (Microsoft, Adoptium/Temurin, Oracle,...).&lt;/p&gt;

&lt;p&gt;I just want to add: In JDK 17 (and also JDK 11) are so many bugs we have seen, some are already fixed in 17, but still existing in 11 (just look at the daily failures by Lucene&apos;s tests running all variants of 11 to 20-ea on 9.x branch). If we really would like to be safe: Let&apos;s go back to 8! - oh wait, JDK 8 is also buggy! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;It would just be good if we could get some feedback from users of mailing list.&lt;/p&gt;</comment>
                            <comment id="17620627" author="thetaphi" created="Wed, 19 Oct 2022 22:16:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;I really hope this bug gets fixed in 17. I fear we&apos;ll be just doing expensive wack-a-mole until then, disabling methods that tickle the bug.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You can be sure that this will be fixed. It is a regression introduced in 17 (they rewrote the whole code of loop optimizations and added some runtime assertions; some were false, like this one). I just posted the Solr information yesterday and again people are translating this into a series of now 4 or 5 duplicate issues all around same problem. The Lucene case is now reproducible in milliseconds for them (they use a stripped down set of JAR files and a bit user code and crazy command line parameters to trigger it in Lucene&apos;s Facet module).&lt;/p&gt;

&lt;p&gt;I know, the bug is now open half a year - sorry!&lt;/p&gt;</comment>
                            <comment id="17620721" author="ichattopadhyaya" created="Thu, 20 Oct 2022 04:43:43 +0000"  >&lt;p&gt;Sure, Jan. Feel free to hold up the release until this is fixed. This is serious.&lt;/p&gt;</comment>
                            <comment id="17620878" author="jira-bot" created="Thu, 20 Oct 2022 07:54:38 +0000"  >&lt;p&gt;Commit 49f03a6a74df843d5301d41c72ff60db97f694e1 in solr&apos;s branch refs/heads/main from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=49f03a6a74d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=49f03a6a74d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16463&quot; title=&quot;Serious crash on JDK17+ due to JIT on caffeinecache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16463&quot;&gt;&lt;del&gt;SOLR-16463&lt;/del&gt;&lt;/a&gt;: Workaround for serious crash on JDK17+ (#1090)&lt;/p&gt;
</comment>
                            <comment id="17620880" author="jira-bot" created="Thu, 20 Oct 2022 07:57:00 +0000"  >&lt;p&gt;Commit a4307dabde6f776bf4657d73ea8a52ca1e7b51a4 in solr&apos;s branch refs/heads/branch_9x from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=a4307dabde6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=a4307dabde6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16463&quot; title=&quot;Serious crash on JDK17+ due to JIT on caffeinecache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16463&quot;&gt;&lt;del&gt;SOLR-16463&lt;/del&gt;&lt;/a&gt;: Workaround for serious crash on JDK17+ (#1090)&lt;/p&gt;
</comment>
                            <comment id="17620886" author="jira-bot" created="Thu, 20 Oct 2022 08:02:36 +0000"  >&lt;p&gt;Commit 99bd072c3cbff7b64aeba66aa6719f51fdb8502f in solr&apos;s branch refs/heads/branch_9_1 from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=99bd072c3cb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=99bd072c3cb&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16463&quot; title=&quot;Serious crash on JDK17+ due to JIT on caffeinecache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16463&quot;&gt;&lt;del&gt;SOLR-16463&lt;/del&gt;&lt;/a&gt;: Workaround for serious crash on JDK17+ (#1090)&lt;/p&gt;
</comment>
                            <comment id="17620887" author="janhoy" created="Thu, 20 Oct 2022 08:03:37 +0000"  >&lt;p&gt;Fixed.&lt;/p&gt;

&lt;p&gt;9.1 release should now be unblocked &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ichattopadhyaya&quot; class=&quot;user-hover&quot; rel=&quot;ichattopadhyaya&quot;&gt;ichattopadhyaya&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17621057" author="ctargett" created="Thu, 20 Oct 2022 12:10:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=janhoy&quot; class=&quot;user-hover&quot; rel=&quot;janhoy&quot;&gt;janhoy&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;if we commit the fix for 9.0 Dockerfile, existing users of solr:9.0.0 image will get the fix simply by re-pulling&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Of course, but it is not at all clear from all the commentary in this issue and in the PR in `solr-docker` that there will actually be a fix for the 9.0 Dockerfile. Is that the actual plan?&lt;/p&gt;</comment>
                            <comment id="17621070" author="janhoy" created="Thu, 20 Oct 2022 12:19:52 +0000"  >&lt;blockquote&gt;&lt;p&gt;Of course, but it is not at all clear from all the commentary in this issue and in the PR in `solr-docker` that there will actually be a fix for the 9.0 Dockerfile. Is that the actual plan?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This Jira was repurposed for the 9.1 fix which is an actual solr-repo code change.&lt;/p&gt;

&lt;p&gt;The patch in &apos;solr-docker&apos; for already-released 9.0 image seems to be warranted to help the thousands of users who will be running 9.0.0 docker from now and several weeks until they are ready to jump to 9.1. The workaround won&apos;t work for everyone, but seems like consensus for pushing it.&lt;/p&gt;</comment>
                            <comment id="17625529" author="thetaphi" created="Fri, 28 Oct 2022 08:53:16 +0000"  >&lt;p&gt;There is now a PR for the Lucene issue: &lt;a href=&quot;https://github.com/openjdk/jdk/pull/10894&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/openjdk/jdk/pull/10894&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It is not clear if this also fixes Caffeine. See my description on how this applies to Lucene&apos;s facet code: &lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8285835?focusedCommentId=14533010&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14533010&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.org/browse/JDK-8285835?focusedCommentId=14533010&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14533010&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17655649" author="vassil.velichkov" created="Sat, 7 Jan 2023 05:14:57 +0000"  >&lt;p&gt;It seems the OpenJDK bug is fixed, the ticket is awaiting for review and hopefully the pull request will be merged and will be included in the next patch version:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8285835?focusedCommentId=14548280&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14548280&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.org/browse/JDK-8285835?focusedCommentId=14548280&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14548280&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17656908" author="ishan" created="Tue, 10 Jan 2023 20:45:34 +0000"  >&lt;p&gt;Bulk closing 9.1 issues.&lt;/p&gt;</comment>
                            <comment id="17768745" author="elyograg" created="Mon, 25 Sep 2023 15:17:33 +0000"  >&lt;p&gt;I came up with some changes to the bin/solr script to explicitly detect the java versions with this bug and stop enabling the workaround if a version that has the fix is available.&lt;/p&gt;

&lt;p&gt;A similar change would be required for solr.cmd, I will look into that later.&lt;/p&gt;

&lt;p&gt;I think that a new issue is required for this, but wanted to get a conversation started before making that issue.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13063145/13063145_SOLR-16463.patch&quot; title=&quot;SOLR-16463.patch attached to SOLR-16463&quot;&gt;SOLR-16463.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="13552214">SOLR-17001</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13063145" name="SOLR-16463.patch" size="3859" author="elyograg" created="Mon, 25 Sep 2023 15:02:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 7 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z19d9k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>