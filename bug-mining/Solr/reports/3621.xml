<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:27:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-11281] SolrSlf4jReporterTest fails on jenkins</title>
                <link>https://issues.apache.org/jira/browse/SOLR-11281</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;This test fails frequently on jenkins with a failed assertion:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;FAILED:  org.apache.solr.metrics.reporters.SolrSlf4jReporterTest.testReporter

Error Message:


Stack Trace:
java.lang.AssertionError
	at __randomizedtesting.SeedInfo.seed([7B977D6F04FCA50C:247350586FF03649]:0)
	at org.junit.Assert.fail(Assert.java:92)
	at org.junit.Assert.assertTrue(Assert.java:43)
	at org.junit.Assert.assertTrue(Assert.java:54)
	at org.apache.solr.metrics.reporters.SolrSlf4jReporterTest.testReporter(SolrSlf4jReporterTest.java:84)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;A better failure message is needed first, then the test needs a fix to be more robust.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13096994">SOLR-11281</key>
            <summary>SolrSlf4jReporterTest fails on jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ab">Andrzej Bialecki</assignee>
                                    <reporter username="ab">Andrzej Bialecki</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Aug 2017 11:14:08 +0000</created>
                <updated>Sat, 8 Jun 2019 15:21:26 +0000</updated>
                            <resolved>Mon, 4 Sep 2017 10:11:52 +0000</resolved>
                                                    <fixVersion>7.1</fixVersion>
                    <fixVersion>8.0</fixVersion>
                                    <component>metrics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16138234" author="jira-bot" created="Wed, 23 Aug 2017 11:15:11 +0000"  >&lt;p&gt;Commit 9cc5ffef95f43a67191dba9d2b6dbd21f1b8ef38 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9cc5ffe&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9cc5ffe&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11281&quot; title=&quot;SolrSlf4jReporterTest fails on jenkins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11281&quot;&gt;&lt;del&gt;SOLR-11281&lt;/del&gt;&lt;/a&gt;: Improve failure message.&lt;/p&gt;</comment>
                            <comment id="16138236" author="jira-bot" created="Wed, 23 Aug 2017 11:15:43 +0000"  >&lt;p&gt;Commit 946c6a95faa61902e6fffdb54373c04135c68ad9 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=946c6a9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=946c6a9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11281&quot; title=&quot;SolrSlf4jReporterTest fails on jenkins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11281&quot;&gt;&lt;del&gt;SOLR-11281&lt;/del&gt;&lt;/a&gt;: Improve failure message.&lt;/p&gt;</comment>
                            <comment id="16141694" author="ab" created="Fri, 25 Aug 2017 14:39:14 +0000"  >&lt;p&gt;Hmm, not sure what&apos;s going on here... it looks as if the LogWatcher was unable to collect any logs:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;1 tests failed.
FAILED:  org.apache.solr.metrics.reporters.SolrSlf4jReporterTest.testReporter

Error Message:
No &lt;span class=&quot;code-quote&quot;&gt;&apos;solr.node&apos;&lt;/span&gt; logs in: {numFound=0,start=0,docs=[]}

Stack Trace:
java.lang.AssertionError: No &lt;span class=&quot;code-quote&quot;&gt;&apos;solr.node&apos;&lt;/span&gt; logs in: {numFound=0,start=0,docs=[]}
	at __randomizedtesting.SeedInfo.seed([26DCC204D41B0BAC:7938EF33BF1798E9]:0)
	at org.junit.Assert.fail(Assert.java:93)
	at org.apache.solr.metrics.reporters.SolrSlf4jReporterTest.testReporter(SolrSlf4jReporterTest.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16141723" author="jira-bot" created="Fri, 25 Aug 2017 14:59:52 +0000"  >&lt;p&gt;Commit 674a8eb8d78c4949220c7a2dae3ec06b4a045bcb in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=674a8eb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=674a8eb&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11281&quot; title=&quot;SolrSlf4jReporterTest fails on jenkins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11281&quot;&gt;&lt;del&gt;SOLR-11281&lt;/del&gt;&lt;/a&gt;: More instrumentation to catch the failure on jenkins.&lt;/p&gt;</comment>
                            <comment id="16141921" author="hossman" created="Fri, 25 Aug 2017 17:21:09 +0000"  >&lt;p&gt;as i mentioned in a response to the jenkins failures emails when these failures started, i believe this is caused by  &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10628&quot; title=&quot;Less verbose output from bin/solr commands&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10628&quot;&gt;&lt;del&gt;SOLR-10628&lt;/del&gt;&lt;/a&gt; polluting the static log level in the test &amp;#8211; but it would be great if you could confirm for me that the test is expecting the Logging level to be INFO.&lt;/p&gt;

&lt;p&gt;(if so, adding a sanity check assert that fails fast if the logging level is not INFO, similar to what UpdateRequestProcessorFactoryTest would be a good idea in the long run)&lt;/p&gt;</comment>
                            <comment id="16142784" author="gerlowskija" created="Sat, 26 Aug 2017 12:16:07 +0000"  >&lt;p&gt;I second Hoss&apos;s opinion that 10628 is at fault here.  A bug was introduced in the JIRA whereby SolrCLI many &lt;tt&gt;runTool&lt;/tt&gt; calls will change the log-level of the JVM to WARN, without resetting it when done.  (I&apos;ve uploaded a patch fixing this issue over there).&lt;/p&gt;

&lt;p&gt;This seems to affect SolrSlf4jReporterTest.  My guess is that it expects to find logs reported, but when the test is executed with an elevated log-level, nothing actually gets logged.  This is supported by the fact that if you add the following code to SolrSlf4jReporterTest, it fails consistently with the same error message noted above.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  @BeforeClass
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void beforeItAll() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    StartupLoggingUtils.changeLogLevel(&lt;span class=&quot;code-quote&quot;&gt;&quot;WARN&quot;&lt;/span&gt;); 
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Merging the patch on &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10628&quot; title=&quot;Less verbose output from bin/solr commands&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10628&quot;&gt;&lt;del&gt;SOLR-10628&lt;/del&gt;&lt;/a&gt; should resolve this issue.  To address Hoss&apos;s point, I&apos;ve attached a patch containing a &lt;tt&gt;BeforeClass&lt;/tt&gt; check with a nice error message, to ensure the log level is what the test expects/requires.&lt;/p&gt;</comment>
                            <comment id="16143934" author="jira-bot" created="Mon, 28 Aug 2017 15:59:19 +0000"  >&lt;p&gt;Commit 40f999b08e8dc8b515d83c0a56b3e96d84547f5d in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=40f999b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=40f999b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11281&quot; title=&quot;SolrSlf4jReporterTest fails on jenkins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11281&quot;&gt;&lt;del&gt;SOLR-11281&lt;/del&gt;&lt;/a&gt;: Remove the diagnostic additions and apply a patch from Jason Gerlowski.&lt;/p&gt;</comment>
                            <comment id="16144855" author="jira-bot" created="Tue, 29 Aug 2017 07:15:17 +0000"  >&lt;p&gt;Commit 1440caf47630a11a37ce8b943bd845053d4c4362 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=1440caf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=1440caf&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11281&quot; title=&quot;SolrSlf4jReporterTest fails on jenkins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11281&quot;&gt;&lt;del&gt;SOLR-11281&lt;/del&gt;&lt;/a&gt;: Apply a patch from Jason Gerlowski to make this test fail quickly.&lt;/p&gt;</comment>
                            <comment id="16147774" author="janhoy" created="Wed, 30 Aug 2017 18:34:31 +0000"  >&lt;p&gt;I&apos;ll fix the precommit failures caused by this&lt;/p&gt;</comment>
                            <comment id="16147847" author="jira-bot" created="Wed, 30 Aug 2017 19:00:52 +0000"  >&lt;p&gt;Commit 4b7171bab5275d6a5eeb60d98b5f76757c9fa0fa in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=janhoy&quot; class=&quot;user-hover&quot; rel=&quot;janhoy&quot;&gt;janhoy&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=4b7171b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=4b7171b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11281&quot; title=&quot;SolrSlf4jReporterTest fails on jenkins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11281&quot;&gt;&lt;del&gt;SOLR-11281&lt;/del&gt;&lt;/a&gt;: Fix precommit failures on unused imports&lt;/p&gt;</comment>
                            <comment id="16148396" author="gerlowskija" created="Thu, 31 Aug 2017 03:36:24 +0000"  >&lt;p&gt;Jan merged a change on &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10628&quot; title=&quot;Less verbose output from bin/solr commands&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10628&quot;&gt;&lt;del&gt;SOLR-10628&lt;/del&gt;&lt;/a&gt; that we expect will fix these SolrSlf4jReporterTest failures.  If the build history stays clean in the next few days, we should be able to close this issue.&lt;/p&gt;</comment>
                            <comment id="16152427" author="ab" created="Mon, 4 Sep 2017 10:11:52 +0000"  >&lt;p&gt;This didn&apos;t appear in any of the recent builds, so I&apos;m resolving it as fixed.&lt;/p&gt;

&lt;p&gt;Thanks Jason, Jan and Hoss for your help!&lt;/p&gt;</comment>
                            <comment id="16207433" author="shalinmangar" created="Tue, 17 Oct 2017 11:04:10 +0000"  >&lt;p&gt;Bulk close after 7.1.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13069915">SOLR-10628</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12883926" name="SOLR-11281.patch" size="2087" author="gerlowskija" created="Sat, 26 Aug 2017 12:16:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3j6pj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>