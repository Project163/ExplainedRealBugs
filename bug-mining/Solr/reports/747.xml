<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:24:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-2955] Distributed grouping throws IllegalStateException when querying with group.sort=score desc</title>
                <link>https://issues.apache.org/jira/browse/SOLR-2955</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;To reproduce:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Start example configuration from 3.6 or 4.0 distribution, and add example .xml documents to index&lt;/li&gt;
	&lt;li&gt;Query: &lt;a href=&quot;http://localhost:8983/solr/select?q=*:*&amp;amp;sort=id%20asc&amp;amp;group=true&amp;amp;group.sort=score%20desc&amp;amp;group.field=manu_id_s&amp;amp;shards=localhost:8983/solr&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8983/solr/select?q=*:*&amp;amp;sort=id%20asc&amp;amp;group=true&amp;amp;group.sort=score%20desc&amp;amp;group.field=manu_id_s&amp;amp;shards=localhost:8983/solr&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This will log&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Dec 8, 2011 10:01:23 AM org.apache.solr.common.SolrException log
SEVERE: java.lang.IllegalStateException: All required fields must be set
	at org.apache.solr.search.grouping.distributed.command.TopGroupsFieldCommand$Builder.build(TopGroupsFieldCommand.java:94)
	at org.apache.solr.handler.component.QueryComponent.process(QueryComponent.java:291)
	at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:194)
	.
	.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For other (legal) values of group.sort or without the shards parameter, the query succeeds. &lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OS X 10.7.2&lt;br/&gt;
Java version &quot;1.6.0_29&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_29-b11-402-11M3527)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 20.4-b02-402, mixed mode)&lt;/p&gt;</environment>
        <key id="12534331">SOLR-2955</key>
            <summary>Distributed grouping throws IllegalStateException when querying with group.sort=score desc</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="martijn.v.groningen">Martijn van Groningen</assignee>
                                    <reporter username="seg">Steffen Elberg Godskesen</reporter>
                        <labels>
                            <label>collapse</label>
                            <label>exception</label>
                            <label>grouping</label>
                    </labels>
                <created>Thu, 8 Dec 2011 11:01:11 +0000</created>
                <updated>Fri, 10 May 2013 10:40:57 +0000</updated>
                            <resolved>Fri, 9 Dec 2011 13:50:30 +0000</resolved>
                                    <version>3.5</version>
                    <version>4.0-ALPHA</version>
                                    <fixVersion>3.6</fixVersion>
                    <fixVersion>4.0-ALPHA</fixVersion>
                                    <component>search</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13165165" author="seg" created="Thu, 8 Dec 2011 11:42:20 +0000"  >&lt;p&gt;This patch adds a failing unit test&lt;/p&gt;</comment>
                            <comment id="13165649" author="martijn.v.groningen" created="Thu, 8 Dec 2011 22:43:31 +0000"  >&lt;p&gt;Thanks for reporting this issue Steffen!&lt;br/&gt;
I&apos;ve attached a fix (4.0) for this issue. I also changes your test case a bit. Basically I&apos;m not asserting the response, because this isn&apos;t possible when sorting by score in a sharded environment. It just runs the query and checks if the query runs without errors.&lt;/p&gt;</comment>
                            <comment id="13165650" author="martijn.v.groningen" created="Thu, 8 Dec 2011 22:44:21 +0000"  >&lt;p&gt;This issue effects Solr from version 3.5&lt;/p&gt;</comment>
                            <comment id="13166189" author="martijn.v.groningen" created="Fri, 9 Dec 2011 13:50:30 +0000"  >&lt;p&gt;Committed to trunk and 3x.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12506676" name="SOLR-2955.patch" size="2960" author="martijn.v.groningen" created="Thu, 8 Dec 2011 22:43:31 +0000"/>
                            <attachment id="12506599" name="SOLR-2955.patch" size="1841" author="seg" created="Thu, 8 Dec 2011 11:42:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>220053</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 50 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03hkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18280</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>