<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:33:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4112] Dataimporting with SolrCloud Fails</title>
                <link>https://issues.apache.org/jira/browse/SOLR-4112</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;While trying to import data from db on cloud, it shows this in logs:&lt;/p&gt;

&lt;p&gt;SEVERE: Full Import failed:org.apache.solr.handler.dataimport.DataImportHandlerException: Unable to PropertyWriter implementation:ZKPropertiesWriter &lt;br/&gt;
        at org.apache.solr.handler.dataimport.DataImporter.createPropertyWriter(DataImporter.java:336) &lt;br/&gt;
        at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:418) &lt;br/&gt;
        at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:487) &lt;br/&gt;
        at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:468) &lt;br/&gt;
Caused by: org.apache.solr.common.cloud.ZooKeeperException: ZkSolrResourceLoader does not support getConfigDir() - likely, what you are trying to do is not supported in ZooKeeper mode &lt;br/&gt;
        at org.apache.solr.cloud.ZkSolrResourceLoader.getConfigDir(ZkSolrResourceLoader.java:100) &lt;br/&gt;
        at org.apache.solr.handler.dataimport.SimplePropertiesWriter.init(SimplePropertiesWriter.java:91) &lt;br/&gt;
        at org.apache.solr.handler.dataimport.ZKPropertiesWriter.init(ZKPropertiesWriter.java:45) &lt;br/&gt;
        at org.apache.solr.handler.dataimport.DataImporter.createPropertyWriter(DataImporter.java:334) &lt;br/&gt;
        ... 3 more &lt;/p&gt;

&lt;p&gt;Exception in thread &quot;Thread-306&quot; java.lang.NullPointerException &lt;br/&gt;
        at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:427) &lt;br/&gt;
        at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:487) &lt;br/&gt;
        at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:468) &lt;/p&gt;


</description>
                <environment></environment>
        <key id="12617617">SOLR-4112</key>
            <summary>Dataimporting with SolrCloud Fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalin">Shalin Shekhar Mangar</assignee>
                                    <reporter username="deniz">Deniz Durmus</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Nov 2012 14:49:45 +0000</created>
                <updated>Mon, 9 May 2016 18:50:57 +0000</updated>
                            <resolved>Fri, 11 Jan 2013 15:04:40 +0000</resolved>
                                    <version>6.0</version>
                                    <fixVersion>4.1</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="13503859" author="jdyer" created="Mon, 26 Nov 2012 16:10:12 +0000"  >&lt;p&gt;Please try the attached patch and let me know if this fixes your issue.  This may have been broken with &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4051&quot; title=&quot;DIH Delta updates do not work for all locales&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4051&quot;&gt;&lt;del&gt;SOLR-4051&lt;/del&gt;&lt;/a&gt; (Trunk r1408873).  You might also want to try Trunk prior to this r1408873 and verify it works there.&lt;/p&gt;

&lt;p&gt;Unfortunately I am behind the times and do not know much about solrcloud.  Perhaps Sami can help out?  &lt;/p&gt;

&lt;p&gt;Eventually I would also like to figure out how to write a good test for ZKPropertiesWriter.  I think it has no coverage and thus easily broken.&lt;/p&gt;</comment>
                            <comment id="13504279" author="deniz" created="Tue, 27 Nov 2012 01:00:10 +0000"  >&lt;p&gt;As a feedback, would like to say that the patch that James Dyer prepared seems to solve the exceptions &lt;/p&gt;</comment>
                            <comment id="13505762" author="jdyer" created="Wed, 28 Nov 2012 18:37:14 +0000"  >&lt;p&gt;It looks like all we need for this now is a unit test for ZKPropertiesWriter, which I do not think has any test coverage?  (After breaking a bunch of things in the DIH included with Solr 3.6, I&apos;m really trying to improve the test situation with DIH.  But I don&apos;t know how to write a good test for SolrCloud stuff...)&lt;/p&gt;</comment>
                            <comment id="13505774" author="markrmiller@gmail.com" created="Wed, 28 Nov 2012 18:51:22 +0000"  >&lt;blockquote&gt;&lt;p&gt;don&apos;t know how to write a good test for SolrCloud stuff&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;And I don&apos;t know DIH at all - but perhaps I can setup some base test class for you to build on.&lt;/p&gt;</comment>
                            <comment id="13532471" author="erickerickson" created="Fri, 14 Dec 2012 17:24:06 +0000"  >&lt;p&gt;I&apos;ve been working with a client that has this exact problem, and this patch cures it on last night&apos;s 4x code. If I get the time this weekend, I&apos;d like to &lt;br/&gt;
1&amp;gt; try it on trunk&lt;br/&gt;
2&amp;gt; make sure all tests work in both&lt;br/&gt;
3&amp;gt; commit it to both trunk and 4x.&lt;/p&gt;

&lt;p&gt;Other then the perennial &quot;make some tests too&quot;, any objections?&lt;/p&gt;

&lt;p&gt;James:&lt;/p&gt;

&lt;p&gt;Since I have the driving need, should I just assign this to myself?&lt;/p&gt;</comment>
                            <comment id="13532498" author="jdyer" created="Fri, 14 Dec 2012 17:57:32 +0000"  >&lt;p&gt;Erick,  I certainly mean for this to be committed prior to a 4.1 (possibly it should be a Blocker), and if you want to commit, then go ahead.  My only concern is that if it gets committed without test coverage that a new issue be opened to add a test later.  &lt;/p&gt;

&lt;p&gt;I&apos;m tired of breaking DIH every time I commit a change because the test coverage was inadequate and I was lulled into a false sense of security by &quot;All Tests Pass&quot;.  ZKPropertiesWriter is a case in point.  This was committed back in February with no test coverage and then I come along and break it in November.  I&apos;ve been trying lately to write better tests for DIH but if people&apos;s attitude is &quot;DIH is a low-quality contrib mod...I don&apos;t need to write a test&quot;, then what&apos;s the point?  (we all have stories about working with developers who created &quot;negative productivity&quot;.  I&apos;m trying to personally stay out of anyone&apos;s story like that here!)  Then again my concern about coverage shouldn&apos;t hold this hostage so it misses the next release.&lt;/p&gt;

&lt;p&gt;I also wonder if &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3911&quot; title=&quot;Make Directory and DirectoryFactory first class so that the majority of Solr&amp;#39;s features work with any custom implementations.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3911&quot;&gt;&lt;del&gt;SOLR-3911&lt;/del&gt;&lt;/a&gt; means changing how ZKPropertiesWriter works entirely, or if it is even necessary at all?  I don&apos;t know enough about SolrCloud (yet...its on my to-do list) to understand how &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3911&quot; title=&quot;Make Directory and DirectoryFactory first class so that the majority of Solr&amp;#39;s features work with any custom implementations.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3911&quot;&gt;&lt;del&gt;SOLR-3911&lt;/del&gt;&lt;/a&gt; might change what needs to be done here, but maybe there is a different, better approach now?&lt;/p&gt;

&lt;p&gt;Mark,  you said something about setting up a base test class to build on, but I was just looking at AbstrackDistribZKTestCase and isn&apos;t such a base class already there?  Isn&apos;t all we need to do is to set up a 1-node, 1-shard &quot;cluster&quot; and have it import 1 document then open the Properties file with ZKPropertiesWriter and see if it exists and can be read?  Someday we can get fancy and expand TestSqlEntityProcessorDelta to sometimes run in full distributed mode but for now something quick and simple would suffice, right?&lt;/p&gt;</comment>
                            <comment id="13532530" author="markrmiller@gmail.com" created="Fri, 14 Dec 2012 18:34:09 +0000"  >&lt;p&gt;Yup, we already have some base classes that I would use to build on. I would just help get it setup to run from the DIH module and offer any help around getting DIH configured and running with it. If you can easily just figure that out, then by all means, go on ahead. If you have any questions, let me know.&lt;/p&gt;</comment>
                            <comment id="13533375" author="erickerickson" created="Sun, 16 Dec 2012 12:51:51 +0000"  >&lt;p&gt;Making this a blocker so we are sure to deal with it before 4.1 is cut. I won&apos;t have time to deal until next week and don&apos;t want to forget it.&lt;/p&gt;</comment>
                            <comment id="13539270" author="erickerickson" created="Mon, 24 Dec 2012 13:30:55 +0000"  >&lt;p&gt;I&apos;m going to go ahead and commit this in a day or two unless someone objects. If I do before some angel creates tests, I&apos;ll open up a new JIRA for tests referring back to this one.&lt;/p&gt;</comment>
                            <comment id="13541364" author="erickerickson" created="Mon, 31 Dec 2012 13:12:55 +0000"  >&lt;p&gt;I &lt;em&gt;really&lt;/em&gt; want to insure that this gets into 4.1, or explicitly decide not to as part of the release process... so moving back to blocker. If nothing else, we can commit w/o tests. Honest, I spent some time trying to make some tests, but between not knowing much about either ZK or DIH tests, I got pretty lost.....&lt;/p&gt;</comment>
                            <comment id="13541372" author="shalinmangar" created="Mon, 31 Dec 2012 13:54:46 +0000"  >&lt;p&gt;I can take this up and write some tests. Will make sure that it goes into 4.1&lt;/p&gt;</comment>
                            <comment id="13542634" author="sausarkar" created="Thu, 3 Jan 2013 01:04:47 +0000"  >&lt;p&gt;We are stuck with this issue after we upgraded from 4.0 to 4.1 Please let me know when will this be committed.&lt;/p&gt;</comment>
                            <comment id="13551093" author="shalinmangar" created="Fri, 11 Jan 2013 13:03:36 +0000"  >&lt;p&gt;Added a test which uses DIH on a ZK Aware solr&lt;/p&gt;</comment>
                            <comment id="13551095" author="erickerickson" created="Fri, 11 Jan 2013 13:07:08 +0000"  >&lt;p&gt;Shalin:&lt;/p&gt;

&lt;p&gt;Thanks! Since you did the hard part, want me to check it in?&lt;/p&gt;</comment>
                            <comment id="13551115" author="shalinmangar" created="Fri, 11 Jan 2013 13:25:23 +0000"  >&lt;p&gt;I&apos;m about to do just that. I was waiting for the whole suite run to finish &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13551120" author="erickerickson" created="Fri, 11 Jan 2013 13:31:47 +0000"  >&lt;p&gt;Two minor nits then....&lt;/p&gt;

&lt;p&gt;TestZKPropertiesWriter.java has an uncommented &quot;System.out.println&quot; in it, probably want to take that out/comment?&lt;/p&gt;

&lt;p&gt;CHANGES.txt could use an entry.....&lt;/p&gt;

&lt;p&gt;FWIW,&lt;br/&gt;
Erick&lt;/p&gt;</comment>
                            <comment id="13551124" author="shalinmangar" created="Fri, 11 Jan 2013 13:41:58 +0000"  >&lt;p&gt;Oops, I committed it already with a change log entry in both trunk and branch_4x.&lt;/p&gt;</comment>
                            <comment id="13551155" author="shalinmangar" created="Fri, 11 Jan 2013 15:04:40 +0000"  >&lt;p&gt;Fixed in trunk and branch_4x.&lt;/p&gt;

&lt;p&gt;Thanks for taking care of the extra sysout line Erick.&lt;/p&gt;</comment>
                            <comment id="13610419" author="commit-tag-bot" created="Fri, 22 Mar 2013 16:02:25 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Shalin Shekhar Mangar&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1432048&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1432048&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4112&quot; title=&quot;Dataimporting with SolrCloud Fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4112&quot;&gt;&lt;del&gt;SOLR-4112&lt;/del&gt;&lt;/a&gt;: Fixed DataImportHandler ZKAwarePropertiesWriter implementation so import works fine with SolrCloud clusters&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12564406" name="SOLR-4112.patch" size="13807" author="shalin" created="Fri, 11 Jan 2013 13:03:36 +0000"/>
                            <attachment id="12554871" name="SOLR-4112.patch" size="2854" author="jdyer" created="Mon, 26 Nov 2012 16:10:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292120</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 35 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0rrwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>160166</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>