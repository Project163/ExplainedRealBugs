<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:25:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-3165] Cannot use DIH in Solrcloud + Zookeeper</title>
                <link>https://issues.apache.org/jira/browse/SOLR-3165</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;There is a problem with configure DIH in Solrcloud + Zookeeper configuration from wiki: &lt;br/&gt;
&lt;a href=&quot;http://wiki.apache.org/solr/SolrCloud&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wiki.apache.org/solr/SolrCloud&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Standard configuration in solrconfig.xml:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;requestHandler name=&lt;span class=&quot;code-quote&quot;&gt;&quot;/dataimport&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.solr.handler.dataimport.DataImportHandler&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;lst name=&lt;span class=&quot;code-quote&quot;&gt;&quot;defaults&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
       &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;str name=&lt;span class=&quot;code-quote&quot;&gt;&quot;config&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;db-data-config.xml&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/str&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/lst&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/requestHandler&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;After starting solr with zookeeper I&apos;ve got errors:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Feb 20, 2012 11:30:12 AM org.apache.solr.common.SolrException log
SEVERE: null:org.apache.solr.common.SolrException
        at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:606)
        at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:490)
        at org.apache.solr.core.CoreContainer.create(CoreContainer.java:705)
        at org.apache.solr.core.CoreContainer.load(CoreContainer.java:442)
        at org.apache.solr.core.CoreContainer.load(CoreContainer.java:313)
        at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:262)
        at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:98)
        at org.mortbay.jetty.servlet.FilterHolder.doStart(FilterHolder.java:97)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:713)
        at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
        at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1282)
        at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:518)
        at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:499)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:152)
        at org.mortbay.jetty.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:156)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:152)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
        at org.mortbay.jetty.Server.doStart(Server.java:224)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.xml.XmlConfiguration.main(XmlConfiguration.java:985)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.mortbay.start.Main.invokeMain(Main.java:194)
        at org.mortbay.start.Main.start(Main.java:534)
        at org.mortbay.start.Main.start(Main.java:441)
        at org.mortbay.start.Main.main(Main.java:119)
Caused by: org.apache.solr.common.SolrException: FATAL: Could not create importer. DataImporter config invalid
        at org.apache.solr.handler.dataimport.DataImportHandler.inform(DataImportHandler.java:120)
        at org.apache.solr.core.SolrResourceLoader.inform(SolrResourceLoader.java:542)
        at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:601)
        ... 31 more
Caused by: org.apache.solr.common.cloud.ZooKeeperException: ZkSolrResourceLoader does not support getConfigDir() - likely, w
        at org.apache.solr.cloud.ZkSolrResourceLoader.getConfigDir(ZkSolrResourceLoader.java:99)
        at org.apache.solr.handler.dataimport.SimplePropertiesWriter.init(SimplePropertiesWriter.java:47)
        at org.apache.solr.handler.dataimport.DataImporter.&amp;lt;init&amp;gt;(DataImporter.java:112)
        at org.apache.solr.handler.dataimport.DataImportHandler.inform(DataImportHandler.java:114)
        ... 33 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;But the db-data-config.xml file exists in Zookeeper:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[zk: localhost:2181(CONNECTED) 0] ls /configs/conf1 [admin-extra.menu-top.html, dict, solrconfig.xml, dataimport.properties, admin-extra.html, solrconfig.xml.old, solrconfig.xml.new, solrconfig.xml~, xslt, db-data-config.xml, velocity, elevate.xml, admin-extra.menu-bottom.html, solrconfig.xml.dataimport, schema.xml]
[zk: localhost:2181(CONNECTED) 1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I downloaded solr from trunk (2012-02-16)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12544139">SOLR-3165</key>
            <summary>Cannot use DIH in Solrcloud + Zookeeper</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="siren">Sami Siren</assignee>
                                    <reporter username="qqlka">Agnieszka</reporter>
                        <labels>
                    </labels>
                <created>Sat, 25 Feb 2012 21:04:14 +0000</created>
                <updated>Fri, 10 May 2013 10:40:10 +0000</updated>
                            <resolved>Wed, 29 Feb 2012 07:10:42 +0000</resolved>
                                    <version>4.0-ALPHA</version>
                                    <fixVersion>4.0-ALPHA</fixVersion>
                                    <component>contrib - DataImportHandler</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13218031" author="siren" created="Tue, 28 Feb 2012 09:52:47 +0000"  >&lt;p&gt;Here&apos;s a stab at fixing this issue. I noticed  there were two places where DIH wanted to access conf dir: the config file (read) and some kind of state file (read/write) access.&lt;/p&gt;

&lt;p&gt;I added ZKPropertiesWriter that writes the contents of the state file into zk.&lt;/p&gt;</comment>
                            <comment id="13218223" author="markrmiller@gmail.com" created="Tue, 28 Feb 2012 14:29:30 +0000"  >&lt;p&gt;Nice Sami! I was going to take the same approach.&lt;/p&gt;

&lt;p&gt;Longer term I think we want to add a write api to solrresource loader. If something came from the classpath, it would still be written to the conf area and later that would override a new read...&lt;/p&gt;</comment>
                            <comment id="13218247" author="markrmiller@gmail.com" created="Tue, 28 Feb 2012 14:56:49 +0000"  >&lt;p&gt;Took a look at the patch and it looks good to me - only thing I might suggest is using CoreContainer#isZookeeperAware rather than comparing the zkController to null, but pretty minor stylistic thing.&lt;/p&gt;</comment>
                            <comment id="13218686" author="alexey" created="Tue, 28 Feb 2012 23:19:04 +0000"  >&lt;p&gt;I updated Sami&apos;s patch to store dataimport property file under collection directory in zk and name it after data import handler (the same way it is stored in local filesystem)&lt;/p&gt;</comment>
                            <comment id="13218953" author="siren" created="Wed, 29 Feb 2012 07:10:42 +0000"  >&lt;p&gt;Thanks Alexey, Mark. I took the latest patch from Alexey, incorporated Marks suggestion and committed this to trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12516462" name="SOLR-3165.patch" size="7451" author="alexey.serba" created="Tue, 28 Feb 2012 23:19:04 +0000"/>
                            <attachment id="12516302" name="SOLR-3165.patch" size="6973" author="siren" created="Tue, 28 Feb 2012 09:52:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>229376</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 38 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03gbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18077</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>