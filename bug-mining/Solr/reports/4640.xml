<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:47:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-15114] WAND does not work correctly on multiple segments in Solr 8.6.3</title>
                <link>https://issues.apache.org/jira/browse/SOLR-15114</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;In Solr 8.6.3, minCompetitiveScore of WANDScorer resets to zero for each index segment and remain zero until maxScore is updated.&lt;br/&gt;
There are two causes of this problem:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;MaxScoreCollector does not set minCompetitiveScore of MinCompetitiveScoreAwareScorable newly generated for another index segment.&lt;/li&gt;
	&lt;li&gt;MaxScoreCollector updates minCompetitiveScore only if maxScore is updated. This behavior is correct considering the purpose of MaxScoreCollector.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;For details, see the attached pdf.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Note&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;This problem occurs in distributed search (SolrCloud) or the fl=score parameter specified.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13355101">SOLR-15114</key>
            <summary>WAND does not work correctly on multiple segments in Solr 8.6.3</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tflobbe">Tomas Eduardo Fernandez Lobbe</assignee>
                                    <reporter username="nminami">Naoto Minami</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Jan 2021 07:13:37 +0000</created>
                <updated>Tue, 23 Feb 2021 16:20:28 +0000</updated>
                            <resolved>Thu, 11 Feb 2021 17:40:10 +0000</resolved>
                                    <version>8.6</version>
                    <version>8.7</version>
                    <version>8.8</version>
                                    <fixVersion>9.0</fixVersion>
                    <fixVersion>8.8.1</fixVersion>
                    <fixVersion>8.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17281316" author="tomasflobbe" created="Mon, 8 Feb 2021 19:10:39 +0000"  >&lt;p&gt;Thanks for reporting &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nminami&quot; class=&quot;user-hover&quot; rel=&quot;nminami&quot;&gt;nminami&lt;/a&gt;. I think your assessment is correct (introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14554&quot; title=&quot;BMW algorithm isn&amp;#39;t used when scores are requested&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14554&quot;&gt;&lt;del&gt;SOLR-14554&lt;/del&gt;&lt;/a&gt;). From the looks of it, the bug doesn&apos;t cause incorrect results, but breaks the optimization. I want to run some tests before merging, but the PR LGTM.&lt;/p&gt;</comment>
                            <comment id="17281324" author="dsmiley" created="Mon, 8 Feb 2021 19:33:31 +0000"  >&lt;p&gt;Can we have a test for the optimization itself somehow?  It&apos;s a depressing shock for a performance bug of this magnitude to go un-detected.  Granted few users are using this very new option but still.&lt;/p&gt;

&lt;p&gt;This reminds me of the longstanding issue of a lack of regular published Solr benchmarks &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10317&quot; title=&quot;Solr Nightly Benchmarks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10317&quot;&gt;SOLR-10317&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17281327" author="dsmiley" created="Mon, 8 Feb 2021 19:35:24 +0000"  >&lt;p&gt;Question: was this bug here from the beginning when Solr added support for the optimization, or it it unique to 8.6.3, or some release inbetween?&lt;/p&gt;</comment>
                            <comment id="17281428" author="tomasflobbe" created="Mon, 8 Feb 2021 22:44:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;Can we have a test for the optimization itself somehow? &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I remember looking when this was implemented and I couldn&apos;t find a way to really assert if the optimization was being applied, I&apos;ll take another look, but let me know if you have any idea. Maybe &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jpountz&quot; class=&quot;user-hover&quot; rel=&quot;jpountz&quot;&gt;jpountz&lt;/a&gt;? In this particular case, even the &lt;tt&gt;ImpactDISI&lt;/tt&gt; would have been used, except that the skipping would have been very sub-optimal. &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;was this bug here from the beginning when Solr added support for the optimization, or it it unique to 8.6.3, or some release inbetween?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This has been like this since 8.6.0: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14554&quot; title=&quot;BMW algorithm isn&amp;#39;t used when scores are requested&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14554&quot;&gt;&lt;del&gt;SOLR-14554&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17281486" author="nminami" created="Tue, 9 Feb 2021 02:25:36 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tflobbe&quot; class=&quot;user-hover&quot; rel=&quot;tflobbe&quot;&gt;tflobbe&lt;/a&gt;&#160;and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I think it&apos;s difficult to test completely including optimizations, such Block-max WAND. One way I thought is prepare documents for BMW and predict results manually then assert. However this way has high costs for implementation and maintenance...&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;This reminds me of the longstanding issue of a lack of regular published Solr benchmarks&#160;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10317&quot; title=&quot;Solr Nightly Benchmarks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10317&quot;&gt;SOLR-10317&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Absolutely agree.&lt;/p&gt;</comment>
                            <comment id="17282783" author="tomasflobbe" created="Wed, 10 Feb 2021 23:51:54 +0000"  >&lt;p&gt;I&apos;ve run a perf test on the change using Gatling:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Using a wikipedia snapshot (20M docs, shortened to 1k characters)&lt;/li&gt;
	&lt;li&gt;Using Mike McCandless &lt;a href=&quot;https://github.com/mikemccand/luceneutil/blob/master/tasks/wikimedium.10M.tasks&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;query set&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;10k queries per type (180k queries total)&lt;/li&gt;
	&lt;li&gt;2 shards, 1 replica each (on the same node).&lt;/li&gt;
	&lt;li&gt;Each shard has ~30 segments&lt;/li&gt;
	&lt;li&gt;search on the article body&lt;/li&gt;
	&lt;li&gt;10 parallel users&lt;/li&gt;
	&lt;li&gt;Single Solr instance (iMac Pro 3.2 GHz 8-Core Intel Xeon W with 128 GB RAM).&lt;/li&gt;
	&lt;li&gt;Gatling running in the machine&lt;/li&gt;
	&lt;li&gt;The default example Solr parameters&lt;/li&gt;
	&lt;li&gt;Always used &lt;tt&gt;rows=2&lt;/tt&gt;, in the case of WAND I also added &lt;tt&gt;minExactCount=2&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;While there is some noise in the tests (I&apos;d expect master WAND, master no-WAND and patch no-WAND to perform similarly), the WAND scenario with the patch applied is definitely faster:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Stat&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;master WAND&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;master no-WAND&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;patch WAND&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;patch no-WAND&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;QPS&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;97.72&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;103.687&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;153.061&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;111.732&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;min&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;p50&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;39&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;39&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;23&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;p75&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;102&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;95&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;57&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;87&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;p95&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;387&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;350&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;245&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;322&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;p99&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;829&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;809&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;668&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;769&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;max&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2405&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2416&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1331&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2447&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;mean&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;95&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;89&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;59&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;82&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;std dev&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;155&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;110&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;139&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="17283029" author="janhoy" created="Thu, 11 Feb 2021 13:29:11 +0000"  >&lt;p&gt;Thanks for the detailed bug analysis - with nice graphics and all, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nminami&quot; class=&quot;user-hover&quot; rel=&quot;nminami&quot;&gt;nminami&lt;/a&gt;. I enjoyed browsing the PDF! I&apos;ll make sure to&#160;add the minExactCount feature to my tool-belt - I was not fully aware of it until today &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17283104" author="dsmiley" created="Thu, 11 Feb 2021 15:52:26 +0000"  >&lt;p&gt;I should second that sentiment as well; that PDF is amazing to anyone who wants a deeper look at BlockMax WAND!  Kudos to Naoto!&lt;/p&gt;</comment>
                            <comment id="17283192" author="jira-bot" created="Thu, 11 Feb 2021 17:10:25 +0000"  >&lt;p&gt;Commit 0cbb38ff4a38dea31324265da13412dd713d9a8e in lucene-solr&apos;s branch refs/heads/master from Naoto MINAMI&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=0cbb38f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=0cbb38f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15114&quot; title=&quot;WAND does not work correctly on multiple segments in Solr 8.6.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15114&quot;&gt;&lt;del&gt;SOLR-15114&lt;/del&gt;&lt;/a&gt;: WAND does not work correctly on multiple segments (#2259)&lt;/p&gt;

&lt;p&gt;In Solr 8.6.3, minCompetitiveScore of WANDScorer resets to zero for each index segment and remain zero until maxScore is updated.&lt;br/&gt;
There are two causes of this problem:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;MaxScoreCollector does not set minCompetitiveScore of MinCompetitiveScoreAwareScorable newly generated for another index segment.&lt;/li&gt;
	&lt;li&gt;MaxScoreCollector updates minCompetitiveScore only if maxScore is updated. This behavior is correct considering the purpose of MaxScoreCollector.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;For details, see the attached pdf &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13019548/wand.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/13019548/wand.pdf&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17283204" author="jira-bot" created="Thu, 11 Feb 2021 17:17:12 +0000"  >&lt;p&gt;Commit b6db6c88d7bc4ee1757c450ad7a3df8b72add084 in lucene-solr&apos;s branch refs/heads/master from Tomas Eduardo Fernandez Lobbe&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=b6db6c8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=b6db6c8&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15114&quot; title=&quot;WAND does not work correctly on multiple segments in Solr 8.6.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15114&quot;&gt;&lt;del&gt;SOLR-15114&lt;/del&gt;&lt;/a&gt;: Add CHANGES entry&lt;/p&gt;</comment>
                            <comment id="17283229" author="jira-bot" created="Thu, 11 Feb 2021 17:32:49 +0000"  >&lt;p&gt;Commit 6a801e21520dc7d6e0720672d530f32ded25019b in lucene-solr&apos;s branch refs/heads/branch_8x from Naoto MINAMI&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=6a801e2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=6a801e2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15114&quot; title=&quot;WAND does not work correctly on multiple segments in Solr 8.6.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15114&quot;&gt;&lt;del&gt;SOLR-15114&lt;/del&gt;&lt;/a&gt;: WAND does not work correctly on multiple segments (#2259)&lt;/p&gt;

&lt;p&gt;In Solr 8.6.3, minCompetitiveScore of WANDScorer resets to zero for each index segment and remain zero until maxScore is updated.&lt;br/&gt;
There are two causes of this problem:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;MaxScoreCollector does not set minCompetitiveScore of MinCompetitiveScoreAwareScorable newly generated for another index segment.&lt;/li&gt;
	&lt;li&gt;MaxScoreCollector updates minCompetitiveScore only if maxScore is updated. This behavior is correct considering the purpose of MaxScoreCollector.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;For details, see the attached pdf &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13019548/wand.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/13019548/wand.pdf&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17283230" author="jira-bot" created="Thu, 11 Feb 2021 17:32:51 +0000"  >&lt;p&gt;Commit 3d6d92feb5bc532e71e6c8ee5f92396b7f65b982 in lucene-solr&apos;s branch refs/heads/branch_8x from Tomas Eduardo Fernandez Lobbe&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=3d6d92f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=3d6d92f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15114&quot; title=&quot;WAND does not work correctly on multiple segments in Solr 8.6.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15114&quot;&gt;&lt;del&gt;SOLR-15114&lt;/del&gt;&lt;/a&gt;: Add CHANGES entry&lt;/p&gt;</comment>
                            <comment id="17283233" author="jira-bot" created="Thu, 11 Feb 2021 17:35:10 +0000"  >&lt;p&gt;Commit 04f92e613e0725c3dbcb4964b5f5886f84ffd847 in lucene-solr&apos;s branch refs/heads/branch_8_8 from Naoto MINAMI&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=04f92e6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=04f92e6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15114&quot; title=&quot;WAND does not work correctly on multiple segments in Solr 8.6.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15114&quot;&gt;&lt;del&gt;SOLR-15114&lt;/del&gt;&lt;/a&gt;: WAND does not work correctly on multiple segments (#2259)&lt;/p&gt;

&lt;p&gt;In Solr 8.6.3, minCompetitiveScore of WANDScorer resets to zero for each index segment and remain zero until maxScore is updated.&lt;br/&gt;
There are two causes of this problem:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;MaxScoreCollector does not set minCompetitiveScore of MinCompetitiveScoreAwareScorable newly generated for another index segment.&lt;/li&gt;
	&lt;li&gt;MaxScoreCollector updates minCompetitiveScore only if maxScore is updated. This behavior is correct considering the purpose of MaxScoreCollector.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;For details, see the attached pdf &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13019548/wand.pdf&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/13019548/wand.pdf&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17283234" author="jira-bot" created="Thu, 11 Feb 2021 17:35:12 +0000"  >&lt;p&gt;Commit 33a1f7f6b2541c096c835aead86dbe3cff111df9 in lucene-solr&apos;s branch refs/heads/branch_8_8 from Tomas Eduardo Fernandez Lobbe&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=33a1f7f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=33a1f7f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15114&quot; title=&quot;WAND does not work correctly on multiple segments in Solr 8.6.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15114&quot;&gt;&lt;del&gt;SOLR-15114&lt;/del&gt;&lt;/a&gt;: Add CHANGES entry&lt;/p&gt;</comment>
                            <comment id="17283239" author="tomasflobbe" created="Thu, 11 Feb 2021 17:40:10 +0000"  >&lt;p&gt;Merged. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nminami&quot; class=&quot;user-hover&quot; rel=&quot;nminami&quot;&gt;nminami&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="17283450" author="nminami" created="Fri, 12 Feb 2021 01:15:38 +0000"  >&lt;p&gt;I&apos;m very glad to contribute the community!&lt;br/&gt;
Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=janhoy&quot; class=&quot;user-hover&quot; rel=&quot;janhoy&quot;&gt;janhoy&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;&#160;and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tflobbe&quot; class=&quot;user-hover&quot; rel=&quot;tflobbe&quot;&gt;tflobbe&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17289166" author="thelabdude" created="Tue, 23 Feb 2021 16:20:28 +0000"  >&lt;p&gt;Closing after the 8.8.1 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13019548" name="wand.pdf" size="503558" author="nminami" created="Thu, 28 Jan 2021 07:13:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0n2p4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>