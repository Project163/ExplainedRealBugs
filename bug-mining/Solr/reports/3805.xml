<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:30:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-12041] NPE in ChaosMonkeyNothingIsSafeWithPullReplicasTest</title>
                <link>https://issues.apache.org/jira/browse/SOLR-12041</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I found this failure in Steve&#8217;s Jenkins (&lt;a href=&quot;http://fucit.org/solr-jenkins-reports/job-data/sarowe/Lucene-Solr-tests-7.x/2910/):&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://fucit.org/solr-jenkins-reports/job-data/sarowe/Lucene-Solr-tests-7.x/2910/):&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=ChaosMonkeyNothingIsSafeWithPullReplicasTest -Dtests.method=test -Dtests.seed=FEC5BFCB68EE30B1 -Dtests.slow=true -Dtests.locale=he-IL -Dtests.timezone=Pacific/Midway -Dtests.asserts=true -Dtests.file.encoding=UTF-8
   [junit4] ERROR   37.8s J8  | ChaosMonkeyNothingIsSafeWithPullReplicasTest.test &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.NullPointerException
   [junit4]    &amp;gt;        at __randomizedtesting.SeedInfo.seed([FEC5BFCB68EE30B1:76918011C6125D49]:0)
   [junit4]    &amp;gt;        at org.apache.solr.cloud.AbstractFullDistribZkTestBase.getIndexVersion(AbstractFullDistribZkTestBase.java:2172)
   [junit4]    &amp;gt;        at org.apache.solr.cloud.AbstractFullDistribZkTestBase.waitForReplicationFromReplicas(AbstractFullDistribZkTestBase.java:2110)
   [junit4]    &amp;gt;        at org.apache.solr.cloud.ChaosMonkeyNothingIsSafeWithPullReplicasTest.test(ChaosMonkeyNothingIsSafeWithPullReplicasTest.java:268)
   [junit4]    &amp;gt;        at org.apache.solr.BaseDistributedSearchTestCase$ShardsRepeatRule$ShardsFixedStatement.callStatement(BaseDistributedSearchTestCase.java:993)
   [junit4]    &amp;gt;        at org.apache.solr.BaseDistributedSearchTestCase$ShardsRepeatRule$ShardsStatement.evaluate(BaseDistributedSearchTestCase.java:968)
   [junit4]    &amp;gt;        at java.lang.Thread.run(Thread.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It seems to be caused by this code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(Slice s:collection.getSlices()) {
      Replica leader = s.getLeader();
      &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; leaderIndexVersion = -1;
      &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (!timeout.hasTimedOut()) {
        &#8212;&amp;gt; leaderIndexVersion = getIndexVersion(leader);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and I believe the problem is that the shard may not have a leader at the time of this check.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13141344">SOLR-12041</key>
            <summary>NPE in ChaosMonkeyNothingIsSafeWithPullReplicasTest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tflobbe">Tomas Eduardo Fernandez Lobbe</assignee>
                                    <reporter username="tflobbe">Tomas Eduardo Fernandez Lobbe</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Feb 2018 20:56:01 +0000</created>
                <updated>Wed, 2 Oct 2019 17:30:43 +0000</updated>
                            <resolved>Tue, 27 Feb 2018 23:09:01 +0000</resolved>
                                                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16379447" author="tomasflobbe" created="Tue, 27 Feb 2018 23:04:50 +0000"  >&lt;p&gt;Running tests with the patch I noticed that there are lots of ZkConnection errors and thread leaks after the test is done. I see this is happening in master without my change, but it wasn&apos;t like this before... I&apos;ll open another Jira for that&lt;/p&gt;</comment>
                            <comment id="16379451" author="jira-bot" created="Tue, 27 Feb 2018 23:07:06 +0000"  >&lt;p&gt;Commit 029432e9360b9e90610332e83b136e2334c0517f in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tflobbe&quot; class=&quot;user-hover&quot; rel=&quot;tflobbe&quot;&gt;tflobbe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=029432e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=029432e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12041&quot; title=&quot;NPE in ChaosMonkeyNothingIsSafeWithPullReplicasTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12041&quot;&gt;&lt;del&gt;SOLR-12041&lt;/del&gt;&lt;/a&gt;: Fix random test failure in ChaosMonkeyNothingIsSafeWithPullReplicasTest&lt;/p&gt;</comment>
                            <comment id="16379454" author="jira-bot" created="Tue, 27 Feb 2018 23:07:43 +0000"  >&lt;p&gt;Commit 4ccf500800ee497fceb93f4727a89a8a4533bb10 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tflobbe&quot; class=&quot;user-hover&quot; rel=&quot;tflobbe&quot;&gt;tflobbe&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=4ccf500&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=4ccf500&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12041&quot; title=&quot;NPE in ChaosMonkeyNothingIsSafeWithPullReplicasTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12041&quot;&gt;&lt;del&gt;SOLR-12041&lt;/del&gt;&lt;/a&gt;: Fix random test failure in ChaosMonkeyNothingIsSafeWithPullReplicasTest&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12912339" name="SOLR-12041.patch" size="932" author="tflobbe" created="Tue, 27 Feb 2018 23:02:47 +0000"/>
                            <attachment id="12912327" name="SOLR-12041.patch" size="886" author="tflobbe" created="Tue, 27 Feb 2018 21:04:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qo0n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>