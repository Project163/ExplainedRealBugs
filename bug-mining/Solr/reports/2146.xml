<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:58:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6591] Cluster state updates can be lost on exception in main queue loop</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6591</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I found this bug while going through the failure on jenkins:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/Lucene-Solr-NightlyTests-trunk/648/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Lucene-Solr-NightlyTests-trunk/648/&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2 tests failed.
REGRESSION:  org.apache.solr.cloud.CollectionsAPIDistributedZkTest.testDistribSearch

Error Message:
Error CREATEing SolrCore &lt;span class=&quot;code-quote&quot;&gt;&apos;halfcollection_shard1_replica1&apos;&lt;/span&gt;: Unable to create core [halfcollection_shard1_replica1] Caused by: Could not get shard id &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; core: halfcollection_shard1_replica1

Stack Trace:
org.apache.solr.client.solrj.impl.HttpSolrServer$RemoteSolrException: Error CREATEing SolrCore &lt;span class=&quot;code-quote&quot;&gt;&apos;halfcollection_shard1_replica1&apos;&lt;/span&gt;: Unable to create core [halfcollection_shard1_replica1] Caused by: Could not get shard id &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; core: halfcollection_shard1_replica1
        at org.apache.solr.client.solrj.impl.HttpSolrServer.executeMethod(HttpSolrServer.java:570)
        at org.apache.solr.client.solrj.impl.HttpSolrServer.request(HttpSolrServer.java:215)
        at org.apache.solr.client.solrj.impl.HttpSolrServer.request(HttpSolrServer.java:211)
        at org.apache.solr.cloud.CollectionsAPIDistributedZkTest.testErrorHandling(CollectionsAPIDistributedZkTest.java:583)
        at org.apache.solr.cloud.CollectionsAPIDistributedZkTest.doTest(CollectionsAPIDistributedZkTest.java:205)
        at org.apache.solr.BaseDistributedSearchTestCase.testDistribSearch(BaseDistributedSearchTestCase.java:869)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:606)
        at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1618)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="12746091">SOLR-6591</key>
            <summary>Cluster state updates can be lost on exception in main queue loop</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalin">Shalin Shekhar Mangar</assignee>
                                    <reporter username="shalin">Shalin Shekhar Mangar</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Oct 2014 10:12:34 +0000</created>
                <updated>Wed, 2 Oct 2019 17:23:46 +0000</updated>
                            <resolved>Tue, 2 Dec 2014 12:55:16 +0000</resolved>
                                    <version>6.0</version>
                                    <fixVersion>5.0</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14160156" author="shalinmangar" created="Mon, 6 Oct 2014 10:16:21 +0000"  >&lt;p&gt;What happens here is:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The Stress Collection Creation thread in that test is trying to create collections (which have stateFormat=2)&lt;/li&gt;
	&lt;li&gt;The overseer gets a &quot;state&quot; message from a new core created using core admin API. This should implicitly create a new collection:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   [junit4]   2&amp;gt; 561673 T45931 oasc.Overseer$ClusterStateUpdater.updateState Update state numShards=1 message={
   [junit4]   2&amp;gt;          &lt;span class=&quot;code-quote&quot;&gt;&quot;collection&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;halfcollectionblocker&quot;&lt;/span&gt;,
   [junit4]   2&amp;gt;          &lt;span class=&quot;code-quote&quot;&gt;&quot;base_url&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:42021&quot;&lt;/span&gt;,
&lt;/span&gt;   [junit4]   2&amp;gt;          &lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;down&quot;&lt;/span&gt;,
   [junit4]   2&amp;gt;          &lt;span class=&quot;code-quote&quot;&gt;&quot;numShards&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;,
   [junit4]   2&amp;gt;          &lt;span class=&quot;code-quote&quot;&gt;&quot;node_name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;127.0.0.1:42021_&quot;&lt;/span&gt;,
   [junit4]   2&amp;gt;          &lt;span class=&quot;code-quote&quot;&gt;&quot;roles&quot;&lt;/span&gt;:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,
   [junit4]   2&amp;gt;          &lt;span class=&quot;code-quote&quot;&gt;&quot;shard&quot;&lt;/span&gt;:&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,
   [junit4]   2&amp;gt;          &lt;span class=&quot;code-quote&quot;&gt;&quot;operation&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;,
   [junit4]   2&amp;gt;          &lt;span class=&quot;code-quote&quot;&gt;&quot;core&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;halfcollection_shard1_replica1&quot;&lt;/span&gt;}
   [junit4]   2&amp;gt; 561674 T45931 oasc.Overseer$ClusterStateUpdater.createCollection Create collection halfcollectionblocker with shards [shard1]
   [junit4]   2&amp;gt; 561674 T45931 oasc.Overseer$ClusterStateUpdater.createCollection state version halfcollectionblocker 1
   [junit4]   2&amp;gt; 561679 T45931 oasc.Overseer$ClusterStateUpdater.updateState Assigning &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; node to shard shard=shard1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Right after the above message, the overseer gets a message to create &apos;awholynewstresscollection_collection4_1&apos; (I&apos;m assuming through a &quot;state&quot; message). This fails with the following message:
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   [junit4]   2&amp;gt; 561682 T45931 oasc.Overseer$ClusterStateUpdater.run ERROR Exception in Overseer main queue loop org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /collections/awholynewstresscollection_collection4_1/state.json
   [junit4]   2&amp;gt;        at org.apache.zookeeper.KeeperException.create(KeeperException.java:111)
   [junit4]   2&amp;gt;        at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)
   [junit4]   2&amp;gt;        at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:783)
   [junit4]   2&amp;gt;        at org.apache.solr.common.cloud.SolrZkClient$9.execute(SolrZkClient.java:382)
   [junit4]   2&amp;gt;        at org.apache.solr.common.cloud.SolrZkClient$9.execute(SolrZkClient.java:379)
   [junit4]   2&amp;gt;        at org.apache.solr.common.cloud.ZkCmdExecutor.retryOperation(ZkCmdExecutor.java:61)
   [junit4]   2&amp;gt;        at org.apache.solr.common.cloud.SolrZkClient.create(SolrZkClient.java:379)
   [junit4]   2&amp;gt;        at org.apache.solr.cloud.Overseer$ClusterStateUpdater.updateZkStates(Overseer.java:358)
   [junit4]   2&amp;gt;        at org.apache.solr.cloud.Overseer$ClusterStateUpdater.run(Overseer.java:311)
   [junit4]   2&amp;gt;        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
   [junit4]   2&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;This exception causes the &quot;state&quot; messaged executed for &apos;halfcollectionblocker&apos; collection to be lost. The message is still present in the work queue but because the overseer is healthy, it will continue to execute the main queue.
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   [junit4]   2&amp;gt; 881993 T46259 oasc.ZkController.waitForShardId waiting to find shard id in clusterstate &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; halfcollection_shard1_replica1
   [junit4]   2&amp;gt; 1202711 T46259 oasc.CoreContainer.create ERROR Error creating core [halfcollection_shard1_replica1]: Could not get shard id &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; core: halfcollection_shard1_replica1 org.apache.solr.common.SolrException: Could not get shard id &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; core: halfcollection_shard1_replica1
   [junit4]   2&amp;gt;        at org.apache.solr.cloud.ZkController.waitForShardId(ZkController.java:1425)
   [junit4]   2&amp;gt;        at org.apache.solr.cloud.ZkController.doGetShardIdAndNodeNameProcess(ZkController.java:1371)
   [junit4]   2&amp;gt;        at org.apache.solr.cloud.ZkController.preRegister(ZkController.java:1513)
   [junit4]   2&amp;gt;        at org.apache.solr.core.CoreContainer.create(CoreContainer.java:504)
   [junit4]   2&amp;gt;        at org.apache.solr.core.CoreContainer.create(CoreContainer.java:484)
   [junit4]   2&amp;gt;        at org.apache.solr.handler.admin.CoreAdminHandler.handleCreateAction(CoreAdminHandler.java:575)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14160157" author="shalinmangar" created="Mon, 6 Oct 2014 10:16:56 +0000"  >&lt;p&gt;This bug affects trunk and branch_5x only. It was introduced after &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5473&quot; title=&quot;Split clusterstate.json per collection and watch states selectively &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5473&quot;&gt;&lt;del&gt;SOLR-5473&lt;/del&gt;&lt;/a&gt; and does not affect any released version of Solr.&lt;/p&gt;</comment>
                            <comment id="14160563" author="noble.paul" created="Mon, 6 Oct 2014 17:42:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt; this would not happen when the collection is created through the collection API?&lt;/p&gt;</comment>
                            <comment id="14160627" author="shalinmangar" created="Mon, 6 Oct 2014 18:24:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; - I don&apos;t think this is affected by how a collection is created. The gist of the issue is that any exception thrown in updateZkStates for state version &amp;gt; 1 can cause updates for the main cluster state to be lost.&lt;/p&gt;</comment>
                            <comment id="14173521" author="shalinmangar" created="Thu, 16 Oct 2014 08:13:59 +0000"  >&lt;p&gt;So there are two separate bugs at play here:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Due to an exception in persisting a collection with state format &amp;gt; 1. main cluster state events can be lost&lt;/li&gt;
	&lt;li&gt;A rapid create+delete loop for collections with state format &amp;gt; 1 causes the above exception to happen. This is because the updateZkState method assumes that the collection exists and it tries to write to /collections/collection_name/state.json directly without verifying whether the /collections/collection_name zk node exists&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14184114" author="shalinmangar" created="Sat, 25 Oct 2014 14:49:52 +0000"  >&lt;p&gt;I found a related (same?) bug while investigating #2 above. The overseer loop can sometimes use stale cluster state for collections with stateFormat &amp;gt; 1. This happens because ZkStateReader.removeZKWatch removes collection from the &apos;watchedCollections&apos; set but doesn&apos;t remove the cached state in the watchedCollectionStates map. So when the replica of a collection is unloaded, the watch is also removed but the cached state still exists. If the overseer happens to be on the same node which had hosted the replica then it will continue reading the old state causing replica information or leader information to be lost.&lt;/p&gt;

&lt;p&gt;I&apos;ve added a test which reproduces the problem (it hangs for a long time on getLeaderRetry before failing to create the collection). The patch fixes the problem by removing collection from watchedCollectionStates in ZkStateReader.removeZKWatch.&lt;/p&gt;</comment>
                            <comment id="14184228" author="jira-bot" created="Sat, 25 Oct 2014 19:20:30 +0000"  >&lt;p&gt;Commit 1634243 from shalin@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1634243&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1634243&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6591&quot; title=&quot;Cluster state updates can be lost on exception in main queue loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6591&quot;&gt;&lt;del&gt;SOLR-6591&lt;/del&gt;&lt;/a&gt;: Overseer can use stale cluster state and lose updates for collections with stateFormat &amp;gt; 1&lt;/p&gt;</comment>
                            <comment id="14184230" author="jira-bot" created="Sat, 25 Oct 2014 19:30:47 +0000"  >&lt;p&gt;Commit 1634246 from shalin@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1634246&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1634246&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6591&quot; title=&quot;Cluster state updates can be lost on exception in main queue loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6591&quot;&gt;&lt;del&gt;SOLR-6591&lt;/del&gt;&lt;/a&gt;: Overseer can use stale cluster state and lose updates for collections with stateFormat &amp;gt; 1&lt;/p&gt;</comment>
                            <comment id="14185118" author="shalinmangar" created="Mon, 27 Oct 2014 13:15:44 +0000"  >&lt;p&gt;The overseer can still use stale cached cluster state because ZkStateReader.updateClusterState returns cached state for watched collections. Here is a patch which fixes that by reading collection state live during ZkStateReader.updateClusterState and setting it into the watchedCollectionStates map.&lt;/p&gt;</comment>
                            <comment id="14185205" author="jira-bot" created="Mon, 27 Oct 2014 14:51:10 +0000"  >&lt;p&gt;Commit 1634554 from shalin@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1634554&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1634554&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6591&quot; title=&quot;Cluster state updates can be lost on exception in main queue loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6591&quot;&gt;&lt;del&gt;SOLR-6591&lt;/del&gt;&lt;/a&gt;: ZkStateReader.updateClusterState should refresh cluster state for watched collections&lt;/p&gt;</comment>
                            <comment id="14185207" author="jira-bot" created="Mon, 27 Oct 2014 14:53:34 +0000"  >&lt;p&gt;Commit 1634555 from shalin@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1634555&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1634555&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6591&quot; title=&quot;Cluster state updates can be lost on exception in main queue loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6591&quot;&gt;&lt;del&gt;SOLR-6591&lt;/del&gt;&lt;/a&gt;: ZkStateReader.updateClusterState should refresh cluster state for watched collections&lt;/p&gt;</comment>
                            <comment id="14185704" author="shalinmangar" created="Mon, 27 Oct 2014 19:54:55 +0000"  >&lt;p&gt;Right now main cluster states are batched together and updates to collections with stateFormat &amp;gt; 1 are not batched (I&apos;ll create another issue for that). However updates to both can be mixed together e.g. if overseer gets 5 messages for main cluster state and then 1 for stateFormat &amp;gt; 1 then the resulting updates are written to ZK together. This is error prone and we shouldn&apos;t batch updates for different stateFormats together.&lt;/p&gt;

&lt;p&gt;This patch tracks the last stateFormat for which message was processed and breaks out of the loop if a different one is encountered.&lt;/p&gt;</comment>
                            <comment id="14185798" author="jira-bot" created="Mon, 27 Oct 2014 20:56:42 +0000"  >&lt;p&gt;Commit 1634684 from shalin@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1634684&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1634684&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6591&quot; title=&quot;Cluster state updates can be lost on exception in main queue loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6591&quot;&gt;&lt;del&gt;SOLR-6591&lt;/del&gt;&lt;/a&gt;: Do not batch updates for different stateFormats together&lt;/p&gt;</comment>
                            <comment id="14185800" author="jira-bot" created="Mon, 27 Oct 2014 20:57:07 +0000"  >&lt;p&gt;Commit 1634685 from shalin@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1634685&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1634685&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6591&quot; title=&quot;Cluster state updates can be lost on exception in main queue loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6591&quot;&gt;&lt;del&gt;SOLR-6591&lt;/del&gt;&lt;/a&gt;: Do not batch updates for different stateFormats together&lt;/p&gt;</comment>
                            <comment id="14194721" author="shalinmangar" created="Mon, 3 Nov 2014 16:53:17 +0000"  >&lt;blockquote&gt;
&lt;p&gt;A rapid create+delete loop for collections with state format &amp;gt; 1 causes the above exception to happen. This is because the updateZkState method assumes that the collection exists and it tries to write to /collections/collection_name/state.json directly without verifying whether the /collections/collection_name zk node exists&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This patch ignores state messages which are trying to create new collections when the parent zk path doesn&apos;t exist. I&apos;ve added the following comment in the code to explain the situation:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;                 // if the /collections/collection_name path doesn&apos;t exist then it means that&lt;br/&gt;
                  // 1) the user invoked a DELETE collection API and the OverseerCollectionProcessor has deleted&lt;br/&gt;
                  // this zk path.&lt;br/&gt;
                  // 2) these are most likely old &quot;state&quot; messages which are only being processed now because&lt;br/&gt;
                  // if they were new &quot;state&quot; messages then in legacy mode, a new collection would have been &lt;br/&gt;
                  // created with stateFormat = 1 (which is the default state format)&lt;br/&gt;
                  // 3) these can&apos;t be new &quot;state&quot; messages created for a new collection because&lt;br/&gt;
                  // otherwise the OverseerCollectionProcessor would have already created this path&lt;br/&gt;
                  // as part of the create collection API call &amp;#8211; which is the only way in which a collection&lt;br/&gt;
                  // with stateFormat &amp;gt; 1 can possibly be created&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="14194744" author="shalinmangar" created="Mon, 3 Nov 2014 17:15:37 +0000"  >&lt;p&gt;With the right patch (&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6591&quot; title=&quot;Cluster state updates can be lost on exception in main queue loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6591&quot;&gt;&lt;del&gt;SOLR-6591&lt;/del&gt;&lt;/a&gt;-ignore-no-collection-path.patch) this time.&lt;/p&gt;</comment>
                            <comment id="14194756" author="jira-bot" created="Mon, 3 Nov 2014 17:30:05 +0000"  >&lt;p&gt;Commit 1636400 from shalin@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1636400&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1636400&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6591&quot; title=&quot;Cluster state updates can be lost on exception in main queue loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6591&quot;&gt;&lt;del&gt;SOLR-6591&lt;/del&gt;&lt;/a&gt;: Ignore overseer operations for collections with stateFormat &amp;gt; 1 if the parent ZK path doesn&apos;t exist&lt;/p&gt;</comment>
                            <comment id="14194760" author="jira-bot" created="Mon, 3 Nov 2014 17:31:27 +0000"  >&lt;p&gt;Commit 1636401 from shalin@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1636401&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1636401&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6591&quot; title=&quot;Cluster state updates can be lost on exception in main queue loop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6591&quot;&gt;&lt;del&gt;SOLR-6591&lt;/del&gt;&lt;/a&gt;: Ignore overseer operations for collections with stateFormat &amp;gt; 1 if the parent ZK path doesn&apos;t exist&lt;/p&gt;</comment>
                            <comment id="14332846" author="anshumg" created="Mon, 23 Feb 2015 05:02:14 +0000"  >&lt;p&gt;Bulk close after 5.0 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12677293" name="SOLR-6591-constructStateFix.patch" size="2185" author="shalin" created="Mon, 27 Oct 2014 13:15:43 +0000"/>
                            <attachment id="12678963" name="SOLR-6591-ignore-no-collection-path.patch" size="1786" author="shalin" created="Mon, 3 Nov 2014 17:15:37 +0000"/>
                            <attachment id="12677388" name="SOLR-6591-no-mixed-batches.patch" size="1948" author="shalin" created="Mon, 27 Oct 2014 19:54:55 +0000"/>
                            <attachment id="12677107" name="SOLR-6591.patch" size="6056" author="shalin" created="Sat, 25 Oct 2014 14:49:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20twn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>