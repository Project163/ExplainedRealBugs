<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:05:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16044] SlowRequest logging disabled if SolrCore logger set to ERROR</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16044</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;If someone sets ROOT logger to ERROR, then &lt;tt&gt;SolrCore&lt;/tt&gt; class will also be set to ERROR, and even if &lt;tt&gt;SolrCore.SlowRequest&lt;/tt&gt; level is set to INFO, no logs will be written to &lt;tt&gt;solr_slow_requests.log&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Some debugging revealed that changing log level of &lt;tt&gt;SolrCore&lt;/tt&gt; to WARN fixes it. This suggests that since &lt;tt&gt;SlowRequest&lt;/tt&gt; is not a real class but just a logger name, it is still subject to the log level of &lt;tt&gt;SolrCore&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I suppose that the same will be true for &lt;tt&gt;SolrCore.Request&lt;/tt&gt; logging.&lt;/p&gt;

&lt;p&gt;One solution could be to create a real class for SlowRequest logging. Another solution could be to explicitly set &lt;tt&gt;SolrCore&lt;/tt&gt; level in &lt;tt&gt;log4j2.xml&lt;/tt&gt; so that it does not follow the ROOT level.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Solr 8.4&lt;/p&gt;</environment>
        <key id="13429964">SOLR-16044</key>
            <summary>SlowRequest logging disabled if SolrCore logger set to ERROR</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="janhoy">Jan H&#248;ydahl</assignee>
                                    <reporter username="janhoy">Jan H&#248;ydahl</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Feb 2022 15:42:15 +0000</created>
                <updated>Wed, 24 Apr 2024 19:44:10 +0000</updated>
                            <resolved>Sun, 10 Sep 2023 21:34:01 +0000</resolved>
                                                    <fixVersion>9.4</fixVersion>
                                    <component>logging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17496178" author="janhoy" created="Tue, 22 Feb 2022 15:45:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elyograg&quot; class=&quot;user-hover&quot; rel=&quot;elyograg&quot;&gt;elyograg&lt;/a&gt; - You did &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11453&quot; title=&quot;Create separate logger for slow requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11453&quot;&gt;&lt;del&gt;SOLR-11453&lt;/del&gt;&lt;/a&gt;, any ideas?&lt;/p&gt;</comment>
                            <comment id="17497872" author="elyograg" created="Fri, 25 Feb 2022 03:02:01 +0000"  >&lt;p&gt;I was involved on &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11453&quot; title=&quot;Create separate logger for slow requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11453&quot;&gt;&lt;del&gt;SOLR-11453&lt;/del&gt;&lt;/a&gt; but it was &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=varun&quot; class=&quot;user-hover&quot; rel=&quot;varun&quot;&gt;varun&lt;/a&gt; that did all the code commits.&#160; Then &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctargett&quot; class=&quot;user-hover&quot; rel=&quot;ctargett&quot;&gt;ctargett&lt;/a&gt; did commits for the ref guide.&lt;/p&gt;</comment>
                            <comment id="17718921" author="janhoy" created="Wed, 3 May 2023 12:39:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman&quot; class=&quot;user-hover&quot; rel=&quot;hossman&quot;&gt;hossman&lt;/a&gt; You recently discussed logging levels env.vars and proposed to inject sysprops into log4j2.xml directly. Would it make sense to inject the level from &lt;tt&gt;SOLR_LOG_LEVEL&lt;/tt&gt; / &lt;tt&gt;-Dsolr.log.level&lt;/tt&gt; into the ROOT logger tag, and invent a separate sysprop for SolrCore, which defaults to INFO, but can be changed to mute request logs? Still feel it would be beneficial to be able to control SolrCore logs separately from &lt;tt&gt;SolrCore.SlowRequest&lt;/tt&gt; and &lt;tt&gt;SolrCore.Request&lt;/tt&gt; though...&lt;/p&gt;</comment>
                            <comment id="17719014" author="hossman" created="Wed, 3 May 2023 17:39:54 +0000"  >&lt;p&gt;Jan&apos;s comment / question to me is refering to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16772&quot; title=&quot;SOLR_LOG_LEVEL&amp;#39;s effects are buggy/non-intuitive, should be handled by log4j2.xml&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16772&quot;&gt;SOLR-16772&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I don&apos;t have strong feelings about adding a new sysprop for the level of SolrCore&apos;s logger (or specifically for&#160; SolrCore.Request or SolrCore.SlowRequest) ... i just know that if we want to add any more &quot;this special solr sys prop will change your logging&quot; features it should be done via existing log4j2.xml config options, and not &quot;runtime code&quot; that goes and mucks with loggers people may have already configurd how they want.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;all of which is tangential to this bug BTW...&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The problem you&apos;re seeing here has nothing to do with if/how the SolrCore.SlowRequest logger inheits things from SolrCore logger, or wether SlowRequest is a &quot;real class (log4j doesn&apos;t know/care about that).&lt;/p&gt;

&lt;p&gt;The reason SlowRequest logger doesn&apos;t work if SolrCore is set to ERROR is becuase of a bug going all the way back to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11453&quot; title=&quot;Create separate logger for slow requests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11453&quot;&gt;&lt;del&gt;SOLR-11453&lt;/del&gt;&lt;/a&gt; when the SlowRequest logger was added (instead of the SolrCore logger being used directly) so that those messages could be routed to a custom log file...&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;/* slowQueryThresholdMillis defaults to -1 in SolrConfig -- not enabled.*/&lt;/span&gt;
&#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (log.isWarnEnabled() &amp;amp;&amp;amp; slowQueryThresholdMillis &amp;gt;= 0) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;...should be...&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &#160; &#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;/* slowQueryThresholdMillis defaults to -1 in SolrConfig -- not enabled.*/&lt;/span&gt;
&#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (slowLog.isWarnEnabled() &amp;amp;&amp;amp; slowQueryThresholdMillis &amp;gt;= 0) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;ie: we&apos;re asking the wrong logger &quot;is this log level enabled?&quot;&lt;/p&gt;</comment>
                            <comment id="17763213" author="janhoy" created="Fri, 8 Sep 2023 18:34:10 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman&quot; class=&quot;user-hover&quot; rel=&quot;hossman&quot;&gt;hossman&lt;/a&gt; I created a PR, have a look if you like.&lt;/p&gt;</comment>
                            <comment id="17763459" author="jira-bot" created="Sun, 10 Sep 2023 18:40:30 +0000"  >&lt;p&gt;Commit ca4692b5a26a060831a6682e4961f93b9871362b in solr&apos;s branch refs/heads/main from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=ca4692b5a26&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=ca4692b5a26&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16044&quot; title=&quot;SlowRequest logging disabled if SolrCore logger set to ERROR&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16044&quot;&gt;&lt;del&gt;SOLR-16044&lt;/del&gt;&lt;/a&gt;: SlowRequest logging disabled if SolrCore logger set to ERROR (#1907)&lt;/p&gt;
</comment>
                            <comment id="17763488" author="jira-bot" created="Sun, 10 Sep 2023 21:33:48 +0000"  >&lt;p&gt;Commit 5d2d59a9bd9393dfa85ea108338bef3f5df45213 in solr&apos;s branch refs/heads/branch_9x from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=5d2d59a9bd9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=5d2d59a9bd9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16044&quot; title=&quot;SlowRequest logging disabled if SolrCore logger set to ERROR&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16044&quot;&gt;&lt;del&gt;SOLR-16044&lt;/del&gt;&lt;/a&gt;: SlowRequest logging disabled if SolrCore logger set to ERROR (#1907)&lt;/p&gt;

&lt;p&gt;(cherry picked from commit ca4692b5a26a060831a6682e4961f93b9871362b)&lt;/p&gt;</comment>
                            <comment id="17775411" author="alex.parvulescu" created="Sun, 15 Oct 2023 19:57:01 +0000"  >&lt;p&gt;Closing after the 9.4.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13534054">SOLR-16772</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 4 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ztw0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>