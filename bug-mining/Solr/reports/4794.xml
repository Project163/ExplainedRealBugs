<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:49:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-15968] bin/solr zk always throws exception</title>
                <link>https://issues.apache.org/jira/browse/SOLR-15968</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;To reproduce:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
bin/solr start -c
bin/solr zk ls /configs/_default
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You will see a response like this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ solr zk ls /configs/_default/
managed-schema
protwords.txt
solrconfig.xml
synonyms.txt
stopwords.txt
lang
WARN  - 2022-02-01 13:14:48.160; org.apache.zookeeper.ClientCnxn; An exception was thrown &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; closing send thread &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; session 0x200008ad548000a. =&amp;gt; EndOfStreamException: Unable to read additional data from server sessionid 0x200008ad548000a, likely server has closed socket
        at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:77)
org.apache.zookeeper.ClientCnxn$EndOfStreamException: Unable to read additional data from server sessionid 0x200008ad548000a, likely server has closed socket
        at org.apache.zookeeper.ClientCnxnSocketNIO.doIO(ClientCnxnSocketNIO.java:77) ~[zookeeper-3.6.2.jar:3.6.2]
        at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:350) ~[zookeeper-3.6.2.jar:3.6.2]
        at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1275) ~[zookeeper-3.6.2.jar:3.6.2]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The command seems to succeed, so this is more an unclean shutdown of zookeeper client.&lt;/p&gt;

&lt;p&gt;The same error message can be seen in Jenkins tests, such as this &lt;a href=&quot;https://jenkins.thetaphi.de/view/Solr/job/Solr-main-Windows/612/testReport/junit/org.apache.solr.cloud/SolrCLIZkUtilsTest/testCp/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jenkins.thetaphi.de/view/Solr/job/Solr-main-Windows/612/testReport/junit/org.apache.solr.cloud/SolrCLIZkUtilsTest/testCp/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13425973">SOLR-15968</key>
            <summary>bin/solr zk always throws exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="janhoy">Jan H&#248;ydahl</assignee>
                                    <reporter username="janhoy">Jan H&#248;ydahl</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Feb 2022 13:17:15 +0000</created>
                <updated>Sat, 16 Jul 2022 16:41:40 +0000</updated>
                            <resolved>Wed, 2 Feb 2022 10:34:26 +0000</resolved>
                                                    <fixVersion>9.0</fixVersion>
                    <fixVersion>8.11.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17485342" author="mdrob" created="Tue, 1 Feb 2022 16:08:30 +0000"  >&lt;p&gt;The Jenkins failure that you linked to was fixed in dfef340534c507dbc11f3c4f4254d32dcc4f67bf (pr #568)&lt;/p&gt;

&lt;p&gt;However, I am able to reproduce this ClientCnxn exception about 50% of the time. Often, but not always, it is accompanied by &lt;tt&gt;WARN  - 2022-02-01 10:00:17.469; org.apache.zookeeper.ClientCnxn; Session 0x0 for sever localhost/0:0:0:0:0:0:0:1:9983, Closing socket connection. Attempting reconnect except it is a SessionExpiredException. =&amp;gt; java.net.ConnectException: Connection refused&lt;/tt&gt; at the start.&lt;/p&gt;

&lt;p&gt;This looks like it comes from &lt;a href=&quot;https://github.com/apache/zookeeper/blob/release-3.7.0/zookeeper-server/src/main/java/org/apache/zookeeper/ClientCnxn.java#L1283-L1288&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/blob/release-3.7.0/zookeeper-server/src/main/java/org/apache/zookeeper/ClientCnxn.java#L1283-L1288&lt;/a&gt; which has the comment &lt;tt&gt;// closing so this is expected&lt;/tt&gt;. That&apos;s not great, but maybe our only solution is to bump the ZK log level for &lt;tt&gt;bin/solr zk&lt;/tt&gt; operations to ERROR instead?&lt;/p&gt;</comment>
                            <comment id="17485362" author="mdrob" created="Tue, 1 Feb 2022 16:44:46 +0000"  >&lt;p&gt;This is apparently already a reported issue in the ZK community&lt;/p&gt;</comment>
                            <comment id="17485519" author="janhoy" created="Tue, 1 Feb 2022 22:42:52 +0000"  >&lt;p&gt;I made a PR that changes zk logging to ERROR, only for console (SolrCLI). Works like a charm, while we wait for zookeeper 3.8. They started the 3.8 release a few days ago (&lt;a href=&quot;https://lists.apache.org/thread/6jydtygw3qf5wo49kg5pcf7ghhpgjqqy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread/6jydtygw3qf5wo49kg5pcf7ghhpgjqqy&lt;/a&gt;) so could be that Solr could upgrade before the final RC is out.&lt;/p&gt;</comment>
                            <comment id="17485565" author="marcussorealheis" created="Wed, 2 Feb 2022 04:48:27 +0000"  >&lt;p&gt;What is the rationale for upgrading before the final RC is cut? I would think we would only use the finalized version.&lt;/p&gt;</comment>
                            <comment id="17485675" author="janhoy" created="Wed, 2 Feb 2022 10:03:29 +0000"  >&lt;p&gt;This isn&apos;t a critical error, just causing some noise. The linked ZOOKEEPER issue is not even fixed so we don&apos;t know whether it becomes part of zk 3.8.0 or not. I&apos;m happy with just logging ERROR for now, and if a fix is released before our final RC we can consider, but not a blocker.&lt;/p&gt;</comment>
                            <comment id="17485676" author="jira-bot" created="Wed, 2 Feb 2022 10:04:04 +0000"  >&lt;p&gt;Commit 38421ea20581e4f9d8f57dd2af631566f5947c10 in solr&apos;s branch refs/heads/main from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=38421ea&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=38421ea&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15968&quot; title=&quot;bin/solr zk always throws exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15968&quot;&gt;&lt;del&gt;SOLR-15968&lt;/del&gt;&lt;/a&gt; bin/solr zk always throws exception - change zk logging to ERROR level for SolrCLI (#586)&lt;/p&gt;
</comment>
                            <comment id="17485679" author="jira-bot" created="Wed, 2 Feb 2022 10:11:56 +0000"  >&lt;p&gt;Commit 3a99d915de39fa6e6f473015677af57a9bd4e71c in solr&apos;s branch refs/heads/branch_9x from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=3a99d91&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=3a99d91&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15968&quot; title=&quot;bin/solr zk always throws exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15968&quot;&gt;&lt;del&gt;SOLR-15968&lt;/del&gt;&lt;/a&gt; bin/solr zk always throws exception - change zk logging to ERROR level for SolrCLI (#586)&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 38421ea20581e4f9d8f57dd2af631566f5947c10)&lt;/p&gt;</comment>
                            <comment id="17485687" author="jira-bot" created="Wed, 2 Feb 2022 10:23:43 +0000"  >&lt;p&gt;Commit 6256e3c8f64e3fbfef3702b6dcbe0f882cfd2d26 in solr&apos;s branch refs/heads/branch_9_0 from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=6256e3c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=6256e3c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15968&quot; title=&quot;bin/solr zk always throws exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15968&quot;&gt;&lt;del&gt;SOLR-15968&lt;/del&gt;&lt;/a&gt; bin/solr zk always throws exception - change zk logging to ERROR level for SolrCLI (#586)&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 38421ea20581e4f9d8f57dd2af631566f5947c10)&lt;/p&gt;</comment>
                            <comment id="17535635" author="janhoy" created="Thu, 12 May 2022 00:26:49 +0000"  >&lt;p&gt;Closing after the 9.0.0 release&lt;/p&gt;</comment>
                            <comment id="17536155" author="jira-bot" created="Thu, 12 May 2022 14:33:53 +0000"  >&lt;p&gt;Commit 3f2329b616e2fd925052cde13d3dfa697ab2be7f in lucene-solr&apos;s branch refs/heads/branch_8_11 from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=3f2329b616e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=3f2329b616e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15968&quot; title=&quot;bin/solr zk always throws exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15968&quot;&gt;&lt;del&gt;SOLR-15968&lt;/del&gt;&lt;/a&gt; bin/solr zk always throws exception - change zk logging to ERROR level for SolrCLI (#586)&lt;/p&gt;

&lt;p&gt;Backport from &lt;a href=&quot;https://github.com/apache/solr/commit/38421ea20581e4f9d8f57dd2af631566f5947c10&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/commit/38421ea20581e4f9d8f57dd2af631566f5947c10&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17567519" author="JIRAUSER292924" created="Sat, 16 Jul 2022 16:41:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-4515&quot; title=&quot;ZK Cli quit command always logs error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-4515&quot;&gt;&lt;del&gt;ZOOKEEPER-4515&lt;/del&gt;&lt;/a&gt;, which incorporates &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-4376&quot; title=&quot;Zookeeper should not warn about &amp;quot;An exception was thrown while closing send thread&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-4376&quot;&gt;ZOOKEEPER-4376&lt;/a&gt; fixes the issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13426308">SOLR-15975</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13400882">ZOOKEEPER-4376</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13438559">ZOOKEEPER-4515</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 17 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0z5ew:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>