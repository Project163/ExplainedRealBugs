<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:26:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-10734] Multithreaded test/support for AtomicURP broken</title>
                <link>https://issues.apache.org/jira/browse/SOLR-10734</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The multithreaded test doesn&apos;t actually start the threads, but only invokes the run directly. The join afterwards doesn&apos;t do anything, hence.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;diff --git a/solr/core/src/test/org/apache/solr/update/processor/AtomicUpdateProcessorFactoryTest.java b/solr/core/src/test/org/apache/solr/update/processor/AtomicUpdateProcessorFactoryTest.java
index f3f833d..10b7770 100644
--- a/solr/core/src/test/org/apache/solr/update/processor/AtomicUpdateProcessorFactoryTest.java
+++ b/solr/core/src/test/org/apache/solr/update/processor/AtomicUpdateProcessorFactoryTest.java
@@ -238,7 +238,7 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;AtomicUpdateProcessorFactoryTest &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; SolrTestCaseJ4 {
           }
         }
       };
-      t.run();
+      t.run(); &lt;span class=&quot;code-comment&quot;&gt;// red flag, shouldn&apos;t &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; be t.start?
&lt;/span&gt;       threads.add(t);
       finalCount += index; &lt;span class=&quot;code-comment&quot;&gt;//int_i
&lt;/span&gt;     }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13074242">SOLR-10734</key>
            <summary>Multithreaded test/support for AtomicURP broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalin">Shalin Shekhar Mangar</assignee>
                                    <reporter username="ichattopadhyaya">Ishan Chattopadhyaya</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 May 2017 15:58:02 +0000</created>
                <updated>Tue, 11 Feb 2025 18:50:09 +0000</updated>
                            <resolved>Wed, 28 Mar 2018 07:27:37 +0000</resolved>
                                                    <fixVersion>7.4</fixVersion>
                    <fixVersion>8.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16022500" author="sarkaramrit2@gmail.com" created="Wed, 24 May 2017 08:17:09 +0000"  >&lt;p&gt;Ishan, thank you for sharing the concern,&lt;/p&gt;

&lt;p&gt;I replaced the t.run() with t.start(), and the test failed for me once for this seed:&lt;/p&gt;

&lt;p&gt;ant test  -Dtestcase=AtomicUpdateProcessorFactoryTest -Dtests.method=testMultipleThreads -Dtests.seed=C2A82A0AA119D39F -Dtests.slow=true -Dtests.locale=ar-KW -Dtests.timezone=Etc/GMT+11 -Dtests.asserts=true -Dtests.file.encoding=UTF-8&lt;/p&gt;

&lt;p&gt;It failed multiple retires and eventually fails for version conflict but I am not able to replicate the same ever since for any seed and the test is getting passed successfully.&lt;/p&gt;

&lt;p&gt;I am sure the test is not full proofed.&lt;/p&gt;</comment>
                            <comment id="16031011" author="sarkaramrit2@gmail.com" created="Wed, 31 May 2017 11:31:28 +0000"  >&lt;p&gt;The testmethod::testMultipleThreads() is faulty, the multithreaded support is intact until a certain limit.&lt;/p&gt;

&lt;p&gt;If I bring down the number of threads spawned b/w range 10-20, it works swiftly. As I debugged through the threads, there are multiple threads executing at the same time and some threads (10-20%) are not able to catch up ever with the version_id for maximum number of attempts.&lt;/p&gt;

&lt;p&gt;expected_is: X, actual_is: Y and when it fetches the current version from &lt;em&gt;vinfo&lt;/em&gt;, it becomes Z (updated by some other thread), always behind. PF screenshot.&lt;/p&gt;

&lt;p&gt;For MAX_ATTEMPTS=100, out of total 1000 threads, if I spawn, around 200-350 threads are failing to execute resulting in failure of poorly written test scenarios. But some threads do get indexed after multiple retries and populates the document successfully.&lt;/p&gt;

&lt;p&gt;e.g. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;response&amp;gt;
&amp;lt;lst name=&lt;span class=&quot;code-quote&quot;&gt;&quot;responseHeader&quot;&lt;/span&gt;&amp;gt;&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;status&quot;&lt;/span&gt;&amp;gt;0&amp;lt;/&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;QTime&quot;&lt;/span&gt;&amp;gt;3&amp;lt;/&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;&amp;lt;/lst&amp;gt;&amp;lt;result name=&lt;span class=&quot;code-quote&quot;&gt;&quot;response&quot;&lt;/span&gt; numFound=&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt; start=&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;&amp;gt;&amp;lt;doc&amp;gt;&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;&amp;gt;10&amp;lt;/&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;&amp;lt;arr name=&lt;span class=&quot;code-quote&quot;&gt;&quot;range_facet_l&quot;&lt;/span&gt;&amp;gt;&amp;lt;&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;&amp;gt;10&amp;lt;/&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;&amp;gt;&amp;lt;/arr&amp;gt;&amp;lt;arr name=&lt;span class=&quot;code-quote&quot;&gt;&quot;range_facet_l_dv&quot;&lt;/span&gt;&amp;gt;&amp;lt;&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;&amp;gt;10&amp;lt;/&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;&amp;gt;&amp;lt;/arr&amp;gt;&amp;lt;arr name=&lt;span class=&quot;code-quote&quot;&gt;&quot;range_facet_i_dv&quot;&lt;/span&gt;&amp;gt;&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;10&amp;lt;/&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;&amp;lt;/arr&amp;gt;&amp;lt;arr name=&lt;span class=&quot;code-quote&quot;&gt;&quot;cat&quot;&lt;/span&gt;&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;gy3vfjzqbn41ir5tljdq&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;uwho9ivymrn3ewkrncgs&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;l5z00axtj727yv2dsz38&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;b0iuxlwrlloc7408ialh&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;str&amp;gt;rcj1nr5whgo6bw31e4qa&amp;lt;/str&amp;gt;&amp;lt;/arr&amp;gt;&amp;lt;arr name=&lt;span class=&quot;code-quote&quot;&gt;&quot;int_i&quot;&lt;/span&gt;&amp;gt;&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;432&amp;lt;/&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;&amp;lt;/arr&amp;gt;&amp;lt;arr name=&lt;span class=&quot;code-quote&quot;&gt;&quot;multiDefault&quot;&lt;/span&gt;&amp;gt;&amp;lt;str&amp;gt;muLti-Default&amp;lt;/str&amp;gt;&amp;lt;/arr&amp;gt;&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;intDefault&quot;&lt;/span&gt;&amp;gt;42&amp;lt;/&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;&amp;lt;date name=&lt;span class=&quot;code-quote&quot;&gt;&quot;timestamp&quot;&lt;/span&gt;&amp;gt;2017-05-31T10:53:41.564Z&amp;lt;/date&amp;gt;&amp;lt;&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;_version_&quot;&lt;/span&gt;&amp;gt;1568908793938444289&amp;lt;/&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;&amp;gt;&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;intDvoDefault&quot;&lt;/span&gt;&amp;gt;42&amp;lt;/&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;&amp;lt;/doc&amp;gt;&amp;lt;/result&amp;gt;
&amp;lt;/response&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Like the below scenario, I am expecting all the threads will be executed and and the field int_i will be populated correctly. If some of the threads fail, which is a valid scenario in real world, it can happen if the number of threads are many (here 1000), the test scenario fails. &lt;/p&gt;

&lt;p&gt;e.g error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.RuntimeException: REQUEST FAILED: xpath=&lt;span class=&quot;code-comment&quot;&gt;//result[@numFound=1]
&lt;/span&gt;	xml response was: &amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;response&amp;gt;
&amp;lt;lst name=&lt;span class=&quot;code-quote&quot;&gt;&quot;responseHeader&quot;&lt;/span&gt;&amp;gt;&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;status&quot;&lt;/span&gt;&amp;gt;0&amp;lt;/&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;&amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;QTime&quot;&lt;/span&gt;&amp;gt;0&amp;lt;/&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;&amp;lt;/lst&amp;gt;&amp;lt;result name=&lt;span class=&quot;code-quote&quot;&gt;&quot;response&quot;&lt;/span&gt; numFound=&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt; start=&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;&amp;gt;&amp;lt;/result&amp;gt;
&amp;lt;/response&amp;gt;

	request was:q=int_i:2089&amp;amp;wt=xml
	at org.apache.solr.SolrTestCaseJ4.assertQ(SolrTestCaseJ4.java:891)
	... 40 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I believe the multithreading support is not broken but it has its breakpoint. Seeking suggestions on how to write test cases for AUP multithreading scenario as the current one is faulty, I can bring the number of threads down to 10-20 or even if some of the threads fail to execute and index atomic updates, we write test such that atleast document is present in index, with updates from successfully executed threads.&lt;/p&gt;

&lt;p&gt;Thank you.&lt;/p&gt;</comment>
                            <comment id="16046304" author="sarkaramrit2@gmail.com" created="Mon, 12 Jun 2017 08:06:48 +0000"  >&lt;p&gt;Patch attached with following changes:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Max Attempts bumped up from 5 to 25.&lt;/li&gt;
	&lt;li&gt;Threads lowered to 10 from 100.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;As the above theory posted above stands out, the following changes will make the tests work.&lt;/p&gt;</comment>
                            <comment id="16102167" author="sarkaramrit2@gmail.com" created="Wed, 26 Jul 2017 19:32:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ichattopadhyaya&quot; class=&quot;user-hover&quot; rel=&quot;ichattopadhyaya&quot;&gt;ichattopadhyaya&lt;/a&gt;, &lt;/p&gt;

&lt;p&gt;Let me know if we need to do anything else apart from the above to rectify the test class.&lt;/p&gt;</comment>
                            <comment id="16102756" author="jira-bot" created="Thu, 27 Jul 2017 05:58:13 +0000"  >&lt;p&gt;Commit edff113e13f2a108d2f4177da3e88cf6f3402b23 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=edff113&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=edff113&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10734&quot; title=&quot;Multithreaded test/support for AtomicURP broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10734&quot;&gt;&lt;del&gt;SOLR-10734&lt;/del&gt;&lt;/a&gt;: AtomicUpdateProcessorFactoryTest was not truly multithreaded&lt;/p&gt;</comment>
                            <comment id="16102757" author="jira-bot" created="Thu, 27 Jul 2017 05:59:06 +0000"  >&lt;p&gt;Commit afcd96cf405b065a59b800bda3e88771574e3263 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=afcd96c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=afcd96c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10734&quot; title=&quot;Multithreaded test/support for AtomicURP broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10734&quot;&gt;&lt;del&gt;SOLR-10734&lt;/del&gt;&lt;/a&gt;: AtomicUpdateProcessorFactoryTest was not truly multithreaded&lt;/p&gt;</comment>
                            <comment id="16103195" author="steve_rowe" created="Thu, 27 Jul 2017 13:20:14 +0000"  >&lt;p&gt;I got a non-reproducing master failure on my Jenkins:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Checking out Revision edff113e13f2a108d2f4177da3e88cf6f3402b23 (refs/remotes/origin/master)
[...]
   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=AtomicUpdateProcessorFactoryTest -Dtests.method=testMultipleThreads -Dtests.seed=76152225D862F0E0 -Dtests.slow=true -Dtests.locale=sr-ME -Dtests.timezone=Australia/Eucla -Dtests.asserts=true -Dtests.file.encoding=UTF-8
   [junit4] ERROR   0.06s J3  | AtomicUpdateProcessorFactoryTest.testMultipleThreads &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.RuntimeException: Exception during query
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([76152225D862F0E0:5A2755A854A68664]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.SolrTestCaseJ4.assertQ(SolrTestCaseJ4.java:886)
   [junit4]    &amp;gt; 	at org.apache.solr.update.processor.AtomicUpdateProcessorFactoryTest.testMultipleThreads(AtomicUpdateProcessorFactoryTest.java:264)
   [junit4]    &amp;gt; 	at java.lang.Thread.run(Thread.java:745)
   [junit4]    &amp;gt; Caused by: java.lang.RuntimeException: REQUEST FAILED: xpath=//result[@numFound=1]
   [junit4]    &amp;gt; 	xml response was: &amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
   [junit4]    &amp;gt; &amp;lt;response&amp;gt;
   [junit4]    &amp;gt; &amp;lt;lst name=&quot;responseHeader&quot;&amp;gt;&amp;lt;int name=&quot;status&quot;&amp;gt;0&amp;lt;/int&amp;gt;&amp;lt;int name=&quot;QTime&quot;&amp;gt;0&amp;lt;/int&amp;gt;&amp;lt;/lst&amp;gt;&amp;lt;result name=&quot;response&quot; numFound=&quot;0&quot; start=&quot;0&quot;&amp;gt;&amp;lt;/result&amp;gt;
   [junit4]    &amp;gt; &amp;lt;/response&amp;gt;
   [junit4]    &amp;gt; 	request was:q=int_i:18&amp;amp;wt=xml
   [junit4]    &amp;gt; 	at org.apache.solr.SolrTestCaseJ4.assertQ(SolrTestCaseJ4.java:879)
[...]
   [junit4]   2&amp;gt; NOTE: test params are: codec=Asserting(Lucene70): {name_s=BlockTreeOrds(blocksize=128), int_i=BlockTreeOrds(blocksize=128), range_facet_l_dv=PostingsFormat(name=Memory), multiDefault=PostingsFormat(name=LuceneVarGapDocFreqInterval), intDefault=PostingsFormat(name=LuceneFixedGap), title=PostingsFormat(name=LuceneVarGapDocFreqInterval), title_lettertok=PostingsFormat(name=Memory), count_i=BlockTreeOrds(blocksize=128), range_facet_l=PostingsFormat(name=LuceneFixedGap), title_stringNoNorms=PostingsFormat(name=LuceneFixedGap), title_stemmed=PostingsFormat(name=LuceneVarGapDocFreqInterval), cat=PostingsFormat(name=LuceneFixedGap), id_i1=PostingsFormat(name=LuceneVarGapDocFreqInterval), id=PostingsFormat(name=Memory), range_facet_i_dv=PostingsFormat(name=LuceneFixedGap), text=BlockTreeOrds(blocksize=128), timestamp=PostingsFormat(name=LuceneFixedGap)}, docValues:{range_facet_l_dv=DocValuesFormat(name=Direct), _version_=DocValuesFormat(name=Lucene70), range_facet_i_dv=DocValuesFormat(name=Lucene70), intDvoDefault=DocValuesFormat(name=Lucene70), timestamp=DocValuesFormat(name=Lucene70)}, maxPointsInLeafNode=798, maxMBSortInHeap=6.2618227715292365, sim=RandomSimilarity(queryNorm=false): {}, locale=sr-ME, timezone=Australia/Eucla
   [junit4]   2&amp;gt; NOTE: Linux 4.1.0-custom2-amd64 amd64/Oracle Corporation 1.8.0_77 (64-bit)/cpus=16,threads=1,free=81956456,total=525860864
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16103214" author="steve_rowe" created="Thu, 27 Jul 2017 13:40:43 +0000"  >&lt;p&gt;Two more Jenkins failures, both on branch_7x: &lt;a href=&quot;https://builds.apache.org/job/Lucene-Solr-Tests-7.x/106/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Lucene-Solr-Tests-7.x/106/&lt;/a&gt; (reproduces for me): &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Checking out Revision 494a25480e8c14e500cf543a9ff4a7d37c3656d0 (refs/remotes/origin/branch_7x)
[...]
   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=AtomicUpdateProcessorFactoryTest -Dtests.method=testMultipleThreads -Dtests.seed=2689BFDD1C91E35C -Dtests.multiplier=2 -Dtests.slow=true -Dtests.locale=ar-SD -Dtests.timezone=Europe/Rome -Dtests.asserts=true -Dtests.file.encoding=UTF-8
   [junit4] ERROR   0.45s J0 | AtomicUpdateProcessorFactoryTest.testMultipleThreads &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.RuntimeException: Exception during query
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([2689BFDD1C91E35C:ABBC850905595D8]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.SolrTestCaseJ4.assertQ(SolrTestCaseJ4.java:886)
   [junit4]    &amp;gt; 	at org.apache.solr.update.processor.AtomicUpdateProcessorFactoryTest.testMultipleThreads(AtomicUpdateProcessorFactoryTest.java:260)
   [junit4]    &amp;gt; 	at java.lang.Thread.run(Thread.java:748)
   [junit4]    &amp;gt; Caused by: java.lang.RuntimeException: REQUEST FAILED: xpath=//result[@numFound=1]
   [junit4]    &amp;gt; 	xml response was: &amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
   [junit4]    &amp;gt; &amp;lt;response&amp;gt;
   [junit4]    &amp;gt; &amp;lt;lst name=&quot;responseHeader&quot;&amp;gt;&amp;lt;int name=&quot;status&quot;&amp;gt;0&amp;lt;/int&amp;gt;&amp;lt;int name=&quot;QTime&quot;&amp;gt;0&amp;lt;/int&amp;gt;&amp;lt;/lst&amp;gt;&amp;lt;result name=&quot;response&quot; numFound=&quot;0&quot; start=&quot;0&quot;&amp;gt;&amp;lt;/result&amp;gt;
   [junit4]    &amp;gt; &amp;lt;/response&amp;gt;
   [junit4]    &amp;gt; 	request was:q=cat:mt238i51nawrz3syjfe9+vs98scypq841oc1u5it8+rzzee3zd6k0umdhoi4i0+ah7738oua03w9uilheht+mvsxg9bkniih36bu0efy&amp;amp;wt=xml
   [junit4]    &amp;gt; 	at org.apache.solr.SolrTestCaseJ4.assertQ(SolrTestCaseJ4.java:879)
[...]
   [junit4]   2&amp;gt; NOTE: test params are: codec=Asserting(Lucene70): {name_s=Lucene50(blocksize=128), title_stringNoNorms=PostingsFormat(name=Direct), title_stemmed=BlockTreeOrds(blocksize=128), multiDefault=BlockTreeOrds(blocksize=128), cat=PostingsFormat(name=Direct), id=Lucene50(blocksize=128), text=Lucene50(blocksize=128), title=BlockTreeOrds(blocksize=128), title_lettertok=Lucene50(blocksize=128)}, docValues:{int_i=DocValuesFormat(name=Asserting), range_facet_l_dv=DocValuesFormat(name=Lucene70), _version_=DocValuesFormat(name=Memory), intDefault=DocValuesFormat(name=Memory), id_i1=DocValuesFormat(name=Lucene70), range_facet_i_dv=DocValuesFormat(name=Memory), intDvoDefault=DocValuesFormat(name=Asserting), count_i=DocValuesFormat(name=Asserting), range_facet_l=DocValuesFormat(name=Memory), timestamp=DocValuesFormat(name=Memory)}, maxPointsInLeafNode=666, maxMBSortInHeap=7.609559823042625, sim=RandomSimilarity(queryNorm=true): {}, locale=ar-SD, timezone=Europe/Rome
   [junit4]   2&amp;gt; NOTE: Linux 4.4.0-83-generic amd64/Oracle Corporation 1.8.0_144 (64-bit)/cpus=4,threads=1,free=141278480,total=466092032
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and &lt;a href=&quot;https://jenkins.thetaphi.de/job/Lucene-Solr-7.x-MacOSX/77/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jenkins.thetaphi.de/job/Lucene-Solr-7.x-MacOSX/77/&lt;/a&gt; (doesn&apos;t reproduce for me):&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Checking out Revision 494a25480e8c14e500cf543a9ff4a7d37c3656d0 (refs/remotes/origin/branch_7x)
[...]
   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=AtomicUpdateProcessorFactoryTest -Dtests.method=testMultipleThreads -Dtests.seed=F91EF2B939555DA -Dtests.slow=true -Dtests.locale=es-SV -Dtests.timezone=Atlantic/Cape_Verde -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1
   [junit4] ERROR   0.05s J1 | AtomicUpdateProcessorFactoryTest.testMultipleThreads &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: java.lang.RuntimeException: Exception during query
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([F91EF2B939555DA:23A398A61F51235E]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.SolrTestCaseJ4.assertQ(SolrTestCaseJ4.java:886)
   [junit4]    &amp;gt; 	at org.apache.solr.update.processor.AtomicUpdateProcessorFactoryTest.testMultipleThreads(AtomicUpdateProcessorFactoryTest.java:264)
   [junit4]    &amp;gt; 	at java.lang.Thread.run(Thread.java:748)
   [junit4]    &amp;gt; Caused by: java.lang.RuntimeException: REQUEST FAILED: xpath=//result[@numFound=1]
   [junit4]    &amp;gt; 	xml response was: &amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
   [junit4]    &amp;gt; &amp;lt;response&amp;gt;
   [junit4]    &amp;gt; &amp;lt;lst name=&quot;responseHeader&quot;&amp;gt;&amp;lt;int name=&quot;status&quot;&amp;gt;0&amp;lt;/int&amp;gt;&amp;lt;int name=&quot;QTime&quot;&amp;gt;0&amp;lt;/int&amp;gt;&amp;lt;/lst&amp;gt;&amp;lt;result name=&quot;response&quot; numFound=&quot;0&quot; start=&quot;0&quot;&amp;gt;&amp;lt;/result&amp;gt;
   [junit4]    &amp;gt; &amp;lt;/response&amp;gt;
   [junit4]    &amp;gt; 	request was:q=int_i:21&amp;amp;wt=xml
   [junit4]    &amp;gt; 	at org.apache.solr.SolrTestCaseJ4.assertQ(SolrTestCaseJ4.java:879)
[...]
   [junit4]   2&amp;gt; NOTE: test params are: codec=Lucene70, sim=RandomSimilarity(queryNorm=false): {}, locale=es-SV, timezone=Atlantic/Cape_Verde
   [junit4]   2&amp;gt; NOTE: Mac OS X 10.11.6 x86_64/Oracle Corporation 1.8.0_141 (64-bit)/cpus=3,threads=1,free=301576032,total=536870912
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16103220" author="sarkaramrit2@gmail.com" created="Thu, 27 Jul 2017 13:46:32 +0000"  >&lt;p&gt;The race around condition still prevails for even 10 threads and 25 attempts. Phew &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;

&lt;p&gt;I converted the &lt;tt&gt;exact match&lt;/tt&gt; query to &lt;tt&gt;range&lt;/tt&gt; so that the test will pass even if one threads gets executed, rightfully:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    assertQ(&lt;span class=&quot;code-quote&quot;&gt;&quot;Check the total number of docs&quot;&lt;/span&gt;,
        req(&lt;span class=&quot;code-quote&quot;&gt;&quot;q&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;int_i:[* TO &quot;&lt;/span&gt; + finalCount+&lt;span class=&quot;code-quote&quot;&gt;&quot;]&quot;&lt;/span&gt;)
        , &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-comment&quot;&gt;//result[@numFound=1]&quot;&lt;/span&gt;);&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and put proper parentheses on string field exact match. Not sure whether this is enough for all the scenarios.&lt;/p&gt;</comment>
                            <comment id="16105118" author="steve_rowe" created="Fri, 28 Jul 2017 15:36:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt;: &lt;tt&gt;AtomicUpdateProcessorFactoryTest.testMultipleThreads()&lt;/tt&gt; is failing extremely regularly.  Please fix or disable.&lt;/p&gt;</comment>
                            <comment id="16106270" author="ichattopadhyaya" created="Sat, 29 Jul 2017 23:53:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;Not sure whether this is enough for all the scenarios.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Given that the tests or the implementation itself is broken, should we add an experimental annotation to the URP?&lt;/p&gt;</comment>
                            <comment id="16106272" author="ichattopadhyaya" created="Sat, 29 Jul 2017 23:53:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;Not sure whether this is enough for all the scenarios.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Given that the tests or the implementation itself is broken, should we add an experimental annotation to the URP?&lt;/p&gt;</comment>
                            <comment id="16106273" author="ichattopadhyaya" created="Sat, 29 Jul 2017 23:56:53 +0000"  >&lt;p&gt;I can confirm that this test fails almost 9 out of 10 times on my box (when running with -Dtests.jvms=12).&lt;/p&gt;</comment>
                            <comment id="16106277" author="sarkaramrit2@gmail.com" created="Sun, 30 Jul 2017 00:28:30 +0000"  >&lt;p&gt;Ishan,&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Given that the tests or the implementation itself is broken, should we add an experimental annotation to the URP?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I firmly believe the implementation is still intact, i.e. not all the threads will get successfully executed, there&apos;s no guarantee for it. The tests, &lt;tt&gt;testMultipleThreads&lt;/tt&gt; still doesn&apos;t take that into perspective, which increasing the attempts and lowering the test wouldn&apos;t fix either. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I can confirm that this test fails almost 9 out of 10 times on my box (when running with -Dtests.jvms=12).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;After the patch recently uploaded, where &lt;tt&gt;exact match&lt;/tt&gt; is changed to &lt;tt&gt;range&lt;/tt&gt;. if I run &lt;tt&gt;ant -Dtestcase=AtomicUpdateProcessorFactoryTest -Dtests.jvms=12 test&lt;/tt&gt; on 8GB RAM, 256GB storage SSD Mac, it ran fine for me multiple times. I am not sure how else to cope this.&lt;/p&gt;</comment>
                            <comment id="16106289" author="jira-bot" created="Sun, 30 Jul 2017 02:28:09 +0000"  >&lt;p&gt;Commit 8b32d6beb5a2a3addb00901a0317167228fce520 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=8b32d6b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=8b32d6b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10734&quot; title=&quot;Multithreaded test/support for AtomicURP broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10734&quot;&gt;&lt;del&gt;SOLR-10734&lt;/del&gt;&lt;/a&gt;: Awaitsfix&lt;/p&gt;</comment>
                            <comment id="16106290" author="noble.paul" created="Sun, 30 Jul 2017 02:28:35 +0000"  >&lt;p&gt;tests failing too often. moved to &lt;tt&gt;AwaitsFix()&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16106291" author="jira-bot" created="Sun, 30 Jul 2017 02:29:26 +0000"  >&lt;p&gt;Commit 44473e21f9ee39c6d30060ac2182613c1a09f329 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=44473e2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=44473e2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10734&quot; title=&quot;Multithreaded test/support for AtomicURP broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10734&quot;&gt;&lt;del&gt;SOLR-10734&lt;/del&gt;&lt;/a&gt;: Awaitsfix&lt;/p&gt;</comment>
                            <comment id="16113948" author="sarkaramrit2@gmail.com" created="Fri, 4 Aug 2017 04:46:08 +0000"  >&lt;p&gt;I ran local beasts on system for master: 10 and 2500 rounds and branch_7x: 100 for the patch uploaded recently in JIRA and it ran successfully. I am attaching the beast results too.&lt;/p&gt;

&lt;p&gt;Changes done as explained above:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-comment&quot;&gt;// there is no gurantee of all the threads getting executed, even &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; one passes, concurrency works.
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testMultipleThreads() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    clearIndex();
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] strings = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[5];
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i=0; i&amp;lt;5; i++) {
      strings[i] = generateRandomString();
    }

    List&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;&amp;gt; threads = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&amp;gt;(100);
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; finalCount = 0; &lt;span class=&quot;code-comment&quot;&gt;//int_i
&lt;/span&gt;
    AtomicUpdateProcessorFactory factory = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AtomicUpdateProcessorFactory();
    factory.inform(h.getCore());

    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; 10; i++) {
      &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; index = random().nextInt(5);
      &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; t = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;() {
        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void run() {
          AddUpdateCommand cmd = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AddUpdateCommand(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LocalSolrQueryRequest(h.getCore(),
              &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ModifiableSolrParams()
                  .add(&lt;span class=&quot;code-quote&quot;&gt;&quot;processor&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;atomic&quot;&lt;/span&gt;)
                  .add(&lt;span class=&quot;code-quote&quot;&gt;&quot;atomic.cat&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;add&quot;&lt;/span&gt;)
                  .add(&lt;span class=&quot;code-quote&quot;&gt;&quot;atomic.int_i&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;inc&quot;&lt;/span&gt;)
                  .add(&lt;span class=&quot;code-quote&quot;&gt;&quot;commit&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;)

          ));

          cmd.solrDoc = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SolrInputDocument();
          cmd.solrDoc.addField(&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;, 10); &lt;span class=&quot;code-comment&quot;&gt;//hardcoded id=2
&lt;/span&gt;          cmd.solrDoc.addField(&lt;span class=&quot;code-quote&quot;&gt;&quot;cat&quot;&lt;/span&gt;, strings[index]);
          cmd.solrDoc.addField(&lt;span class=&quot;code-quote&quot;&gt;&quot;int_i&quot;&lt;/span&gt;, index);

          &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            factory.getInstance(cmd.getReq(), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SolrQueryResponse(),
                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DistributedUpdateProcessor(cmd.getReq(), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SolrQueryResponse(),
                    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RunUpdateProcessor(cmd.getReq(), &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;))).processAdd(cmd);
          } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException e) {
          }
        }
      };
      threads.add(t);
      t.start();
      finalCount += index; &lt;span class=&quot;code-comment&quot;&gt;//int_i
&lt;/span&gt;    }

    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; thread: threads) thread.join();

    assertU(commit());

    assertQ(&lt;span class=&quot;code-quote&quot;&gt;&quot;Check the total number of docs&quot;&lt;/span&gt;,
        req(&lt;span class=&quot;code-quote&quot;&gt;&quot;q&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;id:10&quot;&lt;/span&gt;), &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-comment&quot;&gt;//result[@numFound=1]&quot;&lt;/span&gt;);
&lt;/span&gt;

    StringJoiner queryString = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringJoiner(&lt;span class=&quot;code-quote&quot;&gt;&quot; OR &quot;&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; string: strings) {
      queryString.add(string);
    }

    assertQ(&lt;span class=&quot;code-quote&quot;&gt;&quot;Check the total number of docs&quot;&lt;/span&gt;,
        req(&lt;span class=&quot;code-quote&quot;&gt;&quot;q&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;cat:(&quot;&lt;/span&gt; + queryString.toString()+&lt;span class=&quot;code-quote&quot;&gt;&quot;)&quot;&lt;/span&gt;)
        , &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-comment&quot;&gt;//result[@numFound=1]&quot;&lt;/span&gt;);
&lt;/span&gt;
    assertQ(&lt;span class=&quot;code-quote&quot;&gt;&quot;Check the total number of docs&quot;&lt;/span&gt;,
        req(&lt;span class=&quot;code-quote&quot;&gt;&quot;q&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;int_i:[* TO &quot;&lt;/span&gt; + finalCount+&lt;span class=&quot;code-quote&quot;&gt;&quot;]&quot;&lt;/span&gt;)
        , &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-comment&quot;&gt;//result[@numFound=1]&quot;&lt;/span&gt;);
&lt;/span&gt;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;significant changes:&lt;/p&gt;

&lt;p&gt;cat:(A OR B OR C OR D) // proper parenthesized OR seperated query terms&lt;br/&gt;
int_i:&lt;span class=&quot;error&quot;&gt;&amp;#91;* to max_possible_sum&amp;#93;&lt;/span&gt; // range query for int_i, practically 0 to max_possible_sum&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    StringJoiner queryString = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringJoiner(&lt;span class=&quot;code-quote&quot;&gt;&quot; OR &quot;&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; string: strings) {
      queryString.add(string);
    }
    assertQ(&lt;span class=&quot;code-quote&quot;&gt;&quot;Check the total number of docs&quot;&lt;/span&gt;,
        req(&lt;span class=&quot;code-quote&quot;&gt;&quot;q&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;cat:(&quot;&lt;/span&gt; + queryString.toString()+&lt;span class=&quot;code-quote&quot;&gt;&quot;)&quot;&lt;/span&gt;)
        , &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-comment&quot;&gt;//result[@numFound=1]&quot;&lt;/span&gt;);
&lt;/span&gt;    assertQ(&lt;span class=&quot;code-quote&quot;&gt;&quot;Check the total number of docs&quot;&lt;/span&gt;,
        req(&lt;span class=&quot;code-quote&quot;&gt;&quot;q&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;int_i:[* TO &quot;&lt;/span&gt; + finalCount+&lt;span class=&quot;code-quote&quot;&gt;&quot;]&quot;&lt;/span&gt;)
        , &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-comment&quot;&gt;//result[@numFound=1]&quot;&lt;/span&gt;);&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the thought process for the above is atleast one of the threads should execute for multiple seeds and multiple test configurations, heavy or light. This is the best I got, please let me know if anything else can be done in this regard. I understand we are approaching 7.0 release and we have this fixed in later version.&lt;/p&gt;</comment>
                            <comment id="16326871" author="sarkaramrit2@gmail.com" created="Tue, 16 Jan 2018 08:35:38 +0000"  >&lt;p&gt;Improvements listed in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11311&quot; title=&quot;Improving AtomicUpdateProcessorFactoryTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11311&quot;&gt;&lt;del&gt;SOLR-11311&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16408196" author="jira-bot" created="Wed, 21 Mar 2018 16:35:43 +0000"  >&lt;p&gt;Commit eb8a5a882f879a51389b5d43f74f3aceac9e68c9 in lucene-solr&apos;s branch refs/heads/branch_7_3 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=romseygeek&quot; class=&quot;user-hover&quot; rel=&quot;romseygeek&quot;&gt;romseygeek&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=eb8a5a8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=eb8a5a8&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10734&quot; title=&quot;Multithreaded test/support for AtomicURP broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10734&quot;&gt;&lt;del&gt;SOLR-10734&lt;/del&gt;&lt;/a&gt;: Make this test an AwaitsFix again, it fails nearly all the time&lt;/p&gt;</comment>
                            <comment id="16415319" author="shalinmangar" created="Tue, 27 Mar 2018 09:30:47 +0000"  >&lt;p&gt;This patch fixes the test failures. The problem was that the assert in question tried to query for multiple terms on the &quot;cat&quot; field but the terms were not inside a parenthesis. So only the first term was queried against the &quot;cat&quot; field and the rest were queried against the default search field. Sometimes, the random term selection for the atomic updates would skip the first term entirely and then the query would not match any docs thereby failing the assert.&lt;/p&gt;

&lt;p&gt;Edit &amp;#8211; I see that Amrit had already spotted the problem and provided a fix. Serves me right for not reading all the comments in this issue before debugging &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16415326" author="jira-bot" created="Tue, 27 Mar 2018 09:35:30 +0000"  >&lt;p&gt;Commit 64c110c58d04663d4aa5d3b1dfa54e9104a2e625 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=64c110c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=64c110c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10734&quot; title=&quot;Multithreaded test/support for AtomicURP broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10734&quot;&gt;&lt;del&gt;SOLR-10734&lt;/del&gt;&lt;/a&gt;: Fix Multithreaded test/support for AtomicURP&lt;/p&gt;</comment>
                            <comment id="16415327" author="jira-bot" created="Tue, 27 Mar 2018 09:37:25 +0000"  >&lt;p&gt;Commit bbf48c9440facd43d42c5ca738302b1e68f96f4b in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=bbf48c9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=bbf48c9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10734&quot; title=&quot;Multithreaded test/support for AtomicURP broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10734&quot;&gt;&lt;del&gt;SOLR-10734&lt;/del&gt;&lt;/a&gt;: Fix Multithreaded test/support for AtomicURP&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 64c110c)&lt;/p&gt;</comment>
                            <comment id="16415616" author="shalinmangar" created="Tue, 27 Mar 2018 13:33:21 +0000"  >&lt;p&gt;Re-opening because there are new test failures.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://jenkins.thetaphi.de/job/Lucene-Solr-7.x-MacOSX/539/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jenkins.thetaphi.de/job/Lucene-Solr-7.x-MacOSX/539/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16415706" author="jira-bot" created="Tue, 27 Mar 2018 14:23:16 +0000"  >&lt;p&gt;Commit 89e337ed3d760d07ceab690dde05f47200ea0ff9 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=89e337e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=89e337e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10734&quot; title=&quot;Multithreaded test/support for AtomicURP broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10734&quot;&gt;&lt;del&gt;SOLR-10734&lt;/del&gt;&lt;/a&gt;: Marking test with BadApple once again until the new failures can be fixed&lt;/p&gt;</comment>
                            <comment id="16415707" author="jira-bot" created="Tue, 27 Mar 2018 14:23:43 +0000"  >&lt;p&gt;Commit f8971f9a0d24a58f4c32f77ab6d34dd4406b649f in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=f8971f9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=f8971f9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10734&quot; title=&quot;Multithreaded test/support for AtomicURP broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10734&quot;&gt;&lt;del&gt;SOLR-10734&lt;/del&gt;&lt;/a&gt;: Marking test with BadApple once again until the new failures can be fixed&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 89e337e)&lt;/p&gt;</comment>
                            <comment id="16416130" author="shalinmangar" created="Tue, 27 Mar 2018 19:29:23 +0000"  >&lt;p&gt;The latest test failure indicates that there is a genuine bug here. After adding some debug logging, I see that the test fails because the value of &lt;tt&gt;int_i&lt;/tt&gt; in the document is different from what the test expects if and only if there is a version conflict reported in the logs.&lt;/p&gt;</comment>
                            <comment id="16416180" author="shalinmangar" created="Tue, 27 Mar 2018 20:21:56 +0000"  >&lt;p&gt;Attached: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10734&quot; title=&quot;Multithreaded test/support for AtomicURP broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10734&quot;&gt;&lt;del&gt;SOLR-10734&lt;/del&gt;&lt;/a&gt;-fix2.patch&lt;/p&gt;

&lt;p&gt;There were two separate bugs here, one rare and the other more common:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Common: By the time a version conflict is reported, the SolrInputDocument inside the AddUpdateCommand is already modified to be a full document i.e. it has no atomic update command anymore. So when we try to update the same AddUpdateCommand with the new version, it ends up overwriting the older document in the index. The fix was to keep a reference to the atomic updates and re-apply them on a version conflict.&lt;/li&gt;
	&lt;li&gt;Rare: The processor sets the version on the document only if a version is returned by VersionInfo,lookupVersion. Since the default version is 0 i.e. no constraints, two different updates can race and get a null version thereby overwriting each other. The fix is to set version to -1 if VersionInfo,lookupVersion returns null.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I beasted this test 100 times and it passes consistently where as earlier it used to fail 1/5 times with the right seed.&lt;/p&gt;</comment>
                            <comment id="16416924" author="shalinmangar" created="Wed, 28 Mar 2018 07:02:11 +0000"  >&lt;p&gt;Attached: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10734&quot; title=&quot;Multithreaded test/support for AtomicURP broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10734&quot;&gt;&lt;del&gt;SOLR-10734&lt;/del&gt;&lt;/a&gt;-fix2.patch&lt;/p&gt;

&lt;p&gt;The last patch had a bug. It was not sufficient to only re-apply the atomic updates because the full document will have other fields that may also be out-of-date. So this patch clones the original document and retries adding with the new version. I&apos;ll commit this shortly.&lt;/p&gt;</comment>
                            <comment id="16416929" author="jira-bot" created="Wed, 28 Mar 2018 07:11:07 +0000"  >&lt;p&gt;Commit ab325062435726f31cce6176bf5ed881f44973bb in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=ab32506&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=ab32506&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10734&quot; title=&quot;Multithreaded test/support for AtomicURP broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10734&quot;&gt;&lt;del&gt;SOLR-10734&lt;/del&gt;&lt;/a&gt;: AtomicUpdateRequestProcessor can cause wrong/old values to be set under concurrent updates for the same document. Multithreaded test for AtomicUpdateRequestProcessor was also beefed up and fixed.&lt;/p&gt;</comment>
                            <comment id="16416937" author="jira-bot" created="Wed, 28 Mar 2018 07:14:43 +0000"  >&lt;p&gt;Commit 8e06decceb4444dd302396614cc6f6582384780b in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=8e06dec&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=8e06dec&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10734&quot; title=&quot;Multithreaded test/support for AtomicURP broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10734&quot;&gt;&lt;del&gt;SOLR-10734&lt;/del&gt;&lt;/a&gt;: AtomicUpdateRequestProcessor can cause wrong/old values to be set under concurrent updates for the same document. Multithreaded test for AtomicUpdateRequestProcessor was also beefed up and fixed.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit ab32506)&lt;/p&gt;</comment>
                            <comment id="16416946" author="shalinmangar" created="Wed, 28 Mar 2018 07:19:45 +0000"  >&lt;p&gt;Oops, my fix is still not right. We need to deep copy the original solr document each time we retry or else we&apos;ll end up with the same overwriting bug on subsequent attempts.&lt;/p&gt;</comment>
                            <comment id="16416953" author="jira-bot" created="Wed, 28 Mar 2018 07:26:42 +0000"  >&lt;p&gt;Commit 3be8cfb356acef9bd5673a16d94938d13a2f27f9 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=3be8cfb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=3be8cfb&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10734&quot; title=&quot;Multithreaded test/support for AtomicURP broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10734&quot;&gt;&lt;del&gt;SOLR-10734&lt;/del&gt;&lt;/a&gt;: Clone the original solr document each time we retry&lt;/p&gt;</comment>
                            <comment id="16416955" author="jira-bot" created="Wed, 28 Mar 2018 07:27:25 +0000"  >&lt;p&gt;Commit 3123218c30960bbb8b44bc408bdef3111cb8c048 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=3123218&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=3123218&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10734&quot; title=&quot;Multithreaded test/support for AtomicURP broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10734&quot;&gt;&lt;del&gt;SOLR-10734&lt;/del&gt;&lt;/a&gt;: Clone the original solr document each time we retry&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 3be8cfb)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13099391">SOLR-11311</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12916551" name="SOLR-10734-fix2.patch" size="3460" author="shalin" created="Wed, 28 Mar 2018 06:58:52 +0000"/>
                            <attachment id="12916458" name="SOLR-10734-fix2.patch" size="4385" author="shalin" created="Tue, 27 Mar 2018 20:14:52 +0000"/>
                            <attachment id="12916364" name="SOLR-10734.patch" size="2299" author="shalin" created="Tue, 27 Mar 2018 09:27:34 +0000"/>
                            <attachment id="12880347" name="SOLR-10734.patch" size="1531" author="sarkaramrit2@gmail.com" created="Fri, 4 Aug 2017 04:46:04 +0000"/>
                            <attachment id="12879173" name="SOLR-10734.patch" size="1139" author="sarkaramrit2@gmail.com" created="Thu, 27 Jul 2017 13:46:25 +0000"/>
                            <attachment id="12872662" name="SOLR-10734.patch" size="2883" author="sarkaramrit2@gmail.com" created="Mon, 12 Jun 2017 08:06:33 +0000"/>
                            <attachment id="12870565" name="Screen Shot 2017-05-31 at 4.50.23 PM.png" size="746550" author="sarkaramrit2@gmail.com" created="Wed, 31 May 2017 11:33:40 +0000"/>
                            <attachment id="12869599" name="log-snippet" size="121780" author="sarkaramrit2@gmail.com" created="Wed, 24 May 2017 08:20:03 +0000"/>
                            <attachment id="12880350" name="testMaster_2500" size="96483" author="sarkaramrit2@gmail.com" created="Fri, 4 Aug 2017 04:44:43 +0000"/>
                            <attachment id="12880349" name="testResults7_10" size="48107" author="sarkaramrit2@gmail.com" created="Fri, 4 Aug 2017 04:45:02 +0000"/>
                            <attachment id="12880348" name="testResultsMaster_10" size="52740" author="sarkaramrit2@gmail.com" created="Fri, 4 Aug 2017 04:45:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 33 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3fd13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>