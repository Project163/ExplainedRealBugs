<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:23:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-10836] TextLogisticRegression parser (and others) assume non-empty index.</title>
                <link>https://issues.apache.org/jira/browse/SOLR-10836</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;TextLogisticRegressionQParserPlugin, IGainTermsQParserPlugin and SignificantTermsQParserPlugin are similarly affected:&lt;/p&gt;

&lt;p&gt;finish() contains this line of code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Terms terms = MultiFields.getFields(searcher.getIndexReader()).terms(trainingParams.feature);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Instead I think it should be this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Terms terms = ((SolrIndexSearcher)searcher).getSlowAtomicReader().terms(trainingParams.feature);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;MultiFields can take some time to build and Solr (via SlowAtomicReader) has already done this work.&lt;/p&gt;

&lt;p&gt;In addition, the code assumes Terms is non-null when in fact it will be null if there&apos;s no data.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13077871">SOLR-10836</key>
            <summary>TextLogisticRegression parser (and others) assume non-empty index.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dsmiley">David Smiley</assignee>
                                    <reporter username="dsmiley">David Smiley</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Jun 2017 03:57:00 +0000</created>
                <updated>Sat, 8 Jun 2019 15:22:12 +0000</updated>
                            <resolved>Sat, 10 Jun 2017 04:26:31 +0000</resolved>
                                                    <fixVersion>6.7</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16042723" author="gerlowskija" created="Thu, 8 Jun 2017 13:54:45 +0000"  >&lt;p&gt;Saved you the trouble and ran tests on your change.  All tests pass locally.&lt;/p&gt;</comment>
                            <comment id="16042848" author="dsmiley" created="Thu, 8 Jun 2017 15:23:10 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gerlowskija&quot; class=&quot;user-hover&quot; rel=&quot;gerlowskija&quot;&gt;gerlowskija&lt;/a&gt;; I&apos;ve done this same already as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-7500&quot; title=&quot;Remove LeafReader.fields()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-7500&quot;&gt;&lt;del&gt;LUCENE-7500&lt;/del&gt;&lt;/a&gt; and updated some similarly affected QParserPlugins as well.&lt;/p&gt;

&lt;p&gt;One problem I see in this code is that it assumes the Terms instance it gets back is not null.  But it can be if the field has no indexed data.  This might in practice not be a big deal but nonetheless it&apos;s wrong.&lt;/p&gt;

&lt;p&gt;As an aside, I&apos;ve been using Kotlin Lang on some other projects and I love that null-ness is part of the type system.  It makes bugs like this very rare.&lt;/p&gt;</comment>
                            <comment id="16044738" author="dsmiley" created="Fri, 9 Jun 2017 17:33:21 +0000"  >&lt;p&gt;The attached patch is for several parsers that had the same code.  I also fixed the null Terms bug... I should probably reclassify this issue as a bug fix.&lt;/p&gt;</comment>
                            <comment id="16045361" author="jira-bot" created="Sat, 10 Jun 2017 03:39:31 +0000"  >&lt;p&gt;Commit 5c781d5679716dc46a28015c03ef9bcae824e58c in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=5c781d5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=5c781d5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10836&quot; title=&quot;TextLogisticRegression parser (and others) assume non-empty index.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10836&quot;&gt;&lt;del&gt;SOLR-10836&lt;/del&gt;&lt;/a&gt;: igain, significantTerms, and tlogit assumed existing terms&lt;/p&gt;</comment>
                            <comment id="16045366" author="jira-bot" created="Sat, 10 Jun 2017 03:56:05 +0000"  >&lt;p&gt;Commit a08bdf572ba4450d153e36f1db2bf62f35a061e8 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a08bdf5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a08bdf5&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10836&quot; title=&quot;TextLogisticRegression parser (and others) assume non-empty index.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10836&quot;&gt;&lt;del&gt;SOLR-10836&lt;/del&gt;&lt;/a&gt;: igain, significantTerms, and tlogit assumed existing terms&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 5c781d5)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12872072" name="SOLR-10836.patch" size="1302" author="gerlowskija" created="Thu, 8 Jun 2017 13:54:45 +0000"/>
                            <attachment id="12872293" name="SOLR_10836_use_SolrIndexSearcher_cached_MultiFields_instead_of_recreating.patch" size="3988" author="dsmiley" created="Fri, 9 Jun 2017 17:33:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 23 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3fyn3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>