<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:41:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-11706] JSON FacetModule can&apos;t compute stats (min,max,etc...) on multivalued fields</title>
                <link>https://issues.apache.org/jira/browse/SOLR-11706</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;While trying to write some tests demonstrating equivalences between the StatsComponent and the JSON FacetModule i discovered that the FacetModules stat functions (min, max, etc...) don&apos;t seem to work on multivalued fields.&lt;/p&gt;

&lt;p&gt;Based on the stack traces, i gather the problem is because the FacetModule seems to rely exclusively on using the &quot;Function&quot; parsers to get a value source &amp;#8211; apparently w/o any other method of accumulating numeric stats from multivalued (numeric) DocValues?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13121740">SOLR-11706</key>
            <summary>JSON FacetModule can&apos;t compute stats (min,max,etc...) on multivalued fields</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="munendrasn">Munendra S N</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Nov 2017 21:45:18 +0000</created>
                <updated>Sun, 29 Dec 2019 20:51:38 +0000</updated>
                            <resolved>Sat, 7 Dec 2019 06:19:10 +0000</resolved>
                                                    <fixVersion>8.4</fixVersion>
                                    <component>Facet Module</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16271585" author="hossman" created="Wed, 29 Nov 2017 21:49:24 +0000"  >&lt;p&gt;Trivial steps to reproduce...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;bin/solr -e techproducts
...
curl -H &apos;Content-Type: application/json&apos; --data-binary &apos;[{&quot;id&quot;:&quot;x&quot;,&quot;foo_is&quot;:42,&quot;foo_is&quot;:666},{&quot;id&quot;:&quot;y&quot;,&quot;foo_is&quot;:55}&apos;] &apos;http://localhost:8983/solr/techproducts/update?commit=true&apos;
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that &lt;tt&gt;stats.field&lt;/tt&gt; has no problems with &lt;tt&gt;foo_is&lt;/tt&gt;...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;curl &apos;http://localhost:8983/solr/techproducts/query?&amp;amp;stats=true&amp;amp;stats.field=foo_is&amp;amp;q=*:*&amp;amp;rows=0&amp;amp;omitHeader=true&apos;
{
  &quot;response&quot;:{&quot;numFound&quot;:34,&quot;start&quot;:0,&quot;docs&quot;:[]
  },
  &quot;stats&quot;:{
    &quot;stats_fields&quot;:{
      &quot;foo_is&quot;:{
        &quot;min&quot;:42.0,
        &quot;max&quot;:666.0,
        &quot;count&quot;:3,
        &quot;missing&quot;:32,
        &quot;sum&quot;:763.0,
        &quot;sumOfSquares&quot;:448345.0,
        &quot;mean&quot;:254.33333333333334,
        &quot;stddev&quot;:356.5730406709589}}}}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But the JSON FacetModule can&apos;t compute similar stats...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;curl http://localhost:8983/solr/techproducts/query -d &apos;q=*:*&amp;amp;rows=0&amp;amp;omitHeader=true&amp;amp;json.facet=
{ min:&quot;min(foo_is)&quot;, max:&quot;max(foo_is)&quot;, sum:&quot;sum(foo_is)&quot;,
  // count and missing not supported, see SOLR-11695
  sumOfSquares:&quot;sumsq(foo_is)&quot;, mean:&quot;avg(foo_is)&quot;, stddev:&quot;stddev(foo_is)&quot;
}&apos;
{
  &quot;error&quot;:{
    &quot;metadata&quot;:[
      &quot;error-class&quot;,&quot;org.apache.solr.common.SolrException&quot;,
      &quot;root-error-class&quot;,&quot;org.apache.solr.common.SolrException&quot;],
    &quot;msg&quot;:&quot;can not use FieldCache on multivalued field: foo_is&quot;,
    &quot;code&quot;:400}}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;stack trace from logs...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR - 2017-11-29 21:40:30.417; [   x:techproducts] org.apache.solr.common.SolrException; org.apache.solr.common.SolrException: can not use FieldCache on multivalued field: foo_is
        at org.apache.solr.schema.SchemaField.checkFieldCacheSource(SchemaField.java:190)
        at org.apache.solr.schema.IntPointField.getValueSource(IntPointField.java:149)
        at org.apache.solr.search.FunctionQParser.parseValueSource(FunctionQParser.java:384)
        at org.apache.solr.search.FunctionQParser.parseValueSource(FunctionQParser.java:237)
        at org.apache.solr.search.ValueSourceParser$86.parse(ValueSourceParser.java:977)
        at org.apache.solr.search.FunctionQParser.parseAgg(FunctionQParser.java:421)
        at org.apache.solr.search.facet.FacetParser.parseStringStat(FacetRequest.java:429)
        at org.apache.solr.search.facet.FacetParser.parseStringFacetOrStat(FacetRequest.java:422)
        at org.apache.solr.search.facet.FacetParser.parseFacetOrStat(FacetRequest.java:352)
        at org.apache.solr.search.facet.FacetParser.parseSubs(FacetRequest.java:332)
        at org.apache.solr.search.facet.FacetTopParser.parse(FacetRequest.java:601)
        at org.apache.solr.search.facet.FacetTopParser.parse(FacetRequest.java:590)
        at org.apache.solr.search.facet.FacetModule.prepare(FacetModule.java:102)
        at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:269)
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:177)
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:2484)
 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;(some other testing suggests that this problem exists regardless of whether TrieInt or IntPoint fields are used ... i didn&apos;t explicitly test float/long/double/etc... but based on a quick glance at the code i don&apos;t see any reason why they wouldn&apos;t all be equally affected)&lt;/p&gt;</comment>
                            <comment id="16271695" author="yseeley@gmail.com" created="Wed, 29 Nov 2017 22:44:49 +0000"  >&lt;p&gt;Perhaps a bug at the user level, but more of a &quot;not implemented yet&quot; at the development level.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Based on the stack traces, i gather the problem is because the FacetModule seems to rely exclusively on using the &quot;Function&quot; parsers to get a value source &#8211; apparently w/o any other method of accumulating numeric stats from multivalued (numeric) DocValues?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That was the original reason.  As part of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11317&quot; title=&quot;Typed numeric support for min/max aggregations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11317&quot;&gt;&lt;del&gt;SOLR-11317&lt;/del&gt;&lt;/a&gt; I added a bit of a hacky way to support a function or a bare field name (w/o trying to make the field name into a value source).&lt;br/&gt;
min/max parsers currently use this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    addParser(&lt;span class=&quot;code-quote&quot;&gt;&quot;agg_min&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ValueSourceParser() {
      @Override
      &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ValueSource parse(FunctionQParser fp) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; SyntaxError {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MinMaxAgg(&lt;span class=&quot;code-quote&quot;&gt;&quot;min&quot;&lt;/span&gt;, fp.parseValueSource(FunctionQParser.FLAG_DEFAULT | FunctionQParser.FLAG_USE_FIELDNAME_SOURCE));
      }
    });
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now in MinMaxAgg, we deal with fields separately from functions and throw an exception for a multivalued field since there is no implementation yet:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (sf.multiValued() || sf.getType().multiValuedFieldCache()) {
        vs = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SolrException(SolrException.ErrorCode.BAD_REQUEST, &lt;span class=&quot;code-quote&quot;&gt;&quot;min/max aggregations can&apos;t be used on multi-valued field &quot;&lt;/span&gt; + field);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We could either:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;use the same strategy for all the stats (fine if we only care about multi-valued fields and not multi-valued functions)&lt;/li&gt;
	&lt;li&gt;fix ValueSource so that it can be truly multi-valued and use that&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16271804" author="hossman" created="Wed, 29 Nov 2017 23:41:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;Perhaps a bug at the user level, but more of a &quot;not implemented yet&quot; at the development level.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Well ... presumably, in the absence of any official documentation (yet), you would understand if people trusted that the things you wrote on your own website would be accurate since you created JSON Faceting &amp;#8211; and &lt;a href=&quot;http://yonik.com/solr-facet-functions/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;you&apos;ve explicitly said&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Numeric aggregation functions such as avg can be on any numeric field, or on another function of multiple numeric fields.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There&apos;s a pretty big difference between &quot;any numeric field&quot; and &quot;any single valued numeric field&quot;&lt;/p&gt;

&lt;p&gt;...even taking into account that was written in 2015 (maybe?) before things like IntPointField existed &amp;#8211; it doesn&apos;t seem to work with any multivalued trie fields either.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Now in MinMaxAgg, we deal with fields separately from functions....&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not really following what your point about MinMaxAgg is.  IIUC you&apos;re saying: &quot;None of the numeric aggs work with multivalued fields, but min &amp;amp; max don&apos;t work for a diff reason (and fail with a slightly diff error message) then things like &apos;sum&apos;&quot; ?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;use the same strategy for all the stats (fine if we only care about multi-valued fields and not multi-valued functions)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not really sure what it would mean to &quot;care about ... multi-valued functions&quot; &amp;#8211; AFAIK we&apos;ve never had any multivalued functions? .. are you just hypothosising that maybe someday we could?&lt;/p&gt;


&lt;hr /&gt;

&lt;p&gt;FWIW: The attached patch includes some trivial additions to TestJsonFacets to demonstrate some of the diff types of failures that can happen when runing to use min or sum on multivalued fields, as well as some suick and dirty attempts to generalize StatsComponentTest to show equivilences with json.facet (i originally hoped to flesh the StatsComponentTest changes out so the whole testcase demonstrated this across the board, but ran into this problem so quickly only one test method has been updated)&lt;/p&gt;</comment>
                            <comment id="16272091" author="yseeley@gmail.com" created="Thu, 30 Nov 2017 03:07:55 +0000"  >&lt;p&gt;I was just trying to point out that it&apos;s a &quot;yeah, that&apos;s not implemented yet&quot; rather than &quot;what the heck is wrong... I&apos;ll dig into it&quot; situation.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Well ... presumably, in the absence of any official documentation (yet)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Here&apos;s what we have so far:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/view/L/view/Lucene/job/Solr-reference-guide-master/javadoc/json-facet-api.html#AggregationFunctions&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/L/view/Lucene/job/Solr-reference-guide-master/javadoc/json-facet-api.html#AggregationFunctions&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I&apos;m not really following what your point about MinMaxAgg is.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If one goes about implementing support for avg(multivalued_field), then the first issue one will run up against is that the function parser will fail because of the generic value source check for single valued fields.  min() and max() have already gotten around this issue, and I was pointing out how other stats could do the same thing.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I&apos;m not really sure what it would mean to &quot;care about ... multi-valued functions&quot; &#8211; AFAIK we&apos;ve never had any multivalued functions? .. are you just hypothosising that maybe someday we could?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, IMO we already need them.  There are multiple ways to handle multi-valued fields and we don&apos;t support that well anywhere.&lt;/p&gt;</comment>
                            <comment id="16272999" author="hossman" created="Thu, 30 Nov 2017 17:26:28 +0000"  >&lt;blockquote&gt;&lt;p&gt;... I was pointing out how other stats could do the same thing.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Oh, oh ... i&apos;m sorry, i understand now:  Some of the ground work has already been laid in MinMax, and similar work could be done in other aggs.  Got it.&lt;/p&gt;</comment>
                            <comment id="16278002" author="dsmiley" created="Tue, 5 Dec 2017 04:38:44 +0000"  >&lt;p&gt;I just want to point out that &quot;multi-valued functions&quot; in fact exist &amp;#8211; &lt;tt&gt;org.apache.lucene.queries.function.valuesource.MultiValueSource&lt;/tt&gt;.  I&apos;m not a fan &amp;#8211; the API feels awkward to me, but there it is.  We pretty much only &lt;em&gt;use&lt;/em&gt; it today for some legacy-ish spatial stuff.  I&apos;d prefer this interface and some of the related methods on FunctionValues that take arrays be deprecated out of Lucene.&lt;/p&gt;</comment>
                            <comment id="16278490" author="yseeley@gmail.com" created="Tue, 5 Dec 2017 12:50:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;d prefer this interface and some of the related methods on FunctionValues that take arrays be deprecated out of Lucene.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yeah, I agree. I&apos;ve always tried to avoid building on the array based methods because it felt like we needed something better for multiValued fields &amp;amp; functions.&lt;/p&gt;</comment>
                            <comment id="16288084" author="jira-bot" created="Tue, 12 Dec 2017 19:03:07 +0000"  >&lt;p&gt;Commit 53f2d4aa3aa171d5f37284eba9ca56d987729796 in lucene-solr&apos;s branch refs/heads/branch_7x from Chris Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=53f2d4a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=53f2d4a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Beef up testing of json.facet &apos;refine:simple&apos; when dealing with &apos;Long Tail&apos; terms&lt;/p&gt;

&lt;p&gt;In an attempt to get more familiar with json.facet refinement, I set out to try and refactor/generalize/clone&lt;br/&gt;
some of the existing facet.pivot refinement tests to assert that json.facet could produce the same results.&lt;br/&gt;
This test is a baby step towards doing that: Cloning DistributedFacetPivotLongTailTest into&lt;br/&gt;
DistributedFacetSimpleRefinementLongTailTest (with shared index building code).&lt;/p&gt;

&lt;p&gt;Along the way, I learned that the core logic of &apos;refine:simple&apos; is actually quite different then how facet.field&lt;br/&gt;
&amp;amp; facet.pivot work (see discussion in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11733&quot; title=&quot;add an option make json.facet refinement more &amp;quot;optimistic&amp;quot; like facet.field/facet.pivot so that long tail have a change to bubble up&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11733&quot;&gt;SOLR-11733&lt;/a&gt;), so they do &lt;b&gt;NOT&lt;/b&gt; produce the same results in many &quot;Long Tail&quot;&lt;br/&gt;
Sitautions.  As a result, many of the logic/assertions inDistributedFacetSimpleRefinementLongTailTest are very&lt;br/&gt;
differnet then their counter parts in DistributedFacetPivotLongTailTest, with detailed explanations in comments.&lt;/p&gt;

&lt;p&gt;Hopefully this test will prove useful down the road to anyone who might want to compare/contrast facet.pivot&lt;br/&gt;
with json.facet, and to prevent regressions in &apos;refine:simple&apos; if/when we add more complex refinement&lt;br/&gt;
approaches in the future.&lt;/p&gt;

&lt;p&gt;There are also a few TODOs in the test related to some other small discrepencies between json.facet and&lt;br/&gt;
stats.field that I opened along the way, indicating where the tests should be modified once those issues are&lt;br/&gt;
addressed in json.facet...&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11706&quot; title=&quot;JSON FacetModule can&amp;#39;t compute stats (min,max,etc...) on multivalued fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11706&quot;&gt;&lt;del&gt;SOLR-11706&lt;/del&gt;&lt;/a&gt;: support for multivalued numeric fields in stats&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11695&quot; title=&quot;JSON FacetModule needs equivilents for StatsComponent&amp;#39;s &amp;quot;count&amp;quot; and &amp;quot;missing&amp;quot; features&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11695&quot;&gt;&lt;del&gt;SOLR-11695&lt;/del&gt;&lt;/a&gt;: support for &apos;missing()&apos; &amp;amp; &apos;num_vals()&apos; (aka: &apos;count&apos; from stats.field) numeric stats&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11725&quot; title=&quot;json.facet&amp;#39;s stddev() function should be changed to use the &amp;quot;Corrected sample stddev&amp;quot; formula&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11725&quot;&gt;&lt;del&gt;SOLR-11725&lt;/del&gt;&lt;/a&gt;: switch from &apos;uncorrected stddev&apos; to &apos;corrected stddev&apos;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;(cherry picked from commit 2990c88a927213177483b61fe8e6971df04fc3ed)&lt;/p&gt;</comment>
                            <comment id="16288088" author="jira-bot" created="Tue, 12 Dec 2017 19:03:20 +0000"  >&lt;p&gt;Commit 2990c88a927213177483b61fe8e6971df04fc3ed in lucene-solr&apos;s branch refs/heads/master from Chris Hostetter&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=2990c88&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=2990c88&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Beef up testing of json.facet &apos;refine:simple&apos; when dealing with &apos;Long Tail&apos; terms&lt;/p&gt;

&lt;p&gt;In an attempt to get more familiar with json.facet refinement, I set out to try and refactor/generalize/clone&lt;br/&gt;
some of the existing facet.pivot refinement tests to assert that json.facet could produce the same results.&lt;br/&gt;
This test is a baby step towards doing that: Cloning DistributedFacetPivotLongTailTest into&lt;br/&gt;
DistributedFacetSimpleRefinementLongTailTest (with shared index building code).&lt;/p&gt;

&lt;p&gt;Along the way, I learned that the core logic of &apos;refine:simple&apos; is actually quite different then how facet.field&lt;br/&gt;
&amp;amp; facet.pivot work (see discussion in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11733&quot; title=&quot;add an option make json.facet refinement more &amp;quot;optimistic&amp;quot; like facet.field/facet.pivot so that long tail have a change to bubble up&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11733&quot;&gt;SOLR-11733&lt;/a&gt;), so they do &lt;b&gt;NOT&lt;/b&gt; produce the same results in many &quot;Long Tail&quot;&lt;br/&gt;
Sitautions.  As a result, many of the logic/assertions inDistributedFacetSimpleRefinementLongTailTest are very&lt;br/&gt;
differnet then their counter parts in DistributedFacetPivotLongTailTest, with detailed explanations in comments.&lt;/p&gt;

&lt;p&gt;Hopefully this test will prove useful down the road to anyone who might want to compare/contrast facet.pivot&lt;br/&gt;
with json.facet, and to prevent regressions in &apos;refine:simple&apos; if/when we add more complex refinement&lt;br/&gt;
approaches in the future.&lt;/p&gt;

&lt;p&gt;There are also a few TODOs in the test related to some other small discrepencies between json.facet and&lt;br/&gt;
stats.field that I opened along the way, indicating where the tests should be modified once those issues are&lt;br/&gt;
addressed in json.facet...&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11706&quot; title=&quot;JSON FacetModule can&amp;#39;t compute stats (min,max,etc...) on multivalued fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11706&quot;&gt;&lt;del&gt;SOLR-11706&lt;/del&gt;&lt;/a&gt;: support for multivalued numeric fields in stats&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11695&quot; title=&quot;JSON FacetModule needs equivilents for StatsComponent&amp;#39;s &amp;quot;count&amp;quot; and &amp;quot;missing&amp;quot; features&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11695&quot;&gt;&lt;del&gt;SOLR-11695&lt;/del&gt;&lt;/a&gt;: support for &apos;missing()&apos; &amp;amp; &apos;num_vals()&apos; (aka: &apos;count&apos; from stats.field) numeric stats&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11725&quot; title=&quot;json.facet&amp;#39;s stddev() function should be changed to use the &amp;quot;Corrected sample stddev&amp;quot; formula&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11725&quot;&gt;&lt;del&gt;SOLR-11725&lt;/del&gt;&lt;/a&gt;: switch from &apos;uncorrected stddev&apos; to &apos;corrected stddev&apos;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16981752" author="munendrasn" created="Mon, 25 Nov 2019 17:55:41 +0000"  >&lt;p&gt; &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12987608/12987608_SOLR-11706.patch&quot; title=&quot;SOLR-11706.patch attached to SOLR-11706&quot;&gt;SOLR-11706.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;br/&gt;
This patch contains aggregation support on multi-valued fields.&lt;br/&gt;
These are the following aggregations included here: min, max, avg, min, max, sum, sumsq, stddev, variance. &lt;br/&gt;
&lt;tt&gt;percentile&lt;/tt&gt; doesn&apos;t yet have support for multi-valued fields (Probably will handle in separate issue)&lt;/p&gt;

&lt;p&gt;I have included &lt;tt&gt;TestJsonFacets&lt;/tt&gt; tests shared above but haven&apos;t included StatsComponentTest changes. This is because of following reasons:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;min/max for numeric fields in Stats is always double but in JSON facets, fieldType is respected&lt;/li&gt;
	&lt;li&gt;Value type varies for some aggregation. For example, countDistinct is long whereas unique aggregation value is int/long based on single-shard or multi-shard respectively &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11775&quot; title=&quot;json.facet can use inconsistent Long/Integer for &amp;quot;count&amp;quot; depending on shard count&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11775&quot;&gt;&lt;del&gt;SOLR-11775&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;corrected vs uncorrected stddev &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11725&quot; title=&quot;json.facet&amp;#39;s stddev() function should be changed to use the &amp;quot;Corrected sample stddev&amp;quot; formula&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11725&quot;&gt;&lt;del&gt;SOLR-11725&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12559&quot; title=&quot;FunctionQParser.FLAG_USE_FIELDNAME_SOURCE doesn&amp;#39;t work when subparsers are involved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12559&quot;&gt;&lt;del&gt;SOLR-12559&lt;/del&gt;&lt;/a&gt; is not resolved but I suppose that can be taken up separately/in next phase&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman&quot; class=&quot;user-hover&quot; rel=&quot;hossman&quot;&gt;hossman&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yseeley%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;yseeley@gmail.com&quot;&gt;yseeley@gmail.com&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkhl&quot; class=&quot;user-hover&quot; rel=&quot;mkhl&quot;&gt;mkhl&lt;/a&gt; could you please review this?&lt;br/&gt;
Let me know if Github PR is need&lt;/p&gt;</comment>
                            <comment id="16982190" author="lucenesolrqa" created="Tue, 26 Nov 2019 06:59:33 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Prechecks &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; test4tests &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch appears to include 2 new or modified test files. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; master Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Patch Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 17s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 17s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Release audit (RAT) &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 17s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Check forbidden APIs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 17s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Validate source patterns &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 17s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Other Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 46m 23s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; core in the patch failed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 51m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Reason &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Tests &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Failed junit tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; solr.search.facet.DistributedFacetSimpleRefinementLongTailTest &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11706&quot; title=&quot;JSON FacetModule can&amp;#39;t compute stats (min,max,etc...) on multivalued fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11706&quot;&gt;&lt;del&gt;SOLR-11706&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12986694/SOLR-11706.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12986694/SOLR-11706.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  compile  javac  unit  ratsources  checkforbiddenapis  validatesourcepatterns  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux lucene1-us-west 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-SOLR-Build/sourcedir/dev-tools/test-patch/lucene-solr-yetus-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 6c7a095f338 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; version: Apache Ant(TM) version 1.10.5 compiled on March 28 2019 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LTS &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; unit &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/603/artifact/out/patch-unit-solr_core.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/603/artifact/out/patch-unit-solr_core.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Test Results &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/603/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/603/testReport/&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: solr/core U: solr/core &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/603/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/603/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.7.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16982289" author="munendrasn" created="Tue, 26 Nov 2019 09:42:29 +0000"  >&lt;p&gt; &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12987608/12987608_SOLR-11706.patch&quot; title=&quot;SOLR-11706.patch attached to SOLR-11706&quot;&gt;SOLR-11706.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Fixes failing test when numeric fields doesn&apos;t have docvalues. Failures was because, long and integer field types return long value for min and max.&lt;/li&gt;
	&lt;li&gt;included StatsComponentTest changes from initial patch with some parts commented out.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16983152" author="munendrasn" created="Wed, 27 Nov 2019 04:00:54 +0000"  >&lt;p&gt; &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12987608/12987608_SOLR-11706.patch&quot; title=&quot;SOLR-11706.patch attached to SOLR-11706&quot;&gt;SOLR-11706.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;br/&gt;
Attaching the same patch to trigger build(which wasn&apos;t triggered last time)&lt;/p&gt;</comment>
                            <comment id="16983220" author="munendrasn" created="Wed, 27 Nov 2019 07:09:38 +0000"  >&lt;p&gt; &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12987608/12987608_SOLR-11706.patch&quot; title=&quot;SOLR-11706.patch attached to SOLR-11706&quot;&gt;SOLR-11706.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;br/&gt;
This includes &lt;tt&gt;percentile&lt;/tt&gt; aggregation. I have not added any test in StatsComponent to verify percentile aggregation for stats vs json facet as response format is different&lt;/p&gt;</comment>
                            <comment id="16983803" author="lucenesolrqa" created="Wed, 27 Nov 2019 18:29:46 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Prechecks &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; test4tests &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch appears to include 3 new or modified test files. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; master Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m  3s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Patch Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Release audit (RAT) &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Check forbidden APIs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Validate source patterns &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Other Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 46m 30s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; core in the patch passed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 50m 27s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11706&quot; title=&quot;JSON FacetModule can&amp;#39;t compute stats (min,max,etc...) on multivalued fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11706&quot;&gt;&lt;del&gt;SOLR-11706&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12986885/SOLR-11706.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12986885/SOLR-11706.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  compile  javac  unit  ratsources  checkforbiddenapis  validatesourcepatterns  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux lucene1-us-west 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-SOLR-Build/sourcedir/dev-tools/test-patch/lucene-solr-yetus-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / bed694ec881 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; version: Apache Ant(TM) version 1.10.5 compiled on March 28 2019 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LTS &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Test Results &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/605/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/605/testReport/&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: solr/core U: solr/core &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/605/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/605/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.7.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16985664" author="mkhludnev" created="Sun, 1 Dec 2019 20:03:19 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="16988481" author="jira-bot" created="Thu, 5 Dec 2019 05:30:47 +0000"  >&lt;p&gt;Commit 12e8cca6442e6c64a414d832b3982cc77354c6ad in lucene-solr&apos;s branch refs/heads/master from Munendra S N&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=12e8cca&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=12e8cca&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11706&quot; title=&quot;JSON FacetModule can&amp;#39;t compute stats (min,max,etc...) on multivalued fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11706&quot;&gt;&lt;del&gt;SOLR-11706&lt;/del&gt;&lt;/a&gt;: add support for aggregation on multivalued fields&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;min, max, sum, sumsq, avg, stddev, variance, percentile aggregations&lt;br/&gt;
  in JSON facets now supports multivalued fields&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16988485" author="jira-bot" created="Thu, 5 Dec 2019 05:41:44 +0000"  >&lt;p&gt;Commit 2d2f4b95212db921c4161e0a17f79114f865ba95 in lucene-solr&apos;s branch refs/heads/branch_8x from Munendra S N&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=2d2f4b9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=2d2f4b9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11706&quot; title=&quot;JSON FacetModule can&amp;#39;t compute stats (min,max,etc...) on multivalued fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11706&quot;&gt;&lt;del&gt;SOLR-11706&lt;/del&gt;&lt;/a&gt;: add support for aggregation on multivalued fields&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;min, max, sum, sumsq, avg, stddev, variance, percentile aggregations&lt;br/&gt;
  in JSON facets now supports multivalued fields&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16988638" author="jira-bot" created="Thu, 5 Dec 2019 10:17:59 +0000"  >&lt;p&gt;Commit 12e8cca6442e6c64a414d832b3982cc77354c6ad in lucene-solr&apos;s branch refs/heads/gradle-master from Munendra S N&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=12e8cca&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=12e8cca&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11706&quot; title=&quot;JSON FacetModule can&amp;#39;t compute stats (min,max,etc...) on multivalued fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11706&quot;&gt;&lt;del&gt;SOLR-11706&lt;/del&gt;&lt;/a&gt;: add support for aggregation on multivalued fields&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;min, max, sum, sumsq, avg, stddev, variance, percentile aggregations&lt;br/&gt;
  in JSON facets now supports multivalued fields&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16988780" author="munendrasn" created="Thu, 5 Dec 2019 13:04:45 +0000"  >&lt;p&gt;Reopening to address restructuring of the code&lt;/p&gt;</comment>
                            <comment id="16988844" author="munendrasn" created="Thu, 5 Dec 2019 14:13:04 +0000"  >&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12987608/12987608_SOLR-11706.patch&quot; title=&quot;SOLR-11706.patch attached to SOLR-11706&quot;&gt;SOLR-11706.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;The latest patch contains some refactoring.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;modify method names to reflect the functionality in stddev, variance&lt;/li&gt;
	&lt;li&gt;remove docIdSetIterator from &lt;tt&gt;DocValuesAcc&lt;/tt&gt; based on discussion in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-9081&quot; title=&quot;Make DocValuesIterator public&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-9081&quot;&gt;&lt;del&gt;LUCENE-9081&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
 &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jpountz&quot; class=&quot;user-hover&quot; rel=&quot;jpountz&quot;&gt;jpountz&lt;/a&gt;&#160; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkhl&quot; class=&quot;user-hover&quot; rel=&quot;mkhl&quot;&gt;mkhl&lt;/a&gt;&#160; could you please review?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16988858" author="jpountz" created="Thu, 5 Dec 2019 14:26:10 +0000"  >&lt;p&gt;&quot;exists&quot; doesn&apos;t carry the fact that it may only be called on increasing sequence of doc IDs, so I&apos;d rather call it &quot;advanceExact&quot; instead. Other than that +1.&lt;/p&gt;</comment>
                            <comment id="16988888" author="munendrasn" created="Thu, 5 Dec 2019 14:52:23 +0000"  >&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12987608/12987608_SOLR-11706.patch&quot; title=&quot;SOLR-11706.patch attached to SOLR-11706&quot;&gt;SOLR-11706.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Changed the method name to &lt;tt&gt;advanceExact&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16988891" author="jpountz" created="Thu, 5 Dec 2019 14:56:54 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="16990337" author="lucenesolrqa" created="Sat, 7 Dec 2019 05:16:17 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Prechecks &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; test4tests &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; The patch doesn&apos;t appear to include any new or modified tests. Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; master Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  2m  3s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Patch Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 49s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 49s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Release audit (RAT) &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 49s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Check forbidden APIs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 49s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Validate source patterns &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 49s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Other Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; 28m 28s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; core in the patch failed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 35m 57s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Reason &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Tests &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Failed junit tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; solr.cloud.hdfs.HdfsRecoverLeaseTest &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; solr.handler.TestHdfsBackupRestoreCore &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; solr.cloud.autoscaling.sim.TestSimScenario &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; solr.security.hadoop.TestImpersonationWithHadoopAuth &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; solr.cloud.TestSolrCloudWithSecureImpersonation &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11706&quot; title=&quot;JSON FacetModule can&amp;#39;t compute stats (min,max,etc...) on multivalued fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11706&quot;&gt;&lt;del&gt;SOLR-11706&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12987608/SOLR-11706.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12987608/SOLR-11706.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  compile  javac  unit  ratsources  checkforbiddenapis  validatesourcepatterns  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux lucene2-us-west.apache.org 4.4.0-112-generic #135-Ubuntu SMP Fri Jan 19 11:48:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-SOLR-Build/sourcedir/dev-tools/test-patch/lucene-solr-yetus-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 7d5d44a &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; version: Apache Ant(TM) version 1.9.6 compiled on July 20 2018 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LTS &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; unit &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/613/artifact/out/patch-unit-solr_core.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/613/artifact/out/patch-unit-solr_core.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Test Results &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/613/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/613/testReport/&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: solr/core U: solr/core &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/613/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/613/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.7.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16990358" author="jira-bot" created="Sat, 7 Dec 2019 06:08:08 +0000"  >&lt;p&gt;Commit a1e51cd7778f2de93327772bdcf0996bd012f371 in lucene-solr&apos;s branch refs/heads/master from Munendra S N&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=a1e51cd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=a1e51cd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11706&quot; title=&quot;JSON FacetModule can&amp;#39;t compute stats (min,max,etc...) on multivalued fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11706&quot;&gt;&lt;del&gt;SOLR-11706&lt;/del&gt;&lt;/a&gt;: minor refactors&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;rename stdDev, variance methods to reflect the functionality&lt;/li&gt;
	&lt;li&gt;add util functions to compute corrected stdDev and variance&lt;/li&gt;
	&lt;li&gt;use DocValuesIterator#advanceExact to check if values exists for the doc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16990364" author="jira-bot" created="Sat, 7 Dec 2019 06:18:27 +0000"  >&lt;p&gt;Commit 0a26e38fbe16e4b8f9067a57eae6692be629130f in lucene-solr&apos;s branch refs/heads/branch_8x from Munendra S N&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=0a26e38&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=0a26e38&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11706&quot; title=&quot;JSON FacetModule can&amp;#39;t compute stats (min,max,etc...) on multivalued fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11706&quot;&gt;&lt;del&gt;SOLR-11706&lt;/del&gt;&lt;/a&gt;: minor refactors&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;rename stdDev, variance methods to reflect the functionality&lt;/li&gt;
	&lt;li&gt;add util functions to compute corrected stdDev and variance&lt;/li&gt;
	&lt;li&gt;use DocValuesIterator#advanceExact to check if values exists for the doc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16990365" author="munendrasn" created="Sat, 7 Dec 2019 06:18:59 +0000"  >&lt;p&gt;Failures are unrelated this change&lt;/p&gt;</comment>
                            <comment id="16990419" author="jira-bot" created="Sat, 7 Dec 2019 09:57:38 +0000"  >&lt;p&gt;Commit a1e51cd7778f2de93327772bdcf0996bd012f371 in lucene-solr&apos;s branch refs/heads/gradle-master from Munendra S N&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=a1e51cd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=a1e51cd&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11706&quot; title=&quot;JSON FacetModule can&amp;#39;t compute stats (min,max,etc...) on multivalued fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11706&quot;&gt;&lt;del&gt;SOLR-11706&lt;/del&gt;&lt;/a&gt;: minor refactors&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;rename stdDev, variance methods to reflect the functionality&lt;/li&gt;
	&lt;li&gt;add util functions to compute corrected stdDev and variance&lt;/li&gt;
	&lt;li&gt;use DocValuesIterator#advanceExact to check if values exists for the doc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16990731" author="jira-bot" created="Sun, 8 Dec 2019 05:34:16 +0000"  >&lt;p&gt;Commit df508ffe0149ebbc90b42bb316975318f613d910 in lucene-solr&apos;s branch refs/heads/master from Munendra S N&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=df508ff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=df508ff&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11706&quot; title=&quot;JSON FacetModule can&amp;#39;t compute stats (min,max,etc...) on multivalued fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11706&quot;&gt;&lt;del&gt;SOLR-11706&lt;/del&gt;&lt;/a&gt;: fix for multivalued trie date in min/max and more tests&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;selecting single value for multivalued trie date field is not&lt;br/&gt;
  supported.&lt;/li&gt;
	&lt;li&gt;add additional tests for variance, unique, hll aggregations&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16990735" author="jira-bot" created="Sun, 8 Dec 2019 05:44:32 +0000"  >&lt;p&gt;Commit 42a6fcbdd98de8ee6b7c87c4cfe78814505462fd in lucene-solr&apos;s branch refs/heads/branch_8x from Munendra S N&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=42a6fcb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=42a6fcb&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11706&quot; title=&quot;JSON FacetModule can&amp;#39;t compute stats (min,max,etc...) on multivalued fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11706&quot;&gt;&lt;del&gt;SOLR-11706&lt;/del&gt;&lt;/a&gt;: fix for multivalued trie date in min/max and more tests&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;selecting single value for multivalued trie date field is not&lt;br/&gt;
  supported.&lt;/li&gt;
	&lt;li&gt;add additional tests for variance, unique, hll aggregations&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16991454" author="jira-bot" created="Mon, 9 Dec 2019 10:02:40 +0000"  >&lt;p&gt;Commit df508ffe0149ebbc90b42bb316975318f613d910 in lucene-solr&apos;s branch refs/heads/gradle-master from Munendra S N&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=df508ff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=df508ff&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11706&quot; title=&quot;JSON FacetModule can&amp;#39;t compute stats (min,max,etc...) on multivalued fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11706&quot;&gt;&lt;del&gt;SOLR-11706&lt;/del&gt;&lt;/a&gt;: fix for multivalued trie date in min/max and more tests&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;selecting single value for multivalued trie date field is not&lt;br/&gt;
  supported.&lt;/li&gt;
	&lt;li&gt;add additional tests for variance, unique, hll aggregations&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17005015" author="jpountz" created="Sun, 29 Dec 2019 20:51:38 +0000"  >&lt;p&gt;Closing after the 8.4.0 release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                            <outwardlinks description="contains">
                                        <issuelink>
            <issuekey id="13069637">SOLR-10620</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13172726">SOLR-12559</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12987608" name="SOLR-11706.patch" size="14111" author="munendrasn" created="Thu, 5 Dec 2019 14:51:54 +0000"/>
                            <attachment id="12987605" name="SOLR-11706.patch" size="13948" author="munendrasn" created="Thu, 5 Dec 2019 14:09:32 +0000"/>
                            <attachment id="12986885" name="SOLR-11706.patch" size="87040" author="munendrasn" created="Wed, 27 Nov 2019 07:07:18 +0000"/>
                            <attachment id="12986865" name="SOLR-11706.patch" size="68710" author="munendrasn" created="Wed, 27 Nov 2019 04:00:25 +0000"/>
                            <attachment id="12986761" name="SOLR-11706.patch" size="68710" author="munendrasn" created="Tue, 26 Nov 2019 09:40:17 +0000"/>
                            <attachment id="12986694" name="SOLR-11706.patch" size="57804" author="munendrasn" created="Mon, 25 Nov 2019 17:43:39 +0000"/>
                            <attachment id="12899904" name="SOLR-11706.patch" size="13191" author="hossman" created="Wed, 29 Nov 2017 23:40:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 46 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ncvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>