<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:08:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-17014] Solr Benchmarks are broken due to tracing</title>
                <link>https://issues.apache.org/jira/browse/SOLR-17014</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;./jmh.sh SimpleSearch
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.RuntimeException: java.lang.IllegalStateException: No context information for thread: Thread[id=26, name=org.apache.solr.bench.search.SimpleSearch.query-jmh-worker-11, state=RUNNABLE, group=main]. Is this thread running under a class com.carrotsearch.randomizedtesting.RandomizedRunner runner context? Add @RunWith(class com.carrotsearch.randomizedtesting.RandomizedRunner.class) to your test class. Make sure your code accesses random contexts within @BeforeClass and @AfterClass boundary (for example, static test class initializers are not permitted to access random contexts).
	at org.apache.solr.bench.MiniClusterState$MiniClusterBenchState.startMiniCluster(MiniClusterState.java:274)
	at org.apache.solr.bench.search.SimpleSearch$BenchState.setupTrial(SimpleSearch.java:66)
	at org.apache.solr.bench.search.jmh_generated.SimpleSearch_query_jmhTest._jmh_tryInit_f_benchstate1_G(SimpleSearch_query_jmhTest.java:996)
	at org.apache.solr.bench.search.jmh_generated.SimpleSearch_query_jmhTest.query_Throughput(SimpleSearch_query_jmhTest.java:77)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.openjdk.jmh.runner.BenchmarkHandler$BenchmarkTask.call(BenchmarkHandler.java:527)
	at org.openjdk.jmh.runner.BenchmarkHandler$BenchmarkTask.call(BenchmarkHandler.java:504)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: java.lang.IllegalStateException: No context information for thread: Thread[id=26, name=org.apache.solr.bench.search.SimpleSearch.query-jmh-worker-11, state=RUNNABLE, group=main]. Is this thread running under a class com.carrotsearch.randomizedtesting.RandomizedRunner runner context? Add @RunWith(class com.carrotsearch.randomizedtesting.RandomizedRunner.class) to your test class. Make sure your code accesses random contexts within @BeforeClass and @AfterClass boundary (for example, static test class initializers are not permitted to access random contexts).
	at com.carrotsearch.randomizedtesting.RandomizedContext.context(RandomizedContext.java:249)
	at com.carrotsearch.randomizedtesting.RandomizedContext.current(RandomizedContext.java:134)
	at org.apache.lucene.tests.util.LuceneTestCase.random(LuceneTestCase.java:792)
	at org.apache.lucene.tests.util.LuceneTestCase.rarely(LuceneTestCase.java:890)
	at org.apache.solr.cloud.MiniSolrCloudCluster.injectRandomRecordingFlag(MiniSolrCloudCluster.java:1321)
	at org.apache.solr.cloud.MiniSolrCloudCluster$Builder.build(MiniSolrCloudCluster.java:1248)
	at org.apache.solr.cloud.MiniSolrCloudCluster$Builder.configure(MiniSolrCloudCluster.java:1218)
	at org.apache.solr.bench.MiniClusterState$MiniClusterBenchState.startMiniCluster(MiniClusterState.java:265)
	... 15 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13552947">SOLR-17014</key>
            <summary>Solr Benchmarks are broken due to tracing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="krisden">Kevin Risden</assignee>
                                    <reporter username="stillalex">Alex Deparvu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Oct 2023 02:06:13 +0000</created>
                <updated>Fri, 17 Oct 2025 20:05:15 +0000</updated>
                            <resolved>Thu, 5 Oct 2023 16:26:02 +0000</resolved>
                                    <version>9.4</version>
                                    <fixVersion>9.4</fixVersion>
                    <fixVersion>10.0</fixVersion>
                                    <component>benchmarks</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17772221" author="risdenk" created="Thu, 5 Oct 2023 13:29:59 +0000"  >&lt;p&gt;It looks like this was inadvertently caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16960&quot; title=&quot;Tests should sometimes run with a Tracer (not no-op)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16960&quot;&gt;&lt;del&gt;SOLR-16960&lt;/del&gt;&lt;/a&gt; - &lt;a href=&quot;https://github.com/apache/solr/blob/main/solr/test-framework/src/java/org/apache/solr/cloud/MiniSolrCloudCluster.java#L1321&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/blob/main/solr/test-framework/src/java/org/apache/solr/cloud/MiniSolrCloudCluster.java#L1321&lt;/a&gt; assumes there is a random context already setup I think.&lt;/p&gt;</comment>
                            <comment id="17772222" author="risdenk" created="Thu, 5 Oct 2023 13:32:12 +0000"  >&lt;p&gt;Short term workaround is ot add withTraceIdGenerationDisabled() to MiniClusterState MiniSolrCloudCluster.Builder which bypasses that method.&lt;/p&gt;</comment>
                            <comment id="17772226" author="risdenk" created="Thu, 5 Oct 2023 13:42:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/solr/pull/1983&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/pull/1983&lt;/a&gt; pull request to catch the illegalstateexception and ignore it basically.&lt;/p&gt;</comment>
                            <comment id="17772274" author="alex.parvulescu" created="Thu, 5 Oct 2023 16:11:04 +0000"  >&lt;p&gt;ah good find.&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krisden&quot; class=&quot;user-hover&quot; rel=&quot;krisden&quot;&gt;krisden&lt;/a&gt;. had no idea this can happen.&lt;/p&gt;</comment>
                            <comment id="17772280" author="jira-bot" created="Thu, 5 Oct 2023 16:17:13 +0000"  >&lt;p&gt;Commit 9fde70b9e7fff2a1d24d55d23e38383daf642c10 in solr&apos;s branch refs/heads/main from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=9fde70b9e7f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=9fde70b9e7f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17014&quot; title=&quot;Solr Benchmarks are broken due to tracing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17014&quot;&gt;&lt;del&gt;SOLR-17014&lt;/del&gt;&lt;/a&gt;: Ensure that injecting random recording flag only happens under randomized context &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16960&quot; title=&quot;Tests should sometimes run with a Tracer (not no-op)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16960&quot;&gt;&lt;del&gt;SOLR-16960&lt;/del&gt;&lt;/a&gt; (#1983)&lt;/p&gt;
</comment>
                            <comment id="17772284" author="jira-bot" created="Thu, 5 Oct 2023 16:22:13 +0000"  >&lt;p&gt;Commit 775c4c135d93fb7e912d92a5b0e6d002bd44d8bb in solr&apos;s branch refs/heads/branch_9x from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=775c4c135d9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=775c4c135d9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17014&quot; title=&quot;Solr Benchmarks are broken due to tracing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17014&quot;&gt;&lt;del&gt;SOLR-17014&lt;/del&gt;&lt;/a&gt;: Ensure that injecting random recording flag only happens under randomized context &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16960&quot; title=&quot;Tests should sometimes run with a Tracer (not no-op)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16960&quot;&gt;&lt;del&gt;SOLR-16960&lt;/del&gt;&lt;/a&gt; (#1983)&lt;/p&gt;
</comment>
                            <comment id="17772287" author="jira-bot" created="Thu, 5 Oct 2023 16:25:50 +0000"  >&lt;p&gt;Commit ee474b7db483c2242ce1d75074258236ca22103b in solr&apos;s branch refs/heads/branch_9_4 from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=ee474b7db48&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=ee474b7db48&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-17014&quot; title=&quot;Solr Benchmarks are broken due to tracing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-17014&quot;&gt;&lt;del&gt;SOLR-17014&lt;/del&gt;&lt;/a&gt;: Ensure that injecting random recording flag only happens under randomized context &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16960&quot; title=&quot;Tests should sometimes run with a Tracer (not no-op)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16960&quot;&gt;&lt;del&gt;SOLR-16960&lt;/del&gt;&lt;/a&gt; (#1983)&lt;/p&gt;
</comment>
                            <comment id="17775444" author="alex.parvulescu" created="Sun, 15 Oct 2023 19:57:04 +0000"  >&lt;p&gt;Closing after the 9.4.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13549622">SOLR-16960</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 4 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1kqww:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>