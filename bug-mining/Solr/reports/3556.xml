<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:25:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-11093] implement Points/Numeric support for graph query</title>
                <link>https://issues.apache.org/jira/browse/SOLR-11093</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;It looks like GraphQueryTest only has tests for strings.  We should add tests for numeric fields and then enable points randomization.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13087636">SOLR-11093</key>
            <summary>implement Points/Numeric support for graph query</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yseeley@gmail.com">Yonik Seeley</assignee>
                                    <reporter username="yseeley@gmail.com">Yonik Seeley</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Jul 2017 16:46:56 +0000</created>
                <updated>Sat, 8 Jun 2019 15:19:09 +0000</updated>
                            <resolved>Tue, 25 Jul 2017 15:23:56 +0000</resolved>
                                                    <fixVersion>7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16091902" author="jira-bot" created="Tue, 18 Jul 2017 17:56:49 +0000"  >&lt;p&gt;Commit a26d1023ff32b27e2a0758af6a9a72a67c114313 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a26d102&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a26d102&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11093&quot; title=&quot;implement Points/Numeric support for graph query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11093&quot;&gt;&lt;del&gt;SOLR-11093&lt;/del&gt;&lt;/a&gt;: tests - templatize graph query test for different field types, remove schema-graph.xml&lt;/p&gt;</comment>
                            <comment id="16091903" author="jira-bot" created="Tue, 18 Jul 2017 17:57:09 +0000"  >&lt;p&gt;Commit 8727a7fbea3423957927d2d8b529ed40969da0b7 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=8727a7f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=8727a7f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11093&quot; title=&quot;implement Points/Numeric support for graph query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11093&quot;&gt;&lt;del&gt;SOLR-11093&lt;/del&gt;&lt;/a&gt;: tests - templatize graph query test for different field types, remove schema-graph.xml&lt;/p&gt;</comment>
                            <comment id="16091904" author="jira-bot" created="Tue, 18 Jul 2017 17:57:17 +0000"  >&lt;p&gt;Commit a6b317c77860e779ca893ff8b8b124cb5d7ebb38 in lucene-solr&apos;s branch refs/heads/branch_7_0 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a6b317c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a6b317c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11093&quot; title=&quot;implement Points/Numeric support for graph query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11093&quot;&gt;&lt;del&gt;SOLR-11093&lt;/del&gt;&lt;/a&gt;: tests - templatize graph query test for different field types, remove schema-graph.xml&lt;/p&gt;</comment>
                            <comment id="16092281" author="hossman" created="Tue, 18 Jul 2017 22:30:16 +0000"  >&lt;p&gt;can this be resolved?&lt;/p&gt;</comment>
                            <comment id="16092305" author="yseeley@gmail.com" created="Tue, 18 Jul 2017 23:06:38 +0000"  >&lt;blockquote&gt;&lt;p&gt;can this be resolved?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Numerics still need to be fixed for graph query - I was going to do it under this issue.&lt;/p&gt;</comment>
                            <comment id="16092311" author="hossman" created="Tue, 18 Jul 2017 23:09:42 +0000"  >&lt;p&gt;We already have a specific issue for adding numeric supportto GraphQParser &amp;#8211; which you assigned to your self a few days ago: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10845&quot; title=&quot;GraphTermsQParserPlugin doesn&amp;#39;t work with Point fields (or DocValues only fields?)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10845&quot;&gt;&lt;del&gt;SOLR-10845&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16092316" author="yseeley@gmail.com" created="Tue, 18 Jul 2017 23:13:40 +0000"  >&lt;p&gt;Yeah, I was confused too at first... these are actually &lt;b&gt;different&lt;/b&gt; parsers and tests.  This one is &lt;/p&gt;
{!graph}
&lt;p&gt;, the other one is &lt;/p&gt;
{!graphTerms}
&lt;p&gt;.  I hadn&apos;t even realized the latter existed and I assumed it was the former when I assigned it to myself.&lt;/p&gt;</comment>
                            <comment id="16092318" author="hossman" created="Tue, 18 Jul 2017 23:15:18 +0000"  >&lt;p&gt;Oh .. weird, sorry for the noise: carry on.&lt;/p&gt;</comment>
                            <comment id="16092406" author="yseeley@gmail.com" created="Wed, 19 Jul 2017 00:37:27 +0000"  >&lt;p&gt;OK, after reviewing this more it looks like this was written for strings (and trie* numeric fields worked because they existed in the full-text index, and could be uninverted to docTermOrds).&lt;br/&gt;
To make this work for numeric point fields, we&apos;ll need to:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;require docValues&lt;/li&gt;
	&lt;li&gt;write new code to collect values from numeric docValues (i.e. not docTermOrds and ByteRefHash)&lt;/li&gt;
	&lt;li&gt;write new code to create an appropriate frontier query from the collected values&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Any objections to requiring docValues?  The only real alternative is to implement FieldCache support for Point fields to fake docValues.&lt;/p&gt;</comment>
                            <comment id="16092443" author="hossman" created="Wed, 19 Jul 2017 01:17:11 +0000"  >&lt;p&gt;NOTE: I&apos;ve &quot;un-subtasked&quot; this jira since it no longer makes sense as a subtask of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10807&quot; title=&quot; Randomize PointFields in all tests unless explicit reason not to&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10807&quot;&gt;&lt;del&gt;SOLR-10807&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;(FWIW: I have no strong opinions about the questions you asked)&lt;/p&gt;</comment>
                            <comment id="16094127" author="yseeley@gmail.com" created="Thu, 20 Jul 2017 03:32:36 +0000"  >&lt;p&gt;Here&apos;s a draft patch with refactorings, creating a base class GraphEdgeCollector and pulling out term-specific code into a subclass GraphTermsCollector.&lt;br/&gt;
Next TODO is to implement GraphNumericCollector that will work with points &amp;amp; numeric docvalues&lt;/p&gt;</comment>
                            <comment id="16096409" author="yseeley@gmail.com" created="Fri, 21 Jul 2017 15:57:03 +0000"  >&lt;p&gt;status: I&apos;ve made more progress on this, but I&apos;m currently taking sick day(s).  Should be able to finish up quickly once I get back to it.&lt;/p&gt;</comment>
                            <comment id="16098592" author="yseeley@gmail.com" created="Mon, 24 Jul 2017 15:37:55 +0000"  >&lt;p&gt;Here&apos;s an updated draft patch that moves LongSet and LongIterator to the util package, uses them in conjunction with numeric docvalues to collect numeric values, and then uses points fields to create a set query.&lt;br/&gt;
Doesn&apos;t yet work for some reason... I&apos;m digging into why.&lt;/p&gt;</comment>
                            <comment id="16098633" author="dsmiley" created="Mon, 24 Jul 2017 16:15:36 +0000"  >&lt;p&gt;Requiring DocValues for numerics on a GraphQuery is fine with me.  Is there a back-compat concern?&lt;/p&gt;

&lt;p&gt;Maybe LongSet could use more javadocs if it&apos;s going to be shared.  The constructor should actually assert (or throw) that the argument is a power of 2.  And it appears that the LongIterator returned &lt;b&gt;must&lt;/b&gt; be used in a standard fashion in which hasNext is &lt;b&gt;always&lt;/b&gt; called before next(); yes?  Since the set size is known, maybe it could be adjusted to use a countDown integer approach, yet still be very fast/simple?&lt;/p&gt;</comment>
                            <comment id="16099260" author="yseeley@gmail.com" created="Mon, 24 Jul 2017 23:20:33 +0000"  >&lt;p&gt;Updated patch... tests now pass!&lt;/p&gt;</comment>
                            <comment id="16099276" author="yseeley@gmail.com" created="Mon, 24 Jul 2017 23:37:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is there a back-compat concern?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Everything should be back compat with existing schemas.&lt;/p&gt;</comment>
                            <comment id="16100137" author="jira-bot" created="Tue, 25 Jul 2017 14:49:38 +0000"  >&lt;p&gt;Commit aa1d5feba01a50d4bc002e346e54ff26f6abc664 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=aa1d5fe&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=aa1d5fe&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11093&quot; title=&quot;implement Points/Numeric support for graph query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11093&quot;&gt;&lt;del&gt;SOLR-11093&lt;/del&gt;&lt;/a&gt;: add Points to GraphQuery&lt;/p&gt;</comment>
                            <comment id="16100138" author="jira-bot" created="Tue, 25 Jul 2017 14:50:02 +0000"  >&lt;p&gt;Commit 9cd3a2beee2a0374bdc4c3e6224f63989c7cd8c6 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9cd3a2b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=9cd3a2b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11093&quot; title=&quot;implement Points/Numeric support for graph query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11093&quot;&gt;&lt;del&gt;SOLR-11093&lt;/del&gt;&lt;/a&gt;: add Points to GraphQuery&lt;/p&gt;</comment>
                            <comment id="16100139" author="jira-bot" created="Tue, 25 Jul 2017 14:50:11 +0000"  >&lt;p&gt;Commit 32b2b6d108b22fe9d14a343b5abd984ed439e275 in lucene-solr&apos;s branch refs/heads/branch_7_0 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=32b2b6d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=32b2b6d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11093&quot; title=&quot;implement Points/Numeric support for graph query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11093&quot;&gt;&lt;del&gt;SOLR-11093&lt;/del&gt;&lt;/a&gt;: add Points to GraphQuery&lt;/p&gt;</comment>
                            <comment id="16100182" author="yseeley@gmail.com" created="Tue, 25 Jul 2017 15:23:08 +0000"  >&lt;p&gt;An interesting titbit I discovered while doing this issue: the graph query reversed the meaning of &quot;from&quot; and &quot;to&quot; wrt the join query.&lt;br/&gt;
Not a bug I guess... just a different way of thinking about what &quot;from&quot; and &quot;to&quot; mean.&lt;/p&gt;</comment>
                            <comment id="16100194" author="yseeley@gmail.com" created="Tue, 25 Jul 2017 15:27:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;Since the set size is known, maybe it could be adjusted to use a countDown integer approach, yet still be very fast/simple?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I wasn&apos;t able to figure out how to make it simpler with an iterator approach (it seems like there always needs to be an additional check for the empty value).&lt;br/&gt;
In a place where the performance difference might matter, one always has the option of grabbing the backing array though.&lt;/p&gt;</comment>
                            <comment id="16100480" author="dsmiley" created="Tue, 25 Jul 2017 18:16:52 +0000"  >&lt;p&gt;Why is zeroCount an integer instead of simply a hasZero boolean?&lt;/p&gt;

&lt;p&gt;Here&apos;s my first iteration (subsequently changed futher below).  All I did was rename &lt;tt&gt;hasNext&lt;/tt&gt; to &lt;tt&gt;positioned&lt;/tt&gt; (which I feel is more clear), added some inline comments for what the fields mean, and I added a leading check inside next(). So this was simpler than I thought.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;/** Returns an iterator over the values in the set. */&lt;/span&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; LongIterator iterator() {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LongIterator() {
      &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; set contains zero, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; iterator&apos;s initial state is already positioned
&lt;/span&gt;      &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; positioned = zeroCount &amp;gt; 0;
      &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = -1; &lt;span class=&quot;code-comment&quot;&gt;// current index into vals[]
&lt;/span&gt;      &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; value = 0; &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; positioned, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is our current value
&lt;/span&gt;
      @Override
      &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; hasNext() {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (positioned) {
          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (++i &amp;lt; vals.length) {
          value = vals[i];
          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (value != 0) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; positioned = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
          }
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
      }

      @Override
      &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; next() {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!positioned) {
          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!hasNext()) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NoSuchElementException();
          }
        }
        positioned = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; value;
      }

    };
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And here&apos;s what I think is the most clear approach using a countdown integer:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-comment&quot;&gt;/** Returns an iterator over the values in the set. */&lt;/span&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; LongIterator iterator() {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LongIterator() {
      &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; remainingValues = cardinality();
      &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; valsIdx = 0;

      @Override
      &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; hasNext() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; remainingValues &amp;gt; 0;
      }

      @Override
      &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; next() {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!hasNext()) {
          &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; NoSuchElementException();
        }
        remainingValues--;

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (remainingValues == 0 &amp;amp;&amp;amp; zeroCount &amp;gt; 0) {
          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; 0;
        }
        
        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;) { &lt;span class=&quot;code-comment&quot;&gt;// guaranteed to find another value &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we get here
&lt;/span&gt;          &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; value = vals[valsIdx++];
          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (value != 0) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; value;
          }
        }
      }

    };
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This has the benefit that we don&apos;t loop past the last value of the array.  It also has fewer state variables. Also, you don&apos;t &quot;pay&quot; any advancement cost in hasNext(); it&apos;s only next() where the value is going to actually be consumed.&lt;/p&gt;</comment>
                            <comment id="16103237" author="dsmiley" created="Thu, 27 Jul 2017 14:00:22 +0000"  >&lt;p&gt;I&apos;ll commit the latter version tonight.&lt;/p&gt;</comment>
                            <comment id="16103256" author="yseeley@gmail.com" created="Thu, 27 Jul 2017 14:15:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;ll commit the latter version tonight.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sure, I don&apos;t think I really have a preference (and I&apos;d have to benchmark to know if it was any faster)&lt;/p&gt;</comment>
                            <comment id="16103995" author="jira-bot" created="Thu, 27 Jul 2017 22:08:14 +0000"  >&lt;p&gt;Commit ec0c11c703c24a565e9745ee9ebfeddc3e576118 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=ec0c11c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=ec0c11c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11093&quot; title=&quot;implement Points/Numeric support for graph query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11093&quot;&gt;&lt;del&gt;SOLR-11093&lt;/del&gt;&lt;/a&gt;: small improvements to LongSet&apos;s iterator&lt;/p&gt;</comment>
                            <comment id="16103997" author="jira-bot" created="Thu, 27 Jul 2017 22:09:31 +0000"  >&lt;p&gt;Commit 570efbecbd5baf27657e3241820e0560ae5fbb16 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=570efbe&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=570efbe&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11093&quot; title=&quot;implement Points/Numeric support for graph query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11093&quot;&gt;&lt;del&gt;SOLR-11093&lt;/del&gt;&lt;/a&gt;: small improvements to LongSet&apos;s iterator&lt;/p&gt;

&lt;p&gt;(cherry picked from commit ec0c11c)&lt;/p&gt;</comment>
                            <comment id="16104004" author="jira-bot" created="Thu, 27 Jul 2017 22:12:20 +0000"  >&lt;p&gt;Commit 119f2b0177e4fe7e16ade69980a3aedfdd4d6aae in lucene-solr&apos;s branch refs/heads/branch_7_0 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=119f2b0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=119f2b0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11093&quot; title=&quot;implement Points/Numeric support for graph query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11093&quot;&gt;&lt;del&gt;SOLR-11093&lt;/del&gt;&lt;/a&gt;: small improvements to LongSet&apos;s iterator&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 570efbe)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13078142">SOLR-10845</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12878708" name="SOLR-11093.patch" size="35819" author="yseeley@gmail.com" created="Mon, 24 Jul 2017 23:20:17 +0000"/>
                            <attachment id="12878650" name="SOLR-11093.patch" size="30903" author="yseeley@gmail.com" created="Mon, 24 Jul 2017 15:34:38 +0000"/>
                            <attachment id="12878088" name="SOLR-11093.patch" size="15874" author="yseeley@gmail.com" created="Thu, 20 Jul 2017 03:29:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 16 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hlvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>