<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:20:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-2118] IndexReaderFactory.setTermIndexInterval is misleading and confusing</title>
                <link>https://issues.apache.org/jira/browse/SOLR-2118</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;To change the terms index divisor: you currently do this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  &amp;lt;indexReaderFactory name=&quot;IndexReaderFactory&quot; class=&quot;org.apache.solr.core.StandardIndexReaderFactory&quot;&amp;gt;
    &amp;lt;int name=&quot;setTermIndexInterval&quot;&amp;gt;12&amp;lt;/int&amp;gt;
  &amp;lt;/indexReaderFactory &amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But to change the terms index interval, you do this:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;indexDefaults&amp;gt;
...
&amp;lt;termIndexInterval&amp;gt;256&amp;lt;/termIndexInterval&amp;gt;
...
&amp;lt;/indexDefaults&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I feel the IR parameter should be &lt;b&gt;setTermIndexDivisor&lt;/b&gt; or similar instead:&lt;br/&gt;
the name is very misleading and someone could easily put a terrible value &lt;br/&gt;
in the wrong place by confusing the two.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12473929">SOLR-2118</key>
            <summary>IndexReaderFactory.setTermIndexInterval is misleading and confusing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Sun, 12 Sep 2010 10:57:56 +0000</created>
                <updated>Wed, 30 Mar 2011 15:45:23 +0000</updated>
                            <resolved>Mon, 13 Sep 2010 04:38:51 +0000</resolved>
                                    <version>3.1</version>
                    <version>4.0-ALPHA</version>
                                    <fixVersion>3.1</fixVersion>
                    <fixVersion>4.0-ALPHA</fixVersion>
                                    <component>search</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12908445" author="markrmiller@gmail.com" created="Sun, 12 Sep 2010 11:34:23 +0000"  >&lt;p&gt;Setting the divisor that way shouldn&apos;t likely work on trunk anymore, since Lucene dropped it. That is just a generic &apos;call this bean method&apos; system.&lt;/p&gt;

&lt;p&gt;I think the story is that the interval came first, but we don&apos;t specify indexwriter anywhere in solrconfig, so it made sense to go where it is perhaps - and then later this generic system to call setters was impl&apos;d, and it just happens that for a little while you could use it to set the termIndexInterval.&lt;/p&gt;

&lt;p&gt;I&apos;m all for consistency if it possible though. So far, Solr has really avoided exposing an IndexWriter - it&apos;s not even part of the UpdateHandler interface. We have hacked around that here and there by exposing in DirectUpdateHandler2 and counting on that impl for certain functionality.&lt;/p&gt;</comment>
                            <comment id="12908450" author="rcmuir" created="Sun, 12 Sep 2010 12:16:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;Setting the divisor that way shouldn&apos;t likely work on trunk anymore, since Lucene dropped it. That is just a generic &apos;call this bean method&apos; system.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I am not referring to the IW parameter, but the IR param. The IR param is named termIndex &lt;b&gt;Interval&lt;/b&gt; but is really the terms index &lt;b&gt;divisor&lt;/b&gt;, this is what I feel is misleading and confusing.&lt;/p&gt;

&lt;p&gt;just look at Solr&apos;s IndexReaderFactory to see:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Integer v = (Integer)args.get(&quot;setTermIndexInterval&quot;);
    if (v != null) {
      termInfosIndexDivisor = v.intValue();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12908465" author="markrmiller@gmail.com" created="Sun, 12 Sep 2010 13:47:08 +0000"  >&lt;p&gt;Right, I get you now - I thought that was a typo in your examples.&lt;/p&gt;

&lt;p&gt;I didn&apos;t realize that this triggers a method that someone put on the reader factory rather than trying to work with the indexreader.&lt;/p&gt;

&lt;p&gt;So this is more a bug than an improvement.&lt;/p&gt;</comment>
                            <comment id="12908469" author="yseeley@gmail.com" created="Sun, 12 Sep 2010 14:08:44 +0000"  >&lt;p&gt;Yeah, definitely a bug.&lt;/p&gt;

&lt;p&gt;Seems like both the interval and the divisor could belong as properties of the index (i.e. the mainIndex section of solrconfig.xml)?&lt;br/&gt;
The current index reader factory architecture may not go where we need to go anyway actually... for NRT, the writer(s) need to be involved?  Sort of outside of the scope of an immediate fix for this issue - but something to think about.&lt;/p&gt;</comment>
                            <comment id="12908470" author="markrmiller@gmail.com" created="Sun, 12 Sep 2010 14:10:13 +0000"  >&lt;p&gt;I think I introduced this when upgrading to Solr to Lucene 3 on a different branch back in the day - a quick fix that was wrong or something.&lt;/p&gt;</comment>
                            <comment id="12908480" author="rcmuir" created="Sun, 12 Sep 2010 14:50:55 +0000"  >&lt;p&gt;mark you are right, so its not wrong in any release (we can just fix trunk/3x)&lt;/p&gt;

&lt;p&gt;attached is a trivial patch&lt;/p&gt;</comment>
                            <comment id="12908536" author="simonw" created="Sun, 12 Sep 2010 19:36:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;Seems like both the interval and the divisor could belong as properties of the index (i.e. the mainIndex section of solrconfig.xml)?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree, IMO we should try to keep TermIndexInterval and Divisor together both should be settable in the &amp;lt;indexDefaults&amp;gt; section &lt;br/&gt;
Additionally overriding those in a IndexReaderFactory section seems to be reasonable to me. question, is it possible to have more than one IR factory and use them in different places, I can&apos;t think of one from the top of my head since I never saw that param before?&lt;/p&gt;

&lt;p&gt;If we enable setting IndexDivisor values in indexReaderFactory sections do we need to have the &lt;tt&gt;set&lt;/tt&gt; prefix? &amp;lt;int name=:TermIndexDivisor&quot;&amp;gt;1&amp;lt;/int&amp;gt; seems to be nicer or is this a set via reflection to a bean setter?&lt;/p&gt;

&lt;p&gt;Regarding the patch, we should also change it in Example conf in &lt;tt&gt;solr/example/solr/conf/solrconfig.xml&lt;/tt&gt; .&lt;/p&gt;
</comment>
                            <comment id="12908546" author="rcmuir" created="Sun, 12 Sep 2010 19:41:37 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I agree, IMO we should try to keep TermIndexInterval and Divisor together both should be settable in the &amp;lt;indexDefaults&amp;gt; section &lt;br/&gt;
Additionally overriding those in a IndexReaderFactory section seems to be reasonable to me. question, is it possible to have more than one IR factory and use them in different places, I can&apos;t think of one from the top of my head since I never saw that param before?&lt;/p&gt;

&lt;p&gt;If we enable setting IndexDivisor values in indexReaderFactory sections do we need to have the set prefix? &amp;lt;int name=:TermIndexDivisor&quot;&amp;gt;1&amp;lt;/int&amp;gt; seems to be nicer or is this a set via reflection to a bean setter?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t think we should change any of this under this issue, I agree with yonik its a bug.&lt;br/&gt;
I think it should simply be renamed back to divisor to match how it worked in Solr 1.4&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Regarding the patch, we should also change it in Example conf in solr/example/solr/conf/solrconfig.xml .&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, i agree we should change the commented-out example there.&lt;/p&gt;</comment>
                            <comment id="12908548" author="rcmuir" created="Sun, 12 Sep 2010 19:51:47 +0000"  >&lt;p&gt;fixing affects version, 1.4 is ok, its 3.1 and 4.0 that have the problem.&lt;/p&gt;</comment>
                            <comment id="12908551" author="rcmuir" created="Sun, 12 Sep 2010 20:01:43 +0000"  >&lt;p&gt;attached is a patch, with all examples and other solrconfigs in test-files set back to setTermIndexDivisor as it was in Solr 1.4&lt;/p&gt;

&lt;p&gt;I think this is important, if someone depends on this currently in 1.4 and tries out 3.x or trunk, they might get OOM since it wont be respected.&lt;/p&gt;

&lt;p&gt;So, i&apos;d like to commit this at the end of the day if there are no objections.&lt;/p&gt;

&lt;p&gt;Separately, i agree it would be better if this sat with the other related index variables in the solrconfig, but I think thats for another issue.&lt;/p&gt;</comment>
                            <comment id="12908606" author="rcmuir" created="Mon, 13 Sep 2010 04:38:51 +0000"  >&lt;p&gt;Committed 996416, 996417 (3x)&lt;/p&gt;</comment>
                            <comment id="13013042" author="gsingers" created="Wed, 30 Mar 2011 15:45:23 +0000"  >&lt;p&gt;Bulk close for 3.1.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12454411" name="SOLR-2118.patch" size="2400" author="rcmuir" created="Sun, 12 Sep 2010 20:01:43 +0000"/>
                            <attachment id="12454399" name="SOLR-2118.patch" size="1111" author="rcmuir" created="Sun, 12 Sep 2010 14:50:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5388</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03mp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19110</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>