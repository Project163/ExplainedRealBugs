<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:40:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-5323] Solr requires -Dsolr.clustering.enabled=false when pointing at example config</title>
                <link>https://issues.apache.org/jira/browse/SOLR-5323</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;my typical use of Solr is something like this: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cd SOLR_HOME/example
cp -r solr /myProjectDir/solr_home
java -jar -Dsolr.solr.home=/myProjectDir/solr_home  start.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But in solr 4.5.0 this fails to start successfully. I get an error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.solr.common.SolrException: Error loading class &lt;span class=&quot;code-quote&quot;&gt;&apos;solr.clustering.ClusteringComponent&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The reason is because solr.clustering.enabled defaults to true now. I don&apos;t know why this might be the case.&lt;/p&gt;

&lt;p&gt;you can get around it with &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java -jar -Dsolr.solr.home=/myProjectDir/solr_home -Dsolr.clustering.enabled=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; start.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4708&quot; title=&quot;Enable ClusteringComponent by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4708&quot;&gt;&lt;del&gt;SOLR-4708&lt;/del&gt;&lt;/a&gt; is when this became an issue.&lt;/p&gt;</description>
                <environment>&lt;p&gt;vanilla mac&lt;/p&gt;</environment>
        <key id="12673017">SOLR-5323</key>
            <summary>Solr requires -Dsolr.clustering.enabled=false when pointing at example config</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dweiss">Dawid Weiss</assignee>
                                    <reporter username="berryman">John Berryman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Oct 2013 13:47:39 +0000</created>
                <updated>Mon, 9 May 2016 18:58:39 +0000</updated>
                            <resolved>Fri, 11 Oct 2013 18:15:52 +0000</resolved>
                                    <version>4.5</version>
                                    <fixVersion>4.5.1</fixVersion>
                    <fixVersion>4.6</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>contrib - Clustering</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13790362" author="ehatcher" created="Wed, 9 Oct 2013 13:56:00 +0000"  >&lt;p&gt;I think we should have the &amp;lt;lib&amp;gt; elements in solrconfig.xml be something like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &amp;lt;lib dir=&lt;span class=&quot;code-quote&quot;&gt;&quot;${solr.install.dir}/contrib/clustering/lib/&quot;&lt;/span&gt; regex=&lt;span class=&quot;code-quote&quot;&gt;&quot;.*\.jar&quot;&lt;/span&gt; /&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;where solr.install.dir is a property defined by Solr automatically at startup that has the root of where Solr is installed.  I&apos;ve done this manually by adjusting the configuration in this exact scenario (copying the example configuration and changing all &amp;lt;lib&amp;gt;&apos;s in this way and defining solr.install.dir on the command-line), but Solr should be able to do this better.&lt;/p&gt;</comment>
                            <comment id="13790452" author="ehatcher" created="Wed, 9 Oct 2013 15:17:45 +0000"  >&lt;p&gt;This isn&apos;t specific to the clustering component, except that it gets loaded non-lazily.  See these comments: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4708?focusedCommentId=13630567&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13630567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SOLR-4708?focusedCommentId=13630567&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13630567&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13790551" author="yseeley@gmail.com" created="Wed, 9 Oct 2013 16:03:07 +0000"  >&lt;p&gt;Hmmm, I agree this is a bug.&lt;br/&gt;
My comment in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4708&quot; title=&quot;Enable ClusteringComponent by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4708&quot;&gt;&lt;del&gt;SOLR-4708&lt;/del&gt;&lt;/a&gt; was &quot;+1, provided that everything (except clustering) still works if you copy &quot;example&quot; somewhere else.&quot;&lt;/p&gt;</comment>
                            <comment id="13790568" author="ehatcher" created="Wed, 9 Oct 2013 16:18:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;My comment in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4708&quot; title=&quot;Enable ClusteringComponent by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4708&quot;&gt;&lt;del&gt;SOLR-4708&lt;/del&gt;&lt;/a&gt; was &quot;+1, provided that everything (except clustering) still works if you copy &quot;example&quot; somewhere else.&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;And that&apos;s the reason I didn&apos;t commit it before.  I thought somehow Dawid had worked some magic to alleviate this issue when he took it on.&lt;/p&gt;

&lt;p&gt;We should perhaps have lazy loaded SearchComponents too? &lt;/p&gt;</comment>
                            <comment id="13790788" author="dweiss" created="Wed, 9 Oct 2013 20:05:59 +0000"  >&lt;p&gt;I can&apos;t remember but I think the problem was that it wasn&apos;t possible to define install-dir relative directories for lib element. I&apos;ll take a look.&lt;/p&gt;</comment>
                            <comment id="13791363" author="dweiss" created="Thu, 10 Oct 2013 10:13:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;Hmmm, I agree this is a bug.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ok, I admit I don&apos;t know what is the &quot;right&quot; way to fix this. I also don&apos;t think this issue applies to the clustering contrib only.&lt;/p&gt;

&lt;p&gt;There are several &amp;lt;lib/&amp;gt; elements in the example configuration and they all use relative paths to load additional components. So after you change the relative folder structure any &quot;example&quot; using these will fail to load, the clustering component just happens to be loaded eagerly so it triggers a failure sooner.&lt;/p&gt;

&lt;p&gt;I&apos;ve had real life use cases when hard-coded relative paths proved very confusing so I&apos;d opt for something like Erik mentioned &amp;#8211; making &amp;lt;lib/&amp;gt; components reference JARs relative to some notion of an &quot;installation&quot; folder. Ideally, this should also be inferred automatically if it&apos;s not given on command line and if somebody runs Solr from the unpacked default structure. I can prepare a patch that will try to guess and set &quot;solr.install.dir&quot; based on the classloader URI leading to one of the core classes (SolrCore, for example). Once we locate the core JAR we can sniff for ../contrib and ../dist and if these are present set the install dir in the upper folder.&lt;/p&gt;

&lt;p&gt;This is, obviously, a hack. If somebody runs from a WAR file or changes the default directory structure things will break. I assume if they do so they&apos;ll also be able to change the example&apos;s default paths (or override solr.install.dir explicitly).&lt;/p&gt;

&lt;p&gt;I&apos;m also not 100% confident how the above will work in the distributed setting &amp;#8211; soliciting feedback here.&lt;/p&gt;

&lt;p&gt;Anyway, if the above sound all right I will prepare a patch. I don&apos;t have any sensible alternatives other than turning off the clustering component by default. I would be against this, however, because like I said &amp;#8211; this only hides the problem, not solves it (the default configuration will still  be &quot;unmovable&quot; from the default directory structure).&lt;/p&gt;
</comment>
                            <comment id="13792824" author="markrmiller@gmail.com" created="Fri, 11 Oct 2013 17:16:31 +0000"  >&lt;p&gt;I also think this was a mistake - I don&apos;t know that we need another solr.home type thing to address it though.&lt;/p&gt;

&lt;p&gt;The root of the issue is that the clustering is not &quot;really&quot; lazy loading clustering - and the current policy is to lazy load the contrib modules - and that is because of the component. I think Erik is on to the right path with lazy SearchComponents. I think that if the only request handlers that refer to a search component are lazy, they should probably also init lazily. I have not looked into how hard that is to do, but it seems like the correct fix to bring clustering in line with the other contribs. I also think the whole enabled flag we had is no good.&lt;/p&gt;</comment>
                            <comment id="13792834" author="dweiss" created="Fri, 11 Oct 2013 17:26:16 +0000"  >&lt;p&gt;I can revert to lazy-loading, not a problem. But this isn&apos;t solving the relative paths issue at all. Like I mentioned there were several times when I had to pass an example preconfigured solr configuration to somebody &amp;#8211; this always required that person to put the content of the example under a specific directory in Solr distribution, otherwise things wouldn&apos;t work because of relative paths. It was a pain to explain why this step is needed and to enforce... I ended up just copying the required JARs into the example. This seems wrong somehow &amp;#8211; if it&apos;s a solr distribution then there should be a way to reference contribs in a way that allows people to have their stuff in any folder hierarchy?&lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;</comment>
                            <comment id="13792850" author="markrmiller@gmail.com" created="Fri, 11 Oct 2013 17:34:45 +0000"  >&lt;p&gt;I just think anything with the relative paths is a separate issue.&lt;/p&gt;

&lt;p&gt;You can use any hierarchy - you just have to change those paths. I&apos;m all for that being improved somehow, but the issue here seems to be:&lt;/p&gt;

&lt;p&gt;Solr contrib modules are lazy loaded so that if you don&apos;t use them, you can delete any of them from the dist package layout and things still work. Or you can not delete them and if you try and use them, things work. Clustering now violates that. It&apos;s not really clusterings fault, it seems to more be a limitation of the search component.&lt;/p&gt;</comment>
                            <comment id="13792859" author="dweiss" created="Fri, 11 Oct 2013 17:44:46 +0000"  >&lt;p&gt;Ok, I will reverting the changes from &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4708&quot; title=&quot;Enable ClusteringComponent by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4708&quot;&gt;&lt;del&gt;SOLR-4708&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13792889" author="dweiss" created="Fri, 11 Oct 2013 18:05:58 +0000"  >&lt;p&gt;Patch reverting (portions) of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4708&quot; title=&quot;Enable ClusteringComponent by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4708&quot;&gt;&lt;del&gt;SOLR-4708&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13792894" author="jira-bot" created="Fri, 11 Oct 2013 18:08:45 +0000"  >&lt;p&gt;Commit 1531377 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dawidweiss&quot; class=&quot;user-hover&quot; rel=&quot;dawidweiss&quot;&gt;dawidweiss&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1531377&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1531377&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5323&quot; title=&quot;Solr requires -Dsolr.clustering.enabled=false when pointing at example config&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5323&quot;&gt;&lt;del&gt;SOLR-5323&lt;/del&gt;&lt;/a&gt;: Disable ClusteringComponent by default in collection1 example. The solr.clustering.enabled system property needs to be set to &apos;true&apos; to enable the clustering contrib (reverts &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4708&quot; title=&quot;Enable ClusteringComponent by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4708&quot;&gt;&lt;del&gt;SOLR-4708&lt;/del&gt;&lt;/a&gt;). (Dawid Weiss)&lt;/p&gt;</comment>
                            <comment id="13792897" author="jira-bot" created="Fri, 11 Oct 2013 18:10:23 +0000"  >&lt;p&gt;Commit 1531378 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dawidweiss&quot; class=&quot;user-hover&quot; rel=&quot;dawidweiss&quot;&gt;dawidweiss&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1531378&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1531378&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5323&quot; title=&quot;Solr requires -Dsolr.clustering.enabled=false when pointing at example config&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5323&quot;&gt;&lt;del&gt;SOLR-5323&lt;/del&gt;&lt;/a&gt;: Disable ClusteringComponent by default in collection1 example. The solr.clustering.enabled system property needs to be set to &apos;true&apos; to enable the clustering contrib (reverts &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4708&quot; title=&quot;Enable ClusteringComponent by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4708&quot;&gt;&lt;del&gt;SOLR-4708&lt;/del&gt;&lt;/a&gt;). (Dawid Weiss)&lt;/p&gt;</comment>
                            <comment id="13792902" author="jira-bot" created="Fri, 11 Oct 2013 18:14:42 +0000"  >&lt;p&gt;Commit 1531380 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dawidweiss&quot; class=&quot;user-hover&quot; rel=&quot;dawidweiss&quot;&gt;dawidweiss&lt;/a&gt; in branch &apos;dev/branches/lucene_solr_4_5&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1531380&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1531380&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5323&quot; title=&quot;Solr requires -Dsolr.clustering.enabled=false when pointing at example config&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5323&quot;&gt;&lt;del&gt;SOLR-5323&lt;/del&gt;&lt;/a&gt;: Disable ClusteringComponent by default in collection1 example. The solr.clustering.enabled system property needs to be set to &apos;true&apos; to enable the clustering contrib (reverts &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4708&quot; title=&quot;Enable ClusteringComponent by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4708&quot;&gt;&lt;del&gt;SOLR-4708&lt;/del&gt;&lt;/a&gt;). (Dawid Weiss)&lt;/p&gt;</comment>
                            <comment id="13792906" author="dweiss" created="Fri, 11 Oct 2013 18:15:52 +0000"  >&lt;p&gt;Applied to branch_4x, lucene_solr_4_5 and trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12608047" name="SOLR-5323.patch" size="2616" author="dweiss" created="Fri, 11 Oct 2013 18:05:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>352640</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 6 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1osrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>352927</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>