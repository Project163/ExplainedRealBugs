<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:09:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6271] ConjunctionSolrSpellChecker wrong check for same string distance</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6271</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;See ConjunctionSolrSpellChecker.java&lt;/p&gt;

&lt;p&gt;try {&lt;br/&gt;
      if (stringDistance == null) &lt;/p&gt;
{
        stringDistance = checker.getStringDistance();
      }
&lt;p&gt; else if (stringDistance != checker.getStringDistance()) &lt;/p&gt;
{
        throw new IllegalArgumentException(
            &quot;All checkers need to use the same StringDistance.&quot;);
      }
&lt;p&gt;    } catch (UnsupportedOperationException uoe) &lt;/p&gt;
{
      // ignore
    }

&lt;p&gt;In line stringDistance != checker.getStringDistance() there is comparing by references. So if you are using 2 or more spellcheckers with same distance algorithm, exception will be thrown anyway.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12729385">SOLR-6271</key>
            <summary>ConjunctionSolrSpellChecker wrong check for same string distance</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdyer">James Dyer</assignee>
                                    <reporter username="elw00d">Igor Kostromin</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Jul 2014 07:16:25 +0000</created>
                <updated>Tue, 18 Apr 2017 16:08:59 +0000</updated>
                            <resolved>Fri, 4 Dec 2015 18:36:16 +0000</resolved>
                                    <version>4.9</version>
                                    <fixVersion>5.5</fixVersion>
                                    <component>spellchecker</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14366989" author="mikolajkania" created="Wed, 18 Mar 2015 11:31:24 +0000"  >&lt;p&gt;This is especially a problem when you want to use DirectSolrSpellChecker with FileBasedSpellChecker. What make things interesting is that WordBreakSpellChecker works fine beacuse its getStringDistance() method throws UnsupportedOperationException, and in ConjunctionSolrSpellChecker there is that work-around for this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (stringDistance == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        stringDistance = checker.getStringDistance();
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (stringDistance != checker.getStringDistance()) {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(
            &lt;span class=&quot;code-quote&quot;&gt;&quot;All checkers need to use the same StringDistance.&quot;&lt;/span&gt;);
      }
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (UnsupportedOperationException uoe) {
      &lt;span class=&quot;code-comment&quot;&gt;// ignore
&lt;/span&gt;    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14367168" author="githubbot" created="Wed, 18 Mar 2015 14:15:28 +0000"  >&lt;p&gt;GitHub user gmcoringa opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/135&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/135&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6271&quot; title=&quot;ConjunctionSolrSpellChecker wrong check for same string distance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6271&quot;&gt;&lt;del&gt;SOLR-6271&lt;/del&gt;&lt;/a&gt;: ConjunctionSolrSpellChecker wrong check for same string distance&lt;/p&gt;

&lt;p&gt;    ConjunctionSolrSpellChecher now uses equals method to check for same string distance.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/elo7/lucene-solr&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/elo7/lucene-solr&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6271&quot; title=&quot;ConjunctionSolrSpellChecker wrong check for same string distance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6271&quot;&gt;&lt;del&gt;SOLR-6271&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/135.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/135.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #135&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 1856fc9bf18dd3d2528c1200e11b15ec122b9b2c&lt;br/&gt;
Author: Fabiano V. Santos &amp;lt;tech+gmcoringa@elo7.com&amp;gt;&lt;br/&gt;
Date:   2015-03-17T16:44:09Z&lt;/p&gt;

&lt;p&gt;    ConjunctionSolrSpellChecher now uses equals method to check for same string distance&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14367170" author="gm_coringa" created="Wed, 18 Mar 2015 14:16:19 +0000"  >&lt;p&gt;Patch based on trunk version from git commit 1e79536e2371737a3732369a0db4022a257be1fe&lt;/p&gt;

&lt;p&gt;Also was created a pull request: &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/135&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/135&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15041819" author="jdyer" created="Fri, 4 Dec 2015 17:32:34 +0000"  >&lt;p&gt;Here is an updated patch with a slightly different unit test.&lt;/p&gt;

&lt;p&gt;This is a trivial fix, but important if we ever implement multiple dictionaries:  &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1074&quot; title=&quot;Support querying multiple dictionaries at once&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-1074&quot;&gt;&lt;del&gt;SOLR-1074&lt;/del&gt;&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2106&quot; title=&quot;Spelling Checking for Multiple Fields&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2106&quot;&gt;SOLR-2106&lt;/a&gt; .&lt;/p&gt;</comment>
                            <comment id="15041829" author="jira-bot" created="Fri, 4 Dec 2015 17:41:19 +0000"  >&lt;p&gt;Commit 1717999 from jdyer@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1717999&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1717999&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6271&quot; title=&quot;ConjunctionSolrSpellChecker wrong check for same string distance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6271&quot;&gt;&lt;del&gt;SOLR-6271&lt;/del&gt;&lt;/a&gt;: fix StringDistance comparison in CSSC. ( This closes #135 )&lt;/p&gt;</comment>
                            <comment id="15041831" author="jira-bot" created="Fri, 4 Dec 2015 17:43:52 +0000"  >&lt;p&gt;Commit 1718000 from jdyer@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1718000&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1718000&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6271&quot; title=&quot;ConjunctionSolrSpellChecker wrong check for same string distance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6271&quot;&gt;&lt;del&gt;SOLR-6271&lt;/del&gt;&lt;/a&gt;: fix StringDistance comparison in CSSC. ( This closes #135 )&lt;/p&gt;</comment>
                            <comment id="15041891" author="githubbot" created="Fri, 4 Dec 2015 18:09:59 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/135&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/135&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15041944" author="jdyer" created="Fri, 4 Dec 2015 18:36:16 +0000"  >&lt;p&gt;Thanks Igor &amp;amp; Fabiano for reporting this one.&lt;/p&gt;</comment>
                            <comment id="15905234" author="asingh2411" created="Fri, 10 Mar 2017 15:14:30 +0000"  >&lt;p&gt;This issue is still occuring in my case, wherein I&apos;m using &lt;em&gt;DirectSolrSpellChecker&lt;/em&gt; and  &lt;em&gt;FileBasedSpellChecker&lt;/em&gt; . The problem is that &lt;em&gt;DirectSolrSpellChecker&lt;/em&gt; is using &lt;b&gt;LuceneLavensteinDistance&lt;/b&gt; while  &lt;em&gt;FileBasedSpellChecker&lt;/em&gt; is using &lt;b&gt;LavensteinDistance&lt;/b&gt; as the StringDistance.&lt;br/&gt;
This is throwing the   &lt;b&gt;IllegalArgumentException( &quot;All checkers need to use the same StringDistance.&quot;);&lt;/b&gt;  .&lt;/p&gt;

&lt;p&gt;What can be the fix to this? &lt;/p&gt;</comment>
                            <comment id="15972895" author="asingh2411" created="Tue, 18 Apr 2017 15:17:29 +0000"  >&lt;p&gt;As of Solr 6.5, this has been changed to &lt;b&gt;stringDistance.equals(checker.getStringDistance())&lt;/b&gt; . &lt;/p&gt;

&lt;p&gt;However, &lt;b&gt;LuceneLevenshteinDistance&lt;/b&gt; does not even override &lt;b&gt;equals&lt;/b&gt; method.  &lt;br/&gt;
This does not solve the problem yet, because this default &lt;b&gt;equals&lt;/b&gt; method anyway compares references.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13064766">SOLR-10513</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12775807" name="SOLR-6271.patch" size="3991" author="jdyer" created="Fri, 4 Dec 2015 17:32:34 +0000"/>
                            <attachment id="12705352" name="SOLR-6271.patch" size="4458" author="gm_coringa" created="Wed, 18 Mar 2015 14:16:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>407459</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 31 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1y45b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>407473</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>