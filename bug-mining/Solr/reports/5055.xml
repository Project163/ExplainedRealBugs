<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:00:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16820] PackageUtils collection validation is more restrictive than CreateCollectionAPI allows</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16820</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;It&apos;s possible to create a collection via the CreateCollectionAPI which &lt;a href=&quot;https://github.com/apache/solr/blob/main/solr/solrj/src/java/org/apache/solr/client/solrj/util/SolrIdentifierValidator.java#L50-L52&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;passes validation from the SolrIdentifierValidation&lt;/a&gt; (a regex which among other elements includes the &apos;.&apos; character), but that same collection name won&apos;t then pass validation when deployed/undeployed via the PackageTool because of the &lt;a href=&quot;https://github.com/apache/solr/blob/main/solr/core/src/java/org/apache/solr/packagemanager/PackageUtils.java#L271&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;packagemanager.PackageUtils validateCollection() method&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;A change &lt;a href=&quot;https://github.com/apache/solr/commit/638fd768ebd7ed7908029ced08e56bed05a4a2a5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;like this, using the existing SolrIdentifierValidator&lt;/a&gt; would bring the two validation steps back in line, although there&apos;s presumably a better approach.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Potential risks&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;As highlighted by Gus Heck &lt;a href=&quot;https://lists.apache.org/thread/h7hnksgqwxxl7nkwkhn01r6jn8xjkjjs&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;in this thread&lt;/a&gt; changing the validation of collection names could be a risky change to make. The source of the PackageUtils regex appears to be &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/994&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/994&lt;/a&gt; from before Solr split from the Lucene project, and it seems that the regex wasn&apos;t crafted for a specific subset of use cases that specifically excluded the &apos;.&apos; character - it just appears to be the regex implemented at the time.&lt;/p&gt;

&lt;p&gt;Using the &lt;tt&gt;SolrIdentifierValidator&lt;/tt&gt; approach mentioned above as an example, other than disallowing a collection name that begins with a &apos;-&apos; character, the &lt;tt&gt;SolrIdentifierValidator.identifierPattern&lt;/tt&gt; would be a strict expansion of the allowed collection names for the &lt;tt&gt;PackageUtils.validateCollections&lt;/tt&gt;. Any other solution (such as &lt;a href=&quot;https://github.com/apache/solr/blame/998fffdccf51a0560589e2cb413e9da127a5f26e/solr/core/src/java/org/apache/solr/packagemanager/PackageUtils.java#L271&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this more naive example&lt;/a&gt;) could similarly mitigate a lot of the potential risk by only expanding the allowed collection names.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13537708">SOLR-16820</key>
            <summary>PackageUtils collection validation is more restrictive than CreateCollectionAPI allows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="epugh">Eric Pugh</assignee>
                                    <reporter username="willdotwhite">Will White</reporter>
                        <labels>
                            <label>packagemanager</label>
                    </labels>
                <created>Thu, 25 May 2023 18:27:45 +0000</created>
                <updated>Fri, 17 Oct 2025 20:05:04 +0000</updated>
                            <resolved>Thu, 22 Jun 2023 12:01:39 +0000</resolved>
                                                    <fixVersion>9.3</fixVersion>
                    <fixVersion>10.0</fixVersion>
                                    <component>Package Manager</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="15000">4h 10m</timespent>
                                <comments>
                            <comment id="17727574" author="gerlowskija" created="Tue, 30 May 2023 15:13:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;As highlighted by Gus Heck in this thread changing the validation of collection names could be a risky change to make&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree with Gus&apos; word of caution in general, but the cluster of tickets (&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8725&quot; title=&quot;Cores, collections, and shards should accept hyphens in identifier name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8725&quot;&gt;&lt;del&gt;SOLR-8725&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8677&quot; title=&quot;SOLR allows creation of shards with invalid names.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8677&quot;&gt;&lt;del&gt;SOLR-8677&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8110&quot; title=&quot;Start enforcing field naming recomendations in next X.0 release?&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8110&quot;&gt;SOLR-8110&lt;/a&gt;, etc.) that set up the name-validation Solr uses today at creation-time were all in by Solr 7.0, so they&apos;ve been around for 3 major versions at this point! And as a purely &quot;widening&quot; change to the package manager, it should be safe by definition.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=willdotwhite&quot; class=&quot;user-hover&quot; rel=&quot;willdotwhite&quot;&gt;willdotwhite&lt;/a&gt; - would you be willing to put together a PR using the SIV-based approach you used &lt;a href=&quot;https://github.com/apache/solr/commit/638fd768ebd7ed7908029ced08e56bed05a4a2a5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="17727656" author="JIRAUSER300510" created="Tue, 30 May 2023 18:47:01 +0000"  >&lt;p&gt;Sure thing &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gerlowskija&quot; class=&quot;user-hover&quot; rel=&quot;gerlowskija&quot;&gt;gerlowskija&lt;/a&gt;, I&apos;d be happy to &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;It&apos;ll likely be Sunday at the earliest (busy week ahead!), hope that&apos;s ok time-wise.&lt;/p&gt;</comment>
                            <comment id="17736094" author="jira-bot" created="Thu, 22 Jun 2023 11:59:27 +0000"  >&lt;p&gt;Commit 5dc56ac473557d04edcfa7af4a9966135daf94ad in solr&apos;s branch refs/heads/main from Will White&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=5dc56ac4735&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=5dc56ac4735&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16820&quot; title=&quot;PackageUtils collection validation is more restrictive than CreateCollectionAPI allows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16820&quot;&gt;&lt;del&gt;SOLR-16820&lt;/del&gt;&lt;/a&gt;: Allow semVer style collection names (amongst others) (#1688)&lt;/p&gt;

&lt;p&gt;The previous collection name validation didn&apos;t match the validation&lt;br/&gt;
used in the CreateCollectionAPI, so it was possible to create a&lt;br/&gt;
collection name (e.g. `foobar-1.2.3`) that wouldn&apos;t pass validation&lt;br/&gt;
at this stage via the PackageTool deploy/undeploy commands.&lt;br/&gt;
---------&lt;/p&gt;

&lt;p&gt;Co-authored-by: Eric Pugh &amp;lt;epugh@opensourceconnections.com&amp;gt;&lt;br/&gt;
Co-authored-by: Kevin Risden &amp;lt;krisden@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17736096" author="jira-bot" created="Thu, 22 Jun 2023 12:00:50 +0000"  >&lt;p&gt;Commit dbf78da59e79716979c29261913c4661e342ac9b in solr&apos;s branch refs/heads/branch_9x from Will White&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=dbf78da59e7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=dbf78da59e7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16820&quot; title=&quot;PackageUtils collection validation is more restrictive than CreateCollectionAPI allows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16820&quot;&gt;&lt;del&gt;SOLR-16820&lt;/del&gt;&lt;/a&gt;: Allow semVer style collection names (amongst others) (#1688)&lt;/p&gt;

&lt;p&gt;The previous collection name validation didn&apos;t match the validation&lt;br/&gt;
used in the CreateCollectionAPI, so it was possible to create a&lt;br/&gt;
collection name (e.g. `foobar-1.2.3`) that wouldn&apos;t pass validation&lt;br/&gt;
at this stage via the PackageTool deploy/undeploy commands.&lt;br/&gt;
---------&lt;/p&gt;

&lt;p&gt;Co-authored-by: Eric Pugh &amp;lt;epugh@opensourceconnections.com&amp;gt;&lt;br/&gt;
Co-authored-by: Kevin Risden &amp;lt;krisden@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17738406" author="jira-bot" created="Thu, 29 Jun 2023 07:57:26 +0000"  >&lt;p&gt;Commit 5dc56ac473557d04edcfa7af4a9966135daf94ad in solr&apos;s branch refs/heads/&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16837&quot; title=&quot;Collocating separate shards of two collections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16837&quot;&gt;&lt;del&gt;SOLR-16837&lt;/del&gt;&lt;/a&gt;-afp-withCollectionShards from Will White&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=5dc56ac4735&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=5dc56ac4735&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16820&quot; title=&quot;PackageUtils collection validation is more restrictive than CreateCollectionAPI allows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16820&quot;&gt;&lt;del&gt;SOLR-16820&lt;/del&gt;&lt;/a&gt;: Allow semVer style collection names (amongst others) (#1688)&lt;/p&gt;

&lt;p&gt;The previous collection name validation didn&apos;t match the validation&lt;br/&gt;
used in the CreateCollectionAPI, so it was possible to create a&lt;br/&gt;
collection name (e.g. `foobar-1.2.3`) that wouldn&apos;t pass validation&lt;br/&gt;
at this stage via the PackageTool deploy/undeploy commands.&lt;br/&gt;
---------&lt;/p&gt;

&lt;p&gt;Co-authored-by: Eric Pugh &amp;lt;epugh@opensourceconnections.com&amp;gt;&lt;br/&gt;
Co-authored-by: Kevin Risden &amp;lt;krisden@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17745769" author="houston" created="Fri, 21 Jul 2023 20:40:37 +0000"  >&lt;p&gt;Closing after the 9.3.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 16 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1i5fk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>