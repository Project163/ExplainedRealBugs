<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:42:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-13778] Windows JDK SSL Test Failure trend: SSLException: Software caused connection abort: recv failed</title>
                <link>https://issues.apache.org/jira/browse/SOLR-13778</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Now that Uwe&apos;s jenkins build has been correctly reporting it&apos;s build results for my &lt;a href=&quot;http://fucit.org/solr-jenkins-reports/failure-report.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;automated reports&lt;/a&gt; to pick up, I&apos;ve noticed a pattern of failures that indicate a definite problem with using SSL on Windows (even with java 11.0.4&lt;br/&gt;
 )&lt;br/&gt;
 The symptommatic stack traces all contain...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;...
   [junit4]    &amp;gt; Caused by: javax.net.ssl.SSLException: Software caused connection abort: recv failed
   [junit4]    &amp;gt;        at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:127)
...
   [junit4]    &amp;gt; Caused by: java.net.SocketException: Software caused connection abort: recv failed
   [junit4]    &amp;gt;        at java.base/java.net.SocketInputStream.socketRead0(Native Method)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I suspect this may be related to &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8209333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8209333&lt;/a&gt; but i have no concrete evidence to back this up.&lt;/p&gt;

&lt;p&gt;I&apos;ll post some details of my analysis in comments...&lt;/p&gt;</description>
                <environment></environment>
        <key id="13257541">SOLR-13778</key>
            <summary>Windows JDK SSL Test Failure trend: SSLException: Software caused connection abort: recv failed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10005">Workaround</resolution>
                                        <assignee username="dweiss">Dawid Weiss</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Sep 2019 00:06:20 +0000</created>
                <updated>Tue, 21 Jan 2020 16:57:00 +0000</updated>
                            <resolved>Fri, 3 Jan 2020 13:16:20 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16932942" author="hossman" created="Thu, 19 Sep 2019 00:23:38 +0000"  >&lt;p&gt;Here&apos;s a full example of what one of these stack traces tends to look like...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;...
   [junit4]    &amp;gt; Caused by: javax.net.ssl.SSLException: Software caused connection abort: recv failed
   [junit4]    &amp;gt;        at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:127)
   [junit4]    &amp;gt;        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:320)
   [junit4]    &amp;gt;        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:263)
   [junit4]    &amp;gt;        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:258)
   [junit4]    &amp;gt;        at java.base/sun.security.ssl.SSLSocketImpl.handleException(SSLSocketImpl.java:1342)
   [junit4]    &amp;gt;        at java.base/sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:844)
   [junit4]    &amp;gt;        at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137)
   [junit4]    &amp;gt;        at org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:153)
   [junit4]    &amp;gt;        at org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:282)
   [junit4]    &amp;gt;        at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:138)
   [junit4]    &amp;gt;        at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:56)
   [junit4]    &amp;gt;        at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259)
   [junit4]    &amp;gt;        at org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:163)
   [junit4]    &amp;gt;        at org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:165)
   [junit4]    &amp;gt;        at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273)
   [junit4]    &amp;gt;        at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)
   [junit4]    &amp;gt;        at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272)
   [junit4]    &amp;gt;        at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)
   [junit4]    &amp;gt;        at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
   [junit4]    &amp;gt;        at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
   [junit4]    &amp;gt;        at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
   [junit4]    &amp;gt;        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)
   [junit4]    &amp;gt;        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
   [junit4]    &amp;gt;        at org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:564)
   [junit4]    &amp;gt;        ... 46 more
   [junit4]    &amp;gt;        Suppressed: java.net.SocketException: Software caused connection abort: socket write error
   [junit4]    &amp;gt;                at java.base/java.net.SocketOutputStream.socketWrite0(Native Method)
   [junit4]    &amp;gt;                at java.base/java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:110)
   [junit4]    &amp;gt;                at java.base/java.net.SocketOutputStream.write(SocketOutputStream.java:150)
   [junit4]    &amp;gt;                at java.base/sun.security.ssl.SSLSocketOutputRecord.encodeAlert(SSLSocketOutputRecord.java:81)
   [junit4]    &amp;gt;                at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:351)
   [junit4]    &amp;gt;                ... 68 more
   [junit4]    &amp;gt; Caused by: java.net.SocketException: Software caused connection abort: recv failed
   [junit4]    &amp;gt;        at java.base/java.net.SocketInputStream.socketRead0(Native Method)
   [junit4]    &amp;gt;        at java.base/java.net.SocketInputStream.socketRead(SocketInputStream.java:115)
   [junit4]    &amp;gt;        at java.base/java.net.SocketInputStream.read(SocketInputStream.java:168)
   [junit4]    &amp;gt;        at java.base/java.net.SocketInputStream.read(SocketInputStream.java:140)
   [junit4]    &amp;gt;        at java.base/sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:448)
   [junit4]    &amp;gt;        at java.base/sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(SSLSocketInputRecord.java:68)
   [junit4]    &amp;gt;        at java.base/sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1132)
   [junit4]    &amp;gt;        at java.base/sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:828)
   [junit4]    &amp;gt;        ... 64 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Allthough it&apos;s not obvious from the public view of my reports, grepping all the available logs (available for all builds with any test failures in the past 7 days) show these types of Exceptions &lt;b&gt;only&lt;/b&gt; happen on Uwe&apos;s jenkins server, and only on Windows builds (Uwe&apos;s jenkins server being the only one running tests on Windows)...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ zgrep -c &apos;javax.net.ssl.SSLException: Software caused connection abort: recv failed&apos; */*/*/jenkins.log.txt.gz | grep -v &apos;:0$&apos;
thetaphi/Lucene-Solr-8.x-Windows/447/jenkins.log.txt.gz:5
thetaphi/Lucene-Solr-8.x-Windows/453/jenkins.log.txt.gz:14
thetaphi/Lucene-Solr-master-Windows/8135/jenkins.log.txt.gz:4
thetaphi/Lucene-Solr-master-Windows/8136/jenkins.log.txt.gz:2
thetaphi/Lucene-Solr-master-Windows/8137/jenkins.log.txt.gz:6
thetaphi/Lucene-Solr-master-Windows/8139/jenkins.log.txt.gz:12
thetaphi/Lucene-Solr-master-Windows/8142/jenkins.log.txt.gz:5
thetaphi/Lucene-Solr-master-Windows/8143/jenkins.log.txt.gz:6
thetaphi/Lucene-Solr-master-Windows/8146/jenkins.log.txt.gz:6
thetaphi/Lucene-Solr-master-Windows/8148/jenkins.log.txt.gz:6
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is inspite of the fact thta Uwe&apos;s jenkins server runs Linux jobs almost 4 times as often as it runs tests on Windows...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ find thetaphi/ -mindepth 2 -maxdepth 2 | perl -ple &apos;s{.*-(.*?-.*?)/\d+}{$1}&apos; | sort | uniq -c
    132 8.x-Linux
     36 8.x-MacOSX
     36 8.x-Solaris
     37 8.x-Windows
    136 master-Linux
     36 master-MacOSX
     38 master-Windows
$ find thetaphi/ -mindepth 2 -maxdepth 2 | perl -ple &apos;s{.*-(.*?)/\d+}{$1}&apos; | sort | uniq -c
    268 Linux
     72 MacOSX
     36 Solaris
     75 Windows
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It&apos;s also worth noting that a cursory glance indicates that the root cause (SocketException) does not seem to occur in any build, regardless of server/OS, &lt;b&gt;except&lt;/b&gt; when running as part of an SSL Socket (On the above mentioned thetaphi Windows jobs)...&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ zgrep &apos;java.net.SocketException: Software caused connection abort: recv failed&apos; */*/*/jenkins.log.txt.gz | wc -l
66
$ zgrep &apos;javax.net.ssl.SSLException: Software caused connection abort: recv failed&apos; */*/*/jenkins.log.txt.gz | wc -l
66
$ zgrep &apos;javax.net.ssl.SSLException: Software caused connection abort: recv failed&apos; thetaphi/*Windows/*/jenkins.log.txt.gz | wc -l
66
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;
&lt;p&gt;My best guess as to the root cause of this bug in the JVM is &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8209333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8209333&lt;/a&gt; since it&apos;s one of the few SSL related bugs i can find that meets all of the following criteria:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;mentions &apos;Software caused connection abort: recv failed&apos;&lt;/li&gt;
	&lt;li&gt;says it &quot;Affects Version/s: 11&quot;&lt;/li&gt;
	&lt;li&gt;does not explicitly say it&apos;s fixed in 11.0.4
	&lt;ul&gt;
		&lt;li&gt;Indicates &quot;Fix Version/s: 12; Resolved In Build: b25&quot; w/backports for 12.0.1-master and 13-b01&lt;/li&gt;
		&lt;li&gt;i still don&apos;t understand openjdk&apos;s jira conventions very well, but the only commit linked to the issue is in &apos;.../jdk/jdk12/rev/8a61a04c456c&apos; so i&apos;m pretty sure that &quot;b25&quot; corrisponds to an build jdk12.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;mentions Windows
	&lt;ul&gt;
		&lt;li&gt;not explicitly, but the test case attached by the reporter uses Windows file paths indicating he was was seeing the issue when running tests on Windows JVMs&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It&apos;s also worth noting that the person who filed the issue indicated that the problem &amp;amp; testcase was specific to &apos;&#8220;setNeedClientAuth&#8221; is false.&apos; ... but there are no comments from an openjdk devs on this issue (other then committing a fix) let alone on the specific nature of when this bug manifests, so it&apos;s possible that the original reporter only ever tested with clientAuth=false and that particular bug is more general then that. I&apos;m not sure, but AFAICT the resulting commit doesn&apos;t seem to be in any sort of clientAuth specific code paths&lt;/p&gt;

&lt;p&gt;In our own test logs, we do see some of these failures occurring even when &lt;tt&gt;clientAuth==true&lt;/tt&gt; ...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ zgrep -l &apos;javax.net.ssl.SSLException: Software caused connection abort: recv failed&apos; thetaphi/*Windows/*/jenkins.log.txt.gz | xargs zgrep &apos;Randomized ssl (true)&apos; | perl -ple &apos;s/.*(clientAuth\s+\(.*?\)).*/$1/&apos; | sort | uniq -c
     28 clientAuth (false)
      2 clientAuth (true)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2 things to remember when considering this bit of information:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;by default our build system only records log output for tests that fail, so there&apos;s no way to know exactly how many tests &lt;em&gt;passed&lt;/em&gt; using a SSL + w/ particular clientAuth value&lt;/li&gt;
	&lt;li&gt;the (default) odds of using a particular clientAuth value vary base on &lt;tt&gt;tests.nightly&lt;/tt&gt; and &lt;tt&gt;tests.multiplier&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We can however look at &lt;b&gt;all&lt;/b&gt; failures that occur on Uwe&apos;s jenkins jobs, and what their clientAuth values were, to try and see if there is any obvious corrolation/differnece...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ zgrep &apos;Randomized ssl (true)&apos; thetaphi/*/*/jenkins.log.txt.gz | perl -ple &apos;s/.*(clientAuth\s+\(.*?\)).*/$1/&apos; | sort | uniq -c
     56 clientAuth (false)
      8 clientAuth (true)
$ zgrep &apos;Randomized ssl (true)&apos; thetaphi/*Windows/*/jenkins.log.txt.gz | perl -ple &apos;s/.*(clientAuth\s+\(.*?\)).*/$1/&apos; | sort | uniq -c
     53 clientAuth (false)
      4 clientAuth (true)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So that tells us:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;of all the failures on Uwe&apos;s jenkins machine where we know wether SSL was used or not, there were 64 failures where SSL was used&lt;/li&gt;
	&lt;li&gt;of those 64, 12% (8) used clientAuth&lt;/li&gt;
	&lt;li&gt;of those 64,  89% (57) happened on windows
	&lt;ul&gt;
		&lt;li&gt;of those 57, 50% (30) where due to this SSL exception, and only 2 has clientAuth==true&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;(Perhaps the bug is just more likely to happen when clients send a larger amount of data, and maybe that generally happens more when clientAuth is in use?)&lt;/p&gt;</comment>
                            <comment id="16949681" author="hossman" created="Fri, 11 Oct 2019 17:54:19 +0000"  >
&lt;p&gt;I just realized we&apos;re seeing a slightly &lt;em&gt;different&lt;/em&gt; SSLException from Uwe&apos;s java13 windows VMs...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]    &amp;gt; Throwable #1: org.apache.solr.client.solrj.SolrServerException: IOException occurred when talking to server at: https://127.0.0.1:551
21/solr
   [junit4]    &amp;gt;        at __randomizedtesting.SeedInfo.seed([E2C1EFE3F69FB5C6:35E9A23BE77FFC28]:0)
   [junit4]    &amp;gt;        at org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:679)
   [junit4]    &amp;gt;        at org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:265)
   [junit4]    &amp;gt;        at org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:248)
   [junit4]    &amp;gt;        at org.apache.solr.client.solrj.impl.LBSolrClient.doRequest(LBSolrClient.java:368)
   [junit4]    &amp;gt;        at org.apache.solr.client.solrj.impl.LBSolrClient.request(LBSolrClient.java:296)
   [junit4]    &amp;gt;        at org.apache.solr.client.solrj.impl.BaseCloudSolrClient.sendRequest(BaseCloudSolrClient.java:1128)
   [junit4]    &amp;gt;        at org.apache.solr.client.solrj.impl.BaseCloudSolrClient.requestWithRetryOnStaleState(BaseCloudSolrClient.java:897)
   [junit4]    &amp;gt;        at org.apache.solr.client.solrj.impl.BaseCloudSolrClient.request(BaseCloudSolrClient.java:829)
   [junit4]    &amp;gt;        at org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:211)
   [junit4]    &amp;gt;        at org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:228)
   [junit4]    &amp;gt;        at org.apache.solr.cloud.MiniSolrCloudCluster.deleteAllCollections(MiniSolrCloudCluster.java:549)
   [junit4]    &amp;gt;        at org.apache.solr.cloud.TestCloudSearcherWarming.tearDown(TestCloudSearcherWarming.java:79)
   [junit4]    &amp;gt;        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
   [junit4]    &amp;gt;        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
   [junit4]    &amp;gt;        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
   [junit4]    &amp;gt;        at java.base/java.lang.reflect.Method.invoke(Method.java:567)
   [junit4]    &amp;gt;        at java.base/java.lang.Thread.run(Thread.java:830)
   [junit4]    &amp;gt; Caused by: javax.net.ssl.SSLException: An established connection was aborted by the software in your host machine
   [junit4]    &amp;gt;        at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:127)
   [junit4]    &amp;gt;        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:324)
   [junit4]    &amp;gt;        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:267)
   [junit4]    &amp;gt;        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:262)
   [junit4]    &amp;gt;        at java.base/sun.security.ssl.SSLSocketImpl.handleException(SSLSocketImpl.java:1652)
   [junit4]    &amp;gt;        at java.base/sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:1038)
   [junit4]    &amp;gt;        at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137)
   [junit4]    &amp;gt;        at org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:153)
   [junit4]    &amp;gt;        at org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:282)
   [junit4]    &amp;gt;        at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:138)
   [junit4]    &amp;gt;        at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:56)
   [junit4]    &amp;gt;        at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259)
   [junit4]    &amp;gt;        at org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:163)
   [junit4]    &amp;gt;        at org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:165)
   [junit4]    &amp;gt;        at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273)
   [junit4]    &amp;gt;        at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)
   [junit4]    &amp;gt;        at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272)
   [junit4]    &amp;gt;        at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)
   [junit4]    &amp;gt;        at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
   [junit4]    &amp;gt;        at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
   [junit4]    &amp;gt;        at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
   [junit4]    &amp;gt;        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)
   [junit4]    &amp;gt;        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
   [junit4]    &amp;gt;        at org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:564)
   [junit4]    &amp;gt;        ... 47 more
   [junit4]    &amp;gt;        Suppressed: java.net.SocketException: An established connection was aborted by the software in your host machine
   [junit4]    &amp;gt;                at java.base/sun.nio.ch.NioSocketImpl.implWrite(NioSocketImpl.java:421)
   [junit4]    &amp;gt;                at java.base/sun.nio.ch.NioSocketImpl.write(NioSocketImpl.java:441)
   [junit4]    &amp;gt;                at java.base/sun.nio.ch.NioSocketImpl$2.write(NioSocketImpl.java:825)
   [junit4]    &amp;gt;                at java.base/java.net.Socket$SocketOutputStream.write(Socket.java:989)
   [junit4]    &amp;gt;                at java.base/sun.security.ssl.SSLSocketOutputRecord.encodeAlert(SSLSocketOutputRecord.java:82)
   [junit4]    &amp;gt;                at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:355)
   [junit4]    &amp;gt;                ... 69 more
   [junit4]    &amp;gt; Caused by: java.net.SocketException: An established connection was aborted by the software in your host machine
   [junit4]    &amp;gt;        at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:326)
   [junit4]    &amp;gt;        at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:351)
   [junit4]    &amp;gt;        at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:802)
   [junit4]    &amp;gt;        at java.base/java.net.Socket$SocketInputStream.read(Socket.java:919)
   [junit4]    &amp;gt;        at java.base/sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:450)
   [junit4]    &amp;gt;        at java.base/sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(SSLSocketInputRecord.java:68)
   [junit4]    &amp;gt;        at java.base/sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1409)
   [junit4]    &amp;gt;        at java.base/sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:1022)
   [junit4]    &amp;gt;        ... 65 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As before, these only happen on Windows jobs (and Uwe is the only one running windows jobs) and the root cause SocketException is only reported (in this case as both &apos;Caused By&apos; and &apos;Suppressed&apos;) when they are part of these SSLExceptions...&lt;/p&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ zgrep -c &apos;javax.net.ssl.SSLException: An established connection was aborted by the software in your host machine&apos; */*/*/jenkins.log.txt.gz | grep -v &apos;:0$&apos;
thetaphi/Lucene-Solr-8.x-Windows/489/jenkins.log.txt.gz:6
thetaphi/Lucene-Solr-8.x-Windows/491/jenkins.log.txt.gz:6
thetaphi/Lucene-Solr-8.x-Windows/494/jenkins.log.txt.gz:5
thetaphi/Lucene-Solr-8.x-Windows/499/jenkins.log.txt.gz:6
thetaphi/Lucene-Solr-master-Windows/8177/jenkins.log.txt.gz:11
thetaphi/Lucene-Solr-master-Windows/8180/jenkins.log.txt.gz:11
thetaphi/Lucene-Solr-master-Windows/8181/jenkins.log.txt.gz:6
thetaphi/Lucene-Solr-master-Windows/8183/jenkins.log.txt.gz:23

$ zgrep &apos;javax.net.ssl.SSLException: An established connection was aborted by the software in your host machine&apos; */*/*/jenkins.log.txt.gz | wc -l
74
$ zgrep &apos;java.net.SocketException: An established connection was aborted by the software in your host machine&apos; */*/*/jenkins.log.txt.gz | wc -l
148
$ zgrep &apos;java.net.SocketException: An established connection was aborted by the software in your host machine&apos; thetaphi/*Windows/*/jenkins.log.txt.gz | wc -l
148
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It&apos;s probably worth noting for posterity the java-version info for both types of exceptions...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ zgrep -l &apos;javax.net.ssl.SSLException: Software caused connection abort: recv failed&apos; thetaphi/*Windows/*/jenkins.log.txt.gz | xargs zgrep -h -F &apos;[java-info]&apos; | grep -v -E &apos;java version|Test args|Runtime Environment&apos; | sort | uniq -c
      3 [java-info] OpenJDK 64-Bit Server VM (11.0.4+11, AdoptOpenJDK)
      5 [java-info] OpenJDK 64-Bit Server VM (12.0.1+12, AdoptOpenJDK)
$ zgrep -l &apos;javax.net.ssl.SSLException: An established connection was aborted by the software in your host machine&apos; thetaphi/*Windows/*/jenkins.log.txt.gz | xargs zgrep -h -F &apos;[java-info]&apos; | grep -v -E &apos;java version|Test args|Runtime Environment&apos; | sort | uniq -c
      5 [java-info] OpenJDK 64-Bit Server VM (13+33, Oracle Corporation)
      3 [java-info] OpenJDK 64-Bit Server VM (14-ea+14-570, Oracle Corporation)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;hr /&gt;

&lt;p&gt;Uwe: any thoughts on how we should deal with these? ... they currently reprsent the cause of the biggest chunk of recurring failures in Solr test cases.&lt;/p&gt;</comment>
                            <comment id="16953886" author="hossman" created="Thu, 17 Oct 2019 16:21:32 +0000"  >&lt;p&gt;Apparently i keep forgetting to actually tag &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=uschindler&quot; class=&quot;user-hover&quot; rel=&quot;uschindler&quot;&gt;uschindler&lt;/a&gt; on this Jira so he&apos;ll see it.&lt;/p&gt;</comment>
                            <comment id="16953897" author="thetaphi" created="Thu, 17 Oct 2019 16:32:47 +0000"  >&lt;p&gt;No idea how to handle that. Should I reopen the JDK bug report? I can do this, as I have issue tracker access.&lt;br/&gt;
Does it happen with later versions, too?&lt;/p&gt;</comment>
                            <comment id="16953905" author="thetaphi" created="Thu, 17 Oct 2019 16:36:20 +0000"  >&lt;p&gt;Ah sorry you also posted a different stack trace with jdk 13.&lt;/p&gt;</comment>
                            <comment id="16954128" author="hossman" created="Thu, 17 Oct 2019 21:41:57 +0000"  >&lt;blockquote&gt;&lt;p&gt;Should I reopen the JDK bug report?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t know for certain that that JDK-8209333 is the problem we are seeing &#8211; particularly since (AFAICT) we&apos;re seeing the same basic problem (w/slightly differently worded error messages) on JDK13.  It was just my best guess at the time.&lt;/p&gt;

&lt;p&gt;Since i can&apos;t reproduce it locally, I have no clue how to go about trying to createa test case to file a new JDK jira.&lt;/p&gt;

&lt;p&gt;The only things i know for certain are:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;the &lt;em&gt;&lt;b&gt;only&lt;/b&gt;&lt;/em&gt; times we see either the SSLException, or the root cause of the reported SSLException, in any jenkins failure log is from your Windows VM.&lt;/li&gt;
	&lt;li&gt;these SSLExceptions acount for ~25% of all of our jenkins build failures, and ~66% of all windows jenkins build failures
	&lt;ul&gt;
		&lt;li&gt;(they occur in the logs for 14/55 failed builds, 14/21 failed windows builds &amp;#8211; but sometimes we might be seeing multiple test failures from these exceptions in a single build, and other times we might be seeing unrelated failures from other tests in the same builds as a test that failed for this reason)&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16993804" author="dweiss" created="Wed, 11 Dec 2019 18:30:17 +0000"  >&lt;p&gt;The LegacyCloudClusterPropTest fails for me reliably on Windows. I tried:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ant test -Dtestcase=LegacyCloudClusterPropTest -Dtests.seed=deadbeef -Dargs=&lt;span class=&quot;code-quote&quot;&gt;&quot;-Djavax.net.debug=all&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I attach three dumps &amp;#8211; two runs without net dumps (you can see it&apos;s consistent) and one with (didn&apos;t have time to analyze).&lt;/p&gt;</comment>
                            <comment id="16993806" author="hossman" created="Wed, 11 Dec 2019 18:34:23 +0000"  >&lt;p&gt;FWIW: I think what would be most helpful to try and move forward with this is if someone who has access to a windows VM and some time to dig into it could:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;try to find an existing test that seems to tickle this bug often
	&lt;ul&gt;
		&lt;li&gt;ideally on branch 8x where we can show it fails with java&amp;gt;11, but passes with java==8&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;if possible, modify the test to:
	&lt;ul&gt;
		&lt;li&gt;&lt;em&gt;force&lt;/em&gt; ssl on every seed &amp;#64;RandomizeSSL can do this&lt;/li&gt;
		&lt;li&gt;slim down the test to remove anything that doesn&apos;t seem to contribute to the failure&lt;/li&gt;
		&lt;li&gt;see if anything pops out that suggests what the root cause is, even if not...&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;run the test with &lt;tt&gt;javax.net.debug=all&lt;/tt&gt; enabled on windows
	&lt;ul&gt;
		&lt;li&gt;using both java11 and java8 (and maybe java13)&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;...then we can take those javax.net.debug logs to the jetty discussion list, or to the openjdk SSL list, and ask &quot;WTF is happening here on these diff versions of java?&lt;/p&gt;

&lt;p&gt;/cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dweiss&quot; class=&quot;user-hover&quot; rel=&quot;dweiss&quot;&gt;dweiss&lt;/a&gt; following up on discussion in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14033&quot; title=&quot;Fix Hadoop tests with security manager&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14033&quot;&gt;&lt;del&gt;SOLR-14033&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16993835" author="rcmuir" created="Wed, 11 Dec 2019 19:10:13 +0000"  >&lt;p&gt;I agree with initial theory that it looks like JDK-8209333. Since it is specific to TLS 1.3, would it be difficult to try just disabling TLS 1.3 to work around the issue? Probably makes sense why you see don&apos;t see it on 8 or older versions since they didn&apos;t support TLS 1.3 at all&lt;/p&gt;</comment>
                            <comment id="16993840" author="rcmuir" created="Wed, 11 Dec 2019 19:20:31 +0000"  >&lt;p&gt;As a quick hack you can edit &lt;tt&gt;$JAVA_HOME/conf/security/java.security&lt;/tt&gt; and add &lt;tt&gt;TLSv1.3&lt;/tt&gt; to the list of &lt;tt&gt;jdk.tls.disabledAlgorithms&lt;/tt&gt;. Then run the test and see if it passes.&lt;/p&gt;

&lt;p&gt;The default for this security property on my system looks like this:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;jdk.tls.disabledAlgorithms=SSLv3, RC4, DES, MD5withRSA, DH keySize &amp;lt; 1024, \
    EC keySize &amp;lt; 224, 3DES_EDE_CBC, anon, NULL
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add TLSv1.3 to the end of the list like this:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;jdk.tls.disabledAlgorithms=SSLv3, RC4, DES, MD5withRSA, DH keySize &amp;lt; 1024, \
    EC keySize &amp;lt; 224, 3DES_EDE_CBC, anon, NULL, TLSv1.3
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I confirmed that it works by fetching &lt;a href=&quot;https://suche.org/SslHandshakeInfo&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://suche.org/SslHandshakeInfo&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16993845" author="rcmuir" created="Wed, 11 Dec 2019 19:30:02 +0000"  >&lt;p&gt;There is also related bug (fixed only in 14 it seems), again with TLSv1.3: &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8224984&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8224984&lt;/a&gt;&lt;br/&gt;
So it may explain some of the other related issues you see.&lt;/p&gt;</comment>
                            <comment id="16993859" author="rcmuir" created="Wed, 11 Dec 2019 19:50:23 +0000"  >&lt;p&gt;Jetty blog about TLS 1.3 struggles: &lt;a href=&quot;https://webtide.com/openjdk-11-and-tls-1-3-issues/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://webtide.com/openjdk-11-and-tls-1-3-issues/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It includes snippets of how to disable it in code or jetty.xml, so that users don&apos;t run into these issues.&lt;/p&gt;</comment>
                            <comment id="16993896" author="dweiss" created="Wed, 11 Dec 2019 21:02:32 +0000"  >&lt;p&gt;Thanks. I&apos;ll try all the suggestions but tomorrow. Will get back to you with results.&lt;/p&gt;</comment>
                            <comment id="16994611" author="dweiss" created="Thu, 12 Dec 2019 12:37:32 +0000"  >&lt;p&gt;So, this one was fun. Please read if you like good suspense...&lt;/p&gt;

&lt;p&gt;The bug reproduces for me on Windows without any problems on newest JDKs (openjdk-11+28, openjdk-13+33). &lt;br/&gt;
 I used an older JDK (11.0.4+11) to dump parallel logs from Linux and Windows. Linux passes, Windows doesn&apos;t.&lt;/p&gt;

&lt;p&gt;Disabling TLS1.3 at JVM level doesn&apos;t help (although you can see int the logs that TLS13 is no longer used in the communication) - see &quot;adoptopenjdk-11.0.4+11-no-tls13&quot; folder in the attached zipped logs.&lt;/p&gt;

&lt;p&gt;I see a bunch of odd error messages in the log but I don&apos;t know the SSL layer well enough to tell what they&apos;re actually doing and why. The oddest one to me is the perceived assymmetry in inbound/ outbound sockets:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  2&amp;gt; javax.net.ssl|ERROR|6B|closeThreadPool-31-thread-2|2019-12-12 10:49:45.234 WAT|TransportContext.java:312|Fatal (INTERNAL_ERROR): closing inbound before receiving peer&apos;s close_notify 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The stack trace of the recv exception contains so many frames that I decided to dump full logs (so that apache&apos;s httpclient is included).&lt;/p&gt;

&lt;p&gt;&quot;adoptopenjdk-11.0.4+11-full-debug&quot; contain these logs (with full debug from javax.net and jetty/ httpclient loggers). The&lt;br/&gt;
 problem/ difference starts around this moment:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
o.a.h.i.e.MainClientExec Executing request GET /solr/admin/collections?action=CLUSTERPROP&amp;amp;name=legacyCloud&amp;amp;val=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;amp;wt=javabin&amp;amp;version=2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;While the linux code receives a close_notify at SSL level and then proceeds to write to a broken pipe:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   [junit4]   2&amp;gt; javax.net.ssl|WARNING|10|TEST-LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud-seed#[DEADBEEF]|2019-12-12 12:44:56.450 WAT|TransportContext.java:245|Warning: failed to send warning alert CLOSE_NOTIFY (
   [junit4]   2&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;throwable&quot;&lt;/span&gt; : {
   [junit4]   2&amp;gt;   java.net.SocketException: Broken pipe (Write failed)
   [junit4]   2&amp;gt;   	at java.base/java.net.SocketOutputStream.socketWrite0(Native Method)
   [junit4]   2&amp;gt;   	at java.base/java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:110)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;...and httpclient retries:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   [junit4]   2&amp;gt; javax.net.ssl|DEBUG|10|TEST-LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud-seed#[DEADBEEF]|2019-12-12 12:44:56.450 WAT|SSLSocketImpl.java:636|close inbound of SSLSocket
   [junit4]   2&amp;gt; javax.net.ssl|DEBUG|10|TEST-LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud-seed#[DEADBEEF]|2019-12-12 12:44:56.450 WAT|SSLSocketImpl.java:473|duplex close of SSLSocket
   [junit4]   2&amp;gt; javax.net.ssl|DEBUG|10|TEST-LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud-seed#[DEADBEEF]|2019-12-12 12:44:56.450 WAT|SSLSocketImpl.java:1381|close the SSL connection (passive)
   [junit4]   2&amp;gt; ## 7753 DEBUG (TEST-LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud-seed#[DEADBEEF]) [     ] o.a.h.i.c.DefaultManagedHttpClientConnection http-outgoing-0: Shutdown connection
   [junit4]   2&amp;gt; ## 7753 DEBUG (TEST-LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud-seed#[DEADBEEF]) [     ] o.a.h.i.e.MainClientExec Connection discarded
   [junit4]   2&amp;gt; ## 7753 DEBUG (TEST-LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud-seed#[DEADBEEF]) [     ] o.a.h.i.c.PoolingHttpClientConnectionManager Connection released: [id: 0][route: {s}-&amp;gt;https:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:36121][state: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.solr.client.solrj.impl.HttpSolrClient][total kept alive: 0; route allocated: 0 of 10000; total allocated: 0 of 10000]
&lt;/span&gt;   [junit4]   2&amp;gt; ## 7753 DEBUG (TEST-LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud-seed#[DEADBEEF]) [     ] o.a.s.c.s.i.SolrHttpRequestRetryHandler Retry http request 1 out of 1
   [junit4]   2&amp;gt; ## 7753 DEBUG (TEST-LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud-seed#[DEADBEEF]) [     ] o.a.s.c.s.i.SolrHttpRequestRetryHandler Retry, request should be idempotent
   [junit4]   2&amp;gt; ## 7753 INFO  (TEST-LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud-seed#[DEADBEEF]) [     ] o.a.h.i.e.RetryExec I/O exception (org.apache.http.NoHttpResponseException) caught when processing request to {s}-&amp;gt;https:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:36121: The target server failed to respond&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the Windows counterpart fails on recv &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;...&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   [junit4]   2&amp;gt; javax.net.ssl|WARNING|11|TEST-LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud-seed#[DEADBEEF]|2019-12-12 12:35:49.820 WAT|SSLSocketImpl.java:1289|handling exception (
   [junit4]   2&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;throwable&quot;&lt;/span&gt; : {
   [junit4]   2&amp;gt;   java.net.SocketException: Software caused connection abort: recv failed
   [junit4]   2&amp;gt;   	at java.base/java.net.SocketInputStream.socketRead0(Native Method)
   [junit4]   2&amp;gt;   	at java.base/java.net.SocketInputStream.socketRead(SocketInputStream.java:115)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and then fails to retry &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/warning.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   [junit4]   2&amp;gt; ## 18393 DEBUG (TEST-LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud-seed#[DEADBEEF]) [     ] o.a.h.i.c.DefaultManagedHttpClientConnection http-outgoing-0: Close connection
   [junit4]   2&amp;gt; javax.net.ssl|DEBUG|11|TEST-LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud-seed#[DEADBEEF]|2019-12-12 12:35:49.825 WAT|SSLSocketImpl.java:670|close outbound of SSLSocket
   [junit4]   2&amp;gt; javax.net.ssl|DEBUG|11|TEST-LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud-seed#[DEADBEEF]|2019-12-12 12:35:49.825 WAT|SSLSocketImpl.java:636|close inbound of SSLSocket
   [junit4]   2&amp;gt; javax.net.ssl|WARNING|11|TEST-LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud-seed#[DEADBEEF]|2019-12-12 12:35:49.825 WAT|TransportContext.java:278|Closed transport, general or untracked problem
   [junit4]   2&amp;gt; ## 18394 DEBUG (TEST-LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud-seed#[DEADBEEF]) [     ] o.a.h.i.c.DefaultManagedHttpClientConnection http-outgoing-0: Shutdown connection
   [junit4]   2&amp;gt; ## 18394 DEBUG (TEST-LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud-seed#[DEADBEEF]) [     ] o.a.h.i.e.MainClientExec Connection discarded
   [junit4]   2&amp;gt; ## 18394 DEBUG (TEST-LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud-seed#[DEADBEEF]) [     ] o.a.h.i.c.PoolingHttpClientConnectionManager Connection released: [id: 0][route: {s}-&amp;gt;https:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:56646][state: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.solr.client.solrj.impl.HttpSolrClient][total kept alive: 0; route allocated: 0 of 10000; total allocated: 0 of 10000]
&lt;/span&gt;   [junit4]   2&amp;gt; ## 18394 DEBUG (TEST-LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud-seed#[DEADBEEF]) [     ] o.a.s.c.s.i.SolrHttpRequestRetryHandler Retry http request 1 out of 1
   [junit4]   2&amp;gt; ## 18394 DEBUG (TEST-LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud-seed#[DEADBEEF]) [     ] o.a.s.c.s.i.SolrHttpRequestRetryHandler Do not retry, non retriable &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;javax.net.ssl.SSLException
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Look at the last line though:&#160;note the exception type:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SolrHttpRequestRetryHandler Do not retry, non retriable &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;javax.net.ssl.SSLException
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;ve dumped the whole exception, including suppressions (sorry, it is long but so is Ulysses and many people like it):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
10810 INFO  (TEST-LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud-seed#[DEADBEEF]) [     ] o.a.s.c.s.i.SolrHttpRequestRetryHandler Do not retry, non retriable &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;javax.net.ssl.SSLException
          =&amp;gt; javax.net.ssl.SSLException: Software caused connection abort: recv failed
	at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:127)
javax.net.ssl.SSLException: Software caused connection abort: recv failed
	at sun.security.ssl.Alert.createSSLException(Alert.java:127) ~[?:?]
	at sun.security.ssl.TransportContext.fatal(TransportContext.java:320) ~[?:?]
	at sun.security.ssl.TransportContext.fatal(TransportContext.java:263) ~[?:?]
	at sun.security.ssl.TransportContext.fatal(TransportContext.java:258) ~[?:?]
	at sun.security.ssl.SSLSocketImpl.handleException(SSLSocketImpl.java:1315) ~[?:?]
	at sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:839) ~[?:?]
	at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137) ~[httpcore-4.4.10.jar:4.4.10]
	at org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:153) ~[httpcore-4.4.10.jar:4.4.10]
	at org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:282) ~[httpcore-4.4.10.jar:4.4.10]
	at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:138) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:56) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259) ~[httpcore-4.4.10.jar:4.4.10]
	at org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:163) ~[httpcore-4.4.10.jar:4.4.10]
	at org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:165) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273) ~[httpcore-4.4.10.jar:4.4.10]
	at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125) ~[httpcore-4.4.10.jar:4.4.10]
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:564) ~[main/:?]
	at org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:265) ~[main/:?]
	at org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:248) ~[main/:?]
	at org.apache.solr.client.solrj.impl.LBSolrClient.doRequest(LBSolrClient.java:368) ~[main/:?]
	at org.apache.solr.client.solrj.impl.LBSolrClient.request(LBSolrClient.java:296) ~[main/:?]
	at org.apache.solr.client.solrj.impl.BaseCloudSolrClient.sendRequest(BaseCloudSolrClient.java:1143) ~[main/:?]
	at org.apache.solr.client.solrj.impl.BaseCloudSolrClient.requestWithRetryOnStaleState(BaseCloudSolrClient.java:906) ~[main/:?]
	at org.apache.solr.client.solrj.impl.BaseCloudSolrClient.request(BaseCloudSolrClient.java:838) ~[main/:?]
	at org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:207) ~[main/:?]
	at org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:224) ~[main/:?]
	at org.apache.solr.cloud.LegacyCloudClusterPropTest.createAndTest(LegacyCloudClusterPropTest.java:88) ~[test/:?]
	at org.apache.solr.cloud.LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud(LegacyCloudClusterPropTest.java:80) ~[test/:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
	at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1754) ~[randomizedtesting-runner-2.7.5.jar:?]
	at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:942) ~[randomizedtesting-runner-2.7.5.jar:?]
	at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:978) ~[randomizedtesting-runner-2.7.5.jar:?]
	at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:992) ~[randomizedtesting-runner-2.7.5.jar:?]
	at com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:57) ~[randomizedtesting-runner-2.7.5.jar:?]
	at org.apache.lucene.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:49) ~[main/:?]
	at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45) ~[main/:?]
	at org.apache.lucene.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:48) ~[main/:?]
	at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64) ~[main/:?]
	at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47) ~[main/:?]
	at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) ~[randomizedtesting-runner-2.7.5.jar:?]
	at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368) ~[randomizedtesting-runner-2.7.5.jar:?]
	at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:817) ~[randomizedtesting-runner-2.7.5.jar:?]
	at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:468) ~[randomizedtesting-runner-2.7.5.jar:?]
	at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:951) ~[randomizedtesting-runner-2.7.5.jar:?]
	at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:836) ~[randomizedtesting-runner-2.7.5.jar:?]
	at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:887) ~[randomizedtesting-runner-2.7.5.jar:?]
	at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:898) ~[randomizedtesting-runner-2.7.5.jar:?]
	at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) ~[randomizedtesting-runner-2.7.5.jar:?]
	at com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:57) ~[randomizedtesting-runner-2.7.5.jar:?]
	at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45) ~[main/:?]
	at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) ~[randomizedtesting-runner-2.7.5.jar:?]
	at org.apache.lucene.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:41) ~[main/:?]
	at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40) ~[randomizedtesting-runner-2.7.5.jar:?]
	at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40) ~[randomizedtesting-runner-2.7.5.jar:?]
	at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) ~[randomizedtesting-runner-2.7.5.jar:?]
	at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) ~[randomizedtesting-runner-2.7.5.jar:?]
	at org.apache.lucene.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53) ~[main/:?]
	at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47) ~[main/:?]
	at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64) ~[main/:?]
	at org.apache.lucene.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:54) ~[main/:?]
	at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) ~[randomizedtesting-runner-2.7.5.jar:?]
	at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368) ~[randomizedtesting-runner-2.7.5.jar:?]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:834) [?:?]
	Suppressed: java.net.SocketException: Software caused connection abort: socket write error
		at java.net.SocketOutputStream.socketWrite0(Native Method) ~[?:?]
		at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:110) ~[?:?]
		at java.net.SocketOutputStream.write(SocketOutputStream.java:150) ~[?:?]
		at sun.security.ssl.SSLSocketOutputRecord.encodeAlert(SSLSocketOutputRecord.java:81) ~[?:?]
		at sun.security.ssl.TransportContext.fatal(TransportContext.java:351) ~[?:?]
		at sun.security.ssl.TransportContext.fatal(TransportContext.java:263) ~[?:?]
		at sun.security.ssl.TransportContext.fatal(TransportContext.java:258) ~[?:?]
		at sun.security.ssl.SSLSocketImpl.handleException(SSLSocketImpl.java:1315) ~[?:?]
		at sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:839) ~[?:?]
		at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137) ~[httpcore-4.4.10.jar:4.4.10]
		at org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:153) ~[httpcore-4.4.10.jar:4.4.10]
		at org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:282) ~[httpcore-4.4.10.jar:4.4.10]
		at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:138) ~[httpclient-4.5.6.jar:4.5.6]
		at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:56) ~[httpclient-4.5.6.jar:4.5.6]
		at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259) ~[httpcore-4.4.10.jar:4.4.10]
		at org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:163) ~[httpcore-4.4.10.jar:4.4.10]
		at org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:165) ~[httpclient-4.5.6.jar:4.5.6]
		at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273) ~[httpcore-4.4.10.jar:4.4.10]
		at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125) ~[httpcore-4.4.10.jar:4.4.10]
		at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272) ~[httpclient-4.5.6.jar:4.5.6]
		at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185) ~[httpclient-4.5.6.jar:4.5.6]
		at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) ~[httpclient-4.5.6.jar:4.5.6]
		at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110) ~[httpclient-4.5.6.jar:4.5.6]
		at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.6.jar:4.5.6]
		at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83) ~[httpclient-4.5.6.jar:4.5.6]
		at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.6.jar:4.5.6]
		at org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:564) ~[main/:?]
		at org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:265) ~[main/:?]
		at org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:248) ~[main/:?]
		at org.apache.solr.client.solrj.impl.LBSolrClient.doRequest(LBSolrClient.java:368) ~[main/:?]
		at org.apache.solr.client.solrj.impl.LBSolrClient.request(LBSolrClient.java:296) ~[main/:?]
		at org.apache.solr.client.solrj.impl.BaseCloudSolrClient.sendRequest(BaseCloudSolrClient.java:1143) ~[main/:?]
		at org.apache.solr.client.solrj.impl.BaseCloudSolrClient.requestWithRetryOnStaleState(BaseCloudSolrClient.java:906) ~[main/:?]
		at org.apache.solr.client.solrj.impl.BaseCloudSolrClient.request(BaseCloudSolrClient.java:838) ~[main/:?]
		at org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:207) ~[main/:?]
		at org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:224) ~[main/:?]
		at org.apache.solr.cloud.LegacyCloudClusterPropTest.createAndTest(LegacyCloudClusterPropTest.java:88) ~[test/:?]
		at org.apache.solr.cloud.LegacyCloudClusterPropTest.testCreateCollectionSwitchLegacyCloud(LegacyCloudClusterPropTest.java:80) ~[test/:?]
		at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
		at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]
		at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
		at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
		at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1754) ~[randomizedtesting-runner-2.7.5.jar:?]
		at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:942) ~[randomizedtesting-runner-2.7.5.jar:?]
		at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:978) ~[randomizedtesting-runner-2.7.5.jar:?]
		at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:992) ~[randomizedtesting-runner-2.7.5.jar:?]
		at com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:57) ~[randomizedtesting-runner-2.7.5.jar:?]
		at org.apache.lucene.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:49) ~[main/:?]
		at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45) ~[main/:?]
		at org.apache.lucene.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:48) ~[main/:?]
		at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64) ~[main/:?]
		at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47) ~[main/:?]
		at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) ~[randomizedtesting-runner-2.7.5.jar:?]
		at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368) ~[randomizedtesting-runner-2.7.5.jar:?]
		at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:817) ~[randomizedtesting-runner-2.7.5.jar:?]
		at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:468) ~[randomizedtesting-runner-2.7.5.jar:?]
		at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:951) ~[randomizedtesting-runner-2.7.5.jar:?]
		at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:836) ~[randomizedtesting-runner-2.7.5.jar:?]
		at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:887) ~[randomizedtesting-runner-2.7.5.jar:?]
		at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:898) ~[randomizedtesting-runner-2.7.5.jar:?]
		at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) ~[randomizedtesting-runner-2.7.5.jar:?]
		at com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:57) ~[randomizedtesting-runner-2.7.5.jar:?]
		at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45) ~[main/:?]
		at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) ~[randomizedtesting-runner-2.7.5.jar:?]
		at org.apache.lucene.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:41) ~[main/:?]
		at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40) ~[randomizedtesting-runner-2.7.5.jar:?]
		at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40) ~[randomizedtesting-runner-2.7.5.jar:?]
		at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) ~[randomizedtesting-runner-2.7.5.jar:?]
		at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) ~[randomizedtesting-runner-2.7.5.jar:?]
		at org.apache.lucene.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53) ~[main/:?]
		at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47) ~[main/:?]
		at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64) ~[main/:?]
		at org.apache.lucene.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:54) ~[main/:?]
		at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) ~[randomizedtesting-runner-2.7.5.jar:?]
		at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368) ~[randomizedtesting-runner-2.7.5.jar:?]
		at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:834) [?:?]
Caused by: java.net.SocketException: Software caused connection abort: recv failed
	at java.net.SocketInputStream.socketRead0(Native Method) ~[?:?]
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:115) ~[?:?]
	at java.net.SocketInputStream.read(SocketInputStream.java:168) ~[?:?]
	at java.net.SocketInputStream.read(SocketInputStream.java:140) ~[?:?]
	at sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:448) ~[?:?]
	at sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(SSLSocketInputRecord.java:68) ~[?:?]
	at sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1104) ~[?:?]
	at sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:823) ~[?:?]
	... 67 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It&apos;s a weird one &#8211; with two suppressed socket exceptions (recv and socket write error) and a top SSLException wrapping them both.&lt;/p&gt;

&lt;p&gt;Now, the problem we see on the surface is caused by the fact that javax.net.ssl.SSLException is &lt;b&gt;on the list of non-retriable classes&lt;/b&gt; in SolrHttpRequestRetryHandler so the code then follows a different path on Windows (compared to Linux).&lt;/p&gt;

&lt;p&gt;Adding javax.net.ssl.SSLException to retriable exceptions makes the test pass. &lt;em&gt;But I don&apos;t know if it&apos;s a good fix;&lt;/em&gt; I don&apos;t know who came up with &quot;retriable&quot; classes or why they&apos;re there in the first place. Neither can I explain the difference between the two (seems like a different underlying close operation on sockets).&lt;/p&gt;

&lt;p&gt;Still, I think that&apos;s a decent step forward. Thoughts?&lt;/p&gt;</comment>
                            <comment id="16995524" author="rcmuir" created="Fri, 13 Dec 2019 10:09:41 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Adding javax.net.ssl.SSLException to retriable exceptions makes the test pass. But I don&apos;t know if it&apos;s a good fix; I don&apos;t know who came up with &quot;retriable&quot; classes or why they&apos;re there in the first place. Neither can I explain the difference between the two (seems like a different underlying close operation on sockets).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The list comes from http client. Some retry is listed in http/1.1 specs, because it reuses one underlying connection for multiple requests and so on (e.g. keep-alive can time out). But here SocketException gets boxed in an SSLException so it doesn&apos;t happen?&lt;/p&gt;</comment>
                            <comment id="16995548" author="dweiss" created="Fri, 13 Dec 2019 11:11:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman&quot; class=&quot;user-hover&quot; rel=&quot;hossman&quot;&gt;hossman&lt;/a&gt;&#160;What do you think - should we just add SSLException to the retry list?&lt;/p&gt;</comment>
                            <comment id="16995664" author="dweiss" created="Fri, 13 Dec 2019 14:26:10 +0000"  >&lt;blockquote&gt;
&lt;p&gt;But here SocketException gets boxed in an SSLException so it doesn&apos;t happen?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Correct. And we don&apos;t retry on SSLException (it&apos;s in the explicit list of non-retriable exceptions).&lt;/p&gt;</comment>
                            <comment id="16995775" author="hossman" created="Fri, 13 Dec 2019 17:26:08 +0000"  >&lt;blockquote&gt;&lt;p&gt;What do you think - should we just add SSLException to the retry list?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I have no idea ... why/what exceptions are considered retry-able isn&apos;t something i really understand.&lt;/p&gt;

&lt;p&gt;All of the logic in SolrHttpRequestRetryHandler appears to have been added new (not refactored from anywhere else) by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8450&quot; title=&quot;Our HttpClient retry policy is too permissive.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8450&quot;&gt;&lt;del&gt;SOLR-8450&lt;/del&gt;&lt;/a&gt; - but i don&apos;t really see a discussion of why that specific list of exceptions was chosen.&lt;/p&gt;

&lt;p&gt;/cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&#160; &amp;amp; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=caomanhdat&quot; class=&quot;user-hover&quot; rel=&quot;caomanhdat&quot;&gt;caomanhdat&lt;/a&gt;&#160; as well&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;TBH: I&apos;ve re-read Dawid&apos;s analysis twice and I&apos;m still not really understanding:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;why &quot;windows&amp;gt;=jdk11&quot; is throwing a different (or differently wrapped?) exception then &quot;windows&amp;lt;jdk11 || non-windows&quot;&lt;/li&gt;
	&lt;li&gt;for that matter, why the underlying exception is happening at all?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;...locking down those 2 questions seem just as important (if not more so) then the question of wether we should retry on SSLException ?&lt;/p&gt;</comment>
                            <comment id="16996212" author="dweiss" created="Sat, 14 Dec 2019 06:32:46 +0000"  >&lt;p&gt;I don&apos;t think my analysis includes the answers to questions you mentioned &amp;#8211; I&apos;d be interested in these myself. I said &quot;Neither can I explain the difference between the two (seems like a different underlying close operation on sockets).&quot; and I suspect this holds true: somehow the socket operations are propagated differently in Linux and Windows, resulting in different behavior on both systems. As for JDK differences - the code around this evolves from JDK to JDK; could be also a different protocol used. &lt;/p&gt;

&lt;p&gt;I&apos;ll try to take a look but it consumes tons of time to debug this stuff and I&apos;m not an expert on SSL which would be helpful (diagnostic messages).&lt;/p&gt;</comment>
                            <comment id="16997415" author="hossman" created="Mon, 16 Dec 2019 16:06:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t think my analysis includes the answers to questions you mentioned &#8211; I&apos;d be interested in these myself. ... I&apos;ll try to take a look but it consumes tons of time to debug this stuff and I&apos;m not an expert on SSL which would be helpful (diagnostic messages).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right ... sorry if i wasn&apos;t clear before, but to clarify: I wasn&apos;t saying i expected you to provide those answers, just that based on the info we had ththe answers to those questions (which seemed important to making any decisions on code changes) weren&apos;t clear to me, and i wasn&apos;t sure if that&apos;s because &quot;we&quot; didn&apos;t have those answers , or if it&apos;s just because i wasn&apos;t recognizing them in your data.&lt;/p&gt;</comment>
                            <comment id="16997572" author="dweiss" created="Mon, 16 Dec 2019 19:18:17 +0000"  >&lt;p&gt;I looked at classes involved in this complex stack trace. It&apos;s quite a nightmare. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; There are various checks and exception-handling routines trying to figure out what went wrong and replying exceptions or wrapping them. For example:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/AdoptOpenJDK/openjdk-jdk11u/blob/381c817fa41d549420b1f3a173d9147aa7a679cd/src/java.base/share/classes/sun/security/ssl/TransportContext.java#L344-L360&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/AdoptOpenJDK/openjdk-jdk11u/blob/381c817fa41d549420b1f3a173d9147aa7a679cd/src/java.base/share/classes/sun/security/ssl/TransportContext.java#L344-L360&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// send fatal alert
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;//
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// If we haven&apos;t even started handshaking yet, or we are the recipient
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// of a fatal alert, no need to generate a fatal close alert.
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!recvFatalAlert &amp;amp;&amp;amp; !isOutboundClosed() &amp;amp;&amp;amp; !isBroken &amp;amp;&amp;amp;
                (isNegotiated || handshakeContext != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)) {
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                outputRecord.encodeAlert(Alert.Level.FATAL.level, alert.id);
            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException ioe) {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (SSLLogger.isOn &amp;amp;&amp;amp; SSLLogger.isOn(&lt;span class=&quot;code-quote&quot;&gt;&quot;ssl&quot;&lt;/span&gt;)) {
                    SSLLogger.warning(
                        &lt;span class=&quot;code-quote&quot;&gt;&quot;Fatal: failed to send fatal alert &quot;&lt;/span&gt; + alert, ioe);
                }

                closeReason.addSuppressed(ioe);
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So it looks like the SSL code is trying to send an alert message over a socket that&apos;s been closed and fails miserably to do both. And it also looks like it&apos;s really sensitive to timing and operating system since some of the &quot;socket close&quot; handlers are done in object finalizers so they&apos;re naturally asynchronous to the main code.&lt;/p&gt;

&lt;p&gt;I&apos;ll try to reproduce this on a smaller piece of code - then it&apos;ll be easier to tell why this behaved different previously. My guess is that it&apos;s probably some other refactoring in the JDK that triggered this... &lt;/p&gt;

&lt;p&gt;I&apos;m am half-convinced SSLException should be retriable... so many things can go wrong if the SSL layer is closed that I think it should be allowed to just try to re-establish SSL connection from scratch. &lt;/p&gt;

&lt;p&gt;But I&apos;ll try to provide an example of this happening on a smaller piece of code. Maybe we&apos;ll have a better understanding of what interaction can lead to this.&lt;/p&gt;</comment>
                            <comment id="16997579" author="hossman" created="Mon, 16 Dec 2019 19:25:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;I&apos;m am half-convinced SSLException should be retriable... so many things can go wrong if the SSL layer is closed that I think it should be allowed to just try to re-establish SSL connection from scratch. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;only partially thought out question/counter-suggestion: would it make sense to retry on SSLException if and only if the SSLException wraps another exception which is already on the retry-able list?  ... so if the SSLException wraps something we wouldn&apos;t normally retry w/o using SSL, (or &quot;SSL Broke on it&apos;s own&quot; SSLException) &amp;#8211; then we don&apos;t retry the request.  but if the SSLException wraps something we would normally retry if we&apos;d caught it w/o using SSL, then we do retry ... ?&lt;/p&gt;</comment>
                            <comment id="16997580" author="dweiss" created="Mon, 16 Dec 2019 19:27:53 +0000"  >&lt;p&gt;Given the complexity of the SSL code I peeked at I don&apos;t think I can reliably answer this. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I mean &amp;#8211; check out this method in full glory (and it&apos;s not the only one!).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/AdoptOpenJDK/openjdk-jdk11u/blob/381c817fa41d549420b1f3a173d9147aa7a679cd/src/java.base/share/classes/sun/security/ssl/TransportContext.java#L267&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/AdoptOpenJDK/openjdk-jdk11u/blob/381c817fa41d549420b1f3a173d9147aa7a679cd/src/java.base/share/classes/sun/security/ssl/TransportContext.java#L267&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16997590" author="rcmuir" created="Mon, 16 Dec 2019 19:44:51 +0000"  >&lt;p&gt;Wouldn&apos;t retry only partially work around the issue. For example, the retry is only going to happen for idempotent HTTP verbs. If this &quot;recv failed&quot; problem happens while reading the response to a POST request, what can be done?&lt;/p&gt;</comment>
                            <comment id="16997614" author="dweiss" created="Mon, 16 Dec 2019 20:25:12 +0000"  >&lt;p&gt;The current code in SolrHttpRequestRetryHandler is already sensitive to this (retryRequest method):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (handleAsIdempotent(clientContext)) {
      log.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Retry, request should be idempotent&quot;&lt;/span&gt;);
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unfortunately the SSLException is a showstopper before this check has a chance to run because it disables retries for the whole class of exceptions.&lt;/p&gt;</comment>
                            <comment id="16999104" author="dweiss" created="Wed, 18 Dec 2019 12:23:22 +0000"  >&lt;p&gt;The recv issue is happening even on tests that passed... It just depends on where it happens and how it&apos;s wrapped up (in SSLException or SocketException). I attach a few logs from a single run on Windows &amp;#8211; all of these logs have &quot;recv failed&quot; in them; only TestCloudSearcherWarming actually failed.&lt;/p&gt;

&lt;p&gt;The context of these failures is not clear to me. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman&quot; class=&quot;user-hover&quot; rel=&quot;hossman&quot;&gt;hossman&lt;/a&gt; - could you take a look at these logs (grep for &quot;recv failed&quot; and look at a few lines of prior context) and tell if it&apos;s expected that these sockets are closed? I mean &amp;#8211; is the server really dropping those connections?&lt;/p&gt;</comment>
                            <comment id="16999356" author="hossman" created="Wed, 18 Dec 2019 17:10:42 +0000"  >&lt;blockquote&gt;
&lt;p&gt;The context of these failures is not clear to me. Chris M. Hostetter - could you take a look at these logs (grep for &quot;recv failed&quot; and look at a few lines of prior context) and tell if it&apos;s expected that these sockets are closed? I mean &#8211; is the server really dropping those connections?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I honestly have no idea.  I am in no way adapt/fluent in the low level HTTP/connection management stuff in solr &amp;#8211; that&apos;s why i was hopping &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=caomanhdat2&quot; class=&quot;user-hover&quot; rel=&quot;caomanhdat2&quot;&gt;caomanhdat2&lt;/a&gt;, or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; could chime in.&lt;/p&gt;

&lt;p&gt;(My level of involvement/knowledge on this issue is really just limited to noticing that the pattern existed on windows boxes when doing high level analyzing the jenkins failure rates &amp;amp; failure logs, and trying to raise awareness of it with people who: a) understand windows, b) understand the HTTP/SSL code involved.)&lt;/p&gt;</comment>
                            <comment id="16999394" author="dweiss" created="Wed, 18 Dec 2019 18:00:35 +0000"  >&lt;p&gt;Fair enough. It&apos;s a strange exception in that it&apos;s so low-level &amp;#8211; I tried to reproduce it by closing an underlying socket but haven&apos;t found a way to do it with ssl sockets/ Java API alone (they manage SSL comms and close the connection gracefully). I&apos;ll keep digging in spare cycles.&lt;/p&gt;</comment>
                            <comment id="16999398" author="risdenk" created="Wed, 18 Dec 2019 18:06:09 +0000"  >&lt;p&gt;So I haven&apos;t completely followed what is going on here, but is it possible &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14091&quot; title=&quot;Remove deprecated soLingerTime when configuring Jetty connector&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14091&quot;&gt;&lt;del&gt;SOLR-14091&lt;/del&gt;&lt;/a&gt; is related? Specifically from that issue &lt;a href=&quot;https://github.com/eclipse/jetty.project/issues/2468?&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/eclipse/jetty.project/issues/2468?&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Edit - Errrr - probably not since we are on Jetty version that ignores the setting anyway. I just saw Windows and weird exceptions and thought hmmm.&lt;/p&gt;</comment>
                            <comment id="17000418" author="dweiss" created="Thu, 19 Dec 2019 21:37:55 +0000"  >&lt;p&gt;I know what it is. I&apos;ll try to reproduce first to showcase why it&apos;s happening. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17000434" author="dweiss" created="Thu, 19 Dec 2019 21:50:08 +0000"  >&lt;p&gt;I recompiled the jdk for Windows today to debug at native code level... I am not afraid of assassins &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17000976" author="dweiss" created="Fri, 20 Dec 2019 15:49:40 +0000"  >&lt;p&gt;Ok, so here it comes. I started from looking at the stack trace of those nested &quot;recv failed&quot; exceptions:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.net.SocketException: Software caused connection abort: recv failed
   [junit4]   2&amp;gt;   	at java.base/java.net.SocketInputStream.socketRead0(Native Method)
   [junit4]   2&amp;gt;   	at java.base/java.net.SocketInputStream.socketRead(SocketInputStream.java:115)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the native method in question is different on Windows and on Linux. On Windows the core we&apos;re interested in is here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/openjdk/jdk14/blob/f58a8cbed2ba984ceeb9a1ea59f917e3f9530f1e/src/java.base/windows/native/libnet/SocketInputStream.c#L120-L154&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/openjdk/jdk14/blob/f58a8cbed2ba984ceeb9a1ea59f917e3f9530f1e/src/java.base/windows/native/libnet/SocketInputStream.c#L120-L154&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The core part is a switch on WSAGetLastError:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; err = WSAGetLastError();
...
&lt;span class=&quot;code-keyword&quot;&gt;switch&lt;/span&gt; (err) {
...
&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;:
  NET_ThrowCurrent(env, &lt;span class=&quot;code-quote&quot;&gt;&quot;recv failed&quot;&lt;/span&gt;);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;here is when I needed to recompile the JDK to actually see what the error code returned from Winsocks is. And it&apos;s this one: &lt;/p&gt;

&lt;p&gt;WSAGetLastError returns 10053 (WSAECONNABORTED)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.microsoft.com/en-us/windows/win32/winsock/windows-sockets-error-codes-2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.microsoft.com/en-us/windows/win32/winsock/windows-sockets-error-codes-2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If you take a closer look at the source code of SocketInputStream.c this return value is not covered in the switch &amp;#8211; that&apos;s why we&apos;re getting the exception. &lt;/p&gt;

&lt;p&gt;And here comes the worst part: the reasons as to WHY winsocks aborts a recv with this result type are fairly vague.  Microsoft says this:&lt;/p&gt;

&lt;p&gt;&quot;Connection reset by peer. An existing connection was forcibly closed by the remote host. This normally results if the peer application on the remote host is suddenly stopped, the host is rebooted, the host or remote network interface is disabled, or the remote host uses a hard close (see setsockopt for more information on the SO_LINGER option on the remote socket). This error may also result if a connection was broken due to keep-alive activity detecting a failure while one or more operations are in progress. Operations that were in progress fail with WSAENETRESET. Subsequent operations fail with WSAECONNRESET.&quot;&lt;/p&gt;

&lt;p&gt;I tried to reproduce the same exception on a simple(r) example but totally failed. It SHOULD be possible to get the same exception using plain sockets (no SSL involved) but I always ended up getting regular connection-closed... I wish I could provide an example of this because it&apos;d be a more concrete proof of the problem (and a signal that the JDK implementation should return a socket closed exception for this condition). Can&apos;t figure out a way to do it though, argh.&lt;/p&gt;

&lt;p&gt;Going back to failures in Solr tests: I think the reason is that we shutdown jetty in the middle of the test but then reuse the same client that was previously connected to an existing instance. If it&apos;s an SSL connection then there may be SSL comms flying around in addition to user messages and if they&apos;re issued on a closed socket connection they trigger this enigmatic recv failed error.&lt;/p&gt;

&lt;p&gt;I think the client should be reinstantiated (or at least any existing connections dropped) for the tests to work reliably. If we want a more connection-drop resilient client we could try to look into SSLExceptions/ SocketException and try to parse the &apos;recv failed&apos; but I think it makes little practical sense and is really hacky. Better to drop the request in real life and properly reinitialize the client in tests.&lt;/p&gt;</comment>
                            <comment id="17001078" author="hossman" created="Fri, 20 Dec 2019 18:38:05 +0000"  >&lt;blockquote&gt;&lt;p&gt;Going back to failures in Solr tests: I think the reason is that we shutdown jetty in the middle of the test but then reuse the same client that was previously connected to an existing instance. If it&apos;s an SSL connection then there may be SSL comms flying around in addition to user messages and if they&apos;re issued on a closed socket connection they trigger this enigmatic recv failed error.&lt;/p&gt;

&lt;p&gt;I think the client should be reinstantiated (or at least any existing connections dropped) for the tests to work reliably. ...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Interesting ... but taking a step back, this isn&apos;t just about these tests and the &quot;test clients&quot; talking to the &quot;test solr nodes&quot;, so we shouldn&apos;t just re-instantiate all &quot;test clients&quot; right after any call to&#160;&lt;tt&gt;jetty.stop()&lt;/tt&gt; ... I believe we also see these exceptions when &quot;test solr nodeA&quot; talks to &quot;test solr nodeB&quot; (although i suspect you are correct that this is also only after &quot;nodeB&quot; has been stoped/started) ... and IIUC &quot;real users&quot; could see these errors on windows as well&#160; (Because this seems like something that could happen to any solrj users running (Cloud|Http)SolrClient on a windows box, if it&apos;s talking to a remote solr node using using SSL that gets restarted.)&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Which seems to raise the question: (How) Can we reliably ensure that SolrClients get re-instantiated (or have existing connections dropped) if the &quot;remote&quot; server is restarted?&lt;/p&gt;

&lt;p&gt;Could/Should we make SolrHttpRequestRetryHandler close &amp;amp; re-open any existing connections (prior to retry) if there was a Socket/SSL Exception?&lt;/p&gt;</comment>
                            <comment id="17001096" author="dweiss" created="Fri, 20 Dec 2019 19:04:57 +0000"  >&lt;p&gt;I attach a much simpler repro that results in:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.net.SocketException: Software caused connection abort: recv failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;on Windows. This is still stupidly large because it starts Jetty via the jetty config builder, etc., but I can&apos;t pinpoint which socket/ channel config jetty uses which results in hard socket close (which in turn results in WSAECONNABORTED).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman&quot; class=&quot;user-hover&quot; rel=&quot;hossman&quot;&gt;hossman&lt;/a&gt; - the tests pass with SSL disabled because if you disable SSL the http client is by default configured to retry failed requests. The &quot;recv failed&quot; is still thrown but since it&apos;s a simple SocketException the http client retries it and proceeds. With SSL enabled the exception is deeply nested in SSL stack and rewrapped as an SSLException, resulting in http client not retrying it (and finally causing test exceptions).&lt;/p&gt;</comment>
                            <comment id="17001156" author="dweiss" created="Fri, 20 Dec 2019 19:21:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;I believe we also see these exceptions when &quot;test solr nodeA&quot; talks to &quot;test solr nodeB&quot; (although i suspect you are correct that this is also only after &quot;nodeB&quot; has been stoped/started&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This will happen in any kind of situation when a hard-closed socket is reused from client side. I understand the winsock api description and the example I attached reproduces this behavior easily. I&apos;m sure you could extract a simpler setup without jetty at all (just with java socket APIs).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Which seems to raise the question: (How) Can we reliably ensure that SolrClients get re-instantiated (or have existing connections dropped) if the &quot;remote&quot; server is restarted?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Technically it&apos;s already done &amp;#8211; the only unhandled situation is SSLException that wraps socket exception with recv failed. This could be detected and handled like other socket exceptions in solr retry handler.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Could/Should we make SolrHttpRequestRetryHandler close &amp;amp; re-open any existing connections (prior to retry) if there was a Socket/SSL Exception?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;One thing is that a better way would be to fix this in Jetty. Those socket connections should be dropped gracefully then windows wouldn&apos;t throw those odd exceptions and the SSL layer would handle them better (hopefully). Perhaps there are other reasons for an SSLException which should &lt;b&gt;not&lt;/b&gt; cause a retry... I&apos;m not really sure.&lt;/p&gt;</comment>
                            <comment id="17001194" author="rcmuir" created="Fri, 20 Dec 2019 20:17:46 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Perhaps there are other reasons for an SSLException which should not cause a retry... I&apos;m not really sure.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, even looking at the class hierarchy in javadocs. For example it make no sense to retry on many of the subclasses: handshake exception, if you can&apos;t agree on ciphers, its not gonna happen. keyexception, unverified host, retry is not helpful for those either.&lt;/p&gt;</comment>
                            <comment id="17002197" author="thetaphi" created="Mon, 23 Dec 2019 10:58:28 +0000"  >&lt;p&gt;Hi, about the JDK error handling I opened &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8236498&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8236498&lt;/a&gt; on behalf of &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dweiss&quot; class=&quot;user-hover&quot; rel=&quot;dweiss&quot;&gt;dweiss&lt;/a&gt;. Thanks Dawid!&lt;/p&gt;</comment>
                            <comment id="17003206" author="dweiss" created="Wed, 25 Dec 2019 10:33:02 +0000"  >&lt;p&gt;Thanks Uwe!&lt;/p&gt;</comment>
                            <comment id="17004164" author="dweiss" created="Fri, 27 Dec 2019 12:47:57 +0000"  >&lt;p&gt;Here is a repro of the &quot;recv failed&quot; exception on a much simpler example. On Windows this example ends with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Received: java.net.SocketException: Software caused connection abort: recv failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;on Linux it hits unreachable (socket read just returns -1 indicating end of data).&lt;/p&gt;</comment>
                            <comment id="17004288" author="dweiss" created="Fri, 27 Dec 2019 17:57:56 +0000"  >&lt;p&gt;I attached a suggested patch to SolrHttpRequestRetryHandler to deal with this issue. It is pretty selective (Windows-only, SSLException with a hardcoded message) and I don&apos;t think it should interfere with anything.&lt;/p&gt;</comment>
                            <comment id="17004586" author="rcmuir" created="Sat, 28 Dec 2019 22:27:45 +0000"  >&lt;p&gt;With the attached RecvRepro.java I see the following: (all with jdk13):&lt;/p&gt;

&lt;p&gt;Linux:&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.RuntimeException: Unreachable?&lt;br/&gt;
	at RecvRepro.main(RecvRepro.java:46)&lt;/p&gt;

&lt;p&gt;Mac OS X:&lt;br/&gt;
Received: java.net.SocketException: Connection reset&lt;/p&gt;

&lt;p&gt;FreeBSD:&lt;br/&gt;
Received: java.net.SocketException: Connection reset&lt;/p&gt;

&lt;p&gt;So besides the linux vs windows difference (where windows gets SocketException: recv failed), we see on the BSDs (including mac os X) that you also get a SocketException. It is just that the JDK must be handling this one different? I ran truss to trace the system calls, just so we are sure:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;read(7,0x824416000,100)                          ERR#54 &apos;Connection reset by peer&apos;
...
errno.h:#define	ECONNRESET	54		/* Connection reset by peer */
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="17004885" author="dweiss" created="Sun, 29 Dec 2019 20:12:01 +0000"  >&lt;p&gt;Ouch. That&apos;s makes it even worse than I thought! An additional element of difficulty is that the implementation in the JDK is different from JDK13 on and the error message is different (and localized). Uwe and I have been in touch with Alan Bateman &amp;#8211; I&apos;ll also post this issue to OpenJDK&apos;s net-dev mailing list.&lt;/p&gt;

&lt;p&gt;These differences in handling the situation of reading/writing to a closed socket only enforce my opinion that this isn&apos;t something we should really try to fix. If a socket/ node goes down it should be up to a higher application layer to retry the request &amp;#8211; not even http client but higher than that. I don&apos;t think it&apos;ll be possible to detect what&apos;s retriable and what isn&apos;t if the socket behavior varies between systems and everything sits on top of an SSL layer (which is also changing between different jdk versions).&lt;/p&gt;</comment>
                            <comment id="17007472" author="jira-bot" created="Fri, 3 Jan 2020 13:13:07 +0000"  >&lt;p&gt;Commit 985af957324b8abcf06dfdfe0eb0fa8f1d4cb40b in lucene-solr&apos;s branch refs/heads/master from Dawid Weiss&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=985af95&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=985af95&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13778&quot; title=&quot;Windows JDK SSL Test Failure trend: SSLException: Software caused connection abort: recv failed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13778&quot;&gt;&lt;del&gt;SOLR-13778&lt;/del&gt;&lt;/a&gt;: Solrj client will retry requests on SSLException with a suppressed SocketException (very likely a hard-closed socket connection)&lt;/p&gt;</comment>
                            <comment id="17007473" author="jira-bot" created="Fri, 3 Jan 2020 13:13:33 +0000"  >&lt;p&gt;Commit 985af957324b8abcf06dfdfe0eb0fa8f1d4cb40b in lucene-solr&apos;s branch refs/heads/gradle-master from Dawid Weiss&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=985af95&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=985af95&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13778&quot; title=&quot;Windows JDK SSL Test Failure trend: SSLException: Software caused connection abort: recv failed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13778&quot;&gt;&lt;del&gt;SOLR-13778&lt;/del&gt;&lt;/a&gt;: Solrj client will retry requests on SSLException with a suppressed SocketException (very likely a hard-closed socket connection)&lt;/p&gt;</comment>
                            <comment id="17007475" author="dweiss" created="Fri, 3 Jan 2020 13:15:41 +0000"  >&lt;p&gt;I committed a more generous version of the patch where SSLException with a suppressed SocketException would be retried by the client. I don&apos;t have any better solutions for this at the moment and the current situation with broken sockets makes testing on Windows pointless.&lt;/p&gt;</comment>
                            <comment id="17007487" author="jira-bot" created="Fri, 3 Jan 2020 13:39:40 +0000"  >&lt;p&gt;Commit 2b00d633a5805bf75eb594688e9dd0a4255b02be in lucene-solr&apos;s branch refs/heads/branch_8x from Dawid Weiss&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=2b00d63&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=2b00d63&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13778&quot; title=&quot;Windows JDK SSL Test Failure trend: SSLException: Software caused connection abort: recv failed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13778&quot;&gt;&lt;del&gt;SOLR-13778&lt;/del&gt;&lt;/a&gt;: Solrj client will retry requests on SSLException with a suppressed SocketException (very likely a hard-closed socket connection)&lt;/p&gt;</comment>
                            <comment id="17009477" author="dweiss" created="Tue, 7 Jan 2020 08:23:37 +0000"  >&lt;p&gt;I think we can consider this issue closed (with a workaround). The folks at net-dev consider this platform-specific behavior &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; and I don&apos;t think we can count on consistent behavior across systems. Chris Hegarty suggested (independently) a similar workaround to what I implemented in my patch so I think it&apos;s fine to leave it in. Perhaps we should also backport it to 8x?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://mail.openjdk.java.net/pipermail/net-dev/2020-January/thread.html#13469&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://mail.openjdk.java.net/pipermail/net-dev/2020-January/thread.html#13469&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12989286" name="RecvFailedTest.java" size="3118" author="dweiss" created="Fri, 20 Dec 2019 19:00:45 +0000"/>
                            <attachment id="12989538" name="RecvRepro.java" size="1783" author="dweiss" created="Fri, 27 Dec 2019 12:45:48 +0000"/>
                            <attachment id="12989550" name="SOLR-13778.patch" size="5659" author="dweiss" created="Fri, 27 Dec 2019 17:56:48 +0000"/>
                            <attachment id="12988570" name="dumps-LegacyCloud.zip" size="176997" author="dweiss" created="Wed, 11 Dec 2019 18:30:17 +0000"/>
                            <attachment id="12988682" name="logs-2019-12-12-1.zip" size="1453307" author="dweiss" created="Thu, 12 Dec 2019 11:54:26 +0000"/>
                            <attachment id="12989099" name="recv-multiple-2019-12-18.zip" size="284784" author="dweiss" created="Wed, 18 Dec 2019 12:19:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 45 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z06sg8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>