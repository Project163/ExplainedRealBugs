<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:50:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16143] SolrConfig ResourceProvider can miss updates from ZooKeeper</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16143</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;not ok 7 create multisharded collections when s provided
# (in test file test/test_create_collection.bats, line 79)
#   `run -0 solr create_collection -c COLL_NAME -s 2&apos; failed, expected exit code 0, got 1
# Last output:
# WARNING: Using _default configset with data driven schema functionality. NOT RECOMMENDED for production use.
#          To turn off: bin/solr config -c COLL_NAME -p 8983 -action set-user-property -property update.autoCreateFields -value false
#
# ERROR: Failed to create collection &apos;COLL_NAME&apos; due to: Underlying core creation failed while creating collection: COLL_NAME
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2022-04-05 01:12:48.835 ERROR (searcherExecutor-55-thread-1-processing-localhost:8983_solr COLL_NAME_shard1_replica_n2 COLL_NAME shard1 core_node4) [c:COLL_NAME s:shard1 r:core_node4 x:COLL_NAME_shard1_replica_n2] o.a.s.h.RequestHandlerBase java.lang.NullPointerException =&amp;gt; java.lang.NullPointerE
xception
        at org.apache.solr.handler.component.SearchHandler.initComponents(SearchHandler.java:248)
java.lang.NullPointerException: null
        at org.apache.solr.handler.component.SearchHandler.initComponents(SearchHandler.java:248) ~[?:?]
        at org.apache.solr.handler.component.SearchHandler.getComponents(SearchHandler.java:268) ~[?:?]
        at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:336) ~[?:?]
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:207) ~[?:?]
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:2866) ~[?:?]
        at org.apache.solr.core.QuerySenderListener.newSearcher(QuerySenderListener.java:73) ~[?:?]
        at org.apache.solr.core.SolrCore.lambda$getSearcher$18(SolrCore.java:2621) ~[?:?]
        at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]
        at org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.lambda$execute$0(ExecutorUtil.java:259) ~[?:?]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]
        at java.lang.Thread.run(Thread.java:829) [?:?]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2022-04-05 01:12:48.852 ERROR (qtp451312813-31) [] o.a.s.h.RequestHandlerBase org.apache.solr.common.SolrException: Error CREATEing SolrCore &apos;COLL_NAME_shard1_replica_n2&apos;: Unable to create core [COLL_NAME_shard1_replica_n2] Caused by: Can&apos;t find resource &apos;elevate.xml&apos; in classpath or &apos;/configs/CO
LL_NAME&apos;, cwd=/Users/mdrob/code/solr/solr/packaging/build/solr-10.0.0-SNAPSHOT/server =&amp;gt; org.apache.solr.common.SolrException: Error CREATEing SolrCore &apos;COLL_NAME_shard1_replica_n2&apos;: Unable to create core [COLL_NAME_shard1_replica_n2] Caused by: Can&apos;t find resource &apos;elevate.xml&apos; in classpath or &apos;
/configs/COLL_NAME&apos;, cwd=/Users/mdrob/code/solr/solr/packaging/build/solr-10.0.0-SNAPSHOT/server
        at org.apache.solr.core.CoreContainer.create(CoreContainer.java:1470)
org.apache.solr.common.SolrException: Error CREATEing SolrCore &apos;COLL_NAME_shard1_replica_n2&apos;: Unable to create core [COLL_NAME_shard1_replica_n2] Caused by: Can&apos;t find resource &apos;elevate.xml&apos; in classpath or &apos;/configs/COLL_NAME&apos;, cwd=/Users/mdrob/code/solr/solr/packaging/build/solr-10.0.0-SNAPSHOT
/server
        at org.apache.solr.core.CoreContainer.create(CoreContainer.java:1470) ~[?:?]
        at org.apache.solr.handler.admin.CoreAdminOperation.lambda$static$0(CoreAdminOperation.java:92) ~[?:?]
        at org.apache.solr.handler.admin.CoreAdminOperation.execute(CoreAdminOperation.java:389) ~[?:?]
        at org.apache.solr.handler.admin.CoreAdminHandler$CallInfo.call(CoreAdminHandler.java:422) ~[?:?]
        at org.apache.solr.handler.admin.CoreAdminHandler.handleRequestBody(CoreAdminHandler.java:205) ~[?:?]
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:207) ~[?:?]
        at org.apache.solr.servlet.HttpSolrCall.handleAdmin(HttpSolrCall.java:941) ~[?:?]
        at org.apache.solr.servlet.HttpSolrCall.handleAdminRequest(HttpSolrCall.java:893) ~[?:?]
        at org.apache.solr.servlet.HttpSolrCall.call(HttpSolrCall.java:584) ~[?:?]
        at org.apache.solr.servlet.SolrDispatchFilter.dispatch(SolrDispatchFilter.java:239) ~[?:?]
        at org.apache.solr.servlet.SolrDispatchFilter.lambda$doFilter$0(SolrDispatchFilter.java:207) ~[?:?]
        at org.apache.solr.servlet.ServletUtils.traceHttpRequestExecution2(ServletUtils.java:257) ~[?:?]
        at org.apache.solr.servlet.ServletUtils.rateLimitRequest(ServletUtils.java:227) ~[?:?]
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:202) ~[?:?]
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:184) ~[?:?]
        at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:201) ~[jetty-servlet-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601) ~[jetty-servlet-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:548) ~[jetty-servlet-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:600) ~[jetty-security-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1624) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1434) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:501) ~[jetty-servlet-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1594) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1349) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:191) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.InetAccessHandler.handle(InetAccessHandler.java:177) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:146) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.rewrite.handler.RewriteHandler.handle(RewriteHandler.java:322) ~[jetty-rewrite-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:763) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.Server.handle(Server.java:516) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:400) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:645) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:392) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:352) ~[jetty-server-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:338) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:315) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:173) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.produce(EatWhatYouKill.java:137) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.http2.HTTP2Connection.produce(HTTP2Connection.java:183) ~[http2-common-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.http2.HTTP2Connection.onFillable(HTTP2Connection.java:138) ~[http2-common-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.http2.HTTP2Connection$FillableCallback.succeeded(HTTP2Connection.java:361) ~[http2-common-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:105) ~[jetty-io-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.io.ChannelEndPoint$1.run(ChannelEndPoint.java:104) ~[jetty-io-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:338) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:315) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:173) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:131) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:409) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
        at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034) ~[jetty-util-9.4.44.v20210927.jar:9.4.44.v20210927]
        at java.lang.Thread.run(Thread.java:829) [?:?]
Caused by: org.apache.solr.common.SolrException: Unable to create core [COLL_NAME_shard1_replica_n2]
        at org.apache.solr.core.CoreContainer.createFromDescriptor(CoreContainer.java:1585) ~[?:?]
        at org.apache.solr.core.CoreContainer.create(CoreContainer.java:1428) ~[?:?]
        ... 59 more
Caused by: org.apache.solr.common.SolrException: Error initializing QueryElevationComponent
        at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:1204) ~[?:?]
        at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:1048) ~[?:?]
        at org.apache.solr.core.CoreContainer.createFromDescriptor(CoreContainer.java:1562) ~[?:?]
        at org.apache.solr.core.CoreContainer.create(CoreContainer.java:1428) ~[?:?]
        ... 59 more
Caused by: org.apache.solr.common.SolrException: Error initializing QueryElevationComponent
        at org.apache.solr.handler.component.QueryElevationComponent.handleInitializationException(QueryElevationComponent.java:293) ~[?:?]
        at org.apache.solr.handler.component.QueryElevationComponent.inform(QueryElevationComponent.java:192) ~[?:?]
        at org.apache.solr.core.SolrResourceLoader.inform(SolrResourceLoader.java:728) ~[?:?]
        at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:1155) ~[?:?]
        at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:1048) ~[?:?]
        at org.apache.solr.core.CoreContainer.createFromDescriptor(CoreContainer.java:1562) ~[?:?]
        at org.apache.solr.core.CoreContainer.create(CoreContainer.java:1428) ~[?:?]
        ... 59 more
Caused by: org.apache.solr.common.SolrException: org.apache.solr.core.SolrResourceNotFoundException: Can&apos;t find resource &apos;elevate.xml&apos; in classpath or &apos;/configs/COLL_NAME&apos;, cwd=/Users/mdrob/code/solr/solr/packaging/build/solr-10.0.0-SNAPSHOT/server
        at org.apache.solr.core.XmlConfigFile.lambda$new$0(XmlConfigFile.java:99) ~[?:?]
        at org.apache.solr.core.XmlConfigFile.&amp;lt;init&amp;gt;(XmlConfigFile.java:144) ~[?:?]
        at org.apache.solr.core.XmlConfigFile.&amp;lt;init&amp;gt;(XmlConfigFile.java:93) ~[?:?]
        at org.apache.solr.core.XmlConfigFile.&amp;lt;init&amp;gt;(XmlConfigFile.java:83) ~[?:?]
        at org.apache.solr.core.XmlConfigFile.&amp;lt;init&amp;gt;(XmlConfigFile.java:77) ~[?:?]
        at org.apache.solr.handler.component.QueryElevationComponent.loadElevationProvider(QueryElevationComponent.java:382) ~[?:?]
        at org.apache.solr.handler.component.QueryElevationComponent.getElevationProvider(QueryElevationComponent.java:346) ~[?:?]
        at org.apache.solr.handler.component.QueryElevationComponent.loadElevationConfiguration(QueryElevationComponent.java:271) ~[?:?]
        at org.apache.solr.handler.component.QueryElevationComponent.inform(QueryElevationComponent.java:185) ~[?:?]
        at org.apache.solr.core.SolrResourceLoader.inform(SolrResourceLoader.java:728) ~[?:?]
        at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:1155) ~[?:?]
        at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:1048) ~[?:?]
        at org.apache.solr.core.CoreContainer.createFromDescriptor(CoreContainer.java:1562) ~[?:?]
        at org.apache.solr.core.CoreContainer.create(CoreContainer.java:1428) ~[?:?]
        ... 59 more
Caused by: org.apache.solr.core.SolrResourceNotFoundException: Can&apos;t find resource &apos;elevate.xml&apos; in classpath or &apos;/configs/COLL_NAME&apos;, cwd=/Users/mdrob/code/solr/solr/packaging/build/solr-10.0.0-SNAPSHOT/server
        at org.apache.solr.cloud.ZkSolrResourceLoader.openResource(ZkSolrResourceLoader.java:120) ~[?:?]
        at org.apache.solr.core.XmlConfigFile.lambda$new$0(XmlConfigFile.java:97) ~[?:?]
        at org.apache.solr.core.XmlConfigFile.&amp;lt;init&amp;gt;(XmlConfigFile.java:144) ~[?:?]
        at org.apache.solr.core.XmlConfigFile.&amp;lt;init&amp;gt;(XmlConfigFile.java:93) ~[?:?]
        at org.apache.solr.core.XmlConfigFile.&amp;lt;init&amp;gt;(XmlConfigFile.java:83) ~[?:?]
        at org.apache.solr.core.XmlConfigFile.&amp;lt;init&amp;gt;(XmlConfigFile.java:77) ~[?:?]
        at org.apache.solr.handler.component.QueryElevationComponent.loadElevationProvider(QueryElevationComponent.java:382) ~[?:?]
        at org.apache.solr.handler.component.QueryElevationComponent.getElevationProvider(QueryElevationComponent.java:346) ~[?:?]
        at org.apache.solr.handler.component.QueryElevationComponent.loadElevationConfiguration(QueryElevationComponent.java:271) ~[?:?]
        at org.apache.solr.handler.component.QueryElevationComponent.inform(QueryElevationComponent.java:185) ~[?:?]
        at org.apache.solr.core.SolrResourceLoader.inform(SolrResourceLoader.java:728) ~[?:?]
        at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:1155) ~[?:?]
        at org.apache.solr.core.SolrCore.&amp;lt;init&amp;gt;(SolrCore.java:1048) ~[?:?]
        at org.apache.solr.core.CoreContainer.createFromDescriptor(CoreContainer.java:1562) ~[?:?]
        at org.apache.solr.core.CoreContainer.create(CoreContainer.java:1428) ~[?:?]
        ... 59 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13437913">SOLR-16143</key>
            <summary>SolrConfig ResourceProvider can miss updates from ZooKeeper</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="houston">Houston Putman</assignee>
                                    <reporter username="mdrob">Mike Drob</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Apr 2022 15:15:41 +0000</created>
                <updated>Wed, 18 May 2022 17:48:28 +0000</updated>
                            <resolved>Mon, 18 Apr 2022 19:32:30 +0000</resolved>
                                    <version>8.9</version>
                                    <fixVersion>9.0</fixVersion>
                    <fixVersion>8.11.2</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="6600">1h 50m</timespent>
                                <comments>
                            <comment id="17517608" author="mdrob" created="Tue, 5 Apr 2022 17:50:27 +0000"  >&lt;p&gt;Aside from why elevate.xml isn&apos;t found, I think this demonstrates a different and potentially much larger problem...&lt;/p&gt;

&lt;p&gt;We call &lt;tt&gt;inform(this)&lt;/tt&gt; from the SolrCore constructor, which then gets used in a bunch of&#160;ways. I haven&apos;t traced through yet to determine if they are all explicitly safe. NetBeans calls this &lt;tt&gt;LeakingThisInConstructor&lt;/tt&gt;, I&apos;m sure other tooling has similar names for it. There&apos;s lots of reading about why this can introduce subtle bugs. This is probably a larger refactoring than I care to undertake right now.&lt;/p&gt;
</comment>
                            <comment id="17517612" author="mdrob" created="Tue, 5 Apr 2022 17:52:26 +0000"  >&lt;p&gt;Actually, figuring out why this is looking for &lt;tt&gt;elevate.xml&lt;/tt&gt; would also be a really interesting problem, since the &lt;tt&gt;_default&lt;/tt&gt; config set doesn&apos;t do any query elevation. Maybe the tech products config is still lingering and we failed to delete it?&lt;/p&gt;</comment>
                            <comment id="17518183" author="mdrob" created="Wed, 6 Apr 2022 14:41:41 +0000"  >&lt;p&gt;I think what happened here was that after test #4 we installed the tech products configset at &quot;COLL_NAME&quot; and then on delete maybe didn&apos;t clean it up completely? So then trying to create a new collection ended up reusing that config set somehow.&lt;/p&gt;</comment>
                            <comment id="17519141" author="jira-bot" created="Thu, 7 Apr 2022 20:09:28 +0000"  >&lt;p&gt;Commit 236613f151b605b2c1d4be9422d2019075555265 in solr&apos;s branch refs/heads/main from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=236613f151b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=236613f151b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16143&quot; title=&quot;SolrConfig ResourceProvider can miss updates from ZooKeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16143&quot;&gt;&lt;del&gt;SOLR-16143&lt;/del&gt;&lt;/a&gt;: Fix integration test cleanup &amp;amp; snapshot failure cases (#789)&lt;/p&gt;
</comment>
                            <comment id="17519147" author="jira-bot" created="Thu, 7 Apr 2022 20:25:41 +0000"  >&lt;p&gt;Commit bb4119c041d4ad794eeae49a745e073847364b96 in solr&apos;s branch refs/heads/branch_9x from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=bb4119c041d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=bb4119c041d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16143&quot; title=&quot;SolrConfig ResourceProvider can miss updates from ZooKeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16143&quot;&gt;&lt;del&gt;SOLR-16143&lt;/del&gt;&lt;/a&gt;: Fix integration test cleanup &amp;amp; snapshot failure cases (#789)&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 236613f151b605b2c1d4be9422d2019075555265)&lt;/p&gt;</comment>
                            <comment id="17519228" author="mdrob" created="Thu, 7 Apr 2022 23:06:53 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2022-04-07 22:53:00.468 INFO  (qtp1552221437-30) [c:COLL_NAME s:shard1 r:core_node2 x:COLL_NAME_shard1_replica_n1] o.a.s.s.ZkIndexSchemaReader Creating ZooKeeper watch for the managed schema at /configs/COLL_NAME/managed-schema
2022-04-07 22:53:00.469 INFO  (qtp1552221437-30) [c:COLL_NAME s:shard1 r:core_node2 x:COLL_NAME_shard1_replica_n1] o.a.s.s.ZkIndexSchemaReader Current schema version 0 is already the latest
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So! We create a collection named COLL_NAME with the &lt;tt&gt;&amp;#95;default&lt;/tt&gt; managed-schema. Then we delete that collection, and delete that config set, then create a &lt;em&gt;new&lt;/em&gt; collection with the same name but a different schema. But ZkIndexSchemaReader looks at the znode version to determine if we need an update. The old one had version 0, then we delete it and upload a new one which also has version 0. So it thinks we&apos;re up to date and returns the &quot;current&quot; view it has in the &lt;tt&gt;ManagedIndexSchemaFactory.getSchema()&lt;/tt&gt; which doesn&apos;t match what we are trying to create.&lt;/p&gt;</comment>
                            <comment id="17519719" author="mdrob" created="Fri, 8 Apr 2022 16:59:50 +0000"  >&lt;p&gt;Aha! I have this reproducing in a (really bad) unit test, and I think I have another hint to the issue.&lt;/p&gt;

&lt;p&gt;It looks like there is some problem with the &lt;tt&gt;AddSchemaFieldsUpdateProcessorFactory&lt;/tt&gt; type mappings from the default schema. It sets up a mapping for type &lt;tt&gt;booleans&lt;/tt&gt; but that doesn&apos;t exist in the techproducs config. I think there was another JIRA where we were trying to standardize all of the field types that we use in our example configurations, which might have papered over this problem.&lt;/p&gt;</comment>
                            <comment id="17519740" author="mdrob" created="Fri, 8 Apr 2022 17:57:38 +0000"  >&lt;p&gt;Failing test up as a PR at &lt;a href=&quot;https://github.com/apache/solr/pull/801&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/pull/801&lt;/a&gt; - I haven&apos;t investigated yet on how to fix it.&lt;/p&gt;</comment>
                            <comment id="17520645" author="mdrob" created="Mon, 11 Apr 2022 15:27:47 +0000"  >&lt;p&gt;Fixed up the test, isolated the problem down to a SolrJ call. When we do createCollection call with no &lt;tt&gt;confname&lt;/tt&gt; then everything works, but when we explicitly set it to match the name of the collection is when things fail.&lt;/p&gt;</comment>
                            <comment id="17520744" author="mdrob" created="Mon, 11 Apr 2022 17:50:01 +0000"  >&lt;p&gt;Additional insight, I think the test passes if both are named &lt;tt&gt;managed-schema&lt;/tt&gt; or both have the &lt;tt&gt;xml&lt;/tt&gt; suffix, but the test fails when one has &lt;/p&gt;

&lt;p&gt;This is because the resources get stored in the CoreContainer&apos;s configCache, not ZkIndexSchemaReader like I claimed earlier. This led to actually finding the issue -  that we only track the znode version, if we also track created time, then we wouldn&apos;t have the problem.&lt;/p&gt;</comment>
                            <comment id="17523778" author="jira-bot" created="Mon, 18 Apr 2022 16:20:10 +0000"  >&lt;p&gt;Commit 3ed851fc84015f092271ccf8f93c1d20737804ca in solr&apos;s branch refs/heads/main from Mike Drob&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=3ed851fc840&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=3ed851fc840&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16143&quot; title=&quot;SolrConfig ResourceProvider can miss updates from ZooKeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16143&quot;&gt;&lt;del&gt;SOLR-16143&lt;/del&gt;&lt;/a&gt; SolrConfig ResourceProvider can miss updates from ZooKeeper (#801)&lt;/p&gt;
</comment>
                            <comment id="17523779" author="jira-bot" created="Mon, 18 Apr 2022 16:20:56 +0000"  >&lt;p&gt;Commit c1ddbe632c7204698603387cbe2912d801637320 in solr&apos;s branch refs/heads/branch_9x from Mike Drob&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=c1ddbe632c7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=c1ddbe632c7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16143&quot; title=&quot;SolrConfig ResourceProvider can miss updates from ZooKeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16143&quot;&gt;&lt;del&gt;SOLR-16143&lt;/del&gt;&lt;/a&gt; SolrConfig ResourceProvider can miss updates from ZooKeeper (#801)&lt;/p&gt;
</comment>
                            <comment id="17523863" author="jira-bot" created="Mon, 18 Apr 2022 19:26:47 +0000"  >&lt;p&gt;Commit 79e40e1dc2e4120abdde47663dd04a634aa99fc1 in solr&apos;s branch refs/heads/branch_9_0 from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=79e40e1dc2e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=79e40e1dc2e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16143&quot; title=&quot;SolrConfig ResourceProvider can miss updates from ZooKeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16143&quot;&gt;&lt;del&gt;SOLR-16143&lt;/del&gt;&lt;/a&gt;: Fix integration test cleanup &amp;amp; snapshot failure cases (#789)&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 236613f151b605b2c1d4be9422d2019075555265)&lt;/p&gt;</comment>
                            <comment id="17523864" author="jira-bot" created="Mon, 18 Apr 2022 19:26:48 +0000"  >&lt;p&gt;Commit 0ad954e43ab5381c709e6586f993802fabec249c in solr&apos;s branch refs/heads/branch_9_0 from Mike Drob&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=0ad954e43ab&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=0ad954e43ab&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16143&quot; title=&quot;SolrConfig ResourceProvider can miss updates from ZooKeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16143&quot;&gt;&lt;del&gt;SOLR-16143&lt;/del&gt;&lt;/a&gt; SolrConfig ResourceProvider can miss updates from ZooKeeper (#801)&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 3ed851fc84015f092271ccf8f93c1d20737804ca)&lt;/p&gt;</comment>
                            <comment id="17535452" author="janhoy" created="Thu, 12 May 2022 00:26:30 +0000"  >&lt;p&gt;Closing after the 9.0.0 release&lt;/p&gt;</comment>
                            <comment id="17536188" author="risdenk" created="Thu, 12 May 2022 15:25:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mdrob&quot; class=&quot;user-hover&quot; rel=&quot;mdrob&quot;&gt;mdrob&lt;/a&gt; I think this jira suitable for 8.11.2? I know its an issue on 8.11.1.&lt;/p&gt;</comment>
                            <comment id="17536238" author="mdrob" created="Thu, 12 May 2022 17:23:51 +0000"  >&lt;p&gt;That sounds fine, would you like to backport it? I can get to it early next week if not.&lt;/p&gt;</comment>
                            <comment id="17537316" author="dsmiley" created="Mon, 16 May 2022 03:14:50 +0000"  >&lt;p&gt;This issue is categorized as a test but I suppose it is in fact not?&lt;/p&gt;

&lt;p&gt;A learning I got from the above comments is that when we cache ZK stuff, it&apos;s good to not only consider the obvious ZK version, but also capture the creation time so that we capture re-creating of the znode.&lt;/p&gt;</comment>
                            <comment id="17537716" author="mdrob" created="Mon, 16 May 2022 18:32:29 +0000"  >&lt;p&gt;&amp;gt; This issue is categorized as a test but I suppose it is in fact not?&lt;/p&gt;

&lt;p&gt;Yea, it initially looked like a test failure but then after a long time debugging we figured out what the underlying cause was.&lt;/p&gt;

&lt;p&gt;&amp;gt; A learning I got from the above comments is that when we cache ZK stuff...&lt;/p&gt;

&lt;p&gt;A learning &lt;em&gt;I&lt;/em&gt; got is that we should use Curator instead of rolling our own, but that&apos;s for another day. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17537725" author="dsmiley" created="Mon, 16 May 2022 18:46:15 +0000"  >&lt;blockquote&gt;&lt;p&gt;A learning I got is that we should use Curator instead of rolling our own, but that&apos;s for another day&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m a huge fan of moving to Curator but I wonder what in this issue relates to that?  (i.e. how would Curator have helped in this scenario)&lt;/p&gt;</comment>
                            <comment id="17537879" author="mdrob" created="Tue, 17 May 2022 02:16:46 +0000"  >&lt;p&gt;I would imagine that NodeCache would not have had this issue? Maybe we still would have run into this because we cache with the parsed content. &lt;/p&gt;</comment>
                            <comment id="17538167" author="risdenk" created="Tue, 17 May 2022 12:52:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;That sounds fine, would you like to backport it? I can get to it early next week if not.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mdrob&quot; class=&quot;user-hover&quot; rel=&quot;mdrob&quot;&gt;mdrob&lt;/a&gt; for the backport. Sorry didn&apos;t mean to imply you needed to do it. I just hadn&apos;t gotten back to it yet.&lt;/p&gt;</comment>
                            <comment id="17538987" author="jira-bot" created="Wed, 18 May 2022 17:46:38 +0000"  >&lt;p&gt;Commit b3bf5447c2dc9c92023e7673c21e4eb24dd31065 in lucene-solr&apos;s branch refs/heads/branch_8_11 from Mike Drob&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=b3bf5447c2d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=b3bf5447c2d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16143&quot; title=&quot;SolrConfig ResourceProvider can miss updates from ZooKeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16143&quot;&gt;&lt;del&gt;SOLR-16143&lt;/del&gt;&lt;/a&gt; SolrConfig ResourceProvider can miss updates from ZooKeeper (#2655)&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 3ed851fc84015f092271ccf8f93c1d20737804ca)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310760">
                    <name>Testing</name>
                                                                <inwardlinks description="Discovered while testing">
                                        <issuelink>
            <issuekey id="13436962">SOLR-16134</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1169k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>