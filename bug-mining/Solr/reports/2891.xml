<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:12:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-8832] Faulty DaemonStream shutdown procedures</title>
                <link>https://issues.apache.org/jira/browse/SOLR-8832</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The following test run fails everytime due to faulty DaemonStream shutdown procedures.&lt;/p&gt;

&lt;p&gt;ant test  -Dtestcase=StreamExpressionTest -Dtests.method=testAll -Dtests.seed=A8E5206069146FC0 -Dtests.multiplier=3 -Dtests.slow=true -Dtests.locale=lv-LV -Dtests.timezone=America/Iqaluit -Dtests.asserts=true -Dtests.file.encoding=ISO-8859-1&lt;/p&gt;</description>
                <environment></environment>
        <key id="12948989">SOLR-8832</key>
            <summary>Faulty DaemonStream shutdown procedures</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jbernste">Joel Bernstein</assignee>
                                    <reporter username="jbernste">Joel Bernstein</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Mar 2016 03:25:03 +0000</created>
                <updated>Sat, 12 Mar 2016 01:11:06 +0000</updated>
                            <resolved>Fri, 11 Mar 2016 21:11:49 +0000</resolved>
                                    <version>6.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15191264" author="joel.bernstein" created="Fri, 11 Mar 2016 17:30:28 +0000"  >&lt;p&gt;The test failures were occurring due to faulty shutdown behavior in the DaemonStream.&lt;/p&gt;

&lt;p&gt;This patch makes the following changes:&lt;/p&gt;

&lt;p&gt;1) Removes the interrupt on shutdown. The interrupt was just faulty and causing the internal thread to exit during unsafe times. Now shutdown just flags the internal thread so that it will exit it&apos;s loop after completing a full run of the internal stream. &lt;/p&gt;

&lt;p&gt;2) Adds a shutdown method to the DaemonStream. When the DaemonStreams internal queue is enabled for continuous pull streaming, the contract for shutdown is:&lt;/p&gt;

&lt;p&gt; *a) call DaemonStream.shutdown(). This signals the internal thread to shutdown after it finishes it&apos;s run.&lt;br/&gt;
  *b) call DaemonStream.read() until the EOF Tuple is read. This will clear the internal queue and unblock the internal stream if it&apos;s blocked on the queue.&lt;br/&gt;
    *c) Call DaemonStream.close();&lt;/p&gt;

&lt;p&gt;If the internal queue is not enabled, in the continuous push streaming use case, calling close()  will suffice. &lt;/p&gt;</comment>
                            <comment id="15191467" author="jira-bot" created="Fri, 11 Mar 2016 20:31:12 +0000"  >&lt;p&gt;Commit 007d41c9f5073ee796dc35168d397e7a5b501997 in lucene-solr&apos;s branch refs/heads/master from jbernste&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=007d41c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=007d41c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8832&quot; title=&quot;Faulty DaemonStream shutdown procedures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8832&quot;&gt;&lt;del&gt;SOLR-8832&lt;/del&gt;&lt;/a&gt;: Faulty DaemonStream shutdown procedures&lt;/p&gt;</comment>
                            <comment id="15191481" author="jira-bot" created="Fri, 11 Mar 2016 20:41:02 +0000"  >&lt;p&gt;Commit 26f230a4740e281ee9b43ed60bb8d24c4ed8dbdc in lucene-solr&apos;s branch refs/heads/branch_6x from jbernste&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=26f230a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=26f230a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8832&quot; title=&quot;Faulty DaemonStream shutdown procedures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8832&quot;&gt;&lt;del&gt;SOLR-8832&lt;/del&gt;&lt;/a&gt;: Faulty DaemonStream shutdown procedures&lt;/p&gt;</comment>
                            <comment id="15191488" author="jira-bot" created="Fri, 11 Mar 2016 20:46:27 +0000"  >&lt;p&gt;Commit 99b9e71db21a34eca4da1639ac13b91cbdcca813 in lucene-solr&apos;s branch refs/heads/branch_6_0 from jbernste&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=99b9e71&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=99b9e71&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8832&quot; title=&quot;Faulty DaemonStream shutdown procedures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8832&quot;&gt;&lt;del&gt;SOLR-8832&lt;/del&gt;&lt;/a&gt;: Faulty DaemonStream shutdown procedures&lt;/p&gt;</comment>
                            <comment id="15191680" author="jira-bot" created="Sat, 12 Mar 2016 01:11:06 +0000"  >&lt;p&gt;Commit 007d41c9f5073ee796dc35168d397e7a5b501997 in lucene-solr&apos;s branch refs/heads/jira/&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-445&quot; title=&quot;Update Handlers abort with bad documents&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-445&quot;&gt;&lt;del&gt;SOLR-445&lt;/del&gt;&lt;/a&gt; from jbernste&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=007d41c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=007d41c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8832&quot; title=&quot;Faulty DaemonStream shutdown procedures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8832&quot;&gt;&lt;del&gt;SOLR-8832&lt;/del&gt;&lt;/a&gt;: Faulty DaemonStream shutdown procedures&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12792871" name="SOLR-8832.patch" size="2396" author="jbernste" created="Fri, 11 Mar 2016 17:18:58 +0000"/>
                            <attachment id="12792866" name="SOLR-8832.patch" size="1782" author="jbernste" created="Fri, 11 Mar 2016 16:56:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ui33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>