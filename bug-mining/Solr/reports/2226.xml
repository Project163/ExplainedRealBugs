<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:00:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-6851] Scripts to help install and run Solr as a service on Linux</title>
                <link>https://issues.apache.org/jira/browse/SOLR-6851</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;noticed 2 problems with the oom_solr.sh script...&lt;/p&gt;

&lt;p&gt;1) the script is only being run with the port of hte solr instance to terminate, so the log messages aren&apos;t getting writen to the correct directory &amp;#8211; if we change hte script to take a log dir/file as an argument, we can ensure the logs are written to the correct place&lt;/p&gt;

&lt;p&gt;2) on my ubuntu linux machine (where /bin/sh is a symlink to &quot;/bin/dash&quot;), the console log is recording a script error when java runs oom_solr.sh...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;#
# java.lang.OutOfMemoryError: Java heap space
# -XX:OnOutOfMemoryError=&quot;/home/hossman/lucene/5x_dev/solr/bin/oom_solr.sh 8983&quot;
#   Executing /bin/sh -c &quot;/home/hossman/lucene/5x_dev/solr/bin/oom_solr.sh 8983&quot;...
/home/hossman/lucene/5x_dev/solr/bin/oom_solr.sh: 20: [: 14305: unexpected operator
Running OOM killer script for process 14305 for Solr on port 8983
Killed process 14305
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;steps to reproduce: &lt;tt&gt;bin/solr -e techproducts -m 10m&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12761857">SOLR-6851</key>
            <summary>Scripts to help install and run Solr as a service on Linux</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thelabdude">Timothy Potter</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Dec 2014 21:14:29 +0000</created>
                <updated>Mon, 9 May 2016 18:55:15 +0000</updated>
                            <resolved>Tue, 13 Jan 2015 18:16:09 +0000</resolved>
                                                    <fixVersion>5.0</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14247242" author="hossman" created="Mon, 15 Dec 2014 21:20:43 +0000"  >&lt;p&gt;the script error seems to be an &quot;sh&quot; vs &quot;bash&quot; vs &quot;dash&quot; portability issue with using &quot;=&quot; for string comparisons.&lt;/p&gt;

&lt;p&gt;from a portibility standpoint, probably safer to just use &quot;-z&quot; to check if the string is empty...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; [ -z &lt;span class=&quot;code-quote&quot;&gt;&quot;$SOLR_PID&quot;&lt;/span&gt; ]; then
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14252612" author="thelabdude" created="Fri, 19 Dec 2014 00:15:27 +0000"  >&lt;p&gt;I&apos;m hijacking this ticket to do some other enhancements needed to support running Solr as a service on *nix, such as being able to keep static Solr files in /opt/solr and user / live files in /var/solr and being able to control Solr using /etc/init.d/solr&lt;/p&gt;</comment>
                            <comment id="14252619" author="thelabdude" created="Fri, 19 Dec 2014 00:19:35 +0000"  >&lt;p&gt;When I got into dealing with the oom script issue Hossman found, we realized that the PID handling was sub-optimal and overall needed to vet out issues related to running Solr as a service using an /etc/init.d/solr script. This patch has a very simple solution for that.&lt;/p&gt;

&lt;p&gt;I&apos;m working on a Taking Solr to Production page for the ref guide to explain how to structure your environment and how to use the scripts in production.&lt;/p&gt;</comment>
                            <comment id="14253784" author="thelabdude" created="Fri, 19 Dec 2014 18:52:32 +0000"  >&lt;p&gt;If you&apos;re interested in this type of stuff - please give a review of: &lt;a href=&quot;https://cwiki.apache.org/confluence/display/solr/Taking+Solr+to+Production&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/solr/Taking+Solr+to+Production&lt;/a&gt;, which covers features supported by this patch.&lt;/p&gt;</comment>
                            <comment id="14255863" author="steve_rowe" created="Mon, 22 Dec 2014 15:56:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt;, I went through the new ref guide page following the instructions, using the latest branch_5x with the patch on this issue, on a Debian Linux box I&apos;ve got.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Is the following section necessary?  The vars are already filled in, including &lt;tt&gt;RUNAS=ubuntu&lt;/tt&gt;:
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;blockquote&gt;
&lt;p&gt;Next, you need to edit the /etc/init.d/solr file to set the following variables:
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SOLR_INSTALL_DIR=/opt/solr
RUNAS=???
SOLR_ENV=/var/solr/solr.in.sh
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;Solr is still running just before the &lt;tt&gt;init.d&lt;/tt&gt; section - we should tell people to stop Solr before starting that section - here&apos;s the part where the user has started solr:
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;blockquote&gt;
&lt;p&gt;At this point, you can start Solr using the include file to override default settings by doing:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ SOLR_INCLUDE=/var/solr/solr.in.sh /opt/solr/bin/solr start
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;bin/init.d/solr&lt;/tt&gt; is not included in the built distribution - I was able to get it included with this patch to &lt;tt&gt;solr/build.xml&lt;/tt&gt;:
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;@@ -485,7 +488,7 @@
       &amp;lt;tarfileset dir=&lt;span class=&quot;code-quote&quot;&gt;&quot;.&quot;&lt;/span&gt;
                   filemode=&lt;span class=&quot;code-quote&quot;&gt;&quot;755&quot;&lt;/span&gt;
                   prefix=&lt;span class=&quot;code-quote&quot;&gt;&quot;${fullnamever}&quot;&lt;/span&gt;
-                  includes=&lt;span class=&quot;code-quote&quot;&gt;&quot;bin/* server/**/*.sh example/**/*.sh example/**/bin/&quot;&lt;/span&gt; /&amp;gt;
+                  includes=&lt;span class=&quot;code-quote&quot;&gt;&quot;bin/** server/**/*.sh example/**/*.sh example/**/bin/&quot;&lt;/span&gt; /&amp;gt;
       &amp;lt;tarfileset dir=&lt;span class=&quot;code-quote&quot;&gt;&quot;.&quot;&lt;/span&gt;
                   prefix=&lt;span class=&quot;code-quote&quot;&gt;&quot;${fullnamever}&quot;&lt;/span&gt;
                   includes=&quot;dist/*.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;Sometimes commands assume the user is logged in as root, and sometimes they use sudo - seems like for the one-time installation/config stuff, they should stick to one approach? - here&apos;s where the first switch happened that I noticed:
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ sudo chown -R ubuntu: /var/solr
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;When running &lt;tt&gt;update-rc.d solr defaults&lt;/tt&gt;:
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;update-rc.d: warning: default stop runlevel arguments (0 1 6) do not match solr Default-Stop values (none)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
Is there some reason Solr shouldn&apos;t be stopped at run levels 0, 1, and 6?
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;Why is this necessary?: &lt;tt&gt;update-rc.d solr enable&lt;/tt&gt;  (didn&apos;t change anything on my box - isn&apos;t this only necessary after a &lt;tt&gt;update-rc.d XXX disable&lt;/tt&gt;?)
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/li&gt;
	&lt;li&gt;Under the Progress Check section, when restarting, I get the following:
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;mv: cannot move `/opt/solr/server/logs/solr.log&apos; to `/opt/solr/server/logs/solr_log_20141222_0048&apos;: Permission denied
mv: cannot move `/opt/solr/server/logs/solr_gc.log&apos; to `/opt/solr/server/logs/solr_gc_log_20141222_0048&apos;: Permission denied
Waiting to see Solr listening on port 8983/opt/solr/bin/solr: line 1138: /opt/solr/server/logs/solr-8983-console.log: Permission denied
 [-]  Still not seeing Solr listening on 8983 after 30 seconds!
INFO  - 2014-12-22 05:25:38.930; org.apache.solr.core.SolrResourceLoader; JNDI not configured for solr (NoInitialContextEx)
INFO  - 2014-12-22 05:25:38.930; org.apache.solr.core.SolrResourceLoader; using system property solr.solr.home: /var/solr/data
INFO  - 2014-12-22 05:25:38.930; org.apache.solr.core.SolrResourceLoader; new SolrResourceLoader for directory: &apos;/var/solr/data/&apos;
INFO  - 2014-12-22 05:25:39.025; org.apache.solr.core.ConfigSolr; Loading container configuration from /var/solr/data/solr.xml
INFO  - 2014-12-22 05:25:39.085; org.apache.solr.core.CorePropertiesLocator; Config-defined core root directory: /var/solr/data
INFO  - 2014-12-22 05:25:39.090; org.apache.solr.core.CoreContainer; New CoreContainer 18546089
INFO  - 2014-12-22 05:25:39.091; org.apache.solr.core.CoreContainer; Loading cores into CoreContainer [instanceDir=/var/solr/data/]
INFO  - 2014-12-22 05:25:39.100; org.apache.solr.handler.component.HttpShardHandlerFactory; Setting socketTimeout to: 0
INFO  - 2014-12-22 05:25:39.100; org.apache.solr.handler.component.HttpShardHandlerFactory; Setting urlScheme to: null
INFO  - 2014-12-22 05:25:39.104; org.apache.solr.handler.component.HttpShardHandlerFactory; Setting connTimeout to: 0
INFO  - 2014-12-22 05:25:39.104; org.apache.solr.handler.component.HttpShardHandlerFactory; Setting maxConnectionsPerHost to: 20
INFO  - 2014-12-22 05:25:39.106; org.apache.solr.handler.component.HttpShardHandlerFactory; Setting maxConnections to: 10000
INFO  - 2014-12-22 05:25:39.106; org.apache.solr.handler.component.HttpShardHandlerFactory; Setting corePoolSize to: 0
INFO  - 2014-12-22 05:25:39.106; org.apache.solr.handler.component.HttpShardHandlerFactory; Setting maximumPoolSize to: 2147483647
INFO  - 2014-12-22 05:25:39.106; org.apache.solr.handler.component.HttpShardHandlerFactory; Setting maxThreadIdleTime to: 5
INFO  - 2014-12-22 05:25:39.106; org.apache.solr.handler.component.HttpShardHandlerFactory; Setting sizeOfQueue to: -1
INFO  - 2014-12-22 05:25:39.107; org.apache.solr.handler.component.HttpShardHandlerFactory; Setting fairnessPolicy to: false
INFO  - 2014-12-22 05:25:39.202; org.apache.solr.update.UpdateShardHandler; Creating UpdateShardHandler HTTP client with params: socketTimeout=0&amp;amp;connTimeout=0&amp;amp;retry=false
INFO  - 2014-12-22 05:25:39.204; org.apache.solr.logging.LogWatcher; SLF4J impl is org.slf4j.impl.Log4jLoggerFactory
INFO  - 2014-12-22 05:25:39.205; org.apache.solr.logging.LogWatcher; Registering Log Listener [Log4j (org.slf4j.impl.Log4jLoggerFactory)]
INFO  - 2014-12-22 05:25:39.205; org.apache.solr.core.CoreContainer; Host Name: 
INFO  - 2014-12-22 05:25:39.229; org.apache.solr.core.CorePropertiesLocator; Looking for core definitions underneath /var/solr/data
INFO  - 2014-12-22 05:25:39.230; org.apache.solr.core.CorePropertiesLocator; Found 0 core definitions
INFO  - 2014-12-22 05:25:39.231; org.apache.solr.servlet.SolrDispatchFilter; user.dir=/opt/solr-5.0.0/server
INFO  - 2014-12-22 05:25:39.231; org.apache.solr.servlet.SolrDispatchFilter; SolrDispatchFilter.init() done
INFO  - 2014-12-22 05:25:39.256; org.eclipse.jetty.server.AbstractConnector; Started SocketConnector@0.0.0.0:8983
INFO  - 2014-12-22 05:34:33.015; org.eclipse.jetty.server.Server; Graceful shutdown SocketConnector@0.0.0.0:8983
INFO  - 2014-12-22 05:34:33.016; org.eclipse.jetty.server.Server; Graceful shutdown o.e.j.w.WebAppContext{/solr,file:/opt/solr-5.0.0/server/solr-webapp/webapp/},/opt/solr-5.0.0/server/webapps/solr.war
INFO  - 2014-12-22 05:34:34.017; org.apache.solr.core.CoreContainer; Shutting down CoreContainer instance=18546089
INFO  - 2014-12-22 05:34:34.020; org.eclipse.jetty.server.handler.ContextHandler; stopped o.e.j.w.WebAppContext{/solr,file:/opt/solr-5.0.0/server/solr-webapp/webapp/},/opt/solr-5.0.0/server/webapps/solr.war
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
At this point, Solr isn&apos;t running and &lt;tt&gt;service solr start&lt;/tt&gt; does not do the trick.
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;service solr stop&lt;/tt&gt; at this point doesn&apos;t work (neither does adding &apos;-p 8983&apos; or &apos;-all&apos; at the end):
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Must either specify a port using -p or -all to stop all Solr nodes on this host.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
and &lt;tt&gt;service solr status&lt;/tt&gt; says:
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Found 1 Solr nodes: 

Solr process 13440 from /var/solr/solr-8983.pid not found.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;After handling the log setup, &lt;tt&gt;service solr start&lt;/tt&gt; results in the following in &lt;tt&gt;solr.log&lt;/tt&gt;:
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;INFO  - 2014-12-22 06:01:32.762; org.eclipse.jetty.server.Server; jetty-8.1.10.v20130312
INFO  - 2014-12-22 06:01:32.777; org.eclipse.jetty.deploy.providers.ScanningAppProvider; Deployment monitor /opt/solr-5.0.0/server/contexts at interval 0
INFO  - 2014-12-22 06:01:32.781; org.eclipse.jetty.deploy.DeploymentManager; Deployable added: /opt/solr-5.0.0/server/contexts/solr-jetty-context.xml
WARN  - 2014-12-22 06:01:32.811; org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration; Config error at &amp;lt;Set name=&quot;tempDirectory&quot;&amp;gt;&amp;lt;Property name=&quot;jetty.home&quot; defau
lt=&quot;.&quot;/&amp;gt;/solr-webapp&amp;lt;/Set&amp;gt;
WARN  - 2014-12-22 06:01:32.812; org.eclipse.jetty.deploy.DeploymentManager; Unable to reach node goal: started
java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:606)
        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.set(XmlConfiguration.java:561)
        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.configure(XmlConfiguration.java:384)
        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.configure(XmlConfiguration.java:343)
        at org.eclipse.jetty.xml.XmlConfiguration.configure(XmlConfiguration.java:296)
        at org.eclipse.jetty.deploy.providers.ContextProvider.createContextHandler(ContextProvider.java:87)
        at org.eclipse.jetty.deploy.App.getContextHandler(App.java:100)
        at org.eclipse.jetty.deploy.bindings.StandardDeployer.processBinding(StandardDeployer.java:36)
        at org.eclipse.jetty.deploy.AppLifeCycle.runBindings(AppLifeCycle.java:186)
        at org.eclipse.jetty.deploy.DeploymentManager.requestAppGoal(DeploymentManager.java:494)
        at org.eclipse.jetty.deploy.DeploymentManager.addApp(DeploymentManager.java:141)
        at org.eclipse.jetty.deploy.providers.ScanningAppProvider.fileAdded(ScanningAppProvider.java:145)
        at org.eclipse.jetty.deploy.providers.ScanningAppProvider$1.fileAdded(ScanningAppProvider.java:56)
        at org.eclipse.jetty.util.Scanner.reportAddition(Scanner.java:609)
        at org.eclipse.jetty.util.Scanner.reportDifferences(Scanner.java:540)
        at org.eclipse.jetty.util.Scanner.scan(Scanner.java:403)
        at org.eclipse.jetty.util.Scanner.doStart(Scanner.java:337)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
        at org.eclipse.jetty.deploy.providers.ScanningAppProvider.doStart(ScanningAppProvider.java:121)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
        at org.eclipse.jetty.deploy.DeploymentManager.startAppProvider(DeploymentManager.java:555)
        at org.eclipse.jetty.deploy.DeploymentManager.doStart(DeploymentManager.java:230)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
        at org.eclipse.jetty.util.component.AggregateLifeCycle.doStart(AggregateLifeCycle.java:81)
        at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:58)
        at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:96)
        at org.eclipse.jetty.server.Server.doStart(Server.java:280)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
        at org.eclipse.jetty.xml.XmlConfiguration$1.run(XmlConfiguration.java:1259)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:1182)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:606)
        at org.eclipse.jetty.start.Main.invokeMain(Main.java:473)
        at org.eclipse.jetty.start.Main.start(Main.java:615)
        at org.eclipse.jetty.start.Main.main(Main.java:96)
Caused by: java.lang.IllegalArgumentException: Bad temp directory: /opt/solr-5.0.0/server/solr-webapp
        at org.eclipse.jetty.webapp.WebAppContext.setTempDirectory(WebAppContext.java:1129)
        ... 41 more
INFO  - 2014-12-22 06:01:32.817; org.eclipse.jetty.server.AbstractConnector; Started SocketConnector@0.0.0.0:8983
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;That&apos;s as far as I got.&lt;/p&gt;</comment>
                            <comment id="14257333" author="thelabdude" created="Tue, 23 Dec 2014 18:45:58 +0000"  >&lt;p&gt;Updated patch now includes a helper script that performs the service installation tasks described in the ref guide (&lt;a href=&quot;https://cwiki.apache.org/confluence/display/solr/Taking+Solr+to+Production&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/solr/Taking+Solr+to+Production&lt;/a&gt;), see bin/install_solr_service.sh&lt;/p&gt;

&lt;p&gt;I&apos;ve only tested it on Red Hat, Ubuntu, SUSE, and Debian ... we can add support for additional Linux distros in the future.&lt;/p&gt;</comment>
                            <comment id="14257337" author="thelabdude" created="Tue, 23 Dec 2014 18:48:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=steve_rowe&quot; class=&quot;user-hover&quot; rel=&quot;steve_rowe&quot;&gt;steve_rowe&lt;/a&gt; Thanks for the detailed review. I believe I&apos;ve addressed all the issues you found with this new patch and edits to the ref guide. Please kick the tires on the bin/install_solr_service.sh script if you have a chance.&lt;/p&gt;</comment>
                            <comment id="14257496" author="thelabdude" created="Tue, 23 Dec 2014 20:43:08 +0000"  >&lt;p&gt;Ignore the previous patch ... newest one has better error handling and accepts a -p option to override the default port 8983, which is needed for installing multiple nodes on the same host.&lt;/p&gt;</comment>
                            <comment id="14257679" author="jira-bot" created="Tue, 23 Dec 2014 23:20:44 +0000"  >&lt;p&gt;Commit 1647700 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1647700&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1647700&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6851&quot; title=&quot;Scripts to help install and run Solr as a service on Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6851&quot;&gt;&lt;del&gt;SOLR-6851&lt;/del&gt;&lt;/a&gt;: Scripts to help install and run Solr as a service on Linux&lt;/p&gt;</comment>
                            <comment id="14258349" author="jira-bot" created="Wed, 24 Dec 2014 15:59:30 +0000"  >&lt;p&gt;Commit 1647813 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1647813&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1647813&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6851&quot; title=&quot;Scripts to help install and run Solr as a service on Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6851&quot;&gt;&lt;del&gt;SOLR-6851&lt;/del&gt;&lt;/a&gt;: Scripts to help install and run Solr as a service on Linux&lt;/p&gt;</comment>
                            <comment id="14275632" author="thelabdude" created="Tue, 13 Jan 2015 18:12:28 +0000"  >&lt;p&gt;Re-opening (since this isn&apos;t released yet) to add one minor improvement suggested by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hossman&quot; class=&quot;user-hover&quot; rel=&quot;hossman&quot;&gt;hossman&lt;/a&gt;, namely - the SOLR_VAR_DIR should be determined using the service name so the user can just use -s and skip passing -d, i.e.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;sudo bash ./install_solr_service.sh solr-5.0.0.tgz -s solr2 -p 8984
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;will setup the &quot;solr2&quot; service in /var/solr2 automatically.&lt;/p&gt;</comment>
                            <comment id="14275640" author="jira-bot" created="Tue, 13 Jan 2015 18:15:49 +0000"  >&lt;p&gt;Commit 1651435 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1651435&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1651435&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6851&quot; title=&quot;Scripts to help install and run Solr as a service on Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6851&quot;&gt;&lt;del&gt;SOLR-6851&lt;/del&gt;&lt;/a&gt;: Set the SOLR_VAR_DIR using the SOLR_SERVICE variable, thus alleviating the need to specify the -d option when overrding the service name with -s&lt;/p&gt;</comment>
                            <comment id="14275643" author="jira-bot" created="Tue, 13 Jan 2015 18:16:51 +0000"  >&lt;p&gt;Commit 1651436 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thelabdude&quot; class=&quot;user-hover&quot; rel=&quot;thelabdude&quot;&gt;thelabdude&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1651436&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1651436&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6851&quot; title=&quot;Scripts to help install and run Solr as a service on Linux&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6851&quot;&gt;&lt;del&gt;SOLR-6851&lt;/del&gt;&lt;/a&gt;: Set the SOLR_VAR_DIR using the SOLR_SERVICE variable, thus alleviating the need to specify the -d option when overrding the service name with -s&lt;/p&gt;</comment>
                            <comment id="14288187" author="janhoy" created="Thu, 22 Jan 2015 20:48:47 +0000"  >&lt;p&gt;Good stuff! Did some small typo fixes in the refguide chapter.&lt;/p&gt;

&lt;p&gt;Have not run the install script yet, but here are some initial thoughts (not criticism, just thoughts) :&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The script &lt;tt&gt;install_solr_service.sh&lt;/tt&gt; installs Solr, not only a the service/daemon scipt. Why not simply &lt;tt&gt;install_solr&lt;/tt&gt;? We already have a tradition to skip the .sh suffix on Linux, and shorter is better.&lt;/li&gt;
	&lt;li&gt;Should the script reside on the top-level in the tarball, so extracting it is simply &lt;tt&gt;tar xzf solr-5.0.0.tgz install_solr&lt;/tt&gt;?&lt;/li&gt;
	&lt;li&gt;If no args passed, and there are &lt;tt&gt;solr&amp;#45;?&amp;#45;?&amp;#45;?.[tgz|zip]&lt;/tt&gt; file(s) in CWD, then we could assume the most recent one. Also would be nice that if no args passed, enter interactive mode, unless &lt;tt&gt;-q&lt;/tt&gt; (quiet) given&lt;/li&gt;
	&lt;li&gt;Script should show help for &lt;tt&gt;&amp;#45;h&lt;/tt&gt; and &lt;tt&gt;--help&lt;/tt&gt;&#160;as well, I always find it weird with multi-char options after single dash&lt;/li&gt;
	&lt;li&gt;Looks weird with &lt;tt&gt;/var/solr/data/data/...&lt;/tt&gt; - could we simply choose &lt;tt&gt;/var/solr/home&lt;/tt&gt; for Solr home? Also, after completing &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6671&quot; title=&quot;Introduce a solr.data.home as root dir for all data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6671&quot;&gt;&lt;del&gt;SOLR-6671&lt;/del&gt;&lt;/a&gt; we could make data dir configurable and let it default to &lt;tt&gt;/var/solr/data&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;If starting to adopt POSIX style locations, why not go all in and use &lt;tt&gt;/etc/solr/&lt;/tt&gt; for solr.solr.home, &lt;tt&gt;/var/solr/data&lt;/tt&gt; for solr.data.home, &lt;tt&gt;/var/run/solr/&lt;/tt&gt; for PIDs and &lt;tt&gt;/var/log/solr/&lt;/tt&gt; for logs? That&apos;s probably where a random Unix sysadmin would look first&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14332841" author="anshumg" created="Mon, 23 Feb 2015 05:02:12 +0000"  >&lt;p&gt;Bulk close after 5.0 release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12752748">SOLR-6703</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12688916" name="SOLR-6851.patch" size="39210" author="thelabdude" created="Tue, 23 Dec 2014 20:43:08 +0000"/>
                            <attachment id="12688891" name="SOLR-6851.patch" size="38325" author="thelabdude" created="Tue, 23 Dec 2014 18:45:58 +0000"/>
                            <attachment id="12688191" name="SOLR-6851.patch" size="26688" author="thelabdude" created="Fri, 19 Dec 2014 00:19:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23gcf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>