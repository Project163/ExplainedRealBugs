<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:03:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-7158] ZkConfigManager filesystem separator fix for Windows</title>
                <link>https://issues.apache.org/jira/browse/SOLR-7158</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The separator for zk nodes is &apos;/&apos;. However, on Windows, while uploading the relative files nested within a directory (e.g. velocity\hit-plain.vm) contain &apos;\&apos;. This, apart from causing an inconsistency as compared to zk on posix systems, messed up the ZkCLITest on Windows where count of files in zk and files in the filesystem was compared.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12777487">SOLR-7158</key>
            <summary>ZkConfigManager filesystem separator fix for Windows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="romseygeek">Alan Woodward</assignee>
                                    <reporter username="ichattopadhyaya">Ishan Chattopadhyaya</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Feb 2015 10:50:29 +0000</created>
                <updated>Wed, 15 Apr 2015 00:30:40 +0000</updated>
                            <resolved>Wed, 25 Feb 2015 12:40:57 +0000</resolved>
                                                    <fixVersion>5.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14336347" author="ichattopadhyaya" created="Wed, 25 Feb 2015 10:55:31 +0000"  >&lt;p&gt;Attaching a patch to fix this; should fix the jenkins failure for the ZkCLITest.testUpConfigLinkConfigClearZk().&lt;/p&gt;</comment>
                            <comment id="14336356" author="romseygeek" created="Wed, 25 Feb 2015 11:06:35 +0000"  >&lt;p&gt;Thanks Ishan!&lt;/p&gt;

&lt;p&gt;Is the second Files.createDirectories() actually necessary?  It&apos;s already called at the top of downloadFromZk&lt;/p&gt;</comment>
                            <comment id="14336357" author="ichattopadhyaya" created="Wed, 25 Feb 2015 11:14:05 +0000"  >&lt;p&gt;Thanks for reviewing, Alan.&lt;br/&gt;
The first createDirectories() (on the top) creates the base directory, e.g. c:\users\ishan\configs. &lt;br/&gt;
The one I added creates the directories for nested files in the ZK configs, e.g. for a file in zk: velocity\plain-hit.vm it creates c:\users\ishan\configs\velocity. &lt;/p&gt;

&lt;p&gt;I think the first one (on top) could be removed, since the latter one will recursively create the base directory as well (something like mkdir -p).&lt;/p&gt;</comment>
                            <comment id="14336364" author="romseygeek" created="Wed, 25 Feb 2015 11:17:49 +0000"  >&lt;p&gt;Right, but downloadFromZk is called recursively for every subdirectory, so the createDirectories() at the top should be called for each directory that needs to be constructed.  Unless I&apos;m missing something?&lt;/p&gt;</comment>
                            <comment id="14336374" author="ichattopadhyaya" created="Wed, 25 Feb 2015 11:25:14 +0000"  >&lt;p&gt;Ah, I see what you mean! Actually, because of the second issue with the path separator, something like velocity\plain-hit.vm was not being considered as a subpath, and thus the Files.write() was attempting to create a single file with that name (velocity\plain-hit.vm), which failed. Hence, I tried to explicitly create the sub directory (velocity) by calling createDirectories(filename.getParent()), which in view of the path separator fix seems redundant. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Thanks for the catch!&lt;/p&gt;</comment>
                            <comment id="14336394" author="romseygeek" created="Wed, 25 Feb 2015 11:40:10 +0000"  >&lt;p&gt;Here&apos;s an alternative patch (with Windows path shenanigans extracted to a helper method).  Could you test this on a Windows box?  Thanks!&lt;/p&gt;</comment>
                            <comment id="14336416" author="ichattopadhyaya" created="Wed, 25 Feb 2015 11:55:22 +0000"  >&lt;p&gt;I like the path separator logic being exctracted into a helper method. Just checked on Windows, it works fine!&lt;br/&gt;
A quick lookup at &lt;a href=&quot;http://en.wikipedia.org/wiki/Path_%28computing%29#Representations_of_paths_by_operating_system_and_shell&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://en.wikipedia.org/wiki/Path_%28computing%29#Representations_of_paths_by_operating_system_and_shell&lt;/a&gt; convinces me that we can actually hardcode &quot;\&quot; for the check for separator (as you&apos;ve done here). That might also make it fine (more performant?) to replace Pattern.quote(separator) with &quot;\\\\&quot;?&lt;/p&gt;</comment>
                            <comment id="14336417" author="ichattopadhyaya" created="Wed, 25 Feb 2015 12:00:19 +0000"  >&lt;p&gt;Just a thought, instead of createZkNode (which gives the impression that it actually creates a zk node), can we rename the helper method to getZkNodeName/createZkNodeName or something similar?&lt;/p&gt;</comment>
                            <comment id="14336434" author="romseygeek" created="Wed, 25 Feb 2015 12:31:02 +0000"  >&lt;p&gt;I&apos;ve incorporated both suggestions.  Thanks again!&lt;/p&gt;</comment>
                            <comment id="14336435" author="jira-bot" created="Wed, 25 Feb 2015 12:32:29 +0000"  >&lt;p&gt;Commit 1662205 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=romseygeek&quot; class=&quot;user-hover&quot; rel=&quot;romseygeek&quot;&gt;romseygeek&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1662205&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1662205&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7158&quot; title=&quot;ZkConfigManager filesystem separator fix for Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7158&quot;&gt;&lt;del&gt;SOLR-7158&lt;/del&gt;&lt;/a&gt;: Fix zk upload on Windows systems&lt;/p&gt;</comment>
                            <comment id="14336438" author="jira-bot" created="Wed, 25 Feb 2015 12:35:01 +0000"  >&lt;p&gt;Commit 1662206 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=romseygeek&quot; class=&quot;user-hover&quot; rel=&quot;romseygeek&quot;&gt;romseygeek&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1662206&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1662206&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7158&quot; title=&quot;ZkConfigManager filesystem separator fix for Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7158&quot;&gt;&lt;del&gt;SOLR-7158&lt;/del&gt;&lt;/a&gt;: Fix zk upload on Windows systems&lt;/p&gt;</comment>
                            <comment id="14495339" author="thelabdude" created="Wed, 15 Apr 2015 00:30:40 +0000"  >&lt;p&gt;Bulk close after 5.1 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12777421">SOLR-7156</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12777421">SOLR-7156</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12700735" name="SOLR-7158.patch" size="1929" author="romseygeek" created="Wed, 25 Feb 2015 11:40:10 +0000"/>
                            <attachment id="12700717" name="SOLR-7158.patch" size="2141" author="ichattopadhyaya" created="Wed, 25 Feb 2015 10:55:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i260zb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>