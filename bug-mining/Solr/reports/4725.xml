<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:48:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-12848] SolrJ does not use HTTP proxy anymore</title>
                <link>https://issues.apache.org/jira/browse/SOLR-12848</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;SolrJ&apos;s HttpSolrClient ignores the HTTP proxy configuration from system properties http.proxyHost and http.proxyPort. This used to work with Solr 6.6.5.&lt;/p&gt;

&lt;p&gt;Solr 6.6.5 used org.apache.http.impl.client.SystemDefaultHttpClient under the hood, which took system properties for HTTP proxy config into account. The deprecated SystemDefaultHttpClient class was replaced as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4509&quot; title=&quot;Move to non deprecated HttpClient impl classes to remove stale connection check on every request and move connection lifecycle management towards the client.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4509&quot;&gt;&lt;del&gt;SOLR-4509&lt;/del&gt;&lt;/a&gt;. SolrJ now uses org.apache.http.impl.client.HttpClientBuilder#create to create an HttpClient, but it does not call #useSystemProperties on the builder. Because of that, the proxy configuration from system properties is ignored.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13190627">SOLR-12848</key>
            <summary>SolrJ does not use HTTP proxy anymore</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dsmiley">David Smiley</assignee>
                                    <reporter username="ahubold">Andreas Hubold</reporter>
                        <labels>
                            <label>httpclient</label>
                    </labels>
                <created>Wed, 10 Oct 2018 13:13:09 +0000</created>
                <updated>Thu, 12 May 2022 00:26:42 +0000</updated>
                            <resolved>Wed, 29 Sep 2021 21:33:44 +0000</resolved>
                                    <version>7.5</version>
                                    <fixVersion>9.0</fixVersion>
                                    <component>SolrJ</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>9</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="16645044" author="elyograg" created="Wed, 10 Oct 2018 14:28:13 +0000"  >&lt;p&gt;My thought is to have HttpClient always honor the appropriate system properties, like we did before when we used SystemDefaultHttpClient, rather than adding another configuration variable and method to our builders.  Any objections?&lt;/p&gt;</comment>
                            <comment id="16645063" author="elyograg" created="Wed, 10 Oct 2018 14:42:11 +0000"  >&lt;p&gt;After a quick examination of the code, I think the attached patch would fix this problem.&lt;/p&gt;</comment>
                            <comment id="16645067" author="elyograg" created="Wed, 10 Oct 2018 14:43:01 +0000"  >&lt;p&gt;Oops.  I&apos;ve made a mistake there.  Will attach a new patch.&lt;/p&gt;</comment>
                            <comment id="16667014" author="lisa88" created="Mon, 29 Oct 2018 11:06:23 +0000"  >&lt;p&gt;Thanks for posting the patch, not sure how to install it now, if you can give me a hint&lt;/p&gt;</comment>
                            <comment id="16667204" author="elyograg" created="Mon, 29 Oct 2018 13:31:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;not sure how to install it now, if you can give me a hint&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You can&apos;t install a patch on a binary download of Solr.  You have to obtain the source code for the specific version you want to patch, apply the patch, and then build Solr.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://wiki.apache.org/solr/HowToContribute&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://wiki.apache.org/solr/HowToContribute&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The wiki page linked above describes how to get the source code and figure out which branch you want.  It also has some information about working with patches, although it doesn&apos;t have any info on applying them with git, which I prefer to do when possible.  The basic method for that is to change directory to the root of the source code and then type &quot;git apply /path/to/XXXXX.patch&quot;.&lt;/p&gt;</comment>
                            <comment id="16667210" author="elyograg" created="Mon, 29 Oct 2018 13:36:18 +0000"  >&lt;p&gt;Once you&apos;ve got the patch applied, exactly how to proceed will depend on what you want to do.  Typing &quot;ant clean server&quot; in the solr directory will create a runnable server (bin/solr start works).  Typing &quot;ant clean package&quot; will create binary packages just like those you can download from the Solr website, but will likely have -SNAPSHOT in the version name.&lt;/p&gt;</comment>
                            <comment id="17300165" author="matmarie" created="Fri, 12 Mar 2021 09:09:42 +0000"  >&lt;p&gt;I am trying to use a proxy to intercept SolrJ&amp;lt;-&amp;gt;Solr communications. It looks like I am hitting that issue too.&#160;&lt;br/&gt;
Wondering if this one liner patch is still valid, and could be merged. This seems like a valid use case to honor the jvm flags.&lt;/p&gt;</comment>
                            <comment id="17300569" author="dsmiley" created="Fri, 12 Mar 2021 19:25:54 +0000"  >&lt;p&gt;If someone shows me a PR (or patch) and can attest that it works for them, I&apos;ll merge it. &#160;But moreover, httpcomponents is expected not be a SolrJ dependency sometimes in the 9x series &#8211;&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15223&quot; title=&quot;Deprecate Apache-HttpClient, refactor CloudSolrClient to use jetty-httpclient&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15223&quot;&gt;&lt;del&gt;SOLR-15223&lt;/del&gt;&lt;/a&gt; so better do this using the Jetty based client.&lt;/p&gt;</comment>
                            <comment id="17407725" author="sneethiraj" created="Tue, 31 Aug 2021 23:38:26 +0000"  >&lt;p&gt;+1 for the patch.&lt;br/&gt;
I have verified this patch and it seems to work for HTTP / HTTPS based proxy settings.&lt;br/&gt;
cc:  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17411270" author="dsmiley" created="Tue, 7 Sep 2021 14:27:26 +0000"  >&lt;p&gt;I formed this into a PR.  There are some Java security manager settings needed, when running under a security manager (Solr server does in 9.x by default).  Note that this feature isn&apos;t strictly about HTTP proxies, it&apos;s also other things configurable via system properties, like SSL.&lt;br/&gt;
I suppose this change can make it to 8.11 but 8.10 is nearly frozen.&lt;/p&gt;</comment>
                            <comment id="17422409" author="jira-bot" created="Wed, 29 Sep 2021 21:32:28 +0000"  >&lt;p&gt;Commit df3d8975e0c503a0cf3232c20d84782df8fb3374 in solr&apos;s branch refs/heads/main from David Smiley&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=df3d897&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=df3d897&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-12848&quot; title=&quot;SolrJ does not use HTTP proxy anymore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-12848&quot;&gt;&lt;del&gt;SOLR-12848&lt;/del&gt;&lt;/a&gt;: SolrJ: HTTP proxy configuration via system properties (#287)&lt;/p&gt;

&lt;p&gt;SolrJ and the server can now recognize some standard Java system properties like for an HTTP proxy.  This is only for the Apache HttpClient based SolrJ communication, not Jetty.&lt;/p&gt;</comment>
                            <comment id="17422410" author="dsmiley" created="Wed, 29 Sep 2021 21:33:44 +0000"  >&lt;p&gt;Just a reminder here that eventually this Apache HttpClient based SolrJ will be deprecated in favor of Jetty&apos;s client, although it isn&apos;t yet.&lt;/p&gt;</comment>
                            <comment id="17535573" author="janhoy" created="Thu, 12 May 2022 00:26:42 +0000"  >&lt;p&gt;Closing after the 9.0.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12943255" name="SOLR-12848.patch" size="535" author="elyograg" created="Wed, 10 Oct 2018 14:43:59 +0000"/>
                            <attachment id="12943254" name="SOLR-12848.patch" size="624" author="elyograg" created="Wed, 10 Oct 2018 14:39:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3z18f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>