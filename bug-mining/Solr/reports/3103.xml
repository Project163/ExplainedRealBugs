<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:16:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9305] ForceLeaderTest.testReplicasInLIRNoLeader(): connection refused</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9305</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I saw the following while doing other testing on latest master, reproduces for me:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=ForceLeaderTest -Dtests.method=testReplicasInLIRNoLeader -Dtests.seed=64E138BA51B16ACE -Dtests.slow=true -Dtests.linedocsfile=/home/jenkins/lucene-data/enwiki.random.lines.txt -Dtests.locale=de-LU -Dtests.timezone=America/Indiana/Winamac -Dtests.asserts=true -Dtests.file.encoding=US-ASCII
   [junit4] ERROR   32.9s | ForceLeaderTest.testReplicasInLIRNoLeader &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: org.apache.solr.client.solrj.SolrServerException: org.apache.solr.client.solrj.SolrServerException: No live SolrServers available to handle this request:[http://127.0.0.1:59064/forceleader_test_collection_shard1_replica1]
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([64E138BA51B16ACE:82760C7A683393AF]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.directUpdate(CloudSolrClient.java:753)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.sendRequest(CloudSolrClient.java:1151)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:1040)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:976)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.AbstractFullDistribZkTestBase.sendDocsWithRetry(AbstractFullDistribZkTestBase.java:753)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.AbstractFullDistribZkTestBase.sendDocsWithRetry(AbstractFullDistribZkTestBase.java:741)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.ForceLeaderTest.sendDoc(ForceLeaderTest.java:424)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.ForceLeaderTest.assertSendDocFails(ForceLeaderTest.java:315)
   [junit4]    &amp;gt; 	at org.apache.solr.cloud.ForceLeaderTest.testReplicasInLIRNoLeader(ForceLeaderTest.java:110)
   [junit4]    &amp;gt; 	at org.apache.solr.BaseDistributedSearchTestCase$ShardsRepeatRule$ShardsFixedStatement.callStatement(BaseDistributedSearchTestCase.java:985)
   [junit4]    &amp;gt; 	at org.apache.solr.BaseDistributedSearchTestCase$ShardsRepeatRule$ShardsStatement.evaluate(BaseDistributedSearchTestCase.java:960)
   [junit4]    &amp;gt; 	at java.lang.Thread.run(Thread.java:745)
   [junit4]    &amp;gt; Caused by: org.apache.solr.client.solrj.SolrServerException: No live SolrServers available to handle this request:[http://127.0.0.1:59064/forceleader_test_collection_shard1_replica1]
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.impl.LBHttpSolrClient.request(LBHttpSolrClient.java:393)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.impl.CloudSolrClient.directUpdate(CloudSolrClient.java:747)
   [junit4]    &amp;gt; 	... 49 more
   [junit4]    &amp;gt; Caused by: org.apache.solr.client.solrj.SolrServerException: Server refused connection at: http://127.0.0.1:59064/forceleader_test_collection_shard1_replica1
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:613)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:259)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:248)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.impl.LBHttpSolrClient.doRequest(LBHttpSolrClient.java:413)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.impl.LBHttpSolrClient.request(LBHttpSolrClient.java:382)
   [junit4]    &amp;gt; 	... 50 more
   [junit4]    &amp;gt; Caused by: org.apache.http.conn.HttpHostConnectException: Connect to 127.0.0.1:59064 [/127.0.0.1] failed: Connection refused
   [junit4]    &amp;gt; 	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:151)
   [junit4]    &amp;gt; 	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)
   [junit4]    &amp;gt; 	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)
   [junit4]    &amp;gt; 	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
   [junit4]    &amp;gt; 	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)
   [junit4]    &amp;gt; 	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)
   [junit4]    &amp;gt; 	at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
   [junit4]    &amp;gt; 	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)
   [junit4]    &amp;gt; 	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)
   [junit4]    &amp;gt; 	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:55)
   [junit4]    &amp;gt; 	at org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:511)
   [junit4]    &amp;gt; 	... 54 more
   [junit4]    &amp;gt; Caused by: java.net.ConnectException: Connection refused
   [junit4]    &amp;gt; 	at java.net.PlainSocketImpl.socketConnect(Native Method)
   [junit4]    &amp;gt; 	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
   [junit4]    &amp;gt; 	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
   [junit4]    &amp;gt; 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
   [junit4]    &amp;gt; 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
   [junit4]    &amp;gt; 	at java.net.Socket.connect(Socket.java:589)
   [junit4]    &amp;gt; 	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:74)
   [junit4]    &amp;gt; 	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:134)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I looked at Jenkins emails from the last week and found the following seeds that also reproduce for me on current master:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ant test  -Dtestcase=ForceLeaderTest -Dtests.method=testReplicasInLIRNoLeader -Dtests.seed=A3BEBFC138E7A44A -Dtests.slow=true -Dtests.asserts=true

ant test  -Dtestcase=ForceLeaderTest -Dtests.method=testReplicasInLIRNoLeader -Dtests.seed=6C380F77C37EF848 -Dtests.multiplier=2 -Dtests.slow=true -Dtests.nightly=true

ant test  -Dtestcase=ForceLeaderTest -Dtests.method=testReplicasInLIRNoLeader -Dtests.seed=32F0374606770814 -Dtests.slow=true -Dtests.asserts=true

ant test  -Dtestcase=ForceLeaderTest -Dtests.method=testReplicasInLIRNoLeader -Dtests.seed=FD60286B08398AC3 -Dtests.slow=true -Dtests.asserts=true
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12989219">SOLR-9305</key>
            <summary>ForceLeaderTest.testReplicasInLIRNoLeader(): connection refused</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="romseygeek">Alan Woodward</assignee>
                                    <reporter username="sarowe">Steven Rowe</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Jul 2016 19:17:59 +0000</created>
                <updated>Sat, 8 Jun 2019 15:37:25 +0000</updated>
                            <resolved>Mon, 26 Sep 2016 22:08:46 +0000</resolved>
                                                    <fixVersion>6.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15421487" author="steve_rowe" created="Mon, 15 Aug 2016 18:59:34 +0000"  >&lt;p&gt;My Jenkins found a couple seeds on branch_6x that reproduce for me:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ant test  -Dtestcase=ForceLeaderTest -Dtests.method=testReplicasInLIRNoLeader -Dtests.seed=2B99319C1595636B -Dtests.slow=true -Dtests.asserts=true

ant test  -Dtestcase=ForceLeaderTest -Dtests.method=testReplicasInLIRNoLeader -Dtests.seed=EE727FF4F37D0C3F -Dtests.slow=true -Dtests.asserts=true
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15509481" author="jira-bot" created="Wed, 21 Sep 2016 10:16:32 +0000"  >&lt;p&gt;Commit bae66f7cca8cff796d142eb19585d8e79fae34f8 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=romseygeek&quot; class=&quot;user-hover&quot; rel=&quot;romseygeek&quot;&gt;romseygeek&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=bae66f7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=bae66f7&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9305&quot; title=&quot;ForceLeaderTest.testReplicasInLIRNoLeader(): connection refused&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9305&quot;&gt;&lt;del&gt;SOLR-9305&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9390&quot; title=&quot;LeaderFailoverAfterPartitionTest failures: Connection refused, too few active replicas, and no registered leader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9390&quot;&gt;SOLR-9390&lt;/a&gt;: Don&apos;t use directToLeaders updates in partition tests (see &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9512&quot; title=&quot;CloudSolrClient&amp;#39;s cluster state cache can break direct updates to leaders&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9512&quot;&gt;&lt;del&gt;SOLR-9512&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="15509484" author="jira-bot" created="Wed, 21 Sep 2016 10:16:40 +0000"  >&lt;p&gt;Commit d326adc8bfa33432d50293402a39454d60e070e4 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=romseygeek&quot; class=&quot;user-hover&quot; rel=&quot;romseygeek&quot;&gt;romseygeek&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=d326adc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=d326adc&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9305&quot; title=&quot;ForceLeaderTest.testReplicasInLIRNoLeader(): connection refused&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9305&quot;&gt;&lt;del&gt;SOLR-9305&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9390&quot; title=&quot;LeaderFailoverAfterPartitionTest failures: Connection refused, too few active replicas, and no registered leader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9390&quot;&gt;SOLR-9390&lt;/a&gt;: Don&apos;t use directToLeaders updates in partition tests (see &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9512&quot; title=&quot;CloudSolrClient&amp;#39;s cluster state cache can break direct updates to leaders&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9512&quot;&gt;&lt;del&gt;SOLR-9512&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="15513139" author="jira-bot" created="Thu, 22 Sep 2016 12:22:04 +0000"  >&lt;p&gt;Commit 00035c85114bc09c24c9cc9c0364030cf621d374 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=romseygeek&quot; class=&quot;user-hover&quot; rel=&quot;romseygeek&quot;&gt;romseygeek&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=00035c8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=00035c8&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9305&quot; title=&quot;ForceLeaderTest.testReplicasInLIRNoLeader(): connection refused&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9305&quot;&gt;&lt;del&gt;SOLR-9305&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9390&quot; title=&quot;LeaderFailoverAfterPartitionTest failures: Connection refused, too few active replicas, and no registered leader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9390&quot;&gt;SOLR-9390&lt;/a&gt;: &lt;b&gt;really&lt;/b&gt; dont&apos; use directToLeaders&lt;/p&gt;</comment>
                            <comment id="15513141" author="jira-bot" created="Thu, 22 Sep 2016 12:22:08 +0000"  >&lt;p&gt;Commit a41dd86e3cbb7799c2a6937d7bc0a07ec3c6e1a8 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=romseygeek&quot; class=&quot;user-hover&quot; rel=&quot;romseygeek&quot;&gt;romseygeek&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a41dd86&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=a41dd86&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9305&quot; title=&quot;ForceLeaderTest.testReplicasInLIRNoLeader(): connection refused&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9305&quot;&gt;&lt;del&gt;SOLR-9305&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9390&quot; title=&quot;LeaderFailoverAfterPartitionTest failures: Connection refused, too few active replicas, and no registered leader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9390&quot;&gt;SOLR-9390&lt;/a&gt;: &lt;b&gt;really&lt;/b&gt; dont&apos; use directToLeaders&lt;/p&gt;</comment>
                            <comment id="15524333" author="romseygeek" created="Mon, 26 Sep 2016 22:08:47 +0000"  >&lt;p&gt;This hasn&apos;t failed since I disabled directToLeaders indexing for the test, so I&apos;m marking it as resolved.&lt;/p&gt;</comment>
                            <comment id="15650339" author="shalinmangar" created="Wed, 9 Nov 2016 08:39:36 +0000"  >&lt;p&gt;Closing after 6.3.0 release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13032064">SOLR-9927</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12831089">SOLR-7569</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30xon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>