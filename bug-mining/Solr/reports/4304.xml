<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:40:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-13238] BlobHandler generates non-padded md5</title>
                <link>https://issues.apache.org/jira/browse/SOLR-13238</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6787&quot; title=&quot;API to manage blobs in  Solr&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6787&quot;&gt;&lt;del&gt;SOLR-6787&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The blob handler currently uses the following logic for generating/storing the md5 for uploads:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
MessageDigest m = MessageDigest.getInstance(&lt;span class=&quot;code-quote&quot;&gt;&quot;MD5&quot;&lt;/span&gt;);
m.update(payload.array(), payload.position(), payload.limit());
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; md5 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BigInteger(1, m.digest()).toString(16);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unfortunately, this method does not provide padding for any md5 with less than 0x10 for its most significant byte. This means that on many occasions it could end up with a md5 hash of 31 characters instead of 32. &lt;/p&gt;

&lt;p&gt;I have opened a PR with the following recommended change:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; md5 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(Hex.encodeHex(m.digest()));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13214797">SOLR-13238</key>
            <summary>BlobHandler generates non-padded md5</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="janhoy">Jan H&#248;ydahl</assignee>
                                    <reporter username="jtwalraven">Jeff Walraven</reporter>
                        <labels>
                    </labels>
                <created>Sat, 9 Feb 2019 16:39:36 +0000</created>
                <updated>Tue, 17 Sep 2019 00:10:43 +0000</updated>
                            <resolved>Sat, 14 Sep 2019 20:48:27 +0000</resolved>
                                    <version>6.0</version>
                    <version>6.6.5</version>
                    <version>7.0</version>
                    <version>7.6</version>
                    <version>7.7</version>
                                    <fixVersion>8.3</fixVersion>
                                    <component>blobstore</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="16817383" author="janhoy" created="Sun, 14 Apr 2019 18:43:04 +0000"  >&lt;p&gt;So what is the consequence of this bug? How did you discover it?&lt;/p&gt;</comment>
                            <comment id="16820539" author="jtwalraven" created="Wed, 17 Apr 2019 22:10:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=janhoy&quot; class=&quot;user-hover&quot; rel=&quot;janhoy&quot;&gt;janhoy&lt;/a&gt; The consequence of this bug is that it causes an incorrect md5 to be generated. I came across this while writing a tool that uploads a plugin jar to solr. It checks the md5 for validity and to check if the file is different before uploading a new jar. When using a standard md5 check (that properly pads the hash), the validation will fail. The difficulty with this bug is that it only shows up in some cases, so it was not apparent until a file happened to have the incorrect hash value.&lt;/p&gt;

&lt;p&gt;Currently, the workaround is to use the same md5 hash function on both sides of the validation.&lt;/p&gt;</comment>
                            <comment id="16915079" author="jtwalraven" created="Sat, 24 Aug 2019 19:27:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=janhoy&quot; class=&quot;user-hover&quot; rel=&quot;janhoy&quot;&gt;janhoy&lt;/a&gt; Do you have any more feedback? &lt;/p&gt;</comment>
                            <comment id="16915094" author="janhoy" created="Sat, 24 Aug 2019 21:02:56 +0000"  >&lt;p&gt;Looks good. Perhaps &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; wants to chime in? &lt;/p&gt;</comment>
                            <comment id="16915105" author="noble.paul" created="Sat, 24 Aug 2019 23:25:21 +0000"  >&lt;p&gt;LGTM&lt;/p&gt;</comment>
                            <comment id="16929776" author="jtwalraven" created="Sat, 14 Sep 2019 14:54:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=janhoy&quot; class=&quot;user-hover&quot; rel=&quot;janhoy&quot;&gt;janhoy&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; Anything else you need from me to get this merged?&lt;/p&gt;</comment>
                            <comment id="16929813" author="janhoy" created="Sat, 14 Sep 2019 20:00:24 +0000"  >&lt;p&gt;I&apos;m adding a CHANGES entry and fixing a precommit failure in &lt;tt&gt;TestBlobHandler&lt;/tt&gt;&#160;and will then merge.&lt;/p&gt;

&lt;p&gt;Thanks for the contribution Jeff. Regarding precommit failure, we have a workflow where we in addition to &apos;ant test&apos; also run &apos;ant precommit&apos; to validate various code requirements. We have recently added automatic CI to GitHub, so next PR you submit will be tested with &apos;ant precommit&apos; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;Also, there is a new PR description template with a checklist that helps you remember what to do.&lt;/p&gt;</comment>
                            <comment id="16929816" author="jira-bot" created="Sat, 14 Sep 2019 20:23:39 +0000"  >&lt;p&gt;Commit 31735eeb402d7b00785bba484093b81107ffc2c9 in lucene-solr&apos;s branch refs/heads/master from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=31735ee&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=31735ee&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13238&quot; title=&quot;BlobHandler generates non-padded md5&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13238&quot;&gt;&lt;del&gt;SOLR-13238&lt;/del&gt;&lt;/a&gt;: BlobHandler generates non-padded md5&lt;/p&gt;</comment>
                            <comment id="16929820" author="jira-bot" created="Sat, 14 Sep 2019 20:47:44 +0000"  >&lt;p&gt;Commit a5b558582293c7ef4b05e505e3d4cef493cbd1d9 in lucene-solr&apos;s branch refs/heads/branch_8x from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=a5b5585&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=a5b5585&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13238&quot; title=&quot;BlobHandler generates non-padded md5&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13238&quot;&gt;&lt;del&gt;SOLR-13238&lt;/del&gt;&lt;/a&gt;: BlobHandler generates non-padded md5&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 31735eeb402d7b00785bba484093b81107ffc2c9)&lt;/p&gt;</comment>
                            <comment id="16930971" author="jtwalraven" created="Tue, 17 Sep 2019 00:10:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=janhoy&quot; class=&quot;user-hover&quot; rel=&quot;janhoy&quot;&gt;janhoy&lt;/a&gt; Thanks! I will keep that in mind for future PRs &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi0tkw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>