<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:31:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4099] Suspect zookeeper client thread doesn&apos;t call back the watcher, that occur the overseer collection can&apos;t work normal.</title>
                <link>https://issues.apache.org/jira/browse/SOLR-4099</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;In test environment, our zookeeper version is old that our requirement version. Not use solr default 3.3.6 version.&lt;/p&gt;

&lt;p&gt;The overseer collection processor stop work. Trace the dump, the overseer wait for LatchChildWatcher.await. &lt;br/&gt;
Check the zookeeper /overseer/collection-queue-work, block a lot of operation for collection. &lt;/p&gt;

&lt;p&gt;Check the logic, suspect the zookeeper client doesn&apos;t call back the watchevent that register the path &quot;/overseer/collection-queue-work&quot;, unlucky the log level is debug. &lt;/p&gt;

&lt;p&gt;This case doesn&apos;t happen often, very little. But if it happen, it is fatal, we have to stop the leader server.&lt;/p&gt;

&lt;p&gt;Suggest the compensate solution, that doesn&apos;t await until notify. Only wait some time that maybe it is ten minutes or a half of hour or other value to recheck the queue again. Of cause if get the notify, that can direct work normal.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Zookeeper version: 3.2&lt;/p&gt;</environment>
        <key id="12617068">SOLR-4099</key>
            <summary>Suspect zookeeper client thread doesn&apos;t call back the watcher, that occur the overseer collection can&apos;t work normal.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="raintung.li">Raintung Li</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Nov 2012 08:30:04 +0000</created>
                <updated>Mon, 9 May 2016 18:48:52 +0000</updated>
                            <resolved>Wed, 21 Nov 2012 15:44:38 +0000</resolved>
                                    <version>4.0-ALPHA</version>
                    <version>4.0-BETA</version>
                    <version>4.0</version>
                                    <fixVersion>4.1</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="43200">12h</timeoriginalestimate>
                            <timeestimate seconds="43200">12h</timeestimate>
                                        <comments>
                            <comment id="13501770" author="raintung.li" created="Wed, 21 Nov 2012 08:35:19 +0000"  >&lt;p&gt;example&lt;/p&gt;</comment>
                            <comment id="13502043" author="commit-tag-bot" created="Wed, 21 Nov 2012 15:30:27 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Mark Robert Miller&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1412142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1412142&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4099&quot; title=&quot;Suspect zookeeper client thread doesn&amp;#39;t call back the watcher, that occur the overseer collection can&amp;#39;t work normal.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4099&quot;&gt;&lt;del&gt;SOLR-4099&lt;/del&gt;&lt;/a&gt;: Allow the collection api work queue to make forward progress even when it&apos;s watcher is not fired for some reason.&lt;/p&gt;
</comment>
                            <comment id="13502049" author="commit-tag-bot" created="Wed, 21 Nov 2012 15:30:36 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; Mark Robert Miller&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1412140&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1412140&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4099&quot; title=&quot;Suspect zookeeper client thread doesn&amp;#39;t call back the watcher, that occur the overseer collection can&amp;#39;t work normal.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4099&quot;&gt;&lt;del&gt;SOLR-4099&lt;/del&gt;&lt;/a&gt;: Allow the collection api work queue to make forward progress even when it&apos;s watcher is not fired for some reason.&lt;/p&gt;
</comment>
                            <comment id="13502067" author="markrmiller@gmail.com" created="Wed, 21 Nov 2012 15:44:38 +0000"  >&lt;p&gt;Thanks Raintung!&lt;/p&gt;</comment>
                            <comment id="13610514" author="commit-tag-bot" created="Fri, 22 Mar 2013 16:14:33 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; Mark Robert Miller&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1412142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1412142&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4099&quot; title=&quot;Suspect zookeeper client thread doesn&amp;#39;t call back the watcher, that occur the overseer collection can&amp;#39;t work normal.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4099&quot;&gt;&lt;del&gt;SOLR-4099&lt;/del&gt;&lt;/a&gt;: Allow the collection api work queue to make forward progress even when it&apos;s watcher is not fired for some reason.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12554467" name="patch-4099.txt" size="2272" author="raintung.li" created="Wed, 21 Nov 2012 08:35:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>258997</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 35 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l73z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>121802</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>