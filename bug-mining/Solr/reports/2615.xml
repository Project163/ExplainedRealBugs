<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:07:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-7988] LukeRequest on default path is broken with CloudSolrClient</title>
                <link>https://issues.apache.org/jira/browse/SOLR-7988</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7757&quot; title=&quot;Create a framework to edit/reload security params&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7757&quot;&gt;&lt;del&gt;SOLR-7757&lt;/del&gt;&lt;/a&gt; breaks the default access on the &lt;em&gt;LukeRequestHandler&lt;/em&gt; (/admin/luke) with &lt;em&gt;CloudSolrClient&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;See the following commit :&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/viewvc/lucene/dev/branches/branch_5x/solr/solrj/src/java/org/apache/solr/client/solrj/impl/CloudSolrClient.java?r1=1694556&amp;amp;r2=1694555&amp;amp;pathrev=1694556&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/viewvc/lucene/dev/branches/branch_5x/solr/solrj/src/java/org/apache/solr/client/solrj/impl/CloudSolrClient.java?r1=1694556&amp;amp;r2=1694555&amp;amp;pathrev=1694556&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The name of the collection is not added to the request URL and therefore we get a 404 error in the response.&lt;/p&gt;

&lt;p&gt;Defining the &lt;em&gt;LukeRequestHandler&lt;/em&gt; with another path in the &lt;em&gt;solrconfig&lt;/em&gt; is a workaround but it&apos;s quite annoying. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12859858">SOLR-7988</key>
            <summary>LukeRequest on default path is broken with CloudSolrClient</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="noble.paul">Noble Paul</assignee>
                                    <reporter username="lboutros">Ludovic Boutros</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Aug 2015 09:15:50 +0000</created>
                <updated>Mon, 9 May 2016 18:52:42 +0000</updated>
                            <resolved>Tue, 1 Sep 2015 15:29:06 +0000</resolved>
                                    <version>5.3</version>
                                    <fixVersion>5.3.1</fixVersion>
                    <fixVersion>5.4</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrJ</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14718520" author="markrmiller@gmail.com" created="Fri, 28 Aug 2015 12:59:13 +0000"  >&lt;p&gt;Best thing we can do to preserve this functionality is get a test in for it.&lt;/p&gt;</comment>
                            <comment id="14720213" author="noble.paul" created="Fri, 28 Aug 2015 16:48:01 +0000"  >&lt;p&gt;Is this for solrcloud or standalone solr ? &lt;/p&gt;</comment>
                            <comment id="14720224" author="lboutros" created="Fri, 28 Aug 2015 16:54:41 +0000"  >&lt;p&gt;I&apos;ve only tested with SolrCloud currently in an IT case.&lt;/p&gt;</comment>
                            <comment id="14721686" author="markrmiller@gmail.com" created="Sun, 30 Aug 2015 19:20:43 +0000"  >&lt;p&gt;CloudSolrClient does not work with standalone.&lt;/p&gt;</comment>
                            <comment id="14723208" author="lboutros" created="Mon, 31 Aug 2015 08:40:25 +0000"  >&lt;p&gt;Well, quite true &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;The question I would have here is:&lt;/p&gt;

&lt;p&gt;Do you want to keep this handler and perhaps others, which need the collection name on the admin path ?&lt;/p&gt;

&lt;p&gt;If yes, I can imagine an exclusion in the &lt;em&gt;CloudSolrClient&lt;/em&gt;&lt;br/&gt;
if no, we just need to choose another path and register the handler(s) with this new path (but that would break a sort of compatibility...)  &lt;/p&gt;</comment>
                            <comment id="14723432" author="markrmiller@gmail.com" created="Mon, 31 Aug 2015 14:03:47 +0000"  >&lt;p&gt;Yeah, I don&apos;t think we want to move to a new path. We just want to fix the bug that was introduced via &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7757&quot; title=&quot;Create a framework to edit/reload security params&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7757&quot;&gt;&lt;del&gt;SOLR-7757&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14723435" author="noble.paul" created="Mon, 31 Aug 2015 14:05:52 +0000"  >&lt;p&gt;yeah, this is a regression. Let&apos;s fix that and move on&lt;/p&gt;</comment>
                            <comment id="14723545" author="lboutros" created="Mon, 31 Aug 2015 15:29:09 +0000"  >&lt;p&gt;Ok, I will create a patch with a test and a fix.&lt;/p&gt;

&lt;p&gt;What are the current default admin handlers which need the collection name ?&lt;/p&gt;</comment>
                            <comment id="14723548" author="noble.paul" created="Mon, 31 Aug 2015 15:30:45 +0000"  >&lt;p&gt;I&apos;m fixing it . Can you post your sample code . I can use it in the test case&lt;/p&gt;</comment>
                            <comment id="14723600" author="lboutros" created="Mon, 31 Aug 2015 16:06:35 +0000"  >&lt;p&gt;I did not test this code but something like this should work:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;DefaultHandlerTest.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void defaultHandlerTest() {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; collectionName = &lt;span class=&quot;code-quote&quot;&gt;&quot;defaultHandlerCollection&quot;&lt;/span&gt;;
    createCollection(collectionName, controlClientCloud, 2, 2);
    waitForRecoveriesToFinish(collectionName, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (CloudSolrClient cloudClient = createCloudClient(collectionName)) {

      LukeRequest lukeRequest = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LukeRequest();

      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        lukeResponse = lukeRequest.process(cloudClient);
      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
        fail(&lt;span class=&quot;code-quote&quot;&gt;&quot;Cannot find &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; luke request handler&quot;&lt;/span&gt;);
      }
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14723604" author="noble.paul" created="Mon, 31 Aug 2015 16:09:15 +0000"  >&lt;p&gt;thanks&lt;/p&gt;</comment>
                            <comment id="14725488" author="jira-bot" created="Tue, 1 Sep 2015 14:37:21 +0000"  >&lt;p&gt;Commit 1700580 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1700580&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1700580&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7988&quot; title=&quot;LukeRequest on default path is broken with CloudSolrClient&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7988&quot;&gt;&lt;del&gt;SOLR-7988&lt;/del&gt;&lt;/a&gt;: LukeRequest on default path is broken with CloudSolrClient&lt;/p&gt;</comment>
                            <comment id="14725496" author="lboutros" created="Tue, 1 Sep 2015 14:48:25 +0000"  >&lt;p&gt;Thank you !&lt;/p&gt;</comment>
                            <comment id="14725560" author="jira-bot" created="Tue, 1 Sep 2015 15:28:27 +0000"  >&lt;p&gt;Commit 1700593 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1700593&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1700593&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7988&quot; title=&quot;LukeRequest on default path is broken with CloudSolrClient&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7988&quot;&gt;&lt;del&gt;SOLR-7988&lt;/del&gt;&lt;/a&gt;: LukeRequest on default path is broken with CloudSolrClient&lt;/p&gt;</comment>
                            <comment id="14736710" author="jira-bot" created="Wed, 9 Sep 2015 11:46:26 +0000"  >&lt;p&gt;Commit 1701981 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/branches/lucene_solr_5_3&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1701981&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1701981&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7988&quot; title=&quot;LukeRequest on default path is broken with CloudSolrClient&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7988&quot;&gt;&lt;del&gt;SOLR-7988&lt;/del&gt;&lt;/a&gt;: SolrJ could not make requests to handlers with &apos;/admin/&apos; prefix&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jhn3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>