<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:02:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16891] Solr Cloud Graph screen blank</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16891</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The Solr Admin UI - Cloud - Graph screen is blank. This was not an issue in Solr 9.2.1, so an API must have changed to make this no longer work.&lt;/p&gt;

&lt;p&gt;After some investigation, the screen uses the Zookeeper API to look at &lt;tt&gt;clusterstate.json&lt;/tt&gt;, so there must have been some back-compat logic in the Zookeeper API to make that work given that &lt;tt&gt;clusterstate.json&lt;/tt&gt; no longer exists. This may no longer work.&lt;/p&gt;

&lt;p&gt;As an easy fix, we can just move to using the Collections ClusterStatus API which returns the same data that used to exist in the &lt;tt&gt;clusterstate.json&lt;/tt&gt;, so we don&apos;t even need to map fields or anything.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13543562">SOLR-16891</key>
            <summary>Solr Cloud Graph screen blank</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="houston">Houston Putman</assignee>
                                    <reporter username="houston">Houston Putman</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Jul 2023 14:27:04 +0000</created>
                <updated>Wed, 18 Dec 2024 20:27:38 +0000</updated>
                            <resolved>Mon, 17 Jul 2023 20:52:43 +0000</resolved>
                                    <version>9.3</version>
                                    <fixVersion>9.3</fixVersion>
                                    <component>Admin UI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="17743224" author="houston" created="Fri, 14 Jul 2023 16:36:56 +0000"  >&lt;p&gt;Found the root cause,&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16751&quot; title=&quot;ClusterState.collectionFromObjects() stores copy of shards in DocCollection.getProperties()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16751&quot;&gt;&lt;del&gt;SOLR-16751&lt;/del&gt;&lt;/a&gt;, which assumed that no API used the &quot;shards&quot; option in the DocCollection propMap. Unfortunately, ZookeeperInfoHandler was that use case.&lt;/p&gt;

&lt;p&gt;We also cannot move to using the Collections ClusterStatus API because the graph page requires pagination info that the ZookeeperInfoHandler provides, but the ClusterStatus API does not.&lt;/p&gt;</comment>
                            <comment id="17743286" author="houston" created="Fri, 14 Jul 2023 20:37:42 +0000"  >&lt;p&gt;So my way of fixing this is to remove the difference between writing to a map and writing to JSON, for all of DocCollection, Slice and Replica. That way we can easily create a Map of the state, like we need to do in ZookeeperInfoHandler, and we don&apos;t need to write to JSON and then deserialize it, like was done for PRS.&lt;/p&gt;

&lt;p&gt;We can simply use the MapWriter interface, and write to a new map.&lt;/p&gt;</comment>
                            <comment id="17743289" author="houston" created="Fri, 14 Jul 2023 21:05:37 +0000"  >&lt;p&gt;This will fix the CloudScreen without changing how the cloud screen works. We should definitely remove the ZookeeperInformationHandler hack in the future and add filters &amp;amp; pagination to the ClusterStatus API. We could get rid of this code and the pagination itself would be less buggy.&lt;/p&gt;</comment>
                            <comment id="17743971" author="jira-bot" created="Mon, 17 Jul 2023 20:45:39 +0000"  >&lt;p&gt;Commit 952a7be422b1173683c1b70fc407b93b13cfb6f1 in solr&apos;s branch refs/heads/main from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=952a7be422b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=952a7be422b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16891&quot; title=&quot;Solr Cloud Graph screen blank&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16891&quot;&gt;&lt;del&gt;SOLR-16891&lt;/del&gt;&lt;/a&gt;: Fix blank Cloud graph screen in UI (#1783)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;MapWriter and IteratorWriter should not be special cases for JSON writing&lt;/li&gt;
	&lt;li&gt;DocCollection, Slice and Replica now write to Json and write to Maps identically.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17743973" author="jira-bot" created="Mon, 17 Jul 2023 20:47:54 +0000"  >&lt;p&gt;Commit 8614c47624d3ac455d5c24420366bd45e9ccf5bc in solr&apos;s branch refs/heads/branch_9x from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=8614c47624d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=8614c47624d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16891&quot; title=&quot;Solr Cloud Graph screen blank&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16891&quot;&gt;&lt;del&gt;SOLR-16891&lt;/del&gt;&lt;/a&gt;: Fix blank Cloud graph screen in UI (#1783)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;MapWriter and IteratorWriter should not be special cases for JSON writing&lt;/li&gt;
	&lt;li&gt;DocCollection, Slice and Replica now write to Json and write to Maps identically.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;(cherry picked from commit 952a7be422b1173683c1b70fc407b93b13cfb6f1)&lt;/p&gt;</comment>
                            <comment id="17743974" author="jira-bot" created="Mon, 17 Jul 2023 20:49:26 +0000"  >&lt;p&gt;Commit de33f50ce79ec1d156faf204553012037e2bc1cb in solr&apos;s branch refs/heads/branch_9_3 from Houston Putman&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=de33f50ce79&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=de33f50ce79&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16891&quot; title=&quot;Solr Cloud Graph screen blank&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16891&quot;&gt;&lt;del&gt;SOLR-16891&lt;/del&gt;&lt;/a&gt;: Fix blank Cloud graph screen in UI (#1783)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;MapWriter and IteratorWriter should not be special cases for JSON writing&lt;/li&gt;
	&lt;li&gt;DocCollection, Slice and Replica now write to Json and write to Maps identically.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;(cherry picked from commit 952a7be422b1173683c1b70fc407b93b13cfb6f1)&lt;/p&gt;</comment>
                            <comment id="17745765" author="houston" created="Fri, 21 Jul 2023 20:40:36 +0000"  >&lt;p&gt;Closing after the 9.3.0 release&lt;/p&gt;</comment>
                            <comment id="17906836" author="dsmiley" created="Wed, 18 Dec 2024 20:27:38 +0000"  >&lt;p&gt;I liked this mostly except for one detail &#8211; MapWriter implementing org.noggit.JSONWriter.Writable. &#160;Lots of classes implement MapWriter. &#160;Thanks to MapWriter, there are many methods brought in there. &#160;And this new one will be used by nobody except for Noggit. &#160;This is a really minor point; there are many methods and this is just one and is harmless except for maybe organizational sensibilities / complexity. &#160;&lt;/p&gt;

&lt;p&gt;As Solr nowadays wholly owns Noggit, we can have Noggit understand Solr&apos;s MapWriter. &#160;But, Noggit has no dependencies so it&apos;d also feel wrong to add one to Solr, albeit there&apos;s nothing to it (it&apos;s all in the same source path) so it&apos;s completely consequence-less. &#160;Shrug.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13542685">SOLR-16864</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13532958">SOLR-16751</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1j5eo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>