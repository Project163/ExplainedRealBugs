<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:47:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-15449] edimax sow causes issues with minimum should match in case of multi field with different analysis</title>
                <link>https://issues.apache.org/jira/browse/SOLR-15449</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;h1&gt;&lt;a name=&quot;Intro&quot;&gt;&lt;/a&gt;Intro&lt;/h1&gt;
&lt;p&gt;in multi-field search where the text analysis per field produces a different amount of tokens:&lt;/p&gt;

&lt;p&gt;sow=true causes the minimum should match to be &quot;per document&quot;&lt;br/&gt;
i.e a document to be a match must contain all the mm query terms anywhere at least once&lt;/p&gt;

&lt;p&gt;sow=false causes the minimum should match to be &quot;per field&quot;&lt;br/&gt;
 i.e a document to be a match must contain all the mm query terms in a single field at least once&lt;/p&gt;

&lt;p&gt;When the query parsed moves from being term centric(sow=true) to field centric(sow=false and different text analysis), mm means two different things:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
sow = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
mm=2
qf = author subjects_as_same_term
q = united kingdom
defType = edismax
&lt;span class=&quot;code-quote&quot;&gt;&quot;parsedquery_toString&quot;&lt;/span&gt;:
&lt;span class=&quot;code-quote&quot;&gt;&quot;+(((author:united | subjects_as_same_term:united) (author:kingdom | subjects_as_same_term:kingdom))~2)&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;response&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;numFound&quot;&lt;/span&gt;:2,&lt;span class=&quot;code-quote&quot;&gt;&quot;start&quot;&lt;/span&gt;:0,&lt;span class=&quot;code-quote&quot;&gt;&quot;maxScore&quot;&lt;/span&gt;:7.757958,&lt;span class=&quot;code-quote&quot;&gt;&quot;numFoundExact&quot;&lt;/span&gt;:&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;docs&quot;&lt;/span&gt;:[
      {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;888888&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;author&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;united&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;subjects&quot;&lt;/span&gt;:[&lt;span class=&quot;code-quote&quot;&gt;&quot;kingdom&quot;&lt;/span&gt;],
        &lt;span class=&quot;code-quote&quot;&gt;&quot;score&quot;&lt;/span&gt;:7.757958},
      {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;77777&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;author&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;united kingdom&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;score&quot;&lt;/span&gt;:5.874222}]
  },
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;mimimum of query terms matched within the same field (i.e. all query terms required must be found in one of the fields)&lt;br/&gt;
&#8220;PER FIELD&#8221;&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
sow = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
mm=2
qf = author subjects_as_same_term
q = united kingdom
defType = edismax
&lt;span class=&quot;code-quote&quot;&gt;&quot;parsedquery_toString&quot;&lt;/span&gt;:
&quot;+(((author:united author:kingdom)~2) | 
(((subjects_as_same_term:uk subjects_as_same_term:&lt;span class=&quot;code-quote&quot;&gt;&quot;united kingdom&quot;&lt;/span&gt; subjects_as_same_term:england subjects_as_same_term:london subjects_as_same_term:british subjects_as_same_term:britain))~1))&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This (author:united author:kingdom)~2 means we need both the clauses to match to have a good candidate, in disjunction with&lt;br/&gt;
(subjects_as_same_term:uk subjects_as_same_term:&#8221;united kingdom&#8221; subjects_as_same_term:england subjects_as_same_term:london subjects_as_same_term:british subjects_as_same_term:britain))~1 that means we need at least one clause to match (because synonyms expanded the two original terms into a single one)&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;response&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;numFound&quot;&lt;/span&gt;:1,&lt;span class=&quot;code-quote&quot;&gt;&quot;start&quot;&lt;/span&gt;:0,&lt;span class=&quot;code-quote&quot;&gt;&quot;maxScore&quot;&lt;/span&gt;:5.874222,&lt;span class=&quot;code-quote&quot;&gt;&quot;numFoundExact&quot;&lt;/span&gt;:&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;docs&quot;&lt;/span&gt;:[
      {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;77777&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;author&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;united kingdom&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;score&quot;&lt;/span&gt;:5.874222}]
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;h1&gt;&lt;a name=&quot;Problem&quot;&gt;&lt;/a&gt;Problem&lt;/h1&gt;
&lt;p&gt;When a field text analysis is incompatible with the query text, mm is not fully respected:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
sow = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
mm=100%
qf = text numeric_i
q = terminator 100
defType = edismax
&lt;span class=&quot;code-quote&quot;&gt;&quot;parsedquery_toString&quot;&lt;/span&gt;:
&quot;+(((text:terminator text:100)~2) | 
(numeric_i:100)~1))&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A document just containing &apos;100&apos; in the field numeric_i is returned as a good search result but it actually doesn&apos;t respect the mm=100%&lt;/p&gt;

&lt;p&gt;Reference: &lt;a href=&quot;https://sease.io/2021/05/apache-solr-sow-parameter-split-on-whitespace-and-multi-field-full-text-search.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sease.io/2021/05/apache-solr-sow-parameter-split-on-whitespace-and-multi-field-full-text-search.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13381670">SOLR-15449</key>
            <summary>edimax sow causes issues with minimum should match in case of multi field with different analysis</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="abenedetti">Alessandro Benedetti</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Jun 2021 10:24:38 +0000</created>
                <updated>Thu, 12 May 2022 00:26:25 +0000</updated>
                            <resolved>Wed, 9 Jun 2021 12:27:24 +0000</resolved>
                                    <version>8.8.2</version>
                                    <fixVersion>9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="14400">4h</timespent>
                                <comments>
                            <comment id="17355786" author="dsmiley" created="Wed, 2 Jun 2021 14:59:51 +0000"  >&lt;p&gt;From your description (as I read this; may eventually be modified):&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;in multi-field search with different analysis per field, sow=true implies the minimum should match is &quot;per document&quot;  i.e a document to be a match must contain all the mm query terms anywhere at least once, sow=false implies the minimum should match is &quot;per field&quot; i.e a document to be a match must contain all the mm query terms in a single field at least once&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I believe this is only true &lt;em&gt;sometimes&lt;/em&gt;.  That is, just because you have different analysis field &lt;em&gt;does not necessarily&lt;/em&gt; mean sow=false is per-field.  Sometimes yet, sometimes not.  Numeric fields is one case where this happens, and I suspect there are others when the &quot;graphs&quot; are misaligned somehow, but I don&apos;t think it&apos;s true generally.  If you disagree with my assertion, might you point to a test that shows this, or propose one?&lt;/p&gt;</comment>
                            <comment id="17355811" author="alessandro.benedetti" created="Wed, 2 Jun 2021 15:49:51 +0000"  >&lt;p&gt;I agree &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;, I changed slightly:&lt;br/&gt;
&quot;in multi-field search where the text analysis per field produces a different amount of tokens:&lt;/p&gt;

&lt;p&gt;sow=true causes the minimum should match to be &quot;per document&quot;&lt;br/&gt;
i.e a document to be a match must contain all the mm query terms anywhere at least once&lt;/p&gt;

&lt;p&gt;sow=false causes the minimum should match to be &quot;per field&quot;&lt;br/&gt;
 i.e a document to be a match must contain all the mm query terms in a single field at least once&quot;&lt;/p&gt;

&lt;p&gt;better now?&lt;br/&gt;
It&apos;s also probably an unwanted side effect as we saw.&lt;/p&gt;</comment>
                            <comment id="17355831" author="dsmiley" created="Wed, 2 Jun 2021 16:07:44 +0000"  >&lt;p&gt;Thanks.  Ultimately I think this is good nit-picking as it ultimately helps us frame how to communicate this change to users, and probably ourselves when we inevitably barely remember this JIRA issue in the future &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;On the PR I think the next step is to write a CHANGES.txt entry in words a user might understand.  I propose 8.10 and not add to 8.9.x even though it&apos;s a bug but it&apos;s not a big deal to me if you disagree.&lt;/p&gt;</comment>
                            <comment id="17356311" author="alessandro.benedetti" created="Thu, 3 Jun 2021 10:05:56 +0000"  >&lt;p&gt;I am in no rush for the fix &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;, happy to just have it in main branch and 8.10.x !&lt;/p&gt;</comment>
                            <comment id="17359944" author="jira-bot" created="Wed, 9 Jun 2021 11:02:09 +0000"  >&lt;p&gt;Commit 9791057a85203ac5d0e5d2a6b13348df53dec84a in solr&apos;s branch refs/heads/main from Alessandro Benedetti&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=9791057&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=9791057&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15449&quot; title=&quot;edimax sow causes issues with minimum should match in case of multi field with different analysis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15449&quot;&gt;&lt;del&gt;SOLR-15449&lt;/del&gt;&lt;/a&gt;: edismax sow and mm (#158)&lt;/p&gt;
</comment>
                            <comment id="17359948" author="alessandro.benedetti" created="Wed, 9 Jun 2021 11:04:30 +0000"  >&lt;p&gt;I just merged, so far it&apos;s just in 9.0, I don&apos;t think we need to cherry-pick it back to 8.x but let me know if you want me to do that! &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsmiley&quot; class=&quot;user-hover&quot; rel=&quot;dsmiley&quot;&gt;dsmiley&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17535403" author="janhoy" created="Thu, 12 May 2022 00:26:25 +0000"  >&lt;p&gt;Closing after the 9.0.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rkzs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>