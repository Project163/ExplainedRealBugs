<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:44:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-5543] solr.xml duplicat eentries after SWAP 4.6</title>
                <link>https://issues.apache.org/jira/browse/SOLR-5543</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;We are having issues with SWAP CoreAdmin in 4.6.&lt;/p&gt;

&lt;p&gt;Using legacy solr.xml we issue a COreodmin SWAP, and we want it persistent. It has been running flawless since 4.5. Now it creates duplicate lines in solr.xml.&lt;/p&gt;

&lt;p&gt;Even the example multi core schema in doesn&apos;t work with persistent=&quot;true&quot; - it creates duplicate lines in solr.xml.&lt;/p&gt;

&lt;p&gt; &amp;lt;cores adminPath=&quot;/admin/cores&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;core name=&quot;autosuggest&quot; loadOnStartup=&quot;true&quot; instanceDir=&quot;autosuggest&quot; transient=&quot;false&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;core name=&quot;citystateprovider&quot; loadOnStartup=&quot;true&quot; instanceDir=&quot;citystateprovider&quot; transient=&quot;false&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;core name=&quot;collection1&quot; loadOnStartup=&quot;true&quot; instanceDir=&quot;collection1&quot; transient=&quot;false&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;core name=&quot;facility&quot; loadOnStartup=&quot;true&quot; instanceDir=&quot;facility&quot; transient=&quot;false&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;core name=&quot;inactiveproviders&quot; loadOnStartup=&quot;true&quot; instanceDir=&quot;inactiveproviders&quot; transient=&quot;false&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;core name=&quot;linesvcgeo&quot; instanceDir=&quot;linesvcgeo&quot; loadOnStartup=&quot;true&quot; transient=&quot;false&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;core name=&quot;linesvcgeofull&quot; instanceDir=&quot;linesvcgeofull&quot; loadOnStartup=&quot;true&quot; transient=&quot;false&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;core name=&quot;locationgeo&quot; loadOnStartup=&quot;true&quot; instanceDir=&quot;locationgeo&quot; transient=&quot;false&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;core name=&quot;market&quot; loadOnStartup=&quot;true&quot; instanceDir=&quot;market&quot; transient=&quot;false&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;core name=&quot;portalprovider&quot; loadOnStartup=&quot;true&quot; instanceDir=&quot;portalprovider&quot; transient=&quot;false&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;core name=&quot;practice&quot; loadOnStartup=&quot;true&quot; instanceDir=&quot;practice&quot; transient=&quot;false&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;core name=&quot;provider&quot; loadOnStartup=&quot;true&quot; instanceDir=&quot;provider&quot; transient=&quot;false&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;core name=&quot;providersearch&quot; loadOnStartup=&quot;true&quot; instanceDir=&quot;providersearch&quot; transient=&quot;false&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;core name=&quot;tridioncomponents&quot; loadOnStartup=&quot;true&quot; instanceDir=&quot;tridioncomponents&quot; transient=&quot;false&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;core name=&quot;linesvcgeo&quot; instanceDir=&quot;linesvcgeo&quot; loadOnStartup=&quot;true&quot; transient=&quot;false&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;core name=&quot;linesvcgeofull&quot; instanceDir=&quot;linesvcgeofull&quot; loadOnStartup=&quot;true&quot; transient=&quot;false&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/cores&amp;gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12683781">SOLR-5543</key>
            <summary>solr.xml duplicat eentries after SWAP 4.6</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="romseygeek">Alan Woodward</assignee>
                                    <reporter username="billnbell">Bill Bell</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Dec 2013 06:47:05 +0000</created>
                <updated>Mon, 9 May 2016 18:54:16 +0000</updated>
                            <resolved>Sat, 14 Dec 2013 21:13:02 +0000</resolved>
                                    <version>4.6</version>
                                    <fixVersion>4.6.1</fixVersion>
                    <fixVersion>4.7</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13848448" author="romseygeek" created="Sat, 14 Dec 2013 20:57:33 +0000"  >&lt;p&gt;This patch adds an explicit #swap(CoreContainer, CoreDescriptor, CoreDescriptor) method to CoreLocator.  CoreContainer.swap() was just using persist, which ended up adding two new entries to the end of the cores list but never clearing them out.  This wasn&apos;t being picked up in tests because the SolrXMLCoreLocator deduplicated them in discovery (by a happy accident).&lt;/p&gt;</comment>
                            <comment id="13848456" author="jira-bot" created="Sat, 14 Dec 2013 21:11:20 +0000"  >&lt;p&gt;Commit 1550969 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=romseygeek&quot; class=&quot;user-hover&quot; rel=&quot;romseygeek&quot;&gt;romseygeek&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1550969&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1550969&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5543&quot; title=&quot;solr.xml duplicat eentries after SWAP 4.6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5543&quot;&gt;&lt;del&gt;SOLR-5543&lt;/del&gt;&lt;/a&gt;: Core Swaps result in duplicate entries in solr.xml&lt;/p&gt;</comment>
                            <comment id="13848457" author="jira-bot" created="Sat, 14 Dec 2013 21:12:28 +0000"  >&lt;p&gt;Commit 1550970 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=romseygeek&quot; class=&quot;user-hover&quot; rel=&quot;romseygeek&quot;&gt;romseygeek&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1550970&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1550970&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5543&quot; title=&quot;solr.xml duplicat eentries after SWAP 4.6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5543&quot;&gt;&lt;del&gt;SOLR-5543&lt;/del&gt;&lt;/a&gt;: Core Swaps result in duplicate entries in solr.xml&lt;/p&gt;</comment>
                            <comment id="13848458" author="romseygeek" created="Sat, 14 Dec 2013 21:13:02 +0000"  >&lt;p&gt;Thanks Bill!&lt;/p&gt;</comment>
                            <comment id="13850584" author="elyograg" created="Tue, 17 Dec 2013 15:46:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=romseygeek&quot; class=&quot;user-hover&quot; rel=&quot;romseygeek&quot;&gt;romseygeek&lt;/a&gt; ... I hear we&apos;re doing a 4.6.1 in the near future.  IMHO this is a strong candidate for backporting.&lt;/p&gt;

&lt;p&gt;Interesting detail, which I don&apos;t think needs to change your patch at all:  My &apos;full index rebuild&apos; process does seven core swaps.  It appears that the duplication introduced by a core swap is eliminated by a subsequent core swap &amp;#8211; there were only extra entries for the last core swapped.&lt;/p&gt;</comment>
                            <comment id="13850591" author="romseygeek" created="Tue, 17 Dec 2013 15:54:19 +0000"  >&lt;p&gt;It doesn&apos;t seem to actually make a difference to the running application, because the ConfigSolr object deduplicates the entries internally, which is also why it only writes out the latest swap (the current set, plus the two extra core definitions).  But it makes it confusing for people who are editing solr.xml offline.&lt;/p&gt;</comment>
                            <comment id="13851329" author="elyograg" created="Wed, 18 Dec 2013 03:49:44 +0000"  >&lt;p&gt;The reason I think it&apos;s critical to include in 4.6.1 is this:  Although everything works perfectly after the problem appears, as soon as you restart Solr, the duplicate entries cause exceptions and cores don&apos;t start up properly.  That was my experience when I upgraded my dev server to the released 4.6.0, rebuilt the index (resulting in seven core swaps), and then later restarted Solr for some config changes.  It&apos;s not standard procedure to restart Solr after rebuilding, but it does occasionally happen.  It happens a LOT on my dev server, where I try out new configs.&lt;/p&gt;

&lt;p&gt;If I were to do a PERSIST CoreAdmin action after each swap, would it effectively fix the problem even on an unpatched 4.6.0?&lt;/p&gt;

&lt;p&gt;TL;DR: I do have the ability to instead do a &quot;persist all&quot; after all of the swaps, because I separately create and track per-server objects for CoreAdmin SolrJ calls.  Although I end up with 28 HttpSolrServer objects for updates and queries with my production build application, I only create one CoreAdmin server object for each host/port combination, instead of an additional 28 objects.  I don&apos;t know what the incremental size of HttpSolrServer objects is, but I do try to be careful about memory.&lt;/p&gt;</comment>
                            <comment id="13867142" author="elyograg" created="Thu, 9 Jan 2014 22:03:50 +0000"  >&lt;p&gt;With a verbal OK from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; via IRC, I am backporting the fix for this issue to 4.6.1.&lt;/p&gt;

&lt;p&gt;Both precommit and tests in solr/ are passing.  The commits for trunk and branch_4x have no code changes, I&apos;m just moving the CHANGES.txt entry.&lt;/p&gt;</comment>
                            <comment id="13867155" author="jira-bot" created="Thu, 9 Jan 2014 22:09:04 +0000"  >&lt;p&gt;Commit 1556965 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elyograg&quot; class=&quot;user-hover&quot; rel=&quot;elyograg&quot;&gt;elyograg&lt;/a&gt; in branch &apos;dev/branches/lucene_solr_4_6&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1556965&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1556965&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5543&quot; title=&quot;solr.xml duplicat eentries after SWAP 4.6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5543&quot;&gt;&lt;del&gt;SOLR-5543&lt;/del&gt;&lt;/a&gt;: Backport to 4.6 branch, for 4.6.1 release.&lt;/p&gt;</comment>
                            <comment id="13867167" author="jira-bot" created="Thu, 9 Jan 2014 22:17:17 +0000"  >&lt;p&gt;Commit 1556968 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elyograg&quot; class=&quot;user-hover&quot; rel=&quot;elyograg&quot;&gt;elyograg&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1556968&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1556968&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5543&quot; title=&quot;solr.xml duplicat eentries after SWAP 4.6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5543&quot;&gt;&lt;del&gt;SOLR-5543&lt;/del&gt;&lt;/a&gt;: move changes entry from 4.7.0 to 4.6.1.&lt;/p&gt;</comment>
                            <comment id="13867170" author="jira-bot" created="Thu, 9 Jan 2014 22:19:13 +0000"  >&lt;p&gt;Commit 1556969 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elyograg&quot; class=&quot;user-hover&quot; rel=&quot;elyograg&quot;&gt;elyograg&lt;/a&gt; in branch &apos;dev/branches/branch_4x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1556969&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1556969&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5543&quot; title=&quot;solr.xml duplicat eentries after SWAP 4.6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5543&quot;&gt;&lt;del&gt;SOLR-5543&lt;/del&gt;&lt;/a&gt;: Move changes entry from 4.7.0 to 4.6.1 (merge trunk r1556968)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12618787" name="SOLR-5543.patch" size="8253" author="romseygeek" created="Sat, 14 Dec 2013 20:57:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362853</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qjpz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>363159</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>