<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:36:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4754] solrcloud does not detect an implicit &quot;host&quot; and does not provide clear error using 4x example</title>
                <link>https://issues.apache.org/jira/browse/SOLR-4754</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Testing out the 4.3.0 RC3, I tried to run through the SolrCloud examples.&lt;/p&gt;

&lt;p&gt;Following the steps for &quot;Example A: Simple two shard cluster&quot; my two nodes started up w/o any obvious problem, however the I noticed the cluster graph was empty, and attempts to index documents failed with invalid url errors when trying to forward the distributed updates.  Closer inspection of the cluster state lead me to discover that the URLs for the nodes as registered with ZK did not include any host information at all.  (details to follow in comment)&lt;/p&gt;

&lt;p&gt;Apparently, the logic for implicitly detecting a hostname to use with SolrCloud failed to work, and did not cause any sort of startup error.&lt;/p&gt;

&lt;p&gt;Important things to note:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;java clearly &lt;em&gt;did&lt;/em&gt; know what the current configured hostname was for my machine, because it appeared correctly in the &lt;tt&gt;&amp;lt;title/&amp;gt;&lt;/tt&gt; tag of the admin UI (pulled from &quot;/admin/system&quot;) so i don&apos;t think this probablem is specific to any sort of glitch in my hostname configuration.&lt;/li&gt;
	&lt;li&gt;explicitly setting the &quot;host&quot; sys prop (as used in the example solr.xml) worked around the problem&lt;/li&gt;
	&lt;li&gt;I could &lt;em&gt;not&lt;/em&gt; reproduce this problem with Solr 4.2.1 (using the 4.2.1 example configs)&lt;/li&gt;
&lt;/ol&gt;



&lt;p&gt;We should try to make the hostname/url detection logic smarter (i&apos;m not sure why it isn&apos;t working as well as the SystemInfoHandler) and it should fail loudly on startup as last resort rather then registering the node with ZK using an invalid URL.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12644234">SOLR-4754</key>
            <summary>solrcloud does not detect an implicit &quot;host&quot; and does not provide clear error using 4x example</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Apr 2013 23:06:38 +0000</created>
                <updated>Wed, 10 Jan 2018 21:28:03 +0000</updated>
                                                            <fixVersion>4.9</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13639784" author="hossman" created="Tue, 23 Apr 2013 23:07:03 +0000"  >&lt;p&gt;Steps used to run solr nodes that caused problem...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;# terminal #1
rm -r example/solr/collection1/data/*
cp -r example example2
cd example
java -Dbootstrap_confdir=./solr/collection1/conf -Dcollection.configName=myconf -DzkRun -DnumShards=2 -jar start.jar

# terminal #2
cd example2
java -Djetty.port=7574 -DzkHost=localhost:9983 -jar start.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;clusterstate after starting both nodes...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{&lt;span class=&quot;code-quote&quot;&gt;&quot;collection1&quot;&lt;/span&gt;:{
    &lt;span class=&quot;code-quote&quot;&gt;&quot;shards&quot;&lt;/span&gt;:{
      &lt;span class=&quot;code-quote&quot;&gt;&quot;shard1&quot;&lt;/span&gt;:{
        &lt;span class=&quot;code-quote&quot;&gt;&quot;range&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;80000000-ffffffff&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;active&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;replicas&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;:8983_solr_collection1&quot;&lt;/span&gt;:{
            &lt;span class=&quot;code-quote&quot;&gt;&quot;shard&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;shard1&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;active&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;core&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;collection1&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;collection&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;collection1&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;node_name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;:8983_solr&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;base_url&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//:8983/solr&quot;&lt;/span&gt;,
&lt;/span&gt;            &lt;span class=&quot;code-quote&quot;&gt;&quot;leader&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;}}},
      &lt;span class=&quot;code-quote&quot;&gt;&quot;shard2&quot;&lt;/span&gt;:{
        &lt;span class=&quot;code-quote&quot;&gt;&quot;range&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;0-7fffffff&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;active&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;replicas&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;:7574_solr_collection1&quot;&lt;/span&gt;:{
            &lt;span class=&quot;code-quote&quot;&gt;&quot;shard&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;shard2&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;active&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;core&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;collection1&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;collection&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;collection1&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;node_name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;:7574_solr&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;base_url&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//:7574/solr&quot;&lt;/span&gt;,
&lt;/span&gt;            &lt;span class=&quot;code-quote&quot;&gt;&quot;leader&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;}}}},
    &lt;span class=&quot;code-quote&quot;&gt;&quot;router&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;compositeId&quot;&lt;/span&gt;}}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Content of ZK: /collections/collection1/leaders/shard1 ...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;core&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;collection1&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;node_name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;:8983_solr&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;base_url&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//:8983/solr&quot;&lt;/span&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Content of ZK: /collections/collection1/leaders/shard2 ...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;core&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;collection1&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;node_name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;:7574_solr&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;base_url&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//:7574/solr&quot;&lt;/span&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Steps used that succeeded (same as above but use explict &quot;host&quot; property)...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;# terminal #1
rm -r example/solr/collection1/data/*
cp -r example example2
cd example
java -Dhost=localhost -Dbootstrap_confdir=./solr/collection1/conf -Dcollection.configName=myconf -DzkRun -DnumShards=2 -jar start.jar

# terminal #2
cd example2
java -Dhost=localhost -Djetty.port=7574 -DzkHost=localhost:9983 -jar start.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13643076" author="yseeley@gmail.com" created="Fri, 26 Apr 2013 17:57:42 +0000"  >&lt;p&gt;FWIW, I also hit this on my OS-X box and my linux box.&lt;br/&gt;
To be clear, the basic SolrCloud examples no longer work. Seems like this should be a blocker for 4.3, and we should decide to either&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;fix it&lt;/li&gt;
	&lt;li&gt;decide to break back compat and require setting the &quot;host&quot; env varialbe (and then fix the documentation before the release is announced)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13643113" author="markrmiller@gmail.com" created="Fri, 26 Apr 2013 18:33:23 +0000"  >&lt;p&gt;We need to fix it, and it&apos;s def a 4.3 blocker.&lt;/p&gt;</comment>
                            <comment id="13643147" author="commit-tag-bot" created="Fri, 26 Apr 2013 19:11:06 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;trunk commit&amp;#93;&lt;/span&gt; markrmiller&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1476347&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1476347&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4754&quot; title=&quot;solrcloud does not detect an implicit &amp;quot;host&amp;quot; and does not provide clear error using 4x example&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4754&quot;&gt;SOLR-4754&lt;/a&gt;: our config parser seems to have been changed to return &quot;&quot; when it used to return null on an empty value and broke default host detection&lt;/p&gt;</comment>
                            <comment id="13643152" author="commit-tag-bot" created="Fri, 26 Apr 2013 19:17:17 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;branch_4x commit&amp;#93;&lt;/span&gt; markrmiller&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1476349&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1476349&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4754&quot; title=&quot;solrcloud does not detect an implicit &amp;quot;host&amp;quot; and does not provide clear error using 4x example&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4754&quot;&gt;SOLR-4754&lt;/a&gt;: our config parser seems to have been changed to return &quot;&quot; when it used to return null on an empty value and broke default host detection&lt;/p&gt;</comment>
                            <comment id="13643161" author="commit-tag-bot" created="Fri, 26 Apr 2013 19:23:52 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;lucene_solr_4_3 commit&amp;#93;&lt;/span&gt; markrmiller&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1476351&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1476351&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4754&quot; title=&quot;solrcloud does not detect an implicit &amp;quot;host&amp;quot; and does not provide clear error using 4x example&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4754&quot;&gt;SOLR-4754&lt;/a&gt;: our config parser seems to have been changed to return &quot;&quot; when it used to return null on an empty value and broke default host detection&lt;/p&gt;</comment>
                            <comment id="13643163" author="markrmiller@gmail.com" created="Fri, 26 Apr 2013 19:25:05 +0000"  >&lt;p&gt;I made the most minimal and least invasive fix I could. This issue is not resolved, it&apos;s just band aided for 4.3.&lt;/p&gt;</comment>
                            <comment id="13702162" author="steve_rowe" created="Mon, 8 Jul 2013 17:39:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt;, do you plan on doing anything for this issue for 4.4?  If you don&apos;t (and nobody else does), I&apos;ll change priority from Blocker to Major and move it to 4.5.&lt;/p&gt;</comment>
                            <comment id="13702165" author="markrmiller@gmail.com" created="Mon, 8 Jul 2013 17:41:45 +0000"  >&lt;p&gt;Doing something minimal was a 4.3 blocker - it&apos;s not a blocker anymore.&lt;/p&gt;</comment>
                            <comment id="13971018" author="thetaphi" created="Wed, 16 Apr 2014 12:56:54 +0000"  >&lt;p&gt;Move issue to Solr 4.9.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>324601</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 31 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1k03j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>324946</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>