<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:16:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9542] Kerberos delegation tokens requires missing Jackson library</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9542</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;GET, RENEW or CANCEL operations for the delegation tokens support requires the Solr server to have old jackson added as a dependency.&lt;/p&gt;

&lt;p&gt;Steps to reproduce the problem:&lt;br/&gt;
1) Configure Solr to use delegation tokens&lt;br/&gt;
2) Start Solr&lt;br/&gt;
3) Use a SolrJ application to get a delegation token.&lt;/p&gt;

&lt;p&gt;The server throws the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.NoClassDefFoundError: org/codehaus/jackson/map/ObjectMapper
        at org.apache.hadoop.security.token.delegation.web.DelegationTokenAuthenticationHandler.managementOperation(DelegationTokenAuthenticationHandler.java:279)
        at org.apache.solr.security.KerberosPlugin$RequestContinuesRecorderAuthenticationHandler.managementOperation(KerberosPlugin.java:566)
        at org.apache.hadoop.security.authentication.server.AuthenticationFilter.doFilter(AuthenticationFilter.java:514)
        at org.apache.solr.security.DelegationTokenKerberosFilter.doFilter(DelegationTokenKerberosFilter.java:123)
        at org.apache.solr.security.KerberosPlugin.doAuthenticate(KerberosPlugin.java:265)
        at org.apache.solr.servlet.SolrDispatchFilter.authenticateRequest(SolrDispatchFilter.java:318)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:222)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:208)
        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1668)
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:581)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)
        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:226)
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1160)
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:511)
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1092)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)
        at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:213)
        at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:119)
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:134)
        at org.eclipse.jetty.server.Server.handle(Server.java:518)
        at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:308)
        at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:244)
        at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:273)
        at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:95)
        at org.eclipse.jetty.io.SelectChannelEndPoint$2.run(SelectChannelEndPoint.java:93)
        at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.produceAndRun(ExecuteProduceConsume.java:246)
        at org.eclipse.jetty.util.thread.strategy.ExecuteProduceConsume.run(ExecuteProduceConsume.java:156)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:654)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:572)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13006457">SOLR-9542</key>
            <summary>Kerberos delegation tokens requires missing Jackson library</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ichattopadhyaya">Ishan Chattopadhyaya</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Sep 2016 10:40:08 +0000</created>
                <updated>Sat, 8 Jun 2019 15:30:51 +0000</updated>
                            <resolved>Fri, 20 Jul 2018 15:10:24 +0000</resolved>
                                                    <fixVersion>6.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="15509543" author="ichattopadhyaya" created="Wed, 21 Sep 2016 10:43:34 +0000"  >&lt;p&gt;Here&apos;s a patch that adds the dependencies. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gchanan&quot; class=&quot;user-hover&quot; rel=&quot;gchanan&quot;&gt;gchanan&lt;/a&gt;, can you please review?&lt;/p&gt;</comment>
                            <comment id="15509713" author="noble.paul" created="Wed, 21 Sep 2016 12:06:27 +0000"  >&lt;p&gt;Adding jackson just for kerberosPlugin feels like an overkill. Can this be optional?&lt;/p&gt;</comment>
                            <comment id="15510624" author="ichattopadhyaya" created="Wed, 21 Sep 2016 17:39:35 +0000"  >&lt;p&gt;Noble, indeed lame that we have to add the old jackson library as a dependency, just because hadoop is stuck with an old version. Btw, I think we already have jackson (from org.fasterxml.*) in core.&lt;/p&gt;

&lt;p&gt;Noble, Do you suggest we instruct users to download the jars themselves and add somehow them to the solr/solr.in.sh script for startup? Btw, not sure if upgrading Hadoop to use the latest jackson packages is an immediate option; I think not. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gchanan&quot; class=&quot;user-hover&quot; rel=&quot;gchanan&quot;&gt;gchanan&lt;/a&gt;, any thoughts? I am even fine adding it to solr-core; the overhead of adding this is around 750kb.&lt;/p&gt;</comment>
                            <comment id="15513799" author="hgadre" created="Thu, 22 Sep 2016 16:53:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ichattopadhyaya&quot; class=&quot;user-hover&quot; rel=&quot;ichattopadhyaya&quot;&gt;ichattopadhyaya&lt;/a&gt; I reviewed the patch and it looks good.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-13332&quot; title=&quot;Remove jackson 1.9.13 and switch all jackson code to 2.x code line&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-13332&quot;&gt;&lt;del&gt;HADOOP-13332&lt;/del&gt;&lt;/a&gt; is tracking the work required for upgrading jackson library in Hadoop. Since the work is underway for Hadoop 3 release, this may be addressed in next few months. (BTW &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9515&quot; title=&quot;Update to Hadoop 3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9515&quot;&gt;&lt;del&gt;SOLR-9515&lt;/del&gt;&lt;/a&gt; is tracking the work required in Solr to support Hadoop 3). But in my opinion we shouldn&apos;t hold off for this Hadoop enhancement. Instead we should commit this patch to fix the reported issue. May be we can file another JIRA to revert this change once the Hadoop side fix is available.&lt;/p&gt;</comment>
                            <comment id="15514001" author="jira-bot" created="Thu, 22 Sep 2016 17:59:33 +0000"  >&lt;p&gt;Commit ec5a53d706173046f2e0048abe2d6376a7e1a375 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=ec5a53d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=ec5a53d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9542&quot; title=&quot;Kerberos delegation tokens requires missing Jackson library&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9542&quot;&gt;&lt;del&gt;SOLR-9542&lt;/del&gt;&lt;/a&gt;: Kerberos delegation tokens requires Jackson library&lt;/p&gt;</comment>
                            <comment id="15514013" author="jira-bot" created="Thu, 22 Sep 2016 18:01:53 +0000"  >&lt;p&gt;Commit 5acbcac274dd3f2096a3a91ee1afd2a1f03f5ed6 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=5acbcac&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=5acbcac&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9542&quot; title=&quot;Kerberos delegation tokens requires missing Jackson library&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9542&quot;&gt;&lt;del&gt;SOLR-9542&lt;/del&gt;&lt;/a&gt;: Kerberos delegation tokens requires Jackson library&lt;/p&gt;</comment>
                            <comment id="15514806" author="shinichiro abe" created="Thu, 22 Sep 2016 23:33:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;Adding jackson just for kerberosPlugin feels like an overkill.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So does SolrJ, I think. Currently jackson and guava are SolrJ dependencies for that plugin. guava is used for only one annotation, it is a large jar and usually is suppose to provided from client program. If that plugin does not have a strong dependency,  would you like to make those scope provided? ref &lt;a href=&quot;https://issues.apache.org/jira/browse/CONNECTORS-1338&quot; title=&quot;Upgrade to SolrJ 6.3.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CONNECTORS-1338&quot;&gt;&lt;del&gt;CONNECTORS-1338&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15514946" author="hgadre" created="Fri, 23 Sep 2016 00:38:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shinichiro+abe&quot; class=&quot;user-hover&quot; rel=&quot;shinichiro abe&quot;&gt;shinichiro abe&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Currently jackson and guava are SolrJ dependencies for that plugin. guava is used for only one annotation, it is a large jar and usually is suppose to provided from client program. If that plugin does not have a strong dependency, would you like to make those scope provided?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think that guava dependency can be avoided by commenting out the VisibleForTesting annotation (since the code comment serves the same purpose as the annotation).&lt;/p&gt;</comment>
                            <comment id="15514980" author="hgadre" created="Fri, 23 Sep 2016 00:56:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shinichiro+abe&quot; class=&quot;user-hover&quot; rel=&quot;shinichiro abe&quot;&gt;shinichiro abe&lt;/a&gt; BTW solrj does not depend upon the older version of jackson library.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/bede7aefa3b2294e869d7fa543417e160e3518f9/solr/solrj/ivy.xml#L44-L47&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/bede7aefa3b2294e869d7fa543417e160e3518f9/solr/solrj/ivy.xml#L44-L47&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/bede7aefa3b2294e869d7fa543417e160e3518f9/solr/core/ivy.xml#L96-L97&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/bede7aefa3b2294e869d7fa543417e160e3518f9/solr/core/ivy.xml#L96-L97&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15515325" author="shinichiro abe" created="Fri, 23 Sep 2016 04:04:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hgadre&quot; class=&quot;user-hover&quot; rel=&quot;hgadre&quot;&gt;hgadre&lt;/a&gt;, I understood, thanks.&lt;br/&gt;
IIUC, in SolrJ jackson library is used for DelegationTokenResponse to use ObjectMapper.&lt;br/&gt;
It would be nice if we could replace jackson with noggit, for instance Utils.fromJSON(InputStream is).&lt;br/&gt;
It&apos;s ok Solrj testing may depend to jackson or guava, but Solrj itself should not do unless using smile(Btw jackson-dataformat-smile is missing in Solrj deps), IMO.&lt;/p&gt;</comment>
                            <comment id="15537247" author="timothy055" created="Fri, 30 Sep 2016 22:28:03 +0000"  >&lt;p&gt;Not sure it makes sense to introduce a Jackson dependency here. I&apos;m conflicted on how big of an issue this is though.  It&apos;s a really old version of jackson since it depends on the org.codehaus version.  On the other hand, it&apos;s probably less likely to conflict as such.&lt;/p&gt;</comment>
                            <comment id="15537782" author="dsmiley" created="Sat, 1 Oct 2016 03:28:04 +0000"  >&lt;p&gt;I don&apos;t know how deeply Jackson is required for this capability; let&apos;s say hypothetically it is and it&apos;d be hard to switch out.  If that&apos;s the case, we could simply mark this dependency as &quot;optional&quot; in the Maven POM, and we can add docs to the ref guide on the dependencies needed.  I suspect &lt;b&gt;very&lt;/b&gt; few people are using Kerberos to secure Solr.  People care about security but use other means.&lt;/p&gt;

&lt;p&gt;If it&apos;s not particularly hard to switch then lets do our collective users a favor and switch to our existing JSON parsing dependency: noggit.&lt;/p&gt;</comment>
                            <comment id="15541782" author="ichattopadhyaya" created="Mon, 3 Oct 2016 07:36:56 +0000"  >&lt;p&gt;I&apos;ve added &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-13672&quot; title=&quot;Extract out jackson calls into an overrideable method in DelegationTokenAuthenticationHandler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-13672&quot;&gt;HADOOP-13672&lt;/a&gt; for hadoop-auth to enable us to remove this unnecessary dependency.&lt;/p&gt;</comment>
                            <comment id="16507171" author="lars_francke" created="Sat, 9 Jun 2018 22:11:03 +0000"  >&lt;p&gt;As far as I can tell this was fixed with Solr 6.3.0 (it&apos;s in CHANGES.txt) in commit 5acbcac274dd3f2096a3a91ee1afd2a1f03f5ed6 &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt;. See &lt;a href=&quot;https://github.com/apache/lucene-solr/commit/5acbcac274dd3f2096a3a91ee1afd2a1f03f5ed6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/commit/5acbcac274dd3f2096a3a91ee1afd2a1f03f5ed6&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I don&apos;t have the Karma to change or close this issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13206226">SOLR-13092</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12829543" name="SOLR-9542.patch" size="1272" author="ichattopadhyaya" created="Wed, 21 Sep 2016 10:43:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 23 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33vzr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>