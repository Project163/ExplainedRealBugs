<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:35:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-13076] TimeOut breaks the simulation framework</title>
                <link>https://issues.apache.org/jira/browse/SOLR-13076</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;&lt;tt&gt;TimeOut&lt;/tt&gt; uses actual &lt;tt&gt;Thread.sleep&lt;/tt&gt; in its &lt;tt&gt;waitFor&lt;/tt&gt; method instead of using &lt;tt&gt;TimeSource.sleep&lt;/tt&gt;. This breaks the simulation framework, which often uses a non-real time &lt;tt&gt;TimeSource&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13204918">SOLR-13076</key>
            <summary>TimeOut breaks the simulation framework</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ab">Andrzej Bialecki</assignee>
                                    <reporter username="ab">Andrzej Bialecki</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Dec 2018 15:25:23 +0000</created>
                <updated>Sat, 8 Jun 2019 15:02:08 +0000</updated>
                            <resolved>Mon, 17 Dec 2018 16:34:49 +0000</resolved>
                                    <version>7.6</version>
                    <version>8.0</version>
                                    <fixVersion>7.7</fixVersion>
                    <fixVersion>8.0</fixVersion>
                                    <component>AutoScaling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16723100" author="jira-bot" created="Mon, 17 Dec 2018 15:51:33 +0000"  >&lt;p&gt;Commit f5479383b1613966ca5de59876603228b5de6b09 in lucene-solr&apos;s branch refs/heads/master from Andrzej Bialecki&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=f547938&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=f547938&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13076&quot; title=&quot;TimeOut breaks the simulation framework&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13076&quot;&gt;&lt;del&gt;SOLR-13076&lt;/del&gt;&lt;/a&gt;: TimeOut breaks the simulation framework.&lt;/p&gt;</comment>
                            <comment id="16723130" author="jira-bot" created="Mon, 17 Dec 2018 16:34:26 +0000"  >&lt;p&gt;Commit 462adbc7f639839f2628202c6281ecdab223c9c8 in lucene-solr&apos;s branch refs/heads/branch_7x from Andrzej Bialecki&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=462adbc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=462adbc&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13076&quot; title=&quot;TimeOut breaks the simulation framework&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13076&quot;&gt;&lt;del&gt;SOLR-13076&lt;/del&gt;&lt;/a&gt;: TimeOut breaks the simulation framework.&lt;/p&gt;</comment>
                            <comment id="16723289" author="hossman" created="Mon, 17 Dec 2018 19:28:17 +0000"  >&lt;p&gt;Once thing we need to watch out for here is that this &quot;fix&quot; may break some of the &quot;waitFor..&quot; type code used in tests, where the point of the &quot;wait&quot; logic is to give competing threads a chance to finish executing some background logic, but if the timesource being used in the TimeOut is based on the &lt;em&gt;simulated&lt;/em&gt; TimeSource then they might not wait long enoug.&lt;/p&gt;

&lt;p&gt;&lt;del&gt;Example: &lt;tt&gt;CloudTestUtils.waitForState&lt;/tt&gt; sets up a 90 second timeout to said for the specified cluster state to exist, using &lt;tt&gt;cloudManager.getTimeSource()&lt;/tt&gt;  &amp;#8211; prior to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ab&quot; class=&quot;user-hover&quot; rel=&quot;ab&quot;&gt;ab&lt;/a&gt;&apos;s fix, that timeout was going to use thread.sleep and was willing to ultimately wait for a &quot;real&quot; 90 seconds (from the perspective of the test host) but now it will only wait a &quot;simulated&quot; 90 seconds, which may not be enough time for a jenkins box with low CPU counts.&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;Perhaps we need a thorough audit any uses of TimeOut in the &lt;em&gt;test&lt;/em&gt; code to sanity check if they should be using the &quot;clusters&quot; concept of time (ie: waiting for triggers to fire) vs using the &quot;real&quot; concept of time (ie: waiting for threads to run)&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;b&gt;UPDATE:&lt;/b&gt; I just realized i missread this comment, and it doesn&apos;t affect &lt;tt&gt;CloudTestUtils.waitForState&lt;/tt&gt; the way i thought at all ... i still have some concerns that this &quot;fix&quot; might expose other bugs in tests that are using &lt;tt&gt;waitFor&lt;/tt&gt; on the cluster&apos;s TimeSource, when they should be using NANO_TIME, to give background threads time to process things ... but we&apos;ll just have to see what shakes out.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 48 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|u001xk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>