<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:46:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-15017] The core&apos;s lib/ folder content is not loaded in the classloader anymore when the core&apos;s configuration does not define any &lt;lib&gt; element</title>
                <link>https://issues.apache.org/jira/browse/SOLR-15017</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I just upgraded solr-core (I&apos;m using Solr in embedded mode) from 8.5.1 to 8.7.0 and it seems that the lib subfolder inside a core folder is not taken into account anymore.&lt;/p&gt;

&lt;p&gt;Works fine when I move the lib/ folder one level up (in the Solr home folder) but when the lib folder with the plugins is located in the core folder it cannot find any of the classes.&lt;/p&gt;

&lt;p&gt;I debugged it a little and I think the regression was caused by the refactoring done in &lt;a href=&quot;https://github.com/apache/lucene-solr/commit/732348ec7f9c6b6f7bf9d539a40e50d16198cccc#diff-473fbcdab103c08461ad1b3c3bb1c6d56f1bcd16d6ce341d80855db2cb20a427R749&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/commit/732348ec7f9c6b6f7bf9d539a40e50d16198cccc#diff-473fbcdab103c08461ad1b3c3bb1c6d56f1bcd16d6ce341d80855db2cb20a427R749&lt;/a&gt; : the handling of the lib/ core&apos;s sub folder was moved to SolrConfig#initLibs() but unfortunately the check to make sure there is at least one &lt;tt&gt;&amp;lt;lib&amp;gt;&lt;/tt&gt; element in the configuration file was not removed which means that if you don&apos;t have any of those then the content of the lib/ folder is totally ignored.&lt;/p&gt;

&lt;p&gt;That debugging was easy enough but I don&apos;t know Solr internals enough to propose something clean to fix the issue in a pull request.&lt;/p&gt;

&lt;p&gt;The workaround is to make sure there is at least one &lt;tt&gt;&amp;lt;lib/&amp;gt;&lt;/tt&gt; element (for example {{&lt;tt&gt;&amp;lt;lib dir=&quot;lib&quot; regex=&quot;.*\.jar&quot; /&amp;gt;&lt;/tt&gt;}}) in the core&apos;s solrconfig.xml file.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13342650">SOLR-15017</key>
            <summary>The core&apos;s lib/ folder content is not loaded in the classloader anymore when the core&apos;s configuration does not define any &lt;lib&gt; element</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dsmiley">David Smiley</assignee>
                                    <reporter username="tmortagne">Thomas Mortagne</reporter>
                        <labels>
                            <label>regression</label>
                    </labels>
                <created>Wed, 25 Nov 2020 16:21:57 +0000</created>
                <updated>Sat, 13 Feb 2021 00:09:19 +0000</updated>
                            <resolved>Tue, 1 Dec 2020 20:42:42 +0000</resolved>
                                    <version>8.7</version>
                                    <fixVersion>8.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4800">1h 20m</timespent>
                                <comments>
                            <comment id="17240481" author="dsmiley" created="Mon, 30 Nov 2020 05:11:46 +0000"  >&lt;p&gt;Hi; thanks for reporting this regression. I think it was my fault. The fix seems straight-forward to me... basically don&apos;t exit early from this method just because there is no &lt;tt&gt;&amp;lt;lib&amp;gt;&lt;/tt&gt; in the XML. &#160;WDYT? &#160;Can you file a PR?&lt;/p&gt;</comment>
                            <comment id="17240630" author="tmortagne" created="Mon, 30 Nov 2020 10:08:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;basically don&apos;t exit early from this method just because there is no &amp;lt;lib&amp;gt; in the XML.  WDYT?  Can you file a PR?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That was my first though but I was just not sure if the clean one was not to move it back to a different area. Anyway doing a PR in that directly if you think it&apos;s OK.&lt;/p&gt;</comment>
                            <comment id="17240780" author="tmortagne" created="Mon, 30 Nov 2020 14:01:18 +0000"  >&lt;p&gt;Here it is: &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/2107&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/2107&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17241851" author="jira-bot" created="Tue, 1 Dec 2020 20:40:43 +0000"  >&lt;p&gt;Commit feb897a962453e6b92dd7bbe51eb2c434cf3143d in lucene-solr&apos;s branch refs/heads/master from Thomas Mortagne&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=feb897a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=feb897a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15017&quot; title=&quot;The core&amp;#39;s lib/ folder content is not loaded in the classloader anymore when the core&amp;#39;s configuration does not define any &amp;lt;lib&amp;gt; element&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15017&quot;&gt;&lt;del&gt;SOLR-15017&lt;/del&gt;&lt;/a&gt;: Core&apos;s lib/ dir was ignored sometimes (#2107)&lt;/p&gt;

&lt;p&gt;A core&apos;s lib/ folder was ignored when the core&apos;s configuration did not define any &amp;lt;lib&amp;gt; element.  This is a regression introduced in 8.6 by &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14197&quot; title=&quot;Reduce API of SolrResourceLoader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14197&quot;&gt;&lt;del&gt;SOLR-14197&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17241855" author="jira-bot" created="Tue, 1 Dec 2020 20:42:25 +0000"  >&lt;p&gt;Commit ce1b907924a30dd3312e24cbad0b981c5be11799 in lucene-solr&apos;s branch refs/heads/branch_8x from Thomas Mortagne&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=ce1b907&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=ce1b907&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15017&quot; title=&quot;The core&amp;#39;s lib/ folder content is not loaded in the classloader anymore when the core&amp;#39;s configuration does not define any &amp;lt;lib&amp;gt; element&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15017&quot;&gt;&lt;del&gt;SOLR-15017&lt;/del&gt;&lt;/a&gt;: Core&apos;s lib/ dir was ignored sometimes (#2107)&lt;/p&gt;

&lt;p&gt;A core&apos;s lib/ folder was ignored when the core&apos;s configuration did not define any &amp;lt;lib&amp;gt; element.  This is a regression introduced in 8.6 by &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14197&quot; title=&quot;Reduce API of SolrResourceLoader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14197&quot;&gt;&lt;del&gt;SOLR-14197&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit feb897a962453e6b92dd7bbe51eb2c434cf3143d)&lt;/p&gt;</comment>
                            <comment id="17241857" author="dsmiley" created="Tue, 1 Dec 2020 20:42:42 +0000"  >&lt;p&gt;Thanks again!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13280759">SOLR-14197</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kxqg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>