<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:26:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-10845] GraphTermsQParserPlugin doesn&apos;t work with Point fields (or DocValues only fields?)</title>
                <link>https://issues.apache.org/jira/browse/SOLR-10845</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;GraphTermsQParserPlugin (aka &lt;tt&gt;graphTerms&lt;/tt&gt;) doesn&apos;t work if the &lt;tt&gt;f&lt;/tt&gt; field being used to build the graph is &quot;Points&quot; based (because the field won&apos;t have any &lt;tt&gt;Terms&lt;/tt&gt;)&lt;/p&gt;

&lt;p&gt;GraphTermsQParserPlugin should either be enhanced to work correctly with Points based fields, or should give a clear error if the &lt;tt&gt;isPointsField()&lt;/tt&gt; returns true for the field type being used.  At present, it silently matches no documents.&lt;/p&gt;

&lt;p&gt;(Note: It appears at first glance that the same basic problem probably exists for any trie/string field which is &lt;tt&gt;docValues=&quot;true&quot; indexed=&quot;false&lt;/tt&gt; ?)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13078142">SOLR-10845</key>
            <summary>GraphTermsQParserPlugin doesn&apos;t work with Point fields (or DocValues only fields?)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yseeley@gmail.com">Yonik Seeley</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                            <label>numeric-tries-to-points</label>
                    </labels>
                <created>Wed, 7 Jun 2017 22:04:07 +0000</created>
                <updated>Sat, 8 Jun 2019 15:22:26 +0000</updated>
                            <resolved>Tue, 1 Aug 2017 16:32:41 +0000</resolved>
                                                    <fixVersion>7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16041814" author="hossman" created="Wed, 7 Jun 2017 22:46:31 +0000"  >&lt;p&gt;discovered while experimenting with &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10807&quot; title=&quot; Randomize PointFields in all tests unless explicit reason not to&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10807&quot;&gt;&lt;del&gt;SOLR-10807&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16090030" author="yseeley@gmail.com" created="Mon, 17 Jul 2017 16:29:07 +0000"  >&lt;p&gt;I think this one is important to have points support as graph/join on numeric fields is likely to be common (they will often be ids).&lt;br/&gt;
I&apos;ll take a crack at getting this to work.&lt;/p&gt;</comment>
                            <comment id="16092348" author="hossman" created="Tue, 18 Jul 2017 23:43:43 +0000"  >&lt;p&gt;As noted in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11093&quot; title=&quot;implement Points/Numeric support for graph query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11093&quot;&gt;&lt;del&gt;SOLR-11093&lt;/del&gt;&lt;/a&gt;, yonik and i both got confused by the diff between...&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;GraphQParserPlugin (aka &lt;tt&gt;q={!graph from=node_s to=edge_s}bar&lt;/tt&gt;)&lt;/li&gt;
	&lt;li&gt;GraphTermsQParserPlugin (aka &lt;tt&gt;q={!graphTerms f=field1 maxDocFreq=1000}term1,term2&lt;/tt&gt;)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This issue is about GraphTermsQParserPlugin, and I suspect by it&apos;s very nature it will never be able to support points, and should always give an error for fields which are not TermEnum based &lt;tt&gt;(isPointField() || indexed=&quot;false&quot;)&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16095124" author="hossman" created="Thu, 20 Jul 2017 18:06:48 +0000"  >&lt;p&gt;Bulk editing 27 jiras matching the following JQL query to include the &quot;numeric-tries-to-points label...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;(issue in linkedIssues(SOLR-10807) OR issue in linkedIssues(SOLR-8396) OR issue in linkedIssues(SOLR-9995)) AND project = SOLR AND status != CLOSED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;these 27 jiras can be identified by searching for the comment string &quot;20170720hossbulkeditlabel&quot;&lt;/p&gt;

&lt;p&gt;email notification is being suppressed.&lt;/p&gt;</comment>
                            <comment id="16100696" author="steve_rowe" created="Tue, 25 Jul 2017 20:15:19 +0000"  >&lt;p&gt;Marked as a 7.0 Blocker, for error message cleanup; as Hoss wrote in the description:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;GraphTermsQParserPlugin should either be enhanced to work correctly with Points based fields, or should give a clear error if the isPointsField() returns true for the field type being used. At present, it silently matches no documents.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="16103491" author="yseeley@gmail.com" created="Thu, 27 Jul 2017 16:57:17 +0000"  >&lt;p&gt;FWIW, I&apos;m working on Points support for this now... just trying to figure out the best way to implement maxDocFreq since points don&apos;t seem to make that info available.&lt;/p&gt;</comment>
                            <comment id="16106172" author="yseeley@gmail.com" created="Sat, 29 Jul 2017 16:43:49 +0000"  >&lt;p&gt;Here&apos;s a draft patch that implements points support, including the maxDocFreq feature.&lt;/p&gt;</comment>
                            <comment id="16109219" author="jira-bot" created="Tue, 1 Aug 2017 16:28:41 +0000"  >&lt;p&gt;Commit 0e927c6484bcbc0f29bf8089c87928329cf98d06 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=0e927c6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=0e927c6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10845&quot; title=&quot;GraphTermsQParserPlugin doesn&amp;#39;t work with Point fields (or DocValues only fields?)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10845&quot;&gt;&lt;del&gt;SOLR-10845&lt;/del&gt;&lt;/a&gt;: add Points support to graphTerms query&lt;/p&gt;</comment>
                            <comment id="16109220" author="jira-bot" created="Tue, 1 Aug 2017 16:29:06 +0000"  >&lt;p&gt;Commit 1497ad33afc5b23954e85a760cbddd0cb4d31a5f in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=1497ad3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=1497ad3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10845&quot; title=&quot;GraphTermsQParserPlugin doesn&amp;#39;t work with Point fields (or DocValues only fields?)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10845&quot;&gt;&lt;del&gt;SOLR-10845&lt;/del&gt;&lt;/a&gt;: add Points support to graphTerms query&lt;/p&gt;</comment>
                            <comment id="16109221" author="jira-bot" created="Tue, 1 Aug 2017 16:29:27 +0000"  >&lt;p&gt;Commit de0c6ca29e18afa5ddf6934f1ae26f7b078dba3c in lucene-solr&apos;s branch refs/heads/branch_7_0 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=de0c6ca&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=de0c6ca&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10845&quot; title=&quot;GraphTermsQParserPlugin doesn&amp;#39;t work with Point fields (or DocValues only fields?)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10845&quot;&gt;&lt;del&gt;SOLR-10845&lt;/del&gt;&lt;/a&gt;: add Points support to graphTerms query&lt;/p&gt;</comment>
                            <comment id="16109302" author="steve_rowe" created="Tue, 1 Aug 2017 17:09:21 +0000"  >&lt;p&gt;My Jenkins found a reproducing branch_7x seed for a &lt;tt&gt;QueryEqualityTest&lt;/tt&gt; failure (reproduces for me on master) - this seed fails on the master commit on this issue, and does not fail on the commit prior to the master commit on this issue:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  [junit4]   2&amp;gt; NOTE: reproduce with: ant test  -Dtestcase=QueryEqualityTest -Dtests.method=testGraphTermsQuery -Dtests.seed=C529FBFC60B56D6B -Dtests.slow=true -Dtests.locale=mt-MT -Dtests.timezone=BST -Dtests.asserts=true -Dtests.file.encoding=UTF-8
   [junit4] ERROR   0.01s J6  | QueryEqualityTest.testGraphTermsQuery &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: org.apache.solr.common.SolrException: undefined field: &quot;field1&quot;
   [junit4]    &amp;gt; 	at __randomizedtesting.SeedInfo.seed([C529FBFC60B56D6B:6BDFA5079C41A1F7]:0)
   [junit4]    &amp;gt; 	at org.apache.solr.schema.IndexSchema.getField(IndexSchema.java:1219)
   [junit4]    &amp;gt; 	at org.apache.solr.search.GraphTermsQParserPlugin$1.parse(GraphTermsQParserPlugin.java:96)
   [junit4]    &amp;gt; 	at org.apache.solr.search.QParser.getQuery(QParser.java:168)
   [junit4]    &amp;gt; 	at org.apache.solr.search.QueryEqualityTest.assertQueryEquals(QueryEqualityTest.java:1058)
   [junit4]    &amp;gt; 	at org.apache.solr.search.QueryEqualityTest.testGraphTermsQuery(QueryEqualityTest.java:174)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16109395" author="yseeley@gmail.com" created="Tue, 1 Aug 2017 17:45:20 +0000"  >&lt;p&gt;Whoops... I beasted TestGraphTermsQuery all night, then ran precommit, but forgot about the full test suite! &lt;/p&gt;</comment>
                            <comment id="16109403" author="jira-bot" created="Tue, 1 Aug 2017 17:49:21 +0000"  >&lt;p&gt;Commit d696b5986b8d903a4f4f3d75346fc5715ebe9a0e in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=d696b59&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=d696b59&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10845&quot; title=&quot;GraphTermsQParserPlugin doesn&amp;#39;t work with Point fields (or DocValues only fields?)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10845&quot;&gt;&lt;del&gt;SOLR-10845&lt;/del&gt;&lt;/a&gt;: fix QueryEqualityTest unknown schema field for graphTerms query&lt;/p&gt;</comment>
                            <comment id="16109404" author="jira-bot" created="Tue, 1 Aug 2017 17:49:36 +0000"  >&lt;p&gt;Commit 5afe7f6ef880b2794a1fdbe588bcdae3446659f6 in lucene-solr&apos;s branch refs/heads/branch_7x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=5afe7f6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=5afe7f6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10845&quot; title=&quot;GraphTermsQParserPlugin doesn&amp;#39;t work with Point fields (or DocValues only fields?)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10845&quot;&gt;&lt;del&gt;SOLR-10845&lt;/del&gt;&lt;/a&gt;: fix QueryEqualityTest unknown schema field for graphTerms query&lt;/p&gt;</comment>
                            <comment id="16109416" author="jira-bot" created="Tue, 1 Aug 2017 17:56:58 +0000"  >&lt;p&gt;Commit edc529ea1740f4635251a8d3234552a288e4310b in lucene-solr&apos;s branch refs/heads/branch_7_0 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yonik%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;yonik@apache.org&quot;&gt;yonik@apache.org&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=edc529e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=edc529e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10845&quot; title=&quot;GraphTermsQParserPlugin doesn&amp;#39;t work with Point fields (or DocValues only fields?)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10845&quot;&gt;&lt;del&gt;SOLR-10845&lt;/del&gt;&lt;/a&gt;: fix QueryEqualityTest unknown schema field for graphTerms query&lt;/p&gt;</comment>
                            <comment id="16117153" author="varunthacker" created="Mon, 7 Aug 2017 19:51:04 +0000"  >&lt;blockquote&gt;&lt;p&gt;(Note: It appears at first glance that the same basic problem probably exists for any trie/string field which is docValues=&quot;true&quot; indexed=&quot;false ?)&lt;/p&gt;&lt;/blockquote&gt;


&lt;p&gt;Karthik filed &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11190&quot; title=&quot;GraphQuery not working for string fields that has only docValues&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11190&quot;&gt;&lt;del&gt;SOLR-11190&lt;/del&gt;&lt;/a&gt; for this&lt;/p&gt;</comment>
                            <comment id="16117206" author="yseeley@gmail.com" created="Mon, 7 Aug 2017 20:28:04 +0000"  >&lt;p&gt;Yeah, some of these things never worked for non-indexed fields, so adding support for docValues only should be a non-blocking new feature and not a regression.&lt;/p&gt;</comment>
                            <comment id="16117219" author="varunthacker" created="Mon, 7 Aug 2017 20:36:29 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13077048">SOLR-10807</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13087636">SOLR-11093</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12879499" name="SOLR-10845.patch" size="18301" author="yseeley@gmail.com" created="Sat, 29 Jul 2017 16:42:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3g0bb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>