<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:37:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-13366] AutoScalingConfig &apos;Invalid stage name&apos; warnings after upgrade</title>
                <link>https://issues.apache.org/jira/browse/SOLR-13366</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I noticed WARNings like this in some of our logs:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
... OverseerAutoScalingTriggerThread ... o.a.s.c.s.c.a.AutoScalingConfig Invalid stage name &lt;span class=&quot;code-quote&quot;&gt;&apos;.auto_add_replicas.system&apos;&lt;/span&gt; in listener config, skipping: {beforeAction=[], afterAction=[], trigger=.auto_add_replicas, stage=[WAITING, STARTED, ABORTED, SUCCEEDED, FAILED, BEFORE_ACTION, AFTER_ACTION], class=org.apache.solr.cloud.autoscaling.SystemLogListener}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;After some detective work I think I&apos;ve tracked this down to 7.1.0 &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/7.1.0/solr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/TriggerEventProcessorStage.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;TriggerEventProcessorStage&lt;/a&gt; having a &lt;tt&gt;WAITING&lt;/tt&gt; stage and that stage having been removed in 7.2.0 &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/7.2.0/solr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/TriggerEventProcessorStage.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;TriggerEventProcessorStage&lt;/a&gt; via the &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11320&quot; title=&quot;Lock autoscaling triggers when changes they requested are being made&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11320&quot;&gt;&lt;del&gt;SOLR-11320&lt;/del&gt;&lt;/a&gt; changes. Haven&apos;t tried to reproduce it but my theory is that the listener got auto-created (with the &lt;tt&gt;WAITING&lt;/tt&gt; stage) when the cloud was running pre-7.2.0 code and then after upgrading the warnings start to appear.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13225843">SOLR-13366</key>
            <summary>AutoScalingConfig &apos;Invalid stage name&apos; warnings after upgrade</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cpoerschke">Christine Poerschke</assignee>
                                    <reporter username="cpoerschke">Christine Poerschke</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Apr 2019 15:48:44 +0000</created>
                <updated>Wed, 5 Jun 2019 21:30:37 +0000</updated>
                            <resolved>Fri, 3 May 2019 16:56:59 +0000</resolved>
                                                    <fixVersion>7.7.2</fixVersion>
                    <fixVersion>8.1</fixVersion>
                    <fixVersion>9.0</fixVersion>
                                    <component>AutoScaling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16808865" author="cpoerschke" created="Wed, 3 Apr 2019 15:49:45 +0000"  >&lt;p&gt;At a quick glance a small change in AutoScalingConfig.java e.g.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
- LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Invalid stage name &lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + name + &lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;&lt;/span&gt; in listener config, skipping: &quot;&lt;/span&gt; + properties);
+ LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Invalid stage name &lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + stageName + &lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;&lt;/span&gt; in listener config, skipping: &quot;&lt;/span&gt; + properties);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;could make it more apparent that &lt;tt&gt;WAITING&lt;/tt&gt; is the invalid stage.&lt;/p&gt;

&lt;p&gt;And upon further consideration the &lt;tt&gt;skipping: &quot; + properties&lt;/tt&gt; could be rephrased perhaps since the code appears to skip only the invalid stage but not the other stages i.e. not all of the properties are being skipped.&lt;/p&gt;</comment>
                            <comment id="16808897" author="cpoerschke" created="Wed, 3 Apr 2019 16:38:19 +0000"  >&lt;p&gt;Attached patch w.r.t. the code change mentioned above, also the Solr Reference Guide for the &lt;a href=&quot;https://lucene.apache.org/solr/guide/7_7/solrcloud-autoscaling-listeners.html#systemloglistener&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SystemLogListener&lt;/a&gt; still mentioned &lt;tt&gt;WAITING&lt;/tt&gt; stage.&lt;/p&gt;</comment>
                            <comment id="16813663" author="cpoerschke" created="Tue, 9 Apr 2019 17:46:04 +0000"  >&lt;blockquote&gt;&lt;p&gt;... my theory is that the listener got auto-created (with the WAITING stage) when the cloud was running pre-7.2.0 code and then after upgrading the warnings start to appear.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Have been able to confirm that theory, and tested the patch in the process.&lt;/p&gt;

&lt;p&gt;A follow-up thing I guess is if/how/when the invalid stage being WARN-ed about can be easily removed after upgrading.&lt;/p&gt;</comment>
                            <comment id="16816342" author="jira-bot" created="Fri, 12 Apr 2019 15:15:01 +0000"  >&lt;p&gt;Commit fe1a1094763a8b21c11a9a21ed81df46e5e135e7 in lucene-solr&apos;s branch refs/heads/master from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=fe1a109&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=fe1a109&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13366&quot; title=&quot;AutoScalingConfig &amp;#39;Invalid stage name&amp;#39; warnings after upgrade&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13366&quot;&gt;&lt;del&gt;SOLR-13366&lt;/del&gt;&lt;/a&gt;: Clarify &apos;Invalid stage name&apos; warning logging in AutoScalingConfig&lt;/p&gt;</comment>
                            <comment id="16816346" author="jira-bot" created="Fri, 12 Apr 2019 15:16:14 +0000"  >&lt;p&gt;Commit cae323629e437c47855c4c8578f76310fd2b7b84 in lucene-solr&apos;s branch refs/heads/branch_8x from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=cae3236&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=cae3236&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13366&quot; title=&quot;AutoScalingConfig &amp;#39;Invalid stage name&amp;#39; warnings after upgrade&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13366&quot;&gt;&lt;del&gt;SOLR-13366&lt;/del&gt;&lt;/a&gt;: Clarify &apos;Invalid stage name&apos; warning logging in AutoScalingConfig&lt;/p&gt;</comment>
                            <comment id="16817120" author="jira-bot" created="Sat, 13 Apr 2019 22:50:57 +0000"  >&lt;p&gt;Commit fe1a1094763a8b21c11a9a21ed81df46e5e135e7 in lucene-solr&apos;s branch refs/heads/jira/&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-8738&quot; title=&quot;Bump minimum Java version requirement to 11&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-8738&quot;&gt;&lt;del&gt;LUCENE-8738&lt;/del&gt;&lt;/a&gt; from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=fe1a109&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=fe1a109&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13366&quot; title=&quot;AutoScalingConfig &amp;#39;Invalid stage name&amp;#39; warnings after upgrade&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13366&quot;&gt;&lt;del&gt;SOLR-13366&lt;/del&gt;&lt;/a&gt;: Clarify &apos;Invalid stage name&apos; warning logging in AutoScalingConfig&lt;/p&gt;</comment>
                            <comment id="16841532" author="jira-bot" created="Thu, 16 May 2019 16:48:43 +0000"  >&lt;p&gt;Commit e88a307eba4eaf94c482bedb19f8b0c304131a21 in lucene-solr&apos;s branch refs/heads/branch_7_7 from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=e88a307&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=e88a307&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13366&quot; title=&quot;AutoScalingConfig &amp;#39;Invalid stage name&amp;#39; warnings after upgrade&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13366&quot;&gt;&lt;del&gt;SOLR-13366&lt;/del&gt;&lt;/a&gt;: Clarify &apos;Invalid stage name&apos; warning logging in AutoScalingConfig&lt;/p&gt;

&lt;p&gt;(Cherry picked from cae323629e437c47855c4c8578f76310fd2b7b84)&lt;/p&gt;</comment>
                            <comment id="16857052" author="janhoy" created="Wed, 5 Jun 2019 21:30:37 +0000"  >&lt;p&gt;Closing after the 7.7.2 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13099661">SOLR-11320</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12965728" name="SOLR-13366.patch" size="1656" author="cpoerschke" created="Fri, 12 Apr 2019 14:58:30 +0000"/>
                            <attachment id="12964729" name="SOLR-13366.patch" size="1652" author="cpoerschke" created="Wed, 3 Apr 2019 16:34:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z01f2w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>