<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:05:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-7052] Grouping on int field with docValues in SolrCloud raises exception.</title>
                <link>https://issues.apache.org/jira/browse/SOLR-7052</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;We have a grouping field which we defined as an integer; when we run a query grouping on that field it works fine in a non-cloud configuration, but when we try the same query in a SolrCloud configuration with multiple shards, we get the following error:&lt;/p&gt;

&lt;p&gt;Type mismatch: &amp;lt;fieldName&amp;gt; was indexed as NUMERIC&lt;/p&gt;

&lt;p&gt;Schema:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dynamicField name=&lt;span class=&quot;code-quote&quot;&gt;&quot;*_i&quot;&lt;/span&gt;  type=&lt;span class=&quot;code-quote&quot;&gt;&quot;int&quot;&lt;/span&gt;    indexed=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;  stored=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt; docValues=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Query:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;q=*:*&amp;amp;group=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;group.field=&amp;lt;fieldName&amp;gt;&amp;amp;group.limit=1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12770679">SOLR-7052</key>
            <summary>Grouping on int field with docValues in SolrCloud raises exception.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Beliy.Dima">Beliy</reporter>
                        <labels>
                            <label>SolrCloud</label>
                            <label>docValues</label>
                            <label>grouping</label>
                    </labels>
                <created>Wed, 28 Jan 2015 14:33:53 +0000</created>
                <updated>Wed, 10 Jun 2015 10:25:40 +0000</updated>
                            <resolved>Wed, 10 Jun 2015 10:25:40 +0000</resolved>
                                    <version>4.8.1</version>
                                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14352138" author="vzhovtiuk" created="Sun, 8 Mar 2015 17:00:41 +0000"  >&lt;p&gt;I was not able to compile tag lucene_solr_4_8_1 becuase of final modifier on org.apache.lucene.codecs.memory.DirectDocValuesProducer#data, org.apache.lucene.codecs.lucene42.Lucene42DocValuesProducer#data, org.apache.lucene.codecs.lucene45.Lucene45DocValuesProducer#data, org.apache.lucene.codecs.memory.MemoryDocValuesProducer#data (removed final modifier and added to patch)&lt;br/&gt;
Added case with docValues on single and distributed grouping.&lt;br/&gt;
Issue reproduced in distributed mode on solr 4.8.1, but not reproduced solr trunk. The reason: numeric fields with docValues executed in org.apache.lucene.search.grouping.term.TermFirstPassGroupingCollector where binary and number with docValues are checked in org.apache.lucene.search.FieldCacheImpl#getTermsIndex(org.apache.lucene.index.AtomicReader, java.lang.String, float).&lt;br/&gt;
Added check for numeric fields to skip this collector. &lt;br/&gt;
Backported changes from solr trunk &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-5666&quot; title=&quot;Add UninvertingReader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LUCENE-5666&quot;&gt;&lt;del&gt;LUCENE-5666&lt;/del&gt;&lt;/a&gt;: remove insanity during distributed grouping&lt;/p&gt;</comment>
                            <comment id="14580333" author="jira-bot" created="Wed, 10 Jun 2015 10:02:28 +0000"  >&lt;p&gt;Commit 1684627 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1684627&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1684627&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7052&quot; title=&quot;Grouping on int field with docValues in SolrCloud raises exception.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7052&quot;&gt;&lt;del&gt;SOLR-7052&lt;/del&gt;&lt;/a&gt;: Added a testcase. not reproducible&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12703292" name="SOLR-7052.patch" size="31459" author="vzhovtiuk" created="Sun, 8 Mar 2015 17:00:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 23 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24wdj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>