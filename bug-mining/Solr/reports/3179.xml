<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:18:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9433] SolrCore clean-up logic uses incorrect path to delete dataDir on failure to create a core</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9433</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When a core fails to be created for some reason (errant schema or solrconfig etc.), &lt;tt&gt;SolrCore.deleteUnloadedCore()&lt;/tt&gt; is called from &lt;tt&gt;unload()&lt;/tt&gt; in CoreContainer in order to clean-up the possibly left-over &lt;tt&gt;dataDir&lt;/tt&gt; and &lt;tt&gt;instanceDir&lt;/tt&gt;.  The problem is that the CoreDescriptor passed to &lt;tt&gt;SolrCore.deleteUnloadedCore()&lt;/tt&gt; will have its value for &lt;tt&gt;dataDir&lt;/tt&gt; set to just &quot;data/&quot; unless an explicit &lt;tt&gt;dataDir&lt;/tt&gt; was specified by the user in the request to create the core, leading to an attempt to delete simply &lt;tt&gt;&quot;data/&quot;&lt;/tt&gt;, which presumably resolves to a non-existent directory under Solr&apos;s home directory or some such.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/branch_5_5/solr/core/src/java/org/apache/solr/core/CoreContainer.java#L974&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/branch_5_5/solr/core/src/java/org/apache/solr/core/CoreContainer.java#L974&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/branch_5_5/solr/core/src/java/org/apache/solr/core/SolrCore.java#L2537&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/branch_5_5/solr/core/src/java/org/apache/solr/core/SolrCore.java#L2537&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12999276">SOLR-9433</key>
            <summary>SolrCore clean-up logic uses incorrect path to delete dataDir on failure to create a core</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png" description="This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.">Reopened</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="shalin">Shalin Shekhar Mangar</assignee>
                                    <reporter username="evansayer">Evan Sayer</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Aug 2016 16:11:22 +0000</created>
                <updated>Wed, 2 Oct 2019 17:24:27 +0000</updated>
                                            <version>5.5.2</version>
                                    <fixVersion>6.7</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15622670" author="shalinmangar" created="Mon, 31 Oct 2016 16:39:34 +0000"  >&lt;p&gt;Patch with a fix and test. The data directory needed to be resolved against the coreRootDirectory.&lt;/p&gt;</comment>
                            <comment id="15624850" author="jira-bot" created="Tue, 1 Nov 2016 09:04:10 +0000"  >&lt;p&gt;Commit da7ccd3eefc92943ac0cea5103c84530f77d67a4 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=da7ccd3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=da7ccd3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9433&quot; title=&quot;SolrCore clean-up logic uses incorrect path to delete dataDir on failure to create a core&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9433&quot;&gt;SOLR-9433&lt;/a&gt;: SolrCore clean-up logic uses incorrect path to delete dataDir on failure to create a core&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 5120816)&lt;/p&gt;</comment>
                            <comment id="15624855" author="shalinmangar" created="Tue, 1 Nov 2016 09:05:32 +0000"  >&lt;p&gt;This is the corresponding commit on master: &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/lucene-solr/commit/51208163&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/lucene-solr/commit/51208163&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I wrote &quot;OLR-9433&quot; instead of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9433&quot; title=&quot;SolrCore clean-up logic uses incorrect path to delete dataDir on failure to create a core&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9433&quot;&gt;SOLR-9433&lt;/a&gt; so the commit bot did not post the message to this issue.&lt;/p&gt;</comment>
                            <comment id="15624858" author="shalinmangar" created="Tue, 1 Nov 2016 09:05:54 +0000"  >&lt;p&gt;Thanks Evan!&lt;/p&gt;</comment>
                            <comment id="15696534" author="jira-bot" created="Fri, 25 Nov 2016 19:31:34 +0000"  >&lt;p&gt;Commit eded69ba8ff5df5dbeb10c9996a1b591bd9ec243 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=eded69b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=eded69b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9433&quot; title=&quot;SolrCore clean-up logic uses incorrect path to delete dataDir on failure to create a core&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9433&quot;&gt;SOLR-9433&lt;/a&gt;: Ignore testDeleteInstanceDirAfterCreateFailure on windows&lt;/p&gt;</comment>
                            <comment id="15696538" author="jira-bot" created="Fri, 25 Nov 2016 19:31:59 +0000"  >&lt;p&gt;Commit 2badb2b4d8d2900c5323870e24f3f2023c200b33 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=2badb2b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=2badb2b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9433&quot; title=&quot;SolrCore clean-up logic uses incorrect path to delete dataDir on failure to create a core&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9433&quot;&gt;SOLR-9433&lt;/a&gt;: Ignore testDeleteInstanceDirAfterCreateFailure on windows&lt;/p&gt;

&lt;p&gt;(cherry picked from commit eded69b)&lt;/p&gt;</comment>
                            <comment id="15700342" author="romseygeek" created="Sun, 27 Nov 2016 21:32:33 +0000"  >&lt;p&gt;Hey Shalin, I think the failing test here reveals a real bug - we&apos;re leaking a file descriptor on a transaction log when the core reloads, which is why Windows refuses to delete it.&lt;/p&gt;</comment>
                            <comment id="15701003" author="shalinmangar" created="Mon, 28 Nov 2016 05:45:41 +0000"  >&lt;p&gt;Thanks Alan, I&apos;ll take a look.&lt;/p&gt;</comment>
                            <comment id="15907789" author="ichattopadhyaya" created="Mon, 13 Mar 2017 16:41:26 +0000"  >&lt;p&gt;Moving to 6.5, since 6.4 has already been released.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12836175" name="SOLR-9433.patch" size="4596" author="shalin" created="Mon, 31 Oct 2016 16:39:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32nqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>