<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:38:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4978] Time is stripped from datetime column when imported into Solr date field</title>
                <link>https://issues.apache.org/jira/browse/SOLR-4978</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I discovered that all dates I imported into a Solr date field from a MySQL datetime column have the time stripped (ie time portion is always 00:00:00).&lt;/p&gt;

&lt;p&gt;After double checking my DIH config and trying different things, I decided to take a look at the DIH code.&lt;/p&gt;

&lt;p&gt;When I looked at the source code of DIH JdbcDataSource class, I discovered that it is using java.sql.ResultSet and its getDate() method to handle date field. The getDate() method returns java.sql.Date. The java api doc for java.sql.Date&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://docs.oracle.com/javase/6/docs/api/java/sql/Date.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oracle.com/javase/6/docs/api/java/sql/Date.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;states that:&lt;/p&gt;

&lt;p&gt;&quot;To conform with the definition of SQL DATE, the millisecond values wrapped by a java.sql.Date instance must be &apos;normalized&apos; by setting the hours, minutes, seconds, and milliseconds to zero in the particular time zone with which the instance is associated.&quot;&lt;/p&gt;

&lt;p&gt;I am so surprise at my finding that I think I may not be right.  What am I doing wrong here?  This is such a big hole in DIH, how could it be possible that no one has noticed this until now?&lt;/p&gt;

&lt;p&gt;Has anyone successfully imported a datetime column into a Solr date field using DIH?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12655456">SOLR-4978</key>
            <summary>Time is stripped from datetime column when imported into Solr date field</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalin">Shalin Shekhar Mangar</assignee>
                                    <reporter username="billa">William Au</reporter>
                        <labels>
                    </labels>
                <created>Sat, 29 Jun 2013 01:42:17 +0000</created>
                <updated>Mon, 9 May 2016 18:55:09 +0000</updated>
                            <resolved>Mon, 8 Jul 2013 11:33:08 +0000</resolved>
                                                    <fixVersion>4.4</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>contrib - DataImportHandler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13696143" author="billa" created="Sat, 29 Jun 2013 16:11:05 +0000"  >&lt;p&gt;we have convertType=true in our dih config.&lt;/p&gt;</comment>
                            <comment id="13696201" author="billa" created="Sat, 29 Jun 2013 21:13:12 +0000"  >&lt;p&gt;setting convertType=false is a workaround for my problem.  But the bug still exists when convertType is set to true.  DIH should not call ResultSet.getDate() for solr date field because ResultSet.getDate() returns a java.sql.Date which has not time portion.  Since sold date field does have a time portion, DIH should call ResultSet.getTimestamp().&lt;/p&gt;</comment>
                            <comment id="13697615" author="noble.paul" created="Tue, 2 Jul 2013 08:51:16 +0000"  >&lt;p&gt;Do you see any backcompat issues if we change from ResultSet.getDate() to ResultSet.getTimestamp()&lt;/p&gt;</comment>
                            <comment id="13701129" author="billa" created="Fri, 5 Jul 2013 21:19:23 +0000"  >&lt;p&gt;This will only have an effect if convertType is enabled and will only affect date field type.  convertType is disabled by default.  I guess most people use the default setting, which is probably why no one has noticed this bug before.  The current behavior for date field type is incorrect when converType is enabled.  Making the change will fix the bug.  So date fields indexed by DIH when convertType is enabled will actually have a time portion.&lt;/p&gt;</comment>
                            <comment id="13701949" author="jira-bot" created="Mon, 8 Jul 2013 11:30:41 +0000"  >&lt;p&gt;Commit 1500666 from shalin@apache.org&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1500666&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1500666&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4978&quot; title=&quot;Time is stripped from datetime column when imported into Solr date field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4978&quot;&gt;&lt;del&gt;SOLR-4978&lt;/del&gt;&lt;/a&gt;: Time is stripped from datetime column when imported into Solr date field if convertType=true&lt;/p&gt;</comment>
                            <comment id="13701950" author="jira-bot" created="Mon, 8 Jul 2013 11:31:46 +0000"  >&lt;p&gt;Commit 1500668 from shalin@apache.org&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1500668&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1500668&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4978&quot; title=&quot;Time is stripped from datetime column when imported into Solr date field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4978&quot;&gt;&lt;del&gt;SOLR-4978&lt;/del&gt;&lt;/a&gt;: Time is stripped from datetime column when imported into Solr date field if convertType=true&lt;/p&gt;</comment>
                            <comment id="13716850" author="steve_rowe" created="Tue, 23 Jul 2013 18:38:46 +0000"  >&lt;p&gt;Bulk close resolved 4.4 issues&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335731</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lwtj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>336055</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>