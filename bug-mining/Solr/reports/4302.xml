<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:40:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-13240] UTILIZENODE action results in an exception</title>
                <link>https://issues.apache.org/jira/browse/SOLR-13240</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When I invoke the UTILIZENODE action the REST call fails like this after it moved a few replicas:&lt;br/&gt;
{&lt;br/&gt;
  &quot;responseHeader&quot;:&lt;/p&gt;
{
    &quot;status&quot;:500,
    &quot;QTime&quot;:40220}
&lt;p&gt;,&lt;br/&gt;
  &quot;Operation utilizenode caused exception:&quot;:&quot;java.lang.IllegalArgumentException:java.lang.IllegalArgumentException: Comparison method violates its general contract!&quot;,&lt;br/&gt;
  &quot;exception&quot;:&lt;/p&gt;
{
    &quot;msg&quot;:&quot;Comparison method violates its general contract!&quot;,
    &quot;rspCode&quot;:-1}
&lt;p&gt;,&lt;br/&gt;
  &quot;error&quot;:{&lt;br/&gt;
    &quot;metadata&quot;:[&lt;br/&gt;
      &quot;error-class&quot;,&quot;org.apache.solr.common.SolrException&quot;,&lt;br/&gt;
      &quot;root-error-class&quot;,&quot;org.apache.solr.common.SolrException&quot;],&lt;br/&gt;
    &quot;msg&quot;:&quot;Comparison method violates its general contract!&quot;,&lt;br/&gt;
    &quot;trace&quot;:&quot;org.apache.solr.common.SolrException: Comparison method violates its general contract!\n\tat org.apache.solr.client.solrj.SolrResponse.getException(SolrResponse.java:53)\n\tat org.apache.solr.handler.admin.CollectionsHandler.invokeAction(CollectionsHandler.java:274)\n\tat org.apache.solr.handler.admin.CollectionsHandler.handleRequestBody(CollectionsHandler.java:246)\n\tat org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:199)\n\tat org.apache.solr.servlet.HttpSolrCall.handleAdmin(HttpSolrCall.java:734)\n\tat org.apache.solr.servlet.HttpSolrCall.handleAdminRequest(HttpSolrCall.java:715)\n\tat org.apache.solr.servlet.HttpSolrCall.call(HttpSolrCall.java:496)\n\tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:377)\n\tat org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:323)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1634)\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:533)\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:146)\n\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548)\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:257)\n\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1595)\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255)\n\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1317)\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:203)\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:473)\n\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1564)\n\tat org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:201)\n\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1219)\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:144)\n\tat org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:219)\n\tat org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:126)\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\n\tat org.eclipse.jetty.rewrite.handler.RewriteHandler.handle(RewriteHandler.java:335)\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)\n\tat org.eclipse.jetty.server.Server.handle(Server.java:531)\n\tat org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:352)\n\tat org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:260)\n\tat org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:281)\n\tat org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:102)\n\tat org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:118)\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:333)\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:310)\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:168)\n\tat org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:126)\n\tat org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:366)\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:762)\n\tat org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:680)\n\tat java.lang.Thread.run(Thread.java:748)\n&quot;,&lt;br/&gt;
    &quot;code&quot;:500}} &lt;/p&gt;

&lt;p&gt;The logs show this additional exception:&lt;br/&gt;
2019-02-10 00:09:00.539 ERROR (OverseerThreadFactory-1268-thread-38-processing-n:agent2:9151_solr) [   ] o.a.s.c.a.c.OverseerCollectionMessageHandler Operation utilizenode failed:java.lang.IllegalArgumentException: Comparison method violates its general contract!&lt;br/&gt;
    at java.util.TimSort.mergeLo(TimSort.java:777)&lt;br/&gt;
    at java.util.TimSort.mergeAt(TimSort.java:514)&lt;br/&gt;
    at java.util.TimSort.mergeCollapse(TimSort.java:439)&lt;br/&gt;
    at java.util.TimSort.sort(TimSort.java:245)&lt;br/&gt;
    at java.util.Arrays.sort(Arrays.java:1512)&lt;br/&gt;
    at java.util.ArrayList.sort(ArrayList.java:1462)&lt;br/&gt;
    at org.apache.solr.client.solrj.cloud.autoscaling.MoveReplicaSuggester.tryEachNode(MoveReplicaSuggester.java:50)&lt;br/&gt;
    at org.apache.solr.client.solrj.cloud.autoscaling.MoveReplicaSuggester.init(MoveReplicaSuggester.java:38)&lt;br/&gt;
    at org.apache.solr.client.solrj.cloud.autoscaling.Suggester.getSuggestion(Suggester.java:187)&lt;br/&gt;
    at org.apache.solr.cloud.api.collections.UtilizeNodeCmd.call(UtilizeNodeCmd.java:100)&lt;br/&gt;
    at org.apache.solr.cloud.api.collections.OverseerCollectionMessageHandler.processMessage(OverseerCollectionMessageHandler.java:259)&lt;br/&gt;
    at org.apache.solr.cloud.OverseerTaskProcessor$Runner.run(OverseerTaskProcessor.java:478)&lt;br/&gt;
    at org.apache.solr.common.util.ExecutorUtil$MDCAwareThreadPoolExecutor.lambda$execute$0(ExecutorUtil.java:209)&lt;br/&gt;
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)&lt;br/&gt;
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)&lt;br/&gt;
    at java.lang.Thread.run(Thread.java:748) &lt;/p&gt;

&lt;p&gt;I suspect this to be caused by this comparator: &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/MoveReplicaSuggester.java#L98&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/master/solr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/MoveReplicaSuggester.java#L98&lt;/a&gt;&lt;br/&gt;
In case it is possible that both compared replicas are leaders the result would not be correct.&lt;/p&gt;

&lt;p&gt;see also the mail thread about this:&lt;br/&gt;
&lt;a href=&quot;https://www.mail-archive.com/search?l=solr-user@lucene.apache.org&amp;amp;q=subject:%22Re%5C%3A+CloudSolrClient+getDocCollection%22&amp;amp;o=newest&amp;amp;f=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.mail-archive.com/search?l=solr-user@lucene.apache.org&amp;amp;q=subject:%22Re%5C%3A+CloudSolrClient+getDocCollection%22&amp;amp;o=newest&amp;amp;f=1&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13214853">SOLR-13240</key>
            <summary>UTILIZENODE action results in an exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cpoerschke">Christine Poerschke</assignee>
                                    <reporter username="HendrikH">Hendrik Haddorp</reporter>
                        <labels>
                    </labels>
                <created>Sun, 10 Feb 2019 11:39:02 +0000</created>
                <updated>Thu, 12 May 2022 00:25:58 +0000</updated>
                            <resolved>Fri, 6 Sep 2019 12:13:16 +0000</resolved>
                                    <version>7.6</version>
                    <version>7.7</version>
                    <version>7.7.1</version>
                    <version>7.7.2</version>
                    <version>8.0</version>
                    <version>8.1</version>
                    <version>8.1.1</version>
                    <version>8.2</version>
                                    <fixVersion>8.3</fixVersion>
                    <fixVersion>9.0</fixVersion>
                                    <component>AutoScaling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="16788105" author="goodman" created="Fri, 8 Mar 2019 17:41:02 +0000"  >&lt;p&gt;I have come across this same problem, except I notice it when experimenting with the autoscaling features, and when Solr is running the ComputePlan.&#160;&lt;/p&gt;

&lt;p&gt;I did some debugging of the underlying culprit:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
List&amp;lt;Pair&amp;lt;ReplicaInfo, Row&amp;gt;&amp;gt; validReplicas = getValidReplicas(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, -1);
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; ( Pair&amp;lt;ReplicaInfo, Row&amp;gt; x : validReplicas ) {
  log.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Pair: {}&quot;&lt;/span&gt;, x.first());
}
validReplicas.sort(leaderLast);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And found the following results, which I find really odd &lt;em&gt;(I&apos;ve removed any company sensitive information hence the collection names and node urls)&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-json&quot;&gt;
  {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;first&quot;&lt;/span&gt;: {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;core_node95&quot;&lt;/span&gt;: {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;core&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;collection_name1_shard8_replica_n92&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;leader&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;INDEX.sizeInBytes&quot;&lt;/span&gt;: 6.426125764846802e-08,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;base_url&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:8081/solr&quot;&lt;/span&gt;,
&lt;/span&gt;        &lt;span class=&quot;code-quote&quot;&gt;&quot;node_name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;127.0.0.1:8081_solr&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;active&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;NRT&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;force_set_state&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;shard&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;shard8&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;collection&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;collection_name1&quot;&lt;/span&gt;
      }
    },
    &lt;span class=&quot;code-quote&quot;&gt;&quot;second&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;127.0.0.1:8081_solr&quot;&lt;/span&gt;
  },
  {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;first&quot;&lt;/span&gt;: {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;core_node7&quot;&lt;/span&gt;: {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;core&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;collection_name1_shard12_replica_n4&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;leader&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;INDEX.sizeInBytes&quot;&lt;/span&gt;: 6.426125764846802e-08,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;base_url&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:8081/solr&quot;&lt;/span&gt;,
&lt;/span&gt;        &lt;span class=&quot;code-quote&quot;&gt;&quot;node_name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;127.0.0.1:8081_solr&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;state&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;active&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;NRT&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;force_set_state&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;shard&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;shard12&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;collection&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;collection_name1&quot;&lt;/span&gt;
      }
    },
    &lt;span class=&quot;code-quote&quot;&gt;&quot;second&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;127.0.0.1:8081_solr&quot;&lt;/span&gt;
  },
  {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;first&quot;&lt;/span&gt;: {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;7851000&quot;&lt;/span&gt;: {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;NRT&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;INDEX.sizeInBytes&quot;&lt;/span&gt;: 6.426125764846802e-08,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;core&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;7851000&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;shard&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;shard2&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;collection&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;collection_name2&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;node_name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;0.0.0.0:8080_solr&quot;&lt;/span&gt;
      }
    },
    &lt;span class=&quot;code-quote&quot;&gt;&quot;second&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;0.0.0.0:8080_solr&quot;&lt;/span&gt;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ve tried to create a simple unit test for the Comparator function that can be found in &lt;tt&gt;MoveReplicaSuggester.java&lt;/tt&gt; &lt;em&gt;(which is causing this problem)&lt;/em&gt;, however, I am struggling to produce similar results to make it cause an exception. I&apos;ve tried a list of &lt;tt&gt;replicaInfo&lt;/tt&gt;&apos;s where they&apos;re all leaders, no one is a leader, all but one is a leader, inverted and alternating. So I&apos;m not sure if what&apos;s getting the ReplicaInfo is possibly the problem if it&apos;s creating a &lt;tt&gt;Pair&amp;lt;ReplicaInfo, Row&amp;gt;&lt;/tt&gt; object with that kind of data &lt;em&gt;(the last JSON blob)&lt;/em&gt; &lt;/p&gt;</comment>
                            <comment id="16797003" author="goodman" created="Wed, 20 Mar 2019 10:14:12 +0000"  >&lt;p&gt;I&apos;ve attached a patch that myself and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=TimOwen&quot; class=&quot;user-hover&quot; rel=&quot;TimOwen&quot;&gt;TimOwen&lt;/a&gt; worked on. I have also tested it on a small 5 box cluster, and found I was no longer getting this exception.&lt;/p&gt;</comment>
                            <comment id="16803567" author="shalinmangar" created="Thu, 28 Mar 2019 04:00:43 +0000"  >&lt;p&gt;Thanks Tim and Richard. Patch looks good to me. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; - can you please take a look?&lt;/p&gt;</comment>
                            <comment id="16812740" author="noble.paul" created="Mon, 8 Apr 2019 19:56:12 +0000"  >&lt;p&gt;The patch LGTM.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;If there are multiple leaders. The current code is not designed to handle multiple leaders&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;But what is the class &lt;tt&gt;MoveReplicaSuggesterTest&lt;/tt&gt; doing ? it&apos;s not even a proper test&lt;/p&gt;</comment>
                            <comment id="16813170" author="goodman" created="Tue, 9 Apr 2019 09:24:28 +0000"  >&lt;p&gt;I guess the test isn&apos;t named as well as it can be, but it&apos;s mainly testing the new comparator, and that if there is a set of replicas which have more than 1 leader, it won&apos;t throw an exception&lt;/p&gt;</comment>
                            <comment id="16826461" author="mmedway" created="Thu, 25 Apr 2019 20:54:00 +0000"  >&lt;p&gt;I&apos;m also having this problem in version 7.5.&#160; I&apos;m not exactly sure how exactly I triggered it to happen but I added two new solr web nodes to my cluster (3 to 5 nodes total), one of them auto-scaled correctly and moved replicas to it, the other one just sat there and did nothing.&lt;/p&gt;

&lt;p&gt;I can run the command for the new node:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;curl &apos;http://localhost:8983/solr/admin/collections?action=UTILIZENODE&amp;amp;node=172.27.9.167:8983_solr&apos;&lt;/b&gt; &lt;/p&gt;

&lt;p&gt;from any of the servers and i receive the same error as you guys:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;&quot;Operation utilizenode caused exception:&quot;:&quot;java.lang.IllegalArgumentException:java.lang.IllegalArgumentException: Comparison method violates its general contract!&quot;&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;I tried to use your patch but i don&apos;t think i did it correctly.&#160; Here were my steps:&lt;/p&gt;



&lt;p&gt;#patching solr 7.5&lt;br/&gt;
mkdir solrbuild&lt;br/&gt;
cd solrbuild&lt;br/&gt;
apt install ant -y&lt;br/&gt;
wget &lt;a href=&quot;http://archive.apache.org/dist/lucene/solr/7.5.0/solr-7.5.0-src.tgz&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://archive.apache.org/dist/lucene/solr/7.5.0/solr-7.5.0-src.tgz&lt;/a&gt;&lt;br/&gt;
tar -xvf solr-7.5.0-src.tgz&lt;br/&gt;
#cd solr-7.5.0/solr-7.5.0/solr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/&lt;br/&gt;
#apply the patch&lt;br/&gt;
#wget &apos;https://issues.apache.org/jira/secure/attachment/12963112/SOLR-13240.patch&apos; -O - | patch -p1 --dry-run&lt;br/&gt;
nano solr-7.5.0/solr/solrj/src/java/org/apache/solr/client/solrj/cloud/autoscaling/MoveReplicaSuggester.java&lt;br/&gt;
#update the code&lt;br/&gt;
cd solr-7.5.0/&lt;br/&gt;
ant ivy-bootstrap&lt;br/&gt;
ant compile&lt;br/&gt;
cd solr&lt;br/&gt;
ant server&lt;br/&gt;
tar -cvzf /home/ubuntu/solrbuild/solr-7.5.0.tgz /home/ubuntu/solrbuild/solr-7.5.0/solr&lt;br/&gt;
#download the file to the servers you need to install it to. it should be about 160mb&lt;/p&gt;

&lt;p&gt;#install the patched version over top of the existing&lt;br/&gt;
mkdir -p /home/ubuntu/solrbuild/&lt;br/&gt;
chmod 666 /home/ubuntu/solrbuild/&lt;br/&gt;
/home/ubuntu/solr-7.5.0/bin/install_solr_service.sh /home/ubuntu/solrbuild/solr-7.5.0.tgz -f&lt;/p&gt;

&lt;p&gt;What do you guys think? I&apos;m out of ideas and dont really want to move 300+ replicas manually.&#160;&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;

&lt;p&gt;-Matt&lt;/p&gt;</comment>
                            <comment id="16826788" author="timowen" created="Fri, 26 Apr 2019 09:01:26 +0000"  >&lt;p&gt;At first glance, I think you should have used &lt;tt&gt;ant jar&lt;/tt&gt; instead of &lt;tt&gt;ant compile&lt;/tt&gt; otherwise it may not have actually built the jar file from the code changes.&lt;/p&gt;

&lt;p&gt;I don&apos;t know much about the install script, but what I tend to do for testing small fixes to the code is just use Ant to build the jar and then drop that new jar in place of the existing one, inside the installation - somewhere it will have unpacked the Solr distro war file, and the library jars are in e.g. &amp;lt;top-level-solr-install&amp;gt;/server/solr-webapp/webapp/WEB-INF/lib/ ... you can replace the jar in there, and restart Solr.&lt;/p&gt;

&lt;p&gt;In this case, you&apos;re changing the&#160;solr-solrj package, and ant compile should have built the new jar into &lt;tt&gt;solr/build/solr-solrj/&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16826943" author="mmedway" created="Fri, 26 Apr 2019 13:10:35 +0000"  >&lt;p&gt;Nice, ill give that a try&lt;/p&gt;</comment>
                            <comment id="16826956" author="mmedway" created="Fri, 26 Apr 2019 13:32:49 +0000"  >&lt;p&gt;I compiled the jars this time using ant jar and i found the two locations for the jars:&lt;/p&gt;

&lt;p&gt;current service:&lt;br/&gt;
ls -al /opt/solr/server/solr-webapp/webapp/WEB-INF/lib&lt;/p&gt;

&lt;p&gt;new jars:&lt;br/&gt;
ls -al /home/ubuntu/solrbuild/solr-7.5.0/solr/server/solr-webapp/webapp/WEB-INF/lib&lt;/p&gt;

&lt;p&gt;For this specific edit to&#160;MoveReplicaSuggester.java do you know what jar files i should be moving? They all have identical sizes in this directory so im not sure&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16826964" author="timowen" created="Fri, 26 Apr 2019 13:42:02 +0000"  >&lt;p&gt;The one jar you&apos;re changing is solr-solrj .. you should find the new jar that Ant built in this path..&lt;/p&gt;

&lt;p&gt;/home/ubuntu/solrbuild/solr-7.5.0/solr/build/solr-solrj/&lt;/p&gt;

&lt;p&gt;If you compare the jar file in that dir, with the one in your other two paths listed above, you&apos;ll see if it&apos;s been deployed. The /opt path is what Solr is actually running from, I would guess. So if your patched jar is in there too, you should get that fix after a restart.&lt;/p&gt;</comment>
                            <comment id="16827009" author="mmedway" created="Fri, 26 Apr 2019 14:34:04 +0000"  >&lt;p&gt;Thanks so much guys i think we fixed it.&#160;&lt;/p&gt;



&lt;p&gt;I found the new jar here:&lt;br/&gt;
ls -al /home/ubuntu/solrbuild/solr-7.5.0/solr/build/solr-solrj/solr-solrj-7.5.0-SNAPSHOT.jar (renamed to to remove -SNAPSHOT)&lt;/p&gt;

&lt;p&gt;old jar here:&lt;br/&gt;
ls -al /opt/solr/server/solr-webapp/webapp/WEB-INF/lib | grep solr-solrj&lt;br/&gt;
#old file size: 1870892&lt;/p&gt;

&lt;p&gt;#new file size: 1871143 &lt;br/&gt;
#backup existing&lt;br/&gt;
cp /opt/solr/server/solr-webapp/webapp/WEB-INF/lib/solr-solrj-7.5.0.jar /opt/solr/server/solr-webapp/webapp/WEB-INF/lib/solr-solrj-7.5.0.jar.old&lt;br/&gt;
#copy over the new:&lt;br/&gt;
cp /home/ubuntu/solr-solrj-7.5.0.jar /opt/solr/server/solr-webapp/webapp/WEB-INF/lib/solr-solrj-7.5.0.jar&lt;/p&gt;

&lt;p&gt;#restarted solr:&lt;/p&gt;

&lt;p&gt;service solr restart&lt;/p&gt;

&lt;p&gt;repeat the above for all solr web nodes i the cluster&lt;/p&gt;

&lt;p&gt;now my curl works!&lt;br/&gt;
:~# curl &apos;http://localhost:8983/solr/admin/collections?action=UTILIZENODE&amp;amp;node=172.27.9.167:8983_solr&apos;&lt;br/&gt;
{&lt;br/&gt;
 &quot;responseHeader&quot;:{&lt;br/&gt;
 &quot;status&quot;:0,&lt;br/&gt;
 &quot;QTime&quot;:69948}}&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;For the convenience of anyone else who comes along to this issue ive attached the updated&#160;solr-solrj-7.5.0.jar file so that they can easily copy it over top of the old one:&#160;/opt/solr/server/solr-webapp/webapp/WEB-INF/lib/solr-solrj-7.5.0.jar&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks!&lt;br/&gt;
-Matt&lt;/p&gt;</comment>
                            <comment id="16827054" author="timowen" created="Fri, 26 Apr 2019 15:39:12 +0000"  >&lt;p&gt;Good to hear the patch worked for you!&lt;/p&gt;

&lt;p&gt;I&apos;m not entirely sure in what circumstances it happens, or not, because you&apos;d think it would have never worked and been a blocker for the previous release of this functionality. Clearly it must work sometimes. Maybe it depends how many different shards have replicas on a given node, i.e. when it&apos;s sorting a List of replicas from many different shards, there&apos;s likely to be more than 1 leader among those.&lt;/p&gt;</comment>
                            <comment id="16827057" author="mmedway" created="Fri, 26 Apr 2019 15:43:16 +0000"  >&lt;p&gt;yea, I&apos;m pretty frustrated about that as well.&#160; 7.5&apos;s auto scaling features worked great since release until i randomly ran into this. Ill eventually try 8.0 since they made more changes and fixes to autoscaling but until then this patch works great.&#160;&lt;/p&gt;</comment>
                            <comment id="16881139" author="cpoerschke" created="Tue, 9 Jul 2019 11:11:17 +0000"  >&lt;p&gt;Attached revised patch with &lt;tt&gt;MoveReplicaSuggesterTest&lt;/tt&gt; suggested changes (no pun intended) as follows:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;remove one unused import (to make &lt;tt&gt;ant precommit&lt;/tt&gt; pass)&lt;/li&gt;
	&lt;li&gt;add two more asserts to &lt;tt&gt;assertLeaderProperties&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;move the test from &lt;tt&gt;solr/core&lt;/tt&gt; to &lt;tt&gt;solr/solrj&lt;/tt&gt; since &lt;tt&gt;MoveReplicaSuggester&lt;/tt&gt; itself lives in the latter&lt;/li&gt;
	&lt;li&gt;increase test coverage via the use of randomisation
	&lt;ul&gt;
		&lt;li&gt;&lt;a href=&quot;https://berlinbuzzwords.de/14/session/randomize-your-tests-and-it-will-blow-your-socks&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://berlinbuzzwords.de/14/session/randomize-your-tests-and-it-will-blow-your-socks&lt;/a&gt; might be of interest in this context&lt;/li&gt;
		&lt;li&gt;&lt;tt&gt;cd solr/solrj ; ant beast -Dbeast.iters=10 -Dtestcase=MoveReplicaSuggesterTest&lt;/tt&gt; can be used to run the test multiple times&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;How does that sound?&lt;/p&gt;</comment>
                            <comment id="16881143" author="timowen" created="Tue, 9 Jul 2019 11:21:18 +0000"  >&lt;p&gt;Thanks for following up on this Christine.. updated patch looks good to me.&lt;/p&gt;

&lt;p&gt;Disclaimer.. we&apos;ve not tried this patch against the master branch, as we&apos;re using 7.x in production.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16881144" author="cpoerschke" created="Tue, 9 Jul 2019 11:22:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;... I&apos;ve attached a patch that myself and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=TimOwen&quot; class=&quot;user-hover&quot; rel=&quot;TimOwen&quot;&gt;TimOwen&lt;/a&gt; worked on. ...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Goodman&quot; class=&quot;user-hover&quot; rel=&quot;goodman&quot;&gt;Goodman&lt;/a&gt; - do you have any preference as to &lt;tt&gt;solr/CHANGES.txt&lt;/tt&gt; attribution choice of name for yourself e.g. &quot;Richard&quot; (JIRA full name) or &quot;Goodman&quot; (JIRA Username) or a variant of the two or something else perhaps? It&apos;s your choice, I&apos;m just looking ahead here a little towards patch commit time. Thanks!&lt;/p&gt;</comment>
                            <comment id="16881145" author="goodman" created="Tue, 9 Jul 2019 11:24:10 +0000"  >&lt;p&gt;Hi Christine, thanks for looking at this. Updated patch looks good to me.&lt;/p&gt;

&lt;p&gt;As for attribution, &quot;Richard Goodman&quot; is fine. Tim also helped on this, if he isn&apos;t included as well Thanks &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                            <comment id="16881150" author="cpoerschke" created="Tue, 9 Jul 2019 11:31:24 +0000"  >&lt;blockquote&gt;&lt;p&gt;... As for attribution, &quot;Richard Goodman&quot; is fine. Tim also helped on this, if he isn&apos;t included as well ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Great, thanks for clarifying! Yes, customarily attribution would be for both of you, of course. And &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=HendrikH&quot; class=&quot;user-hover&quot; rel=&quot;HendrikH&quot;&gt;HendrikH&lt;/a&gt; too of course for issue creation and diagnosing here.&lt;/p&gt;

&lt;p&gt;Next step here will be for &lt;tt&gt;Lucene/Solr QA&lt;/tt&gt; Jenkins to add feedback to the ticket here &amp;#8211; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/&lt;/a&gt; &amp;#8211; that should happen automatically.&lt;/p&gt;
</comment>
                            <comment id="16881695" author="lucenesolrqa" created="Wed, 10 Jul 2019 03:15:23 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Prechecks &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; test4tests &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch appears to include 1 new or modified test files. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; master Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  4m  1s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Patch Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  4m  3s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  4m  3s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Release audit (RAT) &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  4m  3s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Check forbidden APIs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  4m  3s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; Validate source patterns &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;  4m  3s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; Validate source patterns validate-source-patterns failed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Other Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 10m 37s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; solrj in the patch passed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 24m  1s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13240&quot; title=&quot;UTILIZENODE action results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13240&quot;&gt;&lt;del&gt;SOLR-13240&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12974043/SOLR-13240.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12974043/SOLR-13240.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  compile  javac  unit  ratsources  checkforbiddenapis  validatesourcepatterns  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux lucene2-us-west.apache.org 4.4.0-112-generic #135-Ubuntu SMP Fri Jan 19 11:48:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-SOLR-Build/sourcedir/dev-tools/test-patch/lucene-solr-yetus-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 14b6701 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; version: Apache Ant(TM) version 1.9.6 compiled on July 20 2018 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LTS &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Validate source patterns &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/485/artifact/out/patch-validate-source-patterns-root.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/485/artifact/out/patch-validate-source-patterns-root.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Test Results &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/485/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/485/testReport/&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: solr/solrj U: solr/solrj &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/485/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/485/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.7.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16881977" author="cpoerschke" created="Wed, 10 Jul 2019 11:37:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;... Validate source patterns validate-source-patterns failed ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This was a case of &lt;tt&gt;&quot;Solr test cases should extend SolrTestCase rather than LuceneTestCase&quot;&lt;/tt&gt; which I missed, oops. Just attached patch also removes two imports that are no longer needed now that the &lt;tt&gt;MoveReplicaSuggesterTest&lt;/tt&gt; extends a base class.&lt;/p&gt;</comment>
                            <comment id="16882557" author="lucenesolrqa" created="Thu, 11 Jul 2019 01:03:59 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Prechecks &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; test4tests &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch appears to include 1 new or modified test files. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; master Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  2m 13s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Patch Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 32s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 32s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Release audit (RAT) &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 32s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Check forbidden APIs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 32s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Validate source patterns &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 32s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Other Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;  5m  1s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; solrj in the patch failed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 12m 47s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Reason &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Tests &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Failed junit tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; solr.client.solrj.cloud.autoscaling.TestPolicyOld &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; solr.client.solrj.cloud.autoscaling.TestPolicy &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13240&quot; title=&quot;UTILIZENODE action results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13240&quot;&gt;&lt;del&gt;SOLR-13240&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12974177/SOLR-13240.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12974177/SOLR-13240.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  compile  javac  unit  ratsources  checkforbiddenapis  validatesourcepatterns  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux lucene1-us-west 4.4.0-137-generic #163~14.04.1-Ubuntu SMP Mon Sep 24 17:14:57 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-SOLR-Build/sourcedir/dev-tools/test-patch/lucene-solr-yetus-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 8a277ca &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; version: Apache Ant(TM) version 1.9.3 compiled on July 24 2018 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LTS &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; unit &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/486/artifact/out/patch-unit-solr_solrj.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/486/artifact/out/patch-unit-solr_solrj.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Test Results &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/486/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/486/testReport/&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: solr/solrj U: solr/solrj &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/486/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/486/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.7.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16882820" author="cpoerschke" created="Thu, 11 Jul 2019 10:15:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;... Failed junit tests	solr.client.solrj.cloud.autoscaling.TestPolicyOld solr.client.solrj.cloud.autoscaling.TestPolicy ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Am able to reproduce via &lt;tt&gt;cd solr/solrj ; ant test -Dtestcase=TestPolicy*&lt;/tt&gt; locally. Don&apos;t personally have bandwidth at the moment to delve in further but perhaps someone else would have bandwidth and curiosity to take a look and revise the patch? Thank you.&lt;/p&gt;</comment>
                            <comment id="16882845" author="goodman" created="Thu, 11 Jul 2019 10:45:41 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt;&lt;br/&gt;
I had a go, and got this output, not sure if this is helpful?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...
common.compile-test:
    [mkdir] Created dir: /Users/richardg/Documents/git/apache-lucene-solr/solr/build/solr-solrj/classes/test
    [javac] Compiling 160 source files to /Users/richardg/Documents/git/apache-lucene-solr/solr/build/solr-solrj/classes/test
    [javac] /Users/richardg/Documents/git/apache-lucene-solr/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/MoveReplicaSuggesterTest.java:25: error: cannot find symbol
    [javac] &lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.solr.SolrTestCase;
    [javac]                       ^
    [javac]   symbol:   &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;SolrTestCase
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.solr
    [javac] /Users/richardg/Documents/git/apache-lucene-solr/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/MoveReplicaSuggesterTest.java:33: error: cannot find symbol
    [javac] &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MoveReplicaSuggesterTest &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; SolrTestCase {
    [javac]                                               ^
    [javac]   symbol: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;SolrTestCase
    [javac] /Users/richardg/Documents/git/apache-lucene-solr/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/MoveReplicaSuggesterTest.java:54: error: cannot find symbol
    [javac]     assertTrue(REPLICA_INFO_ONE.isLeader);
    [javac]     ^
    [javac]   symbol:   method assertTrue(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;)
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MoveReplicaSuggesterTest
    [javac] /Users/richardg/Documents/git/apache-lucene-solr/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/MoveReplicaSuggesterTest.java:55: error: cannot find symbol
    [javac]     assertFalse(REPLICA_INFO_TWO.isLeader);
    [javac]     ^
    [javac]   symbol:   method assertFalse(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;)
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MoveReplicaSuggesterTest
    [javac] /Users/richardg/Documents/git/apache-lucene-solr/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/MoveReplicaSuggesterTest.java:56: error: cannot find symbol
    [javac]     assertTrue(REPLICA_INFO_THREE.isLeader);
    [javac]     ^
    [javac]   symbol:   method assertTrue(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;)
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MoveReplicaSuggesterTest
    [javac] /Users/richardg/Documents/git/apache-lucene-solr/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/MoveReplicaSuggesterTest.java:57: error: cannot find symbol
    [javac]     assertFalse(REPLICA_INFO_FOUR.isLeader);
    [javac]     ^
    [javac]   symbol:   method assertFalse(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;)
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MoveReplicaSuggesterTest
    [javac] /Users/richardg/Documents/git/apache-lucene-solr/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/MoveReplicaSuggesterTest.java:69: error: cannot find symbol
    [javac]     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (random().nextBoolean()) {
    [javac]         ^
    [javac]   symbol:   method random()
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MoveReplicaSuggesterTest
    [javac] /Users/richardg/Documents/git/apache-lucene-solr/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/MoveReplicaSuggesterTest.java:70: error: cannot find symbol
    [javac]       Collections.shuffle(validReplicas, random());
    [javac]                                          ^
    [javac]   symbol:   method random()
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MoveReplicaSuggesterTest
    [javac] /Users/richardg/Documents/git/apache-lucene-solr/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/MoveReplicaSuggesterTest.java:74: error: cannot find symbol
    [javac]     assertFalse(isReplicaLeader(validReplicas, 0));
    [javac]     ^
    [javac]   symbol:   method assertFalse(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;)
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MoveReplicaSuggesterTest
    [javac] /Users/richardg/Documents/git/apache-lucene-solr/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/MoveReplicaSuggesterTest.java:75: error: cannot find symbol
    [javac]     assertFalse(isReplicaLeader(validReplicas, 1));
    [javac]     ^
    [javac]   symbol:   method assertFalse(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;)
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MoveReplicaSuggesterTest
    [javac] /Users/richardg/Documents/git/apache-lucene-solr/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/MoveReplicaSuggesterTest.java:76: error: cannot find symbol
    [javac]     assertTrue(isReplicaLeader(validReplicas, 2));
    [javac]     ^
    [javac]   symbol:   method assertTrue(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;)
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MoveReplicaSuggesterTest
    [javac] /Users/richardg/Documents/git/apache-lucene-solr/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/MoveReplicaSuggesterTest.java:89: error: cannot find symbol
    [javac]     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (random().nextBoolean()) {
    [javac]         ^
    [javac]   symbol:   method random()
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MoveReplicaSuggesterTest
    [javac] /Users/richardg/Documents/git/apache-lucene-solr/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/MoveReplicaSuggesterTest.java:90: error: cannot find symbol
    [javac]       Collections.shuffle(validReplicas, random());
    [javac]                                          ^
    [javac]   symbol:   method random()
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MoveReplicaSuggesterTest
    [javac] /Users/richardg/Documents/git/apache-lucene-solr/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/MoveReplicaSuggesterTest.java:94: error: cannot find symbol
    [javac]     assertFalse(isReplicaLeader(validReplicas, 0));
    [javac]     ^
    [javac]   symbol:   method assertFalse(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;)
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MoveReplicaSuggesterTest
    [javac] /Users/richardg/Documents/git/apache-lucene-solr/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/MoveReplicaSuggesterTest.java:95: error: cannot find symbol
    [javac]     assertFalse(isReplicaLeader(validReplicas, 1));
    [javac]     ^
    [javac]   symbol:   method assertFalse(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;)
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MoveReplicaSuggesterTest
    [javac] /Users/richardg/Documents/git/apache-lucene-solr/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/MoveReplicaSuggesterTest.java:96: error: cannot find symbol
    [javac]     assertTrue(isReplicaLeader(validReplicas, 2));
    [javac]     ^
    [javac]   symbol:   method assertTrue(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;)
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MoveReplicaSuggesterTest
    [javac] /Users/richardg/Documents/git/apache-lucene-solr/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/MoveReplicaSuggesterTest.java:97: error: cannot find symbol
    [javac]     assertTrue(isReplicaLeader(validReplicas, 3));
    [javac]     ^
    [javac]   symbol:   method assertTrue(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt;)
    [javac]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MoveReplicaSuggesterTest
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; details.
    [javac] 17 errors

BUILD FAILED
/Users/richardg/Documents/git/apache-lucene-solr/solr/common-build.xml:557: The following error occurred &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; executing &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; line:
/Users/richardg/Documents/git/apache-lucene-solr/lucene/common-build.xml:896: The following error occurred &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; executing &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; line:
/Users/richardg/Documents/git/apache-lucene-solr/lucene/common-build.xml:908: The following error occurred &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; executing &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; line:
/Users/richardg/Documents/git/apache-lucene-solr/lucene/common-build.xml:2052: Compile failed; see the compiler error output &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; details.

Total time: 1 minute 1 second
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16884067" author="cpoerschke" created="Fri, 12 Jul 2019 18:23:35 +0000"  >&lt;p&gt;Hmm, probably something to do with the build dependencies i.e. &lt;tt&gt;solr/solrj&lt;/tt&gt; test runs assuming that a compile happened already previously e.g.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ant clean
ant compile-test
cd solr/solrj
ant test -Dtestcase=TestPolicy*
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16884951" author="goodman" created="Mon, 15 Jul 2019 08:52:17 +0000"  >&lt;p&gt;Morning &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt;, So I wasn&apos;t sure as to why I was getting those ant errors, it was quite frustrating. However, when I looked at &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;../lucene-solr/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/TestPolicy.java&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 
&lt;p&gt;and compared it to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;../lucene-solr/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/MoveReplicaSuggesterTest.java&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I noticed that &lt;tt&gt;TestPolicy&lt;/tt&gt; was using &lt;tt&gt;SolrTestCaseJ4&lt;/tt&gt; where as &lt;tt&gt;MoveReplicaSuggesterTest&lt;/tt&gt; was using &lt;tt&gt;SolrTestCase&lt;/tt&gt;, I changed this to use &lt;tt&gt;SolrTestCaseJ4&lt;/tt&gt; and it passed.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached the patch in case this was the right approach to solving this.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12979415/12979415_SOLR-13240.patch&quot; title=&quot;SOLR-13240.patch attached to SOLR-13240&quot;&gt;SOLR-13240.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;/p&gt;</comment>
                            <comment id="16885125" author="cpoerschke" created="Mon, 15 Jul 2019 11:56:18 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Goodman&quot; class=&quot;user-hover&quot; rel=&quot;goodman&quot;&gt;Goodman&lt;/a&gt; for persevering despite frustrations!&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;... I changed this to use SolrTestCaseJ4 and it passed.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Interesting. From a quick &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/test-framework/src/java/org/apache/solr/SolrTestCase.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/master/solr/test-framework/src/java/org/apache/solr/SolrTestCase.java&lt;/a&gt; vs. &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/test-framework/src/java/org/apache/solr/SolrTestCaseJ4.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/master/solr/test-framework/src/java/org/apache/solr/SolrTestCaseJ4.java&lt;/a&gt;&#160;comparison it&apos;s not all that apparent to me why use of the latter (derived) class would be beneficial here, hmm.&lt;/p&gt;

&lt;p&gt;Even more mysteriously, for me running your latest patch locally still gives test failures albeit with a potential pattern:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ant test -Dtestcase=TestPolicy* 2&amp;gt;&amp;amp;1 | grep expected
   [junit4]    &amp;gt; Throwable #1: org.junit.ComparisonFailure: expected:&amp;lt;core_node[2]&amp;gt; but was:&amp;lt;core_node[1]&amp;gt;
   [junit4]    &amp;gt; Throwable #1: org.junit.ComparisonFailure: expected:&amp;lt;r[3]&amp;gt; but was:&amp;lt;r[1]&amp;gt;
   [junit4]    &amp;gt; Throwable #1: org.junit.ComparisonFailure: expected:&amp;lt;core_node[2]&amp;gt; but was:&amp;lt;core_node[1]&amp;gt;
   [junit4]    &amp;gt; Throwable #1: org.junit.ComparisonFailure: expected:&amp;lt;r[3]&amp;gt; but was:&amp;lt;r[1]&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So it seems that now &lt;tt&gt;...1&lt;/tt&gt; is the actual outcome but before &quot;something else&quot; was the actual (and expected). A possible speculation is that the previous test expectations somehow implicitly relied on the sorting implementation?&lt;/p&gt;

&lt;p&gt;Let&apos;s see what &lt;tt&gt;Lucene/Solr QA Jenkins&lt;/tt&gt; comes back with next then.&lt;/p&gt;</comment>
                            <comment id="16885728" author="lucenesolrqa" created="Tue, 16 Jul 2019 00:40:16 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Prechecks &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; test4tests &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch appears to include 1 new or modified test files. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; master Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 34s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Patch Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 32s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 32s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Release audit (RAT) &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 33s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Check forbidden APIs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 32s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Validate source patterns &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 32s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Other Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;  5m 55s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; solrj in the patch failed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 12m 10s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Reason &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Tests &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Failed junit tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; solr.client.solrj.cloud.autoscaling.TestPolicyOld &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; solr.client.solrj.cloud.autoscaling.TestPolicy &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13240&quot; title=&quot;UTILIZENODE action results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13240&quot;&gt;&lt;del&gt;SOLR-13240&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12974692/SOLR-13240.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12974692/SOLR-13240.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  compile  javac  unit  ratsources  checkforbiddenapis  validatesourcepatterns  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux lucene1-us-west 4.4.0-137-generic #163~14.04.1-Ubuntu SMP Mon Sep 24 17:14:57 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-SOLR-Build/sourcedir/dev-tools/test-patch/lucene-solr-yetus-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / c97551c &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; version: Apache Ant(TM) version 1.9.3 compiled on July 24 2018 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LTS &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; unit &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/492/artifact/out/patch-unit-solr_solrj.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/492/artifact/out/patch-unit-solr_solrj.txt&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Test Results &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/492/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/492/testReport/&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: solr/solrj U: solr/solrj &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/492/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/492/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.7.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16886282" author="timowen" created="Tue, 16 Jul 2019 16:36:42 +0000"  >&lt;p&gt;Yes it looks like the code fix has shown up other (autoscaling) tests that now fail, perhaps as you suggest they were relying on the previous sorting order.&lt;/p&gt;</comment>
                            <comment id="16887998" author="cpoerschke" created="Thu, 18 Jul 2019 13:49:16 +0000"  >&lt;p&gt;So looking at the &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.1.1/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/TestPolicy.java#L2015-L2031&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;TestPolicy.testReplicaCountSuggestions&lt;/a&gt; method, it does a &lt;tt&gt;loadFromResource&lt;/tt&gt; on &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.1.1/solr/solrj/src/test-files/solrj/solr/autoscaling/testReplicaCountSuggestions.json&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testReplicaCountSuggestions.json&lt;/a&gt; and my interpretation/explanation of the expected test result would be something like &quot;one of the two cores on 10.0.0.6:8983_solr should move to 10.0.0.6:7574_solr and (everything else being equal) core_node1 is chosen ahead of core_node2 based on its name&quot;.&lt;/p&gt;

&lt;p&gt;It might be nice to find and add similar narrative&#160;for the &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.1.1/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/TestPolicy.java#L952-L1083&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;TestPolicy.testNodeLostMultipleReplica&lt;/a&gt;&#160;method too, though its logic is more intricate.&lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;</comment>
                            <comment id="16900929" author="goodman" created="Tue, 6 Aug 2019 11:47:43 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt;, Sorry for the delay in the reply, As for &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.1.1/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/TestPolicy.java#L2015-L2031&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;TestPolicy.testReplicaCountSuggestions&lt;/a&gt; Your interpretation seems correct to me also, and so changing the expected result would fix this &lt;em&gt;(without approaching it in a way of, lets just change it to what it&apos;s complaining about to make the test pass)&lt;/em&gt;, because this patch enforces that kind of sorting.&lt;/p&gt;

&lt;p&gt;As for the &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.1.1/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/TestPolicy.java#L952-L1083&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;TestPolicy.testNodeLostMultipleReplica&lt;/a&gt; I&apos;m having a look at this now, and so will update you with my findings.&lt;/p&gt;</comment>
                            <comment id="16901020" author="goodman" created="Tue, 6 Aug 2019 13:05:15 +0000"  >&lt;p&gt;Okay having had a look at this, this is what I understand from it:&lt;/p&gt;

&lt;p&gt;With the &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/7.4.0/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/TestPolicy.java#L90-L130&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;clusterstate&lt;/a&gt; that is being loaded, and the &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/7.4.0/solr/solrj/src/test/org/apache/solr/client/solrj/cloud/autoscaling/TestPolicy.java#L329-L338&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;policies&lt;/a&gt; being loaded. Then there is a violation of there being more than 1 replica for a shard on the same node &lt;em&gt;(in this case, node1)&lt;/em&gt;. This is why the first stage is moving replica and verifying it has moved to &lt;tt&gt;node2&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;What doesn&apos;t make sense to me is why it&apos;s then moving a replica to node3, because this then re-raises a violation of there being more than 1 replica of the same shard on the same node. So I don&apos;t get why it&apos;s doing it again, nor how it passes.... If you spot something that I can&apos;t see then let me know.&lt;/p&gt;

&lt;p&gt;After that the policies change to allow more than 1, but less than 3 replicas of the same shard to be on the same node. This is where the test is failing, because with the new comparator, it will order replicas based on their name, and with the first iteration of moving replicas, it expects replica 3 &lt;em&gt;(&lt;tt&gt;r3&lt;/tt&gt;)&lt;/em&gt; to be moved first, however, it would in fact be replica 1 &lt;em&gt;(&lt;tt&gt;r1&lt;/tt&gt;)&lt;/em&gt;. &lt;/p&gt;

&lt;p&gt;So again it would be just moving the stages around. I&apos;m not sure why doing this changes which node it goes too, that is throwing me off a little bit.&lt;/p&gt;

&lt;p&gt;I&apos;ve attached a patch with updates to these tests, ran the &lt;tt&gt;ant test -Dtestcase=TestPolicy&lt;/tt&gt; and it passed, let me know what you think.&lt;/p&gt;

&lt;p&gt; &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12979415/12979415_SOLR-13240.patch&quot; title=&quot;SOLR-13240.patch attached to SOLR-13240&quot;&gt;SOLR-13240.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;/p&gt;</comment>
                            <comment id="16901125" author="lucenesolrqa" created="Tue, 6 Aug 2019 14:46:23 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;-1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; patch &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt;  0m  5s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;red&quot;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13240&quot; title=&quot;UTILIZENODE action results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13240&quot;&gt;&lt;del&gt;SOLR-13240&lt;/del&gt;&lt;/a&gt; does not apply to master. Rebase required? Wrong Branch? See &lt;a href=&quot;https://wiki.apache.org/solr/HowToContribute#Creating_the_patch_file&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://wiki.apache.org/solr/HowToContribute#Creating_the_patch_file&lt;/a&gt; for help. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13240&quot; title=&quot;UTILIZENODE action results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13240&quot;&gt;&lt;del&gt;SOLR-13240&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12976814/SOLR-13240.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12976814/SOLR-13240.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/522/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/522/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.7.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16902321" author="cpoerschke" created="Wed, 7 Aug 2019 17:20:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;... Sorry for the delay in the reply ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No worries at all, we all contribute here as and when time permits and inevitably that will vary. Thanks for returning to this and continuing!&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;... Your interpretation seems correct to me also ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks for the second opinion.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;... &lt;em&gt;(without approaching it in a way of, lets just change it to what it&apos;s complaining about to make the test pass)&lt;/em&gt; ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Indeed, that&apos;s very important. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;... What doesn&apos;t make sense to me ... If you spot something that I can&apos;t see then let me know. ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;blockquote&gt;&lt;p&gt;... &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13240&quot; title=&quot;UTILIZENODE action results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13240&quot;&gt;&lt;del&gt;SOLR-13240&lt;/del&gt;&lt;/a&gt; does not apply to master. Rebase required? Wrong Branch? See &lt;a href=&quot;https://wiki.apache.org/solr/HowToContribute#Creating_the_patch_file&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://wiki.apache.org/solr/HowToContribute#Creating_the_patch_file&lt;/a&gt; for help. ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It seems that the latest patch is relative to a different branch (7.4?) and thus (in this particular case) Lucene/Solr QA cannot apply it. I&apos;m wondering if the code and/or the tests subsequently changed in a way that would make the equivalent analysis or interpretation (and test adjustments) for the master branch easier?&lt;/p&gt;</comment>
                            <comment id="16905296" author="goodman" created="Mon, 12 Aug 2019 15:08:18 +0000"  >&lt;p&gt;My bad &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt; we use 7.4 in production here, so I just based it off that, however, I&apos;ve re-done this against master, so I&apos;m hoping it should now pass QA? &lt;em&gt;(fingers crossed)&lt;/em&gt; &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12979415/12979415_SOLR-13240.patch&quot; title=&quot;SOLR-13240.patch attached to SOLR-13240&quot;&gt;SOLR-13240.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;/p&gt;</comment>
                            <comment id="16905537" author="lucenesolrqa" created="Mon, 12 Aug 2019 19:51:00 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Prechecks &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; test4tests &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch appears to include 2 new or modified test files. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; master Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 43s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Patch Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 35s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 35s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Release audit (RAT) &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 35s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Check forbidden APIs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 35s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Validate source patterns &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 35s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Other Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  5m 45s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; solrj in the patch passed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 12m 26s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13240&quot; title=&quot;UTILIZENODE action results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13240&quot;&gt;&lt;del&gt;SOLR-13240&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12977372/SOLR-13240.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12977372/SOLR-13240.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  compile  javac  unit  ratsources  checkforbiddenapis  validatesourcepatterns  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux lucene1-us-west 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-SOLR-Build/sourcedir/dev-tools/test-patch/lucene-solr-yetus-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / d468d71c03 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; version: Apache Ant(TM) version 1.10.5 compiled on March 28 2019 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LTS &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Test Results &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/526/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/526/testReport/&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: solr/solrj U: solr/solrj &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/526/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/526/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.7.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16906268" author="jira-bot" created="Tue, 13 Aug 2019 14:36:46 +0000"  >&lt;p&gt;Commit 9e6047331b47a683b340d96fdcd00ca75e33e20c in lucene-solr&apos;s branch refs/heads/master from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=9e60473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=9e60473&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13240&quot; title=&quot;UTILIZENODE action results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13240&quot;&gt;&lt;del&gt;SOLR-13240&lt;/del&gt;&lt;/a&gt;: make operation-not-null checks consistent in TestPolicy.testNodeLostMultipleReplica&lt;br/&gt;
(Richard Goodman via Christine Poerschke)&lt;/p&gt;</comment>
                            <comment id="16906272" author="jira-bot" created="Tue, 13 Aug 2019 14:37:42 +0000"  >&lt;p&gt;Commit 4689fb8642df95eb4afecc62e7b8c97d6a63f051 in lucene-solr&apos;s branch refs/heads/branch_8x from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=4689fb8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=4689fb8&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13240&quot; title=&quot;UTILIZENODE action results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13240&quot;&gt;&lt;del&gt;SOLR-13240&lt;/del&gt;&lt;/a&gt;: make operation-not-null checks consistent in TestPolicy.testNodeLostMultipleReplica&lt;br/&gt;
(Richard Goodman via Christine Poerschke)&lt;/p&gt;</comment>
                            <comment id="16906293" author="cpoerschke" created="Tue, 13 Aug 2019 14:58:36 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=GoodmanR&quot; class=&quot;user-hover&quot; rel=&quot;GoodmanR&quot;&gt;GoodmanR&lt;/a&gt; revising the patch, this time it passed QA (yay!) and I&apos;ve gone ahead and pulled out two small separate bits from it into the commit above (to potentially make for an easier diff on the remaining changes).&lt;/p&gt;

&lt;p&gt;So as a next step then I was trying to better understand the &lt;tt&gt;TestPolicy&lt;/tt&gt; changes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;for TestPolicy.testReplicaCountSuggestions just a comment seems sufficient&lt;/li&gt;
	&lt;li&gt;for TestPolicy.testNodeLostMultipleReplica it was a bit tricky to understand first of all what the existing test actually does; with that in mind the just-attached patch includes&#160;two small refactors to surface the sequential nature of part of the test &#8211; would appreciate any thoughts on that.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;With the small refactor in place we can more easily see that two sub-tests are being changed:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&quot;lets change the policy such that all replicas that were on node1 can now fit on node2&quot;&lt;/li&gt;
	&lt;li&gt;&quot;now lets change the policy such that a node can have 2 shard2 replicas&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Now to the tricky bit. My interpretion of the revised test expectations is that now then the &quot;a node can have 2 shardX replicas&quot; condition is no longer being met i.e. previously r3 and r5 were expected to be on node2 but now r3 and r5 are expected on different nodes. So whilst technically speaking the test passes, the coverage it intended to provide has been lost and so further adjustments to that sub-test might be needed to preserve the intended coverage. What do you think?&lt;/p&gt;</comment>
                            <comment id="16906529" author="lucenesolrqa" created="Tue, 13 Aug 2019 18:59:34 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Prechecks &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; test4tests &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch appears to include 2 new or modified test files. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; master Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  2m  7s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Patch Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 52s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 52s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Release audit (RAT) &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 52s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Check forbidden APIs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 52s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Validate source patterns &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 52s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Other Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  9m 23s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; solrj in the patch passed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 17m 57s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13240&quot; title=&quot;UTILIZENODE action results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13240&quot;&gt;&lt;del&gt;SOLR-13240&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12977498/SOLR-13240.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12977498/SOLR-13240.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  compile  javac  unit  ratsources  checkforbiddenapis  validatesourcepatterns  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux lucene2-us-west.apache.org 4.4.0-112-generic #135-Ubuntu SMP Fri Jan 19 11:48:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-SOLR-Build/sourcedir/dev-tools/test-patch/lucene-solr-yetus-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 9e60473 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; version: Apache Ant(TM) version 1.9.6 compiled on July 20 2018 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LTS &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Test Results &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/527/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/527/testReport/&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: solr/solrj U: solr/solrj &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/527/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/527/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.7.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16921447" author="cpoerschke" created="Tue, 3 Sep 2019 14:01:15 +0000"  >&lt;blockquote&gt;&lt;p&gt;...&#160;&#160;two small refactors to surface the sequential nature of part of the test ...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Just opened&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13736&quot; title=&quot;Reduce code duplication in TestPolicy.testNodeLostMultipleReplica&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13736&quot;&gt;&lt;del&gt;SOLR-13736&lt;/del&gt;&lt;/a&gt; to split that out into a separate commit, hopefully making it easier to see here then what the changes to the &apos;expected values&apos; in the test are.&lt;/p&gt;</comment>
                            <comment id="16922627" author="cpoerschke" created="Wed, 4 Sep 2019 16:01:42 +0000"  >&lt;p&gt;Attached patch rebases against the latest master which includes the above mentioned &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13736&quot; title=&quot;Reduce code duplication in TestPolicy.testNodeLostMultipleReplica&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13736&quot;&gt;&lt;del&gt;SOLR-13736&lt;/del&gt;&lt;/a&gt; TestPolicy.testNodeLostMultipleReplica refactor.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;... My interpretion of the revised test expectations is that now then the &quot;a node can have 2 shardX replicas&quot; condition is no longer being met ... further adjustments to that sub-test might be needed to preserve the intended coverage. ...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The now reduced patch complexity makes it easier to reason about how the test&apos;s &quot;expected values&quot; did and did not change:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;node1 is the lost node and thus r1, r3 and r5 need to be moved off it and that continues to happen, only the order of the moves has changed.&lt;/li&gt;
	&lt;li&gt;Previously the three moves were to node2 (two moves) and node3 (one move) and now the moves are to node2 (one move) and node3 (two moves).&lt;/li&gt;
	&lt;li&gt;In the list of replicas being moved we have for shard2 the r3 and r5 replicas:
	&lt;ul&gt;
		&lt;li&gt;Initially it seems them now moving to node3 and node2 respectively means that the &quot;a node can have 2 shard2 replicas&quot; intention of the test is no longer being met.&lt;/li&gt;
		&lt;li&gt;However looking closer at &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/releases/lucene-solr/8.2.0/solr/solrj/src/test-files/solrj/solr/autoscaling/testPolicy.json&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;testPolicy.json&lt;/a&gt; (and the test&apos;s previous moves off node1) it becomes clear that r6 lives on node3 and thus r3 joining r6 on node3 would still result in two shard2 replicas on the same (node3) node i.e. the &quot;a node can have 2 shard2 replicas&quot; intention of the test continues to be met.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Assuming &apos;green&apos; feedback from Lucene/Solr QA and if there are no further comments or concern here then I&apos;ll aim to commit this ticket sometime tomorrow afternoon (Thursday) or Friday.&lt;/p&gt;</comment>
                            <comment id="16922828" author="lucenesolrqa" created="Wed, 4 Sep 2019 20:13:04 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Prechecks &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; test4tests &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch appears to include 2 new or modified test files. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; master Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 15s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Patch Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 50s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 50s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Release audit (RAT) &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 50s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Check forbidden APIs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 50s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Validate source patterns &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m 50s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Other Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  7m 49s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; solrj in the patch passed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 15m 31s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13240&quot; title=&quot;UTILIZENODE action results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13240&quot;&gt;&lt;del&gt;SOLR-13240&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12979415/SOLR-13240.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12979415/SOLR-13240.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  compile  javac  unit  ratsources  checkforbiddenapis  validatesourcepatterns  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux lucene2-us-west.apache.org 4.4.0-112-generic #135-Ubuntu SMP Fri Jan 19 11:48:36 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-SOLR-Build/sourcedir/dev-tools/test-patch/lucene-solr-yetus-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 5204d0f &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; version: Apache Ant(TM) version 1.9.6 compiled on July 20 2018 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LTS &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Test Results &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/548/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/548/testReport/&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: solr/solrj U: solr/solrj &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/548/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/548/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.7.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="16923201" author="goodman" created="Thu, 5 Sep 2019 08:38:58 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt;, sorry again for the delay, I started looking at this but got side-tracked. Ahh good idea to split them, makes it easier to track the new comparator and it being used in these test cases &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                            <comment id="16924179" author="jira-bot" created="Fri, 6 Sep 2019 11:54:05 +0000"  >&lt;p&gt;Commit 6574ae63d43f1a5a60c126a6d766d242883bf806 in lucene-solr&apos;s branch refs/heads/master from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=6574ae6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=6574ae6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13240&quot; title=&quot;UTILIZENODE action results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13240&quot;&gt;&lt;del&gt;SOLR-13240&lt;/del&gt;&lt;/a&gt;: Fixed UTILIZENODE action resulting in IllegalArgumentException.&lt;br/&gt;
(Hendrik Haddorp, Richard Goodman, Tim Owen, shalin, noble, Christine Poerschke)&lt;/p&gt;</comment>
                            <comment id="16924180" author="jira-bot" created="Fri, 6 Sep 2019 11:55:34 +0000"  >&lt;p&gt;Commit 6b5759efaf2e96042e247fa86b34bd9d8297abb8 in lucene-solr&apos;s branch refs/heads/branch_8x from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=6b5759e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=6b5759e&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13240&quot; title=&quot;UTILIZENODE action results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13240&quot;&gt;&lt;del&gt;SOLR-13240&lt;/del&gt;&lt;/a&gt;: Fixed UTILIZENODE action resulting in IllegalArgumentException.&lt;br/&gt;
(Hendrik Haddorp, Richard Goodman, Tim Owen, shalin, noble, Christine Poerschke)&lt;/p&gt;</comment>
                            <comment id="16924192" author="cpoerschke" created="Fri, 6 Sep 2019 12:13:16 +0000"  >&lt;p&gt;Thanks everyone!&lt;/p&gt;</comment>
                            <comment id="16925076" author="jira-bot" created="Sun, 8 Sep 2019 04:49:36 +0000"  >&lt;p&gt;Commit 6574ae63d43f1a5a60c126a6d766d242883bf806 in lucene-solr&apos;s branch refs/heads/jira/&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13677&quot; title=&quot;All Metrics Gauges should be unregistered by components that registered them&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13677&quot;&gt;&lt;del&gt;SOLR-13677&lt;/del&gt;&lt;/a&gt;_3 from Christine Poerschke&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=6574ae6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=6574ae6&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13240&quot; title=&quot;UTILIZENODE action results in an exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13240&quot;&gt;&lt;del&gt;SOLR-13240&lt;/del&gt;&lt;/a&gt;: Fixed UTILIZENODE action resulting in IllegalArgumentException.&lt;br/&gt;
(Hendrik Haddorp, Richard Goodman, Tim Owen, shalin, noble, Christine Poerschke)&lt;/p&gt;</comment>
                            <comment id="16925451" author="timowen" created="Mon, 9 Sep 2019 08:14:47 +0000"  >&lt;p&gt;Great! Thanks for all your work on this Christine&lt;/p&gt;</comment>
                            <comment id="17017751" author="rlei" created="Fri, 17 Jan 2020 06:55:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks for fixing this issue, we hit similar issue on Solr 7.4.0, do we have the plan to apply this fix to Solr 7.x? Thanks.&lt;/p&gt;</comment>
                            <comment id="17020470" author="cpoerschke" created="Tue, 21 Jan 2020 18:26:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;... we hit similar issue on Solr 7.4.0, do we have the plan to apply this fix to Solr 7.x ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This fix is included in 8.3 onwards but inclusion in any 7.7.x release is probably unlikely. &lt;a href=&quot;https://lucene.apache.org/solr/downloads.html#about-versions-and-support&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lucene.apache.org/solr/downloads.html#about-versions-and-support&lt;/a&gt; has more information on version series. You locally building a 7.4.0 from source and adding the fix might be an option.&lt;/p&gt;</comment>
                            <comment id="17029554" author="rlei" created="Tue, 4 Feb 2020 04:10:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cpoerschke&quot; class=&quot;user-hover&quot; rel=&quot;cpoerschke&quot;&gt;cpoerschke&lt;/a&gt;&#160;Thanks for the information.&lt;/p&gt;

&lt;p&gt;I feel this issue is very easy to trigger in the production environment, it makes UTILIZENODE action not usable in Solr 7.x.x versions. Do you think this feature should be removed or marked as beta in Solr 7.x if we do not plan to fix it?&lt;/p&gt;</comment>
                            <comment id="17039154" author="cpoerschke" created="Tue, 18 Feb 2020 15:05:49 +0000"  >&lt;blockquote&gt;&lt;p&gt;... very easy to trigger in the production environment, it makes UTILIZENODE action not usable in Solr 7.x.x versions. Do you think this feature should be removed or marked as beta in Solr 7.x ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Understood. Unfortunately I&apos;m not aware of any mechanisms to remove a feature from an existing release or to mark it as beta. On this ticket here extending the &quot;Affected versions&quot; tagging beyond the current 7.6 should be easily possible though, let me go and do that.&lt;/p&gt;</comment>
                            <comment id="17535150" author="janhoy" created="Thu, 12 May 2022 00:25:58 +0000"  >&lt;p&gt;Closing after the 9.0.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12979415" name="SOLR-13240.patch" size="7603" author="cpoerschke" created="Wed, 4 Sep 2019 16:00:09 +0000"/>
                            <attachment id="12977498" name="SOLR-13240.patch" size="10788" author="cpoerschke" created="Tue, 13 Aug 2019 14:54:15 +0000"/>
                            <attachment id="12977372" name="SOLR-13240.patch" size="9089" author="GoodmanR" created="Mon, 12 Aug 2019 15:08:05 +0000"/>
                            <attachment id="12976814" name="SOLR-13240.patch" size="9180" author="GoodmanR" created="Tue, 6 Aug 2019 13:05:35 +0000"/>
                            <attachment id="12974692" name="SOLR-13240.patch" size="5466" author="GoodmanR" created="Mon, 15 Jul 2019 08:52:15 +0000"/>
                            <attachment id="12974177" name="SOLR-13240.patch" size="5462" author="cpoerschke" created="Wed, 10 Jul 2019 11:35:28 +0000"/>
                            <attachment id="12974043" name="SOLR-13240.patch" size="5562" author="cpoerschke" created="Tue, 9 Jul 2019 11:10:32 +0000"/>
                            <attachment id="12963112" name="SOLR-13240.patch" size="5541" author="GoodmanR" created="Wed, 20 Mar 2019 10:12:19 +0000"/>
                            <attachment id="12967133" name="solr-solrj-7.5.0.jar" size="1871143" author="mmedway" created="Fri, 26 Apr 2019 14:28:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi0txc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>