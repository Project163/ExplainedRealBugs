<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:14:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-9262] Connection and read timeouts are being ignored by UpdateShardHandler</title>
                <link>https://issues.apache.org/jira/browse/SOLR-9262</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4509&quot; title=&quot;Move to non deprecated HttpClient impl classes to remove stale connection check on every request and move connection lifecycle management towards the client.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4509&quot;&gt;&lt;del&gt;SOLR-4509&lt;/del&gt;&lt;/a&gt; removed the usage of distribUpdateSoTimeout and distribUpdateConnTimeout from UpdateShardHandler causing the http client to be created with its default values of connection and read timeout.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;a=blobdiff;f=solr/core/src/java/org/apache/solr/update/UpdateShardHandler.java;h=4fe869c25c9ea0588903d8d366e8d3533835b601;hp=a44b8f87b766d4f998d534156ceb83f4d42eadbb;hb=ce172ac;hpb=3f217aba6d4422d829be5ad77b02068c130dc7d3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;a=blobdiff;f=solr/core/src/java/org/apache/solr/update/UpdateShardHandler.java;h=4fe869c25c9ea0588903d8d366e8d3533835b601;hp=a44b8f87b766d4f998d534156ceb83f4d42eadbb;hb=ce172ac;hpb=3f217aba6d4422d829be5ad77b02068c130dc7d3&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12984953">SOLR-9262</key>
            <summary>Connection and read timeouts are being ignored by UpdateShardHandler</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalin">Shalin Shekhar Mangar</assignee>
                                    <reporter username="shalin">Shalin Shekhar Mangar</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jun 2016 11:08:21 +0000</created>
                <updated>Wed, 2 Oct 2019 17:24:01 +0000</updated>
                            <resolved>Fri, 1 Jul 2016 07:47:12 +0000</resolved>
                                    <version>7.0</version>
                                    <fixVersion>7.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15355040" author="shalinmangar" created="Wed, 29 Jun 2016 11:22:22 +0000"  >&lt;p&gt;Trivial fix&lt;/p&gt;</comment>
                            <comment id="15355444" author="shalinmangar" created="Wed, 29 Jun 2016 15:38:35 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt;, I&apos;ve put back the retry in this patch which was initially added in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6931&quot; title=&quot;We should do a limited retry when using HttpClient.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6931&quot;&gt;&lt;del&gt;SOLR-6931&lt;/del&gt;&lt;/a&gt; and later removed by &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4509&quot; title=&quot;Move to non deprecated HttpClient impl classes to remove stale connection check on every request and move connection lifecycle management towards the client.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4509&quot;&gt;&lt;del&gt;SOLR-4509&lt;/del&gt;&lt;/a&gt;. I am assuming that that was an oversight and the retry is in fact necessary. Can you please take a quick look and confirm?&lt;/p&gt;</comment>
                            <comment id="15357608" author="markrmiller@gmail.com" created="Thu, 30 Jun 2016 18:19:31 +0000"  >&lt;p&gt;Actually, I don&apos;t think we want that anymore.&lt;/p&gt;

&lt;p&gt;Our new retry policy should be universal. I did just look, and it seems it&apos;s not on by default, so i do think we want to fix that.&lt;/p&gt;</comment>
                            <comment id="15358536" author="shalinmangar" created="Fri, 1 Jul 2016 07:13:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;Our new retry policy should be universal. I did just look, and it seems it&apos;s not on by default, so i do think we want to fix that.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I am not sure I follow. If you mean the SolrHttpRequestRetryHandler then it is on by default unless someone disables it. The HttpClientUtil has the following in the setupBuilder method:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (config.getBool(HttpClientUtil.PROP_USE_RETRY, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)) {
      retBuilder = retBuilder.setRetryHandler(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SolrHttpRequestRetryHandler(3));

    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
      retBuilder = retBuilder.setRetryHandler(NO_RETRY);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In any case, I&apos;ll remove the explicit enabling of retry in UpdateShardHandler and commit the patch. Please open an issue if you think there is still a problem.&lt;/p&gt;</comment>
                            <comment id="15358540" author="jira-bot" created="Fri, 1 Jul 2016 07:17:16 +0000"  >&lt;p&gt;Commit 2b4420c4738bb3aed3ae759fd93b6cbbdbc1eefd in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=2b4420c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=2b4420c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9262&quot; title=&quot;Connection and read timeouts are being ignored by UpdateShardHandler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9262&quot;&gt;&lt;del&gt;SOLR-9262&lt;/del&gt;&lt;/a&gt;: Connection and read timeouts are being ignored by UpdateShardHandler after &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4509&quot; title=&quot;Move to non deprecated HttpClient impl classes to remove stale connection check on every request and move connection lifecycle management towards the client.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4509&quot;&gt;&lt;del&gt;SOLR-4509&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15358570" author="jira-bot" created="Fri, 1 Jul 2016 07:29:06 +0000"  >&lt;p&gt;Commit 6674969a8995d694f73e58e706fec8eddcec92e3 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=6674969&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=6674969&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9262&quot; title=&quot;Connection and read timeouts are being ignored by UpdateShardHandler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9262&quot;&gt;&lt;del&gt;SOLR-9262&lt;/del&gt;&lt;/a&gt;: Revert changes&lt;/p&gt;</comment>
                            <comment id="15358580" author="shalinmangar" created="Fri, 1 Jul 2016 07:39:49 +0000"  >&lt;p&gt;HttpClientUtil.createClient has the following which makes it impossible to set the connection and read timeouts. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (params.get(PROP_SO_TIMEOUT) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || params.get(PROP_CONNECTION_TIMEOUT) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SolrException(ErrorCode.SERVER_ERROR, &lt;span class=&quot;code-quote&quot;&gt;&quot;The socket connect and read timeout cannot be set here and must be set&quot;&lt;/span&gt;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This patch gets rid of it.&lt;/p&gt;</comment>
                            <comment id="15358587" author="jira-bot" created="Fri, 1 Jul 2016 07:46:56 +0000"  >&lt;p&gt;Commit 51fde1cbf954b6f67283ad945525e8c6b5197fb9 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=51fde1c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=51fde1c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9262&quot; title=&quot;Connection and read timeouts are being ignored by UpdateShardHandler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9262&quot;&gt;&lt;del&gt;SOLR-9262&lt;/del&gt;&lt;/a&gt;: Connection and read timeouts are being ignored by UpdateShardHandler after &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4509&quot; title=&quot;Move to non deprecated HttpClient impl classes to remove stale connection check on every request and move connection lifecycle management towards the client.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4509&quot;&gt;&lt;del&gt;SOLR-4509&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12634451">SOLR-4509</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12815701" name="SOLR-9262.patch" size="3098" author="shalin" created="Fri, 1 Jul 2016 07:39:49 +0000"/>
                            <attachment id="12814671" name="SOLR-9262.patch" size="1674" author="shalin" created="Wed, 29 Jun 2016 11:22:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 20 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30b53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>