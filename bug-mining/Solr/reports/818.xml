<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:25:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-3195] timeAllowed is ignored for grouping queries</title>
                <link>https://issues.apache.org/jira/browse/SOLR-3195</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;For grouping queries, the &lt;tt&gt;timeAllowed&lt;/tt&gt; parameter is ignored.  I couldn&apos;t find this limitation documented anywhere, and we would like to use that feature in our production system.  I have created a patch that makes grouping queries respect the &lt;tt&gt;timeAllowed&lt;/tt&gt; parameter.  The test cases all pass, and it and it seems to work well.  I added support for both distributed and non-distributed grouping.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12545002">SOLR-3195</key>
            <summary>timeAllowed is ignored for grouping queries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="martijn.v.groningen">Martijn van Groningen</assignee>
                                    <reporter username="rblack">Russell Black</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Fri, 2 Mar 2012 22:48:30 +0000</created>
                <updated>Fri, 10 May 2013 10:40:59 +0000</updated>
                            <resolved>Mon, 5 Mar 2012 10:32:01 +0000</resolved>
                                    <version>3.5</version>
                    <version>4.0-ALPHA</version>
                                    <fixVersion>3.6</fixVersion>
                    <fixVersion>4.0-ALPHA</fixVersion>
                                    <component>search</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13221913" author="martijn.v.groningen" created="Sun, 4 Mar 2012 15:14:49 +0000"  >&lt;p&gt;This was never implemented. Good catch! The patch looks fine. I&apos;ll commit soon.&lt;/p&gt;</comment>
                            <comment id="13221916" author="rblack" created="Sun, 4 Mar 2012 15:27:21 +0000"  >&lt;p&gt;Martijn, &lt;/p&gt;

&lt;p&gt;There is one thing I&apos;d like your opinion on &amp;#8211; for distributed grouping the first phase and second phase are given the full time allotment with my patch, essentially resulting in doubling the effect of the timeAllowed parameter.  Do you think we should try to be smarter about it?  We could subtract the time time of the first query from the timeAllowed parameter that gets handed to the second query, resulting in more accurate overall time.  &lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;</comment>
                            <comment id="13221984" author="martijn.v.groningen" created="Sun, 4 Mar 2012 19:42:33 +0000"  >&lt;p&gt;Russell, that is a good point. I think we just can use the qtime from the first query and subtract that from the specified timeAllowed. The qtime can be retrieved from the ShardResponse with the highest qtime.&lt;/p&gt;</comment>
                            <comment id="13222003" author="rblack" created="Sun, 4 Mar 2012 20:30:22 +0000"  >&lt;p&gt;Martijn, I have a patch with just such an implementation. I&apos;ll upload it in a few minutes. &lt;/p&gt;</comment>
                            <comment id="13222008" author="martijn.v.groningen" created="Sun, 4 Mar 2012 20:49:48 +0000"  >&lt;p&gt;Nice!&lt;/p&gt;</comment>
                            <comment id="13222030" author="rblack" created="Sun, 4 Mar 2012 22:03:33 +0000"  >&lt;p&gt;OK, this patch subtracts time for the second phase.  The one thing I did differently from your suggestion was to use ShardResponse.getSolrResponse().getElapsedTime() instead of QTime, since it is a more accurate measurement of total time spent on the first phase.  If you want to use QTime, feel free to change it.  &lt;/p&gt;</comment>
                            <comment id="13222048" author="rblack" created="Sun, 4 Mar 2012 22:43:45 +0000"  >&lt;p&gt;Also, would it be possible to get my backported patch into 3x?  &lt;/p&gt;</comment>
                            <comment id="13222050" author="rblack" created="Sun, 4 Mar 2012 22:45:57 +0000"  >&lt;p&gt;I just realized that my patches also contain the patch I submitted for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3196&quot; title=&quot;partialResults response header not propagated in distributed search&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3196&quot;&gt;&lt;del&gt;SOLR-3196&lt;/del&gt;&lt;/a&gt; which is actually related to this one.  Sorry of this creates confusion for you.  It&apos;s the changes to QueryComponent.java that fix &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3196&quot; title=&quot;partialResults response header not propagated in distributed search&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3196&quot;&gt;&lt;del&gt;SOLR-3196&lt;/del&gt;&lt;/a&gt;.  Thanks!&lt;/p&gt;</comment>
                            <comment id="13222060" author="martijn.v.groningen" created="Sun, 4 Mar 2012 23:40:09 +0000"  >&lt;p&gt;No problem. I&apos;ll look into this tomorrow. &lt;/p&gt;</comment>
                            <comment id="13222245" author="martijn.v.groningen" created="Mon, 5 Mar 2012 09:59:41 +0000"  >&lt;p&gt;The difference between the elapsed time and qtime is that the first also takes into account the time spend on the trip from and to the shard where the shard request is executed. I think it is fine to include also this time in the time allowed for a query.&lt;/p&gt;</comment>
                            <comment id="13222258" author="martijn.v.groningen" created="Mon, 5 Mar 2012 10:32:02 +0000"  >&lt;p&gt;Committed to trunk and 3x branch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12517032" name="SOLR-3195-timeallowed-for-grouping-3x-backport.patch" size="13419" author="rblack" created="Sun, 4 Mar 2012 22:43:45 +0000"/>
                            <attachment id="12517026" name="SOLR-3195-timeallowed-for-grouping.patch" size="13478" author="rblack" created="Sun, 4 Mar 2012 22:03:32 +0000"/>
                            <attachment id="12516900" name="SOLR-3195-timeallowed-for-grouping.patch" size="8195" author="rblack" created="Fri, 2 Mar 2012 22:51:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>230188</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 38 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03g4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18047</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>