<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:06:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-16981] bin/solr stop -all does not always find running processes</title>
                <link>https://issues.apache.org/jira/browse/SOLR-16981</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Spinoff from &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16979&quot; title=&quot;Randomize ports in BATS tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16979&quot;&gt;&lt;del&gt;SOLR-16979&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The&#160;&lt;tt&gt;solr status&lt;/tt&gt;&#160;command checks SOLR_PID_DIR first, if nothing found it runs a&#160;&lt;tt&gt;ps&lt;/tt&gt; command or something to find more. However, the &lt;tt&gt;solr stop -all&lt;/tt&gt;&#160;script will only consult pid files, and give up if not found.&lt;/p&gt;

&lt;p&gt;Furthermore, the &lt;tt&gt;solr stop -all&lt;/tt&gt; command will only try to stop solr on port 8983 if the &lt;tt&gt;SOLR_PORT&lt;/tt&gt; environment variable is set to 8983. This is a bug.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13550712">SOLR-16981</key>
            <summary>bin/solr stop -all does not always find running processes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="11">Done</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="janhoy">Jan H&#248;ydahl</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Sep 2023 15:47:21 +0000</created>
                <updated>Sun, 15 Oct 2023 20:13:51 +0000</updated>
                            <resolved>Sat, 16 Sep 2023 17:56:52 +0000</resolved>
                                                                    <component>scripts and tools</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="6600">1h 50m</timespent>
                                <comments>
                            <comment id="17765559" author="jira-bot" created="Fri, 15 Sep 2023 11:07:50 +0000"  >&lt;p&gt;Commit 6f4cf56c83f563deb6d03e47223c3a7bbcc31a5c in solr&apos;s branch refs/heads/main from Jan H&#248;ydahl&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=6f4cf56c83f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=6f4cf56c83f&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16981&quot; title=&quot;bin/solr stop -all does not always find running processes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16981&quot;&gt;&lt;del&gt;SOLR-16981&lt;/del&gt;&lt;/a&gt;: bin/solr stop withuot argument should behave the same even if SOLR_PORT is set (#1924)&lt;/p&gt;
</comment>
                            <comment id="17765564" author="janhoy" created="Fri, 15 Sep 2023 11:18:20 +0000"  >&lt;p&gt;So the PR was merged in error. We need to decide whether the &quot;solr stop&quot; command with no args should have different behavior depending on whether SOLR_PORT is set. I think I changed my mind and think the current 9.3 behavior is OK. So perhaps revert?&lt;/p&gt;

&lt;p&gt;That leaves two other issues from the description:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;the&#160;&lt;tt&gt;solr stop -all&lt;/tt&gt;&#160;command will only try to stop solr on port 8983 if the&#160;&lt;tt&gt;SOLR_PORT&lt;/tt&gt; environment variable is set to 8983 --&amp;gt; Will try to reproduce this and confirm&lt;/li&gt;
	&lt;li&gt;However, the&#160;&lt;tt&gt;solr stop -all&lt;/tt&gt; script will only consult pid files --&amp;gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=houston&quot; class=&quot;user-hover&quot; rel=&quot;houston&quot;&gt;houston&lt;/a&gt; suggests it should only consult PS, not PID ? This should probably be a separate JIRA&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17765848" author="janhoy" created="Fri, 15 Sep 2023 20:45:11 +0000"  >&lt;p&gt;So I tested solr stop -all again (with SOLR_PORT set).&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;It works as it should on main, even before the unintended merge.&lt;/li&gt;
	&lt;li&gt;It works in branch_9x as well.&lt;/li&gt;
	&lt;li&gt;It fails in 9.3. So that bug was fixed as a side effect of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16941&quot; title=&quot;Improve Solr Host defaulting in the SolrCLI&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16941&quot;&gt;&lt;del&gt;SOLR-16941&lt;/del&gt;&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So for this JIRA&apos;s sake let&apos;s revert the wrong commit and close as Done.&lt;/p&gt;

&lt;p&gt;Wrt the &apos;solr stop&apos; without options I believe current behavior is correct, but we could document it better. No need for a Jira for that I guess.&lt;/p&gt;</comment>
                            <comment id="17766004" author="jira-bot" created="Sat, 16 Sep 2023 17:56:22 +0000"  >&lt;p&gt;Commit 2d34a78337a32df7fe77de7cfa5af366d2e97803 in solr&apos;s branch refs/heads/main from Eric Pugh&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=2d34a78337a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=2d34a78337a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-16981&quot; title=&quot;bin/solr stop -all does not always find running processes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-16981&quot;&gt;&lt;del&gt;SOLR-16981&lt;/del&gt;&lt;/a&gt;: bin/solr stop withuot argument should behave the same even if SOLR_PORT is set (#1924)&quot; (#1929)&lt;/p&gt;

&lt;p&gt;This reverts commit 6f4cf56c83f563deb6d03e47223c3a7bbcc31a5c.&lt;/p&gt;</comment>
                            <comment id="17766005" author="janhoy" created="Sat, 16 Sep 2023 17:56:52 +0000"  >&lt;p&gt;Closing, as the reported bug (in subject) is already fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 8 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1kd5c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>