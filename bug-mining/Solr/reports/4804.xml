<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:49:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-14569] Configuring a shardHandlerFactory on the /select requestHandler results in HTTP 401 when searching on alias in secured Solr</title>
                <link>https://issues.apache.org/jira/browse/SOLR-14569</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The issue was first noticed on an instance of Solr 8.5.0, after securing Solr with security.json.&lt;/p&gt;

&lt;p&gt;Searching on a single collection returns the expected results, but searching on an alias returns HTTP 401.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Note that this issue is not reproduced when the collections are created using the _default configuration.&lt;/b&gt;&lt;br/&gt;
Update: Fast-forward to this comment for the reason why: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14569?focusedCommentId=17136195&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17136195&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SOLR-14569?focusedCommentId=17136195&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17136195&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The attached patch includes a unit test to query on an alias.  &lt;b&gt;Fixed and updated as per &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gerlowskija&quot; class=&quot;user-hover&quot; rel=&quot;gerlowskija&quot;&gt;gerlowskija&lt;/a&gt;&apos; comments&lt;/b&gt;&lt;br/&gt;
 &lt;b&gt;Patch applies on master branch (9x)&lt;/b&gt;.&lt;br/&gt;
The unit test is added to the test class that was originally part of the patch to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13510&quot; title=&quot;Intermittent 401&amp;#39;s for internode requests with basicauth enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13510&quot;&gt;&lt;del&gt;SOLR-13510&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
Update: Unit tests fail if sharHandlerFactory is added to the requestHandler in configset cloud-minimal&lt;/p&gt;

&lt;p&gt;I also attach:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;our product-specific Solr configuration, modified to remove irrelevant plugins and fields&lt;/li&gt;
	&lt;li&gt;security.json with user &apos;admin&apos; (pwd &apos;admin&apos;)
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;Note that forwardCredentials true or false does not modify the behavior&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;To test with attached configuration solr_conf.zip or updated_solr_conf.zip:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Download and unzip Solr 8.5.0&lt;/li&gt;
	&lt;li&gt;Modify ./bin/solr.in.sh :
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;ZK_HOST (optional)&lt;/li&gt;
		&lt;li&gt;SOLR_AUTH_TYPE=&quot;basic&quot;&lt;/li&gt;
		&lt;li&gt;SOLR_AUTHENTICATION_OPTS=&quot;-Dbasicauth=admin:admin&quot;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Upload security.json into Zookeeper
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;./bin/solr zk cp &lt;a href=&quot;file:///path/to/security.json&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/path/to/security.json&lt;/a&gt; zk:/path/to/solr/security.json [-z &amp;lt;zk_host&amp;gt;:&amp;lt;zk_port&amp;gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;/&amp;lt;solr&amp;gt;&amp;#93;&lt;/span&gt;]&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Start Solr in cloud mode
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;./bin/solr -c&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Upload the provided configuration&lt;/li&gt;
	&lt;li&gt;./bin/solr zk upconfig -z &amp;lt;zk_host&amp;gt;:&amp;lt;zk_port&amp;gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;/&amp;lt;solr&amp;gt;&amp;#93;&lt;/span&gt; -n conf_en -d /path/to/folder/conf/&lt;/li&gt;
	&lt;li&gt;Create 2 collections using the uploaded configuration
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;test1, test2&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Create an alias grouping the 2 collections
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;test = test1, test2&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Query (/select?q=&lt;b&gt;:&lt;/b&gt;) one collection
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;results in successful Solr response&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Query the alias (/select?q=&lt;b&gt;:&lt;/b&gt;)
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;results in HTTP 401&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;There is no need to add documents to observe the issue.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Unit test on master branch (9x) built on Windows 10 with Java 11&lt;br/&gt;
Solr 8.5.0 instance running on CentOS 7.7 with Java 11&lt;/p&gt;</environment>
        <key id="13311363">SOLR-14569</key>
            <summary>Configuring a shardHandlerFactory on the /select requestHandler results in HTTP 401 when searching on alias in secured Solr</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller">Mark Robert Miller</assignee>
                                    <reporter username="igiguere">Isabelle Giguere</reporter>
                        <labels>
                    </labels>
                <created>Sun, 14 Jun 2020 21:00:43 +0000</created>
                <updated>Sat, 21 May 2022 15:04:27 +0000</updated>
                            <resolved>Tue, 8 Feb 2022 20:54:22 +0000</resolved>
                                    <version>8.5</version>
                                    <fixVersion>9.0</fixVersion>
                    <fixVersion>8.11.2</fixVersion>
                                    <component>Authentication</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>10</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17135915" author="gerlowskija" created="Mon, 15 Jun 2020 14:23:57 +0000"  >&lt;p&gt;Hi Isabelle, thanks for reporting, sorry you&apos;re running into this.&lt;/p&gt;

&lt;p&gt;The first thing I noticed is that the uploaded security.json file isn&apos;t valid JSON. (There&apos;s a comma missing after the &quot;credentials&quot; property).  Maybe this is a just a typo in the file you uploaded, but it&apos;s possible it&apos;s contributing to your issue in some way.  If you get a chance, try out your reproduction in a corrected security.json file.&lt;/p&gt;

&lt;p&gt;&lt;del&gt;It might also help us if you bumped up the log-level for some security classes and included the relevant log snippets here.  Specifically the class &quot;org.apache.solr.security.RuleBasedAuthorizationPluginBase&quot; or the &quot;org.apache.solr.security&quot; package more generally.  You can do this by editing log4j2.xml in your Solr install, or on the &quot;Logging&quot; panel in the Solr Admin UI.&lt;/del&gt;&lt;br/&gt;
EDIT: On second review, since the status code is a 401, this is likely caused by BasicAuth and not RuleBased-Authz.  So the debug logging I was asking for prob won&apos;t be useful here.&lt;/p&gt;


&lt;p&gt;In the meantime I&apos;ll try to reproduce locally on my own.  &lt;/p&gt;</comment>
                            <comment id="17135974" author="gerlowskija" created="Mon, 15 Jun 2020 16:01:38 +0000"  >&lt;p&gt;A quick attempt at reproducing didn&apos;t work for me.  I took a few shortcuts - used an embedded ZK, turned on auth with &quot;bin/solr auth enable&quot;, used my own solrconfig, etc, so maybe that&apos;s the problem.  Trying a more faithful reproduction now.&lt;/p&gt;

&lt;p&gt;That said, I also tried out your attached unit test.  It does fail with a 401, but I think there&apos;s a bug in the test.  As written, your test case calls &lt;tt&gt;.setBasicAuthCredentials(&quot;reader&quot;, &quot;reader&quot;)&lt;/tt&gt; on the query it makes, but the way the security.json is set up, the correct password is &quot;solr&quot; for both the &quot;reader&quot; and the &quot;solr&quot; users.  When I corrected that call to setBasicAuthCredentials, the test started passing for me.&lt;/p&gt;

&lt;p&gt;Including the updated snippet here:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  @Test
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void aliasTest() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (Http2SolrClient client = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Http2SolrClient.Builder(cluster.getJettySolrRunner(0).getBaseUrl().toString())
        .build()){

      &lt;span class=&quot;code-comment&quot;&gt;// Query fails &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; alias
&lt;/span&gt;      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; 30; i++) {
        SolrRequest request = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; QueryRequest(params(&lt;span class=&quot;code-quote&quot;&gt;&quot;q&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;*:*&quot;&lt;/span&gt;)).setBasicAuthCredentials(&lt;span class=&quot;code-quote&quot;&gt;&quot;reader&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;solr&quot;&lt;/span&gt;);
        SolrResponse response = request.process(client, ALIAS);
        assertNotNull(response);
        assertNotNull(response.getResponse());
        assertNotNull(response.getResponse().get(&lt;span class=&quot;code-quote&quot;&gt;&quot;response&quot;&lt;/span&gt;));
      }
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17136056" author="igiguere" created="Mon, 15 Jun 2020 17:32:07 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gerlowskija&quot; class=&quot;user-hover&quot; rel=&quot;gerlowskija&quot;&gt;gerlowskija&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Good catches.&#160; Sorry.&#160; Trying to work fast... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I did encounter the issue, at first, with a valid security.json.&#160; The one I uploaded does have a typo in it.&#160; Correcting it (new upload).&#160; And I just tested again, to be sure, with valid security.json, and attached config.&#160; Result is still HTTP 401 for me (on CentOS 7.7, if that matters)&lt;/p&gt;

&lt;p&gt;I just ran the unit test again, with the right password.&#160; It passed ! It means there&apos;s something wrong with the configuration.&lt;/p&gt;

&lt;p&gt;But how can solrconfig.xml or schema.xml have an impact on authentication, or alias queries in general ?&#160; That doesn&apos;t make sense.&#160; There&apos;s no documented incompatibility that I&apos;m aware of.&lt;/p&gt;</comment>
                            <comment id="17136158" author="igiguere" created="Mon, 15 Jun 2020 21:26:05 +0000"  >&lt;p&gt;Attached:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;updated_solr_conf.zip : &quot;Same&quot; as solr_conf.zip, but with the deprecated Trie*Fields and Filters replaced by current equivalents.&lt;/li&gt;
	&lt;li&gt;curl_requests-responses.txt : copy of activity on console for the 2 requests shown in solr.log&lt;/li&gt;
	&lt;li&gt;&#160;solr.log : shows 2 requests to Solr where&#160; updated_solr_conf.zip was uploaded, and security and collections were setup as is the description&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;A few lines to help reading solr.log :&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;line 1243:
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;Start GET request on one collection&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;line 1323:
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;Response : 200&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;line 1391:
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;Start GET request on alias&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;line 1746:
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;POST request to core test1_shard1_replica_n1&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;line 1803:
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;POST request to core test2_shard1_replica_n1&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;line 2974:
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;Response : 401&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;line 3311:
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;Solr response with HTTP 401&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Extra note: upgrading Lucene Match version to 8.5.0 still fails for the alias.&lt;/p&gt;</comment>
                            <comment id="17136195" author="igiguere" created="Mon, 15 Jun 2020 23:11:46 +0000"  >&lt;p&gt;It took a lot of trial and error, but... I figured it out.&lt;/p&gt;

&lt;p&gt;There&apos;s a shardHandlerFactory defined in some of the requestHandler in solrconfig.xml.  There&apos;s also the global shardHandlerFactory defined in solr.xml&lt;/p&gt;

&lt;p&gt;Defining a specific shardHandlerFactory in the /select requestHandler somehow prevents the SolrAuth from being transferred to shard requests.&lt;/p&gt;

&lt;p&gt;Ref: solrconfig.xml in the attached configuration(s)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &amp;lt;requestHandler name=&lt;span class=&quot;code-quote&quot;&gt;&quot;/select&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;solr.SearchHandler&quot;&lt;/span&gt;&amp;gt;
       &amp;lt;shardHandlerFactory class=&lt;span class=&quot;code-quote&quot;&gt;&quot;HttpShardHandlerFactory&quot;&lt;/span&gt;&amp;gt;
            &amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;socketTimeOut&quot;&lt;/span&gt;&amp;gt;50000&amp;lt;/&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;
            &amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;connTimeOut&quot;&lt;/span&gt;&amp;gt;50000&amp;lt;/&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;
            &amp;lt;&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;corePoolSize&quot;&lt;/span&gt;&amp;gt;5&amp;lt;/&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&amp;gt;
        &amp;lt;/shardHandlerFactory&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If the shardHandlerFactory in the /select requestHandler is removed, the query on an alias magically works.  Authentication info is sent to shards.&lt;/p&gt;

&lt;p&gt;What kills me is why...&lt;br/&gt;
I went through CHANGES.txt to find hints about why overriding the global shardHandlerFactory would cause any sort of failures.  The only thing I could find was the mention that since Solr 8.0.0, &quot;HttpShardHandlerFactory&apos;s defaultClient is now a Http2SolrClient&quot;.  The parameters &apos;maxConnections&apos;, &apos;maxConnectionsPerHost&apos;, which are not supported anymore, and thus could have been a good reason for a failure, are found neither in solr.xml, nor in solrconfig.xml.&lt;/p&gt;

&lt;p&gt;A quick look at ShardHandlerFactory, HttpShardHandlerFactory, HttpShardHandler, RequestHandlerBase, SearchHandler does not provide any obvious explanation either.&lt;/p&gt;

&lt;p&gt;Actually, documentation clearly states that a shardHandlerFactory can be set for a requestHandler: &lt;a href=&quot;https://lucene.apache.org/solr/guide/8_5/distributed-requests.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lucene.apache.org/solr/guide/8_5/distributed-requests.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So I&apos;m changing the title of this ticket.  There is something odd here.  But at least there&apos;s a workaround : do not configure a specific shardHandlerFactory on a requestHandler (especially not the /select search handler)&lt;/p&gt;</comment>
                            <comment id="17150553" author="igiguere" created="Thu, 2 Jul 2020 20:04:33 +0000"  >&lt;p&gt;Attached a patch with a fix.&lt;br/&gt;
This patch fixes the SearchHandler only, I have not looked at other request handlers, and it may not be the most elegant fix.&lt;/p&gt;

&lt;p&gt;Analysis: &lt;br/&gt;
When a shard handler factory is configured directly on a request handler (a search handler), in solconfig.xml, method SearchHandler.inform(SolrCore) creates a new instance of ShardHandlerFactory.  But in this case, the security builder of the shard handler factory remains null.&lt;/p&gt;

&lt;p&gt;Fix:&lt;br/&gt;
Add a boolean marker in ShardHandlerFactory, to indicate if security was initialized, and method to get the marker.&lt;br/&gt;
In SearchHandler.inform(SolrCore), after the new instance of ShardHandlerFactory is created, verify if security was enabled.  In this patch, call the CoreContainer method getAuthenticationPlugin() and check that it&apos;s not null.  We may want to use another marker somewhere, if it can be cleaner.&lt;br/&gt;
Also verify if security was enabled in the new shard handler factory, using the new marker in ShardHandlerFactory.&lt;br/&gt;
If security is enabled but the new shard handler factory is not initialized for it, then set the security builder, by providing the core container&apos;s PKI authentication plugin, following what is done in CoreContainer.setupHttpClientForAuthPlugin(...)&lt;/p&gt;

&lt;p&gt;Adding unit test class TestAuthWithShardHandlerFactoryOverride, and configset.&lt;/p&gt;

&lt;p&gt;Note that if you comment-out the lines that set the security builder in SearchHandler.inform(SolrCore), and try to run these unit tests, they fail with:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.eclipse.jetty.client.HttpResponseException: HTTP protocol violation: Authentication challenge without WWW-Authenticate header
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So it&apos;s not exactly the same error as seen from a query run in Solr Admin UI or a REST client.  But it at least shows there&apos;s something wrong with authentication.  I suppose the HTTP protocol violation error is translated into HTTP 401 in a part of code that the unit test doesn&apos;t reach.&lt;/p&gt;


&lt;p&gt;Is there some other way to ensure that the search handler&apos;s specific shard handler factory is made aware of security settings ?&lt;/p&gt;</comment>
                            <comment id="17150613" author="lucenesolrqa" created="Thu, 2 Jul 2020 22:27:41 +0000"  >&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;b&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;&lt;/b&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Vote &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Runtime &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Comment &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Prechecks &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; test4tests &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; The patch appears to include 1 new or modified test files. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; master Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  0m 58s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; master passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Patch Compile Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; compile &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; javac &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Release audit (RAT) &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Check forbidden APIs &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; Validate source patterns &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;  1m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; the patch passed &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&amp;nbsp;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; &lt;font color=&quot;brown&quot;&gt; Other Tests &lt;/font&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; unit &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; 43m 14s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;green&quot;&gt; core in the patch passed. &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt;&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; 47m  0s&lt;/font&gt; &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;font color=&quot;black&quot;&gt; &lt;/font&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br class=&quot;atl-forced-newline&quot; /&gt;
&lt;br class=&quot;atl-forced-newline&quot; /&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Subsystem &lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; Report/Notes &lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Issue &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14569&quot; title=&quot;Configuring a shardHandlerFactory on the /select requestHandler results in HTTP 401 when searching on alias in secured Solr&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14569&quot;&gt;&lt;del&gt;SOLR-14569&lt;/del&gt;&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JIRA Patch URL &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13006971/SOLR-14569.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/13006971/SOLR-14569.patch&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Optional Tests &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  compile  javac  unit  ratsources  checkforbiddenapis  validatesourcepatterns  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; uname &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Linux lucene1-us-west 4.15.0-108-generic #109-Ubuntu SMP Fri Jun 19 11:33:10 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Build tool &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Personality &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; /home/jenkins/jenkins-slave/workspace/PreCommit-SOLR-Build/sourcedir/dev-tools/test-patch/lucene-solr-yetus-personality.sh &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; git revision &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; master / 2005c43667b &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; ant &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; version: Apache Ant(TM) version 1.10.5 compiled on March 28 2019 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default Java &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LTS &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  Test Results &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/774/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/774/testReport/&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; modules &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; C: solr/core U: solr/core &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Console output &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;a href=&quot;https://builds.apache.org/job/PreCommit-SOLR-Build/774/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-SOLR-Build/774/console&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Powered by &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Apache Yetus 0.7.0   &lt;a href=&quot;http://yetus.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://yetus.apache.org&lt;/a&gt; &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;This message was automatically generated.&lt;/p&gt;
</comment>
                            <comment id="17228310" author="hronom" created="Mon, 9 Nov 2020 01:34:27 +0000"  >&lt;p&gt;Please someone review/fix this ASAP pretty blocking thing!&lt;/p&gt;

&lt;p&gt;Here &lt;a href=&quot;https://github.com/Hronom/solr-cloud-basic-auth&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Hronom/solr-cloud-basic-auth&lt;/a&gt; I created additional example that reproduces the issue.&lt;/p&gt;

&lt;p&gt;Also &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;blockUnknown&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;not respected if &lt;b&gt;authorization&lt;/b&gt; plugin is set and throw 401. Is there any possibility to have anonymous user?&lt;/p&gt;</comment>
                            <comment id="17460692" author="markrmiller" created="Thu, 16 Dec 2021 13:03:15 +0000"  >&lt;p&gt;So I have run into this before and addressed it. I was looking at it now from another jira issue - the one that user tested that basic auth has not worked since back in a 7 release if not in SolrCloud mode.&lt;/p&gt;

&lt;p&gt;Anyway, I hit this issue in my own branch because some butterflies getting stepped on made it into a much larger problem that started failing all tests with internode request using security.&lt;/p&gt;

&lt;p&gt;I&#8217;ve been been trying to fully refresh my knowledge and that jira since yesterday morning, but the universe has been attacking me, or maybe the time authority or some thing.&lt;/p&gt;

&lt;p&gt;(I had an electrician over to install outlets and an energy monitoring smart thing in the breaker box. Unknown to me, my wife has the pool company replacing a pump they installed and had failed at the same time. Unknown to me and beyond reasonable coincidence, the citi was in my backyard almost all day with like teams  of people, enough  workers walking back and forth by my office window and in and out of my yard that you can&#8217;t ignore conspiracy theories around their simple claim that they own a major electric wire running through my property.  Meanwhile their trunks lined the street like SHIELD had showed up. &lt;/p&gt;

&lt;p&gt;When that settled down and I started a very late work day, and immediately my wife convinced me that in fact I had been torturing her with ridiculous sound attacks for the past year and a half while wholly denying it was remotely possible &#8212; by demanding I stop humming quietly under my breath while she was in the other side of the house through multiple rooms and two closed doors. Remote decibel inspection broke my mind, and I went to work to figure out a solution.   A 3 decimal rise in sound is like doubling it. I won&#8217;t even say the dec differences I was regularly firing.  Meanwhile, hell continued to rain. Later, among a few fun times, I walked directly pinto an open, full dishwasher door in the dark. My computer went wild on basic stuff I&#8217;ve done every day for months.Amazon and smart IoT things went unreliable. My 5g connection on my phone barely functioned when I left the house with full bars.  I reached that level of what the hell is going on that you end up more in a state of cold awe than swear infused anger. Everything I&#8217;ve tried to make make happen since yesterday morning has gone into insanity. &lt;/p&gt;

&lt;p&gt;Just background I can&#8217;t keep internal.&lt;/p&gt;

&lt;p&gt;But anyway, in my complete failed agenda has been to discuss the solution I had put in the branch for this stuff with Anshum. I was at the tail end of trying to finish some verification and refresh if anything entangling had popped and require further changes that I didn&#8217;t recall.&lt;/p&gt;

&lt;p&gt;The long short of that solution is to handle this like the original http &lt;br/&gt;
@client did vs what seemed a strange choice to chart this alternate handling that the http2 client does. &lt;/p&gt;</comment>
                            <comment id="17462504" author="markrmiller" created="Mon, 20 Dec 2021 10:28:40 +0000"  >&lt;p&gt;Ah, my bad, this actually different than a couple basic auth related issues I was looking at. Did not know there was a search handler shardHandleFactory override.&lt;/p&gt;

&lt;p&gt;I think you may want to tie this into the CoreContainer logic that deals with the CoreContainer shardHandlerFactory - with either the CoreContainer looking at each core&apos;s handlers for anything that is an instance of SearchHandler and then getting it&apos;s shardHandlerFactory impl and if it&apos;s not the same as the CoreContainer one, you know you have a handler instance. Else, have the handler register the instance with the CoreContainer when it creates it and remove it with the close hook. Then you can tie into other support you want, eg, update when security.json is modified (does not require a core reload).&lt;/p&gt;

&lt;p&gt;That would put all the specific security setup logic in CoreContainer&apos;s &lt;font color=&quot;#00627a&quot;&gt;setupHttpClientForAuthPlugin.&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#00627a&quot;&gt;Then you could also maybe make SearchHandler setup in inform less specific to basic auth and requiring knowledge of the logic that goes into security setup in CoreContainer by having it simply use the security builder from the CoreContainer shardHandlerFactory in inform?&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17462545" author="markrmiller" created="Mon, 20 Dec 2021 10:55:46 +0000"  >&lt;p&gt;Bullet pointed:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Should not need securityInitialized - the factory instance is always created right above where that is checked.&lt;/li&gt;
	&lt;li&gt;Shouldn&apos;t need to duplicate specific logic around what security builder is used or what security plugin is used or the logic involved in that - just set the security builder to the corecontainer shardHandlerFactory&apos;s security builder.&lt;/li&gt;
	&lt;li&gt;Need to tie into CoreContainer so that on security json changes, the SearchHandler shardHandlerFactory gets updated to the latest security builder.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17462696" author="markrmiller" created="Mon, 20 Dec 2021 16:13:07 +0000"  >&lt;p&gt;Perhaps instead of having CoreContainer somehow track which ShardHandlerFactory&apos;s to update, the ShardHandlerFactory could always just be set to the latest SecurityBuilder per query if it detects that the SecurityBuilder instance it has is different from the CoreContainers.&lt;/p&gt;</comment>
                            <comment id="17462841" author="markrmiller" created="Mon, 20 Dec 2021 21:18:41 +0000"  >&lt;p&gt;Here is that in rough patch form: &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13037725/SOLR-14569-mrm.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/13037725/SOLR-14569-mrm.patch&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17483804" author="markrmiller" created="Fri, 28 Jan 2022 14:43:52 +0000"  >&lt;p&gt;I&apos;m working on getting this into a clean PR - here is a draft against 9x: &lt;a href=&quot;https://github.com/apache/solr/pull/574&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/pull/574&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17489088" author="jira-bot" created="Tue, 8 Feb 2022 19:48:31 +0000"  >&lt;p&gt;Commit 9aebc1b6e01f3fa4fce9c70c92dbf9b0a7eda98a in solr&apos;s branch refs/heads/branch_9x from Mark Robert Miller&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=9aebc1b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=9aebc1b&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14569&quot; title=&quot;Configuring a shardHandlerFactory on the /select requestHandler results in HTTP 401 when searching on alias in secured Solr&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14569&quot;&gt;&lt;del&gt;SOLR-14569&lt;/del&gt;&lt;/a&gt;: Configuring a shardHandlerFactory on the /select requestHandler results in HTTP 401 when searching on alias in secured Solr. (#574)&lt;/p&gt;
</comment>
                            <comment id="17489089" author="jira-bot" created="Tue, 8 Feb 2022 19:51:51 +0000"  >&lt;p&gt;Commit cd7f5e917597178e2e5b2f3323c231438be0312b in solr&apos;s branch refs/heads/main from Mark Miller&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=cd7f5e9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=cd7f5e9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14569&quot; title=&quot;Configuring a shardHandlerFactory on the /select requestHandler results in HTTP 401 when searching on alias in secured Solr&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14569&quot;&gt;&lt;del&gt;SOLR-14569&lt;/del&gt;&lt;/a&gt;: Configuring a shardHandlerFactory on the /select requestHandler results in HTTP 401 when searching on alias in secured Solr.&lt;/p&gt;
</comment>
                            <comment id="17489092" author="jira-bot" created="Tue, 8 Feb 2022 19:56:35 +0000"  >&lt;p&gt;Commit aab70153d51998ce85bbc9ced18b247a1d8fc40f in solr&apos;s branch refs/heads/branch_9_0 from Mark Robert Miller&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=aab7015&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=aab7015&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14569&quot; title=&quot;Configuring a shardHandlerFactory on the /select requestHandler results in HTTP 401 when searching on alias in secured Solr&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14569&quot;&gt;&lt;del&gt;SOLR-14569&lt;/del&gt;&lt;/a&gt;: Configuring a shardHandlerFactory on the /select requestHandler results in HTTP 401 when searching on alias in secured Solr. (#574)&lt;/p&gt;
</comment>
                            <comment id="17489115" author="jira-bot" created="Tue, 8 Feb 2022 20:51:54 +0000"  >&lt;p&gt;Commit d2de09d029c7ead716e4bc276139528354836e97 in lucene-solr&apos;s branch refs/heads/branch_8_11 from Mark Robert Miller&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=d2de09d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=d2de09d&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14569&quot; title=&quot;Configuring a shardHandlerFactory on the /select requestHandler results in HTTP 401 when searching on alias in secured Solr&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14569&quot;&gt;&lt;del&gt;SOLR-14569&lt;/del&gt;&lt;/a&gt;: Configuring a shardHandlerFactory on the /select requestHandler results in HTTP 401 when searching on alias in secured Solr. (#574)&lt;/p&gt;

&lt;p&gt;Conflicts:&lt;br/&gt;
	.gitignore&lt;br/&gt;
	solr/core/src/java/org/apache/solr/core/CoreContainer.java&lt;/p&gt;</comment>
                            <comment id="17535776" author="janhoy" created="Thu, 12 May 2022 00:27:04 +0000"  >&lt;p&gt;Closing after the 9.0.0 release&lt;/p&gt;</comment>
                            <comment id="17539881" author="anshumg" created="Fri, 20 May 2022 02:17:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xiaotiaq&quot; class=&quot;user-hover&quot; rel=&quot;xiaotiaq&quot;&gt;xiaotiaq&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nickumia&quot; class=&quot;user-hover&quot; rel=&quot;nickumia&quot;&gt;nickumia&lt;/a&gt; - can you please test your apps w/ Solr 9.0 that just came out and fixes this issue. Also, this has already been back ported to the 8x line and would be released with 8.11.2 which is currently being worked on. 8.11.2 should be released soon, but you can always build the &lt;a href=&quot;https://github.com/apache/lucene-solr/tree/branch_8_11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;lucene-solr/branch_8_11&lt;/a&gt; GitHub code to test pre-release.&lt;/p&gt;</comment>
                            <comment id="17539883" author="JIRAUSER289075" created="Fri, 20 May 2022 02:25:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anshum&quot; class=&quot;user-hover&quot; rel=&quot;anshum&quot;&gt;anshum&lt;/a&gt;&#160; We verified on our end that this is fixed on 9.0&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17540441" author="dsmiley" created="Sat, 21 May 2022 15:04:27 +0000"  >&lt;p&gt;Random question:  What&apos;s the purpose in configuring a shardHandlerFactory specific to a request handler?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13237243">SOLR-13510</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13037725" name="SOLR-14569-mrm.patch" size="18953" author="markrmiller" created="Mon, 20 Dec 2021 21:17:37 +0000"/>
                            <attachment id="13006971" name="SOLR-14569.patch" size="14877" author="igiguere" created="Thu, 2 Jul 2020 19:39:14 +0000"/>
                            <attachment id="13005734" name="SOLR-14569.patch" size="4042" author="igiguere" created="Mon, 15 Jun 2020 18:25:21 +0000"/>
                            <attachment id="13005674" name="SOLR-14569.patch" size="4044" author="igiguere" created="Sun, 14 Jun 2020 21:07:09 +0000"/>
                            <attachment id="13005743" name="curl_requests-responses.txt" size="1887" author="igiguere" created="Mon, 15 Jun 2020 21:26:22 +0000"/>
                            <attachment id="13005729" name="security.json" size="455" author="igiguere" created="Mon, 15 Jun 2020 17:28:49 +0000"/>
                            <attachment id="13005675" name="security.json" size="454" author="igiguere" created="Sun, 14 Jun 2020 21:08:54 +0000"/>
                            <attachment id="13005742" name="solr.log" size="836953" author="igiguere" created="Mon, 15 Jun 2020 21:18:51 +0000"/>
                            <attachment id="13005676" name="solr_conf.zip" size="27571" author="igiguere" created="Sun, 14 Jun 2020 21:08:59 +0000"/>
                            <attachment id="13005741" name="updated_solr_conf.zip" size="27770" author="igiguere" created="Mon, 15 Jun 2020 21:18:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 25 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0fu5s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>