<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:50:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-14290] Fix NPE in SolrTestCaseJ4 breaking external usage for master/9.x</title>
                <link>https://issues.apache.org/jira/browse/SOLR-14290</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;A fix for this was provided on branch_8x in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14283&quot; title=&quot;Fix NPE in SolrTestCaseJ4 preventing it from working on external projects&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14283&quot;&gt;&lt;del&gt;SOLR-14283&lt;/del&gt;&lt;/a&gt; but that same fix won&apos;t work in java 11 due to reflection restrictions that make it impossible (AFAIK) to un-final a final variable. We will likely need to employ powermock or our own java agent based solution, or redesign the way ExternalPaths.determinSourceHome and ExternalPaths.SOURCE_HOME work. &lt;/p&gt;

&lt;p&gt;8.5 is coming up soon and we can&apos;t release with this broken in 8.5 so I&apos;m separating the more complicated 9x fix into this ticket.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Solr Test Framework when run externally such that ExternalPaths.SOURCE_HOME is null&lt;/p&gt;</environment>
        <key id="13288186">SOLR-14290</key>
            <summary>Fix NPE in SolrTestCaseJ4 breaking external usage for master/9.x</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dsmiley">David Smiley</assignee>
                                    <reporter username="gus">Gus Heck</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Feb 2020 02:51:53 +0000</created>
                <updated>Thu, 12 May 2022 00:26:50 +0000</updated>
                            <resolved>Thu, 10 Mar 2022 20:15:16 +0000</resolved>
                                    <version>9.0</version>
                                    <fixVersion>9.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17433157" author="janhoy" created="Fri, 22 Oct 2021 21:32:08 +0000"  >&lt;p&gt;Tag it with fixVersiion 9.0 to put it on the list&lt;/p&gt;</comment>
                            <comment id="17433193" author="dsmiley" created="Sat, 23 Oct 2021 00:38:40 +0000"  >&lt;p&gt;Wow; this is pretty bad; I&apos;m so glad you caught it! &#160;I wonder how we as a project could better protect ourselves from this. &#160;Perhaps if &lt;a href=&quot;https://github.com/apache/solr-sandbox&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr-sandbox&lt;/a&gt;&#160;consumed a snapshot version, we might know. &#160;There&apos;s like nothing there right now but there will be.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;BTW please, no, lets not use PowerMock or a java agent. &#160;Granted I don&apos;t know the specifics yet but those solutions are choices of last resort to a problem.&lt;/p&gt;</comment>
                            <comment id="17470201" author="janhoy" created="Thu, 6 Jan 2022 21:52:37 +0000"  >&lt;p&gt;I don&apos;t think this should hold up the 9.0 releae. Users depending on the test framework outside of Solr can be warned in the &quot;Upgrade notes&quot; about a known limitation, and then it can be fixed for 9.0.1. But if there is a solution coming up, feel free to merge it in!&lt;/p&gt;</comment>
                            <comment id="17470666" author="gus_heck" created="Fri, 7 Jan 2022 14:50:33 +0000"  >&lt;p&gt;I don&apos;t think it&apos;s a valid release if people don&apos;t have a way to reliably test custom code. How should someone with custom plugins/code run their tests for that code to see if it breaks in 9.x when the test framework the relied on is fundamentally broken? Honestly this should have been fixed by the person who introduced the NPE in the first place, but they got all upset that there wasn&apos;t a unit test for it and refused. I&apos;ll take another look this weekend, but it may require some discussion.&lt;/p&gt;</comment>
                            <comment id="17479688" author="risdenk" created="Thu, 20 Jan 2022 21:31:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gus&quot; class=&quot;user-hover&quot; rel=&quot;gus&quot;&gt;gus&lt;/a&gt; is there a minimal reproduction test case for this? I am having a hard time trying to see the impact here. &lt;/p&gt;

&lt;p&gt;The fix from &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14283&quot; title=&quot;Fix NPE in SolrTestCaseJ4 preventing it from working on external projects&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14283&quot;&gt;&lt;del&gt;SOLR-14283&lt;/del&gt;&lt;/a&gt; is just the 2 line null check to solr/test-framework/src/java/org/apache/solr/SolrTestCaseJ4.java right? The issue w/ JDK 11 is adding a test for this - not the actual fix right?&lt;/p&gt;

&lt;p&gt;I&apos;m looking specifically at &lt;a href=&quot;https://github.com/apache/lucene-solr/commit/9c9a69c?w=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/commit/9c9a69c?w=1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17479700" author="gus_heck" created="Thu, 20 Jan 2022 21:47:26 +0000"  >&lt;p&gt;IIRC if you apply the patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14283&quot; title=&quot;Fix NPE in SolrTestCaseJ4 preventing it from working on external projects&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14283&quot;&gt;&lt;del&gt;SOLR-14283&lt;/del&gt;&lt;/a&gt; to main, I believe all hell breaks loose because java 11 won&apos;t let you mess with a final anymore, which is how I hacked a fix into 8x, and all the tests that rely on ExternalPaths.SOURCE_HOME break with a reflection exception. (see SourceHomeNullifier in 8x) ... this was a quick fix added immediately prior to a release to keep it from breaking all 3rd party use of our test framework, I am not normally a fan of hacking away final like that.&lt;/p&gt;</comment>
                            <comment id="17486088" author="janhoy" created="Wed, 2 Feb 2022 20:36:09 +0000"  >&lt;p&gt;What&apos;s the state of this blocker? Do we have a proposed solution?&lt;/p&gt;</comment>
                            <comment id="17488382" author="mdrob" created="Mon, 7 Feb 2022 19:23:47 +0000"  >&lt;p&gt;I&apos;m fine with adding the null check to SolrTestCaseJ4 without a corresponding test here as long as there is a comment on why the null check is there.&lt;/p&gt;</comment>
                            <comment id="17488384" author="mdrob" created="Mon, 7 Feb 2022 19:25:04 +0000"  >&lt;p&gt;Hoss even documented way back in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4853&quot; title=&quot;SolrJettyTestBase can no longer be reused by end users&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4853&quot;&gt;&lt;del&gt;SOLR-4853&lt;/del&gt;&lt;/a&gt; that SOURCE_HOME could be null for an external client using the test framework. I think we&apos;re fine to do this without too much pomp.&lt;/p&gt;</comment>
                            <comment id="17491708" author="janhoy" created="Sun, 13 Feb 2022 21:42:17 +0000"  >&lt;p&gt;Ok, who prepares the PR for this? One of the last blockers before RC1.&lt;/p&gt;</comment>
                            <comment id="17492877" author="janhoy" created="Tue, 15 Feb 2022 21:36:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gus&quot; class=&quot;user-hover&quot; rel=&quot;gus&quot;&gt;gus&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mdrob&quot; class=&quot;user-hover&quot; rel=&quot;mdrob&quot;&gt;mdrob&lt;/a&gt; Do you have a patch for this one?&lt;/p&gt;</comment>
                            <comment id="17495397" author="janhoy" created="Mon, 21 Feb 2022 08:55:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gus&quot; class=&quot;user-hover&quot; rel=&quot;gus&quot;&gt;gus&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mdrob&quot; class=&quot;user-hover&quot; rel=&quot;mdrob&quot;&gt;mdrob&lt;/a&gt;, status on this blocker please?&lt;/p&gt;</comment>
                            <comment id="17503037" author="janhoy" created="Tue, 8 Mar 2022 16:05:35 +0000"  >&lt;p&gt;Heads up: If this ends up being the last blocker left before RC1, I intend to demote it and commit a note to major-changes that users relying on test-framework in their app should wait for a later release.&lt;/p&gt;</comment>
                            <comment id="17504003" author="dsmiley" created="Thu, 10 Mar 2022 05:13:50 +0000"  >&lt;p&gt;Attached PR is trivial. &#160;Am I missing something?&lt;/p&gt;</comment>
                            <comment id="17504526" author="mdrob" created="Thu, 10 Mar 2022 19:04:17 +0000"  >&lt;p&gt;The change is correct, but I didn&apos;t know how to test it. Looks good to merge from my end.&lt;/p&gt;</comment>
                            <comment id="17504554" author="jira-bot" created="Thu, 10 Mar 2022 20:09:57 +0000"  >&lt;p&gt;Commit 6ad42676d3a7fcf185bd403d3d7395da9ef7bda2 in solr&apos;s branch refs/heads/main from David Smiley&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=6ad4267&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=6ad4267&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14290&quot; title=&quot;Fix NPE in SolrTestCaseJ4 breaking external usage for master/9.x&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14290&quot;&gt;&lt;del&gt;SOLR-14290&lt;/del&gt;&lt;/a&gt;: Fix NPE by external users of SolrTestCaseJ4 (#739)&lt;/p&gt;
</comment>
                            <comment id="17504556" author="jira-bot" created="Thu, 10 Mar 2022 20:12:05 +0000"  >&lt;p&gt;Commit 6b6608186bf5dbee9ec1cdbe3bec8d3043ae2001 in solr&apos;s branch refs/heads/branch_9x from David Smiley&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=6b66081&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=6b66081&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14290&quot; title=&quot;Fix NPE in SolrTestCaseJ4 breaking external usage for master/9.x&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14290&quot;&gt;&lt;del&gt;SOLR-14290&lt;/del&gt;&lt;/a&gt;: Fix NPE by external users of SolrTestCaseJ4 (#739)&lt;/p&gt;
</comment>
                            <comment id="17504558" author="jira-bot" created="Thu, 10 Mar 2022 20:13:13 +0000"  >&lt;p&gt;Commit 8f19671a1dd7328d2ef3bba2bbfd42fedee4901d in solr&apos;s branch refs/heads/branch_9_0 from David Smiley&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=8f19671&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=8f19671&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-14290&quot; title=&quot;Fix NPE in SolrTestCaseJ4 breaking external usage for master/9.x&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-14290&quot;&gt;&lt;del&gt;SOLR-14290&lt;/del&gt;&lt;/a&gt;: Fix NPE by external users of SolrTestCaseJ4 (#739)&lt;/p&gt;
</comment>
                            <comment id="17535645" author="janhoy" created="Thu, 12 May 2022 00:26:50 +0000"  >&lt;p&gt;Closing after the 9.0.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13281548">SOLR-14217</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13287752">SOLR-14283</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0bzfs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>