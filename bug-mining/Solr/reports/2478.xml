<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:05:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-7146] MiniSolrCloudCluster based tests can fail with ZooKeeperException NoNode for /live_nodes</title>
                <link>https://issues.apache.org/jira/browse/SOLR-7146</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;MiniSolrCloudCluster based tests can fail with the following exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.solr.common.cloud.ZooKeeperException: 
	at __randomizedtesting.SeedInfo.seed([3F3D838A8ADC9385:F153ADFBF163EC6D]:0)
	at org.apache.solr.client.solrj.impl.CloudSolrClient.connect(CloudSolrClient.java:463)
	at org.apache.solr.client.solrj.impl.CloudSolrClient.requestWithRetryOnStaleState(CloudSolrClient.java:763)
	at org.apache.solr.client.solrj.impl.CloudSolrClient.request(CloudSolrClient.java:752)
	at org.apache.solr.cloud.MiniSolrCloudCluster.createCollection(MiniSolrCloudCluster.java:193)
	at org.apache.solr.handler.component.TestTwoPhaseDistributedQuery.testNoExtraFieldsRequestedFromShardsInPhaseOne(TestTwoPhaseDistributedQuery.java:79)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1618)
	at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:827)
	at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:863)
	at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:877)
	at com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:53)
	at org.apache.lucene.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:50)
	at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:46)
	at com.carrotsearch.randomizedtesting.rules.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:55)
	at org.apache.lucene.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:49)
	at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:65)
	at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:48)
	at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
	at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:365)
	at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:798)
	at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:458)
	at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:836)
	at com.carrotsearch.randomizedtesting.RandomizedRunner$3.evaluate(RandomizedRunner.java:738)
	at com.carrotsearch.randomizedtesting.RandomizedRunner$4.evaluate(RandomizedRunner.java:772)
	at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:783)
	at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
	at com.carrotsearch.randomizedtesting.rules.SystemPropertiesRestoreRule$1.evaluate(SystemPropertiesRestoreRule.java:53)
	at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:46)
	at org.apache.lucene.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:42)
	at com.carrotsearch.randomizedtesting.rules.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:55)
	at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:39)
	at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:39)
	at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
	at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
	at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
	at org.apache.lucene.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:54)
	at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:48)
	at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:65)
	at org.apache.lucene.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:55)
	at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36)
	at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:365)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
Caused by: org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; /live_nodes
	at org.apache.zookeeper.KeeperException.create(KeeperException.java:111)
	at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)
	at org.apache.zookeeper.ZooKeeper.getChildren(ZooKeeper.java:1472)
	at org.apache.solr.common.cloud.SolrZkClient$6.execute(SolrZkClient.java:326)
	at org.apache.solr.common.cloud.SolrZkClient$6.execute(SolrZkClient.java:323)
	at org.apache.solr.common.cloud.ZkCmdExecutor.retryOperation(ZkCmdExecutor.java:61)
	at org.apache.solr.common.cloud.SolrZkClient.getChildren(SolrZkClient.java:323)
	at org.apache.solr.common.cloud.ZkStateReader.createClusterStateWatchersAndUpdate(ZkStateReader.java:346)
	at org.apache.solr.client.solrj.impl.CloudSolrClient.connect(CloudSolrClient.java:455)
	... 44 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The reason is that the cluster constructor can return before any of the nodes are initialized. In such a case, no /live_nodes are present and hence this error.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12776961">SOLR-7146</key>
            <summary>MiniSolrCloudCluster based tests can fail with ZooKeeperException NoNode for /live_nodes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shalin">Shalin Shekhar Mangar</assignee>
                                    <reporter username="shalin">Shalin Shekhar Mangar</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Feb 2015 22:05:11 +0000</created>
                <updated>Fri, 13 Dec 2019 22:21:25 +0000</updated>
                            <resolved>Wed, 27 May 2015 12:50:04 +0000</resolved>
                                                    <fixVersion>5.3</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrCloud</component>
                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="14334073" author="markrmiller@gmail.com" created="Mon, 23 Feb 2015 23:23:46 +0000"  >&lt;p&gt;Looks like probably a problem that has come in user land before as well (I think Grant pinged me about it once). I think the cluster is not yet ready for the client. We talked about having it way around a bit in this case, it can make some scripting difficult, but I don&apos;t think any work was ever done.&lt;/p&gt;</comment>
                            <comment id="14339675" author="vamsee" created="Fri, 27 Feb 2015 03:27:53 +0000"  >&lt;p&gt;May be we can add a check at this line to wait for # of znodes under /solr/live_nodes to match up the number of servers being started?&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/trunk/solr/test-framework/src/java/org/apache/solr/cloud/MiniSolrCloudCluster.java#L116&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/trunk/solr/test-framework/src/java/org/apache/solr/cloud/MiniSolrCloudCluster.java#L116&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Of course, we need to have a timeout though rather than waiting indefinitely. I can work on it if the above approach sounds good?&lt;/p&gt;
</comment>
                            <comment id="14339689" author="shalinmangar" created="Fri, 27 Feb 2015 03:56:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;Looks like probably a problem that has come in user land before as well (I think Grant pinged me about it once).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yup, I found &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4044&quot; title=&quot;CloudSolrServer early connect problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4044&quot;&gt;&lt;del&gt;SOLR-4044&lt;/del&gt;&lt;/a&gt; which describes the same problem.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;May be we can add a check at this line to wait for # of znodes under /solr/live_nodes to match up the number of servers being started?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We should do that to solve this particular problem because this is a test-framework class and it should work regardless of whether you use CloudSolrClient or HttpSolrClient but IMO, we should also find a way to solve it inside CloudSolrServer.&lt;/p&gt;</comment>
                            <comment id="14339721" author="vamsee" created="Fri, 27 Feb 2015 04:54:16 +0000"  >&lt;p&gt;Here is the first revision of the patch. I added logic to wait for maximum of 10 seconds before giving up.&lt;/p&gt;</comment>
                            <comment id="14339726" author="vamsee" created="Fri, 27 Feb 2015 04:59:22 +0000"  >&lt;p&gt;oops. I didn&apos;t handle the case to check if live_nodes exists in the first place. Let me update the patch.&lt;/p&gt;</comment>
                            <comment id="14339743" author="vamsee" created="Fri, 27 Feb 2015 05:21:50 +0000"  >&lt;p&gt;Added check to see if /solr/live_nodes exist before getting the list of live solr servers.&lt;/p&gt;</comment>
                            <comment id="14339914" author="romseygeek" created="Fri, 27 Feb 2015 09:13:26 +0000"  >&lt;p&gt;For CloudSolrClient, does it make sense to create the znode if it doesn&apos;t exist in ZkStateReader.createClusterStateWatchersAndUpdate()?&lt;/p&gt;</comment>
                            <comment id="14339919" author="shalinmangar" created="Fri, 27 Feb 2015 09:16:38 +0000"  >&lt;blockquote&gt;&lt;p&gt;For CloudSolrClient, does it make sense to create the znode if it doesn&apos;t exist in ZkStateReader.createClusterStateWatchersAndUpdate()?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This was discussed in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4044&quot; title=&quot;CloudSolrServer early connect problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4044&quot;&gt;&lt;del&gt;SOLR-4044&lt;/del&gt;&lt;/a&gt; but I agree with Yonik that our clients should be read-only w.r.t ZooKeeper. Let&apos;s keep the CloudSolrClient related discussions in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4044&quot; title=&quot;CloudSolrServer early connect problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4044&quot;&gt;&lt;del&gt;SOLR-4044&lt;/del&gt;&lt;/a&gt; and just fix MiniSolrCloudCluster here.&lt;/p&gt;</comment>
                            <comment id="14341806" author="romseygeek" created="Sat, 28 Feb 2015 22:19:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt; I think my proposed patch on &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4044&quot; title=&quot;CloudSolrServer early connect problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4044&quot;&gt;&lt;del&gt;SOLR-4044&lt;/del&gt;&lt;/a&gt; will fix this too?&lt;/p&gt;</comment>
                            <comment id="14560903" author="jira-bot" created="Wed, 27 May 2015 12:48:37 +0000"  >&lt;p&gt;Commit 1682002 from shalin@apache.org in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1682002&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1682002&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7146&quot; title=&quot;MiniSolrCloudCluster based tests can fail with ZooKeeperException NoNode for /live_nodes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7146&quot;&gt;&lt;del&gt;SOLR-7146&lt;/del&gt;&lt;/a&gt;: MiniSolrCloudCluster based tests can fail with ZooKeeperException NoNode for /live_nodes&lt;/p&gt;</comment>
                            <comment id="14560906" author="jira-bot" created="Wed, 27 May 2015 12:49:36 +0000"  >&lt;p&gt;Commit 1682003 from shalin@apache.org in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1682003&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1682003&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-7146&quot; title=&quot;MiniSolrCloudCluster based tests can fail with ZooKeeperException NoNode for /live_nodes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-7146&quot;&gt;&lt;del&gt;SOLR-7146&lt;/del&gt;&lt;/a&gt;: MiniSolrCloudCluster based tests can fail with ZooKeeperException NoNode for /live_nodes&lt;/p&gt;</comment>
                            <comment id="14560907" author="shalinmangar" created="Wed, 27 May 2015 12:50:04 +0000"  >&lt;p&gt;I increased the timeout to a minute and changed the logic to break immediately if numservers is reached.&lt;/p&gt;

&lt;p&gt;Thanks Vamsee!&lt;/p&gt;</comment>
                            <comment id="14713281" author="shalinmangar" created="Wed, 26 Aug 2015 13:06:18 +0000"  >&lt;p&gt;Bulk close for 5.3.0 release&lt;/p&gt;</comment>
                            <comment id="16995953" author="pr.rahul" created="Fri, 13 Dec 2019 22:05:58 +0000"  >&lt;p&gt;I am upgrading cdh 5.13.x to 6.3.1 and i am facing similar issue... i am newbie with solr, can you please guide me?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;2019-12-13 22:00:39,237 INFO (qtp398110318-17)-----o.a.s.s.HttpSolrCall: &lt;span class=&quot;error&quot;&gt;&amp;#91;admin&amp;#93;&lt;/span&gt; webapp=null path=/admin/collections params={action=CLUSTERSTATUS&amp;amp;wt=json} status=500 QTime=8&lt;br/&gt;
2019-12-13 22:00:39,237 ERROR (qtp398110318-17)-----o.a.s.s.HttpSolrCall: null:org.apache.zookeeper.KeeperException$NoNodeException: &lt;b&gt;KeeperErrorCode = NoNode for /live_nodes&lt;/b&gt;&lt;/p&gt;</comment>
                            <comment id="16995959" author="risdenk" created="Fri, 13 Dec 2019 22:10:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pr.rahul&quot; class=&quot;user-hover&quot; rel=&quot;pr.rahul&quot;&gt;pr.rahul&lt;/a&gt; commenting on a very old jira isn&apos;t an effective way to get help. Since you mention CDH it is better to open a Cloudera support case. Another option is the solr-user mailing list &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; but again that is for Apache Solr typically.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://lucene.apache.org/solr/community.html#mailing-lists-irc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lucene.apache.org/solr/community.html#mailing-lists-irc&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16995968" author="pr.rahul" created="Fri, 13 Dec 2019 22:21:25 +0000"  >&lt;p&gt;Thank you Kevin, noted.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12615147">SOLR-4044</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12701270" name="SOLR-7146.patch" size="1234" author="vamsee" created="Fri, 27 Feb 2015 04:54:16 +0000"/>
                            <attachment id="12701273" name="SOLR-7146v2.patch" size="1345" author="vamsee" created="Fri, 27 Feb 2015 05:21:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 48 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25y0n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>