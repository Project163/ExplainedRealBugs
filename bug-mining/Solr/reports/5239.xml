<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 05:11:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-11191] Shard Split doesn&apos;t work on indexes that have child documents</title>
                <link>https://issues.apache.org/jira/browse/SOLR-11191</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;The split shard command doesn&apos;t split a shard correctly when the index has parent-child documents.&lt;/p&gt;

&lt;p&gt;The way split shard works is it goes through all documents id&apos;s in that shard and then decides which sub-shard would it belong in . It is not aware of the parent child relationship during this process&lt;/p&gt;

&lt;p&gt;So the parent-child documents could be orphaned and end up in different shard&lt;br/&gt;
Secondly, even with the routing of parent and child documents were the same split shards needs to re-index them as a block&lt;/p&gt;</description>
                <environment></environment>
        <key id="13092252">SOLR-11191</key>
            <summary>Shard Split doesn&apos;t work on indexes that have child documents</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dsmiley">David Smiley</assignee>
                                    <reporter username="varun">Varun Thacker</reporter>
                        <labels>
                            <label>NestedDocuments</label>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 3 Aug 2017 17:28:16 +0000</created>
                <updated>Tue, 28 Jan 2025 22:17:45 +0000</updated>
                            <resolved>Wed, 30 Oct 2024 03:37:19 +0000</resolved>
                                                    <fixVersion>9.8</fixVersion>
                                        <due></due>
                            <votes>3</votes>
                                    <watches>10</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="27000">7.5h</timespent>
                                <comments>
                            <comment id="16169411" author="yseeley@gmail.com" created="Sun, 17 Sep 2017 20:48:26 +0000"  >&lt;blockquote&gt;&lt;p&gt;Secondly, even with the routing of parent and child documents were the same split shards needs to re-index them as a block&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It doesn&apos;t seem like it should be necessary.  It should be enough to just use the hash of &amp;#95;root&amp;#95; for all of the children and they should still end up contiguous in the newly created split indexes.&lt;/p&gt;</comment>
                            <comment id="17404723" author="tomasflobbe" created="Wed, 25 Aug 2021 21:08:01 +0000"  >&lt;p&gt;Was looking at this today and It does seem like ensuring &lt;tt&gt;&amp;#95;root_&lt;/tt&gt; is used as router field (or other router that guarantees nested docs to fall in the same shard) should be enough for this to work completely, or am I missing something?&lt;/p&gt;</comment>
                            <comment id="17405196" author="dsmiley" created="Thu, 26 Aug 2021 12:41:40 +0000"  >&lt;p&gt;Yep; pretty simple.&lt;/p&gt;</comment>
                            <comment id="17889062" author="JIRAUSER305319" created="Mon, 14 Oct 2024 02:14:48 +0000"  >&lt;p&gt;&lt;del&gt;I put together a draft POC for this change here: &lt;a href=&quot;https://github.com/apache/lucene-solr/pull/2686.&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/pull/2686.&lt;/a&gt;&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;Would love to have some feedback.&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;Edit: closed in favor of new PR below.&lt;/p&gt;</comment>
                            <comment id="17889076" author="dsmiley" created="Mon, 14 Oct 2024 04:57:44 +0000"  >&lt;p&gt;That link didn&apos;t work but anyway, I reviewed it. &#160;Looking forward to seeing a PR to apache/solr.&lt;/p&gt;</comment>
                            <comment id="17893185" author="JIRAUSER305319" created="Sun, 27 Oct 2024 06:21:51 +0000"  >&lt;p&gt;New PR against apache/solr: &lt;a href=&quot;https://github.com/apache/solr/pull/2799&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/solr/pull/2799&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17894049" author="jira-bot" created="Wed, 30 Oct 2024 01:29:46 +0000"  >&lt;p&gt;Commit e377ebbdaff5ae784b3f4e4315afa4d6705d1d71 in solr&apos;s branch refs/heads/main from Zack Kendall&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=e377ebbdaff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=e377ebbdaff&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11191&quot; title=&quot;Shard Split doesn&amp;#39;t work on indexes that have child documents&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11191&quot;&gt;&lt;del&gt;SOLR-11191&lt;/del&gt;&lt;/a&gt;: SolrIndexSplitter: Routing child docs by &lt;em&gt;root&lt;/em&gt; when available (#2799)&lt;/p&gt;

&lt;p&gt;Splitting shards now supports child / nested docs.  Works based on splitting based on the &lt;em&gt;root&lt;/em&gt; field.&lt;/p&gt;


&lt;p&gt;Co-authored-by: zkendall &amp;lt;zkendall@axon.com&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17894058" author="jira-bot" created="Wed, 30 Oct 2024 03:34:24 +0000"  >&lt;p&gt;Commit fbcf6b3ecb2d20d584fbf6d7290974f9b41c191f in solr&apos;s branch refs/heads/branch_9x from Zack Kendall&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=fbcf6b3ecb2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=fbcf6b3ecb2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11191&quot; title=&quot;Shard Split doesn&amp;#39;t work on indexes that have child documents&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11191&quot;&gt;&lt;del&gt;SOLR-11191&lt;/del&gt;&lt;/a&gt;: SolrIndexSplitter: Routing child docs by &lt;em&gt;root&lt;/em&gt; when available (#2799)&lt;/p&gt;

&lt;p&gt;Splitting shards now supports child / nested docs.  Works based on splitting based on the &lt;em&gt;root&lt;/em&gt; field.&lt;/p&gt;

&lt;p&gt;Co-authored-by: zkendall &amp;lt;zkendall@axon.com&amp;gt;&lt;/p&gt;

&lt;p&gt;(cherry picked from commit e377ebbdaff5ae784b3f4e4315afa4d6705d1d71)&lt;/p&gt;</comment>
                            <comment id="17894060" author="dsmiley" created="Wed, 30 Oct 2024 03:37:19 +0000"  >&lt;p&gt;Merged.   Thanks for your contribution Zack!&lt;/p&gt;</comment>
                            <comment id="17894591" author="jira-bot" created="Thu, 31 Oct 2024 13:54:23 +0000"  >&lt;p&gt;Commit b0ceb052051e53b81ecbd598990f944ff0e370a2 in solr&apos;s branch refs/heads/branch_9x from David Smiley&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=b0ceb052051&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=b0ceb052051&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-11191&quot; title=&quot;Shard Split doesn&amp;#39;t work on indexes that have child documents&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-11191&quot;&gt;&lt;del&gt;SOLR-11191&lt;/del&gt;&lt;/a&gt;: fix SplitShardTest.testWithChildDocuments&lt;br/&gt;
The delete parent shard trick wasn&apos;t reliable; parent may still be active.&lt;br/&gt;
So use activeClusterShape based on the 9x definition; differs from 10x&lt;/p&gt;</comment>
                            <comment id="17921877" author="anshumg" created="Tue, 28 Jan 2025 22:17:45 +0000"  >&lt;p&gt;Closing after the 9.8.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13596863">SOLR-17517</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            41 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3idvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>