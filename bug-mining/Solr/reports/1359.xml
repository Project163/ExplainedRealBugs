<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:35:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-4581] sort-order of facet-counts depends on facet.mincount</title>
                <link>https://issues.apache.org/jira/browse/SOLR-4581</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I just upgraded to Solr 4.2 and cannot explain the following behaviour:&lt;/p&gt;

&lt;p&gt;I am using a solr.TrieDoubleField named &apos;ListPrice_EUR_INV&apos; as a facet-field. The solr-response for the query &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&apos;solr/Products/select?q=*%3A*&amp;amp;wt=xml&amp;amp;indent=true&amp;amp;facet=true&amp;amp;facet.field=ListPrice_EUR_INV&amp;amp;f.ListPrice_EUR_INV.facet.sort=index&apos;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;includes the following facet-counts:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;lst name=&quot;ListPrice_EUR_INV&quot;&amp;gt;
  &amp;lt;int name=&quot;-420.126&quot;&amp;gt;1&amp;lt;/int&amp;gt;
  &amp;lt;int name=&quot;-285.672&quot;&amp;gt;1&amp;lt;/int&amp;gt;
  &amp;lt;int name=&quot;-1.218&quot;&amp;gt;1&amp;lt;/int&amp;gt;
&amp;lt;/lst&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If I also set the parameter &lt;b&gt;&apos;facet.mincount=1&apos;&lt;/b&gt; in the query, the order of the facet-counts is reversed.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;lst name=&quot;ListPrice_EUR_INV&quot;&amp;gt;
  &amp;lt;int name=&quot;-1.218&quot;&amp;gt;1&amp;lt;/int&amp;gt;
  &amp;lt;int name=&quot;-285.672&quot;&amp;gt;1&amp;lt;/int&amp;gt;
  &amp;lt;int name=&quot;-420.126&quot;&amp;gt;1&amp;lt;/int&amp;gt;
&amp;lt;/lst&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I would have expected, that the sort-order of the facet-counts is not affected by the facet.mincount parameter, as it is in Solr 4.1.&lt;br/&gt;
Is this related to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2850&quot; title=&quot;Do not refine facets when minCount == 1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2850&quot;&gt;&lt;del&gt;SOLR-2850&lt;/del&gt;&lt;/a&gt;? &lt;/p&gt;</description>
                <environment></environment>
        <key id="12637022">SOLR-4581</key>
            <summary>sort-order of facet-counts depends on facet.mincount</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yseeley@gmail.com">Yonik Seeley</assignee>
                                    <reporter username="abuhr">Alexander Buhr</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Mar 2013 13:48:41 +0000</created>
                <updated>Mon, 9 May 2016 18:46:40 +0000</updated>
                            <resolved>Tue, 9 Apr 2013 15:28:26 +0000</resolved>
                                    <version>4.2</version>
                                    <fixVersion>4.3</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13626252" author="shalinmangar" created="Tue, 9 Apr 2013 05:35:11 +0000"  >&lt;p&gt;Test to demonstrate the issue.&lt;/p&gt;</comment>
                            <comment id="13626489" author="shalinmangar" created="Tue, 9 Apr 2013 11:18:21 +0000"  >&lt;p&gt;The bug is reproducible even after reverting &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2850&quot; title=&quot;Do not refine facets when minCount == 1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-2850&quot;&gt;&lt;del&gt;SOLR-2850&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Adding facet.method=fc gives correct response but omitting facet.method or using facet.method=enum gives the wrong sort order.&lt;/p&gt;

&lt;p&gt;I&apos;m not that familiar with faceting code to fix this. Perhaps someone else can take a look.&lt;/p&gt;</comment>
                            <comment id="13626592" author="yseeley@gmail.com" created="Tue, 9 Apr 2013 13:27:58 +0000"  >&lt;p&gt;It looks like this is a new bug due to the new faceting code introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3855&quot; title=&quot;DocValues support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3855&quot;&gt;&lt;del&gt;SOLR-3855&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13626682" author="yseeley@gmail.com" created="Tue, 9 Apr 2013 14:59:37 +0000"  >&lt;p&gt;OK, the code from &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3855&quot; title=&quot;DocValues support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3855&quot;&gt;&lt;del&gt;SOLR-3855&lt;/del&gt;&lt;/a&gt; had a bug where the IEEE float bits were used/compared directly for sort order, which is not correct for negative numbers.&lt;br/&gt;
I&apos;m testing a patch now, expect to commit shortly.&lt;/p&gt;</comment>
                            <comment id="13626704" author="abuhr" created="Tue, 9 Apr 2013 15:16:36 +0000"  >&lt;p&gt;happy to hear this &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
thx!&lt;/p&gt;</comment>
                            <comment id="13626716" author="yseeley@gmail.com" created="Tue, 9 Apr 2013 15:28:26 +0000"  >&lt;p&gt;committed.&lt;/p&gt;</comment>
                            <comment id="13626772" author="jpountz" created="Tue, 9 Apr 2013 16:24:19 +0000"  >&lt;p&gt;Thanks for fixing the bug Yonik!&lt;/p&gt;</comment>
                            <comment id="13653926" author="thetaphi" created="Fri, 10 May 2013 10:33:26 +0000"  >&lt;p&gt;Closed after release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12608262">SOLR-3855</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12577780" name="SOLR-4581.patch" size="2171" author="shalin" created="Tue, 9 Apr 2013 11:18:21 +0000"/>
                            <attachment id="12577713" name="SOLR-4581.patch" size="1850" author="shalin" created="Tue, 9 Apr 2013 05:35:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>317514</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1iscv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>317855</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>