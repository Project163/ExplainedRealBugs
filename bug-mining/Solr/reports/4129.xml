<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:36:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-10199] Solr&apos;s Kerberos functionality does not work in Java9 due to dependency on hadoop&apos;s AuthenticationFilter which attempt access to JVM protected classes</title>
                <link>https://issues.apache.org/jira/browse/SOLR-10199</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;(discovered this while working on test improvements for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8052&quot; title=&quot;Tests using MiniKDC do not work with Java 9 Jigsaw&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8052&quot;&gt;&lt;del&gt;SOLR-8052&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;Our Kerberos based authn/authz features are all built on top of Hadoop&apos;s &lt;tt&gt;AuthenticationFilter&lt;/tt&gt; which in turn uses Hadoop&apos;s &lt;tt&gt;KerberosUtil&lt;/tt&gt; &amp;#8211; but this does not work on Java9/jigsaw JVMs because that class in turn attempts to access &lt;tt&gt;sun.security.jgss.GSSUtil&lt;/tt&gt; which is not exported by &lt;tt&gt;module java.security.jgss&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;This means that Solr users who depend on Kerberos will not be able to upgrade to Java9, even if they do not use any Hadoop specific features of Solr.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Example log messages...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4]   2&amp;gt; 6833 WARN  (qtp442059499-30) [    ] o.a.h.s.a.s.AuthenticationFilter Authentication exception: java.lang.IllegalAccessException: class org.apache.hadoop.security.authentication.util.KerberosUtil cannot access class sun.security.jgss.GSSUtil (in module java.security.jgss) because module java.security.jgss does not export sun.security.jgss to unnamed module @4b38fe8b
   [junit4]   2&amp;gt; 6841 WARN  (TEST-TestSolrCloudWithKerberosAlt.testBasics-seed#[95A583AF82D1EBBE]) [    ] o.a.h.c.p.ResponseProcessCookies Invalid cookie header: &quot;Set-Cookie: hadoop.auth=; Path=/; Domain=127.0.0.1; Expires=Ara, 01-Sa-1970 00:00:00 GMT; HttpOnly&quot;. Invalid &apos;expires&apos; attribute: Ara, 01-Sa-1970 00:00:00 GMT
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(NOTE: &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-14115&quot; title=&quot;SimpleDateFormatter&amp;#39;s are construted w/default Locale, causing malformed dates on some platforms&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-14115&quot;&gt;HADOOP-14115&lt;/a&gt; is cause of malformed cookie expiration)&lt;/p&gt;

&lt;p&gt;ultimately the client gets a 403 error (as seen in a testcase with patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-8052&quot; title=&quot;Tests using MiniKDC do not work with Java 9 Jigsaw&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-8052&quot;&gt;&lt;del&gt;SOLR-8052&lt;/del&gt;&lt;/a&gt; applied and java9 assume commented out)...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit4] ERROR   7.10s | TestSolrCloudWithKerberosAlt.testBasics &amp;lt;&amp;lt;&amp;lt;
   [junit4]    &amp;gt; Throwable #1: org.apache.solr.client.solrj.impl.HttpSolrClient$RemoteSolrException: Error from server at http://127.0.0.1:34687/solr: Expected mime type application/octet-stream but got text/html. &amp;lt;html&amp;gt;
   [junit4]    &amp;gt; &amp;lt;head&amp;gt;
   [junit4]    &amp;gt; &amp;lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html;charset=ISO-8859-1&quot;/&amp;gt;
   [junit4]    &amp;gt; &amp;lt;title&amp;gt;Error 403 &amp;lt;/title&amp;gt;
   [junit4]    &amp;gt; &amp;lt;/head&amp;gt;
   [junit4]    &amp;gt; &amp;lt;body&amp;gt;
   [junit4]    &amp;gt; &amp;lt;h2&amp;gt;HTTP ERROR: 403&amp;lt;/h2&amp;gt;
   [junit4]    &amp;gt; &amp;lt;p&amp;gt;Problem accessing /solr/admin/collections. Reason:
   [junit4]    &amp;gt; &amp;lt;pre&amp;gt;    java.lang.IllegalAccessException: class org.apache.hadoop.security.authentication.util.KerberosUtil cannot access class sun.security.jgss.GSSUtil (in module java.security.jgss) because module java.security.jgss does not export sun.security.jgss to unnamed module @4b38fe8b&amp;lt;/pre&amp;gt;&amp;lt;/p&amp;gt;
   [junit4]    &amp;gt; &amp;lt;hr /&amp;gt;&amp;lt;a href=&quot;http://eclipse.org/jetty&quot;&amp;gt;Powered by Jetty:// 9.3.14.v20161028&amp;lt;/a&amp;gt;&amp;lt;hr/&amp;gt;
   [junit4]    &amp;gt; &amp;lt;/body&amp;gt;
   [junit4]    &amp;gt; &amp;lt;/html&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13045850">SOLR-10199</key>
            <summary>Solr&apos;s Kerberos functionality does not work in Java9 due to dependency on hadoop&apos;s AuthenticationFilter which attempt access to JVM protected classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="krisden">Kevin Risden</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                            <label>Java9</label>
                    </labels>
                <created>Fri, 24 Feb 2017 01:23:49 +0000</created>
                <updated>Thu, 12 May 2022 00:26:15 +0000</updated>
                            <resolved>Sat, 2 Feb 2019 17:05:18 +0000</resolved>
                                                    <fixVersion>8.1</fixVersion>
                    <fixVersion>9.0</fixVersion>
                                    <component>Hadoop Integration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15882178" author="thetaphi" created="Fri, 24 Feb 2017 08:02:19 +0000"  >&lt;p&gt;Should we open a bug with Hadoop, I hope they are also interested in fixing Java 9 related stuff??&lt;/p&gt;</comment>
                            <comment id="15886180" author="hossman" created="Mon, 27 Feb 2017 17:35:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;Should we open a bug with Hadoop, ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;hadoop community has known (at a broad level) about these underlying issues, and has existing issues tracking them (see &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11123&quot; title=&quot;Fix Java 9 incompatibilies in Hadoop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11123&quot;&gt;&lt;del&gt;HADOOP-11123&lt;/del&gt;&lt;/a&gt; and it&apos;s sub-tasks)&lt;/p&gt;

&lt;p&gt;I&apos;ve opened &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10210&quot; title=&quot;Solr features based on Hadoop that do not work on Java9&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10210&quot;&gt;&lt;del&gt;SOLR-10210&lt;/del&gt;&lt;/a&gt; as a central place for us to link/track our issues that are blocked by &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-11123&quot; title=&quot;Fix Java 9 incompatibilies in Hadoop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HADOOP-11123&quot;&gt;&lt;del&gt;HADOOP-11123&lt;/del&gt;&lt;/a&gt; (unless/until we remove the dependencies in those code paths)&lt;/p&gt;</comment>
                            <comment id="16629682" author="caomanhdat" created="Thu, 27 Sep 2018 02:48:17 +0000"  >&lt;p&gt;I would like to mention here that I filed &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-15681&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HADOOP-15681&lt;/a&gt;&#160;3 weeks ago with patch. No one&#160;in Hadoop community have leaved any comment there.&lt;/p&gt;</comment>
                            <comment id="16630673" author="erickerickson" created="Thu, 27 Sep 2018 16:14:38 +0000"  >&lt;p&gt;What version of the JDK we upgrade to and when is an open question.&lt;/p&gt;</comment>
                            <comment id="16759058" author="risdenk" created="Sat, 2 Feb 2019 15:28:25 +0000"  >&lt;p&gt;I am going through and trying to see if these are still valid on master after &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9515&quot; title=&quot;Update to Hadoop 3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9515&quot;&gt;&lt;del&gt;SOLR-9515&lt;/del&gt;&lt;/a&gt; - Hadoop 3 upgrade.&lt;/p&gt;</comment>
                            <comment id="16759076" author="risdenk" created="Sat, 2 Feb 2019 15:47:46 +0000"  >&lt;p&gt;There are two tests that look to fit this description with assumptions.&#160;TestZkAclsWithHadoopAuth and&#160;TestSolrCloudWithHadoopAuthPlugin planning to attach a patch with the assumptions commented out. Tests have passed after &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-9515&quot; title=&quot;Update to Hadoop 3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-9515&quot;&gt;&lt;del&gt;SOLR-9515&lt;/del&gt;&lt;/a&gt; on JDK11.&lt;/p&gt;</comment>
                            <comment id="16759096" author="risdenk" created="Sat, 2 Feb 2019 16:50:39 +0000"  >&lt;p&gt;Confirmed no failures on JDK11 with the following two commands:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;ant beast -Dbeast.iters=20 -Dtestcase=TestZkAclsWithHadoopAuth&lt;/li&gt;
	&lt;li&gt;ant beast -Dbeast.iters=20 -Dtestcase=TestSolrCloudWithHadoopAuthPlugin&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16759104" author="jira-bot" created="Sat, 2 Feb 2019 17:03:53 +0000"  >&lt;p&gt;Commit 1a23ab005bd7944ae5087eea9ab6f04ec76b2134 in lucene-solr&apos;s branch refs/heads/master from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=1a23ab0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=1a23ab0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10199&quot; title=&quot;Solr&amp;#39;s Kerberos functionality does not work in Java9 due to dependency on hadoop&amp;#39;s AuthenticationFilter which attempt access to JVM protected classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10199&quot;&gt;&lt;del&gt;SOLR-10199&lt;/del&gt;&lt;/a&gt;: Solr&apos;s Kerberos functionality does not work in Java9 due to dependency on hadoop&apos;s AuthenticationFilter which attempt access to JVM protected classes&lt;/p&gt;

&lt;p&gt;Signed-off-by: Kevin Risden &amp;lt;krisden@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="16759107" author="jira-bot" created="Sat, 2 Feb 2019 17:04:52 +0000"  >&lt;p&gt;Commit dfa3ea349a02be96fd192c267010bfbe8b9a12c7 in lucene-solr&apos;s branch refs/heads/branch_8x from Kevin Risden&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=dfa3ea3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=dfa3ea3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10199&quot; title=&quot;Solr&amp;#39;s Kerberos functionality does not work in Java9 due to dependency on hadoop&amp;#39;s AuthenticationFilter which attempt access to JVM protected classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10199&quot;&gt;&lt;del&gt;SOLR-10199&lt;/del&gt;&lt;/a&gt;: Solr&apos;s Kerberos functionality does not work in Java9 due to dependency on hadoop&apos;s AuthenticationFilter which attempt access to JVM protected classes&lt;/p&gt;

&lt;p&gt;Signed-off-by: Kevin Risden &amp;lt;krisden@apache.org&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17535307" author="janhoy" created="Thu, 12 May 2022 00:26:15 +0000"  >&lt;p&gt;Closing after the 9.0.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12906544">SOLR-8182</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13046690">SOLR-10210</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                                                <inwardlinks description="Is contained by">
                                        <issuelink>
            <issuekey id="13187664">SOLR-12809</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12863820">SOLR-8052</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12727542">HADOOP-10848</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13005011">SOLR-9515</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12957389" name="SOLR-10199.patch" size="2842" author="krisden" created="Sat, 2 Feb 2019 15:48:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ajuf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>