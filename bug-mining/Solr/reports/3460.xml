<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:24:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-10857] Solr loads UNLOADed core on request</title>
                <link>https://issues.apache.org/jira/browse/SOLR-10857</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description></description>
                <environment></environment>
        <key id="13078627">SOLR-10857</key>
            <summary>Solr loads UNLOADed core on request</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="erickerickson">Erick Erickson</assignee>
                                    <reporter username="mkhl">Mikhail Khludnev</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Jun 2017 14:22:06 +0000</created>
                <updated>Sat, 8 Jun 2019 15:23:16 +0000</updated>
                            <resolved>Sun, 11 Jun 2017 20:00:25 +0000</resolved>
                                    <version>6.6</version>
                                    <fixVersion>6.6.1</fixVersion>
                    <fixVersion>6.7</fixVersion>
                    <fixVersion>7.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16044497" author="mkhludnev" created="Fri, 9 Jun 2017 14:29:04 +0000"  >&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12872495/12872495_SOLR-10857.patch&quot; title=&quot;SOLR-10857.patch attached to SOLR-10857&quot;&gt;SOLR-10857.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; reproducer. &lt;br/&gt;
I traced it to &lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/core/src/java/org/apache/solr/core/CoreContainer.java#L1408&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CoreContainer.create(CoreDescriptor, boolean, boolean)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Have no idea why it happens &lt;/p&gt;</comment>
                            <comment id="16044769" author="erickerickson" created="Fri, 9 Jun 2017 17:56:35 +0000"  >&lt;p&gt;I&apos;ve been in that code recently to clean up how we kept core containers in CoreDescriptors, copies of the CoreDescriptor in several places and the like. So it hasn&apos;t faded from my memory and quite possibly something I introduced.&lt;/p&gt;

&lt;p&gt;Digging, likely the CoreDescriptor isn&apos;t purged from the internal lists so it&apos;s loaded on demand.&lt;/p&gt;</comment>
                            <comment id="16046068" author="erickerickson" created="Sun, 11 Jun 2017 19:23:25 +0000"  >&lt;p&gt;Final patch, committing momentarily. Will commit to 6.6 branch for re-spin if we do that.&lt;/p&gt;

&lt;p&gt;This affected all core unloading, not just stand-alone.&lt;/p&gt;

&lt;p&gt;If you look at the patch you&apos;ll notice a kind of scary bit where I took out the if test when I moved the removeCoreDescriptor, see below. This does just what the old code did since the core descriptor was removed anyway even when deleteInstanceDir==false in 6.0+ at least.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (deleteInstanceDir) { &lt;span class=&quot;code-comment&quot;&gt;// we aren&apos;t going to reload &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we delete the instance dir.
&lt;/span&gt;      solrCores.removeCoreDescriptor(cd);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This was another consequence of having copies of the CoreDescriptor hanging around in several places.&lt;/p&gt;

&lt;p&gt;I thought about removing the CoreDescriptor from SolrCore in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10007&quot; title=&quot;Clean up references to CoreContainer and CoreDescriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10007&quot;&gt;&lt;del&gt;SOLR-10007&lt;/del&gt;&lt;/a&gt; and making the internal lists of CoreDescriptors in SolrCores and the transient plugin be the one true source of CoreDescriptors, but decided against it at the time due to how intrusive that patch was already, leaving that discussion for another day/JIRA.&lt;/p&gt;</comment>
                            <comment id="16046070" author="jira-bot" created="Sun, 11 Jun 2017 19:24:55 +0000"  >&lt;p&gt;Commit 95841d9ed406def6be62ab039dba8c4dd4b552a8 in lucene-solr&apos;s branch refs/heads/master from Erick&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=95841d9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=95841d9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10857&quot; title=&quot;Solr loads UNLOADed core on request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10857&quot;&gt;&lt;del&gt;SOLR-10857&lt;/del&gt;&lt;/a&gt;: Solr loads UNLOADed core on request.&lt;/p&gt;</comment>
                            <comment id="16046085" author="jira-bot" created="Sun, 11 Jun 2017 19:55:47 +0000"  >&lt;p&gt;Commit 3ecd679f5a7a65a7cbecdd40ed8e40128e8706b9 in lucene-solr&apos;s branch refs/heads/branch_6x from Erick&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=3ecd679&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=3ecd679&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10857&quot; title=&quot;Solr loads UNLOADed core on request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10857&quot;&gt;&lt;del&gt;SOLR-10857&lt;/del&gt;&lt;/a&gt;: Solr loads UNLOADed core on request.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 95841d9ed406def6be62ab039dba8c4dd4b552a8)&lt;/p&gt;</comment>
                            <comment id="16046086" author="jira-bot" created="Sun, 11 Jun 2017 19:59:10 +0000"  >&lt;p&gt;Commit bc470424464f399043c516dd250ba56ca2b78da7 in lucene-solr&apos;s branch refs/heads/branch_6_6 from Erick&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=bc47042&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=bc47042&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10857&quot; title=&quot;Solr loads UNLOADed core on request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10857&quot;&gt;&lt;del&gt;SOLR-10857&lt;/del&gt;&lt;/a&gt;: Solr loads UNLOADed core on request.&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 95841d9ed406def6be62ab039dba8c4dd4b552a8)&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 3ecd679)&lt;/p&gt;</comment>
                            <comment id="16046087" author="erickerickson" created="Sun, 11 Jun 2017 20:00:25 +0000"  >&lt;p&gt;Mikhail: Many thanks for the test case, made things much easier. Final patch includes your test.&lt;/p&gt;</comment>
                            <comment id="16046301" author="mkhludnev" created="Mon, 12 Jun 2017 07:58:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=erickerickson&quot; class=&quot;user-hover&quot; rel=&quot;erickerickson&quot;&gt;erickerickson&lt;/a&gt;, the test still has &lt;tt&gt;printStackTrace()&lt;/tt&gt; that&apos;s not ideal.  &lt;/p&gt;</comment>
                            <comment id="16046755" author="jira-bot" created="Mon, 12 Jun 2017 16:40:50 +0000"  >&lt;p&gt;Commit 5a737a3aab969b120a84dbc7cd7ed351796576b3 in lucene-solr&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=erickerickson&quot; class=&quot;user-hover&quot; rel=&quot;erickerickson&quot;&gt;erickerickson&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=5a737a3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=5a737a3&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10857&quot; title=&quot;Solr loads UNLOADed core on request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10857&quot;&gt;&lt;del&gt;SOLR-10857&lt;/del&gt;&lt;/a&gt;: Solr loads UNLOADed core on request, cleaned up printStackTrace&lt;/p&gt;</comment>
                            <comment id="16046767" author="jira-bot" created="Mon, 12 Jun 2017 16:49:10 +0000"  >&lt;p&gt;Commit 40368ec6b01d2f1198cbe57f7374233d74631249 in lucene-solr&apos;s branch refs/heads/branch_6x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=erickerickson&quot; class=&quot;user-hover&quot; rel=&quot;erickerickson&quot;&gt;erickerickson&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=40368ec&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=40368ec&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10857&quot; title=&quot;Solr loads UNLOADed core on request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10857&quot;&gt;&lt;del&gt;SOLR-10857&lt;/del&gt;&lt;/a&gt;: Solr loads UNLOADed core on request, cleaned up printStackTrace&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 5a737a3aab969b120a84dbc7cd7ed351796576b3)&lt;/p&gt;</comment>
                            <comment id="16046773" author="jira-bot" created="Mon, 12 Jun 2017 16:54:12 +0000"  >&lt;p&gt;Commit 59af129548d50c07b3b9b9f879a7105b5dfcd3d8 in lucene-solr&apos;s branch refs/heads/branch_6_6 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=erickerickson&quot; class=&quot;user-hover&quot; rel=&quot;erickerickson&quot;&gt;erickerickson&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=59af129&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=59af129&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-10857&quot; title=&quot;Solr loads UNLOADed core on request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-10857&quot;&gt;&lt;del&gt;SOLR-10857&lt;/del&gt;&lt;/a&gt;: Solr loads UNLOADed core on request, cleaned up printStackTrace&lt;/p&gt;

&lt;p&gt;(cherry picked from commit 5a737a3aab969b120a84dbc7cd7ed351796576b3)&lt;br/&gt;
(cherry picked from commit 40368ec6b01d2f1198cbe57f7374233d74631249)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13036427">SOLR-10007</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12872495" name="SOLR-10857.patch" size="6030" author="erickerickson" created="Sun, 11 Jun 2017 19:23:25 +0000"/>
                            <attachment id="12872267" name="SOLR-10857.patch" size="3734" author="mkhl" created="Fri, 9 Jun 2017 14:29:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 23 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3g3b3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>