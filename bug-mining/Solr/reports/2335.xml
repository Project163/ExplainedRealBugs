<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:02:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-5890] Delete silently fails if not sent to shard where document was added</title>
                <link>https://issues.apache.org/jira/browse/SOLR-5890</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;We have SolrCloud set up with two shards, each with a leader and a replica.  We use haproxy to distribute requests between the four nodes.&lt;/p&gt;

&lt;p&gt;Regardless of which node we send an add request to, following a commit, the newly-added document is returned in a search, as expected.&lt;/p&gt;

&lt;p&gt;However, we can only delete a document if the delete request is sent to a node in the shard where the document was added.  If we send the delete request to a node in the other shard (and then send a commit) the document is not deleted.  Such a delete request will get a 200 response, with the following body:&lt;/p&gt;

&lt;p&gt;  {&apos;responseHeader&apos;=&amp;gt;{&apos;status&apos;=&amp;gt;0,&apos;QTime&apos;=&amp;gt;7}}&lt;/p&gt;

&lt;p&gt;Apart from the the very low QTime, this is indistinguishable from a successful delete.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Debian 7.4.&lt;/p&gt;</environment>
        <key id="12702660">SOLR-5890</key>
            <summary>Delete silently fails if not sent to shard where document was added</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="noble.paul">Noble Paul</assignee>
                                    <reporter username="inglesp">Peter Inglesby</reporter>
                        <labels>
                            <label>difficulty-medium</label>
                            <label>impact-medium</label>
                            <label>workaround-exists</label>
                    </labels>
                <created>Thu, 20 Mar 2014 15:39:38 +0000</created>
                <updated>Wed, 2 Oct 2019 17:24:49 +0000</updated>
                            <resolved>Mon, 9 Feb 2015 18:00:44 +0000</resolved>
                                    <version>4.7</version>
                                    <fixVersion>5.1</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                    <component>SolrCloud</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>16</watches>
                                                                                                                <comments>
                            <comment id="13941862" author="markrmiller@gmail.com" created="Thu, 20 Mar 2014 15:53:35 +0000"  >&lt;p&gt;Very strange - the request should be forwarded. This will be interesting.&lt;/p&gt;</comment>
                            <comment id="13941865" author="markrmiller@gmail.com" created="Thu, 20 Mar 2014 15:55:39 +0000"  >&lt;p&gt;If you look at the SolrAdmin cloud section, under the zk tree view, what router impl do you see in clusterstate.json? Is it implicit by any chance?&lt;/p&gt;</comment>
                            <comment id="13941897" author="xavriley" created="Thu, 20 Mar 2014 16:20:06 +0000"  >&lt;p&gt;Yes router is set to &quot;implicit&quot;&lt;/p&gt;</comment>
                            <comment id="13942114" author="bretthoerner" created="Thu, 20 Mar 2014 18:44:40 +0000"  >&lt;p&gt;I believe I have the same issue (using implicit also). Is there any way for me as the user to send the equivalent of &quot;&lt;em&gt;route&lt;/em&gt;&quot; with a delete by ID? I have enough information to target the right shard, I&apos;m just not sure how to &quot;tell&quot; it that.&lt;/p&gt;</comment>
                            <comment id="13942957" author="inglesp" created="Fri, 21 Mar 2014 10:51:25 +0000"  >&lt;p&gt;As Xavier (my colleague) said, the value of the &quot;router&quot; is &quot;implicit&quot;.&lt;/p&gt;

&lt;p&gt;Is there anything else you&apos;d like from us in the way of diagnostics?&lt;/p&gt;</comment>
                            <comment id="13943095" author="markrmiller@gmail.com" created="Fri, 21 Mar 2014 14:26:34 +0000"  >&lt;p&gt;That is why deletes won&apos;t distribute. With the implicit router, you take on handling updates yourself.&lt;/p&gt;</comment>
                            <comment id="13943105" author="bretthoerner" created="Fri, 21 Mar 2014 14:42:50 +0000"  >&lt;p&gt;Couldn&apos;t (shouldn&apos;t) there be an equivalent to setting _&lt;em&gt;route&lt;/em&gt;_ but for deletes, though? I&apos;m happy to tell it where to go, and I&apos;d like to avoid having to leave my handy CloudSolrServer and go to handling my own clients and sending every delete directly to specific servers. Or is there already a way to do these deletes using my single CloudSolrServer instance?&lt;/p&gt;</comment>
                            <comment id="13943129" author="yseeley@gmail.com" created="Fri, 21 Mar 2014 15:05:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;Couldn&apos;t (shouldn&apos;t) there be an equivalent to setting &amp;#95;route&amp;#95; but for deletes, though?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, the intention of the &quot;implicit&quot; router was that the default route is defined by the receiving node.  But one should also be able to provide a &amp;#95;route&amp;#95; that is equal to the shard name.  I haven&apos;t tried this to see if it still works, but I thought that it did at one time.&lt;/p&gt;</comment>
                            <comment id="13943137" author="bretthoerner" created="Fri, 21 Mar 2014 15:09:18 +0000"  >&lt;p&gt;Where can we provide a _&lt;em&gt;route&lt;/em&gt;_ given the API of (new UpdateRequest).deleteById(1); ? Is there some other API I should be using for this?&lt;/p&gt;</comment>
                            <comment id="13944505" author="markrmiller@gmail.com" created="Sun, 23 Mar 2014 18:07:18 +0000"  >&lt;p&gt;You should be able to simply use UpdateRequest#setParam(&quot;&lt;em&gt;route&lt;/em&gt;&quot;, &quot;value&quot;).&lt;/p&gt;

&lt;p&gt;Feel free to open an issue and provide a patch for first class support &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13944535" author="bretthoerner" created="Sun, 23 Mar 2014 19:01:50 +0000"  >&lt;p&gt;Ah, I gotcha. I thought you meant I could set it per ID delete (vs at the request level), sort of like I can set _&lt;em&gt;route&lt;/em&gt;_ inside of a single SolrDocument.&lt;/p&gt;

&lt;p&gt;But then I suppose that&apos;s what you mean by first class? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13944960" author="inglesp" created="Mon, 24 Mar 2014 12:15:54 +0000"  >&lt;p&gt;Mark, can you point us to where the SolrCloud router configuration is documented?&lt;/p&gt;</comment>
                            <comment id="13945143" author="bretthoerner" created="Mon, 24 Mar 2014 14:16:47 +0000"  >&lt;p&gt;See &quot;Document Routing&quot; here: &lt;a href=&quot;https://cwiki.apache.org/confluence/display/solr/Shards+and+Indexing+Data+in+SolrCloud&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/solr/Shards+and+Indexing+Data+in+SolrCloud&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13945349" author="shawn grant" created="Mon, 24 Mar 2014 16:58:05 +0000"  >&lt;p&gt;I&apos;m seeing the same problem on 4.6.1 using compositeId and a custom routing field.&lt;/p&gt;

&lt;p&gt;&quot;router&quot;:&lt;/p&gt;
{
      &quot;field&quot;:&quot;docHash&quot;,
      &quot;name&quot;:&quot;compositeId&quot;}
&lt;p&gt;,&lt;/p&gt;

&lt;p&gt;fyi, I&apos;m wanting to use the docHash field for routing so that duplicate docs are on the same shard allowing for queries using grouping... or did I misread the Document Routing wiki page and configure that incorrectly?&lt;/p&gt;</comment>
                            <comment id="13945363" author="shalinmangar" created="Mon, 24 Mar 2014 17:10:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;But then I suppose that&apos;s what you mean by first class?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think Mark meant that we can add a SolrJ method to set &amp;#95;route&amp;#95; on the request.&lt;/p&gt;</comment>
                            <comment id="13945619" author="bretthoerner" created="Mon, 24 Mar 2014 19:57:08 +0000"  >&lt;p&gt;I see. Would you agree it&apos;s a bit odd that I can add a different &amp;#95;route&amp;#95; to 1000 documents and send them in a single UpdateRequest, but if I want to delete 1000 different documents by ID I need to set a top-level &amp;#95;route&amp;#95; on the entire request (vs somehow setting it per delete)? That, to me, is the first class bit that&apos;s missing.&lt;/p&gt;

&lt;p&gt;I&apos;m not asking someone to write it for me, btw. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I just want to make sure my idea is sane here.&lt;/p&gt;</comment>
                            <comment id="13945734" author="yseeley@gmail.com" created="Mon, 24 Mar 2014 21:39:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;That, to me, is the first class bit that&apos;s missing.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yep, the ability to add routing info to any update (even in a batch) was planned from the start - but no one has gotten around to it yet.&lt;/p&gt;</comment>
                            <comment id="13945753" author="markrmiller@gmail.com" created="Mon, 24 Mar 2014 21:50:41 +0000"  >&lt;p&gt;Yes, I essentially meant all these things. First class solrj api support, first class UpdateRequest support, etc. For properties that can be per update or per doc, that means adding support like we currently have for version and commitWithin.&lt;/p&gt;

&lt;p&gt;The tricky part is compat - we use a map so it&apos;s easy to extend, but in the rolling update case, you could send these fine grained properties from new nodes and old nodes would ignore the new ones.&lt;/p&gt;</comment>
                            <comment id="13946685" author="shawn grant" created="Tue, 25 Mar 2014 15:37:44 +0000"  >&lt;p&gt;I was able to work around the issue and get the delete command distributed by specifying the id as a query instead of directly by id.&lt;/p&gt;</comment>
                            <comment id="13971307" author="thetaphi" created="Wed, 16 Apr 2014 12:57:44 +0000"  >&lt;p&gt;Move issue to Solr 4.9.&lt;/p&gt;</comment>
                            <comment id="13991988" author="josejoaqu&#237;n" created="Wed, 7 May 2014 16:42:36 +0000"  >&lt;p&gt;My delete command by ID on Solr 4.7.1 (implicit routing) works with commit=true even when it&apos;s not adressed to the shard where the document resides.&lt;br/&gt;
But commitWithin only works when the command is adressed to the precise shard.&lt;/p&gt;</comment>
                            <comment id="14166642" author="josejoaqu&#237;n" created="Fri, 10 Oct 2014 11:09:54 +0000"  >&lt;p&gt;Solr 4.10.1, a collection with only one shard and 2 replicas, router compositeId.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;/update?stream.body=&amp;lt;delete&amp;gt;&amp;lt;id&amp;gt;1&amp;lt;/id&amp;gt;&amp;lt;/delete&amp;gt;&amp;amp;commit=true&lt;/tt&gt;&lt;br/&gt;
works fine. The document is removed from both replicas.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;/update?stream.body=&amp;lt;delete&amp;gt;&amp;lt;query&amp;gt;ID:1&amp;lt;/query&amp;gt;&amp;lt;/delete&amp;gt;&amp;amp;commitWithin=x&lt;/tt&gt; and&lt;br/&gt;
&lt;tt&gt;/update?stream.body=&amp;lt;delete&amp;gt;&amp;lt;id&amp;gt;1&amp;lt;/id&amp;gt;&amp;lt;/delete&amp;gt;&amp;amp;commitWithin=x&lt;/tt&gt;&lt;br/&gt;
don&apos;t work. The document remains in one replica.&lt;/p&gt;</comment>
                            <comment id="14232906" author="noble.paul" created="Wed, 3 Dec 2014 11:47:08 +0000"  >&lt;p&gt;Implicit router can work 2 ways. &lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Docs reside in the node where it is sent to&lt;/li&gt;
	&lt;li&gt;Or use a route as the actual name of the shard&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Whenever it is not possible to identify the shard correctly (either using &lt;tt&gt;id&lt;/tt&gt; or &lt;tt&gt;router.field&lt;/tt&gt; ) the requests should be distributed across the cluster &lt;/p&gt;</comment>
                            <comment id="14234200" author="ichattopadhyaya" created="Thu, 4 Dec 2014 13:39:17 +0000"  >&lt;p&gt;Here are my observations after some limited testing:&lt;/p&gt;

&lt;p&gt;Implicit router&lt;br/&gt;
-----------------&lt;br/&gt;
1. Without router.field defined, deleteByQuery.&lt;br/&gt;
This worked for me, even without &lt;em&gt;route&lt;/em&gt;, while sending the delete update request to a different shard.&lt;/p&gt;

&lt;p&gt;2. Without router.field defined, deleteById.&lt;br/&gt;
This worked for me only once I send the &lt;em&gt;route&lt;/em&gt; parameter with the correct shard name.&lt;/p&gt;

&lt;p&gt;3. With router.field defined, deleteByQuery.&lt;br/&gt;
This worked for me, even without &lt;em&gt;route&lt;/em&gt;, while sending the delete update request to a different shard.&lt;/p&gt;

&lt;p&gt;4. With router.field defined, deleteById.&lt;br/&gt;
This worked for me with &lt;em&gt;route&lt;/em&gt; parameter, while sending the delete update request to a different shard.&lt;/p&gt;
</comment>
                            <comment id="14234208" author="ichattopadhyaya" created="Thu, 4 Dec 2014 13:53:27 +0000"  >&lt;p&gt;For supporting &lt;em&gt;route&lt;/em&gt; parameter per id in a deleteById request, instead of a &lt;em&gt;route&lt;/em&gt; parameter per request, I propose the following changes to the request format.&lt;/p&gt;

&lt;p&gt;JSON:&lt;br/&gt;
&quot;delete&quot;: &lt;/p&gt;
{ &quot;id&quot;:&quot;ID&quot; , &quot;_route_&quot;:&quot;route&quot;}

&lt;p&gt;XML:&lt;br/&gt;
&amp;lt;delete&amp;gt;&lt;br/&gt;
  &amp;lt;id &quot;&lt;em&gt;route&lt;/em&gt;&quot;=&quot;shard1&quot;&amp;gt;123&amp;lt;/id&amp;gt;&lt;br/&gt;
  &amp;lt;id &quot;&lt;em&gt;route&lt;/em&gt;&quot;=&quot;shard2&quot;&amp;gt;124&amp;lt;/id&amp;gt;&lt;br/&gt;
&amp;lt;/delete&amp;gt;&lt;/p&gt;

&lt;p&gt;Also, like&lt;br/&gt;
 UpdateRequest.deleteById(String id),&lt;br/&gt;
I propose another method:&lt;br/&gt;
 UpdateRequest.deleteById(String id, String route)&lt;/p&gt;

&lt;p&gt;Can someone please review these suggestions?&lt;/p&gt;</comment>
                            <comment id="14234211" author="ichattopadhyaya" created="Thu, 4 Dec 2014 13:57:43 +0000"  >&lt;p&gt;&amp;gt; Whenever it is not possible to identify the shard correctly (either using id or router.field ) the requests should be distributed across the cluster &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; For a deleteById (implicit or compositeId router) without a _&lt;em&gt;route&lt;/em&gt;_ parameter, do you think it is reasonable to distribute the request across the cluster always? &lt;/p&gt;</comment>
                            <comment id="14234650" author="shalinmangar" created="Thu, 4 Dec 2014 21:32:08 +0000"  >&lt;blockquote&gt;
&lt;p&gt;2. Without router.field defined, deleteById.&lt;br/&gt;
This worked for me only once I send the route parameter with the correct shard name.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Are you sure? Because no router.field means that unique key is being used for routing and DistributedUpdateProcessor#processDelete uses the indexed id to hash and find the right shard. I wrote a quick test to confirm this.&lt;/p&gt;</comment>
                            <comment id="14235162" author="ichattopadhyaya" created="Fri, 5 Dec 2014 06:34:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt; Yes, I tested it (patch attached for the test). Here, as far as I understand, since the router is implicit, there is no hashing of the id performed to find the right shard; instead the deleteById is performed on the shard to which the update request is sent to (unless a specific &lt;em&gt;route&lt;/em&gt; param is present). Maybe I&apos;m missing something?&lt;/p&gt;</comment>
                            <comment id="14235418" author="shalinmangar" created="Fri, 5 Dec 2014 12:15:46 +0000"  >&lt;p&gt;Ah I missed the implicit router part. Yes, that makes sense.&lt;/p&gt;</comment>
                            <comment id="14236722" author="shalinmangar" created="Sat, 6 Dec 2014 10:35:20 +0000"  >&lt;blockquote&gt;&lt;p&gt;Whenever it is not possible to identify the shard correctly (either using id or router.field ) the requests should be distributed across the cluster&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We should also support &lt;em&gt;route&lt;/em&gt; parameter for updates. So if a &lt;em&gt;route&lt;/em&gt; is specified then that should be used to send the update to the correct node. If no &lt;em&gt;route&lt;/em&gt; is specified and the router is implicit, we should send the request across the cluster.&lt;/p&gt;

&lt;p&gt;As an extension to this issue, we should add first-class support for &lt;em&gt;route&lt;/em&gt; for delete-by-id in the request formats. But that can be done as another issue.&lt;/p&gt;</comment>
                            <comment id="14238036" author="ichattopadhyaya" created="Mon, 8 Dec 2014 16:34:29 +0000"  >&lt;p&gt;Attached patch that has the following fix:&lt;br/&gt;
1. deleteById command now has a _&lt;em&gt;route&lt;/em&gt;_ parameter.&lt;br/&gt;
2. commitWithin wasn&apos;t working (at least with the implicit router). Added a fix in SolrCmdDistributor.&lt;/p&gt;

&lt;p&gt;TODO: &lt;br/&gt;
Absent _&lt;em&gt;route&lt;/em&gt;_ parameter should distribute the deleteById command to all shard leaders with implicit router.&lt;/p&gt;</comment>
                            <comment id="14263581" author="ichattopadhyaya" created="Sat, 3 Jan 2015 17:39:34 +0000"  >&lt;p&gt;Updated the patch with the above TODO item. This patch now has:&lt;/p&gt;

&lt;p&gt;1. deleteById command now has a &lt;em&gt;route&lt;/em&gt; parameter.&lt;br/&gt;
2. commitWithin wasn&apos;t working (at least with the implicit router). Added a fix in SolrCmdDistributor.&lt;br/&gt;
3. deleteById command (implicit router) should be distributed to all shard leaders if no &lt;em&gt;route&lt;/em&gt; parameter is present.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shalin&quot; class=&quot;user-hover&quot; rel=&quot;shalin&quot;&gt;shalin&lt;/a&gt;, please review (review request &lt;a href=&quot;https://reviews.apache.org/r/29561/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/29561/&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="14264470" author="noble.paul" created="Mon, 5 Jan 2015 10:38:55 +0000"  >&lt;p&gt;The logic of identifying the slice should not be in DistributedUpdateProcessor . Lets move it to the router implementation and keep DistributedUpdateProcessor totally agnostic of that part .&lt;/p&gt;

&lt;p&gt;Please add support to JSONLoader for this format&lt;/p&gt;</comment>
                            <comment id="14264493" author="ichattopadhyaya" created="Mon, 5 Jan 2015 11:16:00 +0000"  >&lt;p&gt;Thanks for your review, Noble. I&apos;ve made the two changes and updated the patch.&lt;/p&gt;</comment>
                            <comment id="14264525" author="yseeley@gmail.com" created="Mon, 5 Jan 2015 12:00:42 +0000"  >&lt;blockquote&gt;&lt;p&gt;deleteById command (implicit router) should be distributed to all shard leaders if no route parameter is present.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not sure we should do this by default...&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Previously working systems will now work differently (hopefully just slow down)&lt;/li&gt;
	&lt;li&gt;It doesn&apos;t alleviate the fundamental issue that clients need to know where documents live with the &amp;#95;implicit&amp;#95; router... If one updates a document, they need to know the correct shard to send it to or else it will cause a duplicate in the system.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;One thing to consider is to have some sort of &lt;b&gt;strict&lt;/b&gt; mode... or even a different router, that &lt;b&gt;requires&lt;/b&gt; &amp;#95;route&amp;#95; to be set for all adds/deletes (and can optionally broadcast deletes).&lt;/p&gt;</comment>
                            <comment id="14264553" author="ichattopadhyaya" created="Mon, 5 Jan 2015 12:50:24 +0000"  >&lt;p&gt;Removed the broadcast deleteById commands (without _&lt;em&gt;route&lt;/em&gt;_ parameter, implicit router) and added a new patch. We can discuss the need for broadcast of deleteById for implicit router (without _&lt;em&gt;route&lt;/em&gt;_) in another issue (&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6910&quot; title=&quot;deleteById without _route_ param for implicit router could be broadcast&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6910&quot;&gt;SOLR-6910&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="14280162" author="noble.paul" created="Fri, 16 Jan 2015 12:29:25 +0000"  >&lt;p&gt;This does not take care of the case when hash based routing is not done on the uniqueKey field &lt;/p&gt;</comment>
                            <comment id="14280165" author="ichattopadhyaya" created="Fri, 16 Jan 2015 12:32:39 +0000"  >&lt;p&gt;Ah, indeed! I missed that part. I&apos;ll update the patch.&lt;/p&gt;</comment>
                            <comment id="14294129" author="ichattopadhyaya" created="Tue, 27 Jan 2015 20:28:03 +0000"  >&lt;p&gt;Updated the patch, now with the Hash based router also honouring the _&lt;em&gt;route&lt;/em&gt;_ param.&lt;/p&gt;

&lt;p&gt;1. deleteById command now has a _&lt;em&gt;route&lt;/em&gt;_ parameter. In implicit router, the target shard can be specified. In compositeId router, the route parameter is hashed to obtain the target slice (useful for collections that use router.field).&lt;br/&gt;
2. commitWithin wasn&apos;t working. Added a fix in SolrCmdDistributor.&lt;/p&gt;</comment>
                            <comment id="14295686" author="markrmiller@gmail.com" created="Wed, 28 Jan 2015 19:35:11 +0000"  >&lt;p&gt;High level, patch looks good, but adds some bad formatting:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;+    if(&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If statements should have a space before (&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getRoute() {
+    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; route;
+  }
+  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setRoute(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; route) {
+    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.route = route;
+  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Should be a newline before public.&lt;/p&gt;</comment>
                            <comment id="14295851" author="ichattopadhyaya" created="Wed, 28 Jan 2015 21:01:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt;, thanks for your review. I&apos;ve updated the patch with the formatting fixes.&lt;/p&gt;</comment>
                            <comment id="14309079" author="noble.paul" created="Fri, 6 Feb 2015 12:55:27 +0000"  >&lt;p&gt;with formatting corrected&lt;/p&gt;</comment>
                            <comment id="14312056" author="ichattopadhyaya" created="Mon, 9 Feb 2015 10:12:29 +0000"  >&lt;p&gt;Updated the patch with an added test for the XmlLoader changes.&lt;/p&gt;</comment>
                            <comment id="14312541" author="jira-bot" created="Mon, 9 Feb 2015 18:02:58 +0000"  >&lt;p&gt;Commit 1658486 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1658486&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1658486&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5890&quot; title=&quot;Delete silently fails if not sent to shard where document was added&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5890&quot;&gt;&lt;del&gt;SOLR-5890&lt;/del&gt;&lt;/a&gt;: Delete silently fails if not sent to shard where document was&lt;br/&gt;
  added&lt;/p&gt;</comment>
                            <comment id="14312668" author="jira-bot" created="Mon, 9 Feb 2015 19:10:17 +0000"  >&lt;p&gt;Commit 1658549 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1658549&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1658549&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-5890&quot; title=&quot;Delete silently fails if not sent to shard where document was added&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-5890&quot;&gt;&lt;del&gt;SOLR-5890&lt;/del&gt;&lt;/a&gt;: Delete silently fails if not sent to shard where document was added&lt;/p&gt;</comment>
                            <comment id="14495265" author="thelabdude" created="Wed, 15 Apr 2015 00:30:20 +0000"  >&lt;p&gt;Bulk close after 5.1 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12767610">SOLR-6984</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12952954">SOLR-8889</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13180881">SOLR-12694</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12764898">SOLR-6910</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12685259" name="5890_tests.patch" size="11309" author="ichattopadhyaya" created="Fri, 5 Dec 2014 06:34:59 +0000"/>
                            <attachment id="12690077" name="SOLR-5890-without-broadcast.patch" size="23530" author="ichattopadhyaya" created="Mon, 5 Jan 2015 12:50:24 +0000"/>
                            <attachment id="12697451" name="SOLR-5890.patch" size="31902" author="ichattopadhyaya" created="Mon, 9 Feb 2015 10:31:56 +0000"/>
                            <attachment id="12697449" name="SOLR-5890.patch" size="31943" author="ichattopadhyaya" created="Mon, 9 Feb 2015 10:12:29 +0000"/>
                            <attachment id="12697016" name="SOLR-5890.patch" size="30654" author="noble.paul" created="Fri, 6 Feb 2015 12:55:27 +0000"/>
                            <attachment id="12695085" name="SOLR-5890.patch" size="29313" author="ichattopadhyaya" created="Wed, 28 Jan 2015 21:01:12 +0000"/>
                            <attachment id="12694842" name="SOLR-5890.patch" size="29305" author="ichattopadhyaya" created="Tue, 27 Jan 2015 20:28:03 +0000"/>
                            <attachment id="12690064" name="SOLR-5890.patch" size="23983" author="ichattopadhyaya" created="Mon, 5 Jan 2015 11:16:00 +0000"/>
                            <attachment id="12689932" name="SOLR-5890.patch" size="15832" author="ichattopadhyaya" created="Sat, 3 Jan 2015 18:38:28 +0000"/>
                            <attachment id="12685771" name="SOLR-5890.patch" size="20970" author="ichattopadhyaya" created="Mon, 8 Dec 2014 16:34:29 +0000"/>
                            <attachment id="12689930" name="SOLR-5980.patch" size="15830" author="ichattopadhyaya" created="Sat, 3 Jan 2015 17:39:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>380998</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1tn6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>381276</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>