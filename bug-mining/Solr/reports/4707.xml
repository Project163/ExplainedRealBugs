<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:48:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-15573] Basic auth must set blockUnknown=true for Admin UI to force login, with blockUnknown=false there&apos;s no way to login to the admin UI to do privileged actions</title>
                <link>https://issues.apache.org/jira/browse/SOLR-15573</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;I ran the following command to enable basic auth for my Solr installation:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
bin/solr auth enable -type basicAuth -prompt &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -z localhost:2181 -blockUnknown &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It created the security policy with &lt;tt&gt;blockUnknown=false&lt;/tt&gt;. That&apos;s an issue with arg parsing in BASH (easy to fix) ... the bigger issue is the Admin UI relies on getting a 401 from the backend to show login / logout but with blockUnknown=false, this never shows.&lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;auth&lt;/tt&gt; utility only creates role bindings for the following predefined permissions:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;security-edit&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;role&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;admin&quot;&lt;/span&gt;},
  {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;collection-admin-edit&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;role&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;admin&quot;&lt;/span&gt;},
  {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;core-admin-edit&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;role&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;admin&quot;&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem is when &lt;tt&gt;blockUnknown=false&lt;/tt&gt;, the UI doesn&apos;t hit any endpoints that trigger a 401 to cause the Admin UI to prompt for a login. I think the initial &lt;tt&gt;security.json&lt;/tt&gt; created by the &lt;tt&gt;auth&lt;/tt&gt; tool should also include:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;security-read&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;role&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;admin&quot;&lt;/span&gt;},
  {&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;config-edit&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;role&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;admin&quot;&lt;/span&gt;},
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;tt&gt;config-edit&lt;/tt&gt; is needed for the new Schema Designer UI and we shouldn&apos;t allow un-authenticated users to edit configs anyway.&lt;/p&gt;

&lt;p&gt;With these two new permissions in place, when an un-authenticated user navigates to the new Security screen, they will be redirected to login.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13392823">SOLR-15573</key>
            <summary>Basic auth must set blockUnknown=true for Admin UI to force login, with blockUnknown=false there&apos;s no way to login to the admin UI to do privileged actions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thelabdude">Timothy Potter</assignee>
                                    <reporter username="thelabdude">Timothy Potter</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Jul 2021 21:30:08 +0000</created>
                <updated>Tue, 28 Sep 2021 20:27:17 +0000</updated>
                            <resolved>Tue, 3 Aug 2021 17:16:04 +0000</resolved>
                                                    <fixVersion>9.0</fixVersion>
                    <fixVersion>8.10</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="17392371" author="jira-bot" created="Tue, 3 Aug 2021 15:43:09 +0000"  >&lt;p&gt;Commit be8ccfbfaf48454074322135918d63bd772480e4 in solr&apos;s branch refs/heads/main from Timothy Potter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=solr.git;h=be8ccfb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=solr.git;h=be8ccfb&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15573&quot; title=&quot;Basic auth must set blockUnknown=true for Admin UI to force login, with blockUnknown=false there&amp;#39;s no way to login to the admin UI to do privileged actions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15573&quot;&gt;&lt;del&gt;SOLR-15573&lt;/del&gt;&lt;/a&gt;: bin/solr auth tool should provide role bindings for security-read and config-edit by default (#245)&lt;/p&gt;
</comment>
                            <comment id="17392429" author="jira-bot" created="Tue, 3 Aug 2021 17:16:16 +0000"  >&lt;p&gt;Commit 2156893b0ab0fe839e7cc81d6b48c6b2e69e7e7e in lucene-solr&apos;s branch refs/heads/branch_8x from Timothy Potter&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=2156893&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=2156893&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-15573&quot; title=&quot;Basic auth must set blockUnknown=true for Admin UI to force login, with blockUnknown=false there&amp;#39;s no way to login to the admin UI to do privileged actions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-15573&quot;&gt;&lt;del&gt;SOLR-15573&lt;/del&gt;&lt;/a&gt;: bin/solr auth tool should provide role bindings for security-read and config-edit by default (#2546)&lt;/p&gt;
</comment>
                            <comment id="17421765" author="thelabdude" created="Tue, 28 Sep 2021 20:23:22 +0000"  >&lt;p&gt;Closing after the 8.10.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13031292" name="no-username-but-basic-auth-enabled.png" size="49908" author="thelabdude" created="Fri, 30 Jul 2021 21:32:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0thps:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>