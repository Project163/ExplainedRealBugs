<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 03:59:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-3774] /admin/mbean returning duplicate search handlers with names that map to their classes?</title>
                <link>https://issues.apache.org/jira/browse/SOLR-3774</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;Offshoot of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3232&quot; title=&quot;Admin UI: query form should have a menu to pick a request handler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3232&quot;&gt;SOLR-3232&lt;/a&gt;...&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Along with some valid entries with names equal to the request handler names (/get search /browse) it also turned up one with the name &quot;org.apache.solr.handler.RealTimeGetHandler&quot; and another with the name &quot;org.apache.solr.handler.component.SearchHandler&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;...seems that we may have a bug with request handlers getting registered multiple times, once under their &quot;real&quot; name and once using their class?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12605627">SOLR-3774</key>
            <summary>/admin/mbean returning duplicate search handlers with names that map to their classes?</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                    <reporter username="hossman">Chris M. Hostetter</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Aug 2012 00:28:05 +0000</created>
                <updated>Mon, 9 May 2016 18:52:03 +0000</updated>
                            <resolved>Wed, 19 Nov 2014 21:03:59 +0000</resolved>
                                                    <fixVersion>5.0</fixVersion>
                    <fixVersion>6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="13610175" author="tomasflobbe" created="Fri, 22 Mar 2013 11:53:22 +0000"  >&lt;p&gt;I think there are two problems here. One is that we are registering the request handlers twice, once on RequestHandlers.initHandlersFromConfig(...) and once in SolrResourceLoader.inform(...). The other problem is that we are using the RH classname as the name of the MBean. This will cause problems when you have multiple request handlers of the same class. I think the correct way would be to use the name defined for the request handler in the solrconfig.xml file (as we currently do with SearchComponents). I&apos;ll upload a patch for this. &lt;/p&gt;</comment>
                            <comment id="13610191" author="tomasflobbe" created="Fri, 22 Mar 2013 12:14:58 +0000"  >&lt;p&gt;This fixes the issue. I chose not to modify the RequestHandler interface to add a &quot;setName&quot; method because I think it may be too much impact for this issue, Instead of it I edited the RequestHandlerBase class, but because of that I had to do some instanceofs to set the name. I&apos;m open to other opinions on that. &lt;br/&gt;
The RH are still being registered twice now, but now with the same name, not sure if we should change that because there is no real impact. &lt;/p&gt;</comment>
                            <comment id="14216442" author="markrmiller@gmail.com" created="Tue, 18 Nov 2014 17:11:55 +0000"  >&lt;p&gt;I duplicated this issue with &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6750&quot; title=&quot;Solr adds RequestHandler SolrInfoMBeans twice to the JMX server.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6750&quot;&gt;&lt;del&gt;SOLR-6750&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The way I solved is to not let SolrResourceLoader.inform add any of the same objects that already exist with a simple check of !infoRegistry.containsValue(bean). I think it might be a better check than relying on names because we don&apos;t really ever want to add the same object twice - especially considering &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-6586&quot; title=&quot;JmxMonitoredMap#getAttribute is not very efficient.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-6586&quot;&gt;SOLR-6586&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (SolrInfoMBean bean : arr) {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!infoRegistry.containsValue(bean)) {
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
          infoRegistry.put(bean.getName(), bean);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
          log.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;could not register MBean &lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + bean.getName() + &lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;&lt;/span&gt;.&quot;&lt;/span&gt;, e);
        }
      }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14216493" author="tomasflobbe" created="Tue, 18 Nov 2014 17:47:01 +0000"  >&lt;p&gt;I think that makes sense&lt;/p&gt;</comment>
                            <comment id="14216668" author="gchanan" created="Tue, 18 Nov 2014 19:43:04 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14216911" author="shalinmangar" created="Tue, 18 Nov 2014 22:13:59 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14218384" author="jira-bot" created="Wed, 19 Nov 2014 19:45:40 +0000"  >&lt;p&gt;Commit 1640623 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1640623&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1640623&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3774&quot; title=&quot;/admin/mbean returning duplicate search handlers with names that map to their classes?&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3774&quot;&gt;&lt;del&gt;SOLR-3774&lt;/del&gt;&lt;/a&gt;: Solr adds RequestHandler SolrInfoMBeans twice to the JMX server.&lt;/p&gt;</comment>
                            <comment id="14218394" author="jira-bot" created="Wed, 19 Nov 2014 19:50:51 +0000"  >&lt;p&gt;Commit 1640625 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1640625&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1640625&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3774&quot; title=&quot;/admin/mbean returning duplicate search handlers with names that map to their classes?&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3774&quot;&gt;&lt;del&gt;SOLR-3774&lt;/del&gt;&lt;/a&gt;: Solr adds RequestHandler SolrInfoMBeans twice to the JMX server.&lt;/p&gt;</comment>
                            <comment id="14219484" author="jira-bot" created="Thu, 20 Nov 2014 15:25:44 +0000"  >&lt;p&gt;Commit 1640756 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/trunk&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1640756&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1640756&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3774&quot; title=&quot;/admin/mbean returning duplicate search handlers with names that map to their classes?&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3774&quot;&gt;&lt;del&gt;SOLR-3774&lt;/del&gt;&lt;/a&gt;: Fix test.&lt;/p&gt;</comment>
                            <comment id="14219496" author="jira-bot" created="Thu, 20 Nov 2014 15:36:54 +0000"  >&lt;p&gt;Commit 1640757 from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markrmiller%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;markrmiller@gmail.com&quot;&gt;markrmiller@gmail.com&lt;/a&gt; in branch &apos;dev/branches/branch_5x&apos;&lt;br/&gt;
[ &lt;a href=&quot;https://svn.apache.org/r1640757&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1640757&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-3774&quot; title=&quot;/admin/mbean returning duplicate search handlers with names that map to their classes?&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-3774&quot;&gt;&lt;del&gt;SOLR-3774&lt;/del&gt;&lt;/a&gt;: Fix test.&lt;/p&gt;</comment>
                            <comment id="14332597" author="anshumg" created="Mon, 23 Feb 2015 05:00:53 +0000"  >&lt;p&gt;Bulk close after 5.0 release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12755819">SOLR-6750</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12660826">SOLR-5095</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12545985">SOLR-3232</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12682222" name="SOLR-3774.patch" size="800" author="markrmiller@gmail.com" created="Tue, 18 Nov 2014 19:27:11 +0000"/>
                            <attachment id="12575004" name="SOLR-3774.patch" size="5514" author="tflobbe" created="Fri, 22 Mar 2013 12:14:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>243216</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03cpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17493</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>