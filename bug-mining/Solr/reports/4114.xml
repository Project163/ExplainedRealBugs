<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 04:36:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SOLR-13016] Computing suggestions when policy have &quot;#EQUAL&quot; or &quot;#ALL&quot; rules take too long</title>
                <link>https://issues.apache.org/jira/browse/SOLR-13016</link>
                <project id="12310230" key="SOLR">Solr</project>
                    <description>&lt;p&gt;When rules have computed values such as &quot;#EQUAL&quot; or &quot;#ALL&quot; , it takes too long to compute. The problem is these values are computed too many times and as the no:of nodes increase it almost takes forever. These values don&apos;t change and they can be cached&lt;/p&gt;</description>
                <environment></environment>
        <key id="13200785">SOLR-13016</key>
            <summary>Computing suggestions when policy have &quot;#EQUAL&quot; or &quot;#ALL&quot; rules take too long</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="noble.paul">Noble Paul</assignee>
                                    <reporter username="noble.paul">Noble Paul</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Nov 2018 08:06:42 +0000</created>
                <updated>Sat, 8 Jun 2019 15:01:50 +0000</updated>
                            <resolved>Tue, 21 May 2019 19:26:21 +0000</resolved>
                                                    <fixVersion>7.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16702722" author="noble.paul" created="Thu, 29 Nov 2018 04:57:03 +0000"  >&lt;p&gt;This patch brings down the total compuation time to around 1 min using caching. There is more to be done&lt;/p&gt;</comment>
                            <comment id="16706792" author="noble.paul" created="Mon, 3 Dec 2018 07:47:22 +0000"  >&lt;p&gt;added  a timeout option. The UI should only take  a max 10 secs to respond&lt;/p&gt;</comment>
                            <comment id="16709604" author="noble.paul" created="Wed, 5 Dec 2018 05:03:14 +0000"  >&lt;p&gt;there was a bug with sorting . that is fixed in this one&lt;/p&gt;</comment>
                            <comment id="16735639" author="shalinmangar" created="Mon, 7 Jan 2019 10:24:05 +0000"  >&lt;p&gt;Thanks Noble. This patch cuts the computation time down from 10 minutes to 90 seconds for a large cluster (~30 nodes). I&apos;ve tested this quite a bit and looks good to me. Can you get rid of the debug cache statistics and commit this?&lt;/p&gt;

&lt;p&gt;I also found a couple of other bugs while testing this: see &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13123&quot; title=&quot;Free disk based suggester short circuits without exploring all states&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13123&quot;&gt;&lt;del&gt;SOLR-13123&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13124&quot; title=&quot;Free disk based suggestions do not guard against running out of disk &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13124&quot;&gt;&lt;del&gt;SOLR-13124&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16735664" author="shalinmangar" created="Mon, 7 Jan 2019 10:59:10 +0000"  >&lt;p&gt;The latest patch adds the fixes for &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13123&quot; title=&quot;Free disk based suggester short circuits without exploring all states&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13123&quot;&gt;&lt;del&gt;SOLR-13123&lt;/del&gt;&lt;/a&gt; as well as more debug logging.&lt;/p&gt;</comment>
                            <comment id="16738100" author="ab" created="Wed, 9 Jan 2019 10:52:00 +0000"  >&lt;p&gt;This patch uses &lt;tt&gt;System.nanoTime()&lt;/tt&gt; in several places instead of using &lt;tt&gt;cloudManager.getTimeSource().getTimeNs()&lt;/tt&gt;, and this will break the simulator.&lt;/p&gt;

&lt;p&gt;Similarly, &lt;tt&gt;CoresVariable&lt;/tt&gt; uses &lt;tt&gt;System.currentTimeMllis()&lt;/tt&gt; (which is a forbidden API, too) where it should use &lt;tt&gt;ctx.session.cloudManager.getTimeSource().getEpochTimeNs()&lt;/tt&gt; instead as the base for calculations.&lt;/p&gt;</comment>
                            <comment id="16738164" author="jira-bot" created="Wed, 9 Jan 2019 12:20:07 +0000"  >&lt;p&gt;Commit 1e14a6c6d65f437192cf8f56976d07a16806fe95 in lucene-solr&apos;s branch refs/heads/master from Noble Paul&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=1e14a6c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=1e14a6c&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13016&quot; title=&quot;Computing suggestions when policy have &amp;quot;#EQUAL&amp;quot; or &amp;quot;#ALL&amp;quot; rules take too long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13016&quot;&gt;&lt;del&gt;SOLR-13016&lt;/del&gt;&lt;/a&gt;: Computing suggestions when policy have &quot;#EQUAL&quot; or &quot;#ALL&quot; rules take too long&lt;/p&gt;</comment>
                            <comment id="16738204" author="jira-bot" created="Wed, 9 Jan 2019 12:52:58 +0000"  >&lt;p&gt;Commit b53fc70f87620b44a6988b959e2f228fbe4981a6 in lucene-solr&apos;s branch refs/heads/branch_7x from Noble Paul&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=b53fc70&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=b53fc70&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13016&quot; title=&quot;Computing suggestions when policy have &amp;quot;#EQUAL&amp;quot; or &amp;quot;#ALL&amp;quot; rules take too long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13016&quot;&gt;&lt;del&gt;SOLR-13016&lt;/del&gt;&lt;/a&gt;: Computing suggestions when policy have &quot;#EQUAL&quot; or &quot;#ALL&quot; rules take too long&lt;/p&gt;</comment>
                            <comment id="16738205" author="jira-bot" created="Wed, 9 Jan 2019 12:52:59 +0000"  >&lt;p&gt;Commit a9ad1068a829bbd5f5562a16b584c52ca0504abd in lucene-solr&apos;s branch refs/heads/branch_7x from Noble Paul&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=a9ad106&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=a9ad106&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13016&quot; title=&quot;Computing suggestions when policy have &amp;quot;#EQUAL&amp;quot; or &amp;quot;#ALL&amp;quot; rules take too long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13016&quot;&gt;&lt;del&gt;SOLR-13016&lt;/del&gt;&lt;/a&gt;: precommit errors&lt;/p&gt;</comment>
                            <comment id="16738210" author="jira-bot" created="Wed, 9 Jan 2019 12:58:32 +0000"  >&lt;p&gt;Commit 2f6d31364e70752d0690c4db189e45354aaca0de in lucene-solr&apos;s branch refs/heads/branch_8x from Noble Paul&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=2f6d313&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=2f6d313&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13016&quot; title=&quot;Computing suggestions when policy have &amp;quot;#EQUAL&amp;quot; or &amp;quot;#ALL&amp;quot; rules take too long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13016&quot;&gt;&lt;del&gt;SOLR-13016&lt;/del&gt;&lt;/a&gt;: Computing suggestions when policy have &quot;#EQUAL&quot; or &quot;#ALL&quot; rules take too long&lt;/p&gt;</comment>
                            <comment id="16738211" author="jira-bot" created="Wed, 9 Jan 2019 12:58:34 +0000"  >&lt;p&gt;Commit 8bb21f90e1e99d06685011b30eab841d2f1dd4a6 in lucene-solr&apos;s branch refs/heads/branch_8x from Noble Paul&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=8bb21f9&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=8bb21f9&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13016&quot; title=&quot;Computing suggestions when policy have &amp;quot;#EQUAL&amp;quot; or &amp;quot;#ALL&amp;quot; rules take too long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13016&quot;&gt;&lt;del&gt;SOLR-13016&lt;/del&gt;&lt;/a&gt;: precommit errors&lt;/p&gt;</comment>
                            <comment id="16738268" author="jira-bot" created="Wed, 9 Jan 2019 13:58:39 +0000"  >&lt;p&gt;Commit f48fca15fcbaf9a9cdb32487e201447c88fe2cdc in lucene-solr&apos;s branch refs/heads/branch_8x from Noble Paul&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=f48fca1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=f48fca1&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13016&quot; title=&quot;Computing suggestions when policy have &amp;quot;#EQUAL&amp;quot; or &amp;quot;#ALL&amp;quot; rules take too long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13016&quot;&gt;&lt;del&gt;SOLR-13016&lt;/del&gt;&lt;/a&gt;: test errors fixed&lt;/p&gt;</comment>
                            <comment id="16738270" author="jira-bot" created="Wed, 9 Jan 2019 13:59:40 +0000"  >&lt;p&gt;Commit 5ea74afbf0eb24858b102b422df830a2042cdbc5 in lucene-solr&apos;s branch refs/heads/branch_7x from Noble Paul&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=5ea74af&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=5ea74af&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13016&quot; title=&quot;Computing suggestions when policy have &amp;quot;#EQUAL&amp;quot; or &amp;quot;#ALL&amp;quot; rules take too long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13016&quot;&gt;&lt;del&gt;SOLR-13016&lt;/del&gt;&lt;/a&gt;: test errors fixed&lt;/p&gt;</comment>
                            <comment id="16738670" author="dsmiley" created="Wed, 9 Jan 2019 21:14:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; This test still refers to Row.collectionVsShardVsReplicas&#160;&lt;a href=&quot;https://github.com/apache/lucene-solr/blob/master/solr/core/src/test/org/apache/solr/cloud/autoscaling/sim/TestSimPolicyCloud.java#L103&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/lucene-solr/blob/master/solr/core/src/test/org/apache/solr/cloud/autoscaling/sim/TestSimPolicyCloud.java#L103&lt;/a&gt; but you removed it in this commit.  I&apos;m looking at master.&lt;/p&gt;</comment>
                            <comment id="16738890" author="jira-bot" created="Thu, 10 Jan 2019 01:29:41 +0000"  >&lt;p&gt;Commit 3ffc9099bf4eb068df97063ea3f01ece0131fa9d in lucene-solr&apos;s branch refs/heads/master from Noble Paul&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=3ffc909&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=3ffc909&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13016&quot; title=&quot;Computing suggestions when policy have &amp;quot;#EQUAL&amp;quot; or &amp;quot;#ALL&amp;quot; rules take too long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13016&quot;&gt;&lt;del&gt;SOLR-13016&lt;/del&gt;&lt;/a&gt;: test errors fixed&lt;/p&gt;</comment>
                            <comment id="16738891" author="jira-bot" created="Thu, 10 Jan 2019 01:29:42 +0000"  >&lt;p&gt;Commit 0635c657c1a13ab97924cbd9bebf5ecec8a84588 in lucene-solr&apos;s branch refs/heads/master from Noble Paul&lt;br/&gt;
[ &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=0635c65&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=0635c65&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-13016&quot; title=&quot;Computing suggestions when policy have &amp;quot;#EQUAL&amp;quot; or &amp;quot;#ALL&amp;quot; rules take too long&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-13016&quot;&gt;&lt;del&gt;SOLR-13016&lt;/del&gt;&lt;/a&gt;: precommit errors&lt;/p&gt;</comment>
                            <comment id="16845154" author="ctargett" created="Tue, 21 May 2019 19:03:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=noble.paul&quot; class=&quot;user-hover&quot; rel=&quot;noble.paul&quot;&gt;noble.paul&lt;/a&gt; - here&apos;s another issue that appears in 7.7 CHANGES.txt but is not resolved and has no fix version. Is it complete? If not, what else is left to be done in case someone else wants to pick it up?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12953980" name="SOLR-13016.patch" size="599055" author="shalin" created="Mon, 7 Jan 2019 10:58:38 +0000"/>
                            <attachment id="12950642" name="SOLR-13016.patch" size="596745" author="noble.paul" created="Wed, 5 Dec 2018 05:02:34 +0000"/>
                            <attachment id="12950477" name="SOLR-13016.patch" size="592000" author="noble.paul" created="Tue, 4 Dec 2018 00:36:10 +0000"/>
                            <attachment id="12950258" name="SOLR-13016.patch" size="29099" author="noble.paul" created="Sat, 1 Dec 2018 02:19:37 +0000"/>
                            <attachment id="12949937" name="SOLR-13016.patch" size="24230" author="noble.paul" created="Thu, 29 Nov 2018 04:56:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s00wds:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12313321" key="com.atlassian.jira.toolkit:message">
                        <customfieldname>Solr Mailing List Info</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>